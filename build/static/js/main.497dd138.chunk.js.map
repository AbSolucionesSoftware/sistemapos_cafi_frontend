{"version":3,"sources":["gql/Catalogos/usuarios.js","components/SnackBarMessages.js","components/Layouts/LayoutLogin.js","context/Catalogos/initialStatesProducto.js","context/Catalogos/CtxRegProducto.js","context/Catalogos/empresaContext.js","components/Layouts/BackDrop.js","components/ErrorPage.js","gql/Empresa/empresa.js","config/reuserFunctions.js","pages/sucursales/Facturacion/catalogos.js","gql/Facturacion/Facturacion.js","pages/sucursales/Facturacion/CFDISellos/RegistrarSellos.js","pages/sucursales/Facturacion/CFDISellos/EliminarCSD.js","pages/sucursales/Empresa/InformacionFiscal/InformacionFiscal.js","pages/sucursales/Empresa/Datos/MisDatos.js","pages/sucursales/Empresa/MiEmpresa.js","pages/sucursales/Empresa/Empresa.js","pages/sucursales/Catalogos/Producto/unidades.js","pages/sucursales/Catalogos/Producto/PreciosVenta/UnidadesVenta.js","pages/sucursales/Catalogos/Producto/PreciosVenta/Precios.js","pages/sucursales/Catalogos/Producto/calculos_precios.js","pages/sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional.js","context/Compras/comprasContext.js","pages/sucursales/Catalogos/Producto/TallasColores/TablaPresentaciones.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosProductos.js","gql/Catalogos/productos.js","context/Almacenes/crearAlmacen.js","gql/Almacenes/Almacen.js","pages/sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen.js","gql/Catalogos/colores.js","pages/sucursales/Catalogos/Producto/TallasColores/crearColor.js","gql/Catalogos/tallas.js","pages/sucursales/Catalogos/Producto/TallasColores/crearTalla.js","pages/sucursales/Catalogos/Producto/TallasColores/TallasColores.js","pages/sucursales/Compras/AbrirCompra/productos/TallasProducto.js","billing/Facturama/facturama.api.js","gql/CatalogosSat/catalogoProductosSat.js","pages/sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT.js","gql/Catalogos/categorias.js","gql/Catalogos/departamentos.js","gql/Catalogos/marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/registrarInfoGeneral.js","pages/sucursales/Catalogos/Producto/Imagenes/cargarImagenesProducto.js","pages/sucursales/Catalogos/Producto/Inventario&Almacen/AlmacenInicial.js","pages/sucursales/Catalogos/Producto/validaciones.js","gql/Catalogos/centroCostos.js","pages/sucursales/Catalogos/Producto/CentroCostos/CentroCostos.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/tabla_precios.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/PrecioPlazos.js","pages/sucursales/Catalogos/Producto/validateDatos.js","pages/sucursales/Catalogos/Producto/crearProducto.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosVenta.js","pages/sucursales/Compras/AbrirCompra/productos/Descuentos.js","context/Catalogos/crearClienteCtx.js","pages/sucursales/Catalogos/Cliente/RegistrarInfoBasica.js","pages/sucursales/Catalogos/Cliente/RegistroInfoCredito.js","gql/Catalogos/clientes.js","pages/sucursales/Catalogos/Cliente/CrearCliente.js","gql/Compras/compras.js","pages/sucursales/Compras/AbrirCompra/initial_states.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProveedorAlmacen.js","pages/sucursales/Compras/AbrirCompra/productos/mostrar_precios.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProducto.js","pages/sucursales/Compras/AbrirCompra/productos/setOrResetData.js","pages/sucursales/Compras/AbrirCompra/TablaCompras.js","pages/sucursales/Compras/AbrirCompra/ConfirmarCompra.js","pages/sucursales/Compras/AbrirCompra/CompraCredito.js","pages/sucursales/Compras/AbrirCompra/AbrirCompra.js","pages/sucursales/Compras/ComprasRealizadas/ExportarProductosCompra.js","pages/sucursales/Compras/ComprasRealizadas/DatosDeCompra.js","pages/sucursales/Compras/ComprasRealizadas/ListaCompras.js","pages/sucursales/Compras/ComprasRealizadas/ExportarComprasExcel.js","pages/sucursales/Compras/ComprasRealizadas/ComprasRealizadas.js","pages/sucursales/Compras/ComprasEnEspera/VerificarProductos.js","pages/sucursales/Compras/ComprasEnEspera/DatosDeCompraEspera.js","pages/sucursales/Compras/ComprasEnEspera/ListaEnEspera.js","pages/sucursales/Compras/ComprasEnEspera/ComprasEnEspera.js","pages/sucursales/Compras/Compras.js","pages/sucursales/Catalogos/Cliente/ListaClientes.js","pages/sucursales/Catalogos/Cliente/Cliente.js","gql/Catalogos/descuentos.js","pages/sucursales/Catalogos/Producto/Descuentos/ListaPrecios.js","pages/sucursales/Catalogos/Producto/Descuentos/Descuento.js","pages/sucursales/Catalogos/Producto/infoProductoDrawer.js","pages/sucursales/Catalogos/Producto/EliminarProducto.js","pages/sucursales/Catalogos/Producto/ListaProductos.js","pages/sucursales/Catalogos/Producto/ProductosEliminados.js","pages/sucursales/Catalogos/Producto/Productos.js","pages/sucursales/Catalogos/Producto/index.js","pages/sucursales/Catalogos/Tallas/ListaTallas.js","pages/sucursales/Catalogos/Tallas/RegistroTallas.js","pages/sucursales/Catalogos/Tallas/Tallas.js","gql/Catalogos/contabilidad.js","pages/sucursales/Catalogos/Contabilidad/ListaServicios.js","pages/sucursales/Catalogos/Contabilidad/RegistroServicio.js","pages/sucursales/Catalogos/Contabilidad/Contabilidad.js","pages/sucursales/Catalogos/Proveedores/ListaProveedores.js","pages/sucursales/Catalogos/Proveedores/Proovedores.js","pages/sucursales/Catalogos/Cajas/ListaCajas.js","gql/Cajas/cajas.js","pages/sucursales/Catalogos/Cajas/RegistrarCajas.js","pages/sucursales/Catalogos/Cajas/Cajas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso.js","context/Catalogos/usuarioContext.js","pages/sucursales/Catalogos/Usuarios/FormularioUsuario.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Parametros.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Catalogos.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/MiEmpresa.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Compras.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Almacenes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Tesoreria.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Reportes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Ventas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/AsignarPermisos.js","pages/sucursales/Catalogos/Usuarios/CrearUsuario.js","pages/sucursales/Catalogos/Usuarios/ListaUsuario.js","pages/sucursales/Catalogos/Usuarios/Usuarios.js","context/Catalogos/Departamentos.js","pages/sucursales/Catalogos/Departamentos/ListaDepartamentos.js","pages/sucursales/Catalogos/Departamentos/RegistroDepartamento.js","pages/sucursales/Catalogos/Departamentos/Departamentos.js","pages/sucursales/Catalogos/Categorias/RegistroCategorias.js","pages/sucursales/Catalogos/Categorias/Categorias.js","pages/sucursales/Catalogos/Colores/ListaColores.js","pages/sucursales/Catalogos/Colores/RegistroColores.js","pages/sucursales/Catalogos/Colores/Colores.js","pages/sucursales/Catalogos/Marcas/ListaMarcas.js","context/Catalogos/Marcas.js","pages/sucursales/Catalogos/Marcas/VistaMarcas.js","pages/sucursales/Catalogos/Marcas/Marcas.js","pages/sucursales/Catalogos/CentroCostos/RegistroCentroCostos.js","pages/sucursales/Catalogos/CentroCostos/CentroCostos.js","gql/Catalogos/conceptosAlmacen.js","pages/sucursales/Catalogos/ConceptosAlmacen/ListaConceptos.js","pages/sucursales/Catalogos/ConceptosAlmacen/RegistroConcepto.js","pages/sucursales/Catalogos/ConceptosAlmacen/ConceptosAlmacen.js","pages/sucursales/Catalogos/Catalogos.js","context/Tesoreria/tesoreriaCtx.js","gql/Empresa/sucursales.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/RetiroDeposito.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/HistorialCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/ListaCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/CuentasEmpresaSucursales.js","gql/Tesoreria/egresos.js","pages/sucursales/Tesoreria/Egresos/TablaProductosEgresos.js","pages/sucursales/Tesoreria/Egresos/FormRegistroEgresos.js","pages/sucursales/Tesoreria/Egresos/VistaRegistroEgreso.js","pages/sucursales/Tesoreria/Egresos/Egresos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaCompras.js","gql/Tesoreria/abonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/AbonosProovedores.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaCompras.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Clientes/AbonosClientes.js","pages/sucursales/Tesoreria/Tesoreria.js","pages/sucursales/Tesoreria/IndexTesoreria.js","context/Facturacion/facturacionCtx.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/DetallesVenta.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/array_test.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ListaVentasFactura.js","pages/sucursales/Facturacion/NuevaFactura/Catalogos/CodigoPostal.js","pages/sucursales/Facturacion/NuevaFactura/ClientesSelect.js","pages/sucursales/Facturacion/NuevaFactura/RegistroFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EditarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EliminarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/TablaDetallesFactura.js","pages/sucursales/Facturacion/NuevaFactura/validacion_factura.js","pages/sucursales/Facturacion/NuevaFactura/initial_factura_states.js","pages/sucursales/Facturacion/NuevaFactura/RealizarFactura.js","pages/sucursales/Facturacion/NuevaFactura/NuevaFactura.js","pages/sucursales/Facturacion/CFDISeries/RegistroSeries.js","pages/sucursales/Facturacion/CFDISeries/ListaSeries.js","pages/sucursales/Facturacion/CFDISeries/SeriesCdfi.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarProductosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/DatosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/ListaFacturas.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarListaFacturasExcel.js","pages/sucursales/Facturacion/FacturasRealizadas/FacturasRealizadas.js","pages/sucursales/Facturacion/Facturacion.js","pages/sucursales/Almacenes/RegistroAlmacen/ListaAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/RegistroAlmacen.js","icons/almacen.svg","context/Almacenes/traspasosAlmacen.js","components/Traspasos/TablePresentacionesNotOrigen.js","components/Traspasos/TallasColoresTraspasos.js","components/Traspasos/TableSelectMedidas.js","components/Traspasos/TableSelectProducts.js","pages/sucursales/Almacenes/Traspasos/Traspasos.js","components/ExportExcel.js","pages/sucursales/Almacenes/InventarioPorAlmacen/ListaProductos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/InventariosPorAlmacen.js","pages/sucursales/Almacenes/Almacenes.js","pages/sucursales/Reportes/Cajas/TablaHistorialFiltrado.js","pages/sucursales/Reportes/Cajas/HistorialCaja.js","pages/sucursales/Reportes/Cajas/CardCaja.js","pages/sucursales/Reportes/Cajas/Cajas.js","pages/sucursales/Reportes/TurnosUsuarios/TablaTurnosFiltrados.js","gql/Ventas/abrir_cerrar_turno.js","pages/sucursales/Reportes/TurnosUsuarios/ReportesTurnosUsuarios.js","pages/sucursales/Reportes/Compras/TablaComprasFiltradas.js","gql/Compras/reporte_compras.js","pages/sucursales/Reportes/Compras/ExportarCompras.js","pages/sucursales/Reportes/Compras/FiltrosCompra.js","pages/sucursales/Reportes/Compras/ReportesCompras.js","pages/sucursales/Reportes/Ventas/TablaVentasFiltradas.js","pages/sucursales/Reportes/Ventas/ReportesVentas.js","pages/sucursales/Reportes/Almacenes/ExportarTraspasos.js","pages/sucursales/Reportes/Almacenes/TablaAlmacenFiltradas.js","pages/sucursales/Reportes/Almacenes/ReportesAlmacen.js","pages/sucursales/Reportes/Cortes/TablaCortesFiltradas.js","pages/sucursales/Reportes/Cortes/ExportExcel.js","pages/sucursales/Reportes/Cortes/ReportesCortes.js","pages/sucursales/Reportes/Tesoreria/ListaEgresos.js","pages/sucursales/Reportes/Tesoreria/ListaTransferencias.js","pages/sucursales/Reportes/Tesoreria/Reporte_Tesoreria.js","pages/sucursales/Reportes/Reportes.js","pages/sucursales/AdminInicio.js","components/Navegaciones/NavegacionAdmin.js","components/Navegaciones/styles.js","pages/ventas/styles.js","context/Ventas/ventasContext.js","pages/ventas/Operaciones/DepositoRetiroCaja.js","pages/ventas/AbrirCerrarTurno/AbrirTurno.js","pages/ventas/AbrirCerrarTurno/CerrarTurno.js","pages/ventas/AbrirCerrarTurno/Turnos.js","pages/ventas/Operaciones/PreCorteCaja.js","gql/Ventas/cotizaciones.js","pages/ventas/Cotizacion/NuevaCotizacion.js","pages/ventas/Cotizacion/CotizacionesPendientes.js","pages/ventas/Cotizacion/Cotizacion.js","pages/ventas/Operaciones/VentaEnEspera.js","pages/ventas/ArticuloRapido/RegistroInformacionRapido.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TablaPresentaciones.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TallasColoresRapidos.js","pages/ventas/ArticuloRapido/ArticuloRapido.js","pages/ventas/ArticuloRapido/indexArticuloRapido.js","components/Navegaciones/NavegacionVentas.js","pages/ventas/Abonos/Abonos.js","pages/ventas/BuscarProductos/ListaProductos.js","gql/Ventas/ventas_generales.js","pages/ventas/BuscarProductos/InformacionProducto.js","pages/ventas/BuscarProductos/BuscarProducto.js","pages/ventas/ClientesVentas/ClientesVentas.js","pages/ventas/Operaciones/AbrirCajon.js","pages/ventas/Operaciones/CancelarVenta.js","icons/ventas/tarjeta-de-credito.svg","pages/ventas/Operaciones/CerrarVenta.js","pages/ventas/Operaciones/ConsultarPrecio.js","pages/ventas/Operaciones/PreciosProducto.js","pages/ventas/VentasEspera/ListaVentas.js","pages/ventas/VentasEspera/VentasEspera.js","pages/ventas/VentasRealizadas/ListaVentasRealizadas.js","pages/ventas/VentasRealizadas/VentasRealizadas.js","components/Navegaciones/NavegacionVentasLateral.js","pages/ventas/EliminarProductoVenta.js","pages/ventas/Tabla_ventas_checkbox.js","pages/ventas/ClientesVentas.js","icons/ventas/peso.svg","pages/ventas/Operaciones/MonedaCambio.js","pages/ventas/VentasGenerales.js","pages/ventas/venta_index.js","components/Layouts/LayoutVentas.js","img/logochafa.PNG","icons/ventas/admin.svg","icons/ventas/cart-add.svg","components/Layouts/LayoutHome.js","config/routes.js","img/abLogo.jpeg","components/Layouts/LayoutAdmin.js","config/colors.js","config/apollo.js","App.js","reportWebVitals.js","index.js"],"names":["CREAR_USUARIO","gql","OBTENER_USUARIOS","ACTUALIZAR_USUARIO","LOGEAR_USUARIO","useStyles","makeStyles","theme","snack","zIndex","SnackBarMessages","alert","setAlert","classes","Portal","Snackbar","className","anchorOrigin","vertical","horizontal","open","onClose","status","message","autoHideDuration","Box","display","style","color","mr","Typography","margin","marginTop","spacing","marginBottom","containerImagen","maxWidth","maxHeight","imagen","width","height","initial_state_datos_generales","receta_farmacia","clave_producto_sat","Name","Value","initial_state_precios","monedero","monedero_electronico","iva_activo","ieps_activo","ieps","iva","granel","inventario","inventario_minimo","inventario_maximo","unidad_de_inventario","codigo_unidad","precio_de_compra","precio_con_impuesto","precio_sin_impuesto","unidad_de_compra","unidad","cantidad","precio_unitario_sin_impuesto","precio_unitario_con_impuesto","initial_state_unidadVentaXDefecto","codigo_barras","precio","precio_unidad","numero_precio","precio_neto","precio_venta","unidad_mayoreo","iva_precio","ieps_precio","utilidad","precio_general","cantidad_unidad","unidad_maxima","unidad_principal","default","initial_state_preciosP","initial_state_unidadesVenta","initial_state_almacen_inicial","id_almacen","almacen","fecha_de_expiracion","initial_state_centro_de_costos","initial_state_preciosPlazos","precio_piezas","precio_cajas","precio_costales","initial_state_subcategorias","initial_state_imagenes","initial_state_imagenes_eliminadas","initial_state_onPreview","index","image","initial_state_validacion","error","initial_state_subcostos","initial_state_presentaciones","RegProductoContext","createContext","RegProductoProvider","children","useState","datos_generales","setDatosGenerales","precios","setPrecios","unidadVentaXDefecto","setUnidadVentaXDefecto","preciosP","setPreciosP","unidadesVenta","setUnidadesVenta","almacen_inicial","setAlmacenInicial","centro_de_costos","setCentroDeCostos","preciosPlazos","setPreciosPlazos","subcategorias","setSubcategorias","imagenes","setImagenes","imagenes_eliminadas","setImagenesEliminadas","onPreview","setOnPreview","validacion","setValidacion","subcostos","setSubcostos","selectedDate","setSelectedDate","update","setUpdate","presentaciones","setPresentaciones","presentaciones_eliminadas","setPresentacionesEliminadas","React","actualizarLista","setActualizarLista","datosPreciosProducto","setDatosPreciosProducto","preciosDescuentos","setPreciosDescuentos","preciosProductos","setPreciosProductos","datosEnDescuentos","setDatosEnDescuentos","almacen_existente","setAlmacenExistente","Provider","value","EmpresaContext","EmpresaProvider","nombre_empresa","nombre_dueno","telefono_dueno","celular","correo_empresa","nombre_fiscal","rfc","regimen_fiscal","curp","info_adicio","direccion","calle","no_ext","no_int","codigo_postal","colonia","municipio","localidad","estado","pais","direccionFiscal","datosBancarios","cuenta","sucursal","clave_banco","empresa","setEmpresa","toUpdate","setToUpdate","setError","backdrop","drawer","backgroundColor","BackdropComponent","loading","setLoading","Backdrop","CircularProgress","ErrorPage","altura","flexDirection","justifyContent","alignItems","fontSize","align","OBTENER_DATOS_EMPRESA","ACTUALIZAR_EMPRESA","formatoFecha","fecha","Date","toLocaleDateString","weekday","year","month","day","formatoFechaCorta","formatoMexico","number","parseFloat","toFixed","toString","replace","cleanTypenames","Array","isArray","map","newObject","property","findProductArray","producto","a","venta","JSON","parse","localStorage","getItem","productosVentas","productos","found","producto_found","i","length","id_producto","clave_alterna","console","log","calculatePrices","newP","newPrising","subtotalCalculo","totalCalculo","impuestoCalculo","ivaCalculo","iepsCalculo","descuentoCalculo","monederoCalculo","cantidadNueva","precios_producto","iva_producto","ieps_producto","precioProducto","valor","descuento_activo","descuento","dinero_descontado","calculatePrices2","origen","precio_boolean","valor_granel","precio_actual","cantidadCaja","cantidad_unidads","ob","cantidad_venta","granel_producto","precio_a_vender","precio_actual_producto","precio_actual_object","precio_anterior","verifiPrising","amount","pricings","filter","p","finalPrising","pricing","number_pricing","object_prising","datoFinal","precio_seleccionado","usosCfdi","tiposCfdi","NameId","tipoCambio","formaPago","metodoPago","regimenFiscal","Natural","Moral","CREAR_FACTURA","CREAR_SERIE","ACTUALIZAR_DEFAULT_SERIE","ELIMINAR_SERIE","OBTENER_SERIES","CREAR_SELLO_CFDI","ELIMINAR_SELLO_CFDI","RegistroSellos","datosEmpresa","firma_disabled","refetch","sesion","setOpen","certificate","private_key","private_key_password","_id","datos","setDatos","show","setShow","handleClose","useMutation","crearCSDS","obtenerFiles","e","target","name","files","getBase64","file","Promise","resolve","baseURL","reader","FileReader","readAsDataURL","onload","result","guardarBD","data","cer","key","then","base","split","nombre_cer","catch","err","nombre_key","variables","input","networkError","graphQLErrors","Button","onClick","startIcon","Add","disabled","Dialog","fullWidth","DialogTitle","DialogContent","mb","TextField","size","variant","InputProps","endAdornment","InputAdornment","position","htmlFor","CloudUpload","component","disableElevation","readOnly","accept","id","multiple","type","onChange","mt","my","IconButton","onMouseDown","event","preventDefault","edge","DialogActions","Done","EliminarSellos","eliminarCSD","eliminarSelloCSD","DeleteOutline","DialogContentText","appBar","title","marginLeft","flex","icon","subtitle","require","Transition","forwardRef","props","ref","Slide","direction","InformacionFiscal","loadingPage","setLoadingPage","errorPage","setErrorPage","errorForm","setErrorForm","accesos","mi_empresa","informacion_fiscal","editar","bloqueo","useContext","actualizarEmpresa","setFirmaDisabled","empresaFiscal","setEmpresaFiscal","useQuery","useEffect","errorCatch","undefined","obtenerEmpresa","new_sesion","setItem","stringify","sello_sat","limite_timbres","timbres_usados","actEmp","response","obtenerCampos","obtenerCamposDireccion","obtenerCamposBancarios","fullScreen","TransitionComponent","AppBar","Toolbar","m","Container","Grid","container","item","md","xs","helperText","FormControl","Select","MenuItem","res","multiline","Divider","Alert","severity","action","AlertTitle","sm","autoFocus","avatarContainer","border","borderRadius","avatar","MisDatos","datos_empresa","preview","setPreview","empresaDatos","setEmpresaDatos","onDrop","useCallback","acceptedFiles","useDropzone","noKeyboard","getRootProps","getInputProps","Avatar","src","MiEmpresa","justify","ver","lg","idEmpresa","Empresa","unitCodes","unitCodes_granel","formInputFlex","PreciosDeCompra","unidades","setUnidades","obtenerUnidadesVentas","child","inputProps","min","Math","round","porciento","obtenerPrecioUVentas","OutlinedInput","floor","random","GenCodigoBarras","suma_impuestos","PVCI","PVSI","PCSI","new_unidad","agregarNuevaUnidad","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","LocalOffer","Checkbox","checked","nuevo_array","element","new_element","push","checkUnidadDefault","RenderUnidadesRows","aplicarDescuento","checkUnidadPrincipal","ModalDelete","toggleModal","splice","precioTitle","marginInput","PreciosDeVenta","newPreciosP","RenderPreciosP","preciosVenta","calculos","PUCSI","utilidad_base","unidadXDefecto","new_precio_venta_desc","precio_con_descuento","verificarCampoVacio","minWidth","valor_base","obtenerUtilidad","onBlur","pl","suma","obtenerPrecioNeto","parseInt","obtenerMayoreo","calcular_iva","calcular_ieps","formInput","RegistroInfoAdidional","obtenerIva","setPrecioConImpuesto","setPrecioSinImpuesto","obtenerIeps","precioConImpuesto","precioSinImpuesto","useDebounce","PCI","PSI","obtenerUnidadCompra","total_impuesto","isNaN","obtenerPrecioConImpuesto","obtenerPrecioSinImpuesto","FormControlLabel","control","label","mx","ml","FormHelperText","ComprasContext","ComprasProvider","costo","cantidad_regalo","unidad_regalo","cantidad_total","descuento_porcentaje","descuento_precio","iva_total","ieps_total","subtotal","impuestos","total","mantener_precio","subtotal_descuento","total_descuento","datosProducto","setDatosProducto","proveedor","en_espera","fecha_registro","moment","locale","format","compra_credito","fecha_vencimiento_credito","credito_pagado","saldo_credito_pendiente","forma_pago","descuento_aplicado","porcentaje","cantidad_descontada","datosCompra","setDatosCompra","setPreciosVenta","productoOriginal","setProductoOriginal","productosCompra","setProductosCompra","isEditing","setIsEditing","editFinish","setEditFinish","setCosto","setCantidad","issue","setIssue","loadingProductos","setLoadingProductos","descuentoCompra","setDescuentoCompra","compareFunction","b","medida","talla","localeCompare","root","paper","table","tableRow","alpha","palette","primary","main","visuallyHidden","clip","overflow","padding","top","colorContainer","TablaPresentaciones","from","setOnUpdate","onUpdate","withoutPrice","onlyPrice","mostrar_presentaciones","sort","Paper","stickyHeader","RenderPresentacionesRows","disabledInput","setDisabledInput","textfield","useRef","copy_presentaciones","copy_element_presentacion","copy_element_presentacion_descuento","copy_producto","obtenerDatos","existencia","cantidad_nueva","actionButton","hover","selected","Input","inputRef","nuevo","Cached","nombre_comercial","Chip","Tooltip","nombre","placement","arrow","Zoom","hex","LocalOfferOutlined","checkedIcon","Edit","TabPanel","other","role","hidden","a11yProps","AlertDialogSlide","agregarCompra","cargando","toggleDrawer","resetProducto","new_precios","unidadxdefecto","unidades_de_venta","setValue","actualizarContextProducto","keepMounted","tipo_producto","Tabs","newValue","scrollButtons","indicatorColor","textColor","Tab","LocalAtm","SquareFoot","OBTENER_CONSULTAS","CREAR_PRODUCTO","OBTENER_PRODUCTOS","ACTUALIZAR_PRODUCTO","ELIMINAR_PRODUCTO","PRODUCTOS_ELIMINADOS","ACTIVAR_PRODUCTOS","CREAR_PRODUCTO_RAPIDO","CrearAlmacenContext","AlmacenProvider","nombre_almacen","id_usuario_encargado","datosAlmacen","setDatosAlmacen","openRegistro","setOpenRegistro","REGISTRO_ALMACEN","OBTENER_ALMACENES","ACTUALIZAR_ALMACEN","OBTENER_PRODUCTOS_ALMACEN","OBTENER_CATEGORIAS","REALIZAR_TRASPASO","OBTENER_PRODUCTOS_EMPRESA","OBTENER_TRASPASOS","ContainerRegistroAlmacen","accion","CrearAlmacen","ActualizarAlmacen","obtenerUsuarios","limpiarCampos","onCloseModal","saveData","almacen_creado","crearAlmacen","id_sucursal","labelId","user","fontWeight","nombre_sucursal","CREAR_COLOR","OBTENER_COLORES","ACTUALIZAR_COLOR","ELIMINAR_COLOR","CrearColorProducto","setColor","values","setValues","crearColor","GuardarDatosBD","colores","scroll","disableEscapeKeyDown","reason","onChangeComplete","toUpperCase","bgcolor","onSubmit","focused","form","CREAR_TALLAS","OBTENER_TALLAS","ACTUALIZAR_TALLA","ELIMINAR_TALLA","CrearTallasProducto","setMedidasSeleccionadas","crearTalla","nueva_talla","tipo","cursor","ColoresTallas","obtenerConsultasProducto","almacenes","tallas","calzados","medidasSeleccionadas","coloresSeleccionados","setColoresSeleccionados","medidas","obtenerColoresSeleccinados","colors","forEach","hashColor","hashMedida","colores_existentes","existColor","medidas_existentes","existMedida","medidas_registradas","FormLabel","pointerEvents","opacity","RenderTallas","useTheme","setSelected","seleccionarMedidas","medidas_seleccionadas_temp","presentacion_temp","array_medidad_finales","producto_medida","k","producto_color","presentacion_existente","producto_array_final","x","objeto_presentaciones_final","handleAddTallas","getContrastText","Colores","seleccionarColores","obtenerColores","verificate","setVerificate","disableHoverListener","valuesFacturama","$","ajaxSetup","beforeSend","xhr","withCredentials","setRequestHeader","facturama","settings","url","retrieve","path","callback","jQuery","get","list","postSyncWithData","callbackError","ajax","dataType","contentType","success","putSyncWithData","deleteSyncWithParam","param","async","facturamaObject","Clients","Get","List","Create","Remove","Update","Products","BranchOffice","Series","idBranch","Cfdi","listWithParam","Send","postSyncWithParam","Cancel","params","Download","Acuse","TaxEntity","UploadCsd","UploadImage","Catalogs","States","country","Municipalities","state","Localities","Neighborhoods","postalCode","ProductsOrServices","keyword","PostalCodes","Units","Currencies","Countries","PaymentForms","PaymentMethods","FederalTaxes","FiscalRegimens","CfdiTypes","RelationTypes","CfdiUses","CREAR_CODIGO_PRODUCTO","ELIMINAR_CODIGO_PRODUCTO","background","CatalogosProductosSAT","codigos","busqueda","setBusqueda","setProductos","loading_save","setLoadingSave","loading_delete","setLoadingDelete","selectedIndex","setSelectedIndex","crearCodigoProducto","eliminarCodigoProducto","limpiarDataModal","handleOk","eliminarCodigoBD","handleCancel","buscarCatalogo","Facturama","responseJSON","Message","Autocomplete","options","getOptionLabel","option","renderInput","renderOption","flexGrow","_","getOptionSelected","Search","dense","SelectedListItem","contiene","includes","ListItem","button","ListItemText","CREAR_CATEGORIA","CREAR_SUBCATEGORIA","ACTUALIZAR_CATEGORIA","ACTUALIZAR_SUBCATEGORIA","ELIMINAR_CATEGORIA","ELIMINAR_SUBCATEGORIA","OBTENER_DEPARTAMENTOS","REGISTRAR_DEPARTAMENTO","ACTUALIZAR_DEPARTAMENTO","ELIMINAR_DEPARTAMENTO","OBTENER_MARCAS","REGISTRAR_MARCAS","ACTUALIZAR_MARCAS","ELIMINAR_MARCAS","obligatorio","RegistroInfoGenerales","categorias","departamentos","marcas","centro_costos","obtenerChecks","obtenerIDs","categoria","id_categoria","costos","id_cuenta","subcuentas","Autorenew","nombre_generico","descripcion","subcategoria","departamento","nombre_departamentos","marca","nombre_marca","RegistrarNuevoSelect","crearCategoria","crearSubcategoria","CrearDepartamentos","CrearMarca","handleToggle","guardarDatos","idCategoria","categoria_creada","subcategoria_creada","id_subcategoria","departamento_creado","id_departamento","crearDepartamentos","marca_creada","id_marca","crearMarcas","endIcon","CargarImagenesProducto","render_imagenes","URL","createObjectURL","AddPhotoAlternate","minHeight","orientation","alt","RenderImagenes","key_imagen","url_imagen","handleModal","noWrap","eliminarImagen","array","Delete","RegistroAlmacenInicial","obtenerInventario","utils","DateFnsUtils","local","placeholder","date","KeyboardButtonProps","validaciones","generales","vista3","vista1","vista2","CREAR_CUENTA","CREAR_SUBCUENTA","ACTUALIZAR_CUENTA","ACTUALIZAR_SUBCUENTA","OBTENER_CUENTAS","ELIMINAR_CUENTA","ELIMINAR_SUBCUENTA","CentroCostos","obtenerAlmacenes","subcuenta","crearCuenta","crearSubcuenta","idCuenta","cuenta_creada","subcuenta_creada","id_subcuenta","TablaPreciosPlazos","RenderTablePlazos","plazo","ModalDeletePlazos","eliminarUnidad","PrecioPlazos","setPlazo","obtenerPlazos","guardarPlazo","validateJsonEdit","object_date","end_array","object","iconSvg","dialogContent","CrearProducto","productosRefetch","fromCompra","crearProducto","actualizarProducto","setInitialStates","resetInitialStates","validate","vista7","copy_unidadesVenta","imagenes_without_aws","precio_plazos","usuario","unidades_venta","medidas_producto","inventario_general","window","onkeydown","keyCode","document","getElementById","click","saveButton","ButtonActions","NavigateNext","elevation","Badge","badgeContent","invisible","NavigateBefore","ContenidoModal","PreciosDeVentaCompras","numero","RenderPrecios","setPrecioNeto","copy_preciosVenta","calculosCompra","DescuentosInputs","inputMode","obtenerPrecio","startAdornment","obtenerPorcentaje","ClienteCtx","ClienteProvider","estado_cliente","cliente","setCliente","updateClientVenta","setUpdateClientVenta","RegistrarInfoBasica","nombre_cliente","representante","numero_cliente","clave_cliente","telefono","email","RegistrarInfoCredito","razon_social","numero_descuento","limite_credito","dias_credito","banco","numero_cuenta","CREAR_CLIENTE","OBTENER_CLIENTES","ACTUALIZAR_CLIENTE","CrearCliente","ventas","handleClickOpen","CREAR_COMPRA","CREAR_COMPRA_ESPERA","OBTENER_COMPRAS_REALIZADAS","OBTENER_COMPRAS_ESPERA","OBTENER_CONSULTA_GENERAL_PRODUCTO","ELIMINAR_COMPRA_ESPERA","initial_state_datosProducto","initial_state_datosCompra","initial_state_precios_venta","initial_state_productoOriginal","initial_state_productosCompra","DatosProveedorAlmacen","refetchProductos","getProductos","obtenerProveedorAlmacen","id_proveedor","errorRender","loadingRender","obtenerConsultaGeneralCompras","proveedores","MostrarPrecios","cantida_suma","presentacion","DatosProducto","count","setCargando","useLazyQuery","fetchPolicy","COSTO","CANTIDAD","obtenerCosto","obtenerCantidad","obtenerProductos","obtenerSelectsProducto","obtenerUnidadRegalo","nuevo_iva","nuevo_impuesto","actualizar_Precios","copy_datosProducto","copy_datosGenerales","copy_precios","copy_preciosP","copy_almacenInicial","copy_centroCostos","copy_presentacionesEliminadas","copy_precioPlazos","nueva","factor","cantidad_total_media","cantidad_regalo_media","productosCompra_ordenados","existente","prod_exist","Boolean","array_ordenado","ModalAgregarCompra","InfoOutlined","SetOrResetData","setStates","ListaCompras","productos_ordernados","RenderProductosCompra","isSelected","setIsSelected","productoCTX","seStates","unidad_producto","tabIndex","finish","ModalDeleteProducto","copy_compras","objeto_eliminado","ConfirmarCompra","realizarCompraBD","loading_modal","setLoadingModal","InputLabel","CompraCredito","CreditCard","AbrirCompra","compra","handleOpenDetalles","refetchEspera","ModalCompra","openDelete","setOpenDelete","crearCompra","crearCompraEnEspera","compra_en_espera","credito","conflicto","handleToggleDelete","Timer","CancelarCompra","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","ExportarProductosComprasExcel","compra_realizada","productos_detalles","Cantidad_regalo","CloudDownloadOutlined","filename","DatosDeCompra","productosFiltrados","setProductosFiltrados","toLowerCase","marginRight","ListaProductos","obtenerComprasRealizadas","RenderRowsCompras","DetallesCompra","handleOpen","AssignmentOutlined","ExportarComprasExcel","filtro","filtroFecha","compras","nombre_documento","since","ComprasRealizadas","ContentDialogCompras","setFiltro","setFiltroFecha","searchfilter","filterDate","obtenerBusqueda","subtract","obtenerFecha","onDelete","current","VerificarProductosCompras","nuevoArray","setNuevoArray","setVerificado","setSuccess","VerifiedUser","ModalVerificacion","loadingVerificacion","setLoadingVerificacion","getQuery","productos_nuevos","copy_producto_compra","productos_filtrados","precios_base","unidades_base","presentaciones_base","u_default","u_default_base","present","y","present_base","nuevo_producto_compra","total_con_descuento","setTimeout","verificarProductos","compra_temp","setCompraTemp","permisosUsuario","verificado","compras_espera","eliminar","paddingTop","paddingBottom","ModalEliminarCompra","eliminarCompraEnEspera","eliminarCompra","DeleteOutlined","ListaEnEspera","obtenerComprasEnEspera","elimina","RenderRowsComprasEspera","ModalContinuarCompra","ComprasEnEspera","Compras","abrir_compra","compras_realizadas","ListaClientes","page","setPage","rowsPerPage","setRowsPerPage","selectDataClient","setSelectDataClient","showModal","setShowModal","dataSelectRowClient","setDataSelectRowClient","handleClickOpenModal","obtenerClientes","minwidth","slice","row","TablePagination","rowsPerPageOptions","onChangePage","newPage","onChangeRowsPerPage","venta_actual","subTotal","tipo_cambio","venta_cliente","handleClickSelectClient","RowsRender","openDetalles","setOpenDetalles","actualizarCliente","cambiarEstado","tipo_cliente","Switch","handleDetalles","catalogos","clientes","ModalDetalles","Dehaze","numero_credito","paddingLeft","Cliente","InputBase","onKeyPress","defaultValue","agregar","REGISTRAR_DESCUENTOS","DESACTIVAR_DESCUENTOS","ELIMINAR_DESCUENTOS","headCells","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","datosPrecios","variable","indeterminate","headCell","numeric","disablePadding","TablaPreciosDescuentos","setCleanList","cleanList","verificarDatos","setPrecioPrueba","handleClick","indexOf","newSelected","concat","emptyRows","newSelecteds","n","isItemSelected","colSpan","openModal","setOpenModal","DesactivarDescuentoUnidad","ELiminarDescuentoUnidad","handleChangeActivo","editarDatos","handleDelete","resultado","eliminarDescuentoUnidad","defaultChecked","Modal","avatarGroup","rootSlice","rootTable","DescuentoProductos","CrearDescuentoUnidad","openDescuento","setOpenDescuento","precioPrueba","handleCloseDescuentos","cerrarModal","arrayDescuento","descuentos","eliminado","textAlign","dislay","gutterBottom","justifyItems","Slider","getAriaValueText","valueLabelDisplay","PVCDSI","dineroDescontado","valorText","obtenerPrecioText","drawWidth","breakpoints","down","InfoProductoDrawer","ListAlt","Drawer","anchor","CropOriginal","bottom","EliminarProducto","eliminarProducto","handleToggleModal","eliminarProductoBD","RenderTableRows","cantidad_existente","unidad_inventario","ProdcutosEliminados","productosActivosRefetch","handleModalToggle","RestoreFromTrash","TablaProductosEliminados","obtenerProductosInactivos","RenderProductosTabla","activarProducto","handleDeleteToggle","reactivarProducto","Publish","Productos","RegistroComponent","existencias","setExistencias","ArrowBack","ProductoIndex","TablaTallas","tallas_numeros","eliminarTalla","resp","msgAlert","dato","RegistroTallas","actualizarTalla","obtenerTallas","talla_actualizada","iconSvgSecondary","Tallas","centered","OBTENER_CONTABILIDAD","REGISTRAR_CONTABILIDAD","ACTUALIZAR_CONTABILIDAD","ELIMINAR_CONTABILIDAD","TablaServicios","setData","setIdService","idService","setAccion","updateData","obtenerContabilidad","EliminarContabilidad","contabilidad","nombre_servicio","RegistroServicios","setUpdateData","CrearContabilidad","ActualizarContabilidad","handleSubmit","inputActualizado","Contabilidad","columns","TablaProveedores","column","provedores","Proveedores","TablaCajas","permisos","cajas","obtenerCajasSucursal","numero_caja","deleteCaja","CREAR_CAJA","OBTENER_CAJAS","CREAR_HISTORIAL_CAJA","OBTENER_HISTORIAL_CAJA","ELIMINAR_CAJA","OBTENER_PRE_CORTE_CAJA","OBTENER_CORTES_CAJA","OBTENER_CORTE_CAJA","RegistroCajas","crearCaja","eliminarCaja","nuevaCaja","usuario_creador","numero_usuario_creador","numero_usuario","nombre_usuario_creador","Cajas","arregloVacio","tesoreria","cuentas_empresa","egresos","abonos_proveedores","abonos_clientes","reportes","reporte_historial_cajas","reporte_turnos","reporte_compras","reporte_ventas","rerporte_almacen","reporte_corte_caja","reporte_tesoreria","cancelar_venta","precios_productos","pre_corte","cotizaciones","administrador","eliminar_ventas","producto_rapido","traspasos","inventario_almacen","usuarios","conceptos_almacen","UsuarioContext","UsuarioProvider","estado_usuario","setUsuario","FormularioUsuario","showPassword","setShowPassword","autoComplete","password","repeatPassword","ActualizarPasswordModal","actualizarUsuario","confirmarPassowrd","Parametros","arregloAccesos","obtenerAccesos","subDepartamento","Catalogos","Almacenes","Tesoreria","Reportes","Ventas","AsignarPermisos","rootPrincipal","CrearUsuario","turno_en_caja_activo","crearUsuario","max","subDepartamentos","ListaUsuarios","Usuarios","CreateDepartamentosContext","DepartamentosProvider","idDepartamento","setIdDepartamento","TablaDepartamentos","obtenerDepartamentos","eliminarDepartamento","RegistroDepartamentos","ActualzarDepartamentos","Departamentos","fade","secondary","RegistroCategorias","setCategoria","toUpdateID","setToUpdateID","loadingBackDrop","setLoadingBackDrop","actualizarCategoria","guardarCategoria","categoriaActualizada","render_categorias","obtenerCategorias","RenderCategorias","setSubcategoria","actualizarSubcategoria","eliminarCategoria","render_subcategorias","guardarSubcategoria","subCategoriaActualizada","idSubcategoria","stopPropagation","Accordion","AccordionSummary","expandIcon","ExpandMore","onFocus","scrollTo","AccordionDetails","RenderSubcategorias","eliminarSubcategoria","px","Categorias","TablaColores","cache","eliminarColor","readQuery","query","writeQuery","RegistroColores","actualizarColor","colorActualizado","msg","ListaMarcas","obtenerMarcas","eliminarMarca","CreateMarcasContext","MarcasProvider","datosMarcas","setDatosMarcas","VistaMarcas","actualizarMarca","Marcas","setCuenta","actualizarCuenta","render_cuentas","obtenerCuentas","guardarCuenta","cuentaActualizada","RenderCuentas","setSubcuenta","eliminarCuenta","actualizarSubcuenta","render_subcuentas","guardarSubcuenta","subCuentaActualizada","idSubcuenta","deleteCuenta","RenderSubcuentas","eliminarSubcuenta","deleteSubCuenta","idSubCuenta","OBTENER_CONCEPTOS_ALMACEN","REGISTRAR_CONCEPTO_ALMACEN","ACTUALIZAR_CONCEPTO_ALMACEN","ELIMINAR_CONCEPTO_ALMACEN","TablaConceptos","setIdConcepto","idConcepto","obtenerConcepto","EliminarConceptoAlmacen","obtenerConceptosAlmacen","nombre_concepto","destino","editable","formControl","MenuProps","PaperProps","ITEM_HEIGHT","tipos","getStyles","tipoName","typography","fontWeightRegular","fontWeightMedium","crearConceptoAlmacen","actualizarConceptoAlmacen","ConceptosAlmacen","alignSelf","TesoreriaCtx","TesoreriaProvider","cuentas","setCuentas","reload","setReload","OBTENER_SUCURSALES","CREAR_MOVIMIENTO_CUENTA","OBTENER_HISTORIAL_CUENTAS","formComboBox","RetiroDeposito","turnoEnCurso","CrearMovimientoCuenta","datosMovimiento","setDatosMovimiento","onChangeDatos","tipo_movimiento","id_usuario","rol_movimiento","id_Caja","id_caja","horario_turno","concepto","hora_moviento","hora","minutos","segundos","completa","fecha_movimiento","mes","dia","no_semana_year","week","no_dia_year","dayOfYear","montos_en_caja","monto_efectivo","monto","metodo_pago","monto_tarjeta_debito","monto_tarjeta_credito","monto_creditos","monto_monedero","monto_transferencia","monto_cheques","monto_vales_despensa","comentarios","enviarDatos","movimiento","crearMovimientoCuenta","rows","rootBusqueda","HistorialCuentas","datosFiltro","setDatosFiltro","fecha_inicio","fecha_fin","historialCuenta","obtenerHistorialCuenta","RowsHistorial","ListaCuentas","cuentaEmpresa","cuentasSucursalesEmpresa","cuentaPrincipal","obtenerSucursalesEmpresa","cuenta_empresa","dinero_actual","RowsCuentas","cuenta_sucursal","buttons","CuentasEmpresaSucursales","OBTENER_HISTORIAL_EGRESOS","CREAR_EGRESO","TablaProductosEgresos","borrarProducto","RowsProductos","onPageChange","onRowsPerPageChange","cantidad_productos","precio_unitario","FormRegistroEgresos","CrearEgreso","upload","setUpload","datosEgreso","setDatosEgreso","totalCompra","setTotalCompra","subCuentas","setSubCuentas","setProducto","obtenerDatoProductos","totalCompraVenta","folio_egreso","folio_factura","empresa_distribuidora","provedor","subCategoria","fecha_compra","fecha_vencimiento","fecha_vencimiento0","observaciones","id_user","saldo_total","egreso","crearEgreso","GenFolio","InputLabelProps","shrink","obtenerSubCuentas","subCuenta","producto_guardado","elemento","indice","iconSize","info","VistaRegistroEgreso","iconSizeSecond","Egresos","TablaCompras","OBTENER_HISTORIAL_ABONOS","CREAR_ABONO","TablaAbonos","id_cliente","id_egreso","id_compra","abonos","obtenerHistorialAbonos","monto_total_abonado","AbonoaRecibir","CrearAbono","abono","setAbono","setMetodoPago","metodo_de_pago","clave","metodo","telefono_cliente","email_cliente","alignContent","DetallesCuenta","LiquidarCuenta","cuentaTotalDescuento","setCuentaTotalDescuento","setDineroDescontado","porciento_descuento","valueLabelFormat","cuenta_con_descuento","cuentaSelect","clearTimeout","timer","detail","TwoClickInRowTableBuy","rootSearch","AbonosProveedores","toLocaleString","createData","code","population","density","ToggleButtonGroup","exclusive","calories","fat","carbs","protein","scope","AbonosClientes","IndexTesoreria","FacturacionCtx","FacturacionProvider","serie","currency","expedition_place","folio","cfdi_type","payment_form","payment_method","logo_url","issuer","FiscalRegime","Rfc","receiver","CfdiUse","items","datosFactura","setDatosFactura","venta_factura","setVentaFactura","cp_valido","setCPValido","setCodigoPostal","error_validation","DetallesDeVenta","compra_test","monto_tarjeta","descuento_general_activo","decuento_general","cantidad_descontado","dias_de_credito_venta","fecha_de_vencimiento_credito","fecha_vencimiento_cotizacion","iva_total_producto","ieps_total_producto","impuestos_total_producto","subtotal_total_producto","total_total_producto","cantidad_existente_maxima","ListaVentasFactura","RenderLista","CodigoPostal","CP","obtenerCodigoPostal","Fragment","ListaClientesFacturas","RegistroFactura","serie_default","ModificarProductoFactura","EliminarProductoFactura","copy_venta","copy_productos","precio_resta","DetallesFactura","RowTableProductos","verificarDatosFactura","factura_initial_state","RealizarFactura","productosFactura","setProductosFactura","crearFactura","nuevo_obj","ProductCode","IdentificationNumber","Description","UnitCode","UnitPrice","Quantity","Subtotal","Discount","Taxes","Total","Base","Rate","IsRetention","InputsFacturaModal","NuevaFactura","FacturaModalContent","seriesCfdi","obtenerSeriesCdfi","cancelarCFDI","RegistroSeries","crearSerieCFDI","obtenerDatosSeries","guardarDatosBD","ListaSeriesCDFI","modificarDefaultSerie","setPredeterminado","ModalDeleteSerie","eliminarSerie","eliminarSerieBD","SeriesCDFI","ContentSeriesCFDI","ExportarProductosFacturaExcel","ListaFacturas","Facturacion","ListaAlmacen","RegistroAlmacen","TraspasosAlmacenContext","TraspasosProvider","productosTo","setProductosTo","productosEmpTo","setProductosEmpTo","productosTras","setProductosTras","setNew_medidas","nuevaCantidad","new_medidas","presentaciones_existentes","paddingRight","cell","idProducto","cantidadAnt","copy_medida","product_selected","new_medidasCopia","med","Object","hasOwnProperty","call","cant","descendingComparator","orderBy","getComparator","order","stableSort","comparator","stabilizedThis","el","onRequestSort","sortDirection","TableSortLabel","active","useToolbarStyles","inputCantidad","highlight","lighten","light","text","dark","flexWrap","DialogTallas","close","setOpenTallas","setproduct_selected","prod","openTallas","almacenOrigen","newMedidasCopy","prodSelect","existe","copyProductosTras","medidasTo","newMed","obj","EnhancedTableToolbar","cantidadTo","setCantidadTo","mensaje","tipoPieza","setValueToTrans","find","totalCantExistMasNuevaCantidad","add","piezas","onlyNumbers","onlyNums","intValue","unidadMaxima","TipoPiezaComponent","TIPO_PIEZA","unidad_minima","clsx","editItem","prodSet","deleteItem","EnhancedTable","setOrder","setOrderBy","setCant","setTipoPieza","handleSelectAllClick","labelRowsPerPage","boxUpData","selected2","inputBox","boxControl","almacenName","transportes","steps","Traspasos","haveConcepto","setHaveConcepto","conceptoTraspaso","setConceptoTraspaso","isAlmacenOrigen","setIsAlmacenOrigen","isAlmacenDestino","setIsAlmacenDestino","setAlmacenOrigen","almacenDestino","setAlmacenDestino","almacenesDestino","setAlmacenesDestino","transporte","setTransporte","placas","setPlacas","nombreQuien","setNombreQuien","activeStep","setActiveStep","Set","skipped","setSkipped","openEnd","setOpenEnd","CrearTraspaso","conceptos","queryObtenerAlmacenes","dataConceptos","categoriasQuery","productosQuery","productosEmpresaQuery","obtenerProductosAlmacen","obtenerProductosEmpresa","obtenerProductosPorEmpresa","isStepSkipped","step","has","handleBack","prevActiveStep","traspasar","concepto_traspaso","almacen_origen","almacen_destino","datos_transporte","nombre_encargado","sucursalOrigen","sucursalDestino","traspaso","crearTraspaso","sx","almacenIcon","Stepper","stepProps","completed","Step","StepLabel","trans","pt","newSkipped","delete","handleNext","withRouter","fileName","columnName","ListaAlmacenes","dataExcel","widthPx","Rowrow","arrayCantidades","font","sz","alignment","wrapText","rgb","almacenColumna","existencia_almacenes","InventariosPorAlmacen","InventarioPorAlmacen","filtroTo","setFiltroTo","categoriaTo","setCategoriaTo","subcategoriaTo","setSubCategoriaTo","productosAlmacenQuery","obtenerProductosAlmacenes","setValToFilter","cat","fil","subcat","Moviminetos","TablaHistorialFiltrado","historial","iconSave","right","HistorialCaja","datosBuscar","setDatosBuscar","datosExcel","obtenerHistorialCaja","cajaSelected","fecha_incio","arrayExcel","datosHistorial","hora_movimiento","caja","agruparDatos","handleDatos","StyledBadge","withStyles","badge","boxShadow","left","animation","content","transform","media","expand","transition","transitions","create","duration","shortest","expandOpen","red","textActive","CardCaja","styleProps","activa","Card","CardHeader","overlap","openHistorial","setOpenHistorial","setCajaSelected","handleClickOpenHistorial","cantidad_efectivo_actual","fetchCajas","TablaTurnosFiltrados","turnos","turno","hora_entrada","hora_salida","usuario_en_turno","horario_en_turno","REGISTRAR_TURNOS","OBTENER_HISTORIAL_TURNOS","ReportesTurnosUsuarios","FiltroTablaTurnos","filtros","setFiltros","historialTurnos","fechaInicio","fechaFin","fecha_entrada","fecha_salida","obtenerFiltroTurnos","TablaComprasFiltradas","OBTENER_REPORTE_COMPRAS","ExportarCompras","forma","FiltrosCompras","obtenerProductoMovimientos","CapturaDeDatos","obtenerCamposFiltro","realizarBusquedaBD","ClearOutlined","ReportesCompras","TablaVentasFiltradas","ReportesVentas","ExportarTraspasos","id_traspaso","TablaAlmacenFiltradas","ReportesAlmacen","fecha_final","inputFilter","setFilter","encargado","setEncargado","queryObtenerUsuarios","traspasosAlmacenes","setDatosInput","obtenerTraspasos","enc","almDes","almOri","encId","setEncargadoInput","alm","setQueryAlmacenOrigen","setQueryAlmacenDestino","filt","limpiarFiltros","TablaCortesFiltradas","cortes","corte","token_turno_user","number_user","obtenerCorte","montos_sistema","obtenerCorteCaja","montos_en_sistema","InformacionCorteCaja","ExportExcel","historialCortes","ReportesCortes","cajasBase","fecha_consulta","obtenerCortesDeCaja","ListaEgresos","historialEgresos","obtenerHistorialEgresos","RowsEgresos","DialogCaracteristicas","ListaTransferencias","ReportesTesoreria","ventana","setVentana","anchorEl","setAnchorEl","currentTarget","Menu","ListItemIcon","iconSvgVenta","history","axis","onChangeIndex","appbar","navbar","grey","menuButton","token","removeItem","flexShrink","drawerColor","drawerPaper","navigationTop","iconSizeSuperior","iconSizeSecondSuperior","iconSizeInferior","iconSizeSecondInferior","iconSizeSecondInferiorGrande","iconSizeInferiorGrande","borderBoton","borderBotonChico","rootPrecioProductos","containerImage","rootBusquedaProductos","rootFecha","iconSizeDialogs","iconSizeDialogsPequeno","containerImagenesProducto","imagenProducto","VentasContext","VentasProvider","datosProductoVentas","setDatosProductoVentas","setProductosVentas","datosVentas","setDatosVentas","productoCambioPrecio","setProductoCambioPrecio","precioSelectProductoVenta","setPrecioSelectProductoVenta","clientesVentas","setClientesVentas","turnoActivo","setTurnoActivo","ubicacionTurno","setUbicacionTurno","abrirTurnosDialog","setAbrirTurnosDialog","updateTablaVentas","setUpdateTablaVentas","DepositoRetiroCaja","CrearHistorialCaja","setMovimiento","preCorteDeCaja","dineroEnCaja","obtenerPreCorteCaja","monto_efectivo_precorte","addEventListener","altKey","id_User","textTransform","newAlignment","ToggleButton","AbrirTurno","CrearRegistroDeTurno","abrirTurno","setAbrirTurno","numeroCaja","setNumeroCaja","obtenerTurno","arraySesion","exp","iat","turno_en_curso","caja_elegida","monto_abrir","variableTurnoAbierto","crearRegistroDeTurno","montoTurno","setMontoTurno","cerrarTurno","setCerrarTurno","obtenerCamposMontos","monto_puntos","actualizarTurnoSesion","Turnos","ContenidoTurnos","PreCorteCaja","CREAR_COTIZACION","NuevaCotizacion","CrearCotizacion","newCotizacion","setNewCotizacion","descuento_general","totalDescount","setTotalDescount","crearCotizacion","tipo_venta","registroCotizacion","errors","CotizacionesPendientes","CotizacionesRows","Cotizacion","VentanasCotizaciones","VentaEnEspera","agregarVentaEnEspera","justifySelf","RegistroInformacionRapido","setAbrirTallaColor","varIVA","varIEPS","TallasColoresRapidos","ArticuloRapido","crearProductoRapido","abrirTallaColor","ProductoRapidoIndex","BottomNavigation","showLabels","srsc","Abonos","productosBusqueda","setProductoSeleccionado","CONSULTA_PRODUCTO_UNITARIO","CONSULTA_PRODUCTOS_VENTAS","OBTENER_CLIENTES_VENTAS","InformacionProducto","productoSeleccionado","BuscarProducto","searchProducto","setSearchProducto","obtenerProductosVentas","keyUpEvent","onKeyUp","ClientesVentas","AbrirCajon","CancelarVenta","CerrarVenta","cambio","setCambio","abrirCajon","openModalDescuento","totalVenta","setTotalVenta","valorActual","setValorActual","totalARestar","setTotalARestar","cambioVenta","setCambioVenta","datosCliente","setDatosCliente","setMonedero","changeValue","handlerChangeValue","location","tarjeta","ConsultarPrecio","activeItemIndex","setActiveItemIndex","productoBase","obtenerUnProductoVentas","input_value","datosProductos","displa","requestToChangeActive","numberOfCards","leftChevron","rightChevron","infiniteLoop","outsideChevron","chevronWidth","PreciosProductos","selectPrisingProduct","setSelectPrisingProduct","handleAceptChangePrising","venta_existente","productosVentasTemp","newProductoPrecioNuevo","newProductoPrecioActual","producto_encontrado","new_resta","new_suma","CalculosData","doubleClick","ListaVentas","listaEnEspera","RowsVentas","borrarVenta","VentasEspera","ListaVentasRealizadas","VentasRealizadas","NavegacionVentasLateral","setDatosVentasActual","setNewProductoVentas","newProductoVentas","calculoResta","datosTabla","setDatosTabla","newCantidadProduct","setNewCantidadProduct","tempAmount","setTempAmount","CalculeDataPricing","new_cant","verify_prising","precio_actual_porducto","calculateNewPricingAmount","selectClient","setSelectClient","obtenerClientesVentas","dataCliente","ChangeClientAutocomplate","moneda","MonedaCambio","VentasGenerales","granelBase","setGranelBase","DatosVentasActual","consultaBase","setConsultaBase","productosBase","agregarProductos","trim","data_operation","data_key","productoPrecioFinal","new_prices","calculo_resta","calculo_sumar","elevantion","VentaIndex","varActive","setVarActive","AbrirTurnoEnVentas","toolbar","routes","logearUsuario","signin","decoded","jwt_decode","labelWidth","exact","logo","Link","to","adminIcon","cartIcon","AdminInicio","createMuiTheme","blue","httpLink","createUploadLink","uri","client","ApolloClient","connectToDevTools","InMemoryCache","addTypename","link","RoutesWithSubRoutes","route","render","App","ApolloProvider","ThemeProvider","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"2mBAEaA,EAAgBC,YAAH,0+KAiSbC,EAAmBD,YAAH,45KA2RhBE,EAAqBF,YAAH,kLAQlBG,EAAiBH,YAAH,iJ,GAQaA,YAAH,4L,4DCxkB/BI,EAAYC,aAAW,SAACC,GAAD,MAAY,CACxCC,MAAO,CACNC,OAAO,GAAD,OAAK,MAAL,mBAIO,SAASC,EAAT,GAAgD,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAC3CC,EAAUR,IAMhB,OACC,cAACS,EAAA,EAAD,UACC,cAACC,EAAA,EAAD,CACCC,UAAWH,EAAQL,MACnBS,aAAc,CAAEC,SAAU,MAAOC,WAAY,UAC7CC,KAAMT,EAAMS,KACZC,QAViB,WACnBT,EAAS,CAAEQ,MAAM,EAAOE,OAAQX,EAAMW,OAAQC,QAAS,MAUrDC,iBAAkB,IAClBD,QACC,eAACE,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACmB,YAAjBf,EAAMW,OACN,cAAC,IAAD,CAAiBK,MAAO,CAAEC,MAAO,aAEjC,cAAC,IAAD,CAAWD,MAAO,CAAEC,MAAO,SAE5B,cAACH,EAAA,EAAD,CAAKI,GAAI,IACT,cAACC,EAAA,EAAD,UAAanB,EAAMY,iB,+FCnBnBlB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCwB,OAAQ,CACPC,UAAWzB,EAAM0B,QAAQ,GACzBC,aAAc3B,EAAM0B,QAAQ,IAE7BE,gBAAgB,CACfC,SAAU,IACVC,UAAW,KAEZC,OAAO,CACNC,MAAO,OACPC,OAAQ,YC3BH,IAAMC,GAAgC,CAC3CC,iBAAiB,EACjBC,mBAAoB,CAClBC,KAAM,GACNC,MAAO,KAGEC,GAAwB,CACnCC,UAAU,EACVC,qBAAsB,EACtBC,YAAY,EACZC,aAAa,EACbC,KAAM,EACNC,IAAK,GACLC,QAAQ,EACRC,WAAY,CACVC,kBAAmB,EACnBC,kBAAmB,EACnBC,qBAAsB,KACtBC,cAAe,OAEjBC,iBAAkB,CAChBC,oBAAqB,EACrBC,oBAAqB,EACrBT,IAAK,EACLD,KAAM,GAERW,iBAAkB,CAChBC,OAAQ,KACRL,cAAe,MACfM,SAAU,EACVC,6BAA8B,EAC9BC,6BAA8B,IAIrBC,GAAoC,CAC/CC,cAAe,GACfL,OAAQ,KACRL,cAAe,MACfM,SAAU,EACVK,OAAQ,EACRC,cAAe,CACbC,cAAe,EACfC,YAAa,EACbC,aAAc,EACdC,eAAgB,EAChBC,WAAY,EACZC,YAAa,EACbC,SAAU,EACVC,eAAgB,EAChBC,gBAAiB,EACjBC,eAAe,GAEjBC,kBAAkB,EAClBC,SAAS,GAGEC,GAAyB,CACpC,CACEZ,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,IAIJQ,GAA8B,GAE9BC,GAAgC,CAC3CC,WAAY,GACZC,QAAS,GACTvB,SAAU,EACVwB,oBAAqB,IAEVC,GAAiC,GAEjCC,GAA8B,CACzCC,cAAe,GACfC,aAAc,GACdC,gBAAiB,IAGNC,GAA8B,GAC9BC,GAAyB,GACzBC,GAAoC,GACpCC,GAA0B,CAAEC,MAAO,GAAIC,MAAO,IAC9CC,GAA2B,CAAEC,OAAO,EAAO9E,QAAS,IACpD+E,GAA0B,GAE1BC,GAA+B,GCtH/BC,GAAqBC,0BAErBC,GAAsB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACpC,EAA6CC,mBAC3CnE,IADF,mBAAOoE,EAAP,KAAwBC,EAAxB,KAGA,EAA8BF,mBAAS9D,IAAvC,mBAAOiE,EAAP,KAAgBC,EAAhB,KACA,EAAsDJ,mBACpDzC,IADF,mBAAO8C,EAAP,KAA4BC,EAA5B,KAGA,EAAgCN,mBAASzB,IAAzC,mBAAOgC,EAAP,KAAiBC,EAAjB,KACA,EAA0CR,mBACxCxB,IADF,mBAAOiC,EAAP,KAAsBC,EAAtB,KAGA,EAA6CV,mBAC3CvB,IADF,mBAAOkC,EAAP,KAAwBC,EAAxB,KAGA,EAA8CZ,mBAC5CnB,IADF,mBAAOgC,EAAP,KAAyBC,EAAzB,KAGA,EAA0Cd,mBACxClB,IADF,mBAAOiC,EAAP,KAAsBC,EAAtB,KAGA,EAA0ChB,mBACxCd,IADF,mBAAO+B,EAAP,KAAsBC,EAAtB,KAGA,EAAgClB,mBAASb,IAAzC,mBAAOgC,EAAP,KAAiBC,EAAjB,KACA,EAAqDpB,mBACnDZ,IADF,mBAAOiC,EAAP,KAA4BC,EAA5B,KAGA,EAAkCtB,mBAASX,IAA3C,mBAAOkC,EAAP,KAAkBC,EAAlB,KACA,GAAoCxB,mBAASR,IAA7C,qBAAOiC,GAAP,MAAmBC,GAAnB,MACA,GAAkC1B,mBAASN,IAA3C,qBAAOiC,GAAP,MAAkBC,GAAlB,MACA,GAAwC5B,mBDoFA,MCpFxC,qBAAO6B,GAAP,MAAqBC,GAArB,MACA,GAA4B9B,oBAAS,GAArC,qBAAO+B,GAAP,MAAeC,GAAf,MACA,GAA4ChC,mBAC1CL,IADF,qBAAOsC,GAAP,MAAuBC,GAAvB,MAGA,GAAiElC,mBAAS,IAA1E,qBAAOmC,GAAP,MAAkCC,GAAlC,MACA,GAA8CC,IAAMrC,UAAS,GAA7D,qBAAOsC,GAAP,MAAwBC,GAAxB,MACA,GAA0BvC,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,qBAAOT,GAAP,MAAcC,GAAd,MAGA,GAA0DgG,mBAAS,IAAnE,qBAAQwC,GAAR,MAA8BC,GAA9B,MACA,GAAmDzC,mBAAS,IAA5D,qBAAQ0C,GAAR,MAA2BC,GAA3B,MACA,GAAkD3C,mBAAS,IAA3D,qBAAQ4C,GAAR,MAA0BC,GAA1B,MACA,GAAoD7C,mBAAS,IAA7D,qBAAQ8C,GAAR,MAA2BC,GAA3B,MACA,GAAkD/C,oBAAS,GAA3D,qBAAQgD,GAAR,MAA2BC,GAA3B,MAEA,OACE,cAACrD,GAAmBsD,SAApB,CACEC,MAAO,CACLlD,kBACAC,oBACAC,UACAC,aACAO,kBACAC,oBACAO,WACAC,cACAC,sBACAC,wBACAC,YACAC,eACAC,cACAC,iBACAnB,WACAC,cACAO,gBACAC,mBACAP,gBACAC,mBACAG,mBACAC,oBACAT,sBACAC,yBACAW,gBACAC,mBACAS,aACAC,gBACAC,gBACAC,mBACAC,UACAC,aACAC,kBACAC,qBACAC,6BACAC,+BACAE,mBACAC,sBACAxI,SACAC,YAEAwI,wBACAC,2BACAC,qBACAC,wBACAC,oBACAC,uBACAC,qBACAC,wBACAC,qBACAC,wBApDJ,SAuDGlD,K,wFC3HMqD,GAAiBvD,0BAEjBwD,GAAkB,SAAC,GAAkB,IAAhBtD,EAAe,EAAfA,SAEjC,EAAgCC,mBAAS,CACxCsD,eAAe,GACTC,aAAa,GACnBC,eAAe,GACfC,QAAQ,GACRC,eAAe,GACTC,cAAc,GACdC,IAAI,GACJC,eAAe,GACfC,KAAK,GACLC,YAAY,GAClBC,UAAW,CACVC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAEDC,gBAAiB,CACbT,MAAO,GAChBC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAEDE,eAAe,CACXC,OAAQ,GACRC,SAAU,GACVC,YAAa,IAEvBpJ,OAAQ,OAtCT,mBAAQqJ,EAAR,KAAiBC,EAAjB,KAwCA,EAAkChF,oBAAS,GAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAA4BlF,mBAAS,CAACP,OAAO,EAAO9E,QAAS,KAA7D,mBAAQ8E,EAAR,KAAe0F,EAAf,KACA,EAA8BnF,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KAEA,OACC,cAACoB,GAAeF,SAAhB,CACCC,MAAO,CACN4B,UACAC,aACAC,WACAC,cACAzF,QACA0F,WACApD,SACAC,aATF,SAYEjC,K,8GC1DEtG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCyL,SAAU,CACRvL,OAAQF,EAAME,OAAOwL,OAAS,EAC9BrK,MAAO,OACPsK,gBAAiB,0BAIN,SAASC,GAAT,GAAmD,IAAvBC,EAAsB,EAAtBA,QACnCvL,GADyD,EAAbwL,WAClChM,MAMhB,OACE,8BACE,cAACiM,GAAA,EAAD,CAAUtL,UAAWH,EAAQmL,SAAU5K,KAAMgL,EAA7C,SACE,cAACG,EAAA,EAAD,CAAkB3K,MAAM,gB,yBCnBjB,SAAS4K,GAAT,GAAqC,EAAhBnG,MAAiB,IAChD7D,EAD+C,EAATiK,OAG1C,OADIjK,IAAQA,EAAS,KAEpB,eAACf,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAASC,eAAe,SAASC,WAAW,SAASpK,OAAQA,EAA/F,UACC,cAAC,KAAD,CAAkBb,MAAO,CAAEkL,SAAU,IAAKjL,MAAO,0BACjD,cAACE,EAAA,EAAD,CAAYgL,MAAM,SAASnL,MAAO,CAAEkL,SAAU,GAAIjL,MAAO,mBAAzD,iC,oBCTUmL,GAAwB9M,YAAH,o6BAsDrB+M,GAAqB/M,YAAH,45BC/BlBgN,GAAe,SAACC,GAC3B,OAAKA,EAGW,IAAIC,KAAKD,GACRE,mBAAmB,QAAS,CACzCC,QAAS,OACTC,KAAM,UACNC,MAAO,OACPC,IAAK,YAPA,MAYEC,GAAoB,SAACP,GAChC,OAAKA,EAGW,IAAIC,KAAKD,GACRE,mBAAmB,QAAS,CACzCC,QAAS,QACTC,KAAM,UACNC,MAAO,QACPC,IAAK,YAPA,MAYEE,GAAgB,SAACC,GAC5B,GAAKA,EAEE,CASL,OAPIA,EAAS,IAAM,EACTA,EAEAC,WAAWD,GAAQE,QAAQ,IAIxBC,WAAWC,QAFZ,0BACA,OATZ,OAAO,MAcEC,GAAiB,SAAjBA,EAAkBjE,GAC7B,GAAIkE,MAAMC,QAAQnE,GAChB,OAAOA,EAAMoE,IAAIH,GACZ,GAAc,OAAVjE,GAAmC,kBAAVA,EAAoB,CACtD,IAAMqE,EAAY,GAClB,IAAK,IAAMC,KAAYtE,EACJ,eAAbsE,IACFD,EAAUC,GAAYL,EAAejE,EAAMsE,KAC/C,OAAOD,EAEP,OAAOrE,GAIEuE,GAAgB,uCAAG,WAAOC,GAAP,uBAAAC,EAAA,+DAExBC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACxCC,EAA4B,OAAVL,EAAiB,GAAKA,EAAMM,UAC9CC,GAAQ,EACRC,EAAiB,CACnBV,SAAU,GACVrI,MAAO,GAGAgJ,EAAI,EAVe,YAUZA,EAAIJ,EAAgBK,QAVR,oBAWsB,qBAArCL,EAAgBI,GAAG9K,cAXJ,oBAYpB0K,EAAgBI,GAAG9K,gBAAkBmK,EAASnK,cAZ1B,wBAatB6K,EAAiB,CACfV,SAAUO,EAAgBI,GAC1BhJ,MAAOgJ,GAETF,GAAQ,EAjBc,kBAkBf,CACLC,iBACAD,UApBoB,mCAyBtBF,EAAgBI,GAAGE,YAAYvI,gBAAgBwI,gBAC/Cd,EAASa,YAAYvI,gBAAgBwI,cA1Bf,wBA4BtBJ,EAAiB,CACfV,SAAUO,EAAgBI,GAC1BhJ,MAAOgJ,GAETF,GAAQ,EAhCc,kBAiCf,CACLC,iBACAD,UAnCoB,QAUgBE,IAVhB,gDAyCrB,CACLD,iBACAD,UA3C0B,yCA8C5BM,QAAQC,IAAR,MA9C4B,mBA+CrB,GA/CqB,0DAAH,sDAmDhBC,GAAe,uCAAG,WAC7BC,EACAzL,EACAX,GAH6B,iDAAAmL,EAAA,6DAI7BkB,EAJ6B,+BAIhB,EAETC,EAAkB,EACpBC,EAAe,EACfC,EAAkB,EAClBC,EAAa,EACbC,EAAc,EACdC,EAAmB,EACnBC,EAAkB,EAEdC,EAAgBlM,EAAW,EAAIA,EAAW,EAChDsL,QAAQC,IAAIE,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAG1L,cAEnD2L,EACJxC,WAAW6B,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAG1L,cACxDmJ,WAAW,KAAD,OAEN6B,EAAKL,YAAYrI,QAAQ3D,IAAM,EAA/B,WACQqM,EAAKL,YAAYrI,QAAQ3D,KAC7BqM,EAAKL,YAAYrI,QAAQ3D,MAI7BiN,EACJzC,WAAW6B,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAG1L,cACxDmJ,WAAW,KAAD,OAEN6B,EAAKL,YAAYrI,QAAQ5D,KAAO,EAAhC,WACQsM,EAAKL,YAAYrI,QAAQ5D,MAC7BsM,EAAKL,YAAYrI,QAAQ5D,OAI7BmN,EAAiBZ,EAGvBE,GACoB,IAAlBvM,EAAOA,OACHiN,EAAiBJ,EAAgBtC,WAAWvK,EAAOkN,OACnDD,EAAiBJ,EAEvBP,GACoB,IAAlBtM,EAAOA,QACFiN,GAAkBF,EAAeC,IAClCH,EACAtC,WAAWvK,EAAOkN,QACjBD,GAAkBF,EAAeC,IAAkBH,EAE1DL,GACoB,IAAlBxM,EAAOA,QACF+M,EAAeC,GAChBH,EACAtC,WAAWvK,EAAOkN,QACjBH,EAAeC,GAAiBH,EAEvCZ,QAAQC,IAAIW,GAEZJ,GACoB,IAAlBzM,EAAOA,OACH+M,EAAeF,EAAgBtC,WAAWvK,EAAOkN,OACjDH,EAAeF,EAErBH,GACoB,IAAlB1M,EAAOA,OACHgN,EAAgBH,EAAgBtC,WAAWvK,EAAOkN,OAClDF,EAAgBH,EAEtBF,GACoB,IAAlB3M,EAAOA,QACuB,IAA1BoM,EAAKe,iBACH5C,WAAW6B,EAAKgB,UAAUC,mBAC1BR,EACAtC,WAAWvK,EAAOkN,OAClB,GACwB,IAA1Bd,EAAKe,iBACL5C,WAAW6B,EAAKgB,UAAUC,mBAAqBR,EAC/C,EAEND,EAAkBR,EAAKL,YAAYrI,QAAQhE,SACvC0M,EAAKL,YAAYrI,QAAQ/D,qBAAuBkN,EAChD,EApFyB,kBAsFtB,CACLN,eACAD,kBACAE,kBACAC,aACAC,cACAC,mBACAC,oBA7F2B,4CAAH,0DAiGfU,GAAgB,uCAAG,iEAAAnC,EAAA,6DAASiB,EAAT,EAASA,KAAMzL,EAAf,EAAeA,SAAUX,EAAzB,EAAyBA,OAAQuN,EAAjC,EAAiCA,OAAjC,IAAyCC,sBAAzC,SAAiExM,EAAjE,EAAiEA,OAAjE,SAEN,EACL,EACG,EACL,EACC,EACK,EACD,EAEd6L,EAAgBlM,EAAW,EAAIA,EAAW,EAC1C8M,EAAezN,EAAOA,OAASA,EAAOkN,MAAQ,EAC9CQ,EAAgBF,EAAiBxM,EAASoL,EAAKe,iBAAmBf,EAAKgB,UAAYhB,EAAKnL,cACxF0M,GAC0B,IAAhCD,EAAc/L,cACV+L,EAAcE,iBACd,EACJnB,EAAaiB,EAAcpM,WAAaqM,EACxCjB,EAAcgB,EAAcnM,YAAcoM,EAC1CnB,EAAkBC,EAAaC,EAC/BJ,EAAkBoB,EAActM,aAAeuM,EAC/CpB,EAAemB,EAAcvM,YAAcwM,EAC3Cf,EAAkBR,EAAKL,YAAYrI,QAAQhE,SACvC0M,EAAKL,YAAYrI,QAAQ/D,qBAAuBgO,EAChD,EACJhB,EAAmBJ,EAAeH,EAAKnL,cAAcE,YAC/C0M,EAAK,CACTpB,WAAYlC,YAAYkC,EAAagB,EAAeZ,GAAerC,QAAQ,IAC3EkC,YAAanC,YAAYmC,EAAce,EAAeZ,GAAerC,QAAQ,IAC7EgC,gBAAiBjC,YAAYiC,EAAkBiB,EAAeZ,GAAerC,QAAQ,IACrF8B,gBAAiB/B,YAAY+B,EAAkBmB,EAAeZ,GAAerC,QAAQ,IACrF+B,aAAchC,YAAYgC,EAAekB,EAAeZ,GAAerC,QAAQ,IAC/EoC,gBAAiBrC,YAAYqC,EAAkBa,EAAeZ,GAAerC,QAAQ,IACrFmC,iBAAkBpC,YAAYoC,EAAmBc,EAAeZ,GAAerC,QAAQ,IACvF4B,QAEY,YAAXmB,GACDnB,EAAK0B,eAAiB,EACtB1B,EAAK2B,gBAAmB/N,EACxBoM,EAAK4B,gBAAkBH,EAAGtB,aAC1BH,EAAK6B,uBAAyB1D,WAAYmD,EAAcvM,YAAaqJ,QAAQ,IAC7E4B,EAAK8B,qBAAuBR,GACV,YAAXH,IACPnB,EAAK2B,gBAAkB/N,EACvBoM,EAAK4B,gBAAkBH,EAAGtB,aAC1BH,EAAK+B,gBAAkB/B,EAAK6B,wBA7CF,kBAgDrBJ,GAhDqB,4DAmDrB,GAnDqB,0DAAH,sDAuDhBO,GAAa,uCAAG,WAAOhC,GAAP,uBAAAjB,EAAA,kEAEpBiB,EAFoB,0CAEP,GAFO,UAGnBiC,EAASjC,EAAK0B,eACdQ,EAAWlC,EAAKL,YAAYrI,QAAQoJ,iBAAiByB,QACzD,SAACC,GAAD,OAAOA,EAAEnN,eAAiB,GAAKmN,EAAErN,YAAc,KAG7CsN,EAAe,CACjB9C,OAAO,EACP+C,QAAS,EACTC,eAAgB,EAChBC,eAAgB,IAEZC,EAAYP,EAASxC,QACvBM,EAAK0C,oBAfgB,yCAeYL,GAfZ,YAiBrBJ,EAASjC,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAGzL,gBAjBjC,0CAkBfoN,EAAe,CACrB9C,OAAO,EACP+C,QAAStC,EAAKe,iBACVf,EAAKgB,UAAUjM,YACfiL,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAG3L,YACjDwN,eACEvC,EAAKL,YAAYrI,QAAQoJ,iBAAiB,GAAG5L,cAC/C0N,eAAgBxC,EAAKe,iBAAmBf,EAAKgB,UAAYhB,EAAKL,YAAYrI,QAAQoJ,iBAAiB,KAzB9E,QA4BhBjB,EAAI,EA5BY,aA4BTA,EAAIyC,EAASxC,QA5BJ,sBA6BnBD,EAAI,IAAMgD,GAAaR,GAAUC,EAASzC,GAAGxK,gBA7B1B,0CA8BboN,EAAe,CACrB9C,OAAO,EACP+C,QAASJ,EAASzC,GAAG1K,YACrBwN,eAAgBL,EAASzC,GAAG3K,cAC5B0N,eAAgBN,EAASzC,KAlCN,QAsCrBA,EAAI,EAAIgD,GACRR,GAAUC,EAASzC,GAAGxK,gBACtBgN,EAASC,EAASzC,EAAI,GAAGxK,iBAEzBoN,EAAe,CACb9C,OAAO,EACP+C,QAASJ,EAASzC,GAAG1K,YACrBwN,eAAgBL,EAASzC,GAAG3K,cAC5B0N,eAAgBN,EAASzC,KA9CN,QA4BYA,IA5BZ,iDAkDlB4C,GAlDkB,yCAoDzBxC,QAAQC,IAAR,MApDyB,mBAqDlB,GArDkB,0DAAH,sDAmEnB,I,qDC9VM6C,GAAW,CACtB,CACEvP,MAAO,MACPD,KAAM,mCAER,CACEC,MAAO,MACPD,KAAM,6CAER,CACEC,MAAO,MACPD,KAAM,qBAER,CACEC,MAAO,MACPD,KAAM,kBAER,CACEC,MAAO,MACPD,KAAM,kDAER,CACEC,MAAO,MACPD,KAAM,wBAER,CACEC,MAAO,MACPD,KAAM,qCAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KAAM,iCAER,CACEC,MAAO,MACPD,KAAM,8BAER,CACEC,MAAO,MACPD,KAAM,4BAER,CACEC,MAAO,MACPD,KAAM,0DAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KAAM,qBAER,CACEC,MAAO,MACPD,KAAM,aAER,CACEC,MAAO,MACPD,KACE,6FAEJ,CACEC,MAAO,MACPD,KAAM,oCAER,CACEC,MAAO,MACPD,KAAM,4CAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KACE,4FAEJ,CACEC,MAAO,MACPD,KAAM,iDAER,CACEC,MAAO,MACPD,KAAM,gBAGGyP,GAAY,CACvB,CACEC,OAAQ,EACR1P,KAAM,UACNC,MAAO,KAET,CACEyP,OAAQ,EACR1P,KAAM,qBACNC,MAAO,KAET,CACEyP,OAAQ,GACR1P,KAAM,sBACNC,MAAO,MAGE0P,GAAa,CACxB,CACE1P,MAAO,MACPD,KAAM,iBAER,CACEC,MAAO,MACPD,KAAM,QAER,CACEC,MAAO,MACPD,KAAM,oBAGG4P,GAAY,CACvB,CACE5P,KAAM,WACNC,MAAO,MAET,CACED,KAAM,oBACNC,MAAO,MAET,CACED,KAAM,yCACNC,MAAO,MAET,CACED,KAAM,wBACNC,MAAO,MAET,CACED,KAAM,0BACNC,MAAO,MAET,CACED,KAAM,wBACNC,MAAO,MAET,CACED,KAAM,oBACNC,MAAO,MA0CT,CACED,KAAM,uBACNC,MAAO,MAMT,CACED,KAAM,6BACNC,MAAO,MAMT,CACED,KAAM,cACNC,MAAO,OAGE4P,GAAa,CACxB,CACE5P,MAAO,MACPD,KAAM,uCAER,CACEC,MAAO,MACPD,KAAM,mCAGG8P,GAAgB,CAC3B,CACEC,SAAS,EACTC,OAAO,EACPhQ,KAAM,kCACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,2CACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,sDACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,gBACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,0DACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,oBACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KACE,0EACFC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,iDACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,oEACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,yBACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,yDACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,4BACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KACE,8EACFC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,0BACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,iEACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,qCACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,cACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KACE,sGACFC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,gBACNC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KACE,6EACFC,MAAO,OAET,CACE8P,SAAS,EACTC,OAAO,EACPhQ,KAAM,iDACNC,MAAO,Q,0FChWEgQ,GAAgB5S,YAAH,uLAWb6S,GAAc7S,YAAH,wKASX8S,GAA2B9S,YAAH,oNAQxB+S,GAAiB/S,YAAH,6HAQdgT,GAAiBhT,YAAH,8RAediT,GAAmBjT,YAAH,yJAShBkT,GAAsBlT,YAAH,iKAQUA,YAAH,kiBAiCaA,YAAH,8RAcJA,YAAH,6RAeCA,YAAH,+PC1GzB,SAASmT,GAAT,GAIX,IAHFC,EAGC,EAHDA,aACAC,EAEC,EAFDA,eACAC,EACC,EADDA,QAEMC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,CACjC8M,YAAa,GACbC,YAAa,GACbC,qBAAsB,GACtBpJ,IAAKgJ,GAAUH,EAAa7I,IAAM6I,EAAa7I,IAAM,GACrDmB,QAAS6H,GAAUA,EAAO7H,QAAQkI,IAAML,EAAO7H,QAAQkI,IAAM,GAC7DpI,SAAU+H,GAAUA,EAAO/H,SAASoI,IAAML,EAAO/H,SAASoI,IAAM,KANlE,mBAAOC,EAAP,KAAcC,EAAd,KAQA,EAAwBnN,oBAAS,GAAjC,mBAAOoN,EAAP,KAAaC,EAAb,KACA,EAA8BrN,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAGMsT,EAAc,WAClBT,GAAQ,GACRM,EAAS,CACPL,YAAa,GACbC,YAAa,GACbC,qBAAsB,GACtBpJ,IAAKgJ,GAAUH,EAAa7I,IAAM6I,EAAa7I,IAAM,GACrDmB,QAAS6H,GAAUA,EAAO7H,QAAQkI,IAAML,EAAO7H,QAAQkI,IAAM,GAC7DpI,SAAU+H,GAAUA,EAAO/H,SAASoI,IAAML,EAAO/H,SAASoI,IAAM,MAIpE,EAAoBM,YAAYjB,IAAzBkB,EAAP,oBAKMC,EAAe,SAACC,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACdV,EAAS,2BACJD,GADG,kBAELU,EAAOC,EAAM,OAWZC,EAAY,SAACC,GACjB,OAAO,IAAIC,SAAQ,SAACC,GAClB,IAAIC,EAAU,GACVC,EAAS,IAAIC,WACjBD,EAAOE,cAAcN,GACrBI,EAAOG,OAAS,WACdJ,EAAUC,EAAOI,OACjBN,EAAQC,QAKRM,EAAS,uCAAG,kCAAA5G,EAAA,yDAEbsF,EAAMJ,aACNI,EAAMH,aACNG,EAAMF,sBACNE,EAAMtJ,IALO,iEAUV6K,EAVU,eAUEvB,GACZwB,EAAMD,EAAK3B,YACX6B,EAAMF,EAAK1B,YAZD,SAaRe,EAAUY,GACbE,MAAK,SAACL,GACL,IAAMM,EAAON,EAAOO,MAAM,KAC1BL,EAAK3B,YAAc+B,EAAK,GACxBJ,EAAKM,WAAaL,EAAId,QAEvBoB,OAAM,SAACC,GACNvG,QAAQC,IAAIsG,MApBF,wBAsBRnB,EAAUa,GACbC,MAAK,SAACL,GACL,IAAMM,EAAON,EAAOO,MAAM,KAC1BL,EAAK1B,YAAc8B,EAAK,GACxBJ,EAAKS,WAAaP,EAAIf,QAEvBoB,OAAM,SAACC,GACNvG,QAAQC,IAAIsG,MA7BF,eAgCdxJ,GAAW,GAhCG,UAiCO+H,EAAU,CAC7B2B,UAAW,CACTC,MAAO,CACLtC,YAAa2B,EAAK3B,YAClBC,YAAa0B,EAAK1B,YAClBC,qBAAsByB,EAAKzB,qBAC3BpJ,IAAK6K,EAAK7K,IACVmB,QAAS0J,EAAK1J,QACdF,SAAU4J,EAAK5J,SACfkK,WAAYN,EAAKM,WACjBG,WAAYT,EAAKS,eA3CT,QAiCRX,EAjCQ,OA+CdvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKjB,UAAU7S,SAC1CD,OAAQ,UACRF,MAAM,IAERiL,GAAW,GACX6H,IACAX,IAtDc,kDAwDdlH,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERkO,QAAQC,IAAR,MACI,KAAM0G,aACR3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eAlEN,0DAAH,qDAuEf,OACE,gCACE,cAACxV,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEC,QAAS,kBAzHa3C,GAAQ,IA0H9B7R,MAAM,UACNyU,UAAW,cAACC,GAAA,EAAD,IACXC,SAAUjD,EAJZ,2BASF,eAACkD,GAAA,EAAD,CAAQpU,SAAS,KAAKqU,WAAS,EAACrV,KAAMA,EAAMC,QAAS,kBAAM6S,KAA3D,UACE,cAACwC,GAAA,EAAD,sCACA,eAACC,GAAA,EAAD,WACE,cAAClV,EAAA,EAAD,CAAKmV,GAAI,EAAT,SACGvD,EAAa7I,IACZ,cAAC1I,EAAA,EAAD,yBAAqBuR,EAAa7I,OAElC,cAAC1I,EAAA,EAAD,CAAYF,MAAM,QAAlB,4CAKJ,eAACH,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,4BACgB,mEAEhB,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACT1M,MAAO+J,EAAMJ,YAAcI,EAAMJ,YAAYc,KAAO,GACpDsC,KAAK,QACLC,QAAQ,WACRC,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,uBAAOC,QAAQ,4BAAf,SACE,cAACjB,EAAA,EAAD,CACEE,UAAW,cAACgB,GAAA,EAAD,IACXzV,MAAM,UACN0V,UAAU,OACVC,kBAAgB,EAJlB,wBAWNC,UAAU,KAGd,uBACEC,OAAO,OACP9V,MAAO,CAAED,QAAS,QAClBgW,GAAG,4BACHC,UAAQ,EACRC,KAAK,OACLpD,KAAK,cACLqD,SAAUxD,UAIhB,eAAC5S,EAAA,EAAD,CAAKc,MAAM,OAAOuV,GAAI,EAAtB,UACE,eAAChW,EAAA,EAAD,4BACgB,qEAEhB,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACT1M,MAAO+J,EAAMH,YAAcG,EAAMH,YAAYa,KAAO,GACpDsC,KAAK,QACLC,QAAQ,WACRC,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,uBAAOC,QAAQ,4BAAf,SACE,cAACjB,EAAA,EAAD,CACEE,UAAW,cAACgB,GAAA,EAAD,IACXzV,MAAM,UACN0V,UAAU,OACVC,kBAAgB,EAJlB,wBAWNC,UAAU,KAGd,uBACEC,OAAO,OACP9V,MAAO,CAAED,QAAS,QAClBgW,GAAG,4BACHC,UAAQ,EACRC,KAAK,OACLpD,KAAK,cACLqD,SAAUxD,UAIhB,eAAC5S,EAAA,EAAD,CAAKc,MAAM,OAAOwV,GAAI,EAAtB,UACE,eAACjW,EAAA,EAAD,wCACyB,+DAEzB,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTmB,KAAM5D,EAAO,OAAS,WACtB8C,KAAK,QACLC,QAAQ,WACRvC,KAAK,uBACLqD,SA5MO,SAACvD,GACpBP,EAAS,2BACJD,GADG,IAENF,qBAAsBU,EAAEC,OAAOxK,UA0MrBiN,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CACE5B,QA5NU,kBAAMnC,GAASD,IA6NzBiE,YA5NU,SAACC,GAAD,OAAWA,EAAMC,kBA6N3BC,KAAK,MAHP,SAKGpE,EAAO,cAAC,KAAD,IAAiB,cAAC,KAAD,mBASzC,eAACqE,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXS,KAAK,QACLV,QAAS,kBAAMlC,KAHjB,sBAOA,cAACiC,EAAA,EAAD,CACEE,UAAWjK,EAAU,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAAS,cAACwB,GAAA,EAAD,IACtD1W,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMhB,KACfmB,SAAUnK,IAAY0H,EAAMtJ,IAL9B,8B,wBC7RK,SAAS+N,GAAT,GAAoD,IAA1BlF,EAAyB,EAAzBA,aAAcE,EAAW,EAAXA,QAC/CC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,CACjC4D,IAAK6I,GAAgBA,EAAa7I,IAAM6I,EAAa7I,IAAM,GAC3DmB,QAAS6H,GAAUA,EAAO7H,QAAQkI,IAAML,EAAO7H,QAAQkI,IAAM,KAF/D,mBAAOC,EAAP,KAAcC,EAAd,KAIA,EAA8BnN,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAGMsT,EAAc,WAClBT,GAAQ,GACRM,EAAS,CACPvJ,IAAKgJ,GAAUH,EAAa7I,IAAM6I,EAAa7I,IAAM,GACrDmB,QAAS6H,GAAUA,EAAO7H,QAAQkI,IAAML,EAAO7H,QAAQkI,IAAM,MAIjE,EAAsBM,YAAYhB,IAA3BqF,EAAP,oBAEMC,EAAgB,uCAAG,4BAAAjK,EAAA,yDAClBsF,EAAMtJ,IADY,iEAIrB6B,GAAW,GAJU,SAKAmM,EAAY,CAC/BzC,UAAW,CACTvL,IAAKsJ,EAAMtJ,IACXmB,QAASmI,EAAMnI,WARE,OAKfwJ,EALe,OAYrBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKmD,YAAYjX,SAC5CD,OAAQ,UACRF,MAAM,IAERiL,GAAW,GACX6H,IACAX,IAnBqB,kDAqBrBlH,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERkO,QAAQC,IAAR,MACI,KAAM0G,aACR3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eA/BC,0DAAH,qDAoCtB,OACE,gCACE,cAACxV,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEC,QAAS,kBApDa3C,GAAQ,IAqD9B7R,MAAM,UACNyU,UAAW,cAACqC,GAAA,EAAD,IAHb,2BAQF,eAAClC,GAAA,EAAD,CAAQpU,SAAS,KAAKqU,WAAS,EAACrV,KAAMA,EAAMC,QAAS,kBAAM6S,KAA3D,UACE,cAACwC,GAAA,EAAD,qCACA,cAACC,GAAA,EAAD,UACE,cAACgC,GAAA,EAAD,8DACgDtF,EAAa7I,SAG/D,eAAC6N,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CACEE,UAAW,cAAC,KAAD,IACXS,KAAK,QACLV,QAAS,kBAAMlC,KAHjB,sBAOA,cAACiC,EAAA,EAAD,CACEE,UACEjK,EAAU,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAAS,cAAC4B,GAAA,EAAD,IAE7C9W,MAAM,YACNkV,KAAK,QACLV,QAAS,kBAAMqC,KACflC,SAAUnK,IAAY0H,EAAMtJ,IAP9B,+BC3DV,IAAMnK,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,KAEZoM,SAAU,CACRH,WAAY,OACZvW,MAAO,QAET2W,QAAS,CACP,SAAU,CACRtX,MAAO,YAKPuX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASI,KACtB,IAAM5Y,EAAUR,KAChB,EAAsC4I,IAAMrC,UAAS,GAArD,mBAAO8S,EAAP,KAAoBC,EAApB,KACA,EAAwB1Q,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAkCxK,IAAMrC,UAAS,GAAjD,mBAAOgT,EAAP,KAAkBC,EAAlB,KACA,EAAkC5Q,IAAMrC,SACtCA,mBAAS,CAAEP,OAAO,EAAO9E,QAAS,MADpC,mBAAOuY,EAAP,KAAkBC,EAAlB,KAGA,EAA0BnT,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAkBjI,oBACwC,IAAxD4M,EAAOwG,QAAQC,WAAWC,mBAAmBC,QADxCC,EAAP,oBAGA,EAAgCC,qBAAWrQ,IAAnC2B,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WACjB,EAA4BuI,YAAYnH,IAAjCsN,EAAP,oBACA,EAA2C1T,oBAAS,GAApD,mBAAO0M,EAAP,KAAuBiH,EAAvB,KACA,EAA0C3T,mBAAS,CACjD2D,cAAe,GACfC,IAAK,GACLE,KAAM,GACNC,YAAa,GACbF,eAAgB,GAChBa,gBAAiB,CACfT,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAERE,eAAgB,CACdC,OAAQ,GACRC,SAAU,GACVC,YAAa,MApBjB,mBAAO8O,EAAP,KAAsBC,EAAtB,KAwBA,EAA0CC,aAAS3N,GAAuB,CACxEgJ,UAAW,CAAE2B,GAAIlE,EAAO7H,QAAQkI,OAD1BzH,GAAR,EAAQA,QAASiJ,GAAjB,EAAiBA,KAAM9B,GAAvB,EAAuBA,QAASlN,GAAhC,EAAgCA,MAIhCsU,qBAAU,WACR,IACEd,EAAaxT,IACb,MAAOuU,OAGR,CAACvU,KAEJsU,qBAAU,WACR,IACE,QAAaE,IAATxF,GAAoB,CACtBzJ,EAAWyJ,GAAKyF,gBAChB,IAAIC,EAAavH,EACjBuH,EAAWpP,QAAU0J,GAAKyF,eAC1BlM,aAAaoM,QAAQ,aAActM,KAAKuM,UAAUF,IAC7C1F,GAAKyF,eAAetQ,IAGvB+P,GAAiB,GAFjBA,GAAiB,IAKrB,MAAOK,OAGR,CAACvF,GAAMzJ,IAEV+O,qBAAU,WACR,IACEd,EAAaxT,IACb,MAAOuU,OAGR,CAACvU,KAEJsU,qBAAU,WACR,IACEhB,EAAevN,IACf,MAAOwO,OAGR,CAACxO,KAEJuO,qBAAU,WACR,IACEF,EAAiB,CACflQ,cAAeoB,EAAQpB,cACvBC,IAAKmB,EAAQnB,IACbE,KAAMiB,EAAQjB,KAEdC,YAAagB,EAAQhB,YACrBF,eAAgBkB,EAAQlB,eACxByQ,UAAWvP,EAAQuP,UACnBvF,WAAYhK,EAAQgK,WACpBG,WAAYnK,EAAQmK,WACpBqF,eAAgBxP,EAAQwP,eACxBC,eAAgBzP,EAAQyP,eACxB9P,gBAAiB,CACfT,MAAOc,EAAQL,gBAAgBT,MAC/BC,OAAQa,EAAQL,gBAAgBR,OAChCC,OAAQY,EAAQL,gBAAgBP,OAChCC,cAAeW,EAAQL,gBAAgBN,cACvCC,QAASU,EAAQL,gBAAgBL,QACjCC,UAAWS,EAAQL,gBAAgBJ,UACnCC,UAAWQ,EAAQL,gBAAgBH,UACnCC,OAAQO,EAAQL,gBAAgBF,OAChCC,KAAMM,EAAQL,gBAAgBD,MAEhCE,eAAgB,CACdC,OAAQG,EAAQJ,eAAeC,OAC/BC,SAAUE,EAAQJ,eAAeE,SACjCC,YAAaC,EAAQJ,eAAeG,eAGxC,MAAOkP,OACR,CAACjP,IAEJ,IAAM0P,GAAM,uCAAG,sBAAA7M,EAAA,sEAEXmL,GAAe,GAFJ,SAILW,EAAkB,CACtBvE,UAAW,CACT2B,GAAIlE,EAAO7H,QAAQkI,IACnBmC,MAAOwE,KAPA,OAUXb,GAAe,GACf/Y,EAAS,CACPW,QAAS,8CACTD,OAAQ,UACRF,MAAM,IAER2Y,GAAa,GACbxG,KAjBW,kDAmBXoG,GAAe,GACf/Y,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DkO,QAAQC,IAAR,MACI,KAAM+L,SACRhM,QAAQC,IAAI,KAAM+L,UACT,KAAMrF,aACf3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eA3BT,0DAAH,qDAoCNhC,GAAc,WAClBT,GAAQ,IAEJ8H,GAAgB,SAACjH,GACrBmG,EAAiB,2BACZD,GADW,kBAEblG,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGxByR,GAAyB,SAAClH,GAC9BmG,EAAiB,2BACZD,GADW,IAEdlP,gBAAgB,2BACXkP,EAAclP,iBADJ,kBAEZgJ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAI1B0R,GAAyB,SAACnH,GAC9BmG,EAAiB,2BACZD,GADW,IAEdjP,eAAe,2BACViP,EAAcjP,gBADL,kBAEX+I,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAKhC,OACE,gCACE,cAACoM,EAAA,EAAD,CAAQM,WAAS,EAACL,QAlCE,WACtB3C,GAAQ,IAiCN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAY5L,UAAWH,EAAQmY,SAFnC,6BAOF,eAACxC,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,GACTyH,oBAAqBxC,GAJvB,UAME,cAACzY,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASsN,EAAarN,WAAYsN,IACrD,cAACiC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,mCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASlC,GACT4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAAC8J,GAAA,EAAD,UACGiD,EACC,cAACpN,GAAD,CAAWnG,MAAOuT,IAElB,eAACmC,EAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGN,MAAO,CAAEK,UAAW,GAAhD,UACE,eAACga,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAIpb,UAAWH,EAAQqY,QAA7C,UACE,eAACzX,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,eAACjW,EAAA,EAAD,WACE,sCADF,mBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVxC,KAAK,OACLd,KAAK,QACLzQ,MAAOyT,EAAUzT,QAAUmU,EAAcjQ,cACzCiK,KAAK,gBACLuC,QAAQ,WACRhN,MACEyQ,EAAcjQ,cACViQ,EAAcjQ,cACd,GAEN8R,WACEvC,EAAUzT,OACY,mCAAtByT,EAAUvY,QACNuY,EAAUvY,QACV,GAENsW,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,kBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVtD,KAAK,QACLtC,KAAK,MACLuC,QAAQ,WACRhN,MAAOyQ,EAAchQ,IAAMgQ,EAAchQ,IAAM,GAC/CqN,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,gCACA,cAACwa,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,iBAJP,SAME,eAAC+H,GAAA,EAAD,CACExS,MACEyQ,EAAc/P,eACV+P,EAAc/P,eACd,GAEN+J,KAAK,iBACLqD,SAAU0D,GAPZ,UASE,cAACiB,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAED2I,GAAcvE,KAAI,SAACsO,EAAKvW,GAAN,OACjB,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,cAOf,eAACzE,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACEN,SAAU6D,EACV3D,WAAS,EACTK,KAAK,QACLtC,KAAK,OACLuC,QAAQ,WACRhN,MAAOyQ,EAAc9P,KAAO8P,EAAc9P,KAAO,GACjDmN,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,8BACA,cAAC+U,EAAA,EAAD,CACEN,SAAU6D,EACV3D,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRhN,MACEyQ,EAAc7P,YACV6P,EAAc7P,YACd,GAENkN,SAAU0D,GACVmB,WAAS,UAIf,eAACV,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACE,gDAEF,cAAC0D,GAAA,EAAD,IACA,cAAClb,EAAA,EAAD,CAAKqa,EAAG,EAAR,UAC+B,IAA5BtB,EAAcU,UACb,cAAC0B,GAAA,EAAD,CACEC,SAAS,UACTC,OACE,cAACvE,GAAD,CACEjF,eAAgBA,EAChBD,aAAcmH,EACdjH,QAASA,KANf,SAUE,cAACwJ,GAAA,EAAD,qCAGF,eAACH,GAAA,EAAD,CACEC,SAAS,OACTC,OACE,cAAC1J,GAAD,CACEE,eAAgBA,EAChBD,aAAcmH,EACdjH,QAASA,KANf,UAUE,cAACwJ,GAAA,EAAD,gCAVF,iDAYGzJ,EACC,mEACE,UAIV,eAAC7R,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,4BACA,cAAC+U,EAAA,EAAD,CACEN,UAAQ,EACRE,WAAS,EACTK,KAAK,QACLC,QAAQ,gBAGZ,eAACtV,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,4BACA,cAAC+U,EAAA,EAAD,CACEN,UAAQ,EACRE,WAAS,EACTK,KAAK,QACLC,QAAQ,gBAGZ,eAACtV,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,gCACA,cAAC+U,EAAA,EAAD,CACEN,UAAQ,EACRE,WAAS,EACTK,KAAK,QACLC,QAAQ,sBAKhB,eAACtV,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACE,4CAEF,cAAC0D,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAvB,UACE,eAACvb,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,QACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBT,MAC1B2P,EAAclP,gBAAgBT,MAC9B,GAENgN,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBR,OAC1B0P,EAAclP,gBAAgBR,OAC9B,GAEN+M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBP,OAC1ByP,EAAclP,gBAAgBP,OAC9B,GAEN8M,SAAU2D,WAIhB,eAACQ,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAvB,UACE,eAACvb,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBN,cAC1BwP,EAAclP,gBAAgBN,cAC9B,GAEN6M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBL,QAC1BuP,EAAclP,gBAAgBL,QAC9B,GAEN4M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBJ,UAC1BsP,EAAclP,gBAAgBJ,UAC9B,GAEN2M,SAAU2D,WAIhB,eAACQ,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAvB,UACE,eAACvb,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBH,UAC1BqP,EAAclP,gBAAgBH,UAC9B,GAEN0M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBF,OAC1BoP,EAAclP,gBAAgBF,OAC9B,GAENyM,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,OACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAclP,gBAAgBD,KAC1BmP,EAAclP,gBAAgBD,KAC9B,GAENwM,SAAU2D,cAKlB,eAAC/Z,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACE,kDAEF,cAAC0D,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAcjP,eAAeC,OACzBgP,EAAcjP,eAAeC,OAC7B,GAENqM,SAAU4D,UAIhB,cAACO,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAcjP,eAAeE,SACzB+O,EAAcjP,eAAeE,SAC7B,GAENoM,SAAU4D,UAIhB,cAACO,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,6BACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACEyQ,EAAcjP,eAAeG,YACzB8O,EAAcjP,eAAeG,YAC7B,GAENmM,SAAU4D,mBASxB,IADCjI,EAAOwG,QAAQC,WAAWC,mBAAmBC,OACtC,KACN,eAAC9B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAASlC,GAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CACEC,QAAS,kBAAMiF,MACfzZ,MAAM,UACNmV,QAAQ,YACRkG,WAAS,EAJX,8B,wBC5oBN5c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,KAEZoM,SAAU,CACRH,WAAY,OACZvW,MAAO,QAET2W,QAAS,CACP,SAAU,CACRtX,MAAO,QAGXsb,gBAAiB,CACfxb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZrK,MAAO,OACPC,OAAQ,OACR2a,OAAQ,mBACRC,aAAc,QAEhBC,OAAQ,CACN9a,MAAO,MACPC,OAAQ,MACR,YAAa,CACXqK,SAAU,UAKVsM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASiE,KACtB,IAAM9J,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzChO,EAAUR,KAChB,EAAsC4I,IAAMrC,UAAS,GAArD,mBAAO8S,EAAP,KAAoBC,EAApB,KACA,EAAkB/S,oBACmC,IAAnD4M,EAAOwG,QAAQC,WAAWsD,cAAcpD,QADnCC,EAAP,oBAGA,EAA8BxT,mBAAS,IAAvC,mBAAO4W,EAAP,KAAgBC,EAAhB,KACA,EAAwBxU,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAkCxK,IAAMrC,UAAS,GAAjD,mBAAOgT,EAAP,KAAkBC,EAAlB,KACA,EAAkC5Q,IAAMrC,SACtCA,mBAAS,CAAEP,OAAO,EAAO9E,QAAS,MADpC,mBAAOuY,EAAP,KAAkBC,EAAlB,KAIA,EAA0BnT,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACA,EAAmDyZ,qBAAWrQ,IAAtD2B,EAAR,EAAQA,QAAShD,EAAjB,EAAiBA,OAAQiD,EAAzB,EAAyBA,WAAYhD,EAArC,EAAqCA,UAErC,EAA4BuL,YAAYnH,IAAjCsN,EAAP,oBAGA,EAA0CI,aAAS3N,GAAuB,CACxEgJ,UAAW,CAAE2B,GAAIlE,EAAO7H,QAAQkI,OAD1BzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAM9B,EAAvB,EAAuBA,QAASlN,GAAhC,EAAgCA,MAIhC,GAAwCO,mBAAS,CAC/CsD,eAAgB,GAChBC,aAAc,GACdC,eAAgB,GAChBC,QAAS,GACTC,eAAgB,GAChBC,cAAe,GACfC,IAAK,GACLC,eAAgB,GAChBC,KAAM,GACNC,YAAa,GACbC,UAAW,CACTC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAERC,gBAAiB,CACfT,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAERE,eAAgB,CACdC,OAAQ,GACRC,SAAU,GACVC,YAAa,IAEfpJ,OAAQ,OAtCV,qBAAOob,GAAP,MAAqBC,GAArB,MAwCAhD,qBAAU,WACR,IACEpH,IACA,MAAOqH,OAGR,CAACjS,EAAQ4K,IACZoH,qBAAU,WACR,IACEhB,EAAevN,GACf,MAAOwO,OAGR,CAACxO,IACJuO,qBAAU,WACR,SACeE,IAATxF,GACFzJ,EAAWyJ,EAAKyF,gBAElB,MAAOF,OAGR,CAACvF,EAAMzJ,IACV+O,qBAAU,WACR,IACEd,EAAaxT,IACb,MAAOuU,OAGR,CAACvU,KACJsU,qBAAU,WACR,IACEgD,GAAgB,CACdzT,eAAgByB,EAAQzB,eACxBC,aAAcwB,EAAQxB,aACtBC,eAAgBuB,EAAQvB,eACxBC,QAASsB,EAAQtB,QACjBC,eAAgBqB,EAAQrB,eACxBM,UAAWe,EAAQf,UACnBtI,OAAQqJ,EAAQrJ,SAElB,MAAOsY,OAGR,CAACjP,IAEJ,IAAM0P,GAAM,uCAAG,sBAAA7M,EAAA,sEAEXmL,GAAe,GAFJ,SAILW,EAAkB,CACtBvE,UAAW,CACT2B,GAAIlE,EAAO7H,QAAQkI,IACnBmC,MAAO0H,MAPA,OAUX9U,GAAU,GACV+Q,GAAe,GACf/Y,EAAS,CACPW,QAAS,8CACTD,OAAQ,UACRF,MAAM,IAER2Y,GAAa,GAjBF,kDAmBXzK,QAAQC,IAAR,MACI,KAAW0G,aACb3G,QAAQC,IAAI,KAAW0G,aAAad,QAC3B,KAAWe,eACpB5G,QAAQC,IAAI,KAAW2G,eAEzBtV,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DuY,GAAe,GA1BJ,0DAAH,qDAiCNzF,GAAc,WAClBT,GAAQ,IAEJ8H,GAAgB,SAACjH,GACrBqJ,GAAgB,2BACXD,IADU,kBAEZpJ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGxByR,GAAyB,SAAClH,GAC9BqJ,GAAgB,2BACXD,IADU,IAEb9S,UAAU,2BAAM8S,GAAa9S,WAApB,kBAAgC0J,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAKhE6T,GAASC,uBACb,SAACC,GACC,IAAI/I,EAAS,IAAIC,WACjBD,EAAOE,cAAc6I,EAAc,IACnC/I,EAAOG,OAAS,WACd,IAAI/O,EAAQ4O,EAAOI,OACnBsI,EAAWtX,IAEbwX,GAAgB,2BACXD,IADU,IAEbpb,OAAQwb,EAAc,QAG1B,CAACJ,GAAcC,KAEjB,GAAwCI,aAAY,CAClDtG,OAAQ,wBACRuG,YAAY,EACZJ,YAHMK,GAAR,GAAQA,aAAcC,GAAtB,GAAsBA,cAMtB,OACE,gCACE,cAAC/H,EAAA,EAAD,CAAQM,WAAS,EAACL,QA5CE,WACtB3C,GAAQ,IA2CN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAQ5L,UAAWH,EAAQmY,SAF/B,wBAOF,eAACxC,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,GACTyH,oBAAqBxC,GAJvB,UAME,cAACzY,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASsN,EAAarN,WAAYsN,IAErD,cAACiC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,mBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASlC,GACT4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAAC8J,GAAA,EAAD,UACGiD,EACC,cAACpN,GAAD,CAAWnG,MAAOuT,IAElB,eAACmC,EAAA,EAAD,CAAWpa,MAAO,CAAEK,UAAW,GAA/B,UACE,eAACga,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGjB,UAAWH,EAAQqY,QAA/C,UACE,cAAC8C,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,eAAC1a,EAAA,EAAD,yBAAKT,UAAWH,EAAQqc,iBAAqBe,MAA7C,cACE,qCAAWC,OACVV,EACC,cAACW,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAG,UAAKZ,KAE3C,cAACW,GAAA,EAAD,CACEnd,UAAWH,EAAQwc,OACnBe,IAAG,UAAKzS,EAAQrJ,gBAKxB,eAAC0Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sCADF,uBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVxC,KAAK,OACLd,KAAK,QACLzQ,MAAOyT,EAAUzT,QAAUqX,GAAaxT,eACxCsK,KAAK,iBACLuC,QAAQ,WACRhN,MACE2T,GAAaxT,eACTwT,GAAaxT,eACb,GAENmS,WACEvC,EAAUzT,OACY,mCAAtByT,EAAUvY,QACNuY,EAAUvY,QACV,GAENsW,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sCADF,qBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVxC,KAAK,OACLd,KAAK,QACLzQ,MAAOyT,EAAUzT,QAAUqX,GAAavT,aACxCqK,KAAK,eACLuC,QAAQ,WACRhN,MACE2T,GAAavT,aACTuT,GAAavT,aACb,GAENkS,WACEvC,EAAUzT,OACY,mCAAtByT,EAAUvY,QACNuY,EAAUvY,QACV,GAENsW,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,0BACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVtD,KAAK,QACLtC,KAAK,iBACLuC,QAAQ,WACRhN,MACE2T,GAAatT,eACTsT,GAAatT,eACb,GAENyN,SAAU0D,WAIhB,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVtD,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRhN,MAAO2T,GAAarT,QAAUqT,GAAarT,QAAU,GACrDwN,SAAU0D,QAGd,eAAC9Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTF,SAAU6D,EACVtD,KAAK,QACLtC,KAAK,iBACLuC,QAAQ,WACRhN,MACE2T,GAAapT,eACToT,GAAapT,eACb,GAENuN,SAAU0D,cAMlB,eAAC9Z,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACE,oDAEF,cAAC0D,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGjB,UAAWH,EAAQqY,QAA/C,UACE,eAAC8C,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,QACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUC,MACnB6S,GAAa9S,UAAUC,MACvB,GAENgN,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUE,OACnB4S,GAAa9S,UAAUE,OACvB,GAEN+M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUG,OACnB2S,GAAa9S,UAAUG,OACvB,GAEN8M,SAAU2D,WAIhB,eAACQ,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUI,cACnB0S,GAAa9S,UAAUI,cACvB,GAEN6M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUK,QACnByS,GAAa9S,UAAUK,QACvB,GAEN4M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUM,UACnBwS,GAAa9S,UAAUM,UACvB,GAEN2M,SAAU2D,WAIhB,eAACQ,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUO,UACnBuS,GAAa9S,UAAUO,UACvB,GAEN0M,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUQ,OACnBsS,GAAa9S,UAAUQ,OACvB,GAENyM,SAAU2D,QAGd,eAAC/Z,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,OACLuC,QAAQ,WACRR,SAAU6D,EACVrQ,MACE2T,GAAa9S,UAAUS,KACnBqS,GAAa9S,UAAUS,KACvB,GAENwM,SAAU2D,oBAQ4B,IAAnDhI,EAAOwG,QAAQC,WAAWsD,cAAcpD,OAAmB,KAC1D,eAAC9B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAASlC,GAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CACEC,QAAS,kBAAMiF,MACfzZ,MAAM,UACNmV,QAAQ,YACRkG,WAAS,EAJX,8BC/jBG,SAASoB,KAGvB,IAAM7K,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAG/C,OACC,8BACC,cAACkN,EAAA,EAAD,UACA,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,WACkD,IAAhD9K,EAAOwG,QAAQC,WAAWsD,cAAcgB,IAAiB,KACzD,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,CAAO6R,UAAWjL,EAAO7H,QAAQkI,WAIkB,IAArDL,EAAOwG,QAAQC,WAAWC,mBAAmBqE,IAAiB,KAC9D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC6M,GAAD,eCtBQ,SAASiF,KACpB,OACI,8BACI,cAAC,GAAD,UACI,cAACL,GAAD,Q,2HCPHM,GAAY,CACrB,CAAC5a,OAAQ,KAAML,cAAe,OAC9B,CAACK,OAAQ,OAAQL,cAAe,QAGvBkb,GAAmB,CAC9B,CAAC7a,OAAQ,KAAML,cAAe,OAC9B,CAACK,OAAQ,KAAML,cAAe,OAC9B,CAACK,OAAQ,SAAUL,cAAe,QCqB9BrD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,gBAKE,SAAS+c,KACtB,IAAMje,EAAUR,KAChB,EAQIga,qBAAW7T,IAPbK,EADF,EACEA,gBACAE,EAFF,EAEEA,QACAM,EAHF,EAGEA,cACAC,EAJF,EAIEA,iBACAL,EALF,EAKEA,oBACAC,EANF,EAMEA,uBACAyB,EAPF,EAOEA,OAEF,EAAgC/B,mBAAS,CACvC7C,OAAQgD,EAAQjD,iBAAiBC,OACjCL,cAAeqD,EAAQjD,iBAAiBJ,cACxCuB,kBAAkB,EAClBjB,SAAU,IAJZ,mBAAO+a,EAAP,KAAiBC,EAAjB,KAOMC,EAAwB,SAAC3K,EAAG4K,GAChC,GAAsB,aAAlB5K,EAAEC,OAAOC,KAAqB,CAChC,IAAIxQ,EAAW4J,WAAW0G,EAAEC,OAAOxK,OACnCiV,EAAY,2BACPD,GADM,IAET/a,SAAUA,EACVK,OAAQL,EAAWiD,EAAoB5C,eAEpC,GAAsB,WAAlBiQ,EAAEC,OAAOC,KAAmB,CAAC,IAAD,EACrC,EAAkC0K,EAAM7F,MAAMtV,OAAtCL,EAAR,EAAQA,cAAeK,EAAvB,EAAuBA,OACvBib,EAAY,2BACPD,GADM,uBAERzK,EAAEC,OAAOC,KAAOzQ,GAFR,8BAGTL,GAHS,uBAIDqb,EAAS/a,SAAWiD,EAAoB5C,QAJvC,UAOX2a,EAAY,2BACPD,GADM,kBAERzK,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAiIhC,OACE,eAAC,WAAD,WACE,eAACtI,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAelS,eAAe,SAAtD,UACE,eAAClL,EAAA,EAAD,CAAKc,MAAO,IAAZ,UACE,cAACT,EAAA,EAAD,qBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,cAAC4a,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,SAJP,SAMGzN,EAAQ1D,OACP,cAACkZ,GAAA,EAAD,CACE/H,KAAK,SACLzK,MAAOgV,EAAShb,OAChB8T,SAAUoH,EAHZ,SAKGL,GAAiBzQ,KAAI,SAACsO,EAAKvW,GAAN,OACpB,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,QAMnB,cAACqW,GAAA,EAAD,CACE/H,KAAK,SACLzK,MAAOgV,EAAShb,OAChB8T,SAAUoH,EAHZ,SAKGN,GAAUxQ,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,eAS3B,eAACzE,EAAA,EAAD,CAAKc,MAAO,IAAZ,UACE,eAACT,EAAA,EAAD,sBACW,IACT,4BACuB,SAApBid,EAAShb,OACN,gBACoB,WAApBgb,EAAShb,OACT,kBACA,QAGR,cAAC8S,EAAA,EAAD,CACEN,SAAqC,QAA3BwI,EAASrb,cACnBkU,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRc,SAAUoH,EACVlV,MAAOgV,EAAS/a,SAAW+a,EAAS/a,SAAW,GAC/CyS,WAAS,OAGb,eAAChV,EAAA,EAAD,CAAKc,MAAO,IAAZ,UACE,eAACT,EAAA,EAAD,yBACa,4BAAIid,EAAShb,YAE1B,cAAC8S,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRc,SAAU,SAACvD,GAAD,OArMS,SAACvK,GAE5B,GADAuF,QAAQC,IAAI,iBACRwP,EAASvO,mBAAkD,IAA9BuO,EAASvO,iBAA2B,CACnElB,QAAQC,IAAI,SAEZ,IAAI/K,EAAc6a,KAAKC,MACrBvV,EACEA,EACE6D,WAAW,KAAD,OAENmR,EAAStO,UAAU8O,UAAY,GAA/B,WACQR,EAAStO,UAAU8O,WACvBR,EAAStO,UAAU8O,aAIjCP,EAAY,2BACPD,GADM,IAET1a,OAAQuJ,WAAW7D,GACnB0G,UAAU,2BAAMsO,EAAStO,WAAhB,IAA2BjM,wBAGtCwa,EAAY,2BACPD,GADM,IAET1a,OAAQuJ,WAAW7D,MA6KEyV,CAAqBlL,EAAEC,OAAOxK,QAC/CA,MAAOgV,EAAS1a,OAAS0a,EAAS1a,OAAS,GAC3CoS,WAAS,QAGkB,IAA9BsI,EAASvO,iBACR,eAAC/O,EAAA,EAAD,CAAKc,MAAO,IAAZ,UACE,eAACT,EAAA,EAAD,WACE,mCADF,eAGA,cAAC+U,EAAA,EAAD,CACEsI,WAAY,CAAE3H,UAAU,GACxBV,KAAK,QACLC,QAAQ,WACRhN,MAAOgV,EAAStO,UAAUjM,YAC1BiS,WAAS,OAGX,KACJ,cAAChV,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,eAAC+Z,EAAA,EAAD,CACEvF,QAAQ,WACRD,KAAK,QACLtC,KAAK,gBACLiC,WAAS,EAJX,UAME,cAAC3U,EAAA,EAAD,kCACA,cAAC2d,EAAA,EAAD,CACEhJ,WAAS,EACTF,SAAU5N,EACV+O,GAAG,sBACHlD,KAAK,gBACLzK,MAAOgV,EAAS3a,cAAgB2a,EAAS3a,cAAgB,GACzDyT,SAAUoH,EACVhI,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAAChB,EAAA,EAAD,CACEC,QAAS,kBA1HH,WACtB,IACMgJ,EAAM,KACNhb,EAAgBib,KAAKK,MACzB,KAAAL,KAAKM,SAA6BP,GAClCtR,WACFkR,EAAY,2BACPD,GADM,IAET3a,mBAkH6Bwb,IACfxH,KAAK,MACLxW,MAAM,UACN2U,SAAU5N,EAJZ,8BAaV,cAAClH,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,WAA/B,SACE,cAACuJ,EAAA,EAAD,CACEvU,MAAM,UACNwU,QAAS,kBA5NQ,WACzB,GAAK2I,EAAShb,QAAWgb,EAAS1a,QAAW0a,EAAS/a,SAAtD,CACA+a,EAASvO,iBAAmB,KAC5B,IAAQnM,EAAqB0a,EAArB1a,OAAQL,EAAa+a,EAAb/a,SACRZ,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KAET0c,EACFjS,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACvCwK,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IACvC2c,EAAOlS,YAAYvJ,EAASL,GAAU6J,QAAQ,IAC9CkS,EAAOnS,YAAYkS,GAAQD,EAAiB,IAAIhS,QAAQ,IAExDmS,EAAOjZ,EAAQjD,iBAAiBG,6BAChCU,EAAaiJ,WACfmS,EAAOnS,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAAOyK,QAAQ,IAE3DjJ,EAAcgJ,WAChBmS,EAAOnS,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAAQ0K,QAAQ,IAE9DhJ,EAAW+I,aAAcmS,EAAOC,GAAQA,EAAQ,KAAKnS,QAAQ,IAE7DoS,EAAU,2BACTlB,GADS,IAEZza,cAAe,CACbC,cAAe,EACfE,aAAcsb,EACdvb,YAAasb,EACbpb,eAAgB,EAChBC,aACAC,cACAC,WACAG,eAAe,KAIY,QAA3B+Z,EAASrb,eAAsD,QAA3Bqb,EAASrb,gBAC/Cuc,EAAW3b,cAAcQ,eAAiBT,EAC1C4b,EAAW3b,cAAcS,gBAAkBf,EAC3Cic,EAAW3b,cAAcU,eAAgB,GAE3CsC,EAAiB,GAAD,oBAAKD,GAAL,CAAoB4Y,KACpCjB,EAAY,CACVjb,OAAQ,KACRL,cAAe,MACfuB,kBAAkB,KAgLGib,IACf7J,UAAW,cAACC,GAAA,EAAD,CAAKzJ,SAAS,UAQzBkK,QAAQ,WACRD,KAAK,QAZP,0BAkBJ,cAACrV,EAAA,EAAD,UACE,cAAC0e,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOtJ,KAAK,QAAQ,aAAW,gBAA/B,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,kCACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,gCACA,cAACA,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,4BAGJ,eAACC,GAAA,EAAD,WACE,eAACF,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,UAAY1Z,EAAgBzC,gBAC5B,cAACmc,GAAA,EAAD,UAAYtZ,EAAoBlD,SAChC,cAACwc,GAAA,EAAD,UACE,eAAC9e,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UAC4C,OAAzC3F,EAAoBuJ,iBACnB,cAACiQ,GAAA,EAAD,CACE7e,OAC2C,IAAzCqF,EAAoBuJ,iBAChB,UACA,WAGN,KACJ,cAAC/O,EAAA,EAAD,CAAKI,GAAI,IACT,cAACC,EAAA,EAAD,UACE,kCAEG4L,IAC0C,IAAzCzG,EAAoBuJ,iBAChBvJ,EAAoBwJ,UAAUjM,YAC9ByC,EAAoB5C,kBAMlC,cAACkc,GAAA,EAAD,UAAYtZ,EAAoBjD,WAChC,cAACuc,GAAA,EAAD,eAC4C1F,IAAzC5T,EAAoBuJ,kBACoB,OAAzCvJ,EAAoBuJ,iBAClB,eAAC/O,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC8T,GAAA,EAAD,CACEC,SAC2C,IAAzC1Z,EAAoBuJ,kBAChBvJ,EAAoBuJ,iBAG1BqH,SAAU,SAACvD,GAAD,OAjPC9D,EAkPe8D,EAAEC,OAAOoM,aAjPvDzZ,EAAuB,2BAClBD,GADiB,IAEpBuJ,sBAH4B,IAACA,GAoPX2O,WAAY,CAAE,aAAc,mBAC5Bvd,MAAM,UACN2U,SAAmD,OAAzCtP,EAAoBuJ,mBAEhC,eAAC1O,EAAA,EAAD,CAAYF,MAAM,UAAlB,cAEGgM,WAC0C,OAAzC3G,EAAoBuJ,iBAChBvJ,EAAoBwJ,UAAU8O,UAC9B,SAIR,OAEN,cAACgB,GAAA,EAAD,UACE,cAACG,GAAA,EAAD,CACEC,QAAS1Z,EAAoBhC,iBAC7B4S,SAAU,SAACvD,GAAD,OA/PD,SAACqM,GAK1B,GAJAzZ,EAAuB,2BAClBD,GADiB,IAEpBhC,iBAAkB0b,KAEhBA,EAAS,CAEX,IADA,IAAIC,EAAc,GACT1R,EAAI,EAAGA,EAAI7H,EAAc8H,OAAQD,IAAK,CAC7C,IAAM2R,EAAUxZ,EAAc6H,GAC1B4R,EAAc,CAChBjN,IAAKgN,EAAQhN,IACbzP,cAAeyc,EAAQzc,cACvBL,OAAQ8c,EAAQ9c,OAChBL,cAAemd,EAAQnd,cACvBW,OAAQuJ,WAAWiT,EAAQxc,QAC3BL,SAAU4J,WAAWiT,EAAQ7c,UAC7BiB,kBAAkB,EAClBC,QAAS2b,EAAQ3b,QACjBuL,UAAWoQ,EAAQpQ,UACnBD,iBAAkBqQ,EAAQrQ,iBAC1BlM,cAAeuc,EAAQvc,eAEzBsc,EAAYG,KAAKD,GAEnBxZ,EAAiB,GAAD,OAAKsZ,KAuOUI,CAAmB1M,EAAEC,OAAOoM,UAC7CxB,WAAY,CAAE,aAAc,oBAC5B5I,SAAmC,IAAzBlP,EAAc8H,WAG5B,cAACoR,GAAA,EAAD,OAkBDlZ,EAAc8G,KAAI,SAAC4Q,EAAU7Y,GAC5B,OAAyB,IAArB6Y,EAAS7Z,QAET,cAAC,GAAD,CAEE6Z,SAAUA,EACV7Y,MAAOA,GAFFA,GAKJ,qBAUvB,IAAM+a,GAAqB,SAAC,GAAyB,IAAvBlC,EAAsB,EAAtBA,SAAU7Y,EAAY,EAAZA,MACtC,EAKImU,qBAAW7T,IAJba,EADF,EACEA,cACAC,EAFF,EAEEA,iBACAL,EAHF,EAGEA,oBACAC,EAJF,EAIEA,uBAoDF,OACE,eAACoZ,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,UAAYxB,EAAS3a,gBACrB,cAACmc,GAAA,EAAD,UAAYxB,EAAShb,SACrB,cAACwc,GAAA,EAAD,UACE,eAAC9e,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACiC,OAA9BmS,EAASvO,iBACR,cAACiQ,GAAA,EAAD,CACE7e,MAAOmd,EAASvO,iBAAmB,UAAY,WAE/C,KACJ,cAAC/O,EAAA,EAAD,CAAKI,GAAI,IACT,cAACC,EAAA,EAAD,UACE,kCAEG4L,IAC+B,IAA9BqR,EAASvO,iBACLuO,EAAStO,UAAUjM,YACnBua,EAAS1a,kBAMvB,cAACkc,GAAA,EAAD,UAAYxB,EAAS/a,WACrB,cAACuc,GAAA,EAAD,UACiC,OAA9BxB,EAASvO,iBACR,eAAC/O,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC8T,GAAA,EAAD,CACEC,UACE5B,EAASvO,kBAAmBuO,EAASvO,iBAEvCqH,SAAU,SAACvD,GAAD,OAvDG,SAACvK,GAExB,IADA,IAAI6W,EAAc,GACT1R,EAAI,EAAGA,EAAI7H,EAAc8H,OAAQD,IAAK,CAC7C,IAAM2R,EAAUxZ,EAAc6H,GAE1B4R,EAAc,CAChBjN,IAAKgN,EAAQhN,IACbzP,cAAeyc,EAAQzc,cACvBL,OAAQ8c,EAAQ9c,OAChBL,cAAemd,EAAQnd,cACvBW,OAAQuJ,WAAWiT,EAAQxc,QAC3BL,SAAU4J,WAAWiT,EAAQ7c,UAC7BiB,iBAAkB4b,EAAQ5b,iBAC1BC,QAAS2b,EAAQ3b,QACjBuL,UAAWoQ,EAAQpQ,UACnBD,iBAAkBtB,IAAMhJ,EAAQ6D,EAAQ8W,EAAQrQ,iBAChDlM,cAAeuc,EAAQvc,eAEzBsc,EAAYG,KAAKD,GAEnBxZ,EAAiB,GAAD,OAAKsZ,IAmCMM,CAAiB5M,EAAEC,OAAOoM,UAC3CxB,WAAY,CAAE,aAAc,mBAC5Bvd,MAAM,UACN2U,SAAwC,OAA9BwI,EAASvO,mBAErB,eAAC1O,EAAA,EAAD,CAAYF,MAAM,UAAlB,cAEGgM,WACCmR,EAAStO,WAAoC,OAAvBsO,EAAStO,UAC3BsO,EAAStO,UAAU8O,UACnB,SAIR,OAEN,cAACgB,GAAA,EAAD,UACE,cAACG,GAAA,EAAD,CACEC,QAAS5B,EAAS9Z,iBAClB4S,SAAU,SAACvD,GAAD,OApGW,WAE3B,IADA,IAAIsM,EAAc,GACT1R,EAAI,EAAGA,EAAI7H,EAAc8H,OAAQD,IAAK,CAC7C,IAAM2R,EAAUxZ,EAAc6H,GAC1B4R,EAAc,CAChBjN,IAAKgN,EAAQhN,IACbzP,cAAeyc,EAAQzc,cACvBL,OAAQ8c,EAAQ9c,OAChBL,cAAemd,EAAQnd,cACvBW,OAAQuJ,WAAWiT,EAAQxc,QAC3BL,SAAU4J,WAAWiT,EAAQ7c,UAC7BiB,iBAAkBiK,IAAMhJ,EACxBhB,QAAS2b,EAAQ3b,QACjBuL,UAAWoQ,EAAQpQ,UACnBD,iBAAkBqQ,EAAQrQ,iBAC1BlM,cAAeuc,EAAQvc,eAEzBsc,EAAYG,KAAKD,GAEnBxZ,EAAiB,GAAD,OAAKsZ,IACrB1Z,EAAuB,2BAClBD,GADiB,IAEpBhC,kBAAkB,KA8EGkc,CAAqB7M,EAAEC,OAAOoM,UAC/CxB,WAAY,CAAE,aAAc,wBAGhC,cAACoB,GAAA,EAAD,UACE,cAAC,GAAD,CAAaxB,SAAUA,EAAU7Y,MAAOA,UAM1Ckb,GAAc,SAAC,GAAyB,IAAvBrC,EAAsB,EAAtBA,SAAU7Y,EAAY,EAAZA,MAC/B,EAAwBU,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAKI4G,qBAAW7T,IAJba,EADF,EACEA,cACAC,EAFF,EAEEA,iBACAL,EAHF,EAGEA,oBACAC,EAJF,EAIEA,uBAGIma,EAAc,WAClB5N,GAASrS,IAeX,OACE,gCACE,cAAC4W,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAAS,kBAAMiL,KAA3C,SACE,cAAC3I,GAAA,EAAD,CAAe9W,MAAM,cAEvB,eAAC4U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASggB,EAA7B,UACE,cAAC3K,GAAA,EAAD,UAAc,yCACd,eAAC2B,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAMiL,KAAezf,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAAS,kBAtBvB/O,EAAcia,OAAOpb,EAAO,IACC,IAAzBmB,EAAc8H,QAAgB4P,EAAS9Z,mBACzCiC,EAAuB,2BAClBD,GADiB,IAEpBhC,kBAAkB,KAGtBqC,EAAiB,aAAID,SACrBga,KAc+Czf,MAAM,YAAYqb,WAAS,EAApE,gC,SC9lBJ5c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCghB,YAAa,CACXhf,MAAOhC,EAAM0B,QAAQ,KAEvBuf,YAAa,CACXxf,UAAW,IAEbgU,MAAO,CACL,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAKC,SAAS0f,KACtB,IAAQta,EAAakT,qBAAW7T,IAAxBW,SACJua,EAAW,aAAOva,GAEtB,OACE,cAAC,WAAD,UACGA,EAASgH,KAAI,SAACsO,EAAKvW,GAAN,OACZ,cAAC,GAAD,CAEEmP,KAAMoH,EACNvW,MAAOA,EACPwb,YAAaA,GAHRxb,QAUf,IAAMyb,GAAiB,SAAC,GAAkC,IAAhCtM,EAA+B,EAA/BA,KAAMnP,EAAyB,EAAzBA,MAAOwb,EAAkB,EAAlBA,YAC/B7gB,EAAUR,KAChB,EAMIga,qBAAW7T,IALbW,EADF,EACEA,SACAJ,EAFF,EAEEA,QACAE,EAHF,EAGEA,oBACAC,EAJF,EAIEA,uBACAE,EALF,EAKEA,YAEEwa,EAAY,eAAQza,EAASjB,IAsL3B2b,EAAW,WACf,IAAMze,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KACLY,EAAkDkD,EAAlDlD,OAAQC,EAA0CiD,EAA1CjD,SAAUyM,EAAgCxJ,EAAhCwJ,UAAWD,EAAqBvJ,EAArBuJ,iBAC/BsR,EAAQ/a,EAAQjD,iBAAiBG,6BACjC8d,EAAgBH,EAAa/c,SAAW+c,EAAa/c,SAAW,EAI9DJ,EAAemJ,YAAYkU,GAHlBC,EAAgB,KAGqBD,GAAOjU,QAAQ,IAC/DlJ,EACFF,EAAemJ,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACpDwB,EACFH,EAAemJ,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAGpDqB,EAAcoJ,YAAYnJ,GAFhBE,EAAaC,IAE6BiJ,QAAQ,IAGlE+T,EAAand,aAAeA,EAC5Bmd,EAAapd,YAAcA,EAC3Bod,EAAajd,WAAavB,EAC1Bwe,EAAahd,YAAczB,EAG3B,IAAI6e,EAAc,2BACb/a,GADa,IAEhB3C,cAAe,CACbC,cAAeqd,EAAard,cAC5BC,YAAaA,EACbC,aAAcA,EACdC,eAAgBkd,EAAald,eAC7BC,aACAC,cACAC,SAAU+c,EAAa/c,SACvBG,eAAe,KAInB,GAAmC,IAA/B4c,EAAard,gBAEbyd,EADa,SAAXje,GAAgC,WAAXA,EACT,2BACTie,GADS,IAEZ3d,OAAQuJ,YAAY5J,EAAWQ,GAAaqJ,QAAQ,MAGxC,2BACTmU,GADS,IAEZ3d,OAAQG,KAGa,IAArBgM,GAA2B,CAM7B,IAAIyR,EAAyBxd,EAAegM,EAAU8O,UAAa,IAM/D2C,EAAuBD,GAJzBA,EAAwBrU,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAE/D6e,EAAwBrU,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,KAInE6e,EAAc,2BACTA,GADS,IAEZ3d,OAAQuJ,WAAWpJ,EAAYqJ,QAAQ,IACvC4C,UAAU,2BACLxJ,EAAoBwJ,WADhB,IAEPjM,YAAa0d,MAKrBhb,EAAuB8a,GAEvBN,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,IAGd/G,qBAAU,YAC2B,IAA/BiH,EAAard,eAENqd,EAAard,cAAgB,GAAKqd,EAAapd,cADxDqd,MAMD,CAAC9a,EAAQjD,iBAAiBI,+BAE7B,IAAMie,EAAsB,SAAC3N,EAAMzK,GACjC,OAAQyK,GACN,IAAK,WACEzK,IACH6X,EAAa/c,SAAW,EACxB+c,EAAapd,YACXuC,EAAQjD,iBAAiBI,6BAC3Bwd,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,IAEd,MACF,IAAK,cACE3X,IACH6X,EAAapd,YACXod,EAAard,cAAgB,EACzB,EACAwC,EAAQjD,iBAAiBI,6BAC/B0d,EAAa/c,SAAW,EACxB6c,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,IAEd,MACF,IAAK,iBACE3X,IACH6X,EAAald,eAAiB,EAC9Bgd,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,MAQpB,OACE,eAACjgB,EAAA,EAAD,CAAKT,UAAWH,EAAQmV,MAAxB,UACE,eAACvU,EAAA,EAAD,CAAKC,QAAQ,OAAOqW,GAAI,EAAGlW,GAAI,EAA/B,UACE,cAACJ,EAAA,EAAD,CACEmL,WAAW,WACXlL,QAAS2T,EAAK9Q,cAAgB,EAAI,OAAS,OAF7C,SAIE,cAACzC,EAAA,EAAD,CAAYd,UAAWH,EAAQ0gB,YAA/B,SACE,6CAGJ,eAAC9f,EAAA,EAAD,CAAK2gB,SAAU,IAAf,UACE,eAACtgB,EAAA,EAAD,qBAAoBuT,EAAK9Q,iBACzB,cAAC9C,EAAA,EAAD,CAAKmV,GAAI,IACT,cAACC,EAAA,EAAD,CACEN,UACG3I,WAAW7G,EAAQjD,iBAAiBG,8BAEvCwS,WAAS,EACTmB,KAAK,SACLZ,WAAY,CACVmI,WAAY,CAAEC,IAAK,GACnBnI,aAAc,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,gBAEhBL,KAAK,QACL/M,MAAO6X,EAAa/c,SACpB2P,KAAK,WACLuC,QAAQ,WACRc,SAAU,SAACvD,GAAD,OA5UI,SAAC+N,GACvB,IAAKA,EAIH,OAHAT,EAAa/c,SAAW,GACxB6c,EAAYJ,OAAOpb,EAAO,EAAG0b,QAC7Bxa,EAAYsa,GAKd,IAAII,EAAQ/a,EAAQjD,iBAAiBG,6BAC/BF,EAAkDkD,EAAlDlD,OAAQC,EAA0CiD,EAA1CjD,SAAUyM,EAAgCxJ,EAAhCwJ,UAAWD,EAAqBvJ,EAArBuJ,iBAC7BpN,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KAGLsB,EAAeqd,GAFNO,EAAa,KAEYP,EACpCnd,EACFF,EAAemJ,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACpDwB,EACFH,EAAemJ,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAEpDqB,EAAcC,GADJE,EAAaC,GAG7Bgd,EAAa/c,SAAW+I,WAAWyU,GACnCT,EAAand,aAAemJ,WAAWnJ,EAAaoJ,QAAQ,IAC5D+T,EAAapd,YAAcoJ,WAAWpJ,EAAYqJ,QAAQ,IAG1D,IAAImU,EAAc,2BACb/a,GADa,IAEhB3C,cAAe,CACbC,cAAeqd,EAAard,cAC5BC,YAAaA,EACbC,aAAcA,EACdC,eAAgBkd,EAAald,eAC7BC,aACAC,cACAC,SAAU+c,EAAa/c,SACvBG,eAAe,KAInB,GAAmC,IAA/B4c,EAAard,gBAEbyd,EADa,SAAXje,GAAgC,WAAXA,EACT,2BACTie,GADS,IAEZ3d,OAAQuJ,YAAY5J,EAAWQ,GAAaqJ,QAAQ,MAGxC,2BACTmU,GADS,IAEZ3d,OAAQG,KAGa,IAArBgM,GAA2B,CAM7B,IAAIyR,EAAyBxd,EAAegM,EAAU8O,UAAa,IAM/D2C,EAAuBD,GAJzBA,EAAwBrU,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAE/D6e,EAAwBrU,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,KAInE6e,EAAc,2BACTA,GADS,IAEZ3d,OAAQuJ,WAAWpJ,EAAYqJ,QAAQ,IACvC4C,UAAU,2BACLxJ,EAAoBwJ,WADhB,IAEPjM,YAAa0d,MAKrBhb,EAAuB8a,GAEvBN,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,GA4PaY,CAAgBhO,EAAEC,OAAOxK,QAC1CwY,OAAQ,kBACNJ,EAAoB,WAAYP,EAAa/c,WAE/CwB,MAAiC,KAA1Bub,EAAa/c,iBAI1B,eAACpD,EAAA,EAAD,CAAKC,QAAQ,OAAOqW,GAAI,EAAGlW,GAAI,EAA/B,UACE,cAACJ,EAAA,EAAD,CACEmL,WAAW,WACXlL,QAAS2T,EAAK9Q,cAAgB,EAAI,OAAS,OAF7C,SAIE,eAAC9C,EAAA,EAAD,CACEmL,WAAW,WACXF,cAAc,SACdhL,QAAS2T,EAAK9Q,cAAgB,EAAI,OAAS,OAH7C,UAKE,cAACzC,EAAA,EAAD,CAAYd,UAAWH,EAAQ0gB,YAA/B,SACE,kDAEF,cAACzf,EAAA,EAAD,CACEd,UAAWH,EAAQ0gB,YACnBxK,QAAQ,UACRnV,MAAM,gBAHR,yCASJ,cAACH,EAAA,EAAD,CAAK+gB,GAAI,EAAT,SACE,cAAC1gB,EAAA,EAAD,UACE,4BAAI8L,WAAWgU,EAAand,cAAcoJ,QAAQ,YAIxD,eAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOqW,GAAI,EAAGlW,GAAI,EAA/B,UACE,eAACJ,EAAA,EAAD,CACEmL,WAAW,WACXF,cAAc,SACdhL,QAAS2T,EAAK9Q,cAAgB,EAAI,OAAS,OAH7C,UAKE,cAACzC,EAAA,EAAD,CAAYd,UAAWH,EAAQ0gB,YAA/B,SACE,oDAEF,cAACzf,EAAA,EAAD,CACEd,UAAWH,EAAQ0gB,YACnBxK,QAAQ,UACRnV,MAAM,gBAHR,uCAQF,cAACH,EAAA,EAAD,CAAKT,UAAWqU,EAAK9Q,cAAgB,EAAI1D,EAAQ2gB,YAAc,GAA/D,SACE,cAAC3K,EAAA,EAAD,CACEN,UACG3I,WAAW7G,EAAQjD,iBAAiBG,8BAEvCwS,WAAS,EACTmB,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRhN,MAAO6X,EAAapd,YACpBqT,SAAU,SAACvD,GAAD,OA1TM,SAACvK,GACzB,IAAKA,EAIH,OAHA6X,EAAapd,YAAc,GAC3Bkd,EAAYJ,OAAOpb,EAAO,EAAG0b,QAC7Bxa,EAAYsa,GAId,IAAIld,EAAcoJ,WAAW7D,GACvBhG,EAAkDkD,EAAlDlD,OAAQC,EAA0CiD,EAA1CjD,SAAUyM,EAAgCxJ,EAAhCwJ,UAAWD,EAAqBvJ,EAArBuJ,iBAC7BpN,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KACP2e,EAAQ/a,EAAQjD,iBAAiBG,6BAEjCwe,EACF7U,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACvCwK,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IACvCsB,EAAemJ,YAAYpJ,GAAeie,EAAO,IAAI5U,QAAQ,IAC7DlJ,EACFF,EAAemJ,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACpDwB,EACFH,EAAemJ,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAEtD4e,GAAkBvd,GADNG,EAAaC,GACmBkd,GAASA,EAAS,IAElEF,EAAapd,YAAcA,EAC3Bod,EAAand,aAAeA,EAC5Bmd,EAAa/c,SAAW+I,WAAWmU,EAAclU,QAAQ,IAGzD,IAAImU,EAAc,2BACb/a,GADa,IAEhB3C,cAAe,CACbC,cAAeqd,EAAard,cAC5BC,YAAaA,EACbC,aAAcA,EACdC,eAAgBkd,EAAald,eAC7BC,aACAC,cACAC,SAAU+c,EAAa/c,SACvBG,eAAe,KAInB,GAAmC,IAA/B4c,EAAard,gBAEbyd,EADa,SAAXje,GAAgC,WAAXA,EACT,2BACTie,GADS,IAEZ3d,OAAQuJ,YAAY5J,EAAWQ,GAAaqJ,QAAQ,MAGxC,2BACTmU,GADS,IAEZ3d,OAAQG,KAGa,IAArBgM,GAA2B,CAM7B,IAAIyR,EAAyBxd,EAAegM,EAAU8O,UAAa,IAM/D2C,EAAuBD,GAJzBA,EAAwBrU,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAE/D6e,EAAwBrU,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,KAInE6e,EAAc,2BACTA,GADS,IAEZ3d,OAAQuJ,WAAWpJ,EAAYqJ,QAAQ,IACvC4C,UAAU,2BACLxJ,EAAoBwJ,WADhB,IAEPjM,YAAa0d,MAKrBhb,EAAuB8a,GAEvBN,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,GAwOagB,CAAkBpO,EAAEC,OAAOxK,QAC5CwY,OAAQ,kBACNJ,EAAoB,cAAeP,EAAapd,cAElD6B,MAAoC,KAA7Bub,EAAapd,mBAK1B,eAAC/C,EAAA,EAAD,CAAKC,QAAQ,OAAOqW,GAAI,EAAGlW,GAAI,EAA/B,UACE,cAACJ,EAAA,EAAD,CACEmL,WAAW,WACXlL,QAAS2T,EAAK9Q,cAAgB,EAAI,OAAS,OAF7C,SAIE,cAACzC,EAAA,EAAD,CAAYd,UAAWH,EAAQ0gB,YAA/B,SACE,uDAGHlM,EAAK9Q,cAAgB,EACpB,cAAC9C,EAAA,EAAD,UACE,cAACoV,EAAA,EAAD,CACEN,UACG3I,WACC7G,EAAQjD,iBAAiBG,8BAG7BwS,WAAS,EACTmB,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,iBACLuC,QAAQ,WACRhN,MAAO6X,EAAald,eACpBmT,SAAU,SAACvD,GAAD,OAtQC,SAACvK,GACtB,IAAKA,EAIH,OAHA6X,EAAald,eAAiB,GAC9Bgd,EAAYJ,OAAOpb,EAAO,EAAG0b,QAC7Bxa,EAAYsa,GAGdE,EAAald,eAAiBie,SAAS5Y,GACvC2X,EAAYJ,OAAOpb,EAAO,EAAG0b,GAC7Bxa,EAAYsa,GA6PekB,CAAetO,EAAEC,OAAOxK,QACzCwY,OAAQ,kBACNJ,EACE,iBACAP,EAAald,iBAGjB2B,MAAuC,KAAhCub,EAAald,mBAGtB,YCrfCme,GAAe,SAAC7M,EAAOxB,EAAMzK,EAAOhD,GAC/C,IAAInD,EAAsB,EACtBC,EAAsB,EACtBT,EAAM,EACND,EAAO,EACPc,EAA+B,EAC/BC,EAA+B,EAuDnC,MAtDa,eAATsQ,EACEzK,GAUFnG,GATAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAE3BT,EAAwC,IAAlCwK,WAAW/J,KACjBV,EACEyK,WAAW/J,GACX+J,WACE7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,OAG5Dc,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SACjDE,EACEN,EAAsBmD,EAAQjD,iBAAiBE,WAWjDJ,GATAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAE3BT,EAAM,IACND,EACEyK,WAAW/J,GACX+J,WACE7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,OAG5Dc,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SACjDE,EACEN,EAAsBmD,EAAQjD,iBAAiBE,SAC5C+C,EAAQ7D,cACXU,EAAsB,EACtBM,EACEL,EAAsBkD,EAAQjD,iBAAiBE,YAcrDE,GADAN,GATAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAE3BT,EACEwK,WAAW/J,GACX+J,WAAW7D,EAAQ,GAAK,KAAOA,EAAQ,IAAMA,KAC/C5G,EACEyK,WAAW/J,GACX+J,WAAW7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,QAG7C4D,EAAQjD,iBAAiBE,SACjDC,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,UAG5C,2BACF+C,GADL,IAEE9D,WAAqB,eAATuR,EAAwBzK,EAAQhD,EAAQ9D,WACpDG,IAAc,QAAToR,EAAiB5G,WAAW7D,GAASA,EAAQ,GAAK,EACvDpG,iBAAiB,2BACZoD,EAAQpD,kBADG,IAEdE,oBAAqB+J,WAAW/J,EAAoBgK,QAAQ,IAC5DzK,IAAKwK,WAAWxK,EAAIyK,QAAQ,IAC5B1K,KAAMyK,WAAWzK,EAAK0K,QAAQ,IAC9BjK,oBAAqBgK,WAAWhK,EAAoBiK,QAAQ,MAE9D/J,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdG,6BAA8B2J,WAC5B3J,EAA6B4J,QAAQ,IAEvC3J,6BAA8B0J,WAC5B1J,EAA6B2J,QAAQ,SAMhCiV,GAAgB,SAAC9M,EAAOxB,EAAMzK,EAAOhD,GAChD,IAAInD,EAAsB,EACtBC,EAAsB,EACtBT,EAAM,EACND,EAAO,EACPc,EAA+B,EAC/BC,EAA+B,EAkDnC,MAjDa,gBAATsQ,EACEzK,GAQFnG,GAPAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAE3BT,EACEwK,WAAW/J,GACX+J,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,OACnED,EAAOyK,WAAW/J,GAAuBkD,EAAQ5D,MAEjDc,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SACjDE,EACEN,EAAsBmD,EAAQjD,iBAAiBE,WAKjDb,EAAO,EAIPS,GAPAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAG3BT,EACEwK,WAAW/J,GACX+J,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,MACjBD,EAClDc,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SACjDE,EACEN,EAAsBmD,EAAQjD,iBAAiBE,SAC5C+C,EAAQ9D,aACXW,EAAsB,EACtBM,EACEL,EAAsBkD,EAAQjD,iBAAiBE,YAcrDE,GADAN,GATAC,EAAsB+J,WACpB7G,EAAQpD,iBAAiBE,uBAE3BT,EACEwK,WAAW/J,GACX+J,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,OACnED,EACEyK,WAAW/J,GACX+J,WAAW7D,EAAQ,GAAK,KAAOA,EAAQ,IAAMA,KAGvBhD,EAAQjD,iBAAiBE,SACjDC,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,UAE5C,2BACF+C,GADL,IAEE7D,YAAsB,gBAATsR,EAAyBzK,EAAQhD,EAAQ7D,YACtDC,KAAe,SAATqR,EAAkB5G,WAAW7D,GAASA,EAAQhD,EAAQ5D,KAAO,EACnEQ,iBAAiB,2BACZoD,EAAQpD,kBADG,IAEdE,oBAAqB+J,WAAW/J,EAAoBgK,QAAQ,IAC5DzK,IAAKwK,WAAWxK,EAAIyK,QAAQ,IAC5B1K,KAAMyK,WAAWzK,EAAK0K,QAAQ,IAC9BjK,oBAAqBgK,WAAWhK,EAAoBiK,QAAQ,MAE9D/J,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdG,6BAA8B2J,WAC5B3J,EAA6B4J,QAAQ,IAEvC3J,6BAA8B0J,WAC5B1J,EAA6B2J,QAAQ,SCzIvCxN,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAER,iBAAkB,CAChBL,MAAO,QAGXmhB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAERsf,YAAa,CACXhf,MAAOhC,EAAM0B,QAAQ,IACrBP,QAAS,OACTkL,WAAY,UAEdoJ,MAAO,CACL,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAKC,SAASihB,KACtB,IAAMniB,EAAUR,KAChB,EAQIga,qBAAW7T,IAPbO,EADF,EACEA,QACAC,EAFF,EAEEA,WACAqB,EAHF,EAGEA,WACAlB,EAJF,EAIEA,SACAwB,EALF,EAKEA,OACA1B,EANF,EAMEA,oBACAC,EAPF,EAOEA,uBAII+b,EAAU,uCAAG,WAAO3O,GAAP,mBAAA9F,EAAA,yDACK,QAAlB8F,EAAEC,OAAOC,MAAmBF,EAAEC,OAAOxK,MADxB,uBAEf/C,EAAW,2BACND,GADK,IAER3D,IAAK,MAJQ,iCAQXoR,EAAOF,EAAEC,OAAOC,KAChBzK,EAAiB,eAATyK,EAAwBF,EAAEC,OAAOoM,QAAUrM,EAAEC,OAAOxK,MATjD,SAUI8Y,GAAa,EAAOrO,EAAMzK,EAAOhD,GAVrC,OAUXoO,EAVW,OAWjB+N,EAAqB/N,EAAOxR,iBAAiBC,qBAC7Cuf,EAAqBhO,EAAOxR,iBAAiBE,qBAC7CmD,EAAWmO,GAbM,4CAAH,sDAiBViO,EAAW,uCAAG,WAAO9O,GAAP,mBAAA9F,EAAA,yDACI,SAAlB8F,EAAEC,OAAOC,MAAoBF,EAAEC,OAAOxK,MADxB,uBAEhB/C,EAAW,2BACND,GADK,IAER5D,KAAM,MAJQ,iCAQZqR,EAAOF,EAAEC,OAAOC,KAChBzK,EAAiB,gBAATyK,EAAyBF,EAAEC,OAAOoM,QAAUrM,EAAEC,OAAOxK,MATjD,SAUG+Y,GAAc,EAAQtO,EAAMzK,EAAOhD,GAVtC,OAUZoO,EAVY,OAWlB+N,EAAqB/N,EAAOxR,iBAAiBC,qBAC7Cuf,EAAqBhO,EAAOxR,iBAAiBE,qBAC7CmD,EAAWmO,GAbO,4CAAH,sDAgBjB,EAAkDvO,mBAChDG,EAAQpD,iBAAiBC,qBAD3B,mBAAOyf,EAAP,KAA0BH,EAA1B,KAGA,EAAkDtc,mBAChDG,EAAQpD,iBAAiBE,qBAD3B,mBAAOyf,EAAP,KAA0BH,EAA1B,KAIA,EAAcI,uBAAYF,EAAmB,KAAtCG,EAAP,oBACA,EAAcD,uBAAYD,EAAmB,KAAtCG,EAAP,oBAoHMC,EAAsB,SAACpP,EAAG4K,GAC9B,GAAsB,WAAlB5K,EAAEC,OAAOC,KAAmB,CAC9B,MAAkC0K,EAAM7F,MAAMtV,OAAtCL,EAAR,EAAQA,cAAeK,EAAvB,EAAuBA,OACvB,GAAe,SAAXA,GAAgC,WAAXA,EAAqB,CAC5C,IAAIM,EAAS4C,EAAoBjD,SAAWiD,EAAoB5C,OAChE6C,EAAuB,2BAClBD,GADiB,IAEpB5C,OAAQuJ,WAAWvJ,EAAOwJ,QAAQ,IAClCnK,gBACAK,YAEFiD,EAAW,2BACND,GADK,IAERjD,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdC,SACAL,kBAEFJ,WAAW,2BACNyD,EAAQzD,YADH,IAERG,qBAAsBM,EACtBL,yBAGC,CAAC,IAAD,EACLwD,EAAuB,2BAClBD,GADiB,IAEpBlD,OAAQuQ,EAAEC,OAAOxK,MACjB/F,SAAU,EACVK,OAAQ8C,EAAS,GAAG3C,YAChB2C,EAAS,GAAG3C,YACZuC,EAAQjD,iBAAiBI,gCAE/B8C,EAAW,2BACND,GADK,IAERjD,iBAAiB,2BACZiD,EAAQjD,kBADG,uBAEbwQ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,OAFZ,yBAGJ,GAHI,IAKhBzG,WAAW,2BACNyD,EAAQzD,YADH,IAERG,qBAAsB6Q,EAAEC,OAAOxK,gBAIhC,CAmBG,IAAD,EAlB0C,EAAjD,GAAKhD,EAAQ9D,YAAe8D,EAAQ7D,YAmBlC8D,EAAW,2BACND,GADK,IAERjD,iBAAiB,2BACZiD,EAAQjD,kBADG,uBAEbwQ,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,QAFvB,6CAGgB6D,YAE1B7G,EAAQpD,iBAAiBE,oBAAsByQ,EAAEC,OAAOxK,OACxD8D,QAAQ,KANE,6CAQgBD,YAE1B7G,EAAQpD,iBAAiBC,oBAAsB0Q,EAAEC,OAAOxK,OACxD8D,QAAQ,KAXE,YApBlB7G,EAAW,2BACND,GADK,IAERjD,iBAAiB,2BACZiD,EAAQjD,kBADG,uBAEbwQ,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,QAFvB,6CAGgB6D,YAE1B7G,EAAQpD,iBAAiBE,oBAAsByQ,EAAEC,OAAOxK,OACxD8D,QAAQ,KANE,6CAQgBD,YAE1B7G,EAAQpD,iBAAiBE,oBAAsByQ,EAAEC,OAAOxK,OACxD8D,QAAQ,KAXE,OAkCpB3G,EAAuB,2BAClBD,GADiB,IAEpBjD,SACsC,SAApC+C,EAAQjD,iBAAiBC,QACW,WAApCgD,EAAQjD,iBAAiBC,OACrB,EACA6J,WAAW0G,EAAEC,OAAOxK,YAK1BoY,EAAsB,SAAC3N,EAAMzK,GAC5BA,GACH/C,EAAW,2BACND,GADK,kBAEPyN,EAAO,MAad,OARAmG,qBAAU,YAzNuB,SAAC5Q,GAChC,IACI4Z,EADA/f,EAAsB,EAEtBC,EAAsB,EACtBT,EAAM,EACND,EAAO,EACPc,EAA+B,EAC/BC,EAA+B,EAGnCN,EAAsBgK,WAAW7D,GACjC4Z,EACE/V,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,KACjEwK,WAAW7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,MAErEC,GADAS,EAAsB+J,WAAW7D,GAAS6D,WAAW+V,EAAiB,IAGpE/V,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,KACnED,EACEU,EACA+J,WAAW7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,MACrEe,EACEN,EAAsBmD,EAAQjD,iBAAiBE,SACjDC,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SAE7C4f,MAAM3f,KAA+BA,EAA+B,GACpE2f,MAAM1f,KAA+BA,EAA+B,GACpE0f,MAAMxgB,KAAMA,EAAM,GAClBwgB,MAAMzgB,KAAOA,EAAO,GAIxBggB,EAAqBvV,WAAW/J,EAAoBgK,QAAQ,KAC5D7G,EAAW,2BACND,GADK,IAERpD,iBAAiB,2BACZoD,EAAQpD,kBADG,IAEdE,oBAAqB+J,WAAW/J,EAAoBgK,QAAQ,IAC5DzK,IAAKwK,WAAWxK,EAAIyK,QAAQ,IAC5B1K,KAAMyK,WAAWzK,EAAK0K,QAAQ,IAC9BjK,oBAAqBgK,WAAWhK,EAAoBiK,QAAQ,MAE9D/J,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdG,6BAA8B2J,WAC5B3J,EAA6B4J,QAAQ,IAEvC3J,6BAA8B0J,WAC5B1J,EAA6B2J,QAAQ,SAyK3CgW,CAAyBL,KACxB,CAACA,IAEJ7I,qBAAU,YArKuB,SAAC5Q,GAChC,IAAInG,EAAsB,EACtBC,EAAsB,EACtBT,EAAM,EACND,EAAO,EACPc,EAA+B,EAC/BC,EAA+B,EAUnCN,GAPAC,EAAsB+J,WAAW7D,KACjC3G,EACEwK,WAAW7D,GACX6D,WAAW7G,EAAQ3D,IAAM,GAAK,KAAO2D,EAAQ3D,IAAM,IAAM2D,EAAQ3D,OACnED,EACEyK,WAAW7D,GACX6D,WAAW7G,EAAQ5D,KAAO,GAAK,KAAO4D,EAAQ5D,KAAO,IAAM4D,EAAQ5D,OAErEc,EACEJ,EAAsBkD,EAAQjD,iBAAiBE,SACjDE,EACEN,EAAsBmD,EAAQjD,iBAAiBE,SAC5C+C,EAAQ9D,YAAe8D,EAAQ7D,cAClCU,EAAsBC,EACtBK,EACEL,EAAsBkD,EAAQjD,iBAAiBE,UAG/C4f,MAAM3f,KAA+BA,EAA+B,GACpE2f,MAAM1f,KAA+BA,EAA+B,GACpE0f,MAAMxgB,KAAMA,EAAM,GAClBwgB,MAAMzgB,KAAOA,EAAO,GAIxB+f,EAAqBtV,WAAWhK,EAAoBiK,QAAQ,KAC5D7G,EAAW,2BACND,GADK,IAERpD,iBAAiB,2BACZoD,EAAQpD,kBADG,IAEdE,oBAAqB+J,WAAW/J,EAAoBgK,QAAQ,IAC5DzK,IAAKwK,WAAWxK,EAAIyK,QAAQ,IAC5B1K,KAAMyK,WAAWzK,EAAK0K,QAAQ,IAC9BjK,oBAAqBgK,WAAWhK,EAAoBiK,QAAQ,MAE9D/J,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdG,6BAA8B2J,WAC5B3J,EAA6B4J,QAAQ,IAEvC3J,6BAA8B0J,WAC5B1J,EAA6B2J,QAAQ,SAoH3CiW,CAAyBL,KACxB,CAACA,IAGF,cAAChiB,EAAA,EAAD,UACE,sBAAKT,UAAWH,EAAQmV,MAAxB,UACE,cAACvU,EAAA,EAAD,UACE,cAACK,EAAA,EAAD,UACE,8CAGJ,cAAC6a,GAAA,EAAD,IACA,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASD,eAAe,SAASoL,GAAI,EAApE,UACE,cAACgM,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS5Z,EAAQ9D,WACjB4U,SAAUoL,EACVzO,KAAK,eAGTyP,MAAM,QAER,cAACxiB,EAAA,EAAD,UACE,cAACoV,EAAA,EAAD,CACEN,UAAWxP,EAAQ9D,WACnBghB,MAAM,iBACNrM,KAAK,SACLZ,WAAY,CACVmI,WAAY,CAAEC,IAAK,GACnBnI,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,gBAGJL,KAAK,QACLtC,KAAK,MACLkD,GAAG,oBACHX,QAAQ,WACRhN,MAAOhD,EAAQ3D,IACfyU,SAAUoL,EACVV,OAAQ,kBAAMJ,EAAoB,MAAOpb,EAAQ3D,MACjDiD,MAAuB,KAAhBU,EAAQ3D,QAGnB,cAAC3B,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAACH,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS5Z,EAAQ7D,YACjB2U,SAAUuL,EACV5O,KAAK,gBAGTyP,MAAM,SAER,cAACxiB,EAAA,EAAD,UACE,cAACoV,EAAA,EAAD,CACEN,UAAWxP,EAAQ7D,YACnB+gB,MAAM,kBACNrM,KAAK,SACLZ,WAAY,CACVmI,WAAY,CAAEC,IAAK,GACnBnI,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,gBAGJL,KAAK,QACLtC,KAAK,OACLkD,GAAG,qBACHX,QAAQ,WACRhN,MAAOhD,EAAQ5D,KACf0U,SAAUuL,EACVb,OAAQ,kBAAMJ,EAAoB,OAAQpb,EAAQ5D,OAClDkD,MAAwB,KAAjBU,EAAQ5D,SAGnB,cAAC1B,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASuX,GAAI,EAA5C,SACE,cAACvH,GAAA,EAAD,CAAOC,SAAS,OAAhB,sDAGJ,cAACpb,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,cAAChW,EAAA,EAAD,UACE,+DAGJ,cAAC6a,GAAA,EAAD,IACA,eAAClb,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAelS,eAAe,SAAtD,UACE,eAAClL,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,eAAC4a,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUU,EAAQjD,iBAAiBC,OAJvD,UAMGgD,EAAQ1D,OACP,cAACkZ,GAAA,EAAD,CACEhG,SAAU5N,EACV+O,GAAG,0BACHlD,KAAK,SACLzK,MAAOhD,EAAQjD,iBAAiBC,OAChC8T,SAAU6L,EALZ,SAOG9E,GAAiBzQ,KAAI,SAACsO,EAAKvW,GAAN,OACpB,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,QAMnB,cAACqW,GAAA,EAAD,CACEhG,SAAU5N,EACV+O,GAAG,0BACHlD,KAAK,SACLzK,MAAOhD,EAAQjD,iBAAiBC,OAChC8T,SAAU6L,EALZ,SAOG/E,GAAUxQ,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,QAMrB,cAACke,GAAA,EAAD,UAAiB/b,EAAW9G,kBAIlC,eAACE,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,CAAYgL,MAAM,SAAlB,kCACA,cAAChL,EAAA,EAAD,CAAYgL,MAAM,SAASiK,QAAQ,KAAnC,SACE,4BACuC,SAApChQ,EAAQjD,iBAAiBC,OACtB,KACoC,WAApCgD,EAAQjD,iBAAiBC,OACzB,KACAgD,EAAQjD,iBAAiBC,cAInC,eAACtC,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sBAAMd,UAAU,cAAhB,gBADF,uBAGA,cAAC6V,EAAA,EAAD,CACEN,SACsC,SAApCxP,EAAQjD,iBAAiBC,QACW,WAApCgD,EAAQjD,iBAAiBC,OAI3B6T,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUU,EAAQjD,iBAAiBE,SACrDwQ,KAAK,WACLkD,GAAG,yBACHX,QAAQ,WACRhN,MAAOhD,EAAQjD,iBAAiBE,SAChCqY,WAAYhU,EAAW9G,QACvBsW,SAAU6L,OAGd,eAACjiB,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sBAAMd,UAAU,cAAhB,gBADF,0BAGA,cAAC6V,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUid,EAC5B9O,KAAK,sBACLkD,GAAG,oCACHX,QAAQ,WACRhN,MAAOuZ,EACPjH,WAAYhU,EAAW9G,QACvBsW,SAAU,SAACvD,GAAD,OAAO6O,EAAqB7O,EAAEC,OAAOxK,aAGnD,eAACtI,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sBAAMd,UAAU,cAAhB,gBADF,0BAGA,cAAC6V,EAAA,EAAD,CACEN,UAAWxP,EAAQ9D,aAAe8D,EAAQ7D,YAC1C0U,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUgd,EAC5B7O,KAAK,sBACLkD,GAAG,oCACHX,QAAQ,WACRhN,MAAOsZ,EACPhH,WAAYhU,EAAW9G,QACvBsW,SAAU,SAACvD,GAAD,OAAO4O,EAAqB5O,EAAEC,OAAOxK,gBAIrD,eAACtI,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAelS,eAAe,SAAtD,UACE,eAAClL,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,CAAYgL,MAAM,SAAlB,iBACA,cAAChL,EAAA,EAAD,CAAYgL,MAAM,SAASiK,QAAQ,KAAnC,SACE,mCAAMnJ,WAAW7G,EAAQpD,iBAAiBP,KAAKyK,QAAQ,WAG3D,eAACpM,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,CAAYgL,MAAM,SAAlB,kBACA,cAAChL,EAAA,EAAD,CAAYgL,MAAM,SAASiK,QAAQ,KAAnC,SACE,mCAAMnJ,WAAW7G,EAAQpD,iBAAiBR,MAAM0K,QAAQ,WAG5D,eAACpM,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,CAAYgL,MAAM,SAAlB,2CAGA,cAAChL,EAAA,EAAD,CAAYgL,MAAM,SAASiK,QAAQ,KAAnC,SACE,kCACI,IACDnJ,WACC7G,EAAQjD,iBAAiBG,8BACzB4J,QAAQ,WAIhB,eAACpM,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,CAAYgL,MAAM,SAAlB,2CAGA,cAAChL,EAAA,EAAD,CAAYgL,MAAM,SAASiK,QAAQ,KAAnC,SACE,kCACI,IACDnJ,WACC7G,EAAQjD,iBAAiBI,8BACzB2J,QAAQ,cAKlB,cAACpM,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,cAAChW,EAAA,EAAD,UACE,qDAGJ,cAAC6a,GAAA,EAAD,IACA,cAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,cAAC+f,GAAD,MAKF,cAAChgB,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,cAAChW,EAAA,EAAD,UACE,sDAGJ,cAAC6a,GAAA,EAAD,IACA,cAAClb,EAAA,EAAD,UACE,cAACqd,GAAD,W,wBC3kBGuF,GAAiB5d,0BAEjB6d,GAAkB,SAAC,GAAkB,IAAhB3d,EAAe,EAAfA,SAChC,EAA0CC,mBAAS,CACjD2H,SAAU,GACVgW,MAAO,EACPvgB,SAAU,EACVwgB,gBAAiB,EACjBC,cAAe,GACfC,eAAgB,EAChBC,qBAAsB,EACtBC,iBAAkB,EAClBC,UAAW,EACXC,WAAY,EACZC,SAAU,EACVC,UAAW,EACXC,MAAO,EACPC,iBAAiB,EACjBC,mBAAoB,EACpBC,gBAAiB,IAhBnB,mBAAOC,EAAP,KAAsBC,EAAtB,KAmBA,EAAsC1e,mBAAS,CAC7CmI,UAAW,GACXwW,UAAW,GACXC,WAAW,EACXC,eAAgBC,OAASC,OAAO,SAASC,OAAO,cAChDrgB,QAAS,GACTsgB,gBAAgB,EAChBC,0BAA2BJ,OAASC,OAAO,SAASC,OAAO,cAC3DG,gBAAgB,EAChBC,wBAAyB,EACzBC,WAAY,GACZC,oBAAoB,EACpBzV,UAAW,CACT0V,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,GAExB6C,SAAU,EACVC,UAAW,EACXC,MAAO,IAnBT,mBAAOoB,EAAP,KAAoBC,EAApB,KAsBA,EAAwC1f,mBAAS,CAC/C,CACErC,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,KArDjB,mBAAOgd,EAAP,KAAqB2E,EAArB,KAyDA,EAAgD3f,mBAAS,CACvDG,QAASjE,KADX,mBAAO0jB,EAAP,KAAyBC,EAAzB,KAGA,EAA8C7f,mBAAS,IAAvD,mBAAO8f,EAAP,KAAwBC,EAAxB,KACA,EAAkC/f,mBAAS,IAA3C,mBAAOggB,EAAP,KAAkBC,EAAlB,KACA,EAAoCjgB,oBAAS,GAA7C,mBAAOkgB,EAAP,KAAmBC,EAAnB,KACA,EAA0BngB,mBAAS,GAAnC,mBAAO2d,EAAP,KAAcyC,EAAd,KACA,EAAgCpgB,mBAAS,GAAzC,mBAAO5C,EAAP,KAAiBijB,EAAjB,KACA,EAA0BrgB,oBAAS,GAAnC,mBAAOsgB,EAAP,KAAcC,EAAd,KACA,EAAgDvgB,oBAAS,GAAzD,mBAAOwgB,EAAP,KAAyBC,EAAzB,KAEA,EAA8CzgB,mBAAS,CACrDme,SAAU,EACVE,MAAO,EACPiB,oBAAoB,EACpBC,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,IANxB,mBAAOoF,EAAP,KAAwBC,EAAxB,KASA,OACE,cAAClD,GAAeva,SAAhB,CACEC,MAAO,CACLsb,gBACAC,mBACAoB,kBACAC,qBACAN,cACAC,iBACAE,mBACAC,sBACA7E,eACA2E,kBACAK,YACAC,eACAC,aACAC,gBACAxC,QACAyC,WACAhjB,WACAijB,cACAC,QACAC,WACAC,mBACAC,sBACAC,kBACAC,sBAzBJ,SA4BG5gB,K,8GCvHD6gB,GAAkB,SAAChZ,EAAGiZ,GAC1B,GAAIjZ,EAAEkZ,OAAOC,OAASF,EAAEC,OAAOC,MAC7B,OAAOnZ,EAAEkZ,OAAOC,MAAMC,cAAcH,EAAEC,OAAOC,QAI3CtnB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJtlB,MAAO,QAETulB,MAAO,CACLvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE9B8lB,MAAO,CACL3F,SAAU,KAEZnG,UAAW,CACT5Z,UAAW,QAEb2lB,SAAU,CACR,uCAAwC,CACtC9b,gBAAiB+b,iBAAM1nB,EAAM2nB,QAAQC,QAAQC,KAAM,MAGvDC,eAAgB,CACdlL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,GAETmmB,eAAgB,CACdvL,OAAQ,4BACR3a,OAAQ,GACRD,MAAO,GACP6a,aAAc,OAEhBpH,MAAO,CACL,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAKC,SAAS4mB,GAAT,GAMX,IALFC,EAKC,EALDA,KACAC,EAIC,EAJDA,YACAC,EAGC,EAHDA,SACAC,EAEC,EAFDA,aACAC,EACC,EADDA,UAEMnoB,EAAUR,KAChB,EAA8Cga,qBAAW7T,IAAjDqC,EAAR,EAAQA,eAEJogB,GAFJ,EAAwBngB,kBAEK,aAAID,GAAgBqgB,MAAK,SAAC1a,EAAGiZ,GAAJ,OACpDD,GAAgBhZ,EAAGiZ,OA6BrB,OACE,qBAAKzmB,UAAWH,EAAQgnB,KAAxB,SACE,cAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,SACE,cAAC3H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CACEpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,QACL,aAAW,iBACXsS,cAAY,EALd,UAOE,cAAC/I,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,yBACA,cAACA,GAAA,EAAD,kCACA,cAACA,GAAA,EAAD,CAAWhe,MAAO,IAAlB,oBACA,cAACge,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,oBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,mBACEO,EAKE,KAJF,eAAC,WAAD,WACE,cAACxI,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,kCAGFQ,EAOE,KANF,eAAC,WAAD,WACGJ,GAAiB,WAATA,EACP,cAACrI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,uBACE,KACJ,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,yBAGJ,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,yBAGJ,cAAChI,GAAA,EAAD,UACGyI,EAAuB9a,KAAI,SAACI,EAAUrI,GACrC,OACE,cAAC,GAAD,CAEEqI,SAAUA,EACVrI,MAAOA,EACP0iB,KAAMA,EACNC,YAAaA,EACbC,SAAUA,EACVC,aAAcA,EACdC,UAAWA,GAPN9iB,iBAmBzB,I,wBAAMmjB,GAA2B,SAAC,GAQ3B,IAPL9a,EAOI,EAPJA,SACArI,EAMI,EANJA,MACA0iB,EAKI,EALJA,KACAC,EAII,EAJJA,YACAC,EAGI,EAHJA,SACAC,EAEI,EAFJA,aACAC,EACI,EADJA,UAEA,EAA8G3O,qBAC5G7T,IADMqC,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,kBAAmB3B,EAA3C,EAA2CA,SAAUJ,EAArD,EAAqDA,QAGrD,GAHA,EAA8DE,oBAA9D,EAAmFC,uBAGzCN,oBAAS,IAAnD,mBAAO0iB,EAAP,KAAsBC,EAAtB,KACM1oB,EAAUR,KACVmpB,EAAYC,iBAAO,MAEnBC,EAAsB,aAAI7gB,GAAgBqgB,MAAK,SAAC1a,EAAGiZ,GAAJ,OACnDD,GAAgBhZ,EAAGiZ,MAEfkC,EAAyB,eAAQD,EAAoBxjB,IACrD0jB,EAAmC,eACpCF,EAAoBxjB,GAAOuK,WAE1BoZ,EAAa,eAAQtb,GAqBrBub,EAAe,SAACxV,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACd,GAAa,aAATyK,EAAqB,CACvB,IAAKzK,EAKH,OAJA4f,EAA0B3lB,SAAW,GACrC2lB,EAA0BI,YAAa,EACvCL,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAIlBC,EAA0BI,WADd,MAAVhgB,EAKJ4f,EAA0B3lB,SAAW4J,WAAW7D,QAC3C,GAAa,mBAATyK,EAA2B,CACpC,IAAKzK,EAKH,OAJA4f,EAA0BK,eAAiB,GAC3CL,EAA0BI,WAAaF,EAAcE,WACrDL,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGpBC,EAA0BK,eAAiBpc,WAAW7D,GACtD4f,EAA0BI,YAAa,OAClC,GAAa,WAATvV,EAAmB,CAC5B,IAAKzK,EAIH,OAHA4f,EAA0BtlB,OAAS,GACnCqlB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGpB,IAAIllB,EAAcoJ,WAAW7D,GACvB3G,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KACP0c,EAAiBjS,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAASwK,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAC1GsB,EAAemJ,YAAYpJ,GAAeqb,EAAe,IAAIhS,QAAQ,IACrElJ,EAAaiJ,YAAYnJ,EAAemJ,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,KAAQyK,QAAQ,IAC/FjJ,EAAcgJ,YAAYnJ,EAAemJ,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,KAAS0K,QAAQ,IACnGiU,EAAQ/a,EAAQjD,iBAAiBG,6BACjCY,EAAW+I,aAAcnJ,EAAeqd,GAASA,EAAS,KAAKjU,QAAQ,IAGtE2C,EAA+BmZ,EAA/BnZ,iBAAkBC,EAAakZ,EAAblZ,UACvB,GAAID,IAAyC,IAArBA,EAA2B,CACjD,IAAIyR,EAAyBxd,EAAegM,EAAU8O,UAAa,IAM/D2C,EAAuBD,GAJzBA,EAAwBrU,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAE/D6e,EAAwBrU,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,KAInEymB,EAAoCplB,YAAcoJ,WAC/CsU,EAAsBrU,QAAQ,IAEjC8b,EAA0BtlB,OAASuJ,WAAW7D,GAC9C4f,EAA0BlZ,UAAYmZ,OAEtCD,EAA0BtlB,OAASuJ,WAAW7D,GAEhD4f,EAA0BrlB,cAAcG,aAAeA,EACvDklB,EAA0BrlB,cAAcE,YAAcA,EACtDmlB,EAA0BrlB,cAAcO,SAAWA,EACnD8kB,EAA0BrlB,cAAcK,WAAaA,EACrDglB,EAA0BrlB,cAAcM,YAAcA,MACjD,CACL,IAAKmF,EAIH,OAHA4f,EAA0BvlB,cAAgB,GAC1CslB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGpBC,EAA0BvlB,cAAgB2F,EAE5C2f,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,IAGd9J,EAAkB,WACtB,IACMR,EAAM,KACNhb,EAAgBib,KAAKK,MACzB,KAAAL,KAAKM,SAA6BP,GAClCtR,WACF6b,EAA0BvlB,cAAgBA,EAC1CslB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,IAGdO,EAAe,WACdX,GAMHC,GAAkBD,GAElBT,EAAY,GAAD,oBAAKC,GAAL,CAAe5iB,OAjHvB2jB,EAAc7lB,WACjB2lB,EAA0B3lB,SAAW,GAElC6lB,EAAcG,iBACjBL,EAA0BK,eAAiB,GAExCH,EAAcxlB,SACjBslB,EAA0BtlB,OAAS8C,EAAS,GAAG3C,aAEjDklB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,GAClBH,GAAiB,GAiGfT,EAASxH,OAAOwH,EAAS3Z,OAAS,EAAG,GACrC0Z,EAAY,aAAIC,MAyCpB,OACE,eAACxI,GAAA,EAAD,CAAU4J,OAAK,EAACC,UAAWb,EAAetoB,UAAWH,EAAQmnB,SAA7D,UACE,cAACzH,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAAC9H,GAAA,EAAD,CAAUC,QAASkJ,EAAcE,WAAYnoB,MAAM,cAErD,cAAC2e,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACE,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC0oB,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAE9BvK,MAAO8f,EAAczlB,cACrBwT,KAAK,SACLpD,KAAK,gBACL+B,SACE1N,EAAesG,OAAS,IAAM0a,EAAcS,OAExChB,IAGmB,IAA1BzgB,EAAesG,QAAgB0a,EAAcS,OAQ1CzhB,EAAesG,OAAS,GAAK0a,EAAcS,MAP7C,cAACtS,EAAA,EAAD,CACEpW,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMwJ,KAHjB,SAKE,cAAC2K,GAAA,EAAD,MAUA,UAGR,cAAChK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SAAwBsnB,EAAcW,mBACtC,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACGqB,EAAcnC,OAAO7T,IACpB,cAAC4W,GAAA,EAAD,CAAMxG,MAAO4F,EAAcnC,OAAOC,MAAO/lB,MAAM,YAE/C,KAGJ,cAAC2e,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACGqB,EAAcjoB,MAAMiS,IACnB,cAAC6W,GAAA,EAAD,CACE7R,MAAOgR,EAAcjoB,MAAM+oB,OAC3BC,UAAU,MACVC,OAAK,EACLlP,oBAAqBmP,KAJvB,SAME,qBACE9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACLuK,gBAAiB2d,EAAcjoB,MAAMmpB,SAIzC,OAEJhC,EAuDE,KAtDF,eAAC,WAAD,WACE,cAACxI,GAAA,EAAD,CAAWhe,MAAO,IAAKvB,UAAWH,EAAQmV,MAA1C,SACE,cAACoU,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAcxlB,OACrBuT,KAAK,SACLpD,KAAK,aAGT,cAAC+L,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACE,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,cACsCiO,IAAnCgP,EAAcrZ,kBACoB,OAAnCqZ,EAAcrZ,iBACZ,eAAC,WAAD,WACE,cAACkQ,GAAA,EAAD,CACEC,SACqC,IAAnCkJ,EAAcrZ,kBACVqZ,EAAcrZ,iBAGpBqH,SAAU,SAACvD,GAAD,OAxHH,SAACvK,GACxB4f,EAA0BnZ,iBAAmBzG,EAE7C,IAAImY,EAAuB,EACrB9e,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KACNsN,EAAqBkZ,EAArBlZ,UAAWpM,EAAUslB,EAAVtlB,OACZoe,EACF7U,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IACvCwK,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IACvCsB,EAAemJ,YAAYvJ,GAAUoe,EAAO,IAAI5U,QAAQ,IAE5D,GAAG9D,EAAM,CACP,IAAIkY,EAAyBxd,EAAegM,EAAU8O,UAAa,IAMjE2C,EAAuBD,GAJrBA,EAAwBrU,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAE/D6e,EAAwBrU,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,UAIrE+e,EAAuB7d,EAGzBulB,EAAoCplB,YAAcoJ,WAC/CsU,EAAsBrU,QAAQ,IAGjC8b,EAA0BlZ,UAAYmZ,EAEtCF,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,GA0FexI,CAAiB5M,EAAEC,OAAOoM,UAC3C3H,KAAM,cAACgS,GAAA,EAAD,IACNC,YAAa,cAACxK,GAAA,EAAD,IACbtB,WAAY,CAAE,aAAc,mBAC5Bvd,MAAM,UACN2U,SAA6C,OAAnCsT,EAAcrZ,mBAE1B,eAAC1O,EAAA,EAAD,CACEF,OACqC,IAAnCioB,EAAcrZ,iBACV,UACA,gBAJR,cAQG5C,WAC6B,OAA5Bic,EAAcpZ,UACVoZ,EAAcpZ,UAAU8O,UACxB,GACH,IAZL,IAcG3R,WAC6B,OAA5Bic,EAAcpZ,UACVoZ,EAAcpZ,UAAUjM,YACxB,SAIR,YAKVwkB,EA6BE,KA5BF,cAAC,WAAD,UACGJ,GAAiB,WAATA,EACP,eAAC,WAAD,WACE,cAACrI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SAA+Bja,EAASvK,WACxC,cAACuc,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC4B,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAcG,eACrBpS,KAAK,MACLpD,KAAK,wBAKX,cAAC+L,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC4B,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAc7lB,SACrB4T,KAAK,MACLpD,KAAK,iBAMf,cAAC+L,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAACxQ,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAAS,kBAAM6T,KAAxC,SACIX,EAA4B,cAAC4B,GAAA,EAAD,IAAZ,cAAC,KAAD,Y,wDCvftB/R,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7C,SAAS8R,GAAS9R,GAChB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACE,6CACE1X,MAAO,CAAEa,OAAQ,QACjB6oB,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,oCAA+BxR,GACjC,iDAAyCA,IACrCklB,GANN,aAQGrhB,IAAU7D,GAAS,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SAAYlL,OAWtC,SAAS4kB,GAAUrlB,GACjB,MAAO,CACLwR,GAAG,wBAAD,OAA0BxR,GAC5B,gBAAgB,6BAAhB,OAA8CA,IAInC,SAASslB,GAAT,GAAqE,IAAzCC,EAAwC,EAAxCA,cAAevX,EAAyB,EAAzBA,YAAawX,EAAY,EAAZA,SACrE,EAAwB9kB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAgC7M,mBAAS,IAAzC,mBAAOkiB,EAAP,KAAiBD,EAAjB,KACA,EAAmExO,qBACjEgK,IADMgB,EAAR,EAAQA,cAAemB,EAAvB,EAAuBA,iBAGvB,EAMInM,qBAAW7T,IALbO,EADF,EACEA,QACAC,EAFF,EAEEA,WACAM,EAHF,EAGEA,iBACAF,EAJF,EAIEA,YACAF,EALF,EAKEA,uBAGIykB,EAAe,kBAAMlY,GAASrS,IAE9BwqB,EAAgB,WAEpB,MAA6CpF,EAAiBzf,QAAjC8kB,GAA7B,EAAQ1b,iBAAR,oBACM2b,EAAiBtF,EAAiBuF,kBAAkBna,QACxD,SAAC6K,GAAD,OAASA,EAAIvX,WAGf8B,EAAW6kB,GACXvkB,EAAiBkf,EAAiBuF,mBAClC3kB,EAAYof,EAAiBzf,QAAQoJ,kBACrCjJ,EAAuB4kB,EAAe,IACtCH,KAgCF,EAA0B/kB,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KAMA,OACE,eAAC,WAAD,WACE,cAAC7V,EAAA,EAAD,CACEvU,MAAM,UACNkV,KAAK,SACLV,QAAS,kBAxCmB,WAChCuV,IACA,IAAIznB,EACFmhB,EAAcd,MAAQxd,EAAQjD,iBAAiBE,SAC7CC,EACF8C,EAAQpD,iBAAiBE,oBACzBkD,EAAQjD,iBAAiBE,SAEvB4f,MAAM3f,KAA+BA,EAA+B,GACpE2f,MAAM1f,KAA+BA,EAA+B,GAExE8C,EAAW,2BACND,GADK,IAERpD,iBAAiB,2BACZoD,EAAQpD,kBADG,IAEdC,oBAAqByhB,EAAcd,QAErCzgB,iBAAiB,2BACZiD,EAAQjD,kBADG,IAEdI,6BAA8B0J,WAC5B1J,EAA6B2J,QAAQ,IAEvC5J,6BAA8B2J,WAC5B3J,EAA6B4J,QAAQ,SAiBxBoe,IAHjB,gCAOA,eAACzV,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,kBAAMuqB,KACf,kBAAgB,6BAChB,mBAAiB,mCACjBnV,WAAS,EACTrU,SAAS,KARX,UAUGijB,EAAc9W,SAAS1H,iBACiC,UAAzDwe,EAAc9W,SAAS1H,gBAAgBslB,cACrC,cAACzV,GAAA,EAAD,CAAa/U,MAAO,CAAE6mB,QAAS,GAA/B,SACE,cAAC5M,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAhC,SACE,eAACwqB,GAAA,EAAD,CACEriB,MAAOA,EACP8N,SA7BO,SAACK,EAAOmU,GAC3BL,EAASK,IA6BGtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPb,UASE,cAACC,GAAA,EAAD,aAAKxI,MAAM,UAAUjL,KAAM,cAAC0T,GAAA,EAAD,KAAkBnB,GAAU,KACvD,cAACkB,GAAA,EAAD,aACExI,MAAM,kBACNjL,KAAM,cAAC2T,GAAA,EAAD,KACFpB,GAAU,YAKpB,KACJ,cAAC5U,GAAA,EAAD,UACG0O,EAAc9W,SAAS1H,iBACiC,UAAzDwe,EAAc9W,SAAS1H,gBAAgBslB,cACrC,gCACE,cAAChB,GAAD,CAAUphB,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC,GAAD,MAEF,cAACilB,GAAD,CAAUphB,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACyiB,GAAD,CACEC,KAAK,UACL9U,MAAOuR,EAAc9W,SACrBsa,YAAaA,EACbC,SAAUA,EACVE,WAAW,SAKjB,cAAC,GAAD,MAGJ,eAAC3Q,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEvU,MAAM,UACNkV,KAAK,QACLT,UAAW,cAAC,KAAD,IACXD,QAAS,kBAAMwV,KAJjB,sBAQA,cAACzV,EAAA,EAAD,CACEW,KAAK,QACLV,QAAS,WAEPqV,EAAc,sBACdvX,IACAyX,KAEFtV,UAAWqV,EAAW,cAACnf,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,cAAC,KAAD,IACvElV,MAAM,UACNmV,QAAQ,YACRR,UAAWxP,EAAQpD,iBAAiBC,oBAXtC,+CC5LH,I,wBAAMgpB,GAAoB3sB,YAAH,u5BAuDjB4sB,GAAiB5sB,YAAH,qJAQd6sB,GAAoB7sB,YAAH,mvIAiNjB8sB,GAAsB9sB,YAAH,uLAQnB+sB,GAAoB/sB,YAAH,mIAQjBgtB,GAAuBhtB,YAAH,+lDAuEpBitB,GAAoBjtB,YAAH,iIAQjBktB,GAAwBltB,YAAH,uK,UC/WrBmtB,GAAsB3mB,0BAEtB4mB,GAAkB,SAAC,GAAkB,IAAhB1mB,EAAe,EAAfA,SACjC,EAA0CC,mBAAS,CAC5C0mB,eAAgB,GAChBC,qBAAsB,GACtB3iB,UAAW,CACPC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,MAZjB,mBAAQmiB,EAAR,KAAsBC,EAAtB,KAgBG,EAA8B7mB,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KACA,EAA4BhC,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA0CnF,oBAAS,GAAnD,mBAAQ8mB,EAAR,KAAsBC,EAAtB,KAEH,OACC,cAACP,GAAoBtjB,SAArB,CAA8BC,MACpB,CACIyjB,eACAC,kBACA9kB,SACAC,YACAvC,QACA0F,WACA2hB,eACAC,mBATd,SAYEhnB,KCpCSinB,GAAmB3tB,YAAH,8LAQhB4tB,GAAoB5tB,YAAH,mrBAwCjB6tB,GAAqB7tB,YAAH,2KAQlB8tB,GAA4B9tB,YAAH,s7BAiDzB+tB,GAAqB/tB,YAAH,sQAalBguB,GAAoBhuB,YAAH,uPAajBiuB,GAA4BjuB,YAAH,urDAoFzBkuB,GAAoBluB,YAAH,ghB,qGC/LxBI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCse,cAAe,CACXnd,QAAS,OACT,QAAS,CACLK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEV,SAAU,CACNL,MAAO,QAGfmhB,UAAW,CACPhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIC,SAASmsB,GAAT,GAA+D,IAAD,EAA1BC,EAA0B,EAA1BA,OAAQva,EAAkB,EAAlBA,MAAOP,EAAW,EAAXA,QAMxDC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAuBsF,YAAYyZ,IAA5BU,EAAP,oBACA,EAA4Bna,YAAY2Z,IAAjCS,EAAP,oBACQlZ,EAASqF,aAASxa,EAAkB,CACxC6V,UAAW,CACPtK,SAAS,GAAD,OAAK+H,EAAO/H,SAASoI,QAF7BwB,KAKJmZ,EAAkB,GAEhB3tB,EAAUR,KAChB,EAA0BuG,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAEA,EAAwBgG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8E4G,qBAAW+S,IAAjFI,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAAiBpnB,EAAvC,EAAuCA,MAAO0F,EAA9C,EAA8CA,SAAUpD,EAAxD,EAAwDA,OAAQC,EAAhE,EAAgEA,UAChE,EAA+CyR,qBAAW7T,IAAlDe,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,kBACzB,EAA8BZ,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAKMoiB,EAAgB5Q,uBAClB,WACI4P,EAAgB,CACZH,eAAgB,GAChBC,qBAAsB,GACtB3iB,UAAW,CACPC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,QAIlB,CAACoiB,IAECpM,EAAc,WAEhB,GADA5N,GAAQ,GACJK,EAAO,CACP,IAAIkC,EAAQ,GACZ,GAAIlC,EAAMyZ,qBAAsB,CAC5B,IAAQA,EAAsCzZ,EAAtCyZ,sBACRvX,EADA,aAA8ClC,EAA9C,KAEMyZ,qBAAuBA,EAAqB1Z,SAElDmC,EAAQlC,EAEZ2Z,EAAgBzX,KAGlB0Y,GAAe,WACjBjb,GAAQ,GACRgb,KAGElT,GAAgB,SAACjH,GACnBmZ,EAAgB,2BACTD,GADQ,kBAEVlZ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAI5ByR,GAAyB,SAAClH,GAC5BmZ,EAAgB,2BACTD,GADQ,IAEX5iB,UAAU,2BAAM4iB,EAAa5iB,WAApB,kBAAgC0J,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAIpE4kB,GAAQ,uCAAG,oCAAAngB,EAAA,kEAEJgf,EAAaF,eAFT,uBAGLvhB,GAAS,GAHJ,6BAMU,cAAXsiB,EANC,oBAOGrY,EAAQ,GAE8B,KAAtCwX,EAAaD,qBAThB,wBAU8CC,EAAnCD,qBAAyBvX,EAVpC,aAU8CwX,EAV9C,cAW0Bc,EAAa,CAChCvY,UAAW,CACPC,QACA0B,GAAIlE,EAAO/H,SAASoI,IACpBlI,QAAS6H,EAAO7H,QAAQkI,OAfnC,QAWG+a,EAXH,sCAmBG5Y,EAAQwX,EAnBX,UAoB0Bc,EAAa,CAChCvY,UAAW,CACPC,QACA0B,GAAIlE,EAAO/H,SAASoI,IACpBlI,QAAS6H,EAAO7H,QAAQkI,OAxBnC,QAoBG+a,EApBH,eA6BKtpB,EAAaspB,EAAevZ,KAAKwZ,aAAahb,IAChDN,IACA/L,EAAkB,2BACXD,GADU,IAEbjC,aACAC,QAASioB,EAAaF,kBAE1B/Z,KApCH,+BAuCsCia,EAA/BsB,YAA+BtB,EAAlB3Z,IAAQmC,EAvC5B,aAuCsCwX,EAvCtC,cAwCKe,EAAkB,CACpBxY,UAAW,CACPC,QACA0B,GAAI8V,EAAa3Z,OA3CxB,QA+CLjL,GAAWD,GACX/H,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD2K,GAAS,GACTM,GAAW,GACXqiB,KAnDK,0DAsDT9tB,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAvDF,0DAAH,qDA+Dd,OAJIgJ,IACAmZ,EAAkBnZ,EAAKmZ,iBAIvB,eAAC,WAAD,WACI,cAAC9tB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC9B,cAAXytB,EAAyB9a,EACtB,cAACyE,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAASiL,EAArC,SACI,cAAC,KAAD,MAGJ,cAAClL,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQV,QAASiL,EAAlE,2BAIA,cAACrJ,EAAA,EAAD,CAAY5B,QAASiL,EAArB,SACI,cAAC6J,GAAA,EAAD,MAGR,eAAC1U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASqtB,GAAcjY,WAAS,EAACrU,SAAS,KAA9D,UACI,cAAC+J,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACqK,GAAA,EAAD,CAAagB,GAAG,oBAAhB,8BACA,eAACqE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,UACI,sBAAKpB,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,eAACT,EAAA,EAAD,WAAY,sCAAZ,oBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,EACPmO,KAAK,iBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAOyjB,EAAaF,eAEpBzV,SAAU0D,QAGlB,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,mCACA,cAACwa,EAAA,EAAD,CAAa7F,WAAS,EAACK,KAAK,QAAQC,QAAQ,WAA5C,SACI,cAACwF,GAAA,EAAD,CACIwS,QAAQ,2BACRrX,GAAG,qBACHlD,KAAK,uBACLzK,MAAOyjB,EAAaD,qBAAuBC,EAAaD,qBAAuB,GAC/E1V,SAAU0D,GALd,mBAQQiT,SARR,aAQQ,EAAiBrgB,KAAI,SAAC6gB,EAAM9oB,GAAP,OACjB,cAACsW,GAAA,EAAD,CAAsBzS,MAAOilB,EAAKnb,IAAlC,SAAwCmb,EAAKrE,QAA9BzkB,aAMnC,eAACzE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAEK,UAAW,MAAOitB,WAAY,QAAnD,SAA8Dzb,EAAO/H,SAASyjB,wBAGtF,eAACztB,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACI,cAAChW,EAAA,EAAD,UACI,4CAEJ,cAAC6a,GAAA,EAAD,OAEJ,sBAAK3b,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,QACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUC,MAC9BgN,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUE,OAC9B+M,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUG,OAC9B8M,SAAU2D,WAItB,sBAAKxa,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLc,KAAK,SAELpD,KAAK,gBACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUI,cAC9B6M,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,UACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUK,QAC9B4M,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,YACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUM,UAC9B2M,SAAU2D,WAItB,sBAAKxa,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,YACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUO,UAC9B0M,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUQ,OAC9ByM,SAAU2D,QAGlB,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,OACLuC,QAAQ,WACRhN,MAAOyjB,EAAa5iB,UAAUS,KAC9BwM,SAAU2D,WAItB,cAAC/Z,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,WAAzC,SACI,cAACwJ,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQV,QAASuY,GAAlE,gC,sCC1WXQ,GAAclvB,YAAH,6VAmBXmvB,GAAkBnvB,YAAH,ybAwBfovB,GAAmBpvB,YAAH,8KAOhBqvB,GAAiBrvB,YAAH,6HCnCZ,SAASsvB,GAAT,GAA0C,IAAZhc,EAAW,EAAXA,QAC3C,EAA0B3M,mBAAS,IAAnC,mBAAOhF,EAAP,KAAc4tB,EAAd,KACA,EAA4B5oB,mBAAS,CAAE+jB,OAAQ,GAAII,IAAK,KAAxD,mBAAO0E,EAAP,KAAeC,EAAf,KACA,EAA0B9oB,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEM4N,EAAc,kBAAM5N,GAASrS,IAGnC,EAAqB+S,YAAYgb,IAA1BQ,EAAP,oBAUMC,EAAc,uCAAG,WAAOtb,GAAP,eAAA9F,EAAA,yDACrB8F,EAAE6D,iBACGsX,EAAO9E,QAAW8E,EAAO1E,IAFT,iEAMb8E,EAAUJ,EANG,SAObE,EAAW,CACf5Z,UAAW,CACTC,MAAO,CACL2U,OAAQkF,EAAQlF,OAChBI,IAAK8E,EAAQ9E,IACbpf,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAbb,OAiBnBN,IACAmc,EAAU,CAAE/E,OAAQ,GAAII,IAAK,KAC7BnqB,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDigB,IApBmB,kDAsBnBzgB,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAtBzC,0DAAH,sDA0BpB,OACE,eAAC,WAAD,WACE,cAACK,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,eAACwJ,EAAA,EAAD,CAAQvU,MAAM,UAAUwU,QAAS,kBAAMiL,KAAvC,UACE,cAAC/K,GAAA,EAAD,IADF,mBAKF,eAACE,GAAA,EAAD,CACEpV,KAAMA,EAEN0uB,OAAO,QACPC,sBAAoB,EACpB1uB,QAAS,SAAC6W,EAAO8X,GACA,kBAAXA,GACF3O,KAPN,UAWE,cAAC1K,GAAA,EAAD,UACE,eAAClV,EAAA,EAAD,WACE,cAACf,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAAC,KAAD,CACEgB,MAAOA,EACPquB,iBA1DiB,SAACruB,GAC5B4tB,EAAS5tB,GACT8tB,EAAU,2BACLD,GADI,IAEP1E,IAAKnpB,EAAMmpB,IAAImF,oBAwDT,eAACzuB,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,kCACE2tB,EAAO1E,IAKP,cAACtpB,EAAA,EAAD,CAAK0uB,QAASV,EAAO1E,IAAKvoB,OAAQ,GAAID,MAAO,MAJ7C,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASpK,MAAO,IAAnD,SACE,cAACT,EAAA,EAAD,CAAYF,MAAM,YAAlB,0BAMN,cAACH,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,sBACEL,GAAG,sBACH0Y,SAAU,SAAC9b,GAAD,OAAOsb,EAAetb,IAFlC,SAIE,cAACuC,EAAA,EAAD,CACEoN,MAAM,mBACNlN,QAAQ,WACRD,KAAK,QACL/M,MAAO0lB,EAAO9E,OACd9S,SAAU,SAACvD,GAAD,OACRob,EAAU,2BACLD,GADI,IAEP9E,OAAQrW,EAAEC,OAAOxK,MAAMmmB,kBAG3BzZ,WAAS,EACT4Z,SAAO,aAMjB,eAAChY,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,kBAAMiL,KACfvK,KAAK,QAJP,sBAQA,cAACX,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNgW,KAAK,SACL0Y,KAAK,sBACLxZ,KAAK,QACLT,UAAW,cAACiC,GAAA,EAAD,IANb,8BCjIH,IAAMiY,GAAetwB,YAAH,4IAQZuwB,GAAiBvwB,YAAH,+XAmBdwwB,GAAmBxwB,YAAH,8KAOhBywB,GAAiBzwB,YAAH,yKCpBZ,SAAS0wB,GAAT,GAGX,IAFFC,EAEC,EAFDA,wBACArd,EACC,EADDA,QAEA,EAA0B3M,mBAAS,IAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACA,EAAwBplB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACvChI,EAAoBwT,qBAAW7T,IAA/BK,gBAER,EAAqBsN,YAAYoc,IAA1BM,EAAP,oBAEMxP,EAAc,kBAAM5N,GAASrS,IAE7BwuB,EAAc,uCAAG,WAAOtb,GAAP,eAAA9F,EAAA,yDACrB8F,EAAE6D,iBACGpO,EAFgB,iEAMb+mB,EAAc/mB,EAND,SAOb8mB,EAAW,CACf9a,UAAW,CACTC,MAAO,CACL2R,MAAOmJ,EACPC,KAAMlqB,EAAgBslB,cACtBxgB,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAbb,OAiBnBN,IACAqd,EAAwB,CAACE,IACzB9E,EAAS,IACTprB,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDigB,IArBmB,kDAuBnBzgB,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAvBzC,0DAAH,sDA2BpB,OACE,eAAC,WAAD,WACE,cAACK,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,eAACwJ,EAAA,EAAD,CAAQvU,MAAM,UAAUwU,QAAS,kBAAMiL,KAAvC,UACE,cAAC/K,GAAA,EAAD,IADF,oBAIF,eAACE,GAAA,EAAD,CACEpV,KAAMA,EACN0uB,OAAO,QACPC,sBAAoB,EACpB1uB,QAAS,SAAC6W,EAAO8X,GACA,kBAAXA,GACF3O,KANN,UAUE,cAAC1K,GAAA,EAAD,UACE,eAAClV,EAAA,EAAD,WACE,cAACf,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACa,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXmL,GAAI,EAJN,SAME,sBACEL,GAAG,sBACH0Y,SAAU,SAAC9b,GAAD,OAAOsb,EAAetb,IAFlC,SAIE,cAACuC,EAAA,EAAD,CACEa,GAAG,6BACHuM,MACoC,SAAlCpd,EAAgBslB,cACZ,QACA,YAENpV,QAAQ,WACRD,KAAK,QACLuZ,SAAO,EACP5Z,WAAS,EACT1M,MAAOA,EACP8N,SAAU,SAACvD,GAAD,OAAO0X,EAAS1X,EAAEC,OAAOxK,MAAMmmB,2BAMnD,eAAC7X,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,kBAAMiL,KACfvK,KAAK,QAJP,sBAQA,cAACX,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNgW,KAAK,SACL0Y,KAAK,sBACLxZ,KAAK,QACLT,UAAW,cAACiC,GAAA,EAAD,IANb,8BCpGV,IAAMjY,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCmoB,eAAgB,CACfvL,OAAQ,4BACRzb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZpK,OAAQ,GACRD,MAAO,GACPR,OAAQ,EACRqb,aAAc,MACd4T,OAAQ,eAIJpR,GAAkB,WACvB,OAAOP,KAAKK,MAAM,KAAAL,KAAKM,SAA+C,MAAc7R,YAGtE,SAASmjB,GAAT,GAAsE,IAA7CC,EAA4C,EAA5CA,yBAA0B3d,EAAkB,EAAlBA,QAASO,EAAS,EAATA,MAC1E,EAKIuG,qBAAW7T,IAJde,EADD,EACCA,gBACAC,EAFD,EAECA,kBACAqB,EAHD,EAGCA,eACAhC,EAJD,EAICA,gBAEOsqB,EAAyCD,EAAzCC,UAAWtB,EAA8BqB,EAA9BrB,QAASuB,EAAqBF,EAArBE,OAAQC,EAAaH,EAAbG,SACpC,EAA0DzqB,mBAAS,IAAnE,mBAAQ0qB,EAAR,KAA8BV,EAA9B,KACA,EAA0DhqB,mBAAS,IAAnE,mBAAQ2qB,EAAR,KAA8BC,EAA9B,KACMC,EAA4C,SAAlC5qB,EAAgBslB,cAAhB,aAAgDiF,GAAhD,aAAgEC,GAChF,EAAkCzqB,mBAAS,IAA3C,mBAAQkiB,EAAR,KAAkBD,EAAlB,KAEM6I,EAA6B7T,uBAClC,WACC,IAAI8T,EAAS,GACTF,EAAU,GACW,aAAQ5oB,GAEb+oB,SAAQ,SAAC/Q,GACxBA,EAAQjf,MAAMiS,KAAK8d,EAAO5Q,KAAKF,EAAQjf,OACvCif,EAAQ6G,OAAO7T,KAAK4d,EAAQ1Q,KAAKF,EAAQ6G,WAG9C,IAAImK,EAAY,GACZC,EAAa,GACXC,EAAqBJ,EAAO/f,QAAO,SAAChQ,GACzC,IAAIowB,GAAcH,EAAUjwB,EAAMiS,KAElC,OADAge,EAAUjwB,EAAMiS,MAAO,EAChBme,KAEFC,EAAqBR,EAAQ7f,QAAO,SAAC8V,GAC1C,IAAIwK,GAAeJ,EAAWpK,EAAO7T,KAErC,OADAie,EAAWpK,EAAO7T,MAAO,EAClBqe,KAGRV,EAAwB,aAAKO,IAC7BnB,EAAwB,aAAKqB,MAE9B,CAAEppB,IAkBH,OAPA8R,qBACC,WACC+W,MAED,CAAEA,IAIF,8BACC,eAAC1V,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACC,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,cAACwM,GAAD,CAAqB7U,MAAOA,EAAO+U,YAAaA,EAAaC,SAAUA,MAExE,eAAC9M,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACGrI,EAAMqe,oBAiDJ,KAhDH,eAAC,WAAD,WACC,eAAC1wB,EAAA,EAAD,CAAKc,MAAM,OAAOqU,GAAI,EAAtB,UACC,cAAC9U,EAAA,EAAD,sBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,eAAC4a,EAAA,EAAD,CACC/F,SAAoC,IAA1B1N,EAAesG,OACzB4H,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLnO,MAAOwC,EAAesG,OAAS,IAAM5H,EAAgBhC,QANtD,UAQC,eAACgX,GAAA,EAAD,CACC/H,KAAK,UACLzK,MAAOxC,EAAgBhC,QACvBsS,SAtCe,SAACK,EAAOgH,GAAW,IAAD,EAC1C1X,EAAkB,2BACdD,GADa,uBAEf2Q,EAAM3D,OAAOC,KAAO0D,EAAM3D,OAAOxK,OAFlB,cAGfmV,EAAM7F,MAAM7E,KAAO0K,EAAM7F,MAAM3B,IAHhB,MAkCT,UAKC,cAAC8E,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACC,kDAEAonB,EACAA,EAAUhjB,KAAI,SAACsO,GACd,OACC,cAACD,GAAA,EAAD,CACChI,KAAK,aAELzK,MAAO0S,EAAI6Q,eACX5V,GAAI+E,EAAI5I,IAJT,SAME4I,EAAI6Q,gBAJA7Q,EAAI5I,QASZ,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,QAGjBlB,EAAesG,OAAS,IAAM5H,EAAgBhC,QAC9C,cAAC6sB,GAAA,EAAD,kCACG,QAEL,cAAC,GAAD,UACC,cAAChE,GAAD,CAA0BC,OAAO,YAAY9a,QAASA,YAIzD,cAACoJ,GAAA,EAAD,OAGF,eAAClb,EAAA,EAAD,CACCc,MAAM,OACNwV,GAAI,EACJpW,MACCmnB,EAAS3Z,OAAS,EACjB,CACCkjB,cAAe,OACfC,QAAS,IAEP,KATN,UAYC,cAACxwB,EAAA,EAAD,UAA+C,SAAlC+E,EAAgBslB,cAA2B,QAAU,cAClE,cAACwE,GAAD,CAAqBC,wBAAyBA,EAAyBrd,QAASA,IAChF,cAACyI,GAAA,EAAD,CAAMC,WAAS,EAAf,SACEwV,EAAQtjB,KAAI,SAACwZ,EAAOzhB,GAAR,OACZ,cAAC,GAAD,CAECyhB,MAAOA,EACP4J,qBAAsBA,EACtBD,qBAAsBA,EACtBV,wBAAyBA,EACzB9c,MAAOA,GALF5N,WAUT,cAACyW,GAAA,EAAD,IACA,eAAClb,EAAA,EAAD,CACCc,MAAM,OACNuV,GAAI,EACJnW,MACCmnB,EAAS3Z,OAAS,EACjB,CACCkjB,cAAe,OACfC,QAAS,IAEP,KATN,UAYC,cAACxwB,EAAA,EAAD,oBACA,cAACytB,GAAD,CAAoBhc,QAASA,IAC7B,cAACyI,GAAA,EAAD,CAAMC,WAAS,EAAf,SACE4T,EAAQ1hB,KAAI,SAACvM,EAAOsE,GAAR,OACZ,cAAC,GAAD,CAECtE,MAAOA,EACP2vB,qBAAsBA,EACtBC,wBAAyBA,EACzBF,qBAAsBA,EACtBxd,MAAOA,GALF5N,mBAgBd,IAAMqsB,GAAe,SAAC,GAMf,IALN5K,EAKK,EALLA,MACA4J,EAIK,EAJLA,qBACAD,EAGK,EAHLA,qBACAV,EAEK,EAFLA,wBACA9c,EACK,EADLA,MAEMjT,EAAUR,KACVE,EAAQiyB,eACd,EAAyEnY,qBAAW7T,IAA5EsC,EAAR,EAAQA,kBAAmBD,EAA3B,EAA2BA,eAAgBhC,EAA3C,EAA2CA,gBAAiBM,EAA5D,EAA4DA,SAC5D,EAAkCP,oBAAS,GAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KAEMC,EAAqB7U,uBAC1B,WACCyT,EAAqBM,SAAQ,SAACnV,GACzBA,EAAI5I,MAAQ8T,EAAM9T,KAAK4e,GAAY,QAGzC,CAAE9K,EAAM9T,IAAKyd,IAGd3W,qBACC,WACC,GAAI7G,EAAMqe,oBACT,OAAOO,MAGT,CAAEA,IA2HH,OACC,cAAC1W,GAAA,EAAD,CAAME,MAAI,EAAV,SACC,qBACClb,UAAWH,EAAQ6nB,eACnBtS,QAAS,kBA5HY,SAACrM,GACxB,IAAM4oB,EAA0B,aAAQrB,GAEnCnH,EAIJwI,EAA2Bf,SAAQ,SAACnV,EAAKvW,GACpCuW,EAAI5I,MAAQ8T,EAAM9T,MACrB8e,EAA2BrR,OAAOpb,EAAO,GACzCusB,EAAY1oB,QANd4oB,EAA2B5R,KAAK4G,GAChC8K,EAAY1oB,IAUb,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAQhqB,GAEnC,GAAK0oB,EAAqBpiB,QAAW0jB,EAAsB1jB,QAepD,IAAKoiB,EAAqBpiB,QAAU0jB,EAAsB1jB,OAAS,EAEzE,IAF6E,IAAD,WAEnED,GACR,IAAM4jB,EAAkBH,EAA2BzjB,GAC7CiG,EAAS0d,EAAsBjhB,QAAO,SAAC6K,GAAD,OAASA,EAAIiL,OAAO7T,MAAQif,EAAgBjf,OACpFsB,EAAOhG,OACVyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,KAdDpb,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QAkBH,GAAIqiB,EAAqBpiB,OAAS,GAA2C,IAAtCwjB,EAA2BxjB,QAAgBpF,EAExF,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IACjD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIJ,EAA2BxjB,OAAQ4jB,IACtDH,EAAkB7R,KAAK,CACtBgJ,WAAY8I,EAAsB3jB,GAAG6a,WACrC3lB,cAAeyuB,EAAsB3jB,GAAG9K,cACxComB,iBAAkBqI,EAAsB3jB,GAAGsb,iBAC3C9C,OAAQiL,EAA2BI,GACnCnxB,MAAOixB,EAAsB3jB,GAAGtN,MAChCyC,OAAQwuB,EAAsB3jB,GAAG7K,OACjCL,SAAU6uB,EAAsB3jB,GAAGlL,SACnCsmB,OAAO,SAIJ,GAAIiH,EAAqBpiB,OAAS,GAAKwjB,EAA2BxjB,OAAS,EAEjF,IAFqF,IAAD,WAE3ED,GAER,IADA,IAAM4jB,EAAkBH,EAA2BzjB,GAHgC,WAI1E6jB,GACR,IAAMC,EAAiBzB,EAAqBwB,GACtCE,EAAyBJ,EAAsBjhB,QACpD,SAACshB,GAAD,OACCA,EAAqBxL,OAAO7T,MAAQif,EAAgBjf,KACpDmf,EAAenf,MAAQqf,EAAqBtxB,MAAMiS,OAE/Cof,EAAuB9jB,OAY3ByjB,EAAkB7R,KAAKkS,EAAuB,IAX9CL,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,KAhBDyI,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAAM,EAA9CA,IAFD7jB,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QAyBH,GAAIqiB,EAAqBpiB,OAAS,IAAMwjB,EAA2BxjB,QAEvC0jB,EAAsBjhB,QAAO,SAACrD,GAAD,OAAcA,EAASmZ,OAAO7T,OAC/D1E,OAC7B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACtD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CACtBgJ,WAAYqJ,EAA4BrJ,WACxC3lB,cAAegvB,EAA4BhvB,cAC3ComB,iBAAkB4I,EAA4B5I,iBAC9C9C,OAAQ,GACR9lB,MAAOwxB,EAA4BxxB,MACnCyC,OAAQ+uB,EAA4B/uB,OACpCL,SAAUovB,EAA4BpvB,SACtCsmB,OAAO,UA1FV,IAAK,IAAIpb,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAK,CAC3D,IAAM4jB,EAAkBH,EAA2BzjB,GACnD0jB,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,IAsFVsG,EAAwB,aAAK+B,IAC7B7pB,EAAkB8pB,GAODS,EAAiBlJ,IAChCxoB,MACCwoB,EACC,CACCje,gBAAiB3L,EAAM2nB,QAAQC,QAAQC,MAErC,KARN,SAWC,cAACtmB,EAAA,EAAD,CACCiV,QAAQ,SACRpV,MAAO,CACNC,MAAOrB,EAAM2nB,QAAQoL,gBAAgBnJ,EAAW5pB,EAAM2nB,QAAQC,QAAQC,KAAO,WAC7Evb,SAAU,IAJZ,SAOE8a,EAAMA,aAON4L,GAAU,SAAC,GAA2F,IAAzF3xB,EAAwF,EAAxFA,MAAO2vB,EAAiF,EAAjFA,qBAAsBC,EAA2D,EAA3DA,wBAAyBF,EAAkC,EAAlCA,qBAAsBxd,EAAY,EAAZA,MACxFjT,EAAUR,KACVE,EAAQiyB,eACd,EAAyEnY,qBAAW7T,IAA5EqC,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,kBAAmBjC,EAA3C,EAA2CA,gBAAiBM,EAA5D,EAA4DA,SAE5D,EAAkCP,oBAAS,GAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KAEMe,EAAqB3V,uBAC1B,WACC0T,EAAqBK,SAAQ,SAACnV,GACzBA,EAAI5I,MAAQjS,EAAMiS,KAAK4e,GAAY,QAGzC,CAAE7wB,EAAMiS,IAAK0d,IAGd5W,qBACC,WACC,GAAI7G,EAAMqe,oBACT,OAAOqB,MAGT,CAAEA,IAwHH,OACC,cAACxX,GAAA,EAAD,CAAME,MAAI,EAAV,SACC,cAACwO,GAAA,EAAD,CAAS7R,MAAOjX,EAAM+oB,OAAQC,UAAU,MAAMC,OAAK,EAAClP,oBAAqBmP,KAAzE,SACC,qBACC9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACNuK,gBAAiBtK,EAAMmpB,IACvBnpB,MAAOrB,EAAM2nB,QAAQoL,gBAAgB1xB,EAAMmpB,MAE5C3U,QAAS,kBA9HU,SAACrM,GAClBogB,EAIJoH,EAAqBK,SAAQ,SAACnV,EAAKvW,GAC9BuW,EAAI5I,MAAQjS,EAAMiS,MACrB0d,EAAqBjQ,OAAOpb,EAAO,GACnCusB,EAAY1oB,QANdwnB,EAAqBxQ,KAAKnf,GAC1B6wB,EAAY1oB,IASb,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAQhqB,GAEnC,GAAKyoB,EAAqBniB,QAAW0jB,EAAsB1jB,QAepD,IAAKmiB,EAAqBniB,QAAU0jB,EAAsB1jB,OAAS,EAEzE,IAF6E,IAAD,WAEnED,GACR,IAAM8jB,EAAiBzB,EAAqBriB,GACtCiG,EAAS0d,EAAsBjhB,QAAO,SAAC6K,GAAD,OAASA,EAAI7a,MAAMiS,MAAQmf,EAAenf,OAClFsB,EAAOhG,OACVyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,KAdDpb,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QAkBH,GAAIoiB,EAAqBniB,OAAS,GAAqC,IAAhCoiB,EAAqBpiB,QAAgBpF,EAElF,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IACjD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAChDH,EAAkB7R,KAAK,CACtBgJ,WAAY8I,EAAsB3jB,GAAG6a,WACrC3lB,cAAeyuB,EAAsB3jB,GAAG9K,cACxComB,iBAAkBqI,EAAsB3jB,GAAGsb,iBAC3C9C,OAAQmL,EAAsB3jB,GAAGwY,OACjC9lB,MAAO2vB,EAAqBwB,GAC5B1uB,OAAQwuB,EAAsB3jB,GAAG7K,OACjCL,SAAU6uB,EAAsB3jB,GAAGlL,SACnCsmB,OAAO,SAIJ,GAAIgH,EAAqBniB,OAAS,GAAKoiB,EAAqBpiB,OAAS,EAE3E,IAF+E,IAAD,WAErED,GAER,IADA,IAAM8jB,EAAiBzB,EAAqBriB,GAHiC,WAIpE6jB,GACR,IAAMD,EAAkBxB,EAAqByB,GACvCE,EAAyBJ,EAAsBjhB,QACpD,SAACshB,GAAD,OACCA,EAAqBxL,OAAO7T,MAAQif,EAAgBjf,KACpDmf,EAAenf,MAAQqf,EAAqBtxB,MAAMiS,OAE/Cof,EAAuB9jB,OAY3ByjB,EAAkB7R,KAAKkS,EAAuB,IAX9CL,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,KAhBDyI,EAAI,EAAGA,EAAIzB,EAAqBniB,OAAQ4jB,IAAM,EAA9CA,IAFD7jB,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QAyBH,GAAIoiB,EAAqBniB,OAAS,IAAMoiB,EAAqBpiB,QAEjC0jB,EAAsBjhB,QAAO,SAACrD,GAAD,OAAcA,EAAS3M,MAAMiS,OAC9D1E,OAC7B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACtD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CACtBgJ,WAAYqJ,EAA4BrJ,WACxC3lB,cAAegvB,EAA4BhvB,cAC3ComB,iBAAkB4I,EAA4B5I,iBAC9C9C,OAAQ0L,EAA4B1L,OACpC9lB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ+uB,EAA4B/uB,OACpCL,SAAUovB,EAA4BpvB,SACtCsmB,OAAO,UA1FV,IAAK,IAAIpb,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAK,CACrD,IAAM8jB,EAAiBzB,EAAqBriB,GAC5C0jB,EAAkB7R,KAAK,CACtBgJ,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,IAsFVkH,EAAwB,aAAKD,IAC7BzoB,EAAkB8pB,GAYAa,EAAgBtJ,IANhC,SAQEA,EAAW,cAAC7R,GAAA,EAAD,IAAW,YC7gBtBa,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASmS,GAAT,GAAwD,IAA7BkI,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,cACpD,EAAwB/sB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4DwL,qBAAWgK,IAA/DgB,EAAR,EAAQA,cAAegB,EAAvB,EAAuBA,YAAagB,EAApC,EAAoCA,oBAGpC,EAA0C3M,aAASkS,GAAmB,CACpE7W,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAD9DzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAY9B,GARAoH,qBAAU,WAEN0M,IADCjb,KAKF,CAACA,IAEAA,EACF,OACE,cAAC+J,EAAA,EAAD,CACEvU,MAAM,UACNkV,KAAK,SACLP,UAAU,EACVF,UAAW,cAAC9J,EAAA,EAAD,CAAkBuK,KAAM,GAAIlV,MAAM,YAJ/C,qBAUJ,GAAIyE,EAAO,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAEpC,IAAQ6qB,EAA6B7b,EAA7B6b,yBAEFvF,EAAe,WACnBlY,GAASrS,GACTuyB,GAAc,IAGhB,OACE,eAAC,WAAD,WACE,cAACjJ,GAAA,EAAD,CAAS7R,MAAM,+BAA+B+a,sBAAsB,EAAMxyB,KAAMsyB,EAAY9I,UAAU,MAAtG,SACE,cAACzU,EAAA,EAAD,CACEvU,MAAO8xB,EAAa,YAAa,UACjC3c,QAAQ,WACRD,KAAK,SACLV,QAAS,kBAAMuV,KACftV,UAAW,cAACsW,GAAA,EAAD,IACXpW,UAAW8O,EAAc9W,SAAS1H,gBANpC,uBAWF,eAAC2P,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAASsqB,EACT,kBAAgB,sBAChB,mBAAiB,kCACjBlV,WAAS,EACTrU,SAAS,KARX,UAUE,cAACuU,GAAA,EAAD,UACE,cAAC,GAAD,CACE7C,MAAOuR,EAAc9W,SACrB2iB,yBAA0BA,EAC1B3d,QAASA,EACTqV,KAAK,SACLrjB,QAAS8gB,EAAY9gB,QACrBwjB,cAAc,MAGlB,cAAC1Q,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CACEW,KAAK,QACLV,QAAS,kBAAMuV,KACftV,UAAW,cAACiC,GAAA,EAAD,IACX1W,MAAM,UACNmV,QAAQ,YALV,6B,qFCxFN8c,GACO,mCADPA,GAEK,mCAGTC,KAAEC,UAAU,CACRC,WAAY,SAAUC,GAClBA,EAAIC,iBAAkB,EACtBD,EAAIE,iBAAiB,gBAAiB,SAAWN,OAsOzCO,I,SAAAA,GAlOhB,WAEI,IAAIC,EAAW,CACXC,IAAKT,IAGT,SAASU,EAASC,EAAM9c,EAAI+c,GACxB,OAAOC,KAAOC,IAAIN,EAASC,IAAME,EAAO,IAAM9c,OAAImD,EAAW4Z,EAAU,QAG3E,SAASG,EAAKJ,EAAMC,GAChB,OAAOC,KAAOC,IAAIN,EAASC,IAAME,OAAM3Z,EAAW4Z,EAAU,QAgBhE,SAASI,EAAiBL,EAAMnf,EAAMof,EAAUK,GAC5ChB,KAAEiB,KAAK,CACHT,IAAKD,EAASC,IAAME,EACpB5c,KAAM,OACNod,SAAU,OACV3f,KAAM3G,KAAKuM,UAAU5F,GACrB4f,YAAa,mBACbC,QAAST,EACTpuB,MAAOyuB,IAIf,SAASK,EAAgBX,EAAMnf,EAAMof,EAAUK,GAC3ChB,KAAEiB,KAAK,CACHT,IAAKD,EAASC,IAAME,EACpB5c,KAAM,MACNvC,KAAM3G,KAAKuM,UAAU5F,GACrB4f,YAAa,mBACbC,QAAST,EACTpuB,MAAOyuB,IAIf,SAASM,EAAoBZ,EAAMa,EAAOZ,EAAUK,GAChDhB,KAAEiB,KAAK,CACHT,IAAKD,EAASC,IAAME,EAAO,IAAMa,EACjCzd,KAAM,SACN0d,OAAO,EACPJ,QAAST,EACTpuB,MAAOyuB,IAIf,IAAIS,EAAkB,CAClBC,QAAS,CACLC,IAAK,SAAU/d,EAAI+c,GACf,OAAOF,EAAS,SAAU7c,EAAI+c,IAElCiB,KAAM,SAAUjB,GACZ,OAAOG,EAAK,SAAUH,IAE1BkB,OAAQ,SAAUtgB,EAAMof,EAAUK,GAC9BD,EAAiB,SAAUxf,EAAMof,EAAUK,IAE/Cc,OAAQ,SAAUle,EAAI+c,EAAUK,GAC5BM,EAAoB,UAAW1d,EAAI+c,EAAUK,IAEjDe,OAAQ,SAAUne,EAAIrC,EAAMof,EAAUK,GAClCK,EAAgB,UAAYzd,EAAIrC,EAAMof,EAAUK,KAGxDgB,SAAU,CACNL,IAAK,SAAU/d,EAAI+c,GACf,OAAOF,EAAS,UAAW7c,EAAI+c,IAEnCiB,KAAM,SAAUjB,GACZ,OAAOG,EAAK,UAAWH,IAE3BkB,OAAQ,SAAUtgB,EAAMof,EAAUK,GAC9BD,EAAiB,UAAWxf,EAAMof,EAAUK,IAEhDc,OAAQ,SAAUle,EAAI+c,EAAUK,GAC5BM,EAAoB,WAAY1d,EAAI+c,EAAUK,IAElDe,OAAQ,SAAUne,EAAIrC,EAAMof,EAAUK,GAClCK,EAAgB,WAAazd,EAAIrC,EAAMof,EAAUK,KAGzDiB,aAAc,CACVN,IAAK,SAAU/d,EAAI+c,GACf,OAAOF,EAAS,eAAgB7c,EAAI+c,IAExCiB,KAAM,SAAUjB,GACZ,OAAOG,EAAK,eAAgBH,IAEhCkB,OAAQ,SAAUtgB,EAAMof,EAAUK,GAC9BD,EAAiB,eAAgBxf,EAAMof,EAAUK,IAErDc,OAAQ,SAAUle,EAAI+c,EAAUK,GAC5BM,EAAoB,eAAgB1d,EAAI+c,EAAUK,IAEtDe,OAAQ,SAAUne,EAAIrC,EAAMof,EAAUK,GAClCK,EAAgB,gBAAkBzd,EAAIrC,EAAMof,EAAUK,KAG9DkB,OAAQ,CACJN,KAAM,SAAUhe,EAAI+c,GAChB,OAAOF,EAAS,QAAS7c,EAAI+c,IAEjCkB,OAAQ,SAAUM,EAAU5gB,EAAMof,EAAUK,GACxCD,EAAiB,SAAWoB,EAAU5gB,EAAMof,EAAUK,IAE1Dc,OAAQ,SAAUK,EAAUzhB,EAAMigB,EAAUK,GACxCM,EAAoB,SAAWa,EAAUzhB,EAAMigB,EAAUK,IAE7De,OAAQ,SAAUI,EAAUzhB,EAAMa,EAAMof,EAAUK,GAC9CK,EAAgB,SAAWc,EAAW,IAAMzhB,EAAMa,EAAMof,EAAUK,KAG1EoB,KAAM,CACFT,IAAK,SAAU/d,EAAI+c,GACf,OAAOF,EAAS,OAAQ7c,EAAI+c,IAEhCiB,KAAM,SAAUL,EAAOZ,GACnB,OArHZ,SAAuBD,EAAMa,EAAOZ,GAChC,OAAOC,KAAOC,IAAIN,EAASC,IAAME,EAAOa,OAAOxa,EAAW4Z,EAAU,QAoHrD0B,CAAc,OAAQd,EAAOZ,IAExCkB,OAAQ,SAAUtgB,EAAMof,EAAUK,GAC9BD,EAAiB,UAAWxf,EAAMof,EAAUK,IAEhDsB,KAAM,SAAUf,EAAOZ,IAtH/B,SAA2BD,EAAMa,EAAOZ,GACpCX,KAAEiB,KAAK,CACHT,IAAKD,EAASC,IAAME,EAAOa,EAC3Bzd,KAAM,OACN0d,OAAO,EACPJ,QAAST,IAkHL4B,CAAkB,OAAQhB,EAAOZ,IAErC6B,OAAQ,SAAUC,EAAQ9B,EAAUK,GAChCM,EAAoB,OAAQmB,EAAQ9B,EAAUK,IAElD0B,SAAU,SAAU5Q,EAAQhO,EAAMF,EAAI+c,GAClCF,EAAS,QAAU3O,EAAS,IAAMhO,EAAMF,EAAI+c,IAEhDgC,MAAO,SAAU7Q,EAAQhO,EAAMF,EAAI+c,GAC/BF,EAAS,SAAW3O,EAAS,IAAMhO,EAAMF,EAAI+c,KAGrDiC,UAAW,CACPjB,IAAK,SAAUhB,GACX,OAAOG,EAAK,YAAaH,IAE7BoB,OAAQ,SAAUxgB,EAAMof,EAAUK,GAC9BK,EAAgB,YAAa9f,EAAMof,EAAUK,IAEjD6B,UAAW,SAAUthB,EAAMof,EAAUK,GACjCK,EAAgB,sBAAuB9f,EAAMof,EAAUK,IAE3D8B,YAAa,SAAUvhB,EAAMof,EAAUK,GACnCK,EAAgB,uBAAwB9f,EAAMof,EAAUK,KAGhE+B,SAAU,CACNC,OAAQ,SAAUC,EAAStC,GACvB,OAAOG,EAAK,sCAAwCmC,EAAStC,IAEjEuC,eAAgB,SAAUC,EAAOxC,GAC7B,OAAOG,EAAK,oCAAsCqC,EAAOxC,IAE7DyC,WAAY,SAAUD,EAAOxC,GACzB,OAAOG,EAAK,gCAAkCqC,EAAOxC,IAEzD0C,cAAe,SAAUC,EAAY3C,GACjC,OAAOG,EAAK,oCAAsCwC,EAAY3C,IAElE4C,mBAAoB,SAAUC,EAAS7C,GACnC,OAAOG,EAAK,uCAAyC0C,EAAS7C,IAElE8C,YAAa,SAAUD,EAAS7C,GAC5B,OAAOG,EAAK,gCAAkC0C,EAAS7C,IAE3D+C,MAAO,SAAU/C,GACb,OAAOG,EAAK,iBAAkBH,IAElCgD,WAAY,SAAUhD,GAClB,OAAOG,EAAK,sBAAuBH,IAEvCiD,UAAW,SAAUjD,GACjB,OAAOG,EAAK,qBAAsBH,IAEtCkD,aAAc,SAAUlD,GACpB,OAAOG,EAAK,wBAAyBH,IAEzCmD,eAAgB,SAAUnD,GACtB,OAAOG,EAAK,0BAA2BH,IAE3CoD,aAAc,SAAUpD,GACpB,OAAOG,EAAK,wBAAyBH,IAEzCqD,eAAgB,SAAUrD,GACtB,OAAOG,EAAK,0BAA2BH,IAE3CsD,UAAW,SAAUtD,GACjB,OAAOG,EAAK,qBAAsBH,IAEtCuD,cAAe,SAAUvD,GACrB,OAAOG,EAAK,yBAA0BH,IAE1CwD,SAAU,SAAUX,EAAS7C,GACzB,OAAOG,EAAK,6BAA+B0C,EAAS7C,KAKhEc,SAA2B,WACvB,MAAO,SAAW1B,IAGtB0B,WAA6B,WACzB,OAAOlB,EAASC,MAGpB,OAAOiB,EAGKnB,GC/OH8D,GAAwBj4B,YAAH,0KA0BrBk4B,IAlB2Bl4B,YAAH,oVAkBGA,YAAH,gJCI/BkZ,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJtlB,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,WAI/B,SAASuQ,GAAT,GAAsD,IAArBC,EAAoB,EAApBA,QAAS/kB,EAAW,EAAXA,QACjD1S,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwB5F,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA+C4G,qBAAW7T,IAAlDK,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,kBACzB,EAAgCF,mBAAS,IAAzC,mBAAO2xB,EAAP,KAAiBC,EAAjB,KACA,EAAkC5xB,mBAAS,IAA3C,mBAAOmI,EAAP,KAAkB0pB,EAAlB,KACA,EAA8B7xB,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAAuCzF,oBAAS,GAAhD,mBAAO8xB,EAAP,KAAqBC,EAArB,KACA,EAA2C/xB,oBAAS,GAApD,mBAAOgyB,EAAP,KAAuBC,EAAvB,KACA,EAA0CjyB,mBAAS,IAAnD,mBAAOkyB,EAAP,KAAsBC,EAAtB,KACA,EAA0BnyB,mBAAS,IAAnC,mBAAOP,GAAP,KAAc0F,GAAd,KACA,GAA0BnF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,qBAAOT,GAAP,MAAcC,GAAd,MAEA,GAA8BuT,YAAY+jB,IAAnCc,GAAP,qBACA,GAAiC7kB,YAAYgkB,IAAtCc,GAAP,qBAKMC,GAAmB,WACvBH,EAAiB,IACjBN,EAAa,IACbD,EAAY,IALY/kB,GAAQ,IAS5B0lB,GAAQ,uCAAG,kCAAA3qB,EAAA,6DACP5L,EAAgBk2B,EAAhBl2B,KAAMC,EAAUi2B,EAAVj2B,MACdiE,EAAkB,2BACbD,GADY,IAEflE,mBAAoB,CAClBC,OACAC,YANW,SAWb81B,GAAe,GAXF,SAYQK,GAAoB,CACvCjjB,UAAW,CACTC,MAAO,CACLpT,OACAC,QACA8I,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAlBnB,QAYPsB,EAZO,UAwBH5T,EAAY4T,EAAOE,KAAK2jB,oBAAxBz3B,QACRX,GAAS,CACPW,QAASA,EACTD,OAAQ,UACRF,MAAM,IAERu3B,GAAe,GACfplB,IACA2lB,MAhCW,kDAmCbP,GAAe,GACf/3B,GAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAvCK,0DAAH,qDA4CRg4B,GAAgB,uCAAG,WAAO/jB,GAAP,iBAAA7G,EAAA,sEAErBqqB,GAAiB,GAFI,SAGAI,GAAuB,CAC1CljB,UAAW,CACT2B,GAAIrC,EAAKxB,OALQ,QAGfsB,EAHe,UAUX5T,EAAY4T,EAAOE,KAAK4jB,uBAAxB13B,QACRX,GAAS,CACPW,QAASA,EACTD,OAAQ,UACRF,MAAM,IAER0F,EAAkB,2BACbD,GADY,IAEflE,mBAAoB,CAClBC,KAAM,GACNC,MAAO,OAGXg2B,GAAiB,GACjBtlB,KAxBmB,gDA2BrBslB,GAAiB,GACjBj4B,GAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IA/Ba,yDAAH,sDAoChBi4B,GAAe,WACnBH,MAuBII,GAAc,uCAAG,WAAOhlB,GAAP,SAAA9F,EAAA,yDACrB8F,EAAE6D,iBACGogB,EAFgB,uBAGnBE,EAAa,IAHM,iCAMrBpsB,GAAW,GANU,kBAQbktB,GAAU1C,SAASQ,mBACvBkB,GACA,SAAUpjB,GACRsjB,EAAatjB,GACb9I,GAAW,MAEb,SAAUhG,GACJA,GAASA,EAAMmzB,cACjBztB,GAAS1F,EAAMmzB,cAEjBntB,GAAW,MAlBI,yDAsBf,MAAS,KAAMmtB,cACjBztB,GAAS,KAAMytB,aAAaC,SAE9BptB,GAAW,GAzBQ,0DAAH,sDA6BpB,OACE,gCACE,cAAC3L,EAAD,CAAkBC,MAAOA,GAAOC,SAAUA,KAC1C,cAACkB,EAAA,EAAD,oCACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAACg4B,GAAA,EAAD,CACEhiB,GAAG,yBACHZ,KAAK,QACL6iB,QAASrB,EACT/hB,SAAUqiB,EACVgB,eAAgB,SAACC,GAAD,OACdA,EAAOj3B,KAAP,UAAiBi3B,EAAOh3B,MAAxB,cAAmCg3B,EAAOj3B,MAAS,IAErD6T,WAAS,EACTqjB,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BACM0f,GADN,IAEExf,QAAQ,WACRC,WAAU,2BACLuf,EAAOvf,YADF,IAERC,aACE,eAAC,WAAD,WACG2hB,EAAiB,cAACrsB,EAAA,EAAD,CAAkBuK,KAAM,KAAS,KAClDyf,EAAOvf,WAAWC,sBAM7B8iB,aAAc,SAACF,GAAD,OACZ,eAAC,WAAD,qBACMA,EAAOh3B,MADb,cACwBg3B,EAAOj3B,MAC7B,qBAAKjB,MAAO,CAAEq4B,SAAU,KACxB,cAAChiB,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAAS,kBAAMgjB,GAAiBS,IAAzD,SACE,cAAC,KAAD,UAINhiB,SAAU,SAACoiB,EAAG5kB,GAAJ,OAvFI,SAACA,GACrB,IAAKA,EAQH,OAPAvO,EAAkB,2BACbD,GADY,IAEflE,mBAAoB,CAClBC,KAAM,GACNC,MAAO,OAGJ,KAETiE,EAAkB,2BACbD,GADY,IAEflE,mBAAoB,CAClBC,KAAMyS,EAAKzS,KACXC,MAAOwS,EAAKxS,UAwEa0Y,CAAclG,IACrC6kB,kBAAmB,SAACL,EAAQ9vB,GAAT,OACjB8vB,EAAOh3B,QAAUkH,EAAMlH,OAEzBkH,MAAOlD,EAAgBlE,qBAEzB,cAACwT,EAAA,EAAD,CAAQvU,MAAM,UAAUwU,QA3LN,kBAAM3C,GAAQ,IA2LhC,SACE,cAAC0mB,GAAA,EAAD,SAGJ,eAAC3jB,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAASg4B,GACT,kBAAgB,8BAChB5iB,WAAS,EACTrU,SAAS,KAPX,UASE,cAACsU,GAAA,EAAD,CAAagB,GAAG,8BAAhB,SACG,0CAEH,eAACf,GAAA,EAAD,CAAehV,MAAO,CAAEa,OAAQ,QAAhC,UACE,cAACf,EAAA,EAAD,UACE,sBAAM2uB,SAAUkJ,GAAhB,SACE,cAACziB,EAAA,EAAD,CACEE,QAAQ,WACRkN,MAAM,0CACNxN,WAAS,EACTK,KAAK,QACLe,SAAU,SAACvD,GACTkkB,EAAYlkB,EAAEC,OAAOxK,OACrBgC,GAAS,KAEXhC,MAAOwuB,EACPvhB,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAASkjB,GAAlC,SACE,cAACa,GAAA,EAAD,SAKR9zB,QAAOA,GACPgW,WAAYhW,IAAgB,SAIlC,cAAC5E,EAAA,EAAD,CAAKsW,GAAI,EAAG/W,UAAWH,EAAQgnB,KAA/B,SACGzb,EACC,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAGF,cAACmpB,GAAA,EAAD,CAAM0E,OAAK,EAAC9iB,UAAU,MAAM,aAAW,uBAAvC,SACGvI,EAAUZ,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAAC,GAAD,CAEEqI,SAAUkO,EACV8b,SAAUA,EACVO,cAAeA,EACfC,iBAAkBA,GAJb7yB,aAWjB,eAACmS,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMijB,MAAvB,sBACA,cAACljB,EAAA,EAAD,CACEC,QAAS,kBAAM+iB,MACfv3B,MAAM,UACN2U,SAAUmiB,EACVriB,UAAWqiB,EAAe,cAACnsB,EAAA,EAAD,CAAkBuK,KAAM,KAAS,cAACwB,GAAA,EAAD,IAJ7D,kCAcV,I,6CAAM+hB,GAAmB,SAAC,GAKnB,IAJL9rB,EAII,EAJJA,SACAgqB,EAGI,EAHJA,SACAO,EAEI,EAFJA,cACAC,EACI,EADJA,iBAMMuB,EAAW/B,EAASgC,SAAS,WACnC,MAAuB,MAAnBhsB,EAAS1L,OAAkBy3B,EAK7B,eAAC,WAAD,WACE,cAACE,GAAA,EAAD,CACEC,QAAM,EACNtQ,SAAU2O,EAAcj2B,QAAU0L,EAAS1L,MAC3CuT,QAAS,WAbb2iB,EAauCxqB,IAHrC,SAKE,cAACmsB,GAAA,EAAD,CAAcvS,QAAO,UAAK5Z,EAAS1L,MAAd,cAAyB0L,EAAS3L,UAEzD,cAAC+Z,GAAA,EAAD,OAZK,MCrVEge,GAAkB16B,YAAH,iYAoBf26B,GAAqB36B,YAAH,gNAQlB46B,GAAuB56B,YAAH,sNAOpB66B,GAA0B76B,YAAH,sRAQvB+tB,GAAqB/tB,YAAH,ieAwBlB86B,GAAqB96B,YAAH,gKAQlB+6B,GAAwB/6B,YAAH,6NC3ErBg7B,GAAwBh7B,YAAH,8ZAiBrBi7B,GAAyBj7B,YAAH,oPAQtBk7B,GAA0Bl7B,YAAH,wMAQvBm7B,GAAwBn7B,YAAH,+JCjCrBo7B,GAAiBp7B,YAAH,oNASdq7B,GAAmBr7B,YAAH,kOAQhBs7B,GAAoBt7B,YAAH,wKAQjBu7B,GAAkBv7B,YAAH,oMCetBI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAERw5B,YAAa,CACX75B,MAAO,WAII,SAAS85B,GAAT,GAGX,IAFFxK,EAEC,EAFDA,yBACA3d,EACC,EADDA,QAEM1S,EAAUR,KAChB,EAQIga,qBAAW7T,IAPbK,EADF,EACEA,gBACAC,EAFF,EAEEA,kBACAuB,EAHF,EAGEA,WACAtB,EAJF,EAIEA,QACAC,EALF,EAKEA,WACAS,EANF,EAMEA,iBACAe,EAPF,EAOEA,aAEF,EAMI6R,qBAAW7T,IALbqB,EADF,EACEA,cACAC,EAFF,EAEEA,iBACAb,EAHF,EAGEA,oBACAC,EAJF,EAIEA,uBACAyB,EALF,EAKEA,OAGAgzB,EAKEzK,EALFyK,WACAC,EAIE1K,EAJF0K,cACAC,EAGE3K,EAHF2K,OACAC,EAEE5K,EAFF4K,cACAxD,EACEpH,EADFoH,QAGI/c,EAAgB,SAACjH,GACrB,GAAsB,yBAAlBA,EAAEC,OAAOC,KACX,OAAKF,EAAEC,OAAOxK,WAOd/C,EAAW,2BACND,GADK,kBAEPuN,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,eARrC/C,EAAW,2BACND,GADK,kBAEPuN,EAAEC,OAAOC,KAAO,MAUD,kBAAlBF,EAAEC,OAAOC,MACXtN,EAAuB,2BAClBD,GADiB,IAEpB7C,cAAekQ,EAAEC,OAAOxK,SAG5BjD,EAAkB,2BACbD,GADY,kBAEdyN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAWxBgyB,EAAgB,SAACznB,GAagC,IAAD,EAY7C,EAxBe,aAAlBA,EAAEC,OAAOC,MAAuBF,EAAEC,OAAOoM,QAC3C3Z,EAAW,2BACND,GADK,IAER/D,qBAAsB,EACtBD,SAAUuR,EAAEC,OAAOoM,WAQD,WAAlBrM,EAAEC,OAAOC,MAAqBF,EAAEC,OAAOoM,SACzC3Z,EAAW,2BACND,GADK,uBAEPuN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOoM,SAFlB,uCAAC,eAGQ5Z,EAAQzD,YAHjB,IAG6BG,qBAAsB,KAAMC,cAAe,SAHxE,6CAAC,eAIcqD,EAAQjD,kBAJvB,IAIyCC,OAAQ,KAAML,cAAe,SAJtE,KAMVwD,EAAuB,2BAClBD,GADiB,IAEpBlD,OAAQ,KACRL,cAAe,WAGjBsD,EAAW,2BACND,GADK,uBAEPuN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOoM,SAFlB,uCAAC,eAGQ5Z,EAAQzD,YAHjB,IAG6BG,qBAAsB,KAAMC,cAAe,SAHxE,6CAAC,eAIcqD,EAAQjD,kBAJvB,IAIyCC,OAAQ,KAAML,cAAe,SAJtE,KAMVwD,EAAuB,2BAClBD,GADiB,IAEpBlD,OAAQ,KACRL,cAAe,WAKfs4B,EAAa,SAAC9jB,EAAOgH,GAAW,IAAD,EAMnC,GALApY,EAAkB,2BACbD,GADY,uBAEdqR,EAAM3D,OAAOC,KAAO0D,EAAM3D,OAAOxK,OAFnB,cAGdmV,EAAM7F,MAAM7E,KAAO0K,EAAM7F,MAAM3B,IAHjB,KAKbwH,EAAM7F,MAAM4iB,UAAW,CACzB,IAAQp0B,EAAkBqX,EAAM7F,MAAM4iB,UAA9Bp0B,cACRC,EAAiBD,KA8CrB,OAjBA8S,qBAAU,WACR,GAAIhS,EAAQ,CACV,IAAMszB,EAAYN,EAAW/pB,QAC3B,SAAC6K,GAAD,OAASA,EAAI5I,MAAQhN,EAAgBq1B,gBAEjCC,EAASL,EAAclqB,QAC3B,SAAC6K,GAAD,OAASA,EAAI5I,MAAQpM,EAAiB20B,aAEpCH,EAAU9sB,OAAS,GACrBrH,EAAiBm0B,EAAU,GAAGp0B,eAE5Bs0B,EAAOhtB,OAAS,GAClB3G,EAAa2zB,EAAO,GAAGE,eAG1B,CAAC1zB,IAGF,cAAC,WAAD,UACE,eAACoT,EAAA,EAAD,CAAW3Z,SAAS,KAApB,UACE,eAAC4Z,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,eAACE,EAAA,EAAD,CACEvF,QAAQ,WACRD,KAAK,QACLtC,KAAK,gBACLiC,WAAS,EAJX,UAME,cAAC3U,EAAA,EAAD,kCACA,cAAC2d,EAAA,EAAD,CACElJ,SAAU5N,GAAU9B,EAAgBzC,cACpCzC,MAAO,CAAE6mB,QAAS,GAClB9Q,GAAG,8BACHlD,KAAK,gBACLzK,MACElD,EAAgBzC,cACZyC,EAAgBzC,cAChB,GAENyT,SAAU0D,EACVtE,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAACa,EAAA,EAAD,CACEzB,SAAU5N,GAAU9B,EAAgBzC,cACpCgS,QAAS,kBArEL,WACtB,IACMgJ,EAAM,KACNhb,EAAgBib,KAAKK,MACzB,KAAAL,KAAKM,SAA6BP,GAClCtR,WACFhH,EAAkB,2BACbD,GADY,IAEfzC,mBAEF8C,EAAuB,2BAClBD,GADiB,IAEpB7C,mBAyD+Bwb,IAEfhe,MAAM,UACNkV,KAAK,QALP,SAOE,cAACwlB,GAAA,EAAD,eAOZ,eAACtgB,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAACta,EAAA,EAAD,WACE,sBAAMd,UAAWH,EAAQ46B,YAAzB,gBADF,mBAGA,cAAC5kB,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgBwI,cAC5CmF,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MACElD,EAAgBwI,cACZxI,EAAgBwI,cAChB,GAENgN,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAGd,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAACta,EAAA,EAAD,WACE,sBAAMd,UAAWH,EAAQ46B,YAAzB,gBADF,sBAGA,eAACnf,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgBslB,cAJ9C,UAME,eAAC5P,GAAA,EAAD,CACE7E,GAAG,qBACHlD,KAAK,gBACLzK,MACElD,EAAgBslB,cACZtlB,EAAgBslB,cAChB,GAENtU,SAAU0D,EARZ,UAUE,cAACiB,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,OAAhB,kBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,sBAEF,cAACqa,GAAA,EAAD,UAAiB/b,EAAW9G,gBAGhC,cAACya,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,cAACic,GAAD,CAAuBC,QAASA,EAAS/kB,QAASA,MAGpD,eAACyI,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAACta,EAAA,EAAD,WACE,sBAAMd,UAAWH,EAAQ46B,YAAzB,gBADF,sBAGA,cAAC5kB,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgB2jB,iBAC5ChW,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,WACRhN,MACElD,EAAgB2jB,iBACZ3jB,EAAgB2jB,iBAChB,GAENnO,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAGd,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAACta,EAAA,EAAD,WACE,sBAAMd,UAAWH,EAAQ46B,YAAzB,gBADF,wBAGA,cAAC5kB,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgB01B,gBAC5C/nB,KAAK,kBACLkD,GAAG,gCACHX,QAAQ,WACRhN,MACElD,EAAgB01B,gBACZ11B,EAAgB01B,gBAChB,GAENlgB,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAGd,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,6BACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLkD,GAAG,4BACHX,QAAQ,WACRhN,MACElD,EAAgB21B,YAAc31B,EAAgB21B,YAAc,GAE9D3kB,SAAU0D,OAId,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,wBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE7E,GAAG,0BACH3N,MACElD,EAAgBo1B,UAAYp1B,EAAgBo1B,UAAY,GAE1DpkB,SAAU,SAACK,EAAOgH,GAAR,OAAkB8c,EAAW9jB,EAAOgH,IAC9C1K,KAAK,YANP,UAQE,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAED4xB,EACCA,EAAWxtB,KAAI,SAACsO,GACd,OACE,cAACD,GAAA,EAAD,CACEhI,KAAK,eAELzK,MAAO0S,EAAIwf,UACXvkB,GAAI+E,EAAI5I,IACRooB,UAAWxf,EALb,SAOGA,EAAIwf,WALAxf,EAAI5I,QAUf,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAItB,cAAC,GAAD,CACEgnB,KAAK,YACLvc,KAAK,YACLjB,QAASA,UAIf,eAACyI,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,2BACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE7E,GAAG,6BACHlD,KAAK,eACLzK,MACElD,EAAgB41B,aACZ51B,EAAgB41B,aAChB,GAEN5kB,SAAU,SAACK,EAAOgH,GAAR,OAAkB8c,EAAW9jB,EAAOgH,IARhD,UAUE,cAAC1C,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDlC,EACCA,EAAcsG,KAAI,SAACsO,GACjB,OACE,cAACD,GAAA,EAAD,CACEhI,KAAK,kBAELzK,MAAO0S,EAAIggB,aACX/kB,GAAI+E,EAAI5I,IAJV,SAMG4I,EAAIggB,cAJAhgB,EAAI5I,QASf,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAItB,cAAC,GAAD,CACEgnB,KAAK,eACLvc,KAAK,eACLjB,QAASA,EACT1L,cAAeA,EACfC,iBAAkBA,UAIxB,eAACkU,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,2BACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE7E,GAAG,6BACHlD,KAAK,eACLzK,MACElD,EAAgB61B,aACZ71B,EAAgB61B,aAChB,GAEN7kB,SAAU,SAACK,EAAOgH,GAAR,OAAkB8c,EAAW9jB,EAAOgH,IARhD,UAUE,cAAC1C,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAED6xB,EACCA,EAAcztB,KAAI,SAACsO,GACjB,OACE,cAACD,GAAA,EAAD,CACEhI,KAAK,kBAELzK,MAAO0S,EAAIkgB,qBACXjlB,GAAI+E,EAAI5I,IAJV,SAMG4I,EAAIkgB,sBAJAlgB,EAAI5I,QASf,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAItB,cAAC,GAAD,CACEgnB,KAAK,eACLvc,KAAK,uBACLjB,QAASA,UAIf,eAACyI,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,oBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE7E,GAAG,sBACHlD,KAAK,QACLzK,MAAOlD,EAAgB+1B,MAAQ/1B,EAAgB+1B,MAAQ,GACvD/kB,SAAU,SAACK,EAAOgH,GAAR,OAAkB8c,EAAW9jB,EAAOgH,IAJhD,UAME,cAAC1C,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAED8xB,EACCA,EAAO1tB,KAAI,SAACsO,GACV,OACE,cAACD,GAAA,EAAD,CACEhI,KAAK,WAELzK,MAAO0S,EAAIogB,aACXnlB,GAAI+E,EAAI5I,IAJV,SAMG4I,EAAIogB,cAJApgB,EAAI5I,QASf,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAItB,cAAC,GAAD,CACEgnB,KAAK,QACLvc,KAAK,eACLjB,QAASA,aAKjB,cAAC9R,EAAA,EAAD,CAAKC,QAAQ,OAAOoW,GAAI,EAAxB,SACE,eAACkE,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACIzT,EAqBE,KApBF,eAAClH,EAAA,EAAD,WACE,eAACA,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,yCAEF,cAAC6a,GAAA,EAAD,OAEF,qBAAK3b,UAAWH,EAAQkiB,UAAxB,SACE,cAACgB,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,UAAS5Z,EAAQ1D,QAAS0D,EAAQ1D,OAClCwU,SAAUkkB,EACVvnB,KAAK,WAGTyP,MAAM,2BAMhB,eAACjI,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAAC3a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,2CAEF,cAAC6a,GAAA,EAAD,OAEF,qBAAK3b,UAAWH,EAAQkiB,UAAxB,SACE,cAACgB,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,UACE9Z,EAAgBnE,iBACZmE,EAAgBnE,gBAGtBmV,SAzcE,SAACvD,GACrBxN,EAAkB,2BACbD,GADY,IAEfnE,gBAAiB4R,EAAEC,OAAOoM,YAucVnM,KAAK,oBAGTyP,MAAM,kBACNzP,KAAK,yBAIX,eAACwH,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAAC3a,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,0DAEF,cAAC6a,GAAA,EAAD,OAEF,cAAClb,EAAA,EAAD,UACE,eAACA,EAAA,EAAD,CAAKT,UAAWH,EAAQkiB,UAAxB,UACE,cAACgB,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS5Z,EAAQhE,SACjB8U,SAAUkkB,EACVvnB,KAAK,aAGTyP,MAAM,4BAER,cAACpN,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLmN,MAAM,kBACNzP,KAAK,uBACLkD,GAAG,qCACHX,QAAQ,WACRhN,MAAOhD,EAAQ/D,qBACf6U,SAAU0D,EACVhF,UAAUxP,EAAQhE,SAClBwf,OAAQ,WApanBxb,EAAQ/D,sBACXgE,EAAW,2BACND,GADK,IAER/D,qBAAsB,MAkaVqD,MAAwC,KAAjCU,EAAQ/D,yCAYnC,IAAM85B,GAAuB,SAAC,GAMvB,IALL/L,EAKI,EALJA,KACAvc,EAII,EAJJA,KACAjB,EAGI,EAHJA,QACA1L,EAEI,EAFJA,cACAC,EACI,EADJA,iBAEA,EAAwBlB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAoC7M,oBAAS,GAA7C,mBAAOyB,EAAP,KAAmBC,EAAnB,KACA,EAA8B1B,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,IAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACMxY,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA+CwL,qBAAW7T,IAAlDK,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,kBACzB,EAA0BF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAGA,EAAyBuT,YAAYwmB,IAA9BoC,EAAP,oBAEA,EAA4B5oB,YAAYymB,IAAjCoC,EAAP,oBAEA,EAA6B7oB,YAAY+mB,IAAlC+B,EAAP,oBAEA,EAAqB9oB,YAAYmnB,IAA1B4B,EAAP,oBAEMC,EAAe,WACnB1pB,GAASrS,IAOLg8B,EAAY,uCAAG,WAAO9oB,GAAP,iCAAA9F,EAAA,yDACnB8F,EAAE6D,iBACGpO,EAFc,uBAGjBzB,GAAc,GAHG,0BAMfyN,EAAY,CACdC,MAAM,eACHxB,EAAOzK,GAEV4B,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,KAEf,cAATkd,IACFhb,EAAY,CACVC,OAAK,mBACFxB,EAAOzK,GADL,wBAEMyJ,EAAO7H,QAAQkI,KAFrB,yBAGOL,EAAO/H,SAASoI,KAHvB,KAOI,iBAATkd,IACFhb,EAAY,CACVC,MAAM,eACHxB,EAAOzK,GAEVszB,YAAax2B,EAAgBq1B,eAGjC7vB,GAAW,GA9BQ,cAgCT0kB,EAhCS,OAiCV,cAjCU,QA2CV,iBA3CU,QA0DV,iBA1DU,QAqEV,UArEU,0CAkCkBgM,EAAe,CAAEhnB,cAlCnC,eAkCPunB,EAlCO,OAmCb/pB,IACM2oB,EAAeoB,EAAiBjoB,KAAK0nB,eAAelpB,IAC1D/M,EAAkB,2BACbD,GADY,IAEfo1B,UAAWlyB,EACXmyB,kBAxCW,8CA4CqBc,EAAkB,CAAEjnB,cA5CzC,eA4CPwnB,EA5CO,OA6CbhqB,IACMiqB,EACJD,EAAoBloB,KAAK2nB,kBAAkBz7B,QAC7CuG,EAAiB,GAAD,oBACXD,GADW,CAEd,CAAEgM,IAAK2pB,EAAiBf,aAAc1yB,MAExCjD,EAAkB,2BACbD,GADY,IAEf41B,aAAc1yB,EACdyzB,qBAvDW,8CA2DqBP,EAAmB,CAAElnB,cA3D1C,eA2DP0nB,EA3DO,OA4DblqB,IACMmqB,EACJD,EAAoBpoB,KAAKsoB,mBAAmBp8B,QAC9CuF,EAAkB,2BACbD,GADY,IAEf61B,aAAc3yB,EACd2zB,qBAlEW,8CAsEcR,EAAW,CAAEnnB,cAtE3B,eAsEP6nB,EAtEO,OAuEbrqB,IACMsqB,EAAWD,EAAavoB,KAAKyoB,YAAYv8B,QAC/CuF,EAAkB,2BACbD,GADY,IAEf+1B,MAAO7yB,EACP8zB,cA5EW,iEAkFjBj9B,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDiL,GAAW,GACX8wB,IApFiB,kDAsFjBv8B,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAvFM,0DAAH,sDA2FlB,OACE,eAAC,WAAD,WACE,cAAC8J,EAAA,EAAD,CACEvU,MAAM,UACNwU,QAAS,kBAAM+mB,KACf5mB,SAAmB,iBAATwa,IAA4BlqB,EAAgBq1B,aAHxD,SAKE,cAAC5lB,GAAA,EAAD,MAEF,eAACE,GAAA,EAAD,CACEpV,KAAMA,EACNC,QAAS87B,EACT,wCAAgCpM,GAHlC,UAKE,cAACrwB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAAC8V,GAAA,EAAD,CAAagB,GAAE,sBAAiBqZ,GAAhC,uBAAmDA,KACnD,cAACpa,GAAA,EAAD,UACE,sBAAMe,GAAE,mBAAclD,GAAQ4b,SAAU,SAAC9b,GAAD,OAAO8oB,EAAa9oB,IAA5D,SACE,cAACuC,EAAA,EAAD,CACExQ,MAAOgC,EACPmM,KAAMA,EACNyI,WAAS,EACTgH,MAAO8M,EACPta,WAAS,EACTM,QAAQ,WACRc,SAxHS,SAACvD,GACpB0X,EAAS1X,EAAEC,OAAOxK,QAwHRsS,WAAYhU,EAAa,oBAAsB,SAIrD,eAACgQ,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAM+mB,KAAgBv7B,MAAM,UAA7C,sBAGA,cAACuU,EAAA,EAAD,CAEEma,KAAI,mBAAc9b,GAClBoD,KAAK,SACLb,QAAQ,YACRnV,MAAM,UACNm8B,QACE3xB,EAAU,cAACG,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,KAP/D,+B,yCCnwBJzW,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACTa,MAAO,OACP,QAAS,CACRR,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP+T,MAAO,CACNtU,QAAS,QAEVY,OAAQ,CACPD,UAAW,OACXD,SAAU,YAIG,SAAS47B,KACvB,IAAMn9B,EAAUR,KAChB,EAA2Dga,qBAAW7T,IAA9DuB,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,YAAaI,EAA/B,EAA+BA,aAAcD,EAA7C,EAA6CA,UAYvC81B,EAAkBl2B,EAASoG,KAAI,SAACsO,EAAKvW,GAAN,OAAgB,cAAC,GAAD,CAA4BA,MAAOA,EAAO5D,OAAQma,GAA7BvW,MAE1E,OACC,cAAC,WAAD,UACC,eAAC8V,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,eAACD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,eAAC1a,EAAA,EAAD,WACC,uBACCgW,OAAO,UACPzW,UAAWH,EAAQmV,MACnB0B,GAAG,wBAEHE,KAAK,OACLC,SAvBe,SAACvD,GACrB,IAAQG,EAAUH,EAAEC,OAAZE,MACJH,EAAEC,OAAOE,MAAMtF,OAAS,IAC5BnH,EAAY,GAAD,oBACPD,GADO,CAEV0M,EAAM,MAEPrM,EAAa,CAACjC,MAAO+3B,IAAIC,gBAAgB1pB,EAAM,UAkB3C,uBAAO2C,QAAQ,wBAAf,SACC,cAACjB,EAAA,EAAD,CAAQY,QAAQ,OAAOnV,MAAM,UAAU0V,UAAU,OAAOjB,UAAW,cAAC+nB,GAAA,EAAD,IAAnE,gCAKDH,KAEF,cAACjiB,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,eAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAO28B,UAAW,IAA/B,UACC,cAAC58B,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAACvH,GAAA,EAAD,CAAS2hB,YAAY,eAEtB,cAAC78B,EAAA,EAAD,CAAKc,MAAM,OAAOC,OAAO,OAAOd,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAlF,SACGzE,EAAUhC,MAEP,qBAAKo4B,IAAI,gBAAgBngB,IAAKjW,EAAUhC,MAAOnF,UAAWH,EAAQyB,SADtE,cAAC,KAAD,CAAmCX,MAAO,CAAEkL,SAAU,mBAW9D,I,qBAAM2xB,GAAiB,SAAC,GAAuB,IAArBl8B,EAAoB,EAApBA,OAAQ4D,EAAY,EAAZA,MAC3BrF,EAAUR,KACVmd,EAAUlb,EAAOm8B,WAAan8B,EAAOo8B,WAAaR,IAAIC,gBAAgB77B,GAC5E,EAAuG+X,qBAAW7T,IAA1GuB,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,YAAaI,EAA/B,EAA+BA,aAAcD,EAA7C,EAA6CA,UAAWF,EAAxD,EAAwDA,oBAAqBC,EAA7E,EAA6EA,sBAC7E,EAAwBtB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMkrB,EAAc,kBAAMlrB,GAASrS,IAqBnC,OACC,eAACK,EAAA,EAAD,CAAKsW,GAAI,EAAGlW,GAAI,EAAhB,UACC,eAACJ,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAxB,UACC,cAACpd,EAAA,EAAD,CAAKe,OAAQ,GAAID,MAAO,GAAxB,SACC,qBAAKg8B,IAAI,oBAAoBngB,IAAKZ,EAASjb,MAAM,WAElD,eAACd,EAAA,EAAD,CAAKc,MAAM,MAAX,UACC,cAACT,EAAA,EAAD,CAAY88B,QAAM,EAAlB,SACEt8B,EAAOm8B,WAAan8B,EAAOm8B,WAAan8B,EAAOkS,OAEhDlS,EAAOm8B,WAAa,KAAQ,eAAC38B,EAAA,EAAD,CAAYiV,QAAQ,UAApB,UAA+BzU,EAAOwU,KAAtC,WAE7B,eAACrV,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,UACC,cAACwJ,EAAA,EAAD,CAAQW,KAAK,QAAQT,UAAW,cAAC,KAAD,IAAgBD,QAAS,kBAAMhO,EAAa,CAAElC,QAAOC,MAAOqX,KAA5F,2BAGA,cAAC/b,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAAC,GAAD,CAAaya,YAAaA,EAAav9B,KAAMA,EAAMy9B,eApCjC,WAEnBv8B,EAAOm8B,YACTv2B,EAAsB,GAAD,oBACjBD,GADiB,CACI3F,KAItB6F,EAAUjC,QAAUA,GACvBkC,EAAa,CAAElC,MAAO,GAAIC,MAAO,KAElC,IAAM24B,EAAK,aAAO/2B,GAClB+2B,EAAMxd,OAAOpb,EAAO,GACpB8B,EAAY,aACR82B,IAEJH,gBAwBC,cAAChiB,GAAA,EAAD,QAKGyE,GAAc,SAAC,GAA2C,IAAzCud,EAAwC,EAAxCA,YAAav9B,EAA2B,EAA3BA,KAAMy9B,EAAqB,EAArBA,eACzC,OACC,gCACC,cAAC1oB,EAAA,EAAD,CAAQW,KAAK,QAAQlV,MAAM,YAAYyU,UAAW,cAAC0oB,GAAA,EAAD,IAAY3oB,QAAS,kBAAMuoB,KAA7E,sBAGA,eAACnoB,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASs9B,EAA7B,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAMuoB,KAAe/8B,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS,kBAAMyoB,KAAvE,gC,uCC3HCx+B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIK,SAAS+8B,GAAT,GAGX,IAFF9N,EAEC,EAFDA,yBACA3d,EACC,EADDA,QAEM1S,EAAUR,KAChB,EASIga,qBAAW7T,IARbK,EADF,EACEA,gBACAE,EAFF,EAEEA,QACAC,EAHF,EAGEA,WACAO,EAJF,EAIEA,gBACAC,EALF,EAKEA,kBACAiB,EANF,EAMEA,aACAC,EAPF,EAOEA,gBACAC,EARF,EAQEA,OAEMwoB,EAAcD,EAAdC,UAGF8N,EAAoB,SAAC3qB,EAAG4K,GAC5B,GAAK5K,EAAEC,OAAOxK,MAOd,GAAsB,yBAAlBuK,EAAEC,OAAOC,KAYbxN,EAAW,2BACND,GADK,IAERzD,WAAW,2BACNyD,EAAQzD,YADH,kBAEPgR,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,gBAhBzC,CAA+C,IAAD,EAC5C,EAAkCmV,EAAM7F,MAAMtV,OAAtCL,EAAR,EAAQA,cAAeK,EAAvB,EAAuBA,OACvBiD,EAAW,2BACND,GADK,IAERzD,WAAW,2BACNyD,EAAQzD,YADH,uBAEPgR,EAAEC,OAAOC,KAAOzQ,GAFT,8BAGRL,GAHQ,YAVZsD,EAAW,2BACND,GADK,IAERzD,WAAW,2BAAMyD,EAAQzD,YAAf,kBAA4BgR,EAAEC,OAAOC,KAAO,SA8DtD2N,EAAsB,SAAC4O,EAAMvc,EAAMzK,GAC1B,eAATgnB,EACGhnB,GACH/C,EAAW,2BACND,GADK,IAERzD,WAAW,2BAAMyD,EAAQzD,YAAf,kBAA4BkR,EAAO,OAI5CzK,GACHvC,EAAkB,2BACbD,GADY,kBAEdiN,EAAO,MAMhB,OACE,eAAC,WAAD,WACE,eAAC/S,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,UACE,6CAEF,cAAC6a,GAAA,EAAD,OAEF,eAAClb,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,mCACA,cAAC+U,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,oBACLkD,GAAG,kCACHX,QAAQ,WACRhN,MAAOhD,EAAQzD,WAAWC,kBAC1BsU,SAAUonB,EACV1c,OAAQ,kBACNJ,EACE,aACA,oBACApb,EAAQzD,WAAWC,oBAGvB8C,MAAgD,KAAzCU,EAAQzD,WAAWC,uBAG9B,eAAC9B,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,mCACA,cAAC+U,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,oBACLkD,GAAG,kCACHX,QAAQ,WACRhN,MAAOhD,EAAQzD,WAAWE,kBAC1BqU,SAAUonB,EACV1c,OAAQ,kBACNJ,EACE,aACA,oBACApb,EAAQzD,WAAWE,oBAGvB6C,MAAgD,KAAzCU,EAAQzD,WAAWE,uBAG9B,eAAC/B,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,mCACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,cAAC4a,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,uBAJP,SAMGzN,EAAQ1D,OACP,cAACkZ,GAAA,EAAD,CACE/H,KAAK,uBACLzK,MAAOhD,EAAQzD,WAAWG,qBAC1BoU,SAAUonB,EAHZ,SAKGrgB,GAAiBzQ,KAAI,SAACsO,EAAKvW,GAAN,OACpB,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,QAMnB,cAACqW,GAAA,EAAD,CACE/H,KAAK,uBACLzK,MAAOhD,EAAQzD,WAAWG,qBAC1BoU,SAAUonB,EAHZ,SAKGtgB,GAAUxQ,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,kBAU5ByC,EAAS,KAAyC,UAAlC9B,EAAgBslB,cAC/B,eAAC,WAAD,WACE,eAAC1qB,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,UACE,iDAEF,cAAC6a,GAAA,EAAD,OAEF,sBACE3b,UAAWH,EAAQge,cACnBld,MAAO,CAAEiL,WAAY,UAFvB,UAIE,eAACnL,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,kCACsB,4BAAIiF,EAAQjD,iBAAiBC,YAEnD,cAACtC,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTmB,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRhN,MAAOxC,EAAgBvD,SACvB6T,SAzKc,SAACvD,GACxBA,EAAEC,OAAOxK,MAOQ,YAAlBuK,EAAEC,OAAOC,KAObhN,EAAkB,2BACbD,GADY,kBAEd+M,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,UARrCvC,EAAkB,2BACbD,GADY,kBAEd+M,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,SAT5BvC,EAAkB,2BACbD,GADY,kBAEd+M,EAAEC,OAAOC,KAAO,OAsKP+N,OAAQ,kBACNJ,EACE,UACA,WACA5a,EAAgBvD,WAGpBqC,MAAoC,KAA7BkB,EAAgBvD,gBAI7B,eAACvC,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,sBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC0P,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLnO,MACEkB,EAAgBvD,SAAW,IAAMuD,EAAgBhC,QANrD,SASE,eAACgX,GAAA,EAAD,CACE/H,KAAK,UACLzK,MAAOxC,EAAgBhC,QACvBsS,SA/KO,SAACK,EAAOgH,GAAW,IAAD,EACzC1X,EAAkB,2BACbD,GADY,uBAEd2Q,EAAM3D,OAAOC,KAAO0D,EAAM3D,OAAOxK,OAFnB,cAGdmV,EAAM7F,MAAM7E,KAAO0K,EAAM7F,MAAM3B,IAHjB,MA2KH,UAKE,cAAC8E,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDonB,EACCA,EAAUhjB,KAAI,SAACsO,GACb,OACE,cAACD,GAAA,EAAD,CACEhI,KAAK,aAELzK,MAAO0S,EAAI6Q,eACX5V,GAAI+E,EAAI5I,IAJV,SAMG4I,EAAI6Q,gBAJA7Q,EAAI5I,QASf,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAItB,cAAC,GAAD,UACE,cAACqkB,GAAD,CACEC,OAAO,YACP9a,QAASA,YAKjB,eAAC9R,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,qCACA,cAAC,KAAD,CAAyBo9B,MAAOC,KAAcxZ,OAAQyZ,KAAtD,SACE,cAACpjB,GAAA,EAAD,CAAMC,WAAS,EAACqC,QAAQ,eAAxB,SACE,cAAC,KAAD,CACEvc,OAAO,QACP2V,GAAG,qBACH2nB,YAAY,iBACZzZ,OAAO,aACP7b,MAAOtB,EACPoP,SAhNO,SAACynB,GACxB52B,EAAgB42B,GAChB93B,EAAkB,2BACbD,GADY,IAEf/B,oBAAqB85B,MA6MPC,oBAAqB,CACnB,aAAc,8BAQ1B,QC1UH,SAASC,GAAaC,EAAW14B,EAASxB,EAASsD,GAGtD,OACK42B,EAAUpwB,eACVowB,EAAUtT,eACVsT,EAAUlD,iBACVkD,EAAUjV,iBAUVzjB,EAAQpD,iBAAiBC,qBAAwBmD,EAAQpD,iBAAiBE,qBAAwBkD,EAAQjD,iBAAiBE,SAK3Hy7B,EAAUpwB,eAAkBowB,EAAUtT,eAAkBsT,EAAUlD,iBAAoBkD,EAAUjV,iBAKjGjlB,EAAQvB,SAAW,IAAMuB,EAAQA,SAAuC,UAA5Bk6B,EAAUtT,eAEtD7c,QAAQC,IAAI,4DACL,CAAElJ,OAAO,EAAM9E,QAAS,oBAAqBm+B,QAAQ,IASrD,CAAEr5B,OAAO,EAAO9E,QAAS,IAfzB,CAAE8E,OAAO,EAAM9E,QAAS,oBAAqBo+B,QAAQ,GALrD,CAAEt5B,OAAO,EAAM9E,QAAS,oBAAqBq+B,QAAQ,GAVvD74B,EAAQpD,iBAAiBC,qBACzBmD,EAAQpD,iBAAiBE,qBACzBkD,EAAQjD,iBAAiBE,SAGvB,CAAEqC,OAAO,EAAM9E,QAAS,oBAAqBo+B,QAAQ,GAFjD,CAAEt5B,OAAO,EAAM9E,QAAS,oBAAqBo+B,QAAQ,EAAMC,QAAQ,GCV/E,IAAMC,GAAe5/B,YAAH,qXAoBZ6/B,GAAiB7/B,YAAF,8LAQf8/B,GAAmB9/B,YAAF,oMAOjB+/B,GAAuB//B,YAAH,2PAQpBggC,GAAkBhgC,YAAH,kdAyBfigC,GAAkBjgC,YAAH,+HAOfkgC,GAAqBlgC,YAAH,qMCnEzBI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCse,cAAe,CACXnd,QAAS,OACT,QAAS,CACLK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGd8gB,UAAW,CACPhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIC,SAASm+B,GAAT,GAA8D,IAAtClP,EAAqC,EAArCA,yBAA0B3d,EAAW,EAAXA,QACvD1S,EAAUR,KAChB,EAAyEga,qBAAW7T,IAA5EiB,EAAR,EAAQA,iBAAkBC,EAA1B,EAA0BA,kBAAmBa,EAA7C,EAA6CA,UAAWC,EAAxD,EAAwDA,aAChDszB,EAAkB5K,EAAlB4K,cAEFuE,EAAmB,SAACnoB,EAAOgH,GAAW,IAAD,EAMvC,GALAxX,EAAkB,2BACXD,GADU,uBAEZyQ,EAAM3D,OAAOC,KAAO0D,EAAM3D,OAAOxK,OAFrB,cAGZmV,EAAM7F,MAAM7E,KAAO0K,EAAM7F,MAAM3B,IAHnB,KAKbwH,EAAM7F,MAAM8iB,OAAQ,CACpB,IAAQE,EAAend,EAAM7F,MAAM8iB,OAA3BE,WACR7zB,EAAa6zB,KAIrB,OACI,eAAC,WAAD,WACI,eAAC56B,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACI,cAAChW,EAAA,EAAD,UACI,mDAEJ,cAAC6a,GAAA,EAAD,OAEJ,sBAAK3b,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,qBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAAQtC,KAAK,SAA5D,SACI,eAAC+H,GAAA,EAAD,CAAQ/H,KAAK,SAASzK,MAAOtC,EAAiB+D,OAAS/D,EAAiB+D,OAAS,GAAIqM,SAAUwoB,EAA/F,UACI,cAAC7jB,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEH+xB,EAAgBA,EAAc3tB,KAAI,SAACsO,GAChC,OACI,cAACD,GAAA,EAAD,CACIhI,KAAK,YAELzK,MAAO0S,EAAIjR,OACXkM,GAAI+E,EAAI5I,IACRsoB,OAAQ1f,EALZ,SAOKA,EAAIjR,QALAiR,EAAI5I,QAQhB,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAG7B,cAAC,GAAD,CAAsBgnB,KAAK,SAASvc,KAAK,SAASjB,QAASA,UAGnE,eAAC9R,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAAQtC,KAAK,YAA5D,SACI,eAAC+H,GAAA,EAAD,CAAQ/H,KAAK,YAAYzK,MAAOtC,EAAiB64B,UAAY74B,EAAiB64B,UAAY,GAAIzoB,SAAUwoB,EAAxG,UACI,cAAC7jB,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEHxB,EAAYA,EAAU4F,KAAI,SAACsO,GACxB,OACI,cAACD,GAAA,EAAD,CACIhI,KAAK,eAELzK,MAAO0S,EAAI6jB,UACX5oB,GAAI+E,EAAI5I,IAJZ,SAMK4I,EAAI6jB,WAJA7jB,EAAI5I,QAOhB,cAAC2I,GAAA,EAAD,CAAUzS,MAAM,UAG7B,cAAC,GAAD,CAAsBgnB,KAAK,YAAYvc,KAAK,YAAYjB,QAASA,gBAQzF,IAAMupB,GAAuB,SAAC,GAA6B,IAA3B/L,EAA0B,EAA1BA,KAAMvc,EAAoB,EAApBA,KAAMjB,EAAc,EAAdA,QAC3C,EAAwB3M,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAoC7M,oBAAS,GAA7C,mBAAOyB,EAAP,KAAmBC,EAAnB,KACA,EAA8B1B,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,IAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACMxY,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAyEwL,qBAAW7T,IAA5EiB,EAAR,EAAQA,iBAAkBC,EAA1B,EAA0BA,kBAAmBa,EAA7C,EAA6CA,UAAWC,EAAxD,EAAwDA,aACxD,EAA0B5B,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAGA,EAAwBuT,YAAY0rB,IAA5BU,EAAR,oBAEA,EAA2BpsB,YAAY2rB,IAA/BU,EAAR,oBAEMrD,EAAe,WACpB1pB,GAASrS,IAOJg8B,EAAY,uCAAG,WAAO9oB,GAAP,yBAAA9F,EAAA,yDACpB8F,EAAE6D,iBACGpO,EAFe,uBAGnBzB,GAAc,GAHK,0BAMhByN,EAAY,CACfC,OAAK,mBACSxB,EAAOzK,GADhB,wBAEiByJ,EAAO7H,QAAQkI,KAFhC,yBAGkBL,EAAO/H,SAASoI,KAHlC,IAMO,cAATkd,IACHhb,EAAY,CACXC,MAAM,eACJxB,EAAOzK,GAET02B,SAAUh5B,EAAiB20B,YAI7B/vB,GAAW,GAtBS,cAwBX0kB,EAxBW,OAyBb,WAzBa,QAmCb,cAnCa,0CA0BWwP,EAAY,CAAExqB,cA1BzB,eA0BX2qB,EA1BW,OA2BjBntB,IACM6oB,EAAYsE,EAAcrrB,KAAKkrB,YAAY1sB,IACjDnM,EAAkB,2BACdD,GADa,IAEhB+D,OAAQzB,EACRqyB,eAhCgB,8CAoCcoE,EAAe,CAAEzqB,cApC/B,eAoCX4qB,EApCW,OAqCjBptB,IACMqtB,EAAeD,EAAiBtrB,KAAKmrB,eAAe3sB,IAC1DrL,EAAa,GAAD,oBAAKD,GAAL,CAAgB,CAAEsL,IAAK+sB,EAAcN,UAAWv2B,MAC5DrC,EAAkB,2BACdD,GADa,IAEhB64B,UAAWv2B,EACX62B,kBA3CgB,iEAiDnBhgC,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDiL,GAAW,GACX8wB,IAnDmB,kDAqDnBv8B,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAtDQ,0DAAH,sDA0DlB,OACC,eAAC,WAAD,WACC,cAAC8J,EAAA,EAAD,CACCvU,MAAM,UACNwU,QAAS,kBAAM+mB,KACf5mB,SAAmB,cAATwa,IAAyBtpB,EAAiB20B,UAHrD,SAKC,cAAC,KAAD,MAED,eAAC5lB,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAAS87B,EAAc,wCAAgCpM,GAA3E,UACC,cAACrwB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAAC8V,GAAA,EAAD,CAAagB,GAAE,sBAAiBqZ,GAAhC,uBAAmDA,KACnD,cAACpa,GAAA,EAAD,UACC,sBAAMe,GAAE,mBAAclD,GAAQ4b,SAAU,SAAC9b,GAAD,OAAO8oB,EAAa9oB,IAA5D,SACC,cAACuC,EAAA,EAAD,CACCxQ,MAAOgC,EACPmM,KAAMA,EACNyI,WAAS,EACTgH,MAAO8M,EACPta,WAAS,EACTM,QAAQ,WACRc,SAnFe,SAACvD,GACrB0X,EAAS1X,EAAEC,OAAOxK,QAmFbsS,WAAYhU,EAAa,oBAAsB,SAIlD,eAACgQ,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAM+mB,KAAgBv7B,MAAM,UAA7C,sBAGA,cAACuU,EAAA,EAAD,CAECma,KAAI,mBAAc9b,GAClBoD,KAAK,SACLb,QAAQ,YACRnV,MAAM,UACNm8B,QAAS3xB,EAAU,cAACG,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,KANrE,+BCzMU,SAAS+pB,GAAT,GAA0C,IAAZ95B,EAAW,EAAXA,QAG5C,OAEC,cAACoZ,GAAA,EAAD,CAAgB7I,UAAW6R,KAA3B,SACC,eAAC/I,GAAA,EAAD,CAAO,aAAW,eAAetJ,KAAK,QAAtC,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,SAGF,cAACC,GAAA,EAAD,UACEzZ,EAAQoH,KAAI,SAAC9J,EAAQ6B,GAAT,OACZ,cAAC,GAAD,CAA+B7B,OAAQA,EAAQ6B,MAAOA,GAA9BA,aAQ9B,IAAM46B,GAAoB,SAAC,GAAuB,IAArBz8B,EAAoB,EAApBA,OAAQ6B,EAAY,EAAZA,MAEpC,OACC,eAACoa,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,UAAYlc,EAAO08B,QACnB,cAACxgB,GAAA,EAAD,UAAYlc,EAAOA,SACnB,cAACkc,GAAA,EAAD,UACC,cAAC,GAAD,CAAmBra,MAAOA,EAAOnC,OAAQM,EAAON,eAM9Ci9B,GAAoB,SAAC,GAAuB,IAArB96B,EAAoB,EAApBA,MAAOnC,EAAa,EAAbA,OACnC,EAAwB6C,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA4C4G,qBAAW7T,IAA/CmB,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,iBAEjByZ,EAAc,WACnB5N,GAASrS,IAkCV,OACC,gCACC,cAAC4W,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAAS,kBAAMiL,KAA3C,SACC,cAAC3I,GAAA,EAAD,CAAe9W,MAAM,cAEtB,eAAC4U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASggB,EAA7B,UACC,cAAC3K,GAAA,EAAD,UAAc,gCACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAMiL,KAAezf,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAAS,kBA1CE,WAGtB,OAAQrS,GACP,IAAK,KACJ4D,EAAchC,cAAc2b,OAAOpb,EAAO,GAC1C0B,EAAiB,2BACED,GADH,IAEAhC,cAAc,aAAKgC,EAAchC,kBAEjD,MACD,IAAK,OACJgC,EAAc/B,aAAa0b,OAAOpb,EAAO,GACzC0B,EAAiB,2BACED,GADH,IAEA/B,aAAa,aAAK+B,EAAc/B,iBAEhD,MACD,IAAK,SACJ+B,EAAc9B,gBAAgByb,OAAOpb,EAAO,GAC5C0B,EAAiB,2BACED,GADH,IAEA9B,gBAAgB,aAAK8B,EAAc9B,oBAMrDwb,IAc0B4f,IAAkBr/B,MAAM,YAAYqb,WAAS,EAApE,gCCnFC5c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAER,mBAAoB,CAClBF,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,YAKG,SAASi/B,KACtB,IAAMrgC,EAAUR,KAChB,EAMIga,qBAAW7T,IALbO,EADF,EACEA,QACAY,EAFF,EAEEA,cACAC,EAHF,EAGEA,iBACAP,EAJF,EAIEA,cACAJ,EALF,EAKEA,oBAEF,EAA0BL,mBAAS,CACjCm6B,MAAO,IACPh9B,OAAQgD,EAAQ1D,OAAS,SAAW,KACpCK,cAAeqD,EAAQ1D,OAAS,MAAQ,MACxCgB,OAAQ,IAJV,mBAAO08B,EAAP,KAAcI,EAAd,KAOMC,EAAgB,SAAC9sB,EAAG4K,GACxB,GAAsB,WAAlB5K,EAAEC,OAAOC,KAOb,GAAsB,WAAlBF,EAAEC,OAAOC,KASb2sB,EAAS,2BACJJ,GADG,kBAELzsB,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,aAX5B,CACE,MAAkCmV,EAAM7F,MAAMtV,OAAtCL,EAAR,EAAQA,cAAeK,EAAvB,EAAuBA,OACvBo9B,EAAS,2BACJJ,GADG,IAENh9B,SACAL,wBAXFy9B,EAAS,2BACJJ,GADG,kBAELzsB,EAAEC,OAAOC,KAAO5G,WAAW0G,EAAEC,OAAOxK,WAiD3C,OACE,eAAC,WAAD,WACE,eAACtI,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAxB,UACE,eAAC/c,EAAA,EAAD,CAAYd,UAAU,cAAtB,6BACkB,4BAAIiG,EAAoBlD,SAD1C,yBAEmB,kCAAKkD,EAAoB5C,aAE3CgD,EAAc8G,KAAI,SAAC4Q,EAAU7Y,GAC5B,OAAK6Y,EAAS7Z,QAOP,KALH,eAACpD,EAAA,EAAD,CAAwBd,UAAU,cAAlC,6BACkB,4BAAI+d,EAAShb,SAD/B,wBACgE,IAC9D,kCAAKgb,EAAS1a,YAFC6B,SAQzB,cAACyW,GAAA,EAAD,IACA,eAAClb,EAAA,EAAD,CAAKT,UAAWH,EAAQge,cAAelS,eAAe,SAAtD,UACE,eAAClL,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,oBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,cAAC4a,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAAQtC,KAAK,QAA5D,SACE,eAAC+H,GAAA,EAAD,CAAQ/H,KAAK,QAAQzK,MAAOg3B,EAAMA,MAAOlpB,SAAUupB,EAAnD,UACE,cAAC5kB,GAAA,EAAD,CAAUzS,MAAM,IAAhB,mBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,IAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,IAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,IAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,KAAhB,sBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,KAAhB,gCAKR,eAACtI,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,cAAC4a,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,SAJP,SAMGzN,EAAQ1D,OACP,cAACkZ,GAAA,EAAD,CACE/H,KAAK,SACLzK,MAAOg3B,EAAMh9B,OACb8T,SAAUupB,EAHZ,SAKGxiB,GAAiBzQ,KAAI,SAACsO,EAAKvW,GAAN,MACL,WAAfuW,EAAI1Y,OACF,cAACyY,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,GAGb,UAIR,cAACqW,GAAA,EAAD,CACE/H,KAAK,SACLzK,MAAOg3B,EAAMh9B,OACb8T,SAAUupB,EAHZ,SAKGziB,GAAUxQ,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAAsBzY,OAAQ0Y,EAAK1S,MAAO0S,EAAI1Y,OAA9C,SACG0Y,EAAI1Y,QADQmC,eAS3B,eAACzE,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACEe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLtC,KAAK,SACLzK,MAAOg3B,EAAM18B,OACb0S,QAAQ,WACRc,SAAUupB,OAGd,cAAC3/B,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,WAA/B,SACE,cAACuJ,EAAA,EAAD,CACEY,QAAQ,YACRD,KAAK,QACLlV,MAAM,UACNwU,QAAS,kBAzHE,WACnB,GAAK2qB,EAAMA,OAAUA,EAAM18B,QAAW08B,EAAMh9B,OAA5C,CACA,OAAQg9B,EAAMh9B,QACZ,IAAK,KACH6D,EAAiB,2BACZD,GADW,IAEdhC,cAAc,GAAD,oBAAMgC,EAAchC,eAApB,CAAmCo7B,OAElD,MACF,IAAK,OACHn5B,EAAiB,2BACZD,GADW,IAEd/B,aAAa,GAAD,oBAAM+B,EAAc/B,cAApB,CAAkCm7B,OAEhD,MACF,IAAK,SACHn5B,EAAiB,2BACZD,GADW,IAEd9B,gBAAgB,GAAD,oBAAM8B,EAAc9B,iBAApB,CAAqCk7B,OAM1DI,EAAS,2BACJJ,GADG,IAEN18B,OAAQ,MA+Fag9B,IAJjB,0BAUJ,cAAC5/B,EAAA,EAAD,UACE,cAACua,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,SACGvX,EAAQ1D,OACP,cAAC,WAAD,UACE,eAAC2Y,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,cAAC1c,EAAA,EAAD,CAAYiV,QAAQ,KAAKjK,MAAM,SAA/B,oBAGA,cAAC+zB,GAAD,CAAoB95B,QAASY,EAAc9B,uBAI/C,eAAC,WAAD,WACE,eAACmW,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,cAAC1c,EAAA,EAAD,CAAYiV,QAAQ,KAAKjK,MAAM,SAA/B,oBAGA,cAAC+zB,GAAD,CAAoB95B,QAASY,EAAchC,mBAE7C,eAACqW,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,cAAC1c,EAAA,EAAD,CAAYiV,QAAQ,KAAKjK,MAAM,SAA/B,mBAGA,cAAC+zB,GAAD,CAAoB95B,QAASY,EAAc/B,4B,wBC1N9C07B,GAAgB,uCAAG,WAAOjsB,EAAM0b,GAAb,qBAAAviB,EAAA,yDACf,oBAATuiB,EADwB,wBAEtBwQ,EAAc,CAChBlyB,cAAegG,EAAKhG,cACpB8c,cAAe9W,EAAK8W,cACpB3B,iBAAkBnV,EAAKmV,iBACvB+R,gBAAiBlnB,EAAKknB,gBACtB75B,gBAAiB2S,EAAK3S,iBAEG,OAAvB2S,EAAKjR,eAAiD,KAAvBiR,EAAKjR,gBACtCm9B,EAAW,2BAAQA,GAAR,IAAqBn9B,cAAeiR,EAAKjR,iBAC7B,OAArBiR,EAAKmnB,aAA6C,KAArBnnB,EAAKmnB,cACpC+E,EAAW,2BAAQA,GAAR,IAAqB/E,YAAannB,EAAKmnB,eAC1B,OAAtBnnB,EAAK6mB,cAA+C,KAAtB7mB,EAAK6mB,eACrCqF,EAAW,2BAAQA,GAAR,IAAqBrF,aAAc7mB,EAAK6mB,gBAC9B,OAAnB7mB,EAAK4mB,WAAyC,KAAnB5mB,EAAK4mB,YAClCsF,EAAW,2BAAQA,GAAR,IAAqBtF,UAAW5mB,EAAK4mB,aACxB,OAAtB5mB,EAAKonB,cAA+C,KAAtBpnB,EAAKonB,eACrC8E,EAAW,2BAAQA,GAAR,IAAqB9E,aAAcpnB,EAAKonB,gBACxB,OAAzBpnB,EAAKmoB,iBAAqD,KAAzBnoB,EAAKmoB,kBACxC+D,EAAW,2BAAQA,GAAR,IAAqB/D,gBAAiBnoB,EAAKmoB,mBAC3B,OAAzBnoB,EAAKqoB,iBAAqD,KAAzBroB,EAAKqoB,kBACxC6D,EAAW,2BAAQA,GAAR,IAAqB7D,gBAAiBroB,EAAKqoB,mBAC9B,OAAtBroB,EAAKqnB,cAA+C,KAAtBrnB,EAAKqnB,eACrC6E,EAAW,2BAAQA,GAAR,IAAqB7E,aAAcrnB,EAAKqnB,gBAC/B,OAAlBrnB,EAAKwoB,UAAuC,KAAlBxoB,EAAKwoB,WACjC0D,EAAW,2BAAQA,GAAR,IAAqB1D,SAAUxoB,EAAKwoB,YAC9B,OAAfxoB,EAAKunB,OAAiC,KAAfvnB,EAAKunB,QAC9B2E,EAAW,2BAAQA,GAAR,IAAqB3E,MAAOvnB,EAAKunB,SACT,OAAjCvnB,EAAK1S,mBAAmBC,MAAkD,KAAjCyS,EAAK1S,mBAAmBC,OACnE2+B,EAAW,2BACNA,GADM,IAET5+B,mBAAoB0S,EAAK1S,sBAhCH,kBAkCnB4+B,GAlCmB,WAmCR,sBAATxQ,EAnCiB,iBAqC1B,IADIyQ,EAAY,GACPtyB,EAAI,EAAGA,EAAImG,EAAKlG,OAAQD,IAC3BuyB,EAAS,CACX5tB,IAAKwB,EAAKnG,GAAG2E,IACb7P,SAAUqR,EAAKnG,GAAGlL,SAClBoL,YAAaiG,EAAKnG,GAAGE,YACrB/K,OAAQgR,EAAKnG,GAAG7K,OAChBY,iBAAkBoQ,EAAKnG,GAAGjK,iBAC1BlB,OAAQsR,EAAKnG,GAAGnL,OAChBL,cAAe2R,EAAKnG,GAAGxL,cACvBY,cAAe+Q,EAAKnG,GAAG5K,eAEK,OAA1B+Q,EAAKnG,GAAG9K,eAAoD,KAA1BiR,EAAKnG,GAAG9K,gBAC5Cq9B,EAAM,2BAAQA,GAAR,IAAgBr9B,cAAeiR,EAAKnG,GAAG9K,iBACvB,OAApBiR,EAAKnG,GAAGhK,SAAwC,KAApBmQ,EAAKnG,GAAGhK,UACtCu8B,EAAM,2BAAQA,GAAR,IAAgBv8B,QAASmQ,EAAKnG,GAAGhK,WACR,OAA7BmQ,EAAKnG,GAAGsB,kBAA0D,KAA7B6E,EAAKnG,GAAGsB,mBAC/CixB,EAAM,2BAAQA,GAAR,IAAgBjxB,iBAAkB6E,EAAKnG,GAAGsB,iBAAkBC,UAAW4E,EAAKnG,GAAGuB,aAErF+wB,EAAUzgB,KAAK0gB,GAvDO,yBAyDnBD,GAzDmB,4CAAH,wD,wDC0DhBr8B,GAAyB,CACpC,CACEZ,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,IAIjB,SAASumB,GAAS9R,GAChB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACE,6CACEgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALN,aAOGrhB,IAAU7D,GACT,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGrP,OAAO,OAAlB,SACGmE,OAaX,SAAS4kB,GAAUrlB,GACjB,MAAO,CACLwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI7C,IAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAER4lB,KAAM,CACJmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE5C4Z,QAAS,CACPn/B,MAAO,IAETo/B,cAAe,CACbnZ,QAAS,GAEXxc,SAAU,CACRvL,OAAQF,EAAME,OAAOwL,OAAS,EAC9BrK,MAAO,YAII,SAASggC,GAAT,GAKX,IAJFvT,EAIC,EAJDA,OACAva,EAGC,EAHDA,MACA+tB,EAEC,EAFDA,iBACAC,EACC,EADDA,WAEMjhC,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACA,EAiCI3R,qBAAW7T,IAhCbK,EADF,EACEA,gBACAC,EAFF,EAEEA,kBACAC,EAHF,EAGEA,QACAC,EAJF,EAIEA,WACAqB,EALF,EAKEA,WACAC,EANF,EAMEA,cACAnB,EAPF,EAOEA,SACAC,EARF,EAQEA,YACAW,EATF,EASEA,SACAC,EAVF,EAUEA,YACAX,EAXF,EAWEA,cACAC,EAZF,EAYEA,iBACAC,EAbF,EAaEA,gBACAC,EAdF,EAcEA,kBACAP,EAfF,EAeEA,oBACAC,EAhBF,EAgBEA,uBACAO,EAjBF,EAiBEA,iBACAC,EAlBF,EAkBEA,kBACAkB,EAnBF,EAmBEA,UACAjB,EApBF,EAoBEA,cACAC,EArBF,EAqBEA,iBACAE,EAtBF,EAsBEA,iBACAM,EAvBF,EAuBEA,aACAI,EAxBF,EAwBEA,aACAP,EAzBF,EAyBEA,oBACAC,EA1BF,EA0BEA,sBACAW,EA3BF,EA2BEA,eACAC,GA5BF,EA4BEA,kBACAC,GA7BF,EA6BEA,0BACAC,GA9BF,EA8BEA,4BACAa,GA/BF,EA+BEA,oBAII2J,IAnCN,EAgCE5J,kBAGa8E,KAAKC,MAAMC,aAAaC,QAAQ,gBAGvCjO,GAAayZ,qBAAW7T,IAAxB5F,SACR,GAA8BgG,oBAAS,GAAvC,qBAAOwF,GAAP,MAAgBC,GAAhB,MACM0kB,GAAOlqB,EAAgBslB,cAG7B,GAAwBhY,YAAY0Y,IAA7BkV,GAAP,qBACA,GAA6B5tB,YAAY4Y,IAAlCiV,GAAP,qBAEM3gB,GAAc,SAAC9S,GACnBkF,GAASrS,GACTwH,EAAUylB,GACN9f,GAAY8f,EACd4T,GAAiB1zB,GAEjB2zB,MASEvT,GAAQ,uCAAG,sCAAAngB,EAAA,2DACT2zB,EAAW3C,GACf34B,EACAE,EACAQ,EACAsB,IAIWxC,MATE,uBAUbiC,EAAc65B,GAVD,6BAaf75B,EAAc65B,KACVt5B,EAAesG,OAAS,GAdb,oBAeAtG,EAAe+I,QAC1B,SAAC6K,GAAD,OAASA,EAAI7a,MAAMiS,KAAO4I,EAAIiL,OAAO7T,OAG9B1E,SAAWtG,EAAesG,OAnBtB,wBAoBX7G,EAAc,CACZjC,OAAO,EACP9E,QAAS,gDACT6gC,QAAQ,IAEVxhC,GAAS,CACPW,QAAQ,iDACRD,OAAQ,QACRF,MAAM,IA5BG,kCAoCmB,KAF9BihC,EAlCW,aAkCch7B,IAEN8H,OACrBkzB,EAAmBthB,KAAK9Z,GAKM,IAHPo7B,EAAmBzwB,QACxC,SAACmN,GAAD,OAAmC,IAArBA,EAAS7Z,WAENiK,QACjBkzB,EAAmB/gB,OAAO,EAAG,EAAGra,GAIpCF,EAAQoJ,iBAAmBhJ,EAEvBm7B,EAAuBv6B,EACvBsmB,IACFiU,EAAuB,aAAIv6B,GAAU6J,QAAO,SAAC6K,GAAD,OAAUA,EAAIgiB,eAnD7C,UAuDU6C,GACrBz6B,EACA,mBAzDW,gCA2DbE,EA3Da,KA4DHu7B,EA5DG,KA6Dbr6B,EA7Da,KA8DbV,EA9Da,KA+DbE,EA/Da,UAgEY65B,GACvBe,EACA,qBAlEW,4BAoEbx5B,EApEa,KAqEbE,GArEa,KAsEEpB,EAtEF,MAuEJ6L,GAAO7H,QAAQkI,IAvEX,MAwEHL,GAAO/H,SAASoI,IAxEb,MAyEJL,GAAOK,IAnBdmC,EAtDW,CAuDbnP,gBAvDa,KA2DbE,QA3Da,KA4DbgB,SA5Da,KA6DbE,oBA7Da,KA8DbV,gBA9Da,KA+DbE,iBA/Da,KAgEbskB,kBAhEa,KAoEbljB,eApEa,KAqEbE,0BArEa,KAsEbw5B,cAtEa,KAuEb52B,QAvEa,MAwEbF,SAxEa,MAyEb+2B,QAzEa,OA+Efn2B,IAAW,GA/EI,WAiFTgiB,EAjFS,kCAkFU2T,GAAmB,CACtCjsB,UAAW,CACTC,QACA0B,GAAI5D,EAAMD,OArFH,QAkFLsB,EAlFK,OAwFXvU,GAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAK2sB,mBAAmBzgC,SACnDD,OAAQ,UACRF,MAAM,IA3FG,yCA8FU2gC,GAAc,CACjChsB,UAAW,CACTC,WAhGO,QA8FLb,EA9FK,OAmGXvU,GAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAK0sB,cAAcxgC,SAC9CD,OAAQ,UACRF,MAAM,IAtGG,QAyGbiL,IAAW,GACXgV,KACAwgB,IA3Ga,oDA6Gbx1B,IAAW,GACXzL,GAAS,CACPW,QAAQ,UAAD,OAAY,MAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERkO,QAAQC,IAAR,OACI,MAAM0G,aACR3G,QAAQC,IAAI,MAAM0G,aAAad,QACtB,MAAMe,eACf5G,QAAQC,IAAI,MAAM2G,eAvHP,2DAAH,qDA6HRgsB,GAAqB,WACzBp7B,EAAkBrE,IAClBuE,EAAWlE,IACXoE,EAAuB/C,IACvBiD,EAAYjC,IACZmC,EAAiB,IACjBE,EAAkBnC,IAClBqC,EAAkB,IAClBE,EAAiBlC,IACjBoC,EAAiB,IACjBE,EAAY,IACZI,EAAa,CAAElC,MAAO,GAAIC,MAAO,KACjCmC,EAAc,CAAEjC,OAAO,EAAO9E,QAAS,KACvCiH,EAAa,IACbN,EAAsB,IACtBY,GAAkB,IAClBE,GAA4B,IAC5BgjB,EAAS,IAILiW,GAAmB,SAAC1zB,GAGxB,MAA6CA,EAASxH,QAAzB8kB,GAA7B,EAAQ1b,iBAAR,oBACIsyB,EAAiBl0B,EAASwd,kBAAkBna,QAC9C,SAAC6K,GAAD,OAAUA,EAAIvX,WAEZ4mB,EAAiBvd,EAASwd,kBAAkBna,QAC9C,SAAC6K,GAAD,OAASA,EAAIvX,WAEf4B,EAAkByH,EAAS1H,iBAC3BG,EAAW6kB,GACXnkB,EACE6G,EAAS9G,iBACL8G,EAAS9G,iBACThC,IAENuC,EAAYuG,EAASxG,UACrBH,EAAiB2G,EAASg0B,eAC1Bj7B,EAAiBm7B,GACjBr7B,EAAYmH,EAASxH,QAAQoJ,kBAC7BjJ,EAAuB4kB,EAAe,IACtChjB,GACEyF,EAASm0B,iBAAmBn0B,EAASm0B,iBAAmB,IAEtDn0B,EAASo0B,mBAAmBxzB,OAAS,EACvCtF,IAAoB,GAEpBA,IAAoB,IAWxB+4B,OAAOC,UAPP,SAAuB3qB,GAEL,MADIA,EAAZ4qB,SAENC,SAASC,eAAe,0BAA0BC,SAMtD,IAAMC,GACJ,cAAC/sB,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNwU,QAAS,kBAAMuY,MACf7X,KAAK,QACLT,UAAW,cAAC,KAAD,IALb,qBAsBI8sB,GAAgB,WACpB,OAAK9U,GAAoB,IAAVtkB,EAEJskB,GAAmB,UAAT0C,IAA8B,IAAVhnB,GAE9BskB,GAAmB,UAAT0C,IAA8B,IAAVhnB,EADhCm5B,GAKL,cAAC/sB,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNwU,QAAS,kBAAM4V,EAASjiB,EAAQ,IAChC+M,KAAK,QACLinB,QAAS,cAACqF,GAAA,EAAD,IACT7rB,kBAAgB,EANlB,uBAPK2rB,IAqBX,OACE,eAAC,WAAD,WAGI7U,EAkBA,cAACrW,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAAS,kBAAMiL,GAAYvN,IAAvD,SACE,cAACoX,GAAA,EAAD,MAlBF4W,EACE,cAAC9pB,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAAS,kBAAMiL,MAA3C,SACE,cAAC/K,GAAA,EAAD,MAGF,cAACH,EAAA,EAAD,CACEuB,GAAG,yBACH9V,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLV,QAAS,kBAAMiL,MACfhL,UAAW,cAACC,GAAA,EAAD,IANb,mBAgBJ,eAACE,GAAA,EAAD,CACEpV,KAAMA,EACNqV,WAAS,EACTrU,SAAS,KACT0tB,OAAO,QACPC,sBAAoB,EACpB1uB,QAAS,SAAC44B,EAAGjK,GACI,kBAAXA,GACF3O,MARN,UAYE,cAACzF,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACE,cAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,gBAAnC,SACE,eAACyf,GAAA,EAAD,CACEriB,MAAOA,EACP8N,SAxRS,SAACK,EAAOmU,GAC3BL,EAASK,IAwRCtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPb,UASE,cAACC,GAAA,EAAD,aACExI,MAAM,kBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACEn7B,EAAWhC,QAASgC,EAAWs3B,OARnC,SAWE,qBACEvhB,IAAI,8EACJmgB,IAAI,iBACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,mBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACEn7B,EAAWhC,QAASgC,EAAWu3B,OARnC,SAWE,qBACExhB,IAAI,oFACJmgB,IAAI,cACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,uBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACEn7B,EAAWhC,QAASgC,EAAWq3B,OARnC,SAWE,qBACEthB,IAAI,kFACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,mBACNjL,KACE,qBACEoF,IAAI,wEACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,mBACNjL,KACE,qBACEoF,IAAI,0EACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,WACNjL,KACE,qBACEoF,IAAI,0EACJmgB,IAAI,iBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEf8C,GACmC,UAAlCxnB,EAAgBslB,cACd,cAACM,GAAA,EAAD,aACExI,MAAM,mBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACEn7B,EAAWhC,QAASgC,EAAW+5B,OARnC,SAWE,qBACEhkB,IAAI,gFACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,KAGhB,YASV,eAAC5U,GAAA,EAAD,CAAe3V,UAAWH,EAAQ8gC,cAAlC,UACE,cAACr1B,GAAA,EAAD,CAAUtL,UAAWH,EAAQmL,SAAU5K,KAAMgL,GAA7C,SACE,cAACG,EAAA,EAAD,CAAkB3K,MAAM,cAE1B,cAAC,GAAD,CAAgBmI,MAAOA,OAEzB,eAACsO,GAAA,EAAD,CAAe1W,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAAzD,UACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,kBAAM4V,EAASjiB,EAAQ,IAChC+M,KAAK,QACLT,UAAW,cAACotB,GAAA,EAAD,IACXltB,SAAoB,IAAVxM,EANZ,sBAUA,cAACoM,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,kBAAMiL,MACfvK,KAAK,QACLT,UAAW,cAAC,KAAD,IACXkB,kBAAgB,EANlB,sBAUA,cAAC4rB,GAAD,aAOV,IAAMO,GAAiB,SAAC,GAAe,IAAb35B,EAAY,EAAZA,MAClBlJ,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAG/C,EAA0C6L,aAASkS,GAAmB,CACpE7W,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAD9DzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAU9B,GANAoH,qBAAU,WACR,OAAO,WACLpH,OAED,CAACA,IAEAnH,EACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAIN,GAAI1Q,EAAO,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAEpC,IAAQ6qB,EAA6B7b,EAA7B6b,yBAER,OACE,sBAAKlwB,UAAWH,EAAQgnB,KAAxB,UACE,cAAC,GAAD,CAAU9d,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACw1B,GAAD,CACExK,yBAA0BA,EAC1B3d,QAASA,MAGb,cAAC,GAAD,CAAUxJ,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC8c,GAAD,MAEF,cAAC,GAAD,CAAUjZ,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC84B,GAAD,CACE9N,yBAA0BA,EAC1B3d,QAASA,MAGb,cAAC,GAAD,CAAUxJ,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACk6B,GAAD,CACElP,yBAA0BA,EAC1B3d,QAASA,MAGb,cAAC,GAAD,CAAUxJ,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACg7B,GAAD,MAEF,cAAC,GAAD,CAAUn3B,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC83B,GAAD,MAEF,cAAC,GAAD,CAAUj0B,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC+qB,GAAD,CACEC,yBAA0BA,EAC1B3d,QAASA,U,UClvBJ,SAASowB,KACtB,IAAQ/hB,EAAiBvH,qBAAWgK,IAA5BzC,aAER,OACE,8BACE,cAACzB,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAO,aAAW,eAAetJ,KAAK,QAAtC,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEygB,SAAU,KAA9B,8BACC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGjU,KAAI,SAACy1B,EAAQ19B,GAAT,OACtB,cAACqa,GAAA,EAAD,CAAW5e,MAAO,CAAEygB,SAAU,KAA9B,SACGwhB,GADuC19B,WAMhD,cAACsa,GAAA,EAAD,UACG,CAAC,WAAY,mBAAmBrS,KAAI,SAAC4iB,EAAM7qB,GAAP,OACnC,eAACoa,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEwb,OAAQ,GAA5B,SACE,4BAAI4T,MAELnP,EAAazT,KAAI,SAACkH,EAAMnP,GAAP,OAChB,cAAC,GAAD,CAEEmP,KAAMA,EACNnP,MAAOA,EACP6qB,KAAMA,GAHD7qB,QANIA,eAqB7B,IAAM29B,GAAgB,SAAC,GAA2B,IAAzBxuB,EAAwB,EAAxBA,KAAM0b,EAAkB,EAAlBA,KAAM7qB,EAAY,EAAZA,MACnC,EAA0DmU,qBAAWgK,IAA7DzC,EAAR,EAAQA,aAAcyD,EAAtB,EAAsBA,cACdte,EADR,EAAqCyf,iBAC7Bzf,QAER,EAAqCH,mBAASyO,EAAK7Q,aAAnD,mBAAOA,EAAP,KAAoBs/B,EAApB,KAGIC,EAAiB,eAAQniB,EAAa1b,IAEtChC,EAEFmhB,EAAcd,MAAQxd,EAAQjD,iBAAiBE,SAC7CC,EAEF8C,EAAQpD,iBAAiBE,oBAAsBkD,EAAQjD,iBAAiBE,SAEtE4f,MAAM3f,KAA+BA,EAA+B,GACpE2f,MAAM1f,KAA+BA,EAA+B,GAExE,IAAM8/B,EAAiBnmB,uBAAY,WACjC,GAAIkmB,EAAkBx/B,gBAAkB8Q,EAAK9Q,cAAe,CAC1Dw/B,EAAkBv/B,YAAcN,EAChC4/B,EAAc5/B,GAEd,IACIW,GADgBwQ,EAAKxQ,SAAWwQ,EAAKxQ,SAAW,GACrB,IAEzBJ,EAAemJ,YAAY3J,EAA+BY,EAAWZ,GAA8B4J,QAAQ,IAIjH,GAHAk2B,EAAkBt/B,aAAemJ,WAC/BnJ,EAAaoJ,QAAQ,IAEnB9G,EAAQ9D,YAAc8D,EAAQ7D,YAAa,CAC7C,IAAMsB,EACJN,EACAA,EAA+BW,EAEjCk/B,EAAkBv/B,YAAcoJ,WAC9BpJ,EAAYqJ,QAAQ,IAEtBi2B,EAAcl2B,WAAWpJ,EAAYqJ,QAAQ,UAE7Ck2B,EAAkBv/B,YAAcoJ,WAC9BnJ,EAAaoJ,QAAQ,IAEvBi2B,EAAcl2B,WAAWnJ,EAAaoJ,QAAQ,KAEhD+T,EAAaN,OAAOpb,EAAO,EAAG69B,MAE/B,CAAC1e,EAAcd,MAAOc,EAAcrhB,WAUvC,OARA2W,qBAAU,YACkB,IAAvBtF,EAAK9Q,eAEC8Q,EAAK9Q,cAAgB,GAAKC,IADjCw/B,MAID,CAACA,IAEIjT,GACN,IAAK,WACH,OAAO,eAACxQ,GAAA,EAAD,CAAW5e,MAAO,CAAEwb,OAAQ,GAA5B,UAAkC9H,EAAKxQ,SAAvC,OACT,IAAK,kBACH,OAAO,eAAC0b,GAAA,EAAD,CAAW5e,MAAO,CAAEwb,OAAQ,GAA5B,cAAmCvP,WAAWpJ,GAAaqJ,QAAQ,MAC5E,QACE,OAAO,O,UC7GE,SAASo2B,KACtB,MAA8D5pB,qBAC5DgK,IADMgB,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,iBAGvB,EAHA,EAAyCkB,iBAQpBzf,QAAQpD,iBAJ3BE,EADF,EACEA,oBACAD,EAFF,EAEEA,oBAIIohB,EANN,EAGE5hB,IAHF,EAIED,KA6DF,OACE,cAAC,WAAD,UACE,eAAC1B,EAAA,EAAD,CAAKC,QAAQ,OAAOa,MAAO,IAA3B,UACE,cAACsU,EAAA,EAAD,CACEE,QAAQ,WACRD,KAAK,QACLL,WAAS,EACTytB,UAAU,UACVrsB,SAAU,SAACvD,GAAD,OAtCI,SAACvK,GACrB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAUA,IAAIqc,EAAsBxY,WAAW7D,GAEjCoc,EAAa9G,KAAKC,MACnB8G,EAAsBf,EAAcN,SAAY,KAI/CA,EAAWM,EAAcN,SAAWqB,EACpCnB,EAAQF,EAAWC,EAEvBM,EAAiB,2BACZD,GADW,IAEdV,qBAAsB/W,WAAWuY,GACjCvB,iBAAkBhX,WAAWwY,EAAoBvY,QAAQ,IACzDsX,mBAAoBvX,WAAWmX,EAASlX,QAAQ,IAChDuX,gBAAiBxX,WAAWqX,EAAMpX,QAAQ,YAxB1CyX,EAAiB,2BACZD,GADW,IAEdV,qBAAsB,GACtBC,iBAAkB,GAClBO,mBAAoBthB,EACpBuhB,gBAAiBxhB,KA+BEugC,CAAc7vB,EAAEC,OAAOxK,QACxCwM,UAAW8O,EAAc9W,SAAS1H,gBAClCkD,MAAOsb,EAAcT,iBACrB5N,WAAY,CACVotB,eAAgB,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,kBAGpB,cAAC1V,EAAA,EAAD,CAAKI,GAAI,IACT,cAACgV,EAAA,EAAD,CACEE,QAAQ,WACRD,KAAK,QACLL,WAAS,EACTytB,UAAU,UACVrsB,SAAU,SAACvD,GAAD,OA9EQ,SAACvK,GACzB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAUA,IAAIoc,EAAavY,WAAW7D,GACxBqc,EAAsB/G,KAAKC,MAC5B+F,EAAcN,SAAWoB,EAAc,KAEtCpB,EAAWM,EAAcN,SAAWqB,EACpCnB,EAAQF,EAAWC,EAEvBM,EAAiB,2BACZD,GADW,IAEdV,qBAAsB/W,WAAWuY,GACjCvB,iBAAkBhX,WAAWwY,EAAoBvY,QAAQ,IACzDsX,mBAAoBvX,WAAWmX,EAASlX,QAAQ,IAChDuX,gBAAiBxX,WAAWqX,EAAMpX,QAAQ,YArB1CyX,EAAiB,2BACZD,GADW,IAEdV,qBAAsB,GACtBC,iBAAkB,GAClBO,mBAAoBthB,EACpBuhB,gBAAiBxhB,KAuEEygC,CAAkB/vB,EAAEC,OAAOxK,QAC5CwM,UAAW8O,EAAc9W,SAAS1H,gBAClCkD,MAAOsb,EAAcV,qBACrB3N,WAAY,CACVotB,eAAgB,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,uBChGrB,IAAMmtB,GAAa79B,0BAEb89B,GAAkB,SAAC,GAAkB,IAAhB59B,EAAe,EAAfA,SACjC,EAAgCC,mBAAS,CACxCgE,UAAW,CACVC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAEPm5B,gBAAgB,IAZjB,mBAAQC,EAAR,KAAiBC,EAAjB,KAcA,EAAkC99B,oBAAS,GAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAA4BlF,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA8BnF,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KAEA,EAAkDhC,oBAAS,GAA3D,mBAAO+9B,EAAP,KAA0BC,EAA1B,KAGA,OACC,cAACN,GAAWx6B,SAAZ,CACCC,MAAO,CACN06B,UACAC,aACA74B,WACAC,cACAzF,QACA0F,WACApD,SACAC,YACAg8B,uBACAD,qBAXF,SAcEh+B,KClCEtG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAER,SAAU,CACRL,MAAO,QAGXmhB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAERib,gBAAiB,CACfxb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZrK,MAAO,IACPC,OAAQ,IACR2a,OAAQ,sBAEVE,OAAQ,CACN9a,MAAO,IACPC,OAAQ,IACR,YAAa,CACXqK,SAAU,MAGdmJ,MAAO,CACL,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAKC,SAAS8iC,GAAT,GAAgD,IAAjB9T,EAAgB,EAAhBA,KAAM1C,EAAU,EAAVA,OAC5CxtB,EAAUR,KAChB,EAAuCga,qBAAWiqB,IAA1CG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WAAYr+B,EAA7B,EAA6BA,MAC7B,EAA8BO,mBAAS,IAAvC,mBAAO4W,EAAP,KAAgBC,EAAhB,KAGMG,EAASC,uBACb,SAACC,GACC,IAAI/I,EAAS,IAAIC,WACjBD,EAAOE,cAAc6I,EAAc,IACnC/I,EAAOG,OAAS,WACd,IAAI/O,EAAQ4O,EAAOI,OACnBsI,EAAWtX,IAEbu+B,EAAW,2BACND,GADK,IAERniC,OAAQwb,EAAc,QAG1B,CAAC2mB,EAASC,IAGZ,EAAwC3mB,aAAY,CAClDtG,OAAQ,wBACRuG,YAAY,EACZJ,WAHMK,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,cAMhB3C,EAAgB,SAACjH,GACrBowB,EAAW,2BACND,GADK,kBAEPnwB,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGxByR,EAAyB,SAAClH,GAC9BowB,EAAW,2BACND,GADK,IAER75B,UAAU,2BAAM65B,EAAQ75B,WAAf,kBAA2B0J,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAIjE,OACE,cAAC,WAAD,UACE,eAACiS,GAAA,EAAD,CAAMC,WAAS,EAACjb,UAAWH,EAAQmV,MAAnC,UACE,cAACgG,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGxa,MAAO,CAAED,QAAS,OAAQiL,eAAgB,SAAUC,WAAY,UAAlF,SACE,eAACnL,EAAA,EAAD,yBAAKT,UAAWH,EAAQqc,iBAAqBe,KAA7C,cACE,qCAAWC,MACVV,EACC,cAACW,GAAA,EAAD,CAAQpH,QAAQ,SAAS/V,UAAWH,EAAQwc,OAAQe,IAAG,UAAKZ,KAE5D,cAACW,GAAA,EAAD,CAAQpH,QAAQ,SAAS/V,UAAWH,EAAQwc,OAAQe,IAAG,UAAKqmB,EAAQniC,gBAI1E,eAAC0Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,sBAAKnb,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,oBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQK,eACzBtwB,KAAK,iBACLuC,QAAQ,WACRhN,MAAO06B,EAAQK,eAAiBL,EAAQK,eAAiB,GACzDzoB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,OAGJ,YAATwV,EAAqB,KACpB,eAACtvB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,mBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQM,cACzBvwB,KAAK,gBACLuC,QAAQ,WACRhN,MAAO06B,EAAQM,cAAgBN,EAAQM,cAAgB,GACvD1oB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,UAKlB,cAAC9Z,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAWpK,MAAM,OAApD,SACE,sBAAKvB,UAAWH,EAAQge,cAAxB,UAKY,YAATkS,EAAqB,KACpB,eAACtvB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,UAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRhN,MAAOgnB,EACPlZ,SAAU0D,EACVhF,UAAQ,OAId,eAAC9U,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,uBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQO,eACzBxwB,KAAK,iBACLuC,QAAQ,WACRhN,MAAO06B,EAAQO,eAAiBP,EAAQO,eAAiB,GACzD3oB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,EACVhF,SAAqB,cAAX8X,EACVzW,KAAK,cAGT,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,sBAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQQ,cACzBzwB,KAAK,gBACLuC,QAAQ,WACRhN,MAAO06B,EAAQQ,cAAgBR,EAAQQ,cAAgB,GACvD5oB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,EACVhF,SAAqB,cAAX8X,EACVzW,KAAK,cAGT,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,OACLuC,QAAQ,WACRhN,MAAO06B,EAAQ/5B,KAAO+5B,EAAQ/5B,KAAO,GACrCmN,SAAU0D,YAKxB,sBAAKva,UAAWH,EAAQge,cAAxB,UACQ,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,mBAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQS,SACzB1wB,KAAK,WACLuC,QAAQ,WACRhN,MAAO06B,EAAQS,SAAWT,EAAQS,SAAW,GAC7C7oB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,EACV3D,KAAK,cAGT,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRhN,MAAO06B,EAAQp6B,QAAUo6B,EAAQp6B,QAAU,GAC3CwN,SAAU0D,EACV3D,KAAK,cAGT,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,WAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQU,MACzB3wB,KAAK,QACLuC,QAAQ,WACRhN,MAAO06B,EAAQU,MAAQV,EAAQU,MAAQ,GACvC9oB,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU0D,aAKlB,eAACS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,UACE,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,UACE,oDAEF,cAAC6a,GAAA,EAAD,OAEF,sBAAK3b,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sCADF,WAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUC,MACnC2J,KAAK,QACLuC,QAAQ,WACRhN,MAAO06B,EAAQ75B,UAAUC,MAAQ45B,EAAQ75B,UAAUC,MAAQ,GAC3DwR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,sCADF,aAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUK,QACnCuJ,KAAK,UACLuC,QAAQ,WACRhN,MACE06B,EAAQ75B,UAAUK,QAAUw5B,EAAQ75B,UAAUK,QAAU,GAE1DoR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,cAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUE,OACnC0J,KAAK,SACLuC,QAAQ,WACRhN,MAAO06B,EAAQ75B,UAAUE,OAAS25B,EAAQ75B,UAAUE,OAAS,GAC7DuR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRhN,MAAO06B,EAAQ75B,UAAUG,OAAS05B,EAAQ75B,UAAUG,OAAS,GAC7D8M,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,QAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUI,cACnCwJ,KAAK,gBACLuC,QAAQ,WACRhN,MACE06B,EAAQ75B,UAAUI,cACdy5B,EAAQ75B,UAAUI,cAClB,GAENqR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,UAIhB,sBAAKxa,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,eAGA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUM,UACnCsJ,KAAK,YACLuC,QAAQ,WACRhN,MACE06B,EAAQ75B,UAAUM,UAAYu5B,EAAQ75B,UAAUM,UAAY,GAE9DmR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRhN,MACE06B,EAAQ75B,UAAUO,UAAYs5B,EAAQ75B,UAAUO,UAAY,GAE9D0M,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,YAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUQ,OACnCoJ,KAAK,SACLuC,QAAQ,WACRhN,MAAO06B,EAAQ75B,UAAUQ,OAASq5B,EAAQ75B,UAAUQ,OAAS,GAC7DiR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,OAGd,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,eAACT,EAAA,EAAD,WACE,sCADF,UAGA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLzQ,MAAOA,IAAUo+B,EAAQ75B,UAAUS,KACnCmJ,KAAK,OACLuC,QAAQ,WACRhN,MAAO06B,EAAQ75B,UAAUS,KAAOo5B,EAAQ75B,UAAUS,KAAO,GACzDgR,WAAYhW,EAAQ,kBAAoB,GACxCwR,SAAU2D,kBC5X1B,I,YAAMnb,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIK,SAASmjC,GAAT,GAAyC,IAATrU,EAAQ,EAARA,KACvClwB,EAAUR,KAChB,EAAgCga,qBAAWiqB,IAAnCG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WAEXnpB,EAAgB,SAACjH,GACrB,IAAME,EAAOF,EAAEC,OAAOC,KAQtBkwB,EAPa,qBAATlwB,GAAwC,mBAATA,EAOxB,2BACNiwB,GADK,kBAEPnwB,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,QARf,2BACN06B,GADK,kBAEPnwB,EAAEC,OAAOC,KAAOmO,SAASrO,EAAEC,OAAOxK,WAUzC,OACE,eAAC,WAAD,WACE,cAACtI,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,eAAC6E,GAAA,EAAD,CAAOC,SAAS,OAAhB,wDAC6C,oCAD7C,SAC6D,6CAD7D,0BAKF,sBAAK7b,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,kBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,MACLuC,QAAQ,WACRhN,MAAO06B,EAAQj6B,IAAMi6B,EAAQj6B,IAAM,GACnCqN,SAAU0D,OAGd,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRhN,MAAO06B,EAAQY,aAAeZ,EAAQY,aAAe,GACrDxtB,SAAU0D,UAIhB,sBAAKva,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,mBACLuC,QAAQ,WACRhN,MAAO06B,EAAQa,iBAAmBb,EAAQa,iBAAmB,GAC7DztB,SAAU0D,OAGd,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,mCACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,iBACLuC,QAAQ,WACRhN,MAAO06B,EAAQc,eAAiBd,EAAQc,eAAiB,GACzD1tB,SAAU0D,OAGd,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,oCACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRhN,MAAO06B,EAAQe,aAAef,EAAQe,aAAe,GACrD3tB,SAAU0D,UAIN,YAATwV,EACC,eAAC,WAAD,WACE,eAACtvB,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,eAACjW,EAAA,EAAD,8BACkB,sDAElB,cAAC6a,GAAA,EAAD,OAEF,sBAAK3b,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,QACLuC,QAAQ,WACRhN,MAAO06B,EAAQgB,MAAQhB,EAAQgB,MAAQ,GACvC5tB,SAAU0D,OAGd,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,qCACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLuC,QAAQ,WACRhN,MAAO06B,EAAQiB,cAAgBjB,EAAQiB,cAAgB,GACvD7tB,SAAU0D,aAKhB,QCxIH,IAAMoqB,GAAgB1lC,YAAH,4mBAmCb2lC,GAAmB3lC,YAAH,o9BAoDhB4lC,GAAqB5lC,YAAH,oL,IAOCA,YAAH,iI,8BCrE7B,SAASkrB,GAAS9R,GAChB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACE,6CACEgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALN,aAOGrhB,IAAU7D,GACT,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGwsB,UAAU,OAArB,SACG13B,OAaX,SAAS4kB,GAAUrlB,GACjB,MAAO,CACLwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI7C,I,kBAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAERy/B,QAAS,CACPn/B,MAAO,QAII,SAASujC,GAAT,GAOX,IANF/U,EAMC,EANDA,KACA1C,EAKC,EALDA,OACAva,EAIC,EAJDA,MACAP,EAGC,EAHDA,QAIM1S,GADL,EAFDklC,OAEC,EADDC,gBAEgB3lC,MAChB,EAQIga,qBAAWiqB,IAPbG,EADF,EACEA,QACAC,EAFF,EAEEA,WACA34B,EAHF,EAGEA,SAMF,GATA,EAIEpD,OAJF,EAKEC,UALF,EAME+7B,kBANF,EAOEC,qBAEsBh+B,oBAAS,IAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACA,EAA8BplB,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAGM6tB,GAFS/f,KAAKC,MAAMC,aAAaC,QAAQ,eAEzBgP,uBAAY,WAChC6mB,EAAW,CACT95B,UAAW,CACTC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAERm5B,gBAAgB,MAEjB,CAACE,KAMErjB,EAAc,WAClB5N,GAAQ,GACJK,GACF4wB,EAAW5wB,IAIT4a,EAAe,WACnBjb,GAAQ,GACRgb,KAIF,EAAuBta,YAAYwxB,IACnC,GADA,oBAC4BxxB,YAAY0xB,KAElClX,GAFN,oBAEc,uCAAG,sBAAAngB,EAAA,yDAEZi2B,EAAQO,gBACRP,EAAQQ,eACRR,EAAQK,gBACRL,EAAQS,UACRT,EAAQU,OACRV,EAAQ75B,UAAUC,OAClB45B,EAAQ75B,UAAUM,WAClBu5B,EAAQ75B,UAAUQ,QAClBq5B,EAAQ75B,UAAUS,KAVN,mBAYA,YAAT0lB,GAAuB0T,EAAQM,cAZtB,uBAaXh5B,GAAS,GAbE,iCAgBbA,GAAS,GAhBI,0BAmBfuD,QAAQC,IAAIk1B,GAnBG,2CAAH,sDAsGd,OACE,eAAC,WAAD,WACE,cAAC/jC,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC9B,cAAXytB,EACC9a,EACE,cAACyE,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAASiL,EAArC,SACE,cAAC/K,GAAA,EAAD,MAGF,eAACH,EAAA,EAAD,CACEvU,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLV,QAASiL,EAJX,UAME,cAAC/K,GAAA,EAAD,IANF,UAMiBya,KAInB,cAAC/Y,EAAA,EAAD,CAAY5B,QAASiL,EAArB,SACE,cAAC6J,GAAA,EAAD,MAGJ,eAAC1U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASqtB,EAAcjY,WAAS,EAACrU,SAAS,KAA9D,UACE,eAACsU,GAAA,EAAD,CAAa/U,MAAO,CAAE6mB,QAAS,GAA/B,UACE,cAACrc,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACuP,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACE,eAACjX,GAAA,EAAD,CACEriB,MAAOA,EACP8N,SAvJS,SAACK,EAAOmU,GAC3BL,EAASK,IAuJCtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPb,UASE,cAACC,GAAA,EAAD,aACExI,MAAM,2BACNjL,KACE,qBACEoF,IAAI,wEACJmgB,IAAI,eACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,iBACNjL,KACE,qBACEoF,IAAI,wEACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,aAKtB,eAAC5U,GAAA,EAAD,WACE,cAAC,GAAD,CAAU5M,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC2+B,GAAD,CAAqB9T,KAAMA,EAAM1C,OAAQA,MAE3C,cAAC,GAAD,CAAUtkB,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACk/B,GAAD,CAAsBrU,KAAMA,EAAM1C,OAAQA,SAG9C,eAAChW,GAAA,EAAD,CAAe1W,MAAO,CAACgL,eAAgB,UAAvC,UACE,cAACwJ,EAAA,EAAD,CACEvU,MAAM,UACNwU,QAASsY,EACT5X,KAAK,QACLT,UAAW,cAAC,KAAD,IAJb,oBAQA,cAACF,EAAA,EAAD,CACEvU,MAAM,UACNwU,QAASuY,EACT7X,KAAK,QACLT,UAAW,cAAC,KAAD,IAJb,8BC1TH,IAAM4vB,GAAehmC,YAAH,8SAkBZimC,GAAsBjmC,YAAH,8TAkBnBkmC,GAA6BlmC,YAAH,8pHA+K1BmmC,GAAyBnmC,YAAH,gqKA+NtBomC,GAAoCpmC,YAAH,89IAwNjCqmC,GAAyBrmC,YAAH,+I,UCzoBtBsmC,GAA8B,CACzCh4B,SAAU,GACVgW,MAAO,EACPvgB,SAAU,EACVwgB,gBAAiB,EACjBC,cAAe,GACfC,eAAgB,EAChBC,qBAAsB,EACtBC,iBAAkB,EAClBC,UAAW,EACXC,WAAY,EACZC,SAAU,EACVC,UAAW,EACXC,MAAO,EACPC,iBAAiB,EACjBC,mBAAoB,EACpBC,gBAAiB,GAGNohB,GAA4B,CACvCz3B,UAAW,GACTwW,UAAW,GACXC,WAAW,EACXC,eAAgBC,OAASC,OAAO,SAASC,SACzCrgB,QAAS,GACTsgB,gBAAgB,EAChBC,0BAA2BJ,OAASC,OAAO,SAASC,SACpDG,gBAAgB,EAChBC,wBAAyB,EACzBC,WAAY,GACZC,oBAAoB,EACpBzV,UAAW,CACT0V,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,GAExB6C,SAAU,EACVC,UAAW,EACXC,MAAO,GAGEwhB,GAA8B,CACzC,CACEliC,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,GAEf,CACEL,cAAe,EACfM,SAAU,EACVL,YAAa,EACbE,eAAgB,EAChBD,aAAc,EACdE,WAAY,EACZC,YAAa,IAIJ8hC,GAAiC,CAC5C3/B,QAASjE,IAEE6jC,GAAgC,GC3E9B,SAASC,GAAT,GAIZ,EAHDC,iBAGE,IAFFC,EAEC,EAFDA,aAGMtzB,GADL,EADDlS,OAEeoN,KAAKC,MAAMC,aAAaC,QAAQ,gBAC/C,EAKIwL,qBAAWgK,IAJbgC,EADF,EACEA,YACAC,EAFF,EAEEA,eACAhB,EAHF,EAGEA,iBACAoB,EAJF,EAIEA,gBAGF,EAkBIrM,qBAAW7T,IAjBbM,EADF,EACEA,kBACAE,EAFF,EAEEA,WACAsB,EAHF,EAGEA,cACAlB,EAJF,EAIEA,YACAY,EALF,EAKEA,YACAV,EANF,EAMEA,iBACAC,EAPF,EAOEA,gBACAC,EARF,EAQEA,kBACAN,EATF,EASEA,uBACAQ,EAVF,EAUEA,kBACAE,EAXF,EAWEA,iBACAE,EAZF,EAYEA,iBACAM,EAbF,EAaEA,aACAI,EAdF,EAcEA,aACAN,EAfF,EAeEA,sBACAY,EAhBF,EAgBEA,kBACAE,EAjBF,EAiBEA,4BAIF,EAA0C0R,aACxC2rB,GACA,CACEtwB,UAAW,CAAEtK,SAAU+H,EAAO/H,SAASoI,IAAKlI,QAAS6H,EAAO7H,QAAQkI,OAHhEzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAOxBwzB,EAA0B,SAAChW,EAAMhnB,GAChCA,EAIQ,cAATgnB,EACFzK,EAAe,2BACVD,GADS,IAEZd,UAAW,CACTyhB,aAAcj9B,EAAM8J,IACpBixB,eAAgB/6B,EAAM+6B,eACtBE,eAAgBj7B,EAAMi7B,eACtBC,cAAel7B,EAAMk7B,mBAIzB3f,EAAiBihB,IACjBrE,IACA5b,EAAe,2BACVD,GADS,IAEZ9gB,QAAS,CACPD,WAAYyE,EAAM8J,IAClByZ,eAAgBvjB,EAAMujB,mBAG1B9lB,EAAkB,2BACbD,GADY,IAEfjC,WAAYyE,EAAM8J,IAClBtO,QAASwE,EAAMujB,kBAEjBwZ,EAAa,CACX/wB,UAAW,CACTxQ,QAASwE,EAAM8J,IACflI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAhC9ByS,EAAe,2BAAKD,GAAN,kBAAoB0K,EAAO,OAsCvCmR,EAAqB,WACzBp7B,EAAkBrE,IAClBuE,EAAWlE,IACXoE,EAAuB/C,IACvBiD,EAAYjC,IACZmC,EAAiB,IACjBE,EAAkBnC,IAClBqC,EAAkB,IAClBE,EAAiBlC,IACjBoC,EAAiB,IACjBE,EAAY,IACZI,EAAa,CAAElC,MAAO,GAAIC,MAAO,KACjCmC,EAAc,CAAEjC,OAAO,EAAO9E,QAAS,KACvCiH,EAAa,IACbN,EAAsB,IACtBY,EAAkB,IAClBE,EAA4B,KAGxBi+B,EACJ,cAACjrB,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACiK,EAAA,EAAD,CACEC,KAAK,QACLL,WAAS,EACT1M,MAAM,QACN1D,OAAK,EACLkQ,UAAQ,EACRQ,QAAQ,aAEV,cAACiB,EAAA,EAAD,CAAYzB,UAAQ,EAApB,SACE,cAAC,KAAD,CAAc1J,SAAS,mBAMzBq6B,EACJ,cAAClrB,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACiK,EAAA,EAAD,CACEC,KAAK,QACLL,WAAS,EACTF,UAAQ,EACRxM,MAAM,cACNgN,QAAQ,aAEV,cAACiB,EAAA,EAAD,CAAYzB,UAAQ,EAApB,SACE,cAAChK,EAAA,EAAD,CAAkBuK,KAAM,YAMhC,GAAI1K,EACF,OACE,eAAC4P,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAG2K,WAAW,SAAvC,UACGs6B,EACAA,EACAA,KAGP,GAAI7gC,EACF,OACE,cAAC,WAAD,UACE,eAAC2V,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAG2K,WAAW,SAAvC,UACGq6B,EACAA,EACAA,OAMT,MAAmC5xB,EAAK8xB,8BAAhChW,EAAR,EAAQA,UAAWiW,EAAnB,EAAmBA,YAEnB,OACE,cAAC,WAAD,UACE,eAACprB,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAG2K,WAAW,SAAvC,UACE,cAACoP,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC8sB,GAAA,EAAD,CACEnjB,SAAUmQ,EAAgBvX,OAAS,EACnCuI,GAAG,sBACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASyN,EACTxN,eAAgB,SAACC,GAAD,OAAYA,EAAOiL,gBACnChL,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBtS,MAAM,YAAYlN,QAAQ,eAEnDc,SAAU,SAACoiB,EAAGlwB,GAAJ,OACRg9B,EAAwB,YAAah9B,IAEvCmwB,kBAAmB,SAACL,GAAD,OAAYA,EAAOiL,gBACtC/6B,MACEsc,EAAYd,UAAUuf,eAClBze,EAAYd,UACZ,OAGR,cAAC,GAAD,UACE,cAAC,GAAD,CACE8I,OAAO,YACP0C,KAAK,YACLxd,QAASA,WAKjB,cAACyI,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,eAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC8sB,GAAA,EAAD,CACEnjB,SAAUmQ,EAAgBvX,OAAS,EACnCuI,GAAG,oBACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASxI,EACTyI,eAAgB,SAACC,GAAD,OAAYA,EAAOvM,gBACnCwM,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBtS,MAAM,UAAUlN,QAAQ,eAEjDc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcg9B,EAAwB,UAAWh9B,IAC3DmwB,kBAAmB,SAACL,GAAD,OAAYA,EAAOvM,gBACtCvjB,MACEsc,EAAY9gB,QAAQ+nB,eAAiBjH,EAAY9gB,QAAU,OAG/D,cAAC,GAAD,UACE,cAAC,GAAD,CAAiB8oB,OAAO,YAAY9a,QAASA,WAInD,cAACyI,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAvB,SACE,cAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRa,KAAK,OACLC,SAAU,SAACvD,GACThF,QAAQC,IAAI+E,EAAEC,OAAOxK,OACrBuc,EAAe,2BACVD,GADS,IAEZZ,eAAgBnR,EAAEC,OAAOxK,UAG7BA,MAAOsc,EAAYZ,0BC3PlB,SAAS4hB,KACtB,IAAQhiB,EAAkBhL,qBAAWgK,IAA7BgB,cACAxc,EAAmBwR,qBAAW7T,IAA9BqC,eAER,GAAIA,EAAesG,OAAS,EAAG,CAC7B,IAAIm4B,EAAe,EACf5iB,EAAiB,EAUrB,OATA7b,EAAe+oB,SAAQ,SAAC2V,GACtB,IAAQvjC,EAA6BujC,EAA7BvjC,SAAUgmB,EAAmBud,EAAnBvd,eAGlBsd,GAAgBtjC,GAFJgmB,GAAkC,MAI5CpG,MAAM0jB,KAAe5iB,EAAiB,GAC1CA,EAAiB4iB,EAGf,eAACtrB,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,uBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAAKa,GAAc2X,EAAcF,mBAAqBT,WAG1D,eAAC1I,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,wBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAAKa,GAAc2X,EAAcL,UAAYN,WAGjD,eAAC1I,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,wBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,8BAAIwY,EAAcV,qBAAlB,YAGJ,eAAC3I,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,oBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAEGa,GACC2X,EAAcD,gBAAkBV,cAQ5C,OACE,eAAC1I,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,uBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAAKa,GAAc2X,EAAcF,mBAAqBE,EAAcrhB,kBAGxE,eAACgY,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,wBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAAKa,GAAc2X,EAAcL,UAAYK,EAAcrhB,kBAG/D,eAACgY,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,wBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,8BAAIwY,EAAcV,qBAAlB,YAGJ,eAAC3I,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,oBACA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,kCAEGa,GACC2X,EAAcD,gBAAkBC,EAAcrhB,qB,4BC1B/C,SAASwjC,GAAT,GAAoC,IAAXlmC,EAAU,EAAVA,OAChCkS,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAoBIwL,qBAAWgK,IAnBbgB,EADF,EACEA,cACAC,EAFF,EAEEA,iBACAoB,EAHF,EAGEA,gBACAC,EAJF,EAIEA,mBACAN,EALF,EAKEA,YACAG,EANF,EAMEA,iBACAC,EAPF,EAOEA,oBACAF,EARF,EAQEA,gBACAD,EATF,EASEA,eACAM,EAVF,EAUEA,UACAC,EAXF,EAWEA,aACAC,EAZF,EAYEA,WACAC,EAbF,EAaEA,cACAxC,EAdF,EAcEA,MACAyC,EAfF,EAeEA,SACAhjB,EAhBF,EAgBEA,SACAijB,EAjBF,EAiBEA,YACAG,EAlBF,EAkBEA,iBACAC,EAnBF,EAmBEA,oBAEF,EA8BIhN,qBAAW7T,IA7BbK,EADF,EACEA,gBACAC,EAFF,EAEEA,kBACAC,EAHF,EAGEA,QACAC,EAJF,EAIEA,WACAsB,EALF,EAKEA,cACAnB,EANF,EAMEA,SACAC,EAPF,EAOEA,YACAW,EARF,EAQEA,SACAC,EATF,EASEA,YACAX,EAVF,EAUEA,cACAC,EAXF,EAWEA,iBACAC,EAZF,EAYEA,gBACAC,EAbF,EAaEA,kBACAP,EAdF,EAcEA,oBACAC,EAfF,EAeEA,uBACAO,GAhBF,EAgBEA,iBACAC,GAjBF,EAiBEA,kBACAC,GAlBF,EAkBEA,cACAC,GAnBF,EAmBEA,iBACAE,GApBF,EAoBEA,iBACAM,GArBF,EAqBEA,aACAI,GAtBF,EAsBEA,aACAP,GAvBF,EAuBEA,oBACAC,GAxBF,EAwBEA,sBACAW,GAzBF,EAyBEA,eACAC,GA1BF,EA0BEA,kBACAC,GA3BF,EA2BEA,0BACAC,GA5BF,EA4BEA,4BACAa,GA7BF,EA6BEA,oBAEF,GAAoCjD,oBAAS,GAA7C,qBAAO8sB,GAAP,MAAmBC,GAAnB,MAEI8T,GAAQ,EACG,aAAXnmC,GAAyB+kB,IAAaohB,GAAQ,GAElD,OAAgC7gC,oBAAS,GAAzC,qBAAO8kB,GAAP,MAAiBgc,GAAjB,MAGA,GAA0DC,aACxD7a,GACA,CACE/W,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,KACpE+zB,YAAa,iBAJjB,qBAAOd,GAAP,eAAuB16B,GAAvB,GAAuBA,QAASiJ,GAAhC,GAAgCA,KAAMhP,GAAtC,GAAsCA,MAAOkN,GAA7C,GAA6CA,QAU7C,GAAgBgQ,uBAAYgB,EAAO,KAA5BsjB,GAAP,qBACA,GAAmBtkB,uBAAYvf,EAAU,KAAlC8jC,GAAP,qBA8BA,GA5BAntB,qBAAU,WAEN0M,IADEjb,MAKH,CAACA,KAEJuO,qBAAU,WACJtF,IAAM0yB,GAAaF,MACtB,CAACA,KAEJltB,qBAAU,WACJtF,IAAM2yB,GAAgBF,MACzB,CAACA,KAEJntB,qBAAU,WACM,IAAV8sB,IACFX,GAAa,CACX/wB,UAAW,CACTxQ,QAAS8gB,EAAY9gB,QAAQsO,IAC7BlI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,SAI/B,CAAC4zB,KAEAr7B,GACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,yBAIN,GAAI1Q,GACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,GAAOoG,OAAQ,MAG1C,IAAIw7B,GAAmB,GACnB5yB,KAAM4yB,GAAmB5yB,GAAK4yB,kBAElC,IAAMC,GAAyB,SAAC35B,GAE9B,IAAKA,EAKH,OAJA+W,EAAiBihB,IACjBvf,EAAS,GACTC,EAAY,QACZib,KAIF,MAKI3zB,EAASxH,QAAQpD,iBAJnBR,EADF,EACEA,KACAC,EAFF,EAEEA,IACAQ,EAHF,EAGEA,oBACAC,EAJF,EAIEA,oBAGImhB,EAAY5hB,EAAMD,EAExBmiB,EAAiB,2BACZD,GADW,IAEd9W,WACAa,YAAab,EAASsF,IACtB0Q,MAAO3gB,EACPI,SAAU,EACVygB,cAAelW,EAASxH,QAAQjD,iBAAiBC,OACjD4gB,qBAAsB,EACtBC,iBAAkB,EAClBG,SAAUlhB,EACVmhB,UAAWpX,WAAWoX,EAAUnX,QAAQ,IACxCoX,MAAOrhB,EACPuhB,mBAAoBthB,EACpBuhB,gBAAiBxhB,KAEnBq+B,GAAiB1zB,GACjByY,EAASpjB,GACTqjB,EAAY,GACZR,EAAoBlY,GACpBgY,EAAgBhY,EAASxH,QAAQoJ,mBAG7B63B,GAAkB,SAACj+B,GAQvBub,EAPKvb,EAOY,2BACZsb,GADW,IAEdrhB,SAAU4J,WAAW7D,KARJ,2BACZsb,GADW,IAEdrhB,SAAU,OAwBVmkC,GAAsB,SAAC7zB,GAC3B,MAAwBA,EAAEC,OAAlBxK,EAAR,EAAQA,MAAOyK,EAAf,EAAeA,KACf8Q,EAAiB,2BACZD,GADW,kBAEb7Q,EAAOzK,MAINg+B,GAAe,SAACh+B,GAEpB,GAAKA,EAAL,CAQA,MAAwCsb,EAAc9W,SAASxH,QAAvD3D,EAAR,EAAQA,IAAKD,EAAb,EAAaA,KAAMQ,EAAnB,EAAmBA,iBACbgB,EAAahB,EAAiBP,IAC9BwB,EAAcjB,EAAiBR,KAEjCqB,EAAcoJ,WAAW7D,GACzBgb,EAAW,EACXE,EAAQ,EACRmB,EAAsB,EAGtBviB,EAAsBW,GAFJG,EAAaC,GAG/BwjC,EACFx6B,WAAW/J,GACX+J,WAAWxK,EAAM,GAAK,KAAOA,EAAM,IAAMA,GAIvCilC,EAFFz6B,WAAW/J,GACX+J,WAAWzK,EAAO,GAAK,KAAOA,EAAO,IAAMA,GACXilC,EAElC,GAAI/iB,EAAcV,qBAAuB,EAcvC,OATAM,GADAF,EAAWlhB,GAHXuiB,EAAsB/G,KAAKC,MACxBzb,EAAsBwhB,EAAcV,qBAAwB,OAG5C0jB,OAEnB/iB,EAAiB,2BACZD,GADW,IAEdd,MAAO3W,WAAWpJ,GAClBogB,iBAAkBhX,WAAWwY,GAC7BjB,mBAAoBvX,WAAWmX,GAC/BK,gBAAiBxX,WAAWqX,MAIhCK,EAAiB,2BACZD,GADW,IAEdd,MAAO3W,WAAWpJ,GAClB2gB,mBAAoBvX,WAAW/J,GAC/BuhB,gBAAiBxX,WAAW/J,EAAsBwkC,WA9ClD/iB,EAAiB,2BACZD,GADW,IAEdd,MAAO,OAgDPkH,GAAa,uCAAG,WAAO6c,GAAP,4FAAA95B,EAAA,yDAChB+5B,EADgB,eACUljB,GAC1BmjB,EAFgB,eAEW3hC,GAC3B6iB,EAHgB,aAGU7gB,IAC1B4/B,EAJgB,eAII1hC,GACpB2hC,EALgB,aAKIvhC,GACpBwhC,EANgB,eAMWphC,GAC3BqhC,EAPgB,eAOSnhC,IACzBohC,EARgB,aAQoB9/B,IACpC+/B,EATgB,eASSnhC,IAG7B+/B,IAAY,GAETa,EAAmBh6B,SAAS1H,iBAC5Bwf,EAAYd,UAAUuf,gBACtBze,EAAY9gB,QAAQ+nB,eAhBH,wBAkBlBoa,IAAY,GAlBM,8BAsBsB,UAAtCc,EAAoBrc,cAtBJ,sBAuBdzC,EAAoBva,OAAS,GAvBf,oBAwBHua,EAAoB9X,QAC/B,SAAC6K,GAAD,OAASA,EAAI7a,MAAMiS,KAAO4I,EAAIiL,OAAO7T,KAAO4I,EAAIsN,cAEzC5a,SAAWua,EAAoBva,OA3BxB,wBA4BdwkB,IAAc,GACd+T,IAAY,GA7BE,0DAiChB/T,IAAc,GACd+T,IAAY,GAlCI,kCAyCc,KAF9BrF,EAvCgB,aAuCSh7B,IAEN8H,OACrBkzB,EAAmBthB,KAAK9Z,GAKM,IAHPo7B,EAAmBzwB,QACxC,SAACmN,GAAD,OAAmC,IAArBA,EAAS7Z,WAENiK,QACjBkzB,EAAmB/gB,OAAO,EAAG,EAAGra,GAKlCshC,EAAmBrjB,iBADjBojB,EAKJG,EAAat4B,iBAAmBu4B,EAzDZ,UA4DKpH,GACrBkH,EACA,mBA9DgB,gCAgETC,EAhES,KAiElB1gC,EAjEkB,KAkElBE,GAlEkB,KAmED0gC,EAnEC,KAoEAC,EApEA,UAqEOtH,GACvBe,EACA,qBAvEgB,yBAyEF3Y,EAzEE,KA0ESmf,EA1ET,KA2EHC,EA3EG,MA4ETt1B,EAAO7H,QAAQkI,IA5EN,MA6ERL,EAAO/H,SAASoI,IA7ER,MA8ETL,EAAOK,IAnBdtF,EA3DgB,CA4DlB1H,gBA5DkB,KAgElBE,QAhEkB,KAiElBgB,SAjEkB,KAkElBE,oBAlEkB,KAmElBV,gBAnEkB,KAoElBE,iBApEkB,KAqElBskB,kBArEkB,KAyElBljB,eAzEkB,KA0ElBE,0BA1EkB,KA2ElBw5B,cA3EkB,KA4ElB52B,QA5EkB,MA6ElBF,SA7EkB,MA8ElB+2B,QA9EkB,OAiFpB+F,EAAmBh6B,SAAWA,EAEoC,UAA9Dg6B,EAAmBh6B,SAAS1H,gBAAgBslB,cAE1Coc,EAAmBh6B,SAAS1F,eAAesG,OAAS,GACtDo5B,EAAmBvkC,SAAW,EAC9BukC,EAAmBh6B,SAAS1F,eAAe+oB,SAAQ,SAAC2V,GAClD,IAAQvjC,EAA6BujC,EAA7BvjC,SAAUgmB,EAAmBud,EAAnBvd,eACd+e,EAAQ/e,GAAkC,EAC9Cue,EAAmBvkC,UAAYA,EAAW+kC,KAExCnlB,MAAM2kB,EAAmBvkC,YAAWukC,EAAmBvkC,SAAW,GACtEukC,EAAmB7jB,eAAiB6jB,EAAmBvkC,WAEvDukC,EAAmBvkC,SAAW,EAC9BukC,EAAmB7jB,eAAiB6jB,EAAmBvkC,WAIjDwgB,EAA6C+jB,EAA7C/jB,gBAAiBxgB,EAA4BukC,EAA5BvkC,SAAUygB,EAAkB8jB,EAAlB9jB,cAE7BukB,EACJT,EAAmBh6B,SAASxH,QAAQjD,iBAAiBE,SAQnDilC,EAPkBjlC,EAAWglC,GAC7BE,EACgB,OAAlBzkB,GACkB,OAAlBA,GACkB,OAAlBA,EACID,EACAA,EAAkBwkB,GAIpBA,EAAS,GACXT,EAAmB/jB,gBAAkB0kB,EAAwBF,EAC7DT,EAAmB7jB,eAAiBukB,EAAuBD,IAE3DT,EAAmB/jB,gBAAkB0kB,EACrCX,EAAmB7jB,eAAiBukB,IAGxCV,EAAmBxjB,SAAWwjB,EAAmBpjB,mBACjDojB,EAAmBtjB,MAAQsjB,EAAmBnjB,gBAE1CwB,EAAUrY,UAER46B,EAFkB,aAEcziB,GAFd,EAOlB6hB,EAAmBh6B,SAASxH,QAAQpD,iBAFtCP,EALoB,EAKpBA,IACAD,EANoB,EAMpBA,KAGFolC,EAAmB1jB,UAAYzhB,EAAMmlC,EAAmB7jB,eACxD6jB,EAAmBzjB,WAAa3hB,EAAOolC,EAAmB7jB,eAC1D6jB,EAAmBxjB,SACjBwjB,EAAmBxjB,SAAWwjB,EAAmB7jB,eACnD6jB,EAAmBvjB,UACjBujB,EAAmBvjB,UAAYujB,EAAmB7jB,eACpD6jB,EAAmBtjB,MACjBsjB,EAAmBtjB,MAAQsjB,EAAmB7jB,eAE5CK,EACFsB,EAAYtB,SACZwjB,EAAmBxjB,SAAWwjB,EAAmB7jB,eACjDkC,EAAUrY,SAASwW,SACjBC,EACFqB,EAAYrB,UACZujB,EAAmBvjB,UAAYujB,EAAmB7jB,eAClDkC,EAAUrY,SAASyW,UACjBC,EACFoB,EAAYpB,MACZsjB,EAAmBtjB,MAAQsjB,EAAmB7jB,eAC9CkC,EAAUrY,SAAS0W,MAErBkkB,EAA0B7nB,OAAOsF,EAAU1gB,MAAO,EAAGqiC,GAErD5hB,EAAmBwiB,GACnB7iB,EAAe,2BACVD,GADS,IAEZtB,WACAC,YACAC,WAEF4B,EAAa,IACbE,GAAeD,GACfL,EAAoB,CAAE1f,QAASjE,KAC/BwiB,EAAiBihB,IACjBvf,EAAS,GACTC,EAAY,GACZygB,IAAY,KAIN0B,EAAY1iB,EACfvY,KAAI,SAACk7B,EAAYnjC,GAChB,OAAImjC,EAAWj6B,cAAgBm5B,EAAmBn5B,YACzC,CAAEi6B,aAAYnjC,SAEd,MAGV0L,OAAO03B,SAENF,EAAUj6B,OAAS,GACjBg6B,EADoB,aACYziB,GADZ,EAEM0iB,EAAU,GAAhCljC,EAFgB,EAEhBA,MAAOmjC,EAFS,EAETA,WAFS,GAMpBd,EAAmBh6B,SAASxH,QAAQpD,iBAFtCP,GAJsB,GAItBA,IACAD,GALsB,GAKtBA,KAGFolC,EAAmB1jB,UAAYzhB,GAAMmlC,EAAmB7jB,eACxD6jB,EAAmBzjB,WACjB3hB,GAAOolC,EAAmB7jB,eAC5B6jB,EAAmBxjB,SACjBwjB,EAAmBxjB,SAAWwjB,EAAmB7jB,eACnD6jB,EAAmBvjB,UACjBujB,EAAmBvjB,UAAYujB,EAAmB7jB,eACpD6jB,EAAmBtjB,MACjBsjB,EAAmBtjB,MAAQsjB,EAAmB7jB,eAEhDykB,EAA0B7nB,OAAOpb,EAAO,EAAGqiC,GAC3C5hB,EAAmBwiB,GACnB7iB,EAAe,2BACVD,GADS,IAEZtB,SACEsB,EAAYtB,SACZskB,EAAWtkB,SACXwjB,EAAmBxjB,SACrBC,UACEqB,EAAYrB,UACZqkB,EAAWrkB,UACXujB,EAAmBvjB,UACrBC,MACEoB,EAAYpB,MAAQokB,EAAWpkB,MAAQsjB,EAAmBtjB,WAG1DskB,GADC,aACoB7iB,GADpB,GAKD6hB,EAAmBh6B,SAASxH,QAAQpD,iBAFtCP,GAHG,GAGHA,IACAD,GAJG,GAIHA,KAGFolC,EAAmB1jB,UAAYzhB,GAAMmlC,EAAmB7jB,eACxD6jB,EAAmBzjB,WACjB3hB,GAAOolC,EAAmB7jB,eAC5B6jB,EAAmBxjB,SACjBwjB,EAAmBxjB,SAAWwjB,EAAmB7jB,eACnD6jB,EAAmBvjB,UACjBujB,EAAmBvjB,UAAYujB,EAAmB7jB,eACpD6jB,EAAmBtjB,MACjBsjB,EAAmBtjB,MAAQsjB,EAAmB7jB,eAEhD6kB,GAAejoB,OAAO,EAAG,EAAGinB,GAC5B5hB,EAAmB4iB,IACnBjjB,EAAe,2BACVD,GADS,IAEZtB,SAAUsB,EAAYtB,SAAWwjB,EAAmBxjB,SACpDC,UAAWqB,EAAYrB,UAAYujB,EAAmBvjB,UACtDC,MAAOoB,EAAYpB,MAAQsjB,EAAmBtjB,UAGlDwB,EAAoB,CAAE1f,QAASjE,KAC/BwiB,EAAiBihB,IACjBvf,EAAS,GACTC,EAAY,GACZygB,IAAY,IAxPM,4CAAH,sDA6PbzF,GAAmB,SAAC1zB,GACxB,MAA6CA,EAASxH,QAAzB8kB,GAA7B,EAAQ1b,iBAAR,oBACIsyB,EAAiBl0B,EAASwd,kBAAkBna,QAC9C,SAAC6K,GAAD,OAAUA,EAAIvX,WAEV4mB,EAAiBvd,EAASwd,kBAAkBna,QAChD,SAAC6K,GAAD,OAAyB,IAAhBA,EAAIvX,WAEf4B,EAAkByH,EAAS1H,iBAC3BG,EAAW6kB,GACXnkB,GACE6G,EAAS9G,iBACL8G,EAAS9G,iBACThC,IAENuC,EAAYuG,EAASxG,UACrBH,GAAiB2G,EAASg0B,eAC1Bj7B,EAAiBm7B,GACjBr7B,EAAYmH,EAASxH,QAAQoJ,kBAC7BjJ,EAAuB4kB,EAAe,IACtChjB,GACEyF,EAASm0B,iBAAmBn0B,EAASm0B,iBAAmB,IAGxDrc,EAAY9gB,QAAQD,YACiB,IAArCiJ,EAASm0B,iBAAiBvzB,QAE1B3H,EAAkB,2BACbD,GADY,IAEfjC,WAAY+gB,EAAY9gB,QAAQD,WAChCC,QAAS8gB,EAAY9gB,QAAQ+nB,kBAI7B/e,EAASo0B,mBAAmBxzB,OAAS,EACvCtF,IAAoB,GAEpBA,IAAoB,IAKlBq4B,GAAqB,WACzBp7B,EAAkBrE,IAClBuE,EAAWlE,IACXoE,EAAuB/C,IACvBiD,EAAYjC,IACZmC,EAAiB,IACjBE,EAAkBnC,IAClBqC,GAAkB,IAClBE,GAAiBlC,IACjBoC,GAAiB,IACjBE,EAAY,IACZI,GAAa,CAAElC,MAAO,GAAIC,MAAO,KACjCmC,EAAc,CAAEjC,OAAO,EAAO9E,QAAS,KACvCiH,GAAa,IACbN,GAAsB,IACtBY,GAAkB,IAClBE,GAA4B,KAG9B,OACE,eAAC,WAAD,WACE,cAAC49B,GAAD,CACEtlC,OAAQA,EACRulC,iBAAkBtzB,GAClBuzB,aAAcA,KAEhB,cAACrlC,EAAA,EAAD,CAAKsW,GAAI,IACT,eAACiE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAG2K,WAAW,SAAvC,UACE,eAACoP,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,kCACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACm3B,GAAA,EAAD,CACEhiB,GAAG,4BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASsO,GACTrO,eAAgB,SAACC,GAAD,OACdA,EAAOhzB,gBAAgBzC,cACnBy1B,EAAOhzB,gBAAgBzC,cACvB,OAEN01B,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEjCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,EAAQ9vB,GAAT,OAAmB8vB,EAAOhmB,MAAQ9J,EAAM8J,KAC3D9J,MACEsb,EAAc9W,SAAS1H,gBACnBwe,EAAc9W,SACd,KAENgI,UACG8P,EAAY9gB,QAAQD,aACpB+gB,EAAYd,UAAUyhB,oBAK/B,eAAChrB,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,uBACA,eAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOa,MAAO,IAAKqK,WAAW,SAA3C,UACE,cAAC8sB,GAAA,EAAD,CACEhiB,GAAG,4BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASsO,GACTrO,eAAgB,SAACC,GAAD,OACdA,EAAOhzB,gBAAgB2jB,kBAEzBsP,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEjCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,EAAQ9vB,GAAT,OAAmB8vB,EAAOhmB,MAAQ9J,EAAM8J,KAC3D9J,MACEsb,EAAc9W,SAAS1H,gBACnBwe,EAAc9W,SACd,KAENgI,UACG8P,EAAY9gB,QAAQD,aACpB+gB,EAAYd,UAAUyhB,eAGzB3gB,EAAY9gB,QAAQD,YACrB+gB,EAAYd,UAAUyhB,aAKrB,cAACpF,GAAD,CACEvT,QAAQ,EACRwT,iBAAkBtuB,GAClBuuB,YAAY,IAPd,cAAC9pB,EAAA,EAAD,CAAYzB,UAAQ,EAApB,SACE,cAAC,KAAD,YAWR,eAACyF,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,oBACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACm3B,GAAA,EAAD,CACEhiB,GAAG,2BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASsO,GACTrO,eAAgB,SAACC,GAAD,OAAYA,EAAOhzB,gBAAgBwI,eACnDyqB,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEjCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,EAAQ9vB,GAAT,OAAmB8vB,EAAOhmB,MAAQ9J,EAAM8J,KAC3D9J,MACEsb,EAAc9W,SAAS1H,gBACnBwe,EAAc9W,SACd,KAENgI,UACG8P,EAAY9gB,QAAQD,aACpB+gB,EAAYd,UAAUyhB,oBAK/B,eAAChrB,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,oBACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACsU,EAAA,EAAD,CACEqtB,UAAU,UACV1vB,KAAK,QACLuC,QAAQ,WACRD,KAAK,QACLL,WAAS,EACTF,UAAW8O,EAAc9W,SAAS1H,gBAClCkD,MAAOwa,EACP1M,SAAU,SAACvD,GAAD,OAAO0S,EAAS1S,EAAEC,OAAOxK,QACnCiN,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,uBAMTkO,EAAc9W,SAAS1H,iBACiC,UAAzDwe,EAAc9W,SAAS1H,gBAAgBslB,cACrC,eAAC,WAAD,WACE,eAACnQ,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,qBACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACsU,EAAA,EAAD,CACEE,QAAQ,WACRD,KAAK,QACLL,WAAS,EACT,gBAAc,OACd1M,MAAOsb,EAAc9W,SAASxH,QAAQjD,iBAAiBC,cAI7D,eAACiY,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,uBACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACsU,EAAA,EAAD,CACErC,KAAK,WACLuC,QAAQ,WACRD,KAAK,QACLL,WAAS,EACTytB,UAAU,UACV3tB,UAAW8O,EAAc9W,SAAS1H,gBAClCkD,MAAO/F,EACP6T,SAAU,SAACvD,GAAD,OAAO2S,EAAY3S,EAAEC,OAAOxK,eAI5C,eAACiS,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,2BACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAACsU,EAAA,EAAD,CACErC,KAAK,kBACLuC,QAAQ,WACRD,KAAK,QACLL,WAAS,EACTytB,UAAU,UACV3tB,UAAW8O,EAAc9W,SAAS1H,gBAClCkD,MAAOsb,EAAcb,gBACrB3M,SAAU,SAACvD,GAAD,OA3iBKvK,EA2iBwBuK,EAAEC,OAAOxK,WAniB9Dub,EAPKvb,EAOY,2BACZsb,GADW,IAEdb,gBAAiB5W,WAAW7D,KARX,2BACZsb,GADW,IAEdb,gBAAiB,MAJO,IAACza,UA+iBrB,eAACiS,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,6BACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACE,cAAC+Z,EAAA,EAAD,CACEvF,QAAQ,WACRD,KAAK,QACLtC,KAAK,gBACLiC,WAAS,EAJX,SAMG4O,EAAc9W,SAASxH,QAAQ1D,OAC9B,eAACkZ,GAAA,EAAD,CACE7E,GAAG,uBACHnB,UAAW8O,EAAc9W,SAAS1H,gBAClC2N,KAAK,gBACLzK,MAAOsb,EAAcZ,cACrB5M,SAAUswB,GALZ,UAOE,cAAC3rB,GAAA,EAAD,CAAUzS,MAAM,KAAhB,gBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,oBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,KAAhB,mBAGF,eAACwS,GAAA,EAAD,CACE7E,GAAG,uBACHnB,UAAW8O,EAAc9W,SAAS1H,gBAClC2N,KAAK,gBACLzK,MAAOsb,EAAcZ,cACrB5M,SAAUswB,GALZ,UAOE,cAAC3rB,GAAA,EAAD,CAAUzS,MAAM,OAAhB,kBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,KAAhB,6BAOV,KAEJ,eAACiS,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,cAACpa,EAAA,EAAD,wBACA,cAACmiC,GAAD,UAGJ,cAACxiC,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,eAACkE,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAID,GAAI,EAAGqM,QAAQ,WAAlC,SACE,cAACmb,GAAD,MAEF,eAAC3nB,GAAA,EAAD,CACEE,MAAI,EACJE,GAAI,GACJD,GAAI,EACJxa,MAAO,CACLD,QAAS,OACTkL,WAAY,SACZD,eAAgB,SAChBD,cAAe,UARnB,UAWE,cAACjL,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAACurB,GAAD,MAEF,eAAC5lC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACG2jB,EAAc9W,SAAS1H,iBAEtB,UADFwe,EAAc9W,SAAS1H,gBAAgBslB,cAErC,cAAC,GAAD,CACEuH,WAAYA,GACZC,cAAeA,KAEf,KAEJ,cAAClyB,EAAA,EAAD,CAAKyiB,GAAI,IACRmB,EAAcd,QACfiC,EAAiBzf,QAAQpD,iBAAiBC,oBACxC,cAAC,GAAD,CACE6nB,cAAeA,GACfC,SAAUA,KAGZ,cAACvV,EAAA,EAAD,CACExU,MACEylB,EACI,CACEiL,cAAe,OACfC,QAAS,IAEX,KAENvb,QAAQ,YACRnV,MAAM,UACNyU,UACEqV,GACE,cAACnf,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAExC,cAAC,KAAD,IAGJS,kBAAgB,EAChBhB,UACE8O,EAAc9W,SAAS1H,kBAEnB,UADAwe,EAAc9W,SAAS1H,gBAAgBslB,gBAEpC9F,EAAYd,UAAUuf,gBACtBze,EAAY9gB,QAAQ+nB,gBACpBjI,EAAcd,OACdc,EAAcrhB,YAGdqiB,EAAYd,UAAUuf,gBACtBze,EAAY9gB,QAAQ+nB,gBACpBjI,EAAcd,QAKvBnO,QAAS,kBAAMqV,MApCjB,SAsCG7E,EAAUrY,SAAW,cAAgB,mCAWxD,IAAM4K,GAAaC,sBAAW,SAAoBC,EAAOC,GACvD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvCmwB,GAAqB,SAAC,GAAiC,IAA/B/d,EAA8B,EAA9BA,cAAeC,EAAe,EAAfA,SAC3C,EAAwB9kB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAKI4G,qBAAWgK,IAJbgB,EADF,EACEA,cACAgB,EAFF,EAEEA,YACAO,EAHF,EAGEA,UACAQ,EAJF,EAIEA,iBAOIlT,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CACExU,MACEylB,EACI,CACEiL,cAAe,OACfC,QAAS,IAEX,KAENvb,QAAQ,YACRnV,MAAM,UACNyU,UAAW,cAAC,KAAD,IACXkB,kBAAgB,EAChBhB,UACE8O,EAAc9W,SAAS1H,kBACsC,UAAzDwe,EAAc9W,SAAS1H,gBAAgBslB,gBACpC9F,EAAYd,UAAUuf,gBACtBze,EAAY9gB,QAAQ+nB,gBACpBjI,EAAcd,OACdc,EAAcrhB,YAGdqiB,EAAYd,UAAUuf,gBACtBze,EAAY9gB,QAAQ+nB,gBACpBjI,EAAcd,QAKvBnO,QAAS,WAtCb3C,GAAQ,IASN,SA+BGmT,EAAUrY,SAAW,cAAgB,qBAExC,eAACiI,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,kBAAM6S,KACf,kBAAgB,uBALlB,UAOE,cAACwC,GAAA,EAAD,CAAagB,GAAG,uBAAuB/V,MAAO,CAAE6mB,QAAS,GAAzD,SACE,eAAC5L,GAAA,EAAD,CACEC,SAAS,OACT7D,KAAM,cAACywB,GAAA,EAAD,CAAc9nC,MAAO,CAAEkL,SAAU,MACvClL,MAAO,CAAE6mB,QAAS,IAHpB,UAKE,cAACzL,GAAA,EAAD,CAAYpb,MAAO,CAAEkL,SAAU,IAA/B,8DAGA,cAAC/K,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,kEAKJ,eAACwL,GAAA,EAAD,CAAe1W,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAAzD,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMlC,KAAetS,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CACEC,QAAS,WACPqV,IACAvX,KAEFtS,MAAM,UALR,sBASA,cAAC,GAAD,CACE8pB,SAAUA,EACVxX,YAAaA,EACbuX,cAAeA,c,uDC9+Bdie,GAAiB,SAACrb,EAAOsb,EAAWp7B,GAC/C,IACEzH,EAkBE6iC,EAlBF7iC,kBACAE,EAiBE2iC,EAjBF3iC,WACAsB,EAgBEqhC,EAhBFrhC,cACAlB,EAeEuiC,EAfFviC,YACAY,EAcE2hC,EAdF3hC,YACAV,EAaEqiC,EAbFriC,iBACAC,EAYEoiC,EAZFpiC,gBACAC,EAWEmiC,EAXFniC,kBACAN,EAUEyiC,EAVFziC,uBACAQ,EASEiiC,EATFjiC,kBACAE,EAQE+hC,EARF/hC,iBACAE,EAOE6hC,EAPF7hC,iBACAM,EAMEuhC,EANFvhC,aACAI,EAKEmhC,EALFnhC,aACAN,EAIEyhC,EAJFzhC,sBACAY,EAGE6gC,EAHF7gC,kBACAE,EAEE2gC,EAFF3gC,4BACAqd,EACEsjB,EADFtjB,YAGF,GAAe,QAAXgI,EAAkB,CACpB,MAA6C9f,EAASxH,QAAzB8kB,GAA7B,EAAQ1b,iBAAR,oBACM2b,EAAiBvd,EAASwd,kBAAkBna,QAChD,SAAC6K,GAAD,OAASA,EAAIvX,WAGf4B,EAAkByH,EAAS1H,iBAC3BG,EAAW6kB,GACXnkB,EACE6G,EAAS9G,iBACL8G,EAAS9G,iBACThC,IAENuC,EAAYuG,EAASxG,UACrBH,EAAiB2G,EAASg0B,eAC1Bj7B,EAAiBiH,EAASwd,mBAC1B3kB,EAAYmH,EAASxH,QAAQoJ,kBAC7BjJ,EAAuB4kB,EAAe,IACtChjB,EACEyF,EAAS1F,eAAiB0F,EAAS1F,eAAiB,IAGlDwd,EAAY9gB,QAAQD,YAAiD,IAAnCiJ,EAAS1F,eAAesG,QAC5D3H,EAAkB,2BACbD,GADY,IAEfjC,WAAY+gB,EAAY9gB,QAAQD,WAChCC,QAAS8gB,EAAY9gB,QAAQ+nB,uBAIjCxmB,EAAkBrE,IAClBuE,EAAWlE,IACXoE,EAAuB/C,IACvBiD,EAAYjC,IACZmC,EAAiB,IACjBE,EAAkBnC,IAClBqC,EAAkB,IAClBE,EAAiBlC,IACjBoC,EAAiB,IACjBE,EAAY,IACZI,EAAa,CAAElC,MAAO,GAAIC,MAAO,KACjCmC,EAAc,CAAEjC,OAAO,EAAO9E,QAAS,KACvCiH,EAAa,IACbN,EAAsB,IACtBY,EAAkB,IAClBE,EAA4B,KChD1B3I,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASonC,KACtB,IAAM/oC,EAAUR,KAChB,EAA2Dga,qBACzDgK,IADMqC,EAAR,EAAQA,gBAAiBU,EAAzB,EAAyBA,iBAAkBf,EAA3C,EAA2CA,YAIrCwjB,EAAoB,aAAOnjB,GAEjC,OACE,eAACyC,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,WAAxC,UACE,cAACoJ,GAAA,EAAD,CACEnf,UAAWH,EAAQob,UACnBta,MACEylB,EACI,CACEiL,cAAe,OACfC,QAAS,IAEX,KARR,SAWE,eAAClS,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAzB,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,kCACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,sBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,6BACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,4BACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,4BACA,cAACjI,GAAA,EAAD,kBACA,cAACA,GAAA,EAAD,mBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,yBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,2BAGJ,cAACC,GAAA,EAAD,UACGqpB,EAAqB17B,KAAI,SAACI,EAAUrI,GACnC,OACE,cAAC,GAAD,CAEEqI,SAAUA,EACVrI,MAAOA,GAFFA,aASf,eAAC8V,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,uBACY,kCAAMwZ,EAAYtB,SAAWrX,GAAc2Y,EAAYtB,UAAY,UAGjF,cAAC/I,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,wBACa,kCAAKwZ,EAAYrB,UAAYtX,GAAc2Y,EAAYrB,WAAa,UAGnF,cAAChJ,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACpa,EAAA,EAAD,CAAYH,MAAO,CAAEkL,SAAU,IAA/B,SACE,yCAAYwZ,EAAYpB,MAAQvX,GAAc2Y,EAAYpB,OAAS,eAQjF,IAAM6kB,GAAwB,SAAC,GAAyB,IAAvBv7B,EAAsB,EAAtBA,SAAUrI,EAAY,EAAZA,MACzC,EAWImU,qBAAWgK,IAVbgC,EADF,EACEA,YACAf,EAFF,EAEEA,iBACAmB,EAHF,EAGEA,oBACAF,EAJF,EAIEA,gBACAK,EALF,EAKEA,UACAC,EANF,EAMEA,aACAC,EAPF,EAOEA,WACAE,EARF,EAQEA,SACAC,EATF,EASEA,YACAE,EAVF,EAUEA,SAEF,EAAoCvgB,oBAAS,GAA7C,mBAAOmjC,EAAP,KAAmBC,EAAnB,KACMC,EAAc5vB,qBAAW7T,IAEzB0jC,EAAW,CACfpjC,kBAAmBmjC,EAAYnjC,kBAC/BE,WAAYijC,EAAYjjC,WACxBsB,cAAe2hC,EAAY3hC,cAC3BlB,YAAa6iC,EAAY7iC,YACzBY,YAAaiiC,EAAYjiC,YACzBV,iBAAkB2iC,EAAY3iC,iBAC9BC,gBAAiB0iC,EAAY1iC,gBAC7BC,kBAAmByiC,EAAYziC,kBAC/BN,uBAAwB+iC,EAAY/iC,uBACpCQ,kBAAmBuiC,EAAYviC,kBAC/BE,iBAAkBqiC,EAAYriC,iBAC9BE,iBAAkBmiC,EAAYniC,iBAC9BM,aAAc6hC,EAAY7hC,aAC1BI,aAAcyhC,EAAYzhC,aAC1BN,sBAAuB+hC,EAAY/hC,sBACnCY,kBAAmBmhC,EAAYnhC,kBAC/BE,4BAA6BihC,EAAYjhC,4BACzCqd,eAuBF1L,qBAAU,WACRqvB,GAAc,KACb,CAACljB,IAEJnM,qBAAU,WACHpM,EAASvK,UAEZmjB,GAAS,KAEV,CAAC5Y,EAASvK,WAEb,IAAMmmC,EAAkB57B,EAASA,SAASxH,QAAQjD,iBAAiBC,OAC3DC,EAA8CuK,EAA9CvK,SAAUwgB,EAAoCjW,EAApCiW,gBAAiBE,EAAmBnW,EAAnBmW,eAEnC,OACE,eAACpE,GAAA,EAAD,CACE4J,OAAK,EACLmB,KAAK,WACL+e,UAAW,EACXjgB,SAAU4f,IAAe/lC,EACzBrC,MACEilB,EAAUrY,WAAaw7B,EACnB,CACE1X,cAAe,OACfC,QAAS,IAEX,KAXR,UAcE,cAAC/R,GAAA,EAAD,UACGhS,EAASA,SAAS1H,iBACf0H,EAASA,SAAS1H,gBAAgBzC,cAChCmK,EAASA,SAAS1H,gBAAgBzC,cAEpC,MAEN,cAACmc,GAAA,EAAD,UACGhS,EAASA,SAAS1H,gBAAgB2jB,mBAErC,cAACjK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACIyB,EAGA,mCAAM0J,GAAca,EAAS0W,UAF7B,cAAC,KAAD,CAAOrjB,MAAM,YAKjB,eAAC2e,GAAA,EAAD,WACGvc,EACD,kCAAKmmC,EAAL,UAEF,eAAC5pB,GAAA,EAAD,WACGiE,EACD,kCAAK2lB,EAAL,UAEF,eAAC5pB,GAAA,EAAD,WACGmE,EACD,kCAAKylB,EAAL,UAEF,cAAC5pB,GAAA,EAAD,UACGhS,EAASA,SAAS1F,eAAesG,OAAS,EACvCZ,EAASA,SAAS1F,eAAesG,OACjC,QAEN,eAACoR,GAAA,EAAD,WAAYhS,EAASA,SAASxH,QAAQ3D,IAAtC,OACA,eAACmd,GAAA,EAAD,WAAYhS,EAASA,SAASxH,QAAQ5D,KAAtC,OACA,eAACod,GAAA,EAAD,eAAahS,EAASsW,aACtB,eAACtE,GAAA,EAAD,eAAahS,EAASuW,cACtB,cAACvE,GAAA,EAAD,UACGwpB,EACC,cAAC/xB,EAAA,EAAD,CACEpW,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAhFjB4zB,GAAc,GACdnjB,EAAa,IACbvB,EAAiBihB,IACjBmD,GAAe,QAASQ,GACxBljB,EAAS,QACTC,EAAY,IAwEN,SAKE,cAAC,KAAD,MAGF,cAACjP,EAAA,EAAD,CAAYpW,MAAM,UAAUkV,KAAK,QAAQV,QAAS,kBAhGxD4zB,GAAc,GACdnjB,EAAa,CAAEtY,WAAUrI,QAAOmkC,QAAQ,IACxC/kB,EAAiB/W,GACjBm7B,GAAe,MAAOQ,EAAU37B,EAASA,UACzCkY,EAAoBlY,EAASA,UAC7BgY,EAAgBhY,EAASA,SAASxH,QAAQoJ,kBAC1C6W,EAASzY,EAASgW,YAClB0C,EAAY1Y,EAASvK,WAyFf,SACE,cAACknB,GAAA,EAAD,QAIN,cAAC3K,GAAA,EAAD,UACE,cAAC,GAAD,CAAqBra,MAAOA,EAAO6jC,WAAYA,UAMjD5wB,GAAaC,sBAAW,SAAoBC,EAAOC,GACvD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvCixB,GAAsB,SAAC,GAA2B,IAAzBpkC,EAAwB,EAAxBA,MAAO6jC,EAAiB,EAAjBA,WACpC,EAKI1vB,qBAAWgK,IAJbqC,EADF,EACEA,gBACAC,EAFF,EAEEA,mBACAN,EAHF,EAGEA,YACAC,EAJF,EAIEA,eAEF,EAAwB1f,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAMMS,EAAc,WAClBT,GAAQ,IAiBV,OACE,eAAC,WAAD,WACE,cAACuE,EAAA,EAAD,CACEpW,MAAM,YACNkV,KAAK,QACLV,QA3BkB,WACtB3C,GAAQ,IA2BJ8C,SAAUwzB,EAJZ,SAME,cAAC,KAAD,MAEF,eAACvzB,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS6S,EACT,kBAAgB,wBALlB,UAOE,cAACwC,GAAA,EAAD,CAAagB,GAAG,wBAAhB,0DAIA,eAACW,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAvCO,WACrB,IAAIm0B,EAAY,aAAO7jB,GACnB8jB,EAAmBD,EAAajpB,OAAOpb,EAAO,GAElDogB,EAAe,2BACVD,GADS,IAEZtB,SAAUsB,EAAYtB,SAAWylB,EAAiB,GAAGzlB,SACrDC,UAAWqB,EAAYrB,UAAYwlB,EAAiB,GAAGxlB,UACvDC,MAAOoB,EAAYpB,MAAQulB,EAAiB,GAAGvlB,SAEjD0B,EAAmB,aAAI4jB,IACvBr2B,KA4BuCtS,MAAM,YAAvC,+B,UCrSJuX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASoxB,GAAT,GAAgD,IAArBC,EAAoB,EAApBA,iBACxC,EAAwB9jC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAyC7M,oBAAS,GAAlD,mBAAO+jC,EAAP,KAAsBC,EAAtB,KACA,EAOIvwB,qBAAWgK,IANbqC,EADF,EACEA,gBACAL,EAFF,EAEEA,YACAC,EAHF,EAGEA,eACAY,EAJF,EAIEA,MACAI,EALF,EAKEA,gBACAC,EANF,EAMEA,mBAGIrT,EAAc,kBAAMT,GAAQ,IAsFlC,OACE,gCACE,cAAC0C,EAAA,EAAD,CACE8G,WAAS,EACTrb,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLV,QAAS,kBA9Fe3C,GAAQ,IA+FhC8C,UAAWmQ,EAAgBvX,QAAU+X,EACrC7Q,UAAW,cAACiC,GAAA,EAAD,IAPb,6BAWA,eAAC9B,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS6S,EACT,kBAAgB,6BAChB,mBAAiB,yCACjBuC,WAAS,EACTrU,SAAS,KARX,UAUE,eAACuU,GAAA,EAAD,WACE,eAAClV,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,oDACC,IAAM4kB,EAAgBvX,UAEzB,eAACrN,EAAA,EAAD,WACE,0CACC,KACC4L,GACG4Z,EAAgBvC,SAEbuC,EAAgBvC,SADhBsB,EAAYtB,aAItB,eAACjjB,EAAA,EAAD,WACE,2CACC,KAAO4L,GAAc2Y,EAAYrB,cAEpC,eAACljB,EAAA,EAAD,WACE,uCACC,KACC4L,GACG4Z,EAAgBrC,MAEbqC,EAAgBrC,MADhBoB,EAAYpB,aAMxB,eAACxjB,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,eAACuE,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,aAJP,UAME,cAACq2B,EAAA,EAAD,CAAYnzB,GAAG,aAAf,2BACA,cAAC6E,GAAA,EAAD,CACEwS,QAAQ,aACRhlB,MAAOsc,EAAYJ,WACnBzR,KAAK,aACLqD,SAAU,SAACvD,GAAD,OArJE2R,EAqJsB3R,EAAEC,OAAOxK,WApJvDuc,EAAe,2BACVD,GADS,IAEZJ,gBAHqB,IAACA,GAsJZhC,MAAM,gBALR,SAOGzR,GAAUrE,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,WAMb,cAAC6d,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS2G,EAAgBpB,mBACzBrO,SAAU,SAACvD,GAAD,OA7JA4R,EA6JwB5R,EAAEC,OAAOoM,aAhJzD4G,EAZKrB,EAYc,2BACdoB,GADa,IAEhBpB,uBAbmB,2BACdoB,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBiB,qBACAC,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KATH,IAACgE,GA8JV1R,KAAK,uBAGTyP,MAAM,sBAER,eAACjI,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACtF,EAAA,EAAD,CACEE,QAAQ,WACRD,KAAK,QACLL,WAAS,EACToB,SAAU,SAACvD,GAAD,OA1HJ,SAACvK,GACrB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAYA,IAAIqc,EAAsBxY,WAAW7D,GACjCoc,EAAa9G,KAAKC,MACnB8G,EAAsBC,EAAYtB,SAAY,KAG7C7C,EAAuBmE,EAAYtB,SAAWqB,EAElDmB,EAAmB,2BACdD,GADa,IAEhBvC,SAAUnX,WAAYsU,EAAsBrU,QAAQ,IACpDoX,MAAOrX,YAAYsU,EAAuBmE,EAAYrB,WAAWnX,QAAQ,IACzEsY,aACAC,sBACAlE,qBAAsBtU,WAAYsU,EAAsBrU,QAAQ,YAxBhE0Z,EAAmB,2BACdD,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBkB,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KAkHKiiB,CAAc7vB,EAAEC,OAAOxK,QACxCwM,UAAW+Q,EAAgBpB,mBAC3Bnc,MAAOud,EAAgBlB,oBACvBpP,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,oBAKR,cAAC6E,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACtF,EAAA,EAAD,CACEE,QAAQ,WACRa,KAAK,SACLd,KAAK,QACLL,WAAS,EACToB,SAAU,SAACvD,GAAD,OAtKA,SAACvK,GACzB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAWA,IAAIoc,EAAavY,WAAW7D,GACxBqc,EAAsB/G,KAAKC,MAC5B+G,EAAYtB,SAAWoB,EAAc,KAEpCjE,EAAuBmE,EAAYtB,SAAWqB,EAElDmB,EAAmB,2BACdD,GADa,IAEhBvC,SAAUnX,WAAYsU,EAAsBrU,QAAQ,IACpDoX,MAAOrX,YAAYsU,EAAuBmE,EAAYrB,WAAWnX,QAAQ,IACzEsY,aACAC,sBACAlE,qBAAsBtU,WAAYsU,EAAsBrU,QAAQ,YAtBhE0Z,EAAmB,2BACdD,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBkB,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KA8JKmiB,CAAkB/vB,EAAEC,OAAOxK,QAC5CwM,UAAW+Q,EAAgBpB,mBAC3Bnc,MAAOud,EAAgBnB,WACvBnP,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,6BAQd,eAACkB,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEC,QAASlC,EACTtS,MAAM,UACN2U,SAAUo0B,EAHZ,sBAOA,cAACx0B,EAAA,EAAD,CACEC,QAAS,kBACPs0B,GAAiB,OAAO7vB,EAAW3G,EAAa02B,IAElDhpC,MAAM,UACNyU,UACEs0B,EACE,cAACp+B,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAExC,cAACwB,GAAA,EAAD,IAGJ/B,SAAUo0B,IAAkBtkB,EAAYJ,WAZ1C,sC,cCtOJ9M,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASyxB,GAAT,GAA8C,IAArBJ,EAAoB,EAApBA,iBACtC,EAAwB9jC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAyC7M,oBAAS,GAAlD,mBAAO+jC,EAAP,KAAsBC,EAAtB,KACA,EAOIvwB,qBAAWgK,IANbqC,EADF,EACEA,gBACAL,EAFF,EAEEA,YACAC,EAHF,EAGEA,eACAY,EAJF,EAIEA,MACAI,EALF,EAKEA,gBACAC,EANF,EAMEA,mBAIIrT,EAAc,kBAAMT,GAAQ,IA0FlC,OACE,gCACE,cAAC0C,EAAA,EAAD,CACE8G,WAAS,EACTrb,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAjGe3C,GAAQ,IAkGhC8C,UAAWmQ,EAAgBvX,QAAU+X,EACrC7Q,UAAW,cAAC00B,GAAA,EAAD,IANb,8BAUA,eAACv0B,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS6S,EACT,kBAAgB,wBAChB,mBAAiB,oCACjBuC,WAAS,EACTrU,SAAS,KARX,UAUE,cAACsU,GAAA,EAAD,CAAagB,GAAG,wBAAhB,SACG,sBAEH,eAACf,GAAA,EAAD,WACE,eAAClV,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,oDACC,IAAM4kB,EAAgBvX,UAEzB,eAACrN,EAAA,EAAD,WACE,0CACC,KACC4L,GACG4Z,EAAgBvC,SAEbuC,EAAgBvC,SADhBsB,EAAYtB,aAItB,eAACjjB,EAAA,EAAD,WACE,2CACC,KAAO4L,GAAc2Y,EAAYrB,cAEpC,eAACljB,EAAA,EAAD,WACE,uCACC,KACC4L,GACG4Z,EAAgBrC,MAEbqC,EAAgBrC,MADhBoB,EAAYpB,aAKxB,eAACxjB,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,eAACuE,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,aAJP,UAME,cAACq2B,EAAA,EAAD,CAAYnzB,GAAG,aAAf,2BACA,cAAC6E,GAAA,EAAD,CACEwS,QAAQ,aACRhlB,MAAOsc,EAAYJ,WACnBzR,KAAK,aACLqD,SAAU,SAACvD,GAAD,OA1JE2R,EA0JsB3R,EAAEC,OAAOxK,WAzJvDuc,EAAe,2BACVD,GADS,IAEZJ,gBAHqB,IAACA,GA2JZhC,MAAM,gBALR,SAOGzR,GAAUrE,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,WAMb,cAAC6d,GAAA,EAAD,CACEC,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS2G,EAAgBpB,mBACzBrO,SAAU,SAACvD,GAAD,OAlKA4R,EAkKwB5R,EAAEC,OAAOoM,aArJzD4G,EAZKrB,EAYc,2BACdoB,GADa,IAEhBpB,uBAbmB,2BACdoB,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBiB,qBACAC,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KATH,IAACgE,GAmKV1R,KAAK,uBAGTyP,MAAM,sBAER,eAACjI,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACtF,EAAA,EAAD,CACEE,QAAQ,WACRD,KAAK,QACLL,WAAS,EACToB,SAAU,SAACvD,GAAD,OA7HJ,SAACvK,GACrB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAYA,IAAIqc,EAAsBxY,WAAW7D,GACjCoc,EAAa9G,KAAKC,MACnB8G,EAAsBC,EAAYtB,SAAY,KAG7C7C,EAAuBmE,EAAYtB,SAAWqB,EAElDmB,EAAmB,2BACdD,GADa,IAEhBvC,SAAUnX,WAAWsU,EAAqBrU,QAAQ,IAClDoX,MAAOrX,YACJsU,EAAuBmE,EAAYrB,WAAWnX,QAAQ,IAEzDsY,aACAC,sBACAlE,qBAAsBtU,WAAWsU,EAAqBrU,QAAQ,YA1B9D0Z,EAAmB,2BACdD,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBkB,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KAqHKiiB,CAAc7vB,EAAEC,OAAOxK,QACxCwM,UAAW+Q,EAAgBpB,mBAC3Bnc,MAAOud,EAAgBlB,oBACvBpP,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,oBAKR,cAAC6E,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACtF,EAAA,EAAD,CACEE,QAAQ,WACRa,KAAK,SACLd,KAAK,QACLL,WAAS,EACToB,SAAU,SAACvD,GAAD,OA3KA,SAACvK,GACzB,GAAKA,GAA+B,IAAtB6D,WAAW7D,GAAzB,CAWA,IAAIoc,EAAavY,WAAW7D,GACxBqc,EAAsB/G,KAAKC,MAC5B+G,EAAYtB,SAAWoB,EAAc,KAEpCjE,EAAuBmE,EAAYtB,SAAWqB,EAElDmB,EAAmB,2BACdD,GADa,IAEhBvC,SAAUnX,WAAWsU,EAAqBrU,QAAQ,IAClDoX,MAAOrX,YACJsU,EAAuBmE,EAAYrB,WAAWnX,QAAQ,IAEzDsY,aACAC,sBACAlE,qBAAsBtU,WAAWsU,EAAqBrU,QAAQ,YAxB9D0Z,EAAmB,2BACdD,GADa,IAEhBvC,SAAUsB,EAAYtB,SACtBE,MAAOoB,EAAYpB,MACnBkB,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KAmKKmiB,CAAkB/vB,EAAEC,OAAOxK,QAC5CwM,UAAW+Q,EAAgBpB,mBAC3Bnc,MAAOud,EAAgBnB,WACvBnP,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,0BAOZ,eAAC1V,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,kDACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRa,KAAK,OACLC,SAAU,SAACvD,GACTgS,EAAe,2BACVD,GADS,IAEZP,0BAA2BxR,EAAEC,OAAOxK,UAGxCA,MAAOsc,EAAYP,kCAIzB,eAACzN,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEC,QAASlC,EACTtS,MAAM,UACN2U,SAAUo0B,EAHZ,sBAOA,cAACx0B,EAAA,EAAD,CACEC,QAAS,kBACPs0B,GAAiB,EAAO,UAAWx2B,EAAa02B,IAElDhpC,MAAM,UACNyU,UACEs0B,EACE,cAACp+B,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAExC,cAACwB,GAAA,EAAD,IAGJ/B,SAAUo0B,EAZZ,sC,iDC7OJtqC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,SAIRsM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAAS2xB,GAAT,GAKX,IAJFC,EAIC,EAJDA,OACA3pC,EAGC,EAHDA,OACA4pC,EAEC,EAFDA,mBACAC,EACC,EADDA,cAEMtqC,EAAUR,KAChB,EAAwB4I,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WACtBvyB,GAAQ,IAWV,OACE,gCACc,aAAXnS,EACC,cAAC6U,EAAA,EAAD,CACEM,WAAS,EACTL,QAAS4vB,EACTpkC,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLT,UAAW,cAACiC,GAAA,EAAD,IANb,8BAWA,cAACnC,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACE,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAQ5L,UAAWH,EAAQmY,SAF/B,wBAQJ,cAAC,GAAD,UACE,cAAC,GAAD,CACE5X,KAAMA,EACN8S,YAlCY,WAClBT,GAAQ,GACO,aAAXnS,IACF4pC,IACAC,MA+BI7pC,OAAQA,EACR2pC,OAAQA,SAOlB,IAAMG,GAAc,SAAC,GAA2C,IAAzChqC,EAAwC,EAAxCA,KAAM8S,EAAkC,EAAlCA,YAAa+2B,EAAqB,EAArBA,OAAQ3pC,EAAa,EAAbA,OAC1CT,EAAUR,KAChB,EAWIga,qBAAWgK,IAVbqC,EADF,EACEA,gBACAL,EAFF,EAEEA,YACAf,EAHF,EAGEA,iBACAqB,EAJF,EAIEA,mBACAL,EALF,EAKEA,eACAG,EANF,EAMEA,oBACAF,EAPF,EAOEA,gBAEAe,GATF,EAQEJ,MARF,EASEI,iBACAC,EAVF,EAUEA,mBAEF,EAAoC3gB,oBAAS,GAA7C,mBAAOykC,EAAP,KAAmBC,EAAnB,KACM93B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0BjI,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACA,EAA8BgG,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAAsB8H,YAAY8xB,IAA3BsF,EAAP,oBACA,EAA8Bp3B,YAAY+xB,IAAnCsF,EAAP,oBAEM/c,EAAgB,WACpBnJ,EAAiBihB,IACjB5f,EAAmBggB,IACnBrgB,EAAekgB,IACf/f,EAAoBigB,IACpBngB,EAAgBkgB,IAChBlf,EAAmB,CACjBxC,SAAU,EACVE,MAAO,EACPiB,oBAAoB,EACpBC,WAAY,EACZC,oBAAqB,EACrBlE,qBAAsB,KAI1BvH,qBAAU,WACO,aAAXrZ,GAAyB2pC,IAAmB,IAAT7pC,IACrCklB,EAAe2kB,GACftkB,EAAmBskB,EAAOl8B,cAE3B,CAAC3N,IAEJ,IAAMspC,EAAgB,uCAAG,WACvBe,EACAC,EACAx3B,EACA02B,GAJuB,uBAAAp8B,EAAA,yDAMnBsF,EANmB,eAMNuS,GACbtX,EAAY2X,EACD,aAAXplB,IACFyN,EAAY2X,EAAgBvY,KAAI,SAACsO,GAE/B,cADOA,EAAIkvB,UACJlvB,YAEF3I,EAAMnI,eACNmI,EAAMrI,gBACNqI,EAAM0uB,SAGfn2B,GAAW,GACPq/B,GAASd,GAAgB,GAnBN,SAqBrB92B,EAAM/E,UAAYA,GAEd08B,EAvBiB,wBAwBnB33B,EAAM0R,WAAY,EAxBC,UAyBEgmB,EAAoB,CACvCz1B,UAAW,CACTC,MAAOlC,EACPnI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B2uB,QAAShvB,EAAOK,OA9BD,QAyBbsB,EAzBa,OAiCnBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKm2B,oBAAoBjqC,SACpDD,OAAQ,UACRF,MAAM,IApCW,+BAuCfsqC,IACF53B,EAAM+R,gBAAiB,EACvB/R,EAAMkS,wBAA0BlS,EAAMmR,OAEpCqC,EAAgBpB,qBAMdoB,EAJFpB,mBAIEoB,EAHFvC,SAGEuC,EAFFrC,MACGxU,EALiC,aAMlC6W,EANkC,IAOtCxT,EAAMoS,mBAAqBoB,EAAgBpB,mBAC3CpS,EAAMiR,SAAWuC,EAAgBvC,SACjCjR,EAAMmR,MAAQqC,EAAgBrC,MAC9BnR,EAAMrD,UAAYA,GArDD,UAwDE86B,EAAY,CAC/Bx1B,UAAW,CACTC,MAAOlC,EACPnI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B2uB,QAAShvB,EAAOK,OA7DD,QAwDbsB,EAxDa,OAgEnBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKk2B,YAAYhqC,SAC5CD,OAAQ,UACRF,MAAM,IAnEW,QAsErBiL,GAAW,GACXoiB,IACIva,IACFA,IACA02B,GAAgB,IA1EG,kDA6ErBv+B,GAAW,GACXzL,EAAS,CACPW,QAAQ,oBACRD,OAAQ,QACRF,MAAM,IAEJ8S,IACFA,IACA02B,GAAgB,IAElBt7B,QAAQC,IAAR,MACI,KAAM0G,aACR3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eA3FC,0DAAH,4DAgGhB01B,EAAqB,WACrBllB,EAAgBvX,OAAS,EAC3Bm8B,GAAeD,IAEf5c,IACAva,MAIJ,OACE,eAACsC,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,EACTyH,oBAAqBxC,GAJvB,UAME,cAACzC,GAAA,EAAD,CAAa/U,MAAO,CAAE6mB,QAAS,GAA/B,SACE,cAAC5M,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,0BAGA,eAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,UACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASw1B,EACT90B,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,QAEhC,cAAC,GAAD,CACEqH,YAAaA,EACb03B,mBAAoBA,EACpBP,WAAYA,cAMtB,eAAC10B,GAAA,EAAD,WACE,cAACjW,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACm7B,GAAD,CAAelmC,OAAQA,IACvB,cAACG,EAAA,EAAD,CAAKsW,GAAI,IACT,cAAC6xB,GAAD,OAGF,eAACvxB,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CACEvU,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMw1B,KACfv1B,UAAW,cAAC,KAAD,IAJb,sBAQY,aAAX/U,EAAwB,KACvB,cAAC6U,EAAA,EAAD,CACE8G,WAAS,EACTrb,MAAM,UACNmV,QAAQ,OACRD,KAAK,QACLV,QAAS,kBAAMs0B,GAAiB,IAChCn0B,UAAWmQ,EAAgBvX,OAC3BkH,UAAW,cAACw1B,GAAA,EAAD,IAPb,8BAYF,cAACf,GAAD,CAAeJ,iBAAkBA,IACjC,cAACD,GAAD,CAAiBC,iBAAkBA,WAMrCoB,GAAiB,SAAC,GAAqD,IAAnD53B,EAAkD,EAAlDA,YAAa03B,EAAqC,EAArCA,mBAAoBP,EAAiB,EAAjBA,WACzD,EAMIhxB,qBAAWgK,IALbsC,EADF,EACEA,mBACAL,EAFF,EAEEA,eACAC,EAHF,EAGEA,gBACAE,EAJF,EAIEA,oBACAnB,EALF,EAKEA,iBAeF,OACE,8BACE,eAAC9O,GAAA,EAAD,CACEpV,KAAMiqC,EACN1vB,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAASuqC,EACT,kBAAgB,wBALlB,UAOE,cAACl1B,GAAA,EAAD,CAAagB,GAAG,wBAAhB,+CAIA,eAACW,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAASw1B,EAAoBhqC,MAAM,UAA3C,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QA7BO,WAErBkP,EAAiBihB,IACjBjgB,EAAekgB,IACfjgB,EAAgBkgB,IAChBhgB,EAAoBigB,IACpB/f,EAAmBggB,IAEnBiF,IACA13B,KAoBuCtS,MAAM,YAAvC,8B,mDC1WJmqC,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAASC,GAAT,GAAoD,IAAXlB,EAAU,EAAVA,OAEpD1lC,EAOE0lC,EAPF1lC,QACAggB,EAME0lB,EANF1lB,UACAE,EAKEwlB,EALFxlB,eACAV,EAIEkmB,EAJFlmB,SACAC,EAGEimB,EAHFjmB,UACAC,EAEEgmB,EAFFhmB,MACAlW,EACEk8B,EADFl8B,UAGIq9B,EAAmB,CACvB,CACE7mC,QAASA,EAAQ+nB,eACjB/H,UAAWA,EAAUuf,eACrBrf,eAAgBxY,GAAawY,GAC7BV,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,KAInBonB,EAAqBt9B,EAAUZ,KAAI,SAACY,GACxC,IACER,EAYEQ,EAZFR,SACAmZ,EAWE3Y,EAXF2Y,OACA9lB,EAUEmN,EAVFnN,MACAmC,EASEgL,EATFhL,OACAC,EAQE+K,EARF/K,SACAsoC,EAOEv9B,EAPFu9B,gBACA5nB,EAME3V,EANF2V,eACAE,EAKE7V,EALF6V,iBACAD,EAIE5V,EAJF4V,qBACAI,EAGEhW,EAHFgW,SACAC,EAEEjW,EAFFiW,UACAC,EACElW,EADFkW,MAiBF,MAfyB,CACvB1W,SAAUA,EAAS1H,gBAAgB2jB,iBACnC9C,OAAQA,EAASA,EAAOA,OAAS,MACjC9lB,MAAOA,EAAQA,EAAMA,MAAQ,MAC7BmC,SACAC,WACAsoC,kBACA5nB,iBACAE,mBACAD,uBACAI,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,OAMzB,OACE,cAAC,WAAD,UACE,cAACjJ,GAAA,EAAD,UACE,cAACA,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAAC6vB,GAAD,CACElrB,QACE,cAACpf,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNyU,UAAW,cAACk2B,GAAA,EAAD,IAHb,gCASJC,SAAU,oBAZZ,UAcE,eAACP,GAAD,CAAY52B,KAAM+2B,EAAkB53B,KAAK,iBAAzC,UACE,cAAC03B,GAAD,CAAajoB,MAAM,UAAUla,MAAM,YACnC,cAACmiC,GAAD,CAAajoB,MAAM,YAAYla,MAAM,cACrC,cAACmiC,GAAD,CAAajoB,MAAM,kBAAkBla,MAAM,mBAC3C,cAACmiC,GAAD,CAAajoB,MAAM,WAAWla,MAAM,aACpC,cAACmiC,GAAD,CAAajoB,MAAM,YAAYla,MAAM,cACrC,cAACmiC,GAAD,CAAajoB,MAAM,QAAQla,MAAM,aAEnC,eAACkiC,GAAD,CAAY52B,KAAMg3B,EAAoB73B,KAAK,yBAA3C,UACE,cAAC03B,GAAD,CAAajoB,MAAM,WAAWla,MAAM,aACpC,cAACmiC,GAAD,CAAajoB,MAAM,SAASla,MAAM,WAClC,cAACmiC,GAAD,CAAajoB,MAAM,QAAQla,MAAM,UACjC,cAACmiC,GAAD,CAAajoB,MAAM,SAASla,MAAM,WAClC,cAACmiC,GAAD,CAAajoB,MAAM,WAAWla,MAAM,aACpC,cAACmiC,GAAD,CAAajoB,MAAM,qBAAqBla,MAAM,oBAC9C,cAACmiC,GAAD,CAAajoB,MAAM,iBAAiBla,MAAM,mBAC1C,cAACmiC,GAAD,CACEjoB,MAAM,sBACNla,MAAM,qBAER,cAACmiC,GAAD,CACEjoB,MAAM,0BACNla,MAAM,yBAER,cAACmiC,GAAD,CAAajoB,MAAM,WAAWla,MAAM,aACpC,cAACmiC,GAAD,CAAajoB,MAAM,YAAYla,MAAM,cACrC,cAACmiC,GAAD,CAAajoB,MAAM,QAAQla,MAAM,sBC3F/C,IAAM1J,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASiqC,GAAT,GAAoC,IAAXxB,EAAU,EAAVA,OAChCpqC,EAAUR,KACVE,EAAQiyB,eACNzjB,EAAck8B,EAAdl8B,UACR,EAAgCnI,mBAAS,IAAzC,mBAAO2xB,EAAP,KAAiBC,EAAjB,KACA,EAAoD5xB,mBAAS,IAA7D,mBAAO8lC,EAAP,KAA2BC,EAA3B,KAcA,OAVAhyB,qBAAU,WACRgyB,EACE59B,EAAU6C,QAAO,SAACkC,GAChB,OAAOA,EAAMvF,SAAS1H,gBAAgB2jB,iBACnCoiB,cACArS,SAAShC,EAASqU,qBAGxB,CAACrU,EAAUxpB,IAGZ,eAAC,WAAD,WACE,eAACtN,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,UACE,eAACI,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,4CACC5B,EAAO1lB,UAAUuf,kBAEpB,eAAChjC,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,0CACC5B,EAAO1lC,QAAQ+nB,kBAElB,cAACxrB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,4CAAe5B,EAAOlmB,cAExB,cAACjjB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,6CAAgB5B,EAAOjmB,eAEzB,cAACljB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,yCAAY5B,EAAOhmB,YAEM,IAA1BgmB,EAAOplB,eACN,cAAC4E,GAAA,EAAD,CACAxG,OAC4B,IAA1BgnB,EAAOllB,eAA0B,iBAAjC,4BAAyErY,GAAcu9B,EAAOjlB,0BAEhGpkB,OAAiC,IAA1BqpC,EAAOllB,eAA0B,UAAY,YACpDhP,QAAQ,aAEN,QAEN,cAACtV,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,SACE,eAACsa,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,cAACvF,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZxnB,SAAU,SAACvD,GAAD,OAlDGvK,EAkDoBuK,EAAEC,OAAOxK,MAlDnByuB,EAAYzuB,GAAvB,IAACA,GAmDbiN,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAAC,KAAD,CAAoBvV,MAAM,kBAMpC,cAACoa,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,cAAC+vB,GAAD,CAA+BlB,OAAQA,WAI7C,cAAC9hB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACE,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,yBAGJ,cAACC,GAAA,EAAD,UACGksB,EAAmBv+B,KAAI,SAAC2F,EAAO5N,GAC9B,OACE,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACE,cAAC7pB,GAAA,EAAD,UACGzM,EAAMvF,SAAS1H,gBAAgB2jB,mBAElC,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAM4T,QAAU5T,EAAM4T,OAAOA,OAAS5T,EAAM4T,OAAOA,OAAS,QAE/D,cAACnH,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAMlS,OAASkS,EAAMlS,MAAMmpB,IAC1B,cAACN,GAAA,EAAD,CACExG,MAAOnQ,EAAMlS,MAAMA,MACnBkV,KAAK,QACLnV,MAAO,CACLuK,gBAAiB4H,EAAMlS,MAAMmpB,IAC7BnpB,MAAOrB,EAAM2nB,QAAQoL,gBACnBxf,EAAMlS,MAAMmpB,QAKlB,QAGJ,cAACxK,GAAA,EAAD,UAAYzM,EAAM/P,SAClB,cAACwc,GAAA,EAAD,UAAYzM,EAAM9P,WAClB,cAACuc,GAAA,EAAD,UAAYzM,EAAM0Q,kBAClB,cAACjE,GAAA,EAAD,UAAYzM,EAAM4Q,iBAClB,cAACnE,GAAA,EAAD,qBAAgBzM,EAAM8Q,iBAAtB,eAA6C9Q,EAAM6Q,wBACnD,cAACpE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMiR,eAE3B,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMkR,gBAE3B,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMmR,cAnCM/e,kB,cC9F/C7F,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASsqC,GAAT,GAAuD,IAA7BC,EAA4B,EAA5BA,yBACjClsC,EAAUR,KAEhB,OACE,cAAC8oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,WAAxC,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,sBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,8BACA,cAACA,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,6BAGJ,cAACC,GAAA,EAAD,UACGusB,EAAyB5+B,KAAI,SAAC88B,EAAQ/kC,GAAT,OAC5B,cAAC,GAAD,CAA+B+kC,OAAQA,GAAf/kC,eAStC,IAAM8mC,GAAoB,SAAC,GAAgB,IAAd/B,EAAa,EAAbA,OAEzB1lC,EAQE0lC,EARF1lC,QACAggB,EAOE0lB,EAPF1lB,UACAE,EAMEwlB,EANFxlB,eACAI,EAKEolB,EALFplB,eACAE,EAIEklB,EAJFllB,eACAhB,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAGF,OACE,eAAC3E,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACE,cAAC7pB,GAAA,EAAD,UAAYhb,EAAQ+nB,iBACpB,cAAC/M,GAAA,EAAD,UAAYgF,EAAUuf,iBACtB,cAACvkB,GAAA,EAAD,UAAYtT,GAAawY,KACzB,cAAClF,GAAA,EAAD,WACsB,IAAnBsF,EACC,cAAC4E,GAAA,EAAD,CACAxG,OACqB,IAAnB8B,EAA0B,kBAAoB,qBAEhDnkB,OAA0B,IAAnBmkB,EAA0B,UAAY,YAC7ChP,QAAQ,aAEN,OAEN,cAACwJ,GAAA,EAAD,UACE,kCAAK7S,GAAcqX,QAErB,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcsX,QAErB,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcuX,QAErB,cAAC1E,GAAA,EAAD,UACE,cAAC,GAAD,CAAgB0qB,OAAQA,UAM1B9xB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvC4zB,GAAiB,SAAC,GAAgB,IAAdhC,EAAa,EAAbA,OACxB,EAAwBrkC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMy5B,EAAa,WACjBz5B,GAASrS,IAEX,OACE,eAAC,WAAD,WACE,cAAC4W,EAAA,EAAD,CAAY5B,QAAS,kBAAM82B,KAA3B,SACE,cAACC,GAAA,EAAD,MAEF,eAAC32B,GAAA,EAAD,CACEpV,KAAMA,EACNC,QAAS6rC,EACTz2B,WAAS,EACTrU,SAAS,KACTuZ,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,UACE,eAACjV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAACI,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAAEq4B,SAAU,GAA5C,6BAGA,cAAC7jB,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNwU,QAAS82B,EACTp2B,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,aAIpC,cAAC8J,GAAA,EAAD,UACE,cAAC81B,GAAD,CAAexB,OAAQA,MAEzB,cAAC5yB,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNkV,KAAK,QACLT,UAAW,cAACiC,GAAA,EAAD,IACXlC,QAAS,kBAAM82B,KALjB,8B,UChJJnB,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAASkB,GAAT,GAIX,IAHFL,EAGC,EAHDA,yBACAM,EAEC,EAFDA,OACAC,EACC,EADDA,YAEMC,EAAUR,EAAyB5+B,KAAI,SAAC88B,GAC5C,IACE1lC,EAME0lC,EANF1lC,QACAggB,EAKE0lB,EALF1lB,UACAE,EAIEwlB,EAJFxlB,eACAV,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAWF,MATyB,CACvB1f,QAASA,EAAQ+nB,eACjB/H,UAAWA,EAAUuf,eACrBrf,eAAgBxY,GAAawY,GAC7BV,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,OAMrBuoB,EAAmB,GAWvB,OAVIH,GAAUC,EAAYpgC,MACxBsgC,EAAgB,iDAA6CF,EAAYG,MAAzD,4BAAkFJ,GACzFA,IAAWC,EAAYpgC,MAChCsgC,EAAgB,oDAAgDH,IACtDA,GAAUC,EAAYpgC,MAChCsgC,EAAgB,iDAA6CF,EAAYG,OAC/DJ,GAAWC,EAAYpgC,QACjCsgC,EAAgB,+BAIhB,cAAC,WAAD,UACE,cAACxxB,GAAA,EAAD,UACE,cAACA,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,GAAD,CACE2E,QACE,cAACpf,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNyU,UAAW,cAACk2B,GAAA,EAAD,IAHb,gCASJC,SAAUgB,EAZZ,SAcE,eAAC,GAAD,CAAYn4B,KAAMk4B,EAAS/4B,KAAMg5B,EAAjC,UACE,cAAC,GAAD,CAAavpB,MAAM,UAAUla,MAAM,YACnC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,kBAAkBla,MAAM,mBAC3C,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,qBC5C/C,IAAM1J,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,KAEZgS,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIJkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASq0B,KACtB,IAAM7sC,EAAUR,KAChB,EAAwB4I,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KAMMS,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVE,WACtB3C,GAAQ,IASN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAc5L,UAAWH,EAAQmY,SAFrC,0BAOF,eAACxC,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,EACTyH,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,gCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASlC,EACT4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAACkP,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACE,cAAC,GAAD,YAOV,IAAMurC,GAAuB,WAC3B,IAAMn6B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,mBAAS,IAArC,mBAAOymC,EAAP,KAAeO,EAAf,KACA,EAAsChnC,mBAAS,CAAEsG,MAAO,GAAIugC,MAAO,UAAnE,mBAAOH,EAAP,KAAoBO,EAApB,KACMC,EAAerkB,iBAAO,MACtBskB,EAAatkB,iBAAO,MAG1B,EAA0C/O,aACxCyrB,GACA,CACEpwB,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B3G,MAAOogC,EAAYpgC,OAErB06B,YAAa,iBARTx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAY9B,GAAInH,EACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,yBAGN,GAAI1Q,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,EAAOoG,OAAQ,MAG1C,IAAIsgC,EAA2B,GAC3B13B,IAAM03B,EAA2B13B,EAAK03B,0BA6E1C,OACE,eAAC,WAAD,WACE,cAACtrC,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,eAACiE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,sBAAMgU,SAAU,SAAC9b,GAAD,OAhFF,SAACA,EAAGvK,GAC1BuK,EAAE6D,iBACF5E,EAAQ,CAAE85B,OAAQtjC,EAAOmD,MAAOogC,EAAYpgC,QAC5C0gC,EAAU7jC,GA6EqBikC,CAAgB15B,EAAGA,EAAEC,OAAO,GAAGxK,QAAtD,SACE,cAAC8M,EAAA,EAAD,CACEwT,SAAUyjB,EACVr3B,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZroB,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CAAYJ,KAAK,SAAShW,MAAM,UAAUkV,KAAK,SAA/C,SACE,cAAC,KAAD,eAQd,cAACkF,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,eAACE,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,UACE,cAAC+zB,EAAA,EAAD,CAAYnzB,GAAG,4BAAf,8BAGA,eAAC6E,GAAA,EAAD,CACE8N,SAAU0jB,EACVhf,QAAQ,4BACRhlB,MAAOujC,EAAYG,MACnB51B,SAAU,SAACvD,GAAD,OA3FH,SAACvK,GACpB,OAAQA,GACN,IAAK,SACH8jC,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,YACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,QACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,WACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,QACEioB,EAAe,CAAEJ,MAAO,QAASvgC,MAAO,KACxCqG,EAAQ,CAAE85B,SAAQngC,MAAO,MAsCAghC,CAAa55B,EAAEC,OAAOxK,QACvCka,MAAM,mBALR,UAOE,cAACzH,GAAA,EAAD,CAAUzS,MAAM,QAAhB,SACE,uDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,4BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,YAAhB,4BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,mCAIN,cAACiS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,cAACgxB,GAAD,CACEL,yBAA0BA,EAC1BM,OAAQA,EACRC,YAAaA,WAKpBD,GAAUC,EAAYpgC,MACrB,eAACzL,EAAA,EAAD,CAAKC,QAAQ,OAAOkV,GAAI,EAAxB,UACE,cAAC9U,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BACA,cAACtV,EAAA,EAAD,CAAKI,GAAI,IACRwrC,EACC,cAAC5iB,GAAA,EAAD,CACE1T,QAAQ,WACRD,KAAK,SACLmN,MAAOopB,EACPc,SAxIe,WACzB56B,EAAQ,CAAE85B,OAAQ,GAAIngC,MAAOogC,EAAYpgC,QACzC0gC,EAAU,IACVE,EAAaM,QAAQrkC,MAAQ,MAuInB,KACJ,cAACtI,EAAA,EAAD,CAAKyiB,GAAI,IACRopB,EAAYpgC,MACX,cAACud,GAAA,EAAD,CACE1T,QAAQ,WACRD,KAAK,SACLmN,MAAK,qBAAgBqpB,EAAYG,OACjCU,SA5Ic,WACxB56B,EAAQ,CAAE85B,SAAQngC,MAAO,KACzB2gC,EAAe,CAAEJ,MAAO,QAASvgC,MAAO,KACxC6gC,EAAWK,QAAQrkC,MAAQ,WA2IjB,QAEJ,KAEJ,cAAC,GAAD,CAAcgjC,yBAA0BA,Q,oBCpSxC5zB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASg1B,GAAT,GAKX,IAJFpD,EAIC,EAJDA,OACAqD,EAGC,EAHDA,WACAC,EAEC,EAFDA,cACAC,EACC,EADDA,cAEA,EAAwB5nC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOsuB,EAAP,KAAgBuZ,EAAhB,KAEMzI,EAAkB,WACtBvyB,GAAQ,IAGJS,EAAc,WACdghB,GACFsZ,GAAc,GAEhB/6B,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNwU,QAAS,kBAAM4vB,KACf3vB,UAAW,cAACq4B,GAAA,EAAD,IAJb,8BAQA,cAACl4B,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EAEX7qB,QAAS,SAAC6W,EAAO8X,GACA,kBAAXA,GACF9b,KAGJ,kBAAgB,+BAChB,mBAAiB,qCACjBuC,WAAS,EACTrU,SAAS,KAbX,SAeE,cAAC,GAAD,CACE8R,YAAaA,EACb+2B,OAAQA,EACRjF,gBAAiBA,EACjB5kC,KAAMA,EACNktC,WAAYA,EACZC,cAAeA,EACfE,WAAYA,SAOtB,IAAME,GAAoB,SAAC,GAQpB,IAPLz6B,EAOI,EAPJA,YACA+2B,EAMI,EANJA,OACAjF,EAKI,EALJA,gBACA5kC,EAII,EAJJA,KAEAmtC,GAEI,EAHJD,WAGI,EAFJC,eACAE,EACI,EADJA,WAEA,EAAsD7nC,oBAAS,GAA/D,mBAAOgoC,EAAP,KAA4BC,EAA5B,KACMr7B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC3C44B,EAAQ,EAGZ,EAA6CE,aAAa7a,GAAmB,CAC3E/W,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BtO,QAAS0lC,EAAO1lC,QAAQD,YAE1BsiC,YAAa,iBANf,mBAAOkH,EAAP,YAAmB1iC,EAAnB,EAAmBA,QAASiJ,EAA5B,EAA4BA,KAAMhP,EAAlC,EAAkCA,MAwBlC,GAfIgP,IAAMoyB,EAAQ,GAElB9sB,qBAAU,WACJvZ,GAAkB,IAAVqmC,IACVqH,IACArH,EAAQ,KAET,CAACzB,IAEJrrB,qBAAU,WACJtF,GA4DN,WACEw5B,GAAuB,GAKvB,IAJA,IAAQ9/B,EAAck8B,EAAdl8B,UACJggC,EAAgB,aAAOhgC,GACvB48B,GAAY,EAJY,WAMnBz8B,GACP,IAAMwX,EAAkB3X,EAAUG,GAC9B8/B,EAAoB,eAAQtoB,GAC5BmD,EAAa,eAAQnD,EAAgBnY,UAGnC0gC,EAAsBhH,EAAiBr2B,QAC3C,SAAC6K,GAAD,OAASA,EAAI5I,MAAQm7B,EAAqB5/B,eAGpCrI,EAA+C8iB,EAA/C9iB,QAASglB,EAAsClC,EAAtCkC,kBAAmBljB,EAAmBghB,EAAnBhhB,eAE9BqmC,EAAeD,EAAoB,GAAGloC,QACtCooC,EAAgBF,EAAoB,GAAGljB,kBACvCqjB,EAAsBH,EAAoB,GAAGvM,iBAIjD37B,EAAQjD,iBAAiBE,WACvBkrC,EAAaprC,iBAAiBE,UAChC+C,EAAQjD,iBAAiBI,+BACvBgrC,EAAaprC,iBAAiBI,8BAChC6C,EAAQjD,iBAAiBC,SAAWmrC,EAAaprC,iBAAiBC,SAIlE8lB,EAAc9iB,QAAUmoC,EACxBF,EAAqBzgC,SAAWsb,EAChCmlB,EAAqBrD,WAAY,EACjCoD,EAAiB7/B,GAAK8/B,EACtBrD,GAAY,GAGd,IAAM0D,EAAYtjB,EAAkBna,QAAO,SAAC6K,GAAD,OAAyB,IAAhBA,EAAIvX,WAClDoqC,EAAiBH,EAAcv9B,QACnC,SAAC6K,GAAD,OAAyB,IAAhBA,EAAIvX,WAkBf,GAfEmqC,EAAU,GAAGrrC,WAAasrC,EAAe,GAAGtrC,UAC5CqrC,EAAU,GAAGhrC,SAAWirC,EAAe,GAAGjrC,QAC1CgrC,EAAU,GAAGtrC,SAAWurC,EAAe,GAAGvrC,SAG1C8lB,EAAckC,kBAAoBojB,EAClCH,EAAqBzgC,SAAWsb,EAChCmlB,EAAqBrD,WAAY,EACjCoD,EAAiB7/B,GAAK8/B,EACtBrD,GAAY,GAMV9iC,EAAesG,OAAS,EAE1B,GAAIigC,EAAoBjgC,OAAS,EAC/B,GAAItG,EAAesG,SAAWigC,EAAoBjgC,OAChD,IAAK,IAAIgkB,EAAI,EAAGA,EAAItqB,EAAesG,OAAQgkB,IAEzC,IADA,IAAMoc,EAAU1mC,EAAesqB,GACtBqc,EAAI,EAAGA,EAAIJ,EAAoBjgC,OAAQqgC,IAAK,CACnD,IAAMC,EAAeL,EAAoBI,GAGvCD,EAAQ7nB,OAAO7T,MAAQ47B,EAAa/nB,OAAO7T,KAC3C07B,EAAQ3tC,MAAMiS,MAAQ47B,EAAa7tC,MAAMiS,KACzC07B,EAAQhqC,UAAYkqC,EAAalqC,UAG/BgqC,EAAQvrC,WAAayrC,EAAazrC,UAClCurC,EAAQlrC,SAAWorC,EAAaprC,SAGhCwlB,EAAchhB,eAAiBumC,EAC/BJ,EAAqBzgC,SAAWsb,EAChCmlB,EAAqBrD,WAAY,EACjCoD,EAAiB7/B,GAAK8/B,EACtBrD,GAAY,SAQpB9hB,EAAchhB,eAAiBumC,EAC/BJ,EAAqBzgC,SAAWsb,EAChCmlB,EAAqBrD,WAAY,EACjCoD,EAAiB7/B,GAAK8/B,EACtBrD,GAAY,OAKdqD,EAAqBrD,WAAY,EACjCoD,EAAiB7/B,GAAK8/B,EACtBrD,GAAY,GA/FTz8B,EAAI,EAAGA,EAAIH,EAAUI,OAAQD,IAAM,EAAnCA,GAqGT,IAAMwgC,EAAwB,GAC1B3qB,EAAW,EACXC,EAAY,EACZC,EAAQ,EACZ,GAAI0mB,EAAW,CACb,IADc,IAAD,WACJ5Y,GACP,IAAM1N,EAAa,eAAQ0pB,EAAiBhc,IAE5C,GAA6D,UAAzD1N,EAAc9W,SAAS1H,gBAAgBslB,cAGrC9G,EAAc9W,SAAS1F,eAAesG,OAAS,GACjDkW,EAAcrhB,SAAW,EACzBqhB,EAAc9W,SAAS1F,eAAe+oB,SAAQ,SAAC2V,GAC7C,IAAQvjC,EAA6BujC,EAA7BvjC,SAAUgmB,EAAmBud,EAAnBvd,eACd+e,EAAQ/e,GAAkC,EAC9C3E,EAAcrhB,UAAYA,EAAW+kC,KAEnCnlB,MAAMyB,EAAcrhB,YAAWqhB,EAAcrhB,SAAW,GAC5DqhB,EAAcX,eAAiBW,EAAcrhB,WAE7CqhB,EAAcrhB,SAAW,EACzBqhB,EAAcX,eAAiBW,EAAcrhB,cAE1C,CAIL,IAAQwgB,EAA6Ca,EAA7Cb,gBAAiBxgB,EAA4BqhB,EAA5BrhB,SAAUygB,EAAkBY,EAAlBZ,cAE7BukB,EACJ3jB,EAAc9W,SAASxH,QAAQjD,iBAAiBE,SAE9CklC,EACgB,OAAlBzkB,GACkB,OAAlBA,GACkB,OAAlBA,EACID,EACAA,EAAkBwkB,EACpBC,EAPkBjlC,EAAWglC,EAOUE,EAGvCF,EAAS,GACX3jB,EAAcb,gBAAkB0kB,EAAwBF,EACxD3jB,EAAcX,eAAiBukB,EAAuBD,IAEtD3jB,EAAcb,gBAAkB0kB,EAChC7jB,EAAcX,eAAiBukB,GAKnC,MAKI5jB,EAAc9W,SAASxH,QAAQpD,iBAJjCP,EADF,EACEA,IACAD,EAFF,EAEEA,KACAS,EAHF,EAGEA,oBACAC,EAJF,EAIEA,oBAGFwhB,EAAcsqB,oBAAsB/rC,EACpCyhB,EAAcd,MAAQ3gB,EACtByhB,EAAcR,UAAYzhB,EAAMiiB,EAAcX,eAC9CW,EAAcP,WAAa3hB,EAAOkiB,EAAcX,eAChDW,EAAcL,WAAa5hB,EAAMD,GAAQkiB,EAAcX,eACvDW,EAAcN,SACZlhB,EAAsBwhB,EAAcX,eACtCW,EAAcJ,MACZrhB,EAAsByhB,EAAcX,eAElCW,EAAcV,qBAAuB,IACvCU,EAAcT,iBAAmBvF,KAAKC,MACnC1b,EAAsByhB,EAAcV,qBAAwB,KAE/DU,EAAcsqB,oBACZ/rC,EAAsByhB,EAAcT,kBAGxCG,GAAYM,EAAcN,SAC1BC,GAAaK,EAAcL,UAC3BC,GACEI,EAAcsqB,oBAAsBtqB,EAAcX,eAEpDgrB,EAAsB3uB,KAAKsE,IA7EpB0N,EAAI,EAAGA,EAAIgc,EAAiB5/B,OAAQ4jB,IAAM,EAA1CA,GA+ETwb,EAAc,CACZ16B,IAAKo3B,EAAOp3B,IACZtO,QAAS0lC,EAAO1lC,QAChBggB,UAAW0lB,EAAO1lB,UAClBxW,UAAW2gC,EACXlqB,UAAWylB,EAAOzlB,UAClBC,eAAgBwlB,EAAOxlB,eACvBT,YACAD,WACAE,eAGFspB,EAActD,GAGhB2E,YAAW,WACTf,GAAuB,GACvBJ,GAAW,KACV,MA5QDoB,KAED,CAACx6B,IAEAjJ,EACF,OACE,eAAC,WAAD,WACE,eAACuK,GAAA,EAAD,CACEhV,MAAO,CACLa,OAAQ,IACRd,QAAS,OACTkL,WAAY,SACZD,eAAgB,SAChBD,cAAe,UANnB,UASE,cAACiM,GAAA,EAAD,CAAmBjB,GAAG,qCAAtB,gLAKA,eAACjW,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACL,EAAA,EAAD,CACEuK,KAAM,GACNlV,MAAM,UACND,MAAO,CAAEkrC,YAAa,KAJ1B,oDASF,cAACx0B,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,2BAQR,GAAIyE,EACF,OACE,eAAC,WAAD,WACE,cAACsQ,GAAA,EAAD,UACE,cAACnK,GAAD,CAAWnG,MAAOA,EAAOoG,OAAQ,QAEnC,cAAC4L,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,yBAQR,IAAIqmC,EAAmB,GAyNvB,OAxNI5yB,IAAM4yB,EAAmB5yB,EAAK4yB,kBAyNhC,eAAC,WAAD,WACE,eAACtxB,GAAA,EAAD,CACEhV,MAAO,CACLa,OAAQ,IACRd,QAAS,OACTkL,WAAY,SACZD,eAAgB,SAChBD,cAAe,UANnB,UASE,cAACiM,GAAA,EAAD,CAAmBjB,GAAG,qCAAtB,gLAKCk3B,EACC,eAACntC,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAACL,EAAA,EAAD,CACEuK,KAAM,GACNlV,MAAM,UACND,MAAO,CAAEkrC,YAAa,KAJ1B,iDAQE,KACF+B,EAKE,KAJF,eAACntC,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC,KAAD,CAAahL,MAAM,UAAUD,MAAO,CAAEkrC,YAAa,KADrD,oCAMJ,cAACx0B,GAAA,EAAD,UACGu2B,EACC,cAACz4B,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,sBAIA,cAACuU,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAAUyU,UAAW,cAACiC,GAAA,EAAD,IAAzD,2B,UCnYJjY,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASiqC,GAAT,GAKX,IAJFxB,EAIC,EAJDA,OACArqC,EAGC,EAHDA,SACA2S,EAEC,EAFDA,QACA23B,EACC,EADDA,mBAEMrqC,EAAUR,KACVE,EAAQiyB,eAEd,EAAqC5rB,mBAAS,eAAKqkC,IAAnD,mBAAO6E,EAAP,KAAoBC,EAApB,KACQhhC,EAAc+gC,EAAd/gC,UACHihC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAEvD,EAAgCjI,mBAAS,IAAzC,mBAAO2xB,EAAP,KAAiBC,EAAjB,KACA,EAAoD5xB,mBAAS,IAA7D,mBAAO8lC,EAAP,KAA2BC,EAA3B,KAEA,EAAoC/lC,qBAApC,mBAAO0nC,EAAP,KAAmBC,EAAnB,KACA,EAAoC3nC,oBAAS,GAA7C,mBAAOqpC,EAAP,KAAmBzB,EAAnB,KAoBA,OAhBA7zB,qBAAU,WACRgyB,EACE59B,EAAU6C,QAAO,SAACkC,GAChB,OAAOA,EAAMvF,SAAS1H,gBAAgB2jB,iBACnCoiB,cACArS,SAAShC,EAASqU,qBAGxB,CAACrU,EAAUxpB,IAEd4L,qBAAU,WACJs1B,GAAc3B,GAChByB,EAAczB,KAEf,CAAC2B,IAGF,eAAC,WAAD,WACE,eAACxuC,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,UACE,eAACI,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,4CACCiD,EAAYvqB,UAAUuf,kBAEzB,eAAChjC,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,0CACCiD,EAAYvqC,QAAQ+nB,kBAEvB,cAACxrB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,4CAAej/B,WAAWkiC,EAAY/qB,UAAUlX,QAAQ,QAE1D,cAAC/L,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,6CAAgBj/B,WAAWkiC,EAAY9qB,WAAWnX,QAAQ,QAE5D,cAAC/L,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,yCAAYn/B,GAAcE,WAAWkiC,EAAY7qB,OAAOpX,QAAQ,YAGpE,cAACpM,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,SACE,eAACsa,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,cAACvF,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZxnB,SAAU,SAACvD,GAAD,OA/CGvK,EA+CoBuK,EAAEC,OAAOxK,MA/CnByuB,EAAYzuB,GAAvB,IAACA,GAgDbiN,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAAC,KAAD,CAAoBvV,MAAM,kBAMpC,cAACoa,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,eAAC3a,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,WAC+D,IAA5DqjC,EAAgBh2B,QAAQuzB,QAAQ2C,eAAeC,SAAsB,KACpE,cAAC,GAAD,CACElF,OAAQ6E,EACRlvC,SAAUA,EACV2S,QAASA,EACT23B,mBAAoBA,IAGxB,cAACzpC,EAAA,EAAD,CAAKyiB,GAAI,KAEkD,IAA1D8rB,EAAgBh2B,QAAQuzB,QAAQ2C,eAAe/1B,OAAoB,KAClE81B,EACE,cAACjF,GAAD,CACEC,OAAQ6E,EACRxuC,OAAO,WACP4pC,mBAAoBA,EACpBC,cAAe53B,IAGjB,cAAC86B,GAAD,CACEpD,OAAQ6E,EACRxB,WAAYA,EACZC,cAAeA,EACfC,cAAeA,cAQ7B,cAACrlB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,WAAxC,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACG2vB,EAAa,cAAC1vB,GAAA,EAAD,IAAgB,KAC9B,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,yBAGJ,cAACC,GAAA,EAAD,UACGksB,EAAmBv+B,KAAI,SAAC2F,EAAO5N,GAE9B,OACE,eAACoa,GAAA,EAAD,CACE8pB,UAAW,EAEXjgB,SAAUrW,EAAM63B,UAHlB,UAKGsE,EACC,cAAC1vB,GAAA,EAAD,CACE5e,MAAO,CACLyuC,WAAY,EACZC,cAAe,GAHnB,SAMGv8B,EAAM63B,UACL,cAAC,KAAD,CAAO/pC,MAAM,YAEb,cAAC,KAAD,CACED,MAAO,CACLC,MAAOrB,EAAM2nB,QAAQgN,QAAQ9M,UAKnC,KACJ,cAAC7H,GAAA,EAAD,UACGzM,EAAMvF,SAAS1H,gBAAgB2jB,mBAElC,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAM4T,QAAU5T,EAAM4T,OAAOA,OAC1B5T,EAAM4T,OAAOA,OACb,QAEN,cAACnH,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAMlS,OAASkS,EAAMlS,MAAMmpB,IAC1B,cAACN,GAAA,EAAD,CACExG,MAAOnQ,EAAMlS,MAAMA,MACnBkV,KAAK,QACLnV,MAAO,CACLuK,gBAAiB4H,EAAMlS,MAAMmpB,IAC7BnpB,MAAOrB,EAAM2nB,QAAQoL,gBACnBxf,EAAMlS,MAAMmpB,QAKlB,QAGJ,cAACxK,GAAA,EAAD,UAAYzM,EAAM/P,SAClB,cAACwc,GAAA,EAAD,UAAYzM,EAAM9P,WAClB,cAACuc,GAAA,EAAD,UAAYzM,EAAM0Q,kBAClB,cAACjE,GAAA,EAAD,UAAYzM,EAAM4Q,iBAClB,cAACnE,GAAA,EAAD,qBAAgBzM,EAAM8Q,iBAAtB,eAA6C9Q,EAAM6Q,wBACnD,cAACpE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMiR,eAE3B,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMkR,gBAE3B,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMmR,cAzDtB/e,kBAsEzB,IAAMiT,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvCi3B,GAAsB,SAAC,GAKtB,IAJLrF,EAII,EAJJA,OACArqC,EAGI,EAHJA,SACA2S,EAEI,EAFJA,QACA23B,EACI,EADJA,mBAEA,EAAwBtkC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAAiC8H,YAAYmyB,IAAtCiK,EAAP,oBAEMrD,EAAa,WACjBz5B,GAASrS,IAGLovC,EAAc,uCAAG,4BAAAhiC,EAAA,6DACrBnC,GAAW,GADU,kBAGEkkC,EAAuB,CAC1Cx6B,UAAW,CACT2B,GAAIuzB,EAAOp3B,OALI,OAGbsB,EAHa,OAQnBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKk7B,uBAAuBhvC,SACvDD,OAAQ,UACRF,MAAM,IAERmS,IACAlH,GAAW,GACX6gC,IACAhC,IAhBmB,kDAkBnB57B,QAAQC,IAAR,MACAlD,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAvBW,0DAAH,qDA2BpB,OACE,eAAC,WAAD,WACE,cAAC+U,EAAA,EAAD,CACEvU,MAAM,YACNyU,UAAW,cAACo6B,GAAA,EAAD,IACXr6B,QAAS,kBAAM82B,KAHjB,6BAOA,eAAC12B,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAAS6rC,EAAYvxB,oBAAqBxC,GAA9D,UACE,cAACzC,GAAA,EAAD,8CACA,eAAC2B,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNkV,KAAK,QACLT,UAAW,cAAC,KAAD,IACXD,QAAS,kBAAM82B,KALjB,sBASA,cAAC/2B,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,YACNkV,KAAK,QACLP,SAAUnK,EACViK,UACEjK,EACE,cAACG,EAAA,EAAD,CAAkBuK,KAAM,GAAIlV,MAAM,YAElC,cAAC0W,GAAA,EAAD,IAGJlC,QAAS,kBAAMo6B,KAZjB,gCCtRJnwC,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASkuC,GAAT,GAA6D,IAApCC,EAAmC,EAAnCA,uBAAwBp9B,EAAW,EAAXA,QACxD1S,EAAUR,KAChB,EAA0BuG,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACKovC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAEvD,OACE,eAACsa,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,WAAxC,UACE,cAACrW,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuf,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,sBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,8BACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,wBAC4D,IAA3DyvB,EAAgBh2B,QAAQuzB,QAAQ2C,eAAeU,QAAqB,KACnE,cAACrwB,GAAA,EAAD,4BAIN,cAACC,GAAA,EAAD,UACGmwB,EAAuBxiC,KAAI,SAAC88B,EAAQ/kC,GAAT,OAC1B,cAAC,GAAD,CAEE+kC,OAAQA,EACR13B,QAASA,EACT3S,SAAUA,GAHLsF,gBAarB,IAAM2qC,GAA0B,SAAC,GAAmC,IAAjC5F,EAAgC,EAAhCA,OAAQ13B,EAAwB,EAAxBA,QAAS3S,EAAe,EAAfA,SAEhD2E,EAME0lC,EANF1lC,QACAggB,EAKE0lB,EALF1lB,UACAE,EAIEwlB,EAJFxlB,eACAV,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAEG+qB,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eACvD,OACE,eAACyR,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACE,cAAC7pB,GAAA,EAAD,UAAYhb,EAAQ+nB,iBACpB,cAAC/M,GAAA,EAAD,UAAYgF,EAAUuf,iBACtB,cAACvkB,GAAA,EAAD,UAAYtT,GAAawY,KACzB,cAAClF,GAAA,EAAD,UACE,kCAAK7S,GAAcqX,QAErB,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcsX,QAErB,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcuX,QAErB,cAAC1E,GAAA,EAAD,UACE,cAAC,GAAD,CACE0qB,OAAQA,EACR13B,QAASA,EACT3S,SAAUA,OAG+C,IAA5DovC,EAAgBh2B,QAAQuzB,QAAQ2C,eAAeC,SAAsB,KACpE,cAAC5vB,GAAA,EAAD,UACE,cAAC,GAAD,CACE0qB,OAAQA,EACR13B,QAASA,EACT3S,SAAUA,UAQhBuY,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvCy3B,GAAuB,SAAC,GAAmC,IAAjC7F,EAAgC,EAAhCA,OAAQrqC,EAAwB,EAAxBA,SAAU2S,EAAc,EAAdA,QAChD,EAAwB3M,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMy5B,EAAa,WACjBz5B,GAASrS,IAEX,OACE,eAAC,WAAD,WACE,cAAC4W,EAAA,EAAD,CAAY5B,QAAS,kBAAM82B,KAA3B,SACE,cAACC,GAAA,EAAD,MAEF,eAAC32B,GAAA,EAAD,CACEpV,KAAMA,EACNC,QAAS6rC,EACTz2B,WAAS,EACTrU,SAAS,KACTuZ,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,UACE,eAACjV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAACI,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAAEq4B,SAAU,GAA5C,uCAGA,cAAC7jB,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNwU,QAAS82B,EACTp2B,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,aAIpC,cAAC8J,GAAA,EAAD,UACE,cAAC,GAAD,CACEs0B,OAAQA,EACR13B,QAASA,EACT3S,SAAUA,EACVsqC,mBAAoBgC,aAQ1BoD,GAAsB,SAAC,GAAmC,IAAjCrF,EAAgC,EAAhCA,OAAQrqC,EAAwB,EAAxBA,SAAU2S,EAAc,EAAdA,QAC/C,EAAwB3M,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAAiC8H,YAAYmyB,IAAtCiK,EAAP,oBAEMrD,EAAa,WACjBz5B,GAASrS,IAGLovC,EAAc,uCAAG,4BAAAhiC,EAAA,6DACrBnC,GAAW,GADU,kBAGEkkC,EAAuB,CAC1Cx6B,UAAW,CACT2B,GAAIuzB,EAAOp3B,OALI,OAGbsB,EAHa,OAQnBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKk7B,uBAAuBhvC,SACvDD,OAAQ,UACRF,MAAM,IAERmS,IACAlH,GAAW,GACX6gC,IAfmB,kDAiBnB59B,QAAQC,IAAR,MACAlD,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAtBW,0DAAH,qDA0BpB,OACE,eAAC,WAAD,WACE,cAAC4W,EAAA,EAAD,CAAY5B,QAAS,kBAAM82B,KAA3B,SACE,cAACuD,GAAA,EAAD,CAAgB7uC,MAAM,YAExB,eAAC4U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAAS6rC,EAAYvxB,oBAAqBxC,GAA9D,UACE,cAACzC,GAAA,EAAD,8CACA,eAAC2B,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNkV,KAAK,QACLT,UAAW,cAAC,KAAD,IACXD,QAAS,kBAAM82B,KALjB,sBASA,cAAC/2B,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,YACNkV,KAAK,QACLP,SAAUnK,EACViK,UACEjK,EACE,cAACG,EAAA,EAAD,CAAkBuK,KAAM,GAAIlV,MAAM,YAElC,cAAC0W,GAAA,EAAD,IAGJlC,QAAS,kBAAMo6B,KAZjB,gCChNJnwC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,SAIRsM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAAS03B,KACtB,IAAMlwC,EAAUR,KAChB,EAAwB4I,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KAMMS,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVE,WACtB3C,GAAQ,IASN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAY5L,UAAWH,EAAQmY,SAFnC,yBAOF,eAACxC,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,EACTyH,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,+BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASlC,EACT4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAACkP,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACE,cAAC,GAAD,YAOV,IAAMurC,GAAuB,WAC3B,IAAMn6B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,mBAAS,IAArC,mBAAOymC,EAAP,KAAeO,EAAf,KACME,EAAerkB,iBAAO,MAG5B,EAA0C/O,aAAS0rB,GAAwB,CACzErwB,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1Bw5B,UAEFzF,YAAa,iBANPx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAS9B,GAAInH,EACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,yBAGN,GAAI1Q,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,EAAOoG,OAAQ,MAG1C,IAAIkkC,EAAyB,GACzBt7B,IAAMs7B,EAAyBt7B,EAAKs7B,wBAQxC,OACE,eAAC,WAAD,WACE,cAAClvC,EAAA,EAAD,CAAKsW,GAAI,EAAG3V,SAAU,IAAtB,SACE,sBAAMguB,SAAU,SAAC9b,GAAD,OATE,SAACA,EAAGvK,GAC1BuK,EAAE6D,iBACF5E,EAAQ,CAAE85B,OAAQtjC,IAClB6jC,EAAU7jC,GAMiBikC,CAAgB15B,EAAGA,EAAEC,OAAO,GAAGxK,QAAtD,SACE,cAAC8M,EAAA,EAAD,CACEwT,SAAUyjB,EACVr3B,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZroB,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CAAYJ,KAAK,SAAShW,MAAM,UAAUkV,KAAK,SAA/C,SACE,cAAC,KAAD,eAQd,cAAC45B,GAAD,CAAeC,uBAAwBA,EAAwBp9B,QAASA,QCrJ/D,SAASy9B,KAEvB,IAAMhB,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,OACC,cAACkN,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,eAAC4Z,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,WACsD,IAArD0xB,EAAgBh2B,QAAQuzB,QAAQ0D,aAAa1yB,IAAiB,KAC9D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,cAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACo+B,GAAD,SAIyD,IAA3DgF,EAAgBh2B,QAAQuzB,QAAQ2D,mBAAmB3yB,IAAiB,KACpE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,cAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC8gC,GAAD,SAIqD,IAAvDsC,EAAgBh2B,QAAQuzB,QAAQ2C,eAAe3xB,IAAiB,KACpD,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACX,cAAC1a,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACmkC,GAAD,a,sDCmBA1wC,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACT5Z,UAAW,QAEbgb,OAAQ,CACN9a,MAAO,IACPC,OAAQ,OAIG,SAAS2uC,GAAT,GAMX,IALFniB,EAKC,EALDA,KACA+B,EAIC,EAJDA,KACAsc,EAGC,EAHDA,OACAtH,EAEC,EAFDA,OACAC,EACC,EADDA,gBAEMnlC,EAAUR,KAChB,EAA6Dga,qBAAWiqB,IAAhE37B,EAAR,EAAQA,OAAQi8B,EAAhB,EAAgBA,qBAAsBD,EAAtC,EAAsCA,kBACtC,EAAwB/9B,mBAAS,GAAjC,mBAAOwqC,EAAP,KAAaC,EAAb,KACA,EAAsCzqC,mBAAS,IAA/C,mBAAO0qC,EAAP,KAAoBC,EAApB,KACA,EAAgBhuB,aAAY8pB,EAAQ,KAA7BtjC,EAAP,oBACA,EAAgDnD,oBAAS,GAAzD,mBAAO4qC,EAAP,KAAyBC,EAAzB,KAEA,EAA0C/2B,aAASkrB,GAAkB,CACnE7vB,UAAW,CAAEgb,OAAMsc,OAAQtjC,KADrBqC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9BoH,qBAAU,WACRpH,MACC,CAAC5K,EAAQ4K,IAEZ,IAKA,EAAkC3M,oBAAS,GAA3C,mBAAO8qC,EAAP,KAAkBC,EAAlB,KAEA,EAAsD/qC,mBAAS,IAA/D,mBAAOgrC,EAAP,KAA4BC,EAA5B,KAOMC,EAAuB,SAACz8B,EAAMf,GAClChF,QAAQC,IAAIw2B,EAAQyL,GAChBzL,IAAWyL,IACbG,GAAa,GACbE,EAAuBx8B,KAqC3B,GAAIjJ,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OACPD,MAAM,QALR,SAOE,cAACgK,EAAA,EAAD,MAGN,GAAIlG,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG3B,IAAQ0rC,EAAoB18B,EAApB08B,gBAER,OACE,eAAC5oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACE,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAWyxB,SAAS,MAApB,yBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,mBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,oBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,0BACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,oBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,6BACU,aAAThjB,EAAsB,KACrB,cAACzO,GAAA,EAAD,CAAWyxB,SAAS,MAApB,oBAEF,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,KAApB,sBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,KAApB,oBACU,aAAThjB,EAAsB,KACrB,cAACzO,GAAA,EAAD,CAAWyxB,SAAS,KAApB,2BAIN,cAACxxB,GAAA,EAAD,UACGuxB,EACEE,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GACT,OACE,cAAC,GAAD,CACE8oB,KAAMA,EAENlb,MAAOo+B,EACPnM,OAAQA,EACR+L,qBAAsBA,EACtBH,aAAcA,EACdF,oBAAqBA,GALhBvrC,aAYnB,cAACisC,GAAA,EAAD,CACEC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOsK,EAAgB5iC,OACvBmiC,YAAaA,EACbF,KAAMA,EACNiB,aAxHmB,SAACn6B,EAAOo6B,GAC/BjB,EAAQiB,IAwHJC,oBAhH0B,SAACr6B,GAC/Bq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,MAgHN,eAAC76B,GAAA,EAAD,CACEpV,KAAMswC,EACNrwC,QAAS,kBAAMswC,GAAa,IAC5B,kBAAgB,qBAChB,mBAAiB,2BAJnB,UAME,cAACj7B,GAAA,EAAD,CAAagB,GAAG,qBAAhB,SACG,uDAEH,cAACf,GAAA,EAAD,UACE,cAACgC,GAAA,EAAD,CAAmBjB,GAAG,2BAAtB,kEAIF,eAACW,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAMu7B,GAAa,IAAQ/vC,MAAM,UAAUqb,WAAS,EAArE,sBAGA,cAAC9G,EAAA,EAAD,CAAQC,QAAS,kBAvHO,WAC9B,IAAK,IAAD,EACI3H,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAC1C2jC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACzCa,QAAQC,IAAIijC,GACZ5jC,aAAaoM,QACX,cACAtM,KAAKuM,UAAU,CACbw3B,cAC4B53B,IAA1B23B,EAAaC,SAAyB,EAAID,EAAaC,SACzDxtB,WAA8BpK,IAAvB23B,EAAavtB,MAAsB,EAAIutB,EAAavtB,MAC3DD,eAC6BnK,IAA3B23B,EAAaxtB,UAA0B,EAAIwtB,EAAaxtB,UAC1D5hB,SAA0ByX,IAArB23B,EAAapvC,IAAoB,EAAIovC,EAAapvC,IACvDD,UAA4B0X,IAAtB23B,EAAarvC,KAAqB,EAAIqvC,EAAarvC,KACzDsN,eAC6BoK,IAA3B23B,EAAa/hC,UAA0B,EAAI+hC,EAAa/hC,UAC1D1N,cAAoC8X,IAA1B23B,EAAazvC,SAAyB,EAAIyvC,EAAazvC,SACjE2vC,YAAaF,EAAaE,YAAcF,EAAaE,YAAc,GACnEjO,QAASmN,EACTe,eAAe,EACf5jC,WACE,UAAAyjC,EAAazjC,iBAAb,eAAwBI,QAAS,EAAIqjC,EAAazjC,UAAY,MAGpE61B,GAAsBD,GACtBgN,GAAcD,GACd1L,IACA,MAAO3/B,GACPiJ,QAAQC,IAAIlJ,IA0FeusC,IAA2BhxC,MAAM,UAAxD,8BASV,IAAMixC,GAAa,SAAC,GAOb,IANL/+B,EAMI,EANJA,MACAkb,EAKI,EALJA,KACA8iB,EAII,EAJJA,qBACA/L,EAGI,EAHJA,OAEA0L,GACI,EAFJE,aAEI,EADJF,qBAEMzB,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,EAAwCjI,oBAAS,GAAjD,mBAAOksC,EAAP,KAAqBC,EAArB,KACA,EAA8B14B,qBAAWiqB,IAAjC37B,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAChB,EAA8BhC,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAWA,EAA4B8H,YAAY0xB,IAAjCmN,EAAP,oBAEMC,EAAa,uCAAG,WAAO3+B,GAAP,SAAA9F,EAAA,6DACpBnC,GAAW,GADS,kBAIZ2mC,EAAkB,CACtBj9B,UAAW,CACTC,MAAO,CACLwuB,eAAgBlwB,EAAEC,OAAOoM,SAE3BjJ,GAAI5D,EAAMD,OATI,OAYlBjL,GAAWD,GACX0D,GAAW,GAbO,gDAelBA,GAAW,GAfO,yDAAH,sDAmBnB,OACE,cAAC,WAAD,UACE,eAACiU,GAAA,EAAD,CACE4J,OAAK,EACLmB,KAAK,WACL+e,UAAW,EACXh0B,QAAS,SAAC9B,GAAD,OAAOw9B,EAAqBh+B,EAAOQ,IAJ9C,UAME,cAACiM,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMkxB,mBAErB,cAACzkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMmxB,kBAErB,cAAC1kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMgxB,mBAErB,cAACvkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMuxB,iBAErB,cAAC9kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMqxB,UAErB,cAAC5kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAagS,EAAMo/B,iBAEX,aAATlkB,EAAsB,KACrB,cAACzO,GAAA,EAAD,UACGnU,EACC,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAExB,cAACq8B,GAAA,EAAD,CACExyB,QAAS7M,EAAM0wB,eACf3sB,SAAUo7B,EACVrxC,MAAM,cAKd,cAAC2e,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACGwjC,EACC,GAEA,cAAC,GAAD,CACE+M,aAAcA,EACdM,eA3EW,WACrB3B,GAAoB,GACpBsB,GAAiBD,IA0EPh/B,MAAOA,EACPiyB,OAAQA,MAId,cAACxlB,GAAA,EAAD,CAAWhe,MAAO,GAAlB,UAEE,IADCytC,EAAgBh2B,QAAQq5B,UAAUC,SAASn5B,OACpC,KACN,cAAC2rB,GAAD,CAAc/U,KAAK,UAAU1C,OAAO,aAAava,MAAOA,MAG5D,cAACyM,GAAA,EAAD,CAAWhe,MAAO,GAAlB,UAEE,IADCytC,EAAgBh2B,QAAQq5B,UAAUC,SAASn5B,OACpC,KACN,cAACnC,EAAA,EAAD,CAAYpW,MAAM,YAAlB,SACE,cAACm9B,GAAA,EAAD,cASRwU,GAAgB,SAAC,GAA6C,IAA3CH,EAA0C,EAA1CA,eAAgBN,EAA0B,EAA1BA,aAAch/B,EAAY,EAAZA,MAC/CjT,EAAUR,KAChB,OACE,gCACE,cAAC2X,EAAA,EAAD,CAAY5B,QAASg9B,EAArB,SACE,cAACI,GAAA,EAAD,MAEF,eAACh9B,GAAA,EAAD,CACEpV,KAAM0xC,EACNzxC,QAAS+xC,EACT38B,WAAS,EACTrU,SAAS,KAJX,UAME,cAACsU,GAAA,EAAD,UAAc,wCACd,eAACC,GAAA,EAAD,WACE,eAAClV,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sCACA,cAAC4F,GAAA,EAAD,OAEF,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAACD,EAAA,EAAD,CACEqW,GAAI,EACJtV,OAAQ,IACRD,MAAO,IACPb,QAAQ,OACRiL,eAAe,SACfC,WAAW,SANb,SAQE,cAACuR,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAKtK,EAAMxR,WAEhD,+BACE,eAACR,EAAA,EAAD,WACE,uDACCgS,EAAMkxB,kBAET,eAACljC,EAAA,EAAD,WACE,wCACCgS,EAAMmxB,iBAET,eAACnjC,EAAA,EAAD,WACE,gDACCgS,EAAMixB,iBAET,eAACjjC,EAAA,EAAD,WACE,yDACCgS,EAAMgxB,kBAET,eAAChjC,EAAA,EAAD,WACE,+CACCgS,EAAMuxB,gBAET,eAACvjC,EAAA,EAAD,WACE,sCACCgS,EAAMtJ,IAAMsJ,EAAMtJ,IAAM,WAG7B,+BACE,eAAC1I,EAAA,EAAD,WACE,uCACCgS,EAAMpJ,KAAOoJ,EAAMpJ,KAAO,QAE7B,eAAC5I,EAAA,EAAD,WACE,2CACCgS,EAAMoxB,SAAWpxB,EAAMoxB,SAAW,QAErC,eAACpjC,EAAA,EAAD,WACE,0CACCgS,EAAMzJ,QAAUyJ,EAAMzJ,QAAU,QAEnC,eAACvI,EAAA,EAAD,WACE,yCACCgS,EAAMqxB,MAAQrxB,EAAMqxB,MAAQ,QAE/B,eAACrjC,EAAA,EAAD,WACE,qDACCgS,EAAM0wB,eAAiB,SAAW,cAErC,eAAC1iC,EAAA,EAAD,WACE,uCACCgS,EAAMo/B,sBAIb,eAACl3B,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,UACE,+CAEF,cAAC6a,GAAA,EAAD,OAEF,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,+BACE,eAACI,EAAA,EAAD,WACE,wCACCgS,EAAMlJ,UAAUC,SAEnB,eAAC/I,EAAA,EAAD,WACE,+CACCgS,EAAMlJ,UAAUE,UAEnB,eAAChJ,EAAA,EAAD,WACE,+CACCgS,EAAMlJ,UAAUG,OAAS+I,EAAMlJ,UAAUG,OAAS,QAErD,eAACjJ,EAAA,EAAD,WACE,mDACCgS,EAAMlJ,UAAUI,iBAEnB,eAAClJ,EAAA,EAAD,WACE,0CACCgS,EAAMlJ,UAAUK,cAGrB,+BACE,eAACnJ,EAAA,EAAD,WACE,4CACCgS,EAAMlJ,UAAUM,aAEnB,eAACpJ,EAAA,EAAD,WACE,4CACCgS,EAAMlJ,UAAUO,UACb2I,EAAMlJ,UAAUO,UAChB,QAEN,eAACrJ,EAAA,EAAD,WACE,yCACCgS,EAAMlJ,UAAUQ,UAEnB,eAACtJ,EAAA,EAAD,WACE,uCACCgS,EAAMlJ,UAAUS,iBAKzB,eAAC2Q,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACE,cAAChW,EAAA,EAAD,UACE,4DAEF,cAAC6a,GAAA,EAAD,OAEF,cAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACE,+BACE,eAACI,EAAA,EAAD,WACE,4CACCgS,EAAM2/B,eAAiB3/B,EAAM2/B,eAAiB,QAEjD,eAAC3xC,EAAA,EAAD,WACE,uDACCgS,EAAMyxB,eAAiBzxB,EAAMyxB,eAAiB,QAEjD,eAACzjC,EAAA,EAAD,WACE,wDACCgS,EAAM0xB,aAAe1xB,EAAM0xB,aAAe,sBAOvD,cAACntB,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CACEC,QAASg9B,EACTxxC,MAAM,UACNmV,QAAQ,YACRD,KAAK,QAJP,6BCjfJzW,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLnM,SAAU,KAEXgb,KAAM,CACLnmB,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAIvBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASs6B,KACvB,IAAM9yC,EAAUR,KAEV2vC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,EAA0BjI,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA8B7M,mBAAS,IAAvC,mBACA,GADA,UAC8BA,mBAAS,KAAvC,mBAAQ6oB,EAAR,KAAgBC,EAAhB,KAMMxb,EAAc,WACnBT,GAAQ,IAOT,OACC,8BACC,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQC,QAfa,WACvB3C,GAAQ,IAcN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,KAAD,CAAW5L,UAAWH,EAAQmY,SAFhC,eAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,qBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,eAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,gBAAzC,UACC,cAAClL,EAAA,EAAD,CAAKI,GAAI,EAAGugB,SAAS,MAArB,SACC,eAAC+G,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC+rB,GAAA,EAAD,CACCn9B,WAAS,EACT4oB,YAAY,oBACZxnB,SAAU,SAACvD,GAAD,OAAOob,EAAUpb,EAAEC,OAAOxK,QACpC8pC,WAnCW,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBma,EAAUpb,EAAEC,OAAOu/B,eAmCnC/pC,MAAO0lB,IAER,cAACzX,EAAA,EAAD,CAAY5B,QAAS,kBAAMsZ,EAAUD,IAArC,SACC,cAAC0K,GAAA,EAAD,YAKqD,IAAvD6V,EAAgBh2B,QAAQq5B,UAAUC,SAASS,QAC1C,KAEA,cAACjO,GAAD,CAAc/U,KAAK,UAAU1C,OAAO,iBAIvC,cAAC5sB,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAACitB,GAAD,CAAepgB,KAAK,UAAUsc,OAAQ5d,c,+CCxG/BukB,GAAuB/zC,YAAH,0LAgBpBg0C,IARwBh0C,YAAH,sMAQGA,YAAH,sNAQrBi0C,GAAsBj0C,YAAH,iKCL1Bk0C,GAAY,CACjB,CAAEz8B,GAAI,WAAauM,MAAO,YAC1B,CAAEvM,GAAI,OAASuM,MAAO,QACtB,CAAEvM,GAAI,SAAWuM,MAAO,aACxB,CAAEvM,GAAI,YAAcuM,MAAO,gBAC3B,CAAEvM,GAAI,YAAcuM,MAAO,WAC3B,CAAEvM,GAAI,WAAauM,MAAO,YAC1B,CAAEvM,GAAI,SAAWuM,MAAO,WAGzB,SAASmwB,GAAkB/6B,GAC1B,IAAQg7B,EAA0Dh7B,EAA1Dg7B,iBAAkBC,EAAwCj7B,EAAxCi7B,YAAaC,EAA2Bl7B,EAA3Bk7B,SAAUC,EAAiBn7B,EAAjBm7B,aAC7CC,GAAW,EAMf,OALY,OAAZD,QAAY,IAAZA,KAAc5iB,SAAQ,SAAA/Q,GACrB,GAAIA,EAAQ6G,OACX,OAAO+sB,GAAW,KAInB,cAACp0B,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC9H,GAAA,EAAD,CACCg0B,cAAeJ,EAAc,GAAKA,EAAcC,EAChD5zB,QAAS4zB,EAAW,GAAKD,IAAgBC,EACzC18B,SAAUw8B,EACVl1B,WAAY,CAAE,aAAc,2BAG7Bg1B,GAAUhmC,KAAI,SAACwmC,GAAD,OACd,cAACp0B,GAAA,EAAD,CAECzT,MAAO6nC,EAASC,QAAU,QAAU,OACpCpsB,QAASmsB,EAASE,eAAiB,OAAS,UAH7C,SAKEF,EAAS1wB,OAJL0wB,EAASj9B,QAOD,IAAb+8B,EACD,qCACC,cAACl0B,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,uBAEC,UAcP,IAAMlgB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7B8lB,MAAO,CACNvlB,OAAQ,KAET6lB,eAAgB,CACflL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,GAERmmB,eAAgB,CACfvL,OAAQ,4BACRzb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZpK,OAAQ,GACRD,MAAO,GACPR,OAAQ,EACRqb,aAAc,MACd4T,OAAQ,eAIK,SAAS8jB,GAAT,GAYX,IAVF/qC,EAUC,EAVDA,MACA+J,EASC,EATDA,MACAihC,EAQC,EARDA,aACAC,EAOC,EAPDA,UACAC,EAMC,EANDA,eACAC,EAKC,EALDA,gBACArT,EAIC,EAJDA,iBACAx1B,EAGC,EAHDA,WACAD,EAEC,EAFDA,QAGKvL,EAAUR,KAChB,EAKOga,qBAAW7T,IAHjB4C,EAFD,EAECA,qBACMK,EAHP,EAGOA,oBACNJ,EAJD,EAICA,wBAGD,EAA4BzC,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACIulB,EAAevY,YAAY,IAAM7D,GAAO8D,QAAQ,IACpD,EAAkCjH,mBAAS,IAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KACA,EAA0B7rB,mBAAS,GAAnC,mBAAQwqC,EAAR,KACA,GADA,KACwCxqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,UAEGx9B,IACEA,EAAM4uB,iBAAiBvzB,OAAS,EACnC9F,EAAwByK,EAAM4uB,kBAE9Br5B,EAAwByK,EAAMiY,oBAIhC,IAYMopB,EAAc,SAACj9B,EAAOrE,GAC3B,IAAMilB,EAAgB3O,EAASirB,QAAQvhC,GACnCwhC,EAAc,IACK,IAAnBvc,EACHuc,EAAcA,EAAYC,OAAOnrB,EAAUtW,GACf,IAAlBilB,EACVuc,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,IACtCnZ,IAAkB3O,EAAShb,OAAS,EAC9CkmC,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,GAAI,IAC1CnZ,EAAgB,IAC1Buc,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,EAAGnZ,GAAgB3O,EAAS8nB,MAAMnZ,EAAgB,KAEnGoc,EAAuC,IAAvBG,EAAYlmC,OAAe,EAAIkmC,GAC/C5rC,EAAoB4rC,GACpBJ,EAAeI,GACf5iB,EAAY4iB,IAGb16B,qBAAU,WACT8X,EAAY,IACZsiB,GAAa,KACX,CAACC,IAEJ,IAEMO,EAAYjE,EAAcjyB,KAAKD,IAAIkyB,EAAaloC,EAAqB+F,OAASiiC,EAAOE,GAE3F,OACC,sBAAKtwC,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACuoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3b,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAAC8T,GAAA,EAAD,CAAgBnf,UAAWH,EAAQknB,MAAnC,SACC,eAAC3H,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,QACL,aAAW,gBAJZ,UAMC,cAACs9B,GAAD,CACCvzC,QAASA,EACTyzC,YAAanqB,EAAShb,OACtBklC,iBAtDuB,SAACn8B,GAC7B,GAAIA,EAAM3D,OAAOoM,QAAS,CACzB,IAAM60B,EAAepsC,EAAqB+E,KAAI,SAACsnC,GAAD,OAAOA,KAIrD,OAHAhjB,EAAY+iB,GACZP,EAAeO,QACf/rC,EAAoB+rC,GAGrB/rC,EAAoB,IACpBgpB,EAAY,KA8CP8hB,SAAUnrC,EAAqB+F,OAC/BqlC,aAAcprC,IAEf,eAACoX,GAAA,EAAD,WACEpX,EAAqB+E,KAAI,SAAC+jC,EAAKhsC,GAC/B,IAzBa2N,EAyBP6hC,GAzBO7hC,EAyBqBq+B,GAzBc,IAA3B/nB,EAASirB,QAAQvhC,IA0BhCkb,EAAO,kCAA8B7oB,GAC3C,OACC,cAAC,GAAD,CAEImG,WAAYA,EACfw1B,iBAAkBA,EAClBsT,YAAaA,EACbhrB,SAAUA,EACV+nB,IAAKA,EACLtxC,SAAUA,EACVulB,WAAYA,EACZpc,MAAOA,EACP+J,MAAOA,EACP4hC,eAAgBA,EAChB3mB,QAASA,GAXJmjB,EAAIr+B,QAeX0hC,EAAY,GACZ,cAACj1B,GAAA,EAAD,CAAU3e,MAAO,CAAEa,OAAQ,GAAK+yC,GAAhC,SACC,cAACh1B,GAAA,EAAD,CAAWo1B,QAAS,oBAY7B,SAAS9C,GAAT,GAA8I,IAAD,QAAxHX,EAAwH,EAAxHA,IAAKnoC,EAAmH,EAAnHA,MAAO2rC,EAA4G,EAA5GA,eAAgBrpC,EAA4F,EAA5FA,WAAYyH,EAAgF,EAAhFA,MAAOib,EAAyE,EAAzEA,QAASnuB,EAAgE,EAAhEA,SAAUulB,EAAsD,EAAtDA,WAAY0b,EAA0C,EAA1CA,iBAAkBsT,EAAwB,EAAxBA,YAAahrB,EAAW,EAAXA,SAE3HtpB,EAAUR,KACVE,EAAQiyB,eACd,EAAkC5rB,oBAAS,GAA3C,mBAAOgvC,EAAP,KAAkBC,EAAlB,KAEOxsC,EACAgR,qBAAW7T,IADX6C,wBAEP,EAAsC8K,YAAY8/B,IAA1C6B,EAAR,oBACA,EAAoC3hC,YAAY+/B,IAAxC6B,EAAR,oBAEMC,EAAkB,uCAAG,sBAAAxnC,EAAA,6DAC1BnC,GAAW,GADe,kBAGnBypC,EAA0B,CAC/B//B,UAAW,CACVC,MAAO,CACNxF,kBAAmB0hC,EAAI1hC,kBAExBkH,GAAIw6B,EAAIr+B,OARe,OAWzBxH,GAAW,GACXw1B,IACAjhC,EAAS,CAAEW,QAAS,kCAAmCD,OAAQ,UAAWF,MAAM,IAbvD,gDAezBR,EAAS,CAAEW,QAAS,qCAAuCD,OAAQ,QAASF,MAAM,IAfzD,yDAAH,qDAmBlBu9B,EAAc,WACnBkX,GAAcD,GACdK,KAGKA,EAAc,WACfniC,EAAM4uB,iBAAiBvzB,OAAS,GAC1B9F,EAAwByK,EAAM4uB,kBACvCr2B,GAAW,KAEXhD,EAAwByK,EAAMiY,mBAC9B1f,GAAW,KAIP6pC,EAAY,uCAAG,4BAAA1nC,EAAA,6DACpBnC,GAAW,GADS,SAGnBw1B,IAHmB,SAIKkU,EAAwB,CAC/ChgC,UAAW,CACV2B,GAAIw6B,EAAIr+B,OANS,OAIbsiC,EAJa,OASnBxX,IACAsX,IACAr1C,EAAS,CAAEW,QAAS40C,EAAU9gC,KAAK+gC,wBAAwB70C,QAASD,OAAQ,UAAWF,MAAM,IAX1E,kDAanBR,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAbvC,0DAAH,qDAiBlB,OACC,eAACkf,GAAA,EAAD,CACC4J,OAAK,EACLmB,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EAEXjgB,SAAUurB,EANX,UAQC,cAACn1B,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC9H,GAAA,EAAD,CACCtK,QAAS,SAAC8B,GACTi9B,EAAYj9B,EAAOg6B,IAEpBvxB,QAAS+0B,EACTv2B,WAAY,CAAE,kBAAmB4P,OAGnC,cAACxO,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BolC,EAAIluC,WAC/B,cAACuc,GAAA,EAAD,CAAWzT,MAAM,SAAjB,gBAA2BolC,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAKnuC,SAChC,cAACwc,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BolC,EAAI7tC,SAC/B,cAACkc,GAAA,EAAD,CAAWzT,MAAM,SAAjB,UAEqB,IAAnB4oC,GAA2BvrB,EAAShb,OAAS,EAAI,oBAAGxN,MAAO,CAACC,MAAO,SAAlB,eAA+BgM,YAAYskC,EAAI7tC,OAAS8hB,EAAa,KAAKtY,QAAQ,IAAlF,OAC5B,OAAlBqkC,EAAIzhC,UAAqB,EAAI,oBAAG9O,MAAO,CAACC,MAAO,SAAlB,eAA+BswC,EAAIzhC,UAAUjM,YAA7C,SAGlC,cAAC+b,GAAA,EAAD,CAAWzT,MAAM,SAAjB,UACqB,IAAnB4oC,GAA2BvrB,EAAShb,OAAS,EAAI,oBAAGxN,MAAO,CAACC,MAAO,OAAlB,cAA4BmI,EAA5B,QAA6CmoC,EAAIzhC,WAA+B,OAAlByhC,EAAIzhC,UAAyB,oBAAG9O,MAAO,CAACC,MAAO,OAAlB,cAA4BswC,EAAIzhC,UAAU8O,UAA1C,QAAJ,IAE1I,cAACgB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAAC,GAAD,CAAOolC,IAAKA,EAAKvT,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,MAEhF,cAAC31B,GAAA,EAAD,CAAyBzT,MAAM,SAA/B,SACC,cAACqmC,GAAA,EAAD,CAECt7B,SAAUm+B,EACVp0C,MAAM,UACN2U,UAAY27B,EAAIzhC,WACkB,IAA5ByhC,EAAIzhC,UAAU8O,UACpB82B,iBAAgBnE,EAAI1hC,kBAAmB0hC,EAAI1hC,iBAC3CgE,KAAK,mBACL2K,WAAY,CAAE,aAAc,uBAPvB+yB,EAAIr+B,MAFKq+B,EAAIr+B,KAanBq+B,EAAIxqB,OACH,cAACnH,GAAA,EAAD,CAAWzT,MAAM,SAAjB,gBAA2BolC,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAKxqB,cAAhC,aAA2B,EAAaC,QAExC,KAKDuqB,EAAItwC,MACH,cAAC2e,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAAC4d,GAAA,EAAD,CACC7R,MAAK,OAAEq5B,QAAF,IAAEA,GAAF,UAAEA,EAAKtwC,aAAP,aAAE,EAAY+oB,OACnBC,UAAU,MACVC,OAAK,EACLlP,oBAAqBmP,KAJtB,SAMC,qBACC9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACNuK,gBAAe,OAACgmC,QAAD,IAACA,GAAD,UAACA,EAAKtwC,aAAN,aAAC,EAAYmpB,IAC5BnpB,MAAOrB,EAAM2nB,QAAQoL,gBAAd,OAA8B4e,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAKtwC,aAAnC,aAA8B,EAAYmpB,YAOrD,OAnEGmnB,EAAIr+B,KA2EZ,IAAMyiC,GAAQ,SAAC,GAAkD,IAAjDpE,EAAgD,EAAhDA,IAAKvT,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aAE5C,OACC,gCACC,cAACl+B,EAAA,EAAD,CACCpW,MAAM,YACNwU,QAASuoB,EACTpoB,UAAY27B,EAAIzhC,WACiB,IAA5ByhC,EAAIzhC,UAAU8O,UAJpB,SAMC,cAACwf,GAAA,EAAD,MAED,eAACvoB,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,gCCpYC71C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCg2C,YAAa,CACZ,6BAA8B,CAC7Bh0C,MAAOhC,EAAM0B,QAAQ,GACrBO,OAAQjC,EAAM0B,QAAQ,KAGxB4lB,KAAM,CACLtlB,MAAO,KAELi0C,UAAU,CACNj0C,MAAO,KAEdR,OAAQ,CACPS,OAAQjC,EAAM0B,QAAQ,IAEpBw0C,UAAU,CACNj0C,OAAQ,SAID,SAASk0C,GAAT,GAAwD,IAA3B5iC,EAA0B,EAA1BA,MAAO+tB,EAAmB,EAAnBA,iBAC/C,EAAiC1tB,YAAY6/B,IAArC2C,EAAR,oBACA,EAMIt8B,qBAAW7T,IALX6C,EADJ,EACIA,wBACAC,EAFJ,EAEIA,kBACAC,EAHJ,EAGIA,qBACAC,EAJJ,EAIIA,iBACAC,EALJ,EAKIA,oBAGArG,EAAM0Q,EAAM/M,QAAQ3D,IACpBD,EAAO2Q,EAAM/M,QAAQ5D,KAErB6c,EAAOlM,EAAM/M,QAAQjD,iBAAiBG,6BAE1C,EAA4B2C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA4CgG,oBAAS,GAArD,mBAAQgwC,EAAR,KAAuBC,EAAvB,KACA,EAAoCjwC,oBAAS,GAA7C,mBAAQouC,EAAR,KAAmBD,EAAnB,KACA,EAAqBnuC,oBAAS,GAAtBu7B,EAAR,oBACA,EAAgCv7B,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KAEA,EAA0CzF,mBAAS,GAAnD,mBAAQkwC,EAAR,KAAsB5B,EAAtB,KACA,EAA4BtuC,mBAAS,GAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KAEMnrB,EAAUR,KAEV02C,EAAwB,WACtBjjC,EAAM4uB,iBAAiBvzB,OAAS,GAChC9F,EAAwByK,EAAM4uB,kBAC9Br2B,GAAW,KAEXhD,EAAwByK,EAAMiY,mBAC9B1f,GAAW,IAEf6oC,EAAgB,GAChBlpB,EAAS,GACT1iB,EAAkBgY,OAAO,EAAGhY,EAAkB6F,SAG5C6nC,GAAa,WACfH,GAAkBD,GAClBG,KAGE9B,GAAiBp3B,uBACnB,SAAC/J,GACG,IAAK,IAAI5E,EAAI,EAAGA,EAAI4E,EAAM3E,OAAQD,IAC1B4E,EAAM5E,GAAGuB,WAC6B,IAAjCqD,EAAM5E,GAAGuB,UAAU8O,YACpByM,EAASlY,EAAM5E,GAAGuB,UAAU8O,WACP,IAAjBzL,EAAM3E,QACN+lC,EAAgBphC,EAAM5E,GAAGuB,UAAUjM,gBAMvD,CAACsP,IAGDmjC,GAAiB,GAoGrB,IAAMtoB,GAAQ,uCAAG,sBAAAngB,EAAA,6DACbnC,GAAW,GADE,kBAGHsqC,EAAqB,CACvB5gC,UAAW,CACPC,MAAO,CACHkhC,WAAY5tC,MANf,OAUTytC,IACAlV,IACA7V,EAAS,GACTviB,EAAoB,IACpBF,EAAqB,IACrBwrC,GAAcC,GACdp0C,EAAS,CAAEW,QAAS,mCAAiCD,OAAQ,UAAWF,MAAM,IAhBrE,kDAkBTR,EAAS,CAAEW,QAAS,kDAAgDD,OAAQ,QAASF,MAAM,IAlBlF,0DAAH,qDA0Cd,OACI,gCACI,cAACV,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACoX,EAAA,EAAD,CACIpW,MAxBO,WACf,GAAIkS,EAAM4uB,iBAAiBvzB,OAAS,EAChC,IAAK,IAAID,EAAI,EAAGA,EAAI4E,EAAM4uB,iBAAiBvzB,OAAQD,IAAK,CAAC,IAAD,EACpD,OAAoD,KAAhD,UAAA4E,EAAM4uB,iBAAiBxzB,UAAvB,eAA2BsB,kBACpB,UAEA,eAIf,IAAK,IAAItB,EAAI,EAAGA,EAAI4E,EAAMiY,kBAAkB5c,OAAQD,IAAK,CAAC,IAAD,EACrD,OAAqD,KAAjD,UAAA4E,EAAMiY,kBAAkB7c,UAAxB,eAA4BsB,kBACrB,UAEA,WAUJnI,GACP+N,QAAS4gC,GACTzgC,SAAUzC,EAAM6uB,oBAAsB7uB,EAAM6uB,mBAAmBxzB,OAAS,IAA+C,IAA1C2E,EAAM6uB,mBAAmB,GAAGwU,UAH7G,SAKG,cAAC,KAAD,MAEH,eAAC3gC,GAAA,EAAD,CAAQpV,KAAMw1C,EAAev1C,QAAS01C,EAAuBtgC,WAAS,EAACrU,SAAS,KAAhF,UACA,cAAC+J,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACzD,cAACqK,GAAA,EAAD,UACgB,eAACsF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACxa,EAAA,EAAD,CAAKu4B,SAAU,EAAGt4B,QAAQ,OAAOkL,WAAW,SAA5C,SACK,0BAEL,cAACnL,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4gC,GAAalgC,KAAK,QAAzE,SACI,cAAC,KAAD,aAK5B,eAACH,GAAA,EAAD,WACgB,cAAClV,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACI,eAACt1C,EAAA,EAAD,WACI,mDACCgS,EAAMjN,gBAAgB2jB,iBAAmB1W,EAAMjN,gBAAgB2jB,iBAAmB,SAG3F,cAAC/oB,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACI,eAACt1C,EAAA,EAAD,WACI,qDACCgS,EAAMjN,gBAAgB01B,gBAAkBzoB,EAAMjN,gBAAgB01B,gBAAkB,SAGzF,eAACvgB,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,GAA7B,SACI,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACijC,GAAD,CACIG,eAAgBA,GAChBpT,iBAAkBA,EAClB/tB,MAAOA,EACP/J,MAAOA,EACPirC,UAAWA,EACXD,aAAcA,EACdG,gBAAiBA,EACjB7oC,WAAYA,EACZD,QAASA,QAIrB,eAAC4P,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,GAA7B,UACI,cAAC3a,EAAA,EAAD,CAAKqW,GAAI,EAAGu/B,OAAO,OAAO1qC,eAAe,SAAzC,SACI,sBAAK3L,UAAWH,EAAQgnB,KAAxB,UACI,cAACpmB,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACI,cAACt1C,EAAA,EAAD,CAAY4V,GAAG,yBAAyB4/B,cAAY,EAApD,SACI,4DAGR,cAAC71C,EAAA,EAAD,CAAKsW,GAAI,IACT,cAACtW,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAS4qC,aAAa,SAASv2C,UAAWH,EAAQ21C,UAArF,SACI,cAACgB,GAAA,EAAD,CACIjhC,SAAsC,IAA5B/M,EAAiB2F,OAC3BsoC,iBA/GxC,SAAmBnjC,GACf,MAAM,GAAN,OAAUA,IA+G0BvK,MAAOA,EAAM8D,QAAQ,GACrB,kBAAgB,8BAChB6pC,kBAAkB,OAClB7/B,SAjNV,SAACK,EAAOmU,GAClCL,EAASK,GACT/iB,EAAkBgY,OAAO,EAAGhY,EAAkB6F,QAE9C,IAAK,IAAID,EAAI,EAAGA,EAAI1F,EAAiB2F,OAAQD,IAAK,CAC9C,IACIyoC,EACAC,EAFAzxB,EAAevY,YAAY,IAAMye,GAAUxe,QAAQ,IAGnD9I,EAAkByE,EAAiB0F,GAAG5K,cAAcS,gBAExD4yC,EAAS/pC,YAAYpE,EAAiB0F,GAAG5K,cAAcG,aAAe0hB,EAAa,KAAKtY,QAAQ,IAChG+pC,EAAmBhqC,YAAYpE,EAAiB0F,GAAG5K,cAAcG,aAAekzC,GAAQ9pC,QAAQ,IAEhG,IAAIlJ,EAAaiJ,WAAY+pC,EAAS/pC,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAAOyK,QAAQ,IAExFjJ,EAAcgJ,WAAY+pC,EAAS/pC,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAAQ0K,QAAQ,IAC5FhJ,EAAW+I,aAAc+pC,EAAS33B,GAAQA,EAAQ,KAAKnS,QAAQ,IAC/DrJ,EAAcoJ,YAAY+pC,EAAShzC,EAAaC,GAAaiJ,QAAQ,IACrE/I,EAAiB8I,YAAYpJ,EAAcO,GAAiB8I,QAAQ,IAExEopC,GAAiB,CACbpjC,IAAKrK,EAAiB0F,GAAG2E,IACzBrD,kBAAkB,EAClBC,UAAU,CACN1L,gBAAiBA,EACjBR,cAAeiF,EAAiB0F,GAAG5K,cAAcC,cACjDS,cAAewE,EAAiB0F,GAAG5K,cAAcU,cACjDF,eAAgBA,EAChBN,YAAaA,EACbC,aAAckzC,EACdhzC,WAAYA,EACZC,YAAaA,EACbC,SAAUA,EACV0a,UAAW8M,EACX3b,kBAAmBknC,IAI3B1C,EAAgB1wC,GACgB,IAA5BgF,EAAiB2F,OACjB7F,EAAkByX,KAAKk2B,IAEvB1tC,EAAqB,CAAC0tC,gBA4KV,cAACx1C,EAAA,EAAD,CAAKqW,GAAI,EAAGpW,QAAQ,OAAOiL,eAAe,SAA1C,SACiC,IAA5BnD,EAAiB2F,OACd,gCACI,cAACrN,EAAA,EAAD,mCACA,cAAC+U,EAAA,EAAD,CACIe,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCtI,KAAK,QACLC,QAAQ,WACRhN,MAAQ+sC,EACRj/B,SAAU,SAACvD,GAAD,OAhLxB,SAACA,GACvB,IAAIujC,EAAYjqC,WAAW0G,EAAEC,OAAOxK,OACpC,GAAgC,IAA5BP,EAAiB2F,OAAc,CAC/B+lC,EAAgB2C,GAEhB,IAIID,EACAD,EALA93B,EAAiBjS,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAASwK,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAC1G4c,EAAOnS,YAAYiqC,GAAah4B,EAAe,IAAIhS,QAAQ,IAE3D9I,EAAkByE,EAAiB,GAAGlF,cAAcS,gBAGpDohB,EAAcvY,YAAamS,EAAOvW,EAAiB,GAAGlF,cAAcG,aAAgB,KAAKoJ,QAAQ,IACjG4C,EAAY7C,YAAY,IAAMuY,GAAYtY,QAAQ,IAEtD8pC,EAAS/pC,YAAYpE,EAAiB,GAAGlF,cAAcG,aAAe0hB,EAAa,KAAKtY,QAAQ,IAChG+pC,EAAmBhqC,YAAYpE,EAAiB,GAAGlF,cAAcG,aAAekzC,GAAQ9pC,QAAQ,IAEhG,IAAIlJ,EAAaiJ,WAAY+pC,EAAS/pC,WAAW,KAAD,OAAMxK,EAAM,GAAN,WAAeA,GAAQA,IAAOyK,QAAQ,IACxFjJ,EAAcgJ,WAAY+pC,EAAS/pC,WAAW,KAAD,OAAMzK,EAAO,GAAP,WAAgBA,GAASA,IAAQ0K,QAAQ,IAC5FhJ,EAAW+I,aAAc+pC,EAAS33B,GAAQA,EAAQ,KAAKnS,QAAQ,IAC/DrJ,EAAcoJ,YAAY+pC,EAAShzC,EAAaC,GAAaiJ,QAAQ,IACrE/I,EAAiB8I,YAAYpJ,EAAcO,GAAiB8I,QAAQ,IAExEopC,GAAiB,CACb,IAAOztC,EAAiB,GAAGqK,IAC3B,kBAAoB,EACpB,UAAY,CACR9O,gBAAiBA,EACjBR,cAAeiF,EAAiB,GAAGlF,cAAcC,cACjDS,cAAewE,EAAiB,GAAGlF,cAAcU,cACjDF,eAAgBA,EAChBN,YAAaA,EACbC,aAAckzC,EACdhzC,WAAYA,EACZC,YAAaA,EACbC,SAAUA,EACV0a,UAAW9O,EACXC,kBAAmBknC,IAI3B5rB,EAASvb,GACTlH,EAAqB,CAAC0tC,MAsI2Ba,CAAkBxjC,SAI3C,OAIR,cAAC7S,EAAA,EAAD,CAAKqW,GAAI,EAAGpW,QAAQ,OAAOiL,eAAe,SAA1C,SACI,cAACwJ,EAAA,EAAD,CACII,SAAsC,IAA5B/M,EAAiB2F,SAA6B,IAAbgzB,EAC3CprB,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QACLV,QAASuY,GALb,sC,kCC9T1BtuB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCw3C,UAAU,aACRx1C,MAAO,QACNhC,EAAMy3C,YAAYC,KAAK,MAAQ,CAC9B11C,MAAO,cAKE,SAAS21C,GAAT,GAA2C,IAAb3pC,EAAY,EAAZA,SACnC1H,EAA8B0H,EAA9B1H,gBAAiBkB,EAAawG,EAAbxG,SACnBlH,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMkY,EAAe,kBAAMlY,GAASrS,IAEpC,OACE,gCACE,cAAC4W,EAAA,EAAD,CACEpW,MAAM,UACNmV,QAAQ,YACRX,QAAS,kBAAMuV,KAHjB,SAKE,cAACwsB,GAAA,EAAD,MAEF,eAACC,GAAA,EAAD,CAAQC,OAAO,QAAQj3C,KAAMA,EAAMC,QAAS,kBAAMsqB,KAAlD,UACE,sBAAK3qB,UAAWH,EAAQk3C,UAAxB,UACE,eAAC/7B,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CACEE,MAAI,EACJC,GAAIpU,EAASoH,OAAS,EAAI,EAAI,GAC9BxN,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAH5C,SAKE,cAAClL,EAAA,EAAD,CACEqa,EAAG,EACHvZ,MAAM,QACNC,OAAO,QACPd,QAAQ,OACRiL,eAAe,SACfC,WAAW,SANb,SAQG7E,EAASoH,OAAS,EACjB,qBACE5M,MAAM,OACNg8B,IAAI,eACJngB,IAAKrW,EAAS,GAAG22B,aAInB,cAAC4Z,GAAA,EAAD,CAAc32C,MAAO,CAAEkL,SAAU,UAItC9E,EAASoH,OAAS,EACjB,cAAC6M,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACH,GAAA,EAAD,CAAMC,WAAS,EAAf,SACGlU,EAASoG,KAAI,SAACsO,EAAKvW,GAClB,OAAOA,EAAQ,EACb,cAAC8V,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACza,EAAA,EAAD,CACEqa,EAAG,EAEHtZ,OAAQ,IACRD,MAAO,IACPb,QAAQ,OACRiL,eAAe,SACfC,WAAW,SAPb,SASE,qBACErK,MAAM,OACNg8B,IAAI,eACJngB,IAAK3B,EAAIiiB,cAVNx4B,IAHOA,GAiBd,YAIR,QAEN,cAACzE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,eAACE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,UACE,eAACtC,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,eAACpa,EAAA,EAAD,WACE,sDACC+E,EAAgBzC,cACbyC,EAAgBzC,cAChB,OAEN,eAACtC,EAAA,EAAD,WACE,gDACC+E,EAAgBwI,cACbxI,EAAgBwI,cAChB,OAEN,eAACvN,EAAA,EAAD,WACE,yDACC+E,EAAgBlE,oBACjBkE,EAAgBlE,mBAAmBE,MAC/BgE,EAAgBlE,mBAAmBE,MAAO,OAEhD,eAACf,EAAA,EAAD,WACE,mDACC+E,EAAgB2jB,iBACb3jB,EAAgB2jB,iBAChB,OAEN,eAAC1oB,EAAA,EAAD,WACE,qDACC+E,EAAgB01B,gBACb11B,EAAgB01B,gBAChB,OAEN,eAACz6B,EAAA,EAAD,WACE,iDACC+E,EAAgB21B,YACb31B,EAAgB21B,YAChB,UAGR,eAACxgB,GAAA,EAAD,CAAME,MAAI,EAAV,UACE,eAACpa,EAAA,EAAD,WACE,mDACC+E,EAAgBslB,cACbtlB,EAAgBslB,cAChB,OAEN,eAACrqB,EAAA,EAAD,WACE,4CACC+E,EAAgBo1B,UAAYp1B,EAAgBo1B,UAAY,OAE3D,eAACn6B,EAAA,EAAD,WACE,+CACC+E,EAAgB41B,aACb51B,EAAgB41B,aAChB,OAEN,eAAC36B,EAAA,EAAD,WACE,+CACC+E,EAAgB61B,aACb71B,EAAgB61B,aAChB,OAEN,eAAC56B,EAAA,EAAD,WACE,wCACC+E,EAAgB+1B,MAAQ/1B,EAAgB+1B,MAAQ,kBAM3D,cAACn7B,EAAA,EAAD,CACE0V,SAAS,WACTohC,OAAQ,GACRh2C,MAAM,OACNb,QAAQ,OACRiL,eAAe,SALjB,SAOE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMuV,KACftV,UAAW,cAAC,KAAD,IALb,4BC9JV,IAAM8C,GAAaC,sBAAW,SAAoBC,EAAOC,GACvD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASm/B,GAAT,GAAwD,IAA5B1kC,EAA2B,EAA3BA,MAAO+tB,EAAoB,EAApBA,iBAChD,EAAwBj7B,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAA0DgO,qBACxD7T,IADM0C,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,mBAAoBvI,EAA7C,EAA6CA,SAI7C,EAA2BuT,YAAY6Y,IAAhCyrB,EAAP,oBAEMC,EAAoB,kBAAMjlC,GAASrS,IAEnCu3C,EAAkB,uCAAG,4BAAAnqC,EAAA,6DACzBnC,GAAW,GADc,kBAGFosC,EAAiB,CACpC1iC,UAAW,CACT2B,GAAI5D,EAAMD,OALS,OAGjBsB,EAHiB,OAQvBhM,GAAoBD,GACpB24B,IACAjhC,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKojC,iBAAiBl3C,SACjDD,OAAQ,UACRF,MAAM,IAERiL,GAAW,GACXqsC,IAhBuB,kDAkBvB93C,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERiL,GAAW,GACXqsC,IAxBuB,0DAAH,qDA4BxB,OACE,eAAC,WAAD,WAEE,cAAC1gC,EAAA,EAAD,CACE5B,QAAS,kBAAMsiC,KACfniC,YACIzC,EAAM6uB,oBAA0D,IAApC7uB,EAAM6uB,mBAAmBxzB,UAEP,IAA1C2E,EAAM6uB,mBAAmB,GAAGwU,UALtC,SAUE,cAACpY,GAAA,EAAD,CACEn9B,MACEkS,EAAM6uB,oBAA0D,IAApC7uB,EAAM6uB,mBAAmBxzB,SAEP,IAA1C2E,EAAM6uB,mBAAmB,GAAGwU,UAD5B,WAGA,YAIV,eAAC3gC,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,kBAAMq3C,KACf,kBAAgB,+BALlB,UAOE,cAAChiC,GAAA,EAAD,CAAagB,GAAG,+BAAhB,SACG,mDAEH,eAACW,GAAA,EAAD,CAAe1W,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAAzD,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMsiC,KAAqB92C,MAAM,UAAlD,sBAGA,cAACuU,EAAA,EAAD,CACEC,QAAS,kBAAMuiC,KACf/2C,MAAM,YACNyU,UACEjK,EAAU,cAACG,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,KAJ/D,+BCjFV,IAAMzW,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACT5Z,UAAW,OACd,wBAAyB,CACxBX,QAAS,SAGT2b,OAAQ,CACN9a,MAAO,IACPC,OAAQ,OAIG,SAASsqC,GAAT,GAAiE,IAAvC7E,EAAsC,EAAtCA,iBAAkBpG,EAAoB,EAApBA,iBACnDhhC,EAAUR,KAEhB,OACE,qBAAKW,UAAWH,EAAQgnB,KAAxB,SACE,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAAC,aAAW,eAA/B,UACE,cAAC/I,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,4BACA,cAACA,GAAA,EAAD,4BACA,cAACA,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,yBACA,cAACA,GAAA,EAAD,mBACA,cAACA,GAAA,EAAD,6BACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,4BAGJ,cAACC,GAAA,EAAD,CAAWxf,UAAU,cAArB,SACGinC,EAAiB95B,KAAI,SAACI,EAAUrI,GAC/B,OACE,cAAC,GAAD,CAEEqI,SAAUA,EACVszB,iBAAkBA,GAFb37B,eAavB,IAAM0yC,GAAkB,SAAC,GAAoC,IAAlCrqC,EAAiC,EAAjCA,SAAUszB,EAAuB,EAAvBA,iBACnC,OACE,cAAC,WAAD,UACE,eAACvhB,GAAA,EAAD,CAAU4J,OAAK,EAAf,UACE,cAAC3J,GAAA,EAAD,UAAYhS,EAAS1H,gBAAgBzC,gBACrC,cAACmc,GAAA,EAAD,UAAYhS,EAAS1H,gBAAgBwI,gBACrC,cAACkR,GAAA,EAAD,UAAYhS,EAAS1H,gBAAgB2jB,mBACrC,cAACjK,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACGja,EAASo0B,mBAAmBx0B,KAC3B,SAAC4b,GAAD,gBACKA,EAAW8uB,mBADhB,YACsC9uB,EAAW+uB,wBAGrD,cAACv4B,GAAA,EAAD,UAAYhS,EAAS1H,gBAAgBslB,gBACrC,cAAC5L,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAAC0vB,GAAD,CAAoB3pC,SAAUA,MAEhC,cAACgS,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAACoZ,GAAD,CACEvT,QAAQ,EACRva,MAAOvF,EACPszB,iBAAkBA,MAGtB,cAACthB,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAACkuB,GAAD,CACE5iC,MAAOvF,EACPszB,iBAAkBA,MAGtB,cAACthB,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAACgwB,GAAD,CACE1kC,MAAOvF,EACPszB,iBAAkBA,Y,8BC7ExB1oB,GAAaC,sBAAW,SAAoBC,EAAOC,GACxD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS0/B,GAAT,GAAyD,IAA3BC,EAA0B,EAA1BA,wBAC5C,EAA0BpyC,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KAEMwlC,EAAoB,kBAAMxlC,GAASrS,IAEzC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQoB,kBAAgB,EAAC3V,MAAM,UAAUwU,QAAS6iC,EAAmBniC,KAAK,QAAQT,UAAW,cAAC6iC,GAAA,EAAD,IAA7F,iCAGA,eAAC1iC,GAAA,EAAD,CACCpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS43C,EACT,kBAAgB,8BAChB72C,SAAS,KACTqU,WAAS,EAPV,UASC,cAACC,GAAA,EAAD,CAAagB,GAAG,8BAAhB,SAA+C,wBAC/C,cAACf,GAAA,EAAD,UACC,cAAC,GAAD,CAA0BqiC,wBAAyBA,MAEpD,cAAC3gC,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CAAQY,QAAQ,YAAYX,QAAS6iC,EAAmBr3C,MAAM,UAAUkV,KAAK,QAA7E,4BASL,IAAMqiC,GAA2B,SAAC,GAA+B,IAA9BH,EAA6B,EAA7BA,wBAC5BxlC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACvC3F,EAAoBmR,qBAAW7T,IAA/B0C,gBAGR,EAA0CwR,aAASuS,GAAsB,CACxElX,UAAW,CAAEtK,SAAU+H,EAAO/H,SAASoI,IAAKlI,QAAS6H,EAAO7H,QAAQkI,OAD7DzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAQ9B,GAJAoH,qBAAU,WACTpH,MACE,CAAEA,EAASrK,IAEVkD,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAK+F,IAAY/F,IAAUgP,EAC1B,OACC,cAAC5T,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAACV,EAAA,EAAD,CAAYiV,QAAQ,KAApB,0CAKH,IAAQqiC,EAA8B/jC,EAA9B+jC,0BAER,OACC,cAAC33C,EAAA,EAAD,CAAKe,OAAO,OAAZ,SACC,cAAC2d,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CAAO,aAAW,eAAetJ,KAAK,QAAtC,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,OAAjB,iCACA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,OAAjB,2BACA,cAACyT,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,CAAWzT,MAAM,QAAjB,4BAGF,cAAC0T,GAAA,EAAD,UACE44B,EAA0BjrC,KAAI,SAACI,EAAUrI,GAAX,OAC9B,cAAC,GAAD,CAAkC4N,MAAOvF,EAAUgF,QAASA,EAASylC,wBAAyBA,GAAnE9yC,gBAS5BmzC,GAAuB,SAAC,GAAiD,IAA/CvlC,EAA8C,EAA9CA,MAAOP,EAAuC,EAAvCA,QAASylC,EAA8B,EAA9BA,wBAC/C,EAA0BpyC,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAAgC7M,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KACQxF,EAAoBiN,EAAMvF,SAA1B1H,gBAEAjG,EAAayZ,qBAAW7T,IAAxB5F,SAEL,EAA4BuT,YAAY+Y,IAAhCosB,EAAR,oBAEGC,EAAqB,kBAAM9lC,GAASrS,IAEpCo4C,EAAiB,uCAAG,4BAAAhrC,EAAA,6DACzBnC,GAAW,GADc,kBAGHitC,EAAgB,CACpCvjC,UAAW,CACV2B,GAAI5D,EAAMD,OALY,OAGlBsB,EAHkB,OAQf5B,IACTylC,IACAp4C,EAAS,CAAEW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKikC,gBAAgB/3C,SAAWD,OAAQ,UAAWF,MAAM,IAC/FiL,GAAW,GACXktC,IAZwB,kDAcxB34C,EAAS,CAAEW,QAAQ,UAAD,OAAY,KAAMA,SAAWD,OAAQ,QAASF,MAAM,IACtEiL,GAAW,GAfa,0DAAH,qDAmBvB,OACC,eAAC,WAAD,WACC,eAACiU,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,OAAjB,SAAyBjG,EAAgBzC,gBACzC,cAACmc,GAAA,EAAD,CAAWzT,MAAM,OAAjB,SAAyBjG,EAAgBwI,gBACzC,cAACkR,GAAA,EAAD,UAAY1Z,EAAgB2jB,mBAC5B,cAACjK,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SACEV,EACA,cAAC4L,EAAA,EAAD,CAAYpW,MAAM,UAAU2U,UAAQ,EAACH,QAASmjC,EAA9C,SACC,cAAChtC,EAAA,EAAD,CAAkBuK,KAAM,OAGzB,cAACkB,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAASmjC,EAArC,SACC,cAACE,GAAA,EAAD,WAKJ,eAACjjC,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASk4C,EAAoB,kBAAgB,4BAAjE,UACC,cAAC7iC,GAAA,EAAD,CAAagB,GAAG,4BAAhB,SAA6C,mCAE7C,eAACW,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASmjC,EAAoB33C,MAAM,UAA3C,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAAS,kBAAMojC,KAAqB53C,MAAM,UAAUqb,WAAS,EAArE,+BChJC5c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,KAEZ60B,QAAS,CACPn/B,MAAO,KAETslB,KAAM,CACJmS,SAAU,EACV9tB,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,WAIxC3O,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASqgC,KACtB,IAAM74C,EAAUR,KAChB,EAAwB4I,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA4B4G,qBAAW7T,IAA/B7F,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SAMTsT,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS,WAT7B3C,GAAQ,IASN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,qBACEwR,IAAI,2EACJmgB,IAAI,aACJv9B,UAAWH,EAAQ6gC,YALzB,iBAWF,cAAChhC,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAAC4V,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,EACTyH,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,uBAGA,cAAC1C,EAAA,EAAD,CACE8G,WAAS,EACTrb,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMlC,KACfmC,UAAW,cAAC,KAAD,IALb,yBAWJ,cAAC,GAAD,UAMR,IAAMsjC,GAAoB,WACxB,IAAMnmC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,mBAAS,IAArC,mBAAOymC,EAAP,KAAeO,EAAf,KACA,EAAgChnC,mBAAS,IAAzC,mBAAO2xB,EAAP,KAAiBC,EAAjB,KACA,EAAsC5xB,oBAAS,GAA/C,mBAAOgzC,EAAP,KAAoBC,EAApB,KACA,EAA0BjzC,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACMnrB,EAAUR,KAYhB,EAA0Cqa,aAASoS,GAAmB,CACpE/W,UAAW,CACTtK,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,IACxBw5B,SACHuM,eAEFhS,YAAa,iBAPJx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAU9B,GAAInH,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAGN,GAAIlG,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG3B,IAAQ4hC,EAAqB5yB,EAArB4yB,iBAkBR,OACE,gCACE,eAACxmC,EAAA,EAAD,CAAKyiB,GAAI,EAAGnM,GAAI,EAAGrW,QAAQ,OAA3B,UACE,cAACD,EAAA,EAAD,CAAKE,MAAO,CAAEY,MAAO,SAArB,SACE,uBACE6tB,SArBe,SAAClY,GAExB,GADAA,EAAMC,iBACW,KAAbogB,EAGF,OAFAqV,EAAU,SACVr6B,EAAQ,CAAE85B,OAAQ,KAGpBO,EAAUrV,IAeF52B,MAAO,CAAED,QAAS,OAAQkL,WAAY,UAFxC,UAIE,cAAC0P,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,cAAC2I,EAAA,EAAD,CACE/H,GAAG,kBACHE,KAAK,OACL7N,MAAOwuB,EACP1gB,SAAU,SAACvD,GAAD,OAAOkkB,EAAYlkB,EAAEC,OAAOxK,QACtCkN,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAACa,EAAA,EAAD,CACEJ,KAAK,SACL,aAAW,kBACXQ,KAAK,MAHP,SAKE,cAAC+hB,GAAA,EAAD,YAME,KAAXkT,EACC,cAACr1B,EAAA,EAAD,CAAYpW,MAAM,UAAUwU,QAAS,kBAjC/CoiB,EAAY,IACZoV,EAAU,SACVr6B,EAAQ,CAAE85B,OAAQ,MA+BR,SACE,cAACyM,GAAA,EAAD,MAEA,UAIR,cAACr4C,EAAA,EAAD,CAAKu4B,SAAU,IACf,eAACv4B,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC,GAAD,CAAqBs3C,wBAAyBzlC,IAC9C,cAAC9R,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAAC0d,GAAD,CAAevT,QAAQ,EAAOwT,iBAAkBtuB,UAGpD,eAAC9R,EAAA,EAAD,CAAKyiB,GAAI,EAAT,UACE,qBAAKljB,UAAWH,EAAQgnB,KAAxB,SACE,eAACuE,GAAA,EAAD,CACLG,eAAe,UACRxiB,MAAOA,EACP8N,SApGW,SAACK,EAAOnO,GAC3BiiB,EAASjiB,GAEX8vC,EADY,IAAV9vC,IAmGQ,aAAW,sBAJb,UAOE,cAAC0iB,GAAA,EAAD,CAAKxI,MAAM,0BACX,cAACwI,GAAA,EAAD,CAAKxI,MAAM,6BAGf,cAAC,GAAD,CACEgkB,iBAAkBA,EAClBpG,iBAAkBtuB,WC5Nb,SAASwmC,KAEpB,OACI,cAAC,GAAD,UACI,cAACL,GAAD,MCSZ,IAAMr5C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAAS+3C,GAAT,GAAiF,IAA1DjpB,EAAyD,EAAzDA,KAAMjd,EAAmD,EAAnDA,MAAOjI,EAA4C,EAA5CA,SAAUC,EAAkC,EAAlCA,YAAakgB,EAAqB,EAArBA,SAAUzY,EAAW,EAAXA,QAC7EC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzChO,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACA,EAAkC3qC,mBAAS,IAA3C,mBAAQ2xB,EAAR,KAAkBC,EAAlB,KACA,EAAsD5xB,mBAAS,IAA/D,mBAAQ8lC,EAAR,KAA4BC,EAA5B,KACA,EAA4B/lC,mBAAS,CACpCtF,OAAQ,GACRC,QAAS,GACTH,MAAM,IAHP,mBAAQT,EAAR,KAAeC,EAAf,KA0BA,OAXA+Z,qBACC,WACCgyB,EACC74B,EAAMlC,QAAO,SAACkC,GACb,OAAOA,EAAM6T,MAAMilB,cAAcrS,SAAShC,EAASqU,qBAItD,CAAErU,EAAUzkB,IAIZ,sBAAK9S,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACuoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAACrmB,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACiK,EAAA,EAAD,CACCJ,WAAS,EACT4oB,YAAY,YACZtoB,QAAQ,WACRc,SAAU,SAACvD,GAAD,OAAOkkB,EAAYlkB,EAAEC,OAAOxK,YAGxC,cAACoW,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,UAAqB,SAATwQ,EAAkB,QAAU,eACY,IAAnDvd,EAAOwG,QAAQq5B,UAAU4G,eAAe9/B,OAAoB,KAC5D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAEqD,IAArDhV,EAAOwG,QAAQq5B,UAAU4G,eAAe9J,SAAsB,KAC9D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,UACEksB,EACCuF,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GAAN,OACJ,cAAC,GAAD,CAAwBgsC,IAAKA,EAAKtxC,SAAUA,EAAUmwB,KAAMA,EAAMllB,SAAUA,EAAUC,YAAaA,EAAakgB,SAAUA,EAAUzY,QAASA,GAA5HrN,aAKtB,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAO3zB,EAAM3E,OACbmiC,YAAaA,EACbF,KAAMA,EACNiB,aAjEqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAiELC,oBA9D4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,YAmEV,IAAMwB,GAAa,SAAC,GAAuE,IAArEX,EAAoE,EAApEA,IAAKtxC,EAA+D,EAA/DA,SAAUmwB,EAAqD,EAArDA,KAAMllB,EAA+C,EAA/CA,SAAUC,EAAqC,EAArCA,YAAakgB,EAAwB,EAAxBA,SAAUzY,EAAc,EAAdA,QACrEC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAAoCjI,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KACMlX,EAAc,kBAAMkX,GAAcD,IACxC,EAA0BzhC,YAAYuc,IAA9BwpB,EAAR,oBAGMhE,EAAY,uCAAG,8BAAA1nC,EAAA,+EAGA0rC,EAAc,CAChCnkC,UAAW,CACV2B,GAAIw6B,EAAIr+B,IACRmC,MAAM,CACL+a,KAAKA,EACLpJ,MAAM,OARU,OAGbwyB,EAHa,OAafC,EAAW,CAAE74C,QAAS44C,EAAK9kC,KAAK6kC,cAAc34C,QAASD,OAAQ,UAAWF,MAAM,GACpFR,EAASw5C,GACT7mC,IACAorB,IAhBmB,kDAkBlBA,IACD/9B,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAnBvC,0DAAH,qDAuBZ0nB,EAAW,SAACuxB,GACjB,IAAIA,EAGH,OAFAvuC,EAAY,SACZkgB,EAAS,IAGVlgB,EAAYuuC,EAAKxmC,KACjBmY,EAASquB,EAAK1yB,QAGf,OACC,cAAC,WAAD,UACC,eAACrH,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAAGjgB,SAAUte,IAAaqmC,EAAIr+B,IAAzE,UACC,cAAC0M,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UACC,4BAAIowC,EAAIvqB,aAG0C,IAAnDnU,EAAOwG,QAAQq5B,UAAU4G,eAAe9/B,OAAoB,KAC5D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE3c,IAAaqmC,EAAIr+B,IACjB,cAACmE,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,KAA3B,SACC,cAAC,KAAD,MAGD,cAAC9Q,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,EAASopB,IAApC,SACC,cAAChnB,GAAA,EAAD,SAKkD,IAArD1X,EAAOwG,QAAQq5B,UAAU4G,eAAe9J,SAAsB,KAC9D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC,GAAD,CAAOmW,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,YAQrEI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,gCACC,cAACl+B,EAAA,EAAD,CAAYpW,MAAM,YAAYwU,QAASuoB,EAAvC,SACC,cAACI,GAAA,EAAD,MAED,eAACvoB,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,gCC3LU,SAASoE,GAAT,GAAmC,IAATvpB,EAAQ,EAARA,KACxC,EAA4BnqB,mBAAS,IAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KACA,EAAkCplB,mBAAS,IAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAA4BlF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAG/C,EAA0C6L,aAAS8V,GAAgB,CAClEza,UAAW,CAAEtK,SAAU+H,EAAO/H,SAASoI,IAAKkd,UADrC3kB,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9B,EAAuBY,YAAYoc,IAA3BM,EAAR,oBACA,EAA4B1c,YAAYsc,IAAhC8pB,EAAR,oBAEA,GAAInuC,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAQm0C,EAAkBnlC,EAAlBmlC,cAEF5qB,EAAc,uCAAG,kCAAAphB,EAAA,yDAEjBzE,EAFiB,6DAMf+mB,EAAc/mB,GACjB8B,EAPkB,qBAQmC,IAAnD2H,EAAOwG,QAAQq5B,UAAU4G,eAAe9/B,OARxB,yCASZvZ,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KATtF,cAWbq5C,EAAoBzsC,GAAe8iB,GAXtB,UAYNypB,EAAgB,CAC5BxkC,UAAW,CACVC,MAAO,CACN2R,MAAO8yB,EACP1pB,QAEDrZ,GAAI7L,KAlBa,QAYnBsuC,EAZmB,2CAuBoC,IAApD3mC,EAAOwG,QAAQq5B,UAAU4G,eAAelG,QAvBxB,0CAwBZnzC,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KAxBtF,yBA0BNyvB,EAAW,CACvB9a,UAAW,CACVC,MAAO,CACN2R,MAAOmJ,EACPC,OACAplB,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAhCV,QA0BnBsmC,EA1BmB,eAsCrB5mC,IACAyY,EAAS,IACTlgB,EAAY,IACRsuC,EAAYvuC,EAAY,CAAEtK,QAAS44C,EAAK9kC,KAAKklC,gBAAgBh5C,QAASD,OAAQ,UAAWF,MAAM,GAAO,CAAEG,QAAS44C,EAAK9kC,KAAKwb,WAAWtvB,QAASD,OAAQ,UAAWF,MAAM,GAC5KR,EAASw5C,GA1CY,kDA6CrBx5C,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IA7CvC,0DAAH,qDAiDpB,OACC,eAACK,EAAA,EAAD,WACC,cAACf,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASmL,GAAI,EAApE,UACC,cAAClB,EAAA,EAAD,CACCa,GAAG,6BACHuM,MAAgB,SAAT8M,EAAkB,QAAU,YACnCha,QAAQ,WACRD,KAAK,QACL/M,MAAOA,EACP8N,SAAU,SAACvD,GAAD,OAAO0X,EAAS1X,EAAEC,OAAOxK,MAAMmmB,kBAE1C,cAACzuB,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQS,kBAAgB,EAACnB,QAASwZ,EAAnF,UACC,cAACtZ,GAAA,EAAD,IADD,gBAID,cAAC0jC,GAAD,CAAalmC,MAAO0mC,EAAezpB,KAAMA,EAAMllB,SAAUA,EAAUC,YAAaA,EAAakgB,SAAUA,EAAUzY,QAASA,O,oCC1F7H,SAAS4X,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,oCAA+BxR,GACjC,iDAAyCA,IACrCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGkG,GAAI,EAAGsmB,UAAU,OAA5B,SACE13B,OAaN,SAAS4kB,GAAUrlB,GAClB,MAAO,CACNwR,GAAG,wBAAD,OAA0BxR,GAC5B,gBAAgB,6BAAhB,OAA8CA,IAIhD,I,YAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACPC,OAAQ,QACR0J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3ClP,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEP2oB,QAAS,CACRn/B,MAAO,KAERyW,KAAM,CACLnM,SAAU,KAEX6tC,iBAAkB,CACjBn4C,MAAO,QAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASshC,KACvB,IAAM95C,EAAUR,KAChB,EAA0BuG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA4B7M,mBAAS,GAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KAIMga,EAAkB,kBAAMvyB,GAASrS,IAEvC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACC,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,wEAAwEmgB,IAAI,aAAav9B,UAAWH,EAAQ6gC,YAFvH,wBAOD,eAAClrB,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,kBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,qBAAK7L,UAAWH,EAAQgnB,KAAxB,SACC,eAACpmB,EAAA,EAAD,WACC,cAACma,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACC,eAACjX,GAAA,EAAD,CACCriB,MAAOA,EACP8N,SAhCc,SAACK,EAAOmU,GAAR,OAAqBL,EAASK,IAiC5CE,eAAe,UACfC,UAAU,UACVouB,UAAQ,EALT,UAOC,cAACnuB,GAAA,EAAD,aACCxI,MAAM,SACNjL,KACC,qBAAKoF,IAAI,uEAAuEmgB,IAAI,eAAev9B,UAAWH,EAAQ65C,oBAEnHnvB,GAAU,KAEf,cAACkB,GAAA,EAAD,aACCxI,MAAM,UACNjL,KACC,qBAAKoF,IAAI,uEAAuEmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ65C,oBAEpHnvB,GAAU,UAIjB,gCACC,cAAC,GAAD,CAAUxhB,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAAC6V,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACk4C,GAAD,CAAgBvpB,KAAK,aAGvB,cAAC,GAAD,CAAUhnB,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAAC6V,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACk4C,GAAD,CAAgBvpB,KAAK,8BC3IvB,IAAM8pB,GAAuB56C,YAAH,iaAiBpB66C,GAAyB76C,YAAH,+QAQtB86C,GAA0B96C,YAAH,wMAQvB+6C,GAAwB/6C,YAAH,2JCT5BI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAASg5C,GAAT,GAA8F,IAAD,IAApEC,EAAoE,EAApEA,QAASC,EAA2D,EAA3DA,aAAcC,EAA6C,EAA7CA,UAAWC,EAAkC,EAAlCA,UAAWC,EAAuB,EAAvBA,WAAY16C,EAAW,EAAXA,SAC1FC,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACM/9B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAoCjI,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KACMlX,EAAc,kBAAMkX,GAAcD,IAKpC2F,EAAqB,GAEzB,EAA0C7gC,aAASmgC,GAAqB,CACvE9kC,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAHpBzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAM9B,EAAiCY,YAAY6mC,IAArCQ,EAAR,oBAEA7gC,qBACC,WACCpH,MAED,CAAE+nC,EAAY/nC,IAGZ8B,IACFkmC,EAAsBlmC,EAAKkmC,qBAG5B,IAKMrF,EAAY,uCAAG,sBAAA1nC,EAAA,+EAEbgtC,EAAqB,CAC1BzlC,UAAW,CACV2B,GAAI0jC,KAJa,OAOnB7nC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDu9B,IACAwc,EAAa,IAVM,gDAYnBv6C,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAZvC,yDAAH,qDAgBlB,OAAIiF,EACI,cAACmG,GAAD,CAAWnG,MAAOA,IAGtB+F,EAEF,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAOF,sBAAKvL,UAAWH,EAAQgnB,KAAxB,UACC,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,yBACkD,IAAjD/M,EAAOwG,QAAQq5B,UAAUoI,aAAathC,OAAoB,KAC1D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAEmD,IAAnDhV,EAAOwG,QAAQq5B,UAAUoI,aAAatL,SAAsB,KAC5D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,oBACE+6B,SADF,iBACE,EAAqBtJ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,UADtE,aACE,EAAkFnjC,KAAI,SAAC+jC,EAAKhsC,GAC5F,OACC,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,UAAY2xB,EAAIwJ,mBACkC,IAAjDloC,EAAOwG,QAAQq5B,UAAUoI,aAAathC,OAAoB,KAC1D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,WACpBilC,GAAU,GACVF,EAAajJ,EAAIr+B,KACjBqnC,EAAQ,CACPQ,gBAAiBxJ,EAAIwJ,mBAJvB,SAOC,cAACxwB,GAAA,EAAD,SAIiD,IAAnD1X,EAAOwG,QAAQq5B,UAAUoI,aAAatL,SAAsB,KAC5D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,WACpB+kC,EAAajJ,EAAIr+B,KACjB8qB,KAFD,SAIC,cAACI,GAAA,EAAD,UArB+CmT,EAAIr+B,eA+B5D,cAACs+B,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAO8T,EAAoBpsC,OAC3BmiC,YAAaA,EACbF,KAAMA,EACNiB,aAvHqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAuHLC,oBAhG4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,SAiGP,cAAC,GAAD,CAAO1S,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,OAKxE,IAAMI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,8BACC,eAAC1/B,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,+BC1KC71C,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAERy3B,SAAU,CACTA,SAAU,KAIG,SAAS2hB,KACvB,IAAM96C,EAAUR,KAChB,EAAoCuG,oBAAS,GAA7C,mBAAO00C,EAAP,KAAmBM,EAAnB,KACA,EAAwBh1C,mBAAS,CAChC80C,gBAAiB,KADlB,mBAAOrmC,EAAP,KAAa6lC,EAAb,KAGA,EAA4Bt0C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA0BgG,oBAAS,GAAnC,mBAAOP,EAAP,KAAc0F,EAAd,KACMyH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,oBAAS,GAArC,mBAAOynB,EAAP,KAAegtB,EAAf,KACA,EAAkCz0C,mBAAS,IAA3C,mBAAOw0C,EAAP,KAAkBD,EAAlB,KAEA,EAA8BhnC,YAAY2mC,IAAlCe,EAAR,oBACA,EAAmC1nC,YAAY4mC,IAAvCe,EAAR,oBASMC,EAAY,uCAAG,8BAAAvtC,EAAA,kEAEf6G,EAAKqmC,gBAFU,uBAGlB3vC,GAAS,GAHS,6BAMZiK,EAAQX,GACXgZ,EAPe,qBAQqC,IAAlD7a,EAAOwG,QAAQq5B,UAAUoI,aAAa1H,QARzB,0CASTnzC,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAT3F,yBAWVy6C,EAAkB,CACvB9lC,UAAW,CACVC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B2uB,QAAShvB,EAAOK,OAhBF,oCAqBoC,IAAjDL,EAAOwG,QAAQq5B,UAAUoI,aAAathC,OArBzB,0CAsBTvZ,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAtB3F,eAwBV46C,EAAmBhuC,GAAegI,GAxBxB,UAyBV8lC,EAAuB,CAC5B/lC,UAAW,CACVC,MAAOgmC,EACPtkC,GAAI0jC,KA5BU,QA+BhBC,GAAU,GA/BM,QAkClBz6C,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD85C,EAAQ,CAACQ,gBAAiB,KAC1BE,GAAeN,GACfH,EAAa,IArCK,oHAAH,qDAgDlB,OACC,sBAAKn6C,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACkB,EAAA,EAAD,CAAYiV,QAAQ,KAApB,8BACA,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACC,cAACC,EAAA,EAAD,CACCxQ,MAAOA,EACPqR,GAAG,6BACHX,QAAQ,WACRD,KAAK,QACLtC,KAAK,kBACLzK,MAAOsL,EAAKqmC,gBACZ7jC,SAnEsB,SAACvD,GAC1B4mC,EAAQ,2BACJ7lC,GADG,kBAELf,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAiExB8pC,WAjBe,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBwmC,OAkBrB,cAACt6C,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQV,QAAS2lC,EAAcxkC,kBAAgB,EAAhG,UACC,cAACjB,GAAA,EAAD,IADD,gBAID,cAAC,GAAD,CACC4kC,QAASA,EACTE,UAAWA,EACXD,aAAcA,EACdE,UAAWA,EACXC,WAAYA,EACZ16C,SAAUA,OCxGd,IAAMP,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS4iC,KACvB,IAAMp7C,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,8EAA8EmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFvI,oBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,0BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACu5C,GAAD,cC7CN,IAAMO,GAAU,CACf,CAAExkC,GAAI,EAAGuM,MAAO,cAAe7B,SAAU,KACzC,CAAE1K,GAAI,EAAGuM,MAAO,QAAS7B,SAAU,KACnC,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,eAAgB7B,SAAU,KAC1C,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,kBAAmB7B,SAAU,KAC7C,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,WAAY7B,SAAU,GAAItV,MAAO,UAK5CzM,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAEZgb,OAAQ,CACP9a,MAAO,IACPC,OAAQ,OAIK,SAAS25C,GAAT,GAA6C,IAAjBprB,EAAgB,EAAhBA,KAAMsc,EAAU,EAAVA,OAC1C2C,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAElDhO,EAAUR,KACRsI,EAAW0R,qBAAWiqB,IAAtB37B,OACR,EAA0B/B,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAGA,EAA0C72B,aAASkrB,GAAkB,CACpE7vB,UAAW,CAAEgb,OAAMsc,YADZjhC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9BoH,qBACC,WACCpH,MAED,CAAE5K,EAAQ4K,IAYX,GAAInH,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAQ0rC,EAAoB18B,EAApB08B,gBAER,OACC,eAAC5oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAAC,aAAW,eAA/B,UACC,cAAC/I,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAzC,SACEsvC,EAAOn4B,OADOm4B,EAAO1kC,QAIiC,IAAxDs4B,EAAgBh2B,QAAQq5B,UAAUgJ,WAAWliC,OAAoB,KACjE,cAACoG,GAAA,EAAD,CAAmBzT,MAAO,QAA1B,mBAAgB,IAI0C,IAA1DkjC,EAAgBh2B,QAAQq5B,UAAUgJ,WAAWlM,SAAsB,KACnE,cAAC5vB,GAAA,EAAD,CAAoBzT,MAAO,QAA3B,qBAAgB,SAMnB,cAAC0T,GAAA,EAAD,UACEuxB,EACCE,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GACV,OAAO,cAAC,GAAD,CAAwB4N,MAAOo+B,GAAdhsC,aAK7B,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOsK,EAAgB5iC,OACvBmiC,YAAaA,EACbF,KAAMA,EACNiB,aA3DsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA2DNC,oBAxD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SA4DV,IAAMwB,GAAa,SAAC,GAAe,IAAb/+B,EAAY,EAAZA,MACfk8B,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,EAA0CjI,oBAAS,GAAnD,mBAAQksC,EAAR,KAAsBC,EAAtB,KAIA,OACC,eAACzyB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMkxB,mBAEpB,cAACzkB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMmxB,kBAEpB,cAAC1kB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMgxB,mBAEpB,cAACvkB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMuxB,iBAEpB,cAAC9kB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMqxB,UAEpB,cAAC5kB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMo/B,iBAEpB,cAAC3yB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAM0wB,eAAiB,SAAW,eAEhD,cAACjkB,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAAC,GAAD,CAAeuwC,aAAcA,EAAcM,eA1BvB,kBAAML,GAAiBD,IA0BgCh/B,MAAOA,OAE1B,IAAxDk8B,EAAgBh2B,QAAQq5B,UAAUgJ,WAAWliC,OAAoB,KACjE,cAACoG,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAACujC,GAAD,CAAc/U,KAAK,aAAa1C,OAAO,aAAava,MAAOA,OAGF,IAA1Dk8B,EAAgBh2B,QAAQq5B,UAAUgJ,WAAWlM,SAAsB,KACnE,cAAC5vB,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAACyV,EAAA,EAAD,CAAYpW,MAAM,YAAlB,SACC,cAACm9B,GAAA,EAAD,YAQAwU,GAAgB,SAAC,GAA6C,IAA3CH,EAA0C,EAA1CA,eAAgBN,EAA0B,EAA1BA,aAAch/B,EAAY,EAAZA,MAChDjT,EAAUR,KAChB,OACC,gCACC,cAAC2X,EAAA,EAAD,CAAY5B,QAASg9B,EAArB,SACC,cAACI,GAAA,EAAD,MAED,eAACh9B,GAAA,EAAD,CAAQpV,KAAM0xC,EAAczxC,QAAS+xC,EAAgB38B,WAAS,EAACrU,SAAS,KAAxE,UACC,cAACsU,GAAA,EAAD,UAAc,wCACd,eAACC,GAAA,EAAD,WACC,eAAClV,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sCACA,cAAC4F,GAAA,EAAD,OAED,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,cAACD,EAAA,EAAD,CAAKqW,GAAI,EAAGtV,OAAQ,IAAKD,MAAO,IAAKb,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvF,SACC,cAACuR,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAKtK,EAAMxR,WAE/C,+BACC,eAACR,EAAA,EAAD,WACC,uDACCgS,EAAMkxB,kBAER,eAACljC,EAAA,EAAD,WACC,wCACCgS,EAAMmxB,iBAER,eAACnjC,EAAA,EAAD,WACC,gDACCgS,EAAMixB,iBAER,eAACjjC,EAAA,EAAD,WACC,yDACCgS,EAAMgxB,kBAER,eAAChjC,EAAA,EAAD,WACC,+CACCgS,EAAMuxB,gBAER,eAACvjC,EAAA,EAAD,WACC,sCACCgS,EAAMtJ,IAAMsJ,EAAMtJ,IAAM,WAG3B,+BACC,eAAC1I,EAAA,EAAD,WACC,uCACCgS,EAAMpJ,KAAOoJ,EAAMpJ,KAAO,QAE5B,eAAC5I,EAAA,EAAD,WACC,2CACCgS,EAAMoxB,SAAWpxB,EAAMoxB,SAAW,QAEpC,eAACpjC,EAAA,EAAD,WACC,0CACCgS,EAAMzJ,QAAUyJ,EAAMzJ,QAAU,QAElC,eAACvI,EAAA,EAAD,WACC,yCACCgS,EAAMqxB,MAAQrxB,EAAMqxB,MAAQ,QAE9B,eAACrjC,EAAA,EAAD,WACC,qDACCgS,EAAM0wB,eAAiB,SAAW,cAEpC,eAAC1iC,EAAA,EAAD,WACC,uCACCgS,EAAMo/B,sBAIV,eAACl3B,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACC,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,UACC,+CAED,cAAC6a,GAAA,EAAD,OAED,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,+BACC,eAACI,EAAA,EAAD,WACC,wCACCgS,EAAMlJ,UAAUC,SAElB,eAAC/I,EAAA,EAAD,WACC,+CACCgS,EAAMlJ,UAAUE,UAElB,eAAChJ,EAAA,EAAD,WACC,+CACCgS,EAAMlJ,UAAUG,OAAS+I,EAAMlJ,UAAUG,OAAS,QAEpD,eAACjJ,EAAA,EAAD,WACC,mDACCgS,EAAMlJ,UAAUI,iBAElB,eAAClJ,EAAA,EAAD,WACC,0CACCgS,EAAMlJ,UAAUK,cAGnB,+BACC,eAACnJ,EAAA,EAAD,WACC,4CACCgS,EAAMlJ,UAAUM,aAElB,eAACpJ,EAAA,EAAD,WACC,4CACCgS,EAAMlJ,UAAUO,UAAY2I,EAAMlJ,UAAUO,UAAY,QAE1D,eAACrJ,EAAA,EAAD,WACC,yCACCgS,EAAMlJ,UAAUQ,UAElB,eAACtJ,EAAA,EAAD,WACC,uCACCgS,EAAMlJ,UAAUS,iBAKrB,eAAC2Q,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,UACC,4DAED,cAAC6a,GAAA,EAAD,OAED,cAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACC,+BACC,eAACI,EAAA,EAAD,WACC,4CACCgS,EAAM2/B,eAAiB3/B,EAAM2/B,eAAiB,QAEhD,eAAC3xC,EAAA,EAAD,WACC,uDACCgS,EAAMyxB,eAAiBzxB,EAAMyxB,eAAiB,QAEhD,eAACzjC,EAAA,EAAD,WACC,wDACCgS,EAAM0xB,aAAe1xB,EAAM0xB,aAAe,mBAMxB,YAAvB1xB,EAAMo/B,aACN,eAAC,WAAD,WACC,eAACzxC,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,UACC,0DAED,cAAC6a,GAAA,EAAD,OAED,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,6BACC,eAACI,EAAA,EAAD,WACC,wCACCgS,EAAM2xB,MAAQ3xB,EAAM2xB,MAAQ,UAG/B,6BACC,eAAC3jC,EAAA,EAAD,WACC,mDACCgS,EAAM4xB,cAAgB5xB,EAAM4xB,cAAgB,gBAK9C,QAEL,cAACrtB,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CAAQC,QAASg9B,EAAgBxxC,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAA1E,6BCpVCzW,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAERslB,KAAM,CACLnmB,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAIvBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASijC,KACvB,IAAMtM,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAElDhO,EAAUR,KAChB,EAA0BuG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA8B7M,mBAAS,IAAvC,mBAAQymC,EAAR,KAAgBO,EAAhB,KACA,EAA8BhnC,mBAAS,IAAvC,mBAAQ6oB,EAAR,KAAgBC,EAAhB,KAMMxb,EAAc,WACnBT,GAAQ,IAOT,OACC,8BACC,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAfG,WACvB3C,GAAQ,IAcN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,8EAA8EmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFvI,mBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,yBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,eAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,gBAAzC,UACC,cAAClL,EAAA,EAAD,CAAKI,GAAI,EAAGmwC,SAAS,MAArB,SACC,eAAC7oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC+rB,GAAA,EAAD,CACCn9B,WAAS,EACT4oB,YAAY,sBACZxnB,SAAU,SAACvD,GAAD,OAAOob,EAAUpb,EAAEC,OAAOxK,QACpC8pC,WAnCW,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBq4B,EAAUt5B,EAAEC,OAAOu/B,eAmCnC/pC,MAAO0lB,IAER,cAACzX,EAAA,EAAD,CAAY5B,QAAS,kBAAMw3B,EAAUne,IAArC,SACC,cAAC0K,GAAA,EAAD,YAImD,IAArD6V,EAAgBh2B,QAAQq5B,UAAUgJ,WAAW99B,IAAiB,KAC9D,cAACunB,GAAD,CAAc/U,KAAK,YAAY1C,OAAO,iBAGxC,cAAC5sB,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAAC,GAAD,CAAkB6M,KAAK,YAAYsc,OAAQA,cCrFjD,I,2BAAMhtC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAASs6C,GAAWljC,GAClC,IAAMmjC,EAAW9tC,KAAKC,MAAMC,aAAaC,QAAQ,eAE3ChO,EAAUR,KAEhB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,qBAAKvwC,UAAWH,EAAQgnB,KAAxB,SACC,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,qBAC+C,IAA9Ci8B,EAASxiC,QAAQq5B,UAAUoJ,MAAMtM,SAAsB,KACvD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,UACEnH,EAAMqjC,qBAAqBzK,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,EAAKhsC,GACjG,OACC,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,eAAC7pB,GAAA,EAAD,oBAAkB2xB,EAAIyK,gBACyB,IAA9CH,EAASxiC,QAAQq5B,UAAUoJ,MAAMtM,SAAsB,KACvD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,kBAAMiD,EAAMujC,WAAW1K,EAAIr+B,MAAhD,SACC,cAACkrB,GAAA,EAAD,UAL+CmT,EAAIyK,uBAe5D,cAACxK,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOpuB,EAAMqjC,qBAAqBvtC,OAClCmiC,YAAaA,EACbF,KAAMA,EACNiB,aAnDqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAmDLC,oBAhD4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,WCrCH,IAAMwL,GAAa58C,YAAH,kOAQV68C,GAAgB78C,YAAH,+hBAsBb88C,GAAuB98C,YAAH,6PAQpB+8C,GAAyB/8C,YAAH,w8CAqDtBg9C,GAAgBh9C,YAAH,2HAkBbi9C,IAVkBj9C,YAAH,uNAUUA,YAAH,iRAQtBk9C,GAAsBl9C,YAAH,06CAsDnBm9C,GAAqBn9C,YAAH,8hBCpKhB,SAASo9C,KACvB,MAAgCp0C,IAAMrC,UAAS,GAA/C,mBAAQwF,EAAR,KAAiBC,EAAjB,KAEA,EAA4BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAEM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE3C6tC,EAAuB,GAE3B,EAAsBvoC,YAAY0oC,IAA1BS,EAAR,oBACA,EAAyBnpC,YAAY8oC,IAA7BM,EAAR,oBAIA,EAA2B7iC,aAASoiC,GAAc,CACjD/mC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAHnBwB,EAAT,EAASA,KAAM9B,EAAf,EAAeA,QAMTiqC,EAAS,uCAAG,sBAAAhvC,EAAA,sEAEPnC,GAAW,GAFJ,SAGTixC,EAAU,CACfvnC,UAAW,CACVC,MAAM,CAACynC,gBAAkBjqC,EAAOK,IAAK6pC,uBAAwBlqC,EAAOmqC,eAAgBC,uBAAwBpqC,EAAOmX,QACnHhf,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAPb,OAWhBN,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDiL,GAAW,GAbK,gDAiBhBzL,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAlBK,yDAAH,qDAsBTuwC,EAAU,uCAAG,WAAOllC,GAAP,SAAAlJ,EAAA,sEAERnC,GAAW,GAFH,SAGVkxC,EAAa,CAClBxnC,UAAW,CACV2B,GAAIA,KALU,OAQjBnE,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDiL,GAAW,GAVM,gDAYjBzL,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAbM,yDAAH,sDA8BhB,OAbGgJ,IACFqnC,EAAuBrnC,EAAKqnC,sBAG7B/hC,qBACC,WACCtO,GAAW,GACXkH,IACAlH,GAAW,KAEZ,CAAEkH,IAIF,eAAC9R,EAAA,EAAD,WACC,cAACf,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,eAAC5K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,OAAOC,WAAW,OAAOmL,GAAI,EAAhE,UAEC,cAACtW,EAAA,EAAD,CAAK0iB,GAAI,KACmC,IAA3C3Q,EAAOwG,QAAQq5B,UAAUoJ,MAAM1I,QAAqB,KACpD,eAAC59B,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQS,kBAAgB,EAACnB,QAAS,kBAAMonC,KAAzF,UACC,cAAClnC,GAAA,EAAD,IADD,gBAKF,cAACimC,GAAD,CAAYG,qBAAsBA,EAAsBE,WAAYA,OClFvE,IAAMv8C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASwkC,KACvB,IAAMh9C,EAAUR,KAEhB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAQMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,uEAAuEmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFhI,aAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,mBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACi7C,GAAD,cCpEN,IAqPeS,GArPI,CACf7jC,WAAW,CACPsD,cAAe,CACXgB,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdj2B,mBAAoB,CAChBqE,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlB5C,QAAQ,CACJ0D,aAAa,CACT1yB,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEde,mBAAmB,CACf3yB,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdD,eAAe,CACX3xB,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlB4N,UAAU,CACNC,gBAAgB,CACZz/B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd8N,QAAQ,CACJ1/B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd+N,mBAAmB,CACf3/B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdgO,gBAAgB,CACZ5/B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlBiO,SAAS,CACLC,wBAAwB,CACpB9/B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdmO,eAAe,CACX//B,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdoO,gBAAgB,CACZhgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdqO,eAAe,CACXjgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdsO,iBAAiB,CACblgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEduO,mBAAmB,CACfngC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdwO,kBAAkB,CACdpgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlBpK,OAAO,CACH6Y,eAAe,CACXrgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd0O,kBAAmB,CACftgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd2O,UAAU,CACNvgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd4O,aAAa,CACTxgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd6O,cAAc,CACVzgC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd8O,gBAAgB,CACZ1gC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEd+O,gBAAiB,CACb3gC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlBhf,UAAU,CACN5rB,QAAQ,CACJgZ,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdgP,UAAU,CACN5gC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,GAEdiP,mBAAmB,CACf7gC,KAAK,EACLw1B,SAAS,EACT55B,QAAQ,EACRg2B,UAAU,IAGlBkD,UAAW,CACPC,SAAS,CACL/0B,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXklC,SAAS,CACL9gC,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEX0hB,OAAO,CACHtd,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXshC,aAAa,CACTl9B,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXkiC,WAAW,CACP99B,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXsiC,MAAM,CACFl+B,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXyhB,cAAc,CACVrd,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEX2hB,cAAc,CACVvd,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXmlC,kBAAkB,CACd/gC,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEXwhB,WAAW,CACPpd,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEX0V,QAAQ,CACJtR,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,GAEX8/B,eAAe,CACX17B,KAAK,EACLw1B,SAAS,EACT5D,UAAU,EACVh2B,QAAO,KC9ONolC,GAAiB94C,0BAEjB+4C,GAAkB,SAAC,GAAkB,IAAhB74C,EAAe,EAAfA,SACjC,EAAgCC,mBAAS,CACxCgE,UAAW,CACVC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAEPo0C,gBAAgB,EAChBzlC,QAAS8jC,KAbV,mBAAQtb,EAAR,KAAiBkd,EAAjB,KAeA,EAAkC94C,oBAAS,GAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAA4BlF,mBAAS,CAACP,OAAO,EAAO9E,QAAS,KAA7D,mBAAQ8E,EAAR,KAAe0F,EAAf,KACA,EAA8BnF,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KAEA,OACC,cAAC22C,GAAez1C,SAAhB,CACCC,MAAO,CACNy4B,UACAkd,aACA7zC,WACAC,cACAzF,QACA0F,WACApD,SACAC,aATF,SAYEjC,KCxBEtG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,SAAU,CACTL,MAAO,QAGTmhB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEPib,gBAAiB,CAChBxb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZrK,MAAO,IACPC,OAAQ,IACR2a,OAAQ,mBACRC,aAAc,QAEfC,OAAQ,CACP9a,MAAO,IACPC,OAAQ,IACR,YAAa,CACZqK,SAAU,UAKE,SAAS8yC,GAAT,GAAwC,IAAXtxB,EAAU,EAAVA,OACrCxtB,EAAUR,KAChB,EAAuCga,qBAAWklC,IAA1C/c,EAAR,EAAQA,QAASkd,EAAjB,EAAiBA,WAAYr5C,EAA7B,EAA6BA,MAC7B,EAAgCO,mBAAS,IAAzC,mBAAQ4W,EAAR,KAAiBC,EAAjB,KACA,EAA0C7W,oBAAS,GAAnD,mBAAQg5C,EAAR,KAAsBC,EAAtB,KAGMjiC,EAASC,uBACd,SAACC,GACA,IAAI/I,EAAS,IAAIC,WACjBD,EAAOE,cAAc6I,EAAc,IACnC/I,EAAOG,OAAS,WACf,IAAI/O,EAAQ4O,EAAOI,OACnBsI,EAAWtX,IAEZu5C,EAAW,2BACPld,GADM,IAETlgC,OAAQwb,EAAc,QAGxB,CAAE0kB,EAASkd,IAGZ,EAAwC3hC,aAAY,CACnDtG,OAAQ,wBACRuG,YAAY,EACZJ,WAHOK,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,cAMhB3C,EAAgB,SAACjH,GAET,mBADAA,EAAEC,OAAOC,KAQtBkrC,EAAW,2BACPld,GADM,kBAERluB,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,SAR1B21C,EAAW,2BACPld,GADM,kBAERluB,EAAEC,OAAOC,KAAOmO,SAASrO,EAAEC,OAAOxK,WAShCyR,EAAyB,SAAClH,GAC/BorC,EAAW,2BACPld,GADM,IAET53B,UAAU,2BAAM43B,EAAQ53B,WAAf,kBAA2B0J,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,YAI/D,OACC,cAAC,WAAD,UACC,eAACiS,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,cAACD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,eAAC1a,EAAA,EAAD,yBAAKT,UAAWH,EAAQqc,iBAAqBe,KAA7C,cACC,qCAAWC,MACVV,EACA,cAACW,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAG,UAAKZ,KAE3C,cAACW,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAG,UAAKokB,EAAQlgC,gBAItD,eAAC0Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,cAAC1a,EAAA,EAAD,UACC,sBAAMq+C,aAAa,MAAM9+C,UAAWH,EAAQge,cAA5C,SACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,oBAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTmB,KAAK,OACLd,KAAK,QACLzQ,MAAOA,EAAMA,QAAUm8B,EAAQ7X,OAC/BnW,KAAK,SACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ7X,OAAS6X,EAAQ7X,OAAS,GACzCtO,WACChW,EAAMA,OAA2B,oCAAlBA,EAAM9E,QACpB8E,EAAM9E,QAEN,GAGFsW,SAAU0D,WAKF,cAAX8S,EACA,uBAAMyxB,aAAa,MAAM9+C,UAAWH,EAAQge,cAA5C,UACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,mBAGA,eAACwa,EAAA,EAAD,CACC7F,WAAS,EACTK,KAAK,QACLzQ,SACCA,EAAMA,OAAUm8B,EAAQud,cAEpB15C,EAAMA,OAA2B,oCAAlBA,EAAM9E,SAM1BiT,KAAK,WACLuC,QAAQ,WAbT,UAeC,cAAC0I,EAAA,EAAD,CACCjL,KAAK,WACLoD,KAAMgoC,EAAe,OAAS,WAC9B71C,MAAOy4B,EAAQud,SAAWvd,EAAQud,SAAW,GAC7CloC,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAACa,EAAA,EAAD,CACClB,KAAK,QACL,aAAW,6BACXV,QAAS,kBAAMypC,GAAiBD,IAChC3nC,YAAa,kBAAM4nC,GAAiBD,IAJrC,SAMEA,EACA,cAAC,IAAD,CAAYh+C,MAAM,YAElB,cAAC,KAAD,CAAeA,MAAM,kBAM1B,cAACwiB,GAAA,EAAD,UAAiB/d,EAAM9E,gBAGzB,eAACE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,2BAGA,eAACwa,EAAA,EAAD,CACC7F,WAAS,EACTK,KAAK,QACLzQ,SACCA,EAAMA,OAAUm8B,EAAQud,cAEpB15C,EAAMA,OAA2B,oCAAlBA,EAAM9E,SAM1BiT,KAAK,iBACLuC,QAAQ,WAbT,UAeC,cAAC0I,EAAA,EAAD,CACCjL,KAAK,iBACLoD,KAAMgoC,EAAe,OAAS,WAC9B71C,MAAOy4B,EAAQwd,eAAiBxd,EAAQwd,eAAiB,GACzDnoC,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAACa,EAAA,EAAD,CACClB,KAAK,QACL,aAAW,6BACXV,QAAS,kBAAMypC,GAAiBD,IAChC3nC,YAAa,kBAAM4nC,GAAiBD,IAJrC,SAMEA,EACA,cAAC,IAAD,CAAYh+C,MAAM,YAElB,cAAC,KAAD,CAAeA,MAAM,kBAM1B,cAACwiB,GAAA,EAAD,UAAiB/d,EAAM9E,mBAK1B,cAAC,GAAD,OAGF,eAACya,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,UACC,uBAAM2jC,aAAa,MAAM9+C,UAAWH,EAAQge,cAA5C,UACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,WAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,EAAMA,QAAUm8B,EAAQ2C,MAC/B3wB,KAAK,QACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ2C,MAAQ3C,EAAQ2C,MAAQ,GACvC9oB,WACChW,EAAMA,OAA2B,oCAAlBA,EAAM9E,QAA6C8E,EAAM9E,QAAU,GAEnFsW,SAAU0D,OAGZ,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,mBAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOA,EAAMA,QAAUm8B,EAAQ0C,SAC/B1wB,KAAK,WACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ0C,SAAW1C,EAAQ0C,SAAW,GAC7C7oB,WACChW,EAAMA,OAA2B,oCAAlBA,EAAM9E,QAA6C8E,EAAM9E,QAAU,GAEnFsW,SAAU0D,OAGZ,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRhN,MAAOy4B,EAAQn4B,QAAUm4B,EAAQn4B,QAAU,GAC3CwN,SAAU0D,UAIb,eAAC9Z,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,UACC,oDAED,cAAC6a,GAAA,EAAD,OAED,uBAAMmjC,aAAa,MAAM9+C,UAAWH,EAAQge,cAA5C,UACC,eAACpd,EAAA,EAAD,WACC,cAACK,EAAA,EAAD,oBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,QACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUC,MAAQ23B,EAAQ53B,UAAUC,MAAQ,GAC3DgN,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,WACC,cAACK,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUK,QAAUu3B,EAAQ53B,UAAUK,QAAU,GAC/D4M,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACC,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUE,OAAS03B,EAAQ53B,UAAUE,OAAS,GAC7D+M,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACC,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUG,OAASy3B,EAAQ53B,UAAUG,OAAS,GAC7D8M,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,QAAX,UACC,cAACT,EAAA,EAAD,iBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,gBACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUI,cAAgBw3B,EAAQ53B,UAAUI,cAAgB,GAC3E6M,SAAU2D,UAIb,uBAAMskC,aAAa,MAAM9+C,UAAWH,EAAQge,cAA5C,UACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUM,UAAYs3B,EAAQ53B,UAAUM,UAAY,GACnE2M,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUO,UAAYq3B,EAAQ53B,UAAUO,UAAY,GACnE0M,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,qBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUQ,OAASo3B,EAAQ53B,UAAUQ,OAAS,GAC7DyM,SAAU2D,OAGZ,eAAC/Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,mBACA,cAAC+U,EAAA,EAAD,CACCC,KAAK,QACLtC,KAAK,OACLuC,QAAQ,WACRhN,MAAOy4B,EAAQ53B,UAAUS,KAAOm3B,EAAQ53B,UAAUS,KAAO,GACzDwM,SAAU2D,kBAUlB,IAAMykC,GAA0B,WAC/B,MAA0Br5C,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAAoE4G,qBAAWklC,IAAvE/c,EAAR,EAAQA,QAASkd,EAAjB,EAAiBA,WAAYr5C,EAA7B,EAA6BA,MAAO0F,EAApC,EAAoCA,SAAUpD,EAA9C,EAA8CA,OAAQC,EAAtD,EAAsDA,UACtD,EAA0ChC,oBAAS,GAAnD,mBAAQg5C,EAAR,KAAsBC,EAAtB,KACA,EAAgCj5C,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KACA,EAA4BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAEA,EAA8BuT,YAAYhU,GAAlC+/C,EAAR,oBAMMhsC,EAAc,WACnBT,GAAQ,GACR1H,EAAS,CAAE1F,OAAO,EAAO9E,QAAS,MAG7Bga,EAAgB,SAACjH,GACtBorC,EAAW,2BACPld,GADM,kBAERluB,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAItBo2C,EAAiB,uCAAG,sBAAA3xC,EAAA,yDACpBg0B,EAAQud,UAAavd,EAAQwd,eADT,uBAExBj0C,EAAS,CAAE1F,OAAO,EAAM9E,QAAS,4BAFT,6BAKrBihC,EAAQud,WAAavd,EAAQwd,eALR,uBAMxBj0C,EAAS,CAAE1F,OAAO,EAAM9E,QAAS,oCANT,iCASzB8K,GAAW,GATc,mBAYlB6zC,EAAkB,CACvBnqC,UAAW,CACVC,MAAO,CACN+pC,SAAUvd,EAAQud,SAClBC,eAAgBxd,EAAQwd,gBAEzBtoC,GAAI8qB,EAAQ3uB,OAlBU,QAqBxBjL,GAAWD,GACX/H,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDiL,GAAW,GACX6H,IAxBwB,kDA0BxBtT,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GA3Ba,0DAAH,qDA+BvB,OACC,eAAC,WAAD,WACC,cAAC8J,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,OAAOX,QAjDjB,WACvB3C,GAAQ,IAgDP,mCAGA,eAAC+C,GAAA,EAAD,CACCpV,KAAMA,EACNC,QAAS6S,EACT,kBAAgB,qBAChB,mBAAiB,2BAJlB,UAMC,cAACxT,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAAC8V,GAAA,EAAD,CAAagB,GAAG,qBAAhB,SAAsC,0BACtC,cAACf,GAAA,EAAD,UACC,uBAAMmpC,aAAa,MAAnB,UACC,eAACr+C,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,mBAGA,eAACwa,EAAA,EAAD,CACC7F,WAAS,EACTK,KAAK,QACLzQ,SACCA,EAAMA,OAAUm8B,EAAQud,cAEpB15C,EAAMA,OAA2B,oCAAlBA,EAAM9E,SAM1BiT,KAAK,WACLuC,QAAQ,WAbT,UAeC,cAAC0I,EAAA,EAAD,CACCjL,KAAK,WACLoD,KAAMgoC,EAAe,OAAS,WAC9B71C,MAAOy4B,EAAQud,SAAWvd,EAAQud,SAAW,GAC7CloC,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAACa,EAAA,EAAD,CACClB,KAAK,QACL,aAAW,6BACXV,QAAS,kBAAMypC,GAAiBD,IAChC3nC,YAAa,kBAAM4nC,GAAiBD,IAJrC,SAMEA,EACA,cAAC,IAAD,CAAYh+C,MAAM,YAElB,cAAC,KAAD,CAAeA,MAAM,kBAM1B,cAACwiB,GAAA,EAAD,UAAiB/d,EAAM9E,gBAGzB,eAACE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sCADD,2BAGA,eAACwa,EAAA,EAAD,CACC7F,WAAS,EACTK,KAAK,QACLzQ,SACCA,EAAMA,OAAUm8B,EAAQud,cAEpB15C,EAAMA,OAA2B,oCAAlBA,EAAM9E,SAM1BiT,KAAK,iBACLuC,QAAQ,WAbT,UAeC,cAAC0I,EAAA,EAAD,CACCjL,KAAK,iBACLoD,KAAMgoC,EAAe,OAAS,WAC9B71C,MAAOy4B,EAAQwd,eAAiBxd,EAAQwd,eAAiB,GACzDnoC,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAACa,EAAA,EAAD,CACClB,KAAK,QACL,aAAW,6BACXV,QAAS,kBAAMypC,GAAiBD,IAChC3nC,YAAa,kBAAM4nC,GAAiBD,IAJrC,SAMEA,EACA,cAAC,IAAD,CAAYh+C,MAAM,YAElB,cAAC,KAAD,CAAeA,MAAM,kBAM1B,cAACwiB,GAAA,EAAD,UAAiB/d,EAAM9E,qBAK3B,eAAC8W,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CACCC,QAAS+pC,EACTv+C,MAAM,UACNmV,QAAQ,YACRkG,WAAS,EACT8gB,QAAS3xB,EAAU,cAACG,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,KALrE,iCCniBU,SAASspC,GAAT,GAKX,IAJAC,EAID,EAJCA,eACAC,EAGD,EAHCA,eACA5jB,EAED,EAFCA,aACA6jB,EACD,EADCA,gBAKA,OAFAjxC,QAAQC,IAAI8wC,GAGR,eAAC5+C,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,UACI,cAACmX,GAAA,EAAD,CACIC,QACI,cAACtD,GAAA,EAAD,CACIC,UAAS0/B,GAAiBA,EAAe3jB,GAAc6jB,GAAiBhiC,IACxE/J,KAAK,MACL5S,MAAM,UACNiW,SAAU,SAACvD,GAAD,OAAOgsC,EAAehsC,EAAGooB,EAAc6jB,MAGzDt8B,MACI,cAACxiB,EAAA,EAAD,CAAKI,GAAI,EAAGH,QAAQ,OAApB,SACsB,WAAjBg7B,EAA4B,YAAc,UAI/B,uBAApB6jB,GACoB,kBAApBA,GACoB,iBAApBA,GACoB,uBAApBA,GACoB,mBAApBA,GACoB,cAApBA,GACoB,uBAApBA,GACoB,oBAApBA,GACiB,aAAjB7jB,GACiB,WAAjBA,GACoB,YAApB6jB,EAAiC,KAC7B,cAACx8B,GAAA,EAAD,CACIC,QACI,cAACtD,GAAA,EAAD,CACIC,UAAS0/B,GAAiBA,EAAe3jB,GAAc6jB,GAAiBxM,QACxEv/B,KAAK,UACL+B,UAAU8pC,IAAuE,IAAtDA,EAAe3jB,GAAc6jB,GAAiBhiC,IACzE3c,MAAM,UACNiW,SAAU,SAACvD,GAAD,OAAOgsC,EAAehsC,EAAGooB,EAAc6jB,MAGzDt8B,MACI,cAACxiB,EAAA,EAAD,CAAKI,GAAI,EAAIH,QAAQ,OAArB,uBAMQ,UAApB6+C,GACoB,iBAApBA,GACoB,uBAApBA,GACoB,cAApBA,GACoB,uBAApBA,GACoB,uBAApBA,GACoB,oBAApBA,GACoB,YAApBA,GACiB,aAAjB7jB,GACiB,WAAjBA,EAA6B,KAC7B,cAAC3Y,GAAA,EAAD,CACIC,QACI,cAACtD,GAAA,EAAD,CACIC,UAAS0/B,GAAiBA,EAAe3jB,GAAc6jB,GAAiBpmC,OACxE3F,KAAK,SACL+B,UAAU8pC,IAAuE,IAAtDA,EAAe3jB,GAAc6jB,GAAiBhiC,IACzE3c,MAAM,UACNiW,SAAU,SAACvD,GAAD,OAAOgsC,EAAehsC,EAAGooB,EAAc6jB,MAGzDt8B,MACI,cAACxiB,EAAA,EAAD,CAAKI,GAAI,EAAIH,QAAQ,OAArB,sBAMY,uBAApB6+C,GACoB,kBAApBA,GACoB,iBAApBA,GACoB,uBAApBA,GACoB,cAApBA,GACoB,uBAApBA,GACoB,oBAApBA,GACoB,uBAApBA,GACoB,oBAApBA,GACoB,YAApBA,GACiB,aAAjB7jB,GACiB,WAAjBA,EAA4B,KAC5B,cAAC3Y,GAAA,EAAD,CACIC,QACI,cAACtD,GAAA,EAAD,CACIC,UAAS0/B,GAAiBA,EAAe3jB,GAAc6jB,GAAiBpQ,SACxE37B,KAAK,WACL5S,MAAM,UACN2U,UAAU8pC,IAAuE,IAAtDA,EAAe3jB,GAAc6jB,GAAiBhiC,IACzE1G,SAAU,SAACvD,GAAD,OAAOgsC,EAAehsC,EAAGooB,EAAc6jB,MAGzDt8B,MACI,cAACxiB,EAAA,EAAD,CAAKC,QAAQ,OAAb,2BCnGT,SAAS8+C,GAAT,GAAwD,IAAnCF,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAEhD,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,6CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,sBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,6CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,sBAOrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,2CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,oBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,+CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,wBAOrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,iDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,0BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,0CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,mBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,iDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,2BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,qDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,2BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,sDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,+BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,+CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,wBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,4CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,qBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,qDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,+BC3OlC,SAASliC,GAAT,GAAwD,IAAnCiiC,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAC9C,OACM,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,qDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,aACd6jB,gBAAiB,2BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,0DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,aACd6jB,gBAAiB,mCC1CtC,SAASvP,GAAT,GAAsD,IAAnCsP,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAC9C,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,qDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,UACd6jB,gBAAiB,0BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,uDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,UACd6jB,gBAAiB,gCAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,sDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,UACd6jB,gBAAiB,+BC7DlC,SAASE,GAAT,GAAwD,IAAnCH,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAChD,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,8CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,qBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,8CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,uBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,2DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,mCC7DlC,SAASG,GAAT,GAAwD,IAAnCJ,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAChD,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,4CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,6BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,uDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,gCAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,oDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,6BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,4CAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,YACd6jB,gBAAiB,wBChFlC,SAASI,GAAT,GAAuD,IAAnCL,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAC/C,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,+DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,qCAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,8DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,4BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,yDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,6BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,wDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,4BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,2DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,8BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,wDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,gCAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,wDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,WACd6jB,gBAAiB,kCCzIlC,SAASK,GAAT,GAAqD,IAAnCN,EAAkC,EAAlCA,eAAgBD,EAAkB,EAAlBA,eAC7C,OACI,eAAC,WAAD,WACI,cAAC5+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sEAKR,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,oDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,4BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,yDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,+BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,uDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,uBAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,iDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,0BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,oDAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,6BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,2DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,2BAMrC,cAAC9+C,EAAA,EAAD,CAAKoQ,EAAG,EAAInQ,QAAQ,OAAOiL,eAAgB,SAA3C,SACI,cAAClL,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4mB,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK0iB,GAAI,EAAGtS,EAAG,EAAGmoB,SAAU,EAA5B,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,+DAGR,cAACqpC,GAAD,CACIC,eAAgBA,EAChBC,eAAgBA,EAChB5jB,aAAc,SACd6jB,gBAAiB,gC,oCC/HjD,SAASp1B,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGwsB,UAAU,OAArB,SACE13B,OAaN,SAAS4kB,GAAUrlB,GAClB,MAAO,CACNwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI3C,IAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP4lB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3C4Z,QAAS,CACRn/B,MAAO,IAERyW,KAAK,CACJnM,SAAU,QAIG,SAASg0C,GAAT,GAA4D,IAAlCP,EAAiC,EAAjCA,eAAgBD,EAAiB,EAAjBA,eAElDx/C,EAAUR,KAChB,EAA4BuG,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAEA,EAA4BgG,mBAAS,GAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KAMG,OACI,qCACN,cAACtrB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAChC,cAACgb,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACI,eAACjX,GAAA,EAAD,CACIriB,MAAOA,EACP8N,SAVK,SAACK,EAAOmU,GAC/BL,EAASK,IAUStV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPf,UASI,cAACC,GAAA,EAAD,aACdxI,MAAM,aACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAAauS,GAAU,KAEzD,cAACkB,GAAA,EAAD,aACCxI,MAAM,YACNjL,KAAM,qBAAKoF,IAAI,yEAAyEmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ6gC,WAC3HnW,GAAU,KAEf,cAACkB,GAAA,EAAD,aACCxI,MAAM,UACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAAcuS,GAAU,KAE1D,cAACkB,GAAA,EAAD,aACCxI,MAAM,YACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAAcuS,GAAU,KAE1D,cAACkB,GAAA,EAAD,aACCxI,MAAM,YACNjL,KAAM,qBAAKoF,IAAI,uEAAuEmgB,IAAI,cAAcv9B,UAAWH,EAAQ6gC,WACvHnW,GAAU,KAEf,cAACkB,GAAA,EAAD,aACCxI,MAAM,WACNjL,KAAM,cAAC,KAAD,CAAUhY,UAAWH,EAAQmY,QAC/BuS,GAAU,KAGf,cAACkB,GAAA,EAAD,aACCxI,MAAM,iBACNjL,KAAM,qBAAKoF,IAAI,yEAAyEmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ6gC,WAC3HnW,GAAU,KAEf,cAACkB,GAAA,EAAD,aACCxI,MAAM,SACNjL,KAAM,qBAAKoF,IAAI,iFAAiFmgB,IAAI,eAAev9B,UAAWH,EAAQ6gC,WAClInW,GAAU,UAIjB,cAAC,GAAD,CAAUxhB,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC,GAAD,CAAWyuC,eAAgBA,EAAgBD,eAAgBA,QAG7D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC4uC,GAAD,CAAWH,eAAgBA,EAAgBD,eAAgBA,QAG7D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC,GAAD,CAASyuC,eAAgBA,EAAgBD,eAAgBA,QAG3D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC2uC,GAAD,CAAWF,eAAgBA,EAAgBD,eAAgBA,QAG7D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC6uC,GAAD,CAAWJ,eAAgBA,EAAgBD,eAAgBA,QAG7D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC8uC,GAAD,CAAUL,eAAgBA,EAAgBD,eAAgBA,QAG5D,cAAC,GAAD,CAAUt2C,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,MAIT,cAAC,GAAD,CAAU9H,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC+uC,GAAD,CAAQN,eAAgBA,EAAgBD,eAAgBA,W,6HC1J7D,SAASl1B,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IACA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAK48B,UAAU,OAAf,SACE13B,OAaN,SAAS4kB,GAAUrlB,GAClB,MAAO,CACNwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI3C,IAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP6+C,cAAc,CACbt4B,QAAS,EACTzmB,OAAQ,GAET8lB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3C4Z,QAAS,CACRn/B,MAAO,QAIM,SAASw+C,GAAT,GAA0C,IAAlB1yB,EAAiB,EAAjBA,OAAQva,EAAS,EAATA,MACxCjT,EAAUR,KAChB,EAA6Dga,qBAAWklC,IAAhE/c,EAAR,EAAQA,QAASkd,EAAjB,EAAiBA,WAAY3zC,EAA7B,EAA6BA,SAAUpD,EAAvC,EAAuCA,OAAQC,EAA/C,EAA+CA,UAC/C,EAA0BhC,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA4B7M,mBAAS,GAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KACA,EAAgCplB,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KACA,EAA4BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzC4f,EAAgB5Q,uBACrB,WACC6hC,EAAW,CACV90C,UAAW,CACVC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,cAAe,GACfC,QAAS,GACTC,UAAW,GACXC,UAAW,GACXC,OAAQ,GACRC,KAAM,IAEP21C,sBAAsB,EACtBvB,gBAAgB,EAChBzlC,QAAS8jC,OAGX,CAAE4B,IAOGr+B,EAAc,WACnB5N,GAAQ,GACO,cAAX4a,GACHqxB,EAAW5rC,IAIP4a,EAAe,WACpBjb,GAAQ,GACRgb,KAcD,EAAyBta,YAAYnU,GAA7BihD,EAAR,oBACA,EAA8B9sC,YAAYhU,GAAlC+/C,EAAR,oBACMvxB,EAAQ,uCAAG,8BAAAngB,EAAA,yDACD,cAAX6f,EADY,mBAGbmU,EAAQ7X,QACR6X,EAAQud,UACRvd,EAAQwd,gBACRxd,EAAQ0C,UACR1C,EAAQ2C,MAPK,uBASdp5B,EAAS,CAAE1F,OAAO,EAAM9E,QAAS,4BATnB,6BAYXihC,EAAQud,WAAavd,EAAQwd,eAZlB,uBAadj0C,EAAS,CAAE1F,OAAO,EAAM9E,QAAS,oCAbnB,oDAiBVihC,EAAQ7X,QAAW6X,EAAQ0C,UAAa1C,EAAQ2C,MAjBtC,wBAkBdp5B,EAAS,CAAE1F,OAAO,EAAM9E,QAAS,4BAlBnB,8BAsBhB8K,GAAW,GAtBK,UAwBA,cAAXgiB,EAxBW,wBAyBdmU,EAAQmb,gB1GlKkBv+B,E0GkKa,I1GlKR8hC,E0GkKmB,U1GjK7C7hC,KAAKK,MAAML,KAAKM,UAAYuhC,EAAM9hC,EAAM,GAAKA,I0GkKlDojB,EAAQ72B,QAAU6H,EAAO7H,QAAQkI,IACjC2uB,EAAQ/2B,SAAW+H,EAAO/H,SAASoI,IACnC2uB,EAAQwe,sBAAuB,EACzBhrC,EAAQwsB,EA7BA,UA8BRye,EAAa,CAClBlrC,UAAW,CACVC,WAhCY,uCAoCqFwsB,EAA3Fmb,eAA2Fnb,EAA3E3uB,IAA2E2uB,EAAtE/2B,SAAsE+2B,EAA5D72B,QAA4D62B,EAAnDwe,qBAAmDxe,EAA7Bid,eAAmBzpC,EApC3E,aAoCqFwsB,EApCrF,cAqCR0d,EAAkB,CACvBnqC,UAAW,CACVC,MAAOA,EACP0B,GAAI8qB,EAAQ3uB,OAxCA,QA4CfjL,GAAWD,GACX/H,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD2K,EAAS,CAAE1F,OAAO,EAAO9E,QAAS,KAClC8K,GAAW,GACXqiB,IAhDe,mDAkDf9tB,EAAS,CAAEW,QAAS,+BAAgCD,OAAQ,QAASF,MAAM,IAC3EiL,GAAW,GAnDI,kC1GzIW,IAAC+S,EAAK8hC,I0GyIjB,sBAAH,qDAuDd,OACC,eAAC,WAAD,WACC,cAACxgD,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC9B,cAAXytB,EACA,eAAClY,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQV,QAASiL,EAAlE,UACC,cAAC/K,GAAA,EAAD,IADD,oBAIA,cAAC0B,EAAA,EAAD,CAAY5B,QAASiL,EAArB,SACC,cAAC6J,GAAA,EAAD,MAGF,eAAC1U,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAASqtB,EAAcjY,WAAS,EAACrU,SAAS,KAA9D,UACC,eAACX,EAAA,EAAD,CAAKT,UAAWH,EAAQgnB,KAAxB,UACC,cAAC1b,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACuP,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACC,eAACjX,GAAA,EAAD,CACCriB,MAAOA,EACP8N,SAtGe,SAACK,EAAOmU,GAC5BL,EAASK,IAsGJtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPZ,UASC,cAACC,GAAA,EAAD,aACCxI,MAAM,2BACNjL,KAAM,qBAAKoF,IAAI,wEAAwEmgB,IAAI,eAAev9B,UAAWH,EAAQ6gC,WACzHnW,GAAU,KAEf,cAACkB,GAAA,EAAD,aACCxI,MAAM,WACNjL,KAAM,qBAAKoF,IAAI,0EAA0EmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ6gC,WAC5HnW,GAAU,KAEf,cAAC9pB,EAAA,EAAD,CAAK0iB,GAAI,GAAIrM,GAAI,EAAjB,SACC,cAACrW,EAAA,EAAD,UACC,cAAC0U,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASsY,EAAc5X,KAAK,QAA1E,SACC,cAAC,KAAD,eAML,cAAC,GAAD,CAAU/M,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC8tC,GAAD,CAAmBtxB,OAAQA,QAG7B,cAAC,GAAD,CAAUtkB,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAAC26C,GAAD,CACCR,eAAgB7d,EAAQxoB,QACxBsmC,eAxHiB,SAACpoC,EAAOwkB,EAAcykB,GACtC,MAA0BjpC,EAAM3D,OAAxBC,EAAR,EAAQA,KAAMmM,EAAd,EAAcA,QACd++B,EAAW,2BACbld,GADY,IACHxoB,QAAQ,2BAAKwoB,EAAQxoB,SAAd,kBACjB0iB,EADiB,2BACE8F,EAAQxoB,QAAQ0iB,IADlB,kBAEhBykB,EAFgB,2BAEO3e,EAAQxoB,QAAQ0iB,GAAcykB,IAFrC,kBAEyD3sC,EAAOmM,mBAuHlF,cAACtI,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CACCY,QAAQ,YACRnV,MAAM,UACNwU,QAASuY,EACT7X,KAAK,QACLT,UAAW,cAAC,KAAD,IALZ,6BC3OL,IAAM6lC,GAAU,CACf,CAAExkC,GAAI,EAAGuM,MAAO,cAAe7B,SAAU,KACzC,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,WAAY7B,SAAU,GAAItV,MAAO,UAK5CzM,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAEZgb,OAAQ,CACP9a,MAAO,IACPC,OAAQ,OAIK,SAAS4+C,GAAT,GAA8C,IAArB31C,EAAoB,EAApBA,SAAU4hC,EAAU,EAAVA,OAC3CxsC,EAAUR,KACV2vC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAChDlG,EAAW0R,qBAAWklC,IAAtB52C,OACR,EAA0B/B,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAGA,EAA0C72B,aAASxa,EAAkB,CACpE6V,UAAW,CAAEtK,WAAU4hC,YADhBjhC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9BoH,qBACC,WACCpH,MAED,CAAE5K,EAAQ4K,IAYX,GAAInH,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAQmoB,EAAoBnZ,EAApBmZ,gBAER,OACC,eAACrF,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAAC,aAAW,eAA/B,UACC,cAAC/I,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAzC,SACEsvC,EAAOn4B,OADOm4B,EAAO1kC,QAI+B,IAAtDs4B,EAAgBh2B,QAAQq5B,UAAUgM,SAASllC,OAAoB,KAC/D,cAACoG,GAAA,EAAD,CAAmBzT,MAAO,QAA1B,mBAAgB,IAIwC,IAAxDkjC,EAAgBh2B,QAAQq5B,UAAUgM,SAASlP,SAAsB,KACjE,cAAC5vB,GAAA,EAAD,CAAoBzT,MAAO,QAA3B,qBAAgB,SAMnB,cAAC0T,GAAA,EAAD,UACEgO,EACCyjB,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GACV,OAAO,cAAC,GAAD,CAAwB4N,MAAOo+B,GAAdhsC,aAK7B,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOjZ,EAAgBrf,OACvBmiC,YAAaA,EACbF,KAAMA,EACNiB,aA3DsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA2DNC,oBAxD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SA4DV,IAAMwB,GAAa,SAAC,GAAe,IAAb/+B,EAAY,EAAZA,MACfk8B,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,EAA0CjI,oBAAS,GAAnD,mBAAQksC,EAAR,KAAsBC,EAAtB,KACA,EAA8B14B,qBAAWklC,IAAjC52C,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAChB,EAAgChC,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KAIA,EAA8B8H,YAAYhU,GAAlC+/C,EAAR,oBAEMjN,EAAa,uCAAG,WAAO3+B,GAAP,SAAA9F,EAAA,6DACrBnC,GAAW,GADU,kBAId6zC,EAAkB,CACvBnqC,UAAW,CACVC,MAAO,CACNypC,eAAgBnrC,EAAEC,OAAOoM,SAE1BjJ,GAAI5D,EAAMD,OATQ,OAYpBjL,GAAWD,GACX0D,GAAW,GAbS,gDAepBA,GAAW,GAfS,yDAAH,sDAmBnB,OACC,eAACiU,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAM6pC,mBAEpB,cAACp9B,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAM6W,WAEpB,cAACpK,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMqxB,UAEpB,cAAC5kB,GAAA,EAAD,UACEnU,EACA,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAExB,cAACq8B,GAAA,EAAD,CACCxyB,QAAS7M,EAAM2rC,eACf5nC,SAAUo7B,EACVrxC,MAAM,cAIT,cAAC2e,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAAC,GAAD,CAAeuwC,aAAcA,EAAcM,eA9CvB,kBAAML,GAAiBD,IA8CgCh/B,MAAOA,OAE5B,IAAtDk8B,EAAgBh2B,QAAQq5B,UAAUgM,SAASllC,OAAoB,KAC/D,cAACoG,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAAC,GAAD,CAAa8rB,OAAO,aAAava,MAAOA,OAGe,IAAxDk8B,EAAgBh2B,QAAQq5B,UAAUgM,SAASlP,SAAsB,KACjE,cAAC5vB,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAACyV,EAAA,EAAD,CAAYpW,MAAM,YAAlB,SACC,cAACm9B,GAAA,EAAD,YASAwU,GAAgB,SAAC,GAA6C,IAA3CH,EAA0C,EAA1CA,eAAgBN,EAA0B,EAA1BA,aAAch/B,EAAY,EAAZA,MAChDjT,EAAUR,KAChB,OACC,gCACC,cAAC2X,EAAA,EAAD,CAAY5B,QAASg9B,EAArB,SACC,cAACI,GAAA,EAAD,MAED,eAACh9B,GAAA,EAAD,CAAQpV,KAAM0xC,EAAczxC,QAAS+xC,EAAgB38B,WAAS,EAACrU,SAAS,KAAxE,UACC,cAACsU,GAAA,EAAD,UAAc,wCACd,eAACC,GAAA,EAAD,WACC,eAAClV,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sCACA,cAAC4F,GAAA,EAAD,OAED,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,cAACD,EAAA,EAAD,CAAKqW,GAAI,EAAGtV,OAAQ,IAAKD,MAAO,IAAKb,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvF,SACC,cAACuR,GAAA,EAAD,CAAQnd,UAAWH,EAAQwc,OAAQe,IAAKtK,EAAMxR,WAE/C,+BACC,eAACR,EAAA,EAAD,WACC,uDACCgS,EAAM6pC,kBAER,eAAC77C,EAAA,EAAD,WACC,yCACCgS,EAAM6W,UAER,eAAC7oB,EAAA,EAAD,WACC,yCACCgS,EAAMqxB,MAAQrxB,EAAMqxB,MAAQ,WAG/B,+BACC,eAACrjC,EAAA,EAAD,WACC,2CACCgS,EAAMoxB,SAAWpxB,EAAMoxB,SAAW,QAEpC,eAACpjC,EAAA,EAAD,WACC,0CACCgS,EAAMzJ,QAAUyJ,EAAMzJ,QAAU,QAElC,eAACvI,EAAA,EAAD,WACC,qDACCgS,EAAM2rC,eAAiB,SAAW,oBAItC,cAACzjC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,SACC,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,eAAC1a,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,UACC,+CAED,cAAC6a,GAAA,EAAD,OAED,eAAClb,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,+BACC,eAACI,EAAA,EAAD,WACC,wCACCgS,EAAMlJ,UAAUC,MAAQiJ,EAAMlJ,UAAUC,MAAQ,QAElD,eAAC/I,EAAA,EAAD,WACC,+CACCgS,EAAMlJ,UAAUE,OAASgJ,EAAMlJ,UAAUE,OAAS,QAEpD,eAAChJ,EAAA,EAAD,WACC,+CACCgS,EAAMlJ,UAAUG,OAAS+I,EAAMlJ,UAAUG,OAAS,QAEpD,eAACjJ,EAAA,EAAD,WACC,mDACCgS,EAAMlJ,UAAUI,cAAgB8I,EAAMlJ,UAAUI,cAAgB,QAElE,eAAClJ,EAAA,EAAD,WACC,0CACCgS,EAAMlJ,UAAUK,QAAU6I,EAAMlJ,UAAUK,QAAU,WAGvD,+BACC,eAACnJ,EAAA,EAAD,WACC,4CACCgS,EAAMlJ,UAAUM,UAAY4I,EAAMlJ,UAAUM,UAAY,QAE1D,eAACpJ,EAAA,EAAD,WACC,4CACCgS,EAAMlJ,UAAUO,UAAY2I,EAAMlJ,UAAUO,UAAY,QAE1D,eAACrJ,EAAA,EAAD,WACC,yCACCgS,EAAMlJ,UAAUQ,OAAS0I,EAAMlJ,UAAUQ,OAAS,QAEpD,eAACtJ,EAAA,EAAD,WACC,uCACCgS,EAAMlJ,UAAUS,KAAOyI,EAAMlJ,UAAUS,KAAO,sBAOrD,cAACgN,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CAAQC,QAASg9B,EAAgBxxC,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAA1E,6BCxRCzW,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAERslB,KAAM,CACLnmB,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAIvBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASgoC,KACvB,IAAMxgD,EAAUR,KACV2vC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,EAA0B5F,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA8B7M,mBAAS,IAAvC,mBAAQymC,EAAR,KAAgBO,EAAhB,KACA,EAA8BhnC,mBAAS,IAAvC,mBAAQ6oB,EAAR,KAAgBC,EAAhB,KACMlc,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAMzCqF,EAAc,WACnBT,GAAQ,IAOT,OACC,8BACC,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAfG,WACvB3C,GAAQ,IAcN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,0EAA0EmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFnI,gBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,sBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAMjC,eAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,gBAAzC,UACC,cAAClL,EAAA,EAAD,CAAKI,GAAI,EAAGugB,SAAS,MAArB,SACC,eAAC+G,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC+rB,GAAA,EAAD,CACCn9B,WAAS,EACT4oB,YAAY,oBACZxnB,SAAU,SAACvD,GAAD,OAAOob,EAAUpb,EAAEC,OAAOxK,QACpC8pC,WApCW,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBq4B,EAAUt5B,EAAEC,OAAOu/B,eAoCnC/pC,MAAO0lB,IAER,cAACzX,EAAA,EAAD,CAAY5B,QAAS,kBAAMw3B,EAAUne,IAArC,SACC,cAAC0K,GAAA,EAAD,YAIqD,IAAvD6V,EAAgBh2B,QAAQq5B,UAAUgM,SAAStL,QAAqB,KAChE,cAACgN,GAAD,CAAc1yB,OAAO,YAAYva,WAAO+G,OAG1C,cAACpZ,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAACk9B,GAAD,CAAe31C,SAAU+H,EAAO/H,SAASoI,IAAKw5B,OAAQA,cCpGrD,IAAMiU,GAA6B76C,0BAE7B86C,GAAwB,SAAC,GAAkB,IAAhB56C,EAAe,EAAfA,SACpC,EAAwBC,mBAAS,CACnC+1B,qBAAqB,KADnB,mBAAOtnB,EAAP,KAAa6lC,EAAb,KAGA,EAA8Bt0C,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KACA,EAA4BhC,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA8BnF,oBAAS,GAAvC,mBAAQynB,EAAR,KAAgBgtB,EAAhB,KACA,EAA0Cz0C,oBAAS,GAAnD,mBAAQ8mB,EAAR,KAAsBC,EAAtB,KACA,EAA8C/mB,mBAAS,IAAvD,mBAAQ46C,EAAR,KAAwBC,EAAxB,KACA,EAA4B76C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAAiCgG,oBAAS,GAA1C,mBAASwF,EAAT,KAAkBC,EAAlB,KAGH,OACC,cAACi1C,GAA2Bx3C,SAA5B,CAAqCC,MAC3B,CACIsL,OACA6lC,UACAvyC,SACAC,YACAvC,QACA0F,WACA2hB,eACAC,kBACAU,SACAgtB,YACAmG,iBACAC,oBACA9gD,QACAC,WACAwL,UACAC,cAjBd,SAoBE1F,KCbEtG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAASy/C,KAAsB,IAAD,IACtC7gD,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACA,EAAwB3qC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC3C8yC,EAAuB,GAE3B,EAA+FtnC,qBAAWinC,IAAlG34C,EAAR,EAAQA,OAAQ0yC,EAAhB,EAAgBA,UAAWmG,EAA3B,EAA2BA,eAAeC,EAA1C,EAA0CA,kBAAmBvG,EAA7D,EAA6DA,QAASt6C,EAAtE,EAAsEA,SAAUyL,EAAhF,EAAgFA,WAChF,EAAiC8H,YAAYinB,IAArCwmB,EAAR,oBAEA,EAA0BlnC,aAASugB,GAAsB,CACxDllB,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAHpBwB,EAAR,EAAQA,KAAM9B,EAAd,EAAcA,QAORorB,EAAc,kBAAMlrB,GAASrS,IACnCuZ,qBACC,WACCpH,MAED,CAAE5K,EAAQ4K,IAGX,IAAM2iC,EAAY,uCAAG,4BAAA1nC,EAAA,6DAEpBnC,GAAW,GAFS,kBAIcu1C,EAAqB,CACzC7rC,UAAW,CACP2B,GAAI8pC,KANF,OAUgC,WANpCrL,EAJI,QAUN9gC,KAAKusC,qBAAqBrgD,QACtCX,EAAS,CAAEW,QAAS,mCAAoCD,OAAQ,UAAWF,MAAM,IAEjFR,EAAS,CAAEW,QAAS40C,EAAU9gC,KAAKusC,qBAAqBrgD,QAASD,OAAQ,QAASF,MAAM,IAGzFmS,IACAlH,GAAW,GACXoH,GAAQ,GACRguC,EAAkB,IAnBC,kDAsBnBnyC,QAAQC,IAAR,MACA3O,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DiL,GAAW,GAxBQ,0DAAH,qDAyClB,OAJGgJ,IACFssC,EAAuBtsC,EAAKssC,sBAI5B,sBAAK3gD,UAAWH,EAAQgnB,KAAxB,UACC,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,6BACmD,IAAlD/M,EAAOwG,QAAQq5B,UAAUzX,cAAczhB,OAAoB,KAC3D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAEoD,IAApDhV,EAAOwG,QAAQq5B,UAAUzX,cAAcuU,SAAsB,KAC7D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,oBACEmhC,SADF,iBACE,EAAsB1P,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,UADvE,aACE,EAAmFnjC,KAAI,SAAC+jC,EAAKhsC,GAC5F,OACC,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAAgBjgB,SAAUq3B,IAAmBtP,EAAIr+B,IAA5F,UACC,cAAC0M,GAAA,EAAD,UAAY2xB,EAAIvV,wBACmC,IAAlDnpB,EAAOwG,QAAQq5B,UAAUzX,cAAczhB,OAAmB,KAC1D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACEg5B,IAAmBtP,EAAIr+B,IACvB,cAACmE,EAAA,EAAD,CAAY5B,QAAS,WACpBqrC,EAAkB,IAClBvG,EAAQ,CACPve,qBAAsB,MAHxB,SAMC,cAAC,KAAD,MAGD,cAAC3kB,EAAA,EAAD,CAAY5B,QAAS,WACpBilC,GAAU,GACVH,EAAQ,CACPve,qBAAsBuV,EAAIvV,uBAE3B8kB,EAAkBvP,EAAIr+B,MALvB,SAOC,cAACqX,GAAA,EAAD,SAKiD,IAApD1X,EAAOwG,QAAQq5B,UAAUzX,cAAcuU,SAAqB,KAC5D,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,WACpBqrC,EAAkBvP,EAAIr+B,KACtB8qB,KAFD,SAIC,cAACI,GAAA,EAAD,UAhC+CmT,EAAIr+B,eA2C7D,cAACs+B,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOka,EAAqBxyC,OAC5BmiC,YAAaA,EACbF,KAAMA,EACNiB,aAtFqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAsFLC,oBAnF4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,SAoFP,cAAC,GAAD,CAAO1S,YAAaA,EAAaiX,UAAWx0C,EAAM80C,aAAcA,OAMnE,IAAMI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,8BACC,eAAC1/B,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,yBCvLU,SAAS2L,KACvB,MAA0JxnC,qBAAWinC,IAA7JjsC,EAAR,EAAQA,KAAM6lC,EAAd,EAAcA,QAASvyC,EAAvB,EAAuBA,OAAQC,EAA/B,EAA+BA,UAAWvC,EAA1C,EAA0CA,MAAO0F,EAAjD,EAAiDA,SAAUsiB,EAA3D,EAA2DA,OAAQgtB,EAAnE,EAAmEA,UAAWmG,EAA9E,EAA8EA,eAAgBC,EAA9F,EAA8FA,kBAAoBp1C,EAAlH,EAAkHA,WAAYzL,EAA9H,EAA8HA,SAAUwL,EAAxI,EAAwIA,QAASzL,EAAjJ,EAAiJA,MAC3I6S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAS/C,EAA+BsF,YAAY+mB,IAAnC+B,EAAR,oBACA,EAAmC9oB,YAAYgnB,IAAvC2mB,EAAR,oBAIMnzB,EAAQ,uCAAG,8BAAAngB,EAAA,kEAEX6G,EAAKsnB,qBAFM,uBAGd5wB,GAAS,GAHK,6BAMRiK,EAAQX,GACXgZ,EAPW,qBAQ0C,IAAnD7a,EAAOwG,QAAQq5B,UAAUzX,cAAcmY,QAR9B,0CASLnzC,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAT/F,yBAWN67B,EAAmB,CACxBlnB,UAAW,CACVC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAfhB,oCAoByC,IAAlDL,EAAOwG,QAAQq5B,UAAUzX,cAAczhB,OApB9B,0CAqBLvZ,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KArB/F,eAuBN46C,EAAmBhuC,GAAegI,GAvB5B,UAwBN8rC,EAAuB,CAC5B/rC,UAAW,CACVC,MAAOgmC,EACPtkC,GAAI8pC,KA3BM,QAgCd54C,GAAWD,GACX0yC,GAAU,GACVoG,EAAkB,IAClBvG,EAAQ,CACPve,qBAAsB,KAEX/7B,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD2K,GAAS,GACTM,GAAW,GAxCT,oHAAH,qDA8Cd,OACC,eAAC5K,EAAA,EAAD,WACC,cAACf,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,eAAC5K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASmL,GAAI,EAApE,UACC,cAAClB,EAAA,EAAD,CACCa,GAAG,6BACHuM,MAAM,sBACNla,MAAOsL,EAAKsnB,qBACZnoB,KAAK,uBACLuC,QAAQ,WACRD,KAAK,QACUL,WAAS,EACxBoB,SAvEiB,SAACvD,GACrB4mC,EAAQ,2BACJ7lC,GADG,kBAELf,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAqExB1D,MAAOA,IAER,cAAC5E,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQS,kBAAgB,EAACnB,QAASuY,EAAnF,UACC,cAACrY,GAAA,EAAD,IADD,gBAID,cAACorC,GAAD,OCjFH,IAAMrhD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS0oC,KACvB,IAAMlhD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,8BACC,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAXG,WACvB3C,GAAQ,IAUN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,+EAA+EmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFxI,qBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,2BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACy/C,GAAD,CAAuBxzB,OAAO,0B,qDC/C/BhuB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERy3B,SAAU,CACTA,SAAU,GAEX7P,SAAU,CACTiO,WAAY4pB,aAAKzhD,EAAM2nB,QAAQ+5B,UAAU75B,KAAM,SAIlC,SAAS85B,KACvB,IAAMrhD,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAoCjI,mBAAS,IAA7C,mBAAQq1B,EAAR,KAAmBkmB,EAAnB,KACA,EAAsCv7C,mBAAS,IAA/C,mBAAQw7C,EAAR,KAAoBC,EAApB,KACA,EAAgDz7C,oBAAS,GAAzD,mBAAQ07C,EAAR,KAAyBC,EAAzB,KACA,EAA4B37C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAGA,EAA0C8Z,aAASsT,GAAoB,CACtEjY,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAD7DzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9B,EAA2BY,YAAYwmB,IAA/BoC,EAAR,oBACA,EAAgC5oB,YAAY0mB,IAApC2nB,EAAR,oBAQMC,EAAgB,uCAAG,4BAAAj0C,EAAA,yDACnBytB,EADmB,oDAExBsmB,GAAmB,GAFK,SAIlBH,EAJkB,qBAK8B,IAAhD5uC,EAAOwG,QAAQq5B,UAAU1X,WAAWoY,QALlB,wBAMrBwO,GAAmB,GANE,kBAOd3hD,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KAPpF,yBASf27B,EAAe,CACpBhnB,UAAW,CACVC,MAAO,CACNimB,YACAtwB,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAdR,oCAqB6B,IAA/CL,EAAOwG,QAAQq5B,UAAU1X,WAAWxhB,OArBlB,wBAsBrBooC,GAAmB,GAtBE,kBAuBd3hD,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KAvBpF,eAyBfshD,EAAuB10C,GAAeiuB,GAzBvB,UA0BfumB,EAAoB,CACzBzsC,UAAW,CACVC,MAAO,CACNimB,UAAWymB,GAEZrlB,YAAa+kB,KA/BM,QAoCvB7uC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDmhD,GAAmB,GACnBJ,EAAa,IACbE,EAAc,IAxCS,kDA0CvBzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GA3CI,0DAAH,qDA8CtB,GAAIn2C,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IACMs8C,EADwBttC,EAAtButC,kBACoCz0C,KAAI,SAAC8tB,EAAW/1B,GAAZ,OAC/C,cAAC,GAAD,CAEC+1B,UAAWA,EACXomB,cAAeA,EACfF,aAAcA,EACd5uC,QAASA,EACT6uC,WAAYA,GALPl8C,MAQP,OACC,sBAAKlF,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASk2C,EAAiBj2C,WAAYk2C,IACzD,cAACzgD,EAAA,EAAD,CAAYiV,QAAQ,KAApB,wBACA,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACC,cAACC,EAAA,EAAD,CAAW9M,MAAOkyB,EAAWllB,QAAQ,WAAWD,KAAK,QAAQe,SA7E3C,SAACvD,GACrB6tC,EAAa7tC,EAAEC,OAAOxK,UA6EpB,cAACtI,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQS,kBAAgB,EAACnB,QAASqsC,EAAnF,UACC,cAACnsC,GAAA,EAAD,IADD,gBAIAqsC,KAKJ,IAAME,GAAmB,SAAC,GAAqE,IAAnE5mB,EAAkE,EAAlEA,UAAWomB,EAAuD,EAAvDA,cAAeF,EAAwC,EAAxCA,aAAc5uC,EAA0B,EAA1BA,QAAS6uC,EAAiB,EAAjBA,WACtEvhD,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0CjI,mBAAS,IAAnD,mBAAQ61B,EAAR,KAAsBqmB,EAAtB,KACA,EAAgDl8C,oBAAS,GAAzD,mBAAQ07C,EAAR,KAAyBC,EAAzB,KACA,EAA4B37C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAGA,EAA8BuT,YAAYymB,IAAlCoC,EAAR,oBACA,EAAmC7oB,YAAY2mB,IAAvCioB,EAAR,oBACA,EAA8B5uC,YAAY4mB,IAAlCioB,EAAR,oBAGMC,EAAuBhnB,EAAUp0B,cAAcsG,KAAI,SAACsuB,GAAD,OACxD,cAAC,GAAD,CAECY,YAAcpB,EAAUpoB,IACxB4oB,aAAcA,EACd4lB,cAAeA,EACfD,WAAYA,EACZU,gBAAiBA,EACjBliD,SAAUA,EACV2S,QAASA,GAPJkpB,EAAa5oB,QA6BdqvC,EAAmB,uCAAG,gCAAA10C,EAAA,yDACtBiuB,EADsB,oDAE3B8lB,GAAmB,GACfnI,EAAW,GAHY,SAMrBgI,EANqB,qBAO2B,IAAhD5uC,EAAOwG,QAAQq5B,UAAU1X,WAAWoY,QAPf,wBAQxBwO,GAAmB,GARK,kBASjB3hD,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KATjF,yBAWX47B,EAAkB,CAC9BjnB,UAAW,CACVC,MAAO,CACNymB,gBAEDY,YAAapB,EAAUpoB,OAhBD,QAWxBsmC,EAXwB,OAmBxBC,EAAqD,UAAxCD,EAAK9kC,KAAK2nB,kBAAkBz7B,QAAwB,CAAEA,QAAS,aAAWD,OAAQ,UAAWF,MAAM,GAAQ,CAAEG,QAAS44C,EAAK9kC,KAAK2nB,kBAAkBz7B,QAASD,OAAQ,QAASF,MAAM,GAnBvK,oCAsB0B,IAA/CoS,EAAOwG,QAAQq5B,UAAU1X,WAAWxhB,OAtBf,wBAuBxBooC,GAAmB,GAvBK,kBAwBjB3hD,EAAS,CAAEW,QAAS,4DAAuDD,OAAQ,QAASF,MAAM,KAxBjF,eA0BlB+hD,EAA0Bn1C,GAAeyuB,GA1BvB,UA2BXsmB,EAAuB,CACnChtC,UAAW,CACVC,MAAO,CACNymB,aAAc0mB,GAEf9lB,YAAapB,EAAUpoB,IACvBuvC,eAAgBhB,KAjCM,QA2BxBjI,EA3BwB,OAoCxBC,EAAyD,UAA7CD,EAAK9kC,KAAK0tC,uBAAuBxhD,QAAwB,CAAEA,QAAS,aAAWD,OAAQ,UAAWF,MAAM,GAAQ,CAAEG,QAAS44C,EAAK9kC,KAAK0tC,uBAAuBxhD,QAASD,OAAQ,QAASF,MAAM,GApChL,QAuC1BmS,IAEA3S,EAASw5C,GACTmI,GAAmB,GACnBO,EAAgB,IAChBT,EAAc,IA5CY,kDA8C1BzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GA/CO,0DAAH,qDAmDnBrM,EAAY,uCAAG,WAAOh+B,GAAP,iBAAA1J,EAAA,6DACpB0J,EAAMmrC,kBADc,kBAGAL,EAAkB,CACpCjtC,UAAW,CACVsnB,YAAapB,EAAUpoB,OALN,OAGbsmC,EAHa,OASfC,EAAqD,UAAxCD,EAAK9kC,KAAK2tC,kBAAkBzhD,QAAwB,CAAEA,QAAS,aAAWD,OAAQ,UAAWF,MAAM,GAAQ,CAAEG,QAAS44C,EAAK9kC,KAAK2tC,kBAAkBzhD,QAASD,OAAQ,QAASF,MAAM,GACnMR,EAASw5C,GACT7mC,IAXmB,kDAcnB3S,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAdzC,0DAAH,sDAmBlB,OACC,eAAC,WAAD,WACC,cAACV,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASk2C,EAAiBj2C,WAAYk2C,IACzD,eAACe,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CACCviD,UAAWohD,GAAcA,IAAenmB,EAAUpoB,IAAMhT,EAAQspB,SAAW,GAC3Eq5B,WAAY,cAACC,GAAA,EAAD,IACZ,aAAW,SACX,2CAAmCxnB,EAAUpoB,KAC7C6D,GAAE,oBAAeukB,EAAUpoB,KAL5B,SAOC,eAACpS,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASrK,MAAM,OAA9C,UACC,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SAA0BklB,EAAUA,YACpC,qBAAKj7B,UAAWH,EAAQm5B,YACwB,IAA/CxmB,EAAOwG,QAAQq5B,UAAU1X,WAAWxhB,OAAmB,KACvDioC,GAAcA,IAAenmB,EAAUpoB,IACtC,cAACmE,EAAA,EAAD,CAAY5B,QAjGI,SAAC8B,GACvBA,EAAMmrC,kBACNhB,EAAc,IACdF,EAAa,KA8F8BuB,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA/D,SACC,cAAC,KAAD,MAGD,cAACrrC,EAAA,EAAD,CACC5B,QA9G4B,SAAC8B,GAEpC0qB,OAAO+gB,SAAS,EAAE,GAClBzrC,EAAMmrC,kBACNhB,EAAcpmB,EAAUpoB,KACxBsuC,EAAalmB,EAAUA,YA0GhBynB,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAF3B,SAIC,cAACn4B,GAAA,EAAD,OAI+C,IAAjD1X,EAAOwG,QAAQq5B,UAAU1X,WAAWwU,SAAqB,KACzD,cAACn4B,EAAA,EAAD,CACC5B,QAAS,SAAC8B,GAAD,OAAWg+B,EAAah+B,IACjCwrC,QAAS,SAACxrC,GAAD,OAAWg+B,EAAah+B,IAFlC,SAIC,cAAC6mB,GAAA,EAAD,WAKJ,cAAC6kB,GAAA,EAAD,UACC,eAACniD,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACoa,GAAA,EAAD,IACA,cAAClb,EAAA,EAAD,CAAKmV,GAAI,IACT,eAACnV,EAAA,EAAD,CAAK0iB,GAAI,EAAG5hB,MAAM,OAAOb,QAAQ,OAAjC,UACC,cAACI,EAAA,EAAD,CAAYiV,QAAQ,KAApB,2BACA,cAACtV,EAAA,EAAD,CAAKI,GAAI,IACT,eAACJ,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACC,cAACC,EAAA,EAAD,CACC9M,MAAO0yB,EACP1lB,QAAQ,WACRD,KAAK,QACLe,SA7Ha,SAACvD,GACrBwuC,EAAgBxuC,EAAEC,OAAOxK,UA8HnB,cAACtI,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CACCvU,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLS,kBAAgB,EAChBnB,QAAS8sC,EALV,UAOC,cAAC5sC,GAAA,EAAD,IAPD,mBAWF,cAAC7U,EAAA,EAAD,CAAK0iB,GAAI,EAAT,SAAa8+B,gBAQbY,GAAsB,SAAC,GAAgG,IAA9FpnB,EAA6F,EAA7FA,aAAaY,EAAgF,EAAhFA,YAAa+kB,EAAmE,EAAnEA,WAAYC,EAAuD,EAAvDA,cAAeS,EAAwC,EAAxCA,gBAAgBliD,EAAwB,EAAxBA,SAAU2S,EAAc,EAAdA,QACvGC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzChO,EAAUR,KAChB,EAAiC8T,YAAY6mB,IAArC8oB,EAAR,oBAYM5N,EAAY,uCAAG,WAAOh+B,GAAP,iBAAA1J,EAAA,sEAEnB0J,EAAMmrC,kBAFa,SAGAS,EAAqB,CACvC/tC,UAAW,CACVsnB,YAAaA,EACb+lB,eAAe3mB,EAAa5oB,OANX,OAGbsmC,EAHa,OAUfC,EAAwD,UAA3CD,EAAK9kC,KAAKyuC,qBAAqBviD,QAAwB,CAAEA,QAAS,aAAWD,OAAQ,UAAWF,MAAM,GAAQ,CAAEG,QAAS44C,EAAK9kC,KAAKyuC,qBAAqBviD,QAASD,OAAQ,QAASF,MAAM,GAEzMR,EAASw5C,GAET7mC,IAdmB,kDAiBnB3S,EAAS,CAAEW,QAAS,sBAAoBD,OAAQ,QAASF,MAAM,IAjB5C,0DAAH,sDAoBlB,OACC,eAAC,WAAD,WACC,eAACK,EAAA,EAAD,CACCC,QAAQ,OACRkL,WAAW,SACXwQ,aAAc,EACd2mC,GAAI,EACJ/iD,UAAWohD,GAAcA,IAAe3lB,EAAa5oB,IAAMhT,EAAQspB,SAAW,GAL/E,UAOC,cAACroB,EAAA,EAAD,UAAa26B,EAAaA,eAC1B,qBAAKz7B,UAAWH,EAAQm5B,YACwB,IAA/CxmB,EAAOwG,QAAQq5B,UAAU1X,WAAWxhB,OAAmB,KACvDioC,GAAcA,IAAe3lB,EAAa5oB,IACzC,cAACmE,EAAA,EAAD,CAAY5B,QAtCM,SAAC8B,GACvBA,EAAMmrC,kBACNhB,EAAc,IACdS,EAAgB,KAmCyBY,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA/D,SACC,cAAC,KAAD,MAGD,cAACrrC,EAAA,EAAD,CAAY5B,QAhDmB,SAAC8B,GACpCA,EAAMmrC,kBACNhB,EAAc5lB,EAAa5oB,KAC3BivC,EAAgBrmB,EAAaA,eA6CyBinB,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA5E,SACC,cAACn4B,GAAA,EAAD,OAI+C,IAAjD1X,EAAOwG,QAAQq5B,UAAU1X,WAAWwU,SAAqB,KACzD,cAACn4B,EAAA,EAAD,CAAY5B,QAAS,SAAC8B,GAAD,OAAWg+B,EAAah+B,IAA7C,SACC,cAAC6mB,GAAA,EAAD,SAIH,cAACpiB,GAAA,EAAD,QCzXGtc,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS2qC,KACvB,IAAMnjD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,4EAA4EmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFrI,kBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,wBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAAC8/C,GAAD,cCjDN,IAAM7hD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7BL,MAAO,CACNF,QAAS,OACTkL,WAAY,cAIC,SAASq3C,GAAT,GAA6E,IAArDnwC,EAAoD,EAApDA,MAAOjI,EAA6C,EAA7CA,SAAUC,EAAmC,EAAnCA,YAAa4jB,EAAsB,EAAtBA,UAAWnc,EAAW,EAAXA,QACzE1S,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0BjI,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACA,EAAkC3qC,mBAAS,IAA3C,mBAAQ2xB,EAAR,KAAkBC,EAAlB,KACA,EAAsD5xB,mBAAS,IAA/D,mBAAQ8lC,EAAR,KAA4BC,EAA5B,KACA,EAA4B/lC,mBAAS,CACpCtF,OAAQ,GACRC,QAAS,GACTH,MAAM,IAHP,mBAAQT,EAAR,KAAeC,EAAf,KA0BA,OAXA+Z,qBACC,WACCgyB,EACC74B,EAAMlC,QAAO,SAACkC,GACb,OAAOA,EAAM6W,OAAOiiB,cAAcrS,SAAShC,EAASqU,qBAIvD,CAAErU,EAAUzkB,IAIZ,sBAAK9S,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACuoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAACrmB,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACiK,EAAA,EAAD,CACCJ,WAAS,EACT4oB,YAAY,YACZtoB,QAAQ,WACRc,SAAU,SAACvD,GAAD,OAAOkkB,EAAYlkB,EAAEC,OAAOxK,YAGxC,cAACoW,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWhe,MAAO,IAAlB,mBACA,cAACge,GAAA,EAAD,sBAC6C,IAA5C/M,EAAOwG,QAAQq5B,UAAUxjB,QAAQ1V,OAAoB,KACrD,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAE8C,IAA9ChV,EAAOwG,QAAQq5B,UAAUxjB,QAAQsgB,SAAsB,KACvD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,UACEksB,EACCuF,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GACV,OACC,cAAC,GAAD,CAECgsC,IAAKA,EACLtxC,SAAUA,EACViL,SAAUA,EACVC,YAAaA,EACb4jB,UAAWA,EACXnc,QAASA,GANJrN,aAaZ,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAO3zB,EAAM3E,OACbmiC,YAAaA,EACbF,KAAMA,EACNiB,aA5EqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA4ELC,oBAzE4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,YA8EV,IAAMwB,GAAa,SAAC,GAAkE,IAAhEX,EAA+D,EAA/DA,IAAKtxC,EAA0D,EAA1DA,SAAUiL,EAAgD,EAAhDA,SAAUC,EAAsC,EAAtCA,YAAa4jB,EAAyB,EAAzBA,UAAWnc,EAAc,EAAdA,QAChE1S,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAoCjI,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KAEMlX,EAAc,kBAAMkX,GAAcD,IAExC,EAA0BzhC,YAAYmb,GAAgB,CACrD3mB,OADqD,SAC9Cu7C,EAD8C,GACT,IAApBC,EAAmB,EAA3B9uC,KAAQ8uC,cACvB,IACC,IAAQ1wB,EAAmBywB,EAAME,UAAU,CAC1CC,MAAOj1B,GACPrZ,UAAW,CAAEpK,QAASumC,EAAIvmC,QAAQkI,OAF3B4f,eAKRywB,EAAMI,WAAW,CAChBD,MAAOj1B,GACPrZ,UAAW,CAAEpK,QAASumC,EAAIvmC,QAAQkI,KAClCwB,KAAM,CACLoe,eAAe,2BACXA,GADU,IAEb0wB,qBAIF,MAAO99C,QAlBH89C,EAAR,oBAuBMjO,EAAY,uCAAG,4BAAA1nC,EAAA,+EAEA21C,EAAc,CAChCpuC,UAAW,CACV2B,GAAIw6B,EAAIr+B,OAJS,OAEbsmC,EAFa,OAOnB5mC,EAAQA,GACR3S,EAAS,CAAEW,QAAS44C,EAAK9kC,KAAK8uC,cAAc5iD,QAASD,OAAQ,UAAWF,MAAM,IAC9Eu9B,IATmB,gDAWnB/9B,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAXvC,yDAAH,qDAeZ0nB,EAAW,SAACopB,GACjB,IAAKA,EAGJ,OAFApmC,EAAY,SACZ4jB,EAAU,CAAE/E,OAAQ,GAAII,IAAK,KAG9Bjf,EAAYomC,EAAIr+B,KAChB6b,EAAU,CAAE/E,OAAQunB,EAAIvnB,OAAQI,IAAKmnB,EAAInnB,OAG1C,OACC,eAACzK,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAAGjgB,SAAUte,IAAaqmC,EAAIr+B,IAAzE,UACC,eAAC0M,GAAA,EAAD,CAAWvf,UAAWH,EAAQe,MAA9B,UACC,cAACH,EAAA,EAAD,CAAKI,GAAI,EAAGU,MAAO,GAAIC,OAAQ,GAAI2tB,QAAS+hB,EAAInnB,IAAK3N,aAAa,QAClE,cAACtb,EAAA,EAAD,UACC,4BAAIowC,EAAInnB,WAGV,cAACxK,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UACC,4BAAIowC,EAAIvnB,cAGmC,IAA5CnX,EAAOwG,QAAQq5B,UAAUxjB,QAAQ1V,OAAoB,KACrD,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE3c,IAAaqmC,EAAIr+B,IACjB,cAACmE,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,KAA3B,SACC,cAAC,KAAD,MAGD,cAAC9Q,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,EAASopB,IAApC,SACC,cAAChnB,GAAA,EAAD,SAK2C,IAA9C1X,EAAOwG,QAAQq5B,UAAUxjB,QAAQsgB,SAAsB,KACvD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC,GAAD,CAAOmW,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,UAOpEI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,gCACC,cAACl+B,EAAA,EAAD,CAAYpW,MAAM,YAAYwU,QAASuoB,EAAvC,SACC,cAACI,GAAA,EAAD,MAED,eAACvoB,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,gCC1NU,SAASqO,KACvB,MAA4B39C,mBAAS,IAArC,mBAAQhF,EAAR,KAAe4tB,EAAf,KACA,EAAkC5oB,mBAAS,IAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAA8BlF,mBAAS,CAAE+jB,OAAQ,GAAII,IAAK,KAA1D,mBAAQ0E,EAAR,KAAgBC,EAAhB,KACA,EAA4B9oB,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAG/C,EAA0C6L,aAAS0U,GAAiB,CACnErZ,UAAW,CAAEtK,SAAU+H,EAAO/H,SAASoI,OADhCzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAK9B,EAAuBY,YAAYgb,IAA3BQ,EAAR,oBACA,EAA4Bxb,YAAYkb,IAAhCm1B,EAAR,oBAUA,GAAIp4C,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAQotB,EAAmBpe,EAAnBoe,eAEF7D,EAAc,uCAAG,kCAAAphB,EAAA,yDACjBihB,EAAO9E,QAAW8E,EAAO1E,IADR,6DAKf8E,EAAUJ,GAEZ5jB,EAPiB,qBAQ4B,IAA5C2H,EAAOwG,QAAQq5B,UAAUxjB,QAAQ1V,OARjB,yCASZvZ,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KATxF,cAWbqjD,EAAmBz2C,GAAe6hB,GAXrB,UAYA20B,EAAgB,CACjCzuC,UAAW,CACVC,MAAO,CACN2U,OAAQ85B,EAAiB95B,OACzBI,IAAK05B,EAAiB15B,KAEvBrT,GAAI7L,KAlBY,QAYbsuC,EAZa,OAqBnBuK,EAAMvK,EAAK9kC,KAAKmvC,gBAAgBjjD,QArBb,oCAwB6B,IAA7CiS,EAAOwG,QAAQq5B,UAAUxjB,QAAQkkB,QAxBjB,0CAyBZnzC,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAzBxF,yBA2BZuuB,EAAW,CACjB5Z,UAAW,CACVC,MAAO,CACN2U,OAAQkF,EAAQlF,OAChBI,IAAK8E,EAAQ9E,IACbpf,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAjCV,QAqCnB6wC,EAAM,4BArCa,QAwCrBnxC,IACAmc,EAAU,CAAE/E,OAAQ,GAAII,IAAK,KAC7Bjf,EAAY,IAEZlL,EAAS,CAAEW,QAASmjD,EAAKpjD,OAAQ,UAAWF,MAAM,IA5C7B,kDA8CrBR,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IA9CrC,0DAAH,qDAoDpB,OACC,eAACK,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,UACC,cAACjM,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACob,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACC,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,cAAC,KAAD,CAAcva,MAAOA,EAAOquB,iBA7EH,SAACruB,GAC7B4tB,EAAS5tB,GACT8tB,EAAU,2BACND,GADK,IAER1E,IAAKnpB,EAAMmpB,IAAImF,oBA0Eb,eAACzuB,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,cAAChW,EAAA,EAAD,kCACE2tB,EAAO1E,IAKR,cAACtpB,EAAA,EAAD,CAAK0uB,QAASV,EAAO1E,IAAKvoB,OAAQ,GAAID,MAAO,MAJ7C,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASpK,MAAO,IAAnD,SACC,cAACT,EAAA,EAAD,CAAYF,MAAM,YAAlB,0BAMH,eAACH,EAAA,EAAD,CAAKsW,GAAI,EAAGxV,MAAM,MAAlB,UACC,cAACsU,EAAA,EAAD,CACCoN,MAAM,mBACNlN,QAAQ,WACRD,KAAK,QACL/M,MAAO0lB,EAAO9E,OACd9S,SAAU,SAACvD,GAAD,OAAOob,EAAU,2BAAKD,GAAN,IAAc9E,OAAQrW,EAAEC,OAAOxK,MAAMmmB,kBAC/DzZ,WAAS,IAEV,cAAChV,EAAA,EAAD,CAAKsW,GAAI,IACT,eAAC5B,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQL,WAAS,EAACL,QAASwZ,EAA5E,UACC,cAACtZ,GAAA,EAAD,IADD,mBAKF,cAAC0F,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,cAAC8nC,GAAD,CACCnwC,MAAO2f,EACP5nB,SAAUA,EACVC,YAAaA,EACb4jB,UAAWA,EACXnc,QAASA,YC7Hf,IAAMlT,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASka,KACvB,IAAM1yB,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,yEAAyEmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFlI,eAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,qBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAACmiD,GAAD,cC3CN,IAAMlkD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAAS0iD,GAAT,GAAoE,IAAD,IAA7CrJ,EAA6C,EAA7CA,WAAYzvC,EAAiC,EAAjCA,SAAUC,EAAuB,EAAvBA,YAAaovC,EAAU,EAAVA,QAE9Dr6C,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACH,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACA,EAA4B3qC,mBAAS,CACpCtF,OAAQ,GACRC,QAAS,GACTH,MAAM,IAHP,mBAAQT,EAAR,KAAeC,EAAf,KAKM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC3C+1C,EAAgB,GAGjB,EAA0BlqC,aAAS2gB,GAAe,CACpDtlB,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAHjBwB,EAAR,EAAQA,KAAM9B,EAAd,EAAcA,QAOjBoH,qBAAU,WACTpH,MACE,CAACA,EAAS+nC,IAEPjmC,IACLuvC,EAAgBvvC,EAAKuvC,eAanB,OACI,sBAAK5jD,UAAWH,EAAQgnB,KAAxB,UACL,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAACuoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,qBAC4C,IAA3C/M,EAAOwG,QAAQq5B,UAAUxX,OAAO1hB,OAAoB,KACpD,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAE6C,IAA7ChV,EAAOwG,QAAQq5B,UAAUxX,OAAOsU,SAAsB,KACtD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,oBAECokC,SAFD,iBAEC,EACG3S,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,UAHnD,aAEC,EAEGnjC,KAAI,SAAC+jC,EAAKhsC,GACX,OAAO,cAAC,GAAD,CAAwBtF,SAAUA,EAAU2S,QAASA,EAASO,MAAOo+B,EAAKrmC,SAAUA,EAAUC,YAAaA,EAAaovC,QAASA,GAAhHh1C,aAM7B,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOmd,EAAcz1C,OACrBmiC,YAAaA,EACbF,KAAMA,EACNiB,aAjDwB,SAACn6B,EAAOo6B,GACnCjB,EAAQiB,IAiDLC,oBA9C4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,YAmDV,IAAMwB,GAAa,SAAC,GAA8E,IAA5E/+B,EAA2E,EAA3EA,MAAmBjI,GAAwD,EAApEyvC,WAAoE,EAAxDzvC,UAAUjL,EAA8C,EAA9CA,SAAUkL,EAAoC,EAApCA,YAAaovC,EAAuB,EAAvBA,QAAS3nC,EAAc,EAAdA,QAC5EC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAoCjI,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KACMlX,EAAc,kBAAMkX,GAAcD,IAExC,EAA0BzhC,YAAYqnB,IAA9BqpB,EAAR,oBAEM3O,EAAY,uCAAG,4BAAA1nC,EAAA,+EAEKq2C,EAAc,CACrC9uC,UAAW,CACV2B,GAAI5D,EAAMD,IACVlI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OANT,OASyB,WAPtCsiC,EAFa,QASN9gC,KAAKwvC,cAActjD,QAC/BX,EAAS,CAAEW,QAAS,4BAA6BD,OAAQ,UAAWF,MAAM,IAE1ER,EAAS,CAAEW,QAAS40C,EAAU9gC,KAAKwvC,cAActjD,QAASD,OAAQ,QAASF,MAAM,IAElFmS,IACAorB,IAfmB,kDAiBnB/9B,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAjBvC,0DAAH,qDAqBZ0nB,EAAW,SAACuxB,GACjB,IAAIA,EAIH,OAHAvuC,EAAY,IACZovC,EAAQ,SACR3nC,IAGDA,IACAzH,EAAYuuC,EAAKxmC,KACjBqnC,EAAQb,IAGT,OACC,eAAC/5B,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAAGjgB,SAAUte,IAAaiI,EAAMD,IAA3E,UACC,cAAC0M,GAAA,EAAD,UAAYzM,EAAM+oB,gBAC0B,IAA3CrpB,EAAOwG,QAAQq5B,UAAUxX,OAAO1hB,OAAoB,KACpD,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE3c,IAAaiI,EAAMD,IACnB,cAACmE,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,KAA3B,SACC,cAAC,KAAD,MAGD,cAAC9Q,EAAA,EAAD,CAAY5B,QAAS,kBAAM0S,EAAShV,IAApC,SACC,cAACoX,GAAA,EAAD,SAK0C,IAA7C1X,EAAOwG,QAAQq5B,UAAUxX,OAAOsU,SAAsB,KACtD,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC,GAAD,CAAOmW,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,UASpEI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,gCACC,cAACl+B,EAAA,EAAD,CAAYpW,MAAM,YAAYwU,QAASuoB,EAAvC,SACC,cAACI,GAAA,EAAD,MAED,eAACvoB,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,0CACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,gCCpMQ4O,GAAsBr+C,0BAEtBs+C,GAAiB,SAAC,GAAkB,IAAhBp+C,EAAe,EAAfA,SAChC,EAAwCC,mBAAS,CAC1Ci2B,aAAc,KADrB,mBAAQmoB,EAAR,KAAqBC,EAArB,KAIG,EAA8Br+C,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KACA,EAA4BhC,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA0CnF,oBAAS,GAAnD,mBAAQ8mB,EAAR,KAAsBC,EAAtB,KAEH,OACC,cAACm3B,GAAoBh7C,SAArB,CAA8BC,MACpB,CACIi7C,cACAC,iBACAt8C,SACAC,YACAvC,QACA0F,WACA2hB,eACAC,mBATd,SAYEhnB,KCXW,SAASu+C,KAEpB,MAA4Bt+C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA0BgG,mBAAS,CAC/Bi2B,aAAc,KADlB,mBAAQxnB,EAAR,KAAc6lC,EAAd,KAGA,EAAkCt0C,mBAAS,IAA3C,mBAAQiF,EAAR,KAAkBC,EAAlB,KACA,EAAoClF,oBAAS,GAA7C,mBAAO00C,EAAP,KAAmBM,EAAnB,KACA,EAA+DvhC,qBAAWyqC,IAA/Bz+C,EAA3C,EAA2CA,MAAO0F,EAAlD,EAAkDA,SAE5CyH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAAuBsF,YAAYmnB,IAA3B4B,EAAR,oBACH,EAA4B/oB,YAAYonB,IAAhC4pB,EAAR,oBASSx2B,EAAQ,uCAAG,8BAAAngB,EAAA,kEAEL6G,EAAKwnB,aAFA,uBAGL9wB,GAAS,GAHJ,8BAMFF,EANE,qBAO8C,IAA3C2H,EAAOwG,QAAQq5B,UAAUxX,OAAO1hB,OAPnC,0CAQUvZ,EAAS,CAAEW,QAAS,kEAA0DD,OAAQ,QAASF,MAAM,KAR/G,eAUS4U,EAAQhI,GAAeqH,GAVhC,UAWS8vC,EAAgB,CAClBpvC,UAAW,CACPC,MAAO,CACH6mB,aAAc7mB,EAAM6mB,cAExBnlB,GAAI7L,KAhBf,QAmBGqvC,EAAQ,IAnBX,oCAsB+C,IAA5C1nC,EAAOwG,QAAQq5B,UAAUxX,OAAOkY,QAtBnC,0CAuBUnzC,EAAS,CAAEW,QAAS,kEAA0DD,OAAQ,QAASF,MAAM,KAvB/G,eAyBS4U,EAAQX,EAzBjB,UA0BS6nB,EAAW,CACbnnB,UAAW,CACPC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OA9BrC,QAiCGqnC,EAAQ,IAjCX,QAoCLpvC,EAAY,IACZ8vC,GAAeN,GACf16C,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD2K,GAAS,GAvCJ,oHAAH,qDAiDd,OACI,gCACI,cAACrL,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACtC,eAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASmL,GAAI,EAApE,UACI,cAAClB,EAAA,EAAD,CACIa,GAAG,6BACHuM,MAAM,sBACNla,MAAOsL,EAAKwnB,aAAexnB,EAAKwnB,aAAe,GAC/CroB,KAAK,eACLuC,QAAQ,WACRD,KAAK,QACLL,WAAS,EACToB,SApEC,SAACvD,GAClB4mC,EAAQ,2BACD7lC,GADA,kBAEFf,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAkEd1D,MAAOA,EACPwtC,WAlBD,SAACv/B,GACF,UAAVA,EAAEiB,KAAiBoZ,OAmBX,cAACltB,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLS,kBAAgB,EAChBnB,QAASuY,EALb,UAOI,cAACrY,GAAA,EAAD,IAPJ,gBAUR,cAACquC,GAAD,CAAa94C,SAAUA,EAAUC,YAAaA,EAAawvC,WAAYA,EAAYJ,QAASA,OChGxG,IAAM/hC,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLnM,SAAU,SAIG,SAASu4C,KACpB,IAAMvkD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMGS,EAAc,WACnBT,GAAQ,IAGN,OACI,8BACL,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAXM,WAC1B3C,GAAQ,IAUN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,KAAD,CAAU5L,UAAWH,EAAQmY,SAF/B,cAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,oBAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAAC8iD,GAAD,gBCnDP,IAAM7kD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERy3B,SAAU,CACTA,SAAU,GAEX7P,SAAU,CACTiO,WAAY4pB,aAAKzhD,EAAM2nB,QAAQ+5B,UAAU75B,KAAM,SAIlC,SAAS85B,KACvB,IAAMrhD,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA8BjI,mBAAS,IAAvC,mBAAQ4E,EAAR,KAAgB65C,EAAhB,KACA,EAAsCz+C,mBAAS,IAA/C,mBAAQw7C,EAAR,KAAoBC,EAApB,KACA,EAAgDz7C,oBAAS,GAAzD,mBAAQ07C,EAAR,KAAyBC,EAAzB,KACA,EAA4B37C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KAGA,EAA0C8Z,aAASulB,GAAiB,CACnElqB,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAD7DzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAI9B,EAAwBY,YAAY0rB,IAA5BU,EAAR,oBACA,EAA6BpsB,YAAY4rB,IAAjCulB,EAAR,oBAIA,GAAIl5C,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IACMk/C,EADqBlwC,EAAnBmwC,eAC8Br3C,KAAI,SAAC3C,EAAQtF,GAAT,OACzC,cAAC,GAAD,CAECsF,OAAQA,EACR62C,cAAeA,EACfgD,UAAWA,EACX9xC,QAASA,EACT6uC,WAAYA,GALPl8C,MAaDu/C,EAAa,uCAAG,4BAAAj3C,EAAA,yDAChBhD,EADgB,oDAErB+2C,GAAmB,GAFE,SAIfH,EAJe,qBAKoC,IAAnD5uC,EAAOwG,QAAQq5B,UAAUvX,cAAciY,QALxB,wBAMlBwO,GAAmB,GAND,kBAOX3hD,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAPzF,yBASZm/B,EAAY,CACjBxqB,UAAW,CACVC,MAAO,CACNxK,SACAG,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAdX,oCAoBmC,IAAlDL,EAAOwG,QAAQq5B,UAAUvX,cAAc3hB,OApBxB,wBAqBlBooC,GAAmB,GArBD,kBAsBX3hD,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAtBzF,eAwBZskD,EAAoB13C,GAAexC,GAxBvB,UAyBZ85C,EAAiB,CACtBvvC,UAAW,CACVC,MAAO,CACNxK,OAAQk6C,GAETjlB,SAAU2hB,KA9BM,QAmCpB7uC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDmhD,GAAmB,GACnB8C,EAAU,IACVhD,EAAc,IAvCM,kDAyCpBzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GA1CC,0DAAH,qDA+CnB,OACC,sBAAKvhD,UAAWH,EAAQgnB,KAAxB,UACC,cAACnnB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASk2C,EAAiBj2C,WAAYk2C,IACzD,cAACzgD,EAAA,EAAD,CAAYiV,QAAQ,KAApB,qBACA,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACC,cAACC,EAAA,EAAD,CAAW9M,MAAOyB,EAAQuL,QAAQ,WAAWD,KAAK,QAAQe,SAzDxC,SAACvD,GACrB+wC,EAAU/wC,EAAEC,OAAOxK,UAyDjB,cAACtI,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQS,kBAAgB,EAACnB,QAASqvC,EAAnF,UACC,cAACnvC,GAAA,EAAD,IADD,gBAIAivC,KAKJ,I,YAAMI,GAAgB,SAAC,GAA+D,IAA7Dn6C,EAA4D,EAA5DA,OAAQ62C,EAAoD,EAApDA,cAAegD,EAAqC,EAArCA,UAAW9xC,EAA0B,EAA1BA,QAAS6uC,EAAiB,EAAjBA,WAC7D5uC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzChO,EAAUR,KAChB,EAAoCuG,mBAAS,IAA7C,mBAAQ05B,EAAR,KAAmBslB,EAAnB,KACA,EAAgDh/C,oBAAS,GAAzD,mBAAQ07C,EAAR,KAAyBC,EAAzB,KACA,EAA4B37C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACI,EAA2BuT,YAAY+rB,IAA/B2lB,EAAR,oBAEJ,EAA2B1xC,YAAY2rB,IAA/BU,EAAR,oBACA,EAAgCrsB,YAAY6rB,IAApC8lB,EAAR,oBAGSC,EAA2C,OAAtBv6C,EAAO6wB,WAAuB7wB,EAAO6wB,WAAWluB,KAAI,SAACmyB,GAAD,OACjF,cAAC,GAAD,CAEUG,SAAUj1B,EAAOqI,IAC1BysB,UAAWA,EACX+hB,cAAeA,EACfD,WAAYA,EACZwD,aAAcA,EACLryC,QAASA,GANb+sB,EAAUzsB,QAUhB,wBAmBKmyC,EAAgB,uCAAG,4BAAAx3C,EAAA,yDACnB8xB,EADmB,oDAExBiiB,GAAmB,GAFK,SAIlBH,EAJkB,qBAKiC,IAAnD5uC,EAAOwG,QAAQq5B,UAAUvX,cAAciY,QALrB,wBAMrBwO,GAAmB,GANE,kBAOd3hD,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KAPtF,yBASfo/B,EAAe,CACpBzqB,UAAW,CACVC,MAAO,CACNsqB,aAEDG,SAAUj1B,EAAOqI,OAdE,oCAmBgC,IAAlDL,EAAOwG,QAAQq5B,UAAUvX,cAAc3hB,OAnBrB,wBAoBrBooC,GAAmB,GApBE,kBAqBd3hD,EAAS,CAAEW,QAAS,iEAAyDD,OAAQ,QAASF,MAAM,KArBtF,eAuBf6kD,EAAuBj4C,GAAesyB,GAvBvB,UAwBfwlB,EAAoB,CACzB/vC,UAAW,CACVC,MAAO,CACNsqB,UAAW2lB,GAEZxlB,SAAUj1B,EAAOqI,IACjBqyC,YAAa9D,KA9BM,QAmCvB7uC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDmhD,GAAmB,GACnBqD,EAAa,IACbvD,EAAc,IAvCS,kDAyCvBzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GA1CI,0DAAH,qDA8Cb4D,EAAY,uCAAG,WAAO1lB,GAAP,SAAAjyB,EAAA,6DACvB+zC,GAAmB,GADI,kBAGPsD,EAAe,CACjB9vC,UAAW,CACP2B,GAAI+oB,KALC,OAQtBltB,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDmhD,GAAmB,GACnB8C,EAAU,IACVhD,EAAc,IAZQ,kDActBzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GAfG,0DAAH,sDAoBrB,OACC,eAAC,WAAD,WACC,cAAC7hD,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASk2C,EAAiBj2C,WAAYk2C,IACzD,eAACe,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CACCviD,UAAWohD,GAAcA,IAAe52C,EAAOqI,IAAMhT,EAAQspB,SAAW,GACxEq5B,WAAY,cAACC,GAAA,EAAD,IACZ,aAAW,SACX,wCAAgCj4C,EAAOqI,KACvC6D,GAAE,iBAAYlM,EAAOqI,KALtB,SAOC,eAACpS,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASrK,MAAM,OAA9C,UACC,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SAA0BvL,EAAOA,SACjC,qBAAKxK,UAAWH,EAAQm5B,WACvBooB,GAAcA,IAAe52C,EAAOqI,IACpC,cAACmE,EAAA,EAAD,CAAY5B,QA5FK,SAAC8B,GACvBA,EAAMmrC,kBACNhB,EAAc,IACdgD,EAAU,KAyFgC3B,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA/D,SACC,cAAC,KAAD,OAGiD,IAAlD7vC,EAAOwG,QAAQq5B,UAAUvX,cAAc3hB,OAAoB,KAC1D,cAACnC,EAAA,EAAD,CACC5B,QAxG4B,SAAC8B,GACpCA,EAAMmrC,kBACNhB,EAAc72C,EAAOqI,KACrBwxC,EAAU75C,EAAOA,SAsGVk4C,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAF3B,SAIC,cAACn4B,GAAA,EAAD,OAIkD,IAApD1X,EAAOwG,QAAQq5B,UAAUvX,cAAcqU,SAAsB,KAC7D,cAACn4B,EAAA,EAAD,CACC5B,QAAS,kBAAM+vC,EAAa36C,EAAOqI,MACnC6vC,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAF3B,SAIC,cAACtkB,GAAA,EAAD,WAKJ,cAAC6kB,GAAA,EAAD,UACC,eAACniD,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACoa,GAAA,EAAD,IACA,cAAClb,EAAA,EAAD,CAAKmV,GAAI,IACT,eAACnV,EAAA,EAAD,CAAK0iB,GAAI,EAAG5hB,MAAM,OAAOb,QAAQ,OAAjC,UACC,cAACI,EAAA,EAAD,CAAYiV,QAAQ,KAApB,uBACA,cAACtV,EAAA,EAAD,CAAKI,GAAI,IACT,eAACJ,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACC,cAACC,EAAA,EAAD,CACC9M,MAAOu2B,EACPvpB,QAAQ,WACRD,KAAK,QACLe,SAzHa,SAACvD,GACrBsxC,EAAatxC,EAAEC,OAAOxK,UA0HhB,cAACtI,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CACCvU,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLS,kBAAgB,EAChBnB,QAAS4vC,EALV,UAOC,cAAC1vC,GAAA,EAAD,IAPD,mBAWsB,OAAtB9K,EAAO6wB,WACR,cAAC56B,EAAA,EAAD,CAAK0iB,GAAI,EAAT,SAAa4hC,IAEd,oCAUAK,GAAmB,SAAC,GAA8E,IAA5E3lB,EAA2E,EAA3EA,SAASH,EAAkE,EAAlEA,UAAW8hB,EAAuD,EAAvDA,WAAYC,EAA2C,EAA3CA,cAAeuD,EAA4B,EAA5BA,aAAcryC,EAAc,EAAdA,QAClFC,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzChO,EAAUR,KACb,EAAgDuG,oBAAS,GAAzD,mBAAQ07C,EAAR,KAAyBC,EAAzB,KACH,EAA4B37C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACG,EAA8BuT,YAAYgsB,IAAlCkmB,EAAR,oBAaMC,EAAe,uCAAG,WAAQC,GAAR,SAAA/3C,EAAA,6DAE1B+zC,GAAmB,GAFO,kBAIV8D,EAAkB,CACpBtwC,UAAW,CACP0qB,SAAUA,EACVylB,YAAaK,KAPL,OAUzBhzC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDmhD,GAAmB,GACnBqD,EAAa,IACbvD,EAAc,IAdW,kDAgBzBzhD,EAAS,CAAEW,QAAS,gBAAiBD,OAAQ,QAASF,MAAM,IAC5DmhD,GAAmB,GAjBM,0DAAH,sDAqBxB,OACC,eAAC,WAAD,WACC,cAAC7hD,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuL,GAAD,CAAmBC,QAASk2C,EAAiBj2C,WAAYk2C,IACzD,eAAC9gD,EAAA,EAAD,CACCC,QAAQ,OACRkL,WAAW,SACXwQ,aAAc,EACd2mC,GAAI,EACJ/iD,UAAWohD,GAAcA,IAAe9hB,EAAUzsB,IAAMhT,EAAQspB,SAAW,GAL5E,UAOC,cAACroB,EAAA,EAAD,UAAaw+B,EAAUA,YACvB,qBAAKt/B,UAAWH,EAAQm5B,YAE2B,IAAlDxmB,EAAOwG,QAAQq5B,UAAUvX,cAAc3hB,OAAoB,KAC1DioC,GAAcA,IAAe9hB,EAAUzsB,IACtC,cAACmE,EAAA,EAAD,CAAY5B,QA1CK,SAAC8B,GACvBA,EAAMmrC,kBACNhB,EAAc,IACduD,EAAa,KAuC6BlC,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA/D,SACC,cAAC,KAAD,MAIA,cAACrrC,EAAA,EAAD,CAAY5B,QArDoB,SAAC8B,GACvCA,EAAMmrC,kBACNhB,EAAc/hB,EAAUzsB,KACxB+xC,EAAatlB,EAAUA,YAkDiCojB,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAA5E,SACC,cAACn4B,GAAA,EAAD,OAMgD,IAApD1X,EAAOwG,QAAQq5B,UAAUvX,cAAcqU,SAAsB,KAC7D,cAACn4B,EAAA,EAAD,CAAY5B,QAAS,kBAAMkwC,EAAgBhmB,EAAUzsB,MAAM6vC,QAAS,SAACxrC,GAAD,OAAWA,EAAMmrC,mBAArF,SACC,cAACtkB,GAAA,EAAD,SAIH,cAACpiB,GAAA,EAAD,QCvYGtc,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS+mB,KACvB,IAAMv/B,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,wEAAwEmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFjI,wBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,8BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAACiE,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,cAAC,GAAD,cChEC,IAAMokD,GAA4BvmD,YAAH,weAoBzBwmD,GAA6BxmD,YAAH,wRAQ1BymD,GAA8BzmD,YAAH,kNAQ3B0mD,GAA4B1mD,YAAH,iKCZhCI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,QAIf,SAAS2kD,GAAT,GAAgG,IAAD,IAAtE1L,EAAsE,EAAtEA,QAAS2L,EAA6D,EAA7DA,cAAeC,EAA8C,EAA9CA,WAAYzL,EAAkC,EAAlCA,UAAWC,EAAuB,EAAvBA,WAAY16C,EAAW,EAAXA,SAC5FC,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACM/9B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAoCjI,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KACMlX,EAAc,kBAAMkX,GAAcD,IAKpCmR,EAAiB,GAErB,EAA0CrsC,aAAS8rC,GAA0B,CAC5EzwC,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAHpBzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAM9B,EAAoCY,YAAYwyC,IAAxCK,EAAR,oBAEArsC,qBACC,WACCpH,MAED,CAAE+nC,EAAY/nC,IAGZ8B,IACF0xC,EAAkB1xC,EAAK4xC,yBAGxB,IAKM/Q,EAAY,uCAAG,sBAAA1nC,EAAA,+EAEbw4C,EAAwB,CAC7BjxC,UAAW,CACV2B,GAAIovC,KAJa,OAOnBvzC,IACA3S,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxDu9B,IACAkoB,EAAc,IAVK,gDAYnBjmD,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAZvC,yDAAH,qDAgBlB,OAAIiF,EACI,cAACmG,GAAD,CAAWnG,MAAOA,IAGtB+F,EAEF,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAMF,sBAAKvL,UAAWH,EAAQgnB,KAAxB,UACC,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,SACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,kCACwB,cAACA,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,oBACxB,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,sBACuD,IAAtDhV,EAAOwG,QAAQq5B,UAAUiM,kBAAkBnlC,OAAoB,KAC/D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,qBAEwD,IAAxDhV,EAAOwG,QAAQq5B,UAAUiM,kBAAkBnP,SAAsB,KACjE,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,UAAnB,2BAIH,cAAChI,GAAA,EAAD,oBACEumC,SADF,iBACE,EAAiB9U,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,UADlE,aACE,EAA8EnjC,KAAI,SAAC+jC,EAAKhsC,GACxF,OACC,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,UAAY2xB,EAAIgV,kBACc,cAAC3mC,GAAA,EAAD,UAAY2xB,EAAIthC,SAC9C,cAAC2P,GAAA,EAAD,UAAY2xB,EAAIiV,WACuC,IAAtD3zC,EAAOwG,QAAQq5B,UAAUiM,kBAAkBnlC,OAAoB,KAC/D,cAACoG,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,WACpBilC,GAAU,GACVwL,EAAc3U,EAAIr+B,KAClBqnC,EAAQ,CACPgM,gBAAiBhV,EAAIgV,gBACrBt2C,OAAQshC,EAAIthC,OACZu2C,QAASjV,EAAIiV,WAId5wC,UAAW27B,EAAIkV,SAVhB,SAYC,cAACl8B,GAAA,EAAD,SAIsD,IAAxD1X,EAAOwG,QAAQq5B,UAAUiM,kBAAkBnP,SAAsB,KACjE,cAAC5vB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAY5B,QAAS,WACpBywC,EAAc3U,EAAIr+B,KAClB8qB,KAEDpoB,UAAW27B,EAAIkV,SAJf,SAMC,cAACroB,GAAA,EAAD,UA9B+CmT,EAAIr+B,eAwC5D,cAACs+B,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOsf,EAAgB53C,OACvBmiC,YAAaA,EACbF,KAAMA,EACNiB,aAjIqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAiILC,oBA1G4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,SA2GP,cAAC,GAAD,CAAO1S,YAAaA,EAAaiX,UAAWA,EAAWM,aAAcA,OAKxE,IAAMI,GAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWM,EAAmB,EAAnBA,aACxC,OACC,8BACC,eAAC1/B,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,kHACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS8/B,EAAjE,+BCrLC71C,GAAYC,aAAW,SAACC,GAAD,MAAW,CACvCsnB,KAAM,CACLtlB,MAAO,QAERy3B,SAAU,CACTA,SAAU,GAEPqtB,YAAa,CACVvuC,WAAYvY,EAAM0B,QAAQ,GAC1BC,aAAa3B,EAAM0B,QAAQ,GAC3BmgB,SAAU,IACVhgB,SAAU,SAKZklD,GAAY,CAChBC,WAAY,CACV5lD,MAAO,CACLU,UAAWmlD,IACXjlD,MAAO,OAIPklD,GAAQ,CACV,OACA,QACH,OAGD,SAASC,GAAU32B,EAAM42B,EAAUpnD,GAEjC,OADD+O,QAAQC,IAAIo4C,GACJ,CACL14B,YAC8B,IAA5B04B,EAASvS,QAAQrkB,GACbxwB,EAAMqnD,WAAWC,kBACjBtnD,EAAMqnD,WAAWE,kBAGZ,SAASnM,KACvB,IAAM96C,EAAUR,KACNE,EAAQiyB,eAClB,EAAoC5rB,oBAAS,GAA7C,mBAAO00C,EAAP,KAAmBM,EAAnB,KACA,EAAwBh1C,mBAAS,CAChCsgD,gBAAiB,GACXC,QAAS,GACfv2C,OAAO,KAHR,mBAAOyE,EAAP,KAAa6lC,EAAb,KAMA,EAA4Bt0C,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA0BgG,oBAAS,GAAnC,mBAAOP,EAAP,KAAc0F,EAAd,KACMyH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,oBAAS,GAArC,mBAAOynB,EAAP,KAAegtB,EAAf,KACA,EAAoCz0C,mBAAS,IAA7C,mBAAOkgD,EAAP,KAAmBD,EAAnB,KAEA,EAAiC1yC,YAAYsyC,IAArCsB,EAAR,oBACA,EAAsC5zC,YAAYuyC,IAA1CsB,EAAR,oBACG,EAAoCphD,oBAAS,GAA7C,mBAAQgvC,EAAR,KAAmBC,EAAnB,KAcGkG,EAAY,uCAAG,4BAAAvtC,EAAA,kEAEXqnC,GAAa,GACjBxgC,EAAK6xC,iBAAoB7xC,EAAKzE,QAAWyE,EAAK8xC,QAH/B,uBAIlBp7C,GAAS,GAJS,6BAOZiK,EAAQX,GACXgZ,EARe,qBAS0C,IAAvD7a,EAAOwG,QAAQq5B,UAAUiM,kBAAkBvL,QAT9B,0CAUTnzC,EAAS,CAAEW,QAAS,iDAAkDD,OAAQ,QAASF,MAAM,KAVpF,yBAYV2mD,EAAqB,CAC1BhyC,UAAW,CACVC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B2uB,QAAShvB,EAAOK,OAjBF,oCAsByC,IAAtDL,EAAOwG,QAAQq5B,UAAUiM,kBAAkBnlC,OAtB9B,0CAuBTvZ,EAAS,CAAEW,QAAS,iDAAkDD,OAAQ,QAASF,MAAM,KAvBpF,yBAyBV4mD,EAA0B,CAC/BjyC,UAAW,CACVC,QACA0B,GAAIovC,KA5BU,QA+BhBzL,GAAU,GA/BM,QAkClBz6C,EAAS,CAAEW,QAAS,aAAWD,OAAQ,UAAWF,MAAM,IACxD85C,EAAQ,CAACgM,gBAAiB,GAAIt2C,OAAQ,GAAIu2C,QAAQ,KACtCp7C,GAAS,GACrB6vC,GAAeN,GACfuL,EAAc,IAtCI,oHAAH,qDAkDTvQ,EAAQ,SAAC,GAA8C,IAA5C3X,EAA2C,EAA3CA,YAAaiX,EAA8B,EAA9BA,UAAWmG,EAAmB,EAAnBA,aAC5C,OACC,8BACC,eAACvlC,GAAA,EAAD,CAAQpV,KAAMw0C,EAAWv0C,QAASs9B,EAAlC,UACC,cAACjoB,GAAA,EAAD,UAAc,8GACd,eAAC2B,GAAA,EAAD,WACC,cAAClC,EAAA,EAAD,CAAQC,QAASuoB,EAAa/8B,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS2lC,EAAjE,6BASJ,OACC,sBAAK/6C,UAAWH,EAAQgnB,KAAxB,UACU,cAACpmB,EAAA,EAAD,CAAMiL,cAAc,MAApB,SACI,eAACsP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACvb,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAE1C,eAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACK,cAAC9U,EAAA,EAAD,wBACD,cAAC+U,EAAA,EAAD,CACIxQ,MAAOA,EACPqR,GAAG,6BACHX,QAAQ,WACRD,KAAK,QACLtC,KAAK,kBAC1B7S,MAAO,CAACmX,WAAW,GACE/O,MAAOsL,EAAK6xC,gBACZrvC,SAhGD,SAACvD,GAC1B4mC,EAAQ,2BACJ7lC,GADG,kBAELf,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UA8FD8pC,WAvCR,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBwmC,UA0CpB,eAACz/B,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UACmB,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,eAAf,oBACA,cAAC6E,GAAA,EAAD,CACAlW,MAAOA,EACP0oB,QAAQ,eACRrX,GAAG,cACH3N,MAAOsL,EAAKzE,OACZiH,SAnGI,SAACK,GACrBgjC,EAAQ,2BAAI7lC,GAAL,IAAWzE,OAAOsH,EAAM3D,OAAOxK,UAmGtBiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GAPX,SASCG,GAAMt5C,KAAI,SAAC4iB,GAAD,OACP,cAACvU,GAAA,EAAD,CAAqBzS,MAAOgnB,EAAMpvB,MAAO+lD,GAAU32B,EAAM1b,EAAKzE,OAAQrQ,GAAtE,SACCwwB,GADcA,WAMvB,eAACzU,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UACI,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,gBAAf,qBACA,cAAC6E,GAAA,EAAD,CACAlW,MAAOA,EACP0oB,QAAQ,gBACRrX,GAAG,eACH3N,MAAOsL,EAAK8xC,QACZtvC,SAxHS,SAACK,GAC1BgjC,EAAQ,2BAAI7lC,GAAL,IAAW8xC,QAAQjvC,EAAM3D,OAAOxK,UAwHvBiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GAPX,SASCG,GAAMt5C,KAAI,SAAC4iB,GAAD,OACP,cAACvU,GAAA,EAAD,CAAqBzS,MAAOgnB,EAAMpvB,MAAO+lD,GAAU32B,EAAM1b,EAAK8xC,QAAS5mD,GAAvE,SACCwwB,GADcA,WAMvB,eAACtvB,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASgK,GAAI,EAA5C,UACI,cAACnV,EAAA,EAAD,CAAK0iB,GAAI,IACT,eAAChO,EAAA,EAAD,CAAQvU,MAAM,UAAUmV,QAAQ,YAAYD,KAAK,QAAQV,QAAU,kBAAMiY,EAAU0tB,IAAgBlG,GAAa,IAAOt+B,kBAAgB,EAAvI,UACI,cAACjB,GAAA,EAAD,IADJ,qBAMrB,cAAC,GAAD,CACC4kC,QAASA,EACT4L,WAAYA,EACZD,cAAeA,EACfxL,UAAWA,EACXC,WAAYA,EACZ16C,SAAUA,IAEF,cAAC01C,EAAD,CAAO3X,YA1JE,kBAAMkX,GAAcD,IA0JIA,UAAWA,EAAWmG,aAAcA,OClNjF,IAAM17C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS4uC,KACvB,IAAMpnD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGT,OACC,gCACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVI,WACvB3C,GAAQ,IASP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,kFAAkFmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAF3I,4BAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,kCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqW,GAAI,EAAGowC,UAAU,SAAtB,SACC,cAACnsC,EAAA,EAAD,UACC,cAAC,GAAD,cCjDS,SAASykC,KAEvB,IAAMxQ,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,OACC,cAACkN,EAAA,EAAD,UACC,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,WACqD,IAAnD0xB,EAAgBh2B,QAAQq5B,UAAUC,SAAS/0B,IAAiB,KAC5D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC+mC,GAAD,QAIH,cAAC33B,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,SAGwD,IAAzDojC,EAAgBh2B,QAAQq5B,UAAU4G,eAAe17B,IAAiB,KAClE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC+tC,GAAD,SASqD,IAAvD3K,EAAgBh2B,QAAQq5B,UAAUoI,aAAal9B,IAAiB,KAChE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACqvC,GAAD,SAImD,IAArDjM,EAAgBh2B,QAAQq5B,UAAUgJ,WAAW99B,IAAiB,KAC9D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC0vC,GAAD,SAI8C,IAAhDtM,EAAgBh2B,QAAQq5B,UAAUoJ,MAAMl+B,IAAiB,KACzD,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACixC,GAAD,SAIiD,IAAnD7N,EAAgBh2B,QAAQq5B,UAAUgM,SAAS9gC,IAAiB,KAC5D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACy0C,GAAD,SAIsD,IAAxDrR,EAAgBh2B,QAAQq5B,UAAUzX,cAAcrd,IAAiB,KACjE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACm1C,GAAD,SAImD,IAArD/R,EAAgBh2B,QAAQq5B,UAAU1X,WAAWpd,IAAiB,KAC9D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACo3C,GAAD,SAIgD,IAAlDhU,EAAgBh2B,QAAQq5B,UAAUxjB,QAAQtR,IAAiB,KAC3D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,SAI+C,IAAjDojC,EAAgBh2B,QAAQq5B,UAAUxX,OAAOtd,IAAiB,KAC1D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACw4C,GAAD,SAIsD,IAAxDpV,EAAgBh2B,QAAQq5B,UAAUvX,cAAcvd,IAAiB,KACjE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,SAI0D,IAA5DojC,EAAgBh2B,QAAQq5B,UAAUiM,kBAAkB/gC,IAAiB,KACrE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACq7C,GAAD,aChHA,I,SAAME,GAAe1hD,0BAEf2hD,GAAoB,SAAC,GAAkB,IAAhBzhD,EAAe,EAAfA,SAEhC,EAA0BC,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACA,EAA8BgG,mBAAS,IAAvC,mBAAOyhD,EAAP,KAAgBC,EAAhB,KACA,EAA4B1hD,mBAAS,IAArC,mBAAO4E,EAAP,KAAe65C,EAAf,KACA,EAA4Bz+C,oBAAS,GAArC,mBAAO2hD,EAAP,KAAeC,EAAf,KAEA,OACI,cAACL,GAAar+C,SAAd,CACIC,MAAO,CACHpJ,QACAC,WACAynD,UACAC,aACAC,SACAC,YACAh9C,SACA65C,aATR,SAYK1+C,K,qBCtBA8hD,GAAqBxoD,YAAH,glBAyBlByoD,GAA0BzoD,YAAH,iSAQvB0oD,GAA4B1oD,YAAH,0vBCtBhCI,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJ2mD,aAAa,CACTpmD,OAAQ,OAEZwT,MAAO,CACH,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAMZoX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASwvC,GAAT,GAAkD,IAAzBr9C,EAAwB,EAAxBA,OAAQ+H,EAAgB,EAAhBA,QAASwd,EAAO,EAAPA,KAE/Cvd,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzCi6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBACrD,EAAkCsF,YAAYu0C,IAAtCK,EAAR,oBAEMloD,EAAUR,KAChB,EAA0BuG,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACA,EAA8CgG,mBAAS,IAAvD,mBAAOoiD,EAAP,KAAwBC,EAAxB,KACA,EAAwBriD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAiB,WACnBvyB,GAASrS,IAGP8nD,EAAgB,SAAC50C,GACnB20C,EAAmB,2BAAID,GAAL,kBAAuB10C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGhEiM,EAAO,CACTmzC,gBAAqD,WAApCH,EAAgBG,gBAA+B,gBAAkB,kBAClFC,WAAY51C,EAAOK,IACnBw1C,gBAAyB,IAATt4B,EAAgB,iBAAmB,SACnD4rB,YAAamM,EAAenmC,SAASmmC,EAAanM,aAAe,EACjE2M,QAASR,EAAeA,EAAaS,QAAU,KAC/C7L,uBAAwBlqC,EAAOmqC,eAAe7vC,WAC9C8vC,uBAAwBpqC,EAAOmX,OAC/B6+B,cAAeV,EAAeA,EAAaU,cAAgB,KAC3DC,SAAUT,EAAgBS,SAC1BC,cAAe,CACXC,KAAMjkC,OAASE,OAAO,MACtBgkC,QAASlkC,OAASE,OAAO,MACzBikC,SAAUnkC,OAASE,OAAO,MAC1BkkC,SAAUpkC,OAASE,OAAO,aAE9BmkC,iBAAkB,CACdz8C,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASC,OAAO,SAASC,UAEvC0kC,eAAgB,CACZC,eAAgB,CACZC,MAAO58C,WAAWo7C,EAAgBhlD,UAClCymD,YAAa,MAEjBC,qBAAsB,CAClBF,MAAO,EACPC,YAAa,MAEjBE,sBAAuB,CACnBH,MAAO,EACPC,YAAa,MAEjBG,eAAgB,CACZJ,MAAO,EACPC,YAAa,MAEjBI,eAAgB,CACZL,MAAO,EACPC,YAAa,MAEjBK,oBAAqB,CACjBN,MAAO,EACPC,YAAa,MAEjBM,cAAe,CACXP,MAAO,EACPC,YAAa,MAEjBO,qBAAsB,CAClBR,MAAO,EACPC,YAAa,OAGrBQ,YAAajC,EAAgBiC,aAG3BC,EAAW,uCAAG,4BAAA18C,EAAA,kEAEPw6C,EAAgBS,UAAaT,EAAgBG,iBAAoBH,EAAgBhlD,SAF1E,uBAGRpD,EAAS,CACLW,QAAS,+BACTD,OAAQ,QACRF,MAAM,IANF,kBAQD,MARC,uBAUa2nD,EAAsB,CAC3ChzC,UAAW,CACPC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAUD,EAAOqI,IACjBkd,KAAMA,KAfF,OAUNo6B,EAVM,OAkBZ53C,IACA01C,EAAmB,IACnBjjB,IACAplC,EAAS,CACLW,QAAS4pD,EAAW91C,KAAK+1C,sBAAsB7pD,QAC/CD,OAAQ,UACRF,MAAM,IAxBE,kDA2BZR,EAAS,CACLW,QAAS,KAAMA,QACfD,OAAQ,QACRF,MAAM,IA9BE,0DAAH,qDAmCjB,OACI,eAAC,WAAD,WACI,cAACK,EAAA,EAAD,UACI,cAACuW,EAAA,EAAD,CACIpW,MAAM,UACNwU,QAAS4vB,EACTlvB,KAAK,QAHT,SAKI,cAAC,KAAD,CAAmBnV,MAAO,CAACkL,SAAU,UAG7C,cAACnM,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,eAAC4V,GAAA,EAAD,CACIpV,KAAMA,EAClBua,oBAAqBxC,GACrB/W,SAAS,KACTqU,WAAS,EAJD,UAMI,eAACE,GAAA,EAAD,WACI,cAAClV,EAAA,EAAD,CAAK21C,UAAW,SAAUvlC,EAAG,EAA7B,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,oCAIJ,sBAAK/V,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRR,UAAU,EACVxM,MAAK,OAAEyJ,QAAF,IAAEA,OAAF,EAAEA,EAAQmX,YAGvB,eAAClpB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,2BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTF,UAAU,EACVO,KAAK,QACL/M,MAAO2b,OAASE,OAAO,wBACvBpR,KAAK,mBACLuC,QAAQ,mBAKpB,qBAAK/V,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,oCACA,eAACya,GAAA,EAAD,CACIvb,UAAWH,EAAQ+nD,aACnB9xC,KAAK,QACLC,QAAQ,WACRvC,KAAK,kBACLqD,SAAUqxC,EACVzyC,WAAS,EANb,UAQI,cAAC+F,GAAA,EAAD,CAAUzS,MAAM,GAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,sBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,4BAIZ,sBAAK/I,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACI7V,UAAWH,EAAQmV,MACnBS,WAAS,EACToB,SAAUqxC,EACVpyC,KAAK,QACLc,KAAK,SACLpD,KAAK,WACLuC,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACToB,SAAUqxC,EACVpyC,KAAK,QACLtC,KAAK,WACLuC,QAAQ,mBAIpB,qBAAK/V,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,0BACA,cAAC+U,EAAA,EAAD,CACI7V,UAAWH,EAAQmV,MACnBS,WAAS,EACToB,SAAUqxC,EACVpyC,KAAK,QACL4F,WAAS,EACT2uC,KAAM,EACNzzC,KAAK,SACLpD,KAAK,mBACLuC,QAAQ,qBAKxB,eAACsB,GAAA,EAAD,WACI,cAAClC,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,WACRX,QAAS80C,EACTp0C,KAAK,QAJT,sBAQA,cAACX,EAAA,EAAD,CACIvU,MAAM,YACNmV,QAAQ,WACRX,QAAS4vB,EACTlvB,KAAK,QAJT,+BC/PpB,IAAMolC,GAAU,CACf,CAAExkC,GAAI,aAAcuM,MAAO,oBAAqB7B,SAAU,KACvD,CAAE1K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KAC5C,CAAE1K,GAAI,OAAQuM,MAAO,UAAW7B,SAAU,KAC1C,CAAE1K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,KAC/C,CAAE1K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,KAC/C,CAAE1K,GAAI,OAAQuM,MAAO,kBAAmB7B,SAAU,MAG7C/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,OACDC,OAAQ,QAEfyZ,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJ6vC,aAAa,CACTpmD,OAAQ,OAEf8oD,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,IAEzB4c,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIFkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASkyC,GAAT,GAA2C,IAAD,EAAf//C,EAAe,EAAfA,OAAQulB,EAAO,EAAPA,KACxCvd,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C6W,KAAOC,OAAO,MACd,IAAM9kB,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAsC7M,mBAAS,IAA/C,mBAAO4kD,EAAP,KAAoBC,EAApB,KACA,EAAkBloC,uBAAYioC,EAAa,KAAnCzhD,EAAR,oBAGMi8B,EAAkB,WACpBvyB,GAASrS,GACTqqD,EAAe,IACfl4C,KAGJ,EAA2CmH,aAASiuC,GAA2B,CACjF5yC,UAAW,CACDC,MAAM,CACF01C,aAAcF,EAAYE,aAAeF,EAAYE,aAAe,GACpEC,UAAWH,EAAYG,UAAYH,EAAYG,UAAY,GAC3DnpB,QAASz4B,EAAMy4B,QAAUz4B,EAAMy4B,QAAU,GACzC2mB,gBAAiBqC,EAAYrC,gBAAkBqC,EAAYrC,gBAAkB,IAEjFx9C,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAUD,EAAOqI,IACjBkd,KAAMA,KAVL1b,EAAT,EAASA,KAAajJ,GAAtB,EAAe/F,MAAf,EAAsB+F,SAASmH,EAA/B,EAA+BA,QAc3Bq4C,EAAkB,GACnBv2C,IACCu2C,EAAkBv2C,EAAKw2C,wBAG3B,IAAM/hC,EAAe,SAACxV,GAClBm3C,EAAe,2BAAID,GAAL,kBAAmBl3C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAOjE,OAJG4Q,qBAAU,WACNpH,MACD,CAACA,IAGA,eAAC,WAAD,WACI,cAAC9R,EAAA,EAAD,UACI,cAAC0U,EAAA,EAAD,CACIvU,MAAM,UACNwU,QAAS4vB,EACTlvB,KAAK,QACLinB,QAAS,cAAC,IAAD,CAAgBp8B,MAAO,CAACkL,SAAU,MAJ/C,mBASJ,eAAC2J,GAAA,EAAD,CACIpV,KAAMA,EAClBua,oBAAqBxC,GACrB/W,SAAS,KACTqU,WAAS,EAJD,UAMI,cAAChV,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,WAAzC,SACX,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,QAGU,eAACH,GAAA,EAAD,WACI,cAAClV,EAAA,EAAD,CAAK21C,UAAW,SAAUvlC,EAAG,EAA7B,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,mCAIJ,cAACtV,EAAA,EAAD,UACI,sBAAKT,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLc,KAAK,OACLpD,KAAK,eACLqD,SAAUiS,EACV/S,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLc,KAAK,OACLC,SAAUiS,EACVtV,KAAK,YACLuC,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLe,SAAUiS,EACVtV,KAAK,UACLuC,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BACA,eAACya,GAAA,EAAD,CACIvb,UAAWH,EAAQ+nD,aACnB9xC,KAAK,QACLC,QAAQ,WACRvC,KAAK,kBACLqD,SAAUiS,EACVrT,WAAS,EANb,UAQI,cAAC+F,GAAA,EAAD,CAAUzS,MAAM,QAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,kBAAhB,sBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,gBAAhB,+BAKhB,cAACtI,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACI,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACT,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACKg6B,EAAOn4B,OADIm4B,EAAO1kC,WAMnC,cAAC8I,GAAA,EAAD,oBAEQorC,SAFR,aAEQ,EAAiBz9C,KAAI,SAAC+jC,EAAKhsC,GACvB,OACI,cAAC4lD,GAAD,CAEI5Z,IAAKA,EACL9lC,QAASA,GAFJlG,oBAc7C,cAACmS,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIvU,MAAM,YACNmV,QAAQ,WACRX,QAAS4vB,EACTlvB,KAAK,QAJT,8BAcpB,SAASg1C,GAAT,GAA2C,IAAjB5Z,EAAgB,EAAhBA,IAEtB,OAFsC,EAAX9lC,QAI7B,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKK,eAAC+T,GAAA,EAAD,CACI4J,OAAK,EACLmB,KAAK,WAAU2a,iBAAe,EAC9BoE,UAAW,EAHf,UAKI,eAAC7pB,GAAA,EAAD,mBAAqC,KAApB2xB,EAAIyK,YAAqBzK,EAAIyK,YAAc,MAC5D,cAACp8B,GAAA,EAAD,UAAYmF,KAAM,OAACwsB,QAAD,IAACA,OAAD,EAACA,EAAK6X,iBAAiBD,UAAUlkC,OAAO,iBAC1D,cAACrF,GAAA,EAAD,iBAAY2xB,QAAZ,IAAYA,OAAZ,EAAYA,EAAK0L,yBACjB,cAACr9B,GAAA,EAAD,UACI,oBAAG5e,MAAO,CAACkL,SAAU,IAArB,cAA4Ba,GAAcwkC,EAAIoY,eAAeC,eAAeC,YAEhF,cAACjqC,GAAA,EAAD,iBAAY2xB,QAAZ,IAAYA,OAAZ,EAAYA,EAAKuX,WACjB,cAAClpC,GAAA,EAAD,UAC6B,qBAAtB,OAAH2xB,QAAG,IAAHA,OAAA,EAAAA,EAAKiX,iBAAwC,WAAa,cCxP1E,IAAMjN,GAAU,CACf,CAAExkC,GAAI,OAAQuM,MAAO,SAAU7B,SAAU,IAAKtV,MAAO,QACrD,CAAE4K,GAAI,OAAQuM,MAAO,cAAe7B,SAAU,IAAKtV,MAAO,QAC1D,CAAE4K,GAAI,SAAUuM,MAAO,oBAAqB7B,SAAU,IAAKtV,MAAO,QAClE,CAAE4K,GAAI,aAAcuM,MAAO,sBAAuB7B,SAAU,IAAKtV,MAAO,UACxE,CAAE4K,GAAI,YAAauM,MAAO,YAAa7B,SAAU,IAAKtV,MAAO,WAGxDzM,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,OACDC,OAAQ,QAEfyZ,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAAS8pD,KAAgB,IAAD,QAC7Bv4C,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAA2C6L,aAAS+tC,GAAoB,CAC1E1yC,UAAW,CACD2B,GAAIlE,EAAO7H,QAAQkI,OAFlBwB,EAAT,EAASA,KAAajJ,GAAtB,EAAe/F,MAAf,EAAsB+F,SAASmH,EAA/B,EAA+BA,QAOzBy4C,EAAgBtxC,aAAS3N,GAAuB,CACxDgJ,UAAW,CACD2B,GAAIlE,EAAO7H,QAAQkI,OAIxBhT,EAAUR,KACT4rD,EAA2B,GAC3BC,EAAkB,GAWtB,OARGF,EAAc32C,OACb62C,EAAkBF,EAAc32C,KAAKyF,gBAGrCzF,IACA42C,EAA2B52C,EAAK82C,0BAGhC//C,GAAW4/C,EAAc5/C,QAErB,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOI,cAAC+J,EAAA,EAAD,MAKR,cAAC9K,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACI,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACT,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACKg6B,EAAOn4B,OADIm4B,EAAO1kC,WAMnC,eAAC8I,GAAA,EAAD,WACA,eAACF,GAAA,EAAD,CACI4J,OAAK,EACLmB,KAAK,WAAU2a,iBAAe,EAC9BoE,UAAW,EAHf,UAKI,cAAC7pB,GAAA,EAAD,oBAAa2rC,SAAb,aAAa,EAAiBhiD,iBAC9B,cAACqW,GAAA,EAAD,+BACA,cAACA,GAAA,EAAD,UACI,oBAAG5e,MAAO,CAACkL,SAAU,IAArB,cAA4Ba,GAAa,UAACw+C,SAAD,iBAAC,EAAiBE,sBAAlB,aAAC,EAAiCC,qBAE1B,IAApD74C,EAAOwG,QAAQ+jC,UAAUC,gBAAgB7jC,OACtC,cAACoG,GAAA,EAAD,CAAWzT,MAAM,SAAjB,gBAEA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA2B,cAAC+7C,GAAD,CAAgBr9C,OAAQ0gD,EAAiB34C,QAASy4C,EAAcz4C,QAASwd,MAAM,IAA1G,OAEJ,eAACxQ,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA2B,cAACy+C,GAAD,CAAkB//C,OAAQ0gD,EAAkBn7B,MAAM,IAA7E,UAhBJ,UAkBKk7B,SAlBL,aAkBK,EAA0B99C,KAAI,SAAC3C,EAAQtF,GACpC,OACI,cAAComD,GAAD,CAEI/4C,QAASA,EACT/H,OAAQA,EACRY,QAASA,GAHJlG,kBAgB7C,SAASomD,GAAT,GAA0C,IAAD,EAAlB9gD,EAAkB,EAAlBA,OAAQ+H,EAAU,EAAVA,QACxBy8B,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAErD,OACI,eAACyR,GAAA,EAAD,CACI4J,OAAK,EACLmB,KAAK,WAAU2a,iBAAe,EAC9BoE,UAAW,EAHf,UAKI,cAAC7pB,GAAA,EAAD,UAAa/U,EAAO0jB,kBACpB,cAAC3O,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,UACI,oBAAG5e,MAAO,CAACkL,SAAU,IAArB,cAA4Ba,GAAa,OAAClC,QAAD,IAACA,GAAD,UAACA,EAAQ+gD,uBAAT,aAAC,EAAyBF,qBAET,IAA7Drc,EAAgBh2B,QAAQ+jC,UAAUC,gBAAgB7jC,OAC/C,cAACoG,GAAA,EAAD,CAAWzT,MAAM,SAAjB,gBAEA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA2B,cAAC+7C,GAAD,CAAgBr9C,OAAQA,EAAQ+H,QAASA,EAASwd,MAAM,IAAnF,OAEJ,eAACxQ,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA2B,cAACy+C,GAAD,CAAkB//C,OAAQA,EAAQulB,MAAM,IAAnE,UCrJZ,I,MAAM1wB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERsc,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEPuqD,QAAS,CACR,QAAS,CACRzqD,OAAO,OAAD,OAASxB,EAAM0B,QAAQ,GAAvB,YAMHkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASozC,KACvB,IAAM5rD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAEMuyB,EAAkB,kBAAMvyB,GAASrS,IAEvC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACC,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBAAKwR,IAAI,kFAAkFmgB,IAAI,eAAev9B,UAAWH,EAAQmY,SAFrJ,0BAQD,eAACxC,GAAA,EAAD,CACCpV,KAAMA,EACNua,oBAAqBxC,GACrB/W,SAAS,KACTqU,WAAS,EAJV,UAMC,cAAChV,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,WAAzC,SACC,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,QAGF,eAACH,GAAA,EAAD,WACC,cAAClV,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACC,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,kCAID,cAACtV,EAAA,EAAD,UACC,cAACsqD,GAAD,eC3EC,IAAMW,GAA4BzsD,YAAH,+7BAiCzB0sD,GAAe1sD,YAAH,uO,oBCrBnBi8C,GAAU,CACf,CAAExkC,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,KAC/C,CAAE1K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,KAC3C,CAAE1K,GAAI,UAAWuM,MAAO,kBAAmB7B,SAAU,KAClD,CAAE1K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,MAGvC/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJgP,MAAO,CACH3F,SAAU,SAIH,SAASwqC,GAAT,GAA6D,IAA7B79C,EAA4B,EAA5BA,UAAW89C,EAAiB,EAAjBA,eACnDhsD,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACpoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACpoB,UAAWH,EAAQknB,MAAOjR,KAAK,QAAQ,aAAW,gBAAtE,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,OAIxB,cAAC6I,GAAA,EAAD,CAAWzT,MAAO,SAAUnL,MAAO,CAAEygB,SAAU,KAA/C,2BAKF,cAAC5B,GAAA,EAAD,UACEzR,EAAUkjC,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAACI,EAAUrI,GACrF,OACC,cAAC4mD,GAAD,CACC5mD,MAAOA,EACPqI,SAAUA,EACVs+C,eAAgBA,cAOtB,cAAC1a,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAO14B,EAAUI,OACjBmiC,YAAaA,EACbF,KAAMA,EACN2b,aA5CsB,SAAC70C,EAAOo6B,GAChCjB,EAAQiB,IA4CN0a,oBAzC6B,SAAC90C,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SA8CV,SAASyb,GAAT,GAA4D,IAAnC5mD,EAAkC,EAAlCA,MAAOqI,EAA2B,EAA3BA,SAAUs+C,EAAiB,EAAjBA,eACzC,OACC,eAACvsC,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,iBACEhS,QADF,IACEA,OADF,EACEA,EAAU0+C,qBAEZ,cAAC1sC,GAAA,EAAD,iBACEhS,QADF,IACEA,OADF,EACEA,EAAUA,WAEZ,eAACgS,GAAA,EAAD,eACG7S,GAAa,OAACa,QAAD,IAACA,OAAD,EAACA,EAAU2+C,oBAE3B,eAAC3sC,GAAA,EAAD,eACG7S,GAAa,OAACa,QAAD,IAACA,OAAD,EAACA,EAAU0W,UAE3B,cAAC1E,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CACC,aAAW,SACXlB,KAAK,QACLV,QAAS,kBAAMy2C,EAAe3mD,IAH/B,SAKC,cAAC,KAAD,CAAY2G,SAAS,kBC3G1B,IAAMxM,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERsc,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJ2mD,aAAa,CACTpmD,OAAQ,OAEZwT,MAAO,CACH,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QAKH,SAASorD,GAAT,GAAsD,EAAxBp8B,KAAyB,IAAD,EAAlBiV,EAAkB,EAAlBA,gBACzCxyB,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACvCjO,EAAayZ,qBAAW8tC,IAAxBvnD,SACR,EAAwBuT,YAAYw4C,IAA5BS,EAAR,oBAEMvsD,EAAUR,KAChB,EAA4BuG,oBAAS,GAArC,mBAAOymD,EAAP,KAAeC,EAAf,KACA,EAAsC1mD,mBAAS,IAA/C,mBAAO2mD,EAAP,KAAoBC,EAApB,KACA,EAAsC5mD,mBAAS,GAA/C,mBAAO6mD,EAAP,KAAoBC,EAApB,KACA,EAAoC9mD,mBAAS,IAA7C,mBAAO+mD,EAAP,KAAmBC,EAAnB,KACA,EAAgChnD,mBAAS,IAAzC,mBAAO2H,EAAP,KAAiBs/C,EAAjB,KACA,EAAkCjnD,mBAAS,IAA3C,mBAAOmI,EAAP,KAAkB0pB,EAAlB,KAEM+sB,EAAiB9qC,aAASulB,GAAiB,CACnDlqB,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAG9Dw0C,EAAU,GAEV7C,EAAenwC,OACfgzC,EAAU7C,EAAenwC,KAAKmwC,gBAGlC,IAYM17B,EAAe,SAACxV,GAClBk5C,EAAe,2BAAID,GAAL,kBAAmBj5C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAOxD+jD,EAAuB,SAACx5C,GAC1Bu5C,EAAY,2BAAIt/C,GAAL,kBAAgB+F,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UA8BxD4Q,qBAAU,WACNozC,IACAt1B,EAAa1pB,GACbu+C,GAAU,KAEX,CAACD,EAAQt+C,IAEZ,IAAMg/C,EAAmB,WAErB,IADA,IAAI9oC,EAAQ,EACH/V,EAAI,EAAGA,EAAIH,EAAUI,OAAQD,IAClC+V,GAASlW,EAAUG,GAAG+V,MAE1ByoC,EAAezoC,IAGbjP,EAAQ,CACVg4C,aAAeT,EAAYS,aAC3BC,cAAeV,EAAYU,cAC3BC,sBAAuBX,EAAYW,sBACnCC,SAAUZ,EAAYY,SACtBp/C,UAAWw+C,EAAYx+C,UAAYw+C,EAAYx+C,UAAY,GAC3DktB,UAAWsxB,EAAYtxB,UACvBmyB,aAAeb,EAAYa,aAC3B3D,YAAa8C,EAAY9C,YACzB4D,aAAcd,EAAYc,aAC1BC,kBAAmBf,EAAYgB,mBAAqBhB,EAAYe,kBAAoB,GACpFE,cAAejB,EAAYiB,cAC3B3oC,iBAAgB0nC,EAAY1nC,gBAAiB0nC,EAAY1nC,eACzDE,iBAAgBwnC,EAAYxnC,gBAAiBwnC,EAAYxnC,eACzDC,wBAAyBunC,EAAYvnC,wBAA0BunC,EAAYvnC,wBAA0B,EACrG03B,uBAAwBlqC,EAAOmqC,eAAe7vC,WAC9C8vC,uBAAwBpqC,EAAOmX,OAC/B8jC,QAASj7C,EAAOK,IAChB66C,YAAajB,GAA4B,GAGvCvC,GAAW,uCAAG,4BAAA18C,EAAA,kEAER++C,EAAYS,aAFJ,uBAGRptD,EAAS,CACLW,QAAS,6BACTD,OAAQ,QACRF,MAAM,IANF,kBAQD,MARC,uBAWSgsD,EAAY,CAC7Br3C,UAAW,CACPC,QACArK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAftB,OAWN86C,EAXM,OAkBZ3oB,IACAwnB,EAAe,IACf5sD,EAAS,CACLW,QAASotD,EAAOt5C,KAAKu5C,YAAYrtD,QACjCD,OAAQ,UACRF,MAAM,IAvBE,kDA2BZR,EAAS,CACLW,QAAS,KAAMA,QACfD,OAAQ,QACRF,MAAM,IA9BE,0DAAH,qDAmCjB,OACI,eAAC,WAAD,WACA,eAACK,EAAA,EAAD,CAAKoQ,EAAG,EAAR,UACI,cAACpQ,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UACI,oDAGR,cAAC6a,GAAA,EAAD,OAEJ,sBAAK3b,UAAWH,EAAQge,cAAxB,UACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,eAAC+Z,EAAA,EAAD,CACIvF,QAAQ,WACRD,KAAK,QACLtC,KAAK,eACLiC,WAAS,EAJb,UAMI,cAAC3U,EAAA,EAAD,oBACA,cAAC2d,EAAA,EAAD,CACI9d,MAAO,CAAE6mB,QAAS,GAClB9Q,GAAG,8BACHlD,KAAK,eACLzK,MACIwjD,EAAYS,aACVT,EAAYS,aACZ,GAENn2C,SAAUiS,EACV7S,aACA,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACI,cAACa,EAAA,EAAD,CACI5B,QAAS,kBA1JpB,WACb,IACMgJ,EAAM,KACN4uC,EAAe3uC,KAAKK,MACxB,KAAAL,KAAKM,SAA6BP,GAClCtR,WACF0/C,EAAe,2BACVD,GADS,IAEZS,kBAkJqCa,IACfjtD,MAAM,UACNkV,KAAK,QAHT,SAKI,cAACwlB,GAAA,EAAD,eAOpB,eAAC76B,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,0BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,aACLuC,QAAQ,WACRc,SAAUiS,OAGlB,eAACroB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRc,SAAUiS,EACVlS,KAAK,OACLk3C,gBAAiB,CACbC,QAAQ,QAIpB,eAACttD,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,8BACI,eAACya,GAAA,EAAD,CACIvb,UAAWH,EAAQ+nD,aACnB9xC,KAAK,QACLC,QAAQ,WACRc,SAAUiS,EACVtV,KAAK,cACLiC,WAAS,EANb,UAQI,cAAC+F,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,sBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,oBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,gBAAhB,2BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,uBAAhB,2CAIhB,sBAAK/I,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBACA,eAACya,GAAA,EAAD,CACIvb,UAAWH,EAAQ+nD,aACnB9xC,KAAK,QACLC,QAAQ,WACRc,SAAUiS,EACVtV,KAAK,YACLiC,WAAS,EANb,UAQI,cAAC+F,GAAA,EAAD,CAAUzS,MAAM,UAAUqM,QAAS,kBAAMw3C,EAAc,KAAvD,qBARJ,UASKvF,SATL,aASK,EAASl6C,KAAI,SAAC3C,GACX,OACI,cAACgR,GAAA,EAAD,CAEIpG,QAAS,kBA/MX,SAAC5K,GACvBoiD,EAAcpiD,EAAO6wB,YA8MkB2yB,CAAkBxjD,IACjCzB,MAAOyB,EAAOA,OAHlB,SAKKA,EAAOA,QAJHA,EAAOqI,cAUhC,eAACpS,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,6BACA,eAACya,GAAA,EAAD,CACIvb,UAAWH,EAAQ+nD,aACnB9xC,KAAK,QACLC,QAAQ,WACRc,SAAUiS,EACVtV,KAAK,eACLiC,WAAS,EANb,UAQI,cAAC+F,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBARJ,OASK4jD,QATL,IASKA,OATL,EASKA,EAAYx/C,KAAI,SAAC8gD,GACd,OACI,cAACzyC,GAAA,EAAD,CAAUzS,MAAOklD,EAAU3uB,UAA3B,SAAuC2uB,EAAU3uB,qBAKjE,eAAC7+B,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,wBACLqD,SAAUiS,EACV/S,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLqD,SAAUiS,EACV/S,QAAQ,mBAIpB,eAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAGiG,GAAI,EAAf,UACI,cAACrW,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UACI,yDAGR,cAAC6a,GAAA,EAAD,OAEJ,sBAAK3b,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTzV,UAAWH,EAAQmV,MACnBc,KAAK,QACLtC,KAAK,qBACLzK,MAAOwE,EAAS0+C,mBAAqB1+C,EAAS0+C,mBAAqB,GACnEp1C,SAAUi2C,EACV/2C,QAAQ,WACRa,KAAK,cAGb,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLzK,MAAOwE,EAASA,SAAWA,EAASA,SAAW,GAC/CsJ,SAAUi2C,EACV/2C,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BACA,cAAC+U,EAAA,EAAD,CACI7V,UAAWH,EAAQmV,MACnBS,WAAS,EACTK,KAAK,QACLtC,KAAK,kBACLzK,MAAOwE,EAAS2+C,gBAAkB3+C,EAAS2+C,gBAAkB,GAC7Dr1C,SAAUi2C,EACV/2C,QAAQ,WACRa,KAAK,cAGb,cAACnW,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAApE,SACI,cAACuJ,EAAA,EAAD,CACIY,QAAQ,WACRD,KAAK,QACLlV,MAAM,UACNwU,QA1SQ,WACpB,IAAI84C,EAAoB,CACpBjC,mBAAoBr/C,WAAWW,EAAS0+C,oBACxCC,gBAAiBt/C,WAAWW,EAAS2+C,iBACrC3+C,SAAUA,EAASA,SACnB0W,MAAQrX,WAAWW,EAAS0+C,oBAAsBr/C,WAAWW,EAAS2+C,kBAG1En+C,EAAUgS,KAAKmuC,GAEf1B,EAAe,2BACRD,GADO,IAEVx+C,eAEJg/C,IACAF,EAAY,KA4RAx3C,UAAW,cAAC,KAAD,IALf,0BAWR,cAAC5U,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC+6C,GAAD,CAAuB79C,UAAWA,EAAW89C,eAhSrD,SAAwB3mD,GACpB6I,EAAU6iB,SAAQ,SAASu9B,EAAUC,EAAQtwB,GACtC54B,IAAUkpD,GACTrgD,EAAUuS,OAAOpb,EAAO,MAGhConD,GAAU,QA4RV,cAAC7rD,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAWkF,EAAG,EAAjD,SACI,eAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,qBACarJ,GAAc+/C,QAG/B,qBAAKzsD,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,gCACA,cAAC+U,EAAA,EAAD,CACI6F,WAAS,EACT2uC,KAAM,EACN50C,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLqD,SAAUiS,EACV/S,QAAQ,kBAIpB,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,UACI,cAAClL,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,YACRnV,MAAM,UACNwU,QAAS80C,GAJb,8BASJ,cAACzpD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,YACRnV,MAAM,YAHV,8B,oCCxahB,SAASupB,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGwsB,UAAU,OAArB,SACE13B,OAoBN,IAAMtG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP4lB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3C4Z,QAAS,CACRn/B,MAAO,IAER8sD,SAAU,CACTxiD,SAAU,GACJjL,MAAOrB,EAAM2nB,QAAQonC,KAAKlnC,MAEjCokC,QAAS,CACR,QAAS,CACRzqD,OAAO,OAAD,OAASxB,EAAM0B,QAAQ,GAAvB,YAMM,SAASstD,GAAT,GAAiD,IArC7CrpD,EAqC0B8/B,EAAkB,EAAlBA,gBACnCxyB,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzChO,EAAUR,KAEhB,GADkBga,qBAAW8tC,IAAxBvnD,SACuBgG,mBAAS,IAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KAMA,OACI,cAAC,WAAD,UACL,sBAAKhrB,UAAWH,EAAQgnB,KAAxB,UACC,cAACjM,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACC,eAACjX,GAAA,EAAD,CACCriB,MAAOA,EACP8N,SAVmB,SAACK,EAAOmU,GAC/BL,EAASK,IAULtV,QAAQ,aACRuV,cAAc,KACdE,UAAU,UACVD,eAAe,UACf,aAAW,gCAPZ,UASC,cAACE,GAAA,EAAD,aACCxI,MAAM,mBACNjL,KAAM,cAAC,KAAD,CAAUhY,UAAWH,EAAQwuD,aA9DvBnpD,EA+DE,EA9Db,CACNwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,OA8DrC,cAAC8V,GAAA,EAAD,CAAMC,WAAS,EAACqC,QAAQ,WAAxB,SACC,eAAC7c,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACC,eAAChW,EAAA,EAAD,uBAAqB,4BAAI0R,EAAOmX,YAChC,cAAClpB,EAAA,EAAD,UACC,4BAAIikB,OAASE,OAAO,wBAKvB,cAAC5J,GAAA,EAAD,UACC,cAACva,EAAA,EAAD,CAAKqW,GAAI,EAAGqM,GAAI,EAAGziB,QAAQ,OAAOiL,eAAe,WAAjD,SACC,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,eAML,cAAC,GAAD,CAAU/M,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAACinD,GAAD,CAAqBnnB,gBAAiBA,EAAiBjV,KAAK,mBC9GjE,IAAM1wB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERslB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACPC,OAAQ,QACR0J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3CwjC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,IAE5BotD,SAAU,CACTxiD,SAAU,GACJjL,MAAOrB,EAAM2nB,QAAQonC,KAAKlnC,MAEjConC,eAAgB,CACfjtD,MAAO,QAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASo2C,KACvB,IAAM5uD,EAAUR,KAChB,EAA0BuG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KAEMuyB,EAAkB,kBAAMvyB,GAASrS,IAEvC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACC,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBAAKwR,IAAI,wEAAwEmgB,IAAI,eAAev9B,UAAWH,EAAQmY,SAF3I,eAOD,cAACxC,GAAA,EAAD,CACCpV,KAAMA,EACNua,oBAAqBxC,GACrB1C,WAAS,EACTrU,SAAS,KAJV,SAMC,cAACmtD,GAAD,CAAqBvpB,gBAAiBA,SCzD1C,I,MAAMkW,GAAU,CACf,CAAExkC,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,IAC/C,CAAE1K,GAAI,YAAauM,MAAO,eAAgB7B,SAAU,IACpD,CAAE1K,GAAI,SAAUuM,MAAO,WAAY7B,SAAU,IAC7C,CAAE1K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,IAC3C,CAAE1K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KAGpC/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,OACPC,OAAQ,QAETyZ,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIO,SAAS22C,GAAT,GAAoC,IAAb3gD,EAAY,EAAZA,UAC/BlO,EAAUR,KAGhB,OACC,cAAC8oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,iBACEzR,QADF,IACEA,OADF,EACEA,EAAWZ,KAAI,SAACI,EAAUrI,GAC1B,OACC,eAACoa,GAAA,EAAD,CAAsB4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAAvD,UACC,cAAC7pB,GAAA,EAAD,UAAYhS,EAASvK,WACrB,cAACuc,GAAA,EAAD,UAAYhS,EAASiW,kBACrB,cAACjE,GAAA,EAAD,UAAYhS,EAASA,SAAS1H,gBAAgB2jB,mBAC9C,cAACjK,GAAA,EAAD,UAAYhS,EAASgW,QACrB,cAAChE,GAAA,EAAD,UAAYhS,EAAS0W,UALP/e,eCrDhB,IAAMypD,GAA2B1vD,YAAH,w1CAgDxB2vD,GAAc3vD,YAAH,qOCpClBi8C,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,iBAAkB7B,SAAU,IAAKtV,MAAO,UAC9D,CAAE4K,GAAI,UAAWuM,MAAO,SAAU7B,SAAU,IAAKtV,MAAO,UACxD,CAAE4K,GAAI,QAASuM,MAAO,mBAAoB7B,SAAU,IAAKtV,MAAO,UAG3DzM,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,OACPC,OAAQ,QAETyZ,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIO,SAAS82C,GAAT,GAAgC,IAAD,EAATrkD,EAAS,EAATA,OAE9BgI,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEvC05C,EAAWluC,qBAAW8tC,IAAtBI,OAEF1nD,EAAUR,KAEhB,EAA0Cqa,aACzCi1C,GAA0B,CACzB55C,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,MAAO,CACN01C,aAAc,GACdC,UAAW,GACXnpB,QAAS,GACTstB,WAAYtkD,EAAO+Z,UAAUyhB,aAAanzB,IAC1Ck8C,UAAW,GACX1G,eAAgB,YAChB2G,UAAWxkD,EAAOqI,MAGlB+zB,YAAa,iBAfAvyB,GAAjB,EAAQjJ,QAAR,EAAiBiJ,MAAa9B,GAA9B,EAAuBlN,MAAvB,EAA8BkN,SAmB1B08C,EAAS,GASb,OARG56C,IACF46C,EAAS56C,EAAK66C,wBAGfv1C,qBAAU,WACTpH,MACE,CAACg1C,IAGH,cAACp/B,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,oBACEyvC,SADF,aACE,EAAQ9hD,KAAI,SAAC+jC,EAAKhsC,GAClB,OACC,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B4Y,KAAOwsB,EAAI6X,iBAAiBD,UAAUlkC,OAAO,iBACxE,cAACrF,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BolC,EAAIpN,iBAC/B,cAACvkB,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SAAyB,kCAAKolC,EAAIie,2BAHAjqD,e,yBCxErCiT,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC3D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGzChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCyV,MAAO,CACA,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,IAGd8c,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,IAAzC,OAEP,iBAAkB,CACjBL,MAAO,OAEFwuC,WAAY,EACZxjC,WAAY,SACZ2qC,aAAc,cAIP,SAAS6Y,GAAT,GAAkC,IAAV5kD,EAAS,EAATA,OACnC,EAAuB2I,YAAYy7C,IAA3BS,EAAR,oBAEH,EAAgCh2C,qBAAW8tC,IAAnCK,EAAR,EAAQA,UAAW5nD,EAAnB,EAAmBA,SAEV4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzChO,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,IAAnC,mBAAO0pD,EAAP,KAAcC,EAAd,KACA,EAAoC3pD,mBAAS,IAA7C,mBAAO6L,EAAP,KAAmB+9C,EAAnB,KAGMx6C,EAAQ,CACVmzC,gBAAiB,QACjBE,eAAgB,YAChBU,iBAAkB,CACdz8C,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASC,OAAO,SAASC,UAEvCuqC,oBAAqBviD,WAAW0iD,GAChChG,eAAgB,CACZC,eAAgB,CACZC,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBC,qBAAsB,CAClBF,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBE,sBAAuB,CACnBH,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBG,eAAgB,CACZJ,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBI,eAAgB,CACZL,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBK,oBAAqB,CACjBN,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBM,cAAe,CACXP,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,MAEjBO,qBAAsB,CAClBR,MAAsB,OAAf/3C,EAAsB7E,WAAW0iD,GAAS,EACjD7F,YAAa,OAGrBgG,eAAe,CACXC,MAAO,GACPC,OAAS,IAEbvH,WAAY51C,EAAOK,IACnB6pC,uBAAwBlqC,EAAOmqC,eAC/BC,uBAAwBpqC,EAAOmX,OAC/BmlC,WAAYtkD,EAAO+Z,UAAUyhB,aAAanzB,IAC1CmxB,eAAgBx5B,EAAO+Z,UAAUyf,eACjCF,eAAgBt5B,EAAO+Z,UAAUuf,eACjC8rB,iBAAkBplD,EAAO+Z,UAAUyhB,aAAa9B,SAChD2rB,cAAerlD,EAAO+Z,UAAUyhB,aAAa7B,MAC7C6qB,UAAWxkD,EAAOqI,KAIhBq3C,EAAW,uCAAG,sBAAA18C,EAAA,yDAChBnC,GAAW,GADK,SAGC,KAAVikD,GAA+B,KAAf79C,EAHP,uBAIR7R,EAAS,CACLW,QAAS,+BACTD,OAAQ,QACRF,MAAM,IAEViL,GAAW,GATH,0CAYNgkD,EAAW,CACbt6C,UAAW,CACPpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,WAhBI,OAmBZwyC,GAAU,GACV+H,EAAS,IACTC,EAAc,IACd5vD,EAAS,CACLW,QAAS,6BACTD,OAAQ,UACRF,MAAM,IAEV+zC,IACA9oC,GAAW,GA5BC,kDA8BZ8oC,IACA9oC,GAAW,GACXzL,EAAS,CACLW,QAAS,qCACTD,OAAQ,QACRF,MAAM,IAnCE,0DAAH,qDAyCX+zC,EAAc,WAChBqT,GAAU,GACV/0C,GAASrS,IAGb,OACI,gCACI,cAAC+U,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,WACRN,WAAS,EACT7U,MAAM,UACNyU,UAAW,cAAC,KAAD,CAAsB1U,MAAO,CAACkL,SAAU,MACnDuJ,QAAS++B,EANb,SAQI,cAACrzC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sBAIJ,eAACP,GAAA,EAAD,CACIpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS8zC,EACT1+B,WAAS,EACTrU,SAAS,KANb,UAQI,cAAC+J,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACqK,GAAA,EAAD,CAAagB,GAAG,2BAAhB,SACI,eAACjW,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKoQ,EAAG,EAAGmoB,SAAU,EAArB,mCAGA,cAACv4B,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACpB,cAAC,KAAD,aAKQ,eAACH,GAAA,EAAD,WACI,eAAClV,EAAA,EAAD,CAAKc,MAAM,OAAQuV,GAAI,EAAvB,UACI,cAAChW,EAAA,EAAD,UAAY,qDACZ,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTzV,UAAWH,EAAQmV,MACnB6B,SAAU,SAACvD,GAAD,OAAOi8C,EAASj8C,EAAEC,OAAOxK,QACnCA,MAAOumD,EACPx5C,KAAK,QACLtC,KAAK,gBACLuC,QAAQ,WACRa,KAAK,cAGb,qBAAK5W,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOuV,GAAI,EAAtB,UACI,cAAChW,EAAA,EAAD,UAAY,kDACZ,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACIha,MAAM,OACNiS,KAAK,cACLuC,QAAQ,WACRhN,MAAO0I,GAA0B,GACjCoF,SAAU,SAACvD,GAAD,OAAOk8C,EAAcl8C,EAAEC,OAAOxK,QAL5C,UAOI,cAACyS,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEHyI,GAAUrE,KAAI,SAACwiD,EAAQzqD,GACpB,OACI,cAACsW,GAAA,EAAD,CAAsBzS,MAAO4mD,EAAO9tD,MAApC,SAA4C8tD,EAAO/tD,MAApCsD,gBAOvC,eAACzE,EAAA,EAAD,CAAKc,MAAM,OAAOuV,GAAI,EAAGpW,QAAQ,OAAjC,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,iDAGR,cAACjV,EAAA,EAAD,CAAYH,MAAO,CAACC,MAAO,WAAYmV,QAAQ,KAA/C,SACI,kCAAKrJ,GAAclC,EAAOyZ,eAGlC,eAACxjB,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAA1B,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,CAAaiV,QAAQ,KAArB,SACI,kDAGR,cAACjV,EAAA,EAAD,CAAYH,MAAO,CAACC,MAAO,SAAUmV,QAAQ,KAA7C,SACI,kCAAKrJ,GAAclC,EAAOyZ,MAAQzZ,EAAOwa,iCAGjD,eAACvkB,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAA1B,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,CAAaiV,QAAQ,KAArB,SACI,mDAGR,cAACjV,EAAA,EAAD,CAAaiV,QAAQ,KAArB,SACI,kCAAKrJ,GAAclC,EAAOwa,oCAKtC,cAACvkB,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASmkD,aAAa,SAASj/C,EAAG,EAArE,SACI,cAACsE,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,YACRnV,MAAM,UACND,MAAO,CAACkL,SAAU,IAClBuJ,QAAS80C,EALb,qCChRpB,IAAM7qD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCqY,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERsc,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAKO,SAAS8uD,GAAT,GAAgD,IAAvB5b,EAAsB,EAAtBA,YAAa3pC,EAAS,EAATA,OAC9CwkC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAC/ChO,EAAUR,KAEhB,OACI,eAAC,WAAD,WACI,cAACub,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACI,eAACiD,GAAA,EAAD,WACI,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,gCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACI,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAK7C,sBAAK7L,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOsP,EAAG,EAArB,UACI,eAACpQ,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAOmQ,EAAG,GAApC,UACI,eAAC/P,EAAA,EAAD,WAAY,sDAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsCloC,EAAO+Z,UAAUyhB,aAAalC,oBAExE,eAACrjC,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAQmQ,EAAG,GAArC,UACI,eAAC/P,EAAA,EAAD,WAAY,kDAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsCloC,EAAO+Z,UAAUyhB,aAAa/B,sBAG5E,eAACxjC,EAAA,EAAD,CAAKc,MAAM,OAAOsP,EAAG,EAArB,UACI,eAACpQ,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAOmQ,EAAG,GAApC,UACI,eAAC/P,EAAA,EAAD,WAAY,oDAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsCloC,EAAOg3B,QAAQ7X,YAEzD,eAAClpB,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAQmQ,EAAG,GAArC,UACI,eAAC/P,EAAA,EAAD,WAAY,iDAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsCloC,EAAOg3B,QAAQmb,uBAG7D,eAACl8C,EAAA,EAAD,CAAKc,MAAM,OAAOsP,EAAG,EAArB,UACI,eAACpQ,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAOmQ,EAAG,GAApC,UACI,eAAC/P,EAAA,EAAD,WAAY,+CAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsChuB,KAAOla,EAAOia,gBAAgBG,OAAO,oBAE/E,eAACnkB,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAAQmQ,EAAG,GAArC,UACI,eAAC/P,EAAA,EAAD,WAAY,oDAAZ,OACA,cAACA,EAAA,EAAD,CAAYH,MAAO,CAAC+xC,YAAa,GAAjC,SAAsChuB,KAAOla,EAAOsa,2BAA2BF,OAAO,wBAG7B,IAAhEoqB,EAAgBh2B,QAAQ+jC,UAAUG,mBAAmB/jC,OAAoB,KACtE,cAAC1Y,EAAA,EAAD,CAAKc,MAAM,MAAMsP,EAAG,EAAGnQ,QAAQ,OAAOkL,WAAY,SAAlD,SACI,cAACwjD,GAAD,CAAe5kD,OAAQA,SAInC,eAACwQ,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,eAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,UACI,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,+BAIJ,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACg+C,GAAD,CAAarkD,OAAQA,MAEzB,cAAC/J,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,eAAC7K,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAAwC,oBAAGpV,MAAO,CAACC,MAAO,WAAlB,cAAgC4J,EAAOyZ,MAAQzZ,EAAOwa,gCAElG,cAACvkB,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,eAAC7K,EAAA,EAAD,CAAYiV,QAAQ,KAApB,uBAAmC,oBAAIpV,MAAO,CAACC,MAAO,SAAnB,cAA+B8L,GAAclC,EAAOwa,oCAG/F,eAAChK,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,UACI,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,+BAIJ,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC69C,GAAD,CAAc3gD,UAAWvD,EAAOuD,cAEpC,cAACtN,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,eAAC7K,EAAA,EAAD,CAAYiV,QAAQ,KAApB,+BAA2C,oBAAIpV,MAAO,CAACC,MAAO,OAAnB,cAA6B8L,GAAclC,EAAOyZ,wBCtGrH,IAAM5kB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJ2W,OAAQ,CACVzB,SAAU,gBAIG,SAAS65C,GAAT,GAA4C,IAAnBxlD,EAAkB,EAAlBA,OAC9BgI,GADgD,EAAVD,QAC7B7E,KAAKC,MAAMC,aAAaC,QAAQ,gBAC/C,EAAgCwL,qBAAW8tC,IAAnCvnD,EAAR,EAAQA,SAAU4nD,EAAlB,EAAkBA,UAElB,EAAuBr0C,YAAYy7C,IAA3BS,EAAR,oBAEA,EAAwBzpD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACA,EAAwDplB,mBAAS,GAAjE,mBAAOqqD,EAAP,KAA6BC,EAA7B,KACA,EAAgDtqD,mBAAS,GAAzD,mBAAOgxC,EAAP,KAAyBuZ,EAAzB,KAEA,EAA8BvqD,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAAoCzF,mBAAS,IAA7C,mBAAO6L,EAAP,KAAmB+9C,EAAnB,KAEMrb,EAAc,WAChB1hC,GAASrS,GACT8vD,EAAwB,GACxBC,EAAoB,GACpBnlC,EAAS,IAGPnrB,EAAUR,KA2BhB,IAAM2V,EAAQ,CACVmzC,gBAAiB,QACjBE,eAAgB,YAChBU,iBAAkB,CACdz8C,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASC,OAAO,SAASC,UAEvCuqC,oBAAqBviD,WAAWpC,EAAOwa,yBACvCvV,UAAW,CACP2gD,oBAAqBrnD,EACrB2G,kBAAmBknC,EACnBjI,oBAAqBshB,GAEzB3G,eAAgB,CACZC,eAAgB,CACZC,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBC,qBAAsB,CAClBF,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBE,sBAAuB,CACnBH,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBG,eAAgB,CACZJ,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBI,eAAgB,CACZL,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBK,oBAAqB,CACjBN,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBM,cAAe,CACXP,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,MAEjBO,qBAAsB,CAClBR,MAAsB,OAAf/3C,EAAsB7E,WAAoC,IAAzBqjD,EAA6BzlD,EAAOwa,wBAA0BirC,GAAwB,EAC9HxG,YAAa,OAGrBgG,eAAe,CACXC,MAAO,GACPC,OAAS,IAEbjT,uBAAwBlqC,EAAOmqC,eAC/BC,uBAAwBpqC,EAAOmX,OAC/BmlC,WAAYtkD,EAAO+Z,UAAUyhB,aAAanzB,IAC1CmxB,eAAgBx5B,EAAO+Z,UAAUyf,eACjCF,eAAgBt5B,EAAO+Z,UAAUuf,eACjC8rB,iBAAkBplD,EAAO+Z,UAAUyhB,aAAa9B,SAChD2rB,cAAerlD,EAAO+Z,UAAUyhB,aAAa7B,MAC7C6qB,UAAWxkD,EAAOqI,KAIhBq3C,EAAW,uCAAG,sBAAA18C,EAAA,yDAChBnC,GAAW,GADK,SAGO,KAAfoG,EAHQ,uBAIR7R,EAAS,CACLW,QAAS,uCACTD,OAAQ,QACRF,MAAM,IAEViL,GAAW,GATH,0CAYNgkD,EAAW,CACbt6C,UAAW,CACPpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,WAhBI,OAmBZwyC,GAAU,GACVgI,EAAc,IACd5vD,EAAS,CACLW,QAAS,6BACTD,OAAQ,UACRF,MAAM,IAEV+zC,IACA9oC,GAAW,GA3BC,kDA8BZ8oC,IACA9oC,GAAW,GACXzL,EAAS,CACLW,QAAS,qCACTD,OAAQ,QACRF,MAAM,IAnCE,0DAAH,qDAwCjB,OACI,gCACI,cAAC+U,EAAA,EAAD,CACIW,KAAK,SACLC,QAAQ,WACRnV,MAAM,UACNyU,UAAW,cAAC,KAAD,IACXD,QAAS++B,EALb,sBAUA,eAAC3+B,GAAA,EAAD,CACIpV,KAAMA,EACNqV,WAAS,EACTrU,SAAS,KACTf,QAAS8zC,EACT,kBAAgB,yBALpB,UAOI,cAAChpC,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,eAAC5K,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAGnoB,EAAG,EAArB,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,+BAIJ,cAACpX,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACI,cAAC,KAAD,WAIZ,eAACH,GAAA,EAAD,WACI,cAAC7U,EAAA,EAAD,8DACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,SAAtB,SACI,cAACt1C,EAAA,EAAD,CAAY4V,GAAG,yBAAyB4/B,cAAY,EAApD,SACI,4DAGR,cAAC71C,EAAA,EAAD,CAAK0iB,GAAI,EAAGtiB,GAAI,EAAG+U,GAAI,EAAvB,SACI,cAAC4gC,GAAA,EAAD,CACIC,iBAvJxB,SAAmBnjC,GACf,MAAM,GAAN,OAAUA,IAuJU+8C,iBAAkBtnD,EAAM8D,QAAQ,GAChC,kBAAgB,8BAChB6pC,kBAAkB,OAClB7/B,SAhLM,SAACK,EAAOmU,GAClCL,EAASK,GACT,IAAIlG,EAAevY,YAAY,IAAMye,GAAUxe,QAAQ,IACnDyjD,EAAuB1jD,YAAYpC,EAAOwa,wBAA0BG,EAAa,KAAKtY,QAAQ,IAC9F+pC,EAAmBhqC,YAAYpC,EAAOwa,wBAA0BsrC,GAAsBzjD,QAAQ,IAClGqjD,EAAwBI,GACxBH,EAAoBvZ,QA6KR,eAACn2C,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,CAAY4V,GAAG,yBAAyB4/B,cAAY,EAApD,SACI,kEAEJ,cAACzgC,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRhN,MAAOknD,GAA8C,EACrDp5C,SApLE,SAACvD,GACvB,IAAIujC,EAAYjqC,WAAW0G,EAAEC,OAAOxK,OAEhCoc,EAAcvY,YAA0B,IAAZiqC,EAAmBrsC,EAAOwa,yBAA0BnY,QAAQ,IACxF+pC,EAAmBhqC,YAAYpC,EAAOwa,wBAA0B6xB,GAAWhqC,QAAQ,IAEvFqjD,EAAwBrZ,GACxBsZ,EAAoBvZ,GACpB5rB,EAAS7F,SA+KG,eAAC1kB,EAAA,EAAD,CAAKc,MAAM,OAAOuV,GAAI,EAAGs/B,UAAW,SAApC,UACI,cAACt1C,EAAA,EAAD,UAAY,kDACZ,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACIha,MAAM,OACNiS,KAAK,cACLuC,QAAQ,WACRc,SAAU,SAACvD,GAAD,OAAOk8C,EAAcl8C,EAAEC,OAAOxK,QAJ5C,UAMI,cAACyS,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEHyI,GAAUrE,KAAI,SAACwiD,EAAQzqD,GACpB,OACI,cAACsW,GAAA,EAAD,CAAsBzS,MAAO4mD,EAAO9tD,MAApC,SAA4C8tD,EAAO/tD,MAApCsD,cAMnC,eAACzE,EAAA,EAAD,CAAKC,QAAQ,OAAOoW,GAAI,EAAxB,UACI,cAACrW,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,+BAEJ,cAACL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UAAY,kCAAK4L,GAAclC,EAAOyZ,iBAG9C,eAACxjB,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,kCAEJ,cAACL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UAAY,kCAAK4L,GAAclC,EAAOwa,mCAG9C,eAACvkB,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,oCAEJ,cAACL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UAAY,kCAAK4L,GAAckqC,aAGvC,eAACn2C,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,uCAEJ,cAACL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,UAAY,8BAAI4L,GAAc3D,GAAlB,cAGpB,eAACtI,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKu4B,SAAU,EAAf,SACI,cAACl4B,EAAA,EAAD,CAAYiV,QAAQ,KAApB,8BAEJ,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SAA0B,oBAAGpV,MAAO,CAACC,MAAO,SAAlB,cAA8B8L,GAAuC,IAAzBujD,EAA6BzlD,EAAOwa,wBAA0BirC,gBAIhJ,cAAC54C,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS80C,EACTtpD,MAAM,UACNmV,QAAQ,YACRD,KAAK,QAJT,8B,WCnSdolC,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,eAAgB7B,SAAU,IAAKtV,MAAO,UAC5D,CAAE4K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,IAAKtV,MAAO,UAC3D,CAAE4K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,IAAKtV,MAAO,UACtD,CAAE4K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,IAAKtV,MAAO,UAC3D,CAAE4K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IAAKtV,MAAO,WAGnDzM,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7B8lB,MAAO,CACN3F,SAAU,KAEXiG,eAAgB,CACflL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,OAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASw2C,GAAT,GAAiC,IAAXzjD,EAAU,EAAVA,QAE5Bi8C,EAAWhuC,qBAAW8tC,IAAtBE,QAEFxnD,EAAUR,KAEhB,OAAI+L,EAEF,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKF,cAAC,WAAD,UACA,qBAAKvL,UAAWH,EAAQgnB,KAAxB,SACC,cAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,SACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBqB,cAAY,EACZtS,KAAK,QACL,aAAW,gBALZ,UAOC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,OAIxB,cAAC6I,GAAA,EAAD,CAAWzT,MAAO,SAAUnL,MAAO,CAAEygB,SAAU,KAA/C,2BAKF,cAAC5B,GAAA,EAAD,iBACE6nC,QADF,IACEA,OADF,EACEA,EAASl6C,KAAI,SAAC+jC,EAAKhsC,GACnB,IAA0B,IAAvBgsC,EAAInsB,eACN,OACC,cAAC,GAAD,CACC3Z,QAASA,EACTmlD,aAAcrf,GACThsC,mBAchB,SAASomD,GAAT,GAA+C,IAAxBiF,EAAuB,EAAvBA,aAAcnlD,EAAS,EAATA,QAC9B4jC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eACxD,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEM0hC,EAAc,WACb1hC,GAASrS,IAchB,OACC,eAAC,WAAD,WACC,eAACkf,GAAA,EAAD,CACC4J,OAAK,EACLkgB,UAAW,EACXh0B,QAAS,SAAC9B,GAAD,OAhBkB,SAACA,GAC9B,IAECk9C,kBADIC,GAEa,IAAbn9C,EAAEo9C,QACLvc,IAEA,MAAO9uC,KASSsrD,CAAsBr9C,IAHvC,UAKC,cAACiM,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B4Y,KAAO6rC,EAAa9rC,gBAAgBG,OAAO,iBACtE,cAACrF,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BykD,EAAahsC,UAAUyhB,aAAalC,iBAC/D,eAACvkB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BY,GAAc6jD,EAAatsC,MAAQssC,EAAavrC,4BAC5E,eAACzF,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BY,GAAc6jD,EAAavrC,4BACvD,eAACzF,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BY,GAAc6jD,EAAatsC,WACU,IAAhE+qB,EAAgBh2B,QAAQ+jC,UAAUG,mBAAmB/jC,OACrD,cAACoG,GAAA,EAAD,CAAWzT,MAAM,WAGjB,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkkD,GAAD,CAAgBxlD,OAAQ+lD,SAK3B,cAAC/6C,GAAA,EAAD,CACCkF,YAAU,EACVta,KAAMA,EACNC,QAAS8zC,EACTx5B,oBAAqBxC,GAJtB,SAMC,cAAC43C,GAAD,CACCvlD,OAAQ+lD,EACRnlD,QAASA,EACT+oC,YAAaA,SCrJlB,IAAM90C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERqvD,WAAY,CACXlwD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAIvBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASw4C,KACvB,IAAMr+C,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0CwL,qBAAW8tC,IAA7CI,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAAWF,EAA3B,EAA2BA,WAErBznD,EAAUR,KAChB,EAA0BuG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAA4B7M,mBAAS,IAArC,mBAAegnC,GAAf,WACME,EAAerkB,iBAAO,MAE5B,EAA0C/O,aACzCyrB,GACA,CACEpwB,UAAW,CACZpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B3G,MAAO,IAEN06B,YAAa,iBARRx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAa9B,GAA9B,EAAuBlN,MAAvB,EAA8BkN,SAY3B8B,GACFizC,EAAWjzC,EAAK03B,0BAGjBpyB,qBAAU,WAETpH,IAEAi1C,GAAU,KAER,CAACD,EAAQh1C,IAEZ,IAAMyyB,EAAkB,kBAAMvyB,GAASrS,IAQvC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACC,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBAAKwR,IAAI,wEAAwEmgB,IAAI,cAAcv9B,UAAWH,EAAQmY,SAF1I,4BAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,iCAGkB,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACjB,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKC,QAAQ,OAAOmQ,EAAG,EAAvB,SACC,cAACpQ,EAAA,EAAD,CAAK2gB,SAAS,MAAd,SACA,sBAAMgO,SAAU,SAAC9b,GAAD,OA/BI,SAACA,EAAGvK,GAC3BuK,EAAE6D,iBACF5E,EAAQ,CAAE85B,OAAQtjC,EAAOmD,MAAO,KAChC0gC,EAAU7jC,GA4BgBikC,CAAgB15B,EAAGA,EAAEC,OAAO,GAAGxK,QAAtD,SACC,cAAC8M,EAAA,EAAD,CACCwT,SAAUyjB,EACVr3B,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZroB,WAAY,CACZC,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACA,cAACa,EAAA,EAAD,CAAYJ,KAAK,SAAShW,MAAM,UAAUkV,KAAK,SAA/C,SACC,cAAC,KAAD,iBASL,cAACrV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC,GAAD,CACCzF,QAASA,EACTmH,QAASA,YCrHf,IAAM2oC,GAAU,CACf,CAAExkC,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,KACvC,CAAE1K,GAAI,OAAQuM,MAAO,cAAiB7B,SAAU,KAChD,CACC1K,GAAI,aACJuM,MAAO,aACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,OACJuM,MAAO,mBACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,UACJuM,MAAO,UACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM8D,QAAQ,MAInC,SAASkkD,GAAWv9C,EAAMw9C,EAAMC,EAAYn7C,GAE3C,MAAO,CAAEtC,OAAMw9C,OAAMC,aAAYn7C,OAAMo7C,QADvBD,EAAan7C,GAI9B,IAAMu0C,GAAO,CACZ0G,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,SAAU,QACpCA,GAAW,gBAAiB,KAAM,UAAW,SAC7CA,GAAW,SAAU,KAAM,SAAU,SACrCA,GAAW,YAAa,KAAM,SAAU,SACxCA,GAAW,UAAW,KAAM,SAAU,QACtCA,GAAW,UAAW,KAAM,OAAS,OACrCA,GAAW,SAAU,KAAM,UAAW,SACtCA,GAAW,QAAS,KAAM,SAAW,QACrCA,GAAW,SAAU,KAAM,QAAU,QACrCA,GAAW,iBAAkB,KAAM,SAAU,QAC7CA,GAAW,SAAU,KAAM,UAAW,UACtCA,GAAW,UAAW,KAAM,UAAW,QACvCA,GAAW,SAAU,KAAM,UAAW,UAGjC1xD,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIO,SAAS22C,KACvB,IAAM7uD,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACpoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,GACtE,OACC,cAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,SACE8R,GAAQ/tC,KAAI,SAACiuC,GACb,IAAMryC,EAAQmoC,EAAIkK,EAAO1kC,IACzB,OACC,cAAC6I,GAAA,EAAD,CAEqCzT,MAAOsvC,EAAOtvC,MAFnD,SAIEsvC,EAAOx2B,QAA2B,kBAAV7b,EACxBqyC,EAAOx2B,OAAO7b,GAEdA,GANwCqyC,EAAO1kC,QALDw6B,EAAI8f,gBAsB5D,cAAC7f,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aArDsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAqDNC,oBAlD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SC5EV,IAAM6K,GAAU,CACf,CAAExkC,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,KACvC,CAAE1K,GAAI,OAAQuM,MAAO,cAAiB7B,SAAU,KAChD,CACC1K,GAAI,aACJuM,MAAO,aACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,OACJuM,MAAO,mBACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,UACJuM,MAAO,UACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM8D,QAAQ,MAInC,SAASkkD,GAAWv9C,EAAMw9C,EAAMC,EAAYn7C,GAE3C,MAAO,CAAEtC,OAAMw9C,OAAMC,aAAYn7C,OAAMo7C,QADvBD,EAAan7C,GAI9B,IAAMu0C,GAAO,CACZ0G,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,SAAU,QACpCA,GAAW,gBAAiB,KAAM,UAAW,SAC7CA,GAAW,SAAU,KAAM,SAAU,SACrCA,GAAW,YAAa,KAAM,SAAU,SACxCA,GAAW,UAAW,KAAM,SAAU,QACtCA,GAAW,UAAW,KAAM,OAAS,OACrCA,GAAW,SAAU,KAAM,UAAW,SACtCA,GAAW,QAAS,KAAM,SAAW,QACrCA,GAAW,SAAU,KAAM,QAAU,QACrCA,GAAW,iBAAkB,KAAM,SAAU,QAC7CA,GAAW,SAAU,KAAM,UAAW,UACtCA,GAAW,UAAW,KAAM,UAAW,QACvCA,GAAW,SAAU,KAAM,UAAW,UAGjC1xD,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIO,SAAS82C,KACvB,IAAMhvD,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,GAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACpoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,GACtE,OACC,cAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,SACE8R,GAAQ/tC,KAAI,SAACiuC,GACb,IAAMryC,EAAQmoC,EAAIkK,EAAO1kC,IACzB,OACC,cAAC6I,GAAA,EAAD,CAEqCzT,MAAOsvC,EAAOtvC,MAFnD,SAIEsvC,EAAOx2B,QAA2B,kBAAV7b,EACxBqyC,EAAOx2B,OAAO7b,GAEdA,GANwCqyC,EAAO1kC,QALDw6B,EAAI8f,gBAsB5D,cAAC7f,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aArDsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAqDNC,oBAlD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SChFV,IAAMhxC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCqY,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERsc,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIFkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS03C,KAEpB,MAAwBnqD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACM5S,EAAUR,KAEV80C,EAAa,WACf1hC,GAASrS,IAGb,OACI,gCACI,cAAC+U,EAAA,EAAD,CACIW,KAAK,SACLC,QAAQ,YACRnV,MAAM,UACNwU,QAAS++B,EAJb,sBAQA,eAAC3+B,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS8zC,EAAax5B,oBAAqBxC,GAA1E,UACR,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,+BAIkB,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACjB,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKrB,sBAAK7L,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,iCACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,8BAKR,eAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,qBACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,8BAKR,eAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,8BAKR,eAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,8BAKR,eAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBACA,cAACL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,iCAMZ,eAACka,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,eAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,UACI,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,+BAIJ,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC,GAAD,MAEJ,cAACpQ,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,cAAC7K,EAAA,EAAD,8CAEJ,cAACL,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,cAAC7K,EAAA,EAAD,0CAGR,eAACka,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,UACI,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,+BAIJ,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC,GAAD,MAEJ,cAACpQ,EAAA,EAAD,CAAKoQ,EAAG,EAAGhQ,GAAI,EAAGH,QAAQ,OAAOiL,eAAe,WAAhD,SACI,cAAC7K,EAAA,EAAD,2D,cCjItBzB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJ2W,OAAQ,CACVzB,SAAU,gBAIG,SAAS65C,KAEpB,MAAwBpqD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEM0hC,EAAc,WAChB1hC,GAASrS,IAEPP,EAAUR,KAEhB,OACI,gCACI,cAAC8V,EAAA,EAAD,CACIW,KAAK,SACLC,QAAQ,YACRnV,MAAM,UACNwU,QAAS++B,EAJb,sBASA,eAAC3+B,GAAA,EAAD,CACIpV,KAAMA,EACNC,QAAS8zC,EACT,kBAAgB,yBAHpB,UAKI,eAAC1zC,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASkP,EAAG,EAA3C,UACI,cAACha,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,kCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAGqI,GAAI,EAAf,SACI,cAAChO,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACI,cAAC,KAAD,WAIZ,eAACH,GAAA,EAAD,WACI,eAAClV,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,wCAEA,cAACL,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,eAACsgD,GAAA,EAAD,CAEIC,WAAS,EAET,aAAW,iBAJf,UAMI,cAAC3wD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UAFV,4BAOJ,cAACH,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UAFV,8BAUZ,cAACiV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,WACRhN,MAAM,qBAKd,sBAAK/I,UAAWH,EAAQge,cAAxB,UACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,4BAEJ,cAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,2BAGR,sBAAKd,UAAWH,EAAQge,cAAxB,UACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,4BAEJ,cAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,2BAGR,sBAAKd,UAAWH,EAAQge,cAAxB,UACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,+BAEJ,cAACL,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,cAACT,EAAA,EAAD,8BAIZ,cAACuW,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS++B,EACTvzC,MAAM,UACNmV,QAAQ,YACRD,KAAK,QAJT,8BC5GpB,SAASi7C,GAAWv9C,EAAM69C,EAAUC,EAAKC,EAAOC,GAC/C,MAAO,CAAEh+C,OAAM69C,WAAUC,MAAKC,QAAOC,WAGtC,IAAMnH,GAAO,CACZ0G,GAAW,UAAW,IAAK,IAAK,GAAI,KACpCA,GAAW,QAAS,IAAK,GAAM,GAAI,KACnCA,GAAW,SAAU,IAAK,GAAM,GAAI,GACpCA,GAAW,iBAAkB,IAAK,EAAK,GAAI,GAC3CA,GAAW,cAAe,IAAK,GAAM,GAAI,KACzCA,GAAW,YAAa,IAAK,IAAK,GAAI,KACtCA,GAAW,qBAAsB,IAAK,EAAK,GAAI,KAC/CA,GAAW,aAAc,IAAK,EAAK,GAAI,GACvCA,GAAW,SAAU,IAAK,GAAM,GAAI,GACpCA,GAAW,WAAY,IAAK,GAAK,GAAI,GACrCA,GAAW,cAAe,IAAK,EAAG,GAAI,GACtCA,GAAW,SAAU,IAAK,GAAM,EAAG,IACnCA,GAAW,OAAQ,IAAK,GAAM,GAAI,IAG7B5d,GAAY,CACjB,CAAEz8B,GAAI,OAAQk9B,SAAS,EAAOC,gBAAgB,EAAM5wB,MAAO,WAC3D,CAAEvM,GAAI,WAAYk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,YAC/D,CAAEvM,GAAI,MAAOk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,YAC1D,CAAEvM,GAAI,QAASk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,oBAC5D,CAAEvM,GAAI,QAASk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,YAC5D,CAAEvM,GAAI,UAAWk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,aAG/D,SAASmwB,GAAkB/6B,GAC1B,IAAQg7B,EAA4Ch7B,EAA5Cg7B,iBAAkBC,EAA0Bj7B,EAA1Bi7B,YAAaC,EAAal7B,EAAbk7B,SAEvC,OACC,cAACl0B,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC9H,GAAA,EAAD,CACCg0B,cAAeJ,EAAc,GAAKA,EAAcC,EAChD5zB,QAAS4zB,EAAW,GAAKD,IAAgBC,EACzC18B,SAAUw8B,EACVl1B,WAAY,CAAE,aAAc,2BAG7Bg1B,GAAUhmC,KAAI,SAACwmC,GAAD,OACd,cAACp0B,GAAA,EAAD,CAECzT,MAAO6nC,EAASC,QAAU,QAAU,OACpCpsB,QAASmsB,EAASE,eAAiB,OAAS,UAH7C,SAKEF,EAAS1wB,OAJL0wB,EAASj9B,YAsBpB,IAAMrX,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7B8lB,MAAO,CACN3F,SAAU,KAEXiG,eAAgB,CACflL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,OAIM,SAASstD,KACvB,IAAMhvD,EAAUR,KAChB,EAAkCuG,mBAAS,IAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KACA,EAA0B7rB,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAuCMgE,EAAYjE,EAAcjyB,KAAKD,IAAIkyB,EAAa+Z,GAAKl8C,OAASiiC,EAAOE,GAE3E,OACC,qBAAKtwC,UAAWH,EAAQgnB,KAAxB,SACC,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UACC,cAAC3H,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBqB,cAAY,EACZtS,KAAK,QACL,aAAW,gBALZ,UAOC,cAAC,GAAD,CACCjW,QAASA,EACTyzC,YAAanqB,EAAShb,OACtBklC,iBArDuB,SAACn8B,GAC7B,GAAIA,EAAM3D,OAAOoM,QAAjB,CACC,IAAM60B,EAAe6V,GAAKl9C,KAAI,SAACsnC,GAAD,OAAOA,EAAEjhC,QACvCie,EAAY+iB,QAGb/iB,EAAY,KAgDP8hB,SAAU8W,GAAKl8C,SAEhB,eAACqR,GAAA,EAAD,WACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,EAAKhsC,GAC3E,IAvBasO,EAuBPkhC,GAvBOlhC,EAuBqB09B,EAAI19B,MAvBY,IAA5B2V,EAASirB,QAAQ5gC,IAwBjCua,EAAO,kCAA8B7oB,GAC3C,OACC,eAACoa,GAAA,EAAD,CACC4J,OAAK,EAEL9T,QAAS,SAAC8B,GAAD,OAvDE,SAACA,EAAO1D,GAC3B,IAAMskB,EAAgB3O,EAASirB,QAAQ5gC,GACnC6gC,EAAc,IAEK,IAAnBvc,EACHuc,EAAcA,EAAYC,OAAOnrB,EAAU3V,GACf,IAAlBskB,EACVuc,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,IACtCnZ,IAAkB3O,EAAShb,OAAS,EAC9CkmC,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,GAAI,IAC1CnZ,EAAgB,IAC1Buc,EAAcA,EAAYC,OAAOnrB,EAAS8nB,MAAM,EAAGnZ,GAAgB3O,EAAS8nB,MAAMnZ,EAAgB,KAGnGrG,EAAY4iB,GAyCgBF,CAAYj9B,EAAOg6B,EAAI19B,OAC3C6W,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EACXjgB,SAAUurB,EAPX,UASC,cAACn1B,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC9H,GAAA,EAAD,CACCC,QAAS+0B,EACTv2B,WAAY,CAAE,kBAAmB4P,OAGnC,cAACxO,GAAA,EAAD,CAAWjJ,UAAU,KAAKI,GAAIqX,EAAS0jC,MAAM,MAAMjqC,QAAQ,OAA3D,SACE0pB,EAAI19B,OAEN,cAAC+L,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SAA0BolC,EAAImgB,WAC9B,cAAC9xC,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SAA0BolC,EAAIogB,MAC9B,cAAC/xC,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SAA0BolC,EAAIqgB,QAC9B,cAAChyC,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SACC,cAAC,GAAD,MAED,cAACyT,GAAA,EAAD,CAAWzT,MAAM,QAAjB,SACC,cAAC,GAAD,QAvBI5G,MA4BPqvC,EAAY,GACZ,cAACj1B,GAAA,EAAD,CAAU3e,MAAO,CAAEa,OAAQ,GAAK+yC,GAAhC,SACC,cAACh1B,GAAA,EAAD,CAAWo1B,QAAS,cAMzB,cAACxD,GAAA,EAAD,CACgBC,mBAAoB,GACnC96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aA/EqB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA+ELC,oBA5E4B,SAACr6B,GAChCq5B,EAAe5uB,SAASzK,EAAM3D,OAAOxK,MAAO,KAC5CsnC,EAAQ,WC3IV,IAAMl4B,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC3D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGhC,SAAS+2C,KAEpB,MAAwBxpD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEM0hC,EAAc,WAChB1hC,GAASrS,IAGb,OACI,gCACQ,cAAC+U,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,YACRnV,MAAM,UACNwU,QAAS++B,EAJb,oBAQJ,eAAC3+B,GAAA,EAAD,CACIpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS8zC,EACT,kBAAgB,2BAChB,mBAAiB,iCANrB,UAQI,cAACz+B,GAAA,EAAD,CAAagB,GAAG,2BAAhB,SACI,eAACjW,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,aAAnC,wCAGA,cAAClL,EAAA,EAAD,CAAK0iB,GAAI,EAAGziB,QAAQ,OAAOiL,eAAe,WAA1C,SACI,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS++B,EAAar+B,KAAK,QAAzE,SACpB,cAAC,KAAD,aAMQ,eAACH,GAAA,EAAD,WACI,eAAClV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,iCACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,WACRhN,MAAM,sBAKd,eAACtI,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,iCACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,WACRhN,MAAM,sBAKd,cAACtI,EAAA,EAAD,CAAKc,MAAM,OAAOsP,EAAG,EAAGiG,GAAI,EAA5B,SACI,cAAChW,EAAA,EAAD,0CAEJ,cAACL,EAAA,EAAD,CAAKc,MAAM,OAAOsP,EAAG,EAArB,SACI,cAAC/P,EAAA,EAAD,yCAEJ,cAACL,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,eAAC+K,GAAA,EAAD,CAAOC,SAAS,OAAhB,mDAA6D,uBAA7D,gDAIR,cAACpb,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASmkD,aAAa,SAASj/C,EAAG,EAArE,SACI,cAACsE,EAAA,EAAD,CACIW,KAAK,QACLC,QAAQ,YACRnV,MAAM,UACND,MAAO,CAACkL,SAAU,IAClBuJ,QAAS++B,EALb,qCC5EpB,IAAM90C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERsc,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIFkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASq5C,KACvB,IAAM7xD,EAAUR,KAChB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAEMuyB,EAAkB,kBAAMvyB,GAASrS,IAEvC,OACC,gCACC,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACC,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBAAKwR,IAAI,wEAAwEmgB,IAAI,cAAcv9B,UAAWH,EAAQmY,SAF1I,0BAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,gCAIkB,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACjB,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,eAACmP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,eAACxa,EAAA,EAAD,CAAKc,MAAM,MAAMsP,EAAG,EAApB,UACC,cAAC/P,EAAA,EAAD,gDACA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QAELtC,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,gBAOV,cAACtV,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACC,cAAC3B,EAAA,EAAD,CACCW,KAAK,QACLC,QAAQ,YACRnV,MAAM,UAHP,sBAQD,cAACoa,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASmL,GAAI,EAAhD,SACC,cAAC,GAAD,WAIH,cAACrW,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC,GAAD,YC3FU,SAAS6uC,KAEvB,MAA4BrmC,qBAAW8tC,IAA/BxnD,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SACTovC,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,OACC,eAACkN,EAAA,EAAD,WACU,cAACrb,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACnD,eAACob,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,WAC4D,IAA1D0xB,EAAgBh2B,QAAQ+jC,UAAUC,gBAAgBz/B,IAAiB,KACnE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC6/C,GAAD,SAIgD,IAAlDzc,EAAgBh2B,QAAQ+jC,UAAUE,QAAQ1/B,IAAiB,KAC3D,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC6iD,GAAD,SAI2D,IAA7Dzf,EAAgBh2B,QAAQ+jC,UAAUG,mBAAmB3/B,IAAiB,KACtE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACilD,GAAD,SAIwD,IAA1D7hB,EAAgBh2B,QAAQ+jC,UAAUI,gBAAgB5/B,IAAiB,KACnE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC8lD,GAAD,cCxCQ,SAASC,KACpB,OACI,cAAC,GAAD,UACI,cAAC,GAAD,MCLL,IAAMC,GAAiBnsD,0BAEjBosD,GAAsB,SAAC,GAAkB,IAAhBlsD,EAAe,EAAfA,SAC9B6M,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAAwCjI,mBAAS,CAC/CksD,MAAO,GACPC,SAAU,MACVC,iBAAkB,GAClBC,MAAO,GACPC,UAAW,IACXC,aAAc,GACdC,eAAgB,GAChBC,SAAU7/C,EAAOlR,OACjBg9B,KAAM,IACNg0B,OAAQ,CACNC,aAAc//C,EAAO7H,QAAQlB,eAC7B+oD,IAAKhgD,EAAO7H,QAAQnB,IACpB5H,KAAM4Q,EAAO7H,QAAQpB,eAEvBkpD,SAAU,CACRD,IAAK,GACL5wD,KAAM,GACN8wD,QAAS,IAEXC,MAAO,GACPhoD,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,MAtB5B,mBAAO+/C,EAAP,KAAqBC,EAArB,KAyBA,EAAyCjtD,mBAAS,MAAlD,mBAAOktD,EAAP,KAAsBC,EAAtB,KACA,EAAkCntD,mBAAS,IAA3C,mBAAOmI,EAAP,KAAkB0pB,EAAlB,KAEA,EAAiC7xB,oBAAS,GAA1C,mBAAOotD,EAAP,KAAkBC,EAAlB,KACA,EAAyCrtD,mBAAS,IAAlD,mBAAOoE,EAAP,KAAsBkpD,EAAtB,KACA,EAAqCttD,mBAAS,CAAEtF,QAAQ,EAAOC,QAAS,KAAxE,mBAAO4yD,EAAP,KAAyBpoD,EAAzB,KAEA,OACE,cAAC6mD,GAAe9oD,SAAhB,CACEC,MAAO,CACL6pD,eACAC,kBACAG,YACAC,cACAjpD,gBACAkpD,kBACAC,mBACApoD,WACA+nD,gBACAC,kBACAhlD,YACA0pB,gBAbJ,SAgBG9xB,KC/CDwS,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAAS+6C,KACtB,MAAwBnrD,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KAOMS,EAAc,SAACgE,GACnBA,EAAMmrC,kBACN5vC,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAfkB,SAAC8B,GACvBA,EAAMmrC,kBACN5vC,GAAQ,IAUN,mCAOA,eAAC+C,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS6S,EACT,kBAAgB,2BAChB,mBAAiB,iCANnB,UAQE,cAACwC,GAAA,EAAD,CAAagB,GAAG,2BAAhB,SACG,mCAEH,cAACf,GAAA,EAAD,UACE,cAACgC,GAAA,EAAD,CAAmBjB,GAAG,iCAAtB,6IAKF,eAACW,GAAA,EAAD,WACE,cAAClC,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,4BCxDH,IAAMyyD,GAAc,CACzBpB,MAAO,QACPxiD,UAAW,IACXtN,KAAM,mBACN6hB,UAAW,kBACX5hB,IAAK,kBACLL,SAAU,EACV0vC,SAAU,UACVxtB,MAAO,KACP0tB,eAAe,EACf2X,eAAgB,CACdC,eAAgB,GAChB+J,cAAe,EACf1J,eAAgB,EAChBC,eAAgB,EAChBC,oBAAqB,EACrBC,cAAe,EACfC,qBAAsB,GAExBtf,SAAS,EACT6oB,0BAA0B,EAC1BC,iBAAkB,CAChBC,oBAAqB,EACrBl1C,UAAW,EACX/a,YAAa,GAEfkwD,sBAAuB,KACvBC,6BAA8B,KAC9BC,6BAA8B,KAC9BnwB,QAAS,CACPgB,MAAO,KACPp7B,QAAS,KACT46B,cAAe,QACfv6B,KAAM,KACN86B,aAAc,KACd56B,UAAW,CACTC,MAAO,UACPC,OAAQ,IACRC,OAAQ,IACRC,cAAe,IACfC,QAAS,UACTC,UAAW,IACXC,UAAW,IACXC,OAAQ,IACRC,KAAM,KAER85B,MAAO,0BACP7iC,OAAQ,KACRijC,eAAgB,KAChBT,eAAgB,UAChBE,eAAgB,OAChBK,aAAc,KACd76B,IAAK,KACL06B,SAAU,OACVliC,qBAAsB,MAExB+L,UAAW,CACT,CACE/K,SAAU,EACVmN,eAAgB,EAChB/M,cAAe,eACfqlD,SAAU,WACVvkD,SAAS,EACTuL,UAAW,CACT1L,gBAAiB,KACjB2L,kBAAmB,MACnB9L,YAAa,EACbD,WAAY,OACZJ,cAAe,EACfgb,UAAW,MACXza,eAAgB,EAChBN,YAAa,QACbC,aAAc,MACdO,eAAe,EACfH,UAAW,OAEb2L,kBAAkB,EAClBY,gBAAiB,CACf/N,QAAQ,EACRkN,MAAO,GAETgB,qBAAsB,CACpBxM,gBAAiB,KACjB2L,kBAAmB,MACnB9L,YAAa,EACbD,WAAY,OACZJ,cAAe,EACfgb,UAAW,MACXza,eAAgB,EAChBN,YAAa,QACbC,aAAc,MACdO,eAAe,EACfH,UAAW,OAEbP,cAAe,CACbS,gBAAiB,KACjBH,YAAa,EACbD,WAAY,KACZJ,cAAe,EACfO,eAAgB,KAChBN,YAAa,MACbC,aAAc,GACdO,eAAe,EACfN,eAAgB,GAElBL,OAAQ,GACRgN,gBAAiB,KACjBC,uBAAwB,KACxBE,gBAAiB,GACjBqjD,mBAAoB,KACpBC,oBAAqB,EACrBC,yBAA0B,KAC1BC,wBAAyB,KACzBC,qBAAsB,GACtBlxD,OAAQ,OACRL,cAAe,MACfuB,kBAAkB,EAClB09B,mBAAoB,CAClB,CACEkW,mBAAoB,IACpBqc,0BAA2B,GAC3Bpc,kBAAmB,KACnBp1C,cAAe,KACfsB,cAAe,SAGnBoK,YAAa,CACXyE,IAAK,2BACLhN,gBAAiB,CACfwI,cAAe,OACfjL,cAAe,eACfomB,iBAAkB,WAClB2B,cAAe,QACfoQ,gBAAiB,WACjBC,YAAa,KACbN,aAAc,KACdD,UAAW,KACXQ,aAAc,KACde,gBAAiB,KACjBE,gBAAiB,KACjBhB,aAAc,KACdmB,SAAU,KACVjB,MAAO,KACPl6B,iBAAiB,EACjBC,mBAAoB,CAClBC,KAAM,YACNC,MAAO,aAGXkE,QAAS,CACP5D,KAAM,GACND,aAAa,EACbI,WAAY,CACVE,kBAAmB,GACnBD,kBAAmB,EACnBE,qBAAsB,OACtBC,cAAe,OAEjBN,IAAK,GACLH,YAAY,EACZF,UAAU,EACVC,qBAAsB,EACtBW,iBAAkB,CAChBC,oBAAqB,IACrBC,oBAAqB,SACrBT,IAAK,QACLD,KAAM,GAERgN,iBAAkB,CAChB,CACE5L,cAAe,EACfC,YAAa,KACbE,eAAgB,EAChBG,SAAU,IAEZ,CACEN,cAAe,EACfC,YAAa,EACbE,eAAgB,EAChBG,SAAU,GAEZ,CACEN,cAAe,EACfC,YAAa,EACbE,eAAgB,EAChBG,SAAU,GAEZ,CACEN,cAAe,EACfC,YAAa,EACbE,eAAgB,EAChBG,SAAU,GAEZ,CACEN,cAAe,EACfC,YAAa,EACbE,eAAgB,EAChBG,SAAU,GAEZ,CACEN,cAAe,EACfC,YAAa,EACbE,eAAgB,EAChBG,SAAU,IAGdf,iBAAkB,CAChBE,SAAU,GACVE,6BAA8B,IAC9BD,6BAA8B,OAC9BF,OAAQ,OACRL,cAAe,SAIrBgkB,OAAQ,KACR9lB,MAAO,QCxLPuX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0b,UAAW,CACTzZ,OAAQ,YAIG,SAAS2yD,KACtB,MAAwBvuD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAyE4G,qBAAWu4C,IAA7CmB,GAAvC,EAAQH,aAAR,EAAsBC,gBAAtB,EAAuCE,iBAAiBt7B,EAAxD,EAAwDA,aAGlDvkB,EAAc,kBAAMT,GAAQ,IAElC,OACE,gCACE,cAACuE,EAAA,EAAD,CAAY5B,QAAS,kBALA3C,GAAQ,IAKYqD,KAAK,QAA9C,SACE,cAACqjB,GAAA,EAAD,MAEF,eAAC3jB,GAAA,EAAD,CACEpU,SAAS,KACTqU,WAAS,EACTrV,KAAMA,EACNC,QAAS,kBAAM6S,KACfyH,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,kCACA,cAACC,GAAA,EAAD,UACE,cAAC,GAAD,MAEF,eAAC0B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CACEC,QAAS,WACPlC,KAFJ,sBAQA,cAACiC,EAAA,EAAD,CACEvU,MAAM,UACNyU,UAAW,cAAC,KAAD,IACXD,QAAS,WACP9G,QAAQC,IAAI8kD,IACZN,EAAgBM,IAChB57B,EAAa47B,GAAYtlD,WACzBmF,KAPJ,kCAmBV,IAAMkhD,GAAc,WAClB,IAAMv0D,EAAUR,KAChB,EAA4BuG,mBAAS,IAArC,mBAAOymC,EAAP,KACA,GADA,KAC4BzmC,mBAAS,KAArC,mBACA,GADA,UAC0CyT,qBAAWu4C,KAA7CgB,EAAR,EAAQA,aAGR,GAHA,EAAsBC,gBAGWn5C,aAASkrB,GAAkB,CAC1D7vB,UAAW,CAAEgb,KAAM,UAAWsc,aADxBjhC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAQvB,GAAI+F,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAGN,GAAIlG,EACF,OAAO,cAACmG,GAAD,IAGT,IAAQulC,EAAoB18B,EAApB08B,gBAMR,OACE,eAAC,WAAD,WACE,cAACtwC,EAAA,EAAD,CAAKmV,GAAI,EAAT,SACE,cAAC8iB,GAAA,EAAD,CACEhiB,GAAG,mBACHZ,KAAK,QACLuoB,YAAY,gDACZ1F,QAASoY,EACTnY,eAAgB,SAACC,GAAD,OAAYA,EAAOiL,gBACnCruB,WAAS,EACTqjB,YAAa,SAACvD,GAAD,OACX,cAAC1f,EAAA,EAAD,2BACM0f,GADN,IAEExf,QAAQ,eAGZc,SAAU,SAACoiB,EAAG5kB,GAAJ,OApBMtL,EAoBsBsL,OAnB5C/F,QAAQC,IAAIxF,GADS,IAACA,GAqBhBmwB,kBAAmB,SAACL,EAAQ9vB,GAAT,OAAmB8vB,EAAOiL,iBAAmB/6B,EAAM+6B,oBAsB1E,cAAC3b,GAAA,EAAD,CAAOpS,QAAQ,WAAf,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,sBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,4BAGJ,cAACC,GAAA,EAAD,UACGuxB,EAAgB5jC,KAAI,SAAC+jC,EAAKhsC,GACzB,OACE,eAACoa,GAAA,EAAD,CAEE4J,OAAK,EACLmB,KAAK,WACL+e,UAAW,EAQXjgB,SAAU+nB,EAAIpN,iBAAmB8uB,EAAanvB,QAZhD,UAcE,cAAClkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIlN,mBAEnB,cAACzkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIjN,kBAEnB,cAAC1kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIpN,mBAEnB,cAACvkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAI7M,iBAEnB,cAAC9kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAI7M,iBAEnB,cAAC9kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAI7M,iBAEnB,cAAC9kB,GAAA,EAAD,UACE,cAAC6zC,GAAD,QAhCGluD,mBCnLV,SAASmvD,KACtB,MAA8BpsD,IAAMrC,UAAS,GAA7C,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAMIpD,IAAMoR,WAAWu4C,IALnBoB,EADF,EACEA,UACAC,EAFF,EAEEA,YAEAC,GAJF,EAGElpD,cAHF,EAIEkpD,iBACAC,EALF,EAKEA,iBAEF,EAA0BlrD,IAAMrC,SAAS,IAAzC,mBAAOmD,EAAP,KAAciiB,EAAd,KAEA,EAAazI,uBAAYxZ,EAAO,KAAzBurD,EAAP,oBAEMC,EAAsBtsD,IAAM4U,YAAN,uCAAkB,WAAO7S,GAAP,eAAAwD,EAAA,yDACvCxD,EADuC,iEAG1CqB,GAAW,GAH+B,SAIrBktB,GAAU1C,SAASU,YACtCvsB,GACA,SAAUmK,GACR,OAAOA,KAP+B,QAIpCA,EAJoC,UAYxC8+C,GAAY,GACZ5nD,GAAW,GACX6nD,EAAgB/+C,EAAO,GAAGtS,QAdc,kDAiB1CwJ,GAAW,GACX4nD,GAAY,GACZC,EAAgB,IAnB0B,0DAAlB,sDAqBzB,IAMH,OAJAjrD,IAAM0R,WAAU,WACd46C,EAAoBD,KACnB,CAACA,IAGF,cAAC,IAAME,SAAP,UAEE,sBAAMplC,SAAUmlC,EAAhB,SACE,cAAC1+C,EAAA,EAAD,CACEJ,WAAS,EACTjC,KAAK,mBACLsC,KAAK,QACLC,QAAQ,WACRhN,MAAOA,EACPka,MAAM,mBACNpM,SAAU,SAACvD,GAAD,OAAO0X,EAAS1X,EAAEC,OAAOxK,QACnCiN,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACGpN,EACCqC,EACE,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KACtBk9C,EACF,cAAC,KAAD,CAAapyD,MAAM,YAEnB,cAAC,KAAD,CAAOA,MAAM,UAGf,2BAQRyE,SACE8tD,EAAiB7yD,QAAWyI,MAExBA,IACAiqD,EAKN33C,WACE83C,EAAiB7yD,SAAWyI,EACxBoqD,EAAiB5yD,QACjBwI,EACAiqD,EACE,GACA,yBACF,SC/DhB,IAAM76C,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0b,UAAW,CACTzZ,OAAQ,YAIG,SAASizD,KACtB,MAAwB7uD,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0C4G,qBAAWu4C,IAA7CgB,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAGhB3/C,EAAc,kBAAMT,GAAQ,IAElC,OACE,gCACE,cAACuE,EAAA,EAAD,CAAY5B,QAAS,kBALA3C,GAAQ,IAKYqD,KAAK,QAA9C,SACE,cAACqjB,GAAA,EAAD,MAEF,eAAC3jB,GAAA,EAAD,CACEpU,SAAS,KACTqU,WAAS,EACTrV,KAAMA,EACNC,QAAS,kBAAM6S,KACfyH,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,kCACA,cAACC,GAAA,EAAD,UACE,cAAC,GAAD,MAEF,eAAC0B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CACEC,QAAS,WACPlC,IACA2/C,EAAgB,2BACXD,GADU,IAEbH,SAAU,CACRD,IAAK,GACL5wD,KAAM,GACN8wD,QAAS,QARjB,sBAeA,cAACv9C,EAAA,EAAD,CACEvU,MAAM,UACNyU,UAAW,cAAC,KAAD,IACXD,QAAS,kBAAMlC,KACfqC,UAAWq9C,EAAaH,SAAS7wD,KAJnC,kCAcV,IAAMwyD,GAAc,WAClB,IAAMv0D,EAAUR,KAChB,EAA4BuG,mBAAS,IAArC,mBAAOymC,EAAP,KAAeO,EAAf,KACA,EAA4BhnC,mBAAS,IAArC,mBAAO6oB,EAAP,KAAeC,EAAf,KACA,EAA0CrV,qBAAWu4C,IAA7CgB,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAGtB,EAA0Cn5C,aAASkrB,GAAkB,CACnE7vB,UAAW,CAAEgb,KAAM,UAAWsc,YADxBjhC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAQ9B,GAAInH,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAGN,GAAIlG,EACF,OAAO,cAACmG,GAAD,IAGT,IAAQulC,EAAoB18B,EAApB08B,gBAER,OACE,eAAC,WAAD,WACE,eAACtwC,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAAOkL,WAAW,SAAtC,UACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLuoB,YAAY,gDACZtoB,QAAQ,WACRc,SAAU,SAACvD,GAAD,OAAOob,EAAUpb,EAAEC,OAAOxK,QACpC8pC,WA9BW,SAACv/B,GACJ,UAAVA,EAAEiB,KAAiBq4B,EAAUt5B,EAAEC,OAAOxK,QA8BpCA,MAAO0lB,EACPzY,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CAAY5B,QAAS,kBAAMw3B,EAAUne,IAArC,SACE,cAAC0K,GAAA,EAAD,WAMV,cAAC,GAAD,UACE,cAAC2L,GAAD,CAAc/U,KAAK,UAAU1C,OAAO,YAAY9a,QAASA,SAG7D,cAAC4V,GAAA,EAAD,CAAOpS,QAAQ,WAAf,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAWyxB,SAAS,MAApB,yBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,mBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,oBACA,cAACzxB,GAAA,EAAD,CAAWyxB,SAAS,MAApB,+BAGJ,cAACxxB,GAAA,EAAD,UACGuxB,EAAgB5jC,KAAI,SAAC+jC,EAAKhsC,GACzB,OACE,eAACoa,GAAA,EAAD,CAEE4J,OAAK,EACLmB,KAAK,WACL+e,UAAW,EACXh0B,QAAS,kBACPy9C,EAAgB,2BACXD,GADU,IAEbH,SAAS,2BACJG,EAAaH,UADV,IAEN7wD,KAAMsvC,EAAIpN,eACV0uB,IAAKthB,EAAI1nC,UAIf2f,SAAU+nB,EAAIpN,iBAAmB8uB,EAAaH,SAAS7wD,KAfzD,UAiBE,cAAC2d,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIlN,mBAEnB,cAACzkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIjN,kBAEnB,cAAC1kB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAIpN,mBAEnB,cAACvkB,GAAA,EAAD,UACE,cAACze,EAAA,EAAD,UAAaowC,EAAI7M,mBA1Bdn/B,mBCrJV,SAASwvD,GAAT,GAA6C,IAAlBC,EAAiB,EAAjBA,cACxC,EAA4Dt7C,qBAC1Du4C,IADMgB,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAAiBM,EAAvC,EAAuCA,iBAIvCx5C,qBAAU,WACR,MAAyBg7C,EAAc,GAA/B1C,EAAR,EAAQA,MAAOH,EAAf,EAAeA,MACfe,EAAgB,2BAAKD,GAAN,IAAoBX,MAAOA,EAAMnlD,WAAYglD,aAC3D,IAEH,IAAMhpC,EAAe,SAACxV,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACduF,QAAQC,IAAIiF,EAAMzK,GAClB8pD,EAAgB,2BACXD,GADU,kBAEZp/C,EAAOzK,MAIZ,OACE,gCACE,eAACiS,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAAC3a,EAAA,EAAD,CAAKmV,GAAI,EAAT,UACE,cAAC9U,EAAA,EAAD,UACE,8CAAe8xD,EAAaN,OAAO1wD,UAErC,cAAC+Z,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,kBACA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLC,QAAQ,WACRN,WAAS,EACT1M,MAAO6pD,EAAaN,OAAOE,IAC3Bj9C,UAAQ,EACRlQ,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaN,OAAOE,IACvDn3C,WACE83C,EAAiB7yD,SAAWsyD,EAAaN,OAAOE,IAC5CW,EAAiB5yD,QACjB,QAIV,eAACya,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,6BACA,cAACwa,EAAA,EAAD,CAAa7F,WAAS,EAACK,KAAK,QAAQC,QAAQ,WAA5C,SACE,cAACF,EAAA,EAAD,CACEC,KAAK,QACLC,QAAQ,WACRN,WAAS,EACT1M,MAAO6pD,EAAaN,OAAOC,aAC3Bh9C,UAAQ,EACRlQ,MACE8tD,EAAiB7yD,SAAWsyD,EAAaN,OAAOC,aAElDl3C,WACE83C,EAAiB7yD,SAAWsyD,EAAaN,OAAOC,aAC5CY,EAAiB5yD,QACjB,gBAOhB,eAACya,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,eAAC3a,EAAA,EAAD,CAAKmV,GAAI,EAAT,UACE,cAAC9U,EAAA,EAAD,UACE,2CAEF,cAAC6a,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,sBACA,cAAC+U,EAAA,EAAD,CACE9M,MAAO6pD,EAAaH,SAAS7wD,KAC7By8B,YAAY,wBACZ5oB,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRC,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACs+C,GAAD,MAGJj+C,UAAU,EACVjB,UAAU,GAEZlQ,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaH,SAAS7wD,KACzDyZ,WACE83C,EAAiB7yD,SAAWsyD,EAAaH,SAAS7wD,KAC9CuxD,EAAiB5yD,QACjB,QAIV,eAACya,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,UACE,cAACta,EAAA,EAAD,kBACA,cAAC+U,EAAA,EAAD,CACEC,KAAK,QACLC,QAAQ,WACRN,WAAS,EACT1M,MAAO6pD,EAAaH,SAASD,IAC7Bj9C,UAAQ,EACRlQ,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaH,SAASD,IACzDn3C,WACE83C,EAAiB7yD,SAAWsyD,EAAaH,SAASD,IAC9CW,EAAiB5yD,QACjB,iBAQhB,eAACE,EAAA,EAAD,CAAKqW,GAAI,EAAGlB,GAAI,EAAhB,UACE,cAAC9U,EAAA,EAAD,UACE,gDAEF,cAAC6a,GAAA,EAAD,OAEF,eAACX,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,cAACtF,EAAA,EAAD,CACE9M,MAAO6pD,EAAanvB,QACpBpF,YAAY,8BACZ5oB,WAAS,EACTK,KAAK,QACLmN,MAAM,cACNlN,QAAQ,WACRC,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACg+C,GAAD,MAGJ39C,UAAU,EACVjB,UAAU,OAIhB,cAACyF,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,cAACtF,EAAA,EAAD,CACE9M,MAAO6pD,EAAaX,MACpBhvC,MAAM,QACNxN,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRR,UAAQ,EACRlQ,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaX,MAChD52C,WACE83C,EAAiB7yD,SAAWsyD,EAAaX,MACrCkB,EAAiB5yD,QACjB,OAIV,cAACya,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,cAACtF,EAAA,EAAD,CACE9M,MAAO6pD,EAAad,MACpB7uC,MAAM,QACNxN,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRR,UAAQ,EACRlQ,MAAO8tD,EAAiB7yD,SAAWsyD,EAAad,MAChDz2C,WACE83C,EAAiB7yD,SAAWsyD,EAAad,MACrCqB,EAAiB5yD,QACjB,OAIV,cAACya,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,eAACG,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLnO,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaV,UALlD,UAOE,cAACroB,EAAA,EAAD,CAAYnzB,GAAG,YAAf,0BACA,eAAC6E,GAAA,EAAD,CACEwS,QAAQ,YACRhlB,MAAO6pD,EAAaV,UACpB1+C,KAAK,YACLqD,SAAUiS,EACV7F,MAAM,eALR,UAOE,cAACzH,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDsI,GAAUlE,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,SAKX,cAACke,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAaV,UACtCiB,EAAiB5yD,QACjB,UAIV,cAACya,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,eAACG,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLnO,MAAO8tD,EAAiB7yD,SAAWsyD,EAAab,SALlD,UAOE,cAACloB,EAAA,EAAD,CAAYnzB,GAAG,SAAf,oBACA,eAAC6E,GAAA,EAAD,CACEwS,QAAQ,SACRhlB,MAAO6pD,EAAab,SACpBv+C,KAAK,WACLqD,SAAUiS,EACV7F,MAAM,SALR,UAOE,cAACzH,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDwI,GAAWpE,KAAI,SAACsO,EAAKvW,GAAN,OACd,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,SAKX,cAACke,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAab,SACtCoB,EAAiB5yD,QACjB,UAIV,cAACya,GAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GAAIY,GAAI,EAAGb,GAAI,EAA9B,SACE,cAAC,GAAD,YCtPV,IAAMhD,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASu8C,GAAT,GAA8D,EAA1BnnD,MAA2B,IAApBF,EAAmB,EAAnBA,SACxD,GAD2E,EAATrI,MAC1CU,oBAAS,IAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACQ5M,EAAoB0H,EAASa,YAA7BvI,gBAMFqN,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAACuE,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAVL,WACtB3C,GAAQ,IASN,SACE,cAACyX,GAAA,EAAD,MAEF,eAAC1U,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS6S,EACTuC,WAAS,EACTrU,SAAS,KANX,UAQE,cAACsU,GAAA,EAAD,UAAc7P,EAAgB2jB,mBAC9B,eAAC7T,GAAA,EAAD,WACE,eAAClV,EAAA,EAAD,CAAKmV,GAAI,EAAT,UACE,cAACnV,EAAA,EAAD,UACE,cAACK,EAAA,EAAD,UACE,8CAGJ,cAAC6a,GAAA,EAAD,IACA,cAACwD,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOtJ,KAAK,QAAQ,aAAW,gBAA/B,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,oBACA,cAACjI,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,0BACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,gCAGA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,0BAGJ,eAACie,GAAA,EAAD,WACE,eAACF,GAAA,EAAD,CAAU8pB,UAAW,EAArB,UACE,cAAC7pB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC9H,GAAA,EAAD,CACE5J,KAAK,QAGLtC,KAAK,iBAGT,cAAC+L,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,iBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,SACE,cAAC+Z,EAAA,EAAD,CACA7F,WAAS,EACPK,KAAK,QAFP,SAIE,eAACyF,GAAA,EAAD,WAIE,cAACC,GAAA,EAAD,CAAUzS,MAAM,OAAhB,kBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,0BAIN,cAACwW,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,gCAGA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,wBAEF,eAAC+d,GAAA,EAAD,CAAU8pB,UAAW,EAArB,UACE,cAAC7pB,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC9H,GAAA,EAAD,CACE5J,KAAK,QAGLtC,KAAK,iBAGT,cAAC+L,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,0BACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,gCAGA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,mCAMV,cAACd,EAAA,EAAD,UACE,cAACK,EAAA,EAAD,UACE,0CAGJ,cAAC6a,GAAA,EAAD,IACA,cAACwD,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOtJ,KAAK,QAAQ,aAAW,gBAA/B,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,iBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,wBAGJ,cAACie,GAAA,EAAD,UACE,eAACF,GAAA,EAAD,CAAU8pB,UAAW,EAArB,UACE,cAAC7pB,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,qBACA,eAACA,GAAA,EAAD,eACI7S,GAAca,EAASymD,4BAE3B,eAACz0C,GAAA,EAAD,eACI7S,GAAca,EAASwmD,6BAE3B,eAACx0C,GAAA,EAAD,eACI7S,GAAca,EAAS0mD,sCAOrC,eAAC58C,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAASlC,EAAatS,MAAM,UAApC,8BC1IV,IAAMuX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASw8C,GAAT,GAA8D,IAA3BpnD,EAA0B,EAA1BA,MAAOF,EAAmB,EAAnBA,SAAUrI,EAAS,EAATA,MACjE,EAAwBU,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAqD4G,qBAAWu4C,IAAxDmB,EAAR,EAAQA,gBAAiBt7B,EAAzB,EAAyBA,aAAc1pB,EAAvC,EAAuCA,UAC/BlI,EAAoB0H,EAASa,YAA7BvI,gBAMFqN,EAAc,WAClBT,GAAQ,IAGJyiC,EAAY,uCAAG,8DAAA1nC,EAAA,6DACbsnD,EADa,eACKrnD,GAClBsnD,EAFa,aAEShnD,GACpBoC,EAA0D5C,EAA1D4C,eAAgBC,EAA0C7C,EAA1C6C,gBAAiBG,EAAyBhD,EAAzBgD,qBACjCnO,EAAoD0yD,EAApD1yD,IAAKD,EAA+C2yD,EAA/C3yD,KAAM6hB,EAAyC8wC,EAAzC9wC,UAAWytB,EAA8BqjB,EAA9BrjB,SAAUxtB,EAAoB6wC,EAApB7wC,MAAOliB,EAAa+yD,EAAb/yD,SAJ5B,SAMQ4N,GAAiB,CAC1ClB,KAAMlB,EACNvK,SAAUmN,EACV9N,OAAQ+N,EACRP,gBAAgB,EAChBxM,OAAQkN,IAXS,OAMbykD,EANa,OAcnB1mD,QAAQC,IAAIymD,GAEVlmD,EAMEkmD,EANFlmD,WACAC,EAKEimD,EALFjmD,YACAF,EAIEmmD,EAJFnmD,gBACAF,EAGEqmD,EAHFrmD,gBACAC,EAEEomD,EAFFpmD,aACAK,EACE+lD,EADF/lD,gBAGF6lD,EAAW1yD,IAAMA,EAAM0M,EACvBgmD,EAAW3yD,KAAOA,EAAO4M,EACzB+lD,EAAW9wC,UAAYA,EAAYnV,EACnCimD,EAAWrjB,SAAWA,EAAW9iC,EACjCmmD,EAAW7wC,MAAQA,EAAQrV,EAC3BkmD,EAAW/yD,SAAWA,EAAWkN,EAGjC8lD,EAAez0C,OAAOpb,EAAO,GAC7B6tD,EAAgB+B,GAChBr9B,EAAas9B,GACb7hD,IAnCmB,4CAAH,qDAsClB,OACE,gCACE,cAAC8D,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAhDL,WACtB3C,GAAQ,IA+CN,SACE,cAAC,KAAD,MAEF,eAAC+C,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,SAAC44B,EAAGjK,GACI,kBAAXA,GACF9b,KANN,UAUE,cAACwC,GAAA,EAAD,4DACA,cAACC,GAAA,EAAD,UACE,cAACwJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOtJ,KAAK,QAAQ,aAAW,gBAA/B,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,wBAGJ,cAACie,GAAA,EAAD,UACE,eAACF,GAAA,EAAD,CAAU8pB,UAAW,EAArB,UACE,cAAC7pB,GAAA,EAAD,UAAY1Z,EAAgB2jB,mBAC5B,cAACjK,GAAA,EAAD,UAAYhS,EAAS4C,iBACrB,eAACoP,GAAA,EAAD,eACI7S,GAAca,EAASymD,4BAE3B,eAACz0C,GAAA,EAAD,eACI7S,GAAca,EAASwmD,6BAE3B,eAACx0C,GAAA,EAAD,eACI7S,GAAca,EAAS0mD,qCAOrC,eAAC58C,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMlC,KAAetS,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAAS,kBAAM8/B,KAAgBt0C,MAAM,YAA7C,+BChHV,IAAMvB,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASyzD,KACtB,IAAMp1D,EAAUR,KAChB,EAAqCga,qBAAWu4C,IAAxCkB,EAAR,EAAQA,cAAe/kD,EAAvB,EAAuBA,UAEvB,OAAI+kD,GAIJxkD,QAAQC,IAAIukD,GAIV,eAAC3qC,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,YAAxC,UACE,cAACtV,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACE,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,SAApB,iCAEF,cAACoJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACA,eAACC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,mBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,iBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,mBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,qBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,uBAGJ,cAACie,GAAA,EAAD,UACE,eAACF,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACE,cAAC7pB,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,SAAmCuxD,EAAcb,QACjD,eAAC1yC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAcrjD,cAChE,eAAC8P,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAc1wD,QAChE,eAACmd,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAc3wD,SAChE,eAACod,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAcrhB,aAChE,eAAClyB,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAc9uC,cAChE,eAACzE,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,cAAoCmL,GAAcomD,EAAc7uC,UAChE,cAAC1E,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,8BACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,qCAKR,cAACd,EAAA,EAAD,CAAK21C,UAAU,SAASt/B,GAAI,EAA5B,SACE,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,SAApB,kCAEF,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,iBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,kBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,sBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,mBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,uBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,2BAGJ,cAACie,GAAA,EAAD,UACGzR,EAAUZ,KAAI,SAACI,EAAUrI,GACxB,OAAO,cAAC,GAAD,CAAmBuI,MAAOqlD,EAAevlD,SAAUA,EAAsBrI,MAAOA,GAAdA,iBA7D5E,KAsEX,IAAMgwD,GAAoB,SAAC,GAAgC,IAA9BznD,EAA6B,EAA7BA,MAAOF,EAAsB,EAAtBA,SAAUrI,EAAY,EAAZA,MACrCW,EAAkB0H,EAASa,YAA3BvI,gBACP,OACE,eAACyZ,GAAA,EAAD,CAAU8pB,UAAW,EAArB,UACE,cAAC7pB,GAAA,EAAD,UAAY1Z,EAAgB2jB,mBAC5B,cAACjK,GAAA,EAAD,UAAYhS,EAAS4C,iBACrB,eAACoP,GAAA,EAAD,eAAa7S,GAAca,EAASsmD,uBACpC,eAACt0C,GAAA,EAAD,eAAa7S,GAAca,EAASumD,wBACpC,eAACv0C,GAAA,EAAD,eAAa7S,GAAca,EAASymD,4BACpC,eAACz0C,GAAA,EAAD,eAAa7S,GAAca,EAASwmD,6BACpC,eAACx0C,GAAA,EAAD,eAAa7S,GAAca,EAAS0mD,yBACpC,cAAC10C,GAAA,EAAD,UACE,cAACq1C,GAAD,CAA0BnnD,MAAOA,EAAOF,SAAUA,EAAUrI,MAAOA,MAErE,cAACqa,GAAA,EAAD,UACE,cAACs1C,GAAD,CAAyBpnD,MAAOA,EAAOF,SAAUA,EAAUrI,MAAOA,UCnH7DiwD,GAAwB,SAACriD,GACpC,IACEo/C,EAcEp/C,EAdFo/C,UACAH,EAaEj/C,EAbFi/C,SACAzzB,EAYExrB,EAZFwrB,KACA3zB,EAWEmI,EAXFnI,QACAqnD,EAUEl/C,EAVFk/C,iBACAC,EASEn/C,EATFm/C,MACAK,EAQEx/C,EARFw/C,OACAK,EAOE7/C,EAPF6/C,MACAN,EAMEv/C,EANFu/C,SACAF,EAKEr/C,EALFq/C,aACAC,EAIEt/C,EAJFs/C,eACAK,EAGE3/C,EAHF2/C,SACAX,EAEEh/C,EAFFg/C,MACArnD,EACEqI,EADFrI,SAMF,OAHA6D,QAAQC,IAAIuE,GAITo/C,GACAH,GACAzzB,GACA3zB,GACAqnD,GACAC,GACAK,GACAK,GACAN,GACAF,GACAC,GACAK,GACAX,GACArnD,EAOM,GALE,CAAC,CAAClK,QAAS,qBCrClBiS,GAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAElCunD,GAAwB,CACjCtD,MAAO,GACPC,SAAU,MACVC,iBAAkB,GAClBC,MAAO,GACPC,UAAW,IACXC,aAAc,GACdC,eAAgB,GAChBC,SAAU7/C,GAASA,GAAOlR,OAAS,GACnCg9B,KAAM,IACNg0B,OAAQ,CACNC,aAAc//C,GAASA,GAAO7H,QAAQlB,eAAiB,GACvD+oD,IAAKhgD,GAASA,GAAO7H,QAAQnB,IAAM,GACnC5H,KAAM4Q,GAASA,GAAO7H,QAAQpB,cAAgB,IAEhDkpD,SAAU,CACRD,IAAK,GACL5wD,KAAM,GACN8wD,QAAS,IAEXC,MAAO,GACPhoD,QAAS6H,GAASA,GAAO7H,QAAQkI,IAAM,GACvCpI,SAAU+H,GAASA,GAAO/H,SAASoI,IAAM,ICFvCsF,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASg9C,GAAT,GAAwC,IAAbz1D,EAAY,EAAZA,SACxC,EAAwBgG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAgByF,GAAhB,WACA,EAQIgO,qBAAWu4C,IAPbgB,EADF,EACEA,aAEA5oD,GAHF,EAEE6oD,gBAFF,EAGE7oD,eAIAe,GAPF,EAIEmoD,gBAJF,EAKEoC,iBALF,EAMEC,oBANF,EAOExqD,UAGF,EAAuBoI,YAAYtB,IAM7BqB,GANN,oBAMoB,WAClBT,GAAQ,KASJ+iD,EAAY,uCAAG,gCAAAhoD,EAAA,kEAEjBnC,GAAW,GACPoqD,EAHa,eAGI7C,GACf7kD,EAAY,CAChB,CACE2nD,YAAa,WACbC,qBAAsB,2BACtBC,YAAa,WAEbC,SAAU,MACVC,UAAW,KACXC,SAAU,IACVC,SAAU,KACVC,SAAU,MACVC,MAAO,CACL,CACEC,MAAO,OACPv0D,KAAM,MACNw0D,KAAM,OACNC,KAAM,OACNC,YAAa,UAGjBH,MAAO,UAKe,MAAtBvD,EAAat0B,KACfm3B,EAAUn3B,KAAO5Z,OACduoB,SAAS,EAAG,KACZroB,OAAO,uBACqB,MAAtBguC,EAAat0B,KACtBm3B,EAAUn3B,KAAO5Z,OACduoB,SAAS,EAAG,KACZroB,OAAO,uBAEV6wC,EAAUn3B,KAAO5Z,OAASE,OAAO,uBAGnC6wC,EAAU9C,MAAQ5kD,EAClB0nD,EAAUzD,iBAAmBhoD,EAGvBm3B,EAAWg0B,GAAsBM,GAEvCnnD,QAAQC,IAAIknD,IACRt0B,EAAShzB,OAhDI,wBAiDfpD,EAAS,CAAEzK,QAAQ,EAAMC,QAAS4gC,EAAS,GAAG5gC,UAC9C8K,GAAW,GAlDI,2BAqDjBN,EAAS,CAAEzK,QAAQ,EAAOC,QAAS,KAQnC8K,GAAW,GA7DM,kDAqEjBiD,QAAQC,IAAR,MACAD,QAAQC,IAAI,KAAM+L,UAClBjP,GAAW,GACP,KAAMiP,SACR1a,EAAS,CACPW,QAAS,KAAM+Z,SACfha,OAAQ,QACRF,MAAM,IAEC,KAAM6U,aACf3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eAjFH,0DAAH,qDAsFlB,OACE,gCACE,cAACC,EAAA,EAAD,CACEvU,MAAM,UACNyU,UAAW,cAAC,KAAD,IACXS,KAAK,QACLV,QAAS,WAzGb3C,GAAQ,IAqGN,0BAQA,eAAC+C,GAAA,EAAD,CACEpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,kBAAM6S,KACfuC,WAAS,EACTrU,SAAS,KANX,UAQE,cAACuU,GAAA,EAAD,UACE,cAAC,GAAD,MAEF,eAAC0B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMlC,KAAetS,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQE,UAAW,cAACiC,GAAA,EAAD,IAAUlC,QAAS,kBAAMogD,KAAgB50D,MAAM,UAAlE,uCASV,IAAM21D,GAAqB,WAAO,IAAD,EAC/B,EAA4Dl9C,qBAC1Du4C,IADMgB,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAAiBM,EAAvC,EAAuCA,iBAIjCrqC,EAAe,SAACxV,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACduF,QAAQC,IAAIiF,EAAMzK,GAClB8pD,EAAgB,2BACXD,GADU,kBAEZp/C,EAAOzK,MAeZ,OACE,eAACtI,EAAA,EAAD,WACE,eAACA,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,sCACA,eAACwa,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,OACLnO,MAAO8tD,EAAiB7yD,SAAWsyD,EAAat0B,KALlD,UAOE,eAAC/iB,GAAA,EAAD,CAAQxS,MAAO6pD,EAAat0B,KAAM9qB,KAAK,OAAOqD,SAAUiS,EAAxD,UACE,cAACtN,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,wDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,IAAhB,SAAqB2b,OAASE,OAAO,QACrC,cAACpJ,GAAA,EAAD,CAAUzS,MAAM,IAAhB,SACG2b,OAASuoB,SAAS,EAAG,KAAKroB,OAAO,QAEpC,cAACpJ,GAAA,EAAD,CAAUzS,MAAM,IAAhB,SACG2b,OAASuoB,SAAS,EAAG,KAAKroB,OAAO,WAGtC,cAACxB,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAat0B,KACtC60B,EAAiB5yD,QACjB,WAIV,eAACE,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,4BACA,eAACwa,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLnO,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaT,aALlD,UAOE,eAAC52C,GAAA,EAAD,CACExS,MAAO6pD,EAAaT,aACpB3+C,KAAK,eACLqD,SAAUiS,EAHZ,UAKE,cAACtN,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDyI,GAAUrE,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,SAKX,cAACke,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAaT,aACtCgB,EAAiB5yD,QACjB,WAIV,eAACE,EAAA,EAAD,CAAKsW,GAAI,EAAT,UACE,cAACjW,EAAA,EAAD,gCACA,eAACwa,EAAA,EAAD,CACEvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLtC,KAAK,iBACLnO,MAAO8tD,EAAiB7yD,SAAWsyD,EAAaR,eALlD,UAOE,eAAC72C,GAAA,EAAD,CACExS,MAAO6pD,EAAaR,eACpB5+C,KAAK,iBACLqD,SAAUiS,EAHZ,UAKE,cAACtN,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAED0I,GAAWtE,KAAI,SAACsO,EAAKvW,GAAN,OACd,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,SAKX,cAACke,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAaR,eACtCe,EAAiB5yD,QACjB,WAIV,eAACE,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,0BACA,eAACwa,EAAA,GAAD,GACE7F,WAAS,EACTK,KAAK,QACLC,QAAQ,YAHV,oDAKSo9C,EAAiB7yD,SAAWsyD,EAAaH,SAASC,SAL3D,0BAOE,eAACn3C,GAAA,EAAD,CACExS,MAAO6pD,EAAaH,SAASC,QAC7Bl/C,KAAK,UACLqD,SAnHa,SAACvD,GACtB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACd8pD,EAAgB,2BACXD,GADU,IAEbH,SAAS,2BACJG,EAAaH,UADV,kBAELj/C,EAAOzK,QA0GN,UAKE,cAACyS,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEDqI,GAASjE,KAAI,SAACsO,EAAKvW,GAAN,OACZ,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,SAKX,cAACke,GAAA,EAAD,UACG+vC,EAAiB7yD,SAAWsyD,EAAaH,SAASC,QAC/CS,EAAiB5yD,QACjB,OAzBR,WCxQFlB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIJI,GAAaC,sBAAW,SAAoBC,EAAOC,GACvD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASm+C,KACtB,IAAM32D,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAMMS,EAAc,WAClBT,GAAQ,IAGV,OACE,8BACE,eAAC,GAAD,WACE,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS,WAV/B3C,GAAQ,IAUJ,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXgK,GAAI,EAJN,SAME,qBACEwH,IAAI,2EACJmgB,IAAI,gBACJ58B,MAAO,CAAEY,MAAO,SAVtB,0BAgBF,eAACiU,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS,kBAAM6S,KACfyH,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,gCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CAEEvU,MAAM,UACNwU,QAAS,kBAAMlC,KACf4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAAC,GAAD,UACE,cAAC,GAAD,CAAqBqH,YAAaA,cAQ9C,IAAMujD,GAAsB,SAAC,GAAqB,IAAnBvjD,EAAkB,EAAlBA,YAC7B,EAAkEmG,qBAChEu4C,IADMiB,EAAR,EAAQA,gBAAiBK,EAAzB,EAAyBA,gBAAiBqC,EAA1C,EAA0CA,oBAGpC/iD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0BjI,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAEA,EAAiC8Z,aAASzH,GAAgB,CACxD8C,UAAW,CACTtK,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,KAE1B+zB,YAAa,iBALPx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAQvB,GAAI+F,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAIN,GAAIlG,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG3B,IAAQqxD,EAAeriD,EAAKsiD,kBAApBD,WAEJ/B,EAAgB,IACpBA,EAAgB+B,EAAW9lD,QAAO,SAACkhD,GAAD,OAA6B,IAAlBA,EAAM5tD,YAChCiK,SACjBwmD,EAAgB,CAAC,CAAE1C,MAAO,GAAIH,MAAO,KACrCxjD,QAAQC,IAAIomD,IAGd,IAMMiC,EAAe,WALnB/D,EAAgBuC,IAChBG,EAAoB,IACpBrC,EAAgB,IAKhBhgD,KAGF,OACE,eAAC,WAAD,WACE,eAACyC,GAAA,EAAD,WACE,cAACjW,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACxC82D,EAAWvoD,OAET,KADF,cAACyN,GAAA,EAAD,CAAOC,SAAS,UAAhB,+CAEF,cAACpb,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,cAAC29C,GAAD,CAAiBC,cAAeA,MAKlC,cAACM,GAAD,OAGF,eAAC59C,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMwhD,KAAgB9gD,KAAK,QAA5C,sBAGA,cAACu/C,GAAD,CAAiBz1D,SAAUA,WC/J7BuY,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASw+C,GAAT,GAAsC,IAAZtkD,EAAW,EAAXA,QACvC,EAAwB3M,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,CAAEqsD,MAAO,GAAIH,MAAO,GAAI5tD,SAAS,IAApE,mBAAO4O,EAAP,KAAcC,EAAd,KACMP,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA0BjI,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACA,EAA8BgG,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAAyB8H,YAAYrB,IAA9BglD,EAAP,oBAMM5jD,EAAc,WAClBT,GAAQ,GACRM,EAAS,CAAEk/C,MAAO,GAAIH,MAAO,GAAI5tD,SAAS,KAGtC6yD,EAAqB,SAACzjD,GAC1B,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACdgK,EAAS,2BACJD,GADG,kBAELU,EAAOzK,MAYNiuD,EAAc,uCAAG,4BAAAxpD,EAAA,yDAChBsF,EAAMm/C,OAAUn/C,EAAMg/C,MADN,iEAInBzmD,GAAW,GAJQ,SAKEyrD,EAAe,CAClC/hD,UAAW,CACTC,MAAO,CACL88C,MAAOh/C,EAAMg/C,MACbG,MAAOtwC,SAAS7O,EAAMm/C,OACtB/tD,QAAS4O,EAAM5O,QACfyG,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,QAZb,OAKbsB,EALa,OAgBnBvU,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKyiD,eAAev2D,SAC/CD,OAAQ,UACRF,MAAM,IAERmS,IACAlH,GAAW,GACX6H,IAvBmB,kDAyBnB7H,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERkO,QAAQC,IAAR,MACI,KAAM0G,aACR3G,QAAQC,IAAI,KAAM0G,aAAad,QACtB,KAAMe,eACf5G,QAAQC,IAAI,KAAM2G,eAnCD,0DAAH,qDAwCpB,OACE,gCACE,cAACxV,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACa,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEC,QAAS,WArEf3C,GAAQ,IAsEF7R,MAAM,UACNmV,QAAQ,YACRD,KAAK,QACLT,UAAW,cAACC,GAAA,EAAD,IALb,2BAUF,eAACE,GAAA,EAAD,CACEpU,SAAS,KACTqU,WAAS,EACTrV,KAAMA,EACNC,QAAS,kBAAM6S,KACfyH,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,oCACA,eAACC,GAAA,EAAD,WACE,eAAClV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRvC,KAAK,QACLqD,SAAUkgD,SAIhB,eAACt2D,EAAA,EAAD,CAAKc,MAAM,OAAX,UACE,cAACT,EAAA,EAAD,6BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACE,cAACiK,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRvC,KAAK,QACLqD,SAAUkgD,SAIhB,cAACh0C,GAAA,EAAD,CACEpiB,MAAO,CAAEK,UAAW,GACpBgiB,QACE,cAACtD,GAAA,EAAD,CACEC,QAAS7M,EAAM5O,QACf2S,SApGgB,SAACvD,GAC7B,MAA0BA,EAAEC,OAApBC,EAAR,EAAQA,KAAMmM,EAAd,EAAcA,QACd5M,EAAS,2BACJD,GADG,kBAELU,EAAOmM,MAiGEnM,KAAK,YAGTyP,MAAM,4BAGV,eAAC5L,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQE,UAAW,cAAC,KAAD,IAAWD,QAAS,kBAAMlC,KAA7C,sBAGA,cAACiC,EAAA,EAAD,CACEvU,MAAM,UACNyU,UAAWjK,EAAU,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAAS,cAACwB,GAAA,EAAD,IACtD/B,UAAWzC,EAAMg/C,QAAUh/C,EAAMm/C,OAAS7mD,EAC1CgK,QAAS,kBAAM4hD,KAJjB,8BCxIV,IAAM7+C,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0b,UAAW,CACTzZ,OAAQ,QAEVwJ,SAAU,CACRvL,OAAQF,EAAME,OAAOwL,OAAS,EAC9BrK,MAAO,YAII,SAASq2D,GAAT,GAA0D,IAA/BN,EAA8B,EAA9BA,kBAAmBpkD,EAAW,EAAXA,QACrD1S,EAAUR,KAChB,EAA8BuG,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAA0BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KACM4S,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEvC6oD,EAAeC,EAAfD,WACR,EAAgCvjD,YAAYpB,IAArCmlD,EAAP,oBAEMC,EAAiB,uCAAG,WAAOpuD,EAAOsL,GAAd,eAAA7G,EAAA,6DACxBnC,GAAW,GADa,kBAGD6rD,EAAsB,CACzCniD,UAAW,CACT2B,GAAIrC,EAAKxB,IACTlI,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAPR,OAGhBsB,EAHgB,OAUtB5B,IACAlH,GAAW,GACXzL,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAK6iD,sBAAsB32D,SACtDD,OAAQ,UACRF,MAAM,IAERiL,GAAW,GAjBW,kDAmBtBA,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,UACRF,MAAM,IAvBc,0DAAH,wDA4BvB,OACE,eAAC+nB,GAAA,EAAD,CAAOpS,QAAQ,WAAf,UACE,cAACzK,GAAA,EAAD,CAAUtL,UAAWH,EAAQmL,SAAU5K,KAAMgL,EAA7C,SACE,cAACG,EAAA,EAAD,CAAkB3K,MAAM,cAE1B,cAAClB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuf,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAAnB,UACE,cAAC/I,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,6BACA,cAACA,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,2BAGJ,cAAChI,GAAA,EAAD,UACGk3C,EAAWvpD,KAAI,SAAC+jC,EAAKhsC,GACpB,OACE,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACE,cAAC7pB,GAAA,EAAD,UAAY2xB,EAAI4gB,QAChB,cAACvyC,GAAA,EAAD,UAAY2xB,EAAI+gB,QAChB,cAAC1yC,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAAC9H,GAAA,EAAD,CACEC,QAASuxB,EAAIhtC,QACb2S,SAAU,SAACvD,GAAD,OAAO6jD,EAAkB7jD,EAAEC,OAAOoM,QAASuxB,IACrD19B,KAAK,eAGT,cAAC+L,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAAC,GAAD,CACE0pB,IAAKA,EACL3+B,QAASA,EACT3S,SAAUA,QAdmCsF,gBA2BnE,IAAMkyD,GAAmB,SAAC,GAAgC,IAA9BlmB,EAA6B,EAA7BA,IAAK3+B,EAAwB,EAAxBA,QAAS3S,EAAe,EAAfA,SACxC,EAAwBgG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8B7M,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,EAAwB8H,YAAYnB,IAA7BqlD,EAAP,oBAGMnkD,EAAc,kBAAMT,GAAQ,IAE5B6kD,EAAe,uCAAG,4BAAA9pD,EAAA,6DACtBnC,GAAW,GADW,kBAGCgsD,EAAc,CACjCtiD,UAAW,CACT2B,GAAIw6B,EAAIr+B,OALQ,OAGdsB,EAHc,OAQpB5B,IACAlH,GAAW,GACX6H,IACAtT,EAAS,CACPW,QAAQ,cAAD,OAAa4T,EAAOE,KAAKgjD,cAAc92D,SAC9CD,OAAQ,UACRF,MAAM,IAERiL,GAAW,GAhBS,kDAkBpBA,GAAW,GACXzL,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,UACRF,MAAM,IAtBY,0DAAH,qDA2BrB,OACE,eAAC,WAAD,WACE,cAAC4W,EAAA,EAAD,CAAY,aAAW,SAASlB,KAAK,QAAQV,QAAS,kBAhCjC3C,GAAQ,IAgC6C8C,SAAU27B,EAAIhtC,QAAxF,SACE,cAAC,KAAD,MAEF,eAACsR,GAAA,EAAD,CACEpV,KAAMA,EACNC,QAAS,kBAAM6S,KACfyH,oBAAqBxC,GAHvB,UAKE,cAACzC,GAAA,EAAD,sCACA,eAAC2B,GAAA,EAAD,CAAe1W,MAAO,CAAEgL,eAAgB,UAAxC,UACE,cAACwJ,EAAA,EAAD,CAAQE,UAAW,cAAC,KAAD,IAAWD,QAAS,kBAAMlC,KAA7C,sBAGA,cAACiC,EAAA,EAAD,CACEvU,MAAM,YACN2U,SAAUnK,EACViK,UAAWjK,EAAU,cAACG,EAAA,EAAD,CAAkBuK,KAAM,KAAS,cAACwB,GAAA,EAAD,IACtDlC,QAAS,kBAAMkiD,KAJjB,gCC1JJj4D,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJzW,MAAO,SAIL4W,GAAaC,sBAAW,SAAoBC,EAAOC,GACvD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASk/C,KACtB,IAAM13D,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WACtBvyB,GAASrS,IAGX,OACE,gCACE,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACE,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXgK,GAAI,EAJN,SAME,qBACEwH,IAAI,2EACJmgB,IAAI,gBACJ58B,MAAO,CAAEY,MAAO,SAVtB,6BAgBF,eAACiU,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,2CAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CAAQvU,MAAM,UAAUwU,QAAS4vB,EAAiBlvB,KAAK,QAAvD,SACE,cAAC,KAAD,aAKR,cAAC,GAAD,UAMR,IAAM0hD,GAAoB,WACxB,IAAMhlD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAA0C6L,aAASzH,GAAgB,CACjE8C,UAAW,CACTtK,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,KAE1B+zB,YAAa,iBALPx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAQ9B,GAAInH,EACF,OACE,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXpK,OAAO,OAJT,SAME,cAAC+J,EAAA,EAAD,MAIN,GAAIlG,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG3B,IAAQsxD,EAAsBtiD,EAAtBsiD,kBAER,OACE,eAAC57C,EAAA,EAAD,CAAW3Z,SAAS,KAApB,UACE,cAACX,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,cAAC8/C,GAAD,CAAgBtkD,QAASA,MAE3B,cAAC0kD,GAAD,CACEN,kBAAmBA,EACnBpkD,QAASA,QClHXw4B,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAASusB,GAAT,GAAoD,IAAXxtB,EAAU,EAAVA,OAEpD1lC,EAOE0lC,EAPF1lC,QACAggB,EAME0lB,EANF1lB,UACAE,EAKEwlB,EALFxlB,eACAV,EAIEkmB,EAJFlmB,SACAC,EAGEimB,EAHFjmB,UACAC,EAEEgmB,EAFFhmB,MACAlW,EACEk8B,EADFl8B,UAGIq9B,EAAmB,CACvB,CACE7mC,QAASA,EAAQ+nB,eACjB/H,UAAWA,EAAUuf,eACrBrf,eAAgBxY,GAAawY,GAC7BV,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,KAInBonB,EAAqBt9B,EAAUZ,KAAI,SAACY,GACxC,IACER,EAYEQ,EAZFR,SACAmZ,EAWE3Y,EAXF2Y,OACA9lB,EAUEmN,EAVFnN,MACAmC,EASEgL,EATFhL,OACAC,EAQE+K,EARF/K,SACAsoC,EAOEv9B,EAPFu9B,gBACA5nB,EAME3V,EANF2V,eACAE,EAKE7V,EALF6V,iBACAD,EAIE5V,EAJF4V,qBACAI,EAGEhW,EAHFgW,SACAC,EAEEjW,EAFFiW,UACAC,EACElW,EADFkW,MAiBF,MAfyB,CACvB1W,SAAUA,EAAS1H,gBAAgB2jB,iBACnC9C,OAAQA,EAASA,EAAOA,OAAS,MACjC9lB,MAAOA,EAAQA,EAAMA,MAAQ,MAC7BmC,SACAC,WACAsoC,kBACA5nB,iBACAE,mBACAD,uBACAI,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,OAMzB,OACE,cAAC,WAAD,UACE,cAACjJ,GAAA,EAAD,UACE,cAACA,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,eAAC,GAAD,CACE2E,QACE,cAACpf,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNyU,UAAW,cAACk2B,GAAA,EAAD,IAHb,gCASJC,SAAU,oBAZZ,UAcE,eAAC,GAAD,CAAYn3B,KAAM+2B,EAAkB53B,KAAK,iBAAzC,UACE,cAAC,GAAD,CAAayP,MAAM,UAAUla,MAAM,YACnC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,kBAAkBla,MAAM,mBAC3C,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,aAEnC,eAAC,GAAD,CAAYsL,KAAMg3B,EAAoB73B,KAAK,yBAA3C,UACE,cAAC,GAAD,CAAayP,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,SAASla,MAAM,WAClC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,UACjC,cAAC,GAAD,CAAaka,MAAM,SAASla,MAAM,WAClC,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,qBAAqBla,MAAM,oBAC9C,cAAC,GAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,GAAD,CACEka,MAAM,sBACNla,MAAM,qBAER,cAAC,GAAD,CACEka,MAAM,0BACNla,MAAM,yBAER,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,sBC3F/C,IAAM1J,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASiqC,GAAT,GAAoC,IAAXxB,EAAU,EAAVA,OAChCpqC,EAAUR,KACVE,EAAQiyB,eACNzjB,EAAck8B,EAAdl8B,UACR,EAAgCnI,mBAAS,IAAzC,mBAAO2xB,EAAP,KAAiBC,EAAjB,KACA,EAAoD5xB,mBAAS,IAA7D,mBAAO8lC,EAAP,KAA2BC,EAA3B,KAcA,OAVAhyB,qBAAU,WACRgyB,EACE59B,EAAU6C,QAAO,SAACkC,GAChB,OAAOA,EAAMvF,SAAS1H,gBAAgB2jB,iBACnCoiB,cACArS,SAAShC,EAASqU,qBAGxB,CAACrU,EAAUxpB,IAGZ,eAAC,WAAD,WACE,eAACtN,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,UACE,eAACI,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,4CACC5B,EAAO1lB,UAAUuf,kBAEpB,eAAChjC,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,UACE,0CACC5B,EAAO1lC,QAAQ+nB,kBAElB,cAACxrB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,4CAAe5B,EAAOlmB,cAExB,cAACjjB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,6CAAgB5B,EAAOjmB,eAEzB,cAACljB,EAAA,EAAD,CAAYH,MAAO,CAAEkrC,YAAa,IAAlC,SACE,yCAAY5B,EAAOhmB,cAGvB,cAACxjB,EAAA,EAAD,CAAKmV,GAAI,EAAGlV,QAAQ,OAApB,SACE,eAACsa,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,cAACvF,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZxnB,SAAU,SAACvD,GAAD,OAzCGvK,EAyCoBuK,EAAEC,OAAOxK,MAzCnByuB,EAAYzuB,GAAvB,IAACA,GA0CbiN,WAAY,CACVotB,eACE,cAACltB,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAAC,KAAD,CAAoBvV,MAAM,kBAMpC,cAACoa,GAAA,EAAD,CAAME,MAAI,EAACc,GAAI,EAAGZ,GAAI,GAAtB,SACE,cAACq8C,GAAD,CAA+BxtB,OAAQA,WAI7C,cAAC9hB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACE,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,yBAGJ,cAACC,GAAA,EAAD,UACGksB,EAAmBv+B,KAAI,SAAC2F,EAAO5N,GAC9B,OACE,eAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACE,cAAC7pB,GAAA,EAAD,UACGzM,EAAMvF,SAAS1H,gBAAgB2jB,mBAElC,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAM4T,QAAU5T,EAAM4T,OAAOA,OAAS5T,EAAM4T,OAAOA,OAAS,QAE/D,cAACnH,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACG1U,EAAMlS,OAASkS,EAAMlS,MAAMmpB,IAC1B,cAACN,GAAA,EAAD,CACExG,MAAOnQ,EAAMlS,MAAMA,MACnBkV,KAAK,QACLnV,MAAO,CACLuK,gBAAiB4H,EAAMlS,MAAMmpB,IAC7BnpB,MAAOrB,EAAM2nB,QAAQoL,gBACnBxf,EAAMlS,MAAMmpB,QAKlB,QAGJ,cAACxK,GAAA,EAAD,UAAYzM,EAAM/P,SAClB,cAACwc,GAAA,EAAD,UAAYzM,EAAM9P,WAClB,cAACuc,GAAA,EAAD,UAAYzM,EAAM0Q,kBAClB,cAACjE,GAAA,EAAD,UAAYzM,EAAM4Q,iBAClB,cAACnE,GAAA,EAAD,qBAAgBzM,EAAM8Q,iBAAtB,eAA6C9Q,EAAM6Q,wBACnD,cAACpE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMiR,eAE3B,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMkR,gBAE3B,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcoG,EAAMmR,cAnCM/e,kBCtFrD,IAAM7F,GAAYC,YAAW,CAC3BunB,KAAM,CACJtlB,MAAO,QAET0Z,UAAW,CACTzZ,OAAQ,UAIG,SAASk2D,GAAT,GAAsD,IAA7B3rB,EAA4B,EAA5BA,yBAChClsC,EAAUR,KAEhB,OACE,cAAC8oB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAAM9Q,QAAQ,WAAxC,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,sBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,8BACA,cAACA,GAAA,EAAD,uBACA,cAACA,GAAA,EAAD,wBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,6BAGJ,cAACC,GAAA,EAAD,UACGusB,EAAyB5+B,KAAI,SAAC88B,EAAQ/kC,GAAT,OAC5B,cAAC,GAAD,CAA+B+kC,OAAQA,GAAf/kC,eAStC,IAAM8mC,GAAoB,SAAC,GAAgB,IAAd/B,EAAa,EAAbA,OAEzB1lC,EAME0lC,EANF1lC,QACAggB,EAKE0lB,EALF1lB,UACAE,EAIEwlB,EAJFxlB,eACAV,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAGF,OACE,eAAC3E,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACE,cAAC7pB,GAAA,EAAD,UAAYhb,EAAQ+nB,iBACpB,cAAC/M,GAAA,EAAD,UAAYgF,EAAUuf,iBACtB,cAACvkB,GAAA,EAAD,UAAYtT,GAAawY,KACzB,cAAClF,GAAA,EAAD,UACE,kCAAK7S,GAAcqX,QAErB,cAACxE,GAAA,EAAD,UACE,kCAAK7S,GAAcsX,QAErB,cAACzE,GAAA,EAAD,UACE,kCAAK7S,GAAcuX,QAErB,cAAC1E,GAAA,EAAD,UACE,cAAC,GAAD,CAAgB0qB,OAAQA,UAM1B9xB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvC4zB,GAAiB,SAAC,GAAgB,IAAdhC,EAAa,EAAbA,OACxB,EAAwBrkC,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMy5B,EAAa,WACjBz5B,GAASrS,IAEX,OACE,eAAC,WAAD,WACE,cAAC4W,EAAA,EAAD,CAAY5B,QAAS,kBAAM82B,KAA3B,SACE,cAACC,GAAA,EAAD,MAEF,eAAC32B,GAAA,EAAD,CACEpV,KAAMA,EACNC,QAAS6rC,EACTz2B,WAAS,EACTrU,SAAS,KACTuZ,oBAAqBxC,GALvB,UAOE,cAACzC,GAAA,EAAD,UACE,eAACjV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAACI,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAAEq4B,SAAU,GAA5C,6BAGA,cAAC7jB,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNwU,QAAS82B,EACTp2B,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,aAIpC,cAAC8J,GAAA,EAAD,UACE,cAAC,GAAD,CAAes0B,OAAQA,MAEzB,cAAC5yB,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CACEY,QAAQ,OACRnV,MAAM,UACNkV,KAAK,QACLT,UAAW,cAACiC,GAAA,EAAD,IACXlC,QAAS,kBAAM82B,KALjB,8BCjIJnB,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAASkB,GAAT,GAIX,IAHFL,EAGC,EAHDA,yBACAM,EAEC,EAFDA,OACAC,EACC,EADDA,YAEMC,EAAUR,EAAyB5+B,KAAI,SAAC88B,GAC5C,IACE1lC,EAME0lC,EANF1lC,QACAggB,EAKE0lB,EALF1lB,UACAE,EAIEwlB,EAJFxlB,eACAV,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAWF,MATyB,CACvB1f,QAASA,EAAQ+nB,eACjB/H,UAAWA,EAAUuf,eACrBrf,eAAgBxY,GAAawY,GAC7BV,SAAUrX,GAAcqX,GACxBC,UAAWtX,GAAcsX,GACzBC,MAAOvX,GAAcuX,OAMrBuoB,EAAmB,GAWvB,OAVIH,GAAUC,EAAYpgC,MACxBsgC,EAAgB,iDAA6CF,EAAYG,MAAzD,4BAAkFJ,GACzFA,IAAWC,EAAYpgC,MAChCsgC,EAAgB,oDAAgDH,IACtDA,GAAUC,EAAYpgC,MAChCsgC,EAAgB,iDAA6CF,EAAYG,OAC/DJ,GAAWC,EAAYpgC,QACjCsgC,EAAgB,+BAIhB,cAAC,WAAD,UACE,cAACxxB,GAAA,EAAD,UACE,cAACA,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,GAAD,CACE2E,QACE,cAACpf,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAnC,SACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNyU,UAAW,cAACk2B,GAAA,EAAD,IAHb,gCASJC,SAAUgB,EAZZ,SAcE,eAAC,GAAD,CAAYn4B,KAAMk4B,EAAS/4B,KAAMg5B,EAAjC,UACE,cAAC,GAAD,CAAavpB,MAAM,UAAUla,MAAM,YACnC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,kBAAkBla,MAAM,mBAC3C,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,qBC5C/C,IAAM1J,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAERC,KAAM,CACJnM,SAAU,KAEZgS,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGV8gB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIJkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASq0B,KACtB,IAAM7sC,EAAUR,KAChB,EAAwB4I,IAAMrC,UAAS,GAAvC,mBAAOxF,EAAP,KAAaqS,EAAb,KAMMS,EAAc,WAClBT,GAAQ,IAGV,OACE,gCACE,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAVE,WACtB3C,GAAQ,IASN,SACE,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAACnL,EAAA,EAAD,CACEC,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXgK,GAAI,EAJN,SAME,qBACEwH,IAAI,2EACJmgB,IAAI,gBACJ58B,MAAO,CAAEY,MAAO,WAXxB,wBAkBF,eAACiU,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS6S,EACTyH,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,8BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAASlC,EACT4C,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAACkP,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACE,cAAC,GAAD,YAOV,IAAMurC,GAAuB,WAC3B,IAAMn6B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,mBAAS,IAArC,mBAAOymC,EAAP,KAAeO,EAAf,KACA,EAAsChnC,mBAAS,CAAEsG,MAAO,GAAIugC,MAAO,UAAnE,mBAAOH,EAAP,KAAoBO,EAApB,KACMC,EAAerkB,iBAAO,MACtBskB,EAAatkB,iBAAO,MAG1B,EAA0C/O,aACxCyrB,GACA,CACEpwB,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B3G,MAAOogC,EAAYpgC,OAErB06B,YAAa,iBARTx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAY9B,GAAInH,EACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,yBAGN,GAAI1Q,EACF,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,EAAOoG,OAAQ,MAG1C,IAAIsgC,EAA2B,GAC3B13B,IAAM03B,EAA2B13B,EAAK03B,0BA6E1C,OACE,eAAC,WAAD,WACE,cAACtrC,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,eAACiE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,sBAAMgU,SAAU,SAAC9b,GAAD,OAhFF,SAACA,EAAGvK,GAC1BuK,EAAE6D,iBACF5E,EAAQ,CAAE85B,OAAQtjC,EAAOmD,MAAOogC,EAAYpgC,QAC5C0gC,EAAU7jC,GA6EqBikC,CAAgB15B,EAAGA,EAAEC,OAAO,GAAGxK,QAAtD,SACE,cAAC8M,EAAA,EAAD,CACEwT,SAAUyjB,EACVr3B,WAAS,EACTK,KAAK,QACLC,QAAQ,WACRsoB,YAAY,uBACZroB,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,cAACa,EAAA,EAAD,CAAYJ,KAAK,SAAShW,MAAM,UAAUkV,KAAK,SAA/C,SACE,cAAC,KAAD,eAQd,cAACkF,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,eAACE,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,UACE,cAAC+zB,EAAA,EAAD,CAAYnzB,GAAG,4BAAf,8BAGA,eAAC6E,GAAA,EAAD,CACE8N,SAAU0jB,EACVhf,QAAQ,4BACRhlB,MAAOujC,EAAYG,MACnB51B,SAAU,SAACvD,GAAD,OA3FH,SAACvK,GACpB,OAAQA,GACN,IAAK,SACH8jC,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,YACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,QACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,UACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,IAAK,WACHioB,EAAe,CACbJ,MAAO1jC,EACPmD,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WAEnCrS,EAAQ,CAAE85B,SAAQngC,MAAOwY,OAASuoB,SAAS,EAAG,KAAKroB,WACnD,MACF,QACEioB,EAAe,CAAEJ,MAAO,QAASvgC,MAAO,KACxCqG,EAAQ,CAAE85B,SAAQngC,MAAO,MAsCAghC,CAAa55B,EAAEC,OAAOxK,QACvCka,MAAM,mBALR,UAOE,cAACzH,GAAA,EAAD,CAAUzS,MAAM,QAAhB,SACE,uDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,4BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,YAAhB,4BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,0BACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,mCAIN,cAACiS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGC,GAAI,GAAtB,SACE,cAAC,GAAD,CACE2wB,yBAA0BA,EAC1BM,OAAQA,EACRC,YAAaA,WAKpBD,GAAUC,EAAYpgC,MACrB,eAACzL,EAAA,EAAD,CAAKC,QAAQ,OAAOkV,GAAI,EAAxB,UACE,cAAC9U,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BACA,cAACtV,EAAA,EAAD,CAAKI,GAAI,IACRwrC,EACC,cAAC5iB,GAAA,EAAD,CACE1T,QAAQ,WACRD,KAAK,SACLmN,MAAOopB,EACPc,SAxIe,WACzB56B,EAAQ,CAAE85B,OAAQ,GAAIngC,MAAOogC,EAAYpgC,QACzC0gC,EAAU,IACVE,EAAaM,QAAQrkC,MAAQ,MAuInB,KACJ,cAACtI,EAAA,EAAD,CAAKyiB,GAAI,IACRopB,EAAYpgC,MACX,cAACud,GAAA,EAAD,CACE1T,QAAQ,WACRD,KAAK,SACLmN,MAAK,qBAAgBqpB,EAAYG,OACjCU,SA5Ic,WACxB56B,EAAQ,CAAE85B,SAAQngC,MAAO,KACzB2gC,EAAe,CAAEJ,MAAO,QAASvgC,MAAO,KACxC6gC,EAAWK,QAAQrkC,MAAQ,WA2IjB,QAEJ,KAEJ,cAAC,GAAD,CAAcgjC,yBAA0BA,QCpT/B,SAAS4rB,KACpB,OACI,8BACI,cAAC58C,EAAA,EAAD,UACI,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,UACI,cAACtC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAAC4qD,GAAD,QAGR,cAACx7C,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAAC,GAAD,QAQR,cAACoP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAAC2rD,GAAD,eCN5B,IAAMl4D,GAAYC,YAAW,CACzBynB,MAAO,CACL3F,SAAU,KAEfyF,KAAM,CACLtlB,MAAO,UAID25C,GAAU,CACjB,CAAExkC,GAAI,EAAGuM,MAAO,SAAU7B,SAAU,KACpC,CAAE1K,GAAI,EAAGuM,MAAO,YAAa7B,SAAU,KACvC,CAAE1K,GAAI,EAAGuM,MAAO,WAAY7B,SAAU,KACtC,CAAE1K,GAAI,EAAGuM,MAAO,QAAS7B,SAAU,KACnC,CAAE1K,GAAI,EAAGuM,MAAO,eAAgB7B,SAAU,KAC1C,CAAE1K,GAAI,EAAGuM,MAAO,eAAgB7B,SAAU,KAC1C,CAAE1K,GAAI,EAAGuM,MAAO,gBAAiB7B,SAAU,KAC3C,CAAE1K,GAAI,EAAGuM,MAAO,UAAW7B,SAAU,KACrC,CAAE1K,GAAI,EAAGuM,MAAO,YAAa7B,SAAU,GAAItV,MAAO,SAClD,CAAE4K,GAAI,GAAIuM,MAAO,YAAa7B,SAAU,GAAItV,MAAO,SACnD,CAAE4K,GAAI,GAAIuM,MAAO,SAAU7B,SAAU,GAAItV,MAAO,SAChD,CAAE4K,GAAI,GAAIuM,MAAO,OAAQ7B,SAAU,GAAItV,MAAO,SAC9C,CAAE4K,GAAI,GAAIuM,MAAO,SAAU7B,SAAU,GAAItV,MAAO,SAChD,CAAE4K,GAAI,GAAIuM,MAAO,WAAY7B,SAAU,GAAItV,MAAO,UAGpC,SAAS8rD,KAAgB,IAAD,EAE7B/3D,EAAUR,KACnB,EAA0B4I,IAAMrC,SAAS,GAAzC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCpoC,IAAMrC,SAAS,IAAvD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACQ5oC,EAAW0R,qBAAW+S,IAAtBzkB,OACC6K,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAElD,EAA0C6L,aAASmT,GAAkB,CACpE9X,UAAW,CACV2B,GAAIlE,EAAO/H,SAASoI,OAFdzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAM9BoH,qBACC,WACCpH,MAED,CAAE5K,EAAQ4K,IAYX,GAAInH,EACH,OACC,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGH,GAAIlG,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAG1B,IAAQg6B,EAAqBhrB,EAArBgrB,iBAIL,OACF,eAAClX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgB7I,UAAW6R,KAA3B,SACC,eAAC/I,GAAA,EAAD,CAAOpf,UAAWH,EAAQknB,MAAO,aAAW,eAA5C,UACC,cAAC1H,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAzC,SACEsvC,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,iBACE6f,QADF,IACEA,GADF,UACEA,EACE4R,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,UAFnD,aACE,EAEEnjC,KAAI,SAAC+jC,EAAKhsC,GACX,OAAO,cAAC,GAAD,CAAwB4N,MAAOo+B,GAAdhsC,aAK7B,cAACisC,GAAA,EAAD,CACCC,mBAAoB,GACpB96B,UAAU,MACVmwB,MAAOpH,EAAiBlxB,OACxBmiC,YAAaA,EACbF,KAAMA,EACNiB,aAnDsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAmDNC,oBAhD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SAoDV,IAAMwB,GAAa,SAAC,GAAe,IAAb/+B,EAAY,EAAZA,MAErB,OACC,eAACwM,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMwZ,mBAEpB,cAAC/M,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAcgS,EAAMyZ,qBAAyCzZ,EAAMyZ,qBAAqB5C,OAA7C,oBAE5C,cAACpK,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMgb,YAAYI,oBAEhC,cAAC3O,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUC,MAAQiJ,EAAMlJ,UAAUC,MAAQ,OAE9D,cAAC0V,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUE,OAASgJ,EAAMlJ,UAAUE,OAAS,OAEhE,cAACyV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUG,OAAS+I,EAAMlJ,UAAUG,OAAS,OAEhE,cAACwV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUI,cAAgB8I,EAAMlJ,UAAUI,cAAgB,OAE9E,cAACuV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUK,QAAU6I,EAAMlJ,UAAUK,QAAU,OAElE,cAACsV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUM,UAAY4I,EAAMlJ,UAAUM,UAAY,OAEtE,cAACqV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUO,UAAY2I,EAAMlJ,UAAUO,UAAY,OAEtE,cAACoV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUQ,OAAS0I,EAAMlJ,UAAUQ,OAAS,OAEhE,cAACmV,GAAA,EAAD,UACC,cAACze,EAAA,EAAD,UAAagS,EAAMlJ,UAAUS,KAAOyI,EAAMlJ,UAAUS,KAAO,OAE5D,cAACkV,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAAC6rB,GAAD,CAA0BC,OAAO,aAAava,MAAOA,MAEtD,cAACyM,GAAA,EAAD,CAAWhe,MAAO,GAAlB,SACC,cAACyV,EAAA,EAAD,CAAYpW,MAAM,YAAlB,SACC,cAACm9B,GAAA,EAAD,YCvKC1+B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRnM,SAAU,SAINsM,GAAaC,sBAAW,SAAoBC,EAAOC,GACxD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASw/C,KACpB,IAAMh4D,EAAUR,KACnB,EAA0B4I,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAMMS,EAAc,WACnBT,GAAQ,IAGN,OACI,8BACL,eAAC,GAAD,WACC,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAXG,WACvB3C,GAAQ,IAUN,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,KAAD,CAAQ5L,UAAWH,EAAQmY,SAF7B,uBAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,6BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,WAAzC,SACC,cAACyhB,GAAD,CAA0BC,OAAO,gBAElC,cAAC5sB,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAAC00C,GAAD,c,kCCjES,OAA0B,oC,uCCE5BE,GAA0BryD,0BAE1BsyD,GAAoB,SAAC,GAAkB,IAAhBpyD,EAAe,EAAfA,SAGhC,EAA8BC,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KACA,EAA4BhC,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA0CnF,oBAAS,GAAnD,mBAAQ8mB,EAAR,KAAsBC,EAAtB,KACA,EAAoC/mB,mBAAS,IAA7C,mBAAQmI,EAAR,KAAmB0pB,EAAnB,KACA,EAAwC7xB,mBAAS,IAAjD,mBAAQoyD,EAAR,KAAqBC,EAArB,KACC,EAA8CryD,mBAAS,IAAvD,mBAAQsyD,EAAR,KAAwBC,EAAxB,KACD,EAA4CvyD,mBAAS,IAArD,mBAAQwyD,EAAR,KAAuBC,EAAvB,KAIH,OACC,cAACP,GAAwBhvD,SAAzB,CAAkCC,MACxB,CAEIpB,SACAC,YACAvC,QACA0F,WACA2hB,eACAC,kBACA5e,YACA0pB,eACA2gC,gBACAC,mBACAL,cACAC,iBACAC,iBACAC,qBAhBd,SAmBExyD,KCFE6gB,GAAkB,SAAChZ,EAAGiZ,GAC1B,GAAIjZ,EAAEkZ,OAAOC,OAASF,EAAEC,OAAOC,MAC7B,OAAOnZ,EAAEkZ,OAAOC,MAAMC,cAAcH,EAAEC,OAAOC,QAI3CtnB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJtlB,MAAO,QAETulB,MAAO,CACLvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE9B8lB,MAAO,CACL3F,SAAU,KAEZnG,UAAW,CACT5Z,UAAW,QAEb2lB,SAAU,CACR,uCAAwC,CACtC9b,gBAAiB81C,gBAAKzhD,EAAM2nB,QAAQC,QAAQC,KAAM,MAGtDC,eAAgB,CACdlL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,GAETmmB,eAAgB,CACdvL,OAAQ,4BACR3a,OAAQ,GACRD,MAAO,GACP6a,aAAc,WAIH,SAASuL,GAAT,GAKX,IAJF7U,EAIC,EAJDA,MACA+U,EAGC,EAHDA,YACAC,EAEC,EAFDA,SACAwwC,EACC,EADDA,eAGMz4D,EAAUR,KAGX4oB,EAAyB,aAAInV,GAAOoV,MAAK,SAAC1a,EAAGiZ,GAAJ,OAC5CD,GAAgBhZ,EAAGiZ,MAGrB,OACE,qBAAKzmB,UAAWH,EAAQgnB,KAAxB,SACE,cAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,SACE,cAAC3H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CACEpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,QACL,aAAW,iBACXsS,cAAY,EALd,UAOE,cAAC/I,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,yBACA,cAACA,GAAA,EAAD,kCACA,cAACA,GAAA,EAAD,CAAWhe,MAAO,IAAlB,oBACA,cAACge,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,oBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,mBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,oBAOA,cAAC,WAAD,UACE,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,wBAEF,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,yBAGJ,cAAChI,GAAA,EAAD,UACGyI,EAAuB9a,KAAI,SAACI,EAAUrI,GACrC,OACE,cAAC,GAAD,CAEEqI,SAAUA,EACVrI,MAAOA,EACP4N,MAAOA,EACPwlD,eAAgBA,EAChBzwC,YAAaA,EACbC,SAAUA,GANL5iB,iBAkBzB,IAAMmjB,GAA2B,SAAC,GAU3B,IATL9a,EASI,EATJA,SACArI,EAQI,EARJA,MACA4N,EAOI,EAPJA,MACAwlD,EAMI,EANJA,eAEAzwC,GAII,EALJD,KAKI,EAJJC,aACAC,EAGI,EAHJA,SAOA,GAJI,EAFJC,aAEI,EADJC,UAK0CpiB,oBAAS,IAAnD,mBAAO0iB,EAAP,KAAsBC,EAAtB,KACM1oB,EAAUR,KACVmpB,EAAYC,iBAAO,MAEnBC,EAAsB,aAAI5V,GAAOoV,MAAK,SAAC1a,EAAGiZ,GAAJ,OAC1CD,GAAgBhZ,EAAGiZ,MAEfkC,EAAyB,eAAQD,EAAoBxjB,IAGrD0jB,EAAsC,GACtCC,EAAa,eAAQtb,GAsBrBub,EAAe,SAACxV,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACd,GAAa,aAATyK,EAAqB,CACvB,IAAKzK,EAKH,OAJA4f,EAA0BjC,OAAO1jB,SAAW,GAC5C2lB,EAA0BjC,OAAOqC,YAAa,EAC9CL,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC2vC,EAAeA,GAGjB3vC,EAA0BjC,OAAO1jB,SAAW4J,WAAW7D,GACvD4f,EAA0BjC,OAAOqC,YAAa,OACzC,GAAa,kBAATvV,EAA0B,CACnC,IAAKzK,EAKH,OAJA4f,EAA0B4vC,cAAgB,GAC1C5vC,EAA0BjC,OAAOqC,WAAaF,EAAcnC,OAAOqC,WACnEL,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC2vC,EAAe5vC,GAGjBC,EAA0B4vC,cAAgB3rD,WAAW7D,GACrD4f,EAA0BjC,OAAOqC,YAAa,OACzC,GAAa,WAATvV,EAAmB,CAC5B,IAAKzK,EAIH,OAHA4f,EAA0BjC,OAAOrjB,OAAS,EAC1CqlB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC2vC,EAAe5vC,GAGjB,GAAGC,EAA0BjC,OAAOlX,mBAA0E,IAAtDmZ,EAA0BjC,OAAOlX,iBAA0B,CACjH,IAAI0R,EAAuB7C,KAAKC,MAC7BvV,EAAQ4f,EAA0BjC,OAAOjX,UAAU8O,UAAa,KAEnEqK,EAAoClC,OAAOxF,qBAAuBtU,WAAWsU,GAC7EyH,EAA0BjC,OAAOrjB,OAASuJ,WAAW7D,GACrD4f,EAA0BjC,OAAOjX,UAAYmZ,OAE7CD,EAA0BjC,OAAOrjB,OAASuJ,WAAW7D,QAGlD,GAAa,cAATyK,EAiBRmV,EAA0BjC,OAAOjX,UAAY1G,MAG3C,CACH,IAAKA,EAIH,OAHA4f,EAA0BjC,OAAOtjB,cAAgB,GACjDslB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC2vC,EAAe5vC,GAGjBC,EAA0BjC,OAAOtjB,cAAgB2F,EAElD2f,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACtC2vC,EAAe5vC,IAGX9J,EAAkB,WACtB,IACMR,EAAM,KACNhb,EAAgBib,KAAKK,MACzB,KAAAL,KAAKM,SAA6BP,GAClCtR,WACF6b,EAA0BjC,OAAOtjB,cAAgBA,GAK7C6lB,EAAe,WACdX,GAMHC,GAAkBD,GAElBT,EAAY,GAAD,oBAAKC,GAAL,CAAe5iB,OA5GvB2jB,EAAcnC,OAAO1jB,WACxB2lB,EAA0BjC,OAAO1jB,SAAW,GAEzC6lB,EAAc0vC,gBACjB5vC,EAA0B4vC,cAAgB,GAEvC1vC,EAAcxlB,SACjBslB,EAA0BtlB,OAASwlB,EAAcxlB,QAGlDqlB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACtC2vC,EAAe5vC,GACfH,GAAiB,GA2FfT,EAASxH,OAAOwH,EAAS3Z,OAAS,EAAG,GACrC0Z,EAAY,aAAIC,MAcpB,OACE,eAACxI,GAAA,EAAD,CAAU4J,OAAK,EAACC,UAAWb,EAAetoB,UAAWH,EAAQmnB,SAA7D,UACE,cAACzH,GAAA,EAAD,CAAWzT,MAAM,SAAS0b,QAAQ,WAAlC,SACE,cAAC9H,GAAA,EAAD,CAAUC,QAASkJ,EAAcnC,OAAOqC,WAAYnoB,MAAM,cAE5D,cAAC2e,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACE,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACE,cAAC0oB,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAE9BvK,MAAO8f,EAAcnC,OAAOtjB,cAC5BwT,KAAK,SACLpD,KAAK,gBACL+B,YACEzC,EAAMqe,qBAAwBtI,EAAcnC,OAAO4C,QAE/ChB,KAGNxV,EAAMqe,qBAAuBtI,EAAcnC,OAAO4C,OAQhDxW,EAAMqe,qBAAuBtI,EAAcnC,OAAO4C,MAPpD,cAACtS,EAAA,EAAD,CACEpW,MAAM,UACNkV,KAAK,QACLV,QAAS,kBAAMwJ,KAHjB,SAKE,cAAC2K,GAAA,EAAD,MAUA,UAGR,cAAChK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SAAwBsnB,EAAcnC,OAAO8C,mBAC7C,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACGqB,EAAcnC,OAAOA,OAAO7T,IAC3B,cAAC4W,GAAA,EAAD,CAAMxG,MAAO4F,EAAcnC,OAAOA,OAAOC,MAAO/lB,MAAM,YAEtD,KAGJ,cAAC2e,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACGqB,EAAcnC,OAAO9lB,MAAMiS,IAC1B,cAAC6W,GAAA,EAAD,CACE7R,MAAOgR,EAAcnC,OAAO9lB,MAAM+oB,OAClCC,UAAU,MACVC,OAAK,EACLlP,oBAAqBmP,KAJvB,SAME,qBACE9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACLuK,gBAAiB2d,EAAcnC,OAAO9lB,MAAMmpB,SAIhD,OAIH,eAAC,WAAD,WACG,cAACxK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACE,cAAC6nB,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAcnC,OAAOrjB,OAC5BuT,KAAK,MACLpD,KAAK,aAcT,cAAC+L,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC4B,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAc0vC,cACrB3hD,KAAK,MACLpD,KAAK,uBAKf,cAAC+L,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAACxQ,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAAS,kBAAM6T,KAAxC,SACIX,EAA4B,cAAC4B,GAAA,EAAD,IAAZ,cAAC,KAAD,YCjXtB7qB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCmoB,eAAgB,CACdvL,OAAQ,4BACRzb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZpK,OAAQ,GACRD,MAAO,GACPR,OAAQ,EACRqb,aAAc,MACd4T,OAAQ,eAKNpR,GAAkB,WACtB,OAAOP,KAAKK,MACV,KAAAL,KAAKM,SAA+C,MACpD7R,YAOW,SAASmjB,GAAT,GAMX,IALF1iB,EAKC,EALDA,SACAirD,EAIC,EAJDA,YACAF,EAGC,EAHDA,eACApoC,EAEC,EAFDA,yBACA3d,EACC,EADDA,QAGG,EAA8C3M,mBAAS,IAAvD,mBACD,GADC,UACuDA,mBAAS,KAAjE,mBAAO0qB,EAAP,KAA6BV,EAA7B,KACA,EAAwDhqB,mBAAS,IAAjE,mBAAO2qB,EAAP,KAA6BC,EAA7B,KAGA,EAAgC5qB,mBAAS,IAAzC,mBAAOkiB,EAAP,KAAiBD,EAAjB,KAGI6I,GAFoBrX,qBAAWy+C,IAA5BM,cAE0Bv7C,uBAAY,WAC7C,IAAI8T,EAAS,GACTF,EAAU,GAEW,aAAQ+nC,GAMb5nC,SAAQ,SAAC/Q,GAEvBA,EAAQ6G,OAAO9lB,MAAMiS,KAAK8d,EAAO5Q,KAAKF,EAAQ6G,OAAO9lB,OACrDif,EAAQ6G,OAAOA,OAAO7T,KAAK4d,EAAQ1Q,KAAKF,EAAQ6G,OAAOA,WAG7D,IAAImK,EAAY,GACZC,EAAa,GACXC,EAAqBJ,EAAO/f,QAAO,SAAChQ,GACxC,IAAIowB,GAAcH,EAAUjwB,EAAMiS,KAElC,OADAge,EAAUjwB,EAAMiS,MAAO,EAChBme,KAEHC,EAAqBR,EAAQ7f,QAAO,SAAC8V,GACzC,IAAIwK,GAAeJ,EAAWpK,EAAO7T,KAErC,OADAie,EAAWpK,EAAO7T,MAAO,EAClBqe,KAGTV,EAAwB,aAAIO,IAC5BnB,EAAwB,aAAIqB,MAG3B,CAACunC,EAAYhoC,EAAyBZ,KAQzC,OAJAjW,qBAAU,WACR+W,MACC,CAACA,IAGD,8BACE,eAACjwB,EAAA,EAAD,CAAKqvD,aAAa,SAASh1C,EAAG,EAA9B,UACC,eAACE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UA2BE,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,eAAC1a,EAAA,EAAD,CACEc,MAAM,OACNZ,MACEmnB,EAAS3Z,OAAS,EACd,CACEkjB,cAAe,OACfC,QAAS,IAEX,KARR,UAWE,eAAC7wB,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC9K,EAAA,EAAD,UAC8C,SAA3CyM,EAAS1H,gBAAgBslB,cACtB,QACA,cAEN,cAAC1qB,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAACyM,GAAD,CACEC,wBAAyBA,EACzBrd,QAASA,OAGiC,SAA3ChF,EAAS1H,gBAAgBslB,mBACctR,IAArCqW,EAAyBE,OACxB,cAACpV,GAAA,EAAD,CAAMC,WAAS,EAAf,SACKiV,EAAyBE,OAAOjjB,KAAI,SAACwZ,EAAOzhB,GAAR,OACrC,cAAC,GAAD,CACIqI,SAAUA,EAEVoZ,MAAOA,EACP4J,qBAAsBA,EACtBD,qBAAsBA,EACtBV,wBAAyBA,EACzB9c,MAAO0lD,EACPF,eAAgBA,GANXpzD,QAWf,6BAEyC2U,IAAvCqW,EAAyBG,SACvB,cAACrV,GAAA,EAAD,CAAMC,WAAS,EAAf,SACGiV,EAAyBG,SAASljB,KAAI,SAACwZ,EAAOzhB,GAAR,OACvC,cAAC,GAAD,CACIqI,SAAUA,EAEVoZ,MAAOA,EACP4J,qBAAsBA,EACtBD,qBAAsBA,EACtBV,wBAAyBA,EACzB9c,MAAO0lD,EACPF,eAAgBA,GANXpzD,QAWb,6BAKV,cAAC8V,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,eAAC1a,EAAA,EAAD,CACEc,MAAM,OACNZ,MACEmnB,EAAS3Z,OAAS,EACd,CACEkjB,cAAe,OACfC,QAAS,IAEX,KARR,UAWE,eAAC7wB,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACE,cAAC9K,EAAA,EAAD,oBACA,cAACL,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAACqL,GAAD,CAAoBhc,QAASA,YAGKsH,IAArCqW,EAAyBrB,QACxB,cAAC7T,GAAA,EAAD,CAAMC,WAAS,EAAf,SACGiV,EAAyBrB,QAAQ1hB,KAAI,SAACvM,EAAOsE,GAAR,OACpC,cAAC,GAAD,CACEqI,SAAUA,EAEV3M,MAAOA,EACP2vB,qBAAsBA,EACtBC,wBAAyBA,EACzBF,qBAAsBA,EACtBxd,MAAO0lD,EACPF,eAAgBA,GANXpzD,QAWb,gCAKJ,cAACzE,EAAA,EAAD,CAAKqW,GAAI,IACT,cAAC,GAAD,CACEhE,MAAO0lD,EACP3wC,YAAaA,EACbC,SAAUA,EACVwwC,eAAgBA,SAO1B,IAAM/mC,GAAe,SAAC,GAQf,IAPLhkB,EAOI,EAPJA,SACAoZ,EAMI,EANJA,MACA4J,EAKI,EALJA,qBACAX,EAII,EAJJA,wBACAU,EAGI,EAHJA,qBACAgoC,EAEI,EAFJA,eACAxlD,EACI,EADJA,MAEMjT,EAAUR,KACVE,EAAQiyB,eASd,EAAgC5rB,oBAAS,GAAzC,mBAAOujB,EAAP,KAAiBsI,EAAjB,KAEMC,EAAqB7U,uBAAY,WACrCyT,EAAqBM,SAAQ,SAACnV,GACxBA,EAAI5I,MAAQ8T,EAAM9T,KAAK4e,GAAY,QAExC,CAAC9K,EAAM9T,IAAKyd,IAEd3W,qBAAU,WACT,GAAI7G,EACF,OAAO4e,MAER,CAAC5e,EAAO4e,IAkLX,OACE,cAAC1W,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,qBACElb,UAAWH,EAAQ6nB,eACnBtS,QAAS,kBApLS,SAACrM,GACvB,IAAM4oB,EAA0B,aAAOrB,GAElCnH,EAIHwI,EAA2Bf,SAAQ,SAACnV,EAAKvW,GACnCuW,EAAI5I,MAAQ8T,EAAM9T,MACpB8e,EAA2BrR,OAAOpb,EAAO,GACzCusB,EAAY1oB,QANhB4oB,EAA2B5R,KAAK4G,GAChC8K,EAAY1oB,IAoBd,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAO/e,GAElC,GAAKyd,EAAqBpiB,QAAW0jB,EAAsB1jB,QAqBpD,IACJoiB,EAAqBpiB,QACtB0jB,EAAsB1jB,OAAS,EAG/B,IAFC,IAAD,WAESD,GACP,IAAM4jB,EAAkBH,EAA2BzjB,GAC7CiG,EAAS0d,EAAsBjhB,QACnC,SAAC6K,GAAD,OAASA,EAAIiL,OAAOA,OAAO7T,MAAQif,EAAgBjf,OAEjDsB,EAAOhG,OACTyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACnB2G,OAAQ,CACR7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQkK,EAASxH,QAAQoJ,iBAAiB,GAAG3L,YAC7CR,SAAU,GAGZu1D,cAAe,KApBZrqD,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QAyBJ,GACLqiB,EAAqBpiB,OAAS,GACQ,IAAtCwjB,EAA2BxjB,QAC3BpF,EAGA,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IAChD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIJ,EAA2BxjB,OAAQ4jB,IACrDH,EAAkB7R,KAAK,CACpB2G,OAAQ,CACP7T,IAAK,GACLkW,WAAY8I,EAAsB3jB,GAAGwY,OAAOqC,WAC5C3lB,cAAeyuB,EAAsB3jB,GAAGwY,OAAOtjB,cAC/ComB,iBAAkBqI,EAAsB3jB,GAAGwY,OAAO8C,iBAClD9C,OAAQiL,EAA2BI,GACnCnxB,MAAOixB,EAAsB3jB,GAAGwY,OAAO9lB,MACvCyC,OAAQwuB,EAAsB3jB,GAAGwY,OAAOrjB,OACxCL,SAAU6uB,EAAsB3jB,GAAGwY,OAAO1jB,UAG5Cu1D,cAAe1mC,EAAsB3jB,GAAGqqD,qBAKzC,GACLhoC,EAAqBpiB,OAAS,GAC9BwjB,EAA2BxjB,OAAS,EAGpC,IAFC,IAAD,WAESD,GAEP,IADA,IAAM4jB,EAAkBH,EAA2BzjB,GAHrD,WAIW6jB,GACP,IAAMC,EAAiBzB,EAAqBwB,GACtCE,EAAyBJ,EAAsBjhB,QACnD,SAACshB,GAAD,OACEA,EAAqBxL,OAAOA,OAAO7T,MAAQif,EAAgBjf,KAC3Dmf,EAAenf,MAAQqf,EAAqBxL,OAAO9lB,MAAMiS,OAExDof,EAAuB9jB,OAkB1ByjB,EAAkB7R,KAAKkS,EAAuB,IAhB9CL,EAAkB7R,KAAK,CAErB2G,OAAQ,CACN7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ,EACRL,SAAU,GAGZu1D,cAAe,KAtBZxmC,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAAM,EAA9CA,IAFF7jB,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QA+BJ,GACLqiB,EAAqBpiB,OAAS,IAC7BwjB,EAA2BxjB,OAC5B,CAEA,IAAMsqD,EAA4B5mC,EAAsBjhB,QACtD,SAACrD,GAAD,OAAcA,EAASmZ,OAAOA,OAAO7T,OAEvC,GAAI4lD,EAA0BtqD,OAC5B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACrD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CAEnB2G,OAAQ,CACN7T,IAAK,GACLkW,WAAYqJ,EAA4B1L,OAAOqC,WAC/C3lB,cAAegvB,EAA4B1L,OAAOtjB,cAClDomB,iBAAkB4I,EAA4B1L,OAAO8C,iBACrD9C,OAAQ0L,EAA4B1L,OAAOA,OAC3C9lB,MAAOwxB,EAA4B1L,OAAO9lB,MAC1CyC,OAAQ+uB,EAA4B1L,OAAOrjB,OAC3CL,SAAUovB,EAA4B1L,OAAO1jB,UAG/Cu1D,cAAenmC,EAA4BmmC,uBAtInD,IAAK,IAAIrqD,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAK,CAC1D,IAAM4jB,EAAkBH,EAA2BzjB,GACnD0jB,EAAkB7R,KAAK,CACrB2G,OAAQ,CACN7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQkK,EAASxH,QAAQoJ,iBAAiB,GAAG3L,YAC7CR,SAAU,GAGZu1D,cAAe,IAgIrB3oC,EAAwB,aAAI+B,IAC5B2mC,EAAe1mC,GAOIS,EAAiBlJ,IAChCxoB,MACEwoB,EACI,CACEje,gBAAiB3L,EAAM2nB,QAAQC,QAAQC,MAEzC,KARR,SAWE,cAACtmB,EAAA,EAAD,CACEiV,QAAQ,SACRpV,MAAO,CACLC,MAAOrB,EAAM2nB,QAAQoL,gBACnBnJ,EAAW5pB,EAAM2nB,QAAQC,QAAQC,KAAO,WAE1Cvb,SAAU,IANd,SASG8a,EAAMA,aAOX4L,GAAU,SAAC,GAQV,IAPLhlB,EAOI,EAPJA,SACA3M,EAMI,EANJA,MACA2vB,EAKI,EALJA,qBACAC,EAII,EAJJA,wBACAF,EAGI,EAHJA,qBACAxd,EAEI,EAFJA,MACAwlD,EACI,EADJA,eAEMz4D,EAAUR,KACVE,EAAQiyB,eAId,EAAgC5rB,oBAAS,GAAzC,mBAAOujB,EAAP,KAAiBsI,EAAjB,KAEMe,EAAqB3V,uBAAY,WACrC0T,EAAqBK,SAAQ,SAACnV,GACxBA,EAAI5I,MAAQjS,EAAMiS,KAAK4e,GAAY,QAExC,CAAC7wB,EAAMiS,IAAK0d,IAEf5W,qBAAU,WACR,GAAIpM,EACF,OAAOilB,MAER,CAACjlB,EAAUilB,IAyKd,OACE,cAACxX,GAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACwO,GAAA,EAAD,CACE7R,MAAOjX,EAAM+oB,OACbC,UAAU,MACVC,OAAK,EACLlP,oBAAqBmP,KAJvB,SAME,qBACE9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACLuK,gBAAiBtK,EAAMmpB,IACvBnpB,MAAOrB,EAAM2nB,QAAQoL,gBAAgB1xB,EAAMmpB,MAE7C3U,QAAS,kBArLM,SAACrM,GACjBogB,EAIHoH,EAAqBK,SAAQ,SAACnV,EAAKvW,GAC7BuW,EAAI5I,MAAQjS,EAAMiS,MACpB0d,EAAqBjQ,OAAOpb,EAAO,GACnCusB,EAAY1oB,QANhBwnB,EAAqBxQ,KAAKnf,GAC1B6wB,EAAY1oB,IAmBd,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAO/e,GAElC,GAAKwd,EAAqBniB,QAAW0jB,EAAsB1jB,QAmBpD,IACJmiB,EAAqBniB,QACtB0jB,EAAsB1jB,OAAS,EAG/B,IAFC,IAAD,WAESD,GACP,IAAM8jB,EAAiBzB,EAAqBriB,GACtCiG,EAAS0d,EAAsBjhB,QACnC,SAAC6K,GAAD,OAASA,EAAIiL,OAAO9lB,MAAMiS,MAAQmf,EAAenf,OAE/CsB,EAAOhG,OACTyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACpB2G,OAAQ,CACP7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQkK,EAASxH,QAAQoJ,iBAAiB,GAAG3L,YAC7CR,SAAU,GAGZu1D,cAAe,KApBZrqD,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QAwBJ,GACLoiB,EAAqBniB,OAAS,GACE,IAAhCoiB,EAAqBpiB,QACrBpF,EAGA,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IAChD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAC/CH,EAAkB7R,KAAK,CACrB2G,OAAQ,CACN7T,IAAK,GACLkW,WAAY8I,EAAsB3jB,GAAGwY,OAAOqC,WAC5C3lB,cAAeyuB,EAAsB3jB,GAAGwY,OAAOtjB,cAC/ComB,iBAAkBqI,EAAsB3jB,GAAGwY,OAAO8C,iBAClD9C,OAAQmL,EAAsB3jB,GAAGwY,OAAOA,OACxC9lB,MAAO2vB,EAAqBwB,GAC5B1uB,OAAQwuB,EAAsB3jB,GAAGwY,OAAOrjB,OACxCL,SAAU6uB,EAAsB3jB,GAAGwY,OAAO1jB,UAG5Cu1D,cAAe1mC,EAAsB3jB,GAAGqqD,qBAKzC,GACLjoC,EAAqBniB,OAAS,GAC9BoiB,EAAqBpiB,OAAS,EAG9B,IAFC,IAAD,WAESD,GAEP,IADA,IAAM8jB,EAAiBzB,EAAqBriB,GAH9C,WAIW6jB,GACP,IAAMD,EAAkBxB,EAAqByB,GACvCE,EAAyBJ,EAAsBjhB,QACnD,SAACshB,GAAD,OACEA,EAAqBxL,OAAOA,OAAO7T,MAAQif,EAAgBjf,KAC3Dmf,EAAenf,MAAQqf,EAAqBxL,OAAO9lB,MAAMiS,OAExDof,EAAuB9jB,OAiB1ByjB,EAAkB7R,KAAKkS,EAAuB,IAhB9CL,EAAkB7R,KAAK,CACpB2G,OAAQ,CACP7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ,EACRL,SAAU,GAGZu1D,cAAe,KApBZxmC,EAAI,EAAGA,EAAIzB,EAAqBniB,OAAQ4jB,IAAM,EAA9CA,IAFF7jB,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QA8BJ,GACLoiB,EAAqBniB,OAAS,IAC7BoiB,EAAqBpiB,OACtB,CAEA,IAAMsqD,EAA4B5mC,EAAsBjhB,QACtD,SAACrD,GAAD,OAAcA,EAASmZ,OAAO9lB,MAAMiS,OAEtC,GAAI4lD,EAA0BtqD,OAC5B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACrD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CACrB2G,OAAQ,CACJ7T,IAAKuf,EAA4B1L,OAAO7T,IACxCkW,WAAYqJ,EAA4B1L,OAAOqC,WAC/C3lB,cAAegvB,EAA4B1L,OAAOtjB,cAClDomB,iBAAkB4I,EAA4B1L,OAAO8C,iBACrD9C,OAAQ0L,EAA4B1L,OAAOA,OAC3C9lB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ+uB,EAA4B1L,OAAOrjB,OAC3CL,SAAUovB,EAA4B1L,OAAO1jB,UAGjDu1D,cAAenmC,EAA4BmmC,uBAjIjD,IAAK,IAAIrqD,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAK,CACpD,IAAM8jB,EAAiBzB,EAAqBriB,GAC5C0jB,EAAkB7R,KAAK,CACrB2G,OAAQ,CACJ7T,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkBjc,EAAS1H,gBAAgB2jB,iBAC3C9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQkK,EAASxH,QAAQoJ,iBAAiB,GAAG3L,YAC7CR,SAAU,GAGZu1D,cAAe,IA0HvB/nC,EAAwB,aAAID,IAC5B+nC,EAAe1mC,GAiBMa,EAAgBtJ,IANjC,SAQGA,EAAW,cAAC7R,GAAA,EAAD,IAAW,YC1qB3BjY,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLqgC,UAAU,SACV3lD,MAAM,MACNmxC,YAAanzC,EAAM0B,QAAQ,GACzBy3D,aAAcn5D,EAAM0B,QAAQ,IAG/B6lB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7B8lB,MAAO,CAEN3F,SAAU,OACVhgB,SAAU,QAGX6Z,UAAW,CACV5Z,UAAW,QAEZ2lB,SAAU,CAET,uCAAwC,CACvC9b,gBAAiB81C,gBAAKzhD,EAAM2nB,QAAQC,QAAQC,KAAM,MAGjDuxC,KAAK,CACF7sD,MAAM,UAEZub,eAAgB,CACflL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,GAERmmB,eAAgB,CACfvL,OAAQ,4BACR3a,OAAQ,GACRD,MAAO,GACP6a,aAAc,WA+BD,SAASuL,GAAT,GAAgG,IAAjEpa,EAAgE,EAAhEA,SAAUsa,EAAsD,EAAtDA,YAAaC,EAAyC,EAAzCA,SAAU0wC,EAA+B,EAA/BA,YAAaF,EAAkB,EAAlBA,eACpFz4D,EAAUR,KAChB,EAA0BuG,mBAAS,OAAnC,mBACA,GADA,UAC8BA,mBAAS,aAAvC,mBACA,GADA,UACgCA,wBAASiU,IAAzC,mBACA,GADA,UACwB5R,IAAMrC,SAAS,IAAvC,mBACA,GADA,UACsCA,mBAAS,IAA/C,6BAQD,OACC,qBAAK5F,UAAWH,EAAQgnB,KAAxB,SACC,cAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,SACC,cAAC3H,GAAA,EAAD,CAAgBxe,MAAO,CAACa,OAAO,KAA/B,SACC,eAAC4d,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,QACL,aAAW,iBAJZ,UAMC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,qBACA,cAACA,GAAA,EAAD,oBACA,cAACA,GAAA,EAAD,iCACwB,cAACA,GAAA,EAAD,wCAG1B,cAACC,GAAA,EAAD,UAIEjS,EAASm0B,iBAAiBv0B,KAAI,SAAC+N,EAAMhW,GACrC,OACC,cAAC,GAAD,CACC0zD,WAAYrrD,EAASsF,IAErB6T,OAAQxL,EACRhW,MAAOA,EACP2iB,YAAaA,EACbC,SAAUA,EACV0wC,YAAaA,EACbF,eAAgBA,GANXpzD,iBA4Bf,IAAMmjB,GAA2B,SAAC,GAAqF,IAAnF3B,EAAkF,EAAlFA,OAAQxhB,EAA0E,EAA1EA,MAA6BszD,GAA6C,EAAnE3wC,YAAmE,EAAtDC,SAAsD,EAA7C0wC,aAAaF,EAAgC,EAAhCA,eAAgBM,EAAgB,EAAhBA,WAErG,EAA4ChzD,oBAAS,GAArD,mBAAQ0iB,EAAR,KACMzoB,GADN,KACgBR,MAChB,EAAkCuG,mBAAS,GAA3C,mBAAQ5C,EAAR,KAAkBijB,EAAlB,KACA,EAAwCrgB,mBAAS,GAAjD,mBAAQizD,EAAR,KACMC,GADN,KACiB,eAAQpyC,IAClB0xC,EAAiB/+C,qBAAWy+C,IAA5BM,cAMPz+C,qBAAU,WA4BT,OA3BAy+C,EAAcxnC,SAAQ,SAAArjB,GAEtB,GAAGA,EAASwrD,iBAAiBlmD,MAAQ+lD,OAArC,CACC,IAAII,EAAmB,GACnBn5C,EAAU,KAEd,IAAK,IAAMo5C,KAAO1rD,EAASirD,YAEtBU,OAAOC,eAAeC,KAAK7rD,EAASirD,YAAaS,KACpDp5C,EAAUtS,EAASirD,YAAYS,GAE/BD,EAAiBj5C,KAAKF,GAEnB6G,EAAO7T,MAAQgN,EAAQ6G,OAAO7T,KAEhCoT,EAAapG,EAAQ7c,WAOxBs1D,EAAe/qD,EAASirD,iBAKlB,eAGL,CAACJ,IA4BJ,OACC,eAAC94C,GAAA,EAAD,CAAW6J,UAAWb,EAAetoB,UAAWH,EAAQmnB,SAAxD,UACC,cAACzH,GAAA,EAAD,UACEu5C,EAAYpyC,OAAO7T,IAAM,cAAC4W,GAAA,EAAD,CAAMxG,MAAO61C,EAAYpyC,OAAOC,MAAO/lB,MAAM,YAAe,KAEvF,cAAC2e,GAAA,EAAD,CAAY5e,MAAO,CAACY,MAAM,OAA1B,SACEu3D,EAAYl4D,MAAMiS,IAClB,cAAC6W,GAAA,EAAD,CAAS7R,MAAOihD,EAAYl4D,MAAM+oB,OAAQC,UAAU,MAAMC,OAAK,EAAClP,oBAAqBmP,KAArF,SACC,qBACC9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACNuK,gBAAiB4tD,EAAYl4D,MAAMmpB,SAInC,OAIL,cAACxK,GAAA,EAAD,CAAWvf,UAAWH,EAAQ84D,KAAOh4D,MAAO,CAACY,MAAM,OAAnD,SACEmlB,EAAO1jB,WAGT,cAACuc,GAAA,EAAD,CAAY5e,MAAO,CAACY,MAAM,OAA1B,SACC,cAACsU,EAAA,EAAD,CACCC,KAAK,QACLC,QAAQ,WACRC,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjC8kB,UAAU,UACVtsB,KAAK,SACL7N,MAAO/F,EACP6T,SAAU,SAAC9N,GAAD,OAjDO,SAACA,GACrB,IAAIswD,EAAQR,EAAc,EAAKl3C,SAAS5Y,EAAQ8vD,GAAiB9vD,EAG9DswD,GAAQ3yC,EAAO1jB,WACjBijB,EAAYld,GAEZuvD,EAAe,2BAAIE,GAAL,kBAAmBtzD,EAAS,CAACwhB,OAAOA,EAAQ6xC,cAAe52C,SAAS03C,QA0C3DvwC,CAAa/f,EAAMwK,OAAOxK,QAC/CyK,KAAK,wBC1PV,SAAS8lD,GAAqB9rD,EAAGiZ,EAAG8yC,GAClC,OAAI9yC,EAAE8yC,GAAW/rD,EAAE+rD,IACT,EAEN9yC,EAAE8yC,GAAW/rD,EAAE+rD,GACV,EAEF,EAGT,SAASC,GAAcC,EAAOF,GAC5B,MAAiB,SAAVE,EACH,SAACjsD,EAAGiZ,GAAJ,OAAU6yC,GAAqB9rD,EAAGiZ,EAAG8yC,IACrC,SAAC/rD,EAAGiZ,GAAJ,OAAW6yC,GAAqB9rD,EAAGiZ,EAAG8yC,IAG5C,SAASG,GAAW57B,EAAO67B,GACzB,IAAMC,EAAiB97B,EAAM3wB,KAAI,SAAC0sD,EAAI30D,GAAL,MAAe,CAAC20D,EAAI30D,MAMrD,OALA00D,EAAe1xC,MAAK,SAAC1a,EAAGiZ,GACtB,IAAMgzC,EAAQE,EAAWnsD,EAAE,GAAIiZ,EAAE,IACjC,OAAc,IAAVgzC,EAAoBA,EACjBjsD,EAAE,GAAKiZ,EAAE,MAEXmzC,EAAezsD,KAAI,SAAC0sD,GAAD,OAAQA,EAAG,MAGvC,IAAM1mB,GAAY,CAChB,CAAEz8B,GAAI,aAAck9B,SAAS,EAAOC,gBAAgB,EAAO5wB,MAAO,uBAClE,CAAEvM,GAAI,OAAQk9B,SAAS,EAAOC,gBAAgB,EAAM5wB,MAAO,UAC3D,CAAEvM,GAAI,OAAQk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,QAC3D,CAAEvM,GAAI,WAAYk9B,SAAS,EAAMC,gBAAgB,EAAO5wB,MAAO,aAYjE,SAASmwB,GAAkB/6B,GACzB,IAAQxY,EAA4CwY,EAA5CxY,QAAU45D,EAAkCphD,EAAlCohD,MAAOF,EAA2BlhD,EAA3BkhD,QAASO,EAAkBzhD,EAAlByhD,cAKlC,OACE,cAACz6C,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAEG6zB,GAAUhmC,KAAI,SAACwmC,GAAD,OACb,cAACp0B,GAAA,EAAD,CAEEzT,MAAO6nC,EAASC,QAAU,QAAU,OAEpCmmB,cAAeR,IAAY5lB,EAASj9B,IAAK+iD,EAJ3C,SAME,eAACO,GAAA,EAAD,CACEC,OAAQV,IAAY5lB,EAASj9B,GAC7B8B,UAAW+gD,IAAY5lB,EAASj9B,GAAK+iD,EAAQ,MAC7CrkD,SAlBe/H,EAkBYsmC,EAASj9B,GAlBR,SAACQ,GACvC4iD,EAAc5iD,EAAO7J,KAcb,UAKGsmC,EAAS1wB,MACTs2C,IAAY5lB,EAASj9B,GACpB,sBAAM1W,UAAWH,EAAQwnB,eAAzB,SACa,SAAVoyC,EAAmB,oBAAsB,qBAE1C,SAfD9lB,EAASj9B,IAVE,IAACrJ,SA2C7B,IAAM6sD,GAAmB56D,aAAW,SAACC,GAAD,MAAY,CAC9CsnB,KAAM,CAEJ6rB,YAAanzC,EAAM0B,QAAQ,GAC3By3D,aAAcn5D,EAAM0B,QAAQ,GAC5BG,SAAS,KAEX4T,MAAM,CACJzT,MAAM,KAGR44D,cAAc,CACZ54D,MAAM,IACNC,OAAO,IAET44D,UACyB,UAAvB76D,EAAM2nB,QAAQtQ,KACV,CAEEhW,MAAOrB,EAAM2nB,QAAQ+5B,UAAU75B,KAC/Blc,gBAAiBmvD,aAAQ96D,EAAM2nB,QAAQC,QAAQmzC,MAAO,MAExD,CACE15D,MAAOrB,EAAM2nB,QAAQqzC,KAAKpzC,QAC1Bjc,gBAAiB3L,EAAM2nB,QAAQ+5B,UAAUuZ,MAEjD3iD,MAAO,CACLhM,SAAS,GACTkM,KAAM,IACLrX,QAAS,OACV+5D,SAAU,YAIRC,GAAe,SAACriD,GAEpB,MAAsCzS,mBAAS,IAA/C,mBAAO4yD,EAAP,KAAoBF,EAApB,KACA,EAA0Cj/C,qBAAWy+C,IAA9CO,EAAP,EAAOA,iBAAkBD,EAAzB,EAAyBA,cA+EnBuC,EAAO,WACX,IACEtiD,EAAMuiD,gBACNviD,EAAMwiD,yBAAoBhhD,GAC1B,MAAOxU,MAwBX,OAnBAsU,qBAAU,WACR,IAAIq/C,EAAmB,GAEvBZ,EAAcxnC,SAAQ,SAAAkqC,GAExB,GAAGA,EAAK/B,iBAAiBlmD,MAASwF,EAAM0gD,iBAAiBlmD,IAAI,CAC5D,IAAIgN,EAAU,KACT,IAAK,IAAMo5C,KAAO6B,EAAKtC,YACjBU,OAAOC,eAAeC,KAAK0B,EAAKtC,YAAaS,KAC/Cp5C,EAAUi7C,EAAKtC,YAAYS,GAC3BD,EAAiBj5C,KAAKF,QAK9By4C,EAAeU,KACd,CAACZ,EAAe//C,EAAM0gD,iBAAiBlmD,MAIxC,eAAC2C,GAAA,EAAD,CAAQpV,KAAMiY,EAAM0iD,WAAYpgD,oBAAqBxC,GAAY1C,WAAS,EAACrU,SAAU,KAAKi8B,UAAW,KAAMh8B,UAAW,KAAtH,UACI,cAACZ,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,WAAzC,SACQ,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS,kBAAMulD,KAAS7kD,KAAK,QAA3E,SACE,cAAC,KAAD,QAIe,OAAxBuC,EAAM2iD,cACL,8BACE,cAAC,GAAD,CACE9qC,yBAA0B7X,EAAM6X,yBAChC3d,QAAS8F,EAAM6X,yBAAyB3d,QACxChF,SAAU8K,EAAM0gD,iBAChBP,YAAaA,EACbF,eAAgBA,MAItB,8BAGE,cAAC,GAAD,CAAoB/qD,SAAY8K,EAAM0gD,iBAAkBP,YAAaA,EAAaF,eAAgBA,MAItG,cAAC73D,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAWmP,EAAG,EAAGja,GAAI,EAAxD,SACE,cAACsU,EAAA,EAAD,CAASY,QAAQ,YAAYnV,MAAM,UAASD,MAAO,CAACY,MAAM,OAAQ6T,QApIxD,WACd,IAAI6lD,EAAiBzC,EACjB90C,EAAiB,EAGpB,IAEE,IAAIw3C,EACPA,EAAsC,OAAxB7iD,EAAM2iD,cAA0B,CAC5CnoD,IAAKwF,EAAM0gD,iBAAiBlmD,IAC5BhN,gBAAkBwS,EAAM0gD,iBAAiBlzD,gBACzC67B,iBAAkBrpB,EAAM0gD,iBAAiBr3B,iBACzCC,mBAAoBtpB,EAAM0gD,iBAAiBp3B,mBAC3C5W,kBAAmB1S,EAAM0gD,iBAAiBhuC,kBAC1ChlB,QAASsS,EAAM0gD,iBAAiBhzD,QAChC4E,QAAQ0N,EAAM0gD,iBAAiBpuD,QAC/BF,SAAS4N,EAAM0gD,iBAAiBtuD,SAChC+2B,QAASnpB,EAAM0gD,iBAAiBv3B,SAIlC,CACG3uB,IAAKwF,EAAM0gD,iBAAiBlmD,IAC7BhN,gBAAkBwS,EAAM0gD,iBAAiBlzD,gBACzCE,QAASsS,EAAM0gD,iBAAiBhzD,QAC/B27B,iBAAkB,GACnBC,mBAAoB,CAAC,CAAC39B,cAAc,KACpC+mB,kBAAmB,GACnBpgB,QAAQ0N,EAAM0gD,iBAAiBpuD,QAC/BF,SAAS4N,EAAM0gD,iBAAiBtuD,SAChC+2B,QAASnpB,EAAM0gD,iBAAiBv3B,SAElC,IAAI25B,GAAS,EACTC,EAAoBhD,EACpBiD,EAAW,GAGf,IAAK,IAAIC,KAAUL,EACfv3C,GAAmBu3C,EAAeK,GAAQ/C,cAE5C8C,EAAUt7C,KAAKk7C,EAAeK,IAGhC,GAAG53C,EAAiB,EAAE,CAEpB,GAAG03C,EAAkBjtD,QAWnB,GAVAitD,EAAkBxqC,SAAQ,SAAA/Q,GACxB,GAAGA,EAAQk5C,iBAAiBlmD,MAAQwF,EAAM0gD,iBAAiBlmD,IAKzD,OAJAsoD,GAAS,EAETt7C,EAAQ24C,YAAc6C,OACtBx7C,EAAQ6D,eAAiBA,OAKzBy3C,EAAO,CAET,IAAII,EAAK,CAACxC,iBAAiBmC,EAAY1C,YAAY6C,EAAW33C,eAAe/B,SAAS+B,GAAiB1f,eAAe,GACtHo3D,EAAkBr7C,KAAKw7C,QAGtB,CACD,IAAIA,EAAK,CAACxC,iBAAiBmC,EAAY1C,YAAY6C,EAAW33C,eAAe/B,SAAS+B,GAAiB1f,eAAe,GACtHo3D,EAAkBr7C,KAAKw7C,GAG3BlD,EAAiB,aAAI+C,IACrB9C,EAAe,IACfqC,KAEC,MAAOt1D,MA6DN,2BAQF8S,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtCmjD,GAAuB,SAACnjD,GAC5B,IAAMxY,EAAUq6D,KAChB,EAAoCt0D,mBAAS,IAA7C,mBAAO61D,EAAP,KAAmBC,EAAnB,KACA,EAA0B91D,mBAAS,CAACP,OAAM,EAAOs2D,QAAQ,KAAzD,mBAAOt2D,EAAP,KAAc0F,EAAd,KAEA,EAAqCnF,oBAAS,GAA9C,mBAAQm1D,EAAR,KAAoBH,EAApB,KACQ7B,EAA6D1gD,EAA7D0gD,iBAAkB8B,EAA2CxiD,EAA3CwiD,oBAAqBe,EAAsBvjD,EAAtBujD,UAAWj0D,EAAW0Q,EAAX1Q,OACzD,EAIK0R,qBAAWy+C,IAHXO,EADL,EACKA,iBACAD,EAFL,EAEKA,cAMFyD,EAAiB,SAACn4C,GACtB,IAGE,GAFA3Y,EAAS,CAAC1F,OAAM,EAAOs2D,QAAQ,KAET,IAAnBj4C,GAA2C,KAAnBA,EAAuB,OACnD,IAAI7D,EAAUu4C,EAAc0D,MAAK,SAAAj8C,GAAO,OAAIA,EAAQk5C,iBAAiBlmD,MAAQkmD,EAAiBlmD,OAE7F,GAAGgN,EAAS,CAEV,IAAIk8C,EAAiCr4C,EAAiB7D,EAAQ6D,eAyB9D,YAtBGrL,EAAM2jD,SACoCniD,IAAxCk/C,EAAiBp3B,mBACbi6B,EAAUK,OAOVF,GAAmChD,EAAiBp3B,mBAAmB,GAAGkW,mBAC3Eh4B,EAAQ6D,gBAAkBA,EAG1B3Y,EAAS,CAAC1F,OAAM,EAAMs2D,QAAQ,qFAV7BI,GAAmChD,EAAiBp3B,mBAAmB,GAAGuyB,0BAC3Er0C,EAAQ6D,gBAAkBA,EAE1B3Y,EAAS,CAAC1F,OAAM,EAAMs2D,QAAQ,qFAWlC97C,EAAQ6D,gBAAkBA,EAG5B7D,EAAQ6D,eAAiBA,GAU3B,IAAIw3C,EAAa,CACfroD,IAAKwF,EAAM0gD,iBAAiBlmD,IAC5BhN,gBAAkBwS,EAAM0gD,iBAAiBlzD,gBACzC87B,mBAAoBtpB,EAAM0gD,iBAAiBp3B,mBAC3C5W,kBAAmB1S,EAAM0gD,iBAAiBhuC,kBAC1C2W,iBAAkBrpB,EAAM0gD,iBAAiBr3B,iBAEzC37B,QAASsS,EAAM0gD,iBAAiBhzD,QAChC4E,QAAQ0N,EAAM0gD,iBAAiBpuD,QAC/BF,SAAS4N,EAAM0gD,iBAAiBtuD,SAChC+2B,QAASnpB,EAAM0gD,iBAAiBv3B,SAGpC,QAA2C3nB,IAAxCk/C,EAAiBp3B,mBAClB,GAAGje,GAAmBq1C,EAAiBp3B,mBAAmB,GAAGkW,mBAAmB,CAE9E,IAAI0jB,EAAK,CAACxC,iBAAiBmC,EAAY1C,YAAY,GAAI90C,iBAAgB1f,cAAe43D,EAAUngB,OAChG4c,EAAiB,GAAD,oBAAKD,GAAL,CAAoBmD,UAGpCxwD,EAAS,CAAC1F,OAAM,EAAMs2D,QAAQ,+DAE7B,CACF,IAAIJ,EAAK,CAACxC,iBAAiBmC,EAAY1C,YAAY,GAAI90C,iBAAgB1f,cAAe43D,EAAUngB,OAC/F4c,EAAiB,GAAD,oBAAKD,GAAL,CAAoBmD,KAGvC,OACD,MAAOl2D,MAiDT,SAAS62D,EAAYnzD,GACjB,IAAMozD,EAAWpzD,EAAM+D,WAAWC,QAAQ,UAAW,IAC/CqvD,EAAWz6C,SAASw6C,GAC1B,IACE,GAA2B,OAAxB9jD,EAAM2iD,cAgBL,YADAU,EAAcU,GAdhB,GAAKR,EAAUK,QAQX,GAAGG,GAAYrD,EAAiBp3B,mBAAmB,GAAGkW,mBAEpD,YADA6jB,EAAcU,QARlB,GAAGA,GAAYrD,EAAiBp3B,mBAAmB,GAAGuyB,0BAGpD,YAFAwH,EAAcU,GAepB,MAAO/2D,KApCfsU,qBAAU,WACR,IACKtB,EAAM2jD,KACPpB,GAAc,GAEhBc,EAAcrjD,EAAMghD,MAEpB,MAAOh0D,OAIR,CAAC0zD,IAiCF,IAjZqB7E,EAA0BmI,EAiZzCC,EAAqB,WACxB,IACC,IAAMC,EAAa,CACjB,GAAQ,CAACv4D,cAAe,KAAMw4D,cAAe,MAC7C,KAAS,CAACx4D,cAAe,OAAQw4D,cAAe,MAChD,GAAO,CAACx4D,cAAe,KAAMw4D,cAAe,MAC5C,OAAW,CAACx4D,cAAe,SAAUw4D,cAAe,MACpD,GAAO,CAACx4D,cAAe,KAAMw4D,cAAe,OAK9C,OACE,eAAC/7D,EAAA,EAAD,CAAKiL,cAAe,MAAOhL,QAAQ,OAAnC,UACE,eAACD,EAAA,EAAD,CAAKiL,cAAe,MAApB,UACA,cAACgU,GAAA,EAAD,CAAUC,QAASi8C,EAAUK,OAAUr7D,MAAM,UAAUiW,SAAU,WAAOlP,IAAU+zD,EAAc,IAAKnmD,SAAyF,OAA/EgnD,EAAWxD,EAAiBhzD,QAAQjD,iBAAiBC,QAAQiB,gBAC1K,cAAClD,EAAA,EAAD,CAAYF,MAAM,UAAUD,MAAO,CAACmX,WAAW,IAA/C,SAAqDykD,EAAWxD,EAAiBhzD,QAAQjD,iBAAiBC,QAAQy5D,mBAKpC,OAA/ED,EAAWxD,EAAiBhzD,QAAQjD,iBAAiBC,QAAQiB,cAC5D,eAACvD,EAAA,EAAD,CAAKiL,cAAe,MAApB,UACE,cAACgU,GAAA,EAAD,CAAUC,QAASi8C,EAAUngB,MAAO76C,MAAM,UAAUiW,SAAU,WAAOlP,IAAU+zD,EAAc,MAC7F,eAAC56D,EAAA,EAAD,CAAYF,MAAM,UAAUD,MAAO,CAACmX,WAAW,IAA/C,UAAqDykD,EAAWxD,EAAiBhzD,QAAQjD,iBAAiBC,QAAQiB,cAAlH,UAGF,2BAML,MAAOqB,MAOZ,OACE,cAACwV,GAAA,EAAD,CACE7a,UAAWy8D,aAAK58D,EAAQgnB,KAAT,eACZhnB,EAAQu6D,eAAiCvgD,IAArBk/C,IAFzB,SAMA,eAAC/9C,GAAA,EAAD,CAAMC,WAAS,EAAf,eACwBpB,IAArBk/C,EACC,cAACt4D,EAAA,EAAD,CAAKE,MAAO,CAACY,MAAM,QAAnB,SACE,cAACT,EAAA,EAAD,CAAYd,UAAWH,EAAQgY,MAAOjX,MAAM,UAAUmV,QAAQ,YAA9D,SACGgjD,EAAiBlzD,gBAAgB2jB,qBAItC,cAAC1oB,EAAA,EAAD,CAAYd,UAAWH,EAAQgY,MAAO9B,QAAQ,KAAKW,GAAG,aAAaJ,UAAU,MAA7E,SACG+B,EAAMR,aAIYgC,IAArBk/C,EACF,eAACt4D,EAAA,EAAD,WAEK4E,EAAMA,MACP,cAACvE,EAAA,EAAD,CAAYF,MAAM,UAAlB,SAA6ByE,EAAMs2D,UAEnC,wBAGGtjD,EAAM2jD,IACiD,UAAnDjD,EAAiBlzD,gBAAgBslB,cAChC,eAACnQ,GAAA,EAAD,CAAMC,WAAS,EAAEtP,eAAe,eAAewX,GAAI,EAAnD,UAG+B,OAAxB9K,EAAM2iD,cAEP,cAACsB,EAAD,IAEA,eAAC77D,EAAA,EAAD,CAAKiL,cAAe,MAAOhL,QAAQ,OAAnC,UACE,eAACD,EAAA,EAAD,CAAKiL,cAAe,MAApB,UACE,cAACgU,GAAA,EAAD,CAAUC,QAASi8C,EAAUK,OAAUr7D,MAAM,UAAUiW,SAAU,WAAOlP,IAAU+zD,EAAc,IAAKnmD,SAAqF,OAA3E8C,EAAM0gD,iBAAiBp3B,mBAAmB,GAAGuyB,4BAC5J,cAACpzD,EAAA,EAAD,CAAYF,MAAM,UAAUD,MAAO,CAACmX,WAAW,IAA/C,SAAqDO,EAAM0gD,iBAAiBp3B,mBAAmB,GAAGmW,uBAGtB,OAA3Ez/B,EAAM0gD,iBAAiBp3B,mBAAmB,GAAGuyB,0BAC5C,eAACzzD,EAAA,EAAD,CAAKiL,cAAe,MAApB,UACE,cAACgU,GAAA,EAAD,CAAUC,QAASi8C,EAAUngB,MAAO76C,MAAM,UAAUiW,SAAU,WAAOlP,IAAU+zD,EAAc,MAC7F,eAAC56D,EAAA,EAAD,CAAYF,MAAM,UAAUD,MAAO,CAACmX,WAAW,IAA/C,UAAqD,GAAKO,EAAM0gD,iBAAiBp3B,mBAAmB,GAAG39B,cAAvG,UAGF,2BAKR,eAACvD,EAAA,EAAD,CAAKc,MAAM,QAAQ4hB,GAAI,EAAvB,UAEE,cAACriB,EAAA,EAAD,CAAYF,MAAM,UAAlB,sBACA,cAACiV,EAAA,EAAD,CACI7V,UAAWH,EAAQs6D,cAEnBrkD,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRa,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCrV,MAAO0yD,EACP5kD,SAAU,SAAC9N,GAAD,OAAWmzD,EAAYnzD,EAAMwK,OAAOxK,UAIlD,cAAC2gB,GAAA,EAAD,CAAS7R,MAAM,UAAf,SACI,cAACb,EAAA,EAAD,CAAY,aAAW,MAAM5B,QAAS,kBAAMymD,EAAgBJ,IAA5D,SACI,cAAC,KAAD,WAKPpjD,EAAM2iD,cACL,cAACv6D,EAAA,EAAD,CAAMc,MAAM,QAAZ,SAEgF,OAA3E8W,EAAM0gD,iBAAiBp3B,mBAAmB,GAAGuyB,0BAC5C,cAACpzD,EAAA,EAAD,CAAYF,MAAM,UAAUD,MAAO,CAAC85D,SAAU,QAA9C,UA3gBTvG,EA4gByB77C,EAAM0gD,iBAAiBp3B,mBAAmB,GAAGuyB,0BA5gB5CmI,EA4gBsEhkD,EAAM0gD,iBAAiBp3B,mBAAmB,GAAG39B,cA1gB5I,CACpB,KAAU,gCAAkCkwD,EAC5C,OAAW,mCAAqCA,GAE7BmI,MAygBO,0BAIN,2BAKN,8BACE,cAAC,GAAD,CAActB,WAAYA,EAAYH,cAAeA,EAAeC,oBAAqBA,EAAsB9B,iBAAkBA,EAAkBiC,cAAe3iD,EAAM2iD,cAAe9qC,yBAA0B7X,EAAM6X,yBAAyB3d,QAAS8F,EAAM9F,YAGnQ,eAACyI,GAAA,EAAD,CAAMzZ,MAAO,OAAQ0Z,WAAS,EAA9B,UACwD,UAAnD89C,EAAiBlzD,gBAAgBslB,cAClC,gCAEE,cAACrqB,EAAA,EAAD,CAAYF,MAAM,UAAlB,sBACA,cAACiV,EAAA,EAAD,CACI7V,UAAWH,EAAQs6D,cACnBrkD,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRa,KAAK,SACLZ,WAAY,CAAEmI,WAAY,CAAEC,IAAK,IACjCrV,MAAO0yD,EACP5kD,SAAU,SAAC9N,GAAD,OAAWmzD,EAAYnzD,EAAMwK,OAAOxK,UAIlD,cAAC2gB,GAAA,EAAD,CAAS7R,MAAM,UAAf,SACI,cAACb,EAAA,EAAD,CAAY,aAAW,MAAM5B,QAAS,kBAAMymD,EAAgBJ,IAA5D,SACI,cAAC,KAAD,WAMV,cAAC,GAAD,CAAcV,WAAYA,EAAYH,cAAeA,EAAeC,oBAAqBA,EAAsB9B,iBAAkBA,EAAkBiC,cAAe3iD,EAAM2iD,cAAe9qC,yBAA0B7X,EAAM6X,yBAAyB3d,QAAS8F,EAAM9F,UAIjQ,eAAC9R,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACsD,UAAnDiiD,EAAiBlzD,gBAAgBslB,cACjC,cAACzB,GAAA,EAAD,CAAS7R,MAAM,SAAf,SACG,cAACb,EAAA,EAAD,CAAY,aAAW,SAAS5B,QAAS,kBAlOjD,WACd,IACwD,UAAnD2jD,EAAiBlzD,gBAAgBslB,eAClCyvC,GAAc,GAIhB,MAAOv1D,KA2N4Dq3D,IAA/C,SACI,cAAC,KAAD,QAIR,wBAEA,cAAChzC,GAAA,EAAD,CAAS7R,MAAM,WAAf,SACI,cAACb,EAAA,EAAD,CAAY,aAAW,SAAS5B,QAAS,kBA7P/C,WAChB,IAEE,IAAIunD,EAAW,GAGZvE,EAAcjqD,SACfwuD,EAAUvE,GAGZyC,OAAoBhhD,GAEpBw+C,EAAiBsE,EAAQ/rD,QAAO,SAAAsK,GAAI,OAAIA,EAAK69C,iBAAiBlmD,MAAQkmD,EAAiBlmD,QAEvF,MAAOxN,KA+O4Du3D,IAA/C,SACI,cAAC,KAAD,iBAUpB,8BAWFv9D,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CAEJ/O,WAAWvY,EAAM0B,QAAQ,GACzB4qC,YAAYtsC,EAAM0B,QAAQ,IAI5B6lB,MAAO,CACLvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE9B8lB,MAAO,CACL3F,SAAU,IACVhgB,SAAS,KAGXimB,eAAgB,CACdlL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,OAII,SAASs7D,GAAcxkD,GACpC,IAAMxY,EAAUR,KAChB,EAA0BuG,mBAAS,OAAnC,mBAAO6zD,EAAP,KAAcqD,EAAd,KACA,EAA8Bl3D,mBAAS,YAAvC,mBAAO2zD,EAAP,KAAgBwD,EAAhB,KACA,EAAgCn3D,wBAASiU,GAAzC,mBAAOsP,EAAP,KAAiBsI,EAAjB,KACA,EAAwB7rB,mBAAS,GAAjC,mBAAOyzD,EAAP,KAAa2D,EAAb,KAEA,EAAwB/0D,IAAMrC,SAAS,GAAvC,mBAAOwqC,EAAP,KAAaC,EAAb,KACA,EAAsCzqC,mBAAS,GAA/C,mBAAO0qC,EAAP,KACA,GADA,KACkC1qC,mBAAS,CAACq2D,QAAQ,EAAMxgB,OAAO,KAAjE,mBAAOmgB,EAAP,KAAkBqB,EAAlB,KACMzqD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAQ/C,EAEMwL,qBAAWy+C,IADXM,EADN,EACMA,cAAeJ,EADrB,EACqBA,YAAeE,EADpC,EACoCA,eAG9BhoC,EAA2BxW,aAASkS,GAAmB,CAC3D7W,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAkBhEwB,EAASgE,EAAM2jD,IAA2B3jD,EAAM2iD,cAAkChD,EAAjBE,EAA1CE,EAEvBjkB,EAAc,SAACj9B,EAAOi3C,EAAUkL,GAQpC,GANgD,UAA3ClL,EAAStoD,gBAAgBslB,eAE1B6xC,EAAQ3kD,EAAM2jD,IAAM,EAAI3C,QAIbx/C,IAAZsP,EAAsB,CACvB,IAAM2O,EAAgB3O,EAAStW,MAAQs7C,EAASt7C,IAI5C4e,EADDqG,OACaje,EAEAs0C,QAIhB18B,EAAY08B,IAiCV5Z,EAAYjE,EAAcjyB,KAAKD,IAAIkyB,EAAaj8B,EAAKlG,OAASiiC,EAAOE,GAE3E,OACE,qBAAKtwC,UAAWH,EAAQgnB,KAAxB,SACE,eAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,UAEE,cAAC,GAAD,CAAsBiyC,iBAAkB5vC,EAAU0xC,oBAAqBppC,EAAa5Z,MAAOQ,EAAMR,MAAOmkD,IAAK3jD,EAAM2jD,IAAKhB,cAAe3iD,EAAM2iD,cAAe5C,cAAgBA,EAAewD,UAAWA,EAAWj0D,OAvFxM,WACds1D,EAAa,2BAAIrB,GAAL,IAAgBK,QAASL,EAAUK,OAAQxgB,OAAQmgB,EAAUngB,UAsF6J4d,KAAMA,EAAMnpC,yBAA2BA,EAAyB7b,KAAQ6b,EAAyB7b,KAAK6b,yBAA0B,GAAG3d,QAAW2d,EAAyB3d,QAAY2d,EAAyB3d,QAAU,OACvb,cAAC4M,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAM,QACN,aAAW,iBAJb,UAME,cAAC,GAAD,CACEjW,QAASA,EACTk5D,iBAAkB5vC,EAClBswC,MAAOA,EACPF,QAASA,EACT2D,qBAjFiB,SAAChmD,GAC5B,GAAIA,EAAM3D,OAAOoM,QAAjB,CACuBtL,EAAKlH,KAAI,SAACsnC,GAAD,OAAOA,EAAEjhC,QACvCie,EAAYva,EAAM3D,OAAOoM,cAG3B8R,EAAY,KA4EFqoC,cAxFc,SAAC5iD,EAAO7J,GAEhCyvD,EADcvD,IAAYlsD,GAAsB,QAAVosD,EACrB,OAAS,OAC1BsD,EAAW1vD,IAsFDkmC,SAAUl/B,EAAKlG,SAEjB,eAACqR,GAAA,EAAD,WACGk6C,GAAWrlD,EAAMmlD,GAAcC,EAAOF,IACpCtoB,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAC/CnjC,KAAI,SAAC+jC,EAAKhsC,GACT,IA7CIwR,EA6CEg+B,GA7CFh+B,EA6C+B2B,EAAM2jD,IAAO9qB,EAAIr+B,IAAKq+B,EAAI6nB,iBAAiBlmD,SA1C7EgH,IAAZsP,KACqBA,EAAStW,MAAQ6D,IA0CrBqX,EAAO,kCAA8B7oB,GAE3C,OAAGmT,EAAM2jD,IAEJ3jD,EAAM2iD,cAGP,eAAC17C,GAAA,EAAD,CACE4J,OAAK,EACL9T,QAAS,SAAC8B,GAAD,OAAWi9B,EAAYj9B,EAAOg6B,IACvC7mB,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EAEXjgB,SAAUurB,EAPZ,UAUE,cAACn1B,GAAA,EAAD,CAAWjJ,UAAU,QAAQI,GAAIqX,EAAS0jC,MAAM,MAAhD,SACyC,MAArCvgB,EAAIrrC,gBAAgBzC,cAAwB,gBAAe8tC,EAAIrrC,gBAAgBzC,gBAEnF,cAACmc,GAAA,EAAD,CAAWjJ,UAAU,KAAKI,GAAIqX,EAAS0jC,MAAM,MAA7C,SACGvgB,EAAIrrC,gBAAgB2jB,mBAGvB,eAACjK,GAAA,EAAD,CAAWzT,MAAM,QAAjB,cAA2BolC,EAAIrrC,gBAAgBslB,iBAC/C,eAAC5L,GAAA,EAAD,CAAWzT,MAAM,QAAjB,cAA2BolC,EAAIvP,mBAAmB,GAAGkW,mBAArD,KAA4E3G,EAAIvP,mBAAmB,GAAGmW,kBAAtG,SAZK5G,EAAIr+B,KAoBT,eAACyM,GAAA,EAAD,CACA4J,OAAK,EACL9T,QAAS,SAAC8B,GAAD,OAAWi9B,EAAYj9B,EAAOg6B,IACvC7mB,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EAEXjgB,SAAUurB,EAPV,UAUA,cAACn1B,GAAA,EAAD,CAAWjJ,UAAU,QAAQI,GAAIqX,EAAS0jC,MAAM,MAAhD,SACyC,MAArCvgB,EAAIrrC,gBAAgBzC,cAAwB,gBAAe8tC,EAAIrrC,gBAAgBzC,gBAEnF,cAACmc,GAAA,EAAD,CAAWjJ,UAAU,KAAKI,GAAIqX,EAAS0jC,MAAM,MAA7C,SACGvgB,EAAIrrC,gBAAgB2jB,mBAEvB,eAACjK,GAAA,EAAD,CAAWzT,MAAM,QAAjB,cAA2BolC,EAAIrrC,gBAAgBslB,iBAC/C,cAAC5L,GAAA,EAAD,CAAWzT,MAAM,QAAjB,oBAXKolC,EAAIr+B,KAkBb,eAACyM,GAAA,EAAD,CACE4J,OAAK,EACL9T,QAAS,SAAC8B,GAAD,OAAWi9B,EAAYj9B,EAAOg6B,EAAI6nB,iBAAkB7nB,EAAIxtB,iBACjE2G,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EAEXjgB,SAAUurB,EAPZ,UAUE,cAACn1B,GAAA,EAAD,CAAWjJ,UAAU,QAAQI,GAAIqX,EAAS0jC,MAAM,MAAhD,SAC0D,MAAtDvgB,EAAI6nB,iBAAiBlzD,gBAAgBzC,cAAwB,gBAAe8tC,EAAI6nB,iBAAiBlzD,gBAAgBzC,gBAErH,cAACmc,GAAA,EAAD,CAAWjJ,UAAU,KAAKI,GAAIqX,EAAS0jC,MAAM,MAA7C,SACGvgB,EAAI6nB,iBAAiBlzD,gBAAgB2jB,mBAExC,eAACjK,GAAA,EAAD,CAAWzT,MAAM,QAAjB,cAA2BolC,EAAI6nB,iBAAiBlzD,gBAAgBslB,iBAChE,eAAC5L,GAAA,EAAD,CAAWzT,MAAM,QAAjB,cAA2BolC,EAAIxtB,oBAX1BwtB,EAAIr+B,QAiBhB0hC,EAAY,GACX,cAACj1B,GAAA,EAAD,CAAU3e,MAAO,CAAEa,OAAQ,GAAK+yC,GAAhC,SACE,cAACh1B,GAAA,EAAD,CAAWo1B,QAAS,cAM9B,cAACxD,GAAA,EAAD,CACEC,mBAAoB,CAAC,EAAG,GAAI,IAC5B96B,UAAU,MACVmwB,MAAOpyB,EAAKlG,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aArJiB,SAACn6B,EAAOo6B,GAC/BjB,EAAQiB,IAqJF6rB,iBAAkB,UC/2B5B,IAAM99D,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRnM,SAAU,IAERvK,OAAQ,CACJC,MAAO,IAEXsc,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,SAAU,CACTL,MAAO,QAGNqX,SAAU,CACZH,WAAY,OACZvW,MAAM,QAEJ67D,UAAU,CACN57D,OAAQ,IAGZ6kD,YAAa,CACTtlD,OAAQxB,EAAM0B,QAAQ,GACtBmgB,SAAU,IACVhgB,SAAU,KAEdi8D,UAAU,CACZ97D,MAAO,MACPC,OAAQ,IAGN2nB,SAAS,CACX5nB,MAAO,MACPC,OAAQ,IAGNwT,MAAM,CACRzT,MAAM,QAEJ+7D,SAAS,CACXv8D,OAAO,GACDC,UAAU,EACVE,aAAa,IAEjBu4B,OAAO,CACT14B,OAAQxB,EAAM0B,QAAQ,GAChBD,UAAWzB,EAAM0B,QAAQ,GACzBC,aAAc3B,EAAM0B,QAAQ,IAEhCs8D,WAAY,CACRx8D,OAAQxB,EAAM0B,QAAQ,KAC5BD,UAAW,EACLogB,SAAU,MACVhgB,SAAU,MACVi8B,UAAW,QAMnB,SAASqpB,GAAUniD,EAASi5D,EAAaj+D,GACvC,MAAO,CACL0uB,YACoC,IAAlCuvC,EAAYppB,QAAQ7vC,GAChBhF,EAAMqnD,WAAWC,kBACjBtnD,EAAMqnD,WAAWE,kBAI3B,IAAM3uC,GAAaC,sBAAW,SAAoBC,EAAOC,GACxD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAKtCiuC,GAAY,CAChBC,WAAY,CACV5lD,MAAO,CACLU,UAAWmlD,IACXjlD,MAAO,OAKPk8D,GAAc,CAChB,QACA,OACA,QACA,aAQJ,IAAMC,GAAQ,CAAC,iBAAkB,yBAElB,SAASC,KACpB,IAAM99D,EAAUR,KACVE,EAAQiyB,eACRhf,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EASIwL,qBAAWy+C,IARXrgC,EADJ,EACIA,aACA1pB,EAFJ,EAEIA,UACAsqD,EAHJ,EAGIA,iBACAJ,EAJJ,EAIIA,eACAE,EALJ,EAKIA,kBAEAH,EAPJ,EAOIA,YACAI,EARJ,EAQIA,cAEJ,EAA4BxyD,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACH,EAA0BgG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACG,EAAgC7M,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KACA,EAAkCzF,mBAAS,IAA3C,mBAEA,GAFA,UAE8BA,mBAAS,CAAGxC,cAAe,GAAGiL,cAAe,GAAG8c,cAAe,GAAG3B,iBAAkB,GAC9G+R,gBAAiB,GAAGN,UAAW,GAAGQ,aAAc,MADpD,mBAGA,GAHA,UAGkC71B,mBAAS,KAA3C,mBACA,GADA,UACsBA,mBAAS,KAClC,GADG,oBACsBA,mBAAS,KAClC,GADA,oBAC4CA,mBAAS,KAArD,mBAEG,GAFH,UAE6CA,oBAAS,IAAnD,mBAAQg4D,EAAR,KAAsBC,EAAtB,KACA,EAAkDj4D,mBAAS,MAA3D,mBAAQk4D,GAAR,KAA0BC,GAA1B,KACA,GAAgDn4D,oBAAS,GAAzD,qBAAQo4D,GAAR,MAAyBC,GAAzB,MACA,GAAkDr4D,oBAAS,GAA3D,qBAAQs4D,GAAR,MAA0BC,GAA1B,MAEA,GAA4Cv4D,mBAAS,MAArD,qBAAQo1D,GAAR,MAAuBoD,GAAvB,MACA,GAA8Cx4D,mBAAS,MAAvD,qBAAQy4D,GAAR,MAAwBC,GAAxB,MACA,GAA+C14D,mBAAS,IAAxD,qBAAO24D,GAAP,MAAyBC,GAAzB,MACA,GAAsC54D,mBAAS,IAA/C,qBAAQ64D,GAAR,MAAoBC,GAApB,MACA,GAA8B94D,mBAAS,IAAvC,qBAAQ+4D,GAAR,MAAgBC,GAAhB,MACA,GAAwCh5D,mBAAS,IAAjD,qBAAQi5D,GAAR,MAAqBC,GAArB,MAEA,GAAoCl5D,mBAAS,GAA7C,qBAAOm5D,GAAP,MAAmBC,GAAnB,MACA,GAA8Bp5D,mBAAS,IAAIq5D,KAA3C,qBAAOC,GAAP,MAAgBC,GAAhB,MACA,GAA8Bv5D,oBAAS,GAAvC,qBAAOw5D,GAAP,MAAgBC,GAAhB,MAEA,GAA0BlsD,YAAY8Z,IAA9BqyC,GAAR,qBAEIC,GAAW,GAGXpvC,GAAY,GAEVqvC,GAAwB9lD,aAASmT,GAAkB,CACrD9X,UAAW,CACP2B,GAAIlE,EAAO/H,SAASoI,KAEvB+zB,YAAa,iBAGf64B,GAAgB/lD,aAAS8rC,GAA0B,CACxDzwC,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,KAEpB+zB,YAAa,iBAGZ84B,GAAkBhmD,aAASsT,GAAmB,CACtDjY,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,KAErB+zB,YAAa,iBAGX+4B,GAAiBjmD,aACvBoS,GACA,CACE/W,UAAW,CACPpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BtO,QAAUy2D,GAAkBA,GAAcnoD,IAAM,GAChD+lC,aAAa,GAEjBhS,YAAa,iBAKTg5B,GAAwBlmD,aAC9BwT,GACA,CACEnY,UAAW,CACPpK,QAAS6H,EAAO7H,QAAQkI,KAE5B+zB,YAAa,iBAafjtB,qBAAU,WACHqhD,MATiB,WACpB,IACIwD,GAAoBgB,GAAsBnrD,KAAKgrB,iBAAiBzuB,QAAO,SAAAiP,GAAO,OAAIA,EAAQhN,MAAQmoD,GAAcnoD,QAClH,MAAOxN,GACNiJ,QAAQC,IAAIlJ,IAMXg6B,GACAwgC,QAEL,CAAC7E,KAGJ,IAAM8E,GAA0BjjD,sBAAW,sBAAC,sBAAArP,EAAA,sDACxC,IACIoyD,GAAsBrtD,UACxB,MAAOlN,IAH+B,2CAM1C,CAACu6D,KAEGC,GAA0BhjD,sBAAW,sBAAC,sBAAArP,EAAA,sDACxC,IACGmyD,GAAeptD,UAChB,MAAOlN,IAH+B,2CAM1C,CAACs6D,KAEHhmD,qBAAU,WACiB,OAApBmkD,KACgC,QAA5BA,GAAiBluD,OAChBkwD,KAEAD,QAGT,CAAC/B,KAMHnkD,qBAAU,WACiB,OAArBmkD,KACiC,QAA7BA,GAAiB3X,QAEZ0X,EADiB,OAAlB7C,IAO4B,QAA5B8C,GAAiBluD,OAEZiuD,EADkB,OAAnBQ,IAOCR,EADiB,OAAlB7C,IAA6C,OAAnBqD,OAU9C,CAAEP,GAAkB9C,GAAeqD,GAAgBR,IAKlDlkD,qBACF,WACKimD,GAAsBvrD,MAIb8jD,EAAkByH,GAAsBvrD,KAAK0rD,8BAEvD,CAAEH,GAAsBvrD,KAAM8jD,IAG/Bx+C,qBAEH,WACK,GAAGgmD,GAAetrD,MAA+B,IAAvB2jD,EAAY7pD,OAK7B,OAHAspB,EAAakoC,GAAetrD,KAAK4yB,uBACjCgxB,EAAe0H,GAAetrD,KAAK4yB,oBAMjD,CAAE04B,GAAgBloC,EAAcwgC,IAG9Bt+C,qBACF,WACCtO,GAAW,GACXq0D,GAAgBntD,UAChBlH,GAAW,KAEZ,CAAEq0D,KAIH,IAIMxsD,GAAc,WACnBT,GAAQ,IA2DAutD,GAAgB,SAACC,GACnB,OAAOf,GAAQgB,IAAID,IAmBjBE,GAAa,WAEfnB,IAAc,SAACoB,GAAD,OAAoBA,EAAiB,MAkCpDV,GAAgBrrD,MACRqrD,GAAgBrrD,KAAKutC,kBAG7B6d,GAAcprD,OACnBkrD,GAAYE,GAAcprD,KAAK4xC,yBAG1BuZ,GAAsBnrD,OACrB8b,GAAYqvC,GAAsBnrD,KAAKgrB,kBAK3C,IAAM6H,GAAyB,SAAC35B,GAGxB0qD,EADY,OAAb1qD,EACgB,CAACA,GAEDQ,IAKjB4vB,GAAc,WAChB0hC,IAAYD,KAGViB,GAAS,uCAAG,8BAAA7yD,EAAA,mEAGP4qD,EAAcjqD,OAHP,wBAIPkxD,IAAW,GACXh0D,GAAW,GAEP2J,EAAS,CACZD,UAAW,CACPC,MAAO,CACHsrD,kBAAmB,CACfztD,IAAKirD,GAAiBjrD,IACtBqzC,gBAAiB4X,GAAiB5X,gBAClCC,QAAS2X,GAAiB3X,QAC1Bv2C,OAAQkuD,GAAiBluD,OACzBw2C,SAAU0X,GAAiB1X,UAE/Bma,eAAmC,OAAlBvF,GAA0BA,GAAcnoD,IAAM,GAC/D2tD,gBAAqC,OAAnBnC,GAA2BA,GAAexrD,IAAM,GAClE9E,UAAWqqD,EACXqI,iBAAkB,CACdhC,WAAYA,GACZE,OAAQA,GACR+B,iBAAkB7B,IAEtB8B,eAAgBnuD,EAAO/H,SAASoI,IAChC+tD,gBAAiBpuD,EAAO/H,SAASoI,IACjC4R,eAAgBC,OAASC,OAAO,SAASC,UAE7C4c,QAAShvB,EAAOK,IAChBlI,QAAS6H,EAAO7H,QAAQkI,MA9BtB,SAkCiBysD,GAActqD,GAlC/B,OAkCH6rD,EAlCG,OAqCNjhE,EAAS,CAACW,QAASsgE,EAASxsD,KAAKysD,cAAcvgE,QAASD,OAAQugE,EAASxsD,KAAKysD,cAAc3nB,KAAM/4C,MAAM,IAChE,UAArCygE,EAASxsD,KAAKysD,cAAc3nB,OAC3Bkf,EAAiB,IACjB+F,GAAiB,MACjBE,GAAkB,MAClBP,GAAoB,MACpBoC,MA3CE,wBAgDNvgE,EAAS,CAACW,QAAQ,4DAA6DD,OAAQ,QAASF,MAAM,IAhDhG,QAsDViL,GAAW,GAtDD,kDAwDTA,GAAW,GACXg0D,IAAW,QACaxlD,IAAvB,KAAM5E,aACf3G,QAAQC,IAAI,wBAAyB,KAAM0G,mBACJ4E,IAAvB,KAAM3E,eACX5G,QAAQC,IAAI,yBAA0B,KAAM2G,eAK/CtV,EAAS,CAACW,QAAS,iDAA+CD,OAAQ,QAASF,MAAM,IAlEhF,0DAAH,qDAwEf,OACI,eAACK,EAAA,EAAD,CAAKsgE,GAAI,CAAEx/D,MAAO,QAAlB,UAEI,cAAC4T,EAAA,EAAD,CAAQM,WAAS,EAACL,QA/NL,WACvB3C,GAAQ,IA8NE,SACI,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACI,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAAC,KAAD,CAAW5L,UAAWH,EAAQmY,SAElC,eAACgD,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,GAAIqc,QAAQ,SAArC,UACI,cAACtC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACQ,cAACnL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBAAKwR,IAAK4jD,GAAazjC,IAAI,gBAAgBv9B,UAAWH,EAAQyB,eAI9E,cAAC0Z,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAACnL,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,SACI,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBAAKwR,IAAK4jD,GAAazjC,IAAI,gBAAgBv9B,UAAWH,EAAQyB,oBAhBtF,iBA0Bb,eAACkU,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,GAAayH,oBAAqBxC,GAA1E,UACa,cAAChN,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAACuP,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SAEX,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,uBAGA,cAACpX,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACsB,cAAC/N,EAAA,EAAD,CAAQ8G,WAAS,EAACrb,MAAM,UAAUkV,KAAK,QAAQV,QAASlC,GAAxD,sBAIJ,cAAC8D,EAAA,EAAD,CAAYI,KAAK,QAAQxW,MAAM,UAAUwU,QAASlC,GAAa,aAAW,eAKlF,cAACzS,EAAA,EAAD,CAAKE,MAAO,CAAEY,MAAO,MAAM2lD,UAAU,UAArC,SAEI,cAAC+Z,GAAA,EAAD,CAASlC,WAAYA,GAArB,SACKrB,GAAMvwD,KAAI,SAAC8V,EAAO/d,GACnB,IAAMg8D,EAAY,GAMlB,OAHIlB,GAAc96D,KACdg8D,EAAUC,WAAY,GAGtB,cAACC,GAAA,EAAD,2BAAsBF,GAAtB,aACA,cAACG,GAAA,EAAD,2BAPe,IAOf,aAA4Bp+C,OADjBA,UAQvB,eAACxiB,EAAA,EAAD,CAAKE,MAAO,CAAEY,MAAO,MAAM2lD,UAAU,SAAU4I,aAAa,UAA5D,UAGwB,IAAfiP,GACG,eAAC/jD,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,eAACxa,EAAA,EAAD,CAAKE,MAAO,CAACY,MAAM,QAAnB,UACI,cAACT,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACI,iDAEJ,cAAC0D,GAAA,EAAD,IACA,eAACX,GAAA,EAAD,CAAMC,WAAS,EAAEtP,eAAe,eAAhC,UAkBI,eAAC2P,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UACI,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,iBAAf,+BACA,cAAC6E,GAAA,EAAD,CACAwS,QAAQ,iBACRrX,GAAG,gBACH3N,MAAQ+0D,IAAuC,GAC/CjnD,SAnSV,SAACK,GAC3B,IAEI,IAAIuxC,EAAWvxC,EAAM3D,OAAOxK,MAC5By1D,GAAoB,IACpBruC,GAAY,GACZiuC,GAAiB,MACjBE,GAAkB,MACK,QAApB7V,EAAS74C,OAGR4uD,GAAqBgB,GAAsBnrD,KAAKgrB,kBAE9Cm/B,GAAoB,IAG1BP,GAAwC,QAApBxV,EAAS74C,QAC7BuuD,GAA0C,QAArB1V,EAAStC,SAE9B4X,GAAoBtV,GACtB,MAAOpjD,MAgR2B2P,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,SAQCiZ,GAAUpyD,KAAI,SAACs7C,GAEZ,OACA,cAACjtC,GAAA,EAAD,CAA6BzS,MAAO0/C,EAApC,SACKA,EAASvC,iBADCuC,EAAS51C,aAQV,OAArBirD,GACD,gCAGKE,GACG,eAAC1iD,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UACI,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,uBAAf,+BACA,cAAC6E,GAAA,EAAD,CACAwS,QAAQ,uBACRrX,GAAG,sBACH3N,MAAQiyD,IAAiC,GACzCnkD,SAnV1B,SAACK,GAEnBknD,GAAiBlnD,EAAM3D,OAAOxK,OAU9BsvD,EAAiB,KAwU2BrjD,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,SAQCn2B,GAAUhjB,KAAI,SAAC5I,GAAD,OACX,cAACiX,GAAA,EAAD,CAA4BzS,MAAOxE,EAAnC,SACKA,EAAQ+nB,gBADE/nB,EAAQsO,aAOnC,wBAICqrD,GACD,eAAC5iD,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UACI,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,wBAAf,gCACA,cAAC6E,GAAA,EAAD,CACAwS,QAAQ,wBACRrX,GAAG,uBACH3N,MAAQs1D,IAAmC,GAE3CxnD,SA3VhB,SAACK,GAEzBonD,GAAkBpnD,EAAM3D,OAAOxK,OAC/BsvD,EAAiB,KAyVuBrjD,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GAPX,SASCiY,GAAiBpxD,KAAI,SAAC5I,GAAD,OAClB,cAACiX,GAAA,EAAD,CAA4BzS,MAAOxE,EAAnC,SACCA,EAAQ+nB,gBADM/nB,EAAQsO,aAO/B,2BAIR,8BAIJ,eAACpS,EAAA,EAAD,CAAKE,MAAO,CAACY,MAAM,QAASuV,GAAI,EAAGlB,GAAI,EAAvC,UACI,cAAC9U,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACI,4DAEJ,cAAC0D,GAAA,EAAD,IACA,eAACX,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,eAACK,EAAA,EAAD,CAAatb,UAAWH,EAAQwmD,YAAhC,UAEQ,cAACxc,EAAA,EAAD,CAAYnzB,GAAG,mBAAf,wBACA,cAAC6E,GAAA,EAAD,CACAwS,QAAQ,mBACRrX,GAAG,kBACH3N,MAAO01D,GACP5nD,SA5VX,SAACK,GAC9BwnD,GAAcxnD,EAAM3D,OAAOxK,QA4VaiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,SAQCmX,GAAYtwD,KAAI,SAACm0D,GAAD,OACb,cAAC9lD,GAAA,EAAD,CAAsBzS,MAAOu4D,EAAO3gE,MAAO+lD,GAAU4a,EAAO7C,GAAYl/D,GAAxE,SACC+hE,GADcA,WAO3B,cAAChmD,EAAA,EAAD,UACI,eAAC7a,EAAA,EAAD,CAAKc,MAAM,QAAQ4hB,GAAI,EAAGrM,GAAI,EAA9B,UACI,cAAChW,EAAA,EAAD,qBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTzV,UAAWH,EAAQmV,MACnB4B,KAAK,OACLd,KAAK,QACLtC,KAAK,SACLuC,QAAQ,WACRhN,MAAO41D,GAEP9nD,SAAU,SAACvD,GAAD,OAAOsrD,GAAUtrD,EAAEC,OAAOxK,eAI5C,eAACtI,EAAA,EAAD,CAAKc,MAAM,QAAS4hB,GAAI,EAAGrM,GAAI,EAA/B,UACI,cAAChW,EAAA,EAAD,gDAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTzV,UAAWH,EAAQmV,MACnB4B,KAAK,OACLd,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRhN,MAAO81D,GAEPhoD,SAAU,SAACvD,GAAD,OAAOwrD,GAAexrD,EAAEC,OAAOxK,sBASrE,cAACtI,EAAA,EAAD,UAGI,eAACA,EAAA,EAAD,CAAKE,MAAO,CAACY,MAAM,QAAS4hB,GAAI,EAAhC,UAGI,cAACriB,EAAA,EAAD,CAAYd,UAAWH,EAAQoY,SAA/B,SACI,kDAEJ,eAAC+C,GAAA,EAAD,CAAOC,WAAS,EAACzC,UAAU,MAA3B,UACI,eAACwC,GAAA,EAAD,CAAME,MAAI,EAAClb,UAAWH,EAAQy9D,SAA9B,UACI,cAACx8D,EAAA,EAAD,kCACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACI,cAACm3B,GAAA,EAAD,CACAhiB,GAAG,4BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAAS5qB,EACT6qB,eAAgB,SAACC,GAAD,OACZA,EAAOhzB,gBAAgBzC,cACrBy1B,EAAOhzB,gBAAgBzC,cACvB,OAEN01B,YAAa,SAACvD,GAAD,OACT,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEnCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,GAAD,OACfA,EAAOhzB,gBAAgBzC,sBAQnC,eAAC4X,GAAA,EAAD,CAAME,MAAI,EAAClb,UAAWH,EAAQy9D,SAA9B,UACI,cAACx8D,EAAA,EAAD,4BACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACI,cAACm3B,GAAA,EAAD,CACAhiB,GAAG,2BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAAS5qB,EACT6qB,eAAgB,SAACC,GAAD,OACZA,EAAOhzB,gBAAgBwI,cACrBwqB,EAAOhzB,gBAAgBwI,cACvB,OAENyqB,YAAa,SAACvD,GAAD,OACT,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEnCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,GAAD,OACfA,EAAOhzB,gBAAgBwI,sBAMnC,eAAC2M,GAAA,EAAD,CAAME,MAAI,EAAClb,UAAWH,EAAQy9D,SAA9B,UACI,cAACx8D,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACI,cAACm3B,GAAA,EAAD,CACAhiB,GAAG,sCACHZ,KAAK,QACLL,WAAS,EACTkjB,QAAS5qB,EACT6qB,eAAgB,SAACC,GAAD,OACZA,EAAOhzB,gBAAgB2jB,iBACrBqP,EAAOhzB,gBAAgB2jB,iBACvB,OAENsP,YAAa,SAACvD,GAAD,OACT,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEnCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,GAAD,OACfA,EAAOhzB,gBAAgB2jB,yBAKnC,eAACxO,GAAA,EAAD,CAAME,MAAI,EAAClb,UAAWH,EAAQy9D,SAA9B,UACI,cAACx8D,EAAA,EAAD,iCACA,cAACL,EAAA,EAAD,CAAKc,MAAO,IAAZ,SACI,cAACm3B,GAAA,EAAD,CACAhiB,GAAG,qCACHZ,KAAK,QACLL,WAAS,EACTkjB,QAAS5qB,EACT6qB,eAAgB,SAACC,GAAD,OACZA,EAAOhzB,gBAAgB01B,gBACrB1C,EAAOhzB,gBAAgB01B,gBACvB,OAENzC,YAAa,SAACvD,GAAD,OACT,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eAEnCc,SAAU,SAACoiB,EAAGlwB,GAAJ,OAAcm+B,GAAuBn+B,IAC/CmwB,kBAAmB,SAACL,GAAD,OACfA,EAAOhzB,gBAAgB01B,2BA2EvC,cAAC96B,EAAA,EAAD,CAAMqW,GAAI,EAAV,SACI,eAACkE,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGN,MAAO,CAACY,MAAM,QAA1C,UACK,cAACyZ,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SAEI6iD,GAED,cAAC,GAAD,CAAqBnmD,MAAM,YAAYmkD,KAAK,EAAMhB,cAAeA,KAEhE,cAAC,GAAD,CAAqBnjD,MAAM,YAAYmkD,KAAK,EAAMhB,cAAe,SAGtE,cAAChgD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACI,cAAC,GAAD,CAAqBtD,MAAM,wBAAwBmkD,KAAK,EAAOhB,cAAeA,iBAclG,eAACv6D,EAAA,EAAD,CAAKE,MAAO,CAAED,QAAS,OAAQgL,cAAe,MAAO61D,GAAI,GAAzD,UACI,cAACpsD,EAAA,EAAD,CACAvU,MAAM,UACN2U,SAAyB,IAAfwpD,GACV3pD,QAAS+qD,GACTY,GAAI,CAAElgE,GAAI,GAJV,sBAQA,cAACJ,EAAA,EAAD,CAAKE,MAAO,CAAEoX,KAAM,cAOhB,cAAC5C,EAAA,EAAD,CAAQI,UAAWqoD,EAAcxoD,QAAS,kBAAO2pD,GAAarB,GAAMvvD,OAAQ,EA9lBrF,WAKf,IAAIqzD,EAAatC,GACbc,GAAcjB,MACdyC,EAAa,IAAIvC,IAAIuC,EAAW/yC,WACrBgzC,OAAO1C,IAGtBC,IAAc,SAACoB,GAAD,OAAoBA,EAAiB,KACnDjB,GAAWqC,GAklB8FE,GAAe/jC,MAAhG,SACKohC,GAAarB,GAAMvvD,OAAQ,EAAM,YAAc,mBAOpE,eAACqH,GAAA,EAAD,CAAQpV,KAAMg/D,GAAS/+D,QAASs9B,GAAhC,UACI,cAACjoB,GAAA,EAAD,UAAc,kDACd,eAAC2B,GAAA,EAAD,WACI,cAAClC,EAAA,EAAD,CAAQC,QAAS,kBAAMuoB,MAAe/8B,MAAM,UAA5C,sBAGA,cAACuU,EAAA,EAAD,CAAQvU,MAAM,YAAYqb,WAAS,EAAClG,QAAQ,YAAYX,QAAS,kBAAMirD,MAAvE,6BAMf,cAAC3gE,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,U,yBCzgC7CmrC,GAAYC,KAAYD,UACxBE,GAAaD,KAAYC,WACzBC,GAAcF,KAAYE,YAgCjBy2B,oBA7Bf,SAAuBtpD,GACtB,OACC,cAAC,WAAD,UACU,cAAC2C,GAAA,EAAD,UACI,cAACA,GAAA,EAAD,CAAME,MAAI,EAAV,SACA,cAAC,GAAD,CACX2E,QACC,cAAC1K,EAAA,EAAD,CAAQW,KAAK,QAAQlV,MAAM,UAAUmV,QAAQ,YAAYV,UAAW,cAAC,KAAD,IAApE,4BAIDm2B,SAAUnzB,EAAMupD,SANL,SAQX,cAAC,GAAD,CAAYvtD,KAAMgE,EAAMhE,KAAMb,KAAM6E,EAAMupD,SAA1C,SACoBvpD,EAAMwpD,WAAW10D,KAAI,SAAC0S,GACnB,OACI,cAAC,GAAD,CAAaoD,MAAOpD,EAAQoD,MAAOla,MAAO8W,EAAQnJ,qBCV5ErX,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,UAIE,SAASygE,GAAezpD,GACtC,IAAMxY,EAAUR,KAEhB,EAA0B4I,IAAMrC,SAAS,GAAzC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCpoC,IAAMrC,SAAS,IAAvD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KACM/9B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAI/C,EAAoC6L,aAASmT,GAAkB,CAC9D9X,UAAW,CACV2B,GAAIlE,EAAO/H,SAASoI,OAFdzH,EAAR,EAAQA,QAAS/F,EAAjB,EAAiBA,MAAOkN,EAAxB,EAAwBA,QAKfwvD,EAAY,GACf7mB,EAAU,CACf,CAAExkC,GAAI,gBAAiBuM,MAAO,sBAAoB7B,SAAU,GAAK4gD,QAAS,KAG1E,CAAEtrD,GAAI,mBAAoBuM,MAAO,mBAAoB7B,SAAU,IAAK4gD,QAAS,MAQ9EroD,qBACC,WACCpH,MAED,CAAEA,IAGA8F,EAAMgnB,mBAERhnB,EAAMgnB,iBAAiBzO,SAAQ,SAAA/Q,GAC9Bq7B,EAAQn7B,KAAK,CAAErJ,GAAImJ,EAAQhN,IAAKoQ,MAAOpD,EAAQyM,eAAgBlL,SAAU,GAAI4gD,QAAS,SAGvF9mB,EAAQn7B,KAAK,CAAErJ,GAAI,QAASuM,MAAO,oBAAqB7B,SAAU,GAAI4gD,QAAS,OAGhF,IAAMC,EAAS,SAAC,GAAgB,IAAf10D,EAAc,EAAdA,SACZ20D,EAAgB,GAChBhxB,EAAI,CAAC,cAAkB3jC,EAAS1H,gBAAgBzC,cAAe,iBAAmBmK,EAAS1H,gBAAgB2jB,iBAAkB7oB,MAAO,CACrHwhE,KAAM,CAAEC,GAAI,MACZC,UAAW,CAAEC,UAAU,EAAMniE,WAAY,SAAUD,SAAU,OAC7Dic,OAAQ,CAAEo7B,OAAQ,CAAE52C,MAAO,OAAQC,MAAO,CAAE2hE,IAAK,cAEhEt+C,EAAM,EAgBV,OAdA5L,EAAMgnB,iBAAiBzO,SAAQ,SAAC4xC,GAC/B,IAAM5pB,EAAcrrC,EAASk1D,qBAAqB7xD,QAAO,SAACmY,GAAD,OAAgBA,EAAWlW,IAAItO,QAAQsO,MAAQ2vD,EAAe3vD,OACpH+lC,EAAYzqC,OAAS,GACvB+zD,EAAgBniD,KAAK64B,EAAY,GAAGf,oBACpC3G,EAAG,2BAAOA,GAAP,kBAAasxB,EAAe3vD,IAAM+lC,EAAY,GAAGf,qBACpD5zB,GAAS20B,EAAY,GAAGf,qBAExBqqB,EAAgBniD,KAAK,GACrBmxB,EAAG,2BAAOA,GAAP,kBAAasxB,EAAe3vD,IAAK,QAGtCq+B,EAAG,2BAAOA,GAAP,IAAYjtB,MAAMA,IAErB89C,EAAUhiD,KAAKmxB,GAEd,eAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,CAAW5e,MAAO,CAACygB,SAAS,IAA5B,SAAmC7T,EAAS1H,gBAAgBzC,gBAG5D,cAACmc,GAAA,EAAD,CAAW5e,MAAO,CAACygB,SAAS,KAA5B,SAAoC7T,EAAS1H,gBAAgB2jB,mBAK5D04C,EAAgB/0D,KAAI,SAACnK,EAAUkC,GAC9B,OAAO,cAACqa,GAAA,EAAD,CAAuB5e,MAAO,CAACuK,gBAAgB,2BAA4BtK,MAAM,QAAQiL,SAAS,GAAIuqC,UAAU,SAASh1B,SAAS,IAAlI,SAAyIpe,GAAzHkC,MAGzB,cAACqa,GAAA,EAAD,CAAY5e,MAAO,CAACuK,gBAAgB,2BAA4BtK,MAAM,QAASiL,SAAS,GAAGoiB,WAAW,OAAQmoB,UAAU,SAAUh1B,SAAS,IAA3I,SAAiJ6C,MAb/F1W,EAASsF,MA2B9D,OAAIzH,EAEH,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGElG,EACI,cAACmG,GAAD,CAAWnG,MAAOA,IAKzB,gCACA,eAAC8iB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAAC,aAAW,eAA/B,UACC,cAAC/I,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,EAAQ/tC,KAAI,SAACiuC,EAAQl2C,GAAT,OACZ,cAACqa,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAACy1C,UAAWlxC,EAAQ,EAAI,SAAU,OAAQkc,SAAUg6B,EAAOh6B,SAAU7f,MAAO65C,EAAOh6B,UAA1I,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACEnH,EAAMtK,UAAUkjC,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,EAAKhsC,GACtF,OACC,cAAC+8D,EAAD,CAAQ10D,SAAU2jC,GAAUhsC,aAMjC,cAACisC,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAOpuB,EAAMtK,UAAUI,OACvBmiC,YAAaA,EACbF,KAAMA,EACNiB,aAjDsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAiDNC,oBA9C6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,IA6CN8sB,iBAAkB,+BAIlB9kD,EAAMtK,UAAUI,OAAS,EAC1B,cAAC1N,EAAA,EAAD,CAAKqa,EAAG,EAAGg1C,aAAa,WAAxB,SACC,cAAC,GAAD,CAAe8R,SAAS,sBAAsBvtD,KAAM0tD,EAAWF,WAAY3mB,MAG5E,2BChKH,IAAM77C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPwlD,WAAY,CACLx8D,OAAQxB,EAAM0B,QAAQ,KAC5BD,UAAW,EACLogB,SAAU,MACVhgB,SAAU,OAEd4W,KAAM,CACRnM,SAAU,KAEXvK,OAAQ,CACPC,MAAO,KAER+7D,SAAS,CACRv8D,OAAO,IAER04B,OAAO,CACN14B,OAAQxB,EAAM0B,QAAQ,QAIlBkX,GAAaC,sBAAW,SAAoBC,EAAOC,GACxD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAKtCiuC,GAAY,CAChBC,WAAY,CACV5lD,MAAO,CACLU,UAAWmlD,IACXjlD,MAAO,OAIb,SAASmlD,GAAU32B,EAAM42B,EAAUpnD,GACjC,MAAO,CACL0uB,YAC8B,IAA5B04B,EAASvS,QAAQrkB,GACbxwB,EAAMqnD,WAAWC,kBACjBtnD,EAAMqnD,WAAWE,kBAGZ,SAAS4b,KACpB,IAAM7iE,EAAUR,KAEnB,GADcmyB,eACYvpB,IAAMrC,UAAS,IAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KAcG,OACI,gCACI,cAAC0C,EAAA,EAAD,CAAQM,WAAS,EAACL,QAZL,WACvB3C,GAAQ,IAWE,SACR,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAK,kFAAmFmgB,IAAI,gBAAgBv9B,UAAWH,EAAQyB,WAFtI,8BAOD,cAAC,GAAD,CAAsBlB,KAAMA,EAAM8S,YAhBhB,WACnBT,GAAQ,SAoBV,IAAMkwD,GAAuB,SAACtqD,GAC7B,IAAMxY,EAAUR,KACVE,EAAQiyB,eACd,EAAgCvpB,IAAMrC,UAAS,GAA/C,mBAAQwF,EAAR,KAAiBC,EAAjB,KAEA,EAA8BpD,IAAMrC,SAAS,CAAGxC,cAAe,GAAGiL,cAAe,GAAG8c,cAAe,GAAG3B,iBAAkB,GACjH+R,gBAAiB,GAAGN,UAAW,GAAGQ,aAAc,KADvD,mBAAQ4Q,EAAR,KAAgBO,EAAhB,KAGA,EAAkC3kC,IAAMrC,SAAS,IAAjD,mBAAQg9D,EAAR,KAAkBC,EAAlB,KAGA,EAAsB56D,IAAMrC,SAAS,IAA7Bq1B,EAAR,oBACA,EAAyBhzB,IAAMrC,SAAS,IAAhC61B,EAAR,oBACA,EAAwCxzB,IAAMrC,SAAS,IAAvD,mBAAQk9D,EAAR,KAAqBC,EAArB,KACA,EAA8C96D,IAAMrC,SAAS,IAA7D,mBAAQo9D,EAAR,KAAwBC,EAAxB,KACA,EAA4Ch7D,IAAMrC,SAAS,IAA3D,mBAAQiB,EAAR,KAAuBC,EAAvB,KACA,EAAgByb,aAAY8pB,EAAQ,KAA7BtjC,EAAP,oBACMyJ,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE3CE,EAAY,GAEZ4sB,EAAa,GAEb0E,EAAmB,GAGd6jC,EAAwBxpD,aAASqT,GAA0B,CACnEhY,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,IAC1Bw5B,OAAQtjC,KAIJ22D,EAAkBhmD,aAASsT,GAAmB,CACnDjY,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAItB2sD,EAAwB9lD,aAASmT,GAAkB,CACxD9X,UAAW,CACV2B,GAAIlE,EAAO/H,SAASoI,OAGtB5K,IAAM0R,WACL,WAECkpD,EAAY95D,KAEb,CAAEA,IAGHd,IAAM0R,WACL,WAECupD,EAAsB3wD,YAEvB,CAAEqwD,EAAUM,IAEbj7D,IAAM0R,WACL,WACC6lD,EAAsBjtD,YAEvB,CAAEitD,EAAsB73D,OAAQ63D,IAGjCv3D,IAAM0R,WACL,WAECupD,EAAsB3wD,UACtBlH,GAAW,KAEZ,CAAE63D,IAGHj7D,IAAM0R,WACL,WAEC+lD,EAAgBntD,YAGjB,CAAEmtD,EAAgBntD,UAIhB2wD,EAAsB7uD,OACxBtG,EAAYm1D,EAAsB7uD,KAAK8uD,2BAErCzD,EAAgBrrD,OAClBsmB,EAAa+kC,EAAgBrrD,KAAKutC,mBAGhC4d,EAAsBnrD,OACxBgrB,EAAmBmgC,EAAsBnrD,KAAKgrB,kBAG9C,IAAM+jC,EAAiB,SAACngD,EAAMla,GAC9B,IAGC,GAFAsC,GAAW,GAEE,cAAV4X,GAAmC,KAAVla,EAAa,CACxC,IAAMs6D,EAAM1oC,EAAWmhC,MAAK,SAAAj8C,GAAO,OAAIA,EAAQob,YAAclyB,KAC7DjC,EAAiBu8D,EAAIx8D,eAGtB,GAAa,cAAVoc,EAAuB,CAEzB,IAAIqgD,EAAG,2BAAOj3B,GAAP,IAAe5Q,aAAeunC,EAAgB/nC,UAAUlyB,IAE/Dm6D,EAAsB3wD,QACrB,CACC85B,OAAQi3B,IAGVP,EAA0B,KAAVh6D,EAAgBA,EAAQ,IACxCk6D,EAAkB,IAWoC,IAAD,EAAtD,GATa,iBAAVhgD,GAAqC,KAAVla,IAE7Bm6D,EAAsB3wD,QACrB,CACC85B,OAAO,2BAAKA,GAAN,IAAc5Q,aAAe1yB,EAAOkyB,UAAU6nC,MAGtDG,EAA6B,KAAVl6D,EAAgBA,EAAQ,KAE/B,cAAVka,GAAmC,iBAAVA,EAC3B2pB,EAAU,2BAAIP,GAAL,uBAAcppB,EAASla,GAAvB,6BAA6Ci6D,GAA7C,0BAAuEF,GAAvE,KAGT,MAAOz9D,MAIV,OACC,eAACmQ,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMiY,EAAMjY,KAAMC,QAASgY,EAAMnF,YAAayH,oBAAqBxC,GAAtF,UACE,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,uBAGA,cAACpX,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAACziB,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASiD,EAAMnF,YAAa4C,KAAK,QAA/E,SACC,cAAC,KAAD,CAAOnV,MAAO,CAAEkL,SAAU,YAIX,cAACmL,EAAA,EAAD,CAAYI,KAAK,QAAQxW,MAAM,UAAUwU,QAASiD,EAAMnF,YAAa,aAAW,eAKpG,eAAC8H,GAAA,EAAD,CAAMC,WAAS,EAACzC,UAAU,MAA1B,UACoB,eAAC/X,EAAA,EAAD,CAAKc,MAAM,MAAMvB,UAAWH,EAAQy9D,SAApC,UACI,cAACx8D,EAAA,EAAD,kCACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WAERc,SAAU,SAACvD,GAAD,OAAQ8vD,EAAe,gBAAiB9vD,EAAEC,OAAOxK,eAIvE,eAACtI,EAAA,EAAD,CAAKc,MAAM,MAAMvB,UAAWH,EAAQy9D,SAApC,UACI,cAACx8D,EAAA,EAAD,4BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WAEnCc,SAAU,SAACvD,GAAD,OAAQ8vD,EAAe,gBAAiB9vD,EAAEC,OAAOxK,eAK5C,eAACtI,EAAA,EAAD,CAAKc,MAAM,MAAMvB,UAAWH,EAAQy9D,SAApC,UACI,cAACx8D,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WAEnCc,SAAU,SAACvD,GAAD,OAAQ8vD,EAAe,mBAAoB9vD,EAAEC,OAAOxK,eAI/C,eAACtI,EAAA,EAAD,CAAKc,MAAM,MAAMvB,UAAWH,EAAQy9D,SAApC,UACI,cAACx8D,EAAA,EAAD,iCACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QAELtC,KAAK,kBACLkD,GAAG,gCACHX,QAAQ,WAEnCc,SAAU,SAACvD,GAAD,OAAQ8vD,EAAe,kBAAmB9vD,EAAEC,OAAOxK,eAI9C,eAACuS,EAAA,EAAD,CAAatb,UAAWH,EAAQ09D,WAAhC,UAEI,cAAC1zB,EAAA,EAAD,CAAYnzB,GAAG,aAAf,kBACA,eAAC6E,GAAA,EAAD,CACAwS,QAAQ,aACRrX,GAAG,gBACH3N,MAAOsjC,EAAOlhB,cACdtU,SAAU,SAACvD,GAAD,OAAO8vD,EAAe,gBAAiB9vD,EAAEC,OAAOxK,QAC1DiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,UAQI,cAAC9qC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,OAAhB,kBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,yBAIR,eAACuS,EAAA,EAAD,CAAatb,UAAWH,EAAQ09D,WAAhC,UAEI,cAAC1zB,EAAA,EAAD,CAAYnzB,GAAG,kBAAf,0BACA,eAAC6E,GAAA,EAAD,CACAwS,QAAQ,kBACRrX,GAAG,YACH3N,MAAO+5D,EACPjsD,SAAU,SAACvD,GAAD,OAAO8vD,EAAe,YAAa9vD,EAAEC,OAAOxK,QACtDiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,UAQpB,cAAC9qC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACwB,kDAEH4xB,EAAWxtB,KAAI,SAACk2D,GAAD,OACZ,cAAC7nD,GAAA,EAAD,CAAwBzS,MAAOs6D,EAAIpoC,UAAYt6B,MAAO+lD,GAAU2c,EAAIxwD,IAAKooB,EAAW17B,GAApF,SACC8jE,EAAIpoC,WADUooC,EAAIxwD,cAO7C,eAACyI,EAAA,EAAD,CAAatb,UAAWH,EAAQ09D,WAAhC,UAEsB,cAAC1zB,EAAA,EAAD,CAAYnzB,GAAG,qBAAf,6BACA,eAAC6E,GAAA,EAAD,CACAwS,QAAQ,qBACRrX,GAAG,eACH3N,MAAOi6D,EACPnsD,SAAU,SAACvD,GAAD,OAAO8vD,EAAe,eAAgB9vD,EAAEC,OAAOxK,QACzDiM,MAAO,cAACoU,GAAA,EAAD,IACPk9B,UAAWA,GANX,UAQpB,cAAC9qC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SAC4B,kDAEPlC,EAAcsG,KAAI,SAACo2D,GAAD,OACf,cAAC/nD,GAAA,EAAD,CAA2BzS,MAAOw6D,EAAO9nC,aAAc96B,MAAO+lD,GAAU6c,EAAO1wD,IAAK4oB,EAAcl8B,GAAlG,SACCgkE,EAAO9nC,cADO8nC,EAAO1wD,iBAchDzH,EAED,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAGC23D,EAAsB79D,OAASq6D,EAAgBr6D,MAC/C,cAACmG,GAAD,CAAWnG,MAAO69D,EAAsB79D,QAEzC,cAAC5E,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACC,cAAC,GAAD,CAAgBnV,UAAWA,EAAWsxB,iBAAkBA,UCjYhD,SAASmkC,KAEvB,OACC,cAACzoD,EAAA,EAAD,UACC,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,UACC,cAACtC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACisD,GAAD,QAGF,cAAC78C,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,UACC,cAAC+xD,GAAD,UAIH,cAAC3iD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC82D,GAAD,aCZN,IAAMxnB,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KACzC,CAAE1K,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,KACvC,CAAE1K,GAAI,aAAcuM,MAAO,YAAa7B,SAAU,KAClD,CAAE1K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,KAC7C,CAAE1K,GAAI,SAAUuM,MAAO,gBAAiB7B,SAAU,KAClD,CAAE1K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,MAG1C/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACVzZ,OAAQ,OAENoW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAKd,SAASwiE,GAAT,GAAuD,IAAtBr4D,EAAqB,EAArBA,QAASs4D,EAAY,EAAZA,UAClD7jE,EAAUR,KAEhB,OAAI+L,EAEF,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAKF,mCACC,cAAC9K,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAM,SAASnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAApE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACEkkD,EAAUv2D,KAAI,SAAC+jC,GACf,OACC,cAAC,GAAD,CAECp+B,MAAOo+B,GADFA,EAAIr+B,qBAepB,SAASg/B,GAAT,GAA8B,IAAT/+B,EAAQ,EAARA,MACpB,EAAwBlN,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMuyB,EAAiB,kBAAKvyB,GAASrS,IAE/BP,EAAUR,KAGhB,OAFAiP,QAAQC,IAAIuE,GAGX,qCACC,eAACwM,GAAA,EAAD,CACC4J,OAAK,EACLmB,KAAK,WACLjV,QAAS4vB,EACToE,UAAW,EAJZ,UAMC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B4Y,KAAO5R,EAAMi2C,iBAAiBD,UAAUlkC,OAAO,gBAC1E,cAACrF,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BgH,EAAM41C,cAAcI,WAC/C,cAACvpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BgH,EAAMq1C,kBACjC,cAAC5oC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BgH,EAAM8pC,yBACjC,cAACr9B,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BgH,EAAM01C,gBACjC,cAACjpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2BgH,EAAM21C,cAGlC,cAACjzC,GAAA,EAAD,CACCC,WAAW,EACXrU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EAJV,SAMC,cAACrvB,GAAA,EAAD,UACC,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,cAACD,GAAA,EAAD,CAAMwC,GAAI,GAAIpC,GAAI,GAAlB,SACC,cAAC3a,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,SACC,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,8CAKF,eAACiF,GAAA,EAAD,CAAMwC,GAAI,GAAIpC,GAAI,GAAlB,UACC,cAAC3a,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,mDADD,IAC4B4jB,KAAO5R,EAAMi2C,iBAAiBD,UAAUlkC,OAAO,mBAG5E,cAACnkB,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,kDADD,IAC2BgS,EAAM41C,cAAcI,cAGhD,cAACroD,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,0CADD,IACmBgS,EAAM8pC,4BAG1B,cAACn8C,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,cAAC/P,EAAA,EAAD,UACC,uDAGF,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,kDADD,IAC2BgS,EAAMq1C,qBAGlC,cAAC1nD,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,2CADD,IACoBgS,EAAM21C,cAG3B,cAAChoD,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,uCADD,IACgBgS,EAAM6oC,iBAGvB,cAACxzB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,sBAGA,cAAC7B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,mCAKF,eAAC5B,GAAA,EAAD,WACC,eAACF,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,wDAC1B,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,kCAAKgH,EAAMw2C,eAAeC,eAAeC,cAEpE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,sBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeM,eAAeJ,YAEjE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,4BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeI,qBAAqBF,YAEvE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,6BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeK,sBAAsBH,YAExE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,sBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeO,eAAeL,YAEjE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,qBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeS,cAAcP,YAEhE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,4BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeQ,oBAAoBN,YAEtE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,+BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4BgH,EAAMw2C,eAAeU,qBAAqBR,mC,uFC/L5EnqD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsY,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJH,OAAQ,CACVzB,SAAU,YAEX0H,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR+W,KAAM,CACLnM,SAAU,GACVtK,MAAO,IAELoiE,SAAU,CACZlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIjBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtCouC,GAAQ,CACV,QACA,QACA,WACA,SACA,iBAGW,SAASod,GAAcxrD,GAClC,IAAMxY,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwCjI,mBAAS,IAAjD,mBAAQk+D,EAAR,KAAqBC,EAArB,KACA,EAAsCn+D,mBAAS,IAA/C,mBAAQo+D,EAAR,KACH,GADG,KACezhD,uBAAYuhD,EAAa,MAAnC/6D,EAAR,oBAEIk7D,EAAuB,GAG3B,EAAoCvqD,aAASsiC,GAAwB,CACpEjnC,UAAW,CACDuzC,QAASjwC,EAAM6rD,aAAarxD,IAC5BlI,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,IACjBmC,MAAO,CACHmzC,gBAAiB2b,EAAY3b,gBAAkB2b,EAAY3b,gBAAmB,GAC9Egc,YAAaL,EAAYK,YAAcL,EAAYK,YAAc,GACjExZ,UAAWmZ,EAAYnZ,UAAYmZ,EAAYnZ,UAAY,GAC3DnpB,QAASz4B,EAAMy4B,QAAUz4B,EAAMy4B,QAAU,OAT/CntB,EAAT,EAASA,KAAM9B,EAAf,EAAeA,QAASnH,EAAxB,EAAwBA,QAcrBuO,qBACF,WACCpH,MAED,CAAEA,IAGA,IAAI6xD,EAAa,GA0BjB/vD,GAxBqB,SAACgwD,GAClBL,EAAW1jD,OAAO,EAAG0jD,EAAW71D,QAChC,IAAK,IAAID,EAAI,EAAGA,EAAIm2D,EAAel2D,OAAQD,IACvCk2D,EAAa,CACTl4D,MAAOm4D,EAAen2D,GAAG66C,iBAAiBD,SAC1Cwb,gBAAiBD,EAAen2D,GAAGw6C,cAAcI,SACjDn/B,OAAQ06C,EAAen2D,GAAG0uC,uBAC1B4L,cAAe6b,EAAen2D,GAAGs6C,cACjCL,gBAAiBkc,EAAen2D,GAAGi6C,gBACnCM,SAAU4b,EAAen2D,GAAGu6C,SAC5B8b,KAAMF,EAAen2D,GAAGytC,YACxB4N,eAAgB8a,EAAen2D,GAAGo7C,eAAeC,eAAeC,MAChEI,eAAgBya,EAAen2D,GAAGo7C,eAAeM,eAAeJ,MAChEE,qBAAsB2a,EAAen2D,GAAGo7C,eAAeI,qBAAqBF,MAC5EG,sBAAuB0a,EAAen2D,GAAGo7C,eAAeK,sBAAsBH,MAC9EK,eAAgBwa,EAAen2D,GAAGo7C,eAAeO,eAAeL,MAChEO,cAAesa,EAAen2D,GAAGo7C,eAAeS,cAAcP,MAC9DM,oBAAqBua,EAAen2D,GAAGo7C,eAAeQ,oBAAoBN,MAC1EQ,qBAAsBqa,EAAen2D,GAAGo7C,eAAeU,qBAAqBR,OAEhFwa,EAAWjkD,KAAKqkD,GAMpBI,CADNP,EAAuB5vD,EAAK4vD,sBAI1B,IAAMQ,EAAc,SAACnxD,GACjBywD,EAAe,2BAAID,GAAL,kBAAmBxwD,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAY9D,OACI,eAACyM,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMiY,EAAMjY,KAAMC,QAAS,WAAKgY,EAAMnF,eAAiByH,oBAAqBxC,GAA/F,UACI,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACI,eAACiD,GAAA,EAAD,WACI,eAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,kBACUQ,EAAM6rD,aAAavoB,eAE7B,cAACl7C,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAU,WAAOiD,EAAMnF,eAAiB4C,KAAK,QAA3F,SACI,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAK7C,eAACmP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAAC,KAAD,CACI4E,QACI,eAAC1K,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UACN,aAAW,UACXZ,UAAWH,EAAQ8jE,SAJvB,UAMI,cAAC,KAAD,CAAU3jE,UAAWH,EAAQkB,SANjC,cAUJyqC,SAAQ,uCAAkCnzB,EAAM6rD,aAAavoB,aAZjE,SAcI,eAAC,KAAD,CAAYtnC,KAAM2vD,EAAYxwD,KAAI,uCAAkC6E,EAAM6rD,aAAavoB,aAAvF,UACI,cAAC,KAAD,CAAa14B,MAAM,UAAUla,MAAM,WACnC,cAAC,KAAD,CAAaka,MAAM,mBAAmBla,MAAM,UAC5C,cAAC,KAAD,CAAaka,MAAM,kBAAkBla,MAAM,oBAC3C,cAAC,KAAD,CAAaka,MAAM,mBAAmBla,MAAM,kBAC5C,cAAC,KAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,KAAD,CAAaka,MAAM,kBAAkBla,MAAM,oBAC3C,cAAC,KAAD,CAAaka,MAAM,cAAcla,MAAM,SACvC,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,uBAAuBla,MAAM,yBAChD,cAAC,KAAD,CAAaka,MAAM,wBAAwBla,MAAM,0BACjD,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,gBAAgBla,MAAM,kBACzC,cAAC,KAAD,CAAaka,MAAM,sBAAsBla,MAAM,wBAC/C,cAAC,KAAD,CAAaka,MAAM,sBAAsBla,MAAM,8BAGvD,cAACiS,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACI,sBAAKpb,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,kBACLqD,SAAU4tD,EACV17D,MAAO+6D,EAAY3b,gBAAkB2b,EAAY3b,gBAAkB,GAJvE,UAMI,cAAC3sC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEH09C,GAAMt5C,KAAI,SAAC4iB,EAAM7qB,GACd,OACI,cAACsW,GAAA,EAAD,CAAsBzS,MAAOgnB,EAA7B,SAAoCA,GAArB7qB,cAMnC,eAACzE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRa,KAAK,OACL7N,MAAO+6D,EAAYK,YAAcL,EAAYK,YAAc,GAC3DttD,SAAU4tD,OAGlB,eAAChkE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRa,KAAK,OACL7N,MAAO+6D,EAAYnZ,UAAYmZ,EAAYnZ,UAAY,GACvD9zC,SAAU4tD,OAGlB,sBAAMr1C,SAhHD,SAAClY,GAC5BA,EAAMC,iBACA5E,KA8GkD5R,MAAO,CAAED,QAAS,OAAQkL,WAAY,SAAUrK,MAAO,QAAzF,SACI,eAACd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRhN,MAAO+6D,EAAYtiC,QAAUsiC,EAAYtiC,QAAU,GACnD3qB,SAAU4tD,SAItB,cAAChkE,EAAA,EAAD,CAAKc,MAAM,MAAMb,QAAQ,OAAOiL,eAAe,SAAS4qC,aAAa,SAAS3qC,WAAW,SAAzF,SACI,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAC3B,EAAA,EAAD,CACIvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QAhIT,WACnB2uD,EAAe,KA2HS,8BAYhB,cAAC/oD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACI,cAACqoD,GAAD,CAAwBr4D,QAASA,EAASs4D,UAAWO,Y,2CC1PnES,GAAcC,cAAW,SAACplE,GAAD,MAAY,CACvCqlE,MAAO,CACLhkE,MAAO,qBAAEyX,MAAgBzX,OACzBw2B,WAAY,qBAAE/e,MAAgBzX,OAC9BikE,UAAU,aAAD,OAAetlE,EAAM2nB,QAAQkQ,WAAWtQ,OACjD,WAAY,CACV3Q,SAAU,WACVsR,IAAK,EACLq9C,KAAM,EACNvjE,MAAO,OACPC,OAAQ,OACR4a,aAAc,MACd2oD,UAAW,oCACX5oD,OAAQ,yBACR6oD,QAAS,OAGb,oBAAqB,CACnB,KAAM,CACJC,UAAW,YACX3zC,QAAS,GAEX,OAAQ,CACN2zC,UAAW,aACX3zC,QAAS,OAxBGqzC,CA2BdriC,MAEAjjC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJzF,SAAS,IACThgB,SAAU,IACVL,OAAO,GAGTmkE,MAAO,CACL1jE,OAAQ,EACR4tC,WAAY,UAEd+1B,OAAQ,CACNF,UAAW,eACXntD,WAAY,OACZstD,WAAY7lE,EAAM8lE,YAAYC,OAAO,YAAa,CAChDC,SAAUhmE,EAAM8lE,YAAYE,SAASC,YAGzCC,WAAY,CACVR,UAAW,kBAEb5oD,OAAQ,CACNzb,MAAO8kE,KAAI,MAEbC,WAAW,CACTxvD,SAAS,WACTohC,OAAO,OAII,SAASquB,GAASvtD,GAC7B,IAAMwtD,EAAW,CACfjlE,MAAQyX,EAAMytD,OAAW,UAAY,OAEjCjmE,EAAUR,KAEhB,OACI,8BACI,eAAC0mE,GAAA,EAAD,CAAM/lE,UAAWH,EAAQgnB,KAAzB,UACQ,cAACm/C,GAAA,EAAD,CACEplE,MAAM,YACJyb,OACI,cAACqoD,GAAD,CACEuB,QAAQ,SACR5tD,MAAOwtD,EACP5lE,aAAc,CACZC,SAAU,SACVC,WAAY,SAEd4V,QAAQ,MACRwsB,aAAa,GARf,SAUA,cAACplB,GAAA,EAAD,CAAQogB,IAAI,WAAWngB,IAAI,oCAInC,cAAC3c,EAAA,EAAD,CAAKqa,EAAG,EAAGlF,GAAI,EAAf,SACA,eAAC9U,EAAA,EAAD,CAAYiV,QAAQ,KAAKnV,MAAM,gBAAgB0V,UAAU,IAAzD,kBACc+B,EAAM7E,eC/ExC,IAAMnU,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,SAIH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASwkC,KAAS,IAAD,EACzBh9C,EAAUR,KACb,EAAgC4I,IAAMrC,UAAS,GAA/C,mBAAQwF,EAAR,KAAiBC,EAAjB,KACH,EAA0BpD,IAAMrC,UAAS,GAAzC,mBAAQxF,EAAR,KAAcqS,EAAd,KACG,EAA4CxK,IAAMrC,UAAS,GAA3D,mBAAQsgE,EAAR,KAAuBC,EAAvB,KACA,EAA4BvgE,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA0CqI,IAAMrC,SAAS,CAAC4N,KAAK,KAA/D,mBAAQ0wD,EAAR,KAAsBkC,EAAtB,KACM5zD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC3C6tC,EAAuB,GAI3B,EAA2BhiC,aAASoiC,GAAc,CACpD/mC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAHhBwB,EAAT,EAASA,KAAM9B,EAAf,EAAeA,QAOfoH,qBACF,WACCtO,GAAW,GACXkH,IACAlH,GAAW,KAEZ,CAAEkH,IAGA8B,IACFqnC,EAAuBrnC,EAAKqnC,sBAE7B,IAGS2qB,EAA2B,WACnCF,GAAiB,IAEZjzD,EAAc,WACnBT,GAAQ,IAMT,OACC,gCACU,cAAC/S,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACnD,cAACuL,GAAD,CAAmBC,QAASA,EAASC,WAAYA,IACjD,cAAC8J,EAAA,EAAD,CAAQM,WAAS,EAACL,QAjBI,WACvB3C,GAAQ,IAgBP,SACC,eAAChS,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBAAKwR,IAAI,uEAAuEmgB,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFhI,0BAOD,eAACxC,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS6S,EAAayH,oBAAqBxC,GAA1E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,gCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAASlC,EAAa4C,KAAK,QAAzE,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKjC,cAACmP,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,mBACEo+B,SADF,aACE,EAAsBvuC,KAAI,SAACo3D,EAAMr/D,GACjC,OACC,cAACiQ,EAAA,EAAD,CAAoBC,QAAS,WAAKixD,IAA4BD,EAAgB7B,IAA9E,SACC,cAACqB,GAAD,CAAUpyD,KAAM+wD,EAAK5oB,YAAamqB,OAAQvB,EAAKuB,OAAQQ,yBAA0B/B,EAAK+B,4BAD1EphE,WAOR,cAAC2+D,GAAD,CAAezjE,KAAM8lE,EAAeK,WAAYh0D,EAASyyB,gBAAiBqhC,EAA0BnC,aAAcA,EAAchxD,YAvC3G,WAC/BizD,GAAiB,IAsC4JzqB,qBAAsBA,O,oBCvG/LR,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KACzC,CAAE1K,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,KACvC,CAAE1K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,KAC7C,CAAE1K,GAAI,SAAUuM,MAAO,gBAAiB7B,SAAU,KAClD,CAAE1K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,KAC/C,CAAE1K,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,MAGlC/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,KAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAKd,SAASulE,GAAT,GAAkD,IAAnBp7D,EAAkB,EAAlBA,QAASq7D,EAAS,EAATA,OAChD5mE,EAAUR,KAEhB,OAAI+L,EAEF,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAKF,mCACC,cAAC9K,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAM,SAASnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAApE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACEinD,EAAOt5D,KAAI,SAAC+jC,GACZ,OACC,cAAC,GAAD,CAECw1B,MAAOx1B,GADFA,EAAIr+B,qBAepB,SAASg/B,GAAT,GAA8B,IAAT60B,EAAQ,EAARA,MACpB,EAAwB9gE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACM5S,EAAUR,KACV2lC,EAAiB,kBAAKvyB,GAASrS,IAErC,OACC,qCACC,eAACkf,GAAA,EAAD,CACC4J,OAAK,EACLmB,KAAK,WACLjV,QAAS4vB,EACToE,UAAW,EAJZ,UAOC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B46D,EAAM3d,mBACjC,cAACxpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACqB,gBAAnB46D,EAAMje,SACN,mCACEie,EAAMC,aAAa7d,WAGrB,mCACE4d,EAAME,YAAY9d,aAItB,cAACvpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B46D,EAAMG,iBAAiBl9C,SAClD,cAACpK,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B46D,EAAMI,mBACjC,cAACvnD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B46D,EAAMje,WACjC,cAAClpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2B46D,EAAM/qB,gBAjB5B+qB,EAAM7zD,KAoBZ,cAAC2C,GAAA,EAAD,CACCC,WAAW,EACXrU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EAJV,SAMC,cAACrvB,GAAA,EAAD,UACC,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,cAACD,GAAA,EAAD,CAAMwC,GAAI,GAAIpC,GAAI,GAAlB,SACC,cAAC3a,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,SACC,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,0CAKF,eAACiF,GAAA,EAAD,CAAMwC,GAAI,EAAGpC,GAAI,GAAjB,UACC,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,wCADD,KACkB4lE,EAAMG,iBAAiBl9C,YAG1C,cAAClpB,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,+CADD,KACyB4lE,EAAM/qB,iBAGhC,cAACl7C,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,kDADD,KAC4B4lE,EAAMje,cAGnC,cAAChoD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,iDADD,KAC2B4lE,EAAMI,sBAGlC,cAACrmE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC/P,EAAA,EAAD,UACqB,gBAAnB4lE,EAAMje,SACN,qCACC,2DAAkCie,EAAMC,aAAa7d,YAGtD,qCACC,0DAAiC4d,EAAME,YAAY9d,gBAKvD,cAACroD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,4CADD,KACsB4lE,EAAMzc,iBAG7B,cAACxpD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,oDADD,KAC8B4lE,EAAM3d,yBAItC,cAAC/tC,GAAA,EAAD,CAAMwC,GAAI,EAAGpC,GAAI,GAAjB,SACC,cAAC+M,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,sBAGA,cAAC7B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,mCAMF,eAAC5B,GAAA,EAAD,WACC,eAACF,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,wDAC1B,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,kCAAK46D,EAAMpd,eAAeC,eAAeC,cAEpE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,sBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeM,eAAeJ,YAEjE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,4BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeI,qBAAqBF,YAEvE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,6BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeK,sBAAsBH,YAExE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,sBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeO,eAAeL,YAEjE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,qBACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeS,cAAcP,YAEhE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,4BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeQ,oBAAoBN,YAEtE,eAAClqC,GAAA,EAAD,CAAU4J,OAAK,EAACkgB,UAAW,EAA3B,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,+BACA,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4B46D,EAAMpd,eAAeU,qBAAqBR,kCC7N3E,IAAMud,GAAmB9nE,YAAH,+8CAqEhB+nE,GAA2B/nE,YAAH,ojDCzDrCylB,KAAOC,OAAO,MACd,IAAMomB,GAAYC,KAAYD,UACxBE,GAAaD,KAAYC,WACzBC,GAAcF,KAAYE,YAE1B/yB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAELsc,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,iBAAkB,CACjBL,MAAO,QAGTmhB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJF,OAAQ,CACVA,OAAQxB,EAAM0B,QAAQ,IAEvB0iE,SAAU,CACTlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIR,SAASgmE,KACpB,MAAwBrhE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMuyB,EAAiB,WAAKvyB,GAASrS,IAC/BP,EAAUR,KAEhB,OACI,qCACI,cAAC8V,EAAA,EAAD,CAAQ,gBAAc,cAAc,gBAAc,OAAOC,QAAS4vB,EAAlE,SACR,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACgB,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBACIwR,IAAI,8EACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,SALvC,0BAWD,eAACiU,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,yCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAnB,SACsB,cAACD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsE,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,iBAMjD,cAAC,GAAD,UAMhB,I,GAAMq7D,GAAoB,WAAO,IAAD,IAEtBrnE,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA8BjI,mBAAS,IAAvC,mBAAOuhE,EAAP,KAAgBC,EAAhB,KACA,EAAqCxhE,mBAAS,IAA9C,mBAAQo+D,EAAR,KACH,GADG,KACazhD,aAAY4kD,EAAS,MAA9Bp+D,EAAP,oBACOs+D,EAAkB,GAEhB5rB,EAAQ/hC,aAASoiC,GAAc,CACvC/mC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAIzB,EAA2C6G,aAASstD,GAAyB,CAC/EjyD,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,IACjBmC,MAAO,CACH8xD,iBAAkBK,EAAQ3e,cAAgB2e,EAAQ3e,cAAgB,GAClEqe,iBAAkB99D,EAAM89D,iBAAmB99D,EAAM89D,iBAAmB,GACpElrB,YAAawrB,EAAQxrB,YAAcwrB,EAAQxrB,YAAc,GACzD2rB,YAAaH,EAAQG,YAAcH,EAAQG,YAAc,GACzDC,SAAUJ,EAAQI,SAAWJ,EAAQI,SAAW,OATpDn8D,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAc9BoH,qBACF,WACCpH,MAED,CAAEA,IAGA,IAAMuW,EAAe,SAACxV,GAClB8zD,EAAW,2BAAID,GAAL,kBAAe7zD,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,MAAM+D,eAGxDs3D,EAAa,GA0BpB,GALM/vD,IAA2B,IAAnBonC,EAAMrwC,SAnBI,SAACq7D,GAClBzC,EAAW1jD,OAAO,EAAG0jD,EAAW71D,QAChC,IAAK,IAAID,EAAI,EAAGA,EAAIu4D,EAAOt4D,OAAQD,IAC/Bk2D,EAAa,CACTl4D,MAAOu6D,EAAOv4D,GAAG66C,iBACjBp/B,OAAQ88C,EAAOv4D,GAAG24D,iBAAiBl9C,OACnCgzB,eAAgB8pB,EAAOv4D,GAAG24D,iBAAiBlqB,eAC3C6qB,cAAef,EAAOv4D,GAAGs5D,cAAc1e,SACvC2e,aAAchB,EAAOv4D,GAAGu5D,aAAa3e,SACrC6d,aAAcF,EAAOv4D,GAAGy4D,aAAa7d,SACrC8d,YAAaH,EAAOv4D,GAAG04D,YAAY9d,SACnCge,iBAAkBL,EAAOv4D,GAAG44D,iBAC5Bre,SAAUge,EAAOv4D,GAAGu6C,SACpB8b,KAAMkC,EAAOv4D,GAAGytC,aAEpBqoB,EAAWjkD,KAAKqkD,GAMpBI,CADN6C,EAAkBhzD,EAAKqzD,qBAIpBriE,EACH,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAYvB,OACI,qCACA,eAAC2V,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAAC,GAAD,CACI4E,QACI,eAAC1K,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UACN,aAAW,UACXZ,UAAWH,EAAQ8jE,SAJvB,UAMI,cAAC,KAAD,CAAU3jE,UAAWH,EAAQkB,SANjC,cAUJyqC,SAAS,6BAZb,SAcI,eAAC,GAAD,CAAYn3B,KAAM2vD,EAAYxwD,KAAM,6BAApC,UACI,cAAC,GAAD,CAAayP,MAAM,cAAcla,MAAM,mBACvC,cAAC,GAAD,CAAaka,MAAM,UAAUla,MAAM,WACnC,cAAC,GAAD,CAAaka,MAAM,mBAAmBla,MAAM,UAC5C,cAAC,GAAD,CAAaka,MAAM,gBAAgBla,MAAM,kBACzC,cAAC,GAAD,CAAaka,MAAM,eAAela,MAAM,iBACxC,cAAC,GAAD,CAAaka,MAAM,eAAela,MAAM,iBACxC,cAAC,GAAD,CAAaka,MAAM,cAAcla,MAAM,gBACvC,cAAC,GAAD,CAAaka,MAAM,mBAAmBla,MAAM,qBAC5C,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,cAAcla,MAAM,cAI/C,cAACiS,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,sBAAKxd,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUiS,EACV/f,MAAOo+D,EAAQG,YAAcH,EAAQG,YAAc,QAG3D,eAAC7mE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUiS,EACV/f,MAAOo+D,EAAQI,SAAWJ,EAAQI,SAAW,QAGrD,sBAAMn4C,SAtEG,SAAClY,GAC5BA,EAAMC,iBACA5E,KAoE8C5R,MAAO,CAAED,QAAS,OAAQkL,WAAY,SAAUrK,MAAO,QAAzF,SACI,eAACd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,mBACLzK,MAAOo+D,EAAQN,iBAAmBM,EAAQN,iBAAmB,GAC7D9wD,QAAQ,WACRc,SAAUiS,SAItB,eAACroB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,oBAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,cACLqD,SAAUiS,EACV/f,MAAOo+D,EAAQxrB,YAAcwrB,EAAQxrB,YAAc,GAJvD,UAMI,cAACngC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAPR,UAUQ0yC,EAAMpnC,YAVd,iBAUQ,EAAYqnC,4BAVpB,aAUQ,EAAkCvuC,KAAI,SAACo3D,GACnC,OACI,eAAC/oD,GAAA,EAAD,CAAiCzS,MAAOw7D,EAAK5oB,YAA7C,kBACU4oB,EAAK5oB,cADA4oB,EAAK5oB,wBAS5C,eAACl7C,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,gCAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,gBACLzK,MAAOo+D,EAAQ3e,cAAgB2e,EAAQ3e,cAAgB,GACvD3xC,SAAUiS,EAJd,UAMI,cAACtN,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,aAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,8BAIZ,cAACtI,EAAA,EAAD,CAAKc,MAAM,MAAMb,QAAQ,OAAOiL,eAAe,SAAS4qC,aAAa,SAAS3qC,WAAW,SAAzF,SACI,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAC3B,EAAA,EAAD,CACIvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QA3IL,WACnBgyD,EAAW,KAsIS,iCAcpB,cAACpsD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,cAACgpD,GAAD,CAAsBp7D,QAASA,EAASq7D,OAAQY,UCnTtDnsB,GAAU,CACd,CAAEj4B,MAAO,kBAAmB7B,SAAU,KACtC,CAAE6B,MAAO,kBAAmB7B,SAAU,KACtC,CAAE6B,MAAO,UAAW7B,SAAU,KAC9B,CAAE6B,MAAO,YAAa7B,SAAU,KAChC,CAAE6B,MAAO,UAAW7B,SAAU,IAC9B,CAAE6B,MAAO,UAAW7B,SAAU,KAC9B,CAAE6B,MAAO,WAAY7B,SAAU,IAC/B,CAAE6B,MAAO,YAAa7B,SAAU,KAChC,CAAE6B,MAAO,WAAY7B,SAAU,IAC/B,CAAE6B,MAAO,YAAa7B,SAAU,IAChC,CAAE6B,MAAO,QAAS7B,SAAU,MAGxB/hB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0b,UAAW,CACT5Z,UAAW,YAIA,SAASsmE,GAAT,GAA0C,IAATtzD,EAAQ,EAARA,KACxCxU,EAAUR,KAEhB,OACE,cAACoB,EAAA,EAAD,CAAKsW,GAAI,EAAT,SACE,cAACoR,GAAA,EAAD,CAAOpS,QAAQ,WAAf,SACE,cAACoJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOtJ,KAAK,QAAQsS,cAAY,EAAC,aAAW,gBAA5C,UACE,cAAC/I,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UACG47B,GAAQ/tC,KAAI,SAACiuC,EAAQl2C,GAAT,OACX,cAACqa,GAAA,EAAD,CAGE5e,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAH5B,SAKGg6B,EAAOn4B,OAJH/d,UASb,cAACsa,GAAA,EAAD,UACGnL,EAAKlH,KAAI,SAACkH,EAAMnP,GACf,IAGI+f,EAHWzT,GAAUZ,QACvB,SAAC6K,GAAD,OAASA,EAAI5Z,QAAUwS,EAAK4Q,cAEN,GAExB,OACE,eAAC3F,GAAA,EAAD,CAAsB+K,KAAK,WAAW+e,UAAW,EAAjD,UACE,cAAC7pB,GAAA,EAAD,UACGlL,EAAK9G,SAAS1H,gBAAgB2jB,mBAEjC,cAACjK,GAAA,EAAD,UACG9S,GAAkB4H,EAAKoQ,kBAE1B,cAAClF,GAAA,EAAD,UAAYlL,EAAK9P,QAAQ+nB,iBACzB,cAAC/M,GAAA,EAAD,UAAYlL,EAAKkQ,UAAUuf,iBAC3B,cAACvkB,GAAA,EAAD,UACGlL,EAAKwQ,eAAiB,aAAY,YAErC,cAACtF,GAAA,EAAD,oBACM0F,EAAWpjB,MADjB,YAC0BojB,EAAWrjB,QAErC,cAAC2d,GAAA,EAAD,oBACMlL,EAAKqP,eADX,cAC+BrP,EAAKtR,UAEpC,cAACwc,GAAA,EAAD,qBACOlL,EAAKsP,qBADZ,eAEItP,EAAKuP,iBACDlX,GAAc2H,EAAKuP,kBACnB,KAGR,eAACrE,GAAA,EAAD,eAAa7S,GAAc2H,EAAK0P,aAChC,eAACxE,GAAA,EAAD,eAAa7S,GAAc2H,EAAK2P,cAChC,eAACzE,GAAA,EAAD,eAAa7S,GAAc2H,EAAK4P,YA3BnB/e,iBC/D1B,IAAM0iE,GAA0B3oE,YAAH,usG,oBCS9B8rC,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAAS28B,GAAT,GAAoC,IAC3Ct7B,EAD0C,EAARl4B,KACnBlH,KAAI,SAAC88B,GACxB,IACE18B,EAoBE08B,EApBF18B,SACAkX,EAmBEwlB,EAnBFxlB,eACAlgB,EAkBE0lC,EAlBF1lC,QACAggB,EAiBE0lB,EAjBF1lB,UACA3jB,EAgBEqpC,EAhBFrpC,MACA8lB,EAeEujB,EAfFvjB,OACA1jB,EAcEinC,EAdFjnC,SACAD,EAaEknC,EAbFlnC,OACA0gB,EAYEwmB,EAZFxmB,cACAD,EAWEymB,EAXFzmB,gBACAE,EAUEumB,EAVFvmB,eACAmB,EASEolB,EATFplB,eACAtB,EAQE0mB,EARF1mB,MACAI,EAOEsmB,EAPFtmB,qBACAC,EAMEqmB,EANFrmB,iBAEAhgB,GAIEqmC,EALFtmC,WAKEsmC,EAJFrmC,aACAmgB,EAGEkmB,EAHFlmB,SACAC,EAEEimB,EAFFjmB,UACAC,EACEgmB,EADFhmB,MAKIgB,EAHsBzT,GAAUZ,QACpC,SAACk3D,GAAD,OAAWA,EAAMjmE,QAAUooC,EAAOhlB,cAEG,GA2BvC,MAzByB,CACvB1X,SAAUA,EAAS1H,gBAAgB2jB,iBACnC/E,eAAgBhY,GAAkBgY,GAClClgB,QAASA,EAAQ+nB,eACjB/H,UAAWA,EAAUuf,eACrBljC,MAAOA,EAAQA,EAAMA,MAAQ,MAC7B8lB,OAAQA,EAAM,UAAMA,EAAOA,OAAb,YAAuBA,EAAOqJ,MAAS,MACrD/sB,WACAD,SACA0gB,gBACAD,kBACAE,iBACAmB,gBAAmC,IAAnBA,EAA0B,UAAY,UACtDI,WAAW,GAAD,OAAKA,EAAWpjB,MAAhB,cAA2BojB,EAAWrjB,MAChD2hB,MAAM,IAAD,OAAMA,EAAQ7W,GAAc6W,GAAS,GAC1CI,qBAAqB,IAAD,OAAMA,GAC1BC,iBAAiB,IAAD,OACdA,EAAmBlX,GAAckX,GAAoB,GAEvDjgB,WAAW,IAAD,OAAMC,EAAc8I,GAAc9I,GAAe,GAC3DmgB,SAAS,IAAD,OAAMA,EAAWrX,GAAcqX,GAAY,GACnDC,UAAU,IAAD,OAAMA,EAAYtX,GAAcsX,GAAa,GACtDC,MAAM,IAAD,OAAMA,EAAQvX,GAAcuX,GAAS,OAK9C,OACE,cAAC,GAAD,CACEpE,QACE,cAAC1K,EAAA,EAAD,CAAQvU,MAAM,UAAUyU,UAAW,cAAC,KAAD,IAAnC,8BAIFm2B,SAAS,qBANX,SAQE,eAAC,GAAD,CAAYn3B,KAAMk4B,EAAS/4B,KAAK,qBAAhC,UACE,cAAC,GAAD,CAAayP,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,kBAAkBla,MAAM,mBAC3C,cAAC,GAAD,CAAaka,MAAM,UAAUla,MAAM,YACnC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,UACjC,cAAC,GAAD,CAAaka,MAAM,SAASla,MAAM,WAClC,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,SAASla,MAAM,WAClC,cAAC,GAAD,CAAaka,MAAM,mBAAmBla,MAAM,kBAC5C,cAAC,GAAD,CAAaka,MAAM,qBAAqBla,MAAM,oBAC9C,cAAC,GAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,GAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,GAAD,CAAaka,MAAM,gBAAgBla,MAAM,eACzC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,UACjC,cAAC,GAAD,CACEka,MAAM,0BACNla,MAAM,yBAER,cAAC,GAAD,CAAaka,MAAM,wBAAwBla,MAAM,qBACjD,cAAC,GAAD,CAAaka,MAAM,MAAMla,MAAM,eAC/B,cAAC,GAAD,CAAaka,MAAM,OAAOla,MAAM,gBAChC,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,YAAYla,MAAM,cACrC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,eClF1B,SAASg/D,KACtB,IAAMv1D,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAA0C6L,aAASkuD,GAAyB,CAC1E7yD,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,MAAO,CACL01C,aAAc,GACdC,UAAW,GACXpmC,UAAW,GACXklC,YAAa,GACbxkC,WAAY,GACZ1X,SAAU,KAGdq5B,YAAa,iBAbPx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAMhP,EAAvB,EAAuBA,MAAOkN,EAA9B,EAA8BA,QAgB9B,GAAInH,EACF,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAKN,GAAI1Q,EAAO,OAAO,cAACmG,GAAD,CAAWnG,MAAOA,IAEpC,IAAQ2iE,EAA+B3zD,EAA/B2zD,2BAER,OACE,cAAC,WAAD,UACE,eAACryD,GAAA,EAAD,WACE,cAAC,GAAD,CAAgBpD,QAASA,EAAS8B,KAAM2zD,IACxC,cAACL,GAAD,CAAuBtzD,KAAM2zD,SAMrC,IAAMC,GAAiB,SAAC,GAAuB,IAArB11D,EAAoB,EAApBA,QAAS8B,EAAW,EAAXA,KAC3B7B,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA4BjI,mBAAS,CACnC8kD,aAAc,GACdC,UAAW,GACXpmC,UAAW,GACXklC,YAAa,GACbxkC,WAAY,GACZ1X,SAAU,KANZ,mBAAO8+B,EAAP,KAAeO,EAAf,KASA,EAAiBrqB,uBAAY8pB,EAAQ,KAA9B5d,EAAP,oBAaMy5C,EAAsB,SAAC50D,GAC3B,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMzK,EAAd,EAAcA,MACd6jC,EAAU,2BACLP,GADI,kBAEN74B,EAAOzK,MAIZ4Q,qBAAU,WACRwuD,EAAmB15C,KAClB,CAACA,IAEJ,IAAM05C,EAAqB,SAACv3D,GAC1B2B,EAAQ,CACN5H,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,MAAOpE,KAGX,OACE,eAAC,WAAD,WACE,eAACoK,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACE,eAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,mCACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUqxD,EACVn/D,MAAOsjC,EAAOqe,kBAGlB,eAAC1vC,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,gCACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUqxD,EACVn/D,MAAOsjC,EAAOse,eAGlB,eAAC3vC,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,yBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRsoB,YAAY,yBACZxnB,SAAUqxD,EACVn/D,MAAOsjC,EAAO9nB,eAGlB,eAACvJ,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,iCACA,cAACwa,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE/H,KAAK,cACLqD,SAAUqxD,EACVn/D,MAAOsjC,EAAOod,YAHhB,UAKE,cAACjuC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,oDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,6BAIN,eAACiS,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,6BACA,cAACwa,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CACE/H,KAAK,aACLqD,SAAUqxD,EACVn/D,MAAOsjC,EAAOpnB,WAHhB,UAKE,cAACzJ,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,mDAEDyI,GAAUrE,KAAI,SAACsO,EAAKvW,GAAN,OACb,cAACsW,GAAA,EAAD,CAEEzS,MAAO0S,EAAI5Z,MAFb,mBAGK4Z,EAAI5Z,MAHT,cAGoB4Z,EAAI7Z,OAFjBsD,cAOf,eAAC8V,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACra,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACEJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRsoB,YAAY,8BACZxnB,SAAUqxD,EACVn/D,MAAOsjC,EAAO9+B,iBAIpB,eAAC9M,EAAA,EAAD,CAAKqW,GAAI,EAAGpW,QAAQ,OAApB,UACE,cAACyU,EAAA,EAAD,CACEvU,MAAM,UACNyU,UAAW,cAAC+yD,GAAA,EAAD,IACXhzD,QAAS,WAzHfw3B,EAAU,CACR8d,aAAc,GACdC,UAAW,GACXpmC,UAAW,GACXklC,YAAa,GACbxkC,WAAY,GACZ1X,SAAU,MAgHR,6BAOA,cAAC9M,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAAC2kD,GAAD,CAAiBxzD,KAAMA,WCnMzB8D,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGvChZ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACvCqY,OAAQ,CACNzB,SAAU,YAEZ0B,MAAO,CACLC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,OAIK,SAASswD,KACtB,IAAMxoE,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WACtBvyB,GAASrS,IAGX,OACE,eAACK,EAAA,EAAD,WACE,cAAC0U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACE,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACE,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACE,cAAC,KAAD,CAAQC,SAAU,QAFtB,wBAOF,eAAC2J,GAAA,EAAD,CACEkF,YAAU,EACVta,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJvB,UAME,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACE,eAACiD,GAAA,EAAD,WACE,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,8BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAAC3F,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAAS4vB,EACTlvB,KAAK,QAJP,SAME,cAAC,KAAD,CAAWnV,MAAO,CAAEkL,SAAU,eAKtC,cAACk8D,GAAD,UC1DR,IAAM7sB,GAAU,CACf,CAAExkC,GAAI,OAAQuM,MAAO,WAAY7B,SAAU,KAC3C,CAAE1K,GAAI,OAAQuM,MAAO,WAAY7B,SAAU,KAC3C,CAAE1K,GAAI,OAAQuM,MAAO,eAAgB7B,SAAU,KAC/C,CAAE1K,GAAI,OAAQuM,MAAO,WAAY7B,SAAU,KAC3C,CAAE1K,GAAI,OAAQuM,MAAO,QAAS7B,SAAU,KACxC,CAAE1K,GAAI,OAAQuM,MAAO,WAAY7B,SAAU,KAC3C,CAAE1K,GAAI,OAAQuM,MAAO,QAAS7B,SAAU,KACxC,CAAE1K,GAAI,OAAQuM,MAAO,aAAc7B,SAAU,MAIxC/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAASqnE,KACvB,IAAMzoE,EAAUR,KAEhB,OACO,cAACoB,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACI,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACT,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACKg6B,EAAOn4B,OADIm4B,EAAO1kC,WAMnC,cAAC8I,GAAA,EAAD,aCpDxB,IAAMrH,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAELsc,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,iBAAkB,CACjBL,MAAO,QAGTmhB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJF,OAAQ,CACVA,OAAQxB,EAAM0B,QAAQ,IAEvB0iE,SAAU,CACTlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIR,SAASsnE,KAEpB,IAAM1oE,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAiB,WAAKvyB,GAASrS,IAErC,OACI,qCACI,cAAC+U,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACR,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBAAKwR,IAAI,iFAAiFmgB,IAAI,eAAe58B,MAAO,CAACY,MAAO,SAFhJ,uBAOD,eAACiU,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,6BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKrB,eAACmP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,eAAC9F,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UACN,aAAW,UACXZ,UAAWH,EAAQ8jE,SAJvB,UAMI,cAAC,KAAD,CAAU3jE,UAAWH,EAAQkB,SANjC,cASA,cAACia,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,sBAAKxd,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRa,KAAK,YAGb,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRa,KAAK,YAGb,eAACnW,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,gBAGhB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,gBAFT,UAII,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,sBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,oBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,uBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,6BAIZ,eAACtI,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,qBAKxB,cAACiF,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,cAAC8qD,GAAD,eCxJxB,IAAMv9B,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YAE3B,SAASs9B,GAAT,GAAsC,IAC7CrqB,EAD4C,EAAR9pC,KACnBlH,KAAI,SAAC0zD,GAU1B,MATe,CACbtzD,SAAUszD,EAAStzD,SAAS1H,gBAAgB2jB,iBAC5CxmB,SAAU69D,EAAS79D,SACnBkJ,MAAOO,GAAkBo0D,EAAS4H,YAAYhkD,gBAC9CgkC,SAAUoY,EAAS4H,YAAYnI,kBAAkBpa,gBACjDqa,eAA6C,OAA5BM,EAASN,eAA2BM,EAASN,eAAej0C,eAAiB,GAC9Fk0C,gBAA8C,OAA7BK,EAASL,gBAA4BK,EAASL,gBAAgBl0C,eAAiB,OAKpG,OACE,cAAC,GAAD,CACEzM,QACE,cAAC1K,EAAA,EAAD,CAAQvU,MAAM,UAAUyU,UAAW,cAAC,KAAD,IAAnC,8BAIFm2B,SAAS,uBANX,SASE,eAAC,GAAD,CAAYn3B,KAAM8pC,EAAW3qC,KAAK,uBAAlC,UACE,cAAC,GAAD,CAAayP,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,QAAQla,MAAM,UACjC,cAAC,GAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,GAAD,CAAaka,MAAM,oBAAiBla,MAAM,mBAC1C,cAAC,GAAD,CAAaka,MAAM,qBAAkBla,MAAM,yBC7BnD,IAAMmyC,GAAU,CACf,CAAExkC,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,KAE/C,CAAE1K,GAAI,WAAYuM,MAAO,WAAY7B,SAAU,IAC/C,CAAE1K,GAAI,QAASuM,MAAO,SAAU7B,SAAU,IAC1C,CAAE1K,GAAI,WAAYuM,MAAO,YAAa7B,SAAU,KAChD,CAAE1K,GAAI,iBAAkBuM,MAAO,oBAAkB7B,SAAU,KAC3D,CAAE1K,GAAI,kBAAmBuM,MAAO,qBAAmB7B,SAAU,MAKxD/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAASynE,GAAT,GAAwC,IAARr0D,EAAO,EAAPA,KACxCxU,EAAUR,KAEhB,OACO,cAACoB,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACI,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACT,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACKg6B,EAAOn4B,OADIm4B,EAAO1kC,WAMlC,cAAC8I,GAAA,EAAD,UACjBnL,EAAKlH,KAAI,SAACkH,EAAMnP,GAChB,OACA,eAACoa,GAAA,EAAD,CAAsB+K,KAAK,WAAW+e,UAAW,EAAjD,UACC,cAAC7pB,GAAA,EAAD,UACClL,EAAK9G,SAAS1H,gBAAgB2jB,mBAG/B,cAACjK,GAAA,EAAD,UAAYlL,EAAKrR,WACjB,cAACuc,GAAA,EAAD,UACC9S,GAAkB4H,EAAKo0D,YAAYhkD,kBAEpC,cAAClF,GAAA,EAAD,UACClL,EAAKo0D,YAAYnI,kBAAkBpa,kBAEpC,cAAC3mC,GAAA,EAAD,UAAqC,OAAxBlL,EAAKksD,eAA2BlsD,EAAKksD,eAAej0C,eAAiB,KAClF,cAAC/M,GAAA,EAAD,UAAsC,OAAzBlL,EAAKmsD,gBAA4BnsD,EAAKmsD,gBAAgBl0C,eAAiB,OAbtEpnB,iBChDvB,IAAMiT,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAELsc,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,iBAAkB,CACjBL,MAAO,QAGTmhB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJF,OAAQ,CACVA,OAAQxB,EAAM0B,QAAQ,IAEpBsK,iBAAiB,CACZhK,MAAO,OACRC,OAAQ,IACRR,UAAU,IACVN,QAAS,OACTiL,eAAgB,UAEvBg4D,SAAU,CACTlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIR,SAAS0nE,KAEpB,IAAM9oE,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0C7M,mBAAS,MAAnD,mBAAOo1D,EAAP,KAAsBoD,EAAtB,KACA,EAA4Cx4D,mBAAS,MAArD,mBAAOy4D,EAAP,KAAuBC,EAAvB,KACA,EAA8B14D,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KACA,EAAiCzF,mBAAS,CACtC+E,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BtF,SAAU,GACVm9C,aAAc,GACdke,YAAa,GACbpnC,QAAS,KANb,mBAAOqnC,EAAP,KAAoBC,EAApB,KASA,EAAkCljE,mBAAS,IAA3C,mBAAOmjE,EAAP,KAAkBC,EAAlB,KACA,EAAgBzmD,aAAYsmD,EAAa,KAAlC9/D,EAAP,oBAEIonB,EAAY,GACZguB,EAAY,GACZE,EAAW,GAGTmhB,EAAwB9lD,aAASmT,GAAkB,CACrD9X,UAAW,CACP2B,GAAIlE,EAAO/H,SAASoI,KAEvB+zB,YAAa,iBAGZqiC,EAAwBvvD,aAASxa,EAAiB,CACpD6V,UAAW,CACPtK,SAAS,GAAD,OAAK+H,EAAO/H,SAASoI,MAGhC+zB,YAAa,iBAEZsiC,EAAqBxvD,aAASyT,GAAkB,CAClDpY,UAAU,CACNC,MAAOjM,GAEX69B,YAAa,iBA6CX5B,EAAiB,WAAKvyB,GAASrS,IAElCo/D,EAAsBnrD,OACrB8b,EAAYqvC,EAAsBnrD,KAAKgrB,kBAI3C,IAAM8pC,EAAgB,SAAC71D,GAAM,IAAD,EAElBgwD,EAAG,2BAAOuF,GAAP,uBAAqBv1D,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,OAA9C,gCAAoEs1D,GAApE,+BAAoGrD,GAApG,IACT8N,EAAUxF,IAyDd,GAAG4F,EAAmB70D,KACnB,IAEK8pC,EAAY+qB,EAAmB70D,KAAK+0D,iBACvC,MAAO/jE,IAOZ,GAAG4jE,EAAqB50D,KACpB,IACKgqC,EAAW4qB,EAAqB50D,KAAKmZ,gBACxC,MAAOnoB,IAMb,OACI,qCACI,cAAC8P,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACR,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBACIwR,IAAI,yEACJmgB,IAAI,gBACJ58B,MAAO,CAACY,MAAO,SALvC,wBAWD,eAACiU,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,8BAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKrB,eAACmP,GAAA,EAAD,CAAMC,WAAS,EAAf,UAEI,eAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,UACI,sBAAKxd,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRhN,MAAO8/D,EAAYne,aACnB9zC,KAAK,OACLC,SAAU,SAACvD,GAAD,OAAO61D,EAAc71D,SAGvC,eAAC7S,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLuC,QAAQ,WACRa,KAAK,OACLC,SAAU,SAACvD,GAAD,OAAO61D,EAAc71D,IAC/BvK,MAAO8/D,EAAYD,iBAG3B,eAACnoE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,wBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACg4B,GAAA,EAAD,CACIhiB,GAAG,YACHZ,KAAK,QACL6iB,QAAS0lB,EAETzlB,eAAgB,SAACC,GAAD,OACZA,EAAOlP,OAAP,UAAmBkP,EAAOlP,QAAW,IAEzClU,WAAS,EACTqjB,YAAa,SAACvD,GAAD,OACT,cAAC1f,EAAA,EAAD,2BACI0f,GADJ,IAEAxf,QAAQ,WACRC,WAAU,2BACHuf,EAAOvf,YADJ,IAENC,aACA,cAAC,WAAD,UAEKsf,EAAOvf,WAAWC,qBAO/B8iB,aAAc,SAACF,GAAD,OACV,cAAC,WAAD,oBACIA,EAAOlP,WAGf9S,SAAW,SAACoiB,EAAG5kB,GAAJ,OApIrB,SAAEg1D,GACzB,IACK,IAAIC,EAA6B,OAAnBjL,EAA4BA,EAAexrD,IAAM,GAC3D02D,EAA4B,OAAlBvO,EAA2BA,EAAcnoD,IAAM,GACzD22D,EAAiB,KAAPH,EAAcA,EAAIx2D,IAAM,GAClCywD,EAAG,2BAAMuF,GAAN,IAAmBrnC,QAASgoC,EAAOhJ,gBAAgB8I,EAAO/I,eAAiBgJ,IAEtFL,EAAmB32D,QACX,CACIyC,MAAOsuD,IAGlB0F,EAAaK,GACZh+D,GAAW,GACZ,MAAOhG,KAsHiDokE,CAAkBp1D,IAC3C6kB,kBAAmB,SAACL,EAAQ9vB,GAAT,OACf8vB,EAAOlP,SAAW5gB,EAAM4gB,QAG5B5gB,MAAQggE,EAAUp/C,OAAUo/C,EAAW,YAIlD,eAACtoE,EAAA,EAAD,CAAKc,MAAM,OAAX,UACG,cAACT,EAAA,EAAD,wBACA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLuC,QAAQ,WACRsoB,YAAY,8BACZxnB,SAAU,SAACvD,GAAD,OAAO61D,EAAc71D,IAC/BvK,MAAO8/D,EAAYt7D,cAI3B,eAAC9M,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,8BAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,cAACyF,GAAA,EAAD,CACI7E,GAAG,sBACHlD,KAAK,iBACLqD,SAAU,SAACvD,GAAD,OAzMhB,SAACo2D,GAE3B,IAAIJ,EAA6B,OAAnBjL,EAA4BA,EAAexrD,IAAM,GAE/D,GAAe,KAAZ62D,EAAI72D,IAAW,CACbxH,GAAW,GACZ,IAAIi4D,EAAG,2BAAOuF,GAAP,IAAoBtI,eAAiBmJ,EAAI72D,IAAK2tD,gBAAiB8I,IAEtEJ,EAAmB32D,QACf,CACIyC,MAAOsuD,IAKlBlF,EAAiBsL,GAChBr+D,GAAW,GAyLoCs+D,CAAsBr2D,EAAEC,OAAOxK,QAChDA,MAA0B,OAAlBiyD,EAA0BA,EAAgB,GAJtD,SAOK7qC,EAAUhjB,KAAI,SAAC5I,GAAD,OACX,cAACiX,GAAA,EAAD,CAA4BzS,MAAOxE,EAAnC,SACKA,EAAQ+nB,gBADE/nB,EAAQsO,eAQvC,eAACpS,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,+BAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAMI,cAACyF,GAAA,EAAD,CACI7E,GAAG,uBACHlD,KAAK,kBACLqD,SAAU,SAACvD,GAAD,OAjNd,SAACo2D,GAC7B,IAAIH,EAA4B,OAAlBvO,EAA2BA,EAAcnoD,IAAM,GAC7D,GAAe,KAAZ62D,EAAI72D,IAAW,CAEd,IAAIywD,EAAG,2BAAOuF,GAAP,IAAoBtI,eAAiBgJ,EAAQ/I,gBAAkBkJ,EAAI72D,MAC1ExH,GAAW,GACX69D,EAAmB32D,QACf,CACIyC,MAAOsuD,IAMnBhF,EAAkBoL,GACjBr+D,GAAW,GAkMqCu+D,CAAuBt2D,EAAEC,OAAOxK,QACjDA,MAA2B,OAAnBs1D,EAA2BA,EAAgB,GAJvD,SAOOluC,EAAUhjB,KAAI,SAAC5I,GAAD,OACb,cAACiX,GAAA,EAAD,CAA4BzS,MAAOxE,EAAnC,SACCA,EAAQ+nB,gBADM/nB,EAAQsO,kBAU3C,qBAAK7S,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKqW,GAAI,EAAGpW,QAAQ,OAApB,UACI,cAACyU,EAAA,EAAD,CACAvU,MAAM,UACNyU,UAAW,cAAC+yD,GAAA,EAAD,IACXhzD,QAAS,kBAhSd,WACnB,IACI,IAAIy0D,EAAO,CACPl/D,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BtF,SAAU,GACVm9C,aAAc,GACdke,YAAa,GACbpnC,QAAS,IAIbsnC,EAAUe,GACVx+D,GAAW,GACX69D,EAAmB32D,QACf,CACIyC,MAAO60D,IAGfb,EAAa,IACb5K,EAAiB,MACjBE,EAAkB,MAClBjzD,GAAW,GACb,MAAOhG,KAyQ8BykE,IAHf,6BAOA,cAACrpE,EAAA,EAAD,CAAKyiB,GAAI,IACT,cAACslD,GAAD,CAAmBn0D,KAAO8pC,YAKjC+qB,EAAmB99D,SAAWA,EAC/B,qBAAKpL,UAAWH,EAAQ0L,iBAAxB,SACA,cAACA,EAAA,EAAD,MAGA,cAACyP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACC,cAACkrD,GAAD,CAAuBr0D,KAAM8pC,eC7ZtD,IAAMjD,GAAU,CACf,CAACj4B,MAAO,cAAe7B,SAAU,KACjC,CAAC6B,MAAO,aAAc7B,SAAU,KAChC,CAAC6B,MAAO,UAAW7B,SAAU,KAC7B,CAAC6B,MAAO,gBAAiB7B,SAAU,KACnC,CAAC6B,MAAO,OAAQ7B,SAAU,KAC1B,CAAC6B,MAAO,WAAY7B,SAAU,MAGzB/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,OACR,wBAAyB,CACtBX,QAAS,SAGbkX,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAAS8oE,GAAT,GAAkD,IAAnB3+D,EAAkB,EAAlBA,QAAS4+D,EAAS,EAATA,OAChDnqE,EAAUR,KAEhB,OAAI+L,EAEH,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAKK,cAAC9K,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACI,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACT,cAAC77B,GAAA,EAAD,CAA2BzT,MAAM,SAASnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAApE,SACKg6B,EAAOn4B,OADIm4B,EAAO1kC,WAMrD,cAAC8I,GAAA,EAAD,UACEwqD,EAAO78D,KAAI,SAAC+jC,GACZ,OACC,cAAC,GAAD,CAEC+4B,MAAO/4B,GADFA,EAAIr+B,mBAanB,SAASg/B,GAAT,GAA8B,IAATo4B,EAAQ,EAARA,MACpB,EAAwBrkE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACSD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAElD,EAAiD84B,aAChDyV,GACA,CACCrnC,UAAW,CACVtK,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,IACxBmC,MAAO,CACNwsB,QAAShvB,EAAOK,IAChB0xD,KAAM0F,EAAM1hB,QACZ2hB,iBAAkBD,EAAMC,iBACxBC,YAAa33D,EAAOmqC,iBAGrB/V,YAAa,iBAbhB,mBAAOwjC,EAAP,YAAuB/1D,EAAvB,EAAuBA,KAAajJ,GAApC,EAA6B/F,MAA7B,EAAoC+F,SAiBhCi/D,EAAiB,GAElBh2D,IACFg2D,EAAiBh2D,EAAKi2D,iBAAiBC,mBAGxC,IAAMvlC,EAAkB,WACvBvyB,GAASrS,GACTgqE,KAGD,OACC,qCACC,eAAC9qD,GAAA,EAAD,CACC4J,OAAK,EACLmB,KAAK,WAAU2a,iBAAe,EAC9B5vB,QAAS4vB,EACToE,UAAW,EAJZ,UAOC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMxC,aAAa3e,WAC9C,cAACvpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMrD,YAAY9d,WAC7C,cAACvpC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMpD,iBAAiBl9C,SAClD,cAACpK,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMnD,mBACjC,cAACvnD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMtuB,cACjC,cAACp8B,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA2Bm+D,EAAMx/D,SAASyjB,oBAPrC+7C,EAAMp3D,KAUZ,eAAC2C,GAAA,EAAD,CACCC,WAAW,EACXrU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EAJV,UAMC,cAACwlC,GAAD,CAAsBP,MAAOA,EAAOI,eAAgBA,EAAgBj/D,QAASA,IAC7E,cAACiM,GAAA,EAAD,UACC,cAAC5W,EAAA,EAAD,CAAKoQ,EAAG,EAAGnQ,QAAQ,OAAOgL,cAAc,cAAxC,SACC,cAACyJ,EAAA,EAAD,CACCvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QAAS4vB,EAJV,uCAeN,SAASwlC,GAAT,GAAiE,IAAlCP,EAAiC,EAAjCA,MAAOI,EAA0B,EAA1BA,eAAgBj/D,EAAU,EAAVA,QAC/CvL,EAAUR,KAEhB,OAAI+L,EAEH,cAAC3K,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASpK,OAAO,OAAvE,SACC,cAAC+J,EAAA,EAAD,MAKD,qCACC,eAACyP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,UACC,cAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAGulC,UAAU,SAArB,SACC,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACC,6DAGF,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAGulC,UAAU,SAArB,SACC,eAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,UACC,wDAA+B2O,KAAOulD,EAAMlhB,kBAAkBnkC,OAAO,iCAIxE,cAAC5J,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACC,eAAC3a,EAAA,EAAD,CAAKoQ,EAAG,EAAGnQ,QAAQ,OAAOiL,eAAe,SAAzC,UACC,cAAClL,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,0CADD,IACmBmpE,EAAMpD,iBAAiBl9C,YAG3C,cAAClpB,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,iDAAwBmpE,EAAMpD,iBAAiBlqB,oBAIjD,cAACl8C,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,mDAA0BmpE,EAAMnD,sBAGlC,cAACrmE,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,iDAAwBmpE,EAAMtuB,iBAGhC,cAACl7C,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,eAAC/P,EAAA,EAAD,WACC,2CAAkBmpE,EAAMx/D,SAASyjB,0BAMrC,cAAClT,GAAA,EAAD,UACC,cAACmN,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,sBACA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,oBACA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,qBACA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,6BAGF,eAAC0T,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,iDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeC,eAAeC,SAChE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAe9gB,kBAC3C,eAAChqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeC,eAAeC,MAAQ6gB,EAAe9gB,qBAGjE,eAAC/pC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,uDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeI,qBAAqBF,SACtE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAe3gB,wBAC3C,eAACnqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeI,qBAAqBF,MAAQ6gB,EAAe3gB,2BAGvE,eAAClqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,2DAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeK,sBAAsBH,SACvE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAe1gB,yBAC3C,eAACpqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeK,sBAAsBH,MAAQ6gB,EAAe1gB,4BAGxE,eAACnqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,uDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeQ,oBAAoBN,SACrE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAevgB,uBAC3C,eAACvqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeQ,oBAAoBN,MAAQ6gB,EAAevgB,0BAGtE,eAACtqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,oDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeO,eAAeL,SAChE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAexgB,kBAC3C,eAACtqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeO,eAAeL,MAAQ6gB,EAAexgB,qBAGjE,eAACrqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,oDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeM,eAAeJ,SAChE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAezgB,kBAC3C,eAACrqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeM,eAAeJ,MAAQ6gB,EAAezgB,qBAGjE,eAACpqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,mDAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeS,cAAcP,SAC/D,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAetgB,iBAC3C,eAACxqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeS,cAAcP,MAAQ6gB,EAAetgB,oBAGhE,eAACvqC,GAAA,EAAD,WACC,cAACD,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SAA0B,4DAC1B,eAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bm+D,EAAM3gB,eAAeU,qBAAqBR,SACtE,eAACjqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cAA4Bu+D,EAAergB,wBAC3C,eAACzqC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,cACKm+D,EAAM3gB,eAAeU,qBAAqBR,MAAQ6gB,EAAergB,uCCzR9E,IAAM3qD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCyY,KAAM,CACLnM,SAAU,GACVtK,MAAO,IAELoiE,SAAU,CACZlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIR,SAASwpE,GAAT,GAAyC,IAAnBC,EAAkB,EAAlBA,gBACjC,EAAsC9kE,mBAAS,IAA/C,mBAAQo+D,EAAR,KAEMnkE,GAFN,KAEgBR,MACZ+kE,EAAa,GA4BjB,OACI,mCACI,cAAC,KAAD,CACIvkD,QACI,eAAC1K,EAAA,EAAD,CACIY,QAAQ,YACRnV,MAAM,UACN,aAAW,UACXZ,UAAWH,EAAQ8jE,SACnBvuD,QAAS,kBAnCR,SAACs1D,GAClB1G,EAAW1jD,OAAO,EAAG0jD,EAAW71D,QAChC,IAAK,IAAID,EAAI,EAAGA,EAAIw8D,EAAgBv8D,OAAQD,IACxCk2D,EAAa,CACTl4D,MAAOw+D,EAAgBx8D,GAAGu5D,aAAa3e,SACvCwb,gBAAiBoG,EAAgBx8D,GAAG04D,YAAY9d,SAChDN,cAAekiB,EAAgBx8D,GAAG44D,iBAClCr8D,SAAUigE,EAAgBx8D,GAAGzD,SAASyjB,gBACtCvE,OAAQ+gD,EAAgBx8D,GAAG24D,iBAAiBl9C,OAC5CgzB,eAAgB+tB,EAAgBx8D,GAAG24D,iBAAiBlqB,eACpD8L,SAAU,aACV8b,KAAMmG,EAAgBx8D,GAAGytC,YACzB4N,eAAgBmhB,EAAgBx8D,GAAGo7C,eAAeC,eAAeC,MACjEI,eAAgB8gB,EAAgBx8D,GAAGo7C,eAAeM,eAAeJ,MACjEE,qBAAsBghB,EAAgBx8D,GAAGo7C,eAAeI,qBAAqBF,MAC7EG,sBAAuB+gB,EAAgBx8D,GAAGo7C,eAAeK,sBAAsBH,MAC/EK,eAAgB6gB,EAAgBx8D,GAAGo7C,eAAeO,eAAeL,MACjEO,cAAe2gB,EAAgBx8D,GAAGo7C,eAAeS,cAAcP,MAC/DM,oBAAqB4gB,EAAgBx8D,GAAGo7C,eAAeQ,oBAAoBN,MAC3EQ,qBAAsB0gB,EAAgBx8D,GAAGo7C,eAAeU,qBAAqBR,OAEjFwa,EAAWjkD,KAAKqkD,GAcWI,CAAakG,IALhC,UAOI,cAAC,KAAD,CAAU1qE,UAAWH,EAAQkB,SAPjC,cAWJyqC,SAAQ,iCAbZ,SAeI,eAAC,KAAD,CAAYn3B,KAAM2vD,EAAYxwD,KAAI,iCAAlC,UACI,cAAC,KAAD,CAAayP,MAAM,UAAUla,MAAM,WACnC,cAAC,KAAD,CAAaka,MAAM,cAAcla,MAAM,mBACvC,cAAC,KAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,KAAD,CAAaka,MAAM,cAAcla,MAAM,UACvC,cAAC,KAAD,CAAaka,MAAM,aAAala,MAAM,oBACtC,cAAC,KAAD,CAAaka,MAAM,gBAAgBla,MAAM,kBACzC,cAAC,KAAD,CAAaka,MAAM,WAAWla,MAAM,aACpC,cAAC,KAAD,CAAaka,MAAM,cAAcla,MAAM,SACvC,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,uBAAuBla,MAAM,yBAChD,cAAC,KAAD,CAAaka,MAAM,wBAAwBla,MAAM,0BACjD,cAAC,KAAD,CAAaka,MAAM,iBAAiBla,MAAM,mBAC1C,cAAC,KAAD,CAAaka,MAAM,gBAAgBla,MAAM,kBACzC,cAAC,KAAD,CAAaka,MAAM,sBAAsBla,MAAM,wBAC/C,cAAC,KAAD,CAAaka,MAAM,sBAAsBla,MAAM,gCC1EnE,IAAMoP,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLzW,MAAO,KAELsc,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,iBAAkB,CACjBL,MAAO,QAGTmhB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEJF,OAAQ,CACVA,OAAQxB,EAAM0B,QAAQ,IAEvB0iE,SAAU,CACTlkE,OAAQ,GACR0W,SAAU,QACVohC,OAAQh4C,EAAM0B,QAAQ,GACtB2iE,MAAOrkE,EAAM0B,QAAQ,SAIR,SAAS0pE,KAAkB,IAAD,EAC/Bn4D,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzChO,EAAUR,KAEhB,EAA0BuG,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAAwC7M,mBAAS,IAAjD,mBAAQ4kD,EAAR,KAAqBC,EAArB,KACA,EAAgBloC,uBAAYioC,EAAa,KAAlCzhD,EAAP,oBAEI0yC,EAAQ,GACRivB,EAAkB,GAEhBE,EAAYlxD,aAASoiC,GAAc,CAC3C/mC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAIzB,EAA0C6G,aAAUyiC,GAAoB,CAC1EpnC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,IACjBmC,MAAO,CACH61D,eAAgBrgB,EAAYqgB,eAAiBrgB,EAAYqgB,eAAiB,GAC1ErpC,QAASz4B,EAAMy4B,QAAUz4B,EAAMy4B,QAAU,GACzCma,YAAa6O,EAAY7O,YAAch6B,SAAS6oC,EAAY7O,aAAe,SAP/EvwC,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAa9B,GAA9B,EAAuBlN,MAAvB,EAA8BkN,UAYL,IAAtBq4D,EAAUx/D,UAAiC,IAAZA,IAC9BqwC,EAAQmvB,EAAUv2D,KAAKqnC,qBACvBgvB,EAAkBr2D,EAAKy2D,qBAG3B,IAAM9lC,EAAkB,WAAOvyB,GAASrS,IAElC0oB,EAAe,SAACxV,GAClBm3C,EAAe,2BAAID,GAAL,kBAAmBl3C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAY9D,OACI,qCACI,cAACoM,EAAA,EAAD,CAAQM,WAAS,EAACL,QAAS4vB,EAA3B,SACR,eAACvkC,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,qBACIwR,IAAI,sFACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,SALvC,+BAWD,eAACiU,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,qCAGA,cAACpX,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACC,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAKrB,eAACmP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAAC,GAAD,CAAayvD,gBAAiBA,IAE9B,cAAC1vD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACI,sBAAKpb,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,8BAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,iBACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUiS,EACV/f,MAAOyhD,EAAYqgB,eAAiBrgB,EAAYqgB,eAAiB,QAGzE,sBAAMz7C,SAvDL,SAAClY,GAC5BA,EAAMC,iBACA5E,KAqDsD5R,MAAO,CAAED,QAAS,OAAQkL,WAAY,SAAUrK,MAAO,QAAzF,SACI,eAACd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBAGA,cAAC+U,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRc,SAAUiS,EACV/f,MAAOyhD,EAAYhpB,QAAUgpB,EAAYhpB,QAAU,UAI/D,eAAC/gC,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,oBAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,cACLqD,SAAUiS,EACV/f,MAAOyhD,EAAY7O,YAAc6O,EAAY7O,YAAc,GAJ/D,UAMI,cAACngC,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAPR,UAUQ0yC,SAVR,aAUQ,EAAOtuC,KAAI,SAACo3D,GACR,OACI,eAAC/oD,GAAA,EAAD,CAAiCzS,MAAOw7D,EAAK5oB,YAA7C,kBACU4oB,EAAK5oB,cADA4oB,EAAK5oB,wBAS5C,cAACl7C,EAAA,EAAD,CACIc,MAAM,OACNb,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXkL,GAAI,EALR,SAOI,cAAC3B,EAAA,EAAD,CACIvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QA1GX,WACjBq1C,EAAe,KAqGS,mCAWZ,cAACzvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACI,cAAC,GAAD,CAAuB4uD,OAAQU,EAAiBt/D,QAASA,e,wBCjM3E8vC,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KACzC,CAAE1K,GAAI,SAAUuM,MAAO,UAAW7B,SAAU,KAC5C,CAAE1K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,KACzC,CAAE1K,GAAI,SAAUuM,MAAO,gBAAiB7B,SAAU,KAClD,CAAE1K,GAAI,OAAQuM,MAAO,cAAe7B,SAAU,MAGzC/hB,GAAaC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,OACPC,OAAQ,QAEVyZ,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,IAE5B4c,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIO,SAAS8pE,KACpB,IAAMv4D,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE5ChO,EAAUR,KAChB,EAAsCuG,mBAAS,IAA/C,mBAAO4kD,EAAP,KAAoBC,EAApB,KACA,EAAgBloC,uBAAYioC,EAAa,KAAlCzhD,EAAP,oBAGA,EAA2C2Q,aAAUgyC,GAA0B,CAC9E32C,UAAW,CACVC,MAAO,CACM01C,aAAcF,EAAYE,aAAeF,EAAYE,aAAe,GACpEC,UAAWH,EAAYG,UAAYH,EAAYG,UAAY,GAC3DnpB,QAASz4B,EAAMy4B,QAAUz4B,EAAMy4B,QAAU,GACzC2mB,gBAAiBqC,EAAYrC,gBAAmD,YAAhCqC,EAAYrC,gBAAiD,MAEjHx9C,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OATpBzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAa9B,GAA9B,EAAuBlN,MAAvB,EAA8BkN,SAc9BoH,qBAAU,WACTpH,MACE,CAACA,IAGJ,IAAIy4D,EAAmB,GAEpB32D,IACF22D,EAAmB32D,EAAK42D,yBAGzB,IAAMniD,EAAc,SAACxV,GACpBm3C,EAAe,2BAAID,GAAL,kBAAmBl3C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAO3D,OACC,eAACiS,GAAA,EAAD,WACC,cAACA,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIrC,GAAI,GAAIC,GAAI,GAA/B,SACC,sBAAKpb,UAAWH,EAAQge,cAAxB,UACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,4BAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLtC,KAAK,eACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUiS,EACV/f,MAAOyhD,EAAYE,aAAeF,EAAYE,aAAe,QAG/D,eAACjqD,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,yBAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLtC,KAAK,YACLuC,QAAQ,WACRa,KAAK,OACLC,SAAUiS,EACV/f,MAAOyhD,EAAYG,UAAYH,EAAYG,UAAY,QAGzD,eAAClqD,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,uBAGA,cAAC+U,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLtC,KAAK,UACLuC,QAAQ,WACRc,SAAUiS,EACV/f,MAAOyhD,EAAYhpB,QAAUgpB,EAAYhpB,QAAU,QAGrD,eAAC/gC,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,cAACT,EAAA,EAAD,2BAGA,cAACwa,EAAA,EAAD,CACCvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHN,SAKC,eAACyF,GAAA,EAAD,CACC7E,GAAG,qBACHlD,KAAK,kBACLqD,SAAUiS,EAHX,UAKC,cAACtN,GAAA,EAAD,CAAUzS,MAAM,QAAhB,SACC,kDAED,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,4BAGA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,oCAMH,cAACtI,EAAA,EAAD,CACCc,MAAM,OACNb,QAAQ,OACRiL,eAAe,SACfC,WAAW,SACXkL,GAAI,EALL,SAOC,cAAC3B,EAAA,EAAD,CACCvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QAtFe,WACpBq1C,EAAe,KAiFX,mCAWH,cAAChqD,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACEwrD,EAAiB79D,KAAI,SAAC+jC,EAAKhsC,GAC3B,OACC,cAACgmE,GAAD,CAAah6B,IAAKA,EAAK9lC,QAASA,GAAclG,oBAYxD,IAAMiT,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG5C,SAAS6yD,GAAT,GAAqC,IAAfh6B,EAAc,EAAdA,IAAK9lC,EAAS,EAATA,QAE1B,EAAwBxF,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAiB,kBAAKvyB,GAASrS,IAErC,OAAIgL,EAEH,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKD,eAAC,WAAD,WACC,eAACiK,GAAA,EAAD,CACCpV,KAAMA,EACNua,oBAAqBxC,GACrB1C,WAAS,EACTrU,SAAS,KAJV,UAMC,cAAC+pE,GAAD,CAAuBj6B,IAAKA,IAC5B,cAAC75B,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CACCY,QAAQ,WACRnV,MAAM,YACNkV,KAAK,QACLV,QAAS4vB,EAJV,yBAUF,eAAC1lB,GAAA,EAAD,CACC4J,OAAK,EACLkgB,UAAW,EAEXh0B,QAAS4vB,EAJV,UAMC,cAACzlB,GAAA,EAAD,UACE2xB,EAAI8b,eAEN,cAACztC,GAAA,EAAD,UACE2xB,EAAI0L,yBAEN,cAACr9B,GAAA,EAAD,UACE2xB,EAAImc,eAEN,cAAC9tC,GAAA,EAAD,UACE2xB,EAAI+b,gBAEN,cAAC1tC,GAAA,EAAD,WACyB,IAAvB2xB,EAAIrsB,eAA2B,UAAY,cAhBxCqsB,EAAI8f,SAuBb,SAASma,GAAT,GAAwC,IAAPj6B,EAAM,EAANA,IAEhC,OACC,cAAC,WAAD,UACC,cAACv7B,GAAA,EAAD,UACC,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACC,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAIpC,GAAI,GAAvB,SACC,cAAC3a,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,SACC,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,8CAKF,cAACiF,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,SACC,cAAC3a,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,OAAOvlC,EAAG,EAAxC,SACC,eAAC/P,EAAA,EAAD,WACC,+CADD,IACwB4jB,KAAOwsB,EAAImc,cAAczoC,OAAO,cACvD,uBACA,mDAHD,IAG4BssB,EAAI8b,aAC/B,uBACA,0CALD,IAKmB9b,EAAI0L,uBACtB,uBACA,4CAPD,IAOqB1L,EAAIjW,UACxB,uBACA,gDATD,IASyBiW,EAAIkc,aAC5B,uBACA,gDAXD,IAWyBlc,EAAI+b,cAC5B,uBACA,0CAbD,IAamB/b,EAAIgc,sBACtB,uBACA,2CAfD,IAeoBhc,EAAIic,SACvB,uBACA,iDAjBD,IAiB0Bjc,EAAIuY,YAC7B,uBACA,iDAnBD,KAmBiD,IAAvBvY,EAAIrsB,eAA2B,KAAO,MACvC,IAAvBqsB,EAAIrsB,eAA2B,KAC/B,qCACC,uBACA,oDAFD,IAE6BqsB,EAAIoc,kBAChC,uBACA,kDAJD,IAI2Bpc,EAAIlsB,kCAMnC,eAAChK,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGpC,GAAI,GAAtB,UACC,cAAC3a,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACC,cAACt1C,EAAA,EAAD,qCAID,cAACL,EAAA,EAAD,UACC,cAAC0nB,GAAA,EAAD,CAAOxnB,MAAO,CAACY,MAAO,OAAQC,OAAQ,QAAtC,SACC,cAAC2d,GAAA,EAAD,CAAgBxe,MAAO,CAACU,UAAW,QAAnC,SACC,eAAC+d,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,sBAGA,cAAC7B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,sBAGA,cAAC7B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,yBAGA,cAAC7B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEygB,SAAU,KAA7C,wBAKF,cAAC5B,GAAA,EAAD,iBACE0xB,QADF,IACEA,OADF,EACEA,EAAKnjC,UAAUZ,KAAI,SAAC+jC,EAAKhsC,GACzB,OACC,eAACoa,GAAA,EAAD,CACC4J,OAAK,EACLkgB,UAAW,EAFZ,UAKC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEolC,EAAI+a,qBAEN,cAAC1sC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEolC,EAAI3jC,WAEN,cAACgS,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEolC,EAAIgb,kBAEN,cAAC3sC,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEolC,EAAIjtB,UAZD/e,iBAsBb,cAACzE,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAWkF,EAAG,EAAjD,SACC,eAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,qBACUrJ,GAAcwkC,EAAIwc,4BClXnC,IAAMxS,GAAU,CACf,CAAExkC,GAAI,OAAQuM,MAAO,OAAQ7B,SAAU,KACvC,CAAE1K,GAAI,OAAQuM,MAAO,cAAiB7B,SAAU,KAChD,CACC1K,GAAI,aACJuM,MAAO,aACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,OACJuM,MAAO,mBACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM+nD,eAAe,WAEzC,CACCp6C,GAAI,UACJuM,MAAO,UACP7B,SAAU,IACVtV,MAAO,QACP8Y,OAAQ,SAAC7b,GAAD,OAAWA,EAAM8D,QAAQ,MAInC,SAASkkD,GAAWv9C,EAAMw9C,EAAMC,EAAYn7C,GAE3C,MAAO,CAAEtC,OAAMw9C,OAAMC,aAAYn7C,OAAMo7C,QADvBD,EAAan7C,GAI9B,IAAMu0C,GAAO,CACZ0G,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,WAAY,SACtCA,GAAW,QAAS,KAAM,SAAU,QACpCA,GAAW,gBAAiB,KAAM,UAAW,SAC7CA,GAAW,SAAU,KAAM,SAAU,SACrCA,GAAW,YAAa,KAAM,SAAU,SACxCA,GAAW,UAAW,KAAM,SAAU,QACtCA,GAAW,UAAW,KAAM,OAAS,OACrCA,GAAW,SAAU,KAAM,UAAW,SACtCA,GAAW,QAAS,KAAM,SAAW,QACrCA,GAAW,SAAU,KAAM,QAAU,QACrCA,GAAW,iBAAkB,KAAM,SAAU,QAC7CA,GAAW,SAAU,KAAM,UAAW,UACtCA,GAAW,UAAW,KAAM,UAAW,QACvCA,GAAW,SAAU,KAAM,UAAW,UAGjC1xD,GAAaC,aAAW,SAACC,GAAD,MAAY,CACzCsnB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,QAETuW,OAAQ,CACVzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPuyC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAASmqE,KACvB,IAAMvrE,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCzqC,mBAAS,IAAjD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACv1B,GAAA,EAAD,WACC,qBAAKhb,UAAWH,EAAQgnB,KAAxB,SACC,cAACpmB,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,gBAAzC,SACC,cAAClL,EAAA,EAAD,CAAKI,GAAI,EAAGugB,SAAS,MAArB,SACC,eAAC+G,GAAA,EAAD,CAAOnoB,UAAWH,EAAQyqD,aAA1B,UACC,cAAC1X,GAAA,EAAD,CACCn9B,WAAS,EACT4oB,YAAY,6BAKb,cAACrnB,EAAA,EAAD,UACC,cAACmiB,GAAA,EAAD,eAMN,cAAC14B,EAAA,EAAD,CAAMoQ,EAAG,EAAT,SACA,eAACsX,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAA1E,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,GACtE,OACC,cAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,SACE8R,GAAQ/tC,KAAI,SAACiuC,GACb,IAAMryC,EAAQmoC,EAAIkK,EAAO1kC,IACzB,OACC,cAAC6I,GAAA,EAAD,CAEqCzT,MAAOsvC,EAAOtvC,MAFnD,SAIEsvC,EAAOx2B,QAA2B,kBAAV7b,EACxBqyC,EAAOx2B,OAAO7b,GAEdA,GANwCqyC,EAAO1kC,QALDw6B,EAAI8f,gBAsB5D,cAAC7f,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aAzEsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IAyENC,oBAtE6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,cC9EV,IAAMhxC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEJC,KAAM,CACRzW,MAAO,KAERslB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACPC,OAAQ,QACR0J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3CwjC,aAAc,CACb5pD,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAIvBkX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASgzD,KACvB,IAAMxrE,EAAUR,KAEhB,EAA8BuG,mBAAS,IAAvC,mBAAO0lE,EAAP,KAAgBC,EAAhB,KACA,EAA0B3lE,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KAEMuyB,EAAkB,kBAAMvyB,GAASrS,IAEvC,EAAgCwF,mBAAS,MAAzC,mBAAO4lE,EAAP,KAAiBC,EAAjB,KAUA,OACC,gCACC,cAACt2D,EAAA,EAAD,CAAQ,gBAAc,cAAc,gBAAc,OAAOC,QAVvC,SAAC8B,GACpBu0D,EAAYv0D,EAAMw0D,gBASjB,SACC,eAACjrE,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACmB,cAAC,KAAD,CAAUjL,MAAO,CAACkL,SAAU,SAFhD,0BAOD,eAAC8/D,GAAA,EAAD,CACEj1D,GAAG,kBACJ80D,SAAUA,EACVtgD,aAAW,EACX9qB,KAAMkoC,QAAQkjC,GACdnrE,QAnBiB,WACnBorE,EAAY,OAaX,UAOC,eAACjwD,GAAA,EAAD,CAAUpG,QAAU,WAClB4vB,IACAumC,EAAW,YAFb,UAIC,cAACK,GAAA,EAAD,UACC,cAAC,KAAD,CAAUjrE,MAAO,CAACkL,SAAU,QAL9B,uBASA,eAAC2P,GAAA,EAAD,CAAUpG,QAAU,WAClB4vB,IACAumC,EAAW,mBAFb,UAIC,cAACK,GAAA,EAAD,UACC,cAAC,KAAD,CAAUjrE,MAAO,CAACkL,SAAU,QAL9B,iCAWD,eAAC2J,GAAA,EAAD,CAAQkF,YAAU,EAACta,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAA9E,UACC,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,eAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,4BACiByzD,KAEC,cAAC7qE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACjB,cAAC3F,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACC,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,eAMjC,cAACpL,EAAA,EAAD,UAEc,YAAZ6qE,EACC,cAACP,GAAD,IACe,mBAAZO,EACH,cAACF,GAAD,IAEA,aC5GQ,SAASzrB,KACvB,IAAM3Q,EAAkBthC,KAAKC,MAAMC,aAAaC,QAAQ,eAExD,OACC,cAACkN,EAAA,EAAD,UACC,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAGqc,QAAQ,SAApC,WACmE,IAAjE0xB,EAAgBh2B,QAAQokC,SAASC,wBAAwB9/B,IAAiB,KAC1E,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,GAAD,SAIsD,IAAxDojC,EAAgBh2B,QAAQokC,SAASE,eAAe//B,IAAiB,KACjE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACq7D,GAAD,SAIuD,IAAzDj4B,EAAgBh2B,QAAQokC,SAASG,gBAAgBhgC,IAAiB,KAClE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACy8D,GAAD,SAIsD,IAAxDr5B,EAAgBh2B,QAAQokC,SAASI,eAAejgC,IAAiB,KACjE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC28D,GAAD,SAIwD,IAA1Dv5B,EAAgBh2B,QAAQokC,SAASK,iBAAiBlgC,IAAiB,KACnE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC+8D,GAAD,SAI0D,IAA5D35B,EAAgBh2B,QAAQokC,SAASM,mBAAmBngC,IAAiB,KACrE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC++D,GAAD,SAIyD,IAA3D37B,EAAgBh2B,QAAQokC,SAASO,kBAAkBpgC,IAAiB,KACpE,cAACvC,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACC,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAACy/D,GAAD,a,oCC/CP,SAASlhD,GAAS9R,GAChB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACE,6CACEgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,oCAA+BxR,GACjC,iDAAyCA,IACrCklB,GALN,aAOGrhB,IAAU7D,GACT,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGkG,GAAI,EAAGsmB,UAAU,OAA5B,SACG13B,OAaX,SAAS4kB,GAAUrlB,GACjB,MAAO,CACLwR,GAAG,wBAAD,OAA0BxR,GAC5B,gBAAgB,6BAAhB,OAA8CA,IAIlD,IAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJmS,SAAU,EACVz3B,MAAO,OACPC,OAAQ,QACR0J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE5C9O,KAAM,CACJnM,SAAU,KAEZ60B,QAAS,CACPn/B,MAAO,KAETsqE,aAAc,CACZtqE,MAAO,QAkIIogE,oBA9Hf,SAAqBtpD,GACnB,IAAMxY,EAAUR,KACVE,EAAQiyB,eACd,EAA0BvpB,IAAMrC,SAAS,GAAzC,mBAAOmD,EAAP,KAAciiB,EAAd,KASA,OACE,sBAAKhrB,UAAWH,EAAQgnB,KAAxB,UACE,cAAChM,GAAA,EAAD,IACA,eAACpa,EAAA,EAAD,WACE,cAACma,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACE,eAACjX,GAAA,EAAD,CACEriB,MAAOA,EACP8N,SAdW,SAACK,EAAOmU,GAC3BL,EAASK,IAcDE,eAAe,UACfC,UAAU,UACKzV,QAAQ,aACvBuV,cAAc,KANhB,UAQE,cAACG,GAAA,EAAD,aACExI,MAAM,aACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAC7BuS,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,YACNjL,KACE,qBACEoF,IAAI,yEACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAGhB,cAACkB,GAAA,EAAD,aACExI,MAAM,UACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAC7BuS,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,YACNjL,KAAM,cAAC,KAAD,CAAQhY,UAAWH,EAAQmY,QAC7BuS,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,YACNjL,KACE,qBACEoF,IAAI,uEACJmgB,IAAI,cACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,aACExI,MAAM,WACNjL,KAAM,cAAC,KAAD,CAAUhY,UAAWH,EAAQmY,QAC/BuS,GAAU,KAEzB,cAACkB,GAAA,EAAD,aACWxI,MAAM,iBACNjL,KACE,qBACEoF,IAAI,yEACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,KAEhB,cAACkB,GAAA,EAAD,yBACExI,MAAM,SACNjL,KACE,qBACEoF,IAAI,iFACJmgB,IAAI,eACJv9B,UAAWH,EAAQ6gC,WAGnBnW,GAAU,IAThB,IAUEnV,QAAS,kBAAMiD,EAAMyzD,QAAQ/rD,KAAK,kCAIxC,eAAC,KAAD,CACEgsD,KAA0B,QAApBxsE,EAAMiZ,UAAsB,YAAc,IAChDtT,MAAO6D,EACPijE,cAxFkB,SAAC9mE,GACzB8lB,EAAS9lB,IAoFL,UAKE,cAAC,GAAD,CAAU6D,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACwY,GAAD,MAEF,cAAC,GAAD,CAAU3U,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAU6D,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC8qC,GAAD,MAEF,cAAC,GAAD,CAAUjnC,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAU6D,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAACysD,GAAD,MAEF,cAAC,GAAD,CAAU5oD,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC,GAAD,MAER,cAAC,GAAD,CAAU6D,MAAOA,EAAO7D,MAAO,EAA/B,SACQ,cAACyyD,GAAD,MAEF,cAAC,GAAD,CAAU5uD,MAAOA,EAAO7D,MAAO,gB,+BCjLnC7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxC0sE,OAAQ,CACP/gE,gBAAiB3L,EAAM2nB,QAAQglD,OACzBtrE,MAAOurE,KAAK,MAEnBC,WAAY,CACXvgC,YAAatsC,EAAM0B,QAAQ,IAE5B4W,MAAO,CACNmhB,SAAU,EACVlhB,WAAYvY,EAAM0B,QAAQ,QAmEb0gE,oBA/Df,SAAyBtpD,GACxB,IAIImpB,EAJE3hC,EAAUR,KACVgtE,EAAQz+D,aAAaC,QAAQ,cAC7Bi6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAC5C2E,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAYlD,OATc,OAAVw+D,IAAgB7qC,EAAU9zB,KAAKC,MAAMC,aAAaC,QAAQ,gBAU7D,8BACC,cAAC+M,GAAA,EAAD,CAAQzE,SAAS,QAAQnW,UAAWH,EAAQosE,OAAQ5pC,UAAW,EAA/D,SACC,eAACxnB,GAAA,EAAD,WACC,cAACsC,GAAA,EAAD,CAAQogB,IAAI,aAAangB,IAAKokB,EAAQlgC,SACtC,cAACb,EAAA,EAAD,CAAKT,UAAWH,EAAQgY,MAAxB,SACC,eAAC/W,EAAA,EAAD,CAAYiV,QAAQ,KAAKnV,MAAM,UAA/B,kCAAwD4gC,EAAQ7X,cAWhC,IAAhCnX,EAAOwtC,sBAAiC8H,EACvC,cAAC3yC,EAAA,EAAD,CACCvU,MAAM,YACNkV,KAAK,QACL9V,UAAWH,EAAQusE,WACnBr2D,QAAQ,YACRR,UAAU,EALX,0BAUA,cAACJ,EAAA,EAAD,CACCvU,MAAM,YACNkV,KAAK,QACL9V,UAAWH,EAAQusE,WACnB/2D,UAAW,cAAC,KAAD,IACXU,QAAQ,YACRX,QAzCY,WAClBxH,aAAa0+D,WAAW,cACxB1+D,aAAa0+D,WAAW,aACxB1+D,aAAa0+D,WAAW,iBACxBj0D,EAAMyzD,QAAQ/rD,KAAK,MA+Bd,wC,wBCGQ1gB,GAhEGC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPnY,OAAQF,EAAME,OAAOwL,OAAS,EAE9BC,gBAAiB,SAElBD,OAAQ,CACP1J,MATkB,MAUlBgrE,WAAY,EACZrhE,gBAAiB,SAElBshE,YAAY,CACXhrE,OAAQ,OACR0J,gBAAiB,SAElBuhE,YAAa,CACZlrE,MAlBkB,MAmBlB2J,gBAAiB3L,EAAM2nB,QAAQglD,QAEhCrlD,KAAM,CACLnmB,QAAS,OACTgL,cAAe,SACflK,OAAQ,QAETkrE,cAAc,CACblrE,OAAQ,QAETmrE,iBAAkB,CACjB9gE,SAAU,GACJjL,MAAOrB,EAAM2nB,QAAQonC,KAAKlnC,MAE9BwlD,uBAAwB,CAC1BrrE,MAAO,IAERsrE,iBAAkB,CACjBhhE,SAAU,GACJjL,MAAOrB,EAAM2nB,QAAQonC,KAAKlnC,MAE9B0lD,uBAAwB,CAC1BvrE,MAAO,IAERwrE,6BAA8B,CAC7BxrE,MAAO,KAERyrE,uBAAuB,CACtBnhE,SAAU,IACJjL,MAAOrB,EAAM2nB,QAAQonC,KAAKlnC,MAEjC/K,OAAQ,CACP9a,MAAOhC,EAAM0B,QAAQ,GACrBO,OAAQjC,EAAM0B,QAAQ,GACtB4qC,YAAatsC,EAAM0B,QAAQ,IAE5BgsE,YAAY,CACX7rD,SAAU,OACV5f,OAAQ,MACF2a,OAAQ,sBAEf+wD,iBAAiB,CAChB9rD,SAAU,OACJjF,OAAQ,0B,UCyCD9c,GAtGGC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAK,CACE7lB,UAAWzB,EAAM0B,QAAQ,IAE7BksE,oBAAoB,CAChB9vC,UAAW,QAEf+vC,eAAe,CACXhsE,SAAU,IACVC,UAAW,IACXX,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZ2qC,aAAc,SAElBj1C,OAAO,CACHF,SAAU,OACVC,UAAW,OACXX,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZ2qC,aAAc,SAElB+T,aAAc,CACV9oD,OAAQ,GACdd,QAAS,OACT8mB,QAASjoB,EAAM0B,QAAQ,IAGrBosE,sBAAuB,CACnB7rE,OAAQ,GACdd,QAAS,OACT8mB,QAASjoB,EAAM0B,QAAQ,IAGrBqsE,UAAW,CACP9rE,OAAQ,GACRJ,SAAU,IAChBV,QAAS,QAEPmd,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,IAAzC,OAEP,iBAAkB,CACjBL,MAAO,OAEFwuC,WAAY,EACZxjC,WAAY,SACZ2qC,aAAc,UAErBx0B,UAAW,GAGRssC,SAAU,CACZ9sD,MAAO,IAELgsE,gBAAgB,CACZhsE,MAAO,IAEXisE,uBAAuB,CACnBjsE,MAAO,IAEXksE,0BAA0B,CACtBpsE,UAAW,IACXD,SAAU,IACVV,QAAS,OACT61C,aAAc,SACduZ,aAAc,SACdnkD,eAAgB,SAChBC,WAAY,UAEhB8hE,eAAe,CACXlsE,OAAQ,OACRD,MAAO,QAEX0rE,YAAY,CACd7rD,SAAU,OACV5f,OAAQ,MACF2a,OAAQ,sBAEf+wD,iBAAiB,CAChB9rD,SAAU,OACV5f,OAAQ,OACF2a,OAAQ,sBAEZnH,MAAO,CACH,uBAAwB,CACtB,kBAAmB,aAErB,kDAAmD,CACjD,qBAAsB,OACtBjU,OAAQ,GAEV,kDAAmD,CACjD,qBAAsB,OACtBA,OAAQ,QClGL4sE,GAAgBloE,0BAEhBmoE,GAAiB,SAAC,GAAkB,IAAhBjoE,EAAe,EAAfA,SAE7B,EAAsDC,mBAClD,CACIiN,IAAK,KACL7P,SAAU,KACVI,cAAe,KACfqlD,SAAU,KACVvkD,QAAS,KACTuL,UAAW,KACXD,iBAAkB,KAClBpB,YAAa,GACb/K,OAAQ,KACRN,OAAQ,KACRkB,iBAAkB,OAZ1B,mBAAO4pE,EAAP,KAA4BC,EAA5B,KAgBA,EAA8CloE,mBAAS,IAAvD,mBAAOkI,EAAP,KAAwBigE,EAAxB,KACA,EAAsCnoE,mBAClC,CACImI,UAAW,GACX01B,QAAS,GACT1f,SAAU,EACVC,UAAW,EACXC,MAAO,EACPud,QAAS,KAPjB,mBAAOwsC,EAAP,KAAoBC,EAApB,KAWA,EAA0DroE,mBAAS,IAAnE,mBAAQsoE,EAAR,KAA8BC,EAA9B,KACA,EAAoEvoE,mBAAS,IAA7E,mBAAQwoE,EAAR,KAAmCC,EAAnC,KACA,EAA8CzoE,mBAAS,IAAvD,mBAAQ0oE,EAAR,KAAwBC,EAAxB,KACA,EAAwC3oE,qBAAxC,mBAAQ4oE,EAAR,KAAqBC,EAArB,KACA,EAA8C7oE,mBAAS,IAAvD,mBAAQ8oE,EAAR,KAAwBC,EAAxB,KAEA,EAA8B/oE,oBAAS,GAAvC,mBAAQ+B,EAAR,KAAgBC,EAAhB,KACA,EAA4BhC,oBAAS,GAArC,mBAAQP,EAAR,KAAe0F,EAAf,KACA,EAA6BnF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAvE,mBAAST,EAAT,KAAgBC,EAAhB,KACA,EAAoDgG,oBAAS,GAA7D,mBAAQgpE,EAAR,KAA2BC,EAA3B,KACA,EAAoDjpE,oBAAS,GAA7D,oBAAQ+9B,GAAR,MAA2BC,GAA3B,MAEA,GAAwBh+B,oBAAS,GAAjC,qBAAOxF,GAAP,MAAaqS,GAAb,MAIA,GAAkD7M,oBAAS,GAA3D,qBAAOkpE,GAAP,MAA0BC,GAA1B,MAEH,OACC,cAACpB,GAAc7kE,SAAf,CAAwBC,MACd,CACIpJ,QACAC,WACA+H,SACAC,YACAvC,QACA0F,WACA8iE,sBACAC,yBACAhgE,kBACAigE,qBACAC,cACAC,iBACAW,oBACAC,uBACAjrC,wBACAD,qBACAwqC,0BACAD,uBACAG,+BACAD,4BACAW,wBACAD,qBACAr8D,WACArS,QACAkuE,iBACAC,oBACAC,cACAC,iBACAC,iBACAC,qBA/Bd,SAoCEhpE,KCzEEwS,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS22D,KACpB,IAAMlnB,EAAcp6C,KAAKC,MAAMC,aAAaC,QAAQ,iBACjD2E,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC5C,EAA+BsF,YAAY4oC,IAAnCkzB,EAAR,oBAEAvqD,KAAOC,OAAO,MACd,IAAM9kB,EAAUR,KAERO,EAAayZ,qBAAWs0D,IAAxB/tE,SACR,EAAwBgG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAAgC7M,oBAAS,GAAzC,mBAAO8kB,EAAP,KAAiBgc,EAAjB,KACA,EAAoC9gC,mBAAS,YAA7C,mBAAOukD,EAAP,KAAmB+kB,EAAnB,KACA,EAA8CtpE,mBAAS,IAAvD,mBAAOoiD,EAAP,KAAwBC,EAAxB,KAEH,EAA0BvuC,aAASmgC,GAAsB,CACxD9kC,UAAW,CACVpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,OAHpBzH,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAORW,EAAQ,CACV8xD,iBAAkB,cAClBve,QAAST,EAAeA,EAAaS,QAAU,GAC/CH,WAAY51C,EAAOK,IACnBq3D,iBAAkBpiB,EAAeA,EAAaoiB,iBAAmB,IAG/DiF,EAAiBz1D,aAASwiC,GAAwB,CACpDnnC,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,IAAKmC,MAAOA,KAG9EgwB,EAAkB,WAC1BvyB,GAASrS,GACH+uE,EAAe58D,WAGf68D,EAAe,EAEnB,IAAI/6D,IAAS86D,EAAe96D,KACxB,OAAO,KAKX,GAHI+6D,EAAeD,EAAe96D,KAAKg7D,oBAAoBC,wBAGvDlkE,GAAWsf,GAAYykD,EAAe/jE,QAC7C,OACC,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAICq2B,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAIR,IAAMlc,EAAe,SAACxV,GAClB20C,EAAmB,2BAAID,GAAL,kBAAuB10C,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGhEmhD,EAAW,uCAAG,4BAAA18C,EAAA,yDAChBk5B,GAAY,GADI,SAGRohB,IAAiD,KAA3B,OAANt1C,QAAM,IAANA,OAAA,EAAAA,EAAQwtC,sBAHhB,uBAIRtZ,GAAY,GACZ9mC,EAAS,CACLW,QAAQ,6CACRD,OAAQ,QACRF,MAAM,IARF,kBAUD,MAVC,UAYJ4nD,EAAgBG,iBACfH,EAAgBuB,gBAChBvB,EAAgBS,SAdb,wBAgBJ/hB,GAAY,GACZ9mC,EAAS,CACLW,QAAQ,gCACRD,OAAQ,QACRF,MAAM,IApBN,kBAsBG,MAtBH,aAwBmC,WAApC4nD,EAAgBG,iBAAgCinB,EAAgBxiE,WAAWo7C,EAAgBuB,iBAxB1F,wBAyBA7iB,GAAY,GACZ9mC,EAAS,CACLW,QAAS,uEACTD,OAAQ,QACRF,MAAM,IA7BV,kBA+BO,MA/BP,eAiCE4U,EAAQ,CACVmzC,gBAAiBH,EAAgBG,gBACjCM,SAAUT,EAAgBS,SAC1B9M,YAAah6B,SAASmmC,EAAanM,aACnC2M,QAASR,EAAaS,QACtBC,cAAeV,EAAagf,iBAC5Bze,eAAgB,OAChBK,cAAe,CACXC,KAAMjkC,OAASE,OAAO,MACtBgkC,QAASlkC,OAASE,OAAO,MACzBikC,SAAUnkC,OAASE,OAAO,MAC1BkkC,SAAUpkC,OAASE,OAAO,aAE9BmkC,iBAAkB,CACdz8C,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASC,OAAO,SAASC,UAEvC6qD,QAASj9D,EAAOK,IAChB6pC,uBAAwBlqC,EAAOmqC,eAC/BC,uBAAwBpqC,EAAOmX,OAC/B2/B,eAAgB,CACZC,eAAgB,CACZC,MAAO58C,WAAWo7C,EAAgBuB,gBAClCE,YAAa,MAEjBC,qBAAsB,CAClBF,MAAO,EACPC,YAAa,MAEjBE,sBAAuB,CACnBH,MAAO,EACPC,YAAa,MAEjBG,eAAgB,CACZJ,MAAO,EACPC,YAAa,MAEjBI,eAAgB,CACZL,MAAO,EACPC,YAAa,MAEjBK,oBAAqB,CACjBN,MAAO,EACPC,YAAa,MAEjBM,cAAe,CACXP,MAAO,EACPC,YAAa,MAEjBO,qBAAsB,CAClBR,MAAO,EACPC,YAAa,OAGrB9+C,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,KA5F1B,UA8FEo8D,EAAmB,CACrBl6D,UAAW,CACPpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1BmC,WAlGJ,QAqGJpV,EAAS,CACLW,QAAQ,kCACRD,OAAQ,UACRF,MAAM,IAEV4kC,IACA0B,GAAY,GA3GR,0DA+GZA,GAAY,GACZ9mC,EAAS,CACLW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAEV4kC,IArHY,0DAAH,qDA8HjB,OACI,qCACI,cAAC7vB,EAAA,EAAD,CACIC,QAAS,WAAM4vB,KACfrkC,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAF1D,SAII,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACI,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBACIwR,IAAI,uFACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,yDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAMhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,eAACxC,GAAA,EAAD,WACI,cAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,SACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACR01C,UAAU,SAFd,UAII,eAAC31C,EAAA,EAAD,CACIC,QAAQ,OACRiL,eAAe,SACfqtB,SAAU,EAHd,UAKI,cAACv4B,EAAA,EAAD,UACI,qBAAK2c,IAAI,uFAAuFmgB,IAAI,aAAav9B,UAAWH,EAAQ0tE,oBAExI,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,eAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,UACI,cAACrW,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,sCAIJ,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,QAA9B,UACI,cAAC31C,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACK2O,OAASE,OAAO,kBAGzB,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAQjzB,GAAI,EAA3B,SACI,cAACriB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,8BAAI2O,OAASE,OAAO,QAApB,eAGR,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAQjzB,GAAI,EAA3B,SACI,eAACriB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,UACI,uCADJ,OACkB+xC,QADlB,IACkBA,OADlB,EACkBA,EAAcnM,0BAMhD,cAACl7C,EAAA,EAAD,CAAK0iB,GAAI,GAAIvN,GAAI,EAAGlV,QAAQ,OAAOkL,WAAW,SAA9C,SACQ,cAACuJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACA,cAAC,KAAD,aAKZ,cAACkF,GAAA,EAAD,WACqC,IAAhCxI,EAAOwtC,qBACJ,qCACA,qBAAKhgD,UAAWH,EAAQge,cAAxB,SAuBI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,SACI,eAAC+a,GAAA,EAAD,CACIt6C,SAnHhB,SAACK,EAAOy4D,GAC5BT,EAAcS,GACd1nB,EAAmB,2BAAID,GAAL,IAAsBG,gBAAiBwnB,MAkHrB5mE,MAAOohD,EACPiH,WAAS,EAHb,UAKI,cAACwe,GAAA,EAAD,CACI7mE,MAAM,WADV,SAGI,cAACtI,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,+CAIZ,cAAC65D,GAAA,EAAD,CACI7mE,MAAM,SADV,SAGI,cAACtI,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,oDAOxB,qBAAK/V,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,qBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLc,KAAK,SACLpD,KAAK,iBACLqD,SAAUiS,EACVpS,GAAG,8BACHX,QAAQ,oBAKxB,qBAAK/V,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,sCAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHG,SAAUiS,EACVtV,KAAK,WAHT,UAKI,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDANR,OAQKsL,QARL,IAQKA,OARL,EAQKA,EAAMkmC,oBAAoBptC,KAAI,SAACs7C,GAC5B,OACI,cAACjtC,GAAA,EAAD,CAAUzS,MAAO0/C,EAAS/N,gBAA1B,SAA4C+N,EAAS/N,kCAS7E,cAACj6C,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,qFAMxB,cAACsB,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS80C,EACTn0C,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJT,+BCnYL,SAAS+5D,GAAT,GAAmE,IAA9C7qC,EAA6C,EAA7CA,gBAAiB55B,EAA4B,EAA5BA,QAASwL,EAAmB,EAAnBA,KAAMvL,EAAa,EAAbA,WAC1DmH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzCi6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAErD,EAAiCsF,YAAY4zD,IAArC+I,EAAR,oBACA,EAAqCz2D,qBAAWs0D,IAAxCc,EAAR,EAAQA,eAAgB7uE,EAAxB,EAAwBA,SAExB,EAA4BgG,oBAAS,GAArC,mBAAemF,GAAf,WACA,EAAsCnF,mBAAS,IAA/C,mBAAQmqE,EAAR,KAAoBC,EAApB,KACA,EAAsCpqE,mBAAS,IAA/C,mBAAQqqE,EAAR,KAAoBC,EAApB,KAEMrwE,EAAUR,KACZq8C,EAAuB,GAErBD,EAAQ/hC,aAASoiC,GAAc,CACvC/mC,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,OAInBs9D,EAAe,SAAC78D,GAClB08D,EAAc,2BAAID,GAAL,kBAAkBz8D,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGzD0yC,EAAMpnC,OACXqnC,EAAuBD,EAAMpnC,KAAKqnC,sBAGhC,IAAI00B,EAAc,CACdp3D,QAASxG,EAAOwG,QAChBmrB,MAAO3xB,EAAO2xB,MACdx5B,QAAS6H,EAAO7H,QAChBP,OAAQoI,EAAOpI,OACfimE,IAAK79D,EAAO69D,IACZC,IAAK99D,EAAO89D,IACZhvE,OAAQkR,EAAOlR,OACfqoB,OAAQnX,EAAOmX,OACfgzB,eAAgBnqC,EAAOmqC,eACvBlyC,SAAU+H,EAAO/H,SACjBy5B,SAAU1xB,EAAO0xB,SACjB8b,sBAAsB,EACtBntC,IAAKL,EAAOK,KAGhB8G,qBAAU,WACN8hC,EAAMlpC,YACP,CAACnH,IAEJ,IAAM8+C,EAAW,uCAAG,8BAAA18C,EAAA,yDAChBnC,GAAW,GADK,SAGR0kE,EAAWQ,gBACVR,EAAWS,cACXT,EAAWU,YALJ,uBAOR1lE,GAAS,GACTM,GAAW,GACXzL,EAAS,CACLW,QAAQ,4CACRD,OAAQ,QACRF,MAAM,IAZF,iCAgBF4U,EAAQ,CACV8xD,iBAAkBiJ,EAAWQ,eAC7B9nB,SAAU,cACV9M,YAAas0B,EAAWnjE,WACxBm9C,YAAa8lB,EAAW9lB,YACxB1B,QAASwnB,EAAWS,aACpB7lE,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1Bu1C,WAAY51C,EAAOK,IACnBg0D,iBAAkB,CACdl9C,OAAQnX,EAAOmX,OACfua,SAAU1xB,EAAO0xB,SACjByY,eAAgBnqC,EAAOmqC,eAAe7vC,WACtCq3B,MAAO3xB,EAAO2xB,OAElBwiC,aAAc,CACVhe,KAAMjkC,OAASE,OAAO,MACtBgkC,QAASlkC,OAASE,OAAO,MACzBikC,SAAUnkC,OAASE,OAAO,MAC1BkkC,SAAUpkC,OAASE,OAAO,aAE9BgiD,YAAa,CACTje,KAAM,GACNC,QAAS,GACTC,SAAU,GACVC,SAAU,IAEd0e,cAAc,CACVl7D,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASE,OAAO,eAE9B6iD,aAAa,CACTn7D,KAAM,GACN08C,IAAK,GACLC,IAAK,GACLC,eAAgB,GAChBE,YAAa,GACbN,SAAU,IAEdC,iBAAkBrkC,OAASC,OAAO,SAASC,SAC3C0kC,eAAgB,CACZC,eAAgB,CACZC,MAAO58C,WAAWmjE,EAAWU,aAC7BhnB,YAAa,MAEjBC,qBAAsB,CAClBF,MAAO,EACPC,YAAa,MAEjBE,sBAAuB,CACnBH,MAAO,EACPC,YAAa,MAEjBG,eAAgB,CACZJ,MAAO,EACPC,YAAa,MAEjBI,eAAgB,CACZL,MAAO,EACPC,YAAa,MAEjBK,oBAAqB,CACjBN,MAAO,EACPC,YAAa,MAEjBM,cAAe,CACXP,MAAO,EACPC,YAAa,MAEjBO,qBAAsB,CAClBR,MAAO,EACPC,YAAa,QA3FjB,UAgG2BqmB,EAAqB,CACpD/6D,UAAW,CACP+wD,QAAQ,EACR9wD,WAnGA,QAuG8C,QAPhD07D,EAhGE,QAuGgBr8D,KAAKs8D,sBACzBtlE,GAAW,GACXowC,EAAMlpC,UACN3S,EAAS,CACLW,QAAQ,uCACRD,OAAQ,QACRF,MAAM,MAGVwN,aAAaoM,QAAQ,eAAgBtM,KAAKuM,UAAUy2D,EAAqBr8D,KAAKs8D,uBAC9E/iE,aAAaoM,QAAQ,aAActM,KAAKuM,UAAUm2D,IAClD3B,GAAe,GACf7uE,EAAS,CACLW,QAAQ,0BACRD,OAAQ,UACRF,MAAM,IAEVq7C,EAAMlpC,UACO,WAATqE,GACAouB,KA1HA,0DA+HZ35B,GAAW,GACXzL,EAAS,CACLW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAEG,WAATwW,GACAouB,IAtIQ,0DAAH,qDA2IjB,OAAIyW,EAAMrwC,QAEZ,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKK,gCACI,cAACoK,GAAA,EAAD,UACI,eAACqF,GAAA,EAAD,WACI,sBAAKhb,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,yBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,iBACLqD,SAAUs5D,EACV56D,UAAU,EACVxM,MAAOyJ,EAASA,EAAOmX,OAAS,GAChCjT,GAAG,8BACHX,QAAQ,kBAIpB,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,eAACT,EAAA,EAAD,WACI,sBAAMd,UAAU,cAAhB,gBADJ,YAGA,cAACsb,EAAA,EAAD,CACIvF,QAAQ,WACRR,WAAUuyC,EACVryC,WAAS,EACTK,KAAK,QAJT,SAMI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,iBACLqD,SAAUs5D,EAHd,UAKI,cAAC30D,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,aAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,iCAKhB,sBAAK/I,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,eAACT,EAAA,EAAD,WACI,sBAAMd,UAAU,cAAhB,gBADJ,WAGA,cAACsb,EAAA,EAAD,CACIvF,QAAQ,WACRR,WAAUuyC,EACVryC,WAAS,EACTK,KAAK,QAJT,SAMI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHlD,KAAK,eACLqD,SAAUs5D,EAHd,UAKI,cAAC30D,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAGA2yC,EAAqBvuC,KAAI,SAACo3D,GACtB,OACoB,IAAhBA,EAAKuB,OAAkB,KACnB,eAACtqD,GAAA,EAAD,CAAiCzS,MAAOw7D,EAAK1xD,IAAKuC,QAAS,kBAAM86D,EAAc3L,EAAK5oB,cAApF,kBACU4oB,EAAK5oB,cADA4oB,EAAK5oB,wBAUhD,eAACl7C,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,eAACT,EAAA,EAAD,eAAa,sBAAMd,UAAU,cAAhB,gBAAb,uBACA,cAACS,EAAA,EAAD,CAAKC,QAAQ,OAAOV,UAAWH,EAAQmV,MAAvC,SACI,cAACa,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACL2K,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLC,SAAUs5D,EACVz5D,GAAG,8BACHX,QAAQ,qBAKxB,qBAAK/V,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,4BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,cACLkI,WAAS,EACT2uC,KAAM,EACNxzC,SAAUs5D,EACVz5D,GAAG,8BACHX,QAAQ,yBAOhC,cAACsB,GAAA,EAAD,UACI,cAAC5W,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,WAA/B,SACI,cAACuJ,EAAA,EAAD,CACIC,QAAS80C,EACTn0C,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJT,gCA7TpB4O,KAAOC,OAAO,MCDdD,KAAOC,OAAO,MAoYCg9C,oBAlYf,SAAsBtpD,GAClB,IAAQ2sB,EAAgC3sB,EAAhC2sB,gBAAiB35B,EAAegN,EAAfhN,WACzB,EAAiC8H,YAAY4zD,IAArC+I,EAAR,oBACA,EAAqDz2D,qBAAWs0D,IAAxD/tE,EAAR,EAAQA,SAAU6uE,EAAlB,EAAkBA,eAAgBC,EAAlC,EAAkCA,eAClC,EAA2B9oE,oBAAS,GAApC,mBAAemF,GAAf,WAEMyH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzCi6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAE/ChO,EAAUR,KAChB,EAAsCuG,mBAAS,IAA/C,mBAAQgrE,EAAR,KAAoBC,EAApB,KACA,EAAwCjrE,mBAAS,IAAjD,mBAAQkrE,EAAR,KAAqBC,EAArB,KAEMC,EAAsB,SAAC19D,GACzBu9D,EAAc,2BAAID,GAAL,kBAAkBt9D,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGtDwR,EAAgB,SAACjH,GACnBy9D,EAAe,2BAAID,GAAL,kBAAmBx9D,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAGxDiM,EAAQ,CACV8xD,iBAAkBgK,EAAYhK,iBAC9Bre,SAAU,eACVyhB,iBAAkBpiB,EAAeA,EAAaoiB,iBAAmB,GACjEvuB,YAAamM,EAAY,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAcnM,YAAY7uC,WAAa,GACnEm9C,YAAa6mB,EAAY7mB,YACzB1B,QAAST,EAAeA,EAAaS,QAAU,GAC/C59C,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1Bu1C,WAAY51C,EAAOK,IACnBg0D,iBAAkB,CACdl9C,OAAQnX,EAAOmX,OACfua,SAAU1xB,EAAO0xB,SACjByY,eAAgBnqC,EAAOmqC,eAAe7vC,WACtCq3B,MAAO3xB,EAAO2xB,OAElBwiC,aAAc,CACVhe,KAAO,GACPC,QAAS,GACTC,SAAW,GACXC,SAAU,IAEd8d,YAAa,CACTje,KAAMjkC,OAASE,OAAO,MACtBgkC,QAASlkC,OAASE,OAAO,MACzBikC,SAAUnkC,OAASE,OAAO,MAC1BkkC,SAAUpkC,OAASE,OAAO,aAE9B4iD,cAAc,CACVl7D,KAAM,GACN08C,IAAK,GACLC,IAAK,GACLC,eAAgB,GAChBE,YAAa,GACbN,SAAU,IAEd2e,aAAa,CACTn7D,KAAMoY,OAASE,OAAO,QACtBokC,IAAKtkC,OAASE,OAAO,MACrBqkC,IAAKvkC,OAASE,OAAO,MACrBskC,eAAgBxkC,OAASykC,OAAOr8C,WAChCs8C,YAAa1kC,OAAS2kC,YAAYv8C,WAClCg8C,SAAUpkC,OAASE,OAAO,eAE9BmkC,iBAAkBrkC,OAASC,OAAO,SAASC,SAC3C0kC,eAAgB,CACZC,eAAgB,CACZC,MAAQ58C,WAAWgkE,EAAWrnB,eAAiBqnB,EAAWrnB,eAAiB,GAC3EE,YAAa,MAEjBC,qBAAsB,CAClBF,MAAO58C,WAAWgkE,EAAWlnB,qBAAuBknB,EAAWlnB,qBAAuB,GACtFD,YAAa,MAEjBE,sBAAuB,CACnBH,MAAO58C,WAAWgkE,EAAWjnB,sBAAwBinB,EAAWjnB,sBAAwB,GACxFF,YAAa,MAEjBG,eAAgB,CACZJ,MAAO58C,WAAWgkE,EAAWhnB,eAAiBgnB,EAAWhnB,eAAiB,GAC1EH,YAAa,MAEjBI,eAAgB,CACZL,MAAO58C,WAAWgkE,EAAWK,aAAeL,EAAWK,aAAe,GACtExnB,YAAa,MAEjBK,oBAAqB,CACjBN,MAAO58C,WAAWgkE,EAAW9mB,oBAAsB8mB,EAAW9mB,oBAAsB,GACpFL,YAAa,MAEjBM,cAAe,CACXP,MAAO58C,WAAWgkE,EAAW7mB,cAAgB6mB,EAAW7mB,cAAgB,GACxEN,YAAa,MAEjBO,qBAAsB,CAClBR,MAAO58C,WAAWgkE,EAAW5mB,qBAAuB4mB,EAAW5mB,qBAAuB,GACtFP,YAAa,QAKrB2mB,EAAc,CACdp3D,QAASxG,EAAOwG,QAChBmrB,MAAO3xB,EAAO2xB,MACdx5B,QAAS6H,EAAO7H,QAChBP,OAAQoI,EAAOpI,OACfimE,IAAK79D,EAAO69D,IACZC,IAAK99D,EAAO89D,IACZhvE,OAAQkR,EAAOlR,OACfqoB,OAAQnX,EAAOmX,OACfgzB,eAAgBnqC,EAAOmqC,eACvBlyC,SAAU+H,EAAO/H,SACjBy5B,SAAU1xB,EAAO0xB,SACjB8b,sBAAsB,EACtBntC,IAAKL,EAAOK,KAGVq+D,EAAyB,SAACxC,GACL,WAAnBA,GACA9gE,aAAa0+D,WAAW,cACjC1+D,aAAa0+D,WAAW,aACf1+D,aAAa0+D,WAAW,gBACxB1+D,aAAa0+D,WAAW,iBACxB1+D,aAAa0+D,WAAW,eACjCj0D,EAAMyzD,QAAQ/rD,KAAK,OAEVnS,aAAaoM,QAAQ,aAActM,KAAKuM,UAAUm2D,IAClDxiE,aAAa0+D,WAAW,eACxB1+D,aAAa0+D,WAAW,iBACxB1+D,aAAa0+D,WAAW,kBAI1BpiB,EAAW,uCAAI,sBAAA18C,EAAA,yDACjBnC,GAAW,GADM,SAGTylE,EAAYhK,iBAHH,uBAIT/7D,GAAS,GACTM,GAAW,GACXzL,EAAS,CACLW,QAAQ,0CACRD,OAAQ,QACRF,MAAM,IATD,2CAaH0vE,EAAqB,CACvB/6D,UAAW,CACP+wD,QAAQ,EACR9wD,WAhBC,QAmBTpV,EAAS,CACLW,QAAQ,0BACRD,OAAQ,UACRF,MAAM,IAGV8wE,EAAsBxC,GAEtBrjE,GAAW,GACX25B,IACAypC,GAAe,GA7BN,0DAgCb7uE,EAAS,CACLW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAEViL,GAAW,GACX25B,IAtCa,0DAAJ,qDA2CjB,OACI,qCACI,eAACrvB,GAAA,EAAD,CAAehV,MAAO,CAAC6mB,QAAS,GAAhC,UACA,cAAC/mB,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,kCAEJ,sBAAK/V,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,iBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,SAItB,eAACvwE,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,yBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,iBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,YAK1B,sBAAKhxE,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,+BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,uBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,SAItB,eAACvwE,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,gCACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,wBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,YAM1B,sBAAKhxE,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,wBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,eACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,SAItB,eAACvwE,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,8BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,sBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,YAK1B,sBAAKhxE,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,uBACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,gBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,SAItB,eAACvwE,EAAA,EAAD,CAAKc,MAAM,OAAOvB,UAAWH,EAAQmV,MAArC,UACI,cAAClU,EAAA,EAAD,iCACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIrC,KAAK,uBACLuC,QAAQ,WACRD,KAAK,QACLqI,WAAY,CAACC,IAAK,GAClBxH,KAAK,SACLk8B,aAAc,EACdlyC,MAAM,UACNiW,SAAUm6D,YAKtB,eAACh2D,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,SAAtB,SACI,cAACt1C,EAAA,EAAD,UACI,8DAIZ,cAACka,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGF,QAAQ,WAA1B,SACI,cAAC7c,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,SAAtB,SACI,eAACt1C,EAAA,EAAD,eACO8vE,EAAWrnB,eADlB,iBAMZ,qBAAKvpD,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,eAACT,EAAA,EAAD,WACI,sBAAMd,UAAU,cAAhB,gBADJ,aAGA,cAACsb,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI1E,SAAU0D,EACV7D,GAAG,qBACHlD,KAAK,mBAHT,UAKI,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,aAAhB,wBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,WAAhB,gCAKhB,qBAAK/I,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,2BACA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTiG,WAAS,EACT7E,SAAU0D,EACV8vC,KAAM,EACNv0C,KAAK,QACLtC,KAAK,cACLkD,GAAG,8BACHX,QAAQ,uBAM5B,cAACsB,GAAA,EAAD,UACI,cAAC5W,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,WAA/B,SACI,cAACuJ,EAAA,EAAD,CACIC,QAAS80C,EACTn0C,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJT,+B,gCCxXpB,SAASqU,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGrP,OAAO,OAAlB,SACEmE,OAaN,SAAS4kB,GAAUrlB,GAClB,MAAO,CACNwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IA/B3Cwf,KAAOC,OAAO,MAmCd,IAAMtlB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCse,cAAe,CACdnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGR8gB,UAAW,CACVhhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP4lB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3C4Z,QAAS,CACRn/B,MAAO,IAERo/B,cAAe,CACdnZ,QAAS,OAILrP,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS84D,KACvB,MAAoE93D,qBAAWs0D,IAAvEiB,EAAR,EAAQA,kBAAmBC,EAA3B,EAA2BA,qBAAsBJ,EAAjD,EAAiDA,eACxCj8D,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC5Ci6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAE5ChO,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KAMGga,EAAkB,WACvB6pC,GAAsBD,GACtBH,GAAe,IAiBb,OAdH7sC,OAAO2tC,iBAAiB,WAQxB,SAAoBj8D,GAChBA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SAChBkD,OARE8iB,EAGHx5C,QAAQC,KAAI,GAFZD,QAAQC,KAAI,GAYN,qCACL,cAAC4G,EAAA,EAAD,CACaC,QAAS,kBAAM4vB,KACfrkC,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAFnE,SAIa,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAS/K,MAAO,CAACa,OAAQ,OAAQD,MAAO,QAA1E,UACI,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBACIwR,IAAI,8EACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,QAGtC,cAACd,EAAA,EAAD,UACmB,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,uDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAMhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMwuE,EACNvuE,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMA,cAACyC,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACP,eAACjX,GAAA,EAAD,CACCriB,MAAOA,EACP8N,SA3DmB,SAACK,EAAOmU,GAC/BL,EAASK,IA2DLtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPZ,WAUmC,KAA3B,OAANhZ,QAAM,IAANA,OAAA,EAAAA,EAAQwtC,uBAAiC8H,EACzC,cAACr8B,GAAA,EAAD,aACCxI,MAAM,eACNjL,KAAM,qBAAKoF,IAAI,8EAA8EmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ6gC,WAChInW,GAAU,KAGf,cAACkB,GAAA,EAAD,aACCxI,MAAM,cACNjL,KAAM,qBAAKoF,IAAI,8EAA8EmgB,IAAI,gBAAgBv9B,UAAWH,EAAQ6gC,WAChInW,GAAU,KAGhB,cAACvP,GAAA,EAAD,CAAMC,WAAS,EAACqC,QAAQ,WAAxB,SACC,eAAC7c,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,QAAtB,UACC,cAAC31C,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACE2O,OAASE,OAAO,SAGnB,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,eAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,UACE2O,OAASE,OAAO,MADlB,aAID,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,eAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,kBACQ+xC,EAAsBA,EAAanM,YAApB,eAM1B,cAACl7C,EAAA,EAAD,CAAKqW,GAAI,EAAGqM,GAAI,EAAhB,SACC,cAAChO,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,SAA7E,SACC,cAAC,KAAD,aAKQ,cAAC,GAAD,CAAiBkvB,gBAAiBA,EAAiBj8B,MAAOA,UAO1E,IAAMqoE,GAAkB,SAAC,GAA+B,IAA7BpsC,EAA4B,EAA5BA,gBAAiBj8B,EAAW,EAAXA,MAErC++C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAC5C2E,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAElD,EAA8BjI,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEA,OAAID,EAEH,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKD,cAACoK,GAAA,EAAD,CAAehV,MAAO,CAAC6mB,QAAS,GAAhC,UACmC,KAA3B,OAANhV,QAAM,IAANA,OAAA,EAAAA,EAAQwtC,uBAAiC8H,EACzC,cAAC,GAAD,CAAUnnD,MAAO,CAAC6mB,QAAS,GAAIze,MAAOA,EAAO7D,MAAO,EAApD,SACC,cAAC,GAAD,CAAcmG,WAAYA,EAAY25B,gBAAiBA,MAGxD,cAAC,GAAD,CAAUj8B,MAAOA,EAAO7D,MAAO,EAA/B,SACC,cAAC2qE,GAAD,CAAYzkE,QAASA,EAASC,WAAYA,EAAY25B,gBAAiBA,SCtN5EtgB,KAAOC,OAAO,MAEd,IAAMxM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC3D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGhC,SAASg5D,KAAgB,IAAD,EAC7BvpB,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAC/C2E,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzCmH,EAAQ,CACV8xD,iBAAkB,cAClBve,QAAST,EAAeA,EAAaS,QAAU,GAC/CH,WAAY51C,EAAOK,IACnBq3D,iBAAkBpiB,EAAeA,EAAaoiB,iBAAmB,IAGrE,EAAyBxwD,aAASwiC,GAAwB,CACtDnnC,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,IAAKmC,MAAOA,KAD5EX,EAAR,EAAQA,KAAM9B,EAAd,EAAcA,QAIR1S,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,YACuB,IAAxCxyB,EAAOwG,QAAQ+rB,OAAO+Y,UAAUvgC,KACxC9K,GAASrS,IAIR,IAAIiU,EAAM,OAAO,KAUjB,OARAutB,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,UACbkD,IACAzyB,QAKJ,qCACI,cAAC4C,EAAA,EAAD,CACIC,QAAS,WACL4vB,IACAzyB,KAEJ5R,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAL1D,SAOI,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACI,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBACIwR,IAAI,sFACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,mDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAMhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SAFf,UAII,cAACnL,EAAA,EAAD,UACI,qBAAK2c,IAAI,sFAAsFmgB,IAAI,aAAav9B,UAAWH,EAAQ0tE,oBAEvI,eAAC9sE,EAAA,EAAD,CAAK0iB,GAAI,EAAT,UACI,cAAC1iB,EAAA,EAAD,CAAK21C,UAAU,OAAf,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,iCAIJ,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACK2O,OAASE,OAAO,kBAGzB,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAQjzB,GAAI,EAA3B,SACI,cAACriB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,8BAAI2O,OAASE,OAAO,QAApB,0BAOxB,cAAC5J,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAK0iB,GAAI,EAAGziB,QAAQ,OAAOkL,WAAW,SAASD,eAAe,WAA9D,SACI,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,aAKhB,cAACkF,GAAA,EAAD,UACI,cAACva,EAAA,EAAD,CAAKoQ,EAAG,EAAR,UACiC,IAAhC2B,EAAOwtC,sBAAiC8H,EACrC,qCACI,cAACrnD,EAAA,EAAD,UACI,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,UACI,0CADJ,IACsBvD,EAAOmX,YAGjC,cAAClpB,EAAA,EAAD,UACI,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,UACI,uCADJ,IACmB+xC,EAAeA,EAAanM,YAAc,QAGjE,eAACl7C,EAAA,EAAD,WACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,SACI,6DAEJ,cAACjV,EAAA,EAAD,CAAYiV,QAAQ,YAApB,SACK2O,OAASE,OAAO,+BAGzB,eAACnkB,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,UACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,4DAEJ,cAACjV,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,SAAxC,SACI,yCAAKyT,QAAL,IAAKA,GAAL,UAAKA,EAAMg7D,2BAAX,aAAK,EAA2BC,mCAK5C,cAAC7uE,EAAA,EAAD,CAAK21C,UAAU,SAASvlC,EAAG,EAA3B,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,uFAQpB,cAACsB,GAAA,EAAD,WACqC,IAAhC7E,EAAOwtC,sBAAiC8H,EACrC,cAAC3yC,EAAA,EAAD,CACIC,QAAS4vB,EACTpkC,MAAM,UACNmV,QAAQ,WACRD,KAAK,QACLmG,WAAS,EALb,6BASA,a,iDC9KXq1D,GAAmBryE,YAAH,2RCcd,SAASsyE,GAAT,GAA+C,IAAD,kBAAnBvsC,EAAmB,EAAnBA,gBAC9BplC,EAAayZ,qBAAWs0D,IAAxB/tE,SAER,EAA4BuT,YAAYm+D,IAAhCE,EAAR,oBAEMxD,EAActgE,KAAKC,MAAMC,aAAaC,QAAQ,gBAE9C2E,GADe9E,KAAKC,MAAMC,aAAaC,QAAQ,iBACtCH,KAAKC,MAAMC,aAAaC,QAAQ,gBAE/C,EAA4CjI,mBAAS,IAArD,mBAAQ6rE,EAAR,KAAuBC,EAAvB,KACA,EAAoD9rE,mBAAS,IAA7D,mBAAQ0C,EAAR,KAA2BC,EAA3B,KACA,EAA4C3C,mBAAS0C,EAAiB,OAAGA,QAAH,IAAGA,GAAH,UAAGA,EAAmBqpE,yBAAtB,aAAG,EAAsCzwD,qBAAuB,GAAtI,mBAAQ0wD,EAAR,KAAuBC,EAAvB,KACA,EAA6BjsE,oBAA0B,OAAjB0C,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBqpE,yBAAnB,eAAsCpzD,WAAtC,OAAkDjW,QAAlD,IAAkDA,GAAlD,UAAkDA,EAAmBqpE,yBAArE,aAAkD,EAAsCpzD,UAAY,GAA1I,mBAAQxV,EAAR,KAAeiiB,EAAf,KAEI2mD,EAAoB,GACpBllB,EAAW,OAAGuhB,QAAH,IAAGA,OAAH,EAAGA,EAAa/pD,MAGzBpkB,EAAUR,KAGVypB,EAAe,SAACxV,GAClBo+D,EAAiB,2BAAID,GAAL,kBAAqBn+D,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UA8B5DiM,EAAQ,CACV,MAAS,QACT,UAAag5D,EAAYv+D,UACzB,KAAQu+D,EAAY7rE,KACpB,UAAa6rE,EAAYhqD,UACzB,IAAOgqD,EAAY5rE,IACnB,SAAY4rE,EAAYjsE,SACxB,SAAYisE,EAAYv8B,SACxB,MAASu8B,EAAY/pD,MACrB,eAAiB,EACjB,eAAkB,GAClB,SAAW,EACX,4BAA6C,OAAjB3b,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBirD,4BAAnB,OAA8CjrD,QAA9C,IAA8CA,OAA9C,EAA8CA,EAAmBirD,0BAC7F,kBAAqC,OAAjBjrD,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBqpE,mBAAnB,OAAuCrpE,QAAvC,IAAuCA,OAAvC,EAAuCA,EAAmBqpE,kBAC9E,CACI,UAAa,EACb,qBAAwB,EACxB,oBAAuB,GAE3B,sBAAyB,KACzB,6BAAgC,KAChC,6BAAgCF,EAAcnkB,kBAC9C,QAAU,CACN,MAAS,KACT,QAAW,KACX,cAAiB,QACjB,KAAQ,KACR,aAAgB,KAChB,UAAY,CACR,MAAS,UACT,OAAU,IACV,OAAU,IACV,cAAiB,IACjB,QAAW,UACX,UAAa,IACb,UAAa,IACb,OAAU,IACV,KAAQ,KAEZ,MAAS,0BACT,OAAU,KACV,eAAkB,KAClB,eAAkB,UAClB,eAAkB,OAClB,aAAgB,KAChB,IAAO,KACP,SAAY,OACZ,qBAAwB,MAE5B,UAAa,CACb,CACI,SAAY,EACZ,eAAkB,EAClB,cAAiB,eACjB,SAAY,WACZ,SAAW,EACX,UAAa,CACT,UAAa,GACb,kBAAqB,IACrB,qBAAwB,MAE5B,kBAAoB,EAChB,gBAAmB,CACnB,QAAU,EACV,MAAS,GAEb,OAAU,KACV,gBAAmB,KACnB,uBAA0B,KAC1B,gBAAkB,KAClB,mBAAsB,KACtB,oBAAuB,EACvB,yBAA4B,KAC5B,wBAA2B,KAC3B,qBAAwB,KACxB,OAAU,OACV,cAAiB,MACjB,kBAAoB,EACpB,mBAAsB,CAClB,CACI,mBAAsB,IACtB,0BAA6B,GAC7B,kBAAqB,KACrB,cAAiB,KACjB,cAAiB,SAGzB,YAAc,CACV,IAAO,2BACP,gBAAmB,CACf,cAAiB,OACjB,cAAiB,eACjB,iBAAoB,WACpB,cAAiB,QACjB,gBAAmB,WACnB,YAAe,KACf,aAAgB,KAChB,UAAa,KACb,aAAgB,KAChB,gBAAmB,KACnB,gBAAmB,KACnB,aAAgB,KAChB,SAAY,KACZ,MAAS,KACT,iBAAmB,EACnB,mBAAqB,CACjB,KAAQ,YACR,MAAS,aAGjB,SAAW,CAAC,CACR,WAAc,KAElB,QAAU,CACN,KAAQ,GACR,aAAe,EACf,WAAc,CACV,kBAAqB,GACrB,kBAAqB,EACrB,qBAAwB,OACxB,cAAiB,OAErB,IAAO,GACP,YAAc,EACd,UAAY,EACZ,qBAAwB,EACxB,iBAAoB,CAChB,oBAAuB,IACvB,oBAAuB,SACvB,IAAO,QACP,KAAQ,GAEZ,iBAAoB,CAChB,CACI,cAAiB,EACjB,YAAe,KACf,eAAkB,EAClB,SAAY,IAEhB,CACI,cAAiB,EACjB,YAAe,EACf,eAAkB,EAClB,SAAY,GAEhB,CACI,cAAiB,EACjB,YAAe,EACf,eAAkB,EAClB,SAAY,GAEhB,CACI,cAAiB,EACjB,YAAe,EACf,eAAkB,EAClB,SAAY,GAEhB,CACI,cAAiB,EACjB,YAAe,EACf,eAAkB,EAClB,SAAY,GAEhB,CACI,cAAiB,EACjB,YAAe,EACf,eAAkB,EAClB,SAAY,IAGpB,iBAAoB,CAChB,SAAY,GACZ,6BAAgC,IAChC,6BAAgC,OAChC,OAAU,OACV,cAAiB,SAI7B,OAAU,KACV,MAAS,QAIXwkB,EAAe,uCAAG,4BAAAtkE,EAAA,kEAEZikE,EAAcnkB,mBAAsBmkB,EAAcM,WAFtC,uBAGZnyE,EAAS,CACLW,QAAQ,0CACRD,OAAQ,QACRF,MAAM,IANE,kBAQL,MARK,uBAUqBoxE,EAAgB,CAC7Cz8D,UAAW,CACPC,QACArK,QAAS,2BACTF,SAAU,2BACV+2B,QAAS,2BACT+iC,KAAM,8BAhBF,OAUNyN,EAVM,OAmBZ1jE,QAAQC,IAAIyjE,GAnBA,0DAuBhB1jE,QAAQC,IAAR,MACG,KAAM0G,aAAad,OAC9B7F,QAAQC,IAAI,KAAM0G,aAAad,OAAO89D,QAC5B,KAAM/8D,eAChB5G,QAAQC,IAAI,KAAM2G,cAAc3U,SA3BR,0DAAH,qDAqCrB+N,QAAQC,IAAIy/D,GAoDZ,OACI,qCACI,eAACr4D,GAAA,EAAD,CAAehV,MAAO,CAAC6mB,QAAS,GAAhC,UACI,sBAAKxnB,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBAGA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLP,UAAU,EACVQ,QAAQ,WACRc,SAAUiS,EACV/f,MAAOyJ,EAASA,EAAOmX,OAAS,UAI5C,eAAClpB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,qBAGA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLP,UAAU,EACVsB,SAAUiS,EACV/S,QAAQ,WACRhN,MAAO2b,OAASE,OAAO,eAKvC,sBAAK5kB,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,uBAGA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLP,UAAU,EACVsB,SAAUiS,EACV/S,QAAQ,WACRhN,OAAO,UAAAilE,EAAYvqC,eAAZ,eAAqBK,gBAArB,UAAsCkqC,EAAYvqC,eAAlD,aAAsC,EAAqBK,eAAiB,yBAI/F,eAACrjC,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,iCAGA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTmB,KAAK,OACLC,SAAUiS,EACVhT,KAAK,QACLtC,KAAK,oBACLuC,QAAQ,qBAKxB,sBAAK/V,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,2BAGA,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLP,UAAU,EACVsB,SAAUiS,EACV/S,QAAQ,WACRhN,MAAOilE,EAAW,UAAGA,EAAYvqC,eAAf,aAAG,EAAqBO,eAAiB,UAIvE,eAACvjC,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,6BAGA,cAACwa,EAAA,EAAD,CACIvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QAHT,SAKI,eAACyF,GAAA,EAAD,CACI7E,GAAG,qBACHG,SAAUiS,EACVtV,KAAK,aAHT,UAKI,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACI,kDAEJ,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,gCAKhB,eAACiS,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAMwC,GAAI,EAAV,SACI,cAAC/c,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,eAACsX,GAAA,EAAD,CAAOka,UAAW,EAAlB,UACI,cAAC5hC,EAAA,EAAD,CAAKoQ,EAAG,EAAGulC,UAAW,SAAtB,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,mDAIJ,eAACtV,EAAA,EAAD,CAAK21C,UAAW,SAAUvlC,EAAG,EAA7B,UACI,qBAAK7Q,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,UACI,cAACnL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASiF,EAAG,EAAnE,SACI,qBACIuM,IAAI,2EACJmgB,IAAI,cACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,oCAIJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAS4qC,aAAa,SAASv2C,UAAWH,EAAQ21C,UAArF,SACI,cAACgB,GAAA,EAAD,CACIC,iBA5LhD,SAAmBnjC,GACf,MAAM,GAAN,OAAUA,IA4LkCvK,MAAOA,EAAM8D,QAAQ,GACrB,kBAAgB,8BAChB6pC,kBAAkB,OAClB7/B,SA1LvB,SAACK,EAAOmU,GAC7BL,EAASK,GACT,IAAIlG,EAAevY,YAAY,IAAMye,GAAUxe,QAAQ,IACnD4C,EAAY7C,YAAY6/C,EAActnC,EAAa,KAAKtY,QAAQ,IAChE+pC,EAAmBhqC,YAAY6/C,EAAch9C,GAAW5C,QAAQ,IASpEtE,EARAopE,EAAoB,CAChB,0BAA4B,EAC5B,kBAAqB,CACjB,UAAatmD,EACb,qBAAwB5b,EACxB,oBAAuBmnC,KAI/Bi7B,EAAiBpiE,aAiLW,qBAAKzP,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,KAApB,kCAGA,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAS/K,GAAI,EAApE,SACI,cAAC,KAAD,CAAcF,MAAO,CAACkL,SAAU,GAAIjL,MAAO,aAE/C,cAACiV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLc,KAAK,SACLpD,KAAK,qBACLqD,SA5LtB,SAACvD,GACvB,IAAIujC,EAAYjqC,WAAW0G,EAAEC,OAAOxK,OACpC8oE,EAAiBh7B,GACjB,IAAI1xB,EAAcvY,YAAaiqC,EAAY4V,EAAe,KAAK5/C,QAAQ,IACnE4C,EAAY7C,YAAY,IAAMuY,GAAYtY,QAAQ,IAClD+pC,EAAmBhqC,YAAY6/C,EAAc5V,GAAWhqC,QAAQ,IAUpEtE,EARAopE,EAAoB,CAChB,0BAA4B,EAC5B,kBAAqB,CACjB,UAAaliE,EACb,qBAAwBonC,EACxB,oBAAuBD,KAI/B5rB,EAASvb,IA6KmC1G,MAAO6oE,EACP5xE,UAAWH,EAAQmV,MACnBe,QAAQ,wBAM5B,cAACtV,EAAA,EAAD,CACIoQ,EAAG,EACHnQ,QAAQ,OACRgL,cAAc,cAHlB,SAKI,cAACyJ,EAAA,EAAD,CACIY,QAAQ,WACRnV,MAAM,YACNkV,KAAK,QACLV,QA3LV,WACtBu8D,EAAoB,CAChB,0BAA4B,EAC5B,kBAAqB,CACjB,UAAa,EACb,qBAAwB,EACxB,oBAAuB,IAG/B3mD,EAAS,GACT6mD,EAAiB,GACjBtpE,EAAqBopE,IA4KO,yCAYhB,eAAC32D,GAAA,EAAD,CAAMwC,GAAI,EAAV,UACI,eAAC/c,EAAA,EAAD,CAAKI,GAAI,EAAGiW,GAAI,EAAhB,UACI,cAACrW,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcnK,MAAM,OAAtD,SACI,eAACT,EAAA,EAAD,CAAYH,MAAO,CAACkL,SAAU,IAA9B,UACI,gDADJ,IAC4BmiE,EAAYjgE,UAAUI,YAGtD,cAAC1N,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcnK,MAAM,OAAtD,SACI,eAACT,EAAA,EAAD,CAAYH,MAAO,CAACkL,SAAU,IAA9B,UACI,2CADJ,KACwBmiE,EAAeA,EAAYv8B,SAAU5kC,QAAQ,GAAK,OAG9E,cAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcnK,MAAM,OAAtD,SACI,eAACT,EAAA,EAAD,CAAYH,MAAO,CAACkL,SAAU,IAA9B,UACI,2CADJ,KACwBmiE,EAAeA,EAAYhqD,UAAWnX,QAAQ,GAAI,OAG9E,cAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcnK,MAAM,OAAtD,SACI,eAACT,EAAA,EAAD,CAAYH,MAAO,CAACkL,SAAU,IAA9B,UACI,wCADJ,KACqBmiE,EAAeA,EAAY5rE,IAAKyK,QAAQ,GAAK,OAGtE,cAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcnK,MAAM,OAAtD,SACI,eAACT,EAAA,EAAD,CAAYH,MAAO,CAACkL,SAAU,IAA9B,UACI,2CADJ,IACsB,oBAAGlL,MAAO,CAACC,MAAO,SAAlB,eAA+C,OAAjB0H,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBqpE,oBAAoB,OAACrpE,QAAD,IAACA,GAAD,UAACA,EAAmBqpE,yBAApB,aAAC,EAAsCle,qBAAqB5mD,QAAQ,GAAK,EAA9I,eAI9B,eAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcmF,EAAG,EAAnD,UACI,eAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,mBAEI,oBAAGpV,MAAO,CAACC,MAAO,SAAlB,eACuB,OAAjB0H,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBqpE,qBAAsC,OAAjBrpE,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBqpE,yBAAnB,eAAsCzwD,sBAAuB,GACvG,OAAC5Y,QAAD,IAACA,GAAD,UAACA,EAAmBqpE,yBAApB,aAAC,EAAsCzwD,sBAAsBrU,QAAQ,GACjEmhE,EAAeA,EAAY/pD,MAAOpX,QAAQ,GAAK,QAI3D,cAACpM,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACI,cAAC,KAAD,CAAoBF,MAAO,CAACkL,SAAU,GAAIjL,MAAO,yBAMrE,eAACyW,GAAA,EAAD,WACI,cAAClC,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,WACRD,KAAK,QACLV,QAAS08D,EAJb,iCAQA,cAAC38D,EAAA,EAAD,CACIvU,MAAM,YACNmV,QAAQ,WACRD,KAAK,QACLV,QAAS4vB,EAJb,4BCpjBhB,IAAMkW,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,GAAItV,MAAO,UACpD,CAAE4K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,KAC7C,CAAE1K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IAAKtV,MAAO,UACrD,CAAE4K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IAAKtV,MAAO,WAGtD,SAASilD,GAAWkB,EAAOxuB,EAASv3B,EAAO+X,GAC1C,MAAO,CAAEguC,QAAOxuB,UAASv3B,QAAO+X,SAGjC,IAAMomC,GAAO,CACZ0G,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,KAGtB1xD,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,UAIE,SAAS6wE,GAAT,GAAqD,EAAnBltC,gBAAoB,IAC9DnlC,EAAUR,KAChB,EAA0B4I,IAAMrC,SAAS,GAAzC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCpoC,IAAMrC,SAAS,IAAvD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACpoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEY,MAAO65C,EAAOh6B,UAAvE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,OAIxB,cAAC6I,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,IAA1C,qBAGA,cAACge,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,IAA1C,2BAKF,cAACie,GAAA,EAAD,UACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,GACtE,OACC,cAAC,GAAD,CAAkBA,IAAKA,cAM5B,cAACC,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aA3CsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA2CNC,oBAxC6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SA6CV,IAAM8hC,GAAmB,SAAC,GAAW,IAAVjhC,EAAS,EAATA,IAE1B,OACC,mCACC,eAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,iBAGA,cAACyT,GAAA,EAAD,kBAGA,cAACA,GAAA,EAAD,CAAWzT,MAAM,SAAjB,iBAGA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,iBAGA,cAACyT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CAAY,aAAW,SAASlB,KAAK,QAArC,SACC,cAAC,KAAD,CAAYjK,SAAS,cAGvB,cAAC0T,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CAAY,aAAW,SAASlB,KAAK,QAArC,SACC,cAAC,KAAD,CAAYjK,SAAS,gBApB2BqlC,EAAI8f,S,gCCzGpD74C,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG5C,SAAS8R,GAAS9R,GACjB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACC,6CACCgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALL,aAOErhB,IAAU7D,GACV,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGrP,OAAO,OAAlB,SACEmE,OAaN,SAAS4kB,GAAUrlB,GAClB,MAAO,CACNwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI5B,SAASktE,GAAT,GAA6B,IAARx7D,EAAO,EAAPA,KAEhC8N,KAAOC,OAAO,MAEd,IAAMnS,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzCi6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAC/CmgE,EAActgE,KAAKC,MAAMC,aAAaC,QAAQ,gBAEpD,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA0B7M,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KAMMga,EAAkB,YACqB,KAAtC,OAANxyB,QAAM,IAANA,OAAA,EAAAA,EAAQwG,QAAQ+rB,OAAOgZ,aAAaxgC,MAC7B9K,GAASrS,IAYjB,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAKJ,qCAEK,YAATpuB,EACCo3D,EACC,cAAC74D,EAAA,EAAD,CACCY,QAAQ,WACRnV,MAAM,UACNyU,UAAW,cAAC,KAAD,CAAoB1U,MAAO,CAACkL,SAAU,MACjDuJ,QAAS,WAAM4vB,KAJhB,mCAQG,GAEL,cAAC7vB,EAAA,EAAD,CACCC,QAAS,WAAM4vB,KACfrkC,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAFvD,SAIC,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,KAAD,CAAoBjL,MAAO,CAACkL,SAAU,QAEvC,cAACpL,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACC,iDAGF,cAACtV,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACC,iDAOC,eAAC4U,GAAA,EAAD,CACLC,WAAS,EACTrV,KAAMA,EACNgB,SAAiB,YAAPwV,EAAiB,KAAK,KAChCvW,QAAS2kC,EACTrqB,oBAAqBxC,GALhB,UAOO,cAACyC,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACX,eAACjX,GAAA,EAAD,CACCriB,MAAOA,EACP8N,SAjEmB,SAACK,EAAOmU,GAC/BL,EAASK,IAiELtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPZ,UASW,YAAT5U,EACA,cAAC6U,GAAA,EAAD,aACCxI,MAAM,sBACNjL,KAAO,cAAC,KAAD,CAAoBrX,MAAO,CAACkL,SAAU,OACzC0e,GAAU,KAGf,cAACkB,GAAA,EAAD,aACCxI,MAAM,0BACNjL,KACC,qBACCoF,IAAI,wFACJmgB,IAAI,cACJ58B,MAAO,CAACY,MAAO,OAGbgpB,GAAU,KAGhB,cAACvP,GAAA,EAAD,CAAMC,WAAS,EAACqC,QAAQ,WAAxB,SACC,eAAC7c,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,QAAtB,UACC,cAAC31C,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACE2O,OAASE,OAAO,SAGnB,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,eAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,UACE2O,OAASE,OAAO,MADlB,aAID,cAACnkB,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,gBACEvD,QADF,IACEA,OADF,EACEA,EAAQmX,WAGX,cAAClpB,EAAA,EAAD,CAAK21C,UAAU,QAAf,SACC,eAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,kBACQ+xC,EAAsBA,EAAanM,YAApB,eAK1B,cAACl7C,EAAA,EAAD,CAAKqW,GAAI,EAAGqM,GAAI,EAAhB,SACC,cAAChO,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,SAA7E,SACC,cAAC,KAAD,aAKJ,cAAC,GAAD,CACCkvB,gBAAiBA,EACjBj8B,MAAOA,EACP6N,KAAMA,UAQX,IAAMy7D,GAAuB,SAAC,GAAqC,IAAnCrtC,EAAkC,EAAlCA,gBAAiBj8B,EAAiB,EAAjBA,MAAO6N,EAAU,EAAVA,KACvD,EAAgChR,oBAAS,GAAzC,mBAAQwF,EAAR,UAEA,OAAIA,EAEH,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKQ,YAATqL,EACC,cAAC,GAAD,CAAUjW,MAAO,CAAC6mB,QAAS,GAAIze,MAAOA,EAAO7D,MAAO,EAApD,SACC,cAACqsE,GAAD,CAAiBvsC,gBAAiBA,MAGnC,cAAC,GAAD,CAAUrkC,MAAO,CAAC6mB,QAAS,GAAIze,MAAOA,EAAO7D,MAAO,EAApD,SACC,cAACgtE,GAAD,CAAwBltC,gBAAiBA,OC/M7CtgB,KAAOC,OAAO,MAEd,IAAMxM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASi6D,KACpB,MAAoDj5D,qBAAWs0D,IAAvDmB,EAAR,EAAQA,kBAAmBC,EAA3B,EAA2BA,qBAE3B,EAAwBnpE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WAC1BvyB,GAASrS,IAGPwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAsBR,OACI,qCACG,cAAC7vB,EAAA,EAAD,CACKC,QAAS,kBArBQ,WACzB,IAAIk9D,EAAgB5kE,KAAKC,MAAMC,aAAaC,QAAQ,gBAChDiF,EAAQlF,aAAaC,QAAQ,iBACjC,GAAqB,OAAlBykE,EACC,GAAa,OAAVx/D,EACClF,aAAaoM,QAAQ,gBAAiBtM,KAAKuM,UAAU,CAAC,CAACq4D,gBAAepmE,MAAOwY,OAASE,OAAO,kBAC7FhX,aAAa0+D,WAAW,eACxByC,GAAsBD,OACrB,CACD,IAAIz6D,EAAO3G,KAAKC,MAAMmF,GACtBuB,EAAK0L,KAAK,CAACuyD,gBAAepmE,MAAOwY,OAASE,OAAO,gBACjDhX,aAAaoM,QAAQ,gBAAiBtM,KAAKuM,UAAU5F,IACrDzG,aAAa0+D,WAAW,eACxByC,GAAsBD,IAQPyD,IACf5xE,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAF3D,SAIK,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACI,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,cAAC,KAAD,CAAWjL,MAAO,CAACkL,SAAU,QAEjC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,8CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAMhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,cAACxC,GAAA,EAAD,UACI,cAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,SACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACR01C,UAAU,SACVzqC,eAAe,SACfmkD,aAAa,SACb5I,UAAU,SACVsrB,YAAY,SANhB,UAQI,cAAC/xE,EAAA,EAAD,UACI,cAAC,KAAD,CAAWE,MAAO,CAACkL,SAAU,QAEjC,cAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4CAOhB,cAACsB,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS,WAAM4vB,KACfjvB,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJT,6BChGpB,IAAMzW,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCse,cAAe,CACjBnd,QAAS,OACT,QAAS,CACRK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAEP,iBAAkB,CACjBL,MAAO,QAGNmhB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,WAIG,SAASwxE,GAAT,GAMX,IALHC,EAKE,EALFA,mBACAzsD,EAIE,EAJFA,YACAjjB,EAGE,EAHFA,SACAktB,EAEE,EAFFA,yBACA3d,EACE,EADFA,QAEA,EAAgF8G,qBAAW7T,IAAnFK,EAAR,EAAQA,gBAAiBE,EAAzB,EAAyBA,QAASC,EAAlC,EAAkCA,WAAYF,EAA9C,EAA8CA,kBAAmBuB,EAAjE,EAAiEA,WACjE,EAAgEgS,qBAAW7T,IAAnES,EAAR,EAAQA,oBAAqBC,EAA7B,EAA6BA,uBAAwByB,EAArD,EAAqDA,OAE/C4S,EAAgB,SAACjH,GACA,kBAAlBA,EAAEC,OAAOC,MACZtN,EAAuB,2BACnBD,GADkB,IAErB7C,cAAekQ,EAAEC,OAAOxK,SAG1BjD,EAAkB,2BACdD,GADa,kBAEfyN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,SAGJ,YAAnBuK,EAAEC,OAAOxK,OAA0C,SAAnBuK,EAAEC,OAAOxK,OAC5C2pE,GAAmB,IAoDZ7yE,EAAUR,KAEhB,OACI,eAAC,WAAD,WACJ,cAACoB,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,UACC,2DAGF,cAAC6a,GAAA,EAAD,IACY,sBAAK3b,UAAWH,EAAQge,cAAxB,UACX,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACC,eAAC+Z,EAAA,EAAD,CAAavF,QAAQ,WAAWD,KAAK,QAAQtC,KAAK,gBAAgBiC,WAAS,EAA3E,UACC,cAAC3U,EAAA,EAAD,kCACA,cAAC2d,EAAA,EAAD,CACClJ,SAAU5N,GAAU9B,EAAgBzC,cACpCzC,MAAO,CAAC6mB,QAAS,GACjB9Q,GAAG,8BACHlD,KAAK,gBACLzK,MAAOlD,EAAgBzC,cAAgByC,EAAgBzC,cAAgB,GACvEyT,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAAChB,EAAA,EAAD,CACCI,SAAU5N,GAAU9B,EAAgBzC,cACpCgS,QAAS,kBAvCK,WACvB,IACMgJ,EAAM,KACNhb,EAAgBib,KAAKK,MAAM,KAAAL,KAAKM,SAA6BP,GAAKtR,WACxEhH,EAAkB,2BACdD,GADa,IAEhBzC,mBAED8C,EAAuB,2BACnBD,GADkB,IAErB7C,mBA6BuBwb,IAEfhe,MAAM,UACNmV,QAAQ,WACRD,KAAK,QANN,8BAeL,eAACrV,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sBAAMd,UAAU,cAAhB,gBADD,mBAGA,cAAC6V,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgBwI,cAC5CmF,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAOlD,EAAgBwI,cAAgBxI,EAAgBwI,cAAgB,GACvEgN,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAIZ,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sBAAMd,UAAU,cAAhB,gBADD,sBAGA,cAAC6V,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgB2jB,iBAC5ChW,KAAK,mBACLkD,GAAG,iCACHX,QAAQ,WACRhN,MAAOlD,EAAgB2jB,iBAAmB3jB,EAAgB2jB,iBAAmB,GAC7EnO,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAGZ,cAAC9Z,EAAA,EAAD,CAAKc,MAAM,OAAX,SACC,cAAC81B,GAAD,CAAuB9kB,QAASA,EAAS+kB,QAASpH,EAAyBoH,eAG7E,sBAAKt3B,UAAWH,EAAQge,cAAxB,UACC,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACC,eAACT,EAAA,EAAD,WACC,sBAAMd,UAAU,cAAhB,gBADD,wBAGA,cAAC6V,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgB01B,gBAC5C/nB,KAAK,kBACLkD,GAAG,gCACHX,QAAQ,WACRhN,MAAOlD,EAAgB01B,gBAAkB11B,EAAgB01B,gBAAkB,GAC3ElgB,WAAYhU,EAAW9G,QACvBsW,SAAU0D,OAGZ,eAAC9Z,EAAA,EAAD,CAAKc,MAAM,MAAX,UACC,eAACT,EAAA,EAAD,WACC,sBAAMd,UAAU,cAAhB,gBADD,sBAGA,eAACsb,EAAA,EAAD,CACCvF,QAAQ,WACRN,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUQ,EAAgBslB,cAJ7C,UAMC,eAAC5P,GAAA,EAAD,CACC7E,GAAG,qBACHlD,KAAK,gBACLzK,MAAOlD,EAAgBslB,cAAgBtlB,EAAgBslB,cAAgB,GACvEtU,SAAU0D,EAJX,UAMC,cAACiB,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACC,kDAED,cAACyS,GAAA,EAAD,CAAUzS,MAAM,OAAhB,kBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,QAAhB,sBAED,cAACqa,GAAA,EAAD,UAAiB/b,EAAW9G,gBAGK,UAAlCsF,EAAgBslB,cAChB,qCACC,eAAC1qB,EAAA,EAAD,CAAKc,MAAM,MAAX,UACC,eAACT,EAAA,EAAD,WACC,sBAAMd,UAAU,cAAhB,gBADD,cAGA,cAAC6V,EAAA,EAAD,CACCJ,WAAS,EACTK,KAAK,QACLzQ,MAAOgC,EAAWhC,QAAUrC,EAC5BwQ,KAAK,WACLoD,KAAK,SACLF,GAAG,gCACHX,QAAQ,WACRhN,MAAO/F,GAAsB,GAC7BqY,WAAYhU,EAAW9G,QACvBsW,SAAU,SAACvD,GAAD,OAAO2S,EAAYtE,SAASrO,EAAEC,OAAOxK,cAGjD,eAACtI,EAAA,EAAD,CAAKc,MAAM,MAAX,UACC,cAACT,EAAA,EAAD,qBACA,cAACiiB,GAAA,EAAD,CACCC,QAAS,cAACtD,GAAA,EAAD,CAAU7I,SApLL,SAACvD,GAC+B,IAAD,EAW7C,EAXe,WAAlBA,EAAEC,OAAOC,MAAqBF,EAAEC,OAAOoM,SAC1C3Z,EAAW,2BACPD,GADM,uBAERuN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOoM,SAFjB,uCAAC,eAGO5Z,EAAQzD,YAHhB,IAG4BG,qBAAsB,QAHlD,6CAAC,eAIasD,EAAQjD,kBAJtB,IAIwCC,OAAQ,QAJhD,KAMVmD,EAAuB,2BACnBD,GADkB,IAErBlD,OAAQ,UAGTiD,EAAW,2BACPD,GADM,uBAERuN,EAAEC,OAAOC,KAAOF,EAAEC,OAAOoM,SAFjB,uCAAC,eAGO5Z,EAAQzD,YAHhB,IAG4BG,qBAAsB,QAHlD,6CAAC,eAIasD,EAAQjD,kBAJtB,IAIwCC,OAAQ,QAJhD,KAMVmD,EAAuB,2BACnBD,GADkB,IAErBlD,OAAQ,UA+JyCyQ,KAAK,WACjDyP,MAAM,uBAGR,eAACxiB,EAAA,EAAD,CAAKc,MAAM,MAAX,UACC,cAACT,EAAA,EAAD,0BACA,cAACiiB,GAAA,EAAD,CACCC,QACC,cAACtD,GAAA,EAAD,CAEC7I,SArMY,SAACvD,GACtBxN,EAAkB,2BACdD,GADa,IAEhBnE,gBAAiB4R,EAAEC,OAAOoM,YAmMlBnM,KAAK,oBAGPyP,MAAM,kBACNzP,KAAK,0BAIL,WChPT,IAAMgT,GAAkB,SAAChZ,EAAGiZ,GAC3B,GAAIjZ,EAAEkZ,OAAOC,OAASF,EAAEC,OAAOC,MAC9B,OAAOnZ,EAAEkZ,OAAOC,MAAMC,cAAcH,EAAEC,OAAOC,QAIzCtnB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLtlB,MAAO,QAERulB,MAAO,CACNvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE7B8lB,MAAO,CACN3F,SAAU,KAEXnG,UAAW,CACV5Z,UAAW,QAEZ2lB,SAAU,CACT,uCAAwC,CACvC9b,gBAAiB81C,gBAAKzhD,EAAM2nB,QAAQC,QAAQC,KAAM,MAGpDC,eAAgB,CACflL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,GAERmmB,eAAgB,CACfvL,OAAQ,4BACR3a,OAAQ,GACRD,MAAO,GACP6a,aAAc,WAID,SAASuL,GAAT,GAA+D,IAAhCC,EAA+B,EAA/BA,KAAMC,EAAyB,EAAzBA,YAAaC,EAAY,EAAZA,SAC1DjoB,EAAUR,KACRwI,EAAmBwR,qBAAW7T,IAA9BqC,eAEJogB,EAAyB,aAAKpgB,GAAiBqgB,MAAK,SAAC1a,EAAGiZ,GAAJ,OAAUD,GAAgBhZ,EAAGiZ,MAErF,OACC,qBAAKzmB,UAAWH,EAAQgnB,KAAxB,SACC,cAACsB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQinB,MAA1B,SACC,cAAC3H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CACCpf,UAAWH,EAAQknB,MACnB,kBAAgB,aAChBjR,KAAK,QACL,aAAW,iBACXsS,cAAY,EALb,UAOC,cAAC/I,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,yBACA,cAACA,GAAA,EAAD,kCACA,cAACA,GAAA,EAAD,CAAWhe,MAAO,IAAlB,oBACA,cAACge,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,oBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,mBACA,cAACjI,GAAA,EAAD,qBACCqI,GAAiB,WAATA,EACR,cAACrI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,uBACG,KACJ,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,sBACA,cAACjI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,yBAGF,cAAChI,GAAA,EAAD,UACEyI,EAAuB9a,KAAI,SAACI,EAAUrI,GACtC,OACC,cAAC,GAAD,CAECqI,SAAUA,EACVrI,MAAOA,EACP0iB,KAAMA,EACNC,YAAaA,EACbC,SAAUA,GALL5iB,iBAiBf,IAAMmjB,GAA2B,SAAC,GAAuD,IAArD9a,EAAoD,EAApDA,SAAUrI,EAA0C,EAA1CA,MAAQ0iB,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,SACxE,EAAiEzO,qBAAW7T,IAApEqC,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,kBAAmB3B,EAA3C,EAA2CA,SAAUJ,EAArD,EAAqDA,QACrD,EAA4CH,oBAAS,GAArD,mBAAQ0iB,EAAR,KAAuBC,EAAvB,KACM1oB,EAAUR,KACVmpB,EAAYC,iBAAO,MAEnBC,EAAsB,aAAI7gB,GAAgBqgB,MAAK,SAAC1a,EAAGiZ,GAAJ,OAAUD,GAAgBhZ,EAAGiZ,MAC5EkC,EAAyB,eAAQD,EAAoBxjB,IACrD2jB,EAAa,eAAQtb,GAExBqa,GAAiB,WAATA,IACViB,EAAc7lB,SAAW,GAG1B,IAYM8lB,EAAe,SAAC5R,GACrB,MAAsBA,EAAM3D,OAArBxK,EAAP,EAAOA,MAAOyK,EAAd,EAAcA,KAEd,GADAlF,QAAQC,IAAIiF,GACC,aAATA,EAAqB,CACxB,IAAKzK,EAKJ,OAJA4f,EAA0B3lB,SAAW,GACrC2lB,EAA0BI,YAAa,EACvCL,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGnBC,EAA0B3lB,SAAW4J,WAAW7D,GAChD4f,EAA0BI,YAAa,OACjC,GAAa,WAATvV,EAAmB,CAC7B,IAAMpR,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KACX,IAAK4G,EAIJ,OAHA4f,EAA0BtlB,OAAS,GACnCqlB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGnB,IAAIllB,EAAcoJ,WAAW7D,GACzB4pE,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EAEpC0c,EAAiBjS,WAAW,KAAD,OAAM+lE,IAAY/lE,WAAW,KAAD,OAAMgmE,IAC7DnvE,EAAemJ,YAAYpJ,GAAeqb,EAAe,IAAIhS,QAAQ,IACrElJ,EAAaiJ,YAAYnJ,EAAemJ,WAAW,KAAD,OAAM+lE,KAAW9lE,QAAQ,IAC3EjJ,EAAcgJ,YAAYnJ,EAAemJ,WAAW,KAAD,OAAMgmE,KAAY/lE,QAAQ,IAC7EiU,EAAQ/a,EAAQjD,iBAAiBG,6BACjCY,EAAW+I,aAAcnJ,EAAeqd,GAASA,EAAS,KAAKjU,QAAQ,IAC3E8b,EAA0BrlB,cAAcG,aAAeA,EACvDklB,EAA0BrlB,cAAcE,YAAcA,EACtDmlB,EAA0BrlB,cAAcO,SAAWA,EACnD8kB,EAA0BrlB,cAAcK,WAAaA,EACrDglB,EAA0BrlB,cAAcM,YAAcA,EAEtD+kB,EAA0BtlB,OAASuJ,WAAW7D,OACxC,CACN,IAAKA,EAIJ,OAHA4f,EAA0BvlB,cAAgB,GAC1CslB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,QACrC7gB,EAAkB4gB,GAGnBC,EAA0BvlB,cAAgB2F,EAE3C2f,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,IAGb9J,EAAkB,WACvB,IACMR,EAAM,KACNhb,EAAgBib,KAAKK,MAAM,KAAAL,KAAKM,SAA6BP,GAAKtR,WACxE6b,EAA0BvlB,cAAgBA,EAC1CslB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,IAGbO,EAAe,WACfX,GAMJC,GAAkBD,GAElBT,EAAY,GAAD,oBAAMC,GAAN,CAAgB5iB,OAhFvB2jB,EAAc7lB,WAClB2lB,EAA0B3lB,SAAW,GAEjC6lB,EAAcxlB,SAClBslB,EAA0BtlB,OAAS8C,EAAS,GAAG3C,aAEhDklB,EAAoBpI,OAAOpb,EAAO,EAAGyjB,GACrC7gB,EAAkB4gB,GAClBH,GAAiB,GAmEhBT,EAASxH,OAAOwH,EAAS3Z,OAAS,EAAG,GACrC0Z,EAAY,aAAKC,MAQnB,OACC,eAACxI,GAAA,EAAD,CAAU4J,OAAK,EAACC,UAAWb,EAAetoB,UAAWH,EAAQmnB,SAA7D,UACC,cAACzH,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAAC4T,GAAA,EAAD,CAAUC,QAASkJ,EAAcE,WAAYnoB,MAAM,cAEpD,cAAC2e,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACC,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACC,cAAC0oB,GAAA,EAAD,CACCC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAE9BvK,MAAO8f,EAAczlB,cACrBwT,KAAK,SACLpD,KAAK,SACL+B,UAAWsT,EAAcS,OAAehB,IAEvCO,EAAcS,OAIXT,EAAcS,MAHlB,cAACtS,EAAA,EAAD,CAAYpW,MAAM,UAAUkV,KAAK,QAAQV,QAAS,kBAAMwJ,KAAxD,SACC,cAAC2K,GAAA,EAAD,MAME,UAGN,cAAChK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SAAwBsnB,EAAcW,mBACtC,cAACjK,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACEqB,EAAcnC,OAAO7T,IAAM,cAAC4W,GAAA,EAAD,CAAMxG,MAAO4F,EAAcnC,OAAOC,MAAO/lB,MAAM,YAAe,KAE3F,cAAC2e,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACEqB,EAAcjoB,MAAMiS,IACpB,cAAC6W,GAAA,EAAD,CAAS7R,MAAOgR,EAAcjoB,MAAM+oB,OAAQC,UAAU,MAAMC,OAAK,EAAClP,oBAAqBmP,KAAvF,SACC,qBACC9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACNuK,gBAAiB2d,EAAcjoB,MAAMmpB,SAIrC,OAEL,cAACxK,GAAA,EAAD,CAAWhe,MAAO,IAAlB,SACC,cAAC6nB,GAAA,EAAD,CACCC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAcxlB,OACrBuT,KAAK,MACLpD,KAAK,aAGNoU,GAAiB,WAATA,EACR,cAACrI,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACCja,EAASvK,WAEP,KACJ,cAACuc,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAAC4B,GAAA,EAAD,CACCC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OAAOwV,EAAaxV,IAC9BiC,SAAU+S,EACVvf,MAAO8f,EAAc7lB,SACrB4T,KAAK,MACLpD,KAAK,eAGP,cAAC+L,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACC,cAACxQ,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAAS,kBAAM6T,KAAxC,SACGX,EAA4B,cAAC4B,GAAA,EAAD,IAAZ,cAAC,KAAD,YC5QjB7qB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCmoB,eAAgB,CACfvL,OAAQ,4BACRzb,QAAS,OACTiL,eAAgB,SAChBC,WAAY,SACZpK,OAAQ,GACRD,MAAO,GACPR,OAAQ,EACRqb,aAAc,MACd4T,OAAQ,eAIJpR,GAAkB,WACvB,OAAOP,KAAKK,MAAM,KAAAL,KAAKM,SAA+C,MAAc7R,YAGtE,SAAS+lE,GAAT,GAKX,IAJH3iD,EAIE,EAJFA,yBACA3d,EAGE,EAHFA,QAEAqV,GACE,EAFF9U,MAEE,EADF8U,MAEA,EAKIvO,qBAAW7T,IAFdqC,EAHD,EAGCA,eACAhC,EAJD,EAICA,gBAEOgpB,EAA8BqB,EAA9BrB,QAASuB,EAAqBF,EAArBE,OAAQC,EAAaH,EAAbG,SACzB,EAA0DzqB,mBAAS,IAAnE,mBAAQ0qB,EAAR,KAA8BV,EAA9B,KACA,EAA0DhqB,mBAAS,IAAnE,mBAAQ2qB,EAAR,KAA8BC,EAA9B,KACMC,EAA4C,SAAlC5qB,EAAgBslB,cAAhB,aAAgDiF,GAAhD,aAAgEC,GAChF,EAAkCzqB,mBAAS,IAA3C,mBAAQkiB,EAAR,KAAkBD,EAAlB,KAEM6I,EAA6B7T,uBAClC,WACC,IAAI8T,EAAS,GACTF,EAAU,GACW,aAAQ5oB,GAEb+oB,SAAQ,SAAC/Q,GACxBA,EAAQjf,MAAMiS,KAAK8d,EAAO5Q,KAAKF,EAAQjf,OACvCif,EAAQ6G,OAAO7T,KAAK4d,EAAQ1Q,KAAKF,EAAQ6G,WAG9C,IAAImK,EAAY,GACZC,EAAa,GACXC,EAAqBJ,EAAO/f,QAAO,SAAChQ,GACzC,IAAIowB,GAAcH,EAAUjwB,EAAMiS,KAElC,OADAge,EAAUjwB,EAAMiS,MAAO,EAChBme,KAEFC,EAAqBR,EAAQ7f,QAAO,SAAC8V,GAC1C,IAAIwK,GAAeJ,EAAWpK,EAAO7T,KAErC,OADAie,EAAWpK,EAAO7T,MAAO,EAClBqe,KAGRV,EAAwB,aAAKO,IAC7BnB,EAAwB,aAAKqB,MAE9B,CAAEppB,IAkBH,OAPA8R,qBACC,WACC+W,MAED,CAAEA,IAIF,8BACC,eAAC1V,GAAA,EAAD,CAAMC,WAAS,EAACha,QAAS,EAAzB,UACC,cAAC+Z,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACC,cAAC,GAAD,CAAqByM,KAAMA,EAAMC,YAAaA,EAAaC,SAAUA,MAEtE,eAAC9M,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACC,eAAC1a,EAAA,EAAD,CACCc,MAAM,OACNwV,GAAI,EACJpW,MACCmnB,EAAS3Z,OAAS,EACjB,CACCkjB,cAAe,OACfC,QAAS,IAEP,KATN,UAYC,cAACxwB,EAAA,EAAD,UAA+C,SAAlC+E,EAAgBslB,cAA2B,QAAU,cAClE,cAACwE,GAAD,CAAqBC,wBAAyBA,EAAyBrd,QAASA,IAChF,cAACyI,GAAA,EAAD,CAAMC,WAAS,EAAf,SACEwV,EAAQtjB,KAAI,SAACwZ,EAAOzhB,GAAR,OACZ,cAAC,GAAD,CAECyhB,MAAOA,EACP4J,qBAAsBA,EACtBD,qBAAsBA,EACtBV,wBAAyBA,GAJpB1qB,WAUT,cAACyW,GAAA,EAAD,IACA,eAAClb,EAAA,EAAD,CACCc,MAAM,OACNuV,GAAI,EACJnW,MACCmnB,EAAS3Z,OAAS,EACjB,CACCkjB,cAAe,OACfC,QAAS,IAEP,KATN,UAYC,cAACxwB,EAAA,EAAD,oBACA,cAACytB,GAAD,CAAoBhc,QAASA,IAC7B,cAACyI,GAAA,EAAD,CAAMC,WAAS,EAAf,SACE4T,EAAQ1hB,KAAI,SAACvM,EAAOsE,GAAR,OACZ,cAAC,GAAD,CAECtE,MAAOA,EACP2vB,qBAAsBA,EACtBC,wBAAyBA,EACzBF,qBAAsBA,GAJjBprB,mBAgBd,IAAMqsB,GAAe,SAAC,GAMf,IALN5K,EAKK,EALLA,MACA4J,EAIK,EAJLA,qBACAD,EAGK,EAHLA,qBACAV,EAEK,EAFLA,wBAGM/vB,EAAUR,KACVE,EAAQiyB,eACd,EAQInY,qBAAW7T,IAPdsC,EADD,EACCA,kBACAD,EAFD,EAECA,eACAhC,EAHD,EAGCA,gBACAM,EAJD,EAICA,SACAJ,EALD,EAKCA,QACAgC,EAND,EAMCA,0BACAC,EAPD,EAOCA,4BAED,EAAkCpC,oBAAS,GAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KAqOA,OACC,cAACzW,GAAA,EAAD,CAAME,MAAI,EAAV,SACC,qBACClb,UAAWH,EAAQ6nB,eACnBtS,QAAS,kBApNY,SAACrM,GACxB,IAAM4oB,EAA0B,aAAQrB,GAEnCnH,EAIJwI,EAA2Bf,SAAQ,SAACnV,EAAKvW,GACpCuW,EAAI5I,MAAQ8T,EAAM9T,MACrB8e,EAA2BrR,OAAOpb,EAAO,GACzCusB,EAAY1oB,GACZlB,EAAe+oB,SAAQ,SAAC2V,GACnBA,EAAajd,OACbid,EAAa7f,OAAO7T,MAAQ4I,EAAI5I,KAClC7K,EAA4B,GAAD,oBAAKD,GAAL,CAAgCw+B,aAVhE5U,EAA2B5R,KAAK4G,GAChC8K,EAAY1oB,IAkBb,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAQhqB,GAC3BzF,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KAEb,GAAKouB,EAAqBpiB,QAAW0jB,EAAsB1jB,QAwCpD,IAAKoiB,EAAqBpiB,QAAU0jB,EAAsB1jB,OAAS,EAEzE,IAF6E,IAAD,WAEnED,GACR,IAAM4jB,EAAkBH,EAA2BzjB,GAC7CiG,EAAS0d,EAAsBjhB,QAAO,SAAC6K,GAAD,OAASA,EAAIiL,OAAO7T,MAAQif,EAAgBjf,OACpF8/D,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EAEpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAELjJ,EAAcgJ,YAEjBzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KAChB/lE,QAAQ,IAEPsH,EAAOhG,OACVyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,MAvCVkK,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QA4CH,GAAIqiB,EAAqBpiB,OAAS,GAA2C,IAAtCwjB,EAA2BxjB,QAAgBpF,EAExF,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IACjD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIJ,EAA2BxjB,OAAQ4jB,IACtDH,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,WAAY8I,EAAsB3jB,GAAG6a,WACrC3lB,cAAeyuB,EAAsB3jB,GAAG9K,cACxComB,iBAAkBqI,EAAsB3jB,GAAGsb,iBAC3C9C,OAAQiL,EAA2BI,GACnCnxB,MAAOixB,EAAsB3jB,GAAGtN,MAChCyC,OAAQwuB,EAAsB3jB,GAAG7K,OACjCL,SAAU6uB,EAAsB3jB,GAAGlL,SACnCsmB,OAAO,EACPhmB,cAAeuuB,EAAsB3jB,GAAG5K,qBAIrC,GAAIitB,EAAqBpiB,OAAS,GAAKwjB,EAA2BxjB,OAAS,EAEjF,IAFqF,IAAD,WAE3ED,GAER,IADA,IAAM4jB,EAAkBH,EAA2BzjB,GAHgC,WAI1E6jB,GACR,IAAMC,EAAiBzB,EAAqBwB,GACtCE,EAAyBJ,EAAsBjhB,QACpD,SAACshB,GAAD,OACCA,EAAqBxL,OAAO7T,MAAQif,EAAgBjf,KACpDmf,EAAenf,MAAQqf,EAAqBtxB,MAAMiS,OAEhD8/D,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EACpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAELjJ,EAAcgJ,YAEjBzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KAChB/lE,QAAQ,IAENolB,EAAuB9jB,OAuB3ByjB,EAAkB7R,KAAKkS,EAAuB,IAtB9CL,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,MAxCV+tB,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAAM,EAA9CA,IAFD7jB,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAM,EAApDA,QAkDH,GAAIqiB,EAAqBpiB,OAAS,IAAMwjB,EAA2BxjB,QAEvC0jB,EAAsBjhB,QAAO,SAACrD,GAAD,OAAcA,EAASmZ,OAAO7T,OAC/D1E,OAC7B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACtD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CACtBlN,IAAKuf,EAA4Bvf,IACjCkW,WAAYqJ,EAA4BrJ,WACxC3lB,cAAegvB,EAA4BhvB,cAC3ComB,iBAAkB4I,EAA4B5I,iBAC9C9C,OAAQ,GACR9lB,MAAOwxB,EAA4BxxB,MACnCyC,OAAQ+uB,EAA4B/uB,OACpCL,SAAUovB,EAA4BpvB,SACtCsmB,OAAO,EACPhmB,cAAe8uB,EAA4B9uB,sBA1K9C,IAAK,IAAI4K,EAAI,EAAGA,EAAIyjB,EAA2BxjB,OAAQD,IAAK,CAC3D,IAAM4jB,EAAkBH,EAA2BzjB,GAC/CykE,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EACpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAELjJ,EAAcgJ,YAEjBzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KAChB/lE,QAAQ,IAEX+kB,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,KA6InB4rB,EAAwB,aAAK+B,IAC7B7pB,EAAkB8pB,GAODS,EAAiBlJ,IAChCxoB,MACCwoB,EACC,CACCje,gBAAiB3L,EAAM2nB,QAAQC,QAAQC,MAErC,KARN,SAWC,cAACtmB,EAAA,EAAD,CACCiV,QAAQ,SACRpV,MAAO,CACNC,MAAOrB,EAAM2nB,QAAQoL,gBAAgBnJ,EAAW5pB,EAAM2nB,QAAQC,QAAQC,KAAO,WAC7Evb,SAAU,IAJZ,SAOE8a,EAAMA,aAON4L,GAAU,SAAC,GAMV,IALN3xB,EAKK,EALLA,MACA2vB,EAIK,EAJLA,qBACAC,EAGK,EAHLA,wBACAF,EAEK,EAFLA,qBAGMzwB,GADD,EADLiT,MAEgBzT,MACVE,EAAQiyB,eACd,EAQInY,qBAAW7T,IAPdqC,EADD,EACCA,eACAC,EAFD,EAECA,kBACAjC,EAHD,EAGCA,gBACAM,EAJD,EAICA,SACAJ,EALD,EAKCA,QACAgC,EAND,EAMCA,0BACAC,EAPD,EAOCA,4BAGD,EAAkCpC,oBAAS,GAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KAgOA,OACC,cAACzW,GAAA,EAAD,CAAME,MAAI,EAAV,SACC,cAACwO,GAAA,EAAD,CAAS7R,MAAOjX,EAAM+oB,OAAQC,UAAU,MAAMC,OAAK,EAAClP,oBAAqBmP,KAAzE,SACC,qBACC9pB,UAAWH,EAAQ6nB,eACnB/mB,MAAO,CACNuK,gBAAiBtK,EAAMmpB,IACvBnpB,MAAOrB,EAAM2nB,QAAQoL,gBAAgB1xB,EAAMmpB,MAE5C3U,QAAS,kBArNU,SAACrM,GAClBogB,EAIJoH,EAAqBK,SAAQ,SAACnV,EAAKvW,GAC9BuW,EAAI5I,MAAQjS,EAAMiS,MACrB0d,EAAqBjQ,OAAOpb,EAAO,GACnCusB,EAAY1oB,GACZlB,EAAe+oB,SAAQ,SAAC2V,GACnBA,EAAajd,OACbid,EAAa3lC,MAAMiS,MAAQ4I,EAAI5I,KACjC7K,EAA4B,GAAD,oBAAKD,GAAL,CAAgCw+B,aAVhEhW,EAAqBxQ,KAAKnf,GAC1B6wB,EAAY1oB,IAgBb,IAAI6oB,EAAoB,GAClBC,EAAqB,aAAQhqB,GAC3BzF,EAAc2D,EAAd3D,IAAKD,EAAS4D,EAAT5D,KAEb,GAAKmuB,EAAqBniB,QAAW0jB,EAAsB1jB,QAwCpD,IAAKmiB,EAAqBniB,QAAU0jB,EAAsB1jB,OAAS,EAEzE,IAF6E,IAAD,WAEnED,GACR,IAAM8jB,EAAiBzB,EAAqBriB,GACtCiG,EAAS0d,EAAsBjhB,QAAO,SAAC6K,GAAD,OAASA,EAAI7a,MAAMiS,MAAQmf,EAAenf,OAClF8/D,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EACpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAEPjJ,EAAcgJ,YAEfzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KAChB/lE,QAAQ,IAEPsH,EAAOhG,OACVyjB,EAAkB7R,KAAK5L,EAAO,IAE9Byd,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,MAtCVkK,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QA2CH,GAAIoiB,EAAqBniB,OAAS,GAAqC,IAAhCoiB,EAAqBpiB,QAAgBpF,EAElF,IAAK,IAAImF,EAAI,EAAGA,EAAI2jB,EAAsB1jB,OAAQD,IACjD,IAAK,IAAI6jB,EAAI,EAAGA,EAAIxB,EAAqBpiB,OAAQ4jB,IAChDH,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,WAAY8I,EAAsB3jB,GAAG6a,WACrC3lB,cAAeyuB,EAAsB3jB,GAAG9K,cACxComB,iBAAkBqI,EAAsB3jB,GAAGsb,iBAC3C9C,OAAQmL,EAAsB3jB,GAAGwY,OACjC9lB,MAAO2vB,EAAqBwB,GAC5B1uB,OAAQwuB,EAAsB3jB,GAAG7K,OACjCL,SAAU6uB,EAAsB3jB,GAAGlL,SACnCsmB,OAAO,EACPhmB,cAAeuuB,EAAsB3jB,GAAG5K,qBAIrC,GAAIgtB,EAAqBniB,OAAS,GAAKoiB,EAAqBpiB,OAAS,EAE3E,IAF+E,IAAD,WAErED,GAER,IADA,IAAM8jB,EAAiBzB,EAAqBriB,GAHiC,WAIpE6jB,GACR,IAAMD,EAAkBxB,EAAqByB,GACvCE,EAAyBJ,EAAsBjhB,QACpD,SAACshB,GAAD,OACCA,EAAqBxL,OAAO7T,MAAQif,EAAgBjf,KACpDmf,EAAenf,MAAQqf,EAAqBtxB,MAAMiS,OAEhD8/D,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EACpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAEPjJ,EAAcgJ,YAEhBzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KACf/lE,QAAQ,IAENolB,EAAuB9jB,OAuB3ByjB,EAAkB7R,KAAKkS,EAAuB,IAtB9CL,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQoL,EACRlxB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,MAxCV+tB,EAAI,EAAGA,EAAIzB,EAAqBniB,OAAQ4jB,IAAM,EAA9CA,IAFD7jB,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAM,EAA9CA,QAkDH,GAAIoiB,EAAqBniB,OAAS,IAAMoiB,EAAqBpiB,QAEjC0jB,EAAsBjhB,QAAO,SAACrD,GAAD,OAAcA,EAAS3M,MAAMiS,OAC9D1E,OAC7B,IAAK,IAAIgkB,EAAI,EAAGA,EAAIN,EAAsB1jB,OAAQgkB,IAAK,CACtD,IAAMC,EAA8BP,EAAsBM,GAC1DP,EAAkB7R,KAAK,CACtBlN,IAAKuf,EAA4Bvf,IACjCkW,WAAYqJ,EAA4BrJ,WACxC3lB,cAAegvB,EAA4BhvB,cAC3ComB,iBAAkB4I,EAA4B5I,iBAC9C9C,OAAQ0L,EAA4B1L,OACpC9lB,MAAO,CAAE+oB,OAAQ,GAAII,IAAK,IAC1B1mB,OAAQ+uB,EAA4B/uB,OACpCL,SAAUovB,EAA4BpvB,SACtCsmB,OAAO,EACPhmB,cAAe8uB,EAA4B9uB,sBAzK9C,IAAK,IAAI4K,EAAI,EAAGA,EAAIqiB,EAAqBpiB,OAAQD,IAAK,CACrD,IAAM8jB,EAAiBzB,EAAqBriB,GACxCykE,EAAUvwE,EAAM,GAAN,WAAeA,GAAQA,EACjCwwE,EAAWzwE,EAAO,GAAP,WAAgBA,GAASA,EACpCwB,EAAaiJ,YAEdzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAM+lE,KAChB9lE,QAAQ,IAEPjJ,EAAcgJ,YAEhBzG,EAAS,GAAG1C,aACZmJ,WAAW,KAAD,OAAMgmE,KACf/lE,QAAQ,IAEX+kB,EAAkB7R,KAAK,CACtBlN,IAAK,GACLkW,YAAY,EACZ3lB,cAAewb,KACf4K,iBAAkB3jB,EAAgB2jB,iBAClC9C,OAAQ,GACR9lB,MAAOoxB,EACP3uB,OAAQ8C,EAAS,GAAG3C,YACpBR,SAAU,EACVsmB,OAAO,EACPhmB,cAAe,CACdC,cAAe,EACfE,aAAc0C,EAAS,GAAG1C,aAC1BD,YAAa2C,EAAS,GAAG3C,YACzBE,eAAgB,EAChBC,WAAYA,EACZC,YAAaA,EACbC,SAAUsC,EAAS,GAAGtC,SACtBG,eAAe,KA6InBwsB,EAAwB,aAAKD,IAC7BzoB,EAAkB8pB,GAYAa,EAAgBtJ,IANhC,SAQEA,EAAW,cAAC7R,GAAA,EAAD,IAAW,Y,gCC/oB5B,SAAS6S,GAAS9R,GAChB,IAAQ1S,EAAqC0S,EAArC1S,SAAUoD,EAA2BsP,EAA3BtP,MAAO7D,EAAoBmT,EAApBnT,MAAUklB,EAAnC,aAA6C/R,EAA7C,IAEA,OACE,6CACEgS,KAAK,WACLC,OAAQvhB,IAAU7D,EAClBwR,GAAE,+BAA0BxR,GAC5B,4CAAoCA,IAChCklB,GALN,aAOGrhB,IAAU7D,GACT,cAACzE,EAAA,EAAD,CAAKoQ,EAAG,EAAGrP,OAAO,OAAlB,SACGmE,OAaX,SAAS4kB,GAAUrlB,GACjB,MAAO,CACLwR,GAAG,mBAAD,OAAqBxR,GACvB,gBAAgB,wBAAhB,OAAyCA,IAI7C,IAAM7F,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCse,cAAe,CACbnd,QAAS,OACT,QAAS,CACPK,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,QAGVssE,gBAAiB,CACfhsE,MAAO,IAETwgB,UAAW,CACThhB,OAAO,GAAD,OAAKxB,EAAM0B,QAAQ,GAAnB,cAA2B1B,EAAM0B,QAAQ,GAAzC,OAER4lB,KAAM,CACJmS,SAAU,EACVz3B,MAAO,OACP2J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE5C4Z,QAAS,CACPn/B,MAAO,IAETo/B,cAAe,CACbnZ,QAAS,GAEXxc,SAAU,CACRvL,OAAQF,EAAME,OAAOwL,OAAS,EAC9BrK,MAAO,QAETgsE,uBAAwB,CACxBrrE,MAAO,QAKH4W,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASy6D,KACtB,IAAMjzE,EAAUR,KAChB,EAA0BuG,mBAAS,GAAnC,mBAAOmD,EAAP,KAAciiB,EAAd,KACA,EAAkCplB,oBAAS,GAA3C,mBAAQ8kB,EAAR,KAAkBgc,EAAlB,KAEA,EAgBIrtB,qBAAW7T,IAfbK,EADF,EACEA,gBACAC,EAFF,EAEEA,kBACAC,EAHF,EAGEA,QACAC,EAJF,EAIEA,WACAqB,EALF,EAKEA,WACAC,EANF,EAMEA,cACAlB,EAPF,EAOEA,YACAD,EARF,EAQEA,SACAE,EATF,EASEA,cACAC,EAVF,EAUEA,iBACAL,EAXF,EAWEA,oBACAC,EAZF,EAYEA,uBACAQ,EAbF,EAaEA,kBACAmB,EAdF,EAcEA,eACAC,EAfF,EAeEA,kBAEF,EAAoCuR,qBAAWs0D,IAAvC/tE,EAAR,EAAQA,SAAUQ,EAAlB,EAAkBA,KAAMqS,EAAxB,EAAwBA,QAClBD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAAgCsF,YAAYgZ,IAApC4mD,EAAR,oBACA,EAAoCr5D,aAASkS,GAAmB,CAC9D7W,UAAW,CAAEpK,QAAS6H,EAAO7H,QAAQkI,IAAKpI,SAAU+H,EAAO/H,SAASoI,OAD7DwB,EAAT,EAASA,KAAM9B,EAAf,EAAeA,QAASnH,EAAxB,EAAwBA,QAIlB81B,EAAqB,WACzBp7B,EAAkBrE,IAClBuE,EAAWlE,IACXoE,EAAuB/C,IACvBiD,EAAYjC,IACZmC,EAAiB,IACjBI,EAAkB,IAClBY,EAAc,CAAEjC,OAAO,EAAO9E,QAAS,KACvCuH,EAAkB,IAClBkjB,EAAS,IAGX,EAA8CplB,oBAAS,GAAvD,mBAAOotE,EAAP,KAAwBN,EAAxB,KACA,EAAgC9sE,mBAAS,GAAzC,mBAAO5C,GAAP,KAAiBijB,GAAjB,KAEM+e,GAAkB,YAC2B,IAA9CxyB,EAAOwG,QAAQ+rB,OAAOmZ,gBAAgB3gC,MACvC2jB,IACAzuB,GAASrS,GACTsyE,GAAmB,KAUvB,GANA/4D,qBAAU,WACR,OAAO,WACLpH,OAED,IAEAnH,IAAYiJ,EAAQ,OAAO,KAC9B,GAAIjJ,EACJ,OACE,eAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,UAOE,cAAC+J,EAAA,EAAD,IACA,cAACzK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAIJ,IAAQma,GAA6B7b,EAA7B6b,yBAMR0R,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACfA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,QAIN,IAAMrX,GAAQ,uCAAG,gCAAAngB,EAAA,yDACfk5B,GAAY,KAC0B,UAAlC7gC,EAAgBslB,eAA6BnoB,GAAW,GAF7C,yCAGJsE,GAAc,IAHV,UAMVzB,EAAgBwI,eAChBxI,EAAgBslB,eAChBtlB,EAAgB01B,iBAChB11B,EAAgB2jB,kBAChBzjB,EAAQpD,iBAAiBC,qBACzBmD,EAAQpD,iBAAiBE,qBACzBkD,EAAQjD,iBAAiBE,SAZf,yCAcJsE,GAAc,IAdV,cAiBc,IAAzBjB,EAAc8H,QAMc,IAHP9H,EAAcuK,QACnC,SAACmN,GAAD,OAAcA,EAAS7Z,WAENiK,SALnB9H,EAAc0Z,KAAK9Z,GAOrBF,EAAQoJ,iBAAmBhJ,EAEW,UAAlCN,EAAgBslB,eAA6BnoB,GAAW,IACxD8E,EAAkBvC,IAClB0gB,GAAY,IAEV5R,EAAO,CACXxO,kBACAE,UACAglB,kBAAmB1kB,EACnBwB,iBACA7E,YACA2H,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,IAC1B2uB,QAAShvB,EAAOK,KAvCH,UA2CPmC,EAAQhI,GAAeqH,GA3ChB,UA4CQ0+D,EAAoB,CACvCh+D,UAAW,CACTC,WA9CS,QA4CPb,EA5CO,OAiDb+sB,IACA3uB,IACA3S,EAAS,CACPW,QAAQ,aAAD,OAAY4T,EAAOE,KAAK0+D,oBAAoBxyE,QAA5C,KACPD,OAAQ,UACRF,MAAM,IAERsmC,GAAY,GACZ1B,KAzDa,mDA2Db9D,IACA3uB,IACA3S,EAAS,CACPW,QAAQ,UAAD,OAAY,KAAMA,SACzBD,OAAQ,QACRF,MAAM,IAERsmC,GAAY,GACZ1B,KAnEa,2DAAH,qDAuER9C,GACJ,cAAC/sB,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNwU,QAAS,kBAAMuY,MACf7X,KAAK,QACLT,UAAW,cAAC,KAAD,IACXE,SACmC,UAAlC1P,EAAgBslB,gBACVtlB,EAAgBwI,eAChBxI,EAAgBslB,eAChBtlB,EAAgB01B,iBAChB11B,EAAgB2jB,kBAChBxmB,IACA+C,EAAQpD,iBAAiBC,qBACzBmD,EAAQpD,iBAAiBE,qBACzBkD,EAAQjD,iBAAiBE,YAIzB6C,EAAgBwI,eAChBxI,EAAgBslB,eAChBtlB,EAAgB01B,iBAChB11B,EAAgB2jB,kBAChBzjB,EAAQpD,iBAAiBC,qBACzBmD,EAAQpD,iBAAiBE,qBACzBkD,EAAQjD,iBAAiBE,UAzBlC,qBAmCIm/B,GAAgB,WACpB,OAAc,IAAVp5B,EACKm5B,GAE+B,UAAlCr8B,EAAgBslB,eAA8BtlB,EAAgBslB,cAI9D,cAAChW,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,UACNwU,QAAS,kBAAM4V,EAASjiB,EAAQ,IAChC+M,KAAK,QACLinB,QAAS,cAACqF,GAAA,EAAD,IACT7rB,kBAAgB,EANlB,uBAHK2rB,IAmBb,OACE,qCACE,cAAC/sB,EAAA,EAAD,CACEC,QAAS,WAAM4vB,MACfj8B,MAAM,kBACNpI,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAHxD,SAKE,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACH,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACK,qBACEwR,IAAI,+EACJmgB,IAAI,cACJv9B,UAAWH,EAAQ+sE,2BAG1B,cAACnsE,EAAA,EAAD,UACS,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,oDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAKZ,eAAC4U,GAAA,EAAD,CACFpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,GACTrqB,oBAAqBxC,GAJnB,UAME,cAACyC,GAAA,EAAD,CAAQzE,SAAS,SAASvV,MAAM,UAAUyhC,UAAW,EAArD,SACE,cAAC5hC,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,gBAAnC,SACE,eAACyf,GAAA,EAAD,CACEriB,MAAOA,EACP8N,SAnLS,SAACK,EAAOmU,GAC3BL,EAASK,IAmLCtV,QAAQ,aACRuV,cAAc,KACdC,eAAe,UACfC,UAAU,UACV,aAAW,gCAPb,UASE,cAACC,GAAA,EAAD,aACExI,MAAM,kBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACEn7B,EAAWhC,QAASgC,EAAWs3B,OARnC,SAWE,qBACEvhB,IAAI,8EACJmgB,IAAI,iBACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,MAGO,IAApByoD,GAAgE,UAAlCntE,EAAgBslB,cAC7C,KAEA,cAACM,GAAA,EAAD,aACExI,MAAM,mBACNjL,KACE,cAACsqB,GAAA,EAAD,CACE1hC,MAAM,YACN2hC,aAAc,cAACzhC,EAAA,EAAD,CAAYiV,QAAQ,KAApB,eACd9V,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdqiC,WACIn7B,EAAWhC,QAASgC,EAAW+5B,OARrC,SAWE,qBACEhkB,IAAI,gFACJmgB,IAAI,gBACJv9B,UAAWH,EAAQ6gC,aAIrBnW,GAAU,YAO1B,eAAC5U,GAAA,EAAD,CAAe3V,UAAWH,EAAQ8gC,cAAlC,UACE,cAACr1B,GAAA,EAAD,CAAUtL,UAAWH,EAAQmL,SAAU5K,KAAMsqB,EAA7C,SACE,cAACnf,EAAA,EAAD,CAAkB3K,MAAM,cAE1B,sBAAKZ,UAAWH,EAAQgnB,KAAxB,UACE,eAAC,GAAD,CAAU9d,MAAOA,EAAO7D,MAAO,EAA/B,UACE,cAACutE,GAAD,CACEC,mBAAoBA,EACpBzsD,YAAaA,GACbjjB,SAAUA,GACVktB,yBAA0BA,GAC1B3d,QAASA,IAEX,cAACyP,GAAD,OAEF,cAAC,GAAD,CAAUjZ,MAAOA,EAAO7D,MAAO,EAA/B,SACE,cAAC2tE,GAAD,CACE3iD,yBAA0BA,GAC1B3d,QAASA,YAKjB,eAAC8E,GAAA,EAAD,CAAe1W,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAAzD,UACE,cAACwJ,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,kBAAM4V,EAASjiB,EAAQ,IAChC+M,KAAK,QACLT,UAAW,cAACotB,GAAA,EAAD,IACXltB,SAAoB,IAAVxM,EANZ,sBAUA,cAACoM,EAAA,EAAD,CACEY,QAAQ,WACRnV,MAAM,UACNwU,QAAS,WACP4vB,KACA9D,KAEFprB,KAAK,QACLT,UAAW,cAAC,KAAD,IACXkB,kBAAgB,EATlB,sBAaA,cAAC4rB,GAAD,aCldK,SAAS8wC,GAAT,GAAgD,IAAlBjuC,EAAiB,EAAjBA,gBAEzC,OACI,cAAC,GAAD,UACI,cAAC8tC,GAAD,CAAgB9tC,gBAAiBA,MC4J9B28B,oBAjJf,SAA0BtpD,GACzB,MAAwFgB,qBAAWs0D,IAA3FhuE,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SAAUgvE,EAAzB,EAAyBA,kBAAmBC,EAA5C,EAA4CA,qBAAsBF,EAAlE,EAAkEA,kBAC5D9uE,EAAUR,KAChB,EAA4BuG,mBAAS,iBAArC,mBAAQmD,EAAR,KAAeiiB,EAAf,KACSxY,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC5Ci6C,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAmCrD,OAjCA6W,KAAOC,OAAO,MA+Bdid,OAAO2tC,iBAAiB,WAfxB,SAAoBj8D,GACD,MAAdA,EAAEwuB,SACLzpB,EAAMyzD,QAAQ/rD,KAAK,UAEF,MAAdzM,EAAEwuB,SACLzpB,EAAMyzD,QAAQ/rD,KAAK,QAapB,eAAC,WAAD,WACC,cAACrgB,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACzC,eAACszE,GAAA,EAAD,CACCnqE,MAAOA,EACP8N,SAAU,SAACK,EAAOmU,GACjBL,EAASK,IAEV8nD,YAAU,EACVnzE,UAAWH,EAAQ6sE,cANpB,UAQC,cAACuG,GAAD,IACC,cAACt3D,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAAC80C,GAAD,IACC,cAACz2D,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAAC0xC,GAAD,IACC,cAACrzD,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAAC6zC,GAAD,IACC,cAACx1D,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAAC+zC,GAAD,IACC,cAAC11D,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAAC,GAAD,IACC,cAAC3hB,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAACnoB,EAAA,EAAD,CACCC,QAAS,YA/BkC,IAA5C5C,EAAOwG,QAAQ+rB,OAAOiZ,cAAczgC,KACtClF,EAAMyzD,QAAQ/rD,KAAK,WA+BhBpf,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAFvD,SAIC,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAlC,UACC,cAACjL,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,qBACCwR,IAAI,8EACJmgB,IAAI,cACJv9B,UAAWH,EAAQ+sE,2BAGrB,cAACnsE,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACC,kDAGF,cAACtV,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACC,4CAKH,cAAC+a,GAAA,EAAD,CAAS2hB,YAAY,aACtB,cAACnoB,EAAA,EAAD,CACCC,QAAS,YA/EuB,IAAhC5C,EAAOwtC,sBAAiC8H,GAC3C+mB,GAAsBD,GACtBD,EAAkB,YAElB/gE,aAAa0+D,WAAW,cACxB1+D,aAAa0+D,WAAW,aACf1+D,aAAa0+D,WAAW,eACjC1+D,aAAa0+D,WAAW,gBACxB1+D,aAAa0+D,WAAW,iBACxBj0D,EAAMyzD,QAAQ/rD,KAAK,OAyEhBpf,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,OAJvD,SAMC,eAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAS/K,MAAO,CAAC+uE,cAAe,OAAQluE,OAAQ,OAAQD,MAAO,QAAjG,UACC,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACC,cAAC,KAAD,CAAY5L,UAAWH,EAAQ8sE,iBAAkBhsE,MAAO,CAACC,MAAO,WAEjE,cAACH,EAAA,EAAD,UACC,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACC,+CAKJ,eAACtV,EAAA,EAAD,CACCC,QAAQ,OACRiL,eAAe,WACfhL,MAAO,CAACa,OAAQ,OAAQD,MAAO,QAHhC,UAKC,eAACd,EAAA,EAAD,CAAKI,GAAI,EAAGH,QAAQ,OAAOkL,WAAW,SAAtC,UACC,cAACuR,GAAA,EAAD,CAAQogB,IAAI,aAAa61C,KAAK,8BAA8BpzE,UAAWH,EAAQwc,SAC/E,8BACC,eAAC5b,EAAA,EAAD,WACC,cAACK,EAAA,EAAD,CAAYF,MAAM,gBAAlB,gBAAmC4R,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAQmX,UAC1C,OAACm+B,QAAD,IAACA,OAAD,EAACA,EAAcnM,aAGf,eAAC76C,EAAA,EAAD,CAAYF,MAAM,gBAAlB,UACC,uCADD,OACeknD,QADf,IACeA,OADf,EACeA,EAAcnM,eAH7B,WAUJ,eAACl7C,EAAA,EAAD,CAAKI,GAAI,EAAGH,QAAQ,OAAOkL,WAAW,SAAtC,UACC,qBAAKwR,IAAI,mFAAmFmgB,IAAI,cAAcv9B,UAAWH,EAAQwc,SACjI,8BACC,eAAC5b,EAAA,EAAD,WACC,cAACK,EAAA,EAAD,CAAYF,MAAM,gBAAlB,SACE8jB,OAASE,OAAO,gBAElB,cAAC9jB,EAAA,EAAD,CAAYF,MAAM,gBAAlB,SACC,8BAAI8jB,OAASE,OAAO,QAApB,iCCpJJzM,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASg7D,KACpB,IAAMxzE,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACMuyB,EAAkB,WAC1BvyB,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACC,MAAdA,EAAEwuB,SACDkD,OAKJ,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,cAAC,KAAD,CAAUE,MAAO,CAACkL,SAAU,QAEhC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,2CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,4CAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,cAACxC,GAAA,EAAD,uBAGA,cAAC0B,GAAA,EAAD,U,qCC5CV6jC,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,GAAItV,MAAO,UACpD,CAAE4K,GAAI,SAAUuM,MAAO,YAAa7B,SAAU,GAAItV,MAAO,UACzD,CAAE4K,GAAI,cAAeuM,MAAO,kBAAmB7B,SAAU,KACzD,CAAE1K,GAAI,aAAcuM,MAAO,SAAU7B,SAAU,GAAItV,MAAO,UAC1D,CAAE4K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,GAAItV,MAAO,UACtD,CAAE4K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,GAAItV,MAAO,WAGjDzM,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,OACPP,UAAW,IAEZia,UAAW,CACVzZ,OAAQ,UAIK,SAASsqC,GAAT,GAIX,IAHHwnC,EAGE,EAHFA,kBACAC,EAEE,EAFFA,wBACAnoE,EACE,EADFA,QAGMvL,EAAUR,KAEhB,OAAI+L,EAEC,cAAC3K,EAAA,EAAD,CACEC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALT,SAOE,cAAC+J,EAAA,EAAD,MAKN,cAAC4c,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,cAACC,GAAA,EAAD,UACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEY,MAAO65C,EAAOh6B,UAAvE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,WAM1B,cAAC8I,GAAA,EAAD,UACE8zD,EAAkBnmE,KAAI,SAACI,GACvB,OACC,cAAC,GAAD,CACCA,SAAUA,EACVgmE,wBAAyBA,gBAWlC,SAASznB,GAAT,GAA6D,IAArCv+C,EAAoC,EAApCA,SAAUgmE,EAA0B,EAA1BA,wBAEjC,OACC,mCACC,eAACj0D,GAAA,EAAD,CACC4J,OAAK,EACLmB,KAAK,WACL+e,UAAW,EAEXh0B,QAAS,kBAAMm+D,EAAwBhmE,IALxC,UAOC,cAACgS,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEyB,EAASa,YAAYvI,gBAAgBwI,gBAEvC,cAACkR,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEyB,EAASa,YAAYvI,gBAAgBzC,gBAEvC,cAACmc,GAAA,EAAD,UACEhS,EAASa,YAAYvI,gBAAgB2jB,mBAEvC,cAACjK,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEyB,EAASvK,WAEX,cAACuc,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEyB,EAASxK,SAEX,cAACwc,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACEyB,EAASlK,WAnBNkK,EAASsF,OCtFgB5T,YAAH,iwBAAxB,IAmCMu0E,GAA6Bv0E,YAAH,kuFAoI1Bw0E,GAA4Bx0E,YAAH,klDAsEzBy0E,GAA0Bz0E,YAAH,sqBCjOrB,SAAS00E,GAAT,GAAsD,IAAD,QAAvBC,EAAuB,EAAvBA,qBAEnC/zE,EAAUR,KAEhB,OAAKu0E,EAGD,eAAC54D,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,sBAAKxd,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,UACI,0CAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,iBACK8yE,QADL,IACKA,GADL,UACKA,EAAsBxlE,mBAD3B,iBACK,EAAmCvI,uBADxC,aACK,EAAoD2jB,wBAIjE,eAAC/oB,EAAA,EAAD,CAAKc,MAAM,OAAX,UACI,cAACT,EAAA,EAAD,UACI,iDAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,iBACK8yE,QADL,IACKA,OADL,EACKA,EAAsBxwE,qBAInC,eAAC3C,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,UACI,4CAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,iBACK8yE,QADL,IACKA,OADL,EACKA,EAAsB5wE,gBAInC,eAACvC,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,UACI,0CAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,iBACK8yE,QADL,IACKA,OADL,EACKA,EAAsB7wE,cAInC,eAACtC,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,UACI,6CAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,WACyB,OAApB8yE,QAAoB,IAApBA,OAAA,EAAAA,EAAsBnkE,WAAtB,OAAkCmkE,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAsBnkE,UAAUjM,YAAc,SAI7F,eAAC/C,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,UACI,+CAEJ,cAACL,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACI,EAAA,EAAD,WACyB,OAApB8yE,QAAoB,IAApBA,OAAA,EAAAA,EAAsBnkE,WAAtB,OAAkCmkE,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAsBnkE,UAAUjM,YAAc,cAMrG,cAACwX,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,cAAC,GAAD,CAAuBzX,QAAO,OAAE6tE,QAAF,IAAEA,GAAF,UAAEA,EAAsBxlE,mBAAxB,iBAAE,EAAmCrI,eAArC,aAAE,EAA4CoJ,wBArEtD,KA4EtC,SAASwzB,GAAT,GAA2C,IAAX58B,EAAU,EAAVA,QAE5B,OACE,8BACE,cAACoZ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAO,aAAW,eAAetJ,KAAK,QAAtC,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEygB,SAAU,KAA9B,8BACC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGjU,KAAI,SAACy1B,EAAQ19B,GAAT,OACtB,cAACqa,GAAA,EAAD,CAAW5e,MAAO,CAAEygB,SAAU,KAA9B,SACGwhB,GADuC19B,WAMhD,cAACsa,GAAA,EAAD,UACG,CAAC,mBAAmBrS,KAAI,SAAC4iB,EAAM7qB,GAAP,OACvB,eAACoa,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEwb,OAAQ,GAA5B,SACE,4BAAI4T,MAFR,OAIGhqB,QAJH,IAIGA,OAJH,EAIGA,EAASoH,KAAI,SAACkH,EAAMnP,GAAP,OACZ,cAACqa,GAAA,EAAD,CAAuB5e,MAAO,CAAEwb,OAAQ,GAAxC,gBAA8C9H,QAA9C,IAA8CA,OAA9C,EAA8CA,EAAM7Q,aAApC0B,QALLA,eChG/B,IAAMiT,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASw7D,KAAkB,IAAD,IAC/Bh0E,EAAUR,KACVmT,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAAwBjI,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACA,EAA8C7M,mBAAS,IAAvD,mBAAQkuE,EAAR,KAAwBC,EAAxB,KACA,EAA0DnuE,mBAAS,IAAnE,mBAAQguE,EAAR,KAA8BL,EAA9B,KAEH,EAAkBhxD,uBAAYuxD,EAAgB,KAAtC/qE,EAAR,oBAEG,EAAmC2Q,aAAS+5D,GAA2B,CACzE1+D,UAAW,CACDpK,QAAS6H,EAAO7H,QAAQkI,IACjCpI,SAAU+H,EAAO/H,SAASoI,IACjBmC,MAAO,CACHzH,SAAUxE,EAAMwE,SAAWxE,EAAMwE,SAAW,OALhD8G,EAAR,EAAQA,KAAM9B,EAAd,EAAcA,QAASnH,EAAvB,EAAuBA,QAUnBkoE,EAAoB,GAErBj/D,IAAMi/D,EAAoBj/D,EAAK2/D,wBAElC,IAIMC,EAAU,uCAAG,WAAO3gE,GAAP,SAAA9F,EAAA,sDACA,UAAX8F,EAAE09C,MAA+B,gBAAX19C,EAAE09C,OACxB+iB,EAAkB,2BAAID,GAAL,kBAAsBxgE,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,SAChEwJ,KAHW,2CAAH,sDAOVyyB,EAAkB,WACpBuuC,EAAwB,IACxBhhE,IACNE,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAKJ,qCACG,cAAC7vB,EAAA,EAAD,CACKnV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFd,SAIK,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,cAAC,KAAD,CAAUE,MAAO,CAACkL,SAAU,QAEhC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,8CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACGqU,WAAS,EACrBrV,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GALb,UAOI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,cAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAASrK,MAAM,OAAtE,UACyB,OAApBqyE,QAAoB,IAApBA,GAAA,UAAAA,EAAsBxlE,mBAAtB,eAAmCrH,SAASoH,QAAS,EAClD,cAAC1N,EAAA,EAAD,CAAKT,UAAWH,EAAQutE,eAAxB,SACI,qBACI7vC,IAAI,kBACJngB,IAAG,OAAEw2D,QAAF,IAAEA,GAAF,UAAEA,EAAsBxlE,mBAAxB,aAAE,EAAmCrH,SAAS,GAAG22B,WACpD19B,UAAWH,EAAQyB,WAI3B,cAACb,EAAA,EAAD,CAAKoQ,EAAG,EAAGnQ,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAA7D,SACI,cAAC,KAAD,CAAkBjL,MAAO,CAACkL,SAAU,YAKpD,eAACmP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACI,eAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CACIC,QAAQ,OACRs4B,SAAU,EAFd,SAII,cAACv4B,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,kCAKR,cAACtV,EAAA,EAAD,UACI,cAAC0U,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,WAIZ,qBAAK9V,UAAWH,EAAQge,cAAxB,SACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,eAAC4mB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQyqD,aAA1B,UACI,cAAC1X,GAAA,EAAD,CACIn9B,WAAS,EACTjC,KAAK,WACL6qB,YAAY,qBACZxnB,SAjGnB,SAACvD,GAClBygE,EAAkB,2BAAID,GAAL,kBAAsBxgE,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAiG5BmrE,QAASD,IAEb,cAACj9D,EAAA,EAAD,UACI,cAACmiB,GAAA,EAAD,mBAOxB,cAACw6C,GAAD,CAAqBC,qBAAsBA,IAC3C,cAAC54D,GAAA,EAAD,UACI,cAAC,GAAD,CACIs4D,kBAAmBA,EACnBC,wBAAyBA,EACzBnoE,QAASA,SAIrB,cAACiM,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CAAQC,QAAS4vB,EAAiBjvB,QAAQ,YAAYnV,MAAM,UAAUkV,KAAK,QAA3E,6BCzJpB,IAAMqC,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAGtChZ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCqY,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEPC,KAAM,CACLnM,SAAU,KAEXgb,KAAM,CACLnmB,QAAS,OACTgyC,YAAanzC,EAAM0B,QAAQ,QAId,SAASkzE,KAEpB,IAAMt0E,EAAUR,KAEnB,EAA8BuG,mBAAS,IAAvC,mBACA,GADA,UAC8BA,mBAAS,KAAvC,mBAAQ6oB,EAAR,KAAgBC,EAAhB,KAMG,EAAwB9oB,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WAC1BvyB,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAKJ,mCACI,eAAC,GAAD,WACA,cAAC7vB,EAAA,EAAD,CACIxU,MAAO,CAACa,OAAQ,OAAQD,MAAO,OAAQ4a,OAAQ,sBAC/C/G,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,cAAC,KAAD,CAAeE,MAAO,CAAEkL,SAAU,QAEtC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,6CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAKhB,cAAC4U,GAAA,EAAD,CACIpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJzB,SAMI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,UACI,eAAC/c,EAAA,EAAD,CAAK0iB,GAAI,EAAGziB,QAAQ,OAAOs4B,SAAU,EAAIptB,WAAW,SAApD,UACI,cAACnL,EAAA,EAAD,UACI,cAAC,KAAD,CAAgBE,MAAO,CAACkL,SAAU,QAEtC,cAAC/K,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,yBAIJ,cAACpX,EAAA,EAAD,CAAKI,GAAI,EAAT,SACI,cAACsU,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,CAAWnV,MAAO,CAACkL,SAAU,aAIzC,eAACpL,EAAA,EAAD,CAAKqa,EAAG,EAAGpa,QAAQ,OAAOiL,eAAe,gBAAzC,UACI,cAAClL,EAAA,EAAD,CAAKI,GAAI,EAAGugB,SAAS,MAArB,SACI,eAAC+G,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACI,cAAC+rB,GAAA,EAAD,CACIn9B,WAAS,EACT4oB,YAAY,oBACZxnB,SAAU,SAACvD,GAAD,OAAOob,EAAUpb,EAAEC,OAAOxK,QACpC8pC,WArEhB,SAACv/B,GACL,UAAVA,EAAEiB,KAAiBma,EAAUpb,EAAEC,OAAOu/B,eAqER/pC,MAAO0lB,IAEX,cAACzX,EAAA,EAAD,CAAY5B,QAAS,kBAAMsZ,EAAUD,IAArC,SACI,cAAC0K,GAAA,EAAD,WAIZ,cAAC2L,GAAD,CAAc/U,KAAK,UAAU1C,OAAO,YAAY0X,QAAQ,EAAMC,gBAAiBA,OAEnF,cAACvkC,EAAA,EAAD,CAAKyiB,GAAI,EAAT,SACI,cAACitB,GAAD,CAAepgB,KAAK,UAAUsc,OAAQ5d,EAAQsW,QAAQ,EAAMC,gBAAiBA,gBC/GrG,IAAM7sB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS+7D,KAEpB,IAAMv0E,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WAC1BvyB,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACC,MAAdA,EAAEwuB,SACDkD,OAKJ,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,qBACI2c,IAAI,8EACJmgB,IAAI,eACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,0CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,4CAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMA,cAACxC,GAAA,EAAD,UACI,cAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,SACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACR01C,UAAU,SACVzqC,eAAe,SACfmkD,aAAa,SACb5I,UAAU,SACVsrB,YAAY,SANhB,UAQI,cAAC/xE,EAAA,EAAD,UACI,qBACI2c,IAAI,8EACJmgB,IAAI,aACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,oCAOhB,cAACsB,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS4vB,EACTjvB,QAAQ,YACRnV,MAAM,UAHV,6BCjFhB,IAAMuX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASg8D,KACpB,IAAM7hE,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eACzChO,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,YAC4B,IAA7CxyB,EAAOwG,QAAQ+rB,OAAO6Y,eAAergC,KACpC9K,GAASrS,IAWjB,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACC,MAAdA,EAAEwuB,SACDkD,OAKJ,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,qBACI2c,IAAI,sFACJmgB,IAAI,sBACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,mDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,4CAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,eAACxC,GAAA,EAAD,WACI,cAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,SACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SACXD,eAAe,SAHnB,UAKI,cAAClL,EAAA,EAAD,UACI,qBAAK2c,IAAI,sFAAsFmgB,IAAI,aAAav9B,UAAWH,EAAQ0tE,oBAEvI,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,KAApB,mCAMZ,cAACtV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,iEAKR,eAACsB,GAAA,EAAD,WACI,cAAClC,EAAA,EAAD,CACIC,QAAS,WACLxH,aAAa0+D,WAAW,eACxBtnC,KAEJjvB,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QACLmG,WAAS,EARb,qBAYA,cAAC9G,EAAA,EAAD,CACIC,QAAS4vB,EACTjvB,QAAQ,YACRnV,MAAM,YACNkV,KAAK,QACLmG,WAAS,EALb,+BCpGL,WAA0B,+CC6BnC9D,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASi8D,KAEpB,IAAMz0E,EAAUR,KAChB,EAA4BuG,oBAAS,GAArC,mBAAO2uE,EAAP,KAAeC,EAAf,KAEMC,EAAa,WAAOD,GAAWD,IACrC,EAAwB3uE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEA,EAAoD7M,oBAAS,GAA7D,mBAAO8uE,EAAP,KAEA,GAFA,KAEoC9uE,mBAAS,IAA7C,mBAAO+uE,EAAP,KAAmBC,EAAnB,KACA,EAAsChvE,mBAAS,YAA/C,mBAAOivE,EAAP,KAAoBC,EAApB,KACA,EAAwClvE,mBAAS,GAAjD,mBAAOmvE,EAAP,KAAqBC,EAArB,KACA,EAAsCpvE,mBAAS,GAA/C,mBAAOqvE,EAAP,KAAoBC,EAApB,KACA,EAAwCtvE,mBAAS,IAAjD,mBAAOuvE,EAAP,KAAqBC,EAArB,KACA,EAAgCxvE,qBAAhC,mBAAO7D,EAAP,KAAiBszE,EAAjB,KAEMrwC,EAAkB,WACpB,IAAIv3B,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACtCoW,EAAkB,OAAVxW,EAAiB,EAAIA,EAAMwW,MAEzC2wD,EAAc3wD,EAAMpX,QAAQ,IAC5BmoE,EAAgB/wD,EAAMpX,QAAQ,IACpC4F,GAASrS,GACHg1E,EAA0B,OAAV3nE,EAAiB,GAAKA,EAAMg2B,SAC5C4xC,EAAsB,OAAV5nE,EAAiB,EAAIA,EAAM1L,WAa3C,IAAMuzE,EAAc,SAAChiE,GACjBwhE,EAAexhE,IAGbiiE,EAAqB,SAACjiE,EAAEkiE,GACvBX,IAAgBW,IACfR,EAAgB1hE,EAAEC,OAAOxK,OACzBmsE,EAAe5hE,EAAEC,OAAOxK,MAAQ6D,WAAW+nE,MAMnD,OAFH/yC,OAAOC,UAlBJ,SAAuB3qB,GAEL,KADCA,EAAM4qB,SAEjBkD,KAkBJ,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,qBACI2c,IAAI,6EACJmgB,IAAI,eACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,0CAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,6CAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAIF,QAAQ,SAArC,UACI,eAAC7c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASqtB,SAAU,EAAtD,UACI,cAACv4B,EAAA,EAAD,UACI,qBACI2c,IAAI,6EACJmgB,IAAI,eAAev9B,UAAWH,EAAQ2tE,2BAG9C,cAAC/sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAGs/B,UAAU,SAAtB,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,yBAKR,cAACtV,EAAA,EAAD,UACI,cAAC0U,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,WAIZ,eAACkF,GAAA,EAAD,WACI,qBAAKhb,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,6BAGA,eAACA,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,SAAxC,cACM+zE,KAEN,cAAC7zE,EAAA,EAAD,CAAYiV,QAAQ,UAApB,qDAKR,sBAAK/V,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,MAAM60C,UAAU,SAA3B,UACI,cAAC31C,EAAA,EAAD,UACI,qBACI2c,IAAI,8EACJmgB,IAAI,eAAev9B,UAAWH,EAAQ2tE,uBACtCp4D,QAAS,kBAAMkgE,EAAY,aAC3B30E,MAAO,CAACqvB,OAAQ,eAGxB,cAAClvB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,sBAGA,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,WACLkD,GAAG,yBACHX,QAAQ,WACRhN,MAAuB,aAAhB8rE,EAA8BE,EAAe,OACpDl+D,SAAU,SAACvD,GAAD,OAAOiiE,EAAmBjiE,EAAE,oBAIlD,eAAC7S,EAAA,EAAD,CAAKc,MAAM,MAAM60C,UAAU,SAA3B,UACI,cAAC31C,EAAA,EAAD,UACI,qBACI2c,IAAI,2FACJmgB,IAAI,eAAev9B,UAAWH,EAAQ2tE,uBACtCp4D,QAAS,kBAAMkgE,EAAY,YAC3B30E,MAAO,CAACqvB,OAAQ,eAGxB,cAAClvB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,qBAGA,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAuB,YAAhB8rE,EAA6BE,EAAe,OACnDl+D,SAAU,SAACvD,GAAD,OAAOiiE,EAAmBjiE,EAAE,mBAIlD,eAAC7S,EAAA,EAAD,CAAKc,MAAM,MAAM60C,UAAU,SAA3B,UACI,cAAC31C,EAAA,EAAD,UACI,cAAC,KAAD,CACIE,MAAO,CAACkL,SAAU,GAAGmkB,OAAQ,WAC7B5a,QAAS,kBAAMkgE,EAAY,eAGnC,cAACx0E,EAAA,EAAD,CAAYiV,QAAQ,UAApB,oBAGA,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAuB,WAAhB8rE,EAA4BE,EAAe,OAClDl+D,SAAU,SAACvD,GAAD,OAAOiiE,EAAmBjiE,EAAE,kBAIlD,eAAC7S,EAAA,EAAD,CAAKc,MAAM,MAAM60C,UAAU,SAA3B,UACI,cAAC31C,EAAA,EAAD,CACIoQ,EAAG,EADP,SAGI,qBACIuM,IAAI,wFACJmgB,IAAI,eAAev9B,UAAWH,EAAQ2tE,uBACtCp4D,QAAS,kBAAMkgE,EAAY,kBAC3B30E,MAAO,CAACqvB,OAAQ,eAGxB,cAAClvB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,2BAGA,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAuB,kBAAhB8rE,EAAmCE,EAAe,OACzDl+D,SAAU,SAACvD,GAAD,OAAOiiE,EAAmBjiE,EAAE,yBAIlD,eAAC7S,EAAA,EAAD,CAAKc,MAAM,MAAM60C,UAAU,SAA3B,UACI,cAAC31C,EAAA,EAAD,CACIoQ,EAAG,EADP,SAGI,qBACIuM,IAAI,wEACJmgB,IAAI,eAAev9B,UAAWH,EAAQ2tE,uBACtCp4D,QAAS,kBAAMkgE,EAAY,WAC3B30E,MAAO,CAACqvB,OAAQ,eAGxB,cAAClvB,EAAA,EAAD,CAAYiV,QAAQ,UAApB,oBAGA,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,SACI,cAACmV,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRhN,MAAuB,WAAhB8rE,EAA4BE,EAAe,OAClDl+D,SAAU,SAACvD,GAAD,OAAOiiE,EAAmBjiE,EAAE,qBAKtD,sBAAKtT,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,eAACd,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SAFf,UAII,cAACnL,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,GAAjB,SACI,cAAC,KAAD,CAAeF,MAAO,CAACkL,SAAU,QAErC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,gDAIZ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAAC9K,EAAA,EAAD,CAAYiV,QAAQ,YAApB,SACI,mBAAGpV,MAAO,CAACkL,SAAU,IAArB,SAA4BspE,EAAeA,EAAarxC,eAAiB,uBAKrF,eAACrjC,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,eAACd,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SAFf,UAII,cAACnL,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,GAAjB,SACI,cAAC,KAAD,CAAoBF,MAAO,CAACkL,SAAU,QAE1C,cAACpL,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SAFf,SAII,cAAC9K,EAAA,EAAD,CAAYiV,QAAQ,UAAUjK,MAAM,SAApC,SACI,yDAIZ,cAACrL,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,eAAC9K,EAAA,EAAD,CAAYiV,QAAQ,YAApB,eACOhU,UAKf,eAACtB,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,eAACd,EAAA,EAAD,CACIC,QAAQ,OACRkL,WAAW,SAFf,UAII,cAACnL,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,GAAjB,SACI,cAAC,KAAD,CAAoBF,MAAO,CAACkL,SAAU,QAE1C,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,2DAIZ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAAC9K,EAAA,EAAD,CAAYiV,QAAQ,YAApB,wBAkBR,eAACtV,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,QAA5B,UACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,6CAEJ,eAACjV,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,SAAxC,eACQq0E,KAER,cAACn0E,EAAA,EAAD,CAAYiV,QAAQ,UAApB,sDAMR,eAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACI,cAACD,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4T,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,WACRV,UAAW,qBAAK+H,IAAKq4D,GAASl4C,IAAI,eAAe58B,MAAO,CAACY,MAAO,MAHpE,+BAQJ,cAACd,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,cAAC4T,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,WACRV,UAAW,qBAAK+H,IAAKq4D,GAASl4C,IAAI,eAAe58B,MAAO,CAACY,MAAO,MAHpE,oCAUR,sBAAKvB,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,sDAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,kBAIpB,eAACtV,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,2DAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,kBAIpB,eAACtV,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,yDAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,kBAKpB,cAACtV,EAAA,EAAD,UACI,cAACA,EAAA,EAAD,CAAKc,MAAM,OAAOuV,GAAI,IAAtB,SACI,cAAC3B,EAAA,EAAD,CACIvU,MAAM,UACNmV,QAAQ,WACRD,KAAK,QACLT,UAAW,cAAC6U,GAAA,EAAD,IAJf,2BAYZ,sBAAKlqB,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,sDAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,kBAKpB,eAACtV,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,sDAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,kBAKpB,eAACtV,EAAA,EAAD,CAAKc,MAAM,MAAX,UACI,cAACT,EAAA,EAAD,CAAYiV,QAAQ,UAApB,SACI,wDAEJ,cAACtV,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAA/B,SACI,cAACiK,EAAA,EAAD,CACIJ,WAAS,EACTK,KAAK,QACLtC,KAAK,gBACLkD,GAAG,8BACHX,QAAQ,WACRa,KAAK,uBAQ7B,cAACS,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIW,KAAK,QACLV,QAAS,WACLq/D,KAEJ1+D,QAAQ,YACRnV,MAAM,UACNqb,WAAS,EAPb,2BAcR,eAACzG,GAAA,EAAD,CACRpV,KAAMs0E,EACNr0E,QAASo0E,EACT95D,oBAAqBxC,GAHb,UAKI,eAACxC,GAAA,EAAD,WACI,eAAClV,EAAA,EAAD,CAAK21C,UAAU,SAAf,UACI,cAAC31C,EAAA,EAAD,UACI,cAAC,KAAD,CAAUE,MAAO,CAACkL,SAAU,QAEhC,cAACpL,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAKR,cAACiF,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,cAAC2K,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKoQ,EAAG,EAAGtP,MAAM,OAAO60C,UAAU,SAAlC,UACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,OAAxC,sBAGA,cAACE,EAAA,EAAD,CAAYiV,QAAQ,UAApB,0DAQhB,cAACsB,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS4vB,EACTjvB,QAAQ,YACRD,KAAK,QACLlV,MAAM,UACNqb,WAAS,EALb,0BAYR,eAACzG,GAAA,EAAD,CACRpV,KAAMm0E,EACNl0E,QAASo0E,EACT95D,oBAAqBxC,GAHb,UAKI,eAACxC,GAAA,EAAD,WACI,eAAClV,EAAA,EAAD,CAAK21C,UAAU,SAAf,UACI,cAAC31C,EAAA,EAAD,UACI,cAAC,KAAD,CAAUE,MAAO,CAACkL,SAAU,QAEhC,cAACpL,EAAA,EAAD,CAAK21C,UAAU,SAAf,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,4BAKR,cAACiF,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,GAAf,SACI,cAAC2K,GAAA,EAAD,CAAOka,UAAW,EAAlB,SACI,eAAC5hC,EAAA,EAAD,CAAKoQ,EAAG,EAAGtP,MAAM,OAAO60C,UAAU,SAAlC,UACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,OAAxC,sBAGA,cAACE,EAAA,EAAD,CAAYiV,QAAQ,UAApB,0DAQhB,cAACsB,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS4vB,EACTjvB,QAAQ,YACRD,KAAK,QACLlV,MAAM,UACNqb,WAAS,EALb,6B,mEC5jBd9D,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASq9D,KAAmB,IAAD,oCAChCljE,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/C,EAA8CjI,mBAAS,GAAvD,mBAAO+vE,EAAP,KAAwBC,EAAxB,KAEA,EAA8CjvC,aAC1C6sC,GACA,CACEz+D,UAAW,CAAEtK,SAAU+H,EAAO/H,SAASoI,IAAKlI,QAAS6H,EAAO7H,QAAQkI,KACpE+zB,YAAa,iBAJnB,mBAAOK,EAAP,YAA2B5yB,EAA3B,EAA2BA,KAAMjJ,EAAjC,EAAiCA,QAQ7ByqE,EAAe,KACfxhE,IAAMwhE,EAAexhE,EAAKyhE,yBAE9B,MAAwBlwE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEM5S,EAAUR,KAEV2lC,EAAkB,WAC1BvyB,GAASrS,GACHy1E,EAAe,IAGb5B,EAAU,uCAAG,WAAO/8D,GAAP,eAAA1J,EAAA,sDACI,UAAf0J,EAAM85C,MAAmC,gBAAf95C,EAAM85C,OAC1B+kB,EAAc7+D,EAAM3D,OAAOxK,MACjCk+B,EAAiB,CACblyB,UAAW,CACPihE,eAAgBD,EAChBtrE,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,KAE5B+zB,YAAa,kBATN,2CAAH,sDAchBhF,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACC,MAAdA,EAAEwuB,SACDkD,OAKR,OACI,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,qBACI2c,IAAI,gFACJmgB,IAAI,eACJ58B,MAAO,CAACY,MAAO,QAGvB,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,qDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,4CAKhB,eAAC4U,GAAA,EAAD,CACIpU,SAAS,KACTqU,WAAS,EACTrV,KAAMA,EAClBC,QAAS2kC,EACTrqB,oBAAqBxC,GALb,UAOI,eAACxC,GAAA,EAAD,CACIvV,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAHzB,UAKI,eAAC6C,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,UACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACR01C,UAAU,SACVpd,SAAU,EAHd,UAKI,cAACv4B,EAAA,EAAD,UACI,qBAAK2c,IAAI,2EAA2EmgB,IAAI,kBAAkBv9B,UAAWH,EAAQ0tE,oBAEjI,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,kCAKR,cAACtV,EAAA,EAAD,CAAKw1E,OAAO,OAAOtqE,eAAe,SAAlC,SACI,cAACwJ,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,WAIZ,qBAAK9V,UAAWH,EAAQge,cAAxB,SACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,MAAX,SACI,eAAC4mB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQwtE,sBAA1B,UACI,cAACz6B,GAAA,EAAD,CACIn9B,WAAS,EACTy+D,QAASD,EACT51C,YAAY,uBAEhB,cAACrnB,EAAA,EAAD,UACI,cAACmiB,GAAA,EAAD,aAKf/tB,EACG,cAAC3K,EAAA,EAAD,CACIC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALX,SAOI,cAAC+J,EAAA,EAAD,MAEH,mCACD,eAACyP,GAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAtB,UACqB,QAAZ,EAAA06D,SAAA,mBAAcznE,mBAAd,eAA2BrH,SAASoH,QAAS,EAC1C,cAAC1N,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACA,cAAC,KAAD,CACIqlE,sBAAuBN,EACvBD,gBAAiBA,EACjBQ,cAAe,EACfC,YACI,cAACp/D,EAAA,EAAD,CAAY,aAAW,SAASzB,UAAQ,EAAC3U,MAAM,UAA/C,SACI,cAAC,KAAD,MAGRy1E,aACI,cAACr/D,EAAA,EAAD,CAAY,aAAW,SAASzB,UAAQ,EAAC3U,MAAM,UAA/C,SACI,cAAC,KAAD,MAGR01E,cAAc,EACdC,gBAAc,EACdC,aA7GnB,GA6Fe,mBAkBKX,SAlBL,iBAkBK,EAAcznE,mBAlBnB,aAkBK,EAA2BrH,SAASoG,KAAI,SAAChI,GACtC,OACI,cAAC1E,EAAA,EAAD,CACIT,UAAWH,EAAQ4tE,0BACnB/sE,QAAQ,OACRiL,eAAe,SACfC,WAAW,SAJf,SAMI,qBACI2xB,IAAI,kBACJngB,IAAKjY,EAAMu4B,WACX19B,UAAWH,EAAQ6tE,0BAQvC,cAACjtE,EAAA,EAAD,CAAKoQ,EAAG,EAAGiG,GAAI,GAAIpW,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAArE,SACI,cAAC,KAAD,CAAkBjL,MAAO,CAACkL,SAAU,UAKpD,cAACmP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAtB,SACI,eAACgN,GAAA,EAAD,CAAOka,UAAW,EAAGriC,UAAWH,EAAQstE,oBAAxC,UACI,qBAAKntE,UAAWH,EAAQge,cAAxB,SACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,SACI,cAACt1C,EAAA,EAAD,UACI,sCAAI+0E,SAAJ,aAAI,EAAczyE,sBAI9B,qBAAKpD,UAAWH,EAAQge,cAAxB,SACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,SACI,sCAAI8/D,SAAJ,iBAAI,EAAcznE,mBAAlB,aAAI,EAA2BvI,gBAAgB2jB,yBAI3D,qBAAKxpB,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,WACwC,KAAvB,QAAZ,EAAA+0E,SAAA,eAAcrmE,kBAA6B,oDAA2B,OAE3E,cAAC1O,EAAA,EAAD,CAAYiV,QAAQ,KAApB,UACwC,KAAvB,QAAZ,EAAA8/D,SAAA,eAAcrmE,kBACV,oBAAG7O,MAAO,CAACC,MAAO,OAAlB,wBAA4Bi1E,SAA5B,iBAA4B,EAAcpmE,iBAA1C,aAA4B,EAAyByR,qBAAqBrU,QAAQ,MAClF,oBAAGlM,MAAO,CAACC,MAAO,SAAlB,wBAA8Bi1E,SAA9B,aAA8B,EAAcxyE,kBAIzB,KAAvB,QAAZ,EAAAwyE,SAAA,eAAcrmE,kBACX,qBAAKxP,UAAWH,EAAQge,cAAxB,SACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,UACI,6CAEJ,cAACA,EAAA,EAAD,CAAYiV,QAAQ,KAAKpV,MAAO,CAACC,MAAO,SAAxC,SACI,6CAAMi1E,SAAN,aAAM,EAAcxyE,OAApB,cAIZ,KACJ,sBAAKrD,UAAWH,EAAQge,cAAxB,UACI,eAACpd,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,qBAGA,cAACA,EAAA,EAAD,UACI,sCAAI+0E,SAAJ,aAAI,EAAc9yE,cAG1B,eAACtC,EAAA,EAAD,CAAKc,MAAM,OAAO60C,UAAU,SAA5B,UACI,cAACt1C,EAAA,EAAD,yBAGA,cAACA,EAAA,EAAD,UACI,mCAAiB,QAAZ,EAAA+0E,SAAA,eAAcl0C,oBAAd,UACGk0C,SADH,iBACG,EAAcl0C,mBAAmB,UADpC,aACG,EAAqCkW,mBACrC,0BAWxC,cAACxgC,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CACIC,QAAS4vB,EACTjvB,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJT,6BClPpB,IAAMqC,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC7D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG9B,SAASo+D,KAAoB,IAAD,UACnC52E,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAGA,EAAgD7M,mBAAS,IAAzD,mBAAO4C,EAAP,KAAyBC,EAAzB,KAEA,EAMI4Q,qBAAWs0D,IALbO,EADF,EACEA,qBACAE,EAFF,EAEEA,0BACAC,EAHF,EAGEA,6BACAU,EAJF,EAIEA,qBACAD,EALF,EAKEA,kBAGF,EAAwDlpE,mBACtDwoE,EAA0BjgE,OAAS,EAAIigE,EAA0B,GAAK,IADxE,mBAAOsI,EAAP,KAA6BC,EAA7B,KAIA,EAA0B/wE,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAIMolC,EAAkB,WACtBvyB,GAASrS,IAGXuZ,qBAAU,WACRlR,EAAoBylE,KACnB,CAACA,IAEJ,IAAM0I,EAAwB,uCAAG,gDAAAppE,EAAA,yDAE3BC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACxCC,EAA4B,OAAVL,EAAiB,GAAKA,EAAMM,UAC9CyjC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACrCopE,EACQ,OAAVppE,EACI,CAAEgkC,SAAU,EAAGxtB,MAAO,EAAGD,UAAW,EAAG5hB,IAAK,EAAGD,KAAM,EAAGsN,UAAW,EAAG1N,SAAU,GAChF0L,EACFqpE,EAAsBhpE,IAGxB4oE,EAAqBlzE,YAAc,GACnC4qE,EAA0BjgE,OAAS,GAbN,wBAgBvB4oE,EAhBuB,eAgBO7I,GAC9B8I,EAjBuB,eAiBQ9I,GAjBR,UAmBK5gE,GAChC4gE,GApB2B,aAmBvB+I,EAnBuB,QAuBLjpE,MAvBK,kCAwBH2B,GAAiB,CACrClB,KAAMsoE,EACN/zE,SAAU+zE,EAAuB5mE,eACjCN,gBAAgB,EAChBxM,OAAQ0zE,EAAuBxmE,qBAC/BlO,OAAQ00E,EAAuB3mE,gBAC/BR,OAAQ,KA9Be,eAwBrBsnE,EAxBqB,iBAgCJvnE,GAAiB,CACtClB,KAAMuoE,EACNh0E,SAAUg0E,EAAwB7mE,eAClCN,gBAAgB,EAChBxM,OAAQ+qE,EAA0B,GAClC/rE,OAAQ20E,EAAwB5mE,gBAChCR,OAAQ,UAtCiB,QAgCrBunE,EAhCqB,OAyC3BH,EAAwB3mE,gBAAkB+9D,EAA0B,GAAG5qE,YACvEwzE,EAAwB7lE,qBAAsB,EAC9C6lE,EAAwB1mE,uBAAyB1D,WAAYwhE,EAA0B,GAAG5qE,YAAaqJ,QAAQ,IAC/GmqE,EAAwBzmE,qBAAuB69D,EAA0B,GAEzE0I,EAAoBx2D,OAClB22D,EAAoBhpE,eAAe/I,MACnC,EACA8xE,GAGEI,EAAe,CACnB3lC,SACE7kC,WAAWiqE,EAAgBplC,UAC3B7kC,WAAWsqE,EAAUvoE,iBACrBwoE,EAASxoE,gBACXsV,MACErX,WAAWiqE,EAAgB5yD,OAC3BrX,WAAWsqE,EAAUtoE,cACrBuoE,EAASvoE,aACXoV,UACEpX,WAAWiqE,EAAgB7yD,WAC3BpX,WAAWsqE,EAAUroE,iBACrBsoE,EAAStoE,gBACXzM,IACEwK,WAAWiqE,EAAgBz0E,KAC3BwK,WAAWsqE,EAAUpoE,YACrBqoE,EAASroE,WACX3M,KACEyK,WAAWiqE,EAAgB10E,MAC3ByK,WAAWsqE,EAAUnoE,aACrBooE,EAASpoE,YACXU,UACE7C,WAAWiqE,EAAgBpnE,WAC3B7C,WAAWsqE,EAAUloE,kBACrBmoE,EAASnoE,iBACXjN,SAAU6K,WAAWiqE,EAAgB90E,UAAY6K,WAAWsqE,EAAUjoE,iBACpEkoE,EAASloE,iBAIbrB,aAAaoM,QACX,cACAtM,KAAKuM,UAAL,2BACKm9D,GADL,IAEE3zC,SACiC,IAA/B+N,EAAaG,cAAyBH,EAAa/N,QAAU,GAC/DkO,eACiC,IAA/BH,EAAaG,eACTH,EAAaG,cAEnB5jC,UAAW+oE,MAIf/H,GAAsBD,GACtBT,EAA6B,IAC7B5lE,EAAoB,IAEpBu8B,IApG6B,wBAsG3B12B,QAAQC,IAAI,0BAtGe,gCAyG7B3O,EAAS,CACPW,QAAS,4BACTD,OAAQ,QACRF,MAAM,IA5GqB,4CAAH,qDAiHxB+zC,EAAc,SAAC9wC,GACnB,IAAIgxC,EAAc,GAClBA,EAAcA,EAAYC,OAAO,GAAIjxC,GACrCszE,EAAwBtzE,GACxBgrE,EAA6Bh6B,IAa/B,OARAzS,OAAO2tC,iBAAiB,WAExB,SAAoBj8D,GACA,MAAdA,EAAEwuB,SACJkD,OAKF,qCACE,cAACtlC,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACuV,EAAA,EAAD,CAAQnV,UAAWH,EAAQqtE,iBAAkB93D,QAAS4vB,EAAtD,SACE,eAACvkC,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,UACE,qBACE2c,IAAI,8EACJmgB,IAAI,cACJ58B,MAAO,CAAEkL,SAAU,QAGvB,cAACpL,EAAA,EAAD,UACE,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACE,4CAGJ,cAACtV,EAAA,EAAD,UACE,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAAEC,MAAO,WAA9C,SACE,4CAMR,eAAC4U,GAAA,EAAD,CACEpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJvB,UAME,eAACxC,GAAA,EAAD,WACE,cAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,SACE,eAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,UACE,cAAClL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,qBACEsG,IAAI,uEACJmgB,IAAI,aACJv9B,UAAWH,EAAQ0tE,oBAGvB,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACE,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEvB,eAAC78B,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAK21C,UAAU,QAAQxgC,GAAI,EAA3B,SACE,cAACT,EAAA,EAAD,CACEY,QAAQ,YACRnV,MAAM,YACNwU,QAAS4vB,EACTlvB,KAAK,SAJP,SAME,cAAC,KAAD,QAGJ,cAACrV,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACE,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,2CAKR,eAACiF,GAAA,EAAD,WACE,qBAAKhb,UAAWH,EAAQge,cAAxB,SACE,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACE,eAACT,EAAA,EAAD,qBACU,IACPotE,EAAoB,OACjBA,QADiB,IACjBA,GADiB,UACjBA,EAAsB9/D,mBADL,iBACjB,EAAmCvI,uBADlB,aACjB,EACI2jB,iBACJ,UAIV,cAACrB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACE,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACE,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACE,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,MAC3B,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,oBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAA3B,yBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,4BAGA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,2BAGJ,cAACie,GAAA,EAAD,iBACGhX,QADH,IACGA,GADH,UACGA,EAAkB4F,mBADrB,iBACG,EAA+BrI,eADlC,iBACG,EAAwCoJ,wBAD3C,aACG,EAA0DhC,KACzD,SAAC9J,EAAQ6B,GACP,IApGFsO,EAoGQkhC,GApGRlhC,EAoGoCnQ,GApGkB,IAA7C+qE,EAA0Bh6B,QAAQ5gC,IAqGnCua,EAAO,kCAA8B7oB,GAC3C,OACE,cAAC,GAAD,CAEE7B,OAAQA,EACRqxC,eAAgBA,EAChB3mB,QAASA,EACTomB,YAAaA,GAJRjvC,qBAezB,cAACmS,GAAA,EAAD,UACE,cAAClC,EAAA,EAAD,CACEC,QAAS,kBAAMwhE,KACf7gE,QAAQ,YACRnV,MAAM,UACNkV,KAAK,QAJP,6BAcV,IAAM8hC,GAAkB,SAAC,GAAsD,IAApDv0C,EAAmD,EAAnDA,OAAQqxC,EAA2C,EAA3CA,eAAgB3mB,EAA2B,EAA3BA,QAASomB,EAAkB,EAAlBA,YAW1D,OACE,cAAC,WAAD,UACE,eAAC70B,GAAA,EAAD,CACE+K,KAAK,WACL,eAAcqqB,EACdtL,UAAW,EAEXjgB,SAAUurB,EACVxrB,OAAK,EACL9T,QAAS,SAAC9B,GAAD,OAnBK,SAACA,GACnB,IACmB,IAAbA,EAAEo9C,QACJvc,EAAY9wC,GAEd,MAAOgC,GACPiJ,QAAQC,IAAIlJ,IAaMgyE,CAAY/jE,IAP9B,UASE,cAACiM,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC9H,GAAA,EAAD,CACEtK,QAAS,SAAC8B,GACRi9B,EAAY9wC,IAEdsc,QAAS+0B,EACTv2B,WAAY,CAAE,kBAAmB4P,OAGrC,cAACxO,GAAA,EAAD,CAAWzT,MAAO,SAAlB,SAA6BzI,EAAOE,gBACpC,cAACgc,GAAA,EAAD,CAAWzT,MAAO,SAAlB,SAA6BzI,EAAOG,YAAc,EAAIH,EAAOG,YAAYqJ,QAAQ,GAAK,IACtF,cAAC0S,GAAA,EAAD,CAAWzT,MAAO,SAAlB,SAA6BzI,EAAOK,iBACpC,eAAC6b,GAAA,EAAD,CAAWzT,MAAO,SAAlB,UAA6BzI,EAAOQ,SAApC,UAjBKR,EAAOE,kB,qBC9Td23C,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,GAAItV,MAAO,UACpD,CAAE4K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,GAAItV,MAAO,UACpD,CAAE4K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,IAAKtV,MAAO,UACzD,CAAE4K,GAAI,YAAauM,MAAO,YAAa7B,SAAU,GAAItV,MAAO,UAC5D,CAAE4K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IAAKtV,MAAO,WAGhDzM,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACVzZ,OAAQ,OACL,wBAAyB,CACtBd,QAAS,WAKF,SAAS42E,KAEvB,IAAMz3E,EAAUR,KAEZk4E,EAAgB7pE,KAAKC,MAAMC,aAAaC,QAAQ,kBAEpD,OACC,cAACsa,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,SACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEY,MAAO65C,EAAOh6B,UAAvE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,OAIxB,cAAC6I,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,IAA1C,sBAIA,cAACge,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,IAA1C,2BAKF,cAACie,GAAA,EAAD,iBACE+3D,QADF,IACEA,OADF,EACEA,EAAepqE,KAAI,SAAC+jC,EAAKhsC,GACzB,OACC,cAAC,GAAD,CAAYuI,MAAOyjC,EAAKhsC,MAAOA,gBAWvC,IAAMsyE,GAAa,SAAC,GAAsB,IAApB/pE,EAAmB,EAAnBA,MAAOvI,EAAY,EAAZA,MAEzB,EAAoDmU,qBAAWs0D,IAAvDmB,EAAR,EAAQA,kBAAmBC,EAA3B,EAA2BA,qBAC9B,EAAwBnpE,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KACSD,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE9C0pE,EAAgB7pE,KAAKC,MAAMC,aAAaC,QAAQ,kBAChDykE,EAAgB5kE,KAAKC,MAAMC,aAAaC,QAAQ,gBAiBpD,IAeMm3B,EAAkB,WACvBvyB,GAASrS,IAGV,OACC,qCACC,eAACkf,GAAA,EAAD,CACC4J,OAAK,EACLkgB,UAAW,EAFZ,UAKC,cAAC7pB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACE5G,EAAQ,IAEV,cAACqa,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACE2B,EAAMvB,MAAQuB,EAAMvB,MAAQ,KAE9B,cAACqT,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACE2B,EAAM6kE,cAAc7uC,QAAUh2B,EAAM6kE,cAAc7uC,QAAQK,eAAiB,iBAE7E,cAACvkB,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACE2B,EAAM6kE,cAAcvkE,UAAUI,SAEhC,eAACoR,GAAA,EAAD,CAAWzT,MAAM,SAAjB,eACK2B,EAAM6kE,cAAcruD,MAAOpX,QAAQ,MAExC,cAAC0S,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CACC,aAAW,WACXpW,MAAM,UACNkV,KAAK,QACLV,QAAS,kBA9Ceb,EA8CWrP,OA7ClB,OAAlBotE,GACFiF,EAAc3mD,SAAQ,SAAC/Q,EAAS3a,GAC3BA,IAAUqP,IACb3G,aAAaoM,QAAQ,cAAetM,KAAKuM,UAAU4F,EAAQyyD,gBAC3DiF,EAAcj3D,OAAO/L,EAAK,IAE5B3G,aAAaoM,QAAQ,gBAAiBtM,KAAKuM,UAAUs9D,OAErDxI,GAAsBD,IAEtBr8D,GAASrS,IAXiB,IAACmU,GA0CzB,SAMC,cAAC,KAAD,CAAe1I,SAAS,eAG1B,cAAC0T,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CACC,aAAW,SACXlB,KAAK,QACLV,QAAS,kBAtEd,SAAqBb,GACpB,IAAiD,IAA9C/B,EAAOwG,QAAQ+rB,OAAOkZ,gBAAgB1gC,IASxC,OAAO,KARPg6D,EAAc3mD,SAAQ,SAASu9B,EAAUC,EAAQtwB,GAC7CvpB,IAAQ65C,GACVmpB,EAAcj3D,OAAO/L,EAAK,MAG5Bw6D,GAAsBD,GACtBlhE,aAAaoM,QAAQ,gBAAiBtM,KAAKuM,UAAUs9D,IA8DnCE,CAAYvyE,IAH5B,SAKC,cAAC,KAAD,CAAY2G,SAAS,iBAjClB3G,GAsCN,eAACsQ,GAAA,EAAD,CACCpV,KAAMA,EACNC,QAAS2kC,EAFV,UAIC,cAACrvB,GAAA,EAAD,UACC,cAAClV,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACC,cAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,2EAKF,cAACsB,GAAA,EAAD,UACC,cAAClC,EAAA,EAAD,CACCvU,MAAM,UACNkV,KAAK,QACLC,QAAQ,YACRX,QAAS4vB,EAJV,8BCtKC7sB,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAE7B,SAASq/D,KACvB,IAAIH,EAAgB7pE,KAAKC,MAAMC,aAAaC,QAAQ,kBAE3ChO,EAAUR,KAChB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WAC1BvyB,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAKJ,qCACI,cAAC7vB,EAAA,EAAD,CACInV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFb,SAII,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,cAAC6hC,GAAA,EAAD,CACIC,aAAcg1C,EAAgBA,EAAcppE,OAAS,EACrDvN,MAAM,UACND,MAAO,CAACkL,SAAU,IAHtB,SAKI,qBACIuR,IAAI,wFACJmgB,IAAI,cACJ58B,MAAO,CAACY,MAAO,UAI3B,cAACd,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,qDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAMI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,UACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACRs4B,SAAU,EAFd,UAII,cAACv4B,EAAA,EAAD,UACI,qBAAK2c,IAAI,wFAAwFmgB,IAAI,aAAav9B,UAAWH,EAAQ0tE,oBAEzI,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,mCAKR,cAACtV,EAAA,EAAD,UACI,cAAC0U,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,WAIR,cAACkF,GAAA,EAAD,UACI,cAACs8D,GAAD,SAGZ,cAACjgE,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CAAQC,QAAS4vB,EAAiBjvB,QAAQ,YAAYnV,MAAM,UAAUkV,KAAK,QAA3E,6BCjFpB,IAAMolC,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,GAAItV,MAAO,UACpD,CAAE4K,GAAI,UAAWuM,MAAO,UAAW7B,SAAU,KAC7C,CAAE1K,GAAI,QAASuM,MAAO,SAAU7B,SAAU,IAAKtV,MAAO,UACtD,CAAE4K,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IAAKtV,MAAO,WAGtD,SAASilD,GAAWkB,EAAOxuB,EAASv3B,EAAO+X,GAC1C,MAAO,CAAEguC,QAAOxuB,UAASv3B,QAAO+X,SAGjC,IAAMomC,GAAO,CACZ0G,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,IAC3BA,GAAW,EAAG,QAAS,GAAI,KAGtB1xD,GAAYC,YAAW,CAC5BunB,KAAM,CACLtlB,MAAO,QAER0Z,UAAW,CACV5Z,UAAW,UAIE,SAASs2E,KACvB,IAAM93E,EAAUR,KAChB,EAA0B4I,IAAMrC,SAAS,GAAzC,mBAAQwqC,EAAR,KAAcC,EAAd,KACA,EAAwCpoC,IAAMrC,SAAS,GAAvD,mBAAQ0qC,EAAR,KAAqBC,EAArB,KAWA,OACC,eAACpoB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQgnB,KAA1B,UACC,cAAC1H,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACC,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACC,cAACuJ,GAAA,EAAD,UACC,eAACC,GAAA,EAAD,WACE47B,GAAQ/tC,KAAI,SAACiuC,GAAD,OACZ,cAAC77B,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAOnL,MAAO,CAAEY,MAAO65C,EAAOh6B,UAAvE,SACEg6B,EAAOn4B,OADOm4B,EAAO1kC,OAIxB,cAAC6I,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,IAA1C,2BAKF,cAACie,GAAA,EAAD,UACE6qC,GAAKpZ,MAAMb,EAAOE,EAAaF,EAAOE,EAAcA,GAAanjC,KAAI,SAAC+jC,GACtE,OACC,eAAC5xB,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,UACE8R,GAAQ/tC,KAAI,SAACiuC,GACb,IAAMryC,EAAQmoC,EAAIkK,EAAO1kC,IACzB,OACC,cAAC6I,GAAA,EAAD,CAA2BzT,MAAOsvC,EAAOtvC,MAAzC,SACEsvC,EAAOx2B,QAA2B,kBAAV7b,EACxBqyC,EAAOx2B,OAAO7b,GAEdA,GAJcqyC,EAAO1kC,OASzB,cAAC6I,GAAA,EAAD,CAAWzT,MAAM,SAAjB,SACC,cAACkL,EAAA,EAAD,CAAY,aAAW,SAASlB,KAAK,QAArC,SACC,cAAC,KAAD,CAAYjK,SAAS,gBAf2BqlC,EAAI8f,gBAwB5D,cAAC7f,GAAA,EAAD,CACCC,mBAAoB,CAAE,GAAI,GAAI,KAC9B96B,UAAU,MACVmwB,MAAO4jB,GAAKl8C,OACZmiC,YAAaA,EACbF,KAAMA,EACNiB,aA1DsB,SAACn6B,EAAOo6B,GAChCjB,EAAQiB,IA0DNC,oBAvD6B,SAACr6B,GAChCq5B,GAAgBr5B,EAAM3D,OAAOxK,OAC7BsnC,EAAQ,SCnDV,IAAMl4B,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASu/D,KAEpB,IAAM/3E,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAkB,WAC1BvyB,GAASrS,IAUP,OAPAwhC,OAAO2tC,iBAAiB,WACxB,SAAoBj8D,GACbA,EAAEk8D,QAAwB,KAAdl8D,EAAEwuB,SACbkD,OAKJ,qCACG,cAAC7vB,EAAA,EAAD,CACKnV,UAAWH,EAAQqtE,iBACnB93D,QAAS4vB,EAFd,SAIK,eAACvkC,EAAA,EAAD,WACI,cAACA,EAAA,EAAD,UACI,cAAC,KAAD,CAAUE,MAAO,CAACkL,SAAU,QAEhC,cAACpL,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,QAApB,SACI,iDAGR,cAACtV,EAAA,EAAD,UACI,cAACK,EAAA,EAAD,CAAYiV,QAAQ,UAAUpV,MAAO,CAACC,MAAO,WAA7C,SACI,iDAKhB,eAAC4U,GAAA,EAAD,CACRpU,SAAS,KACThB,KAAMA,EACNC,QAAS2kC,EACTrqB,oBAAqBxC,GAJb,UAOI,eAACxC,GAAA,EAAD,WACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACsC,GAAI,GAAzB,UACI,eAAC/c,EAAA,EAAD,CACIC,QAAQ,OACRs4B,SAAU,EAFd,UAII,cAACv4B,EAAA,EAAD,UACI,qBAAK2c,IAAI,wFAAwFmgB,IAAI,aAAav9B,UAAWH,EAAQ0tE,oBAEzI,cAAC9sE,EAAA,EAAD,CAAKqa,EAAG,EAAR,SACI,cAACa,GAAA,EAAD,CAAS2hB,YAAY,eAEzB,cAAC78B,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,cAAChW,EAAA,EAAD,CAAYiV,QAAQ,KAApB,oCAKR,cAACtV,EAAA,EAAD,UACI,cAAC0U,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACI,cAAC,KAAD,WAIR,eAACkF,GAAA,EAAD,WACI,qBAAKhb,UAAWH,EAAQge,cAAxB,SACI,cAACpd,EAAA,EAAD,CAAKc,MAAM,OAAX,SACI,eAAC4mB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQyqD,aAA1B,UACI,cAAC1X,GAAA,EAAD,CACIn9B,WAAS,EACT4oB,YAAY,oBAEhB,cAACrnB,EAAA,EAAD,UACI,cAACmiB,GAAA,EAAD,aAKhB,cAACw+C,GAAD,UAGZ,cAACtgE,GAAA,EAAD,UACI,cAAClC,EAAA,EAAD,CAAQC,QAAS4vB,EAAiBjvB,QAAQ,YAAYnV,MAAM,UAAUkV,KAAK,QAA3E,6BCvFL,SAAS+hE,KAEpB,IAAMh4E,EAAUR,KAEhB,OACI,cAAC,WAAD,UACI,eAAC2b,GAAA,EAAD,CACIC,WAAS,EACTjb,UAAWH,EAAQ2sE,YAFvB,UAII,cAACxxD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACk5D,GAAD,MAEJ,cAACt5D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACy4D,GAAD,MAEJ,cAAC74D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACi5D,GAAD,MAEJ,cAACr5D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACg5D,GAAD,MAEJ,cAACp5D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACq7D,GAAD,MAEJ,cAACz7D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACs8D,GAAD,MAEJ,cAAC18D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAAC+4D,GAAD,MAEJ,cAACn5D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACw8D,GAAD,MAEJ,cAAC58D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACs6D,GAAD,MAEJ,cAAC16D,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAGrC,GAAI,EAAGC,GAAI,EAA7B,SACI,cAACi4D,GAAD,W,6CCxCdl7D,GAAaC,sBAAW,SAAoBC,EAAOC,GACxD,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAASm/B,GAAT,GAKV,IAJJjqC,EAIG,EAJHA,SAGAuqE,GACG,EAHHC,qBAGG,EAFHC,kBAEG,EADHF,sBAEA,EAA0BlyE,oBAAS,GAAnC,mBAAQxF,EAAR,KAAcqS,EAAd,KACA,EAAgC7M,oBAAS,GAAzC,mBAAQwF,EAAR,KAGA,GAHA,KAGoDiO,qBAAWs0D,KAAvDmB,EAAR,EAAQA,kBAAmBC,EAA3B,EAA2BA,qBAErBr3B,EAAoB,kBAAMjlC,GAASrS,IAEnCu3C,EAAkB,uCAAG,8CAAAnqC,EAAA,6DAEtBC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACxCC,EAA4B,OAAVL,EAAiB,GAAKA,EAAMM,UAC5CyjC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACvCqpE,EAAsBhpE,EACtB+oE,EACO,OAAVppE,EAEC,CACCgkC,SAAU,EACVxtB,MAAO,EACPD,UAAW,EACX5hB,IAAK,EACLD,KAAM,EACNsN,UAAW,EACX1N,SAAU,GAEV0L,EAlBuB,SAoBQH,GACjCQ,EACAP,GAtByB,YAoBpB0pE,EApBoB,QAwBFjpE,MAxBE,wBAyBjBmC,EAA4B5C,EAA5B4C,eAAmB1B,EAzBF,aAyBWlB,EAzBX,cA4BAiB,GAAgBC,EAAM0B,EAAgB1B,EAAK2B,gBAAiB3B,EAAK6B,wBA5BjE,QA4BrB2nE,EA5BqB,OA6BzBnB,EAAoBx2D,OACnB22D,EAAoBhpE,eAAe/I,MACnC,GAEKkyE,EAAe,CACpB3lC,SACE7kC,WAAWiqE,EAAgBplC,UAC3B7kC,WAAWqrE,EAAatpE,iBAC1BsV,MACErX,WAAWiqE,EAAgB5yD,OAC3BrX,WAAWqrE,EAAarpE,cAC1BoV,UACEpX,WAAWiqE,EAAgB7yD,WAC3BpX,WAAWqrE,EAAappE,iBAC1BzM,IACEwK,WAAWiqE,EAAgBz0E,KAC3BwK,WAAWqrE,EAAanpE,YAC1B3M,KACEyK,WAAWiqE,EAAgB10E,MAC3ByK,WAAWqrE,EAAalpE,aAC1BU,UACE7C,WAAWiqE,EAAgBpnE,WAC3B7C,WAAWqrE,EAAajpE,kBAC1BjN,SACE6K,WAAWiqE,EAAgB90E,UAC3B6K,WAAWqrE,EAAahpE,kBAEzBrB,aAAaoM,QAAQ,cAAetM,KAAKuM,UAAL,2BAClCm9D,GADkC,IAErC3zC,SAAwC,IAA/B+N,EAAaG,cAAyBH,EAAa/N,QAAU,GACtEkO,eAA8C,IAA/BH,EAAaG,eAAyBH,EAAaG,cAClE5jC,UAAW+oE,MAEVgB,EAAqBV,GAGrBrI,GAAsBD,GAjEC,4CAAH,qDAsExB,OACC,eAAC,WAAD,WAEC,cAAC93D,EAAA,EAAD,CAAYlB,KAAK,QAAQV,QAAS,kBAAMsiC,KAAxC,SACC,cAAC3Z,GAAA,EAAD,CAAQjoB,KAAK,QAAQlV,MAAM,YAE5B,eAAC4U,GAAA,EAAD,CACCpV,KAAMA,EACNua,oBAAqBxC,GACrB+S,aAAW,EACX7qB,QAAS,kBAAMq3C,KACf,kBAAgB,+BALjB,UAOC,cAAChiC,GAAA,EAAD,CAAagB,GAAG,+BAAhB,SACE,mDAEF,eAACW,GAAA,EAAD,CAAe1W,MAAO,CAAED,QAAS,OAAQiL,eAAgB,UAAzD,UACC,cAACwJ,EAAA,EAAD,CAAQC,QAAS,kBAAMsiC,KAAqB92C,MAAM,UAAlD,sBAGA,cAACuU,EAAA,EAAD,CAAQC,QAAS,kBAAMuiC,KAAsB/2C,MAAM,YAAYyU,UAAWjK,EAAU,cAACG,EAAA,EAAD,CAAkB3K,MAAM,UAAUkV,KAAM,KAAS,KAArI,+B,0BC0BoBxW,aAAW,SAACC,GAAD,MAAY,CAC9CsnB,KAAM,CACJ6rB,YAAanzC,EAAM0B,QAAQ,GAC3By3D,aAAcn5D,EAAM0B,QAAQ,IAE9Bm5D,UACyB,UAAvB76D,EAAM2nB,QAAQtQ,KACV,CACEhW,MAAOrB,EAAM2nB,QAAQ+5B,UAAU75B,KAC/Blc,gBAAiBmvD,aAAQ96D,EAAM2nB,QAAQ+5B,UAAUqZ,MAAO,MAE1D,CACE15D,MAAOrB,EAAM2nB,QAAQqzC,KAAKpzC,QAC1Bjc,gBAAiB3L,EAAM2nB,QAAQ+5B,UAAUuZ,MAEjD3iD,MAAO,CACLE,KAAM,gBAhBV,IAuEM1Y,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsnB,KAAM,CACJtlB,MAAO,OACPP,UAAW,GAEb8lB,MAAO,CACLvlB,MAAO,OACPL,aAAc3B,EAAM0B,QAAQ,IAE9Bga,UAAW,CACTzZ,OAAQ,OACR,wBAAyB,CACvBd,QAAS,SAGbqmB,MAAO,CACL3F,SAAU,IACV5f,OAAQ,QAEV6lB,eAAgB,CACdlL,OAAQ,EACRmL,KAAM,gBACN9lB,OAAQ,EACRT,QAAS,EACTwmB,SAAU,SACVC,QAAS,EACTrR,SAAU,WACVsR,IAAK,GACLlmB,MAAO,OAKI,SAASs7D,GAAT,GAEX,IADFib,EACC,EADDA,qBAEMj4E,EAAUR,KAChB,EAAkCuG,mBAAS,IAA3C,mBAAQujB,EAAR,KAAkBsI,EAAlB,KAGA,GAFc/jB,KAAKC,MAAMC,aAAaC,QAAQ,eAE6DwL,qBAAWs0D,KAA9GQ,EAAR,EAAQA,wBAAyBE,EAAjC,EAAiCA,6BAA8BS,EAA/D,EAA+DA,kBAAmBC,EAAlF,EAAkFA,qBAElF,EAAoCnpE,mBAAS,IAA7C,mBAAOsyE,EAAP,KAAmBC,EAAnB,KAEAx+D,qBAAU,WACR,IAAMlM,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAC9CsqE,EAAwB,OAAV1qE,EAAiB,GAAKA,EAAMM,aACzC,CAAC+gE,IAEJ,IAAM36B,EAAc,SAAC3gC,GACnB,IAAI6gC,EAAc,GAGhBA,GAFwC,IAA5BlrB,EAASirB,QAAQ5gC,GAEf,GAEA6gC,EAAYC,OAAO,GAAI9gC,GAEvC,IAAMjG,EAAWiG,EAAKpF,YAAYrI,QAAQoJ,iBAAiByB,QAAO,SAACC,GAAD,OAAOA,EAAErN,cAAgBgQ,EAAKlD,0BAC7F/C,EAASY,OAAS,GAAGkgE,EAA6B9gE,GACrD4gE,EAAwB36D,GACxBie,EAAY4iB,IAGRsc,EAAwB,SAACr9C,EAAG/F,GAChC,IAEEijD,aADIC,WAEa,IAAbn9C,EAAEo9C,SACJvc,EAAY5mC,GACZ4gE,EAAwB5gE,IAG1B,MAAOlI,GACPiJ,QAAQC,IAAIlJ,KAQhB,OACE,qBAAKrF,UAAWH,EAAQgnB,KAAxB,SACE,cAACsB,GAAA,EAAD,UACE,cAAChJ,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SA6BE,eAACmE,GAAA,EAAD,CACEgJ,cAAY,EACZtS,KAAK,QACL,kBAAgB,aAChB,aAAW,gBAJb,UAME,cAACuJ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,YACzC,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,UAAzC,sBACA,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,KAA3B,yBACA,cAACge,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,UAAzC,mBACA,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,UAAzC,SAAqD,2CACrD,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,UAAzC,iBACA,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,GAAI60C,UAAU,UAAzC,sBACA,cAAC72B,GAAA,EAAD,CAAW5e,MAAO,CAAEY,MAAO,IAAK60C,UAAU,UAA1C,sBACA,cAAC72B,GAAA,EAAD,CAAWzT,MAAM,SAASnL,MAAO,CAAEY,MAAO,WAG9C,cAACie,GAAA,EAAD,iBACG04D,QADH,IACGA,OADH,EACGA,EAAY/qE,KAAI,SAACI,EAAUrI,GAC1B,IAzDMsO,EAyDAkhC,GAzDAlhC,EAyD4BjG,GAxDX,IAA5B4b,EAASirB,QAAQ5gC,IAyDNua,EAAO,kCAA8B7oB,GAC3C,OACE,cAAC,GAAD,CAEEqI,SAAUA,EACVwhE,qBAAsBA,EACtBD,kBAAmBA,EACnBgJ,qBAAsBA,EACtBpjC,eAAgBA,EAChB3mB,QAASA,EACTomB,YAAaA,EACbhrB,SAAUA,EACVwnC,sBAAuBA,EACvBl/B,YAAaA,GAVRvsB,iBAsBzB,IAAM0yC,GAAkB,SAAC,GAWlB,IAVLrqC,EAUI,EAVJA,SACAwhE,EASI,EATJA,qBACAD,EAQI,EARJA,kBACAgJ,EAOI,EAPJA,qBACAnnB,EAMI,EANJA,sBACAxc,EAKI,EALJA,YACAO,EAII,EAJJA,eACA3mB,EAGI,EAHJA,QACA0D,EAEI,EAFJA,YACAtI,EACI,EADJA,SAGA,EAAoDvjB,mBAClD2H,EAAS4C,gBADX,mBAAOioE,EAAP,KAA2BC,EAA3B,KAIA,EAAsCzyE,mBAAS2H,EAAS4C,gBAAxD,mBAAQmoE,EAAR,KAAoBC,EAApB,KAEM/vD,EAAYC,iBAAO,MACzB,EAAgBlG,aAAY61D,EAAoB,KAAzCrvE,EAAP,oBAGA4Q,qBAAU,WACR4+D,EAAchrE,EAAS4C,kBACtB,CAAC5C,EAAS4C,iBAEbwJ,qBAAU,WACR6+D,EAAmBzvE,KAClB,CAACA,IAGJ,IASMyvE,EAAkB,uCAAG,WAAOC,GAAP,yCAAAjrE,EAAA,yDACT,KAAbirE,GAA+B,GAAZA,EADG,gBAEvBF,EAAchrE,EAAS4C,gBAFA,8BAInB1C,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACxCC,EAA4B,OAAVL,EAAiB,GAAKA,EAAMM,UAC5CyjC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACvCqpE,EAAsBhpE,EACtB+oE,EACQ,OAAVppE,EACI,CACEgkC,SAAU,EACVxtB,MAAO,EACPD,UAAW,EACX5hB,IAAK,EACLD,KAAM,EACNsN,UAAW,EACX1N,SAAU,GAEZ0L,EAEF2pE,EAAe,GArBI,UAwBW9pE,GAChCC,GAzBqB,aAwBjB0pE,EAxBiB,QA2BCjpE,MA3BD,0BA6BnBipE,EAAoBhpE,eAAeV,SAD7B4C,EA5Ba,EA4BbA,gBAAmB1B,EA5BN,oBA8BhB0B,eAAiBsoE,EA9BD,UA+BQhoE,GAAchC,GA/BtB,eA+BfiqE,EA/Be,OAgCfhqE,EAAagqE,EAAe1qE,MAAQ0qE,EAAeznE,eAAiBxC,EAAK8B,qBAhC1D,UAkCGZ,GAAiB,CAAClB,OAAMzL,SAAUmN,EAAgBN,gBAAgB,EAAMxM,OAAQoL,EAAK8B,qBAAsBlO,OAAQoM,EAAK2B,gBAAiBR,OAAQ,UAlCpJ,eAkCfsnE,EAlCe,iBAmCEvnE,GAAiB,CAAClB,OAAMzL,SAAUy1E,EAAU5oE,gBAAgB,EAAMxM,OAAQqL,EAAYrM,OAAQoM,EAAK2B,gBAAiBR,OAAQ,UAnC9H,QAmCfunE,EAnCe,OAqCjBuB,EAAe1qE,OACjBS,EAAK4B,gBAAkB8mE,EAASvoE,aAChCH,EAAK+B,gBAAkB/B,EAAKkqE,uBAC5BlqE,EAAK6B,uBAAyBooE,EAAe3nE,QAC7CtC,EAAK8B,qBAAuBmoE,EAAeznE,iBAE3CxC,EAAK0B,eAAiBwR,SAAS82D,GAC/BhqE,EAAK+B,gBAAkB/B,EAAK6B,uBAC5B7B,EAAK4B,gBAAkB8mE,EAASvoE,cAGlCkoE,EAAoBx2D,OAClB22D,EAAoBhpE,eAAe/I,MACnC,EACAuJ,GAGF2oE,EAAe,CACb3lC,SACE7kC,WAAWiqE,EAAgBplC,UAC3B7kC,WAAWsqE,EAAUvoE,iBACrBwoE,EAASxoE,gBACXsV,MACErX,WAAWiqE,EAAgB5yD,OAC3BrX,WAAWsqE,EAAUtoE,cACrBuoE,EAASvoE,aACXoV,UACEpX,WAAWiqE,EAAgB7yD,WAC3BpX,WAAWsqE,EAAUroE,iBACrBsoE,EAAStoE,gBACXzM,IACEwK,WAAWiqE,EAAgBz0E,KAC3BwK,WAAWsqE,EAAUpoE,YACrBqoE,EAASroE,WACX3M,KACEyK,WAAWiqE,EAAgB10E,MAC3ByK,WAAWsqE,EAAUnoE,aACrBooE,EAASpoE,YACXU,UACE7C,WAAWiqE,EAAgBpnE,WAC3B7C,WAAWsqE,EAAUloE,kBACrBmoE,EAASnoE,iBACXjN,SACE6K,WAAWiqE,EAAgB90E,UAC3B6K,WAAWsqE,EAAUjoE,iBACrBkoE,EAASloE,iBAlFQ,wBAqFrBX,QAAQC,IAAI,yBArFS,QAwFvBX,aAAaoM,QACX,cACAtM,KAAKuM,UAAL,2BACKm9D,GADL,IAEE3zC,SACiC,IAA/B+N,EAAaG,cAAyBH,EAAa/N,QAAU,GAC/DkO,eACiC,IAA/BH,EAAaG,eACTH,EAAaG,cAEnB5jC,UAAW+oE,MAGfgB,EAAqBV,GAErBrI,GAAsBD,GAvGC,4CAAH,sDA2GxB,OACE,cAAC,WAAD,UACE,eAACxvD,GAAA,EAAD,CACE+K,KAAK,WACL1pB,MAAO,CAACa,OAAQ,QAChB,eAAckzC,EACdtL,UAAW,EAEXjgB,SAAUurB,EACVxrB,OAAK,EACL9T,QAAS,SAAC9B,GAAD,OAAOq9C,EAAsBr9C,EAAE/F,IAR1C,UAUE,cAACgS,GAAA,EAAD,CAAWiI,QAAQ,WAAnB,SACE,cAAC9H,GAAA,EAAD,CACEtK,QAAS,SAAC8B,GACLiS,EAAShb,OAAS,GAAGsjB,EAAY,IACpC0iB,EAAY5mC,IAEdoS,QAAS+0B,EACTv2B,WAAY,CAAE,kBAAmB4P,OAGrC,cAACxO,GAAA,EAAD,UACE,cAAC6J,GAAA,EAAD,CACEC,SAAUb,EACV3R,SAAU,SAACvD,GAAD,OA7Ic,SAACtQ,GACjC,IACEu1E,EAAcv1E,GACdq1E,EAAsBr1E,GACtB,MAAOqC,GACP,OAAO,GAwIgBuzE,CAA0BtlE,EAAEC,OAAOxK,QACpDA,MAAOuvE,EACP1hE,KAAK,SACLpD,KAAK,qBAGT,cAAC+L,GAAA,EAAD,UACGhS,EAASa,YAAYvI,gBAAgB2jB,mBAExC,cAACjK,GAAA,EAAD,CAAY5e,MAAO,CAAEy1C,UAAU,UAA/B,SACyB,WAAtB7oC,EAASk7C,SACNl7C,EAASvK,SACTuK,EAASo0B,mBAAmBx0B,KAC1B,SAAC4b,GAAD,gBAAmBA,EAAW8uB,yBAGtC,eAACt4B,GAAA,EAAD,CAAY5e,MAAO,CAAEy1C,UAAU,UAA/B,cACI,KAC6B,IAA9B7oC,EAASiC,iBACNjC,EAASkC,UAAU8O,UACnB,KAEN,cAACgB,GAAA,EAAD,CAAW5e,MAAO,CAAEy1C,UAAU,UAA9B,UAC4D,IAAzD7oC,EAASa,YAAYvI,gBAAgBnE,gBAClC,KACA,OAEN,cAAC6d,GAAA,EAAD,CAAW5e,MAAO,CAAEy1C,UAAU,UAA9B,SACG7oC,EAASo0B,mBAAmBx0B,KAC3B,SAAC4b,GAAD,gBAAmBA,EAAW+uB,wBAGlC,eAACv4B,GAAA,EAAD,CAAW5e,MAAO,CAAEy1C,UAAU,UAA9B,eACM7oC,EAAS+C,0BAEf,cAACiP,GAAA,EAAD,CAAW5e,MAAO,CAAEy1C,UAAU,UAA9B,SACE,cAAC,GAAD,CACE7oC,SAAUA,EACVuqE,qBAAsBA,QAxDrBvqE,EAASsF,QC1gBP,SAASshE,KACtB,IAAM3hE,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAE/C,EAAoDwL,qBAAWiqB,IAAvDM,EAAR,EAAQA,qBAAsBD,EAA9B,EAA8BA,kBACtB4qC,EAAsBl1D,qBAAWs0D,IAAjCY,kBAER,EAAwC3oE,mBAAS,IAAjD,mBAAOizE,EAAP,KAAqBC,EAArB,KAKA,EAA0Cp/D,aAASg6D,GAAyB,CAC1E3+D,UAAW,CACTpK,QAAS6H,EAAO7H,QAAQkI,IACxBpI,SAAU+H,EAAO/H,SAASoI,KAE5B+zB,YAAa,iBALPx7B,EAAR,EAAQA,QAASiJ,EAAjB,EAAiBA,KAAa9B,GAA9B,EAAuBlN,MAAvB,EAA8BkN,SAU1Bw+B,EAAkB,GAClB18B,IAAM08B,EAAkB18B,EAAK0kE,uBAGjCp/D,qBAAU,YACK,WAEX,IAAMlM,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAChC,OAAVJ,IACFqrE,EAAgBrrE,EAAMg2B,SACtB8qC,EAAkB9gE,EAAMg2B,SACxBlxB,KAGJ8B,KACC,CAAC9B,EAASoxB,IAkCb,OAAIv4B,EAAgB,KAGlB,8BACE,cAACstB,GAAA,EAAD,CACEhiB,GAAG,4BACHZ,KAAK,QACLL,WAAS,EACTkjB,QAASoY,EACTnY,eAAgB,SAACC,GAAD,OACdA,EAAOiL,eAAiBjL,EAAOiL,eAAiB,OAElDhL,YAAa,SAACvD,GAAD,OAAY,cAAC1f,EAAA,EAAD,2BAAe0f,GAAf,IAAuBxf,QAAQ,eACxDc,SAAU,SAACoiB,EAAGlwB,GAAJ,OA7CiB,SAACA,GAChC,IAAK,IAAD,EAEI0E,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAC1C2jC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACzCqrE,EAAgB/vE,GAGhB,IAAIiwE,EAAc,CACdvnC,cAC4B53B,IAA1B23B,EAAaC,SAAyB,EAAID,EAAaC,SACzDxtB,WAA8BpK,IAAvB23B,EAAavtB,MAAsB,EAAIutB,EAAavtB,MAC3DD,eAC6BnK,IAA3B23B,EAAaxtB,UAA0B,EAAIwtB,EAAaxtB,UAC1D5hB,SAA0ByX,IAArB23B,EAAapvC,IAAoB,EAAIovC,EAAapvC,IACvDD,UAA4B0X,IAAtB23B,EAAarvC,KAAqB,EAAIqvC,EAAarvC,KACzDsN,eAC6BoK,IAA3B23B,EAAa/hC,UAA0B,EAAI+hC,EAAa/hC,UAC1D1N,cAAoC8X,IAA1B23B,EAAazvC,SAAyB,EAAIyvC,EAAazvC,SACjE2vC,YAAaF,EAAaE,YAAcF,EAAaE,YAAc,GACnEC,cAAyB,OAAV5oC,EACfgF,WACE,UAAAyjC,EAAazjC,iBAAb,eAAwBI,QAAS,EAAIqjC,EAAczjC,UAAY,IAExD,OAAVhF,IAAgBiwE,EAAW,2BAAOA,GAAP,IAAoBv1C,QAAS16B,KAC3D6E,aAAaoM,QAAQ,cAActM,KAAKuM,UAAU++D,IAClDp1C,GAAsBD,GACtB,MAAOt+B,GACPiJ,QAAQC,IAAIlJ,IAiBc4zE,CAAyBlwE,IACjDmwB,kBAAmB,SAACL,GAAD,OAAYA,EAAOiL,gBACtC/6B,MAAO8vE,GAA8B,SC/F9B,WAA0B,iCCOnC39B,GAAU,CACf,CAAExkC,GAAI,QAASuM,MAAO,QAAS7B,SAAU,IACtC,CAAE1K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,IAC9C,CAAE1K,GAAI,cAAeuM,MAAO,cAAe7B,SAAU,KACrD,CAAE1K,GAAI,SAAUuM,MAAO,SAAU7B,SAAU,KAI5C,SAAS2vC,GAAWmoB,EAAQ19C,EAAa+4C,GACxC,MAAO,CAAE2E,SAAQ19C,cAAa+4C,UAG/B,IAAMlqB,GAAO,CACZ0G,GAAW,EAAG,aAAc,MAC5BA,GAAW,EAAG,aAAc,MACzBA,GAAW,EAAG,mBAAoB,MAClCA,GAAW,EAAG,OAAQ,OAGpB1xD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLmS,SAAU,EACVz3B,MAAO,OACPC,OAAQ,OACR0J,gBAAiB3L,EAAM2nB,QAAQkQ,WAAWtQ,OAE3ClP,OAAQ,CACPzB,SAAU,YAEX0B,MAAO,CACNC,WAAYvY,EAAM0B,QAAQ,GAC1B8W,KAAM,GAEP2oB,QAAS,CACRn/B,MAAO,KAEL8sD,SAAU,CACZ9sD,MAAO,IAEL+oD,aAAc,CACV9oD,OAAQ,GACdd,QAAS,YAILyX,GAAalQ,IAAMmQ,YAAW,SAAoBC,EAAOC,GAC9D,OAAO,cAACC,GAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAASD,OAG7B,SAAS8gE,KAEpB,IAAMt5E,EAAUR,KAEhB,EAAwBuG,oBAAS,GAAjC,mBAAOxF,EAAP,KAAaqS,EAAb,KAEMuyB,EAAiB,WAAMvyB,GAASrS,IAEtC,OACI,gCACI,eAACK,EAAA,EAAD,CACIc,MAAM,OACNb,QAAQ,OACR61C,aAAa,SACb2Q,UAAU,SACVsrB,YAAY,SACZ5mE,WAAW,SANf,UAQI,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,qBAAKsG,IAAK87D,GAAQ37C,IAAI,cAAcv9B,UAAWH,EAAQwuD,aAE3D,cAAC5tD,EAAA,EAAD,CAAKc,MAAM,OAAO4hB,GAAI,EAAG/N,QAAS,kBAAM4vB,KAAxC,SACI,cAAC7c,GAAA,EAAD,CAAO5mB,MAAM,OAAb,SACI,cAACqxC,GAAA,EAAD,CAAW5yC,UAAWH,EAAQyqD,sBAI1C,eAAC90C,GAAA,EAAD,CAAQpV,KAAMA,EAAMC,QAAS2kC,EAAiBrqB,oBAAqBxC,GAAnE,UACR,cAACyC,GAAA,EAAD,CAAQ5a,UAAWH,EAAQ+X,OAA3B,SACC,eAACiD,GAAA,EAAD,WACC,cAAC/Z,EAAA,EAAD,CAAYiV,QAAQ,KAAK/V,UAAWH,EAAQgY,MAA5C,4BAGA,cAAC1C,EAAA,EAAD,CAAQY,QAAQ,YAAYnV,MAAM,YAAYwU,QAAS4vB,EAAiBlvB,KAAK,QAA7E,SACsB,cAAC,KAAD,WAIxB,qBAAK9V,UAAWH,EAAQgnB,KAAxB,SAEgB,cAACpmB,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACI,cAACsO,GAAA,EAAD,CAAgBnf,UAAWH,EAAQob,UAAnC,SACI,eAACmE,GAAA,EAAD,CAAOgJ,cAAY,EAACtS,KAAK,QAAQ,aAAW,gBAA5C,UACI,cAACuJ,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACK47B,GAAQ/tC,KAAI,SAACiuC,EAAQl2C,GAAT,OACT,cAACqa,GAAA,EAAD,CAAuB5e,MAAO,CAAEygB,SAAUg6B,EAAOh6B,UAAjD,SACKg6B,EAAOn4B,OADI/d,UAM5B,cAACsa,GAAA,EAAD,UACK6qC,GAAKl9C,KAAI,SAAC+jC,EAAKhsC,GACZ,OACI,cAACoa,GAAA,EAAD,CAAU4J,OAAK,EAACmB,KAAK,WAAW+e,UAAW,EAA3C,SACK8R,GAAQ/tC,KAAI,SAACiuC,EAAQl2C,GAClB,IAAM6D,EAAQmoC,EAAIkK,EAAO1kC,IACzB,OACI,cAAC6I,GAAA,EAAD,CAAuBzT,MAAOsvC,EAAOtvC,MAArC,SACKsvC,EAAOx2B,QAA2B,kBAAV7b,EACrBqyC,EAAOx2B,OAAO7b,GAEdA,GAJQ7D,OAJuBA,uB,0BCxEhF,SAASk0E,KAAmB,IAAD,QAClC5mE,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAEzChO,EAAUR,KAEhB,EAAoCuG,mBAAS,CAC3CvD,QAAQ,EACRkN,MAAO,IAFT,mBAAO8pE,EAAP,KAAmBC,EAAnB,KAKA,EAA8EjgE,qBAAWs0D,IAAjFmB,EAAR,EAAQA,kBAAmBC,EAA3B,EAA2BA,qBAAsBt8D,EAAjD,EAAiDA,QAAS67D,EAA1D,EAA0DA,eAE1D,EAAkD1oE,mBAAS,CACzD6rC,SAAU,EACVxtB,MAAO,EACPD,UAAW,EACX5hB,IAAK,EACLD,KAAM,EACNsN,UAAW,EACX1N,SAAU,EACV2vC,YAAa,KARf,mBAAO6nC,EAAP,KAA0BzB,EAA1B,KAWA,EAA0BlyE,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAApE,mBAAOT,EAAP,KAAcC,EAAd,KAEA,EAAqD+mC,aACnD6sC,GACA,CACE5sC,YAAa,iBAHjB,mBAAOK,EAAP,YAA2B5yB,EAA3B,EAA2BA,KAAMjJ,EAAjC,EAAiCA,QAAS/F,EAA1C,EAA0CA,MAO1C,EAAwCO,oBAAS,GAAjD,mBAAO4zE,EAAP,KAAqBC,EAArB,KAEIC,EAAgB,KACjBr0E,IACDiJ,QAAQC,IAAI8F,EAAKjJ,EAAS/F,EAAM4P,cAChC3G,QAAQC,IAAI8F,EAAKjJ,EAAS/F,EAAM6P,gBAG9Bb,IAAMqlE,EAAgBrlE,EAAKyhE,yBAG/Bn8D,qBAAU,WACR,GAAGtU,GACD,GAAGA,EAAM4P,aACLrV,EAAS,CAAEW,QAAQ,oBAAsBD,OAAQ,QAASF,MAAM,SAC5D,GAAGiF,EAAM6P,cAAc,CAAC,IAAD,EAC3BtV,EAAS,CAAEW,QAAQ,GAAD,iBAAK8E,EAAM6P,cAAc,UAAzB,aAAK,EAAwB3U,SAAWD,OAAQ,QAASF,MAAM,UAGhE,OAAlBs5E,IAC8B,OAA3BA,EAAc12E,SAChB22E,EAAiBD,IAEjBjnE,GAAQ,GACR7S,EAAS,CAAEW,QAAQ,0BAA4BD,OAAQ,QAASF,MAAM,QAI3E,CAACgL,IAEJuO,qBAAU,WACR2/D,EAAc,CACZj3E,QAAQ,EACRkN,MAAO,IAET,IAAM9B,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAChC,OAAVJ,GACFqqE,EAAqB,CACnBrmC,SAAU7kC,WAAWa,EAAMgkC,UAC3BxtB,MAAOrX,WAAWa,EAAMwW,OACxBD,UAAWpX,WAAWa,EAAMuW,WAC5B5hB,IAAKwK,WAAWa,EAAMrL,KACtBD,KAAMyK,WAAWa,EAAMtL,MACvBsN,UAAW7C,WAAWa,EAAMgC,WAC5B1N,SAAU6K,WAAWa,EAAM1L,cAG9B,CAAC+sE,IAEJ,IAAMmF,EAAU,uCAAG,WAAO/8D,GAAP,qBAAA1J,EAAA,sDACE,UAAf0J,EAAM85C,MAAmC,gBAAf95C,EAAM85C,OAC5B+kB,EAAc7+D,EAAM3D,OAAOxK,MAAM6wE,QACjCvlE,EAAO0hE,EAAYrhE,MAAM,MACtBvG,OAAS,GACZ0rE,EAAiBj3D,MAAMvO,EAAK,IAAMA,EAAK,GAAKA,EAAK,GACjDylE,EAAWl3D,MAAMvO,EAAK,IAAMA,EAAK,GAAKA,EAAK,GAC/CilE,EAAc,CACZj3E,QAAQ,EACRkN,MAAOsqE,IAET5yC,EAAiB,CACflyB,UAAW,CACTihE,eAAgB8D,EAChBrvE,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,KAE1B+zB,YAAa,iBAEf6yC,GAAiBD,KAEjBF,EAAc,CACZj3E,QAAQ,EACRkN,MAAO,IAET03B,EAAiB,CACflyB,UAAW,CAAaihE,eAAgBD,EACtCtrE,SAAU+H,EAAO/H,SAASoI,IAC1BlI,QAAS6H,EAAO7H,QAAQkI,KAE1B+zB,YAAa,iBAEf6yC,GAAiBD,KAhCJ,2CAAH,sDAqCVG,EAAgB,uCAAG,WAAOpsE,GAAP,iDAAAC,EAAA,6DACnBC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBACxCC,EAA4B,OAAVL,EAAiB,GAAKA,EAAMM,UAC9CyjC,EAAyB,OAAV/jC,EAAiB,GAAKA,EACrCopE,EACQ,OAAVppE,EACI,CACEgkC,SAAU,EACVxtB,MAAO,EACPD,UAAW,EACX5hB,IAAK,EACLD,KAAM,EACNsN,UAAW,EACX1N,SAAU,GAEZ0L,EAEFqpE,EAAsBhpE,EAEtBspE,EAAe,CACjB3lC,SAAU,EACVxtB,MAAO,EACPD,UAAW,EACX5hB,IAAK,EACLD,KAAM,EACNsN,UAAW,EACX1N,SAAU,GA1BW,SA6BWuL,GAChCC,GA9BqB,WA6BjB0pE,EA7BiB,QAiCEjpE,QAAST,EAASsF,IAjCpB,wBAkCfpE,EAlCe,eAkCHlB,GAEZwsE,EAAsBtrE,EAAKe,iBAC7Bf,EAAKgB,UAAUjM,YACfiL,EAAKnL,cAAcE,YAtCF,UAwCImM,GAAiB,CAAClB,OAAKzL,SAAU,EAAGX,OAAQg3E,EAAYzpE,OAAQ,UAAWC,gBAAgB,IAxC/F,SAwCfmqE,EAxCe,QA0CVvrE,KAAK+B,gBAAkBupE,EAClCC,EAAWvrE,KAAKolD,mBAAqBjnD,WAAWotE,EAAW53E,KAE3DkM,QAAQC,IAAIyrE,EAAWvrE,MAEvBqoE,EAAoB/2D,KAAKi6D,EAAWvrE,MAEpC2oE,EAAe,CACb3lC,SAAU7kC,WAAWiqE,EAAgBplC,UAAY7kC,WAAWotE,EAAWrrE,iBACvEsV,MAAOrX,WAAWiqE,EAAgB5yD,OAASrX,WAAWotE,EAAWprE,cACjEoV,UAAWpX,WAAWiqE,EAAgB7yD,WAAapX,WAAWotE,EAAWnrE,iBACzEzM,IAAKwK,WAAWiqE,EAAgBz0E,KAAOwK,WAAWotE,EAAWlrE,YAC7D3M,KAAMyK,WAAWiqE,EAAgB10E,MAAQyK,WAAWotE,EAAWjrE,aAC/DU,UAAW7C,WAAWiqE,EAAgBpnE,WAAa7C,WAAWotE,EAAWhrE,kBACzEjN,SAAU6K,WAAWiqE,EAAgB90E,UAAY6K,WAAWotE,EAAW/qE,kBAxDpD,4BA4DZgoE,EAAoBjpE,QAAST,EAASsF,IA5D1B,0BA8DeokE,EAAoBhpE,eAAeV,SAA/D4C,EA9Da,EA8DbA,gBAAmB1B,EA9DN,oBAgEhB0B,eAAiBwR,SAASxR,GAAkB,EAhE5B,UAkEQM,GAAchC,GAlEtB,aAkEfiqE,EAlEe,QAqEF1qE,MArEE,kCAsES2B,GAAiB,CAAClB,OAAK0B,iBAAgB9N,OAAQoM,EAAK2B,gBAAiBR,OAAQ,GAAIC,gBAAgB,EAAMxM,OAAQoL,EAAK8B,uBAtE7H,eAsEb0pE,EAtEa,iBAwEStqE,GAAiB,CAAClB,OAAK0B,eAAgB1B,EAAK0B,eAAgB9N,OAAQoM,EAAK2B,gBAAiBR,OAAQ,GAAIC,gBAAgB,EAAMxM,OAAQq1E,EAAe3nE,UAxE5J,QAwEbmpE,EAxEa,OA0EnBzrE,EAAK4B,gBAAkB6pE,EAActrE,aACrCH,EAAK+B,gBAAkB/B,EAAK6B,uBAC5B7B,EAAK6B,uBAAyBooE,EAAe3nE,QAC7CtC,EAAK8B,qBAAuBmoE,EAAeznE,eAE3C6lE,EAAoBx2D,OAClB22D,EAAoBhpE,eAAe/I,MACnC,EACAuJ,GAGF2oE,EAAe,CACb3lC,SACE7kC,WAAWiqE,EAAgBplC,UAC3B7kC,WAAWqtE,EAActrE,iBACzBurE,EAAcvrE,gBAChBsV,MACErX,WAAWiqE,EAAgB5yD,OAC3BrX,WAAWqtE,EAAcrrE,cACzBsrE,EAActrE,aAChBoV,UACEpX,WAAWiqE,EAAgB7yD,WAC3BpX,WAAWqtE,EAAcprE,iBACzBqrE,EAAcrrE,gBAChBzM,IACEwK,WAAWiqE,EAAgBz0E,KAC3BwK,WAAWqtE,EAAcnrE,YACzBorE,EAAcprE,WAChB3M,KACEyK,WAAWiqE,EAAgB10E,MAC3ByK,WAAWqtE,EAAclrE,aACzBmrE,EAAcnrE,YAChBU,UACE7C,WAAWiqE,EAAgBpnE,WAC3B7C,WAAWqtE,EAAcjrE,kBACzBkrE,EAAclrE,iBAChBjN,SACE6K,WAAWiqE,EAAgB90E,UAC3B6K,WAAWqtE,EAAchrE,iBACzBirE,EAAcjrE,iBAjHC,+BAqHb8qE,EAAsBtrE,EAAKe,iBAC/Bf,EAAKgB,UAAUjM,YACfiL,EAAKnL,cAAcE,YAvHF,UAyHMmM,GAAiB,CAAClB,OAAMzL,SAAU,EAAGX,OAAQg3E,EAAYzpE,OAAQ,YAzHvE,SAyHboqE,EAzHa,QA0HRvrE,KAAK6B,uBAAyBypE,EAEzCjD,EAAoBx2D,OAClB22D,EAAoBhpE,eAAe/I,MACnC,EACA80E,EAAWvrE,MAGb2oE,EAAe,CACb3lC,SAAU7kC,WAAWiqE,EAAgBplC,UAAY7kC,WAAWotE,EAAWrrE,iBACvEsV,MAAOrX,WAAWiqE,EAAgB5yD,OAAS+1D,EAAWprE,aACtDoV,UAAWpX,WAAWiqE,EAAgB7yD,WAAag2D,EAAWnrE,gBAC9DzM,IAAKwK,WAAWiqE,EAAgBz0E,KAAO43E,EAAWlrE,WAClD3M,KAAMyK,WAAWiqE,EAAgB10E,MAAQ63E,EAAWjrE,YACpDU,UAAW7C,WAAWiqE,EAAgBpnE,WAAauqE,EAAWhrE,iBAC9DjN,SAAU6K,WAAWiqE,EAAgB90E,UAAYi4E,EAAW/qE,iBAzI3C,QA8IvBrB,aAAaoM,QACX,cACAtM,KAAKuM,UAAL,2BACKm9D,GADL,IAEE3zC,SACiC,IAA/B+N,EAAaG,cAAyBH,EAAa/N,QAAU,GAC/DkO,eACiC,IAA/BH,EAAaG,eACTH,EAAaG,cAEnB5jC,UAAW+oE,MAGfgB,EAAqB,eAChBV,IAELrI,GAAsBD,GA9JC,4CAAH,sDAkKtB,OACE,eAAC,WAAD,WACE,cAACpvE,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IACxC,cAACa,EAAA,EAAD,CAAKe,OAAO,KAAZ,SACE,sBAAKxB,UAAWH,EAAQge,cAAxB,UACE,eAACpd,EAAA,EAAD,CACEc,MAAM,OACNb,QAAQ,OACR61C,aAAa,SACb2Q,UAAU,SACVsrB,YAAY,SACZ5mE,WAAW,SANb,UAQE,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAGjW,GAAI,EAAhB,SACE,qBACEuc,IAAI,sGACJmgB,IAAI,cACJv9B,UAAWH,EAAQwuD,aAGvB,cAAC5tD,EAAA,EAAD,CAAKc,MAAM,OAAX,SACE,eAAC4mB,GAAA,EAAD,CAAOnoB,UAAWH,EAAQyqD,aAA1B,UACE,cAAC1X,GAAA,EAAD,CACErxC,MAAM,OACNkU,WAAS,EACT4oB,YAAY,qBACZ61C,QAASD,IAEX,cAACj9D,EAAA,EAAD,UACE,cAACmiB,GAAA,EAAD,cAKR,eAAC14B,EAAA,EAAD,CACEc,MAAM,OACNb,QAAQ,OACR61C,aAAa,SACb2Q,UAAU,SACVsrB,YAAY,SACZ5mE,WAAW,SANb,UAQE,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAGjW,GAAI,EAAhB,SACE,qBACEuc,IAAI,0EACJmgB,IAAI,cACJv9B,UAAWH,EAAQwuD,aAGvB,cAAC5tD,EAAA,EAAD,CAAKc,MAAM,OAAOqK,WAAW,SAA7B,SACE,cAAC,GAAD,CAAgB4G,OAAQA,SAS5B,cAAC/R,EAAA,EAAD,CAAKc,MAAM,OAAX,SACE,cAAC43E,GAAD,MAEF,eAAC14E,EAAA,EAAD,CAAKc,MAAM,OAAOb,QAAQ,OAA1B,UACE,cAACD,EAAA,EAAD,CAAKI,GAAI,EAAT,SACE,qBACEuc,IAAI,kFACJmgB,IAAI,cACJv9B,UAAWH,EAAQwuD,aAGvB,cAAC5tD,EAAA,EAAD,CAAKc,MAAM,OAAX,SACE,cAAC+Z,EAAA,EAAD,CAAavF,QAAQ,WAAWN,WAAS,EAACK,KAAK,QAA/C,SACE,eAACyF,GAAA,EAAD,CAAQ7E,GAAG,iBAAiBlD,KAAK,iBAAjC,UACE,cAACgI,GAAA,EAAD,CAAUzS,MAAM,GAAhB,SACE,kDAEF,cAACyS,GAAA,EAAD,CAAUzS,MAAM,SAAhB,oBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,UAAhB,qBACA,cAACyS,GAAA,EAAD,CAAUzS,MAAM,gBAAhB,0CAQZ,cAACtI,EAAA,EAAD,CAAKe,OAAO,MAAZ,SACE,cAAC,GAAD,CAAqBs2E,qBAAsBA,MAG7C,cAACr3E,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,WAAWD,cAAc,SAASlK,OAAO,MAA5E,SACE,eAAC2mB,GAAA,EAAD,CAAOgyD,WAAY,EAAGx5E,MAAO,CAAC6mB,QAAS,EAAGxmB,UAAW,GAArD,UACE,eAACga,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACI,eAACxC,GAAA,EAAD,CACEC,WAAS,EACTzC,UAAU,MACV7M,eAAe,WACfC,WAAW,SAJb,UAME,eAACoP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,eAAC/c,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRkL,WAAW,SAHb,UAKE,cAACnL,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,sBACW,mBAAGpV,MAAO,CAACkL,SAAU,IAArB,SAA2ByiE,EAAiBA,EAAexqC,eAAiB,UAGzF,cAACrjC,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAeF,MAAO,CAACkL,SAAU,WAGrC,eAACpL,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRkL,WAAW,SAHb,UAKE,cAACnL,EAAA,EAAD,UACA,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,uBACc,mBAAGpV,MAAO,CAACkL,SAAU,IAArB,SAA2ByiE,EAAiBA,EAAetqC,eAAiB,UAG1F,cAACvjC,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAsBF,MAAO,CAACkL,SAAU,WAG5C,eAACpL,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRkL,WAAW,SAHb,UAKE,cAACnL,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,0BACe,mBAAGpV,MAAO,CAACkL,SAAU,IAArB,SAA2ByiE,EAAiBA,EAAerqC,cAAgB,UAG5F,cAACxjC,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAWF,MAAO,CAACkL,SAAU,cAInC,eAACmP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,eAAC/c,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRkL,WAAW,SAHb,UAKE,cAACnL,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,6BACkB,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,cAA4ByiE,EAAiBA,EAAe/pC,eAAiB,UAGjG,cAAC9jC,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAiBF,MAAO,CAACkL,SAAU,WAZzC,IA6BE,eAACpL,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRkL,WAAW,SAHb,UAKE,cAACnL,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,2BACgB,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,UAA2ByiE,EAAiBA,EAAe9pC,aAAe,EAA1E,gBAGlB,cAAC/jC,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAYF,MAAO,CAACkL,SAAU,mBAM1C,cAACmP,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,SACE,eAACxC,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,eAACD,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACE,eAAC/c,EAAA,EAAD,CAAKC,QAAQ,OAAOkL,WAAW,SAASF,cAAc,cAAtD,UACE,cAACjL,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,wBACa,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,eAA6B0tE,EAAiB,OAAGA,QAAH,IAAGA,GAAH,UAAGA,EAAmBx3E,gBAAtB,aAAG,EAA6B8K,QAAQ,GAAK,UAG1G,cAACpM,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAoBF,MAAO,CAACkL,SAAU,WAG1C,eAACpL,EAAA,EAAD,CACEiL,cAAc,cACdE,WAAW,SACXlL,QAAQ,OAHV,UAKE,cAACD,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,CAAYiV,QAAQ,YAApB,wBACa,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,cAA4B0tE,EAAiB,OAAGA,QAAH,IAAGA,GAAH,UAAGA,EAAmB9pE,iBAAtB,aAAG,EAA8B5C,QAAQ,GAAK,UAG1G,cAACpM,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAACJ,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAvD,SACI,qBACEwR,IAAI,2EACJmgB,IAAI,cACJ58B,MAAO,CAACY,MAAO,gBAM3B,eAACyZ,GAAA,EAAD,CAAME,MAAI,EAACsC,GAAI,EAAf,UACI,cAAC/c,EAAA,EAAD,CACEiL,cAAc,cACdhL,QAAQ,OACRG,GAAI,EAHN,SAKE,eAACC,EAAA,EAAD,CAAYiV,QAAQ,YAApB,uBACY,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,gBAA8C,OAAjB0tE,QAAiB,IAAjBA,OAAA,EAAAA,EAAmB9nC,UAAnB,OAA8B8nC,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAmB9nC,gBAAjD,aAA8B,EAA6B5kC,QAAQ,GAAK,UAGnH,cAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAc7K,GAAI,EAApD,SACE,eAACC,EAAA,EAAD,CAAYiV,QAAQ,YAApB,wBACa,oBAAGpV,MAAO,CAACkL,SAAU,IAArB,gBAA8C,OAAjB0tE,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBv1D,WAAnB,OAA+Bu1D,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAmBv1D,iBAAlD,aAA+B,EAA8BnX,QAAQ,GAAK,qBAgBhI,eAACpM,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,cAAcmF,EAAG,EAAnD,UACE,eAAC/P,EAAA,EAAD,CAAYiV,QAAQ,KAApB,oBACS,oBAAGpV,MAAO,CAACC,MAAO,SAAlB,eAA+C,OAAjB24E,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBt1D,OAAnB,OAA2Bs1D,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAmBt1D,MAAMpX,QAAQ,GAAK,QAExG,cAACpM,EAAA,EAAD,CAAKqW,GAAI,GAAIjW,GAAI,EAAjB,SACE,cAAC,KAAD,CAAoBF,MAAO,CAACkL,SAAU,GAAIjL,MAAO,aAEnD,cAACH,EAAA,EAAD,CAAKoQ,EAAG,EAAR,SACE,cAACuhE,GAAD,CAAYx7D,KAAK,yBC5jBlB,SAASwjE,KAEpB,MAAwC/gE,qBAAWs0D,IAA3Ca,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,eACrB,EAAoC7oE,oBAAS,GAA7C,mBAAQy0E,EAAR,KAAmBC,EAAnB,KACMxyB,EAAep6C,KAAKC,MAAMC,aAAaC,QAAQ,iBAQrD,OANA8L,qBAAU,WACN,IAAMnH,EAAS9E,KAAKC,MAAMC,aAAaC,QAAQ,eAC/CysE,EAAa9nE,EAAOwtC,sBACpByuB,GAAe,KAChB,CAAED,IAGD,cAAC,GAAD,WACmB,IAAd6L,GAAsBvyB,EACnB,cAACsxB,GAAD,IAEA,cAACmB,GAAD,MAMhB,SAASA,KAEL,MAA8B30E,oBAAS,GAAvC,mBAAOwF,EAAP,KAAgBC,EAAhB,KAEH,OAAID,EAEH,cAAC3K,EAAA,EAAD,CACAC,QAAQ,OACRgL,cAAc,SACdC,eAAe,SACfC,WAAW,SACXpK,OAAO,OALP,SAOC,cAAC+J,EAAA,EAAD,MAKK,cAACyP,GAAA,EAAD,CACIC,WAAS,EACTzC,UAAU,MACV7M,eAAe,SACfC,WAAW,SAJf,SAMI,cAACnL,EAAA,EAAD,CAAKqW,GAAI,EAAT,SACI,eAACqR,GAAA,EAAD,CAAOka,UAAW,EAAlB,UACI,cAAC5hC,EAAA,EAAD,CAAKoQ,EAAG,EAAGulC,UAAU,SAArB,SACI,cAACt1C,EAAA,EAAD,CAAYiV,QAAQ,KAApB,uEAIJ,cAAC85D,GAAD,CAAYj5D,KAAK,SAASvL,WAAYA,WCnD1D,IAEMhM,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCsnB,KAAM,CACLnmB,QAAS,QAEVskE,QAAS,CACRhsC,SAAU,GAERwhD,QAAS,CACXh5E,OAAQjC,EAAM0B,QAAQ,QCpBT,WAA0B,sCCA1B,OAA0B,kCCA1B,OAA0B,qC,qBCQnC5B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCyY,KAAM,CACLzW,MAAO,IACDsK,SAAU,SCClB,IAAM4uE,GAAS,CACd,CACCjnD,KAAM,IACNld,UlRgBa,SAAqB+B,GACnC,IAAMxY,EAAUR,KACVmT,EAAS5E,aAAaC,QAAQ,cACpC,EAA4BjI,mBAAS,IAArC,mBAAQkN,EAAR,KAAeC,EAAf,KACA,EAAgCnN,oBAAS,GAAzC,mBAAQwF,EAAR,KAAiBC,EAAjB,KACA,EAA4BzF,mBAAS,CAAErF,QAAS,GAAID,OAAQ,GAAIF,MAAM,IAAtE,mBAAQT,EAAR,KAAeC,EAAf,KACA,EAA0CgG,oBAAS,GAAnD,mBAAQg5C,EAAR,KAAsBC,EAAtB,KAEIrsC,GAAQ6F,EAAMyzD,QAAQ/rD,KAAK,yBAE/B,MAA0B5M,YAAY/T,GAA9Bs7E,EAAR,oBAEMC,EAAM,uCAAG,WAAOrnE,GAAP,mBAAA9F,EAAA,yDACd8F,EAAE6D,iBACGrE,EAAM6pC,gBAAmB7pC,EAAMisC,SAFtB,uBAGbn/C,EAAS,CAAEW,QAAS,6BAA2BD,OAAQ,QAASF,MAAM,IAHzD,iCAMdiL,GAAW,GANG,kBASQqvE,EAAc,CAClC3lE,UAAW,CACVC,MAAOlC,KAXI,OASPqB,EATO,OAcLk4D,EAAUl4D,EAAOE,KAAKqmE,cAAtBrO,MACFuO,EAAUC,YAAWxO,GAC3BhhE,GAAW,GACXuC,aAAaoM,QAAQ,aAActM,KAAKuM,UAAU2gE,IAClDhtE,aAAaoM,QAAQ,YAAatM,KAAKuM,UAAUoyD,IACjDh0D,EAAMyzD,QAAQ/rD,KAAK,yBAnBN,kDAqBbngB,EAAS,CAAEW,QAAS,KAAMA,QAASD,OAAQ,QAASF,MAAM,IAC1DiL,GAAW,GAtBE,0DAAH,sDA0BNkP,EAAgB,SAACjH,GACA,mBAAlBA,EAAEC,OAAOC,KACZT,EAAS,2BACLD,GADI,kBAENQ,EAAEC,OAAOC,KAAOmO,SAASrO,EAAEC,OAAOxK,UAGpCgK,EAAS,2BACLD,GADI,kBAENQ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOxK,UAa7B,OACC,eAACgS,EAAA,EAAD,CAAW3Z,SAAS,KAApB,UACC,cAAC1B,EAAD,CAAkBC,MAAOA,EAAOC,SAAUA,IAC1C,cAACa,EAAA,EAAD,CAAKe,OAAO,QAAQd,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAtE,SACC,eAACnL,EAAA,EAAD,CAAKokE,UAAU,IAAIh0D,EAAG,EAAGtP,MAAM,MAA/B,UACC,cAACd,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASC,WAAW,SAAS2qC,aAAa,SAA7E,SACC,cAAC91C,EAAA,EAAD,CAAKT,UAAWH,EAAQsB,gBAAiBi1C,UAAU,SAAnD,SACC,qBAAKp2C,UAAWH,EAAQyB,OAAQ8b,ImRlGxB,kkOnRkGiCmgB,IAAI,6BAG/C,cAAC98B,EAAA,EAAD,CAAKC,QAAQ,OAAO01C,UAAU,SAASzqC,eAAe,SAAtD,SACC,cAAC7K,EAAA,EAAD,CAAYiV,QAAQ,KAAKO,UAAU,IAAItW,UAAWH,EAAQkB,OAA1D,SACC,qDAGF,uBAAM+9C,aAAa,MAAM1vB,SAAUurD,EAAnC,UACC,cAAC9kE,EAAA,EAAD,CACCoN,MAAM,oBACNlN,QAAQ,WACRvC,KAAK,iBACLiC,WAAS,EACTzV,UAAWH,EAAQkB,OACnB8V,SAAU0D,IAGX,eAACe,EAAA,EAAD,CAAavF,QAAQ,WAAWvC,KAAK,WAAWxT,UAAWH,EAAQkB,OAAQ0U,WAAS,EAApF,UACC,cAACo0B,EAAA,EAAD,CAAYzzB,QAAQ,mBAApB,2BACA,cAACqI,EAAA,EAAD,CACCjL,KAAK,WACLkD,GAAG,mBACHE,KAAMgoC,EAAe,OAAS,WAC9B/nC,SAAU0D,EACVtE,aACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACC,cAACa,EAAA,EAAD,CACC5B,QA3CsB,WAC/BypC,GAAiBD,IA2CR3nC,YAxCsB,SAACC,GAChCA,EAAMC,kBAwCGC,KAAK,MAHN,SAKEwnC,EAAe,cAAC,IAAD,IAAiB,cAAC,KAAD,QAIpCk8B,WAAY,QAGd,cAAC3lE,EAAA,EAAD,CACCM,WAAS,EACTK,KAAK,QACLC,QAAQ,YACRQ,kBAAgB,EAChBvW,UAAWH,EAAQkB,OACnBH,MAAM,UACNgW,KAAK,SACLmmB,QAAS3xB,EAAU,cAACG,EAAA,EAAD,CAAkBuK,KAAM,GAAIlV,MAAM,YAAe,KARrE,gCkRzHJm6E,OAAO,GAER,CACCvnD,KAAM,QACNld,UDJa,SAAoB+B,GAClC,IAAMxY,EAAUR,KAWhB,OAVeqO,KAAKC,MAAMC,aAAaC,QAAQ,gBAElCwK,EAAMyzD,QAAQ/rD,KAAK,KAS/B,cAAChF,EAAA,EAAD,CAAW3Z,SAAS,KAApB,SACC,eAACX,EAAA,EAAD,CAAKe,OAAO,OAAZ,UACC,cAACf,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,SACC,qBAAK4xB,IAAI,UAAUngB,IAAK49D,OAEzB,eAACv6E,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAASoL,GAAI,EAAhD,UACC,cAAC5B,EAAA,EAAD,CAAQmB,UAAW2kE,IAAMC,GAAG,gBAA5B,SACC,eAACz6E,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAS0qC,UAAU,SAArD,UACC,cAAC31C,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,SACC,qBAAKyR,IAAK+9D,GAAW59C,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFrE,aAOD,cAAC7C,EAAA,EAAD,CAAQmB,UAAW2kE,IAAMC,GAAG,wBAA5B,SACC,eAACz6E,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAS0qC,UAAU,SAArD,UACC,cAAC31C,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,SACC,qBAAKyR,IAAKg+D,GAAU79C,IAAI,uBAAuBv9B,UAAWH,EAAQmY,SAFpE,cAOc,cAAC7C,EAAA,EAAD,CAAQvU,MAAM,YAAYwU,QA7B1B,WAClBxH,aAAa0+D,WAAW,cACxB1+D,aAAa0+D,WAAW,aACxBj0D,EAAMyzD,QAAQ/rD,KAAK,MA0BD,SACd,eAACtf,EAAA,EAAD,CAAKC,QAAQ,OAAOgL,cAAc,SAAS0qC,UAAU,SAArD,UACC,cAAC31C,EAAA,EAAD,CAAKC,QAAQ,OAAOiL,eAAe,SAAnC,SACC,cAAC,KAAD,CAA6B3L,UAAWH,EAAQmY,SAFlD,8BC/BJ+iE,OAAO,GAER,CACCvnD,KAAM,SACNld,UEnBa,SAAqB+B,GAKnC,OAJkBzK,aAAaC,QAAQ,eAExBwK,EAAMyzD,QAAQ/rD,KAAK,KAGjC,8BACC,eAAC,GAAD,WACC,cAAC,GAAD,IACA,cAAC,GAAD,UFWFg7D,OAAO,EACPN,OAAQ,CACP,CACCjnD,KAAM,gBACNld,UAAW+kE,GACXN,OAAO,KAIV,CACCvnD,KAAM,wBACNld,ULba,SAAsB+B,GAMpC,OALgBhZ,KACEuO,aAAaC,QAAQ,eAExBwK,EAAMyzD,QAAQ/rD,KAAK,KAGjC,cAACtf,EAAA,EAAD,CAAKe,OAAO,QAAZ,SACC,eAAC,GAAD,WACC,cAACwZ,GAAA,EAAD,CAAMwC,GAAI,GAAI7c,MAAO,CAACa,OAAQ,QAA9B,SACC,cAAC,GAAD,MAED,eAACwZ,GAAA,EAAD,CAAMC,WAAS,EAACta,MAAO,CAACa,OAAQ,QAAhC,UACC,cAACwZ,GAAA,EAAD,CAAMwC,GAAI,EAAV,SACC,cAAC48D,GAAD,MAED,cAACp/D,GAAA,EAAD,CAAMwC,GAAI,EAAV,SACC,cAACq6D,GAAD,eKHJkD,OAAO,IAKMN,M,oBG5BAl7E,GAZD+7E,aAAe,CAC5Bp0D,QAAS,CACRglD,OAAQC,KAAK,IACbhlD,QAAS,CACRC,KAAMm0D,KAAK,MAEZt6B,UAAW,CACV75B,KAAM,c,8BCPHo0D,G,OAAWC,GAAiB,CACjCC,IAAK,4CAWSC,GARA,IAAIC,KAAa,CAC/BC,mBAAmB,EACnB34B,MAAO,IAAI44B,KAAc,CACxBC,aAAa,IAEdC,KAAMR,K,UCcP,SAASS,GAAoBC,GAC5B,OACC,cAAC,IAAD,CACC1oD,KAAM0oD,EAAM1oD,KACZunD,MAAOmB,EAAMnB,MACboB,OAAQ,SAAC9jE,GAAD,OAAW,cAAC6jE,EAAM5lE,UAAP,aAAiBmkE,OAAQyB,EAAMzB,QAAYpiE,OAKlD+jE,OA3Bf,WACC,OACC,cAAC37E,EAAA,EAAD,CAAKe,OAAO,QAAZ,SACC,cAAC66E,GAAA,EAAD,CAAgBV,OAAQA,GAAxB,SACC,qBAAK37E,UAAU,MAAf,SACC,eAACs8E,EAAA,EAAD,CAAe/8E,MAAOA,GAAtB,UACC,cAACg9E,EAAA,EAAD,IACA,cAAC,IAAD,UACC,cAAC,IAAD,UAAS9B,GAAOttE,KAAI,SAAC+uE,EAAOh3E,GAAR,OAAkB,cAAC+2E,GAAD,eAAqCC,GAAXh3E,oBCLxDs3E,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBloE,MAAK,YAAkD,IAA/CmoE,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,OCDdO,IAASb,OACP,cAAC,GAAD,IACAp6C,SAASC,eAAe,SAM1Bw6C,O","file":"static/js/main.497dd138.chunk.js","sourcesContent":["import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_USUARIO = gql`\r\n\tmutation crearUsuario($input: CrearUsuarioInput) {\r\n\t\tcrearUsuario(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tturno_en_caja_activo\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_USUARIOS = gql`\r\n\tquery obtenerUsuarios($sucursal: String!, $filtro: String) {\r\n\t\tobtenerUsuarios(sucursal: $sucursal, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\tturno_en_caja_activo\r\n\t\t\temail\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_USUARIO = gql`\r\n\tmutation actualizarUsuario($input: ActualizarUsuarioInput, $id: ID!) {\r\n\t\tactualizarUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO = gql`\r\n\tmutation logearUsuario($input: LogearUsuarioInput) {\r\n\t\tlogearUsuario(input: $input) {\r\n\t\t\ttoken\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const AGIGNAR_PERMISOS_USUARIO = gql`\r\n\tmutation asignarAccesosUsuario($input: CrearArregloDeAccesosInput, $id: ID!) {\r\n\t\tasignarAccesosUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n}\r\n`;\r\n","import { Box, makeStyles, Snackbar, Typography, Portal } from '@material-ui/core';\r\n/* import { Alert } from '@material-ui/lab'; */\r\nimport React from 'react';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\n\r\nexport default function SnackBarMessages({ alert, setAlert }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAlert({ open: false, status: alert.status, message: '' });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Portal>\r\n\t\t\t<Snackbar\r\n\t\t\t\tclassName={classes.snack}\r\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\t\topen={alert.open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t{alert.status === 'success' ? (\r\n\t\t\t\t\t\t\t<CheckCircleIcon style={{ color: '#22bb33' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ErrorIcon style={{ color: 'red' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box mr={1} />\r\n\t\t\t\t\t\t<Typography>{alert.message}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Portal>\r\n\t);\r\n\t/* return (\r\n\t\t<Snackbar\r\n\t\t\tclassName={classes.snack}\r\n\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\topen={alert.open}\r\n\t\t\tonClose={handleClose}\r\n\t\t\tautoHideDuration={2000}\r\n\t\t>\r\n\t\t\t<Alert onClose={handleClose} severity={alert.status}>\r\n\t\t\t\t{alert.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t); */\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Container, TextField, Typography, CircularProgress } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGEAR_USUARIO } from '../../gql/Catalogos/usuarios';\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { FormControl } from '@material-ui/core';\r\nimport { InputLabel } from '@material-ui/core';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport { InputAdornment } from '@material-ui/core';\r\nimport { IconButton } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport ab from '../../img/abLogo.jpeg'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tmargin: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcontainerImagen:{\r\n\t\tmaxWidth: 170,\r\n\t\tmaxHeight: 170\r\n\t},\r\n\timagen:{\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t}\r\n}));\r\n\r\nexport default function LayoutLogin(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = localStorage.getItem('sesionCafi');\r\n\tconst [ datos, setDatos ] = useState([]);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\r\n\tif (sesion) props.history.push('/ventas/venta-general');\r\n\r\n\tconst [ logearUsuario ] = useMutation(LOGEAR_USUARIO);\r\n\r\n\tconst signin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!datos.numero_usuario || !datos.password) {\r\n\t\t\tsetAlert({ message: 'Los campos estan vacíos', status: 'error', open: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await logearUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: datos\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst { token } = result.data.logearUsuario;\r\n\t\t\tconst decoded = jwt_decode(token);\r\n\t\t\tsetLoading(false);\r\n\t\t\tlocalStorage.setItem('sesionCafi', JSON.stringify(decoded));\r\n\t\t\tlocalStorage.setItem('tokenCafi', JSON.stringify(token));\r\n\t\t\tprops.history.push('/ventas/venta-general');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tif (e.target.name === 'numero_usuario') {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: parseInt(e.target.value)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: e.target.value\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickShowPassword = () => {\r\n\t\tsetShowPassword(!showPassword);\r\n\t};\r\n\r\n\tconst handleMouseDownPassword = (event) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"sm\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Box height=\"100vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t<Box boxShadow=\"3\" p={3} width=\"80%\">\r\n\t\t\t\t\t<Box display='flex' justifyContent='center' alignItems='center' justifyItems='center' >\r\n\t\t\t\t\t\t<Box className={classes.containerImagen} textAlign='center'>\r\n\t\t\t\t\t\t\t<img className={classes.imagen} src={ab} alt=\"imagen no disponible\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display='flex' textAlign='center' justifyContent='center'>\r\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"p\" className={classes.margin}>\r\n\t\t\t\t\t\t\t<b>Inicia sesión</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<form autoComplete=\"off\" onSubmit={signin} >\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Numero de usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tname=\"numero_usuario\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<FormControl variant=\"outlined\" name=\"password\" className={classes.margin} fullWidth>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor=\"usuario-password\">Contraseña</InputLabel>\r\n\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tid=\"usuario-password\"\r\n\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabelWidth={70}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tendIcon={loading ? <CircularProgress size={25} color=\"inherit\" /> : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tEntrar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","export const initial_state_datos_generales = {\r\n  receta_farmacia: false,\r\n  clave_producto_sat: {\r\n    Name: \"\",\r\n    Value: \"\",\r\n  },\r\n};\r\nexport const initial_state_precios = {\r\n  monedero: false,\r\n  monedero_electronico: 0,\r\n  iva_activo: true,\r\n  ieps_activo: false,\r\n  ieps: 0,\r\n  iva: 16,\r\n  granel: false,\r\n  inventario: {\r\n    inventario_minimo: 0,\r\n    inventario_maximo: 0,\r\n    unidad_de_inventario: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n  },\r\n  precio_de_compra: {\r\n    precio_con_impuesto: 0,\r\n    precio_sin_impuesto: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n  },\r\n  unidad_de_compra: {\r\n    unidad: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n    cantidad: 1,\r\n    precio_unitario_sin_impuesto: 0,\r\n    precio_unitario_con_impuesto: 0,\r\n  },\r\n};\r\n\r\nexport const initial_state_unidadVentaXDefecto = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Pz\",\r\n  codigo_unidad: \"H87\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: true,\r\n  default: true,\r\n};\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_unidadesVenta = [];\r\n\r\nexport const initial_state_almacen_inicial = {\r\n  id_almacen: \"\",\r\n  almacen: \"\",\r\n  cantidad: 0,\r\n  fecha_de_expiracion: \"\",\r\n};\r\nexport const initial_state_centro_de_costos = {};\r\n\r\nexport const initial_state_preciosPlazos = {\r\n  precio_piezas: [],\r\n  precio_cajas: [],\r\n  precio_costales: [],\r\n};\r\n\r\nexport const initial_state_subcategorias = [];\r\nexport const initial_state_imagenes = [];\r\nexport const initial_state_imagenes_eliminadas = [];\r\nexport const initial_state_onPreview = { index: \"\", image: \"\" };\r\nexport const initial_state_validacion = { error: false, message: \"\" };\r\nexport const initial_state_subcostos = [];\r\nexport const initial_state_selectedDate = null;\r\nexport const initial_state_presentaciones = [];\r\n","import React, { createContext, useState } from \"react\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_preciosP,\r\n  initial_state_unidadesVenta,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_subcategorias,\r\n  initial_state_imagenes,\r\n  initial_state_imagenes_eliminadas,\r\n  initial_state_onPreview,\r\n  initial_state_validacion,\r\n  initial_state_subcostos,\r\n  initial_state_selectedDate,\r\n  initial_state_presentaciones,\r\n} from \"./initialStatesProducto\";\r\n\r\nexport const RegProductoContext = createContext();\r\n\r\nexport const RegProductoProvider = ({ children }) => {\r\n  const [datos_generales, setDatosGenerales] = useState(\r\n    initial_state_datos_generales\r\n  );\r\n  const [precios, setPrecios] = useState(initial_state_precios);\r\n  const [unidadVentaXDefecto, setUnidadVentaXDefecto] = useState(\r\n    initial_state_unidadVentaXDefecto\r\n  );\r\n  const [preciosP, setPreciosP] = useState(initial_state_preciosP);\r\n  const [unidadesVenta, setUnidadesVenta] = useState(\r\n    initial_state_unidadesVenta\r\n  );\r\n  const [almacen_inicial, setAlmacenInicial] = useState(\r\n    initial_state_almacen_inicial\r\n  );\r\n  const [centro_de_costos, setCentroDeCostos] = useState(\r\n    initial_state_centro_de_costos\r\n  );\r\n  const [preciosPlazos, setPreciosPlazos] = useState(\r\n    initial_state_preciosPlazos\r\n  );\r\n  const [subcategorias, setSubcategorias] = useState(\r\n    initial_state_subcategorias\r\n  );\r\n  const [imagenes, setImagenes] = useState(initial_state_imagenes);\r\n  const [imagenes_eliminadas, setImagenesEliminadas] = useState(\r\n    initial_state_imagenes_eliminadas\r\n  );\r\n  const [onPreview, setOnPreview] = useState(initial_state_onPreview);\r\n  const [validacion, setValidacion] = useState(initial_state_validacion);\r\n  const [subcostos, setSubcostos] = useState(initial_state_subcostos);\r\n  const [selectedDate, setSelectedDate] = useState(initial_state_selectedDate);\r\n  const [update, setUpdate] = useState(false);\r\n  const [presentaciones, setPresentaciones] = useState(\r\n    initial_state_presentaciones\r\n  );\r\n  const [presentaciones_eliminadas, setPresentacionesEliminadas] = useState([]);\r\n  const [actualizarLista, setActualizarLista] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // USESTATES DE DESCUENTOS DE PRODUCTOS\r\n  const [ datosPreciosProducto, setDatosPreciosProducto ] = useState([]);\r\n  const [ preciosDescuentos, setPreciosDescuentos] = useState([]);\r\n  const [ preciosProductos, setPreciosProductos ] = useState([]);\r\n  const [ datosEnDescuentos, setDatosEnDescuentos ] = useState([]);\r\n  const [ almacen_existente, setAlmacenExistente] = useState(false);\r\n\r\n  return (\r\n    <RegProductoContext.Provider\r\n      value={{\r\n        datos_generales,\r\n        setDatosGenerales,\r\n        precios,\r\n        setPrecios,\r\n        almacen_inicial,\r\n        setAlmacenInicial,\r\n        imagenes,\r\n        setImagenes,\r\n        imagenes_eliminadas,\r\n        setImagenesEliminadas,\r\n        onPreview,\r\n        setOnPreview,\r\n        validacion,\r\n        setValidacion,\r\n        preciosP,\r\n        setPreciosP,\r\n        preciosPlazos,\r\n        setPreciosPlazos,\r\n        unidadesVenta,\r\n        setUnidadesVenta,\r\n        centro_de_costos,\r\n        setCentroDeCostos,\r\n        unidadVentaXDefecto,\r\n        setUnidadVentaXDefecto,\r\n        subcategorias,\r\n        setSubcategorias,\r\n        subcostos,\r\n        setSubcostos,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        update,\r\n        setUpdate,\r\n        presentaciones,\r\n        setPresentaciones,\r\n        presentaciones_eliminadas,\r\n        setPresentacionesEliminadas,\r\n        actualizarLista,\r\n        setActualizarLista,\r\n        alert,\r\n        setAlert,\r\n\r\n        datosPreciosProducto, \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n        datosEnDescuentos, \r\n        setDatosEnDescuentos,\r\n        almacen_existente, \r\n        setAlmacenExistente\r\n      }}\r\n    >\r\n      {children}\r\n    </RegProductoContext.Provider>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const EmpresaContext = createContext();\r\n\r\nexport const EmpresaProvider = ({ children }) => {\r\n   \r\n\tconst [ empresa, setEmpresa ] = useState({\r\n\t\tnombre_empresa:'',\r\n        nombre_dueno:'',\r\n\t\ttelefono_dueno:'',\r\n\t\tcelular:'',\r\n\t\tcorreo_empresa:'',\r\n        nombre_fiscal:'',\r\n        rfc:'',\r\n        regimen_fiscal:'',\r\n        curp:'',\r\n        info_adicio:'',\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n        direccionFiscal: {\r\n            calle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n        },\r\n        datosBancarios:{\r\n            cuenta: '',\r\n            sucursal: '',\r\n            clave_banco: ''\r\n        },\r\n\t\timagen: null\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<EmpresaContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tempresa,\r\n\t\t\t\tsetEmpresa,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</EmpresaContext.Provider>\r\n\t);\r\n};","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\"\r\n  },\r\n}));\r\n\r\nexport default function BackdropComponent({loading, setLoading}) {\r\n  const classes = useStyles();\r\n\r\n  /* const handleClose = () => {\r\n    setLoading(false);\r\n  }; */\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={loading} /* onClick={handleClose} */>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorPage({ error, altura}) {\r\n\tlet height = altura\r\n\tif(!height) height = 400;\r\n\treturn (\r\n\t\t<Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height={height}>\r\n\t\t\t<ErrorOutlineIcon style={{ fontSize: 100, color: 'rgba(17,85,204, 0.7)' }} />\r\n\t\t\t<Typography align=\"center\" style={{ fontSize: 18, color: 'rgba(17,85,204)' }}>\r\n\t\t\t\tHubo un problema\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nexport const OBTENER_DATOS_EMPRESA = gql`\r\n  query obtenerEmpresa($id: ID!) {\r\n    obtenerEmpresa(id: $id) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      cuenta_empresa{\r\n        dinero_actual\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_EMPRESA = gql`\r\n  mutation actualizarEmpresa($id: ID!, $input: EditarEmpresa) {\r\n    actualizarEmpresa(id: $id, input: $input) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n","export const numerosRandom = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const generateCode = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const formatoHora = (hora) => {\r\n  if (!hora) {\r\n    return null;\r\n  } else {\r\n    var newtime = new Date(hora);\r\n    return newtime.toLocaleTimeString(\"en-US\", { hour12: \"false\" });\r\n  }\r\n};\r\n\r\nexport const formatoFecha = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoFechaCorta = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"short\",\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoMexico = (number) => {\r\n  if (!number) {\r\n    return null;\r\n  } else {\r\n    let nueva;\r\n    if (number % 1 === 0) {\r\n      nueva = number;\r\n    } else {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    }\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = \"$1,\";\r\n    return nueva.toString().replace(exp, rep);\r\n  }\r\n};\r\n\r\nexport const cleanTypenames = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map(cleanTypenames);\r\n  } else if (value !== null && typeof value === \"object\") {\r\n    const newObject = {};\r\n    for (const property in value)\r\n      if (property !== \"__typename\")\r\n        newObject[property] = cleanTypenames(value[property]);\r\n    return newObject;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nexport const findProductArray = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePrices = async (\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  newPrising = 0\r\n) => {\r\n  let subtotalCalculo = 0,\r\n    totalCalculo = 0,\r\n    impuestoCalculo = 0,\r\n    ivaCalculo = 0,\r\n    iepsCalculo = 0,\r\n    descuentoCalculo = 0,\r\n    monederoCalculo = 0;\r\n  // console.log(\"newPrising\",newPrising);\r\n  const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n  console.log(newP.id_producto.precios.precios_producto[0].precio_venta);\r\n  // console.log(newP);\r\n  const iva_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.iva < 9\r\n          ? `0${newP.id_producto.precios.iva}`\r\n          : newP.id_producto.precios.iva\r\n      }`\r\n    );\r\n\r\n  const ieps_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.ieps < 9\r\n          ? `0${newP.id_producto.precios.ieps}`\r\n          : newP.id_producto.precios.ieps\r\n      }`\r\n    );\r\n\r\n  const precioProducto = newPrising;\r\n  // const precioDescuentoProducto = newP.descuento_activo ? parseFloat(newP.descuento.precio_con_descuento) : 0;\r\n\r\n  totalCalculo =\r\n    granel.granel === true\r\n      ? precioProducto * cantidadNueva * parseFloat(granel.valor)\r\n      : precioProducto * cantidadNueva;\r\n\r\n  subtotalCalculo =\r\n    granel.granel === true\r\n      ? (precioProducto - (iva_producto + ieps_producto)) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (precioProducto - (iva_producto + ieps_producto)) * cantidadNueva;\r\n\r\n  impuestoCalculo =\r\n    granel.granel === true\r\n      ? (iva_producto + ieps_producto) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (iva_producto + ieps_producto) * cantidadNueva;\r\n\r\n  console.log(cantidadNueva);\r\n\r\n  ivaCalculo =\r\n    granel.granel === true\r\n      ? iva_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : iva_producto * cantidadNueva;\r\n\r\n  iepsCalculo =\r\n    granel.granel === true\r\n      ? ieps_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : ieps_producto * cantidadNueva;\r\n\r\n  descuentoCalculo =\r\n    granel.granel === true\r\n      ? newP.descuento_activo === true\r\n        ? parseFloat(newP.descuento.dinero_descontado) *\r\n          cantidadNueva *\r\n          parseFloat(granel.valor)\r\n        : 0\r\n      : newP.descuento_activo === true\r\n      ? parseFloat(newP.descuento.dinero_descontado) * cantidadNueva\r\n      : 0;\r\n\r\n  monederoCalculo = newP.id_producto.precios.monedero\r\n    ? newP.id_producto.precios.monedero_electronico * cantidadNueva\r\n    : 0;\r\n\r\n  return {\r\n    totalCalculo,\r\n    subtotalCalculo,\r\n    impuestoCalculo,\r\n    ivaCalculo,\r\n    iepsCalculo,\r\n    descuentoCalculo,\r\n    monederoCalculo,\r\n  };\r\n};\r\n\r\nexport const calculatePrices2 = async ({ newP, cantidad, granel, origen, precio_boolean = false, precio}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? granel.valor : 1;\r\n    const precio_actual = precio_boolean ? precio : newP.descuento_activo ? newP.descuento : newP.precio_unidad;\r\n    const cantidadCaja =\r\n    precio_actual.unidad_maxima === true\r\n      ? precio_actual.cantidad_unidads\r\n      : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    const ob = {\r\n      ivaCalculo: parseFloat((ivaCalculo * valor_granel * cantidadNueva).toFixed(2)),\r\n      iepsCalculo: parseFloat((iepsCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      impuestoCalculo: parseFloat((impuestoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      subtotalCalculo: parseFloat((subtotalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      totalCalculo: parseFloat((totalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      monederoCalculo: parseFloat((monederoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      descuentoCalculo: parseFloat((descuentoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      newP\r\n    };\r\n    if(origen === \"Ventas1\"){\r\n      newP.cantidad_venta = 1;\r\n      newP.granel_producto  = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat((precio_actual.precio_neto).toFixed(2));\r\n      newP.precio_actual_object = precio_actual;\r\n    }else if(origen === \"Ventas2\") {\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const verifiPrising = async (newP) => {\r\n  try {\r\n    if (!newP) return false;\r\n    const amount = newP.cantidad_venta;\r\n    const pricings = newP.id_producto.precios.precios_producto.filter(\r\n      (p) => p.unidad_mayoreo > 0 && p.precio_neto > 0\r\n    );\r\n\r\n    let finalPrising = {\r\n      found: false,\r\n      pricing: 0,\r\n      number_pricing: 0,\r\n      object_prising: {}\r\n    };\r\n    const datoFinal = pricings.length;\r\n    if (newP.precio_seleccionado) return finalPrising;\r\n    //CONIDICONAR SI EL PRECIO ES MENOR Y MENOR PERO QUE NO SEA MAYOR AL SEGUNDO\r\n    if (amount < newP.id_producto.precios.precios_producto[1].unidad_mayoreo)\r\n      return (finalPrising = {\r\n        found: true,\r\n        pricing: newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.id_producto.precios.precios_producto[0].precio_neto,\r\n        number_pricing:\r\n          newP.id_producto.precios.precios_producto[0].numero_precio,\r\n        object_prising: newP.descuento_activo ? newP.descuento : newP.id_producto.precios.precios_producto[0]\r\n      });\r\n\r\n    for (let i = 0; i < pricings.length; i++) {\r\n      if (i + 1 === datoFinal && amount >= pricings[i].unidad_mayoreo)\r\n        return (finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        });\r\n\r\n      if (\r\n        i + 1 < datoFinal &&\r\n        amount >= pricings[i].unidad_mayoreo &&\r\n        amount < pricings[i + 1].unidad_mayoreo\r\n      ) {\r\n        finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        };\r\n      }\r\n    }\r\n    return finalPrising;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function formatCurrency(number) {\r\n  var formatted = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n  }).format(number);\r\n  console.log(formatted);\r\n  return formatted;\r\n}\r\n\r\nexport const findProductArrayRefactor = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    //Declarar variables\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n    //Se recorren los productos\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      //Se verifica si tiene codigo de barras ya que no es obligatorio\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n","import moment from \"moment\";\r\n\r\nexport const usosCfdi = [\r\n  {\r\n    Value: \"G01\",\r\n    Name: \"Adquisición de mercancías\",\r\n  },\r\n  {\r\n    Value: \"G02\",\r\n    Name: \"Devoluciones, descuentos o bonificaciones\",\r\n  },\r\n  {\r\n    Value: \"G03\",\r\n    Name: \"Gastos en general\",\r\n  },\r\n  {\r\n    Value: \"I01\",\r\n    Name: \"Construcciones\",\r\n  },\r\n  {\r\n    Value: \"I02\",\r\n    Name: \"Mobiliario y equipo de oficina por inversiones\",\r\n  },\r\n  {\r\n    Value: \"I03\",\r\n    Name: \"Equipo de transporte\",\r\n  },\r\n  {\r\n    Value: \"I04\",\r\n    Name: \"Equipo de cómputo y accesorios\",\r\n  },\r\n  {\r\n    Value: \"I05\",\r\n    Name: \"Dados, troqueles, moldes, matrices y herramental\",\r\n  },\r\n  {\r\n    Value: \"I06\",\r\n    Name: \"Comunicaciones telefónicas\",\r\n  },\r\n  {\r\n    Value: \"I07\",\r\n    Name: \"Comunicaciones satelitales\",\r\n  },\r\n  {\r\n    Value: \"I08\",\r\n    Name: \"Otra maquinaria y equipo\",\r\n  },\r\n  {\r\n    Value: \"D01\",\r\n    Name: \"Honorarios médicos, dentales y gastos hospitalarios\",\r\n  },\r\n  {\r\n    Value: \"D02\",\r\n    Name: \"Gastos médicos por incapacidad o discapacidad\",\r\n  },\r\n  {\r\n    Value: \"D03\",\r\n    Name: \"Gastos funerales.\",\r\n  },\r\n  {\r\n    Value: \"D04\",\r\n    Name: \"Donativos\",\r\n  },\r\n  {\r\n    Value: \"D05\",\r\n    Name:\r\n      \"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).\",\r\n  },\r\n  {\r\n    Value: \"D06\",\r\n    Name: \"Aportaciones voluntarias al SAR.\",\r\n  },\r\n  {\r\n    Value: \"D07\",\r\n    Name: \"Primas por seguros de gastos médicos.\",\r\n  },\r\n  {\r\n    Value: \"D08\",\r\n    Name: \"Gastos de transportación escolar obligatoria.\",\r\n  },\r\n  {\r\n    Value: \"D09\",\r\n    Name:\r\n      \"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.\",\r\n  },\r\n  {\r\n    Value: \"D10\",\r\n    Name: \"Pagos por servicios educativos (colegiaturas)\",\r\n  },\r\n  {\r\n    Value: \"P01\",\r\n    Name: \"Por definir\",\r\n  },\r\n];\r\nexport const tiposCfdi = [\r\n  {\r\n    NameId: 1,\r\n    Name: \"Factura\",\r\n    Value: \"I\",\r\n  },\r\n  {\r\n    NameId: 2,\r\n    Name: \"Nota de Crédito\",\r\n    Value: \"E\",\r\n  },\r\n  {\r\n    NameId: 14,\r\n    Name: \"Complemento de pago\",\r\n    Value: \"P\",\r\n  },\r\n];\r\nexport const tipoCambio = [\r\n  {\r\n    Value: \"MXN\",\r\n    Name: \"Peso Mexicano\",\r\n  },\r\n  {\r\n    Value: \"EUR\",\r\n    Name: \"Euro\",\r\n  },\r\n  {\r\n    Value: \"USD\",\r\n    Name: \"Dolar Americano\",\r\n  },\r\n];\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Dinero electrónico\",\r\n    Value: \"06\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  /* {\r\n        Name: \"Dación en pago\",\r\n        Value: \"12\"\r\n    },\r\n    {\r\n        Name: \"Pago por subrogación\",\r\n        Value: \"13\"\r\n    },\r\n    {\r\n        Name: \"Pago por consignación\",\r\n        Value: \"14\"\r\n    },\r\n    {\r\n        Name: \"Condonación\",\r\n        Value: \"15\"\r\n    },\r\n    {\r\n        Name: \"Compensación\",\r\n        Value: \"17\"\r\n    },\r\n    {\r\n        Name: \"Novación\",\r\n        Value: \"23\"\r\n    },\r\n    {\r\n        Name: \"Confusión\",\r\n        Value: \"24\"\r\n    },\r\n    {\r\n        Name: \"Remisión de deuda\",\r\n        Value: \"25\"\r\n    },\r\n    {\r\n        Name: \"Prescripción o caducidad\",\r\n        Value: \"26\"\r\n    },\r\n    {\r\n        Name: \"A satisfacción del acreedor\",\r\n        Value: \"27\"\r\n    }, */\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  /* {\r\n        Name: \"Tarjeta de servicios\",\r\n        Value: \"29\"\r\n    }, */\r\n  {\r\n    Name: \"Aplicación de anticipos\",\r\n    Value: \"30\",\r\n  },\r\n  /* {\r\n        Name: \"Intermediarios\",\r\n        Value: \"31\"\r\n    }, */\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];\r\nexport const metodoPago = [\r\n  {\r\n    Value: \"PPD\",\r\n    Name: \"Pago en parcialidades ó diferido\",\r\n  },\r\n  {\r\n    Value: \"PUE\",\r\n    Name: \"Pago en una sola exhibición\",\r\n  },\r\n];\r\nexport const regimenFiscal = [\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"General de Ley Personas Morales\",\r\n    Value: \"601\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Personas Morales con Fines no Lucrativos\",\r\n    Value: \"603\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sueldos y Salarios e Ingresos Asimilados a Salarios\",\r\n    Value: \"605\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Arrendamiento\",\r\n    Value: \"606\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Régimen de Enajenación o Adquisición de Bienes\",\r\n    Value: \"607\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Demás ingresos\",\r\n    Value: \"608\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name:\r\n      \"Residentes en el Extranjero sin Establecimiento Permanente en México\",\r\n    Value: \"610\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por Dividendos (socios y accionistas)\",\r\n    Value: \"611\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Personas Físicas con Actividades Empresariales y Profesionales\",\r\n    Value: \"612\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por intereses\",\r\n    Value: \"614\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Régimen de los ingresos por obtención de premios\",\r\n    Value: \"615\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sin obligaciones fiscales\",\r\n    Value: \"616\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name:\r\n      \"Sociedades Cooperativas de Producción que optan por diferir sus ingresos\",\r\n    Value: \"620\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Incorporación Fiscal\",\r\n    Value: \"621\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name: \"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras\",\r\n    Value: \"622\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Opcional para Grupos de Sociedades\",\r\n    Value: \"623\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Coordinados\",\r\n    Value: \"624\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas\",\r\n    Value: \"625\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Hidrocarburos\",\r\n    Value: \"628\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales\",\r\n    Value: \"629\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Enajenación de acciones en bolsa de valores\",\r\n    Value: \"630\",\r\n  },\r\n];\r\n\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_FACTURA = gql`\r\n  mutation crearFactura($input: CrearFacturaInput) {\r\n    crearFactura(input: $input) {\r\n      message\r\n      success\r\n      pdf\r\n      xml\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SERIE = gql`\r\n  mutation crearSerieCFDI($input: CrearSerieCfdiInput!) {\r\n    crearSerieCFDI(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEFAULT_SERIE = gql`\r\n  mutation modificarDefaultSerie($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    modificarDefaultSerie(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SERIE = gql`\r\n  mutation eliminarSerie($id: ID!) {\r\n    eliminarSerie(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_SERIES = gql`\r\n  query obtenerSeriesCdfi($empresa: ID!, $sucursal: ID!) {\r\n    obtenerSeriesCdfi(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n      success\r\n      seriesCfdi {\r\n        _id\r\n        serie\r\n        folio\r\n        default\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SELLO_CFDI = gql`\r\n  mutation crearCSDS($input: CrearCSDSInput!) {\r\n    crearCSDS(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SELLO_CFDI = gql`\r\n  mutation eliminarCSD($rfc: String, $empresa: ID!) {\r\n    eliminarCSD(rfc: $rfc, empresa: $empresa) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CATALOGOS_SAT_API = gql`\r\n  query obtenerCatalogosSAT($input: CrearFacturaInput!) {\r\n    obtenerCatalogosSAT(input: $input) {\r\n      message\r\n      currencies {\r\n        Decimals\r\n        PrecisionRate\r\n        Name\r\n        Value\r\n      }\r\n      paymentForms {\r\n        Name\r\n        Value\r\n      }\r\n      paymentMethods {\r\n        Name\r\n        Value\r\n      }\r\n      fiscalRegimens {\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n      cfdiTypes {\r\n        NameId\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_SERVICIOS_SAT_API = gql`\r\n  query obtenerProductosOServicios($input: CrearFacturaInput!) {\r\n    obtenerProductosOServicios(input: $input) {\r\n      message\r\n      productosOServicios {\r\n        DangerousMaterial\r\n        Complement\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_POSTAL_CODES_SAT_API = gql`\r\n  query obtenerCodigoPostal($input: CrearFacturaInput!) {\r\n    obtenerCodigoPostal(input: $input) {\r\n      message\r\n      codigoPostal {\r\n        StateCode\r\n        MunicipalityCode\r\n        LocationCode\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CFDIU_USES_SAT_API = gql`\r\n  query obtenerCfdiUses($input: CrearFacturaInput!) {\r\n    obtenerCfdiUses(input: $input) {\r\n      message\r\n      cfdiUses {\r\n        message\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  CloudUpload,\r\n  Done,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function RegistroSellos({\r\n  datosEmpresa,\r\n  firma_disabled,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    certificate: \"\",\r\n    private_key: \"\",\r\n    private_key_password: \"\",\r\n    rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      certificate: \"\",\r\n      private_key: \"\",\r\n      private_key_password: \"\",\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n      sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [crearCSDS] = useMutation(CREAR_SELLO_CFDI);\r\n\r\n  const handleClickShowPassword = () => setShow(!show);\r\n  const handleMouseDownPassword = (event) => event.preventDefault();\r\n\r\n  const obtenerFiles = (e) => {\r\n    const { name, files } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: files[0],\r\n    });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      private_key_password: e.target.value,\r\n    });\r\n  };\r\n\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve) => {\r\n      let baseURL = \"\";\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        baseURL = reader.result;\r\n        resolve(baseURL);\r\n      };\r\n    });\r\n  };\r\n\r\n  const guardarBD = async () => {\r\n    if (\r\n      !datos.certificate ||\r\n      !datos.private_key ||\r\n      !datos.private_key_password ||\r\n      !datos.rfc\r\n    )\r\n      return;\r\n\r\n    try {\r\n      let data = { ...datos };\r\n      let cer = data.certificate;\r\n      let key = data.private_key;\r\n      await getBase64(cer)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.certificate = base[1];\r\n          data.nombre_cer = cer.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      await getBase64(key)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.private_key = base[1];\r\n          data.nombre_key = key.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setLoading(true);\r\n      const result = await crearCSDS({\r\n        variables: {\r\n          input: {\r\n            certificate: data.certificate,\r\n            private_key: data.private_key,\r\n            private_key_password: data.private_key_password,\r\n            rfc: data.rfc,\r\n            empresa: data.empresa,\r\n            sucursal: data.sucursal,\r\n            nombre_cer: data.nombre_cer,\r\n            nombre_key: data.nombre_key,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearCSDS.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<Add />}\r\n          disabled={firma_disabled}\r\n        >\r\n          Agregar CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Registrar firma digital</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            {datosEmpresa.rfc ? (\r\n              <Typography>{`RFC: ${datosEmpresa.rfc}`}</Typography>\r\n            ) : (\r\n              <Typography color=\"error\">\r\n                *No tienes registrado un RFC\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              Archivo *.cer <b>Certificado de la firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.certificate ? datos.certificate.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-cer-sello-digital\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".cer\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-cer-sello-digital\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"certificate\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" mt={2}>\r\n            <Typography>\r\n              Archivo *.key <b>Llave Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.private_key ? datos.private_key.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-key-llave_privada\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".key\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-key-llave_privada\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"private_key\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" my={2}>\r\n            <Typography>\r\n              Contraseña de la llave <b>Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                type={show ? \"text\" : \"password\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"private_key_password\"\r\n                onChange={obtenerDatos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        onClick={handleClickShowPassword}\r\n                        onMouseDown={handleMouseDownPassword}\r\n                        edge=\"end\"\r\n                      >\r\n                        {show ? <Visibility /> : <VisibilityOff />}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => guardarBD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { Close, DeleteOutline } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSellos({ datosEmpresa, refetch }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    rfc: datosEmpresa && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [eliminarCSD] = useMutation(ELIMINAR_SELLO_CFDI);\r\n\r\n  const eliminarSelloCSD = async () => {\r\n    if (!datos.rfc) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await eliminarCSD({\r\n        variables: {\r\n          rfc: datos.rfc,\r\n          empresa: datos.empresa,\r\n        },\r\n      });\r\n\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCSD.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<DeleteOutline />}\r\n        >\r\n          Remover CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Eliminar Firma Digital</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Se eliminara el CSD registrado con el RFC ${datosEmpresa.rfc}`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} /> : <DeleteOutline />\r\n            }\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            onClick={() => eliminarSelloCSD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  Container,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n  DialogContent,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { FcDocument } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\nimport { regimenFiscal } from \"../../Facturacion/catalogos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport RegistroSellos from \"../../Facturacion/CFDISellos/RegistrarSellos\";\r\nimport EliminarSellos from \"../../Facturacion/CFDISellos/EliminarCSD\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function InformacionFiscal() {\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? true : false\r\n  );\r\n  const { empresa, setEmpresa } = useContext(EmpresaContext);\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n  const [firma_disabled, setFirmaDisabled] = useState(false);\r\n  const [empresaFiscal, setEmpresaFiscal] = useState({\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    regimen_fiscal: \"\",\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n  });\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n        let new_sesion = sesion;\r\n        new_sesion.empresa = data.obtenerEmpresa;\r\n        localStorage.setItem(\"sesionCafi\", JSON.stringify(new_sesion));\r\n        if (!data.obtenerEmpresa.rfc) {\r\n          setFirmaDisabled(true);\r\n        } else {\r\n          setFirmaDisabled(false);\r\n        }\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaFiscal({\r\n        nombre_fiscal: empresa.nombre_fiscal,\r\n        rfc: empresa.rfc,\r\n        curp: empresa.curp,\r\n\r\n        info_adicio: empresa.info_adicio,\r\n        regimen_fiscal: empresa.regimen_fiscal,\r\n        sello_sat: empresa.sello_sat,\r\n        nombre_cer: empresa.nombre_cer,\r\n        nombre_key: empresa.nombre_key,\r\n        limite_timbres: empresa.limite_timbres,\r\n        timbres_usados: empresa.timbres_usados,\r\n        direccionFiscal: {\r\n          calle: empresa.direccionFiscal.calle,\r\n          no_ext: empresa.direccionFiscal.no_ext,\r\n          no_int: empresa.direccionFiscal.no_int,\r\n          codigo_postal: empresa.direccionFiscal.codigo_postal,\r\n          colonia: empresa.direccionFiscal.colonia,\r\n          municipio: empresa.direccionFiscal.municipio,\r\n          localidad: empresa.direccionFiscal.localidad,\r\n          estado: empresa.direccionFiscal.estado,\r\n          pais: empresa.direccionFiscal.pais,\r\n        },\r\n        datosBancarios: {\r\n          cuenta: empresa.datosBancarios.cuenta,\r\n          sucursal: empresa.datosBancarios.sucursal,\r\n          clave_banco: empresa.datosBancarios.clave_banco,\r\n        },\r\n      });\r\n    } catch (errorCatch) {}\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaFiscal); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaFiscal,\r\n        },\r\n      });\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoadingPage(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.response) {\r\n        console.log(error.response);\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      direccionFiscal: {\r\n        ...empresaFiscal.direccionFiscal,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n  const obtenerCamposBancarios = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      datosBancarios: {\r\n        ...empresaFiscal.datosBancarios,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcDocument className={classes.icon} />\r\n          </Box>\r\n          Información fiscal\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Información fiscal\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container>\r\n              <Grid container spacing={3} style={{ marginTop: 8 }}>\r\n                <Grid item md={6} xs={12} className={classes.require}>\r\n                  <Box my={1}>\r\n                    <Typography>\r\n                      <span>* </span>Nombre fiscal\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaFiscal.nombre_fiscal}\r\n                      name=\"nombre_fiscal\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.nombre_fiscal\r\n                          ? empresaFiscal.nombre_fiscal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>RFC</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"rfc\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.rfc ? empresaFiscal.rfc : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Régimen fiscal</Typography>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"regimen_fiscal\"\r\n                    >\r\n                      <Select\r\n                        value={\r\n                          empresaFiscal.regimen_fiscal\r\n                            ? empresaFiscal.regimen_fiscal\r\n                            : \"\"\r\n                        }\r\n                        name=\"regimen_fiscal\"\r\n                        onChange={obtenerCampos}\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {regimenFiscal.map((res, index) => (\r\n                          <MenuItem\r\n                            key={index}\r\n                            value={res.Value}\r\n                          >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>CURP</Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"curp\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.curp ? empresaFiscal.curp : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Info. Adicional</Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"info_adicio\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.info_adicio\r\n                          ? empresaFiscal.info_adicio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      multiline\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                  <Typography className={classes.subtitle}>\r\n                    <b>Firma digital</b>\r\n                  </Typography>\r\n                  <Divider />\r\n                  <Box m={1}>\r\n                    {empresaFiscal.sello_sat === true ? (\r\n                      <Alert\r\n                        severity=\"success\"\r\n                        action={\r\n                          <EliminarSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Firma Digital Activa</AlertTitle>\r\n                      </Alert>\r\n                    ) : (\r\n                      <Alert\r\n                        severity=\"info\"\r\n                        action={\r\n                          <RegistroSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Sin Firma Digital</AlertTitle>\r\n                        Sin esta firma no prodrás realizar facturas\r\n                        {firma_disabled ? (\r\n                          <li>Necesitas tener un RFC registrado</li>\r\n                        ) : null}\r\n                      </Alert>\r\n                    )}\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Archivo *.cer</Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Archivo *.key</Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Fecha de registro</Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box mt={2}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography>Calle</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.calle\r\n                          ? empresaFiscal.direccionFiscal.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Num. Ext</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_ext\r\n                          ? empresaFiscal.direccionFiscal.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Num. Int</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_int\r\n                          ? empresaFiscal.direccionFiscal.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography>C.P.</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.codigo_postal\r\n                          ? empresaFiscal.direccionFiscal.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Colonia</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.colonia\r\n                          ? empresaFiscal.direccionFiscal.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Municipio</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.municipio\r\n                          ? empresaFiscal.direccionFiscal.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography>Localidad</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.localidad\r\n                          ? empresaFiscal.direccionFiscal.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Estado</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.estado\r\n                          ? empresaFiscal.direccionFiscal.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Pais</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.pais\r\n                          ? empresaFiscal.direccionFiscal.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box mt={2}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Datos bancarios</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography>Cuenta</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"cuenta\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.cuenta\r\n                          ? empresaFiscal.datosBancarios.cuenta\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography>Sucursal</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"sucursal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.sucursal\r\n                          ? empresaFiscal.datosBancarios.sucursal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography>Clave de banco</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"clave_banco\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.clave_banco\r\n                          ? empresaFiscal.datosBancarios.clave_banco\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.informacion_fiscal.editar ===\r\n        false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  Avatar,\r\n  DialogContent,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function MisDatos() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { empresa, update, setEmpresa, setUpdate } = useContext(EmpresaContext);\r\n\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  const [empresaDatos, setEmpresaDatos] = useState({\r\n    nombre_empresa: \"\",\r\n    nombre_dueno: \"\",\r\n    telefono_dueno: \"\",\r\n    celular: \"\",\r\n    correo_empresa: \"\",\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    regimen_fiscal: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n    imagen: null,\r\n  });\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [update, refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaDatos({\r\n        nombre_empresa: empresa.nombre_empresa,\r\n        nombre_dueno: empresa.nombre_dueno,\r\n        telefono_dueno: empresa.telefono_dueno,\r\n        celular: empresa.celular,\r\n        correo_empresa: empresa.correo_empresa,\r\n        direccion: empresa.direccion,\r\n        imagen: empresa.imagen,\r\n      });\r\n    } catch (errorCatch) {\r\n      // console.log(errorCatch)\r\n    }\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaDatos,\r\n        },\r\n      });\r\n      setUpdate(true);\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      direccion: { ...empresaDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [empresaDatos, setEmpresaDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de empresa\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={2}>\r\n                  <Box className={classes.avatarContainer} {...getRootProps()}>\r\n                    <input {...getInputProps()} />\r\n                    {preview ? (\r\n                      <Avatar className={classes.avatar} src={`${preview}`} />\r\n                    ) : (\r\n                      <Avatar\r\n                        className={classes.avatar}\r\n                        src={`${empresa.imagen}`}\r\n                      />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <span>* </span>Nombre de empresa\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_empresa}\r\n                      name=\"nombre_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_empresa\r\n                          ? empresaDatos.nombre_empresa\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <span>* </span>Nombre dueño\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_dueno}\r\n                      name=\"nombre_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_dueno\r\n                          ? empresaDatos.nombre_dueno\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Teléfono</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.telefono_dueno\r\n                          ? empresaDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>Celular</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"celular\"\r\n                      variant=\"outlined\"\r\n                      value={empresaDatos.celular ? empresaDatos.celular : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>E-mail</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"correo_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.correo_empresa\r\n                          ? empresaDatos.correo_empresa\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio empresa</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>Calle</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.calle\r\n                          ? empresaDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Num. Ext</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_ext\r\n                          ? empresaDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Num. Int</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_int\r\n                          ? empresaDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>C.P. </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.codigo_postal\r\n                          ? empresaDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Colonia</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.colonia\r\n                          ? empresaDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Municipio</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.municipio\r\n                          ? empresaDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>Localidad</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.localidad\r\n                          ? empresaDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Estado</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.estado\r\n                          ? empresaDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>Pais</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.pais\r\n                          ? empresaDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport InformacionFiscal from './InformacionFiscal/InformacionFiscal';\r\nimport Datos from './Datos/MisDatos';\r\n\r\nexport default function MiEmpresa() {\r\n\t\r\n\t\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justify=\"center\">\r\n\t\t\t\t{sesion.accesos.mi_empresa.datos_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Datos idEmpresa={sesion.empresa._id} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{sesion.accesos.mi_empresa.informacion_fiscal.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<InformacionFiscal />\r\n\t\t\t\t\t\t</Box> \r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { EmpresaProvider } from '../../../context/Catalogos/empresaContext';\r\nimport MiEmpresa from './MiEmpresa';\r\n\r\nexport default function Empresa() {\r\n    return(\r\n        <div>\r\n            <EmpresaProvider>\r\n                <MiEmpresa/>\r\n            </EmpresaProvider>\r\n        </div>\r\n    )\r\n}","export const unitCodes = [\r\n    {unidad: \"Pz\", codigo_unidad: \"H87\"},\r\n    {unidad: \"Caja\", codigo_unidad: \"XBX\"}\r\n]\r\n\r\nexport const unitCodes_granel = [\r\n  {unidad: \"Kg\", codigo_unidad: \"KGM\"},\r\n  {unidad: \"Lt\", codigo_unidad: \"LTR\"},\r\n  {unidad: \"Costal\", codigo_unidad: \"KGM\"},\r\n]","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  IconButton,\r\n  InputAdornment,\r\n  OutlinedInput,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Typography,\r\n  Table,\r\n  Checkbox,\r\n  Select,\r\n  MenuItem,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, DialogTitle } from \"@material-ui/core\";\r\nimport { Add, DeleteOutline, LocalOffer } from \"@material-ui/icons\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `5px 5px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PreciosDeCompra() {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const [unidades, setUnidades] = useState({\r\n    unidad: precios.unidad_de_compra.unidad,\r\n    codigo_unidad: precios.unidad_de_compra.codigo_unidad,\r\n    unidad_principal: false,\r\n    cantidad: 1,\r\n  });\r\n\r\n  const obtenerUnidadesVentas = (e, child) => {\r\n    if (e.target.name === \"cantidad\") {\r\n      let cantidad = parseFloat(e.target.value);\r\n      setUnidades({\r\n        ...unidades,\r\n        cantidad: cantidad,\r\n        precio: cantidad * unidadVentaXDefecto.precio,\r\n      });\r\n    } else if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setUnidades({\r\n        ...unidades,\r\n        [e.target.name]: unidad,\r\n        codigo_unidad,\r\n        precio: unidades.cantidad * unidadVentaXDefecto.precio,\r\n      });\r\n    } else {\r\n      setUnidades({\r\n        ...unidades,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n    }\r\n  };\r\n\r\n  const obtenerPrecioUVentas = (value) => {\r\n    console.log(\"obtenreprecio\");\r\n    if (unidades.descuento_activo && unidades.descuento_activo === true) {\r\n      console.log(\"entra\");\r\n      //calcular nuevo precio entre %\r\n      let precio_neto = Math.round(\r\n        value -\r\n          value *\r\n            parseFloat(\r\n              `0.${\r\n                unidades.descuento.porciento < 10\r\n                  ? `0${unidades.descuento.porciento}`\r\n                  : unidades.descuento.porciento\r\n              }`\r\n            )\r\n      );\r\n      setUnidades({\r\n        ...unidades,\r\n        precio: parseFloat(value),\r\n        descuento: { ...unidades.descuento, precio_neto },\r\n      });\r\n    } else {\r\n      setUnidades({\r\n        ...unidades,\r\n        precio: parseFloat(value),\r\n      });\r\n    }\r\n  };\r\n\r\n  const agregarNuevaUnidad = () => {\r\n    if (!unidades.unidad || !unidades.precio || !unidades.cantidad) return;\r\n    unidades.descuento_activo = null;\r\n    const { precio, cantidad } = unidades;\r\n    const { iva, ieps } = precios;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVCI = parseFloat((precio / cantidad).toFixed(2));\r\n    let PVSI = parseFloat((PVCI / (suma_impuestos + 1)).toFixed(2));\r\n\r\n    let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let iva_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let utilidad = parseFloat((((PVSI - PCSI) / PCSI) * 100).toFixed(2));\r\n\r\n    let new_unidad = {\r\n      ...unidades,\r\n      precio_unidad: {\r\n        numero_precio: 1,\r\n        precio_venta: PVSI,\r\n        precio_neto: PVCI,\r\n        unidad_mayoreo: 0,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (unidades.codigo_unidad === \"XBX\" || unidades.codigo_unidad === \"KGM\") {\r\n      new_unidad.precio_unidad.precio_general = precio;\r\n      new_unidad.precio_unidad.cantidad_unidad = cantidad;\r\n      new_unidad.precio_unidad.unidad_maxima = true;\r\n    }\r\n    setUnidadesVenta([...unidadesVenta, new_unidad]);\r\n    setUnidades({\r\n      unidad: \"Pz\",\r\n      codigo_unidad: \"H87\",\r\n      unidad_principal: false,\r\n    });\r\n  };\r\n\r\n  const descuentoUnidadXdefecto = (descuento_activo) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      descuento_activo,\r\n    })\r\n  } \r\n\r\n  const checkUnidadDefault = (checked) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: checked,\r\n    });\r\n    if (checked) {\r\n      let nuevo_array = [];\r\n      for (let i = 0; i < unidadesVenta.length; i++) {\r\n        const element = unidadesVenta[i];\r\n        let new_element = {\r\n          _id: element._id,\r\n          codigo_barras: element.codigo_barras,\r\n          unidad: element.unidad,\r\n          codigo_unidad: element.codigo_unidad,\r\n          precio: parseFloat(element.precio),\r\n          cantidad: parseFloat(element.cantidad),\r\n          unidad_principal: false,\r\n          default: element.default,\r\n          descuento: element.descuento,\r\n          descuento_activo: element.descuento_activo,\r\n          precio_unidad: element.precio_unidad,\r\n        };\r\n        nuevo_array.push(new_element);\r\n      }\r\n      setUnidadesVenta([...nuevo_array]);\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setUnidades({\r\n      ...unidades,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box width={100}>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={unidades.unidad}\r\n                  onChange={obtenerUnidadesVentas}\r\n                >\r\n                  {unitCodes_granel.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={unidades.unidad}\r\n                  onChange={obtenerUnidadesVentas}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box width={180}>\r\n          <Typography>\r\n            Cantidad{\" \"}\r\n            <b>\r\n              {unidades.unidad === \"Caja\"\r\n                ? \"(pz por caja)\"\r\n                : unidades.unidad === \"Costal\"\r\n                ? \"(kg por costal)\"\r\n                : \"\"}\r\n            </b>\r\n          </Typography>\r\n          <TextField\r\n            disabled={unidades.codigo_unidad === \"H87\"}\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"cantidad\"\r\n            variant=\"outlined\"\r\n            onChange={obtenerUnidadesVentas}\r\n            value={unidades.cantidad ? unidades.cantidad : \"\"}\r\n            fullWidth\r\n          />\r\n        </Box>\r\n        <Box width={130}>\r\n          <Typography>\r\n            Precio por <b>{unidades.unidad}</b>\r\n          </Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerPrecioUVentas(e.target.value)}\r\n            value={unidades.precio ? unidades.precio : \"\"}\r\n            fullWidth\r\n          />\r\n        </Box>\r\n        {unidades.descuento_activo === true ? (\r\n          <Box width={130}>\r\n            <Typography>\r\n              <b>$ </b>Descuento\r\n            </Typography>\r\n            <TextField\r\n              inputProps={{ readOnly: true }}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              value={unidades.descuento.precio_neto}\r\n              fullWidth\r\n            />\r\n          </Box>\r\n        ) : null}\r\n        <Box width={240}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"codigo_barras\"\r\n            fullWidth\r\n          >\r\n            <Typography>Código de barras</Typography>\r\n            <OutlinedInput\r\n              fullWidth\r\n              disabled={update}\r\n              id=\"input-codigo-barras\"\r\n              name=\"codigo_barras\"\r\n              value={unidades.codigo_barras ? unidades.codigo_barras : \"\"}\r\n              onChange={obtenerUnidadesVentas}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <Button\r\n                    onClick={() => GenCodigoBarras()}\r\n                    edge=\"end\"\r\n                    color=\"primary\"\r\n                    disabled={update}\r\n                  >\r\n                    Generar\r\n                  </Button>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => agregarNuevaUnidad()}\r\n            startIcon={<Add fontSize=\"large\" />}\r\n            /* startIcon={\r\n              actualizarUnidad ? (\r\n                <Done fontSize=\"large\" />\r\n              ) : (\r\n                <Add fontSize=\"large\" />\r\n              )\r\n            } */\r\n            variant=\"outlined\"\r\n            size=\"large\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>Aplicar Descuento</TableCell>\r\n                <TableCell>Unidad Principal</TableCell>\r\n                <TableCell>Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow /* selected={actualizarUnidad ? true : false} */>\r\n                <TableCell>{datos_generales.codigo_barras}</TableCell>\r\n                <TableCell>{unidadVentaXDefecto.unidad}</TableCell>\r\n                <TableCell>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    {unidadVentaXDefecto.descuento_activo !== null ? (\r\n                      <LocalOffer\r\n                        color={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? \"primary\"\r\n                            : \"action\"\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                    <Box mr={1} />\r\n                    <Typography>\r\n                      <b>\r\n                        $\r\n                        {formatoMexico(\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento.precio_neto\r\n                            : unidadVentaXDefecto.precio\r\n                        )}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell>{unidadVentaXDefecto.cantidad}</TableCell>\r\n                <TableCell>\r\n                  {unidadVentaXDefecto.descuento_activo !== undefined &&\r\n                  unidadVentaXDefecto.descuento_activo !== null ? (\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Checkbox\r\n                        checked={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento_activo\r\n                            : false\r\n                        }\r\n                        onChange={(e) =>\r\n                          descuentoUnidadXdefecto(e.target.checked)\r\n                        }\r\n                        inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                        color=\"primary\"\r\n                        disabled={unidadVentaXDefecto.descuento_activo === null}\r\n                      />\r\n                      <Typography color=\"primary\">\r\n                        %\r\n                        {parseFloat(\r\n                          unidadVentaXDefecto.descuento_activo !== null\r\n                            ? unidadVentaXDefecto.descuento.porciento\r\n                            : 0\r\n                        )}\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : null}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={unidadVentaXDefecto.unidad_principal}\r\n                    onChange={(e) => checkUnidadDefault(e.target.checked)}\r\n                    inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n                    disabled={unidadesVenta.length === 0}\r\n                  />\r\n                </TableCell>\r\n                <TableCell>\r\n                  {/* {actualizarUnidad ? (\r\n                    <IconButton\r\n                      color=\"primary\"\r\n                      onClick={() => cancelarUpdate()}\r\n                    >\r\n                      <Close color=\"primary\" />\r\n                    </IconButton>\r\n                  ) : (\r\n                    <IconButton\r\n                      color=\"primary\"\r\n                      onClick={() => updateUnidadPrincipal()}\r\n                    >\r\n                      <EditOutlined color=\"primary\" />\r\n                    </IconButton>\r\n                  )} */}\r\n                </TableCell>\r\n              </TableRow>\r\n              {unidadesVenta.map((unidades, index) => {\r\n                if (unidades.default !== true)\r\n                  return (\r\n                    <RenderUnidadesRows\r\n                      key={index}\r\n                      unidades={unidades}\r\n                      index={index}\r\n                    />\r\n                  );\r\n                return null;\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderUnidadesRows = ({ unidades, index }) => {\r\n  const {\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const checkUnidadPrincipal = () => {\r\n    let nuevo_array = [];\r\n    for (let i = 0; i < unidadesVenta.length; i++) {\r\n      const element = unidadesVenta[i];\r\n      let new_element = {\r\n        _id: element._id,\r\n        codigo_barras: element.codigo_barras,\r\n        unidad: element.unidad,\r\n        codigo_unidad: element.codigo_unidad,\r\n        precio: parseFloat(element.precio),\r\n        cantidad: parseFloat(element.cantidad),\r\n        unidad_principal: i === index ? true : false,\r\n        default: element.default,\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        precio_unidad: element.precio_unidad,\r\n      };\r\n      nuevo_array.push(new_element);\r\n    }\r\n    setUnidadesVenta([...nuevo_array]);\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: false,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    let nuevo_array = [];\r\n    for (let i = 0; i < unidadesVenta.length; i++) {\r\n      const element = unidadesVenta[i];\r\n\r\n      let new_element = {\r\n        _id: element._id,\r\n        codigo_barras: element.codigo_barras,\r\n        unidad: element.unidad,\r\n        codigo_unidad: element.codigo_unidad,\r\n        precio: parseFloat(element.precio),\r\n        cantidad: parseFloat(element.cantidad),\r\n        unidad_principal: element.unidad_principal,\r\n        default: element.default,\r\n        descuento: element.descuento,\r\n        descuento_activo: i === index ? value : element.descuento_activo,\r\n        precio_unidad: element.precio_unidad,\r\n      };\r\n      nuevo_array.push(new_element);\r\n    }\r\n    setUnidadesVenta([...nuevo_array]);\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell>{unidades.codigo_barras}</TableCell>\r\n      <TableCell>{unidades.unidad}</TableCell>\r\n      <TableCell>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          {unidades.descuento_activo !== null ? (\r\n            <LocalOffer\r\n              color={unidades.descuento_activo ? \"primary\" : \"action\"}\r\n            />\r\n          ) : null}\r\n          <Box mr={1} />\r\n          <Typography>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                unidades.descuento_activo === true\r\n                  ? unidades.descuento.precio_neto\r\n                  : unidades.precio\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell>{unidades.cantidad}</TableCell>\r\n      <TableCell>\r\n        {unidades.descuento_activo !== null ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Checkbox\r\n              checked={\r\n                unidades.descuento_activo ? unidades.descuento_activo : false\r\n              }\r\n              onChange={(e) => aplicarDescuento(e.target.checked)}\r\n              inputProps={{ \"aria-label\": \"check descuento\" }}\r\n              color=\"primary\"\r\n              disabled={unidades.descuento_activo === null}\r\n            />\r\n            <Typography color=\"primary\">\r\n              %\r\n              {parseFloat(\r\n                unidades.descuento && unidades.descuento !== null\r\n                  ? unidades.descuento.porciento\r\n                  : 0\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <Checkbox\r\n          checked={unidades.unidad_principal}\r\n          onChange={(e) => checkUnidadPrincipal(e.target.checked)}\r\n          inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n        />\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalDelete unidades={unidades} index={index} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst ModalDelete = ({ unidades, index }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarUnidad = () => {\r\n    unidadesVenta.splice(index, 1);\r\n    if (unidadesVenta.length === 0 || unidades.unidad_principal) {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: true,\r\n      });\r\n    }\r\n    setUnidadesVenta([...unidadesVenta]);\r\n    toggleModal();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n        <DeleteOutline color=\"primary\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={toggleModal}>\r\n        <DialogTitle>{\"se eliminará esta unidad de venta\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={() => toggleModal()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => eliminarUnidad()} color=\"secondary\" autoFocus>\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n  },\r\n  marginInput: {\r\n    marginTop: 19,\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PreciosDeVenta() {\r\n  const { preciosP } = useContext(RegProductoContext);\r\n  let newPreciosP = [...preciosP];\r\n\r\n  return (\r\n    <Fragment>\r\n      {preciosP.map((res, index) => (\r\n        <RenderPreciosP\r\n          key={index}\r\n          data={res}\r\n          index={index}\r\n          newPreciosP={newPreciosP}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderPreciosP = ({ data, index, newPreciosP }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    preciosP,\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setPreciosP,\r\n  } = useContext(RegProductoContext);\r\n  let preciosVenta = { ...preciosP[index] };\r\n\r\n  const obtenerUtilidad = (valor_base) => {\r\n    if (!valor_base) {\r\n      preciosVenta.utilidad = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    /* let utilidad = 1; */\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let { unidad, cantidad, descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let { iva, ieps } = precios;\r\n    let utilidad = valor_base / 100;\r\n\r\n    const precio_venta = PUCSI * utilidad + PUCSI;\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    const precio_neto = precio_venta + impuestos;\r\n\r\n    preciosVenta.utilidad = parseFloat(valor_base);\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } else {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      }\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n    }\r\n    setUnidadVentaXDefecto(unidadXDefecto);\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerPrecioNeto = (value) => {\r\n    if (!value) {\r\n      preciosVenta.precio_neto = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let { unidad, cantidad, descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let { iva, ieps } = precios;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio_neto / (suma + 1)).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    let utilidad_base = ((precio_neto - impuestos - PUCSI) / PUCSI) * 100;\r\n\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.utilidad = parseFloat(utilidad_base.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } else {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      }\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n    }\r\n    setUnidadVentaXDefecto(unidadXDefecto);\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerMayoreo = (value) => {\r\n    if (!value) {\r\n      preciosVenta.unidad_mayoreo = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n    preciosVenta.unidad_mayoreo = parseInt(value);\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const calculos = () => {\r\n    let { iva, ieps } = precios;\r\n    let { unidad, cantidad, descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad_base = preciosVenta.utilidad ? preciosVenta.utilidad : 0;\r\n    let utilidad = utilidad_base / 100;\r\n\r\n    //precio venta y neto con utilidad\r\n    const precio_venta = parseFloat((PUCSI * utilidad + PUCSI).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n\r\n    const precio_neto = parseFloat((precio_venta + impuestos).toFixed(2));\r\n\r\n    //meter los valores a preciosVenta\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.iva_precio = iva;\r\n    preciosVenta.ieps_precio = ieps;\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } else {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      }\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n    }\r\n    setUnidadVentaXDefecto(unidadXDefecto);\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (preciosVenta.numero_precio === 1) {\r\n      calculos();\r\n    } else if (preciosVenta.numero_precio > 1 && preciosVenta.precio_neto) {\r\n      calculos();\r\n    }\r\n\r\n    /* preciosP.splice(index, 1, preciosVenta); */\r\n  }, [precios.unidad_de_compra.precio_unitario_con_impuesto]);\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    switch (name) {\r\n      case \"utilidad\":\r\n        if (!value) {\r\n          preciosVenta.utilidad = 0;\r\n          preciosVenta.precio_neto =\r\n            precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      case \"precio_neto\":\r\n        if (!value) {\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          preciosVenta.utilidad = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      case \"unidad_mayoreo\":\r\n        if (!value) {\r\n          preciosVenta.unidad_mayoreo = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.input}>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Utilidad</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box minWidth={100}>\r\n          <Typography>Precio {data.numero_precio}</Typography>\r\n          <Box mb={2} />\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              endAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n            }}\r\n            size=\"small\"\r\n            value={preciosVenta.utilidad}\r\n            name=\"utilidad\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerUtilidad(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"utilidad\", preciosVenta.utilidad)\r\n            }\r\n            error={preciosVenta.utilidad === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Box\r\n            alignItems=\"flex-end\"\r\n            flexDirection=\"column\"\r\n            display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n          >\r\n            <Typography className={classes.precioTitle}>\r\n              <b>Precio de venta</b>\r\n            </Typography>\r\n            <Typography\r\n              className={classes.precioTitle}\r\n              variant=\"caption\"\r\n              color=\"textSecondary\"\r\n            >\r\n              (precio sin impuestos)\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box pl={1}>\r\n          <Typography>\r\n            <b>{parseFloat(preciosVenta.precio_venta).toFixed(2)}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          flexDirection=\"column\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Precio venta neto</b>\r\n          </Typography>\r\n          <Typography\r\n            className={classes.precioTitle}\r\n            variant=\"caption\"\r\n            color=\"textSecondary\"\r\n          >\r\n            (precio con impuestos)\r\n          </Typography>\r\n        </Box>\r\n        <Box className={data.numero_precio > 1 ? classes.marginInput : \"\"}>\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio_neto\"\r\n            variant=\"outlined\"\r\n            value={preciosVenta.precio_neto}\r\n            onChange={(e) => obtenerPrecioNeto(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"precio_neto\", preciosVenta.precio_neto)\r\n            }\r\n            error={preciosVenta.precio_neto === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Unidad por mayoreo</b>\r\n          </Typography>\r\n        </Box>\r\n        {data.numero_precio > 1 ? (\r\n          <Box>\r\n            <TextField\r\n              disabled={\r\n                !parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                )\r\n              }\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"unidad_mayoreo\"\r\n              variant=\"outlined\"\r\n              value={preciosVenta.unidad_mayoreo}\r\n              onChange={(e) => obtenerMayoreo(e.target.value)}\r\n              onBlur={() =>\r\n                verificarCampoVacio(\r\n                  \"unidad_mayoreo\",\r\n                  preciosVenta.unidad_mayoreo\r\n                )\r\n              }\r\n              error={preciosVenta.unidad_mayoreo === \"\"}\r\n            />\r\n          </Box>\r\n        ) : null}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","export const calcular_iva = (input, name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"iva_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = parseFloat(precio_sin_impuesto) * 0.16;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = 0;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.ieps_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n\r\n  return {\r\n    ...precios,\r\n    iva_activo: name === \"iva_activo\" ? value : precios.iva_activo,\r\n    iva: name === \"iva\" ? parseFloat(value) : value ? 16 : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\nexport const calcular_ieps = (input, name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"ieps_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      ieps = parseFloat(precio_sin_impuesto) * precios.ieps;\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      ieps = 0;\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.iva_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n  return {\r\n    ...precios,\r\n    ieps_activo: name === \"ieps_activo\" ? value : precios.ieps_activo,\r\n    ieps: name === \"ieps\" ? parseFloat(value) : value ? precios.ieps : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\n/* export const calcular_precios = (\r\n  input,\r\n  name,\r\n  value,\r\n  precios,\r\n  preciosP,\r\n  unidadVentaXDefecto\r\n) => {\r\n  \r\n    return \"hola piter\"\r\n\r\n  //retornar todo array de precios, preciosP y unidades de venta\r\n}; */\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  TextField,\r\n  MenuItem,\r\n  FormHelperText,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, FormControl, Select } from \"@material-ui/core\";\r\nimport PreciosDeCompra from \"./UnidadesVenta\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport PreciosDeVenta from \"./Precios\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\nimport { calcular_ieps, calcular_iva } from \"../calculos_precios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(0)}px ${theme.spacing(1)}px`,\r\n  },\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoAdidional() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    preciosP,\r\n    update,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* CHECKBOX IVA */\r\n  const obtenerIva = async (e) => {\r\n    if (e.target.name === \"iva\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        iva: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"iva_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_iva(\"iva\", name, value, precios, preciosP, unidadVentaXDefecto);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto)\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto)\r\n    setPrecios(result);\r\n  };\r\n\r\n  /* CHECKBOX IEPS */\r\n  const obtenerIeps = async (e) => {\r\n    if (e.target.name === \"ieps\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        ieps: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"ieps_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_ieps(\"ieps\", name, value, precios, preciosP, unidadVentaXDefecto);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto)\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto)\r\n    setPrecios(result);\r\n  };\r\n\r\n  const [precioConImpuesto, setPrecioConImpuesto] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuesto, setPrecioSinImpuesto] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [PCI] = useDebounce(precioConImpuesto, 800);\r\n  const [PSI] = useDebounce(precioSinImpuesto, 800);\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioConImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let total_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio con impuesto */\r\n    precio_con_impuesto = parseFloat(value);\r\n    total_impuesto =\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva) +\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_sin_impuesto = parseFloat(value) / parseFloat(total_impuesto + 1);\r\n    iva =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioSinImpuesto(parseFloat(precio_sin_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioSinImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio sin impuesto */\r\n    precio_sin_impuesto = parseFloat(value);\r\n    iva =\r\n      parseFloat(value) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(value) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    if (!precios.iva_activo && !precios.ieps_activo) {\r\n      precio_con_impuesto = precio_sin_impuesto /*  / precios.unidad_de_compra.cantidad */;\r\n      precio_unitario_con_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    }\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioConImpuesto(parseFloat(precio_con_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE UNIDAD DE COMPRA */\r\n  const obtenerUnidadCompra = (e, child) => {\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        let precio = unidadVentaXDefecto.cantidad * unidadVentaXDefecto.precio;\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad,\r\n          unidad,\r\n        });\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad,\r\n            codigo_unidad,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: unidad,\r\n            codigo_unidad,\r\n          },\r\n        });\r\n      } else {\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: e.target.value,\r\n          cantidad: 1,\r\n          precio: preciosP[0].precio_neto\r\n            ? preciosP[0].precio_neto\r\n            : precios.unidad_de_compra.precio_unitario_con_impuesto,\r\n        });\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: e.target.value,\r\n            cantidad: 1,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: e.target.value,\r\n          },\r\n        });\r\n      }\r\n    } else {\r\n      if (!precios.iva_activo && !precios.ieps_activo) {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      } else {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_con_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      }\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        cantidad:\r\n          precios.unidad_de_compra.unidad !== \"Caja\" ||\r\n          precios.unidad_de_compra.unidad !== \"Costal\"\r\n            ? 1\r\n            : parseFloat(e.target.value),\r\n      });\r\n    }\r\n  };\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    if (!value) {\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioConImpuesto(PCI);\r\n  }, [PCI]);\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioSinImpuesto(PSI);\r\n  }, [PSI]);\r\n\r\n  return (\r\n    <Box>\r\n      <div className={classes.input}>\r\n        <Box>\r\n          <Typography>\r\n            <b>Impuestos</b>\r\n          </Typography>\r\n        </Box>\r\n        <Divider />\r\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" my={1}>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={precios.iva_activo}\r\n                onChange={obtenerIva}\r\n                name=\"iva_activo\"\r\n              />\r\n            }\r\n            label=\"IVA\"\r\n          />\r\n          <Box>\r\n            <TextField\r\n              disabled={!precios.iva_activo}\r\n              label=\"porcentaje IVA\"\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: { min: 0 },\r\n                endAdornment: (\r\n                  <InputAdornment position=\"start\">%</InputAdornment>\r\n                ),\r\n              }}\r\n              size=\"small\"\r\n              name=\"iva\"\r\n              id=\"form-producto-iva\"\r\n              variant=\"outlined\"\r\n              value={precios.iva}\r\n              onChange={obtenerIva}\r\n              onBlur={() => verificarCampoVacio(\"iva\", precios.iva)}\r\n              error={precios.iva === \"\"}\r\n            />\r\n          </Box>\r\n          <Box mx={5} />\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={precios.ieps_activo}\r\n                onChange={obtenerIeps}\r\n                name=\"ieps_activo\"\r\n              />\r\n            }\r\n            label=\"IEPS\"\r\n          />\r\n          <Box>\r\n            <TextField\r\n              disabled={!precios.ieps_activo}\r\n              label=\"porcentaje IEPS\"\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: { min: 0 },\r\n                endAdornment: (\r\n                  <InputAdornment position=\"start\">%</InputAdornment>\r\n                ),\r\n              }}\r\n              size=\"small\"\r\n              name=\"ieps\"\r\n              id=\"form-producto-ieps\"\r\n              variant=\"outlined\"\r\n              value={precios.ieps}\r\n              onChange={obtenerIeps}\r\n              onBlur={() => verificarCampoVacio(\"ieps\", precios.ieps)}\r\n              error={precios.ieps === \"\"}\r\n            />\r\n          </Box>\r\n          <Box display=\"flex\" alignItems=\"center\" ml={1}>\r\n            <Alert severity=\"info\">Selecciona los impuestos aplicables</Alert>\r\n          </Box>\r\n        </Box>\r\n        <Box mt={3}>\r\n          <Typography>\r\n            <b>Precios y unidad de compra</b>\r\n          </Typography>\r\n        </Box>\r\n        <Divider />\r\n        <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n          <Box>\r\n            <Typography>Unidad de compra</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !precios.unidad_de_compra.unidad}\r\n              >\r\n                {precios.granel ? (\r\n                  <Select\r\n                    disabled={update}\r\n                    id=\"form-producto-categoria\"\r\n                    name=\"unidad\"\r\n                    value={precios.unidad_de_compra.unidad}\r\n                    onChange={obtenerUnidadCompra}\r\n                  >\r\n                    {unitCodes_granel.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                ) : (\r\n                  <Select\r\n                    disabled={update}\r\n                    id=\"form-producto-categoria\"\r\n                    name=\"unidad\"\r\n                    value={precios.unidad_de_compra.unidad}\r\n                    onChange={obtenerUnidadCompra}\r\n                  >\r\n                    {unitCodes.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                <FormHelperText>{validacion.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n          <Box>\r\n            <Typography align=\"center\">Unidad de conversion</Typography>\r\n            <Typography align=\"center\" variant=\"h6\">\r\n              <b>\r\n                {precios.unidad_de_compra.unidad === \"Caja\"\r\n                  ? \"Pz\"\r\n                  : precios.unidad_de_compra.unidad === \"Costal\"\r\n                  ? \"Kg\"\r\n                  : precios.unidad_de_compra.unidad}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <span className=\"obligatorio\">* </span>Factor por Unidad\r\n            </Typography>\r\n            <TextField\r\n              disabled={\r\n                precios.unidad_de_compra.unidad === \"Caja\" ||\r\n                precios.unidad_de_compra.unidad === \"Costal\"\r\n                  ? false\r\n                  : true\r\n              }\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 1 } }}\r\n              size=\"small\"\r\n              error={validacion.error && !precios.unidad_de_compra.cantidad}\r\n              name=\"cantidad\"\r\n              id=\"form-producto-cantidad\"\r\n              variant=\"outlined\"\r\n              value={precios.unidad_de_compra.cantidad}\r\n              helperText={validacion.message}\r\n              onChange={obtenerUnidadCompra}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <span className=\"obligatorio\">* </span>Precio sin impuestos\r\n            </Typography>\r\n            <TextField\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              error={validacion.error && !precioSinImpuesto}\r\n              name=\"precio_sin_impuesto\"\r\n              id=\"form-producto-precio_sin_impuesto\"\r\n              variant=\"outlined\"\r\n              value={precioSinImpuesto}\r\n              helperText={validacion.message}\r\n              onChange={(e) => setPrecioSinImpuesto(e.target.value)}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <span className=\"obligatorio\">* </span>Precio con impuestos\r\n            </Typography>\r\n            <TextField\r\n              disabled={!precios.iva_activo && !precios.ieps_activo}\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              error={validacion.error && !precioConImpuesto}\r\n              name=\"precio_con_impuesto\"\r\n              id=\"form-producto-precio_con_impuesto\"\r\n              variant=\"outlined\"\r\n              value={precioConImpuesto}\r\n              helperText={validacion.message}\r\n              onChange={(e) => setPrecioConImpuesto(e.target.value)}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n          <Box width=\"120px\">\r\n            <Typography align=\"center\">IVA</Typography>\r\n            <Typography align=\"center\" variant=\"h6\">\r\n              <b>$ {parseFloat(precios.precio_de_compra.iva).toFixed(2)}</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box width=\"120px\">\r\n            <Typography align=\"center\">IEPS</Typography>\r\n            <Typography align=\"center\" variant=\"h6\">\r\n              <b>$ {parseFloat(precios.precio_de_compra.ieps).toFixed(2)}</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography align=\"center\">\r\n              Precio unitario sin impuestos\r\n            </Typography>\r\n            <Typography align=\"center\" variant=\"h6\">\r\n              <b>\r\n                ${\" \"}\r\n                {parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                ).toFixed(2)}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography align=\"center\">\r\n              Precio unitario con impuestos\r\n            </Typography>\r\n            <Typography align=\"center\" variant=\"h6\">\r\n              <b>\r\n                ${\" \"}\r\n                {parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_con_impuesto\r\n                ).toFixed(2)}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box mt={1}>\r\n          <Typography>\r\n            <b>Precios de venta</b>\r\n          </Typography>\r\n        </Box>\r\n        <Divider />\r\n        <Box display=\"flex\">\r\n          <PreciosDeVenta /* key={index} data={res} index={index} */ />\r\n          {/* {preciosP.map((res, index) => (\r\n            \r\n          ))} */}\r\n        </Box>\r\n        <Box mt={2}>\r\n          <Typography>\r\n            <b>Unidades de venta</b>\r\n          </Typography>\r\n        </Box>\r\n        <Divider />\r\n        <Box>\r\n          <PreciosDeCompra />\r\n        </Box>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\nimport { initial_state_precios } from \"../Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport const ComprasContext = createContext();\r\n\r\nexport const ComprasProvider = ({ children }) => {\r\n  const [datosProducto, setDatosProducto] = useState({\r\n    producto: {},\r\n    costo: 0,\r\n    cantidad: 1,\r\n    cantidad_regalo: 0,\r\n    unidad_regalo: \"\",\r\n    cantidad_total: 0,\r\n    descuento_porcentaje: 0,\r\n    descuento_precio: 0,\r\n    iva_total: 0,\r\n    ieps_total: 0,\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    mantener_precio: true,\r\n    subtotal_descuento: 0,\r\n    total_descuento: 0,\r\n  });\r\n\r\n  const [datosCompra, setDatosCompra] = useState({\r\n    productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n  });\r\n\r\n  const [preciosVenta, setPreciosVenta] = useState([\r\n    {\r\n      numero_precio: 1,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 2,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 3,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 4,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 5,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 6,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n  ]);\r\n\r\n  const [productoOriginal, setProductoOriginal] = useState({\r\n    precios: initial_state_precios,\r\n  });\r\n  const [productosCompra, setProductosCompra] = useState([]);\r\n  const [isEditing, setIsEditing] = useState({});\r\n  const [editFinish, setEditFinish] = useState(false);\r\n  const [costo, setCosto] = useState(0);\r\n  const [cantidad, setCantidad] = useState(1);\r\n  const [issue, setIssue] = useState(false);\r\n  const [loadingProductos, setLoadingProductos] = useState(false);\r\n\r\n  const [descuentoCompra, setDescuentoCompra] = useState({\r\n    subtotal: 0,\r\n    total: 0,\r\n    descuento_aplicado: false,\r\n    porcentaje: 0,\r\n    cantidad_descontada: 0,\r\n    precio_con_descuento: 0,\r\n  });\r\n\r\n  return (\r\n    <ComprasContext.Provider\r\n      value={{\r\n        datosProducto,\r\n        setDatosProducto,\r\n        productosCompra,\r\n        setProductosCompra,\r\n        datosCompra,\r\n        setDatosCompra,\r\n        productoOriginal,\r\n        setProductoOriginal,\r\n        preciosVenta,\r\n        setPreciosVenta,\r\n        isEditing,\r\n        setIsEditing,\r\n        editFinish,\r\n        setEditFinish,\r\n        costo,\r\n        setCosto,\r\n        cantidad,\r\n        setCantidad,\r\n        issue,\r\n        setIssue,\r\n        loadingProductos,\r\n        setLoadingProductos,\r\n        descuentoCompra,\r\n        setDescuentoCompra,\r\n      }}\r\n    >\r\n      {children}\r\n    </ComprasContext.Provider>\r\n  );\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { alpha } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) {\r\n  const classes = useStyles();\r\n  const { presentaciones, setPresentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  /* useEffect(() => {\r\n    let nuevo_array = [];\r\n    mostrar_presentaciones.forEach((element) => {\r\n      let obj = {\r\n        codigo_barras: element.codigo_barras,\r\n        cantidad: parseFloat(element.cantidad),\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        color: element.color,\r\n        existencia: element.existencia,\r\n        medida: element.medida,\r\n        nombre_comercial: element.nombre_comercial,\r\n      };\r\n\r\n      if (element.descuento_activo === true) {\r\n        obj.aplicar_descuento = true;\r\n        obj.precio = parseFloat(element.descuento.precio_neto);\r\n      } else {\r\n        obj.aplicar_descuento = false;\r\n        obj.precio = parseFloat(element.precio);\r\n      }\r\n      nuevo_array.push(obj);\r\n    });\r\n    setPresentaciones(nuevo_array);\r\n  }, []); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                {!withoutPrice ? (\r\n                  <Fragment>\r\n                    <TableCell>Precio</TableCell>\r\n                    <TableCell padding=\"checkbox\">Aplicar descuento</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                {!onlyPrice ? (\r\n                  <Fragment>\r\n                    {from && from === \"compra\" ? (\r\n                      <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                    ) : null}\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                    withoutPrice={withoutPrice}\r\n                    onlyPrice={onlyPrice}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios, unidadVentaXDefecto, setUnidadVentaXDefecto } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_element_presentacion_descuento = {\r\n    ...copy_presentaciones[index].descuento,\r\n  };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.cantidad_nueva) {\r\n      copy_element_presentacion.cantidad_nueva = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      if (value === \"0\") {\r\n        copy_element_presentacion.existencia = false;\r\n      } else {\r\n        copy_element_presentacion.existencia = true;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n    } else if (name === \"cantidad_nueva\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad_nueva = \"\";\r\n        copy_element_presentacion.existencia = copy_producto.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad_nueva = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = precios;\r\n      let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n      let iva_precio = parseFloat((precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)).toFixed(2));\r\n      let ieps_precio = parseFloat((precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)).toFixed(2));\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n      \r\n\r\n      let {descuento_activo, descuento} = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          (precio_con_descuento).toFixed(2)\r\n        );\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n        copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n      }\r\n      copy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n      copy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n      copy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n      copy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n      copy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.descuento_activo = value;\r\n\r\n    let precio_con_descuento = 0;\r\n    let { iva, ieps } = precios;\r\n    let {descuento, precio} = copy_element_presentacion;\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio / (suma + 1)).toFixed(2));\r\n\r\n    if(value){\r\n      let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n    }else{\r\n      precio_con_descuento = precio\r\n    }\r\n    \r\n    copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n      (precio_con_descuento).toFixed(2)\r\n    );\r\n    /* copy_element_presentacion.precio = parseFloat(value); */\r\n    copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n  \r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              presentaciones.length > 0 && !copy_producto.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {presentaciones.length === 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : presentaciones.length > 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      {!withoutPrice ? (\r\n        <Fragment>\r\n          <TableCell width={110} className={classes.input}>\r\n            <Input\r\n              inputRef={textfield}\r\n              onChange={(e) => obtenerDatos(e)}\r\n              disabled={disabledInput}\r\n              value={copy_producto.precio}\r\n              type=\"number\"\r\n              name=\"precio\"\r\n            />\r\n          </TableCell>\r\n          <TableCell width={200}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              {copy_producto.descuento_activo !== undefined &&\r\n              copy_producto.descuento_activo !== null ? (\r\n                <Fragment>\r\n                  <Checkbox\r\n                    checked={\r\n                      copy_producto.descuento_activo === true\r\n                        ? copy_producto.descuento_activo\r\n                        : false\r\n                    }\r\n                    onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                    icon={<LocalOfferOutlined />}\r\n                    checkedIcon={<LocalOffer />}\r\n                    inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                    color=\"primary\"\r\n                    disabled={copy_producto.descuento_activo === null}\r\n                  />\r\n                  <Typography\r\n                    color={\r\n                      copy_producto.descuento_activo === true\r\n                        ? \"primary\"\r\n                        : \"textSecondary\"\r\n                    }\r\n                  >\r\n                    %\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.porciento\r\n                        : 0\r\n                    )}{\" \"}\r\n                    $\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.precio_neto\r\n                        : 0\r\n                    )}\r\n                  </Typography>\r\n                </Fragment>\r\n              ) : null}\r\n            </Box>\r\n          </TableCell>\r\n        </Fragment>\r\n      ) : null}\r\n      {!onlyPrice ? (\r\n        <Fragment>\r\n          {from && from === \"compra\" ? (\r\n            <Fragment>\r\n              <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n              <TableCell padding=\"checkbox\">\r\n                <Input\r\n                  inputRef={textfield}\r\n                  onChange={(e) => obtenerDatos(e)}\r\n                  disabled={disabledInput}\r\n                  value={copy_producto.cantidad_nueva}\r\n                  type=\"tel\"\r\n                  name=\"cantidad_nueva\"\r\n                />\r\n              </TableCell>\r\n            </Fragment>\r\n          ) : (\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.cantidad}\r\n                type=\"tel\"\r\n                name=\"cantidad\"\r\n              />\r\n            </TableCell>\r\n          )}\r\n        </Fragment>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FormularioPrecios from \"../../../Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport { Close, LocalAtm, SquareFoot } from \"@material-ui/icons\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { CircularProgress, DialogTitle } from \"@material-ui/core\";\r\nimport TablaPresentaciones from \"../../../Catalogos/Producto/TallasColores/TablaPresentaciones\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      style={{ height: \"80vh\" }}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function AlertDialogSlide({ agregarCompra, handleClose, cargando }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const { datosProducto, productoOriginal /* setDatosProducto */ } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    setUnidadesVenta,\r\n    setPreciosP,\r\n    setUnidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  const resetProducto = () => {\r\n    /* SET STATES WHEN UPDATING */\r\n    const { precios_producto, ...new_precios } = productoOriginal.precios;\r\n    const unidadxdefecto = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default\r\n    );\r\n    /* setDatosProducto({...datosProducto, mantener_precio: true}) */\r\n    setPrecios(new_precios);\r\n    setUnidadesVenta(productoOriginal.unidades_de_venta);\r\n    setPreciosP(productoOriginal.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    toggleDrawer();\r\n  };\r\n\r\n  const actualizarContextProducto = () => {\r\n    toggleDrawer();\r\n    let precio_unitario_con_impuesto =\r\n      datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n    let precio_unitario_sin_impuesto =\r\n      precios.precio_de_compra.precio_sin_impuesto /\r\n      precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_con_impuesto: datosProducto.costo,\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(6)\r\n        ),\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(6)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        onClick={() => actualizarContextProducto()}\r\n      >\r\n        Actualizar precios\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => resetProducto()}\r\n        aria-labelledby=\"alert-precios-compra-title\"\r\n        aria-describedby=\"alert-precios-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n          <DialogTitle style={{ padding: 0 }}>\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab label=\"Precios\" icon={<LocalAtm />} {...a11yProps(0)} />\r\n                <Tab\r\n                  label=\"Precios Medidas\"\r\n                  icon={<SquareFoot />}\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n            </AppBar>\r\n          </DialogTitle>\r\n        ) : null}\r\n        <DialogContent>\r\n          {datosProducto.producto.datos_generales &&\r\n          datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n            <div>\r\n              <TabPanel value={value} index={0}>\r\n                <FormularioPrecios />\r\n              </TabPanel>\r\n              <TabPanel value={value} index={1}>\r\n                <TablaPresentaciones\r\n                  from=\"compras\"\r\n                  datos={datosProducto.producto}\r\n                  setOnUpdate={setOnUpdate}\r\n                  onUpdate={onUpdate}\r\n                  onlyPrice={true}\r\n                />\r\n              </TabPanel>\r\n            </div>\r\n          ) : (\r\n            <FormularioPrecios />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => resetProducto()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => {\r\n              /* setDatosProducto({...datosProducto, mantener_precio: false}) */\r\n              agregarCompra(\"actualizar_precios\");\r\n              handleClose();\r\n              toggleDrawer();\r\n            }}\r\n            startIcon={cargando ? <CircularProgress color=\"inherit\" size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            disabled={!precios.precio_de_compra.precio_con_impuesto}\r\n          >\r\n            Aceptar y agregar compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONSULTAS = gql`\r\n  query obtenerConsultasProducto($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultasProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      categorias {\r\n        _id\r\n        categoria\r\n        subcategorias {\r\n          _id\r\n          subcategoria\r\n        }\r\n      }\r\n      departamentos {\r\n        _id\r\n        nombre_departamentos\r\n      }\r\n      marcas {\r\n        _id\r\n        nombre_marca\r\n      }\r\n      colores {\r\n        _id\r\n        nombre\r\n        hex\r\n      }\r\n      tallas {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      calzados {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      centro_costos {\r\n        _id\r\n        cuenta\r\n        subcuentas {\r\n          _id\r\n          subcuenta\r\n        }\r\n      }\r\n      codigos {\r\n        _id\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO = gql`\r\n  mutation crearProducto($input: CrearProductoInput) {\r\n    crearProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS = gql`\r\n  query obtenerProductos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $almacen: ID\r\n    $existencias: Boolean\r\n  ) {\r\n    obtenerProductos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      almacen: $almacen\r\n      existencias: $existencias\r\n    ) {\r\n      _id\r\n      centro_de_costos {\r\n        id_cuenta\r\n        cuenta\r\n        id_subcuenta\r\n        subcuenta\r\n      }\r\n      unidades_de_venta {\r\n        _id\r\n        precio\r\n        cantidad\r\n        unidad\r\n        codigo_unidad\r\n        unidad_principal\r\n        codigo_barras\r\n        id_producto\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        default\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      empresa\r\n      imagenes {\r\n        location_imagen\r\n        extencion_imagen\r\n        url_imagen\r\n        key_imagen\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          codigo_unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n          codigo_unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n        granel\r\n      }\r\n      medidas_producto {\r\n        _id\r\n        cantidad\r\n        almacen\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        codigo_barras\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        existencia\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        nombre_comercial\r\n        precio\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      inventario_general {\r\n        _id\r\n        cantidad_existente\r\n        unidad_inventario\r\n        codigo_unidad\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        id_almacen_general\r\n        eliminado\r\n      }\r\n      medidas_registradas\r\n      sucursal\r\n      usuario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_PRODUCTO = gql`\r\n  mutation actualizarProducto($id: ID!, $input: ActualizarProductoInput) {\r\n    actualizarProducto(id: $id, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_PRODUCTO = gql`\r\n  mutation eliminarProducto($id: ID!) {\r\n    eliminarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PRODUCTOS_ELIMINADOS = gql`\r\n  query obtenerProductosInactivos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerProductosInactivos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      producto {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n      }\r\n      cantidad_existente\r\n      unidad_de_inventario\r\n      id_almacen\r\n      eliminado\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTIVAR_PRODUCTOS = gql`\r\n  mutation activarProducto($id: ID!) {\r\n    activarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO_RAPIDO = gql`\r\n  mutation crearProductoRapido($input: CrearProductoRapidoInput) {\r\n    crearProductoRapido(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CrearAlmacenContext = createContext();\r\n\r\nexport const AlmacenProvider = ({ children }) => {\r\n\tconst [ datosAlmacen, setDatosAlmacen ] = useState({\r\n        nombre_almacen: '',\r\n        id_usuario_encargado: '',\r\n        direccion: {\r\n            calle: '',\r\n            no_ext: '',\r\n            no_int: '',\r\n            codigo_postal: '',\r\n            colonia: '',\r\n            municipio: '',\r\n            localidad: '',\r\n            estado: '',\r\n            pais: ''\r\n        }\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CrearAlmacenContext.Provider value={\r\n            { \r\n                datosAlmacen, \r\n                setDatosAlmacen,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CrearAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRO_ALMACEN = gql`\r\n  mutation CrearAlmacen($input: CrearAlmacen, $id: ID!, $empresa: ID!) {\r\n    crearAlmacen(input: $input, id: $id, empresa: $empresa) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_ALMACENES = gql`\r\n  query obtenerAlmacenes($id: ID!) {\r\n    obtenerAlmacenes(id: $id) {\r\n      _id\r\n      nombre_almacen\r\n      id_usuario_encargado {\r\n        _id\r\n        nombre\r\n      }\r\n      id_sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_ALMACEN = gql`\r\n  mutation ActualizarAlmacen($input: EditarAlmacen, $id: ID!) {\r\n    actualizarAlmacen(input: $input, id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_ALMACEN = gql`\r\n  query obtenerProductosAlmacenes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: FilterProductoInput\r\n  ) {\r\n    obtenerProductosAlmacenes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      existencia_almacenes {\r\n        _id {\r\n          producto\r\n          almacen {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n        }\r\n        cantidad_existente\r\n      }\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n  query obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      categoria\r\n      subcategorias {\r\n        _id\r\n        subcategoria\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REALIZAR_TRASPASO = gql`\r\n  mutation CrearTraspaso(\r\n    $input: CrearTraspasoInput\r\n    $usuario: ID!\r\n    $empresa: ID!\r\n  ) {\r\n    crearTraspaso(input: $input, usuario: $usuario, empresa: $empresa) {\r\n      message\r\n      resp\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_EMPRESA = gql`\r\n  query obtenerProductosPorEmpresa($empresa: ID!) {\r\n    obtenerProductosPorEmpresa(empresa: $empresa) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          unidad_mayoreo\r\n          utilidad\r\n          ieps_precio\r\n          iva_precio\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n        }\r\n        granel\r\n      }\r\n      sucursal\r\n      usuario\r\n      empresa\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TRASPASOS = gql`\r\n  query obtenerTraspasos( $input: ConsultaTraspasosInput) {\r\n    obtenerTraspasos(input: $input) {\r\n      _id  \r\n      cantidad\r\n      \r\n      id_traspaso{\r\n        concepto_traspaso{\r\n          nombre_concepto\r\n        }\r\n        fecha_registro\r\n      }\r\n      producto{\r\n        datos_generales{\r\n          nombre_comercial\r\n        }\r\n      }\r\n      almacen_origen{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      almacen_destino{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    TextField,\r\n    Container,\r\n    Typography,\r\n    Box,\r\n    IconButton,\r\n    DialogTitle,\r\n    Divider,\r\n    FormControl,\r\n    Select,\r\n    MenuItem\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { REGISTRO_ALMACEN, ACTUALIZAR_ALMACEN } from '../../../../gql/Almacenes/Almacen';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport { Edit } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport Add from '@material-ui/icons/Add';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formInputFlex: {\r\n        display: 'flex',\r\n        '& > *': {\r\n            margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n        },\r\n        '& span': {\r\n            color: 'red'\r\n        }\r\n    },\r\n    formInput: {\r\n        margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n    }\r\n}));\r\n\r\nexport default function ContainerRegistroAlmacen({ accion, datos, refetch }) {\r\n\r\n    /* const sucursal = {\r\n        _id: \"60c8e180340d5d223432a916\",\r\n        nombre_sucursal: \"Sucursal 1 editada\"\r\n    }; */\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [CrearAlmacen] = useMutation(REGISTRO_ALMACEN);\r\n    const [ActualizarAlmacen] = useMutation(ACTUALIZAR_ALMACEN);\r\n    const { data } = useQuery(OBTENER_USUARIOS, {\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        }\r\n    });\r\n    let obtenerUsuarios = [];\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: '', status: '', open: false });\r\n    // const empresa = '609eb3b4b995884dc49bbffa';\r\n    const [open, setOpen] = useState(false);\r\n    const { datosAlmacen, setDatosAlmacen, error, setError, update, setUpdate } = useContext(CrearAlmacenContext);\r\n    const { almacen_inicial, setAlmacenInicial } = useContext(RegProductoContext);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    // const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const limpiarCampos = useCallback(\r\n        () => {\r\n            setDatosAlmacen({\r\n                nombre_almacen: '',\r\n                id_usuario_encargado: '',\r\n                direccion: {\r\n                    calle: '',\r\n                    no_ext: '',\r\n                    no_int: '',\r\n                    codigo_postal: '',\r\n                    colonia: '',\r\n                    municipio: '',\r\n                    localidad: '',\r\n                    estado: '',\r\n                    pais: ''\r\n                }\r\n            });\r\n        },\r\n        [setDatosAlmacen]\r\n    );\r\n    const toggleModal = () => {\r\n        setOpen(true);\r\n        if (datos) {\r\n            let input = {};\r\n            if (datos.id_usuario_encargado) {\r\n                const { id_usuario_encargado, ...datosNew } = datos;\r\n                input = datosNew;\r\n                input.id_usuario_encargado = id_usuario_encargado._id;\r\n            } else {\r\n                input = datos;\r\n            }\r\n            setDatosAlmacen(input);\r\n        }\r\n    };\r\n    const onCloseModal = () => {\r\n        setOpen(false);\r\n        limpiarCampos();\r\n    };\r\n\r\n    const obtenerCampos = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const obtenerCamposDireccion = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            direccion: { ...datosAlmacen.direccion, [e.target.name]: e.target.value }\r\n        });\r\n    };\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if (!datosAlmacen.nombre_almacen) {\r\n                setError(true);\r\n                return;\r\n            } else {\r\n                if (accion === \"registrar\") {\r\n                    let input = {};\r\n                    let almacen_creado;\r\n                    if (datosAlmacen.id_usuario_encargado === \"\") {\r\n                        const { id_usuario_encargado, ...input } = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    } else {\r\n                        input = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    const id_almacen = almacen_creado.data.crearAlmacen._id;\r\n                    if (refetch) {\r\n                        setAlmacenInicial({\r\n                            ...almacen_inicial,\r\n                            id_almacen,\r\n                            almacen: datosAlmacen.nombre_almacen,\r\n                        })\r\n                        refetch();\r\n                    }\r\n                } else {\r\n                    const { id_sucursal, _id, ...input } = datosAlmacen;\r\n                    await ActualizarAlmacen({\r\n                        variables: {\r\n                            input,\r\n                            id: datosAlmacen._id\r\n                        }\r\n                    })\r\n                }\r\n                setUpdate(!update);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n                setLoading(false);\r\n                onCloseModal();\r\n            }\r\n        } catch (error) {\r\n            setAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    if (data) {\r\n        obtenerUsuarios = data.obtenerUsuarios;\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            {accion === 'registrar' ? refetch ? (\r\n                <IconButton color=\"primary\" onClick={toggleModal}>\r\n                    <Add />\r\n                </IconButton>\r\n            ) : (\r\n                <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={toggleModal}>\r\n                    Nuevo almacen\r\n                </Button>\r\n            ) : (\r\n                <IconButton onClick={toggleModal}>\r\n                    <Edit />\r\n                </IconButton>\r\n            )}\r\n            <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"form-dialog-title\">Registro almacen</DialogTitle>\r\n                <Container maxWidth=\"md\">\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography><span>* </span>Nombre Almacen</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                error={error}\r\n                                name=\"nombre_almacen\"\r\n                                id=\"form-producto-codigo-barras\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.nombre_almacen}\r\n                                /* helperText=\"Incorrect entry.\" */\r\n                                onChange={obtenerCampos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Encargado de almacen</Typography>\r\n                            <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                                <Select\r\n                                    labelId=\"demo-simple-select-label\"\r\n                                    id=\"demo-simple-select\"\r\n                                    name=\"id_usuario_encargado\"\r\n                                    value={datosAlmacen.id_usuario_encargado ? datosAlmacen.id_usuario_encargado : \"\"}\r\n                                    onChange={obtenerCampos}\r\n                                >\r\n                                    {\r\n                                        obtenerUsuarios?.map((user, index) => (\r\n                                            <MenuItem key={index} value={user._id}>{user.nombre}</MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Sucursal</Typography>\r\n                            <Typography style={{ marginTop: \"7px\", fontWeight: \"bold\" }}>{sesion.sucursal.nombre_sucursal}</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <Box mt={2}>\r\n                        <Typography>\r\n                            <b>Domicilio</b>\r\n                        </Typography>\r\n                        <Divider />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Calle</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.calle}\r\n                                name=\"calle\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.calle}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>No. exterior</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_ext}\r\n                                name=\"no_ext\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_ext}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>No. interior</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_int}\r\n                                name=\"no_int\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_int}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Codigo Postal</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                type=\"number\"\r\n                                // error={error && !datosAlmacen.direccion.codigo_postal}\r\n                                name=\"codigo_postal\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.codigo_postal}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Colonia</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.colonia}\r\n                                name=\"colonia\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.colonia}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Municipio</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.municipio}\r\n                                name=\"municipio\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.municipio}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Localidad</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.localidad}\r\n                                name=\"localidad\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.localidad}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Estado</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.estado}\r\n                                name=\"estado\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.estado}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Pais</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                //  error={error && !datosAlmacen.direccion.pais}\r\n                                name=\"pais\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.pais}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={saveData} >\r\n                            Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Container>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_COLOR = gql`\r\n\tmutation crearColor($input: CrearColorInput) {\r\n\t\tcrearColor(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_COLORES = gql`\r\n\tquery obtenerColores($sucursal: String!) {\r\n\t\tobtenerColores(sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_COLOR = gql`\r\n\tmutation actualizarColor($input: ActualizarColorInput, $id: ID!) {\r\n\t\tactualizarColor(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_COLOR = gql`\r\n\tmutation eliminarColor($id: ID!) {\r\n\t\teliminarColor(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_COLOR } from \"../../../../../gql/Catalogos/colores\";\r\n\r\nexport default function CrearColorProducto({ refetch }) {\r\n  const [color, setColor] = useState({});\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      return;\r\n    }\r\n    try {\r\n      const colores = values;\r\n      await crearColor({\r\n        variables: {\r\n          input: {\r\n            nombre: colores.nombre,\r\n            hex: colores.hex,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add />\r\n          nuevo color\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        /* onClose={() => toggleModal()} */\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box mt={2}>\r\n              <Typography>Color seleccionado:</Typography>\r\n              {!values.hex ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n                  <Typography color=\"secondary\">NINGUNO</Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box bgcolor={values.hex} height={30} width={220} />\r\n              )}\r\n            </Box>\r\n            <Box my={2}>\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({\r\n                      ...values,\r\n                      nombre: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                  fullWidth\r\n                  focused\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_TALLAS = gql`\r\n\tmutation crearTalla($input: CrearTallaInput) {\r\n\t\tcrearTalla(input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_TALLAS = gql`\r\n\tquery obtenerTallas($sucursal: String!, $tipo: String! ) {\r\n\t\tobtenerTallas(sucursal: $sucursal, tipo: $tipo) {\r\n\t\t\t_id\r\n\t\t\ttalla\r\n\t\t\ttipo\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_TALLA = gql`\r\n\tmutation actualizarTalla($input: ActualizarTallaInput, $id: ID!) {\r\n\t\tactualizarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_TALLA = gql`\r\n\tmutation eliminarTalla($input: ActualizarTallaInput,$id: ID!) {\r\n\t\teliminarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_TALLAS } from \"../../../../../gql/Catalogos/tallas\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function CrearTallasProducto({\r\n  setMedidasSeleccionadas,\r\n  refetch,\r\n}) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = useContext(RegProductoContext);\r\n\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      await crearTalla({\r\n        variables: {\r\n          input: {\r\n            talla: nueva_talla,\r\n            tipo: datos_generales.tipo_producto,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setMedidasSeleccionadas([nueva_talla]);\r\n      setValue(\"\");\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add /> Nueva talla\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              my={2}\r\n            >\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  id=\"outlined-error-helper-text\"\r\n                  label={\r\n                    datos_generales.tipo_producto === \"ROPA\"\r\n                      ? \"Talla\"\r\n                      : \"Número\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  focused\r\n                  fullWidth\r\n                  value={value}\r\n                  onChange={(e) => setValue(e.target.value.toUpperCase())}\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useState, Fragment, useEffect, useCallback } from 'react';\r\nimport { Typography, MenuItem, Divider, Tooltip, FormLabel } from '@material-ui/core';\r\nimport { Box, FormControl, Grid, Select } from '@material-ui/core';\r\nimport { makeStyles, useTheme } from '@material-ui/core';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nimport { Done } from '@material-ui/icons';\r\nimport TablaPresentaciones from './TablaPresentaciones';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport { AlmacenProvider } from '../../../../../context/Almacenes/crearAlmacen';\r\nimport ContainerRegistroAlmacen from '../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from './crearColor';\r\nimport CrearTallasProducto from './crearTalla';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\theight: 50,\r\n\t\twidth: 50,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: '15%',\r\n\t\tcursor: 'pointer'\r\n\t}\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n\treturn Math.floor(Math.random() * (999999999999 - 100000000000 + 1) + 100000000000).toString();\r\n};\r\n\r\nexport default function ColoresTallas({ obtenerConsultasProducto, refetch, datos }) {\r\n\tconst {\r\n\t\talmacen_inicial,\r\n\t\tsetAlmacenInicial,\r\n\t\tpresentaciones,\r\n\t\tdatos_generales,\r\n\t} = useContext(RegProductoContext);\r\n\tconst { almacenes, colores, tallas, calzados } = obtenerConsultasProducto;\r\n\tconst [ medidasSeleccionadas, setMedidasSeleccionadas ] = useState([]);\r\n\tconst [ coloresSeleccionados, setColoresSeleccionados ] = useState([]);\r\n\tconst medidas = datos_generales.tipo_producto === 'ROPA' ? [ ...tallas ] : [ ...calzados ];\r\n\tconst [ onUpdate, setOnUpdate ] = useState([]);\r\n\r\n\tconst obtenerColoresSeleccinados = useCallback(\r\n\t\t() => {\r\n\t\t\tlet colors = [];\r\n\t\t\tlet medidas = [];\r\n\t\t\tconst copy_presentaciones = [ ...presentaciones ];\r\n\r\n\t\t\tcopy_presentaciones.forEach((element) => {\r\n\t\t\t\tif (element.color._id) colors.push(element.color);\r\n\t\t\t\tif (element.medida._id) medidas.push(element.medida);\r\n\t\t\t});\r\n\r\n\t\t\tvar hashColor = {};\r\n\t\t\tvar hashMedida = {};\r\n\t\t\tconst colores_existentes = colors.filter((color) => {\r\n\t\t\t\tvar existColor = !hashColor[color._id];\r\n\t\t\t\thashColor[color._id] = true;\r\n\t\t\t\treturn existColor;\r\n\t\t\t});\r\n\t\t\tconst medidas_existentes = medidas.filter((medida) => {\r\n\t\t\t\tvar existMedida = !hashMedida[medida._id];\r\n\t\t\t\thashMedida[medida._id] = true;\r\n\t\t\t\treturn existMedida;\r\n\t\t\t});\r\n\r\n\t\t\tsetColoresSeleccionados([ ...colores_existentes ]);\r\n\t\t\tsetMedidasSeleccionadas([ ...medidas_existentes ]);\r\n\t\t},\r\n\t\t[ presentaciones ]\r\n\t);\r\n\r\n\tconst obtenerAlmacenes = (event, child) => {\r\n\t\tsetAlmacenInicial({\r\n\t\t\t...almacen_inicial,\r\n\t\t\t[event.target.name]: event.target.value,\r\n\t\t\t[child.props.name]: child.props.id\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tobtenerColoresSeleccinados();\r\n\t\t},\r\n\t\t[ obtenerColoresSeleccinados ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={9}>\r\n\t\t\t\t\t<TablaPresentaciones datos={datos} setOnUpdate={setOnUpdate} onUpdate={onUpdate} />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={3}>\r\n\t\t\t\t\t{!datos.medidas_registradas ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<Box width=\"100%\" mb={2}>\r\n\t\t\t\t\t\t\t\t<Typography>Almacen</Typography>\r\n\t\t\t\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tdisabled={presentaciones.length === 0}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"almacen\"\r\n\t\t\t\t\t\t\t\t\t\terror={presentaciones.length > 0 && !almacen_inicial.almacen}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"almacen\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={almacen_inicial.almacen}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={obtenerAlmacenes}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<em>Seleccione uno</em>\r\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t{almacenes ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\talmacenes.map((res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"id_almacen\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={res._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={res.nombre_almacen}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={res._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{res.nombre_almacen}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t{presentaciones.length > 0 && !almacen_inicial.almacen ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<FormLabel>* Campo obligatorio</FormLabel>\r\n\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t<AlmacenProvider>\r\n\t\t\t\t\t\t\t\t\t\t<ContainerRegistroAlmacen accion=\"registrar\" refetch={refetch} />\r\n\t\t\t\t\t\t\t\t\t</AlmacenProvider>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmy={2}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>{datos_generales.tipo_producto === 'ROPA' ? 'Talla' : 'Número'}</Typography>\r\n\t\t\t\t\t\t<CrearTallasProducto setMedidasSeleccionadas={setMedidasSeleccionadas} refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{medidas.map((talla, index) => (\r\n\t\t\t\t\t\t\t\t<RenderTallas\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\ttalla={talla}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tsetMedidasSeleccionadas={setMedidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tdatos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmt={1}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>Color</Typography>\r\n\t\t\t\t\t\t<CrearColorProducto refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{colores.map((color, index) => (\r\n\t\t\t\t\t\t\t\t<Colores\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tsetColoresSeleccionados={setColoresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tdatos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderTallas = ({\r\n\ttalla,\r\n\tcoloresSeleccionados,\r\n\tmedidasSeleccionadas,\r\n\tsetMedidasSeleccionadas,\r\n\tdatos\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { setPresentaciones, presentaciones, datos_generales, preciosP } = useContext(RegProductoContext);\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\tconst seleccionarMedidas = useCallback(\r\n\t\t() => {\r\n\t\t\tmedidasSeleccionadas.forEach((res) => {\r\n\t\t\t\tif (res._id === talla._id) setSelected(true);\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ talla._id, medidasSeleccionadas ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (datos.medidas_registradas) {\r\n\t\t\t\treturn seleccionarMedidas();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ seleccionarMedidas ]\r\n\t);\r\n\r\n\tconst handleAddTallas = (value) => {\r\n\t\tconst medidas_seleccionadas_temp = [ ...medidasSeleccionadas ];\r\n\r\n\t\tif (!selected) {\r\n\t\t\tmedidas_seleccionadas_temp.push(talla);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tmedidas_seleccionadas_temp.forEach((res, index) => {\r\n\t\t\t\tif (res._id === talla._id) {\r\n\t\t\t\t\tmedidas_seleccionadas_temp.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\r\n\t\tif (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!coloresSeleccionados.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.medida._id === producto_medida._id);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length === 1 && value) {\r\n\t\t\t/* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: medidas_seleccionadas_temp[k],\r\n\t\t\t\t\t\tcolor: array_medidad_finales[i].color,\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length > 0) {\r\n\t\t\t/* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tconst producto_color = coloresSeleccionados[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && !medidas_seleccionadas_temp.length) {\r\n\t\t\t/* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.medida._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: objeto_presentaciones_final.color,\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetMedidasSeleccionadas([ ...medidas_seleccionadas_temp ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\tonClick={() => handleAddTallas(!selected)}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tselected ? (\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: theme.palette.primary.main\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(selected ? theme.palette.primary.main : '#FFFFFF'),\r\n\t\t\t\t\t\tfontSize: 16\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{talla.talla}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Colores = ({ color, coloresSeleccionados, setColoresSeleccionados, medidasSeleccionadas, datos }) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { presentaciones, setPresentaciones, datos_generales, preciosP } = useContext(RegProductoContext);\r\n\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\tconst seleccionarColores = useCallback(\r\n\t\t() => {\r\n\t\t\tcoloresSeleccionados.forEach((res) => {\r\n\t\t\t\tif (res._id === color._id) setSelected(true);\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ color._id, coloresSeleccionados ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (datos.medidas_registradas) {\r\n\t\t\t\treturn seleccionarColores();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ seleccionarColores ]\r\n\t);\r\n\r\n\tconst obtenerColores = (value) => {\r\n\t\tif (!selected) {\r\n\t\t\tcoloresSeleccionados.push(color);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tcoloresSeleccionados.forEach((res, index) => {\r\n\t\t\t\tif (res._id === color._id) {\r\n\t\t\t\t\tcoloresSeleccionados.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\r\n\t\tif (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: {},\r\n\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!medidasSeleccionadas.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.color._id === producto_color._id);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length === 1 && value) {\r\n\t\t\t/* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: array_medidad_finales[i].medida,\r\n\t\t\t\t\t\tcolor: coloresSeleccionados[k],\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length > 0) {\r\n\t\t\t/* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tfor (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n\t\t\t\t\tconst producto_medida = medidasSeleccionadas[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && !coloresSeleccionados.length) {\r\n\t\t\t/* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.color._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: objeto_presentaciones_final.medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetColoresSeleccionados([ ...coloresSeleccionados ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<Tooltip title={color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: color.hex,\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(color.hex)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => obtenerColores(!selected)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{selected ? <Done /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { Button, CircularProgress, Tooltip } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Done, SquareFoot } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTAS } from \"../../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport TallasProducto from \"../../../Catalogos/Producto/TallasColores/TallasColores\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AlertDialogSlide({verificate, setVerificate}) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datosProducto, datosCompra, setLoadingProductos } = useContext(ComprasContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if(loading){\r\n      setLoadingProductos(true);\r\n    }else{\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        disabled={true}\r\n        startIcon={<CircularProgress size={16} color=\"inherit\" />}\r\n      >\r\n        Medidas\r\n      </Button>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const toggleDrawer = () => {\r\n    setOpen(!open);\r\n    setVerificate(false);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Selecciona medidas y colores\" disableHoverListener={true} open={verificate} placement=\"top\">\r\n        <Button\r\n          color={verificate ? \"secondary\" :\"inherit\"}\r\n          variant=\"outlined\"\r\n          size=\"medium\"\r\n          onClick={() => toggleDrawer()}\r\n          startIcon={<SquareFoot />}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n        >\r\n          Medidas\r\n        </Button>\r\n      </Tooltip>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={toggleDrawer}\r\n        aria-labelledby=\"alert-tallas-compra\"\r\n        aria-describedby=\"alert-tallas-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <DialogContent>\r\n          <TallasProducto\r\n            datos={datosProducto.producto}\r\n            obtenerConsultasProducto={obtenerConsultasProducto}\r\n            refetch={refetch}\r\n            from=\"compra\"\r\n            almacen={datosCompra.almacen}\r\n            withoutPrice={true}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import $ from \"jquery\"\r\nimport jQuery from \"jquery\"\r\n\r\nvar valuesFacturama = {\r\n    token: \"QUJTT0xVQ0lPTkVTOkxlb24yMDE4Iw==\",\r\n    url: \"https://apisandbox.facturama.mx/\"\r\n};\r\n\r\n$.ajaxSetup({\r\n    beforeSend: function (xhr) {\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" + valuesFacturama.token);\r\n    }\r\n});\r\n\r\nfunction facturama() {\r\n\r\n    var settings = {\r\n        url: valuesFacturama.url\r\n    };\r\n\r\n    function retrieve(path, id, callback) {\r\n        return jQuery.get(settings.url + path + '/' + id, undefined, callback, \"json\");\r\n    }\r\n\r\n    function list(path, callback) {\r\n        return jQuery.get(settings.url + path, undefined, callback, \"json\");\r\n    }\r\n\r\n    function listWithParam(path, param, callback) {\r\n        return jQuery.get(settings.url + path + param, undefined, callback, \"json\");\r\n    }\r\n\r\n    function postSyncWithParam(path, param, callback) {\r\n        $.ajax({\r\n            url: settings.url + path + param,\r\n            type: 'POST',\r\n            async: false,\r\n            success: callback\r\n        });\r\n    }\r\n\r\n    function postSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function putSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'PUT',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function deleteSyncWithParam(path, param, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path + '/' + param,\r\n            type: 'DELETE',\r\n            async: false,\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    var facturamaObject = {\r\n        Clients: {\r\n            Get: function (id, callback) {\r\n                return retrieve('client', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('client', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('client', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('client/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('client/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Products: {\r\n            Get: function (id, callback) {\r\n                return retrieve('product', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('product', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('product', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('product/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('product/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        BranchOffice: {\r\n            Get: function (id, callback) {\r\n                return retrieve('branchOffice', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('branchOffice', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('branchOffice', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('branchOffice', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('branchOffice/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Series: {\r\n            List: function (id, callback) {\r\n                return retrieve('serie', id, callback);\r\n            },\r\n            Create: function (idBranch, data, callback, callbackError) {\r\n                postSyncWithData('serie/' + idBranch, data, callback, callbackError);\r\n            },\r\n            Remove: function (idBranch, name, callback, callbackError) {\r\n                deleteSyncWithParam('serie/' + idBranch, name, callback, callbackError);\r\n            },\r\n            Update: function (idBranch, name, data, callback, callbackError) {\r\n                putSyncWithData('serie/' + idBranch + '/' + name, data, callback, callbackError);\r\n            }\r\n        },\r\n        Cfdi: {\r\n            Get: function (id, callback) {\r\n                return retrieve('cfdi', id, callback);\r\n            },\r\n            List: function (param, callback) {\r\n                return listWithParam('cfdi', param, callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('2/cfdis', data, callback, callbackError);\r\n            },\r\n            Send: function (param, callback) {\r\n                postSyncWithParam('cfdi', param, callback);\r\n            },\r\n            Cancel: function (params, callback, callbackError) {\r\n                deleteSyncWithParam('cfdi', params, callback, callbackError);\r\n            },\r\n            Download: function (format, type, id, callback) {\r\n                retrieve('cfdi/' + format + '/' + type, id, callback);\r\n            },\r\n            Acuse: function (format, type, id, callback) {\r\n                retrieve('acuse/' + format + '/' + type, id, callback);\r\n            }\r\n        },\r\n        TaxEntity: {\r\n            Get: function (callback) {\r\n                return list('taxEntity', callback);\r\n            },\r\n            Update: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity', data, callback, callbackError);\r\n            },\r\n            UploadCsd: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadCsd', data, callback, callbackError);\r\n            },\r\n            UploadImage: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadLogo', data, callback, callbackError);\r\n            }\r\n        },\r\n        Catalogs: {\r\n            States: function (country, callback) {\r\n                return list('catalogs/municipalities?countryCode' + country, callback);\r\n            },\r\n            Municipalities: function (state, callback) {\r\n                return list('catalogs/municipalities?stateCode' + state, callback);\r\n            },\r\n            Localities: function (state, callback) {\r\n                return list('catalogs/localities?stateCode' + state, callback);\r\n            },\r\n            Neighborhoods: function (postalCode, callback) {\r\n                return list('catalogs/neighborhoods?postalCode' + postalCode, callback);\r\n            },\r\n            ProductsOrServices: function (keyword, callback) {\r\n                return list('catalogs/ProductsOrServices?keyword=' + keyword, callback);\r\n            },\r\n            PostalCodes: function (keyword, callback) {\r\n                return list('catalogs/PostalCodes?keyword=' + keyword, callback);\r\n            },\r\n            Units: function (callback) {\r\n                return list('catalogs/Units', callback);\r\n            },\r\n            Currencies: function (callback) {\r\n                return list('catalogs/Currencies', callback);\r\n            },\r\n            Countries: function (callback) {\r\n                return list('catalogs/Countries', callback);\r\n            },\r\n            PaymentForms: function (callback) {\r\n                return list('catalogs/PaymentForms', callback);\r\n            },\r\n            PaymentMethods: function (callback) {\r\n                return list('catalogs/PaymentMethods', callback);\r\n            },\r\n            FederalTaxes: function (callback) {\r\n                return list('catalogs/FederalTaxes', callback);\r\n            },\r\n            FiscalRegimens: function (callback) {\r\n                return list('catalogs/FiscalRegimens', callback);\r\n            },\r\n            CfdiTypes: function (callback) {\r\n                return list('catalogs/CfdiTypes', callback);\r\n            },\r\n            RelationTypes: function (callback) {\r\n                return list('catalogs/RelationTypes', callback);\r\n            },\r\n            CfdiUses: function (keyword, callback) {\r\n                return list('catalogs/CfdiUses?keyword=' + keyword, callback);\r\n            }\r\n        }\r\n    };\r\n\r\n    facturamaObject.getToken = function () {\r\n        return \"Basic \" + valuesFacturama.token;\r\n    };\r\n\r\n    facturamaObject.getBaseUri = function () {\r\n        return settings.url;\r\n    };\r\n\r\n    return facturamaObject;\r\n}\r\n\r\n export default facturama()\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CODIGO_PRODUCTO = gql`\r\n  mutation crearCodigoProducto($input: CodigoCatalogoProductoInput) {\r\n    crearCodigoProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CODIGOS_PRODUCTO = gql`\r\n  query obtenerCodigosProducto($empresa: ID!, $sucursal: ID) {\r\n    obtenerCodigosProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      Name\r\n      Value\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CODIGO_PRODUCTO = gql`\r\n  mutation eliminarCodigoProducto($id: ID!) {\r\n    eliminarCodigoProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Close, Done, Search } from \"@material-ui/icons\";\r\nimport {\r\n  CircularProgress,\r\n  IconButton,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport {\r\n  CREAR_CODIGO_PRODUCTO,\r\n  ELIMINAR_CODIGO_PRODUCTO,\r\n} from \"../../../../../gql/CatalogosSat/catalogoProductosSat\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n})); \r\n\r\nexport default function CatalogosProductosSAT({ codigos, refetch }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading_save, setLoadingSave] = useState(false);\r\n  const [loading_delete, setLoadingDelete] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState({});\r\n  const [error, setError] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [crearCodigoProducto] = useMutation(CREAR_CODIGO_PRODUCTO);\r\n  const [eliminarCodigoProducto] = useMutation(ELIMINAR_CODIGO_PRODUCTO);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const limpiarDataModal = () => {\r\n    setSelectedIndex({});\r\n    setProductos([]);\r\n    setBusqueda(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  const handleOk = async () => {\r\n    const { Name, Value } = selectedIndex;\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name,\r\n        Value,\r\n      },\r\n    });\r\n    //Crear Codigo product a la BD\r\n    try {\r\n      setLoadingSave(true);\r\n      const result = await crearCodigoProducto({\r\n        variables: {\r\n          input: {\r\n            Name,\r\n            Value,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.crearCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setLoadingSave(false);\r\n        refetch();\r\n        limpiarDataModal();\r\n      }\r\n    } catch (error) {\r\n      setLoadingSave(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarCodigoBD = async (data) => {\r\n    try {\r\n      setLoadingDelete(true);\r\n      const result = await eliminarCodigoProducto({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.eliminarCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosGenerales({\r\n          ...datos_generales,\r\n          clave_producto_sat: {\r\n            Name: \"\",\r\n            Value: \"\",\r\n          },\r\n        });\r\n        setLoadingDelete(false);\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setLoadingDelete(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    limpiarDataModal();\r\n  };\r\n\r\n  const obtenerCampos = (data) => {\r\n    if (!data) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        clave_producto_sat: {\r\n          Name: \"\",\r\n          Value: \"\",\r\n        },\r\n      });\r\n      return null;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name: data.Name,\r\n        Value: data.Value,\r\n      },\r\n    });\r\n  };\r\n\r\n  const buscarCatalogo = async (e) => {\r\n    e.preventDefault();\r\n    if (!busqueda) {\r\n      setProductos([]);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await Facturama.Catalogs.ProductsOrServices(\r\n        busqueda,\r\n        function (result) {\r\n          setProductos(result);\r\n          setLoading(false);\r\n        },\r\n        function (error) {\r\n          if (error && error.responseJSON) {\r\n            setError(error.responseJSON);\r\n          }\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } catch (error) {\r\n      if (error && error.responseJSON) {\r\n        setError(error.responseJSON.Message);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography>Clave de producto SAT</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"catalogos-bd-productos\"\r\n          size=\"small\"\r\n          options={codigos}\r\n          disabled={loading_delete}\r\n          getOptionLabel={(option) =>\r\n            option.Name ? `${option.Value} - ${option.Name}` : \"\"\r\n          }\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <Fragment>\r\n                    {loading_delete ? <CircularProgress size={20} /> : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n          renderOption={(option) => (\r\n            <Fragment>\r\n              {`${option.Value} - ${option.Name}`}\r\n              <div style={{ flexGrow: 1 }} />\r\n              <IconButton size=\"small\" onClick={() => eliminarCodigoBD(option)}>\r\n                <Close />\r\n              </IconButton>\r\n            </Fragment>\r\n          )}\r\n          onChange={(_, data) => obtenerCampos(data)}\r\n          getOptionSelected={(option, value) =>\r\n            option.Value === value.Value\r\n          }\r\n          value={datos_generales.clave_producto_sat}\r\n        />\r\n        <Button color=\"primary\" onClick={handleClickOpen}>\r\n          <Search />\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"alert-dialog-clave-producto\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-clave-producto\">\r\n          {\"Catalogo de productos y servicios SAT\"}\r\n        </DialogTitle>\r\n        <DialogContent style={{ height: \"50vh\" }}>\r\n          <Box>\r\n            <form onSubmit={buscarCatalogo}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                label=\"producto, servicio o giro de la empresa\"\r\n                fullWidth\r\n                size=\"small\"\r\n                onChange={(e) => {\r\n                  setBusqueda(e.target.value);\r\n                  setError(\"\");\r\n                }}\r\n                value={busqueda}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton size=\"small\" onClick={buscarCatalogo}>\r\n                        <Search />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                error={error ? true : false}\r\n                helperText={error ? error : \"\"}\r\n              />\r\n            </form>\r\n          </Box>\r\n          <Box my={3} className={classes.root}>\r\n            {loading ? (\r\n              <Box\r\n                display=\"flex\"\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n                height=\"25vh\"\r\n              >\r\n                <CircularProgress />\r\n              </Box>\r\n            ) : (\r\n              <List dense component=\"nav\" aria-label=\"main mailbox folders\">\r\n                {productos.map((res, index) => (\r\n                  <SelectedListItem\r\n                    key={index}\r\n                    producto={res}\r\n                    busqueda={busqueda}\r\n                    selectedIndex={selectedIndex}\r\n                    setSelectedIndex={setSelectedIndex}\r\n                  />\r\n                ))}\r\n              </List>\r\n            )}\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleCancel()}>Cancelar</Button>\r\n          <Button\r\n            onClick={() => handleOk()}\r\n            color=\"primary\"\r\n            disabled={loading_save}\r\n            startIcon={loading_save ? <CircularProgress size={18} /> : <Done />}\r\n          >\r\n            Seleccionar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectedListItem = ({\r\n  producto,\r\n  busqueda,\r\n  selectedIndex,\r\n  setSelectedIndex,\r\n}) => {\r\n  const handleListItemClick = (data) => {\r\n    setSelectedIndex(data);\r\n  };\r\n\r\n  const contiene = busqueda.includes(\"potacio\");\r\n  if (producto.Value === \"0\" && !contiene) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ListItem\r\n        button\r\n        selected={selectedIndex.Value === producto.Value}\r\n        onClick={() => handleListItemClick(producto)}\r\n      >\r\n        <ListItemText primary={`${producto.Value} - ${producto.Name}`} />\r\n      </ListItem>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n \r\nexport const CREAR_CATEGORIA = gql`\r\n\tmutation crearCategoria($input: CrearCategoriasInput) {\r\n\t\tcrearCategoria(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCATEGORIA = gql`\r\n\tmutation crearSubcategoria($idCategoria: ID!, $input: CrearSubcategoriasInput) {\r\n\t\tcrearSubcategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CATEGORIA = gql`\r\n\tmutation actualizarCategoria($idCategoria: ID!, $input: ActualizarCategoriasInput) {\r\n\t\tactualizarCategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCATEGORIA = gql`\r\n\tmutation actualizarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $input: ActualizarSubcategoriasInput) {\r\n\t\tactualizarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n\tquery obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tsubcategorias {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcategoria\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CATEGORIA = gql`\r\n\tmutation eliminarCategoria($idCategoria: ID!) {\r\n\t\teliminarCategoria(idCategoria: $idCategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ELIMINAR_SUBCATEGORIA = gql`\r\n\tmutation eliminarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!) {\r\n\t\teliminarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_DEPARTAMENTOS = gql`\r\n\tquery ObtenerDepartamentos($empresa: ID!, $sucursal: ID!){\r\n        obtenerDepartamentos(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_departamentos\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n            sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_DEPARTAMENTO = gql`\r\n\tmutation CrearDepartamentos($input: DepartamentosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearDepartamentos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEPARTAMENTO = gql`\r\n\tmutation ActualzarDepartamentos($input: DepartamentosInput, $id: ID!){\r\n        actualzarDepartamentos(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DEPARTAMENTO = gql`\r\n    mutation EliminarDepartamento($id: ID!){\r\n        eliminarDepartamento(id: $id){\r\n            message\r\n        }\r\n    }\r\n\t\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_MARCAS = gql`\r\n    query ObtenerMarcas($empresa: ID!, $sucursal: ID!){\r\n        obtenerMarcas(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_marca\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_MARCAS = gql`\r\n    mutation CrearMarca($input: MarcasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearMarcas(input: $input, empresa: $empresa, sucursal: $sucursal ){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_MARCAS = gql`\r\n    mutation actualzarMarcas($input: MarcasInput, $id: ID! ) {\r\n\t\tactualzarMarcas(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_MARCAS = gql`\r\n\tmutation eliminarMarca($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarMarca(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  Container,\r\n  FormHelperText,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  Grid,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add, Autorenew } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"./CatalogoProductosSAT\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  obligatorio: {\r\n    color: \"red\",\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoGenerales({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    validacion,\r\n    precios,\r\n    setPrecios,\r\n    centro_de_costos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    subcategorias,\r\n    setSubcategorias,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    categorias,\r\n    departamentos,\r\n    marcas,\r\n    centro_costos,\r\n    codigos,\r\n  } = obtenerConsultasProducto;\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"monedero_electronico\") {\r\n      if (!e.target.value) {\r\n        setPrecios({\r\n          ...precios,\r\n          [e.target.name]: \"\",\r\n        });\r\n        return;\r\n      }\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"monedero\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n        monedero: e.target.checked,\r\n      });\r\n      return;\r\n    }\r\n    /* setPrecios({\r\n\t\t\t...precios,\r\n\t\t\t[e.target.name]: e.target.checked\r\n\t\t}); */\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: { ...precios.inventario, unidad_de_inventario: \"Kg\", codigo_unidad: \"KGM\" },\r\n        unidad_de_compra: { ...precios.unidad_de_compra, unidad: \"Kg\", codigo_unidad: \"KGM\" },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\"\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: { ...precios.inventario, unidad_de_inventario: \"Pz\", codigo_unidad: \"H87\" },\r\n        unidad_de_compra: { ...precios.unidad_de_compra, unidad: \"Pz\", codigo_unidad: \"H87\" },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const obtenerIDs = (event, child) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.categoria) {\r\n      const { subcategorias } = child.props.categoria;\r\n      setSubcategorias(subcategorias);\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (campo) => {\r\n    if (!precios.monedero_electronico) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (update) {\r\n      const categoria = categorias.filter(\r\n        (res) => res._id === datos_generales.id_categoria\r\n      );\r\n      const costos = centro_costos.filter(\r\n        (res) => res._id === centro_de_costos.id_cuenta\r\n      );\r\n      if (categoria.length > 0) {\r\n        setSubcategorias(categoria[0].subcategorias);\r\n      }\r\n      if (costos.length > 0) {\r\n        setSubcostos(costos[0].subcuentas);\r\n      }\r\n    }\r\n  }, [update]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"lg\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              fullWidth\r\n            >\r\n              <Typography>Código de barras</Typography>\r\n              <OutlinedInput\r\n                disabled={update && datos_generales.codigo_barras}\r\n                style={{ padding: 0 }}\r\n                id=\"form-producto-codigo-barras\"\r\n                name=\"codigo_barras\"\r\n                value={\r\n                  datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCampos}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      disabled={update && datos_generales.codigo_barras}\r\n                      onClick={() => GenCodigoBarras()}\r\n                      /* edge=\"end\" */\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Autorenew />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>\r\n              <span className={classes.obligatorio}>* </span>Clave alterna\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.clave_alterna}\r\n              name=\"clave_alterna\"\r\n              id=\"form-producto-clave-alterna\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.clave_alterna\r\n                  ? datos_generales.clave_alterna\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>\r\n              <span className={classes.obligatorio}>* </span>Tipo de producto\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.tipo_producto}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_producto\"\r\n                value={\r\n                  datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCampos}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n                <MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n                <MenuItem value=\"OTROS\">Otros</MenuItem>\r\n              </Select>\r\n              <FormHelperText>{validacion.message}</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={5} xs={12}>\r\n            <CatalogosProductosSAT codigos={codigos} refetch={refetch} />\r\n          </Grid>\r\n\r\n          <Grid item md={4} xs={12}>\r\n            <Typography>\r\n              <span className={classes.obligatorio}>* </span>Nombre comercial\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_comercial}\r\n              name=\"nombre_comercial\"\r\n              id=\"form-producto-nombre-comercial\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_comercial\r\n                  ? datos_generales.nombre_comercial\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography>\r\n              <span className={classes.obligatorio}>* </span>Nombre genérico\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_generico}\r\n              name=\"nombre_generico\"\r\n              id=\"form-producto-nombre-generico\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_generico\r\n                  ? datos_generales.nombre_generico\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography>Descripción</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descripcion\"\r\n              id=\"form-producto-descripcion\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.descripcion ? datos_generales.descripcion : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n            />\r\n          </Grid>\r\n\r\n          <Grid item md={6} xs={12}>\r\n            <Typography>Categoria</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  id=\"form-producto-categoria\"\r\n                  value={\r\n                    datos_generales.categoria ? datos_generales.categoria : \"\"\r\n                  }\r\n                  onChange={(event, child) => obtenerIDs(event, child)}\r\n                  name=\"categoria\"\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {categorias ? (\r\n                    categorias.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_categoria\"\r\n                          key={res._id}\r\n                          value={res.categoria}\r\n                          id={res._id}\r\n                          categoria={res}\r\n                        >\r\n                          {res.categoria}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"categoria\"\r\n                name=\"categoria\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography>Subcategoria</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  id=\"form-producto-subcategoria\"\r\n                  name=\"subcategoria\"\r\n                  value={\r\n                    datos_generales.subcategoria\r\n                      ? datos_generales.subcategoria\r\n                      : \"\"\r\n                  }\r\n                  onChange={(event, child) => obtenerIDs(event, child)}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {subcategorias ? (\r\n                    subcategorias.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_subcategoria\"\r\n                          key={res._id}\r\n                          value={res.subcategoria}\r\n                          id={res._id}\r\n                        >\r\n                          {res.subcategoria}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"subcategoria\"\r\n                name=\"subcategoria\"\r\n                refetch={refetch}\r\n                subcategorias={subcategorias}\r\n                setSubcategorias={setSubcategorias}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography>Departamento</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  id=\"form-producto-departamento\"\r\n                  name=\"departamento\"\r\n                  value={\r\n                    datos_generales.departamento\r\n                      ? datos_generales.departamento\r\n                      : \"\"\r\n                  }\r\n                  onChange={(event, child) => obtenerIDs(event, child)}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {departamentos ? (\r\n                    departamentos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_departamento\"\r\n                          key={res._id}\r\n                          value={res.nombre_departamentos}\r\n                          id={res._id}\r\n                        >\r\n                          {res.nombre_departamentos}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"departamento\"\r\n                name=\"nombre_departamentos\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography>Marca</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  id=\"form-producto-marca\"\r\n                  name=\"marca\"\r\n                  value={datos_generales.marca ? datos_generales.marca : \"\"}\r\n                  onChange={(event, child) => obtenerIDs(event, child)}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {marcas ? (\r\n                    marcas.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_marca\"\r\n                          key={res._id}\r\n                          value={res.nombre_marca}\r\n                          id={res._id}\r\n                        >\r\n                          {res.nombre_marca}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"marca\"\r\n                name=\"nombre_marca\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" mt={4}>\r\n          <Grid container>\r\n            <Grid item md={3} xs={12}>\r\n              {!update ? (\r\n                <Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Granel</b>\r\n                    </Typography>\r\n                    <Divider />\r\n                  </Box>\r\n                  <div className={classes.formInput}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={precios.granel ? precios.granel : false}\r\n                          onChange={obtenerChecks}\r\n                          name=\"granel\"\r\n                        />\r\n                      }\r\n                      label=\"Vender a granel\"\r\n                    />\r\n                  </div>\r\n                </Box>\r\n              ) : null}\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Farmacia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={\r\n                        datos_generales.receta_farmacia\r\n                          ? datos_generales.receta_farmacia\r\n                          : false\r\n                      }\r\n                      onChange={checkFarmacia}\r\n                      name=\"receta_farmacia\"\r\n                    />\r\n                  }\r\n                  label=\"Necesita receta\"\r\n                  name=\"receta_farmacia\"\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Monedero eléctronico</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box>\r\n                <Box className={classes.formInput}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={precios.monedero}\r\n                        onChange={obtenerChecks}\r\n                        name=\"monedero\"\r\n                      />\r\n                    }\r\n                    label=\"Monedero electrónico\"\r\n                  />\r\n                  <TextField\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    label=\"Valor por punto\"\r\n                    name=\"monedero_electronico\"\r\n                    id=\"form-producto-monedero_electronico\"\r\n                    variant=\"outlined\"\r\n                    value={precios.monedero_electronico}\r\n                    onChange={obtenerCampos}\r\n                    disabled={precios.monedero ? false : true}\r\n                    onBlur={() => verificarCampoVacio(\"monedero_electronico\")}\r\n                    error={precios.monedero_electronico === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, DialogTitle } from '@material-ui/core';\r\nimport { Box, Typography, Button, Divider, Grid } from '@material-ui/core';\r\nimport { AddPhotoAlternate, Visibility, Delete } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nimport PhotoSizeSelectActualOutlinedIcon from '@material-ui/icons/PhotoSizeSelectActualOutlined';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\timagen: {\r\n\t\tmaxHeight: \"100%\",\r\n\t\tmaxWidth: \"100%\"\r\n\t}\r\n}));\r\n\r\nexport default function CargarImagenesProducto() {\r\n\tconst classes = useStyles();\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview } = useContext(RegProductoContext);\r\n\r\n\tconst cargarImagen = (e) => {\r\n\t\tconst { files } = e.target;\r\n\t\tif (e.target.files.length < 1) return\r\n\t\tsetImagenes([\r\n\t\t\t...imagenes,\r\n\t\t\tfiles[0]\r\n\t\t]);\r\n\t\tsetOnPreview({image: URL.createObjectURL(files[0])})\r\n\t};\r\n\r\n\tconst render_imagenes = imagenes.map((res, index) => <RenderImagenes key={index} index={index} imagen={res} />);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\t\t\t\t/* multiple */\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={cargarImagen}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\" component=\"span\" startIcon={<AddPhotoAlternate />}>\r\n\t\t\t\t\t\t\t\tCargar imagen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{render_imagenes}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box display=\"flex\" minHeight={300}>\r\n\t\t\t\t\t\t<Box mx={1}>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\" height=\"50vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t{!onPreview.image ? (\r\n\t\t\t\t\t\t\t\t<PhotoSizeSelectActualOutlinedIcon style={{ fontSize: 150 }} />\r\n\t\t\t\t\t\t\t) : (<img alt=\"img-onPreview\" src={onPreview.image} className={classes.imagen} />)}\r\n\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst RenderImagenes = ({ imagen, index }) => {\r\n\tconst classes = useStyles();\r\n\tconst preview = imagen.key_imagen ? imagen.url_imagen : URL.createObjectURL(imagen)\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview, imagenes_eliminadas, setImagenesEliminadas } = useContext(RegProductoContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarImagen = () => {\r\n\t\t/* agregar al arrya de imagenes eliminadas */\r\n\t\tif(imagen.key_imagen){\r\n\t\t\tsetImagenesEliminadas([\r\n\t\t\t\t...imagenes_eliminadas, imagen\r\n\t\t\t])\r\n\t\t}\r\n\t\t/* quitar imagenes del array */\r\n\t\tif (onPreview.index === index) {\r\n\t\t\tsetOnPreview({ index: '', image: '' })\r\n\t\t}\r\n\t\tconst array = [...imagenes];\r\n\t\tarray.splice(index, 1);\r\n\t\tsetImagenes([\r\n\t\t\t...array,\r\n\t\t]);\r\n\t\thandleModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box my={2} mr={5}>\r\n\t\t\t<Box className={classes.formInputFlex}>\r\n\t\t\t\t<Box height={70} width={70}>\r\n\t\t\t\t\t<img alt=\"producto-img-prev\" src={preview} width=\"100%\" />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box width=\"90%\">\r\n\t\t\t\t\t<Typography noWrap>\r\n\t\t\t\t\t\t{imagen.key_imagen ? imagen.key_imagen : imagen.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{imagen.key_imagen ? null : (<Typography variant=\"caption\">{imagen.size} bits</Typography>)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<Button size=\"small\" startIcon={<Visibility />} onClick={() => setOnPreview({ index, image: preview })}>\r\n\t\t\t\t\t\t\tprevisualizar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Box mx={1} />\r\n\t\t\t\t\t\t<ModalDelete handleModal={handleModal} open={open} eliminarImagen={eliminarImagen} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst ModalDelete = ({ handleModal, open, eliminarImagen }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button size=\"small\" color=\"secondary\" startIcon={<Delete />} onClick={() => handleModal()}>\r\n\t\t\t\teliminar\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => eliminarImagen()}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport \"date-fns\";\r\nimport local from \"date-fns/locale/es\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport ContainerRegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nexport default function RegistroAlmacenInicial({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    selectedDate,\r\n    setSelectedDate,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const { almacenes } = obtenerConsultasProducto;\r\n\r\n  /*ARMAR OBJETO DE INVENTARIO  */\r\n  const obtenerInventario = (e, child) => {\r\n    if (!e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: { ...precios.inventario, [e.target.name]: \"\" },\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad_de_inventario\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          [e.target.name]: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    setPrecios({\r\n      ...precios,\r\n      inventario: {\r\n        ...precios.inventario,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      },\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenInicial = (e) => {\r\n    if (!e.target.value) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: \"\",\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"almacen\") {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n      return;\r\n    }\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [e.target.name]: parseFloat(e.target.value),\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (date) => {\r\n    setSelectedDate(date);\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      fecha_de_expiracion: date,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (tipo, name, value) => {\r\n    if (tipo === \"inventario\") {\r\n      if (!value) {\r\n        setPrecios({\r\n          ...precios,\r\n          inventario: { ...precios.inventario, [name]: 0 },\r\n        });\r\n      }\r\n    } else {\r\n      if (!value) {\r\n        setAlmacenInicial({\r\n          ...almacen_inicial,\r\n          [name]: 0,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mt={3}>\r\n        <Typography>\r\n          <b>Inventario</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Box className={classes.formInputFlex}>\r\n        <Box width=\"150px\">\r\n          <Typography>Inventario mínimo</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"inventario_minimo\"\r\n            id=\"form-producto-inventario_minimo\"\r\n            variant=\"outlined\"\r\n            value={precios.inventario.inventario_minimo}\r\n            onChange={obtenerInventario}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\r\n                \"inventario\",\r\n                \"inventario_minimo\",\r\n                precios.inventario.inventario_minimo\r\n              )\r\n            }\r\n            error={precios.inventario.inventario_minimo === \"\"}\r\n          />\r\n        </Box>\r\n        <Box width=\"150px\">\r\n          <Typography>Inventario máximo</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"inventario_maximo\"\r\n            id=\"form-producto-inventario_maximo\"\r\n            variant=\"outlined\"\r\n            value={precios.inventario.inventario_maximo}\r\n            onChange={obtenerInventario}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\r\n                \"inventario\",\r\n                \"inventario_maximo\",\r\n                precios.inventario.inventario_maximo\r\n              )\r\n            }\r\n            error={precios.inventario.inventario_maximo === \"\"}\r\n          />\r\n        </Box>\r\n        <Box width=\"150px\">\r\n          <Typography>Unidad de inventario</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad_de_inventario\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad_de_inventario\"\r\n                  value={precios.inventario.unidad_de_inventario}\r\n                  onChange={obtenerInventario}\r\n                >\r\n                  {unitCodes_granel.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad_de_inventario\"\r\n                  value={precios.inventario.unidad_de_inventario}\r\n                  onChange={obtenerInventario}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n      {update ? null : datos_generales.tipo_producto === \"OTROS\" ? (\r\n        <Fragment>\r\n          <Box mt={3}>\r\n            <Typography>\r\n              <b>Almacen incial</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <div\r\n            className={classes.formInputFlex}\r\n            style={{ alignItems: \"center\" }}\r\n          >\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                Cantidad inicial en <b>{precios.unidad_de_compra.unidad}</b>\r\n              </Typography>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <TextField\r\n                  fullWidth\r\n                  type=\"number\"\r\n                  InputProps={{ inputProps: { min: 0 } }}\r\n                  size=\"small\"\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  value={almacen_inicial.cantidad}\r\n                  onChange={obtenerAlmacenInicial}\r\n                  onBlur={() =>\r\n                    verificarCampoVacio(\r\n                      \"almacen\",\r\n                      \"cantidad\",\r\n                      almacen_inicial.cantidad\r\n                    )\r\n                  }\r\n                  error={almacen_inicial.cantidad === \"\"}\r\n                />\r\n              </Box>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>Almacen</Typography>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"almacen\"\r\n                  error={\r\n                    almacen_inicial.cantidad > 0 && !almacen_inicial.almacen\r\n                  }\r\n                >\r\n                  <Select\r\n                    name=\"almacen\"\r\n                    value={almacen_inicial.almacen}\r\n                    onChange={obtenerAlmacenes}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>Seleccione uno</em>\r\n                    </MenuItem>\r\n                    {almacenes ? (\r\n                      almacenes.map((res) => {\r\n                        return (\r\n                          <MenuItem\r\n                            name=\"id_almacen\"\r\n                            key={res._id}\r\n                            value={res.nombre_almacen}\r\n                            id={res._id}\r\n                          >\r\n                            {res.nombre_almacen}\r\n                          </MenuItem>\r\n                        );\r\n                      })\r\n                    ) : (\r\n                      <MenuItem value=\"\" />\r\n                    )}\r\n                  </Select>\r\n                </FormControl>\r\n                <AlmacenProvider>\r\n                  <ContainerRegistroAlmacen\r\n                    accion=\"registrar\"\r\n                    refetch={refetch}\r\n                  />\r\n                </AlmacenProvider>\r\n              </Box>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>Fecha de expiración</Typography>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={local}>\r\n                <Grid container justify=\"space-around\">\r\n                  <KeyboardDatePicker\r\n                    margin=\"dense\"\r\n                    id=\"date-picker-dialog\"\r\n                    placeholder=\"ex: DD/MM/AAAA\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    KeyboardButtonProps={{\r\n                      \"aria-label\": \"change date\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n            </Box>\r\n          </div>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","export function validaciones(generales, precios, almacen, presentaciones) {\r\n    /* si no hay generales y datos 2 */\r\n    /* console.log(almacen); */\r\n    if (\r\n        !generales.clave_alterna ||\r\n        !generales.tipo_producto ||\r\n        !generales.nombre_generico ||\r\n        !generales.nombre_comercial\r\n    ) {\r\n        if (!precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad) {\r\n            return { error: true, message: 'Campo obligatorio', vista1: true, vista2: true };\r\n        }\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if (\r\n        /* si solo hay generales */\r\n        !precios.precio_de_compra.precio_con_impuesto || !precios.precio_de_compra.precio_sin_impuesto || !precios.unidad_de_compra.cantidad\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista2: true };\r\n    } else if (\r\n        /* si solo hay precios */\r\n        !generales.clave_alterna || !generales.tipo_producto || !generales.nombre_generico || !generales.nombre_comercial\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if(\r\n        /* si hay cantidad almacen pero no hay almacen seleccionado */\r\n        almacen.cantidad > 0 && !almacen.almacen && generales.tipo_producto === \"OTROS\"\r\n    ) {\r\n        console.log(\"si hay cantidad almacen pero no hay almacen seleccionado\");\r\n        return { error: true, message: 'Campo obligatorio', vista3: true };\r\n    }/*  else if(\r\n        //si no hay almacen seleccionado\r\n        presentaciones.length > 0 && !almacen.almacen && !almacen_existente\r\n    ){\r\n        console.log(\"no hay present\");\r\n        return { error: true, message: 'Campo obligatorio', vista7: true };\r\n    } */ else {\r\n        /* si hay todos los datos */\r\n        return { error: false, message: '' };\r\n    }\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CUENTA = gql`\r\n\tmutation crearCuenta($input: CrearCuentasInput) {\r\n\t\tcrearCuenta(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCUENTA= gql`\r\n\tmutation crearSubcuenta($idCuenta: ID!, $input: CrearSubcuentasInput) {\r\n\t\tcrearSubcuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CUENTA= gql`\r\n\tmutation actualizarCuenta($idCuenta: ID!, $input: ActualizarCuentasInput) {\r\n\t\tactualizarCuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCUENTA = gql`\r\n\tmutation actualizarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $input: ActualizarSubcuentasInput) {\r\n\t\tactualizarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CUENTAS = gql`\r\n\tquery obtenerCuentas($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCuentas(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tsubcuentas {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcuenta\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_CUENTA = gql`\r\n\tmutation eliminarCuenta($id: ID!) {\r\n\t\teliminarCuenta(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\nexport const ELIMINAR_SUBCUENTA = gql`\r\n\tmutation eliminarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!) {\r\n\t\teliminarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; ","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, Divider, TextField } from '@material-ui/core';\r\nimport { Box, FormControl, MenuItem, Select, Typography } from '@material-ui/core';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport Add from '@material-ui/icons/Add';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport { CREAR_CUENTA, CREAR_SUBCUENTA } from '../../../../../gql/Catalogos/centroCostos';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formInputFlex: {\r\n        display: 'flex',\r\n        '& > *': {\r\n            margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n        }\r\n    },\r\n    formInput: {\r\n        margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n    }\r\n}));\r\n\r\nexport default function CentroCostos({ obtenerConsultasProducto, refetch }) {\r\n    const classes = useStyles();\r\n    const { centro_de_costos, setCentroDeCostos, subcostos, setSubcostos } = useContext(RegProductoContext);\r\n    const { centro_costos } = obtenerConsultasProducto;\r\n\r\n    const obtenerAlmacenes = (event, child) => {\r\n        setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            [event.target.name]: event.target.value,\r\n            [child.props.name]: child.props.id,\r\n        });\r\n        if (child.props.costos) {\r\n            const { subcuentas } = child.props.costos;\r\n            setSubcostos(subcuentas);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box mt={3}>\r\n                <Typography>\r\n                    <b>Centro de costos</b>\r\n                </Typography>\r\n                <Divider />\r\n            </Box>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\">\r\n                    <Typography>Cuenta</Typography>\r\n                    <Box display=\"flex\">\r\n                        <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"cuenta\">\r\n                            <Select name=\"cuenta\" value={centro_de_costos.cuenta ? centro_de_costos.cuenta : ''} onChange={obtenerAlmacenes}>\r\n                                <MenuItem value=\"\">\r\n                                    <em>Seleccione uno</em>\r\n                                </MenuItem>\r\n                                {centro_costos ? centro_costos.map((res) => {\r\n                                    return (\r\n                                        <MenuItem\r\n                                            name=\"id_cuenta\"\r\n                                            key={res._id}\r\n                                            value={res.cuenta}\r\n                                            id={res._id}\r\n                                            costos={res}\r\n                                        >\r\n                                            {res.cuenta}\r\n                                        </MenuItem>\r\n                                    );\r\n                                }) : <MenuItem value=\"\" />}\r\n                            </Select >\r\n                        </FormControl>\r\n                        <RegistrarNuevoSelect tipo=\"cuenta\" name=\"cuenta\" refetch={refetch} />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                    <Typography>Subcuenta</Typography>\r\n                    <Box display=\"flex\">\r\n                        <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"subcuenta\">\r\n                            <Select name=\"subcuenta\" value={centro_de_costos.subcuenta ? centro_de_costos.subcuenta : ''} onChange={obtenerAlmacenes}>\r\n                                <MenuItem value=\"\">\r\n                                    <em>Seleccione uno</em>\r\n                                </MenuItem>\r\n                                {subcostos ? subcostos.map((res) => {\r\n                                    return (\r\n                                        <MenuItem\r\n                                            name=\"id_subcuenta\"\r\n                                            key={res._id}\r\n                                            value={res.subcuenta}\r\n                                            id={res._id}\r\n                                        >\r\n                                            {res.subcuenta}\r\n                                        </MenuItem>\r\n                                    );\r\n                                }) : <MenuItem value=\"\" />}\r\n                            </Select >\r\n                        </FormControl>\r\n                        <RegistrarNuevoSelect tipo=\"subcuenta\" name=\"subcuenta\" refetch={refetch} />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({ tipo, name, refetch }) => {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [validacion, setValidacion] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [value, setValue] = useState('');\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst { centro_de_costos, setCentroDeCostos, subcostos, setSubcostos } = useContext(RegProductoContext);\r\n\tconst [alert, setAlert] = useState({ message: '', status: '', open: false });\r\n\r\n\t/*  costos Mutation */\r\n\tconst [ crearCuenta ] = useMutation(CREAR_CUENTA);\r\n\t/*  subcostos Mutation */\r\n\tconst [ crearSubcuenta ] = useMutation(CREAR_SUBCUENTA);\r\n\r\n\tconst handleToggle = () => {\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetValue(e.target.value);\r\n\t};\r\n\r\n\tconst guardarDatos = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!value) {\r\n\t\t\tsetValidacion(true);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet variables = {\r\n\t\t\tinput: {\r\n                [name]: value,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id\r\n            }\r\n\t\t};\r\n\t\tif (tipo === 'subcuenta') {\r\n\t\t\tvariables = {\r\n\t\t\t\tinput: {\r\n\t\t\t\t\t[name]: value\r\n\t\t\t\t},\r\n\t\t\t\tidCuenta: centro_de_costos.id_cuenta\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tswitch (tipo) {\r\n\t\t\t\tcase 'cuenta':\r\n\t\t\t\t\tconst cuenta_creada = await crearCuenta({ variables });\r\n\t\t\t\t\trefetch();\r\n\t\t\t\t\tconst id_cuenta = cuenta_creada.data.crearCuenta._id;\r\n\t\t\t\t\tsetCentroDeCostos({\r\n\t\t\t\t\t\t...centro_de_costos,\r\n\t\t\t\t\t\tcuenta: value,\r\n\t\t\t\t\t\tid_cuenta\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'subcuenta':\r\n\t\t\t\t\tconst subcuenta_creada = await crearSubcuenta({ variables });\r\n\t\t\t\t\trefetch();\r\n\t\t\t\t\tconst id_subcuenta = subcuenta_creada.data.crearSubcuenta._id;\r\n\t\t\t\t\tsetSubcostos([...subcostos, { _id: id_subcuenta, subcuenta: value }]);\r\n\t\t\t\t\tsetCentroDeCostos({\r\n\t\t\t\t\t\t...centro_de_costos,\r\n\t\t\t\t\t\tsubcuenta: value,\r\n\t\t\t\t\t\tid_subcuenta\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t\thandleToggle();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={() => handleToggle()}\r\n\t\t\t\tdisabled={tipo === 'subcuenta' && !centro_de_costos.id_cuenta}\r\n\t\t\t>\r\n\t\t\t\t<Add />\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleToggle} aria-labelledby={`modal-title-${tipo}`}>\r\n\t\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t\t<DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\terror={validacion}\r\n\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tlabel={tipo}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\thelperText={validacion ? 'Campo obligatorio' : ''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleToggle()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t/* onClick={() => guardarDatos()} */\r\n\t\t\t\t\t\tform={`registro-${name}`}\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tendIcon={loading ? <CircularProgress color=\"inherit\" size={18} /> : null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tGuardar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};","import React, { useContext, useState } from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport { Dialog, DialogTitle, DialogActions, Button } from '@material-ui/core'\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport { DeleteOutline } from '@material-ui/icons';\r\n\r\nexport default function TablaPreciosPlazos({ precios }) {\r\n\t/* const { preciosPlazos } = useContext(RegProductoContext); */\r\n\r\n\treturn (\r\n\r\n\t\t<TableContainer component={Paper}>\r\n\t\t\t<Table aria-label=\"simple table\" size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>Plazo</TableCell>\r\n\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t<TableCell></TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{precios.map((precio, index) => (\r\n\t\t\t\t\t\t<RenderTablePlazos key={index} precio={precio} index={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</TableContainer>\r\n\t);\r\n}\r\n\r\nconst RenderTablePlazos = ({ precio, index }) => {\r\n\r\n\treturn (\r\n\t\t<TableRow >\r\n\t\t\t<TableCell>{precio.plazo}</TableCell>\r\n\t\t\t<TableCell>{precio.precio}</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<ModalDeletePlazos index={index} unidad={precio.unidad} />\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t)\r\n}\r\n\r\nconst ModalDeletePlazos = ({ index, unidad }) => {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst { preciosPlazos, setPreciosPlazos } = useContext(RegProductoContext);\r\n\r\n\tconst toggleModal = () => {\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n\tconst eliminarUnidad = () => {\r\n\r\n\r\n\t\tswitch (unidad) {\r\n\t\t\tcase \"Pz\":\r\n\t\t\t\tpreciosPlazos.precio_piezas.splice(index, 1);\r\n\t\t\t\tsetPreciosPlazos({\r\n                    ...preciosPlazos,\r\n                    precio_piezas: [...preciosPlazos.precio_piezas]\r\n                })\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Caja\":\r\n\t\t\t\tpreciosPlazos.precio_cajas.splice(index, 1);\r\n\t\t\t\tsetPreciosPlazos({\r\n                    ...preciosPlazos,\r\n                    precio_cajas: [...preciosPlazos.precio_cajas]\r\n                })\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Costal\":\r\n\t\t\t\tpreciosPlazos.precio_costales.splice(index, 1);\r\n\t\t\t\tsetPreciosPlazos({\r\n                    ...preciosPlazos,\r\n                    precio_costales: [...preciosPlazos.precio_costales]\r\n                })\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\ttoggleModal();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n\t\t\t\t<DeleteOutline color=\"primary\" />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={open} onClose={toggleModal}>\r\n\t\t\t\t<DialogTitle>{'Se eliminará este precio'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => toggleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => eliminarUnidad()} color=\"secondary\" autoFocus>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  FormControl,\r\n  Grid,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport TablaPreciosPlazos from \"./tabla_precios\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& > .precios-box\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(3)}px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PrecioPlazos() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    unidadesVenta,\r\n    unidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n  const [plazo, setPlazo] = useState({\r\n    plazo: \"1\",\r\n    unidad: precios.granel ? \"Costal\" : \"Pz\",\r\n    codigo_unidad: precios.granel ? \"KGM\" : \"H87\",\r\n    precio: 0,\r\n  });\r\n\r\n  const obtenerPlazos = (e, child) => {\r\n    if (e.target.name === \"precio\") {\r\n      setPlazo({\r\n        ...plazo,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPlazo({\r\n        ...plazo,\r\n        unidad,\r\n        codigo_unidad,\r\n      });\r\n      return;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const guardarPlazo = () => {\r\n    if (!plazo.plazo || !plazo.precio || !plazo.unidad) return;\r\n    switch (plazo.unidad) {\r\n      case \"Pz\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_piezas: [...preciosPlazos.precio_piezas, plazo],\r\n        });\r\n        break;\r\n      case \"Caja\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_cajas: [...preciosPlazos.precio_cajas, plazo],\r\n        });\r\n        break;\r\n      case \"Costal\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_costales: [...preciosPlazos.precio_costales, plazo],\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      precio: 0,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex}>\r\n        <Typography className=\"precios-box\">\r\n          Precio venta de <b>{unidadVentaXDefecto.unidad}</b> con\r\n          impuestos(NETO): <b>${unidadVentaXDefecto.precio}</b>\r\n        </Typography>\r\n        {unidadesVenta.map((unidades, index) => {\r\n          if (!unidades.default)\r\n            return (\r\n              <Typography key={index} className=\"precios-box\">\r\n                Precio venta de <b>{unidades.unidad}</b> con impuestos(NETO):{\" \"}\r\n                <b>${unidades.precio}</b>\r\n              </Typography>\r\n            );\r\n          return null;\r\n        })}\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box>\r\n          <Typography>Plazo</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"plazo\">\r\n              <Select name=\"plazo\" value={plazo.plazo} onChange={obtenerPlazos}>\r\n                <MenuItem value=\"1\">1 Mes</MenuItem>\r\n                <MenuItem value=\"2\">2 Meses</MenuItem>\r\n                <MenuItem value=\"6\">6 Meses</MenuItem>\r\n                <MenuItem value=\"8\">8 Meses</MenuItem>\r\n                <MenuItem value=\"12\">12 Meses</MenuItem>\r\n                <MenuItem value=\"18\">18 Meses</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes_granel.map((res, index) =>\r\n                    res.unidad === \"Costal\" ? (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ) : null\r\n                  )}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Precio</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            value={plazo.precio}\r\n            variant=\"outlined\"\r\n            onChange={obtenerPlazos}\r\n          />\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            onClick={() => guardarPlazo()}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <Grid container spacing={2} justify=\"center\">\r\n          {precios.granel ? (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Costal\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_costales} />\r\n              </Grid>\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Piezas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_piezas} />\r\n              </Grid>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Cajas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_cajas} />\r\n              </Grid>\r\n            </Fragment>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const validateJsonEdit = async (data, tipo) => {\r\n    if (tipo === \"datos_generales\") {\r\n      let object_date = {\r\n        clave_alterna: data.clave_alterna,\r\n        tipo_producto: data.tipo_producto,\r\n        nombre_comercial: data.nombre_comercial,\r\n        nombre_generico: data.nombre_generico,\r\n        receta_farmacia: data.receta_farmacia,\r\n      };\r\n      if (data.codigo_barras !== null && data.codigo_barras !== \"\")\r\n        object_date = { ...object_date, codigo_barras: data.codigo_barras };\r\n      if (data.descripcion !== null && data.descripcion !== \"\")\r\n        object_date = { ...object_date, descripcion: data.descripcion };\r\n      if (data.id_categoria !== null && data.id_categoria !== \"\")\r\n        object_date = { ...object_date, id_categoria: data.id_categoria };\r\n      if (data.categoria !== null && data.categoria !== \"\")\r\n        object_date = { ...object_date, categoria: data.categoria };\r\n      if (data.subcategoria !== null && data.subcategoria !== \"\")\r\n        object_date = { ...object_date, subcategoria: data.subcategoria };\r\n      if (data.id_subcategoria !== null && data.id_subcategoria !== \"\")\r\n        object_date = { ...object_date, id_subcategoria: data.id_subcategoria };\r\n      if (data.id_departamento !== null && data.id_departamento !== \"\")\r\n        object_date = { ...object_date, id_departamento: data.id_departamento };\r\n      if (data.departamento !== null && data.departamento !== \"\")\r\n        object_date = { ...object_date, departamento: data.departamento };\r\n      if (data.id_marca !== null && data.id_marca !== \"\")\r\n        object_date = { ...object_date, id_marca: data.id_marca };\r\n      if (data.marca !== null && data.marca !== \"\")\r\n        object_date = { ...object_date, marca: data.marca };\r\n      if (data.clave_producto_sat.Name !== null && data.clave_producto_sat.Name !== \"\")\r\n        object_date = {\r\n          ...object_date,\r\n          clave_producto_sat: data.clave_producto_sat,\r\n        };\r\n      return object_date;\r\n    } else if (tipo === \"unidades_de_venta\") {\r\n      let end_array = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        let object = {\r\n          _id: data[i]._id,\r\n          cantidad: data[i].cantidad,\r\n          id_producto: data[i].id_producto,\r\n          precio: data[i].precio,\r\n          unidad_principal: data[i].unidad_principal,\r\n          unidad: data[i].unidad,\r\n          codigo_unidad: data[i].codigo_unidad,\r\n          precio_unidad: data[i].precio_unidad\r\n        };\r\n        if (data[i].codigo_barras !== null && data[i].codigo_barras !== \"\")\r\n          object = { ...object, codigo_barras: data[i].codigo_barras };\r\n        if (data[i].default !== null && data[i].default !== \"\")\r\n          object = { ...object, default: data[i].default };\r\n        if (data[i].descuento_activo !== null && data[i].descuento_activo !== \"\")\r\n          object = { ...object, descuento_activo: data[i].descuento_activo, descuento: data[i].descuento };\r\n          \r\n          end_array.push(object);\r\n      }\r\n      return end_array;\r\n    }\r\n  };","import React, { useState, Fragment, useContext, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  AppBar,\r\n  Badge,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport RegistroInfoGenerales from \"./DatosGenerales/registrarInfoGeneral\";\r\nimport RegistroInfoAdidional from \"../Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport CargarImagenesProducto from \"./Imagenes/cargarImagenesProducto\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistroAlmacenInicial from \"./Inventario&Almacen/AlmacenInicial\";\r\nimport ColoresTallas from \"./TallasColores/TallasColores\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO,\r\n  OBTENER_CONSULTAS,\r\n  ACTUALIZAR_PRODUCTO,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { validaciones } from \"./validaciones\";\r\nimport CentroCostos from \"./CentroCostos/CentroCostos\";\r\nimport PrecioPlazos from \"./PrecioPlazos/PrecioPlazos\";\r\n\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n} from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  Edit,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n} from \"@material-ui/icons\";\r\nimport { validateJsonEdit } from \"./validateDatos\";\r\n/* import { cleanTypenames } from \"../../../../config/reuserFunctions\"; */\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function CrearProducto({\r\n  accion,\r\n  datos,\r\n  productosRefetch,\r\n  fromCompra,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    setUpdate,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const tipo = datos_generales.tipo_producto;\r\n\r\n  /* Mutations */\r\n  const [crearProducto] = useMutation(CREAR_PRODUCTO);\r\n  const [actualizarProducto] = useMutation(ACTUALIZAR_PRODUCTO);\r\n\r\n  const toggleModal = (producto) => {\r\n    setOpen(!open);\r\n    setUpdate(accion);\r\n    if (producto && accion) {\r\n      setInitialStates(producto);\r\n    } else {\r\n      resetInitialStates();\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  /* ###### GUARDAR LA INFO EN LA BD ###### */\r\n\r\n  const saveData = async () => {\r\n    const validate = validaciones(\r\n      datos_generales,\r\n      precios,\r\n      almacen_inicial,\r\n      presentaciones,\r\n      almacen_existente\r\n    );\r\n\r\n    if (validate.error) {\r\n      setValidacion(validate);\r\n      return;\r\n    }\r\n    setValidacion(validate);\r\n    if (presentaciones.length > 0) {\r\n      const pres = presentaciones.filter(\r\n        (res) => res.color._id && res.medida._id\r\n      );\r\n\r\n      if (pres.length !== presentaciones.length) {\r\n        setValidacion({\r\n          error: true,\r\n          message: \"Faltan medidas o colores a tus presentaciones\",\r\n          vista7: true,\r\n        });\r\n        setAlert({\r\n          message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [...unidadesVenta];\r\n\r\n    if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    }\r\n\r\n    precios.precios_producto = preciosP;\r\n\r\n    let imagenes_without_aws = imagenes;\r\n    if (accion) {\r\n      imagenes_without_aws = [...imagenes].filter((res) => !res.key_imagen);\r\n    }\r\n\r\n    let input = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      imagenes: imagenes_without_aws,\r\n      imagenes_eliminadas,\r\n      almacen_inicial,\r\n      centro_de_costos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      presentaciones_eliminadas,\r\n      precio_plazos: preciosPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    /* const clean_data = cleanTypenames(input); */\r\n    /* console.log(input); */\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (accion) {\r\n        const result = await actualizarProducto({\r\n          variables: {\r\n            input,\r\n            id: datos._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.actualizarProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        const result = await crearProducto({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      toggleModal();\r\n      productosRefetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n    setValue(0);\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    /* const producto = cleanTypenames(product); */\r\n    /* console.log(producto); */\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    let unidades_venta = producto.unidades_de_venta.filter(\r\n      (res) => !res.default\r\n    );\r\n    let unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const { keyCode } = event;\r\n    if (keyCode === 114) {\r\n      document.getElementById(\"modal-registro-product\").click();\r\n    }\r\n  } /* CODIGO PARA PODER EJECUTAR LAS VENTANAS A BASE DE LAS TECLAS */\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      /* disabled={\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      } */\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (!accion && value === 5) {\r\n      return saveButton;\r\n    } else if (accion && tipo === \"OTROS\" && value === 5) {\r\n      return saveButton;\r\n    } else if (accion && tipo !== \"OTROS\" && value === 6) {\r\n      return saveButton;\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setValue(value + 1)}\r\n          size=\"large\"\r\n          endIcon={<NavigateNext />}\r\n          disableElevation\r\n        >\r\n          Siguiente\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\r\n      {!accion ? (\r\n        fromCompra ? (\r\n          <IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            id=\"modal-registro-product\"\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => toggleModal()}\r\n            startIcon={<Add />}\r\n          >\r\n            Nuevo\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton color=\"default\" onClick={() => toggleModal(datos)}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Datos generales\"\r\n                icon={\r\n                  <Badge\r\n                    color=\"secondary\"\r\n                    badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                    anchorOrigin={{\r\n                      vertical: \"bottom\",\r\n                      horizontal: \"right\",\r\n                    }}\r\n                    invisible={\r\n                      validacion.error && validacion.vista1 ? false : true\r\n                    }\r\n                  >\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                      alt=\"icono registro\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  </Badge>\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              <Tab\r\n                label=\"Precios de venta\"\r\n                icon={\r\n                  <Badge\r\n                    color=\"secondary\"\r\n                    badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                    anchorOrigin={{\r\n                      vertical: \"bottom\",\r\n                      horizontal: \"right\",\r\n                    }}\r\n                    invisible={\r\n                      validacion.error && validacion.vista2 ? false : true\r\n                    }\r\n                  >\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/etiqueta-de-precio.svg\"\r\n                      alt=\"icono venta\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  </Badge>\r\n                }\r\n                {...a11yProps(1)}\r\n              />\r\n              <Tab\r\n                label=\"Inventario y almacen\"\r\n                icon={\r\n                  <Badge\r\n                    color=\"secondary\"\r\n                    badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                    anchorOrigin={{\r\n                      vertical: \"bottom\",\r\n                      horizontal: \"right\",\r\n                    }}\r\n                    invisible={\r\n                      validacion.error && validacion.vista3 ? false : true\r\n                    }\r\n                  >\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tarea-completada.svg\"\r\n                      alt=\"icono almacen\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  </Badge>\r\n                }\r\n                {...a11yProps(2)}\r\n              />\r\n              <Tab\r\n                label=\"Centro de costos\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(3)}\r\n              />\r\n              <Tab\r\n                label=\"Precios a plazos\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/calendar.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(4)}\r\n              />\r\n              <Tab\r\n                label=\"Imagenes\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/imagenes.svg\"\r\n                    alt=\"icono imagenes\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(5)}\r\n              />\r\n              {accion ? (\r\n                datos_generales.tipo_producto !== \"OTROS\" ? (\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                          validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                ) : null\r\n              ) : null}\r\n            </Tabs>\r\n            {/* <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => toggleModal()} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box> */}\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={loading}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <ContenidoModal value={value} />\r\n        </DialogContent>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"inherit\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            disableElevation\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ContenidoModal = ({ value }) => {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, [refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TabPanel value={value} index={0}>\r\n        <RegistroInfoGenerales\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <RegistroInfoAdidional />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <RegistroAlmacenInicial\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <CentroCostos\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <PrecioPlazos />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <CargarImagenesProducto />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        <ColoresTallas\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function PreciosDeVentaCompras() {\r\n  const { preciosVenta } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Utilidad\", \"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {preciosVenta.map((data, index) => (\r\n                  <RenderPrecios\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    tipo={tipo}\r\n                  />\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPrecios = ({ data, tipo, index }) => {\r\n  const { preciosVenta, datosProducto, productoOriginal } = useContext(ComprasContext);\r\n  const { precios } = productoOriginal;\r\n\r\n  const [precio_neto, setPrecioNeto] = useState(data.precio_neto);\r\n\r\n  //creamos variables para trabajar con ellas, no causar errores y afectar las originales\r\n  let copy_preciosVenta = { ...preciosVenta[index] };\r\n\r\n  let precio_unitario_con_impuesto =\r\n    /* datosProducto.costo / datosProducto.cantidad; */\r\n    datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n  let precio_unitario_sin_impuesto =\r\n    /* precios.precio_de_compra.precio_sin_impuesto / datosProducto.cantidad; */\r\n    precios.precio_de_compra.precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n  if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n  if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n  const calculosCompra = useCallback(() => {\r\n    if (copy_preciosVenta.numero_precio === data.numero_precio) {\r\n      copy_preciosVenta.precio_neto = precio_unitario_con_impuesto;\r\n      setPrecioNeto(precio_unitario_con_impuesto);\r\n\r\n      let utilidad_base = data.utilidad ? data.utilidad : 0;\r\n      let utilidad = utilidad_base / 100;\r\n\r\n      const precio_venta = parseFloat((precio_unitario_sin_impuesto * utilidad + precio_unitario_sin_impuesto).toFixed(2));\r\n      copy_preciosVenta.precio_venta = parseFloat(\r\n        precio_venta.toFixed(2)\r\n      );\r\n      if (precios.iva_activo || precios.ieps_activo) {\r\n        const precio_neto =\r\n          precio_unitario_con_impuesto +\r\n          precio_unitario_con_impuesto * utilidad;\r\n\r\n        copy_preciosVenta.precio_neto = parseFloat(\r\n          precio_neto.toFixed(2)\r\n        );\r\n        setPrecioNeto(parseFloat(precio_neto.toFixed(2)));\r\n      } else {\r\n        copy_preciosVenta.precio_neto = parseFloat(\r\n          precio_venta.toFixed(2)\r\n        );\r\n        setPrecioNeto(parseFloat(precio_venta.toFixed(2)));\r\n      }\r\n      preciosVenta.splice(index, 1, copy_preciosVenta);\r\n    }\r\n  }, [datosProducto.costo, datosProducto.cantidad]);\r\n\r\n  useEffect(() => {\r\n    if(data.numero_precio === 1){\r\n      calculosCompra();\r\n    }else if(data.numero_precio > 1 && precio_neto){\r\n      calculosCompra();\r\n    }\r\n  }, [calculosCompra]);\r\n\r\n  switch (tipo) {\r\n    case \"Utilidad\":\r\n      return <TableCell style={{ border: 0 }}>{data.utilidad}%</TableCell>;\r\n    case \"Precio de venta\":\r\n      return <TableCell style={{ border: 0 }}>${parseFloat(precio_neto).toFixed(2)}</TableCell>;\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { Box, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function DescuentosInputs() {\r\n  const { datosProducto, setDatosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precio_sin_impuesto,\r\n    precio_con_impuesto,\r\n    iva,\r\n    ieps,\r\n  } = productoOriginal.precios.precio_de_compra;\r\n  const impuestos = iva + ieps;\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosProducto.subtotal * porcentaje) / 100\r\n    );\r\n    let subtotal = datosProducto.subtotal - cantidad_descontada;\r\n    let total = subtotal + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let cantidad_descontada = parseFloat(value);\r\n\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosProducto.subtotal) * 100\r\n    );\r\n    /* let descuento_porcentaje = 100 - porcentaje; */\r\n    /* let total = datosProducto.total - cantidad_descontada; */\r\n    let subtotal = datosProducto.subtotal - cantidad_descontada;\r\n    let total = subtotal + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" width={160}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPrecio(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_precio}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n          }}\r\n        />\r\n        <Box mr={1} />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_porcentaje}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n          }}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const ClienteCtx = createContext();\r\n\r\nexport const ClienteProvider = ({ children }) => {\r\n\tconst [ cliente, setCliente ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_cliente: true\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState(false);\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\tconst [updateClientVenta, setUpdateClientVenta] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<ClienteCtx.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcliente,\r\n\t\t\t\tsetCliente,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate,\r\n\t\t\t\tsetUpdateClientVenta,\r\n\t\t\t\tupdateClientVenta\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ClienteCtx.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider, Avatar } from \"@material-ui/core\";\r\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 200,\r\n    height: 200,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 170,\r\n    height: 170,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoBasica({ tipo, accion }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente, error } = useContext(ClienteCtx);\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setCliente({\r\n        ...cliente,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [cliente, setCliente]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setCliente({\r\n      ...cliente,\r\n      direccion: { ...cliente.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.input}>\r\n        <Grid item md={3} style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar variant=\"square\" className={classes.avatar} src={`${preview}`} />\r\n            ) : (\r\n              <Avatar variant=\"square\" className={classes.avatar} src={`${cliente.imagen}`} />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9}>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Nombre Cliente\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.nombre_cliente}\r\n                name=\"nombre_cliente\"\r\n                variant=\"outlined\"\r\n                value={cliente.nombre_cliente ? cliente.nombre_cliente : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Box>\r\n            {tipo === \"CLIENTE\" ? null : (\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  <span>* </span>Representante\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.representante}\r\n                  name=\"representante\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.representante ? cliente.representante : \"\"}\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n            )}\r\n          </div>\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" width=\"100%\">\r\n            <div className={classes.formInputFlex}>\r\n              {/* <Box width=\"100%\">\r\n\t\t\t\t\t\t\t\t<Typography>Huella dactilar</Typography>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</Box> */}\r\n              {tipo === \"CLIENTE\" ? null : (\r\n                <Box width=\"100%\">\r\n                  <Typography>\r\n                    <span>* </span>Tipo\r\n                  </Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"tipo_cliente\"\r\n                    variant=\"outlined\"\r\n                    value={tipo}\r\n                    onChange={obtenerCampos}\r\n                    disabled\r\n                  />\r\n                </Box>\r\n              )}\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  <span>* </span>Numero de cliente\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.numero_cliente}\r\n                  name=\"numero_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.numero_cliente ? cliente.numero_cliente : \"\"}\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled={accion !== \"registrar\" ? true : false}\r\n                  type=\"number\"\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  <span>* </span>Clave de cliente\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.clave_cliente}\r\n                  name=\"clave_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.clave_cliente ? cliente.clave_cliente : \"\"}\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled={accion !== \"registrar\" ? true : false}\r\n                  type=\"number\"\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\">\r\n                <Typography>CURP</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"curp\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.curp ? cliente.curp : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n            </div>\r\n          </Box>\r\n\t\t  <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Num. Telefono\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.telefono}\r\n                name=\"telefono\"\r\n                variant=\"outlined\"\r\n                value={cliente.telefono ? cliente.telefono : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>Num. Celular</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"celular\"\r\n                variant=\"outlined\"\r\n                value={cliente.celular ? cliente.celular : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Email\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.email}\r\n                name=\"email\"\r\n                variant=\"outlined\"\r\n                value={cliente.email ? cliente.email : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Box>\r\n          </div>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Box mt={2}>\r\n            <Typography>\r\n              <b>cliente domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box>\r\n              <Typography>\r\n                <span>* </span>Calle\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.calle ? cliente.direccion.calle : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <span>* </span>Colonia\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.colonia ? cliente.direccion.colonia : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100px\">\r\n              <Typography>\r\n                <span>* </span>Num. Ext\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_ext ? cliente.direccion.no_ext : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100px\">\r\n              <Typography>Num. Int</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_int ? cliente.direccion.no_int : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100px\">\r\n              <Typography>\r\n                <span>* </span>CP\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.codigo_postal\r\n                    ? cliente.direccion.codigo_postal\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Municipio\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.municipio ? cliente.direccion.municipio : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>Localidad</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.localidad ? cliente.direccion.localidad : \"\"\r\n                }\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Estado\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.estado ? cliente.direccion.estado : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <span>* </span>Pais\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.pais ? cliente.direccion.pais : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider } from \"@material-ui/core\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoCredito({ tipo }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente } = useContext(ClienteCtx);\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_descuento\" || name === \"limite_credito\") {\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={2}>\r\n        <Alert severity=\"info\">\r\n          Si deseas hacer facturas a este cliente el <b>RFC</b> y la <b>Razon social</b> son\r\n          obligatorios.\r\n        </Alert>\r\n      </Box>\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"100%\">\r\n          <Typography>RFC</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"rfc\"\r\n            variant=\"outlined\"\r\n            value={cliente.rfc ? cliente.rfc : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n        <Box width=\"100%\">\r\n          <Typography>Razon social</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"razon_social\"\r\n            variant=\"outlined\"\r\n            value={cliente.razon_social ? cliente.razon_social : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n      </div>\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"100%\">\r\n          <Typography>Descuento</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"numero_descuento\"\r\n            variant=\"outlined\"\r\n            value={cliente.numero_descuento ? cliente.numero_descuento : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n        <Box width=\"100%\">\r\n          <Typography>Limite de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"limite_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.limite_credito ? cliente.limite_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n        <Box width=\"100%\">\r\n          <Typography>Días de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"dias_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.dias_credito ? cliente.dias_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n      </div>\r\n      {tipo !== \"CLIENTE\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography>\r\n              Datos bancarios <b>(Para proovedores)</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>Banco</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"banco\"\r\n                variant=\"outlined\"\r\n                value={cliente.banco ? cliente.banco : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>No. de Cuenta Bancaria</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"numero_cuenta\"\r\n                variant=\"outlined\"\r\n                value={cliente.numero_cuenta ? cliente.numero_cuenta : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Box>\r\n          </div>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CLIENTE = gql`\r\n\tmutation crearCliente($input: CrearClienteInput) {\r\n\t\tcrearCliente(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CLIENTES = gql`\r\n\tquery obtenerClientes($tipo: String!, $filtro: String) {\r\n\t\tobtenerClientes(tipo: $tipo, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t\tbanco\r\n\t\t\tnumero_cuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\tmonedero_electronico\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CLIENTE = gql`\r\n\tmutation actualizarCliente($input: ActualizarClienteInput, $id: ID!) {\r\n\t\tactualizarCliente(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CLIENTE = gql`\r\n\tmutation eliminarCliente($id: ID!) {\r\n\t\teliminarCliente(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  AppBar,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n} from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, Tabs, Tab, Box } from \"@material-ui/core\";\r\nimport RegistrarInfoBasica from \"./RegistrarInfoBasica\";\r\nimport RegistrarInfoCredito from \"./RegistroInfoCredito\";\r\nimport { Add, Edit } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CLIENTE,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} minHeight=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nexport default function CrearCliente({\r\n  tipo,\r\n  accion,\r\n  datos,\r\n  refetch,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    cliente,\r\n    setCliente,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n    updateClientVenta,\r\n    setUpdateClientVenta,\r\n  } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setCliente({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      estado_cliente: true,\r\n    });\r\n  }, [setCliente]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      setCliente(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearCliente] = useMutation(CREAR_CLIENTE);\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const saveData = async () => {\r\n    if (\r\n      !cliente.numero_cliente ||\r\n      !cliente.clave_cliente ||\r\n      !cliente.nombre_cliente ||\r\n      !cliente.telefono ||\r\n      !cliente.email ||\r\n      !cliente.direccion.calle ||\r\n      !cliente.direccion.municipio ||\r\n      !cliente.direccion.estado ||\r\n      !cliente.direccion.pais\r\n    ) {\r\n      if (tipo !== \"CLIENTE\" && !cliente.representante) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(true);\r\n      return;\r\n    }\r\n    console.log(cliente);\r\n    /* setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        cliente.tipo_cliente = tipo;\r\n        cliente.empresa = sesion.empresa._id;\r\n        cliente.sucursal = sesion.sucursal._id;\r\n        if (tipo === \"CLIENTE\") {\r\n          cliente.representante = \"\";\r\n        }\r\n        const input = cliente;\r\n        const clienteBase = await crearCliente({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (ventas === true) {\r\n          const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n          let venta_actual = venta === null ? {} : venta;\r\n          // console.log(venta_actual);\r\n          localStorage.setItem(\r\n            \"DatosVentas\",\r\n            JSON.stringify({\r\n              subTotal:\r\n                venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n              total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n              impuestos:\r\n                venta_actual.impuestos === undefined\r\n                  ? 0\r\n                  : venta_actual.impuestos,\r\n              iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n              ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n              descuento:\r\n                venta_actual.descuento === undefined\r\n                  ? 0\r\n                  : venta_actual.descuento,\r\n              monedero: venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n              tipo_cambio: venta_actual.tipo_cambio\r\n                ? venta_actual.tipo_cambio\r\n                : {},\r\n              cliente: clienteBase.data.crearCliente,\r\n              venta_cliente: true,\r\n              productos:\r\n                venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n            })\r\n            \r\n          );\r\n          setUpdateClientVenta(!updateClientVenta);\r\n          onCloseModal();\r\n          handleClickOpen();\r\n        }\r\n      } else {\r\n        const {\r\n          numero_cliente,\r\n          _id,\r\n          clave_cliente,\r\n          sucursal,\r\n          empresa,\r\n          ...input\r\n        } = cliente;\r\n        await actualizarCliente({\r\n          variables: {\r\n            input: input,\r\n            id: cliente._id,\r\n          },\r\n        });\r\n      }\r\n      if (refetch) {\r\n        refetch();\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError(false);\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      console.log(error);\r\n      setLoading(false);\r\n    } */\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        refetch ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n          >\r\n            <Add /> Nuevo {tipo}\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Información básica\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/perfil.svg\"\r\n                    alt=\"icono perfil\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              <Tab\r\n                label=\"Datos fiscales\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/fiscal.svg\"\r\n                    alt=\"icono factura\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(1)}\r\n              />\r\n            </Tabs>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TabPanel value={value} index={0}>\r\n            <RegistrarInfoBasica tipo={tipo} accion={accion} />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <RegistrarInfoCredito tipo={tipo} accion={accion} />\r\n          </TabPanel>\r\n        </DialogContent>\r\n        <DialogActions style={{justifyContent: \"center\"}}>\r\n          <Button\r\n            color=\"inherit\"\r\n            onClick={onCloseModal}\r\n            size=\"large\"\r\n            startIcon={<CloseIcon />}\r\n          >\r\n            Cerrar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={saveData}\r\n            size=\"large\"\r\n            startIcon={<DoneIcon />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COMPRA = gql`\r\n  mutation crearCompra(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompra(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_COMPRA_ESPERA = gql`\r\n  mutation crearCompraEnEspera(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompraEnEspera(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_REALIZADAS = gql`\r\n  query obtenerComprasRealizadas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $fecha: String\r\n  ) {\r\n    obtenerComprasRealizadas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      fecha: $fecha\r\n    ) {\r\n      _id\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_ESPERA = gql`\r\n  query obtenerComprasEnEspera($empresa: ID!, $sucursal: ID!, $filtro: String) {\r\n    obtenerComprasEnEspera(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      en_espera\r\n      proveedor {\r\n        id_proveedor\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      productos {\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              ieps\r\n              iva\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            granel\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          presentaciones {\r\n            _id\r\n            almacen\r\n            cantidad\r\n            cantidad_nueva\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        id_producto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        subtotal_descuento\r\n        total_descuento\r\n      }\r\n      impuestos\r\n      subtotal\r\n      total\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CONSULTA_GENERAL_PRODUCTO = gql`\r\n  query obtenerConsultaGeneralCompras($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralCompras(empresa: $empresa, sucursal: $sucursal) {\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          granel\r\n        }\r\n        imagenes {\r\n          url_imagen\r\n          location_imagen\r\n          key_imagen\r\n          extencion_imagen\r\n        }\r\n        centro_de_costos {\r\n          cuenta\r\n          id_cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          empresa\r\n          sucursal\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_barras\r\n          color {\r\n            hex\r\n            nombre\r\n            _id\r\n          }\r\n          existencia\r\n          medida {\r\n            talla\r\n            tipo\r\n            _id\r\n          }\r\n          nombre_comercial\r\n          precio\r\n        }\r\n        medidas_registradas\r\n        empresa\r\n        sucursal\r\n        usuario\r\n      }\r\n      proveedores {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n        id_usuario_encargado {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n          email\r\n          imagen\r\n          estado_usuario\r\n        }\r\n        id_sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          usuario_sucursal\r\n        }\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_COMPRA_ESPERA = gql`\r\n  mutation eliminarCompraEnEspera($id: ID!) {\r\n    eliminarCompraEnEspera(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { initial_state_precios } from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from 'moment';\r\n\r\nexport const initial_state_datosProducto = {\r\n  producto: {},\r\n  costo: 0,\r\n  cantidad: 0,\r\n  cantidad_regalo: 0,\r\n  unidad_regalo: '',\r\n  cantidad_total: 0,\r\n  descuento_porcentaje: 0,\r\n  descuento_precio: 0,\r\n  iva_total: 0,\r\n  ieps_total: 0,\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  mantener_precio: true,\r\n  subtotal_descuento: 0,\r\n  total_descuento: 0,\r\n};\r\n\r\nexport const initial_state_datosCompra = {\r\n  productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n};\r\n\r\nexport const initial_state_precios_venta = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_productoOriginal = {\r\n  precios: initial_state_precios,\r\n};\r\nexport const initial_state_productosCompra = [];\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { ClienteProvider } from \"../../../../../context/Catalogos/crearClienteCtx\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport RegistroProvedor from \"../../../Catalogos/Cliente/CrearCliente\";\r\nimport RegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTA_GENERAL_PRODUCTO } from \"../../../../../gql/Compras/compras\";\r\nimport { ErrorOutline } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nexport default function DatosProveedorAlmacen({\r\n  refetchProductos,\r\n  getProductos,\r\n  status,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosCompra,\r\n    setDatosCompra,\r\n    setDatosProducto,\r\n    productosCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONSULTA_GENERAL_PRODUCTO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n    }\r\n  );\r\n\r\n  const obtenerProveedorAlmacen = (tipo, value) => {\r\n    if (!value) {\r\n      setDatosCompra({ ...datosCompra, [tipo]: {} });\r\n      return;\r\n    }\r\n    if (tipo === \"proveedor\") {\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        proveedor: {\r\n          id_proveedor: value._id,\r\n          nombre_cliente: value.nombre_cliente,\r\n          numero_cliente: value.numero_cliente,\r\n          clave_cliente: value.clave_cliente,\r\n        },\r\n      });\r\n    } else {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      resetInitialStates();\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        almacen: {\r\n          id_almacen: value._id,\r\n          nombre_almacen: value.nombre_almacen,\r\n        },\r\n      });\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: value._id,\r\n        almacen: value.nombre_almacen,\r\n      });\r\n      getProductos({\r\n        variables: {\r\n          almacen: value._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  const errorRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          value=\"Error\"\r\n          error\r\n          disabled\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <ErrorOutline fontSize=\"default\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  const loadingRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          disabled\r\n          value=\"Cargando...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <CircularProgress size={24} />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {loadingRender}\r\n        {loadingRender}\r\n        {loadingRender}\r\n      </Grid>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Grid container spacing={2} alignItems=\"center\">\r\n          {errorRender}\r\n          {errorRender}\r\n          {errorRender}\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  const { almacenes, proveedores } = data.obtenerConsultaGeneralCompras;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-proveedor\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={proveedores}\r\n              getOptionLabel={(option) => option.nombre_cliente}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Proveedor\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) =>\r\n                obtenerProveedorAlmacen(\"proveedor\", value)\r\n              }\r\n              getOptionSelected={(option) => option.nombre_cliente}\r\n              value={\r\n                datosCompra.proveedor.nombre_cliente\r\n                  ? datosCompra.proveedor\r\n                  : null\r\n              }\r\n            />\r\n            <ClienteProvider>\r\n              <RegistroProvedor\r\n                accion=\"registrar\"\r\n                tipo=\"PROVEEDOR\"\r\n                refetch={refetch}\r\n              />\r\n            </ClienteProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-almacen\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={almacenes}\r\n              getOptionLabel={(option) => option.nombre_almacen}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Almacen\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerProveedorAlmacen(\"almacen\", value)}\r\n              getOptionSelected={(option) => option.nombre_almacen}\r\n              value={\r\n                datosCompra.almacen.nombre_almacen ? datosCompra.almacen : null\r\n              }\r\n            />\r\n            <AlmacenProvider>\r\n              <RegistroAlmacen accion=\"registrar\" refetch={refetch} />\r\n            </AlmacenProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                console.log(e.target.value);\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_registro: e.target.value,\r\n                });\r\n              }}\r\n              value={datosCompra.fecha_registro}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function MostrarPrecios() {\r\n  const { datosProducto } = useContext(ComprasContext);\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n\r\n  if (presentaciones.length > 0) {\r\n    let cantida_suma = 0;\r\n    let cantidad_total = 0;\r\n    presentaciones.forEach((presentacion) => {\r\n      const { cantidad, cantidad_nueva } = presentacion;\r\n      let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n\r\n      cantida_suma += cantidad + nueva;\r\n    });\r\n    if (isNaN(cantida_suma)) cantidad_total = 0;\r\n    cantidad_total = cantida_suma; \r\n\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * cantidad_total\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  } else {\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * datosProducto.cantidad\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport PreciosProductos from \"./PreciosProductos\";\r\nimport TallasProductos from \"./TallasProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport CrearProducto, {\r\n  initial_state_preciosP,\r\n} from \"../../../Catalogos/Producto/crearProducto\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../../gql/Catalogos/productos\";\r\nimport PreciosDeVentaCompras from \"./PreciosVenta\";\r\nimport { validateJsonEdit } from \"../../../Catalogos/Producto/validateDatos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\nimport DescuentosInputs from \"./Descuentos\";\r\nimport DatosProveedorAlmacen from \"./DatosProveedorAlmacen\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport MostrarPrecios from \"./mostrar_precios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nexport default function DatosProducto({ status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosProducto,\r\n    setDatosProducto,\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    productoOriginal,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    setDatosCompra,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setEditFinish,\r\n    costo,\r\n    setCosto,\r\n    cantidad,\r\n    setCantidad,\r\n    loadingProductos,\r\n    setLoadingProductos,\r\n  } = useContext(ComprasContext);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n  } = useContext(RegProductoContext);\r\n  const [verificate, setVerificate] = useState(false);\r\n\r\n  let count = 0;\r\n  if (status === \"enEspera\" && datosCompra) count = 1;\r\n\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  /* Queries */\r\n  const [getProductos, { loading, data, error, refetch }] = useLazyQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  /* console.log(error.networkError.result);\r\n   */\r\n  const [COSTO] = useDebounce(costo, 500);\r\n  const [CANTIDAD] = useDebounce(cantidad, 500);\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      setLoadingProductos(true);\r\n    } else {\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCosto(COSTO);\r\n  }, [COSTO]);\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCantidad(CANTIDAD);\r\n  }, [CANTIDAD]);\r\n\r\n  useEffect(() => {\r\n    if (count === 1) {\r\n      getProductos({\r\n        variables: {\r\n          almacen: datosCompra.almacen._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n    }\r\n  }, [count]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"20vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={200} />;\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  const obtenerSelectsProducto = (producto) => {\r\n    /* console.log(producto); */\r\n    if (!producto) {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      resetInitialStates();\r\n      return;\r\n    }\r\n\r\n    const {\r\n      ieps,\r\n      iva,\r\n      precio_con_impuesto,\r\n      precio_sin_impuesto,\r\n    } = producto.precios.precio_de_compra;\r\n\r\n    const impuestos = iva + ieps;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      producto,\r\n      id_producto: producto._id,\r\n      costo: precio_con_impuesto,\r\n      cantidad: 1,\r\n      unidad_regalo: producto.precios.unidad_de_compra.unidad,\r\n      descuento_porcentaje: 0,\r\n      descuento_precio: 0,\r\n      subtotal: precio_sin_impuesto,\r\n      impuestos: parseFloat(impuestos.toFixed(6)),\r\n      total: precio_con_impuesto,\r\n      subtotal_descuento: precio_sin_impuesto,\r\n      total_descuento: precio_con_impuesto,\r\n    });\r\n    setInitialStates(producto);\r\n    setCosto(precio_con_impuesto);\r\n    setCantidad(1);\r\n    setProductoOriginal(producto);\r\n    setPreciosVenta(producto.precios.precios_producto);\r\n  };\r\n\r\n  const obtenerCantidad = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerCantidadRegalo = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad_regalo: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad_regalo: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerUnidadRegalo = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerCosto = (value) => {\r\n    /* const { name, value } = e.target; */\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: \"\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const { iva, ieps, precio_de_compra } = datosProducto.producto.precios;\r\n    const iva_precio = precio_de_compra.iva;\r\n    const ieps_precio = precio_de_compra.ieps;\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let subtotal = 0;\r\n    let total = 0;\r\n    let cantidad_descontada = 0;\r\n    let impuesto_actual = iva_precio + ieps_precio;\r\n\r\n    let precio_sin_impuesto = precio_neto - impuesto_actual;\r\n    let nuevo_iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    let nuevo_ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    let nuevo_impuesto = nuevo_ieps + nuevo_iva\r\n\r\n    if (datosProducto.descuento_porcentaje > 0) {\r\n      cantidad_descontada = Math.round(\r\n        (precio_sin_impuesto * datosProducto.descuento_porcentaje) / 100\r\n      );\r\n      subtotal = precio_sin_impuesto - cantidad_descontada;\r\n      total = subtotal + nuevo_impuesto;\r\n\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: parseFloat(precio_neto),\r\n        descuento_precio: parseFloat(cantidad_descontada),\r\n        subtotal_descuento: parseFloat(subtotal),\r\n        total_descuento: parseFloat(total),\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      costo: parseFloat(precio_neto),\r\n      subtotal_descuento: parseFloat(precio_sin_impuesto),\r\n      total_descuento: parseFloat(precio_sin_impuesto + nuevo_impuesto),\r\n    });\r\n  };\r\n\r\n  const agregarCompra = async (actualizar_Precios) => {\r\n    let copy_datosProducto = { ...datosProducto };\r\n    let copy_datosGenerales = { ...datos_generales };\r\n    let copy_presentaciones = [...presentaciones];\r\n    let copy_precios = { ...precios };\r\n    let copy_preciosP = [...preciosP];\r\n    let copy_almacenInicial = { ...almacen_inicial };\r\n    let copy_centroCostos = { ...centro_de_costos };\r\n    let copy_presentacionesEliminadas = [...presentaciones_eliminadas];\r\n    let copy_precioPlazos = { ...preciosPlazos };\r\n\r\n    /* Validaciones */\r\n    setCargando(true);\r\n    if (\r\n      !copy_datosProducto.producto.datos_generales ||\r\n      !datosCompra.proveedor.nombre_cliente ||\r\n      !datosCompra.almacen.nombre_almacen\r\n    ) {\r\n      setCargando(false);\r\n      return;\r\n    }\r\n\r\n    if (copy_datosGenerales.tipo_producto !== \"OTROS\") {\r\n      if (copy_presentaciones.length > 0) {\r\n        const pres = copy_presentaciones.filter(\r\n          (res) => res.color._id && res.medida._id && res.existencia\r\n        );\r\n        if (pres.length !== copy_presentaciones.length) {\r\n          setVerificate(true);\r\n          setCargando(false);\r\n          return;\r\n        }\r\n      } else {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [...unidadesVenta];\r\n\r\n    if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    }\r\n\r\n    if (actualizar_Precios) {\r\n      copy_datosProducto.mantener_precio = false;\r\n    } else {\r\n      copy_datosProducto.mantener_precio = true;\r\n    }\r\n    copy_precios.precios_producto = copy_preciosP;\r\n\r\n    let producto = {\r\n      datos_generales: await validateJsonEdit(\r\n        copy_datosGenerales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios: copy_precios,\r\n      imagenes,\r\n      imagenes_eliminadas,\r\n      almacen_inicial: copy_almacenInicial,\r\n      centro_de_costos: copy_centroCostos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones: copy_presentaciones,\r\n      presentaciones_eliminadas: copy_presentacionesEliminadas,\r\n      precio_plazos: copy_precioPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    copy_datosProducto.producto = producto;\r\n\r\n    if (copy_datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n      //si son medidas sumas las cantidades de las presetnaciones\r\n      if (copy_datosProducto.producto.presentaciones.length > 0) {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n          const { cantidad, cantidad_nueva } = presentacion;\r\n          let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n          copy_datosProducto.cantidad += cantidad + nueva;\r\n        });\r\n        if (isNaN(copy_datosProducto.cantidad)) copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      } else {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      }\r\n    } else {\r\n      //Si hay cantidad regalo y es diferente unidad hacer las converciones\r\n      const { cantidad_regalo, cantidad, unidad_regalo } = copy_datosProducto;\r\n      //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n      const factor =\r\n        copy_datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n      const cantiad_media = cantidad * factor;\r\n      let cantidad_regalo_media =\r\n        unidad_regalo === \"Pz\" ||\r\n        unidad_regalo === \"Kg\" ||\r\n        unidad_regalo === \"Lt\"\r\n          ? cantidad_regalo\r\n          : cantidad_regalo * factor;\r\n      let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n      //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n      if (factor > 1) {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media / factor;\r\n      } else {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media;\r\n      }\r\n    }\r\n    copy_datosProducto.subtotal = copy_datosProducto.subtotal_descuento;\r\n    copy_datosProducto.total = copy_datosProducto.total_descuento;\r\n\r\n    if (isEditing.producto) {\r\n      //se tiene que actualizar el producto en la fila y sumar el subtotal\r\n      let productosCompra_ordenados = [...productosCompra];\r\n      //calculos de totales, subtotales e impuestos de compra general\r\n      const {\r\n        iva,\r\n        ieps,\r\n      } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n      copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.ieps_total = ieps * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.subtotal =\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.impuestos =\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.total =\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n      let subtotal =\r\n        datosCompra.subtotal +\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.subtotal;\r\n      let impuestos =\r\n        datosCompra.impuestos +\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.impuestos;\r\n      let total =\r\n        datosCompra.total +\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.total;\r\n\r\n      productosCompra_ordenados.splice(isEditing.index, 1, copy_datosProducto);\r\n\r\n      setProductosCompra(productosCompra_ordenados);\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        subtotal,\r\n        impuestos,\r\n        total,\r\n      });\r\n      setIsEditing({});\r\n      setEditFinish(!editFinish);\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    } else {\r\n      // se agregar el producto normal y verificar si ya esta el producto en la lista\r\n\r\n      const existente = productosCompra\r\n        .map((prod_exist, index) => {\r\n          if (prod_exist.id_producto === copy_datosProducto.id_producto) {\r\n            return { prod_exist, index };\r\n          } else {\r\n            return \"\";\r\n          }\r\n        })\r\n        .filter(Boolean);\r\n\r\n      if (existente.length > 0) {\r\n        let productosCompra_ordenados = [...productosCompra];\r\n        const { index, prod_exist } = existente[0];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        productosCompra_ordenados.splice(index, 1, copy_datosProducto);\r\n        setProductosCompra(productosCompra_ordenados);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal:\r\n            datosCompra.subtotal -\r\n            prod_exist.subtotal +\r\n            copy_datosProducto.subtotal,\r\n          impuestos:\r\n            datosCompra.impuestos -\r\n            prod_exist.impuestos +\r\n            copy_datosProducto.impuestos,\r\n          total:\r\n            datosCompra.total - prod_exist.total + copy_datosProducto.total,\r\n        });\r\n      } else {\r\n        let array_ordenado = [...productosCompra];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        array_ordenado.splice(0, 0, copy_datosProducto);\r\n        setProductosCompra(array_ordenado);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal: datosCompra.subtotal + copy_datosProducto.subtotal,\r\n          impuestos: datosCompra.impuestos + copy_datosProducto.impuestos,\r\n          total: datosCompra.total + copy_datosProducto.total,\r\n        });\r\n      }\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    let unidades_venta = producto.unidades_de_venta.filter(\r\n      (res) => !res.default\r\n    );\r\n    const unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (\r\n      datosCompra.almacen.id_almacen &&\r\n      producto.medidas_producto.length === 0\r\n    ) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <DatosProveedorAlmacen\r\n        status={status}\r\n        refetchProductos={refetch}\r\n        getProductos={getProductos}\r\n      />\r\n      <Box my={1} />\r\n      <Grid container spacing={1} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography>Código de barras</Typography>\r\n          <Box width={200}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-codigo\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.codigo_barras\r\n                  ? option.datos_generales.codigo_barras\r\n                  : \"N/A\"\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Producto</Typography>\r\n          <Box display=\"flex\" width={250} alignItems=\"center\">\r\n            <Autocomplete\r\n              id=\"combo-box-producto-nombre\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.nombre_comercial\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n            {!datosCompra.almacen.id_almacen ||\r\n            !datosCompra.proveedor.id_proveedor ? (\r\n              <IconButton disabled>\r\n                <Add />\r\n              </IconButton>\r\n            ) : (\r\n              <CrearProducto\r\n                accion={false}\r\n                productosRefetch={refetch}\r\n                fromCompra={true}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Clave</Typography>\r\n          <Box width={140}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-clave\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) => option.datos_generales.clave_alterna}\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Costo</Typography>\r\n          <Box width={100}>\r\n            <TextField\r\n              inputMode=\"decimal\"\r\n              name=\"costo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              disabled={!datosProducto.producto.datos_generales}\r\n              value={costo}\r\n              onChange={(e) => setCosto(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item>\r\n              <Typography>Unidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  aria-readonly=\"true\"\r\n                  value={datosProducto.producto.precios.unidad_de_compra.unidad}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cantidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={cantidad}\r\n                  onChange={(e) => setCantidad(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cant. regalo</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad_regalo\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={datosProducto.cantidad_regalo}\r\n                  onChange={(e) => obtenerCantidadRegalo(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Unidad. regalo</Typography>\r\n              <Box width={100}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  name=\"unidad_regalo\"\r\n                  fullWidth\r\n                >\r\n                  {datosProducto.producto.precios.granel ? (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Kg\">Kg</MenuItem>\r\n                      <MenuItem value=\"Costal\">Costal</MenuItem>\r\n                      <MenuItem value=\"Lt\">Lt</MenuItem>\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Caja\">Caja</MenuItem>\r\n                      <MenuItem value=\"Pz\">Pz</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </FormControl>\r\n              </Box>\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n\r\n        <Grid item>\r\n          <Typography>Descuento</Typography>\r\n          <DescuentosInputs />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1}>\r\n        <Grid container>\r\n          <Grid item xs={12} md={7} padding=\"checkbox\">\r\n            <PreciosDeVentaCompras />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={5}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Box m={1}>\r\n              <MostrarPrecios />\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              {datosProducto.producto.datos_generales &&\r\n              datosProducto.producto.datos_generales.tipo_producto !==\r\n                \"OTROS\" ? (\r\n                <TallasProductos\r\n                  verificate={verificate}\r\n                  setVerificate={setVerificate}\r\n                />\r\n              ) : null}\r\n\r\n              <Box mx={1} />\r\n              {datosProducto.costo !==\r\n              productoOriginal.precios.precio_de_compra.precio_con_impuesto ? (\r\n                <ModalAgregarCompra\r\n                  agregarCompra={agregarCompra}\r\n                  cargando={cargando}\r\n                />\r\n              ) : (\r\n                <Button\r\n                  style={\r\n                    loadingProductos\r\n                      ? {\r\n                          pointerEvents: \"none\",\r\n                          opacity: 0.4,\r\n                        }\r\n                      : null\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={\r\n                    cargando ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : (\r\n                      <Add />\r\n                    )\r\n                  }\r\n                  disableElevation\r\n                  disabled={\r\n                    datosProducto.producto.datos_generales\r\n                      ? datosProducto.producto.datos_generales.tipo_producto ===\r\n                        \"OTROS\"\r\n                        ? !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo ||\r\n                          !datosProducto.cantidad\r\n                          ? true\r\n                          : false\r\n                        : !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo\r\n                        ? true\r\n                        : false\r\n                      : true\r\n                  }\r\n                  onClick={() => agregarCompra()}\r\n                >\r\n                  {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalAgregarCompra = ({ agregarCompra, cargando }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    datosProducto,\r\n    datosCompra,\r\n    isEditing,\r\n    loadingProductos,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<Add />}\r\n        disableElevation\r\n        disabled={\r\n          datosProducto.producto.datos_generales\r\n            ? datosProducto.producto.datos_generales.tipo_producto === \"OTROS\"\r\n              ? !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo ||\r\n                !datosProducto.cantidad\r\n                ? true\r\n                : false\r\n              : !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo\r\n              ? true\r\n              : false\r\n            : true\r\n        }\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"modal-agregar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-agregar-compra\" style={{ padding: 0 }}>\r\n          <Alert\r\n            severity=\"info\"\r\n            icon={<InfoOutlined style={{ fontSize: 30 }} />}\r\n            style={{ padding: 16 }}\r\n          >\r\n            <AlertTitle style={{ fontSize: 20 }}>\r\n              El costo es diferente al precio de compra actual\r\n            </AlertTitle>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              ¿Desea actualizar los precios o mantenerlos?\r\n            </Typography>\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"default\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              agregarCompra();\r\n              handleClose();\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Mantener\r\n          </Button>\r\n          <PreciosProductos\r\n            cargando={cargando}\r\n            handleClose={handleClose}\r\n            agregarCompra={agregarCompra}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport { initial_state_preciosP } from \"../../../Catalogos/Producto/crearProducto\";\r\n\r\nexport const SetOrResetData = (accion,setStates, producto) => {\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n    datosCompra\r\n  } = setStates\r\n\r\n  if (accion === \"SET\") {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default\r\n    );\r\n\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(producto.unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setPresentaciones(\r\n      producto.presentaciones ? producto.presentaciones : []\r\n    );\r\n    /* if (datosCompra.almacen.id_almacen && !producto.medidas_registradas) */\r\n    if (datosCompra.almacen.id_almacen && producto.presentaciones.length === 0) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n  } else {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  }\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { Close, Edit, Error } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"./initial_states\";\r\nimport { SetOrResetData } from \"./productos/setOrResetData\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaCompras() {\r\n  const classes = useStyles();\r\n  const { productosCompra, loadingProductos, datosCompra } = useContext(\r\n    ComprasContext\r\n  );\r\n\r\n  const productos_ordernados = [...productosCompra];\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer\r\n        className={classes.container}\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Código de barras</TableCell>\r\n              <TableCell>Producto</TableCell>\r\n              <TableCell>Precio de compra</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad regalo</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad total</TableCell>\r\n              <TableCell padding=\"checkbox\">Presentaciones</TableCell>\r\n              <TableCell>IVA</TableCell>\r\n              <TableCell>IEPS</TableCell>\r\n              <TableCell>Total IVA</TableCell>\r\n              <TableCell>Total IEPS</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Remover</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos_ordernados.map((producto, index) => {\r\n              return (\r\n                <RenderProductosCompra\r\n                  key={index}\r\n                  producto={producto}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n        <Grid container spacing={2}>\r\n          <Grid item>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              Subtotal: <b>${ datosCompra.subtotal ? formatoMexico(datosCompra.subtotal) : 0}</b>\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              Impuestos: <b>${datosCompra.impuestos ? formatoMexico(datosCompra.impuestos) : 0}</b>\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              <b>Total: ${datosCompra.total ? formatoMexico(datosCompra.total) : 0}</b>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderProductosCompra = ({ producto, index }) => {\r\n  const {\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setCosto,\r\n    setCantidad,\r\n    setIssue,\r\n  } = useContext(ComprasContext);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const productoCTX = useContext(RegProductoContext);\r\n\r\n  const seStates = {\r\n    setDatosGenerales: productoCTX.setDatosGenerales,\r\n    setPrecios: productoCTX.setPrecios,\r\n    setValidacion: productoCTX.setValidacion,\r\n    setPreciosP: productoCTX.setPreciosP,\r\n    setImagenes: productoCTX.setImagenes,\r\n    setUnidadesVenta: productoCTX.setUnidadesVenta,\r\n    almacen_inicial: productoCTX.almacen_inicial,\r\n    setAlmacenInicial: productoCTX.setAlmacenInicial,\r\n    setUnidadVentaXDefecto: productoCTX.setUnidadVentaXDefecto,\r\n    setCentroDeCostos: productoCTX.setCentroDeCostos,\r\n    setPreciosPlazos: productoCTX.setPreciosPlazos,\r\n    setSubcategorias: productoCTX.setSubcategorias,\r\n    setOnPreview: productoCTX.setOnPreview,\r\n    setSubcostos: productoCTX.setSubcostos,\r\n    setImagenesEliminadas: productoCTX.setImagenesEliminadas,\r\n    setPresentaciones: productoCTX.setPresentaciones,\r\n    setPresentacionesEliminadas: productoCTX.setPresentacionesEliminadas,\r\n    datosCompra,\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsSelected(true);\r\n    setIsEditing({ producto, index, finish: false });\r\n    setDatosProducto(producto);\r\n    SetOrResetData(\"SET\", seStates, producto.producto);\r\n    setProductoOriginal(producto.producto);\r\n    setPreciosVenta(producto.producto.precios.precios_producto);\r\n    setCosto(producto.costo);\r\n    setCantidad(producto.cantidad);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsSelected(false);\r\n    setIsEditing({});\r\n    setDatosProducto(initial_state_datosProducto);\r\n    SetOrResetData(\"RESET\", seStates);\r\n    setCosto(0);\r\n    setCantidad(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(false);\r\n  }, [editFinish]);\r\n\r\n  useEffect(() => {\r\n    if (!producto.cantidad) {\r\n    } else {\r\n      setIssue(false);\r\n    }\r\n  }, [producto.cantidad]);\r\n\r\n  const unidad_producto = producto.producto.precios.unidad_de_compra.unidad;\r\n  const { cantidad, cantidad_regalo, cantidad_total } = producto;\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={isSelected || !cantidad}\r\n      style={\r\n        isEditing.producto && !isSelected\r\n          ? {\r\n              pointerEvents: \"none\",\r\n              opacity: 0.4,\r\n            }\r\n          : null\r\n      }\r\n    >\r\n      <TableCell>\r\n        {producto.producto.datos_generales\r\n          ? producto.producto.datos_generales.codigo_barras\r\n            ? producto.producto.datos_generales.codigo_barras\r\n            : \"-\"\r\n          : \"-\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell width={180}>\r\n        {!cantidad ? (\r\n          <Error color=\"error\" />\r\n        ) : (\r\n          <b>$ {formatoMexico(producto.total)}</b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_regalo}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_total}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.presentaciones.length > 0\r\n          ? producto.producto.presentaciones.length\r\n          : \"N/A\"}\r\n      </TableCell>\r\n      <TableCell>{producto.producto.precios.iva}%</TableCell>\r\n      <TableCell>{producto.producto.precios.ieps}%</TableCell>\r\n      <TableCell>${producto.iva_total}</TableCell>\r\n      <TableCell>${producto.ieps_total}</TableCell>\r\n      <TableCell>\r\n        {isSelected ? (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            onClick={() => handleCancelEdit()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton color=\"primary\" size=\"small\" onClick={() => handleEdit()}>\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalDeleteProducto index={index} isSelected={isSelected} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalDeleteProducto = ({ index, isSelected }) => {\r\n  const {\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n  } = useContext(ComprasContext);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarCompra = () => {\r\n    let copy_compras = [...productosCompra];\r\n    let objeto_eliminado = copy_compras.splice(index, 1);\r\n\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      subtotal: datosCompra.subtotal - objeto_eliminado[0].subtotal,\r\n      impuestos: datosCompra.impuestos - objeto_eliminado[0].impuestos,\r\n      total: datosCompra.total - objeto_eliminado[0].total,\r\n    });\r\n    setProductosCompra([...copy_compras]);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        onClick={handleClickOpen}\r\n        disabled={isSelected}\r\n      >\r\n        <RemoveCircleOutlineIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          Seguro que quiere eliminar esto de la lista?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={eliminarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  CircularProgress,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { Done } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConfirmarCompra({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n    issue,\r\n    descuentoCompra,\r\n    setDescuentoCompra,\r\n  } = useContext(ComprasContext);\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n    let precio_con_descuento = datosCompra.subtotal - cantidad_descontada;\r\n\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      subtotal: parseFloat((precio_con_descuento).toFixed(2)),\r\n      total: parseFloat((precio_con_descuento + datosCompra.impuestos).toFixed(2)),\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      precio_con_descuento: parseFloat((precio_con_descuento).toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n    /* let descuento_porcentaje = 100 - porcentaje; */\r\n    let precio_con_descuento = datosCompra.subtotal - cantidad_descontada;\r\n\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      subtotal: parseFloat((precio_con_descuento).toFixed(2)),\r\n      total: parseFloat((precio_con_descuento + datosCompra.impuestos).toFixed(2)),\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      precio_con_descuento: parseFloat((precio_con_descuento).toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<Done />}\r\n      >\r\n        Realizar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"dialog-confirmacion-compra\"\r\n        aria-describedby=\"dialog-confirmacion-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <Typography>\r\n              <b>Total de productos:</b>\r\n              {\" \" + productosCompra.length}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Subtotal:</b>\r\n              {\" $\" +\r\n                formatoMexico(\r\n                  !descuentoCompra.subtotal\r\n                    ? datosCompra.subtotal\r\n                    : descuentoCompra.subtotal\r\n                )}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Impuestos:</b>\r\n              {\" $\" + formatoMexico(datosCompra.impuestos)}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Total:</b>\r\n              {\" $\" +\r\n                formatoMexico(\r\n                  !descuentoCompra.total\r\n                    ? datosCompra.total\r\n                    : descuentoCompra.total\r\n                )}\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Box my={2}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"forma_pago\"\r\n            >\r\n              <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n              <Select\r\n                labelId=\"forma_pago\"\r\n                value={datosCompra.forma_pago}\r\n                name=\"forma_pago\"\r\n                onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                label=\"Forma de pago\"\r\n              >\r\n                {formaPago.map((res, index) => (\r\n                  <MenuItem\r\n                    key={index}\r\n                    value={res.Value}\r\n                  >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={descuentoCompra.descuento_aplicado}\r\n                  onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                  name=\"descuento_aplicado\"\r\n                />\r\n              }\r\n              label=\"Aplicar descuento\"\r\n            />\r\n            <Grid container spacing={2}>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPrecio(e.target.value)}\r\n                  disabled={!descuentoCompra.descuento_aplicado}\r\n                  value={descuentoCompra.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n                  disabled={!descuentoCompra.descuento_aplicado}\r\n                  value={descuentoCompra.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"inherit\"\r\n            disabled={loading_modal}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() =>\r\n              realizarCompraBD(false, undefined, handleClose, setLoadingModal)\r\n            }\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal || !datosCompra.forma_pago}\r\n          >\r\n            Realizar Compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  CircularProgress,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { CreditCard, Done } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CompraCredito({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n    issue,\r\n    descuentoCompra,\r\n    setDescuentoCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n    let precio_con_descuento = datosCompra.subtotal - cantidad_descontada;\r\n\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      subtotal: parseFloat(precio_con_descuento.toFixed(2)),\r\n      total: parseFloat(\r\n        (precio_con_descuento + datosCompra.impuestos).toFixed(2)\r\n      ),\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      precio_con_descuento: parseFloat(precio_con_descuento.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoCompra({\r\n        ...descuentoCompra,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n    /* let descuento_porcentaje = 100 - porcentaje; */\r\n    let precio_con_descuento = datosCompra.subtotal - cantidad_descontada;\r\n\r\n    setDescuentoCompra({\r\n      ...descuentoCompra,\r\n      subtotal: parseFloat(precio_con_descuento.toFixed(2)),\r\n      total: parseFloat(\r\n        (precio_con_descuento + datosCompra.impuestos).toFixed(2)\r\n      ),\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      precio_con_descuento: parseFloat(precio_con_descuento.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<CreditCard />}\r\n      >\r\n        Compra a Credito\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"dialog-compra-credito\"\r\n        aria-describedby=\"dialog-compra-credito-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle id=\"dialog-compra-credito\">\r\n          {\"Comprar a credito\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <Typography>\r\n              <b>Total de productos:</b>\r\n              {\" \" + productosCompra.length}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Subtotal:</b>\r\n              {\" $\" +\r\n                formatoMexico(\r\n                  !descuentoCompra.subtotal\r\n                    ? datosCompra.subtotal\r\n                    : descuentoCompra.subtotal\r\n                )}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Impuestos:</b>\r\n              {\" $\" + formatoMexico(datosCompra.impuestos)}\r\n            </Typography>\r\n            <Typography>\r\n              <b>Total:</b>\r\n              {\" $\" +\r\n                formatoMexico(\r\n                  !descuentoCompra.total\r\n                    ? datosCompra.total\r\n                    : descuentoCompra.total\r\n                )}\r\n            </Typography>\r\n          </Box>\r\n          <Box my={2}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"forma_pago\"\r\n            >\r\n              <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n              <Select\r\n                labelId=\"forma_pago\"\r\n                value={datosCompra.forma_pago}\r\n                name=\"forma_pago\"\r\n                onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                label=\"Forma de pago\"\r\n              >\r\n                {formaPago.map((res, index) => (\r\n                  <MenuItem\r\n                    key={index}\r\n                    value={res.Value}\r\n                  >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={descuentoCompra.descuento_aplicado}\r\n                  onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                  name=\"descuento_aplicado\"\r\n                />\r\n              }\r\n              label=\"Aplicar descuento\"\r\n            />\r\n            <Grid container spacing={2}>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPrecio(e.target.value)}\r\n                  disabled={!descuentoCompra.descuento_aplicado}\r\n                  value={descuentoCompra.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n                  disabled={!descuentoCompra.descuento_aplicado}\r\n                  value={descuentoCompra.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box>\r\n            <Typography>Fecha de vencimiento del crédito</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_vencimiento_credito: e.target.value,\r\n                });\r\n              }}\r\n              value={datosCompra.fecha_vencimiento_credito}\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"inherit\"\r\n            disabled={loading_modal}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() =>\r\n              realizarCompraBD(false, \"credito\", handleClose, setLoadingModal)\r\n            }\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal}\r\n          >\r\n            Realizar Compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DatosProducto from \"./productos/DatosProducto\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport ListaCompras from \"./TablaCompras\";\r\nimport {\r\n  ComprasContext,\r\n  ComprasProvider,\r\n} from \"../../../../context/Compras/comprasContext\";\r\nimport \"date-fns\";\r\nimport { Done, Timer } from \"@material-ui/icons\";\r\nimport {\r\n  initial_state_datosCompra,\r\n  initial_state_datosProducto,\r\n  initial_state_precios_venta,\r\n  initial_state_productoOriginal,\r\n  initial_state_productosCompra,\r\n} from \"./initial_states\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_COMPRA,\r\n  CREAR_COMPRA_ESPERA,\r\n} from \"../../../../gql/Compras/compras\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ConfirmarCompra from \"./ConfirmarCompra\";\r\nimport CompraCredito from \"./CompraCredito\";\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCompra({\r\n  compra,\r\n  status,\r\n  handleOpenDetalles,\r\n  refetchEspera,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    if (status === \"enEspera\") {\r\n      handleOpenDetalles();\r\n      refetchEspera();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {status === \"enEspera\" ? (\r\n        <Button\r\n          fullWidth\r\n          onClick={handleClickOpen}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Done />}\r\n        >\r\n          continuar compra\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Abrir una compra\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <ComprasProvider>\r\n        <ModalCompra\r\n          open={open}\r\n          handleClose={handleClose}\r\n          status={status}\r\n          compra={compra}\r\n        />\r\n      </ComprasProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalCompra = ({ open, handleClose, compra, status }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    issue,\r\n    descuentoCompra,\r\n    setDescuentoCompra,\r\n  } = useContext(ComprasContext);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearCompra] = useMutation(CREAR_COMPRA);\r\n  const [crearCompraEnEspera] = useMutation(CREAR_COMPRA_ESPERA);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setDescuentoCompra({\r\n      subtotal: 0,\r\n      total: 0,\r\n      descuento_aplicado: false,\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"enEspera\" && compra && open === true) {\r\n      setDatosCompra(compra);\r\n      setProductosCompra(compra.productos);\r\n    }\r\n  }, [open]);\r\n\r\n  const realizarCompraBD = async (\r\n    compra_en_espera,\r\n    credito,\r\n    handleClose,\r\n    setLoadingModal\r\n  ) => {\r\n    let datos = { ...datosCompra };\r\n    let productos = productosCompra;\r\n    if (status === \"enEspera\") {\r\n      productos = productosCompra.map((res) => {\r\n        delete res.conflicto;\r\n        return res;\r\n      });\r\n      delete datos.empresa;\r\n      delete datos.sucursal;\r\n      delete datos.usuario;\r\n    }\r\n\r\n    setLoading(true);\r\n    if (credito) setLoadingModal(true);\r\n    try {\r\n      datos.productos = productos;\r\n\r\n      if (compra_en_espera) {\r\n        datos.en_espera = true;\r\n        const result = await crearCompraEnEspera({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompraEnEspera.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        if (credito) {\r\n          datos.compra_credito = true;\r\n          datos.saldo_credito_pendiente = datos.total;\r\n        }\r\n        if (descuentoCompra.descuento_aplicado) {\r\n          const {\r\n            descuento_aplicado,\r\n            subtotal,\r\n            total,\r\n            ...descuento\r\n          } = descuentoCompra;\r\n          datos.descuento_aplicado = descuentoCompra.descuento_aplicado;\r\n          datos.subtotal = descuentoCompra.subtotal;\r\n          datos.total = descuentoCompra.total;\r\n          datos.descuento = descuento;\r\n        }\r\n        /* console.log(datos); */\r\n        const result = await crearCompra({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompra.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      limpiarCampos();\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error de servidor`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleDelete = () => {\r\n    if (productosCompra.length > 0) {\r\n      setOpenDelete(!openDelete);\r\n    } else {\r\n      limpiarCampos();\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      onClose={handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle style={{ padding: 0 }}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Nueva compra\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleToggleDelete}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n              <CancelarCompra\r\n                handleClose={handleClose}\r\n                handleToggleDelete={handleToggleDelete}\r\n                openDelete={openDelete}\r\n              />\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DatosProducto status={status} />\r\n        <Box my={2} />\r\n        <ListaCompras />\r\n      </DialogContent>\r\n\r\n      <DialogActions style={{ justifyContent: \"center\" }}>\r\n        <Button\r\n          color=\"inherit\"\r\n          size=\"large\"\r\n          onClick={() => handleToggleDelete()}\r\n          startIcon={<Close />}\r\n        >\r\n          Cancelar\r\n        </Button>\r\n        {status === \"enEspera\" ? null : (\r\n          <Button\r\n            autoFocus\r\n            color=\"primary\"\r\n            variant=\"text\"\r\n            size=\"large\"\r\n            onClick={() => realizarCompraBD(true)} //realiza la compra en espera en la funcion\r\n            disabled={!productosCompra.length}\r\n            startIcon={<Timer />}\r\n          >\r\n            Compra en espera\r\n          </Button>\r\n        )}\r\n        <CompraCredito realizarCompraBD={realizarCompraBD} />\r\n        <ConfirmarCompra realizarCompraBD={realizarCompraBD} />\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CancelarCompra = ({ handleClose, handleToggleDelete, openDelete }) => {\r\n  const {\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setPreciosVenta,\r\n    setProductoOriginal,\r\n    setDatosProducto,\r\n  } = useContext(ComprasContext);\r\n\r\n  const cancelarCompra = () => {\r\n    /* reset states */\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    /* cerrar modales */\r\n    handleToggleDelete();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={openDelete}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleToggleDelete}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          ¿Quieres cancelar esta compra?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleToggleDelete} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={cancelarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosComprasExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosComprasExcel from \"./ExportarProductosCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n        {compra.compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            compra.credito_pagado === true ? 'Credito pagado' : `Saldo pendiente: $${formatoMexico(compra.saldo_credito_pendiente)}`\r\n          }\r\n          color={compra.credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosComprasExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosDeCompra\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Compra a credito</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    compra_credito,\r\n    credito_pagado,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        {compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            credito_pagado === true ? 'Credito: Pagado' : \"Credito: Pendiente\"\r\n          }\r\n          color={credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaCompras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarComprasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcInspection className={classes.icon} />\r\n          </Box>\r\n          Compras realizadas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras realizadas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CheckCircle, Done, VerifiedUser } from \"@material-ui/icons\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VerificarProductosCompras({\r\n  compra,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setVerificado,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (success) {\r\n      setVerificado(true);\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={<VerifiedUser />}\r\n      >\r\n        Continuar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        /* onClose={() => handleClose()} */\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-verificarcompra-title\"\r\n        aria-describedby=\"dialog-verificarcompra-description\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <ModalVerificacion\r\n          handleClose={handleClose}\r\n          compra={compra}\r\n          handleClickOpen={handleClickOpen}\r\n          open={open}\r\n          nuevoArray={nuevoArray}\r\n          setNuevoArray={setNuevoArray}\r\n          setSuccess={setSuccess}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalVerificacion = ({\r\n  handleClose,\r\n  compra,\r\n  handleClickOpen,\r\n  open,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setSuccess,\r\n}) => {\r\n  const [loadingVerificacion, setLoadingVerificacion] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let count = 0;\r\n\r\n  /* Queries */\r\n  const [getQuery, { loading, data, error }] = useLazyQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      almacen: compra.almacen.id_almacen,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) count = 1;\r\n\r\n  useEffect(() => {\r\n    if (open && count === 0) {\r\n      getQuery();\r\n      count = 1;\r\n    }\r\n  }, [handleClickOpen]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      verificarProductos();\r\n    }\r\n  }, [data]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent\r\n          style={{\r\n            height: 150,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <DialogContentText id=\"dialog-verificarcompra-description\">\r\n            Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n            quitaran al retomar la compra para no causar conflictos, podras\r\n            editar tu compra mas adelante\r\n          </DialogContentText>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Obteniendo productos de la Base de datos...\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <ErrorPage error={error} altura={130} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  /* console.log(compra); */\r\n\r\n  function verificarProductos() {\r\n    setLoadingVerificacion(true);\r\n    const { productos } = compra;\r\n    let productos_nuevos = [...productos];\r\n    let conflicto = false;\r\n\r\n    for (let i = 0; i < productos.length; i++) {\r\n      const productosCompra = productos[i];\r\n      let copy_producto_compra = { ...productosCompra };\r\n      let copy_producto = { ...productosCompra.producto };\r\n\r\n      //Filtrar los productos\r\n      const productos_filtrados = obtenerProductos.filter(\r\n        (res) => res._id === copy_producto_compra.id_producto\r\n      );\r\n\r\n      const { precios, unidades_de_venta, presentaciones } = copy_producto;\r\n\r\n      const precios_base = productos_filtrados[0].precios;\r\n      const unidades_base = productos_filtrados[0].unidades_de_venta;\r\n      const presentaciones_base = productos_filtrados[0].medidas_producto;\r\n\r\n      //verificacion de Precios\r\n      if (\r\n        precios.unidad_de_compra.cantidad !==\r\n          precios_base.unidad_de_compra.cantidad ||\r\n        precios.unidad_de_compra.precio_unitario_con_impuesto !==\r\n          precios_base.unidad_de_compra.precio_unitario_con_impuesto ||\r\n        precios.unidad_de_compra.unidad !== precios_base.unidad_de_compra.unidad\r\n      ) {\r\n        /* console.log(\"conflicto precios\"); */\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.precios = precios_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n      }\r\n      //verificacion de Unidades de venta\r\n      const u_default = unidades_de_venta.filter((res) => res.default === true);\r\n      const u_default_base = unidades_base.filter(\r\n        (res) => res.default === true\r\n      );\r\n      if (\r\n        u_default[0].cantidad !== u_default_base[0].cantidad ||\r\n        u_default[0].precio !== u_default_base[0].precio ||\r\n        u_default[0].unidad !== u_default_base[0].unidad\r\n      ) {\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.unidades_de_venta = unidades_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n        /* console.log(\"conflicto unidades\"); */\r\n      }\r\n\r\n      //verificacion de Presentaciones si hay presentaciones\r\n\r\n      if (presentaciones.length > 0) {\r\n        /* console.log(presentaciones, presentaciones_base); */\r\n        if (presentaciones_base.length > 0) {\r\n          if (presentaciones.length === presentaciones_base.length) {\r\n            for (let x = 0; x < presentaciones.length; x++) {\r\n              const present = presentaciones[x];\r\n              for (let y = 0; y < presentaciones_base.length; y++) {\r\n                const present_base = presentaciones_base[y];\r\n\r\n                if (\r\n                  present.medida._id === present_base.medida._id &&\r\n                  present.color._id === present_base.color._id &&\r\n                  present.almacen === present_base.almacen\r\n                ) {\r\n                  if (\r\n                    present.cantidad !== present_base.cantidad ||\r\n                    present.precio !== present_base.precio\r\n                  ) {\r\n                    //si son diferentes se agrega las presentaciones_base al compra_nueva\r\n                    copy_producto.presentaciones = presentaciones_base;\r\n                    copy_producto_compra.producto = copy_producto;\r\n                    copy_producto_compra.conflicto = true;\r\n                    productos_nuevos[i] = copy_producto_compra;\r\n                    conflicto = true;\r\n                    /* console.log(\"conflicto presentaciones\"); */\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            //si son diferentes se agrega las presentaciones al compra_nueva\r\n            copy_producto.presentaciones = presentaciones_base;\r\n            copy_producto_compra.producto = copy_producto;\r\n            copy_producto_compra.conflicto = true;\r\n            productos_nuevos[i] = copy_producto_compra;\r\n            conflicto = true;\r\n            /* console.log(\"conflicto diferentes presentaciones \"); */\r\n          }\r\n        } else {\r\n          //si no hay se agrega las presentaciones al compra_nueva\r\n          copy_producto_compra.conflicto = true;\r\n          productos_nuevos[i] = copy_producto_compra;\r\n          conflicto = true;\r\n          /* console.log(\"conflicto sin presentaciones \"); */\r\n        }\r\n      }\r\n    }\r\n\r\n    const nuevo_producto_compra = [];\r\n    let subtotal = 0;\r\n    let impuestos = 0;\r\n    let total = 0;\r\n    if (conflicto) {\r\n      for (let k = 0; k < productos_nuevos.length; k++) {\r\n        const datosProducto = { ...productos_nuevos[k] };\r\n\r\n        if (datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n          //si es calzado o ropa\r\n          //CANTIDADES\r\n          if (datosProducto.producto.presentaciones.length > 0) {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n              const { cantidad, cantidad_nueva } = presentacion;\r\n              let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n              datosProducto.cantidad += cantidad + nueva;\r\n            });\r\n            if (isNaN(datosProducto.cantidad)) datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          } else {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          }\r\n        } else {\r\n          //Si es una unidad normal\r\n\r\n          //CANTIDADES\r\n          const { cantidad_regalo, cantidad, unidad_regalo } = datosProducto;\r\n          //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n          const factor =\r\n            datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n          const cantiad_media = cantidad * factor;\r\n          let cantidad_regalo_media =\r\n            unidad_regalo === \"Pz\" ||\r\n            unidad_regalo === \"Kg\" ||\r\n            unidad_regalo === \"Lt\"\r\n              ? cantidad_regalo\r\n              : cantidad_regalo * factor;\r\n          let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n          //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n          if (factor > 1) {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n            datosProducto.cantidad_total = cantidad_total_media / factor;\r\n          } else {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n            datosProducto.cantidad_total = cantidad_total_media;\r\n          }\r\n        }\r\n\r\n        //PRECIOS\r\n        const {\r\n          iva,\r\n          ieps,\r\n          precio_con_impuesto,\r\n          precio_sin_impuesto,\r\n        } = datosProducto.producto.precios.precio_de_compra;\r\n\r\n        datosProducto.total_con_descuento = precio_con_impuesto;\r\n        datosProducto.costo = precio_con_impuesto;\r\n        datosProducto.iva_total = iva * datosProducto.cantidad_total;\r\n        datosProducto.ieps_total = ieps * datosProducto.cantidad_total;\r\n        datosProducto.impuestos = (iva + ieps) * datosProducto.cantidad_total;\r\n        datosProducto.subtotal =\r\n          precio_sin_impuesto * datosProducto.cantidad_total;\r\n        datosProducto.total =\r\n          precio_con_impuesto * datosProducto.cantidad_total;\r\n\r\n        if (datosProducto.descuento_porcentaje > 0) {\r\n          datosProducto.descuento_precio = Math.round(\r\n            (precio_con_impuesto * datosProducto.descuento_porcentaje) / 100\r\n          );\r\n          datosProducto.total_con_descuento =\r\n            precio_con_impuesto - datosProducto.descuento_precio;\r\n        }\r\n\r\n        subtotal += datosProducto.subtotal;\r\n        impuestos += datosProducto.impuestos;\r\n        total +=\r\n          datosProducto.total_con_descuento * datosProducto.cantidad_total;\r\n\r\n        nuevo_producto_compra.push(datosProducto);\r\n      }\r\n      setNuevoArray({\r\n        _id: compra._id,\r\n        almacen: compra.almacen,\r\n        proveedor: compra.proveedor,\r\n        productos: nuevo_producto_compra,\r\n        en_espera: compra.en_espera,\r\n        fecha_registro: compra.fecha_registro,\r\n        impuestos,\r\n        subtotal,\r\n        total,\r\n      });\r\n    } else {\r\n      setNuevoArray(compra);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      setLoadingVerificacion(false);\r\n      setSuccess(true);\r\n    }, 1500);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent\r\n        style={{\r\n          height: 150,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <DialogContentText id=\"dialog-verificarcompra-description\">\r\n          Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n          quitaran al retomar la compra para no causar conflictos, podras editar\r\n          tu compra mas adelante\r\n        </DialogContentText>\r\n        {loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Verificando existencias en tus productos...\r\n          </Box>\r\n        ) : null}\r\n        {!loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CheckCircle color=\"primary\" style={{ marginRight: 8 }} />\r\n            Listo, producto verificados\r\n          </Box>\r\n        ) : null}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {loadingVerificacion ? (\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        ) : (\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Done />}>\r\n            Aceptar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport AbrirCompra from \"../AbrirCompra/AbrirCompra\";\r\nimport VerificarProductosCompras from \"./VerificarProductos\";\r\n\r\nimport {\r\n  Dialog,\r\n  CircularProgress,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { CheckCircle, DeleteOutlined, Done, Error } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /* let compra_temp = {...compra} */\r\n  const [compra_temp, setCompraTemp] = useState({ ...compra });\r\n  const { productos } = compra_temp;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const [nuevoArray, setNuevoArray] = useState();\r\n  const [verificado, setVerificado] = useState(false);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  useEffect(() => {\r\n    if (verificado && nuevoArray) {\r\n      setCompraTemp(nuevoArray);\r\n    }\r\n  }, [verificado]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra_temp.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra_temp.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${parseFloat(compra_temp.subtotal).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${parseFloat(compra_temp.impuestos).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${formatoMexico(parseFloat(compra_temp.total).toFixed(2))}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n                <ModalEliminarCompra\r\n                  compra={compra_temp}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n\r\n              {permisosUsuario.accesos.compras.compras_espera.editar === false ? (null) : (\r\n                verificado ? (\r\n                  <AbrirCompra\r\n                    compra={compra_temp}\r\n                    status=\"enEspera\"\r\n                    handleOpenDetalles={handleOpenDetalles}\r\n                    refetchEspera={refetch}\r\n                  />\r\n                ) : (\r\n                  <VerificarProductosCompras\r\n                    compra={compra_temp}\r\n                    nuevoArray={nuevoArray}\r\n                    setNuevoArray={setNuevoArray}\r\n                    setVerificado={setVerificado}\r\n                  />\r\n                )\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {verificado ? <TableCell /> : null}\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                /* console.log(datos); */\r\n                return (\r\n                  <TableRow\r\n                    tabIndex={-1}\r\n                    key={index}\r\n                    selected={datos.conflicto}\r\n                  >\r\n                    {verificado ? (\r\n                      <TableCell\r\n                        style={{\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                        }}\r\n                      >\r\n                        {datos.conflicto ? (\r\n                          <Error color=\"primary\" />\r\n                        ) : (\r\n                          <CheckCircle\r\n                            style={{\r\n                              color: theme.palette.success.main,\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    ) : null}\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalEliminarCompra = ({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n      handleOpenDetalles();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"secondary\"\r\n        startIcon={<DeleteOutlined />}\r\n        onClick={() => handleOpen()}\r\n      >\r\n        Eliminar compra\r\n      </Button>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DatosDeCompraEspera from \"./DatosDeCompraEspera\";\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, DeleteOutlined, Done } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaEnEspera({ obtenerComprasEnEspera, refetch }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Detalles</TableCell>\r\n              {permisosUsuario.accesos.compras.compras_espera.elimina === false ? (null) : (\r\n                <TableCell>Eliminar</TableCell>\r\n              )}\r\n              </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasEnEspera.map((compra, index) => (\r\n              <RenderRowsComprasEspera\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsComprasEspera = ({ compra, refetch, setAlert }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalContinuarCompra\r\n          compra={compra}\r\n          refetch={refetch}\r\n          setAlert={setAlert}\r\n        />\r\n      </TableCell>\r\n      {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n        <TableCell>\r\n          <ModalEliminarCompra\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalContinuarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra en espera\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompraEspera\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            handleOpenDetalles={handleOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <DeleteOutlined color=\"error\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useRef, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FcOvertime } from \"react-icons/fc\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport ListaEnEspera from \"./ListaEnEspera\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { OBTENER_COMPRAS_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasEnEspera() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcOvertime className={classes.icon} />\r\n          </Box>\r\n          Compras en espera\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras en espera\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COMPRAS_ESPERA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasEnEspera = [];\r\n  if (data) obtenerComprasEnEspera = data.obtenerComprasEnEspera;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value });\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3} maxWidth={500}>\r\n        <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n          <TextField\r\n            inputRef={searchfilter}\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Buscar una compra...\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                    <SearchOutlined />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </form>\r\n      </Box>\r\n      <ListaEnEspera obtenerComprasEnEspera={obtenerComprasEnEspera} refetch={refetch} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport AbrirCompra from './AbrirCompra/AbrirCompra';\r\nimport ComprasRealizadas from './ComprasRealizadas/ComprasRealizadas';\r\n/* import CargaMasiva from './CargaMasiva/CargaMasiva'; */\r\nimport ComprasEnEspera from './ComprasEnEspera/ComprasEnEspera';\r\n\r\n\r\nexport default function Compras() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t{permisosUsuario.accesos.compras.abrir_compra.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<AbrirCompra />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_realizadas.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasRealizadas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_espera.ver === false ? (null):(\r\n                <Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasEnEspera />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t\t{/* <Grid item md={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CargaMasiva />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useContext, useEffect, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  Divider,\r\n  Grid,\r\n  DialogContentText,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  Typography,\r\n  Avatar,\r\n  Switch,\r\n} from \"@material-ui/core\";\r\nimport { Dehaze, Delete } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CLIENTES,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\n\r\n// const columns = [\r\n// \t{ id: 1, label: 'No. Cliente', minWidth: 100 },\r\n// \t{ id: 2, label: 'Clave', minWidth: 100 },\r\n// \t{ id: 3, label: 'Nombre', minWidth: 150 },\r\n// \t{ id: 4, label: 'Razon Social', minWidth: 150 },\r\n// \t{ id: 5, label: 'Correo', minWidth: 150 },\r\n// \t{ id: 6, label: 'Tipo de Cliente', minWidth: 100 },\r\n// \t{ id: 7, label: 'Estado', minWidth: 100 },\r\n// \t{ id: 8, label: 'Detalles', minWidth: 50, align: 'right' },\r\n// \t{ id: 9, label: 'Editar', minWidth: 50, align: 'right' },\r\n// \t{ id: 10, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n// ]; \r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaClientes({\r\n  user,\r\n  tipo,\r\n  filtro,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const classes = useStyles();\r\n  const { update, setUpdateClientVenta, updateClientVenta  } = useContext(ClienteCtx);\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [value] = useDebounce(filtro, 1000);\r\n  const [selectDataClient, setSelectDataClient] = useState(false);\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo, filtro: value },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  //show modal accept client\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const [dataSelectRowClient, setDataSelectRowClient] = useState({});\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const handleClickOpenModal = (data, e) => {\r\n    console.log(ventas, selectDataClient);\r\n    if (ventas && !selectDataClient) {\r\n      setShowModal(true);\r\n      setDataSelectRowClient(data);\r\n    }\r\n  };\r\n\r\n  const handleClickSelectClient = () => {\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      console.log(venta_actual);\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero: venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          cliente: dataSelectRowClient,\r\n          venta_cliente: true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n        })\r\n      );\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setShowModal(!showModal);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n        width=\"120vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n              <TableCell minwidth=\"100\">Clave</TableCell>\r\n              <TableCell minwidth=\"150\">Nombre</TableCell>\r\n              <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              <TableCell minwidth=\"150\">Correo</TableCell>\r\n              <TableCell minwidth=\"100\">Tipo de Cliente</TableCell>\r\n              {user === \"EMPLEADO\" ? null : (\r\n                <TableCell minwidth=\"100\">Estado</TableCell>\r\n              )}\r\n              <TableCell minwidth=\"50\">Detalles</TableCell>\r\n              <TableCell minwidth=\"50\">Editar</TableCell>\r\n              {user === \"EMPLEADO\" ? null : (\r\n                <TableCell minwidth=\"50\">Eliminar</TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes\r\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              .map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    user={user}\r\n                    key={index}\r\n                    datos={row}\r\n                    ventas={ventas}\r\n                    handleClickOpenModal={handleClickOpenModal}\r\n                    setShowModal={setShowModal}\r\n                    setSelectDataClient={setSelectDataClient}\r\n                  />\r\n                );\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerClientes.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n      <Dialog\r\n        open={showModal}\r\n        onClose={() => setShowModal(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\" Estas seguro que desea seleccionar este cliente ?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Al seleccionar el cliente se colocara en la venta.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setShowModal(false)} color=\"primary\" autoFocus>\r\n            cancelar\r\n          </Button>\r\n          <Button onClick={() => handleClickSelectClient()} color=\"primary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  user,\r\n  handleClickOpenModal,\r\n  ventas,\r\n  setShowModal,\r\n  setSelectDataClient,\r\n}) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [openDetalles, setOpenDetalles] = useState(false);\r\n  const { update, setUpdate } = useContext(ClienteCtx);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleDetalles = () => {\r\n    setSelectDataClient(true);\r\n    setOpenDetalles(!openDetalles);\r\n    // if(ventas){\r\n\r\n    //   setShowModal(false);\r\n    // }\r\n  };\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            estado_cliente: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleClickOpenModal(datos, e)}\r\n      >\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.razon_social}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.tipo_cliente}</Typography>\r\n        </TableCell>\r\n        {user === \"EMPLEADO\" ? null : (\r\n          <TableCell>\r\n            {loading ? (\r\n              <CircularProgress size={30} />\r\n            ) : (\r\n              <Switch\r\n                checked={datos.estado_cliente}\r\n                onChange={cambiarEstado}\r\n                color=\"primary\"\r\n              />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        <TableCell width={50}>\r\n          {ventas ? (\r\n            \"\"\r\n          ) : (\r\n            <ModalDetalles\r\n              openDetalles={openDetalles}\r\n              handleDetalles={handleDetalles}\r\n              datos={datos}\r\n              ventas={ventas}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <CrearCliente tipo=\"CLIENTE\" accion=\"actualizar\" datos={datos} />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <IconButton color=\"secondary\">\r\n              <Delete />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalDetalles = ({ handleDetalles, openDetalles, datos }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div>\r\n      <IconButton onClick={handleDetalles}>\r\n        <Dehaze />\r\n      </IconButton>\r\n      <Dialog\r\n        open={openDetalles}\r\n        onClose={handleDetalles}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>{\"Información completa del cliente\"}</DialogTitle>\r\n        <DialogContent>\r\n          <Box mt={3}>\r\n            <Typography variant=\"h6\">Información básica</Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box\r\n              mt={3}\r\n              height={120}\r\n              width={120}\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Avatar className={classes.avatar} src={datos.imagen} />\r\n            </Box>\r\n            <ul>\r\n              <Typography>\r\n                <b>Número de cliente: </b>\r\n                {datos.numero_cliente}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Clave: </b>\r\n                {datos.clave_cliente}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Representante: </b>\r\n                {datos.representante}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Nombre cliente/empresa: </b>\r\n                {datos.nombre_cliente}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Razon social: </b>\r\n                {datos.razon_social}\r\n              </Typography>\r\n              <Typography>\r\n                <b>RFC: </b>\r\n                {datos.rfc ? datos.rfc : \" -\"}\r\n              </Typography>\r\n            </ul>\r\n            <ul>\r\n              <Typography>\r\n                <b>CURP: </b>\r\n                {datos.curp ? datos.curp : \" -\"}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Telefono: </b>\r\n                {datos.telefono ? datos.telefono : \" -\"}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Celular: </b>\r\n                {datos.celular ? datos.celular : \" -\"}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Correo: </b>\r\n                {datos.email ? datos.email : \" -\"}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Estado del cliente: </b>\r\n                {datos.estado_cliente ? \"Activo\" : \"Inactivo\"}\r\n              </Typography>\r\n              <Typography>\r\n                <b>Tipo: </b>\r\n                {datos.tipo_cliente}\r\n              </Typography>\r\n            </ul>\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6}>\r\n              <Box mt={3}>\r\n                <Typography>\r\n                  <b>Dirección</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box display=\"flex\">\r\n                <ul>\r\n                  <Typography>\r\n                    <b>Calle: </b>\r\n                    {datos.direccion.calle}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>No. Exterior: </b>\r\n                    {datos.direccion.no_ext}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>No. Interior: </b>\r\n                    {datos.direccion.no_int ? datos.direccion.no_int : \" -\"}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Código postal: </b>\r\n                    {datos.direccion.codigo_postal}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Colonia: </b>\r\n                    {datos.direccion.colonia}\r\n                  </Typography>\r\n                </ul>\r\n                <ul>\r\n                  <Typography>\r\n                    <b>Municipio: </b>\r\n                    {datos.direccion.municipio}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Localidad: </b>\r\n                    {datos.direccion.localidad\r\n                      ? datos.direccion.localidad\r\n                      : \" -\"}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Estado: </b>\r\n                    {datos.direccion.estado}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Pais: </b>\r\n                    {datos.direccion.pais}\r\n                  </Typography>\r\n                </ul>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6}>\r\n              <Box mt={3}>\r\n                <Typography>\r\n                  <b>Información crediticia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box display=\"flex\">\r\n                <ul>\r\n                  <Typography>\r\n                    <b>Descuento: </b>\r\n                    {datos.numero_credito ? datos.numero_credito : \" -\"}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Limite de crédito: </b>\r\n                    {datos.limite_credito ? datos.limite_credito : \" -\"}\r\n                  </Typography>\r\n                  <Typography>\r\n                    <b>Días de crédito: </b>\r\n                    {datos.dias_credito ? datos.dias_credito : \" -\"}\r\n                  </Typography>\r\n                </ul>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleDetalles}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n          >\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { FcManager } from 'react-icons/fc';\r\nimport { Box, IconButton, InputBase, Paper } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaClientes from './ListaClientes';\r\nimport CrearCliente from './CrearCliente';\r\nimport { ClienteProvider } from '../../../../context/Catalogos/crearClienteCtx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cliente() {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\tconst [ values, setValues ] = useState('');\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') setValues(e.target.defaultValue);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ClienteProvider>\r\n\t\t\t\t<Button onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcManager className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tCliente\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tCliente\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t\t<Box mr={5} minWidth=\"70%\">\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Buscar cliente...\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t\tvalue={values}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => setValues(values)}>\r\n\t\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpermisosUsuario.accesos.catalogos.clientes.agregar === false ? (\r\n\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t\t<CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<ListaClientes tipo=\"CLIENTE\" filtro={values} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</ClienteProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRAR_DESCUENTOS = gql`\r\n\tmutation CrearDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        crearDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DESCUENTOS = gql`\r\n\tmutation ActualizarDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        actualizarDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const DESACTIVAR_DESCUENTOS = gql`\r\n\tmutation DesactivarDescuentoUnidad($input: ActivarDescuentoUnidades , $id: ID!){\r\n        desactivarDescuentoUnidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DESCUENTOS = gql`\r\n\tmutation ELiminarDescuentoUnidad( $id: ID!){\r\n        eliminarDescuentoUnidad( id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Delete } from '@material-ui/icons';\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Button, Dialog, DialogActions, DialogTitle, IconButton, Switch, Tooltip } from '@material-ui/core';\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport {  DESACTIVAR_DESCUENTOS, ELIMINAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\n\r\nconst headCells = [\r\n\t{ id: 'cantidad',  label: 'Cantidad' },\r\n\t{ id: 'tipo',  label: 'Tipo' },\r\n\t{ id: 'precio',  label: 'Precio U.' },\r\n\t{ id: 'precioDes',  label: 'Precio Desc.' },\r\n\t{ id: 'descuento',  label: '% Desc.' },\r\n\t{ id: 'eliminar',  label: 'Eliminar'},\r\n\t{ id: 'activo',  label: 'Activo'}\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount, datosPrecios } = props;\r\n\tlet variable = false;\r\n\tdatosPrecios?.forEach(element => {\r\n\t\tif (element.medida) {\r\n\t\t\treturn variable = true;\r\n\t\t}\r\n\t});\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t\t{ variable === true ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell>Talla</TableCell>\r\n\t\t\t\t\t\t<TableCell>Color</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t): null}\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\theight: 300\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: \"1px solid rgba(0,0,0, .3)\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: \"15%\",\r\n\t\tcursor: \"pointer\",\r\n\t  },\r\n}));\r\n\r\nexport default function TablaPreciosDescuentos(\r\n\t{ \r\n\t\tvalue,\r\n\t\tdatos,\r\n\t\tsetCleanList, \r\n\t\tcleanList, \r\n\t\tverificarDatos, \r\n\t\tsetPrecioPrueba,\r\n\t\tproductosRefetch,\r\n\t\tsetLoading,\r\n\t\tloading\r\n\t}\r\n\t) {\r\n\tconst classes = useStyles();\r\n\tconst { \r\n\t\t//es este \r\n\t\tdatosPreciosProducto, \r\n        setPreciosProductos,\r\n\t\tsetDatosPreciosProducto\r\n    } = useContext(RegProductoContext);\r\n\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tvar porcentaje  =  parseFloat((100 - value).toFixed(6));\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tif(datos){\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n\t\t\tsetDatosPreciosProducto(datos.medidas_producto);\r\n\t\t}else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = datosPreciosProducto.map((n) => n);\r\n\t\t\tsetSelected(newSelecteds); \r\n\t\t\tverificarDatos(newSelecteds);\r\n\t\t\tsetPreciosProductos(newSelecteds);\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tsetPreciosProductos([]); \r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, _id) => {\r\n\t\tconst selectedIndex = selected.indexOf(_id);\r\n\t\tlet newSelected = [];\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, _id);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\t\tsetPrecioPrueba(newSelected.length === 0 ? 0 : newSelected);\r\n\t\tsetPreciosProductos(newSelected);\r\n\t\tverificarDatos(newSelected);\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetSelected([]);\r\n\t\tsetCleanList(false);\r\n\t}, [cleanList]);\r\n\r\n\tconst isSelected = (_id) => selected.indexOf(_id) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, datosPreciosProducto.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<TableContainer className={classes.table}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={datosPreciosProducto.length}\r\n\t\t\t\t\t\t\tdatosPrecios={datosPreciosProducto}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{datosPreciosProducto.map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t    setLoading={setLoading}\r\n\t\t\t\t\t\t\t\t\t\tproductosRefetch={productosRefetch}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={handleClick} \r\n\t\t\t\t\t\t\t\t\t\tselected={selected} \r\n\t\t\t\t\t\t\t\t\t\trow={row}\r\n\t\t\t\t\t\t\t\t\t\tsetAlert={setAlert}\r\n\t\t\t\t\t\t\t\t\t\tporcentaje={porcentaje}\r\n\t\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\t\tdatos={datos}\r\n\t\t\t\t\t\t\t\t\t\tisItemSelected={isItemSelected} \r\n\t\t\t\t\t\t\t\t\t\tlabelId={labelId} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({row, value, isItemSelected, setLoading, datos, labelId, setAlert, porcentaje, productosRefetch, handleClick, selected}) {\r\n\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n\tconst { \r\n        setDatosPreciosProducto,\r\n    } = useContext(RegProductoContext);\r\n\tconst [ DesactivarDescuentoUnidad ] = useMutation(DESACTIVAR_DESCUENTOS);\r\n\tconst [ ELiminarDescuentoUnidad ] = useMutation(ELIMINAR_DESCUENTOS);\r\n\r\n\tconst handleChangeActivo = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait DesactivarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tdescuento_activo: !row.descuento_activo,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: row._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetLoading(false);\r\n\t\t\tproductosRefetch();\r\n\t\t\tsetAlert({ message: 'Estado de descuento actualizado', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Ocurrio un problema en el servidor' , status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleModal = () => {\r\n\t\tsetOpenModal(!openModal);\r\n\t\teditarDatos();\r\n\t};\r\n\t\r\n\tconst editarDatos = () => {\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n\t\t\tsetLoading(false);\r\n        }else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t\tsetLoading(false);\r\n        }\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tproductosRefetch();\r\n\t\t\tconst resultado = await ELiminarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\thandleModal();\r\n\t\t\teditarDatos();\r\n\t\t\tsetAlert({ message: resultado.data.eliminarDescuentoUnidad.message, status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<TableRow\r\n\t\t\thover\r\n\t\t\trole=\"checkbox\"\r\n\t\t\taria-checked={isItemSelected}\r\n\t\t\ttabIndex={-1}\r\n\t\t\tkey={row._id}\r\n\t\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\thandleClick(event, row)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.cantidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row?.unidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.precio}</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{\r\n\t\t\t\t\tisItemSelected === true && selected.length > 1 ? <b style={{color: 'green'}}> ${parseFloat((row.precio * porcentaje / 100).toFixed(2))} </b>\r\n\t\t\t\t\t: (row.descuento === null ? 0 : <b style={{color: 'green'}}> ${row.descuento.precio_neto} </b> )\r\n\t\t\t\t}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{isItemSelected === true && selected.length > 1 ? <b style={{color: 'red'}}> {value}% </b> : (!row.descuento || row.descuento === null ? 0 : <b style={{color: 'red'}}> {row.descuento.porciento}% </b>)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Modal row={row} handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell key={row._id} align=\"center\">\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\tonChange={handleChangeActivo}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t\t : ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t\t\tdefaultChecked={row.descuento_activo ? row.descuento_activo : false}\r\n\t\t\t\t\tname=\"descuento_activo\"\r\n\t\t\t\t\tinputProps={{ 'aria-label': 'secondary checkbox' }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{\r\n\t\t\t\trow.medida ? (\r\n\t\t\t\t\t<TableCell align=\"center\">{row?.medida?.talla}</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\trow.color ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={row?.color?.nombre}\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t\tarrow\r\n\t\t\t\t\t\t\tTransitionComponent={Zoom}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor:row?.color?.hex,\r\n\t\t\t\t\t\t\t\t\tcolor: theme.palette.getContrastText(row?.color?.hex),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</TableRow>\r\n\t)\r\n};\r\n\r\n// MODAL PARA ELIMINAR EL DESCUENTO DE LOS PRODUCTOS\r\nconst Modal = ({row, handleModal, openModal, handleDelete }) => {\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton \r\n\t\t\t\tcolor=\"secondary\" \r\n\t\t\t\tonClick={handleModal}\r\n\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t: ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useCallback, useContext, useState } from 'react';\r\n\r\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\r\nimport { Button, Dialog, makeStyles, DialogTitle, DialogContent, Grid, Box, Typography, TextField, Slider, IconButton } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport TablaPreciosDescuentos from './ListaPrecios';\r\n\r\nimport {  REGISTRAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tavatarGroup: {\r\n\t\t'& > .MuiAvatarGroup-avatar': {\r\n\t\t\twidth: theme.spacing(8),\r\n\t\t\theight: theme.spacing(8)\r\n\t\t}\r\n\t},\r\n\troot: {\r\n\t\twidth: 400\r\n\t},\r\n    rootSlice:{\r\n        width: 350\r\n    },\r\n\tmargin: {\r\n\t\theight: theme.spacing(3)\r\n\t},\r\n    rootTable:{\r\n        height: 300\r\n    }\r\n}));\r\n\r\nexport default function DescuentoProductos({datos, productosRefetch}) {\r\n    const [ CrearDescuentoUnidad ] = useMutation(REGISTRAR_DESCUENTOS);\r\n    const { \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n    } = useContext(RegProductoContext);\r\n\r\n    let iva = datos.precios.iva;\r\n    let ieps = datos.precios.ieps;\r\n    // Precio compra sin impuestos y sin utilidad\r\n    let PCSI = datos.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ openDescuento, setOpenDescuento ] = useState(false);\r\n    const [ cleanList, setCleanList ] = useState(false);\r\n    const [ validate ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n\r\n    const [ precioPrueba, setPrecioPrueba ] = useState(0);\r\n    const [ value, setValue] =  useState(0);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleCloseDescuentos = () => {\r\n        if (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n            setLoading(false);\r\n        }else{\r\n            setDatosPreciosProducto(datos.unidades_de_venta);\r\n            setLoading(false);\r\n        }\r\n        setPrecioPrueba(0);\r\n        setValue(0);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n    };\r\n\r\n    const cerrarModal =()=>{\r\n        setOpenDescuento(!openDescuento);\r\n        handleCloseDescuentos();\r\n    }\r\n\r\n    const verificarDatos = useCallback(\r\n        (datos) => {\r\n            for (let i = 0; i < datos.length; i++) {\r\n                if (datos[i].descuento) {\r\n                    if ( datos[i].descuento.porciento !== 0) {\r\n                        setValue(datos[i].descuento.porciento);\r\n                        if (datos.length === 1) {\r\n                            setPrecioPrueba(datos[i].descuento.precio_neto);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n    },\r\n        [datos]\r\n    );\r\n    \r\n    let arrayDescuento = [];\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n\r\n        for (let i = 0; i < preciosProductos.length; i++) {\r\n            let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let dineroDescontado = 0; \r\n            let cantidad_unidad = preciosProductos[i].precio_unidad.cantidad_unidad;\r\n\r\n            PVCDSI = parseFloat((preciosProductos[i].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[i].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                _id: preciosProductos[i]._id,\r\n                descuento_activo: true,\r\n                descuento:{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[i].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[i].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: newValue,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n\r\n            setPrecioPrueba(precio_neto);\r\n            if (preciosProductos.length !== 1) {\r\n                preciosDescuentos.push(arrayDescuento);\r\n            }else{\r\n                setPreciosDescuentos([arrayDescuento]);\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n        if (preciosProductos.length === 1) {\r\n            setPrecioPrueba(valorText);\r\n            \r\n            let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n            let PVSI = parseFloat((valorText / (suma_impuestos+1)).toFixed(2));\r\n\r\n            let cantidad_unidad = preciosProductos[0].precio_unidad.cantidad_unidad;\r\n            let dineroDescontado = 0;\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let porcentaje  = parseFloat(((PVSI / preciosProductos[0].precio_unidad.precio_venta) * 100).toFixed(2));\r\n            let descuento = parseFloat((100 - porcentaje).toFixed(2));\r\n\r\n            PVCDSI = parseFloat((preciosProductos[0].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[0].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                \"_id\": preciosProductos[0]._id,\r\n                \"descuento_activo\": true,\r\n                \"descuento\":{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[0].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[0].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: descuento,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n            \r\n            setValue(descuento);\r\n            setPreciosDescuentos([arrayDescuento]);\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const saveData = async () => {\r\n        setLoading(true);\r\n\t\ttry {\r\n            await CrearDescuentoUnidad({\r\n                variables: {\r\n                    input: {\r\n                        descuentos: preciosDescuentos\r\n                    }\r\n                }\r\n            });\r\n            handleCloseDescuentos()\r\n            productosRefetch();\r\n            setValue(0);\r\n            setPreciosProductos([]);\r\n            setPreciosDescuentos([]);\r\n            setCleanList(!cleanList);\r\n            setAlert({ message: '¡Listo descuentos realizados!', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n            setAlert({ message: '¡Oh no, ocurrio un problema con el servidor!', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n    const validacion = () => {\r\n        if (datos.medidas_producto.length > 0 ) {\r\n            for (let i = 0; i < datos.medidas_producto.length; i++) {\r\n                if (datos.medidas_producto[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }else{\r\n            for (let i = 0; i < datos.unidades_de_venta.length; i++) {\r\n                if (datos.unidades_de_venta[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <IconButton\r\n                color={validacion()}\r\n                onClick={cerrarModal}\r\n                disabled={datos.inventario_general && datos.inventario_general.length > 0 && datos.inventario_general[0].eliminado === true}\r\n            >\r\n               <LocalOfferIcon />\r\n            </IconButton>\r\n            <Dialog open={openDescuento} onClose={handleCloseDescuentos} fullWidth maxWidth=\"lg\">\r\n            <BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<DialogTitle>\r\n                    <Grid container>\r\n                        <Box flexGrow={1} display=\"flex\" alignItems=\"center\">\r\n                            {'Descuento de Producto'}\r\n                        </Box>\r\n                        <Box m={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={cerrarModal} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre comercial: </b>\r\n                            {datos.datos_generales.nombre_comercial ? datos.datos_generales.nombre_comercial : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre genérico: </b>\r\n                            {datos.datos_generales.nombre_generico ? datos.datos_generales.nombre_generico : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Grid container>\r\n                        <Grid item lg={8} md={6} xs={12}> \r\n                            <Box p={1}>\r\n                                <TablaPreciosDescuentos\r\n                                    verificarDatos={verificarDatos}\r\n                                    productosRefetch={productosRefetch}\r\n                                    datos={datos}\r\n                                    value={value}\r\n                                    cleanList={cleanList}\r\n                                    setCleanList={setCleanList}\r\n                                    setPrecioPrueba={setPrecioPrueba}\r\n                                    setLoading={setLoading}\r\n                                    loading={loading}\r\n                                />\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={4} md={6} xs={12}> \r\n                            <Box mt={5} dislay=\"flex\" justifyContent=\"center\">\r\n                                <div className={classes.root}>\r\n                                    <Box textAlign=\"center\">\r\n                                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                                            <b>Porcentaje de descuento</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box my={5} />\r\n                                    <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                        <Slider\r\n                                            disabled={preciosProductos.length === 0 ? true : false}\r\n                                            getAriaValueText={valuetext}\r\n                                            value={value.toFixed(2)}\r\n                                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                                            valueLabelDisplay=\"auto\"\r\n                                            onChange={obtenerPorcientoSlide} \r\n                                        />\r\n                                    </Box>\r\n                                </div>\r\n                            </Box>\r\n                            <Box mt={5} display=\"flex\" justifyContent=\"center\">\r\n                                {preciosProductos.length === 1 ? ( \r\n                                    <div>\r\n                                        <Typography>Precio con Descuento</Typography>\r\n                                        <TextField\r\n                                            type=\"number\"\r\n                                            InputProps={{ inputProps: { min: 0} }}\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            value={ precioPrueba }\r\n                                            onChange={(e) => obtenerPrecioText(e)}\r\n                                        />\r\n                                    </div>\r\n                                ) : (\r\n                                    null\r\n                                )}\r\n\r\n                            </Box>\r\n                            <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                                <Button \r\n                                    disabled={preciosProductos.length === 0 || validate === true ? true : false}\r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    size=\"large\"\r\n                                    onClick={saveData}\r\n                                >\r\n                                    Guardar \r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Drawer,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Button,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { Close, CropOriginal, ListAlt } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drawWidth: {\r\n    width: \"50vw\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100vw\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function InfoProductoDrawer({ producto }) {\r\n  const { datos_generales, imagenes } = producto;\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"default\"\r\n        variant=\"contained\"\r\n        onClick={() => toggleDrawer()}\r\n      >\r\n        <ListAlt />\r\n      </IconButton>\r\n      <Drawer anchor=\"right\" open={open} onClose={() => toggleDrawer()}>\r\n        <div className={classes.drawWidth}>\r\n          <Grid container>\r\n            <Grid\r\n              item\r\n              md={imagenes.length > 1 ? 6 : 12}\r\n              style={{ display: \"flex\", justifyContent: \"center\" }}\r\n            >\r\n              <Box\r\n                m={1}\r\n                width=\"300px\"\r\n                height=\"300px\"\r\n                display=\"flex\"\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                {imagenes.length > 0 ? (\r\n                  <img\r\n                    width=\"100%\"\r\n                    alt=\"img producto\"\r\n                    src={imagenes[0].url_imagen}\r\n                    /* src=\"https://www.dportenis.mx/wcsstore/ExtendedSitesCatalogAssetStore/images/catalog/zoom/1020139-0001V1.jpg\" */\r\n                  />\r\n                ) : (\r\n                  <CropOriginal style={{ fontSize: 90 }} />\r\n                )}\r\n              </Box>\r\n            </Grid>\r\n            {imagenes.length > 1 ? (\r\n              <Grid item md={6}>\r\n                <Grid container>\r\n                  {imagenes.map((res, index) => {\r\n                    return index > 0 ? (\r\n                      <Grid item key={index}>\r\n                        <Box\r\n                          m={1}\r\n                          key={index}\r\n                          height={120}\r\n                          width={120}\r\n                          display=\"flex\"\r\n                          justifyContent=\"center\"\r\n                          alignItems=\"center\"\r\n                        >\r\n                          <img\r\n                            width=\"100%\"\r\n                            alt=\"img producto\"\r\n                            src={res.url_imagen}\r\n                          />\r\n                        </Box>\r\n                      </Grid>\r\n                    ) : null;\r\n                  })}\r\n                </Grid>\r\n              </Grid>\r\n            ) : null}\r\n          </Grid>\r\n          <Box m={5}>\r\n            <Grid container spacing={3} justify=\"center\">\r\n              <Grid item>\r\n                <Typography>\r\n                  <b>Código de barras: </b>\r\n                  {datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Clave alterna: </b>\r\n                  {datos_generales.clave_alterna\r\n                    ? datos_generales.clave_alterna\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Clave producto del SAT: </b>\r\n                  {datos_generales.clave_producto_sat &&\r\n                  datos_generales.clave_producto_sat.Value\r\n                    ? datos_generales.clave_producto_sat.Value: \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Nombre comercial: </b>\r\n                  {datos_generales.nombre_comercial\r\n                    ? datos_generales.nombre_comercial\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Nombre genérico: </b>\r\n                  {datos_generales.nombre_generico\r\n                    ? datos_generales.nombre_generico\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Descripción: </b>\r\n                  {datos_generales.descripcion\r\n                    ? datos_generales.descripcion\r\n                    : \"-\"}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                <Typography>\r\n                  <b>Tipo de producto: </b>\r\n                  {datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Categoria: </b>\r\n                  {datos_generales.categoria ? datos_generales.categoria : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Subcategoria: </b>\r\n                  {datos_generales.subcategoria\r\n                    ? datos_generales.subcategoria\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Departamento: </b>\r\n                  {datos_generales.departamento\r\n                    ? datos_generales.departamento\r\n                    : \"-\"}\r\n                </Typography>\r\n                <Typography>\r\n                  <b>Marca: </b>\r\n                  {datos_generales.marca ? datos_generales.marca : \"-\"}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </div>\r\n        <Box\r\n          position=\"absolute\"\r\n          bottom={16}\r\n          width=\"100%\"\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n        >\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Close />}\r\n          >\r\n            Cerrar\r\n          </Button>\r\n        </Box>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_PRODUCTO } from \"../../../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ datos, productosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { actualizarLista, setActualizarLista, setAlert } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setActualizarLista(!actualizarLista);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton\r\n        onClick={() => handleToggleModal()}\r\n        disabled={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? true\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? true\r\n              : false\r\n          }\r\n      >\r\n        <Delete\r\n          color={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? \"disabled\"\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? \"disabled\"\r\n              : \"error\"\r\n          }\r\n        />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport DescuentoProductos from \"./Descuentos/Descuento\";\r\nimport InfoProductoDrawer from \"./infoProductoDrawer\";\r\nimport EliminarProducto from \"./EliminarProducto\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n\t'& ::-webkit-scrollbar': {\r\n\t\tdisplay: 'none'\r\n\t}\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerProductos, productosRefetch }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Codigo barras</TableCell>\r\n              <TableCell>Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell>Existencia</TableCell>\r\n              <TableCell>Tipo</TableCell>\r\n              <TableCell>Información</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody className=\"hide-scroll\">\r\n            {obtenerProductos.map((producto, index) => {\r\n              return (\r\n                <RenderTableRows\r\n                  key={index}\r\n                  producto={producto}\r\n                  productosRefetch={productosRefetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ producto, productosRefetch }) => {\r\n  return (\r\n    <Fragment>\r\n      <TableRow hover>\r\n        <TableCell>{producto.datos_generales.codigo_barras}</TableCell>\r\n        <TableCell>{producto.datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{producto.datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {producto.inventario_general.map(\r\n            (existencia) =>\r\n              `${existencia.cantidad_existente} ${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.tipo_producto}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <InfoProductoDrawer producto={producto} />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <CrearProducto\r\n            accion={true}\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <DescuentoProductos\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <EliminarProducto\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { RestoreFromTrash, Publish } from '@material-ui/icons';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, IconButton, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Fragment } from 'react';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport { ACTIVAR_PRODUCTOS, PRODUCTOS_ELIMINADOS } from '../../../../gql/Catalogos/productos';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProdcutosEliminados({productosActivosRefetch}) {\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleModalToggle = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button disableElevation color=\"primary\" onClick={handleModalToggle} size=\"large\" startIcon={<RestoreFromTrash />}>\r\n\t\t\t\tProductos inactivos\r\n\t\t\t</Button>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\tonClose={handleModalToggle}\r\n\t\t\t\taria-labelledby=\"dialog-productos-eliminados\"\r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"dialog-productos-eliminados\">{'Productos inactivos'}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<TablaProductosEliminados productosActivosRefetch={productosActivosRefetch} />\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button variant=\"contained\" onClick={handleModalToggle} color=\"primary\" size=\"large\">\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst TablaProductosEliminados = ({productosActivosRefetch}) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst { actualizarLista } = useContext(RegProductoContext);\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(PRODUCTOS_ELIMINADOS, {\r\n\t\tvariables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id }\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [ refetch, actualizarLista ]);\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (!loading && !error && !data) {\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<Typography variant=\"h6\">No hay productos inactivos</Typography>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\r\n\tconst { obtenerProductosInactivos } = data;\r\n\r\n\treturn (\r\n\t\t<Box height=\"60vh\">\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table aria-label=\"simple table\" size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell align=\"left\">Código de barras</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"left\">Clave alterna</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>Nombre comercial</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"right\">Reactivar</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerProductosInactivos.map((producto, index) => (\r\n\t\t\t\t\t\t\t<RenderProductosTabla key={index} datos={producto} refetch={refetch} productosActivosRefetch={productosActivosRefetch} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst RenderProductosTabla = ({ datos, refetch, productosActivosRefetch }) => {\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst { datos_generales } = datos.producto;\r\n    /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n\tconst { setAlert } = useContext(RegProductoContext);\r\n\r\n    const [ activarProducto ] = useMutation(ACTIVAR_PRODUCTOS);\r\n\r\n\tconst handleDeleteToggle = () => setOpen(!open);\r\n\r\n\tconst reactivarProducto = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst result = await activarProducto({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: datos._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n            refetch();\r\n\t\t\tproductosActivosRefetch();\r\n\t\t\tsetAlert({ message: `¡Listo! ${result.data.activarProducto.message}`, status: 'success', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t\thandleDeleteToggle();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: `Error: ${error.message}`, status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell align=\"left\">{datos_generales.codigo_barras}</TableCell>\r\n\t\t\t\t<TableCell align=\"left\">{datos_generales.clave_alterna}</TableCell>\r\n\t\t\t\t<TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n\t\t\t\t\t\t\t<CircularProgress size={26} />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n\t\t\t\t\t\t\t<Publish />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t\t<Dialog open={open} onClose={handleDeleteToggle} aria-labelledby=\"reactivar-producto-dialog\">\r\n\t\t\t\t<DialogTitle id=\"reactivar-producto-dialog\">{'Se reactivará este producto'}</DialogTitle>\r\n\t\t\t\t{/* <SnackBarMessages alert={alert} setAlert={setAlert} />        */}  \r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleDeleteToggle} color=\"inherit\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => reactivarProducto()} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tAceptar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Search, Close, ArrowBack } from \"@material-ui/icons\";\r\nimport ProductosEliminados from \"./ProductosEliminados\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Productos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { alert, setAlert } = useContext(RegProductoContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Productos\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Productos\r\n            </Typography>\r\n            <Button\r\n              autoFocus\r\n              color=\"inherit\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n              startIcon={<Close />}\r\n            >\r\n              Cerrar\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RegistroComponent />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RegistroComponent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [existencias, setExistencias] = useState(true);\r\n  const [value, setValue] = useState(0);\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n\tif(value === 0){\r\n\t\tsetExistencias(true)\r\n\t}else{\r\n\t\tsetExistencias(false)\r\n\t}\r\n  };\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n      filtro,\r\n\t  existencias,\r\n    },\r\n\tfetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerProductos } = data;\r\n\r\n  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    if (busqueda === \"\") {\r\n      setFiltro(\"\");\r\n      refetch({ filtro: \"\" });\r\n      return;\r\n    }\r\n    setFiltro(busqueda);\r\n  };\r\n\r\n  const reload = () => {\r\n    setBusqueda(\"\");\r\n    setFiltro(\"\");\r\n    refetch({ filtro: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box mx={4} my={3} display=\"flex\">\r\n        <Box style={{ width: \"500px\" }}>\r\n          <form\r\n            onSubmit={filtrarProductos}\r\n            style={{ display: \"flex\", alignItems: \"center\" }}\r\n          >\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            {filtro !== \"\" ? (\r\n              <IconButton color=\"primary\" onClick={() => reload()}>\r\n                <ArrowBack />\r\n              </IconButton>\r\n            ) : null}\r\n          </form>\r\n        </Box>\r\n\r\n        <Box flexGrow={1} />\r\n        <Box display=\"flex\">\r\n          <ProductosEliminados productosActivosRefetch={refetch} />\r\n          <Box mx={1} />\r\n          <CrearProducto accion={false} productosRefetch={refetch} />\r\n        </Box>\r\n      </Box>\r\n      <Box mx={4}>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n\t\t  \tindicatorColor=\"primary\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n\t\t\t\r\n          >\r\n            <Tab label=\"Productos de Sucursal\" />\r\n            <Tab label=\"Todos los productos\" />\r\n          </Tabs>\r\n        </div>\r\n        <ListaProductos\r\n          obtenerProductos={obtenerProductos}\r\n          productosRefetch={refetch}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../../context/Catalogos/CtxRegProducto'\r\nimport Productos from './Productos'\r\n \r\nexport default function ProductoIndex(){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <Productos />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useEffect, useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Box, Button, Dialog, DialogActions, DialogTitle, IconButton, TextField, Typography } from '@material-ui/core';\r\nimport { Close, Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { ELIMINAR_TALLA } from '../../../../gql/Catalogos/tallas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaTallas({ tipo, datos, toUpdate, setToUpdate, setValue, refetch }) {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(7);\r\n\tconst [ busqueda, setBusqueda ] = useState('');\r\n\tconst [ productosFiltrados, setProductosFiltrados ] = useState([]);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetProductosFiltrados(\r\n\t\t\t\tdatos.filter((datos) => {\r\n\t\t\t\t\treturn datos.talla.toLowerCase().includes(busqueda.toLowerCase());\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ busqueda, datos ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tplaceholder=\"Buscar...\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonChange={(e) => setBusqueda(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>{tipo === 'ROPA' ? 'Talla' : 'Número'}</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.tallas_numeros.editar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.tallas_numeros.eliminar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{productosFiltrados\r\n\t\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t\t.map((row, index) => (\r\n\t\t\t\t\t\t\t\t\t<RowsRender key={index} row={row} setAlert={setAlert} tipo={tipo} toUpdate={toUpdate} setToUpdate={setToUpdate} setValue={setValue} refetch={refetch} />\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={datos.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RowsRender = ({ row, setAlert, tipo, toUpdate, setToUpdate, setValue, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\tconst [ eliminarTalla ] = useMutation(ELIMINAR_TALLA);\r\n\r\n \r\n\tconst handleDelete = async () => {\r\n\t\r\n\t\ttry {\r\n\t\t\tconst resp = await eliminarTalla({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id,\r\n\t\t\t\t\tinput:{\r\n\t\t\t\t\t\ttipo:tipo,\r\n\t\t\t\t\t\ttalla:''\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\r\n\t\t\tlet msgAlert = { message: resp.data.eliminarTalla.message, status: 'success', open: true }\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\trefetch();\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\t\thandleModal();\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (dato) => {\r\n\t\tif(!dato){\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetValue('');\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetToUpdate(dato._id);\r\n\t\tsetValue(dato.talla);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === row._id ? true : false}>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<b>{row.talla}</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{sesion.accesos.catalogos.tallas_numeros.editar === false ? (null) : (\r\n\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t{toUpdate === row._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<IconButton onClick={() => onUpdate(row)}>\r\n\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t\t{sesion.accesos.catalogos.tallas_numeros.eliminar === false ? (null) : (\r\n\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, TextField, CircularProgress } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport TablaTallas from './ListaTallas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_TALLAS, CREAR_TALLAS, ACTUALIZAR_TALLA } from '../../../../gql/Catalogos/tallas';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nexport default function RegistroTallas({ tipo }) {\r\n\tconst [ value, setValue ] = useState('');\r\n\tconst [ toUpdate, setToUpdate ] = useState('');\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_TALLAS, {\r\n\t\tvariables: { sucursal: sesion.sucursal._id, tipo }\r\n\t});\r\n\t/* Mutations */\r\n\tconst [ crearTalla ] = useMutation(CREAR_TALLAS);\r\n\tconst [ actualizarTalla ] = useMutation(ACTUALIZAR_TALLA);\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerTallas } = data;\r\n\r\n\tconst GuardarDatosBD = async () => {\r\n\t\tlet resp;\r\n\t\tif (!value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst nueva_talla = value;\r\n\t\t\tif(toUpdate){\r\n\t\t\t\tif (sesion.accesos.catalogos.tallas_numeros.editar === false ) {\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst talla_actualizada = cleanTypenames(nueva_talla);\r\n\t\t\t\t\tresp = await actualizarTalla({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\ttalla: talla_actualizada,\r\n\t\t\t\t\t\t\t\ttipo\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tid: toUpdate\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif (sesion.accesos.catalogos.tallas_numeros.agregar === false ) {\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresp = await crearTalla({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\ttalla: nueva_talla,\r\n\t\t\t\t\t\t\t\ttipo,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetValue('');\r\n\t\t\tsetToUpdate('');\r\n\t\t\tlet msgAlert = (toUpdate) ? { message: resp.data.actualizarTalla.message, status: 'success', open: true }:{ message: resp.data.crearTalla.message, status: 'success', open: true }\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"outlined-error-helper-text\"\r\n\t\t\t\t\tlabel={tipo === 'ROPA' ? 'Talla' : 'Número'}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value.toUpperCase())}\r\n\t\t\t\t/>\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={GuardarDatosBD}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<TablaTallas datos={obtenerTallas} tipo={tipo} toUpdate={toUpdate} setToUpdate={setToUpdate} setValue={setValue} refetch={refetch} />\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container, Tab, Tabs } from '@material-ui/core';\r\nimport RegistroTallas from './RegistroTallas';\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`scrollable-force-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`scrollable-force-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={2} my={1} minHeight=\"50vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `scrollable-force-tab-${index}`,\r\n\t\t'aria-controls': `scrollable-force-tabpanel-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\ticonSvgSecondary: {\r\n\t\twidth: 50\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Tallas() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ value, setValue ] = useState(0);\r\n\r\n\tconst handleChange = (event, newValue) => setValue(newValue);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas.svg' alt=\"icono ropa\" className={classes.iconSvg} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tTallas y numeros\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tRopa\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\t\t\tcentered\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\tlabel=\"Tallas\"\r\n\t\t\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shirt.svg' alt=\"icono tallas\" className={classes.iconSvgSecondary} />\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\tlabel=\"Numeros\"\r\n\t\t\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shoes.svg' alt=\"icono numeros\" className={classes.iconSvgSecondary} />\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{...a11yProps(1)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t\t\t\t<Container maxWidth=\"xs\">\r\n\t\t\t\t\t\t\t\t\t<RegistroTallas tipo=\"ROPA\" />\r\n\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t\t\t\t\t<Container maxWidth=\"xs\">\r\n\t\t\t\t\t\t\t\t\t<RegistroTallas tipo=\"CALZADO\" />\r\n\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONTABILIDAD = gql`\r\n    query obtenerContabilidad($empresa: ID!, $sucursal: ID!){\r\n        obtenerContabilidad(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_servicio\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONTABILIDAD = gql`\r\n    mutation CrearContabilidad($input: ContabilidadInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearContabilidad(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONTABILIDAD = gql`\r\n    mutation ActualizarContabilidad($input: ContabilidadInput, $id: ID!){\r\n        actualzarContabilidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONTABILIDAD = gql`\r\n    mutation EliminarContabilidad($id: ID!){\r\n        eliminarContabilidad(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n\tBox,\r\n\tCircularProgress,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTablePagination,\r\n\tTableRow,\r\n\tPaper,\r\n\tmakeStyles,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core';\r\n\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONTABILIDAD, ELIMINAR_CONTABILIDAD } from '../../../../gql/Catalogos/contabilidad';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaServicios({setData, setIdService, idService, setAccion, updateData, setAlert}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\tlet obtenerContabilidad= [];\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CONTABILIDAD,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\tconst [ EliminarContabilidad ] = useMutation(ELIMINAR_CONTABILIDAD);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ updateData, refetch ]\r\n\t);\r\n\r\n\tif(data){\r\n\t\tobtenerContabilidad = data.obtenerContabilidad;\r\n\t}\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait EliminarContabilidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: idService\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t\tsetIdService(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (loading){\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\t\t\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Servicios</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.contabilidad.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.contabilidad.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerContabilidad?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_servicio}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.contabilidad.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdService(row._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_servicio: row.nombre_servicio\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.contabilidad.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdService(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerContabilidad.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Button, TextField } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport ListaServicios from './ListaServicios';\r\nimport { REGISTRAR_CONTABILIDAD, ACTUALIZAR_CONTABILIDAD } from '../../../../gql/Catalogos/contabilidad';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t}\r\n});\r\n\r\nexport default function RegistroServicios() {\r\n\tconst classes = useStyles();\r\n\tconst [updateData, setUpdateData] = useState(false);\r\n\tconst [data, setData] = useState({\r\n\t\tnombre_servicio: \"\"\r\n\t});\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [error, setError] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [accion, setAccion] = useState(true);\r\n\tconst [idService, setIdService] = useState('')\r\n\r\n\tconst [ CrearContabilidad ] = useMutation(REGISTRAR_CONTABILIDAD);\r\n\tconst [ ActualizarContabilidad ] = useMutation(ACTUALIZAR_CONTABILIDAD);\r\n\r\n\tconst handleChangeInput = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n\t\t\tif(!data.nombre_servicio){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data;\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.contabilidad.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait CrearContabilidad({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\t\t\tusuario: sesion._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.contabilidad.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst inputActualizado = cleanTypenames(input);\r\n\t\t\t\t\t\tawait ActualizarContabilidad({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput: inputActualizado,\r\n\t\t\t\t\t\t\t\tid: idService\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetAccion(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\t\tsetData({nombre_servicio: \"\"});\r\n\t\t\t\tsetUpdateData(!updateData);\r\n\t\t\t\tsetIdService(\"\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') handleSubmit();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Typography variant=\"h6\">Tipo de Servicio</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t\tid=\"outlined-error-helper-text\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tname=\"nombre_servicio\"\r\n\t\t\t\t\tvalue={data.nombre_servicio}\r\n\t\t\t\t\tonChange={handleChangeInput}\r\n\t\t\t\t\tonKeyPress={pressEnter}\r\n\t\t\t\t/>\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={handleSubmit} disableElevation>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<ListaServicios \r\n\t\t\t\tsetData={setData} \r\n\t\t\t\tidService={idService} \r\n\t\t\t\tsetIdService={setIdService} \r\n\t\t\t\tsetAccion={setAccion} \r\n\t\t\t\tupdateData={updateData}\r\n\t\t\t\tsetAlert={setAlert} \r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroServicios from './RegistroServicio';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Contabilidad() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/contabilidad.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tContabilidad\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tContabilidad\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroServicios />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CrearCliente from '../Cliente/CrearCliente';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CLIENTES } from '../../../../gql/Catalogos/clientes';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Divider, Grid } from '@material-ui/core';\r\nimport { DialogContent, DialogTitle, IconButton, Typography, Avatar } from '@material-ui/core';\r\nimport { Dehaze, Delete } from '@material-ui/icons';\r\nimport { ClienteCtx } from '../../../../context/Catalogos/crearClienteCtx';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport { Fragment } from 'react';\r\n\r\nconst columns = [\r\n\t{ id: 1, label: 'No. Cliente', minWidth: 100 },\r\n\t{ id: 2, label: 'Clave', minWidth: 100 },\r\n\t{ id: 3, label: 'Nombre', minWidth: 150 },\r\n\t{ id: 4, label: 'Razon Social', minWidth: 150 },\r\n\t{ id: 5, label: 'Correo', minWidth: 150 },\r\n\t{ id: 6, label: 'Tipo de Cliente', minWidth: 100 },\r\n\t{ id: 7, label: 'Estado', minWidth: 100 },\r\n\t{ id: 8, label: 'Detalles', minWidth: 50, align: 'right' },\r\n\t// { id: 9, label: 'Editar', minWidth: 50, align: 'right' },\r\n\t// { id: 10, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '70vh'\r\n\t},\r\n\tavatar: {\r\n\t\twidth: 130,\r\n\t\theight: 130\r\n\t}\r\n});\r\n\r\nexport default function TablaProveedores({ tipo, filtro }) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst { update } = useContext(ClienteCtx);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n\t\tvariables: { tipo, filtro }\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerClientes } = data;\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader aria-label=\"sticky table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<TableCell key={9} align={'right'}>\r\n\t\t\t\t\t\t\t\t\tEditar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<TableCell key={10} align={'right'}>\r\n\t\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerClientes\r\n\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn <RowsRender key={index} datos={row} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={obtenerClientes.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [ openDetalles, setOpenDetalles ] = useState(false);\r\n\r\n\tconst handleDetalles = () => setOpenDetalles(!openDetalles);\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.numero_cliente}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.clave_cliente}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.nombre_cliente}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.razon_social}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.email}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.tipo_cliente}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.estado_cliente ? 'Activo' : 'Inactivo'}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<ModalDetalles openDetalles={openDetalles} handleDetalles={handleDetalles} datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t{permisosUsuario.accesos.catalogos.provedores.editar === false ? (null):(\r\n\t\t\t\t<TableCell width={50}>\r\n\t\t\t\t\t<CrearCliente tipo=\"PRROVEEDOR\" accion=\"actualizar\" datos={datos} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.catalogos.provedores.eliminar === false ? (null):(\r\n\t\t\t\t<TableCell width={50}>\r\n\t\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\nconst ModalDetalles = ({ handleDetalles, openDetalles, datos }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={handleDetalles}>\r\n\t\t\t\t<Dehaze />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openDetalles} onClose={handleDetalles} fullWidth maxWidth=\"md\">\r\n\t\t\t\t<DialogTitle>{'Información completa del cliente'}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\">Información básica</Typography>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t<Box mt={3} height={120} width={120} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={datos.imagen} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Número de cliente: </b>\r\n\t\t\t\t\t\t\t\t{datos.numero_cliente}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Clave: </b>\r\n\t\t\t\t\t\t\t\t{datos.clave_cliente}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Representante: </b>\r\n\t\t\t\t\t\t\t\t{datos.representante}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Nombre cliente/empresa: </b>\r\n\t\t\t\t\t\t\t\t{datos.nombre_cliente}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Razon social: </b>\r\n\t\t\t\t\t\t\t\t{datos.razon_social}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>RFC: </b>\r\n\t\t\t\t\t\t\t\t{datos.rfc ? datos.rfc : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>CURP: </b>\r\n\t\t\t\t\t\t\t\t{datos.curp ? datos.curp : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Telefono: </b>\r\n\t\t\t\t\t\t\t\t{datos.telefono ? datos.telefono : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Celular: </b>\r\n\t\t\t\t\t\t\t\t{datos.celular ? datos.celular : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Correo: </b>\r\n\t\t\t\t\t\t\t\t{datos.email ? datos.email : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Estado del cliente: </b>\r\n\t\t\t\t\t\t\t\t{datos.estado_cliente ? 'Activo' : 'Inactivo'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Tipo: </b>\r\n\t\t\t\t\t\t\t\t{datos.tipo_cliente}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Dirección</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Calle: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.calle}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>No. Exterior: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.no_ext}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>No. Interior: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.no_int ? datos.direccion.no_int : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Código postal: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.codigo_postal}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Colonia: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.colonia}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Municipio: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.municipio}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Localidad: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.localidad ? datos.direccion.localidad : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Estado: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.estado}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Pais: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.pais}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Información crediticia</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Descuento: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.numero_credito ? datos.numero_credito : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Limite de crédito: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.limite_credito ? datos.limite_credito : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Días de crédito: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.dias_credito ? datos.dias_credito : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{datos.tipo_cliente !== 'CLIENTE' ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Información bancaria</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Banco: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.banco ? datos.banco : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Numero de cuenta: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.numero_cuenta ? datos.numero_cuenta : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleDetalles} color=\"primary\" variant=\"contained\" size=\"large\">\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, IconButton, InputBase, Paper } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\nimport TablaProovedores from './ListaProveedores';\r\nimport CrearCliente from '../Cliente/CrearCliente';\r\nimport { ClienteProvider } from '../../../../context/Catalogos/crearClienteCtx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Proveedores() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\tconst [ values, setValues ] = useState('');\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') setFiltro(e.target.defaultValue);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ClienteProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/distribution.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tProveedores\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tProveedores\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t\t<Box mr={5} minwidth=\"70%\">\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Buscar proveedor...\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t\tvalue={values}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => setFiltro(values)}>\r\n\t\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t\t\t<CrearCliente tipo=\"PROVEEDOR\" accion=\"registrar\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<TablaProovedores tipo=\"PROVEEDOR\" filtro={filtro} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</ClienteProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaCajas(props) {\r\n\tconst permisos = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Cajas</TableCell>\r\n\t\t\t\t\t\t\t\t{permisos.accesos.catalogos.cajas.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{props.obtenerCajasSucursal.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.numero_caja}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell> Caja {row.numero_caja}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{permisos.accesos.catalogos.cajas.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => props.deleteCaja(row._id)} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={props.obtenerCajasSucursal.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CAJA = gql`\r\n    mutation CrearCaja($input: CrearCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CAJAS = gql`\r\n    query ObtenerCajasSucursales($empresa: ID!, $sucursal: ID!){\r\n        obtenerCajasSucursal(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            numero_caja\r\n            activa\r\n            usuario_creador {\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n            cantidad_efectivo_actual\r\n            usuario_en_caja {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n             \r\n        }\r\n    }\r\n`;\r\nexport const CREAR_HISTORIAL_CAJA = gql`\r\n    mutation CrearHistorialCaja($input: CrearHistorialCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearHistorialCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CAJA = gql`\r\n    query ObtenerHistorialCaja($input: HistorialCajasInput, $id_Caja: ID!,$empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialCaja(input: $input, id_Caja: $id_Caja,empresa: $empresa, sucursal: $sucursal){\r\n            tipo_movimiento\r\n            concepto\r\n            horario_turno\r\n            numero_caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            hora_moviento{\r\n                hora\r\n                minutos\r\n                segundos\r\n                completa\r\n            }\r\n            fecha_movimiento{\r\n                year\r\n                mes\r\n                dia\r\n                no_dia_year\r\n                no_semana_year\r\n                completa\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CAJA = gql`\r\n\tmutation eliminarCaja($id: ID!) {\r\n\t\teliminarCaja(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ACTUALIZAR_CAJA = gql`\r\n\tmutation ActualizarCaja($input: EditarCaja, $id: ID!) {\r\n\t\tactualizarCaja(id: $id, input: $input) {\r\n            _id\r\n            numero_caja\r\n            activa\r\n        }\r\n    }\r\n`; \r\n\r\nexport const OBTENER_PRE_CORTE_CAJA = gql`\r\n    query ObtenerPreCorteCaja($empresa: ID!, $sucursal: ID!, $input: PreCortesDeCajaInput){\r\n        obtenerPreCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            monto_efectivo_precorte         \r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTES_CAJA = gql`\r\n    query ObtenerCortesDeCaja($empresa: ID!, $sucursal: ID!, $input: FiltroCorteDeCajaInput){\r\n        obtenerCortesDeCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            concepto\r\n            token_turno_user\r\n            numero_caja\r\n            horario_en_turno\r\n            id_caja\r\n            hora_salida{\r\n                completa\r\n            }\r\n            fecha_salida{\r\n                completa\r\n            }\r\n            fecha_movimiento\r\n            usuario_en_turno{\r\n                nombre\r\n                telefono\r\n                email\r\n                numero_usuario\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n            sucursal{\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTE_CAJA = gql`\r\n    query ObtenerCorteCaja($empresa: ID!, $sucursal: ID!, $input: CorteDeCajaInput){\r\n        obtenerCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            montos_en_sistema{\r\n                monto_efectivo\r\n                monto_tarjeta_debito\r\n                monto_tarjeta_credito\r\n                monto_creditos\r\n                monto_monedero\r\n                monto_transferencia\r\n                monto_cheques\r\n                monto_vales_despensa\r\n            }\r\n        }\r\n    }\r\n`;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { Box, Button } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport TablaCajas from './ListaCajas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { CREAR_CAJA, OBTENER_CAJAS, ELIMINAR_CAJA } from '../../../../gql/Cajas/cajas';\r\n\r\nexport default function RegistroCajas() {\r\n\tconst [ loading, setLoading ] = React.useState(false);\r\n    // const [ open, setOpen ] = React.useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\t\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tlet obtenerCajasSucursal = [];\r\n\t  /* Mutation */\r\n\tconst [ crearCaja ] = useMutation(CREAR_CAJA);\r\n\tconst [ eliminarCaja ] = useMutation(ELIMINAR_CAJA);\r\n\r\n\r\n\t  /* Queries */\r\n\tconst {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\tconst nuevaCaja = async () => {\r\n\t\ttry {\r\n            setLoading(true);\r\n\t\t\t\tawait crearCaja({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tinput:{usuario_creador:  sesion._id, numero_usuario_creador: sesion.numero_usuario, nombre_usuario_creador: sesion.nombre},\r\n\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\t\r\n\tconst deleteCaja = async (id) => {\r\n\t\ttry {\r\n            setLoading(true);\r\n\t\t\t\tawait eliminarCaja({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tid: id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Box display=\"flex\" justifyContent=\"left\" alignItems=\"left\" my={2}>\r\n\t\t\t\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t{sesion.accesos.catalogos.cajas.agregar === false ? (null):(\r\n\t\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={() => nuevaCaja()}>\r\n\t\t\t\t\t\t<Add />Agregar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<TablaCajas obtenerCajasSucursal={obtenerCajasSucursal} deleteCaja={deleteCaja} />\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCajas from './RegistrarCajas';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\r\n\t\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t<Container maxWidth=\"sm\">\r\n\t\t\t\t\t\t<RegistroCajas />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","\r\nlet arregloVacio = {\r\n    mi_empresa:{\r\n        datos_empresa: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        informacion_fiscal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    compras:{\r\n        abrir_compra:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_realizadas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_espera:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    tesoreria:{\r\n        cuentas_empresa:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        egresos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_proveedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    reportes:{\r\n        reporte_historial_cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_turnos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_compras:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        rerporte_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_corte_caja:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_tesoreria:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    ventas:{\r\n        cancelar_venta:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        precios_productos: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        pre_corte:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cotizaciones:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        administrador:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        eliminar_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        producto_rapido: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    almacenes:{\r\n        almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        traspasos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        inventario_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    catalogos: {\r\n        clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        usuarios:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        marcas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        contabilidad:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        provedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        departamentos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        centro_costos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        conceptos_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        categorias:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        colores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        tallas_numeros:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n    }\r\n} \r\n\r\nexport default arregloVacio;\r\n","import React, { createContext, useState } from 'react';\r\nimport arregloVacio from '../../pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso'\r\n\r\nexport const UsuarioContext = createContext();\r\n\r\nexport const UsuarioProvider = ({ children }) => {\r\n\tconst [ usuario, setUsuario ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_usuario: true,\r\n\t\taccesos: arregloVacio\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<UsuarioContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tusuario,\r\n\t\t\t\tsetUsuario,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UsuarioContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Divider, Avatar, IconButton, OutlinedInput, FormHelperText, Button } from '@material-ui/core';\r\nimport { TextField, Typography, Grid, FormControl, InputAdornment } from '@material-ui/core';\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, CircularProgress } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { UsuarioContext } from '../../../../context/Catalogos/usuarioContext';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { ACTUALIZAR_USUARIO } from '../../../../gql/Catalogos/usuarios';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tavatarContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\twidth: 150,\r\n\t\theight: 150,\r\n\t\tborder: 'dashed 2px black',\r\n\t\tborderRadius: '100%'\r\n\t},\r\n\tavatar: {\r\n\t\twidth: 130,\r\n\t\theight: 130,\r\n\t\t'& > .icon': {\r\n\t\t\tfontSize: 100\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nexport default function FormularioUsuario({ accion }) {\r\n\tconst classes = useStyles();\r\n\tconst { usuario, setUsuario, error } = useContext(UsuarioContext);\r\n\tconst [ preview, setPreview ] = useState('');\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\r\n\t//dropzone\r\n\tconst onDrop = useCallback(\r\n\t\t(acceptedFiles) => {\r\n\t\t\tlet reader = new FileReader();\r\n\t\t\treader.readAsDataURL(acceptedFiles[0]);\r\n\t\t\treader.onload = function() {\r\n\t\t\t\tlet image = reader.result;\r\n\t\t\t\tsetPreview(image);\r\n\t\t\t};\r\n\t\t\tsetUsuario({\r\n\t\t\t\t...usuario,\r\n\t\t\t\timagen: acceptedFiles[0]\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ usuario, setUsuario ]\r\n\t);\r\n\r\n\tconst { getRootProps, getInputProps } = useDropzone({\r\n\t\taccept: 'image/jpeg, image/png',\r\n\t\tnoKeyboard: true,\r\n\t\tonDrop\r\n\t});\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tconst name = e.target.name;\r\n\t\tif (name === 'numero_usuario') {\r\n\t\t\tsetUsuario({\r\n\t\t\t\t...usuario,\r\n\t\t\t\t[e.target.name]: parseInt(e.target.value)\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetUsuario({\r\n\t\t\t...usuario,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\tconst obtenerCamposDireccion = (e) => {\r\n\t\tsetUsuario({\r\n\t\t\t...usuario,\r\n\t\t\tdireccion: { ...usuario.direccion, [e.target.name]: e.target.value }\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={3}>\r\n\t\t\t\t\t<Box className={classes.avatarContainer} {...getRootProps()}>\r\n\t\t\t\t\t\t<input {...getInputProps()} />\r\n\t\t\t\t\t\t{preview ? (\r\n\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={`${preview}`} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={`${usuario.imagen}`} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={9}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<form autoComplete=\"off\" className={classes.formInputFlex}>\r\n\t\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<span>* </span>Nombre usuario\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\terror={error.error && !usuario.nombre}\r\n\t\t\t\t\t\t\t\t\tname=\"nombre\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tvalue={usuario.nombre ? usuario.nombre : ''}\r\n\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\terror.error && error.message !== 'Las contraseñas no coinciden' ? (\r\n\t\t\t\t\t\t\t\t\t\t\terror.message\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{accion === 'registrar' ? (\r\n\t\t\t\t\t\t<form autoComplete=\"off\" className={classes.formInputFlex}>\r\n\t\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<span>* </span>Contraseña\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\terror.error && !usuario.password ? (\r\n\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t) : error.error && error.message === 'Las contraseñas no coinciden' ? (\r\n\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\t\tvalue={usuario.password ? usuario.password : ''}\r\n\t\t\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Visibility color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<VisibilityOff color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormHelperText>{error.message}</FormHelperText>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<span>* </span>Repetir contraseña\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\terror.error && !usuario.password ? (\r\n\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t) : error.error && error.message === 'Las contraseñas no coinciden' ? (\r\n\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\t\tvalue={usuario.repeatPassword ? usuario.repeatPassword : ''}\r\n\t\t\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Visibility color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<VisibilityOff color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormHelperText>{error.message}</FormHelperText>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<ActualizarPasswordModal />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={12}>\r\n\t\t\t\t\t<form autoComplete=\"off\" className={classes.formInputFlex}>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<span>* </span>Email\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\terror={error.error && !usuario.email}\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.email ? usuario.email : ''}\r\n\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\terror.error && error.message !== 'Las contraseñas no coinciden' ? error.message : ''\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<span>* </span>Num. Telefono\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\terror={error.error && !usuario.telefono}\r\n\t\t\t\t\t\t\t\tname=\"telefono\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.telefono ? usuario.telefono : ''}\r\n\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\terror.error && error.message !== 'Las contraseñas no coinciden' ? error.message : ''\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>Num. Celular</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"celular\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.celular ? usuario.celular : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>usuario domicilio</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<form autoComplete=\"off\" className={classes.formInputFlex}>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography>Calle</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"calle\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.calle ? usuario.direccion.calle : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography>Colonia</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"colonia\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.colonia ? usuario.direccion.colonia : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100px\">\r\n\t\t\t\t\t\t\t<Typography>Num. Ext</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"no_ext\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.no_ext ? usuario.direccion.no_ext : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100px\">\r\n\t\t\t\t\t\t\t<Typography>Num. Int</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"no_int\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.no_int ? usuario.direccion.no_int : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100px\">\r\n\t\t\t\t\t\t\t<Typography>CP</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"codigo_postal\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.codigo_postal ? usuario.direccion.codigo_postal : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<form autoComplete=\"off\" className={classes.formInputFlex}>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>Municipio</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"municipio\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.municipio ? usuario.direccion.municipio : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>Localidad</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"localidad\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.localidad ? usuario.direccion.localidad : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>Estado</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"estado\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.estado ? usuario.direccion.estado : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>Pais</Typography>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"pais\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={usuario.direccion.pais ? usuario.direccion.pais : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCamposDireccion}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst ActualizarPasswordModal = () => {\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst { usuario, setUsuario, error, setError, update, setUpdate } = useContext(UsuarioContext);\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\tconst [ actualizarUsuario ] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t\tsetError({ error: false, message: '' });\r\n\t};\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tsetUsuario({\r\n\t\t\t...usuario,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\tconst confirmarPassowrd = async () => {\r\n\t\tif (!usuario.password || !usuario.repeatPassword) {\r\n\t\t\tsetError({ error: true, message: 'Este campo es requerido' });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (usuario.password !== usuario.repeatPassword) {\r\n\t\t\tsetError({ error: true, message: 'Las contraseñas no coinciden' });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait actualizarUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tpassword: usuario.password,\r\n\t\t\t\t\t\trepeatPassword: usuario.repeatPassword\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: usuario._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetUpdate(!update);\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t\thandleClose();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button color=\"primary\" variant=\"text\" onClick={handleClickOpen}>\r\n\t\t\t\tCambiar contraseña\r\n\t\t\t</Button>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\taria-labelledby=\"alert-dialog-title\"\r\n\t\t\t\taria-describedby=\"alert-dialog-description\"\r\n\t\t\t>\r\n\t\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">{'Cambiar contraseña'}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<form autoComplete=\"off\">\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<span>* </span>Contraseña\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\terror.error && !usuario.password ? (\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t) : error.error && error.message === 'Las contraseñas no coinciden' ? (\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\tvalue={usuario.password ? usuario.password : ''}\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Visibility color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VisibilityOff color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormHelperText>{error.message}</FormHelperText>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<span>* </span>Repetir contraseña\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\terror.error && !usuario.password ? (\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t) : error.error && error.message === 'Las contraseñas no coinciden' ? (\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\tvalue={usuario.repeatPassword ? usuario.repeatPassword : ''}\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={() => setShowPassword(!showPassword)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Visibility color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VisibilityOff color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormHelperText>{error.message}</FormHelperText>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleClose} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={confirmarPassowrd}\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\tendIcon={loading ? <CircularProgress color=\"inherit\" size={25} /> : null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tConfirmar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import { Box, Checkbox, FormControlLabel } from '@material-ui/core'\r\nimport React from 'react';\r\n\r\nexport default function Parametros({ \r\n    arregloAccesos, \r\n    obtenerAccesos, \r\n    departamento, \r\n    subDepartamento\r\n}) {\r\n\r\n    console.log(arregloAccesos);\r\n    \r\n    return(\r\n        <Box display='flex' justifyContent='center' alignItems='center'>\r\n            <FormControlLabel\r\n                control={\r\n                    <Checkbox\r\n                        checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver : false}\r\n                        name=\"ver\"\r\n                        color=\"primary\"\r\n                        onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                    />\r\n                }\r\n                label={\r\n                    <Box mr={2} display='flex'>\r\n                        {departamento === 'ventas' ? \"Autorizar\" : \"Ver\" } \r\n                    </Box>\r\n                }\r\n            />\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'compras_espera' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'|| \r\n                subDepartamento === 'egresos' ? (null):(\r\n                    <FormControlLabel\r\n                        control={\r\n                            <Checkbox\r\n                                checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].agregar : false}\r\n                                name=\"agregar\"\r\n                                disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                                color=\"primary\"\r\n                                onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                            />\r\n                        }\r\n                        label={\r\n                            <Box mr={2}  display='flex'>\r\n                                Agregar\r\n                            </Box>\r\n                        }\r\n                    />\r\n            )}\r\n            {   subDepartamento === 'cajas' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'abonos_proveedores'|| \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas' ? (null) : ( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].editar : false}\r\n                            name=\"editar\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            color=\"primary\"\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box mr={2}  display='flex'>\r\n                            Editar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                subDepartamento === 'abonos_proveedores' || \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'? (null):( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].eliminar : false}\r\n                            name=\"eliminar\"\r\n                            color=\"primary\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box display='flex'>\r\n                            Eliminar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n        </Box>\r\n    )\r\n}\r\n","import {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Catalogos({ obtenerAccesos, arregloAccesos }) {\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Usuarios</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'usuarios'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Marcas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'marcas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Provedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'provedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Contabilidad</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'contabilidad'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Departamento</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'departamentos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Centro de costos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'centro_costos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Conceptos almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'conceptos_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Categorias</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'categorias'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Colores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'colores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Tallas y Numeros</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'tallas_numeros'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function MiEmpresa({ obtenerAccesos, arregloAccesos }) {\r\n      return (\r\n            <Fragment>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Typography variant=\"h6\">\r\n                            Marca los permisos que deseas asignar a este usuario\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Datos de Empresa</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'datos_empresa'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Información Fiscal</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'informacion_fiscal'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n            </Fragment>\r\n      )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Compras({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abrir una compra</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'abrir_compra'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras realizadas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_realizadas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras en espera</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_espera'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Almacenes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Almacenes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Traspasos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'traspasos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Inventario por almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'inventario_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Tesoreria({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cuentas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'cuentas_empresa'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Proveedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_proveedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Egresos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'egresos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Reportes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes Historiales Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_historial_cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes turnos usuarios </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_turnos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de compras </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_compras'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de ventas </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de almacenes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'rerporte_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de cortes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_corte_caja'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes tesoreria </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_tesoreria'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Ventas({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cancelar ventas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cancelar_venta'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Precios de productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'precios_productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Pre cortes de caja</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'pre_corte'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cotizaciones</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cotizaciones'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Producto Rapido</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'producto_rapido'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Panel de administrador</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'administrador'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Eliminar ventas pendientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'eliminar_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { AppBar, Box, Tabs } from '@material-ui/core';\r\nimport { Tab } from '@material-ui/core';\r\nimport {  FcPaid, FcShop, FcSurvey, FcNews } from 'react-icons/fc';\r\n\r\nimport Catalogos from './Departamentos/Catalogos';\r\nimport MiEmpresa from './Departamentos/MiEmpresa';\r\n\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport Compras from './Departamentos/Compras';\r\nimport Almacenes from './Departamentos/Almacenes';\r\nimport Tesoreria from './Departamentos/Tesoreria';\r\nimport Reportes from './Departamentos/Reportes';\r\nimport Ventas from './Departamentos/Ventas';\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={1} minHeight=\"20vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 30\r\n\t},\r\n\ticon:{\r\n\t\tfontSize: 30\r\n\t}\r\n}));\r\n\r\nexport default function AsignarPermisos({obtenerAccesos, arregloAccesos}) {\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\tconst [ value, setValue ] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n    return (\r\n        <>\r\n\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n                <Tabs\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"on\"\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    aria-label=\"scrollable force tabs example\"\r\n                >\r\n                   \t<Tab \r\n\t\t\t\t\t\tlabel=\"Mi empresa\"\r\n\t\t\t\t\t\ticon={<FcShop className={classes.icon}/>} {...a11yProps(0)} \r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tlabel=\"Almacenes\"\r\n\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg' alt=\"icono almacen\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t{...a11yProps(1)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab \r\n\t\t\t\t\t\tlabel=\"Compras\" \r\n\t\t\t\t\t\ticon={<FcPaid className={classes.icon} />} {...a11yProps(2)} \r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab \r\n\t\t\t\t\t\tlabel=\"Catalogos\" \r\n\t\t\t\t\t\ticon={<FcNews className={classes.icon} />} {...a11yProps(3)} \r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tlabel=\"Tesoreria\"\r\n\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg' alt=\"icono money\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t{...a11yProps(4)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tlabel=\"Reportes\"\r\n\t\t\t\t\t\ticon={<FcSurvey className={classes.icon} />}\r\n\t\t\t\t\t\t{...a11yProps(5)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tlabel=\"Facturación\"\r\n\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg' alt=\"icono factura\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t{...a11yProps(6)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tlabel=\"Ventas\"\r\n\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg' alt=\"icono ventas\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t{...a11yProps(7)}\r\n\t\t\t\t\t/>\r\n                </Tabs>\r\n            </AppBar>\r\n\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<MiEmpresa obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Almacenes obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={2}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Compras obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={3}>\r\n\t\t\t\t<Box p={0}>\r\n\t\t\t\t\t<Catalogos obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={4}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Tesoreria obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={5}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Reportes obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={6}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t{/* <CamposAsignados type='facturacion' /> */}\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={7}>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<Ventas obtenerAccesos={obtenerAccesos} arregloAccesos={arregloAccesos} />\r\n\t\t\t\t</Box>\r\n\t\t\t</TabPanel>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport { Button, IconButton, Tabs } from '@material-ui/core';\r\nimport { Dialog, DialogActions, Box } from '@material-ui/core';\r\nimport FormularioUsuario from './FormularioUsuario';\r\nimport AsignarPermisos from './AsingarAccesos/AsignarPermisos';\r\nimport { Add, Edit } from '@material-ui/icons';\r\nimport { UsuarioContext } from '../../../../context/Catalogos/usuarioContext';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport arregloVacio from './AsingarAccesos/arregloVacioAcceso'\r\nimport { useMutation } from '@apollo/client';\r\nimport { CREAR_USUARIO, ACTUALIZAR_USUARIO } from '../../../../gql/Catalogos/usuarios';\r\nimport { cleanTypenames, numerosRandom } from '../../../../config/reuserFunctions';\r\nimport { AppBar } from '@material-ui/core';\r\nimport { Tab } from '@material-ui/core';\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box minHeight=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\trootPrincipal:{\r\n\t\tpadding: 0,\r\n\t\tmargin: 0\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 50\r\n\t}\r\n}));\r\n\r\nexport default function CrearUsuario({ accion, datos }) {\r\n\tconst classes = useStyles();\r\n\tconst { usuario, setUsuario, setError, update, setUpdate } = useContext(UsuarioContext);\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ value, setValue ] = useState(0);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst limpiarCampos = useCallback(\r\n\t\t() => {\r\n\t\t\tsetUsuario({\r\n\t\t\t\tdireccion: {\r\n\t\t\t\t\tcalle: '',\r\n\t\t\t\t\tno_ext: '',\r\n\t\t\t\t\tno_int: '',\r\n\t\t\t\t\tcodigo_postal: '',\r\n\t\t\t\t\tcolonia: '',\r\n\t\t\t\t\tmunicipio: '',\r\n\t\t\t\t\tlocalidad: '',\r\n\t\t\t\t\testado: '',\r\n\t\t\t\t\tpais: ''\r\n\t\t\t\t},\r\n\t\t\t\tturno_en_caja_activo: false,\r\n\t\t\t\testado_usuario: true,\r\n\t\t\t\taccesos: arregloVacio\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ setUsuario ]\r\n\t);\r\n\r\n\tconst handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\tconst toggleModal = () => {\r\n\t\tsetOpen(true);\r\n\t\tif (accion !== 'registrar') {\r\n\t\t\tsetUsuario(datos);\r\n\t\t}\r\n\t};\r\n\t\r\n\tconst onCloseModal = () => {\r\n\t\tsetOpen(false);\r\n\t\tlimpiarCampos();\r\n\t};\r\n\r\n\tconst obtenerAccesos = (event, departamento, subDepartamentos) => {\r\n        const { name, checked } = event.target;\r\n        setUsuario({\r\n\t\t\t...usuario, accesos:{ ...usuario.accesos, \r\n\t\t\t\t[departamento]: {...usuario.accesos[departamento], \r\n\t\t\t\t\t[subDepartamentos]: {...usuario.accesos[departamento][subDepartamentos], [name]: checked }}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/* Mutations */\r\n\tconst [ crearUsuario ] = useMutation(CREAR_USUARIO);\r\n\tconst [ actualizarUsuario ] = useMutation(ACTUALIZAR_USUARIO);\r\n\tconst saveData = async () => {\r\n\t\tif (accion === 'registrar') {\r\n\t\t\tif (\r\n\t\t\t\t!usuario.nombre ||\r\n\t\t\t\t!usuario.password ||\r\n\t\t\t\t!usuario.repeatPassword ||\r\n\t\t\t\t!usuario.telefono ||\r\n\t\t\t\t!usuario.email\r\n\t\t\t) {\r\n\t\t\t\tsetError({ error: true, message: 'Este campo es requerido' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (usuario.password !== usuario.repeatPassword) {\r\n\t\t\t\tsetError({ error: true, message: 'Las contraseñas no coinciden' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!usuario.nombre || !usuario.telefono || !usuario.email) {\r\n\t\t\t\tsetError({ error: true, message: 'Este campo es requerido' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tif (accion === 'registrar') {\r\n\t\t\t\tusuario.numero_usuario = numerosRandom(100000000, 999999999);\r\n\t\t\t\tusuario.empresa = sesion.empresa._id;\r\n\t\t\t\tusuario.sucursal = sesion.sucursal._id;\r\n\t\t\t\tusuario.turno_en_caja_activo = false;\r\n\t\t\t\tconst input = usuario;\r\n\t\t\t\tawait crearUsuario({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tinput\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst { numero_usuario, _id, sucursal, empresa, turno_en_caja_activo, estado_usuario, ...input } = usuario;\r\n\t\t\t\tawait actualizarUsuario({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tinput: input,\r\n\t\t\t\t\t\tid: usuario._id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetUpdate(!update);\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetError({ error: false, message: '' });\r\n\t\t\tsetLoading(false);\r\n\t\t\tonCloseModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error en el servidor', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t{accion === 'registrar' ? (\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={toggleModal}>\r\n\t\t\t\t\t<Add /> Nuevo Usuario\r\n\t\t\t\t</Button>\r\n\t\t\t) : (\r\n\t\t\t\t<IconButton onClick={toggleModal}>\r\n\t\t\t\t\t<Edit />\r\n\t\t\t\t</IconButton>\r\n\t\t\t)}\r\n\t\t\t<Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n\t\t\t\t<Box className={classes.root}>\r\n\t\t\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Información básica\"\r\n\t\t\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/perfil.svg' alt=\"icono perfil\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Permisos\"\r\n\t\t\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/permisos.svg' alt=\"icono factura\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t\t\t{...a11yProps(1)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Box ml={58} mt={3} >\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={onCloseModal} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t\t\t<FormularioUsuario accion={accion} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t\t\t<AsignarPermisos \r\n\t\t\t\t\t\t\tarregloAccesos={usuario.accesos}\r\n\t\t\t\t\t\t\tobtenerAccesos={obtenerAccesos}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={saveData}\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tstartIcon={<DoneIcon />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tGuardar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow } from '@material-ui/core';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Divider, Grid } from '@material-ui/core';\r\nimport { DialogContent, DialogTitle, IconButton, Typography, Avatar, Switch } from '@material-ui/core';\r\nimport CrearUsario from './CrearUsuario';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport { Dehaze, Delete } from '@material-ui/icons';\r\nimport { UsuarioContext } from '../../../../context/Catalogos/usuarioContext';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_USUARIOS, ACTUALIZAR_USUARIO } from '../../../../gql/Catalogos/usuarios';\r\n\r\nconst columns = [\r\n\t{ id: 1, label: 'No. Usuario', minWidth: 100 },\r\n\t{ id: 3, label: 'Nombre', minWidth: 150 },\r\n\t{ id: 5, label: 'Correo', minWidth: 150 },\r\n\t{ id: 7, label: 'Estado', minWidth: 100 },\r\n\t{ id: 8, label: 'Detalles', minWidth: 50, align: 'right' },\r\n\t// { id: 9, label: 'Editar', minWidth: 50, align: 'right'},\r\n\t// { id: 10, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '70vh'\r\n\t},\r\n\tavatar: {\r\n\t\twidth: 130,\r\n\t\theight: 130\r\n\t}\r\n});\r\n\r\nexport default function ListaUsuarios({ sucursal, filtro }) {\r\n\tconst classes = useStyles();\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst { update } = useContext(UsuarioContext);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n\t\tvariables: { sucursal, filtro }\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerUsuarios } = data;\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader aria-label=\"sticky table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<TableCell key={9} align={'right'}>\r\n\t\t\t\t\t\t\t\t\tEditar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<TableCell key={10} align={'right'}>\r\n\t\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerUsuarios\r\n\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn <RowsRender key={index} datos={row} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={obtenerUsuarios.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [ openDetalles, setOpenDetalles ] = useState(false);\r\n\tconst { update, setUpdate } = useContext(UsuarioContext);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\r\n\tconst handleDetalles = () => setOpenDetalles(!openDetalles);\r\n\r\n\tconst [ actualizarUsuario ] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n\tconst cambiarEstado = async (e) => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait actualizarUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\testado_usuario: e.target.checked\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: datos._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetUpdate(!update);\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (error) {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.numero_usuario}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.nombre}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.email}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<CircularProgress size={30} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tchecked={datos.estado_usuario}\r\n\t\t\t\t\t\tonChange={cambiarEstado}\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<ModalDetalles openDetalles={openDetalles} handleDetalles={handleDetalles} datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t{permisosUsuario.accesos.catalogos.usuarios.editar === false ? (null):(\r\n\t\t\t\t<TableCell width={50}>\r\n\t\t\t\t\t<CrearUsario accion=\"actualizar\" datos={datos} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? (null):(\r\n\t\t\t\t<TableCell width={50}>\r\n\t\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\nconst ModalDetalles = ({ handleDetalles, openDetalles, datos }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={handleDetalles}>\r\n\t\t\t\t<Dehaze />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openDetalles} onClose={handleDetalles} fullWidth maxWidth=\"md\">\r\n\t\t\t\t<DialogTitle>{'Información completa del cliente'}</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\">Información básica</Typography>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t<Box mt={3} height={120} width={120} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={datos.imagen} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Número de usuario: </b>\r\n\t\t\t\t\t\t\t\t{datos.numero_usuario}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Nombre: </b>\r\n\t\t\t\t\t\t\t\t{datos.nombre}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Correo: </b>\r\n\t\t\t\t\t\t\t\t{datos.email ? datos.email : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Telefono: </b>\r\n\t\t\t\t\t\t\t\t{datos.telefono ? datos.telefono : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Celular: </b>\r\n\t\t\t\t\t\t\t\t{datos.celular ? datos.celular : ' -'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Estado del usuario: </b>\r\n\t\t\t\t\t\t\t\t{datos.estado_usuario ? 'Activo' : 'Inactivo'}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Dirección</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Calle: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.calle ? datos.direccion.calle : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>No. Exterior: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.no_ext ? datos.direccion.no_ext : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>No. Interior: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.no_int ? datos.direccion.no_int : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Código postal: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.codigo_postal ? datos.direccion.codigo_postal : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Colonia: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.colonia ? datos.direccion.colonia : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Municipio: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.municipio ? datos.direccion.municipio : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Localidad: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.localidad ? datos.direccion.localidad : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Estado: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.estado ? datos.direccion.estado : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t\t<b>Pais: </b>\r\n\t\t\t\t\t\t\t\t\t\t{datos.direccion.pais ? datos.direccion.pais : ' -'}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleDetalles} color=\"primary\" variant=\"contained\" size=\"large\">\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Search } from '@material-ui/icons';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Paper, InputBase, IconButton } from '@material-ui/core';\r\nimport ListaUsuarios from './ListaUsuario';\r\nimport CrearUsuario from './CrearUsuario';\r\nimport { UsuarioProvider } from '../../../../context/Catalogos/usuarioContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Usuarios() {\r\n\tconst classes = useStyles();\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\tconst [ values, setValues ] = useState('');\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') setFiltro(e.target.defaultValue);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<UsuarioProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tUsuarios\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tUsuarios\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\r\n\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t\t<Box mr={5} minWidth=\"70%\">\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Buscar cliente...\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t\tvalue={values}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => setFiltro(values)}>\r\n\t\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.agregar === false ? (null):(\r\n\t\t\t\t\t\t\t<CrearUsuario accion=\"registrar\" datos={undefined} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<ListaUsuarios sucursal={sesion.sucursal._id} filtro={filtro} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</UsuarioProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateDepartamentosContext = createContext();\r\n\r\nexport const DepartamentosProvider = ({ children }) => {\r\n    const [data, setData] = useState({\r\n\t\tnombre_departamentos:''\r\n\t});\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ accion, setAccion ] = useState(true);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ idDepartamento, setIdDepartamento ] = useState(\"\");\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [  loading, setLoading ] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<CreateDepartamentosContext.Provider value={\r\n            { \r\n                data, \r\n                setData,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                accion,\r\n                setAccion,\r\n                idDepartamento, \r\n                setIdDepartamento,\r\n                alert,\r\n                setAlert,\r\n                loading,\r\n                setLoading\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateDepartamentosContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow,\r\n\tIconButton,\r\n\tTablePagination,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core/';\r\n \r\nimport { Delete, Edit, Close } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_DEPARTAMENTOS, ELIMINAR_DEPARTAMENTO } from '../../../../gql/Catalogos/departamentos';\r\n// import ContainerRegistroAlmacen from './RegistroDepartamento';\r\n import { CreateDepartamentosContext } from '../../../../context/Catalogos/Departamentos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: { \r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaDepartamentos() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet obtenerDepartamentos = [];\r\n\r\n\tconst { update, setAccion, idDepartamento,setIdDepartamento, setData, setAlert, setLoading } = useContext(CreateDepartamentosContext);\r\n\tconst [ eliminarDepartamento ] = useMutation(ELIMINAR_DEPARTAMENTO);\r\n\t/* Queries */\r\n\tconst { data, refetch } = useQuery(OBTENER_DEPARTAMENTOS,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst handleModal = () => setOpen(!open);\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleDelete = async () => {\r\n   \r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n            const resultado = await eliminarDepartamento({\r\n                variables: {\r\n                    id: idDepartamento\r\n                }\r\n            });\r\n\r\n\t\t\tif(resultado.data.eliminarDepartamento.message === 'false'){\r\n\t\t\t\tsetAlert({ message: 'Departamento eliminado con exito', status: 'success', open: true });\r\n\t\t\t}else{\r\n\t\t\t\tsetAlert({ message: resultado.data.eliminarDepartamento.message, status: 'error', open: true });\r\n\t\t\t};\r\n\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetOpen(false)\r\n\t\t\tsetIdDepartamento('');\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif(data){\r\n\t\tobtenerDepartamentos = data.obtenerDepartamentos\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Departamentos</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerDepartamentos?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)?.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}selected={idDepartamento === row._id ? true : false}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_departamentos}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.editar === false ?(null):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{idDepartamento === row._id ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_departamentos: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}); \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_departamentos: row.nombre_departamentos\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.eliminar === false ?(null):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerDepartamentos.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={open} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tOK\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { Box, Button, TextField } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport TablaDepartamentos from './ListaDepartamentos';\r\nimport { REGISTRAR_DEPARTAMENTO,  ACTUALIZAR_DEPARTAMENTO  } from '../../../../gql/Catalogos/departamentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CreateDepartamentosContext } from '../../../../context/Catalogos/Departamentos';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nexport default function RegistroDepartamentos() {\r\n\tconst { data, setData, update, setUpdate, error, setError, accion, setAccion, idDepartamento, setIdDepartamento , setLoading, setAlert, loading, alert} = useContext(CreateDepartamentosContext);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst [ CrearDepartamentos ] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n\tconst [ ActualzarDepartamentos ] = useMutation(ACTUALIZAR_DEPARTAMENTO);\r\n\r\n\r\n\r\n\tconst saveData = async () => {\r\n\t\ttry {\r\n\t\t\tif(!data.nombre_departamentos){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.departamentos.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait CrearDepartamentos({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.departamentos.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst inputActualizado = cleanTypenames(input);\r\n\t\t\t\t\t\tawait ActualzarDepartamentos({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput: inputActualizado,\r\n\t\t\t\t\t\t\t\tid: idDepartamento\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}) \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetUpdate(!update);\r\n\t\t\t\tsetAccion(true)\r\n\t\t\t\tsetIdDepartamento(\"\");\r\n\t\t\t\tsetData({\r\n\t\t\t\t\tnombre_departamentos: \"\"\r\n\t\t\t\t});\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n                setLoading(false);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"outlined-error-helper-text\"\r\n\t\t\t\t\tlabel=\"Nombre departamento\"\r\n\t\t\t\t\tvalue={data.nombre_departamentos}\r\n\t\t\t\t\tname=\"nombre_departamentos\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tsize=\"small\"\r\n                    fullWidth\r\n\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t/>\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={saveData} >\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<TablaDepartamentos  />\r\n\t\t</Box>\r\n\t); \r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroDepartamentos from './RegistroDepartamento';\r\nimport { DepartamentosProvider } from '../../../../context/Catalogos/Departamentos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Departamentos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<DepartamentosProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/departamentos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tDepartamentos\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tDepartamentos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t<Container maxWidth=\"sm\">\r\n\t\t\t\t\t\t\t<RegistroDepartamentos accion=\"registrar\" />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</DepartamentosProvider>\r\n\t\t</div>\r\n\t);\r\n} \r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, fade } from '@material-ui/core';\r\nimport { Box, Button, Divider, IconButton, TextField, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Add, Delete, Edit, ExpandMore, Close } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\n \r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport {\r\n\tOBTENER_CATEGORIAS,\r\n\tCREAR_CATEGORIA,\r\n\tCREAR_SUBCATEGORIA,\r\n\tACTUALIZAR_SUBCATEGORIA,\r\n\tACTUALIZAR_CATEGORIA, \r\n\tELIMINAR_CATEGORIA,\r\n\tELIMINAR_SUBCATEGORIA\r\n} from '../../../../gql/Catalogos/categorias';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tselected: {\r\n\t\tbackground: fade(theme.palette.secondary.main, 0.1)\r\n\t}\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ categoria, setCategoria ] = useState('');\r\n\tconst [ toUpdateID, setToUpdateID ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CATEGORIAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\t/*  Categorias Mutations */\r\n\tconst [ crearCategoria ] = useMutation(CREAR_CATEGORIA);\r\n\tconst [ actualizarCategoria ] = useMutation(ACTUALIZAR_CATEGORIA);\r\n\r\n\t\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetCategoria(e.target.value);\r\n\t};\r\n\r\n\tconst guardarCategoria = async () => {\r\n\t\tif (!categoria) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearCategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcategoria,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst categoriaActualizada = cleanTypenames(categoria);\r\n\t\t\t\t\tawait actualizarCategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcategoria: categoriaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCategoria('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerCategorias } = data;\r\n\tconst render_categorias = obtenerCategorias.map((categoria, index) => (\r\n\t\t<RenderCategorias\r\n\t\t\tkey={index}\r\n\t\t\tcategoria={categoria}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\tsetCategoria={setCategoria}\r\n\t\t\trefetch={refetch}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t/>\r\n\t));\r\n\treturn (\r\n\t\t<div className={classes.root} >\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Typography variant=\"h6\">Categorias</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField value={categoria} variant=\"outlined\" size=\"small\" onChange={obtenerDatos} />\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={guardarCategoria}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{render_categorias}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderCategorias = ({ categoria, setToUpdateID, setCategoria, refetch, toUpdateID }) => {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ subcategoria, setSubcategoria ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/*  Subcategorias Mutations */\r\n\tconst [ crearSubcategoria ] = useMutation(CREAR_SUBCATEGORIA);\r\n\tconst [ actualizarSubcategoria ] = useMutation(ACTUALIZAR_SUBCATEGORIA);\r\n\tconst [ eliminarCategoria ] = useMutation(ELIMINAR_CATEGORIA);\r\n\r\n\r\n\tconst render_subcategorias = categoria.subcategorias.map((subcategoria) => (\r\n\t\t<RenderSubcategorias\r\n\t\t\tkey={subcategoria._id}\r\n\t\t\tidCategoria= {categoria._id}\r\n\t\t\tsubcategoria={subcategoria}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t\tsetSubcategoria={setSubcategoria}\r\n\t\t\tsetAlert={setAlert}\r\n\t\t\trefetch={refetch}\r\n\t\t/>\r\n\t));\r\n\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\r\n\t\twindow.scrollTo(0,0);\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(categoria._id);\r\n\t\tsetCategoria(categoria.categoria);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetCategoria('');\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetSubcategoria(e.target.value);\r\n\t};\r\n\r\n\tconst guardarSubcategoria = async () => {\r\n\t\tif (!subcategoria) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\tlet msgAlert = '';\r\n\t\tlet resp;\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresp = await crearSubcategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcategoria\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: categoria._id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmsgAlert = ( resp.data.crearSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.crearSubcategoria.message, status: 'error', open: true }\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst subCategoriaActualizada = cleanTypenames(subcategoria);\r\n\t\t\t\t\tresp = await actualizarSubcategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcategoria: subCategoriaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: categoria._id,\r\n\t\t\t\t\t\t\tidSubcategoria: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmsgAlert =( resp.data.actualizarSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.actualizarSubcategoria.message, status: 'error', open: true }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\t\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcategoria('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDelete = async (event) => {\r\n\t\tevent.stopPropagation()\r\n\t\ttry {\r\n\t\t\tconst resp = await eliminarCategoria({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tidCategoria: categoria._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet msgAlert = ( resp.data.eliminarCategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.eliminarCategoria.message, status: 'error', open: true }\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\trefetch();\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\tclassName={toUpdateID && toUpdateID === categoria._id ? classes.selected : ''}\r\n\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\taria-label=\"Expand\"\r\n\t\t\t\t\taria-controls={`categoria-action-${categoria._id}`}\r\n\t\t\t\t\tid={`categoria-${categoria._id}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">{categoria.categoria}</Typography>\r\n\t\t\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.categorias.editar === false ?(null):(\r\n\t\t\t\t\t\t\ttoUpdateID && toUpdateID === categoria._id ? (\r\n\t\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tonClick={obtenerCamposParaActualizar}\r\n\t\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.categorias.eliminar === false ?(null):(\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={(event) => handleDelete(event)}\r\n\t\t\t\t\t\t\t\tonFocus={(event) => handleDelete(event)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Box mb={2} />\r\n\t\t\t\t\t\t<Box ml={5} width=\"100%\" display=\"flex\">\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">Subcategorias</Typography>\r\n\t\t\t\t\t\t\t<Box mr={2} />\r\n\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tvalue={subcategoria}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Box ml={1} />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tonClick={guardarSubcategoria}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={5}>{render_subcategorias}</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst RenderSubcategorias = ({ subcategoria,idCategoria, toUpdateID, setToUpdateID, setSubcategoria,setAlert, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst classes = useStyles();\r\n\tconst [ eliminarSubcategoria ] = useMutation(ELIMINAR_SUBCATEGORIA);\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(subcategoria._id);\r\n\t\tsetSubcategoria(subcategoria.subcategoria);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetSubcategoria('');\r\n\t};\r\n\tconst handleDelete = async (event) => {\r\n\t\ttry {\r\n\t\t\tevent.stopPropagation()\r\n\t\t\tconst resp = await eliminarSubcategoria({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tidCategoria: idCategoria,\r\n\t\t\t\t\tidSubcategoria:subcategoria._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet msgAlert = ( resp.data.eliminarSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.eliminarSubcategoria.message, status: 'error', open: true }\r\n\t\t\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\t\r\n\t\t\trefetch();\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Ocurrió un error', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tborderRadius={3}\r\n\t\t\t\tpx={1}\r\n\t\t\t\tclassName={toUpdateID && toUpdateID === subcategoria._id ? classes.selected : ''}\r\n\t\t\t>\r\n\t\t\t\t<Typography>{subcategoria.subcategoria}</Typography>\r\n\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t{sesion.accesos.catalogos.categorias.editar === false ?(null):(\r\n\t\t\t\t\ttoUpdateID && toUpdateID === subcategoria._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={obtenerCamposParaActualizar} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t\t{sesion.accesos.catalogos.categorias.eliminar === false ?(null):(\r\n\t\t\t\t\t<IconButton onClick={(event) => handleDelete(event) }>\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCategorias from './RegistroCategorias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Categorias() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/categorias.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCategorias\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCategorias\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCategorias />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div> \r\n\t);\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Box, Button, Dialog, DialogActions, DialogTitle, IconButton, TextField, Typography } from '@material-ui/core';\r\nimport { Close, Delete, Edit } from '@material-ui/icons';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { ELIMINAR_COLOR, OBTENER_COLORES } from '../../../../gql/Catalogos/colores';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcolor: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center'\r\n\t}\r\n}));\r\n\r\nexport default function TablaColores({ datos, toUpdate, setToUpdate, setValues, refetch }) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [ busqueda, setBusqueda ] = useState('');\r\n\tconst [ productosFiltrados, setProductosFiltrados ] = useState([]);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetProductosFiltrados(\r\n\t\t\t\tdatos.filter((datos) => {\r\n\t\t\t\t\treturn datos.nombre.toLowerCase().includes(busqueda.toLowerCase());\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ busqueda, datos ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tplaceholder=\"Buscar...\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonChange={(e) => setBusqueda(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell width={150}>Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Nombre</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.colores.editar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.colores.eliminar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{productosFiltrados\r\n\t\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t\t.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\trow={row}\r\n\t\t\t\t\t\t\t\t\t\t\tsetAlert={setAlert}\r\n\t\t\t\t\t\t\t\t\t\t\ttoUpdate={toUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\tsetToUpdate={setToUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\tsetValues={setValues}\r\n\t\t\t\t\t\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={datos.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RowsRender = ({ row, setAlert, toUpdate, setToUpdate, setValues, refetch }) => {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst [ eliminarColor ] = useMutation(ELIMINAR_COLOR, {\r\n\t\tupdate(cache, { data: { eliminarColor } }) {\r\n\t\t\ttry {\r\n\t\t\t\tconst { obtenerColores } = cache.readQuery({\r\n\t\t\t\t\tquery: OBTENER_COLORES,\r\n\t\t\t\t\tvariables: { empresa: row.empresa._id }\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcache.writeQuery({\r\n\t\t\t\t\tquery: OBTENER_COLORES,\r\n\t\t\t\t\tvariables: { empresa: row.empresa._id },\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tobtenerColores: {\r\n\t\t\t\t\t\t\t...obtenerColores,\r\n\t\t\t\t\t\t\teliminarColor\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tconst resp = await eliminarColor({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch(refetch);\r\n\t\t\tsetAlert({ message: resp.data.eliminarColor.message, status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (row) => {\r\n\t\tif (!row) {\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetValues({ nombre: '', hex: '' });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetToUpdate(row._id);\r\n\t\tsetValues({ nombre: row.nombre, hex: row.hex });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === row._id ? true : false}>\r\n\t\t\t<TableCell className={classes.color}>\r\n\t\t\t\t<Box mr={1} width={30} height={25} bgcolor={row.hex} borderRadius=\"10%\" />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>{row.hex}</b>\r\n\t\t\t\t</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>{row.nombre}</b>\r\n\t\t\t\t</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t{sesion.accesos.catalogos.colores.editar === false ? (null) : (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t{toUpdate === row._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate(row)}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.catalogos.colores.eliminar === false ? (null) : (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Grid, CircularProgress, TextField, Typography } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport TablaColores from './ListaColores';\r\nimport { SketchPicker } from 'react-color'; \r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_COLORES, CREAR_COLOR, ACTUALIZAR_COLOR } from '../../../../gql/Catalogos/colores';\r\n\r\nexport default function RegistroColores() {\r\n\tconst [ color, setColor ] = useState({});\r\n\tconst [ toUpdate, setToUpdate ] = useState('');\r\n\tconst [ values, setValues ] = useState({ nombre: '', hex: '' });\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_COLORES, {\r\n\t\tvariables: { sucursal: sesion.sucursal._id }\r\n\t});\r\n\r\n\t/* Mutations */\r\n\tconst [ crearColor ] = useMutation(CREAR_COLOR);\r\n\tconst [ actualizarColor ] = useMutation(ACTUALIZAR_COLOR);\r\n\r\n\tconst handleChangeComplete = (color) => {\r\n\t\tsetColor(color);\r\n\t\tsetValues({\r\n\t\t\t...values,\r\n\t\t\thex: color.hex.toUpperCase()\r\n\t\t});\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerColores } = data;\r\n\r\n\tconst GuardarDatosBD = async () => {\r\n\t\tif (!values.nombre || !values.hex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst colores = values;\r\n\t\t\tlet msg;\r\n\t\t\tif (toUpdate) {\r\n\t\t\t\tif (sesion.accesos.catalogos.colores.editar === false) {\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst colorActualizado = cleanTypenames(colores);\r\n\t\t\t\t\tconst resp = await actualizarColor({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\t\tnombre: colorActualizado.nombre,\r\n\t\t\t\t\t\t\t\t\thex: colorActualizado.hex\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tid: toUpdate\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tmsg = resp.data.actualizarColor.message\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.colores.agregar === false) {\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearColor({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tnombre: colores.nombre,\r\n\t\t\t\t\t\t\t\thex: colores.hex,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tmsg = '¡Listo!. Color creado.'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetValues({ nombre: '', hex: '' });\r\n\t\t\tsetToUpdate('');\r\n\t\t\r\n\t\t\tsetAlert({ message: msg, status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n\t\r\n\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<SketchPicker color={color} onChangeComplete={handleChangeComplete} />\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Typography>Color seleccionado:</Typography>\r\n\t\t\t\t\t\t{!values.hex ? (\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n\t\t\t\t\t\t\t\t<Typography color=\"secondary\">NINGUNO</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Box bgcolor={values.hex} height={30} width={220} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box my={2} width=\"75%\">\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Nombre del color\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={values.nombre}\r\n\t\t\t\t\t\t\tonChange={(e) => setValues({ ...values, nombre: e.target.value.toUpperCase() })}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Box my={1} />\r\n\t\t\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" fullWidth onClick={GuardarDatosBD}>\r\n\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={7}>\r\n\t\t\t\t\t<TablaColores\r\n\t\t\t\t\t\tdatos={obtenerColores}\r\n\t\t\t\t\t\ttoUpdate={toUpdate}\r\n\t\t\t\t\t\tsetToUpdate={setToUpdate}\r\n\t\t\t\t\t\tsetValues={setValues}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroColores from './RegistroColores';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Colores() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/colores.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tColores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tColores\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroColores />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow,\r\n\tIconButton,\r\n\tTablePagination,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core/';\r\nimport { Delete, Edit, Close } from '@material-ui/icons';\r\nimport { useQuery } from '@apollo/client';\r\nimport { useMutation } from '@apollo/client';\r\nimport { OBTENER_MARCAS, ELIMINAR_MARCAS } from '../../../../gql/Catalogos/marcas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function ListaMarcas({updateData, toUpdate, setToUpdate, setData}) {\r\n\r\n    const classes = useStyles();\r\n    const [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet obtenerMarcas = [];\r\n\t\r\n\r\n    const { data, refetch } = useQuery(OBTENER_MARCAS,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch, updateData])\r\n\r\n    if(data){\r\n\t\tobtenerMarcas = data.obtenerMarcas\r\n\t}\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Marca</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tobtenerMarcas\r\n\t\t\t\t\t\t\t\t?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t\t?.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <RowsRender key={index} setAlert={setAlert} refetch={refetch} datos={row} toUpdate={toUpdate} setToUpdate={setToUpdate} setData={setData} />;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerMarcas.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos, updateData, toUpdate, setAlert, setToUpdate, setData, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst [ eliminarMarca ] = useMutation(ELIMINAR_MARCAS);\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tconst resultado = await eliminarMarca({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: datos._id,\r\n\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(resultado.data.eliminarMarca.message === 'false'){\r\n\t\t\t\tsetAlert({ message: 'Marca eliminada con exito', status: 'success', open: true });\r\n\t\t\t}else{\r\n\t\t\t\tsetAlert({ message: resultado.data.eliminarMarca.message, status: 'error', open: true });\r\n\t\t\t};\r\n\t\t\trefetch();\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (dato) => {\r\n\t\tif(!dato){\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetData('');\r\n\t\t\trefetch();\r\n\t\t\treturn\r\n\t\t}\r\n\t\trefetch();\r\n\t\tsetToUpdate(dato._id);\r\n\t\tsetData(dato);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === datos._id ? true : false}>\r\n\t\t\t<TableCell>{datos.nombre_marca}</TableCell>\r\n\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t{toUpdate === datos._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate(datos)}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\n\r\n//ELIMINAR DATOS DE LA TABLA\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateMarcasContext = createContext();\r\n\r\nexport const MarcasProvider = ({ children }) => {\r\n\tconst [ datosMarcas, setDatosMarcas ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CreateMarcasContext.Provider value={\r\n            { \r\n                datosMarcas, \r\n                setDatosMarcas,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateMarcasContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport {\r\n    Button,\r\n    Box,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport ListaMarcas from './ListaMarcas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { Add } from '@material-ui/icons';\r\nimport { /* OBTENER_MARCAS, */ REGISTRAR_MARCAS, ACTUALIZAR_MARCAS} from '../../../../gql/Catalogos/marcas';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CreateMarcasContext } from '../../../../context/Catalogos/Marcas';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\n\r\nexport default function VistaMarcas() {\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ data, setData ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n    const [ toUpdate, setToUpdate ] = useState('');\r\n    const [updateData, setUpdateData] = useState(false);\r\n    const { /* datosMarcas, setDatosMarcas, */ error, setError } = useContext(CreateMarcasContext);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ CrearMarca ] = useMutation(REGISTRAR_MARCAS);\r\n\tconst [ actualizarMarca ] = useMutation(ACTUALIZAR_MARCAS);\r\n\r\n    const obtenerDatos = (e) => {\r\n        setData({\r\n            ...data,\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if(!data.nombre_marca){\r\n                setError(true);\r\n\t\t\t    return;\r\n            }else{\r\n                if(toUpdate){\r\n                    if (sesion.accesos.catalogos.marcas.editar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = cleanTypenames(data);\r\n                        await actualizarMarca({\r\n                            variables: {\r\n                                input: {\r\n                                    nombre_marca: input.nombre_marca,\r\n                                },\r\n                                id: toUpdate\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }else{\r\n                    if (sesion.accesos.catalogos.marcas.agregar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = data;\r\n                        await CrearMarca({\r\n                            variables: {\r\n                                input,\r\n                                empresa: sesion.empresa._id,\r\n                                sucursal: sesion.sucursal._id\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }\r\n                setToUpdate('');\r\n                setUpdateData(!updateData);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n            }\r\n        } catch (error) {\r\n        }\r\n    }\r\n\r\n    const pressEnter = (e) => {\r\n        if (e.key === 'Enter') saveData();\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n                    <TextField\r\n                        id=\"outlined-error-helper-text\"\r\n                        label=\"Nombre departamento\"\r\n                        value={data.nombre_marca ? data.nombre_marca : \"\"}\r\n                        name=\"nombre_marca\"\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        fullWidth\r\n                        onChange={obtenerDatos}\r\n                        error={error}\r\n                        onKeyPress={pressEnter}\r\n                    />\r\n                    <Box ml={1} />\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant=\"contained\" \r\n                        size=\"large\" \r\n                        disableElevation \r\n                        onClick={saveData}\r\n                    >\r\n                        <Add />Guardar\r\n                    </Button>\r\n                </Box>\r\n            <ListaMarcas toUpdate={toUpdate} setToUpdate={setToUpdate} updateData={updateData} setData={setData} />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { \r\n    Button, \r\n    Box, \r\n    Dialog,\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    Container,\r\n    makeStyles,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { FcRating } from \"react-icons/fc\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport VistaMarcas from './VistaMarcas';\r\nimport { MarcasProvider } from '../../../../context/Catalogos/Marcas';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nexport default function Marcas() {\r\n    const classes = useStyles();\r\n    const [ open, setOpen ] = React.useState(false);\r\n\r\n    const handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<MarcasProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcRating className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t\t<VistaMarcas />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</MarcasProvider>\r\n\t\t</div>\r\n    )\r\n}\r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, fade } from '@material-ui/core';\r\nimport { Box, Button, Divider, IconButton, TextField, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Add, Delete, Edit, ExpandMore, Close } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport {\r\n\tOBTENER_CUENTAS,\r\n\tCREAR_CUENTA,\r\n\tCREAR_SUBCUENTA,\r\n\tACTUALIZAR_SUBCUENTA,\r\n\tACTUALIZAR_CUENTA,\r\n    ELIMINAR_CUENTA,\r\n    ELIMINAR_SUBCUENTA\r\n} from '../../../../gql/Catalogos/centroCostos';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tselected: {\r\n\t\tbackground: fade(theme.palette.secondary.main, 0.1)\r\n\t}\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ cuenta, setCuenta ] = useState('');\r\n\tconst [ toUpdateID, setToUpdateID ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\t/*  Categorias Mutations */\r\n\tconst [ crearCuenta ] = useMutation(CREAR_CUENTA);\r\n\tconst [ actualizarCuenta ] = useMutation(ACTUALIZAR_CUENTA);\r\n   \r\n  \r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerCuentas } = data;\r\n\tconst render_cuentas = obtenerCuentas.map((cuenta, index) => (\r\n\t\t<RenderCuentas\r\n\t\t\tkey={index}\r\n\t\t\tcuenta={cuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\tsetCuenta={setCuenta}\r\n\t\t\trefetch={refetch}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t/>\r\n\t));\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetCuenta(e.target.value);\r\n\t};\r\n    \r\n\tconst guardarCuenta = async () => {\r\n\t\tif (!cuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst cuentaActualizada = cleanTypenames(cuenta);\r\n\t\t\t\t\tawait actualizarCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta: cuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    \r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Typography variant=\"h6\">Cuentas</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField value={cuenta} variant=\"outlined\" size=\"small\" onChange={obtenerDatos} />\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={guardarCuenta}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{render_cuentas}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderCuentas = ({ cuenta, setToUpdateID, setCuenta, refetch, toUpdateID }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ subcuenta, setSubcuenta ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n     const [ eliminarCuenta ] = useMutation(ELIMINAR_CUENTA);\r\n\t/*  Subcategorias Mutations */\r\n\tconst [ crearSubcuenta ] = useMutation(CREAR_SUBCUENTA);\r\n\tconst [ actualizarSubcuenta ] = useMutation(ACTUALIZAR_SUBCUENTA);\r\n   \r\n\t\r\n    const render_subcuentas = (cuenta.subcuentas !== null) ? cuenta.subcuentas.map((subcuenta) => (\r\n\t\t<RenderSubcuentas\r\n\t\t\tkey={subcuenta._id}\r\n            idCuenta={cuenta._id}\r\n\t\t\tsubcuenta={subcuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t\tsetSubcuenta={setSubcuenta}\r\n            refetch={refetch}\r\n\t\t/>\r\n\t))\r\n\t: \r\n\t(<div/>)\r\n\t; \r\n\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(cuenta._id);\r\n\t\tsetCuenta(cuenta.cuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetCuenta('');\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetSubcuenta(e.target.value);\r\n\t};\r\n\r\n\tconst guardarSubcuenta = async () => {\r\n\t\tif (!subcuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcuenta\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst subCuentaActualizada = cleanTypenames(subcuenta)\r\n\t\t\t\t\tawait actualizarSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: { \r\n\t\t\t\t\t\t\t\tsubcuenta: subCuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id,\r\n\t\t\t\t\t\t\tidSubcuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    const deleteCuenta = async (idCuenta) => {\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarCuenta({\r\n                variables: {\r\n                    id: idCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n    \r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\tclassName={toUpdateID && toUpdateID === cuenta._id ? classes.selected : ''}\r\n\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\taria-label=\"Expand\"\r\n\t\t\t\t\taria-controls={`cuenta-action-${cuenta._id}`}\r\n\t\t\t\t\tid={`cuenta-${cuenta._id}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">{cuenta.cuenta}</Typography>\r\n\t\t\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t\t\t{toUpdateID && toUpdateID === cuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tonClick={obtenerCamposParaActualizar}\r\n\t\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={() => deleteCuenta(cuenta._id )}\r\n\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Box mb={2} />\r\n\t\t\t\t\t\t<Box ml={5} width=\"100%\" display=\"flex\">\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">Subcuenta</Typography>\r\n\t\t\t\t\t\t\t<Box mr={2} />\r\n\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tvalue={subcuenta}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Box ml={1} />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tonClick={guardarSubcuenta}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{(cuenta.subcuentas !== null ) ?\r\n\t\t\t\t\t\t\t<Box ml={5}>{render_subcuentas}</Box>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t{/* <Box ml={5}>{render_subcostos}</Box> */}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst RenderSubcuentas = ({ idCuenta,subcuenta, toUpdateID, setToUpdateID, setSubcuenta, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n    const [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ eliminarSubcuenta ] = useMutation(ELIMINAR_SUBCUENTA);\r\n\t\r\n    const obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(subcuenta._id);\r\n\t\tsetSubcuenta(subcuenta.subcuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetSubcuenta('');\r\n\t};\r\n    const deleteSubCuenta = async ( idSubCuenta) => {\r\n        \r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarSubcuenta({\r\n                variables: {\r\n                    idCuenta: idCuenta,\r\n                    idSubcuenta: idSubCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n    \r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tborderRadius={3}\r\n\t\t\t\tpx={1}\r\n\t\t\t\tclassName={toUpdateID && toUpdateID === subcuenta._id ? classes.selected : ''}\r\n\t\t\t>\r\n\t\t\t\t<Typography>{subcuenta.subcuenta}</Typography>\r\n\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t{\r\n\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\ttoUpdateID && toUpdateID === subcuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<IconButton onClick={obtenerCamposParaActualizar} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t<IconButton onClick={() => deleteSubCuenta(subcuenta._id)} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCentroCostos from './RegistroCentroCostos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CentroCostos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCentro de costos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCentro de costos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCentroCostos />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONCEPTOS_ALMACEN = gql`\r\n    query ObtenerConceptosAlmacen($empresa: ID!, $sucursal: ID!){\r\n        obtenerConceptosAlmacen(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_concepto\r\n            destino\r\n            origen\r\n            editable\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONCEPTO_ALMACEN = gql`\r\n    mutation CrearConceptoAlmacen($input: ConceptoAlmacenInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearConceptoAlmacen(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONCEPTO_ALMACEN = gql`\r\n    mutation ActualizarConceptoAlmacen($input: ConceptoAlmacenInput, $id: ID!){\r\n        actualizarConceptoAlmacen(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONCEPTO_ALMACEN = gql`\r\n    mutation EliminarConceptoAlmacen($id: ID!){\r\n        eliminarConceptoAlmacen(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n\tBox,\r\n\tCircularProgress,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTablePagination,\r\n\tTableRow,\r\n\tPaper,\r\n\tmakeStyles,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core';\r\n\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN, ELIMINAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaConceptos({setData, setIdConcepto, idConcepto, setAccion, updateData, setAlert}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\tlet obtenerConcepto= [];\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\tconst [ EliminarConceptoAlmacen ] = useMutation(ELIMINAR_CONCEPTO_ALMACEN);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ updateData, refetch ]\r\n\t); \r\n\r\n\tif(data){\r\n\t\tobtenerConcepto = data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait EliminarConceptoAlmacen({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: idConcepto\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t\tsetIdConcepto(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (loading){\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Concepto almacén</TableCell>\r\n                                <TableCell padding=\"default\">Origen</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Destino</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerConcepto?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_concepto}</TableCell>\r\n                                        <TableCell>{row.origen}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.destino}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_concepto: row.nombre_concepto,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torigen: row.origen,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdestino: row.destino\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerConcepto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Eliminar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Button, TextField, FormControl, Input, Grid, InputLabel, Select, MenuItem, useTheme, Dialog, DialogTitle, DialogActions } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport ListaConceptos from './ListaConceptos';\r\nimport { REGISTRAR_CONCEPTO_ALMACEN, ACTUALIZAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n     formControl: {\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom:theme.spacing(3),\r\n        minWidth: 200,\r\n        maxWidth: 200,\r\n    },\r\n}));\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nconst tipos = [\r\n    'SUMA',\r\n    'RESTA',\r\n\t'N/A'\r\n];\r\n\r\nfunction getStyles(tipo, tipoName, theme) {\r\n\tconsole.log(tipoName)\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function RegistroServicios() {\r\n\tconst classes = useStyles();\r\n     const theme = useTheme();\r\n\tconst [updateData, setUpdateData] = useState(false);\r\n\tconst [data, setData] = useState({\r\n\t\tnombre_concepto: \"\",\r\n        destino: \"\",\r\n\t\torigen:\"\"\r\n\t\t\r\n\t});\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [error, setError] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [accion, setAccion] = useState(true);\r\n\tconst [idConcepto, setIdConcepto] = useState('')\r\n    \r\n\tconst [ crearConceptoAlmacen ] = useMutation(REGISTRAR_CONCEPTO_ALMACEN);\r\n\tconst [ actualizarConceptoAlmacen ] = useMutation(ACTUALIZAR_CONCEPTO_ALMACEN);\r\n    const [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\tconst handleChangeInput = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n     const handleChangeDestino = (event) => {\r\n        setData({...data, destino:event.target.value});\r\n    };\r\n\tconst handleChangeOrigen = (event) => {\r\n        setData({...data, origen:event.target.value});\r\n    };\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n           setOpenModal(false);\r\n\t\t\tif(!data.nombre_concepto || !data.origen || !data.destino ){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data;\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\t\t\tusuario: sesion._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait actualizarConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tid: idConcepto\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetAccion(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\t\tsetData({nombre_concepto: \"\", origen: \"\", destino:\"\"});\r\n                setError(false);\r\n\t\t\t\tsetUpdateData(!updateData);\r\n\t\t\t\tsetIdConcepto(\"\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') handleSubmit();\r\n\t};\r\n\r\n    const Modal = ({ handleModal, openModal, handleSubmit }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Editar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres editar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleSubmit}>\r\n\t\t\t\t\t\tEditar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n            <Box  flexDirection=\"row\" >\r\n                <Grid container>\r\n                    <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                   \r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                         <Typography>Concepto </Typography>\r\n                        <TextField\r\n                            error={error}\r\n                            id=\"outlined-error-helper-text\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            name=\"nombre_concepto\"\r\n\t\t\t\t\t\t\tstyle={{marginLeft:2}}\r\n                            value={data.nombre_concepto}\r\n                            onChange={handleChangeInput}\r\n                            onKeyPress={pressEnter}\r\n                        />\r\n                        \r\n                    </Box>\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"origen-label\"\r\n                        id=\"origen-name\"\r\n                        value={data.origen}\r\n                        onChange={handleChangeOrigen}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.origen, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"destino-label\">Destino</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"destino-label\"\r\n                        id=\"destino-name\"\r\n                        value={data.destino}\r\n                        onChange={handleChangeDestino}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.destino, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                        <Box ml={5} />\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={ () =>(accion) ? handleSubmit(): setOpenModal(true)} disableElevation>\r\n                            <Add />Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Box>\r\n\t\t\t<ListaConceptos \r\n\t\t\t\tsetData={setData} \r\n\t\t\t\tidConcepto={idConcepto} \r\n\t\t\t\tsetIdConcepto={setIdConcepto} \r\n\t\t\t\tsetAccion={setAccion} \r\n\t\t\t\tupdateData={updateData}\r\n\t\t\t\tsetAlert={setAlert} \r\n\t\t\t/>\r\n            <Modal handleModal={handleModal} openModal={openModal} handleSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroConcepto from './RegistroConcepto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConceptosAlmacen() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tConceptos Almacén\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tConceptos almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={4} alignSelf='center' >\r\n\t\t\t\t\t<Container >\r\n\t\t\t\t\t\t<RegistroConcepto />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport Cliente from './Cliente/Cliente';\r\nimport Productos from './Producto/';\r\nimport Tallas from './Tallas/Tallas';\r\n/* import UnidadMedida from './UnidadMedida/UnidadMedida'; */\r\nimport Contabilidad from './Contabilidad/Contabilidad';\r\nimport Proveedores from './Proveedores/Proovedores';\r\nimport Cajas from './Cajas/Cajas'; \r\nimport Usuarios from './Usuarios/Usuarios';\r\nimport Departamentos from './Departamentos/Departamentos';\r\nimport Categorias from './Categorias/Categorias';\r\nimport Colores from './Colores/Colores';\r\nimport Marcas from './Marcas/Marcas';\r\nimport CentroCostos from './CentroCostos/CentroCostos';\r\nimport ConceptosAlmacen from './ConceptosAlmacen/ConceptosAlmacen';\r\n\r\nexport default function Catalogos() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cliente />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Productos />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.tallas_numeros.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Tallas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<UnidadMedida />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.contabilidad.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Contabilidad />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Proveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.cajas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Usuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.departamentos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Departamentos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.categorias.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Categorias />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.colores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Colores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.marcas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Marcas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.centro_costos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CentroCostos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.conceptos_almacen.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ConceptosAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const TesoreriaCtx = createContext();\r\n\r\nexport const TesoreriaProvider = ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [cuentas, setCuentas] = useState([]);\r\n    const [cuenta, setCuenta] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    \r\n    return (\r\n        <TesoreriaCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                cuentas, \r\n                setCuentas,\r\n                reload, \r\n                setReload,\r\n                cuenta, \r\n                setCuenta\r\n            }}\r\n        >\r\n            {children}\r\n        </TesoreriaCtx.Provider>\r\n    );\r\n};\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_SUCURSALES = gql`\r\n    query ObtenerSucursalesEmpresa($id: ID!){\r\n        obtenerSucursalesEmpresa(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_MOVIMIENTO_CUENTA = gql`\r\n    mutation CrearMovimientoCuenta($input: CrearMovimientoCuentaInput, $empresa: ID!, $sucursal: ID!, $tipo: Boolean){\r\n        crearMovimientoCuenta(input: $input, empresa: $empresa, sucursal: $sucursal, tipo: $tipo){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CUENTAS = gql`\r\n    query ObtenerHistorialCuenta($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialCuenta, $tipo: Boolean){\r\n        obtenerHistorialCuenta(empresa: $empresa, sucursal: $sucursal, input: $input, tipo: $tipo){\r\n            tipo_movimiento\r\n            id_usuario\r\n            numero_caja\r\n            id_Caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            horario_turno\r\n            concepto\r\n            comentarios\r\n            montos_en_caja { \r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n            }\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            empresa\r\n            sucursal             \r\n        }\r\n    }\r\n`;","import { Box, Button, Dialog, DialogActions,\r\n        DialogContent, IconButton, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography \r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport moment from 'moment';\r\n\r\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\r\n\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { CREAR_MOVIMIENTO_CUENTA } from '../../../../gql/Empresa/sucursales';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    }\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RetiroDeposito({cuenta, refetch, tipo}) {\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const [ CrearMovimientoCuenta ] = useMutation(CREAR_MOVIMIENTO_CUENTA);\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [datosMovimiento, setDatosMovimiento] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    };\r\n\r\n    const onChangeDatos = (e) => {\r\n        setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value })\r\n    };\r\n\r\n    const input ={\r\n        tipo_movimiento: datosMovimiento.tipo_movimiento === 'RETIRO' ? 'CUENTA-RETIRO' : 'CUENTA-DEPOSITO',\r\n        id_usuario: sesion._id,\r\n        rol_movimiento: tipo === true ? \"CUENTA-EMPRESA\" : \"CUENTA\",\r\n        numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : null,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_turno : null,\r\n        concepto: datosMovimiento.concepto,\r\n        hora_moviento: {\r\n            hora: moment().format('hh'),\r\n            minutos: moment().format('mm'),\r\n            segundos: moment().format('ss'),\r\n            completa: moment().format('HH:mm:ss')\r\n        },\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.cantidad),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        comentarios: datosMovimiento.comentarios,\r\n    };\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if (!datosMovimiento.concepto || !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n                setAlert({\r\n                    message: 'Por favor complete los datos',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }\r\n            const movimiento = await CrearMovimientoCuenta({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: cuenta._id,\r\n                    tipo: tipo\r\n                }\r\n            });\r\n            refetch();\r\n            setDatosMovimiento([]); \r\n            handleClickOpen();\r\n            setAlert({\r\n                message: movimiento.data.crearMovimientoCuenta.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n              });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <Box>\r\n                <IconButton\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                >\r\n                    <CompareArrowsIcon style={{fontSize: 35}} />\r\n                </IconButton>\r\n            </Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h5'>\r\n                            Movimiento en Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Usuario</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario\"\r\n                                variant=\"outlined\"\r\n                                disabled={true}\r\n                                value={sesion?.nombre}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\" >\r\n                            <Typography>Fecha y hora</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                disabled={true}\r\n                                size=\"small\"\r\n                                value={moment().format('D MMMM YYYY, h:mm:ss')}\r\n                                name=\"fecha_movimiento\"\r\n                                variant=\"outlined\"\r\n\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Movimiento a Realizar</Typography>\r\n                            <Select\r\n                                className={classes.formComboBox}    \r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                name=\"tipo_movimiento\"\r\n                                onChange={onChangeDatos}\r\n                                fullWidth\r\n                            >\r\n                                <MenuItem value=''>Ninguno</MenuItem>\r\n                                <MenuItem value='DEPOSITO'>Deposito</MenuItem>\r\n                                <MenuItem value='RETIRO'>Retiro</MenuItem>\r\n                            </Select>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Cantidad</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                type='number'\r\n                                name=\"cantidad\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Concepto</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                name=\"concepto\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Comentarios</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                multiline\r\n                                rows={2}\r\n                                type='number'\r\n                                name=\"monto_movimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant='outlined'\r\n                        onClick={enviarDatos}\r\n                        size=\"large\"\r\n                    >\r\n                        Realizar\r\n                    </Button>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, \r\n        DialogContent,  MenuItem,  Select,  Slide, \r\n        TextField, Typography\r\n} from '@material-ui/core';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport moment from 'moment';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CUENTAS } from '../../../../gql/Empresa/sucursales';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'movimiento', label: 'Origen Movimiento', minWidth: 100 },\t\r\n    { id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'name', label: 'Usuario', minWidth: 150 },\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 150 },\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 150 },\r\n\t{ id: 'tipo', label: 'Tipo Movimiento', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function HistorialCuentas({cuenta, tipo}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    moment.locale('es');\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    const [datosFiltro, setDatosFiltro] = useState([]);\r\n    const [ value ] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(!open);\r\n        setDatosFiltro([]);\r\n        refetch();\r\n    };\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_HISTORIAL_CUENTAS, {\r\n\t\tvariables: {\r\n            input:{\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\",\r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? datosFiltro.tipo_movimiento : \"\"\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: cuenta._id,\r\n            tipo: tipo\r\n\t\t}\r\n\t});\t\r\n    \r\n    let historialCuenta = [];\r\n    if(data){\r\n        historialCuenta = data.obtenerHistorialCuenta;\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch()\r\n    }, [refetch])\r\n\r\n\treturn (\r\n        <Fragment>\r\n            <Box>\r\n                <Button\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                    endIcon={<VisibilityIcon style={{fontSize: 35}}  />}\r\n                >\r\n                    Ver\r\n                </Button>\r\n            </Box>\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h6'>\r\n                            Historial de cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha inicio:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    name=\"fecha_inicio\"\r\n                                    onChange={obtenerDatos}\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha fin:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"fecha_fin\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Usuario:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Tipo Movimiento:</Typography>\r\n                                <Select\r\n                                    className={classes.formComboBox}    \r\n                                    size=\"small\"\r\n                                    variant=\"outlined\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={obtenerDatos}\r\n                                    fullWidth\r\n                                >\r\n                                    <MenuItem value='TODOS'>Ninguno</MenuItem>\r\n                                    <MenuItem value='CUENTA-DEPOSITO'>Deposito</MenuItem>\r\n                                    <MenuItem value='CUENTA-RETIRO'>Retiro</MenuItem>\r\n                                </Select>\r\n                            </Box>\r\n                        </div>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <Paper className={classes.root}>\r\n                            <TableContainer className={classes.container}>\r\n                                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            {columns.map((column) => (\r\n                                                <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                                    {column.label}\r\n                                                </TableCell>\r\n                                            ))}\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody> \r\n                                        {\r\n                                            historialCuenta?.map((row, index) => {\r\n                                                return(\r\n                                                    <RowsHistorial \r\n                                                        key={index}\r\n                                                        row={row}\r\n                                                        loading={loading}\r\n                                                    />\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                       \r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsHistorial ({ row, loading }) {\r\n\r\n    if (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell>Caja {row.numero_caja !== \"\" ? row.numero_caja : \"\"}</TableCell>\r\n            <TableCell>{moment(row?.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n            <TableCell>{row?.nombre_usuario_creador}</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(row.montos_en_caja.monto_efectivo.monto)}</b>\r\n            </TableCell>\r\n            <TableCell>{row?.concepto}</TableCell>\r\n            <TableCell>{\r\n                row?.tipo_movimiento === \"CUENTA-DEPOSITO\" ? 'DEPOSITO' : 'RETIRO'    \r\n            }</TableCell>\r\n\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, CircularProgress} from '@material-ui/core';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nimport RetiroDeposito from './RetiroDeposito';\r\nimport HistorialCuentas from './HistorialCuentas';\r\nimport { OBTENER_SUCURSALES } from '../../../../gql/Empresa/sucursales';\r\nimport { OBTENER_DATOS_EMPRESA } from '../../../../gql/Empresa/empresa';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Origen', minWidth: 150, align: 'left' },\r\n\t{ id: 'tipo', label: 'Tipo Cuenta', minWidth: 150, align: 'left' },\r\n\t{ id: 'dinero', label: 'Dinero Existencia', minWidth: 100, align: 'left' },\r\n\t{ id: 'movimiento', label: 'Realizar Movimiento', minWidth: 100, align: 'center' },\t\r\n\t{ id: 'historial', label: 'Historial', minWidth: 100, align: 'center' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaCuentas() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_SUCURSALES, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\r\n    const cuentaEmpresa = useQuery(OBTENER_DATOS_EMPRESA, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst classes = useStyles();\r\n    let cuentasSucursalesEmpresa = [];\r\n    let cuentaPrincipal = [];\r\n\r\n\r\n    if(cuentaEmpresa.data){\r\n        cuentaPrincipal = cuentaEmpresa.data.obtenerEmpresa;\r\n    };\r\n\r\n    if (data) {\r\n        cuentasSucursalesEmpresa = data.obtenerSucursalesEmpresa\r\n    };\r\n\r\n    if (loading && cuentaEmpresa.loading) \r\n        return (\r\n            <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"50vh\"\r\n            >\r\n                <CircularProgress/>\r\n            </Box>\r\n        );\r\n    \r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody> \r\n                        <TableRow\r\n                            hover\r\n                            role=\"checkbox\"handleClickOpen\r\n                            tabIndex={-1}\r\n                        >\r\n                            <TableCell >{cuentaPrincipal?.nombre_empresa}</TableCell>\r\n                            <TableCell >CUENTA PRINCIPAL</TableCell>\r\n                            <TableCell >\r\n                                <b style={{fontSize: 17}}>${formatoMexico(cuentaPrincipal?.cuenta_empresa?.dinero_actual)}</b>\r\n                            </TableCell>\r\n                            {sesion.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                                <TableCell align='center'>  </TableCell>\r\n                            ):(\r\n                                <TableCell align='center'> <RetiroDeposito cuenta={cuentaPrincipal} refetch={cuentaEmpresa.refetch} tipo={true} /> </TableCell>\r\n                            )}\r\n                            <TableCell align='center'> <HistorialCuentas cuenta={cuentaPrincipal}  tipo={true} /> </TableCell>\r\n                        </TableRow>\r\n                            {cuentasSucursalesEmpresa?.map((cuenta, index) => {\r\n                                return(\r\n                                    <RowsCuentas \r\n                                        key={index}\r\n                                        refetch={refetch}\r\n                                        cuenta={cuenta}\r\n                                        loading={loading}\r\n                                        \r\n                                    /> \r\n                                )\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuenta, refetch}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell >{cuenta.nombre_sucursal}</TableCell>\r\n            <TableCell >SUCURSAL</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(cuenta?.cuenta_sucursal?.dinero_actual)}</b>\r\n            </TableCell>\r\n            {permisosUsuario.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                <TableCell align='center'>  </TableCell>\r\n            ):(\r\n                <TableCell align='center'> <RetiroDeposito cuenta={cuenta} refetch={refetch} tipo={false} /> </TableCell>\r\n            )}\r\n            <TableCell align='center'> <HistorialCuentas cuenta={cuenta} tipo={false}/> </TableCell>\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogContent } from '@material-ui/core';\r\nimport ListaCuentas from './ListaCuentas';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CuentasEmpresaSucursales() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/retiro-de-dinero.svg' alt=\"icono retiro\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCuentas de Empresa\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tCuentas de empresa\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<ListaCuentas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_EGRESOS = gql`\r\n    query ObtenerHistorialEgresos($input: ObtenerHistorialEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialEgresos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            folio_egreso\r\n            folio_factura\r\n            empresa_distribuidora\r\n            provedor\r\n            productos {\r\n                cantidad_productos\r\n                precio_unitario\r\n                producto\r\n                total\r\n            }\r\n            categoria\r\n            subCategoria\r\n            metodo_pago\r\n            fecha_compra\r\n            fecha_registro\r\n            fecha_vencimiento\r\n            observaciones\r\n            compra_credito\r\n            credito_pagado\r\n            saldo_credito_pendiente\r\n            saldo_total\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            id_user\r\n            empresa\r\n            sucursal         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_EGRESO = gql`\r\n    mutation CrearEgreso($input: CrearEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearEgreso(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'nombre', label: 'Nombre', minWidth: 100 },\r\n\t{ id: 'precioU', label: 'Precio Unitario', minWidth: 100 },\r\n    { id: 'total', label: 'Total', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1\r\n\t},\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n}));\r\n\r\nexport default function TablaProductosEgresos({productos, borrarProducto}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(3);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsProductos \r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\tborrarProducto={borrarProducto}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonPageChange={handleChangePage}\r\n\t\t\t\tonRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nfunction RowsProductos ({index, producto, borrarProducto}) {\r\n\treturn(\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.cantidad_productos}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.producto}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.precio_unitario)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.total)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align='center' >\r\n\t\t\t\t<IconButton \r\n\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\tsize='small'\r\n\t\t\t\t\tonClick={() => borrarProducto(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t)\r\n}","import { useMutation, useQuery } from '@apollo/client';\r\nimport { Box, makeStyles, Select,MenuItem , TextField, Typography, FormControl, OutlinedInput, InputAdornment, IconButton, Button, Divider } from '@material-ui/core';\r\nimport { Autorenew } from '@material-ui/icons';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\nimport { OBTENER_CUENTAS } from '../../../../gql/Catalogos/centroCostos';\r\nimport { CREAR_EGRESO } from '../../../../gql/Tesoreria/egresos';\r\nimport TablaProductosEgresos from './TablaProductosEgresos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function FormRegistroEgresos({tipo, handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const { setAlert } = useContext(TesoreriaCtx);\r\n    const [ CrearEgreso ] = useMutation(CREAR_EGRESO);\r\n\r\n    const classes = useStyles();\r\n    const [upload, setUpload] = useState(false);\r\n    const [datosEgreso, setDatosEgreso] = useState([]);\r\n    const [totalCompra, setTotalCompra] = useState(0);\r\n    const [subCuentas, setSubCuentas] = useState([]);\r\n    const [producto, setProducto] = useState([]);\r\n    const [productos, setProductos] = useState([]);\r\n\r\n    const obtenerCuentas = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\r\n    let cuentas = [];\r\n\r\n    if (obtenerCuentas.data) {\r\n        cuentas = obtenerCuentas.data.obtenerCuentas;\r\n    };\r\n\r\n    const GenFolio = () => {\r\n        const max = 999999999999;\r\n        const min = 100000000000;\r\n        const folio_egreso = Math.floor(\r\n          Math.random() * (max - min + 1) + min\r\n        ).toString();\r\n        setDatosEgreso({\r\n          ...datosEgreso,\r\n          folio_egreso,\r\n        });\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosEgreso({...datosEgreso, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const obtenerSubCuentas = (cuenta) => {\r\n        setSubCuentas(cuenta.subcuentas);\r\n    };\r\n\r\n    const obtenerDatoProductos = (e) => {\r\n        setProducto({...producto, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const agregarProducto = () => {\r\n        let producto_guardado = {\r\n            cantidad_productos: parseFloat(producto.cantidad_productos),\r\n            precio_unitario: parseFloat(producto.precio_unitario),\r\n            producto: producto.producto,\r\n            total: (parseFloat(producto.cantidad_productos) * parseFloat(producto.precio_unitario))\r\n        };\r\n\r\n        productos.push(producto_guardado);\r\n\r\n        setDatosEgreso({\r\n            ...datosEgreso,\r\n            productos,\r\n        });\r\n        totalCompraVenta();\r\n        setProducto([]);\r\n    };\r\n    \r\n    function borrarProducto(index) {\r\n        productos.forEach(function(elemento, indice, array) {\r\n            if(index === indice){\r\n                productos.splice(index, 1);\r\n            }\r\n        });\r\n        setUpload(true);\r\n    };\r\n\r\n    useEffect(() => { \r\n        totalCompraVenta();\r\n        setProductos(productos);\r\n        setUpload(false);\r\n\r\n    }, [upload, productos]);\r\n\r\n    const totalCompraVenta = () =>{\r\n        let total = 0;\r\n        for (let i = 0; i < productos.length; i++) {\r\n            total += productos[i].total;\r\n        };\r\n        setTotalCompra(total);\r\n    };\r\n\r\n    const input = {\r\n        folio_egreso:  datosEgreso.folio_egreso,\r\n        folio_factura: datosEgreso.folio_factura,\r\n        empresa_distribuidora: datosEgreso.empresa_distribuidora,\r\n        provedor: datosEgreso.provedor,\r\n        productos: datosEgreso.productos ? datosEgreso.productos : [],\r\n        categoria: datosEgreso.categoria,\r\n        subCategoria:  datosEgreso.subCategoria,\r\n        metodo_pago: datosEgreso.metodo_pago,\r\n        fecha_compra: datosEgreso.fecha_compra,\r\n        fecha_vencimiento: datosEgreso.fecha_vencimiento0 ? datosEgreso.fecha_vencimiento : \"\",\r\n        observaciones: datosEgreso.observaciones,\r\n        compra_credito: datosEgreso.compra_credito ? datosEgreso.compra_credito : false, \r\n        credito_pagado: datosEgreso.credito_pagado ? datosEgreso.credito_pagado : false,\r\n        saldo_credito_pendiente: datosEgreso.saldo_credito_pendiente ? datosEgreso.saldo_credito_pendiente : 0,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_user: sesion._id,\r\n        saldo_total: totalCompra ? totalCompra : 0\r\n    }\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if(!datosEgreso.folio_egreso){\r\n                setAlert({\r\n                    message: 'Por favor genere un folio.',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            };\r\n\r\n            const egreso = await CrearEgreso({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id\r\n                }\r\n            });\r\n            handleClickOpen();\r\n            setDatosEgreso([]); \r\n            setAlert({\r\n                message: egreso.data.crearEgreso.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n        <Box p={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Datos Generales</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <FormControl\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    name=\"folio_egreso\"\r\n                    fullWidth\r\n                >\r\n                    <Typography>Folio</Typography>\r\n                    <OutlinedInput\r\n                        style={{ padding: 0 }}\r\n                        id=\"form-producto-codigo-barras\"\r\n                        name=\"folio_egreso\"\r\n                        value={\r\n                            datosEgreso.folio_egreso\r\n                            ? datosEgreso.folio_egreso\r\n                            : \"\"\r\n                        }\r\n                        onChange={obtenerDatos}\r\n                        endAdornment={\r\n                        <InputAdornment position=\"start\">\r\n                            <IconButton\r\n                                onClick={() => GenFolio()}\r\n                                color=\"primary\"\r\n                                size=\"small\"\r\n                            >\r\n                                <Autorenew />\r\n                            </IconButton>\r\n                        </InputAdornment>\r\n                        }\r\n                    />\r\n                </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>ID Factura:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"id_factura\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Fecha de Compra:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_compra\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    type=\"date\"\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Metodo de pago:</Typography>\r\n                    <Select\r\n                        className={classes.formComboBox}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onChange={obtenerDatos}\r\n                        name=\"metodo_pago\"\r\n                        fullWidth\r\n                    >\r\n                        <MenuItem value='TARJETA'>Tarjeta</MenuItem>\r\n                        <MenuItem value='EFECTIVO'>Efectivo</MenuItem>\r\n                        <MenuItem value='CHEQUE'>Cheque</MenuItem>\r\n                        <MenuItem value='TRANSFERENCIA'>Transferencia</MenuItem>\r\n                        <MenuItem value='MONEDERO ELECTRONICO'>Monedero electronico</MenuItem>\r\n                    </Select>\r\n            </Box>\r\n        </div>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Categoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"categoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno' onClick={() => setSubCuentas([])}>Ninguno</MenuItem>\r\n                    {cuentas?.map((cuenta) =>{\r\n                        return(\r\n                            <MenuItem \r\n                                key={cuenta._id}\r\n                                onClick={() => obtenerSubCuentas(cuenta)}\r\n                                value={cuenta.cuenta}\r\n                            >\r\n                                {cuenta.cuenta}\r\n                            </MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>SubCatergoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"subCategoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno'>Ninguno</MenuItem>\r\n                    {subCuentas?.map((subCuenta) =>{\r\n                        return(\r\n                            <MenuItem value={subCuenta.subcuenta}>{subCuenta.subcuenta}</MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Empresa:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"empresa_distribuidora\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Provedor: </Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"provedor\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box p={1} mt={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Productos Adquiridos</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Cantidad:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    className={classes.input}\r\n                    size=\"small\"\r\n                    name=\"cantidad_productos\"\r\n                    value={producto.cantidad_productos ? producto.cantidad_productos : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Producto:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"producto\"\r\n                    value={producto.producto ? producto.producto : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Precio Unitario:</Typography>\r\n                <TextField\r\n                    className={classes.input}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"precio_unitario\"\r\n                    value={producto.precio_unitario ? producto.precio_unitario : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box> \r\n            <Box width=\"100%\" display='flex' justifyContent='center' alignItems='center'>\r\n                <Button\r\n                    variant='outlined'\r\n                    size='large'\r\n                    color='primary'\r\n                    onClick={agregarProducto}\r\n                    startIcon={<AddIcon />}\r\n                >\r\n                    Agregar\r\n                </Button>\r\n            </Box>\r\n        </div>\r\n        <Box p={1} >\r\n            <TablaProductosEgresos productos={productos} borrarProducto={borrarProducto} />\r\n        </Box>\r\n        <Box display='flex' justifyContent='flex-end' p={1}> \r\n            <Typography variant='h6'>\r\n                Total: ${formatoMexico(totalCompra)}\r\n            </Typography>\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Observaciónes:</Typography>\r\n                <TextField\r\n                    multiline\r\n                    rows={2}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"observaciones\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\">\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='primary'\r\n                    onClick={enviarDatos}\r\n                >\r\n                    Guardar Egreso\r\n                </Button>\r\n            </Box>\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='secondary'\r\n                >\r\n                    Cancelar\r\n                </Button>\r\n            </Box>\r\n        </Box>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { AppBar, Box, Button, Grid, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport { FcDonate } from 'react-icons/fc';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FormRegistroEgresos from './FormRegistroEgresos';\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3} minHeight=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 50\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nexport default function VistaRegistroEgreso({handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\tconst { setAlert } = useContext(TesoreriaCtx);\r\n    const [ value, setValue ] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n    return (\r\n        <Fragment>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\tlabel=\"Egreso a Contado\"\r\n\t\t\t\t\t\t\ticon={<FcDonate className={classes.iconSize} />}\r\n\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Grid container justify=\"flex-end\">\r\n\t\t\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t\t\t<Typography>Usuario: <b>{sesion.nombre}</b></Typography> \r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<b>{moment().format('D MMMM YYYY')}</b>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t<Box mt={3} ml={5} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t<FormRegistroEgresos handleClickOpen={handleClickOpen} tipo='CONTADO' />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t</div>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogActions,Paper} from '@material-ui/core';\r\nimport VistaRegistroEgreso from './VistaRegistroEgreso';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\ticonSizeSecond: {\r\n\t\twidth: 40,\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Egresos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/income.svg' alt=\"icono egreso\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tEgresos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t>\r\n\t\t\t\t<VistaRegistroEgreso handleClickOpen={handleClickOpen} />\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 80},\r\n\t{ id: 'cantidadR', label: 'Cant. Regalo', minWidth: 80},\r\n\t{ id: 'nombre', label: 'Producto', minWidth: 80},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 80},\r\n\t{ id: 'total', label: 'Total', minWidth: 80},\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras({productos}) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos?.map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} hover role=\"checkbox\" tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad_regalo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.costo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.total}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS = gql`\r\n    query ObtenerHistorialAbonos($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialAbonosInput){\r\n        obtenerHistorialAbonos( empresa: $empresa, sucursal: $sucursal, input: $input ){\r\n            numero_caja\r\n            id_Caja\r\n            horario_turno\r\n            tipo_movimiento\r\n            rol_movimiento\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            monto_total_abonado\r\n            numero_cliente\r\n            nombre_cliente\r\n            telefono_cliente\r\n            email_cliente\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_ABONO = gql`\r\n    mutation CrearAbono($empresa: ID!, $sucursal: ID!, $input: CrearAbonoInput){\r\n        crearAbono(empresa: $empresa, sucursal: $sucursal, input: $input, ){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_ABONOS } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha de abono', minWidth: 170, align: 'center' },\r\n\t{ id: 'cliente', label: 'Nombre', minWidth: 170, align: 'center' },\r\n\t{ id: 'abono', label: 'Cantidad abonada', minWidth: 170, align: 'right' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos({cuenta}) {\r\n\t\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tconst { reload } = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_HISTORIAL_ABONOS, {\r\n\t\t\tvariables: {\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tfecha_inicio: \"\",\r\n\t\t\t\t\tfecha_fin: \"\",\r\n\t\t\t\t\tusuario: \"\",\r\n\t\t\t\t\tid_cliente: cuenta.proveedor.id_proveedor._id,\r\n\t\t\t\t\tid_egreso: \"\",\r\n\t\t\t\t\trol_movimiento: \"PROVEEDOR\",\r\n\t\t\t\t\tid_compra: cuenta._id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t  \tfetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\t\r\n\tlet abonos = []\r\n\tif(data){\r\n\t\tabonos = data.obtenerHistorialAbonos;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [reload])\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{abonos?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={index}>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{moment(row.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{row.nombre_cliente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='right'><b>${row.monto_total_abonado}</b></TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useContext, useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport { Box, Button, Dialog, \r\n        DialogContent,  DialogTitle, FormControl, makeStyles, \r\n        MenuItem, \r\n        Select, \r\n        Slide, TextField, Typography \r\n} from '@material-ui/core'\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport moment from 'moment';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tinput: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n}));\r\n\r\nexport default function AbonoaRecibir({cuenta}) {\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n    \r\n\tconst { setReload, setAlert } = useContext(TesoreriaCtx);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [abono, setAbono] = useState(''); \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    \r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(abono),\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        id_usuario: sesion._id,\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if(abono === '' || metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete los datos', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setAbono('');\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Abono registrado con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    const handleClick = () => {\r\n        setReload(true);\r\n        setOpen(!open);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"large\"\r\n                variant=\"outlined\" \r\n                fullWidth\r\n                color=\"primary\"\r\n                startIcon={<AddCircleOutlineIcon style={{fontSize: 35}} />}\r\n                onClick={handleClick}\r\n            >\r\n                <Typography variant=\"h6\">\r\n                    Abonar    \r\n                </Typography>\r\n            </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                fullWidth\r\n                maxWidth='xs'\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box p={1} flexGrow={1}>\r\n                            Registrar nuevo abono\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\"  mt={2} >\r\n                        <Typography><b>Cantidad a abonar:</b></Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            className={classes.input}\r\n                            onChange={(e) => setAbono(e.target.value)}\r\n                            value={abono}\r\n                            size=\"small\"\r\n                            name=\"abono_recibir\"\r\n                            variant=\"outlined\"\r\n                            type='number'\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\" mt={2} >\r\n                            <Typography><b>Metodo de pago:</b></Typography>\r\n                            <FormControl \r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    width=\"100%\"\r\n                                    name=\"metodo_pago\"\r\n                                    variant='outlined'\r\n                                    value={metodoPago ? metodoPago : ''}\r\n                                    onChange={(e) => setMetodoPago(e.target.value)}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {formaPago.map((metodo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <Box width=\"100%\" mt={2} display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant='h6'>\r\n                                <b>Total cuenta</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: '#9B9B9B'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography  variant='h6'>\r\n                                <b>Total abonado</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: 'green'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total - cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1} >\r\n                            <Typography  variant='h6'>\r\n                                <b>Total restante</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography  variant='h6'>\r\n                            <b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 18}}\r\n                        onClick={enviarDatos}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react'\r\nimport { Box, Grid, makeStyles, Typography, Button, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\nimport AbonoaRecibir from '../AbonoPercibir';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\n\r\nexport default function DetallesCuenta({handleClick, cuenta}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Detalles de cuenta\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Clave proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.clave_cliente}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.nombre}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Numero usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.numero_usuario}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Fecha compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_registro).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Fecha vencimiento: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_vencimiento_credito).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                {permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (null) : (\r\n                    <Box width=\"60%\" p={1} display='flex' alignItems={'center'} >\r\n                        <AbonoaRecibir cuenta={cuenta} />\r\n                    </Box>\r\n                )}\r\n            </div>\r\n            <Grid container>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2}>\r\n                        <Typography variant=\"h6\">\r\n                            Lista de abonos\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaAbonos cuenta={cuenta} />\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total abonado: <b style={{color: \"#9B9B9B\"}}>${cuenta.total - cuenta.saldo_credito_pendiente}</b></Typography>\r\n                    </Box> \r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Restante: <b  style={{color: \"green\"}}>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2} >\r\n                        <Typography variant=\"h6\">\r\n                            Lista de compra\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaCompras productos={cuenta.productos}/>\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total a liquidar: <b  style={{color: \"red\"}}>${formatoMexico(cuenta.total)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState } from 'react'\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, FormControl, makeStyles, MenuItem, Select, Slider, TextField, Typography } from '@material-ui/core';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport moment from 'moment';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport { useMutation } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta({cuenta, refetch}) {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const { setAlert, setReload } = useContext(TesoreriaCtx);\r\n\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [value, setValue] = useState(0);\r\n    const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n    const [dineroDescontado, setDineroDescontado] = useState(0);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n        setCuentaTotalDescuento(0);\r\n        setDineroDescontado(0);\r\n        setValue(0)\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n        let cuenta_con_descuento = parseFloat((cuenta.saldo_credito_pendiente * porcentaje / 100).toFixed(2));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - cuenta_con_descuento).toFixed(2));\r\n        setCuentaTotalDescuento(cuenta_con_descuento);\r\n        setDineroDescontado(dineroDescontado);\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n\r\n        let porcentaje  = parseFloat((((valorText * 100) / cuenta.saldo_credito_pendiente ).toFixed(2)));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - valorText).toFixed(2));\r\n\r\n        setCuentaTotalDescuento(valorText);\r\n        setDineroDescontado(dineroDescontado);\r\n        setValue(porcentaje);\r\n\r\n    };\r\n    \r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(cuenta.saldo_credito_pendiente),\r\n        descuento: {\r\n            porciento_descuento: value,\r\n            dinero_descontado: dineroDescontado,\r\n            total_con_descuento: cuentaTotalDescuento\r\n        },\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if( metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete el metodo de pago', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Cuenta liquidada con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"outlined\"  \r\n                color=\"primary\"\r\n                startIcon={<DoneIcon />}\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                fullWidth\r\n                maxWidth='xs'\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <Box display=\"flex\">\r\n                    <Box flexGrow={1} p={2}>\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            Liquidar Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Typography>Aplica un descuento por pronto pago a tu cuenta</Typography>\r\n                    <Box mt={1} textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Porcentaje de descuento</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box ml={1} mr={1} mb={2} >\r\n                        <Slider\r\n                            getAriaValueText={valuetext}\r\n                            valueLabelFormat={value.toFixed(2)}\r\n                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                            valueLabelDisplay=\"auto\"\r\n                            onChange={obtenerPorcientoSlide} \r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Dinero a liquidar con descuento</b>\r\n                        </Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"descuento\"\r\n                            variant=\"outlined\"\r\n                            value={cuentaTotalDescuento ? cuentaTotalDescuento : 0 }\r\n                            onChange={obtenerPrecioText}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" mt={2} textAlign={'center'} >\r\n                        <Typography><b>Metodo de pago:</b></Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                width=\"100%\"\r\n                                name=\"metodo_pago\"\r\n                                variant='outlined'\r\n                                onChange={(e) => setMetodoPago(e.target.value )}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {formaPago.map((metodo, index) => {\r\n                                    return(\r\n                                        <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                    )\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box display=\"flex\" mt={2}>\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Total cuenta: </Typography>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography><b>${formatoMexico(cuenta.total)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Saldo pendiente: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Dinero Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(dineroDescontado)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Porciento Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>{formatoMexico(value)}%</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant=\"h6\" >Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography variant=\"h6\" ><b style={{color: 'green'}}>${formatoMexico(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {formatoMexico} from '../../../../../../config/reuserFunctions'\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\nimport moment from 'moment';\r\n\r\nimport { Box, CircularProgress, Dialog, Slide, TableHead } from '@material-ui/core';\r\nimport 'moment/locale/es';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha Compra', minWidth: 100, align: 'center' },\r\n\t{ id: 'provedor', label: 'Provedor', minWidth: 100, align: 'center' },\r\n\t{ id: 'abonado', label: 'Abonado', minWidth: 100, align: 'center' },\r\n    { id: 'restante', label: 'Restante', minWidth: 100, align: 'center' },\r\n    { id: 'total', label: 'Total', minWidth: 100, align: 'center' }\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function TablaAbonos({loading}) {\r\n\r\n\tconst { cuentas} = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading) \r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"center\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\theight=\"50vh\"\r\n\t\t\t>\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\tLiquidar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cuentas?.map((row, index) => {\r\n\t\t\t\t\t\t\t\tif(row.credito_pagado === false){\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsCuentas \r\n\t\t\t\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\t\t\t\tcuentaSelect={row}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})} \r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuentaSelect, loading}){\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [open, setOpen] = useState(false);\r\n    \r\n\tconst handleClick = () => {\r\n        setOpen(!open);\r\n    };\r\n\t\r\n\tconst TwoClickInRowTableBuy = (e) => {\r\n\t\ttry {\r\n\t\t\tlet timer;\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tif (e.detail === 2) {\r\n\t\t\t\thandleClick();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tonClick={(e) => TwoClickInRowTableBuy(e)}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(cuentaSelect.fecha_registro).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{cuentaSelect.proveedor.id_proveedor.nombre_cliente}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total - cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total)}</TableCell>\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<LiquidarCuenta cuenta={cuentaSelect}/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullScreen\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClick} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\t\t\t\t<DetallesCuenta\r\n\t\t\t\t\tcuenta={cuentaSelect}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\thandleClick={handleClick}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../../gql/Compras/compras\";\r\n\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport SearchOutlined from '@material-ui/icons/SearchOutlined';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\trootSearch: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosProveedores() {\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\tconst { reload, setReload, setCuentas } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [filtro, setFiltro] = useState(\"\");\r\n\tconst searchfilter = useRef(null);\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_COMPRAS_REALIZADAS,\r\n\t\t{\r\n\t\t  variables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfecha: \"\"\r\n\t\t  },\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tif(data){\r\n\t\tsetCuentas(data.obtenerComprasRealizadas)\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\trefetch();\r\n\t\t\r\n\t\tsetReload(false);\r\n\r\n\t}, [reload, refetch]);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst obtenerBusqueda = (e, value) => {\r\n\t\te.preventDefault();\r\n\t\trefetch({ filtro: value, fecha: '' });\r\n\t\tsetFiltro(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de provedores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos a Provedores\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box display='flex' p={2}>\r\n\t\t\t\t\t<Box minWidth=\"70%\">\r\n\t\t\t\t\t<form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tinputRef={searchfilter}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tplaceholder=\"Buscar una compra...\"\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\t\t\t\t<SearchOutlined />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos \t\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { Box, Grid, makeStyles, Typography, Button, Dialog, Slide, AppBar, Toolbar } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(4)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetallesCuenta() {\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const classes = useStyles();\r\n\r\n    const handleClick =()=>{\r\n        setOpen(!open);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Detalles\r\n            </Button>\r\n            <Dialog fullScreen open={open} onClose={handleClick} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tDetalle de cuenta\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Nombre de Cliente:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Fecha:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Factura:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Empresa:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Domicilio:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1}>\r\n                            <Typography variant=\"h6\">\r\n                                Lista de abonos\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaAbonos />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a abonado: $ 150,000.00</Typography>\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Restante: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1} >\r\n                            <Typography variant=\"h6\">\r\n                               Lista de compra\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaCompras />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a liquidar: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n\t\t\t</Dialog>\r\n          \r\n        </div>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ToggleButtonGroup } from '@material-ui/lab';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta() {\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <Box display=\"flex\" alignItems=\"center\" m={1}>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Abonos a Proveedores\r\n                    </Typography>\r\n                    <Box m={1} ml={8} >\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>Descuento por pronto pago</Typography>\r\n\r\n                        <Box p={1}>\r\n                            <ToggleButtonGroup\r\n                                // value={alignment}\r\n                                exclusive\r\n                                // onChange={handleAlignment}\r\n                                aria-label=\"text alignment\"\r\n                            >\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por decuento\r\n                                    </Button>\r\n                                </Box>\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por pesos\r\n                                    </Button>\r\n                                </Box>\r\n                            </ToggleButtonGroup>\r\n                        </Box>\r\n                       \r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"10% o $100.00\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Sub Total: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Descuento: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClick} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\n\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n\treturn { name, calories, fat, carbs, protein };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('Cupcake', 305, 3.7, 67, 4.3),\r\n\tcreateData('Donut', 452, 25.0, 51, 4.9),\r\n\tcreateData('Eclair', 262, 16.0, 24, 6.0),\r\n\tcreateData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n\tcreateData('Gingerbread', 356, 16.0, 49, 3.9),\r\n\tcreateData('Honeycomb', 408, 3.2, 87, 6.5),\r\n\tcreateData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n\tcreateData('Jelly Bean', 375, 0.0, 94, 0.0),\r\n\tcreateData('KitKat', 518, 26.0, 65, 7.0),\r\n\tcreateData('Lollipop', 392, 0.2, 98, 0.0),\r\n\tcreateData('Marshmallow', 318, 0, 81, 2.0),\r\n\tcreateData('Nougat', 360, 19.0, 9, 37.0),\r\n\tcreateData('Oreo', 437, 18.0, 63, 4.0)\r\n];\r\n\r\nconst headCells = [\r\n\t{ id: 'name', numeric: false, disablePadding: true, label: 'Cliente' },\r\n\t{ id: 'calories', numeric: true, disablePadding: false, label: 'Abondado' },\r\n\t{ id: 'fat', numeric: true, disablePadding: false, label: 'Restante' },\r\n\t{ id: 'abono', numeric: true, disablePadding: false, label: 'Abono a percibir' },\r\n\t{ id: 'carbs', numeric: true, disablePadding: false, label: 'Detalles' },\r\n\t{ id: 'protein', numeric: true, disablePadding: false, label: 'Liquidar' }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount } = props;\r\n\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\t// onRequestSort: PropTypes.func.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\t// order: PropTypes.oneOf([ 'asc', 'desc' ]).isRequired,\r\n\t// orderBy: PropTypes.string.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = rows.map((n) => n.name);\r\n\t\t\tsetSelected(newSelecteds);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, name) => {\r\n\t\tconst selectedIndex = selected.indexOf(name);\r\n\t\tlet newSelected = [];\r\n\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, name);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={rows.length}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row.name);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => handleClick(event, row.name)}\r\n\t\t\t\t\t\t\t\t\t\trole=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\">\r\n\t\t\t\t\t\t\t\t\t\t\t{row.name}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.calories}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.fat}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.carbs}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<DetallesCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<LiquidarCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n                    rowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={rows.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { Box, Button, Dialog,  DialogContent,  DialogTitle, Slide, TextField, Typography } from '@material-ui/core'\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\nexport default function AbonoaRecibir() {\r\n    //listo\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n\r\n    return (\r\n        <div>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    onClick={handleClick}\r\n                >\r\n                   Abonar\r\n                </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box display=\"flex\" justifyContent=\"flex-start\">\r\n                            Abono a recibir por cuenta\r\n                        </Box>\r\n                        <Box ml={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1} mt={1}>\r\n                        <Typography>Nombre de Cliente: SUTANO</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1}>\r\n                        <Typography>Total a abonar:  $15,100</Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Alert severity=\"info\">Si desea editar el abono del cliente, <br/>\r\n                        procure este sea mayor al establecido</Alert>\r\n                    </Box>\r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 16}}\r\n                        onClick={handleClick}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, TextField, Grid } from '@material-ui/core';\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport AbonoaRecibir from './Components/AbonoPercibir';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosClientes() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de Clientes\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos de Clientes\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Box width=\"50%\" p={2}>\r\n\t\t\t\t\t\t<Typography>Busqueda por cliente o por cuenta</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t/* error */\r\n\t\t\t\t\t\t\tname=\"nombre_comercial\"\r\n\t\t\t\t\t\t\tid=\"form-producto-nombre-comercial\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t/* value=\"\" */\r\n\t\t\t\t\t\t\t/* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t/* onChange={obtenerCampos} */\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box mt={5}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\" \r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBuscar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Grid item lg={5}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" mt={4}>\r\n\t\t\t\t\t\t\t<AbonoaRecibir />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos />\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport CuentasEmpresaSucursales from './CuentasEmpresaSucursales/CuentasEmpresaSucursales';\r\nimport Egresos from './Egresos/Egresos';\r\nimport AbonosProveedores from './Abonos/Provedores/AbonosProovedores';\r\nimport AbonosClientes from './Abonos/Clientes/AbonosClientes';\r\n// import Transferencias from './Transferencias/Transferencias';\r\n\r\nimport SnackBarMessages from '../../../components/SnackBarMessages';\r\nimport { TesoreriaCtx } from '../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nexport default function Tesoreria() {\r\n\r\n\tconst { alert, setAlert } = useContext(TesoreriaCtx);\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.cuentas_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CuentasEmpresaSucursales />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.egresos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Egresos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosProveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosClientes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n                {/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Transferencias />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { TesoreriaProvider } from '../../../context/Tesoreria/tesoreriaCtx';\r\nimport Tesoreria from './Tesoreria';\r\n\r\nexport default function IndexTesoreria() {\r\n    return (\r\n        <TesoreriaProvider>\r\n            <Tesoreria />\r\n        </TesoreriaProvider>\r\n    )\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const FacturacionCtx = createContext();\r\n\r\nexport const FacturacionProvider = ({ children }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [datosFactura, setDatosFactura] = useState({\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion.imagen,\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion.empresa.regimen_fiscal,\r\n      Rfc: sesion.empresa.rfc,\r\n      Name: sesion.empresa.nombre_fiscal,\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion.empresa._id,\r\n    sucursal: sesion.sucursal._id,\r\n  });\r\n\r\n  const [venta_factura, setVentaFactura] = useState(null);\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const [cp_valido, setCPValido] = useState(false);\r\n  const [codigo_postal, setCodigoPostal] = useState(\"\");\r\n  const [error_validation, setError] = useState({ status: false, message: \"\" });\r\n\r\n  return (\r\n    <FacturacionCtx.Provider\r\n      value={{\r\n        datosFactura,\r\n        setDatosFactura,\r\n        cp_valido,\r\n        setCPValido,\r\n        codigo_postal,\r\n        setCodigoPostal,\r\n        error_validation,\r\n        setError,\r\n        venta_factura,\r\n        setVentaFactura,\r\n        productos,\r\n        setProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </FacturacionCtx.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetallesDeVenta() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = (event) => {\r\n    event.stopPropagation()\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event) => {\r\n    event.stopPropagation()\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        onClick={handleClickOpen}\r\n      >\r\n        Slide in alert dialog\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-slide-title\"\r\n        aria-describedby=\"alert-dialog-slide-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-slide-title\">\r\n          {\"Use Google's location service?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-slide-description\">\r\n            Let Google help apps determine location. This means sending\r\n            anonymous location data to Google, even when no apps are running.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Disagree\r\n          </Button>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Agree\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export const compra_test = {\r\n  folio: \"12345\",\r\n  descuento: 5.4,\r\n  ieps: 2.5862100000000003,\r\n  impuestos: 6.724146000000001,\r\n  iva: 4.137936000000001,\r\n  monedero: 0,\r\n  subTotal: 23.875854,\r\n  total: 30.6,\r\n  venta_cliente: true,\r\n  montos_en_caja: {\r\n    monto_efectivo: 50,\r\n    monto_tarjeta: 0,\r\n    monto_creditos: 0,\r\n    monto_monedero: 0,\r\n    monto_transferencia: 0,\r\n    monto_cheques: 0,\r\n    monto_vales_despensa: 0,\r\n  },\r\n  credito: false,\r\n  descuento_general_activo: false,\r\n  decuento_general: {\r\n    cantidad_descontado: 0,\r\n    porciento: 0,\r\n    precio_neto: 0,\r\n  },\r\n  dias_de_credito_venta: null,\r\n  fecha_de_vencimiento_credito: null,\r\n  fecha_vencimiento_cotizacion: null,\r\n  cliente: {\r\n    banco: null,\r\n    celular: null,\r\n    clave_cliente: \"23233\",\r\n    curp: null,\r\n    dias_credito: null,\r\n    direccion: {\r\n      calle: \"Antonio\",\r\n      no_ext: \"1\",\r\n      no_int: \"1\",\r\n      codigo_postal: \"1\",\r\n      colonia: \"Antonio\",\r\n      municipio: \"1\",\r\n      localidad: \"1\",\r\n      estado: \"1\",\r\n      pais: \"1\",\r\n    },\r\n    email: \"antonio.poday@gmail.com\",\r\n    imagen: null,\r\n    limite_credito: null,\r\n    nombre_cliente: \"Antonio\",\r\n    numero_cliente: \"2323\",\r\n    razon_social: null,\r\n    rfc: null,\r\n    telefono: \"1212\",\r\n    monedero_electronico: null,\r\n  },\r\n  productos: [\r\n    {\r\n      cantidad: 1,\r\n      cantidad_venta: 1,\r\n      codigo_barras: \"226216505720\",\r\n      concepto: \"unidades\",\r\n      default: true,\r\n      descuento: {\r\n        cantidad_unidad: null,\r\n        dinero_descontado: 21.59,\r\n        ieps_precio: 0,\r\n        iva_precio: 3.5856,\r\n        numero_precio: 1,\r\n        porciento: 49.07,\r\n        precio_general: 0,\r\n        precio_neto: 25.0453,\r\n        precio_venta: 22.41,\r\n        unidad_maxima: false,\r\n        utilidad: -43.97,\r\n      },\r\n      descuento_activo: true,\r\n      granel_producto: {\r\n        granel: false,\r\n        valor: 0,\r\n      },\r\n      precio_actual_object: {\r\n        cantidad_unidad: null,\r\n        dinero_descontado: 21.59,\r\n        ieps_precio: 0,\r\n        iva_precio: 3.5856,\r\n        numero_precio: 1,\r\n        porciento: 49.07,\r\n        precio_general: 0,\r\n        precio_neto: 25.0453,\r\n        precio_venta: 22.41,\r\n        unidad_maxima: false,\r\n        utilidad: -43.97,\r\n      },\r\n      precio_unidad: {\r\n        cantidad_unidad: null,\r\n        ieps_precio: 0,\r\n        iva_precio: 6.72,\r\n        numero_precio: 5,\r\n        precio_general: null,\r\n        precio_neto: 48.72,\r\n        precio_venta: 42,\r\n        unidad_maxima: false,\r\n        unidad_mayoreo: 0,\r\n      },\r\n      precio: 36,\r\n      precio_a_vender: 30.6,\r\n      precio_actual_producto: 30.6,\r\n      precio_anterior: 36,\r\n      iva_total_producto: 1.03,\r\n      ieps_total_producto: 0,\r\n      impuestos_total_producto: 1.03,\r\n      subtotal_total_producto: 7.22,\r\n      total_total_producto: 36,\r\n      unidad: \"Caja\",\r\n      codigo_unidad: \"XBX\",\r\n      unidad_principal: true,\r\n      inventario_general: [\r\n        {\r\n          cantidad_existente: 120,\r\n          cantidad_existente_maxima: 10,\r\n          unidad_inventario: \"Pz\",\r\n          codigo_unidad: null,\r\n          unidad_maxima: \"Caja\",\r\n        },\r\n      ],\r\n      id_producto: {\r\n        _id: \"61b7bf6e3454b727a0c2e357\",\r\n        datos_generales: {\r\n          clave_alterna: \"COCA\",\r\n          codigo_barras: \"226216505720\",\r\n          nombre_comercial: \"COCACOLA\",\r\n          tipo_producto: \"OTROS\",\r\n          nombre_generico: \"COCACOLA\",\r\n          descripcion: null,\r\n          id_categoria: null,\r\n          categoria: null,\r\n          subcategoria: null,\r\n          id_subcategoria: null,\r\n          id_departamento: null,\r\n          departamento: null,\r\n          id_marca: null,\r\n          marca: null,\r\n          receta_farmacia: false,\r\n          clave_producto_sat: {\r\n            Name: \"Refrescos\",\r\n            Value: \"50202306\",\r\n          },\r\n        },\r\n        precios: {\r\n          ieps: 10,\r\n          ieps_activo: false,\r\n          inventario: {\r\n            inventario_maximo: 15,\r\n            inventario_minimo: 5,\r\n            unidad_de_inventario: \"Caja\",\r\n            codigo_unidad: \"XBX\",\r\n          },\r\n          iva: 16,\r\n          iva_activo: true,\r\n          monedero: false,\r\n          monedero_electronico: 0,\r\n          precio_de_compra: {\r\n            precio_con_impuesto: 180,\r\n            precio_sin_impuesto: 155.1724,\r\n            iva: 24.8276,\r\n            ieps: 0,\r\n          },\r\n          precios_producto: [\r\n            {\r\n              numero_precio: 1,\r\n              precio_neto: 8.25,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 10,\r\n            },\r\n            {\r\n              numero_precio: 2,\r\n              precio_neto: 0,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 0,\r\n            },\r\n            {\r\n              numero_precio: 3,\r\n              precio_neto: 0,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 0,\r\n            },\r\n            {\r\n              numero_precio: 4,\r\n              precio_neto: 0,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 0,\r\n            },\r\n            {\r\n              numero_precio: 5,\r\n              precio_neto: 0,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 0,\r\n            },\r\n            {\r\n              numero_precio: 6,\r\n              precio_neto: 0,\r\n              unidad_mayoreo: 0,\r\n              utilidad: 0,\r\n            },\r\n          ],\r\n          unidad_de_compra: {\r\n            cantidad: 24,\r\n            precio_unitario_con_impuesto: 7.5,\r\n            precio_unitario_sin_impuesto: 6.4655,\r\n            unidad: \"Caja\",\r\n            codigo_unidad: \"XBX\",\r\n          },\r\n        },\r\n      },\r\n      medida: null,\r\n      color: null,\r\n    },\r\n  ],\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\"\r\nimport DetallesDeVenta from \"./DetallesVenta\";\r\nimport { compra_test } from '../TablaVenta/array_test'\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasFactura() {\r\n  const [open, setOpen] = useState(false);\r\n  const { datosFactura, setDatosFactura, setVentaFactura, setProductos } = useContext(FacturacionCtx);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Seleccionar cliente</DialogTitle>\r\n        <DialogContent>\r\n          <RenderLista />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            onClick={() => {\r\n              handleClose();\r\n              /* setDatosFactura({ ...datosFactura, cliente: \"\" }); */\r\n            }}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={<Done />}\r\n            onClick={() => {\r\n              console.log(compra_test);\r\n              setVentaFactura(compra_test);\r\n              setProductos(compra_test.productos);\r\n              handleClose();\r\n            }}\r\n            /* disabled={!datosFactura.cliente} */\r\n          >\r\n            Seleccionar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderLista = () => {\r\n  const classes = useStyles();\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  /* Queries */\r\n  const { loading, data, error } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo: \"CLIENTE\", filtro },\r\n  });\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.value);\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"55vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const obtenerCliente = (value) => {\r\n    console.log(value);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Autocomplete\r\n          id=\"usuarios-factura\"\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          options={obtenerClientes}\r\n          getOptionLabel={(option) => option.nombre_cliente}\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n            />\r\n          )}\r\n          onChange={(_, data) => obtenerCliente(data)}\r\n          getOptionSelected={(option, value) => option.nombre_cliente === value.nombre_cliente}\r\n        />\r\n\r\n        {/* <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setValues(e.target.value)}\r\n          onKeyPress={pressEnter}\r\n          value={values}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton onClick={() => setFiltro(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        /> */}\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Folio</TableCell>\r\n                <TableCell>Cliente</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n                <TableCell>Detalles</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.map((row, index) => {\r\n                return (\r\n                  <TableRow\r\n                    key={index}\r\n                    hover\r\n                    role=\"checkbox\"\r\n                    tabIndex={-1}\r\n                    /* onClick={() =>\r\n                      setDatosFactura({\r\n                        ...datosFactura,\r\n                        cliente: row.nombre_cliente,\r\n                      })\r\n                    } */\r\n                    /* onClick={() => setVentaFactura(compra_test)} */\r\n                    selected={row.nombre_cliente === datosFactura.cliente}\r\n                  >\r\n                    <TableCell>\r\n                      <Typography>{row.numero_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.clave_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.nombre_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.razon_social}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.razon_social}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.razon_social}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <DetallesDeVenta />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport { CircularProgress, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { CheckCircle, Error } from \"@material-ui/icons\";\r\n\r\nexport default function CodigoPostal() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const {\r\n    cp_valido,\r\n    setCPValido,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    error_validation,\r\n  } = React.useContext(FacturacionCtx);\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const [CP] = useDebounce(value, 500);\r\n\r\n  const obtenerCodigoPostal = React.useCallback(async (codigo_postal) => {\r\n    if (!codigo_postal) return;\r\n    try {\r\n      setLoading(true);\r\n      const result = await Facturama.Catalogs.PostalCodes(\r\n        codigo_postal,\r\n        function (result) {\r\n          return result;\r\n        }\r\n      );\r\n\r\n      if (result) {\r\n        setCPValido(true);\r\n        setLoading(false);\r\n        setCodigoPostal(result[0].Value);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCPValido(false);\r\n      setCodigoPostal(\"\");\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    obtenerCodigoPostal(CP);\r\n  }, [CP]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <Typography>Código Postal:</Typography> */}\r\n      <form onSubmit={obtenerCodigoPostal}>\r\n        <TextField\r\n          fullWidth\r\n          name=\"expedition_place\"\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          value={value}\r\n          label=\"Código postal\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {value ? (\r\n                  loading ? (\r\n                    <CircularProgress size={20} />\r\n                  ) : cp_valido ? (\r\n                    <CheckCircle color=\"primary\" />\r\n                  ) : (\r\n                    <Error color=\"error\" />\r\n                  )\r\n                ) : (\r\n                  <div />\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          /* error={value ? cp_valido ? false : true : false}\r\n          helperText={value ? cp_valido ? \"\" : \"Introduce un CP valido\" : \"\"} */\r\n\r\n          error={\r\n            error_validation.status && !value\r\n              ? true\r\n              : value\r\n              ? cp_valido\r\n                ? false\r\n                : true\r\n              : false\r\n          }\r\n          helperText={\r\n            error_validation.status && !value\r\n              ? error_validation.message\r\n              : value\r\n              ? cp_valido\r\n                ? \"\"\r\n                : \"Introduce un CP valido\"\r\n              : \"\"\r\n          }\r\n        />\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport CrearCliente from \"../../Catalogos/Cliente/CrearCliente\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaClientesFacturas() {\r\n  const [open, setOpen] = useState(false);\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Seleccionar cliente</DialogTitle>\r\n        <DialogContent>\r\n          <RenderLista />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            onClick={() => {\r\n              handleClose();\r\n              setDatosFactura({\r\n                ...datosFactura,\r\n                receiver: {\r\n                  Rfc: \"\",\r\n                  Name: \"\",\r\n                  CfdiUse: \"\",\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleClose()}\r\n            disabled={!datosFactura.receiver.Name}\r\n          >\r\n            Seleccionar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderLista = () => {\r\n  const classes = useStyles();\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo: \"CLIENTE\", filtro },\r\n  });\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.value);\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"55vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2} display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setValues(e.target.value)}\r\n          onKeyPress={pressEnter}\r\n          value={values}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton onClick={() => setFiltro(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n        <ClienteProvider>\r\n          <CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" refetch={refetch} />\r\n        </ClienteProvider>\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n                <TableCell minwidth=\"100\">Clave</TableCell>\r\n                <TableCell minwidth=\"150\">Nombre</TableCell>\r\n                <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.map((row, index) => {\r\n                return (\r\n                  <TableRow\r\n                    key={index}\r\n                    hover\r\n                    role=\"checkbox\"\r\n                    tabIndex={-1}\r\n                    onClick={() =>\r\n                      setDatosFactura({\r\n                        ...datosFactura,\r\n                        receiver: {\r\n                          ...datosFactura.receiver,\r\n                          Name: row.nombre_cliente,\r\n                          Rfc: row.rfc,\r\n                        },\r\n                      })\r\n                    }\r\n                    selected={row.nombre_cliente === datosFactura.receiver.Name}\r\n                  >\r\n                    <TableCell>\r\n                      <Typography>{row.numero_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.clave_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.nombre_cliente}</Typography>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Typography>{row.razon_social}</Typography>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ListaVentasFactura from \"./ListaVentas/ListaVentasFactura.js\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx.js\";\r\nimport CodigosPostales from \"./Catalogos/CodigoPostal.js\";\r\nimport { tipoCambio, tiposCfdi } from \"../catalogos\";\r\nimport ListaClientesFacturas from \"./ClientesSelect.js\";\r\n\r\nexport default function RegistroFactura({ serie_default }) {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { folio, serie } = serie_default[0];\r\n    setDatosFactura({ ...datosFactura, folio: folio.toString(), serie });\r\n  }, []);\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={5}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>{`Emisor: ${datosFactura.issuer.Name}`}</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.issuer.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.issuer.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.issuer.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Regimen fiscal</Typography>\r\n              <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                <TextField\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={datosFactura.issuer.FiscalRegime}\r\n                  disabled\r\n                  error={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                  }\r\n                  helperText={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                      ? error_validation.message\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>Receptor</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Cliente</Typography>\r\n              <TextField\r\n                value={datosFactura.receiver.Name}\r\n                placeholder=\"Selecciona un cliente\"\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <ListaClientesFacturas />\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                  disabled: true,\r\n                }}\r\n                error={error_validation.status && !datosFactura.receiver.Name}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Name\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.receiver.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.receiver.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Box mt={1} mb={2}>\r\n        <Typography>\r\n          <b>Datos factura</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <TextField\r\n            value={datosFactura.cliente}\r\n            placeholder=\"Selecciona venta a facturar\"\r\n            fullWidth\r\n            size=\"small\"\r\n            label=\"Folio Venta\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <ListaVentasFactura />\r\n                </InputAdornment>\r\n              ),\r\n              readOnly: true,\r\n              disabled: true,\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.folio}\r\n            label=\"Folio\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.folio}\r\n            helperText={\r\n              error_validation.status && !datosFactura.folio\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.serie}\r\n            label=\"Serie\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.serie}\r\n            helperText={\r\n              error_validation.status && !datosFactura.serie\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cfdi_type\"\r\n            error={error_validation.status && !datosFactura.cfdi_type}\r\n          >\r\n            <InputLabel id=\"cfdi_type\">Tipo de CFDI</InputLabel>\r\n            <Select\r\n              labelId=\"cfdi_type\"\r\n              value={datosFactura.cfdi_type}\r\n              name=\"cfdi_type\"\r\n              onChange={obtenerDatos}\r\n              label=\"tipo de CFDI\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tiposCfdi.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.cfdi_type\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"currency\"\r\n            error={error_validation.status && !datosFactura.currency}\r\n          >\r\n            <InputLabel id=\"moneda\">Moneda</InputLabel>\r\n            <Select\r\n              labelId=\"moneda\"\r\n              value={datosFactura.currency}\r\n              name=\"currency\"\r\n              onChange={obtenerDatos}\r\n              label=\"moneda\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tipoCambio.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.currency\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <CodigosPostales />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { Box, Checkbox, Divider, FormControl, MenuItem, Select, Typography } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ModificarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Edit />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>{datos_generales.nombre_comercial}</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Box>\r\n              <Typography>\r\n                <b>Impuestos</b>\r\n              </Typography>\r\n            </Box>\r\n            <Divider />\r\n            <TableContainer>\r\n              <Table size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"checkbox\">Activo</TableCell>\r\n                    <TableCell style={{ width: 50 }}>Base</TableCell>\r\n                    <TableCell style={{ width: 50 }}>Impuesto</TableCell>\r\n                    <TableCell style={{ width: 100 }}>Tasa o Cuota</TableCell>\r\n                    <TableCell style={{ width: 100 }}>\r\n                      Valor Tasa o Cuota\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 100 }}>Importe</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  <TableRow tabIndex={-1}>\r\n                    <TableCell padding=\"checkbox\">\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        /* checked={precios.iva_activo} */\r\n                        /* onChange={obtenerIva} */\r\n                        name=\"iva_activo\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                    <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                    <TableCell style={{ width: 100 }}>\r\n                      <FormControl\r\n                      fullWidth\r\n                        size=\"small\"\r\n                      >\r\n                        <Select\r\n                          /* value={age} */\r\n                          /* onChange={handleChange} */\r\n                        >\r\n                          <MenuItem value=\"Tasa\">Tasa</MenuItem>\r\n                          <MenuItem value=\"Cuota\">Cuota</MenuItem>\r\n                        </Select>\r\n                      </FormControl>\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 100 }}>\r\n                      Valor Tasa o Cuota\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 100 }}>Importe</TableCell>\r\n                  </TableRow>\r\n                  <TableRow tabIndex={-1}>\r\n                    <TableCell padding=\"checkbox\">\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        /* checked={precios.iva_activo} */\r\n                        /* onChange={obtenerIva} */\r\n                        name=\"iva_activo\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 50 }}>Base</TableCell>\r\n                    <TableCell style={{ width: 50 }}>Impuesto</TableCell>\r\n                    <TableCell style={{ width: 100 }}>Tasa o Cuota</TableCell>\r\n                    <TableCell style={{ width: 100 }}>\r\n                      Valor Tasa o Cuota\r\n                    </TableCell>\r\n                    <TableCell style={{ width: 100 }}>Importe</TableCell>\r\n                  </TableRow>\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                  <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>% IVA</TableCell>\r\n                  <TableCell>% IEPS</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal_total_producto)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos_total_producto)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total_total_producto)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(FacturacionCtx);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const copy_venta = { ...venta };\r\n    const copy_productos = [ ...productos];\r\n    const { cantidad_venta, granel_producto, precio_actual_object } = producto;\r\n    const { iva, ieps, impuestos, subTotal, total, monedero } = copy_venta;\r\n    //devuelve cantidades a restar\r\n    const precio_resta = await calculatePrices2({\r\n      newP: producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //Restar precios a venta\r\n    console.log(precio_resta);\r\n    const {\r\n      ivaCalculo,\r\n      iepsCalculo,\r\n      impuestoCalculo,\r\n      subtotalCalculo,\r\n      totalCalculo,\r\n      monederoCalculo,\r\n    } = precio_resta;\r\n\r\n    copy_venta.iva = iva - ivaCalculo;\r\n    copy_venta.ieps = ieps - iepsCalculo;\r\n    copy_venta.impuestos = impuestos - impuestoCalculo;\r\n    copy_venta.subTotal = subTotal - subtotalCalculo;\r\n    copy_venta.total = total - totalCalculo;\r\n    copy_venta.monedero = monedero - monederoCalculo;\r\n\r\n    //remover de la lista\r\n    copy_productos.splice(index, 1);\r\n    setVentaFactura(copy_venta);\r\n    setProductos(copy_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Close />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>¿Está seguro de eliminar este producto?</DialogTitle>\r\n        <DialogContent>\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 100 }}>Producto</TableCell>\r\n                  <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n                  <TableCell>{producto.cantidad_venta}</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal_total_producto)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos_total_producto)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total_total_producto)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => handleDelete()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport ModificarProductoFactura from \"./EditarProductoFactura\";\r\nimport EliminarProductoFactura from \"./EliminarProductoFactura\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"36vh\",\r\n  },\r\n});\r\n\r\nexport default function DetallesFactura() {\r\n  const classes = useStyles();\r\n  const { venta_factura, productos } = useContext(FacturacionCtx);\r\n\r\n  if(!venta_factura){\r\n    return null\r\n  }\r\n\r\n  console.log(venta_factura);\r\n  \r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"elevation\">\r\n      <Box textAlign=\"center\">\r\n        <Typography variant=\"button\">Detalles de Venta</Typography>\r\n      </Box>\r\n      <TableContainer>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n          <TableRow>\r\n              <TableCell style={{ width: 250 }}>Folio</TableCell>\r\n              <TableCell style={{ width: 50 }}>Descuento</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Usuario</TableCell>\r\n              <TableCell style={{ width: 50 }}>Caja</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n              <TableCell style={{ width: 200 }}>{venta_factura.folio}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.descuento)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.iva)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.ieps)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.subTotal)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.impuestos)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>${formatoMexico(venta_factura.total)}</TableCell>\r\n              <TableCell style={{ width: 200 }}>aqui ira usuario</TableCell>\r\n              <TableCell style={{ width: 200 }}>aqui ira caja</TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box textAlign=\"center\" mt={1}>\r\n        <Typography variant=\"button\">Productos de Venta</Typography>\r\n      </Box>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Producto</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Modificar</TableCell>\r\n              <TableCell style={{ width: 50 }} >Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos.map((producto, index) => {\r\n              return <RowTableProductos venta={venta_factura} producto={producto} key={index} index={index} />;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowTableProductos = ({ venta, producto, index }) => {\r\n  const {datos_generales}= producto.id_producto\r\n  return (\r\n    <TableRow tabIndex={-1}>\r\n      <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n      <TableCell>{producto.cantidad_venta}</TableCell>\r\n      <TableCell>${formatoMexico(producto.iva_total_producto)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.ieps_total_producto)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.subtotal_total_producto)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.impuestos_total_producto)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.total_total_producto)}</TableCell>\r\n      <TableCell>\r\n        <ModificarProductoFactura venta={venta} producto={producto} index={index} />\r\n      </TableCell>\r\n      <TableCell>\r\n        <EliminarProductoFactura venta={venta} producto={producto} index={index} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\n","export const verificarDatosFactura = (datos) => {\r\n  const {\r\n    cfdi_type,\r\n    currency,\r\n    date,\r\n    empresa,\r\n    expedition_place,\r\n    folio,\r\n    issuer,\r\n    items,\r\n    logo_url,\r\n    payment_form,\r\n    payment_method,\r\n    receiver,\r\n    serie,\r\n    sucursal,\r\n  } = datos;\r\n\r\n  console.log(datos);\r\n\r\n  //verificar datos factura\r\n  if (\r\n    !cfdi_type ||\r\n    !currency ||\r\n    !date ||\r\n    !empresa ||\r\n    !expedition_place ||\r\n    !folio ||\r\n    !issuer ||\r\n    !items ||\r\n    !logo_url ||\r\n    !payment_form ||\r\n    !payment_method ||\r\n    !receiver ||\r\n    !serie ||\r\n    !sucursal\r\n  ){\r\n      return [{message: \"Campo requerido\"}]\r\n  }\r\n//verificar productos factura\r\n\r\n\r\n    return [];\r\n};\r\n","const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\nexport const factura_initial_state = {\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion ? sesion.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  }","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport moment from \"moment\";\r\nimport { verificarDatosFactura } from \"./validacion_factura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { CREAR_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { formaPago, metodoPago, tiposCfdi, usosCfdi } from \"../catalogos\";\r\nimport { Done } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RealizarFactura({ setAlert }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    datosFactura,\r\n    setDatosFactura,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    productosFactura,\r\n    setProductosFactura,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const [CrearFactura] = useMutation(CREAR_FACTURA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setProductosFactura([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const crearFactura = async () => {\r\n    try {\r\n      setLoading(true);\r\n      let nuevo_obj = { ...datosFactura };\r\n      const productos = [\r\n        {\r\n          ProductCode: \"50202306\",\r\n          IdentificationNumber: \"61b7bf6e3454b727a0c2e357\",\r\n          Description: \"COCACOLA\",\r\n          /* Unit: \"Unidad de Servicio\", */\r\n          UnitCode: \"XBX\",\r\n          UnitPrice: \"36\",\r\n          Quantity: \"1\",\r\n          Subtotal: \"36\",\r\n          Discount: \"5.4\",\r\n          Taxes: [\r\n            {\r\n              Total: \"4.89\",\r\n              Name: \"IVA\",\r\n              Base: \"30.6\",\r\n              Rate: \"0.16\",\r\n              IsRetention: \"false\",\r\n            },\r\n          ],\r\n          Total: \"35.49\",\r\n        },\r\n      ];\r\n\r\n      //poner la fecha de facturacion\r\n      if (datosFactura.date === \"1\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(1, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else if (datosFactura.date === \"2\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(2, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else {\r\n        nuevo_obj.date = moment().format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      }\r\n\r\n      nuevo_obj.items = productos;\r\n      nuevo_obj.expedition_place = codigo_postal;\r\n\r\n      /* validar todos los datos */\r\n      const validate = verificarDatosFactura(nuevo_obj);\r\n\r\n      console.log(nuevo_obj);\r\n      if (validate.length) {\r\n        setError({ status: true, message: validate[0].message });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setError({ status: false, message: \"\" });\r\n\r\n      /* let result = await CrearFactura({\r\n        variables: {\r\n          input: nuevo_obj,\r\n        },\r\n      });\r\n      console.log(\"result\", result); */\r\n      setLoading(false);\r\n      /* setAlert({\r\n        message: `¡Listo! ${result.data.crearFactura.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      }); */\r\n      /* limpiarCampos(); */\r\n    } catch (error) {\r\n      console.log(error);\r\n      console.log(error.response);\r\n      setLoading(false);\r\n      if (error.response) {\r\n        setAlert({\r\n          message: error.response,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"primary\"\r\n        startIcon={<DoneIcon />}\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Generar CFDI\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogContent>\r\n          <InputsFacturaModal />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button startIcon={<Done />} onClick={() => crearFactura()} color=\"primary\">\r\n            Realizar Factura\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputsFacturaModal = () => {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerUsoCfdi = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      receiver: {\r\n        ...datosFactura.receiver,\r\n        [name]: value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box my={1}>\r\n        <Typography>Fecha de facturación</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"date\"\r\n          error={error_validation.status && !datosFactura.date}\r\n        >\r\n          <Select value={datosFactura.date} name=\"date\" onChange={obtenerDatos}>\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona una fecha</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"0\">{moment().format(\"LL\")}</MenuItem>\r\n            <MenuItem value=\"1\">\r\n              {moment().subtract(1, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"2\">\r\n              {moment().subtract(2, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.date\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Forma de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_form\"\r\n          error={error_validation.status && !datosFactura.payment_form}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_form}\r\n            name=\"payment_form\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {formaPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_form\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Método de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_method\"\r\n          error={error_validation.status && !datosFactura.payment_method}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_method}\r\n            name=\"payment_method\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {metodoPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_method\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box>\r\n        <Typography>Uso de CFDi</Typography>\r\n        <FormControl\r\n          fullWidth\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          error={error_validation.status && !datosFactura.receiver.CfdiUse}\r\n        >\r\n          <Select\r\n            value={datosFactura.receiver.CfdiUse}\r\n            name=\"CfdiUse\"\r\n            onChange={obtenerUsoCfdi}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {usosCfdi.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.receiver.CfdiUse\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport RegistroFactura from \"./RegistroFactura\";\r\nimport DetallesFactura from \"./TablaVenta/TablaDetallesFactura\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport {\r\n  FacturacionCtx,\r\n  FacturacionProvider,\r\n} from \"../../../../context/Facturacion/facturacionCtx\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport RealizarFactura from \"./RealizarFactura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function NuevaFactura() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ClienteProvider>\r\n        <Button fullWidth onClick={() => handleClickOpen()}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-2.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n            Generar nuevo CFDI\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={() => handleClose()}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Generar nuevo CFDI\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  /* variant=\"contained\" */\r\n                  color=\"inherit\"\r\n                  onClick={() => handleClose()}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <FacturacionProvider>\r\n            <FacturaModalContent handleClose={handleClose} />\r\n          </FacturacionProvider>\r\n        </Dialog>\r\n      </ClienteProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst FacturaModalContent = ({ handleClose }) => {\r\n  const { setDatosFactura, setCodigoPostal, setProductosFactura } = useContext(\r\n    FacturacionCtx\r\n  );\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { seriesCfdi } = data.obtenerSeriesCdfi;\r\n\r\n  let serie_default = [];\r\n  serie_default = seriesCfdi.filter((serie) => serie.default === true);\r\n  if (!serie_default.length) {\r\n    serie_default = [{ folio: \"\", serie: \"\" }];\r\n    console.log(serie_default);\r\n  }\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setProductosFactura([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const cancelarCFDI = () => {\r\n    limpiarCampos();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        {!seriesCfdi.length ? (\r\n          <Alert severity=\"warning\">No tienes Series CFDI registradas</Alert>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <RegistroFactura serie_default={serie_default} />\r\n        </Box>\r\n        {/* <Box>\r\n          <ListaDocumentos />\r\n        </Box> */}\r\n        <DetallesFactura />\r\n      </DialogContent>\r\n\r\n      <DialogActions style={{ justifyContent: \"center\" }}>\r\n        <Button onClick={() => cancelarCFDI()} size=\"large\">\r\n          Cancelar\r\n        </Button>\r\n        <RealizarFactura setAlert={setAlert} />\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Close, Done } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CREAR_SERIE } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroSeries({ refetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({ folio: \"\", serie: \"\", default: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearSerieCFDI] = useMutation(CREAR_SERIE);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({ folio: \"\", serie: \"\", default: false });\r\n  };\r\n\r\n  const obtenerDatosSeries = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPredeterminado = (e) => {\r\n    const { name, checked } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const guardarDatosBD = async () => {\r\n    if (!datos.folio || !datos.serie) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await crearSerieCFDI({\r\n        variables: {\r\n          input: {\r\n            serie: datos.serie,\r\n            folio: parseInt(datos.folio),\r\n            default: datos.default,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearSerieCFDI.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Add />}\r\n        >\r\n          Nueva serie\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Registrar nueva serie</DialogTitle>\r\n        <DialogContent>\r\n          <Box width=\"100%\">\r\n            <Typography>Serie para CDFI:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"serie\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>Folio Inicial:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"folio\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <FormControlLabel\r\n            style={{ marginTop: 8 }}\r\n            control={\r\n              <Checkbox\r\n                checked={datos.default}\r\n                onChange={obtenerPredeterminado}\r\n                name=\"default\"\r\n              />\r\n            }\r\n            label=\"Serie predeterminada\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            disabled={!datos.serie || !datos.folio || loading}\r\n            onClick={() => guardarDatosBD()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Backdrop, Checkbox, CircularProgress } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ACTUALIZAR_DEFAULT_SERIE,\r\n  ELIMINAR_SERIE,\r\n} from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"80vh\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function ListaSeriesCDFI({ obtenerSeriesCdfi, refetch }) {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { seriesCfdi } = obtenerSeriesCdfi;\r\n  const [modificarDefaultSerie] = useMutation(ACTUALIZAR_DEFAULT_SERIE);\r\n\r\n  const setPredeterminado = async (value, data) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await modificarDefaultSerie({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.modificarDefaultSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Backdrop className={classes.backdrop} open={loading}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Serie</TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Predeterminado</TableCell>\r\n              <TableCell padding=\"checkbox\">Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {seriesCfdi.map((row, index) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                  <TableCell>{row.serie}</TableCell>\r\n                  <TableCell>{row.folio}</TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <Checkbox\r\n                      checked={row.default}\r\n                      onChange={(e) => setPredeterminado(e.target.checked, row)}\r\n                      name=\"checkedA\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <ModalDeleteSerie\r\n                      row={row}\r\n                      refetch={refetch}\r\n                      setAlert={setAlert}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst ModalDeleteSerie = ({ row, refetch, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarSerie] = useMutation(ELIMINAR_SERIE);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const eliminarSerieBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarSerie({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton aria-label=\"delete\" size=\"small\" onClick={() => handleOpen()} disabled={row.default}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Se eliminara esta serie</DialogTitle>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            onClick={() => eliminarSerieBD()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { forwardRef, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Container,\r\n  Dialog,\r\n  makeStyles,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RegistroSeries from \"./RegistroSeries\";\r\nimport ListaSeriesCDFI from \"./ListaSeries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SeriesCDFI() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-1.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Registrar Series CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Seleccion de Series para CFDI\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button color=\"inherit\" onClick={handleClickOpen} size=\"large\">\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ContentSeriesCFDI />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentSeriesCFDI = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerSeriesCdfi } = data;\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box my={2}>\r\n        <RegistroSeries refetch={refetch} />\r\n      </Box>\r\n      <ListaSeriesCDFI\r\n        obtenerSeriesCdfi={obtenerSeriesCdfi}\r\n        refetch={refetch}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosFacturaExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosFacturaExcel from \"./ExportarProductosFactura\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosFacturaExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosFactura\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaFacturas({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaFacturas\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarListaFacturasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-3.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          CFDis realizados\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              CFDis realizados\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nimport { Box, Container, Grid } from '@material-ui/core'\r\n\r\nimport NuevaFactura from './NuevaFactura/NuevaFactura';\r\nimport SeriesCDFI from './CFDISeries/SeriesCdfi';\r\n/* import SellosCDFI from './CFDISellos/SellosCdfi'; */\r\nimport FacturasRealizadas from './FacturasRealizadas/FacturasRealizadas';\r\n\r\nexport default function Facturacion() {\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Grid container spacing={2} justify=\"center\">\r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <NuevaFactura />\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <FacturasRealizadas />\r\n                        </Box>\r\n                    </Grid>{/* \r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SellosCDFI />\r\n                        </Box>\r\n                    </Grid> */}\r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SeriesCDFI />\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow, \r\n    CircularProgress,\r\n    Box,\r\n    Typography,\r\n\tIconButton,\r\n\tTablePagination\r\n} from '@material-ui/core/';\r\nimport { Delete } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\n\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t}\r\n  });\r\n\r\n  const columns = [\r\n\t{ id: 1, label: 'Nombre', minWidth: 100 },\r\n\t{ id: 2, label: 'Encargado', minWidth: 100 },\r\n\t{ id: 3, label: 'Sucursal', minWidth: 150 },\r\n\t{ id: 4, label: 'Calle', minWidth: 150 },\r\n\t{ id: 5, label: 'No. exterior', minWidth: 150 },\r\n\t{ id: 6, label: 'No. interior', minWidth: 100 },\r\n\t{ id: 7, label: 'Codigo postal', minWidth: 100 },\r\n\t{ id: 8, label: 'Colonia', minWidth: 100 },\r\n\t{ id: 9, label: 'Municipio', minWidth: 50, align: 'right' },\r\n\t{ id: 10, label: 'Localidad', minWidth: 50, align: 'right' },\r\n\t{ id: 11, label: 'Estado', minWidth: 50, align: 'right' },\r\n\t{ id: 12, label: 'Pais', minWidth: 50, align: 'right' },\r\n\t{ id: 13, label: 'Editar', minWidth: 50, align: 'right' },\r\n\t{ id: 14, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n];\r\n\r\nexport default function ListaAlmacen() {\r\n\r\n    const classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\tconst { update } = useContext(CrearAlmacenContext);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerAlmacenes } = data;\r\n\r\n    // const classes = useStyles();\r\n\r\n    return (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer component={Paper}>\r\n\t\t\t\t<Table className={classes.table} aria-label=\"simple table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerAlmacenes\r\n\t\t\t\t\t\t\t?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn <RowsRender key={index} datos={row} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={obtenerAlmacenes.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.nombre_almacen}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{!datos.id_usuario_encargado ? \"Sin encargado\" : datos.id_usuario_encargado.nombre}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.id_sucursal.nombre_sucursal}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.calle ? datos.direccion.calle : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_ext ? datos.direccion.no_ext : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_int ? datos.direccion.no_int : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.codigo_postal ? datos.direccion.codigo_postal : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.colonia ? datos.direccion.colonia : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.municipio ? datos.direccion.municipio : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.localidad ? datos.direccion.localidad : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.estado ? datos.direccion.estado : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.pais ? datos.direccion.pais : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<ContainerRegistroAlmacen accion=\"actualizar\" datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t<Delete />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t\t{/* <TableCell width={50}>\r\n\t\t\t\t<ModalDetalles openDetalles={openDetalles} handleDetalles={handleDetalles} datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<CrearCliente tipo=\"CLIENTE\" accion=\"actualizar\" datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t<Delete />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell> */}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { forwardRef } from 'react';\r\nimport { AppBar, Toolbar, Typography, Slide, Button, Box, Dialog } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { FcPlus } from 'react-icons/fc';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport ListaAlmacen from './ListaAlmacen';\r\nimport { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroAlmacen() {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<AlmacenProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcPlus className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<ContainerRegistroAlmacen accion=\"registrar\" />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<ListaAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</AlmacenProvider>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/almacen.31993015.svg\";","import React, { createContext, useState, useEffect } from 'react';\r\n\r\nexport const TraspasosAlmacenContext = createContext();\r\n\r\nexport const TraspasosProvider = ({ children }) => {\r\n\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ productos, setProductos ] = useState([]);\r\n    const [ productosTo, setProductosTo ] = useState([]);\r\n     const [ productosEmpTo, setProductosEmpTo ] = useState([]);\r\n    const [ productosTras, setProductosTras ] = useState([]);\r\n\r\n   \r\n  \r\n\treturn (\r\n\t\t<TraspasosAlmacenContext.Provider value={\r\n            { \r\n                \r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                productos,\r\n                setProductos,\r\n                productosTras,\r\n                setProductosTras,\r\n                productosTo,\r\n                setProductosTo,\r\n                productosEmpTo, \r\n                setProductosEmpTo\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</TraspasosAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  datos,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  setNew_medidas\r\n}) {\r\n  \r\n  const classes = useStyles();\r\n  //const { presentaciones, setPresentaciones } = useContext([]);\r\n //let mostrar_presentaciones = [];\r\n   let mostrar_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell padding=\"checkbox\">Precio</TableCell>\r\n                {/* <TableCell padding=\"checkbox\">Descuento</TableCell> */}\r\n                {/* {!onlyPrice ? (\r\n                  <Fragment>\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null} */}\r\n                <Fragment>\r\n                  <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                </Fragment>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    datos={datos}\r\n                    setNew_medidas={setNew_medidas} \r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  datos,\r\n  setNew_medidas,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  /* const { presentaciones, setPresentaciones, preciosP } = useContext(\r\n    RegProductoContext\r\n  ); */\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  //const copy_element_presentacion = {  };\r\n  //const copy_element_presentacion_descuento = { ...copy_presentaciones[index].descuento };\r\n  const copy_element_presentacion_descuento = { };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.medida.cantidad) {\r\n      copy_element_presentacion.medida.cantidad = 0;\r\n    }\r\n    if (!copy_producto.nuevaCantidad) {\r\n      copy_element_presentacion.nuevaCantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = copy_producto.precio;\r\n      //copy_element_presentacion.medida.precio = 0;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones); \r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.cantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(setNew_medidas); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.cantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"nuevaCantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.nuevaCantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = copy_producto.medida.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.nuevaCantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      }\r\n    } \r\n      else if (name === \"descuento\") {\r\n      /* if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      } */\r\n       copy_element_presentacion.medida.descuento = value;\r\n         \r\n    }\r\n    else {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.codigo_barras = value;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones); \r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.medida.codigo_barras = codigo_barras;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.medida.descuento_activo = value;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.medida.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.medida.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              datos.medidas_registradas && !copy_producto.medida.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {!datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.medida.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.medida._id ? (\r\n          <Chip label={copy_producto.medida.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.medida.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.medida.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n     \r\n\r\n         <Fragment>\r\n            <TableCell width={110}>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.precio}\r\n                type=\"tel\"\r\n                name=\"precio\"\r\n              />\r\n              \r\n            </TableCell>\r\n           {/*  <TableCell>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.descuento}\r\n                type=\"tel\"\r\n                name=\"descuento\"\r\n              />\r\n            </TableCell> */}\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.nuevaCantidad}\r\n                type=\"tel\"\r\n                name=\"nuevaCantidad\"\r\n              />\r\n            </TableCell>\r\n          </Fragment>\r\n     \r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  Fragment,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Typography,\r\n  MenuItem,\r\n  Divider,\r\n  Tooltip,\r\n  FormLabel,\r\n  Dialog,\r\n  Slide\r\n} from \"@material-ui/core\";\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { Box, FormControl, Grid, Select } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentacionesNotOrigen from \"./TablePresentacionesNotOrigen\";\r\n\r\n\r\nimport CrearColorProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n    \r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ColoresTallas({\r\n  producto,\r\n  new_medidas,\r\n  setNew_medidas,\r\n  obtenerConsultasProducto,\r\n  refetch\r\n}) {\r\n\r\n     const [localNewMedidas, setLocalNewMedidas] = useState([]);\r\n    const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n    const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n    /* const medidas =\r\n    producto.datos_generales.tipo_producto === \"ROPA\" ? [...obtenerConsultasProducto.tallas] : [...obtenerConsultasProducto.calzados]; */ \r\n    const [onUpdate, setOnUpdate] = useState([]);\r\n    const {productosTras} = useContext(TraspasosAlmacenContext);\r\n //console.log(data.obtenerConsultasProducto)\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    \r\n    const copy_presentaciones =  [...new_medidas ];\r\n    \r\n \r\n//const copy_presentaciones = [];\r\n    /* Queries */\r\n \r\n    copy_presentaciones.forEach((element) => {\r\n   //console.log('obtenerColoresSeleccinados', element)\r\n      if (element.medida.color._id) colors.push(element.medida.color);\r\n      if (element.medida.medida._id) medidas.push(element.medida.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n    //console.log('colores_existentes', colores_existentes, 'medidas_existentes', medidas_existentes)\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n   \r\n    \r\n  }, [new_medidas,setColoresSeleccionados, setMedidasSeleccionadas]);\r\n\r\n \r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n     <div>\r\n       <Box alignContent='center' m={5} >\r\n        <Grid container spacing={4}>\r\n         {/*  {!datos.medidas_registradas ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\">\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    \r\n                    {presentaciones.length > 0  ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n            \r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>\r\n                  {producto.datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              { (producto.datos_generales.tipo_producto === \"ROPA\") ? \r\n                  (obtenerConsultasProducto.tallas  !== undefined) ? \r\n                    <Grid container >\r\n                        {obtenerConsultasProducto.tallas.map((talla, index) => (\r\n                        <RenderTallas\r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                  :\r\n                  <div/>\r\n                :\r\n                   (obtenerConsultasProducto.calzados  !== undefined) ? \r\n                      <Grid container >\r\n                        {obtenerConsultasProducto.calzados.map((talla, index) => (\r\n                        <RenderTallas\r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                    :\r\n                    <div/>\r\n              }\r\n              \r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n            {\r\n            (obtenerConsultasProducto.colores !== undefined) ? \r\n              <Grid container>\r\n                {obtenerConsultasProducto.colores.map((color, index) => (\r\n                  <Colores\r\n                    producto={producto}\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    datos={new_medidas}\r\n                    setNew_medidas={setNew_medidas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            :\r\n            <div/>\r\n            }  \r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} />\r\n        <TablaPresentacionesNotOrigen\r\n          datos={new_medidas}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n          setNew_medidas={setNew_medidas}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  producto,\r\n  talla,\r\n  coloresSeleccionados,\r\n  setMedidasSeleccionadas,\r\n  medidasSeleccionadas,\r\n  setNew_medidas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n /*  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext); */\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n   useEffect(() => {\r\n    if (datos) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [datos, seleccionarMedidas]); \r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n    //console.log('handleAddTallas', datos)\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n      /*     presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    //const array_medidad_finales = [];\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        presentacion_temp.push({\r\n          medida :{\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n          },\r\n          nuevaCantidad: 0\r\n          \r\n        });\r\n        \r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.medida._id === producto_medida._id\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n              medida :{\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n            },\r\n            nuevaCantidad: 0,\r\n    \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n             medida :{\r\n              _id: \"\",\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: medidas_seleccionadas_temp[k],\r\n              color: array_medidad_finales[i].medida.color,\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n            },\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            //console.log('YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL' , array_medidad_finales, producto_medida, producto_color)\r\n            presentacion_temp.push({\r\n              \r\n              medida :{\r\n                _id: \"\",\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                precio: 0,\r\n                cantidad: 0,\r\n                \r\n              },\r\n              nuevaCantidad: 0,\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n              \r\n              medida :{\r\n                _id: \"\",\r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: objeto_presentaciones_final.medida.color,\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n              },\r\n              nuevaCantidad: objeto_presentaciones_final.nuevaCantidad, \r\n\r\n          \r\n          });\r\n        }\r\n      }\r\n    }\r\n     \r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  producto,\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n  setNew_medidas\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n \r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n \r\n  useEffect(() => {\r\n    if (producto) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [producto, seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n         /*  new_medidas.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        presentacion_temp.push({\r\n          medida :{\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n            },\r\n            nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.color._id === producto_color._id\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n             medida :{\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n            },\r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            medida :{\r\n              _id: \"\",\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: array_medidad_finales[i].medida.medida,\r\n              color: coloresSeleccionados[k],\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n            },\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n               medida :{\r\n                _id: \"\",\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                precio: 0,\r\n                cantidad: 0,\r\n                //nuevo: true\r\n              },\r\n              nuevaCantidad: 0,\r\n              \r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida :{\r\n                _id: objeto_presentaciones_final.medida._id,\r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: { nombre: \"\", hex: \"\" },\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n              },\r\n            nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item >\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected, color)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useContext, useRef, useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Box, Chip, IconButton, Tooltip, Zoom , TextField} from '@material-ui/core';\r\nimport { Cached, Close, Edit } from '@material-ui/icons';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignSelf:'center',\r\n\t\twidth:'90%',\r\n\t\tpaddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n\t\t\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\t\r\n\t\tminWidth: '100%',\r\n\t\tmaxWidth: '100%',\r\n\t\t\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t},\r\n\ttableRow: {\r\n    \r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n    cell:{\r\n       align:'center'     \r\n    },\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nexport default function TablaPresentaciones({ producto, setOnUpdate, onUpdate, new_medidas, setNew_medidas }) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n \r\n\r\n \r\nconst handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:400}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                                <TableCell >Cantidad a traspasar</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tidProducto={producto._id}\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tmedida={item}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t\tnew_medidas={new_medidas}\r\n\t\t\t\t\t\t\t\t\t\tsetNew_medidas={setNew_medidas}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst RenderPresentacionesRows = ({ medida, index, setOnUpdate, onUpdate,new_medidas, setNew_medidas, idProducto}) => {\r\n\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst [ cantidad, setCantidad ] = useState(0);\r\n\tconst [ cantidadAnt, setCantidadAnt ] = useState(0);\r\n\tconst copy_medida = { ...medida };\r\n\tconst {productosTras} = useContext(TraspasosAlmacenContext);\r\n\t//const [productInTras, setProductInTras] =  useState(null);\r\n\tlet productInTras = null;\r\n\t//let productInTras = productosTras.find(element => element.product_selecteded._id === idProducto);\r\n\tconst productosTrasContext = productosTras;\r\n \r\n\tuseEffect(() => {\r\n\t\tproductosTras.forEach(producto => {\r\n\t\t\t//console.log(\"SELECTMEDIDAS\",producto)\r\n\t\tif(producto.product_selected._id === idProducto){\r\n\t\t\tlet new_medidasCopia = [];\r\n\t\t\tlet element = null;\r\n\t\t\r\n\t\t\tfor (const med in producto.new_medidas) {\r\n\t\t\t\r\n\t\t\t\tif (Object.hasOwnProperty.call(producto.new_medidas, med)) {\r\n\t\t\t\t\telement = producto.new_medidas[med];\r\n\t\t\t\t\t\r\n\t\t\t\t\tnew_medidasCopia.push(element)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(medida._id === element.medida._id){\r\n\t\t\t\t\t\t//console.log(element.cantidad)\t\r\n\t\t\t\t\t\tsetCantidad( element.cantidad);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetNew_medidas(producto.new_medidas);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\treturn () => {\r\n\t\t\t<div/>\r\n\t\t}\r\n\t}, [productosTras])\r\n\t\r\n\r\n\r\n\t\r\n\r\n\t/* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\t\r\n\tconst obtenerDatos = (value) => {\r\n\t\tlet cant = (cantidadAnt > 0) ? parseInt(value - cantidadAnt)   : value;\r\n\t\t//console.log(\"CANT\",cantidad)\r\n\r\n\t\tif(cant <= medida.cantidad){\r\n\t\t\tsetCantidad(value);\r\n\t\t\r\n\t\t\tsetNew_medidas({...new_medidas, [index] : {medida:medida, nuevaCantidad: parseInt(cant)}})\r\n\t\t}\r\n\t\t/* \r\n\t\tconst unidades = {cantidad:} \r\n\t\tcopy_producto.push() */\r\n\t\t//Tengo que obtener los datos que se van a enviar se debe agregar un elemento al array \r\n\t\t\r\n\t\t//setPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<TableRow  selected={!disabledInput} className={classes.tableRow} >\r\n\t\t\t<TableCell >\r\n\t\t\t\t{copy_medida.medida._id ? <Chip label={copy_medida.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell  style={{width:'20%'}}>\r\n\t\t\t\t{copy_medida.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_medida.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_medida.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t\r\n\t\t\r\n\t\t\t<TableCell className={classes.cell}  style={{width:'25%'}}>\r\n\t\t\t\t{medida.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t \r\n\t\t\t<TableCell  style={{width:'25%'}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tInputProps={{ inputProps: { min: 0 } }}\r\n\t\t\t\t\tinputMode=\"numeric\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tvalue={cantidad}\r\n\t\t\t\t\tonChange={(value) => obtenerDatos(value.target.value)}\r\n\t\t\t\t\tname=\"nuevaCantidad\"\r\n\t\t\t\t/>\r\n            </TableCell>    \r\n\t\t</TableRow>\r\n\t);\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Grid,Box, TextField } from '@material-ui/core';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow, TableSortLabel} from '@material-ui/core';\r\nimport {Toolbar, Typography, Paper, IconButton, Tooltip, Dialog, Checkbox ,Slide, Button} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport TallasColoresTraspasos from './TallasColoresTraspasos';\r\nimport TableSelectMedidas from './TableSelectMedidas';\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_CONSULTAS } from \"../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from '../../context/Catalogos/CtxRegProducto';\r\n// function createData(name, cantidad, precio) {\r\n//   return { name, cantidad, precio };\r\n// }\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n  { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n  { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n  { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n\r\n];\r\nconst getUnidadMax  = (cantidad_existente_maxima,unidadMaxima) => {\r\n  //console.log('getCantidad',cantidad_nueva, cantidad_medida, accion)\r\n  const UNIDAD_MAXIMA = {\r\n    'Caja' :  'Cantidad existente en cajas: ' + cantidad_existente_maxima,\r\n    'Costal' : 'Cantidad existente en costales: ' + cantidad_existente_maxima,\r\n  }  \r\n  return UNIDAD_MAXIMA[unidadMaxima];\r\n}\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { classes,  order, orderBy, onRequestSort } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n     \r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? 'right' : 'left'}\r\n            // padding={headCell.disablePadding ? 'none' : 'normal'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // product_selected: PropTypes.object.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n    maxWidth:650\r\n  },\r\n  input:{\r\n    width:180\r\n  }\r\n  ,\r\n  inputCantidad:{\r\n    width:120,\r\n    height:10\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          \r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    fontSize:16,\r\n    flex: '1',\r\n     display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n}));\r\n\r\nconst DialogTallas = (props) => {\r\n\r\n  const [new_medidas, setNew_medidas] = useState([]);\r\n  const {setProductosTras, productosTras} = useContext(TraspasosAlmacenContext);\r\n \r\n  const setProd = () =>{\r\n    let newMedidasCopy = new_medidas;\r\n    let cantidad_total = 0;\r\n    \r\n\r\n     try {\r\n     \r\n       let prodSelect = null;\r\n    prodSelect = (props.almacenOrigen !== null) ? {\r\n      _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      medidas_producto: props.product_selected.medidas_producto,\r\n      inventario_general: props.product_selected.inventario_general,\r\n      unidades_de_venta: props.product_selected.unidades_de_venta,\r\n      precios: props.product_selected.precios,\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario\r\n    }\r\n    :\r\n\r\n    {\r\n       _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      precios: props.product_selected.precios,\r\n       medidas_producto: [],\r\n      inventario_general: [{unidad_maxima:''}],\r\n      unidades_de_venta: [],\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario \r\n    }; \r\n    let existe = false;\r\n    let copyProductosTras = productosTras;\r\n    let medidasTo =[];\r\n    //Count all new_medidas from array\r\n\r\n    for (let newMed in newMedidasCopy){ \r\n        cantidad_total +=  newMedidasCopy[newMed].nuevaCantidad;\r\n        //cantidad_total += newMedidasCopy[newMed];\r\n      medidasTo.push(newMedidasCopy[newMed])\r\n    } \r\n\r\n    if(cantidad_total > 0){\r\n    \r\n      if(copyProductosTras.length){//Check have data context\r\n        copyProductosTras.forEach(element => {\r\n          if(element.product_selected._id === props.product_selected._id){\r\n            existe = true;\r\n            ///VA A SUMAR EN LAS MEDIDAS LAS CANTIDADES\r\n            element.new_medidas = medidasTo;\r\n            element.cantidad_total = cantidad_total;\r\n            return;\r\n          }\r\n        });\r\n    \r\n        if(!existe){\r\n          //console.log(\"NO está este producto\", element.product_selected._id , props.product_selected._id );\r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      \r\n        } \r\n      }else{ \r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      }\r\n         \r\n      setProductosTras([...copyProductosTras])  \r\n      setNew_medidas([]);\r\n      close();\r\n    }  \r\n     } catch (error) {\r\n       //console.log('MANDH',error)\r\n     }\r\n    \r\n  }\r\n\r\n  const close= () => {\r\n    try {\r\n      props.setOpenTallas();\r\n      props.setproduct_selected(undefined)\r\n    } catch (error) {\r\n      //console.log(error)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    let new_medidasCopia = [];\r\n\r\n    productosTras.forEach(prod => {\r\n\t\t\r\n\t\tif(prod.product_selected._id ===  props.product_selected._id){\r\n\t\t\tlet element = null;\r\n        for (const med in prod.new_medidas) {\r\n          if (Object.hasOwnProperty.call(prod.new_medidas, med)) {\r\n            element = prod.new_medidas[med];\r\n            new_medidasCopia.push(element)\r\n          }\r\n        }\r\n      }\r\n    })  \r\n    setNew_medidas(new_medidasCopia);\r\n  }, [productosTras, props.product_selected._id])\r\n     \r\n\r\n  return(\r\n    <Dialog open={props.openTallas} TransitionComponent={Transition} fullWidth maxWidth={\"md\"}minHeight={\"md\"} maxHeight={\"md\"}>\r\n        <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => close()} size=\"large\">\r\n                  <CloseIcon />\r\n                </Button>\r\n          </Box>\r\n      {\r\n        (props.almacenOrigen === null) ? \r\n          <div>\r\n            <TallasColoresTraspasos \r\n              obtenerConsultasProducto={props.obtenerConsultasProducto}\r\n              refetch={props.obtenerConsultasProducto.refetch}\r\n              producto={props.product_selected}\r\n              new_medidas={new_medidas} \r\n              setNew_medidas={setNew_medidas}\r\n            />\r\n          </div>\r\n        :\r\n        <div>\r\n        \r\n\r\n          <TableSelectMedidas producto = {props.product_selected} new_medidas={new_medidas} setNew_medidas={setNew_medidas} />\r\n          \r\n        </div> \r\n      }    \r\n      <Box display=\"flex\" justifyContent=\"flex-end\" m={1} mr={5}>\r\n        <Button  variant=\"contained\" color=\"primary\"style={{width:\"20%\"}} onClick={setProd} >\r\n          AGREGAR \r\n        </Button>\r\n      </Box>   \r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const [cantidadTo, setCantidadTo] = useState('');\r\n  const [error, setError] = useState({error:false, mensaje:''});\r\n \r\n  const [ openTallas, setOpenTallas] = useState(false);\r\n  const { product_selected, setproduct_selected, tipoPieza, update } = props;\r\n   const {\r\n        setProductosTras,\r\n        productosTras, \r\n     \r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n\r\n\r\nconst setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === product_selected._id);\r\n   \r\n    if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = cantidad_total + element.cantidad_total\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(product_selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total += cantidad_total;\r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total += cantidad_total;\r\n            \r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total += cantidad_total;\r\n        }\r\n      }else{\r\n        element.cantidad_total = cantidad_total;\r\n      }  \r\n      return;\r\n\r\n\r\n    }else{\r\n      //Cuando sea el caso que no hay almacen de origen cambiar los datos que van a ir vacíos\r\n      //\r\n     \r\n      //console.log(props.product_selected.precios)\r\n      let prodSelect = {\r\n        _id: props.product_selected._id,\r\n        datos_generales:  props.product_selected.datos_generales,\r\n        inventario_general: props.product_selected.inventario_general,\r\n        unidades_de_venta: props.product_selected.unidades_de_venta,\r\n        medidas_producto: props.product_selected.medidas_producto,\r\n      \r\n        precios: props.product_selected.precios,\r\n        empresa:props.product_selected.empresa,\r\n        sucursal:props.product_selected.sucursal,\r\n        usuario: props.product_selected.usuario\r\n      } \r\n    //VERIFICA CANTIDAD MAXIMA\r\n    if(product_selected.inventario_general !== undefined){\r\n      if(cantidad_total <=  product_selected.inventario_general[0].cantidad_existente){\r\n      \r\n        let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n      }\r\n      else{\r\n        setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n      }\r\n    }else{\r\n       let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n    }\r\n    }\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\nconst deleteItem =() =>{\r\n  try {\r\n    \r\n    let prodSet =  [] ;\r\n    \r\n   \r\n    if(productosTras.length){\r\n      prodSet = productosTras;\r\n    }\r\n    \r\n    setproduct_selected(undefined)\r\n    //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n    setProductosTras(prodSet.filter(item => item.product_selected._id !== product_selected._id));\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\nconst editItem =() =>{\r\n  try {\r\n    if(product_selected.datos_generales.tipo_producto !== 'OTROS') {\r\n      setOpenTallas(true);\r\n      //console.log(props)\r\n    }\r\n   \r\n  } catch (error) {\r\n\r\n  }\r\n}\r\nuseEffect(() => {\r\n  try {\r\n    if(props.add){\r\n      setOpenTallas(true)\r\n    }\r\n    setCantidadTo(props.cant)\r\n    \r\n  } catch (error) {\r\n    \r\n  }\r\n  \r\n}, [product_selected])   \r\n  \r\n          \r\n  function onlyNumbers(value){\r\n      const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = parseInt(onlyNums);\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              setCantidadTo(intValue);\r\n              //console.log(intValue)\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= product_selected.inventario_general[0].cantidad_existente){\r\n                setCantidadTo(intValue);\r\n                return;\r\n              }\r\n            }\r\n          }else{\r\n            setCantidadTo(intValue);\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n\r\n\r\n\r\n  const TipoPiezaComponent = () =>{\r\n     try {\r\n      const TIPO_PIEZA = {\r\n        'Pz' :  {unidad_maxima: null, unidad_minima: 'Pz' },\r\n        'Caja' : {unidad_maxima: 'Caja', unidad_minima: 'Pz' },\r\n        'Kg' : {unidad_maxima: null, unidad_minima: 'Kg' },\r\n        'Costal' : {unidad_maxima: 'Costal', unidad_minima: 'Kg' },\r\n        'Lt' : {unidad_maxima: null, unidad_minima: 'Lt' }\r\n      }\r\n      \r\n\r\n    \r\n      return (\r\n        <Box flexDirection={'row'} display=\"flex\">\r\n          <Box flexDirection={'row'}  >\r\n          <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima === null} />\r\n            <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_minima}</Typography> \r\n          </Box>\r\n    \r\n          \r\n        { \r\n          (TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima !== null) ? \r\n            <Box flexDirection={'row'} >\r\n              <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n              <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima} </Typography> \r\n            </Box>\r\n          :\r\n            <div/>\r\n          \r\n          }\r\n      \r\n        </Box>\r\n      );\r\n     } catch (error) {\r\n       \r\n     }\r\n    \r\n    \r\n  }\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: product_selected !== undefined,\r\n      })}\r\n    \r\n    >\r\n    <Grid container>\r\n      {product_selected !== undefined  ? (\r\n        <Box style={{width:'100%'}}>\r\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle2\"  >\r\n            {product_selected.datos_generales.nombre_comercial} \r\n          </Typography>\r\n        </Box>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n          {props.title}\r\n        </Typography>\r\n      )}\r\n\r\n      {(product_selected !== undefined )? (\r\n      <Box > \r\n        {\r\n          (error.error) ?\r\n          <Typography color=\"inherit\">{error.mensaje}</Typography>\r\n          :\r\n          <div/>\r\n        } \r\n            {\r\n            (props.add ) ?\r\n                (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                  <Grid container  justifyContent=\"space-evenly\" ml={1}>\r\n                \r\n                      {\r\n                        (props.almacenOrigen === null)?\r\n                        \r\n                        <TipoPiezaComponent />\r\n                        :\r\n                        <Box flexDirection={'row'} display=\"flex\">\r\n                          <Box flexDirection={'row'}  >\r\n                            <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={props.product_selected.inventario_general[0].cantidad_existente_maxima === null} />\r\n                            <Typography color=\"primary\" style={{marginLeft:10}}>{props.product_selected.inventario_general[0].unidad_inventario}</Typography> \r\n                          </Box>\r\n                          {\r\n                            (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ?\r\n                              <Box flexDirection={'row'} >\r\n                                <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n                                <Typography color=\"primary\" style={{marginLeft:10}}>{\"\" + props.product_selected.inventario_general[0].unidad_maxima} </Typography> \r\n                              </Box>\r\n                            :\r\n                              <div/>\r\n                          }\r\n                        </Box>\r\n                      }\r\n                        \r\n                      <Box width=\"180px\" ml={2}>\r\n                    \r\n                        <Typography color=\"primary\">Cantidad</Typography>\r\n                        <TextField\r\n                            className={classes.inputCantidad}\r\n                            \r\n                            size=\"small\"\r\n                            name=\"cantidad\"\r\n                            variant=\"outlined\"\r\n                            type=\"number\"\r\n                            InputProps={{ inputProps: { min: 0 } }}\r\n                            value={cantidadTo}\r\n                            onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                        />\r\n                      \r\n                        <Tooltip title=\"Agregar\">\r\n                            <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                      {\r\n                        (props.almacenOrigen) ? \r\n                          <Box  width=\"150px\" >\r\n                            {\r\n                              (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ? \r\n                                <Typography color=\"primary\" style={{flexWrap: \"wrap\"}}>\r\n                                  {getUnidadMax(props.product_selected.inventario_general[0].cantidad_existente_maxima,props.product_selected.inventario_general[0].unidad_maxima)}\r\n                                  </Typography>\r\n                              :\r\n                              <div/>\r\n                            }\r\n                          </Box>\r\n                        :\r\n                        <div/>\r\n                      }\r\n                    </Grid>\r\n                   \r\n                  :    \r\n                  <div>\r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                  </div> \r\n                :\r\n                <Grid width={'100%'} container>\r\n                  { (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                    <div>\r\n                     \r\n                      <Typography color=\"primary\">Cantidad</Typography>\r\n                      <TextField\r\n                          className={classes.inputCantidad}\r\n                          size=\"small\"\r\n                          name=\"cantidad\"\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          InputProps={{ inputProps: { min: 0 } }}\r\n                          value={cantidadTo}\r\n                          onChange={(value) => onlyNumbers(value.target.value)}\r\n                          \r\n                      />\r\n                    \r\n                      <Tooltip title=\"Agregar\">\r\n                          <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                              <AddIcon />\r\n                          </IconButton>\r\n                      </Tooltip>\r\n                    </div>\r\n                    :\r\n                    \r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                     \r\n                     \r\n                  }\r\n                  <Box mt={3} >\r\n                  { (product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                     <Tooltip title=\"Editar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => editItem()} >\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Tooltip> \r\n                    :\r\n                    <div/>\r\n                    }\r\n                    <Tooltip title=\"Eliminar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => deleteItem()} >\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                  </Box>  \r\n                </Grid>\r\n            }\r\n                \r\n          \r\n        </Box>\r\n      ) : (\r\n        <div/>\r\n      )}\r\n      </Grid>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//   numSelected: PropTypes.number.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n   \r\n    marginLeft:theme.spacing(1),\r\n    marginRight:theme.spacing(1),\r\n\r\n\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 600,\r\n    maxWidth:600\r\n   \r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [cant, setCant] = useState(0);\r\n  //const [data, setData] = useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n  const [tipoPieza, setTipoPieza] = useState({piezas: true, cajas: false});\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\r\n\r\n  const update = () => {\r\n   setTipoPieza({...tipoPieza, piezas: !tipoPieza.piezas, cajas: !tipoPieza.cajas})\r\n }\r\n \r\n  const {\r\n        productosTras, productosTo,   productosEmpTo\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n  const obtenerConsultasProducto = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = data.map((n) => n.name);\r\n      setSelected(event.target.checked);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n  const data = (!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo  ; \r\n\r\n  const handleClick = (event, elemento, cant) => {\r\n   \r\n     if((elemento.datos_generales.tipo_producto === 'OTROS')){\r\n          \r\n        setCant(props.add ? 0 : cant)\r\n      }\r\n\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === elemento._id;\r\n     \r\n      // let newSelected = [];\r\n      if(selectedIndex){\r\n          setSelected(undefined);\r\n      }else{\r\n          setSelected(elemento);\r\n      } \r\n    }else{\r\n      //console.log(elemento)\r\n      setSelected(elemento);\r\n    }\r\n   \r\n    \r\n  };\r\n    \r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const isSelected = (id) => {\r\n    //return selected.indexOf(name) !== -1;\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === id;\r\n   \r\n      // let newSelected = [];\r\n      if(!selectedIndex){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      } \r\n    }else{\r\n      return false;\r\n    }\r\n    \r\n  } \r\n\r\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n       \r\n        <EnhancedTableToolbar product_selected={selected} setproduct_selected={setSelected} title={props.title} add={props.add} almacenOrigen={props.almacenOrigen} productosTras ={productosTras} tipoPieza={tipoPieza} update={update} cant={cant} obtenerConsultasProducto={(obtenerConsultasProducto.data) ? obtenerConsultasProducto.data.obtenerConsultasProducto :[]}refetch={( obtenerConsultasProducto.refetch ) ? obtenerConsultasProducto.refetch : null}  />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={'large'}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              product_selected={selected}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              handleSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getComparator(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((row, index) => {\r\n                  const isItemSelected = isSelected((props.add) ? row._id: row.product_selected._id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                 \r\n                  if(props.add){\r\n                    \r\n                    if(props.almacenOrigen) {\r\n                 \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell component=\"right\" id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        \r\n                        <TableCell align=\"right\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"right\"> {row.inventario_general[0].cantidad_existente }  {row.inventario_general[0].unidad_inventario} </TableCell>\r\n                        \r\n                        \r\n                      \r\n                      </TableRow>\r\n                    );\r\n                    }else{\r\n                      return(\r\n                        <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell component=\"right\" id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <TableCell align=\"right\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"right\"> N/A</TableCell>\r\n                      </TableRow>\r\n                      );\r\n                    }\r\n                  }else{\r\n                    \r\n                    return(\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, row.product_selected, row.cantidad_total)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={row._id}\r\n                      selected={isItemSelected}\r\n                      \r\n                    >\r\n                      <TableCell component=\"right\" id={labelId} scope=\"row\">\r\n                        {(row.product_selected.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.product_selected.datos_generales.codigo_barras}\r\n                      </TableCell>\r\n                      <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                        {row.product_selected.datos_generales.nombre_comercial}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\"> {row.product_selected.datos_generales.tipo_producto}</TableCell>\r\n                      <TableCell align=\"right\"> {row.cantidad_total}</TableCell> \r\n                     \r\n                    </TableRow>\r\n                    )\r\n                  }\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          labelRowsPerPage={\"\"}\r\n          // onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n       \r\n      </Paper>\r\n      \r\n    </div>\r\n  );\r\n}","import React, { forwardRef, useEffect, useContext, useState,useCallback } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Slide,\r\n         Button, Box, Dialog, Grid, DialogActions, TextField,Divider,\r\n         InputLabel, Select, Input, MenuItem, FormControl, useTheme, OutlinedInput, InputAdornment,\r\n         Stepper, Step, StepLabel, DialogTitle } from '@material-ui/core';\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from \"moment\";\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { FcAdvance } from 'react-icons/fc';\r\nimport almacenIcon from '../../../../icons/almacen.svg';\r\nimport TableSelectProducts from '../../../../components/Traspasos/TableSelectProducts';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN} from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { OBTENER_ALMACENES, REALIZAR_TRASPASO, OBTENER_CATEGORIAS, OBTENER_PRODUCTOS_EMPRESA} from '../../../../gql/Almacenes/Almacen';\r\n\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\n\r\n\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 50\r\n\t},\r\n    imagen: {\r\n        width: 50\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    subtitle: {\r\n\t\tmarginLeft: '10px',\r\n\t\twidth:'100%'\r\n\t},\r\n    boxUpData:{\r\n        height: 80,\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(4),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n    selected2:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    selected:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    input:{\r\n\t\twidth:'100%'\t\r\n\t},\r\n    inputBox:{\r\n\t\tmargin:20,\r\n        marginTop:5,\r\n        marginBottom:10\r\n\t},\r\n    button:{\r\n\t\tmargin: theme.spacing(3),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(0)\r\n\t},\r\n    boxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"14%\",\r\n        maxWidth: \"14%\",\r\n        minHeight: 20,\r\n      \r\n    },\r\n}));\r\n\r\n\r\nfunction getStyles(almacen, almacenName, theme) {\r\n  return {\r\n    fontWeight:\r\n      almacenName.indexOf(almacen) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\nconst transportes = [\r\n    'Barco',\r\n    'Moto',\r\n    'Carro',\r\n    'Camioneta'\r\n];\r\n\r\nfunction createData(name, cantidad, precio, unidad) {\r\n    return { name, cantidad, precio, unidad };\r\n    } \r\n\r\n\r\nconst steps = ['Datos traspaso', 'Seleccionar productos'];\r\n\r\nexport default function Traspasos() {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const {\r\n        setProductos,\r\n        productos,\r\n        setProductosTras,\r\n        setProductosTo,\r\n        setProductosEmpTo,\r\n     \r\n        productosTo,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ open, setOpen ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n    const [ busqueda, setBusqueda ] = useState('');\r\n\r\n    const [ filtro, setFiltro ] = useState({  codigo_barras: '',clave_alterna: '',tipo_producto: '',nombre_comercial: '',\r\n        nombre_generico: '',categoria: '',subcategoria: ''});\r\n\t\r\n    const [ filtroTo, setFiltroTo ] = useState({});\r\n    const [ categoria ] = useState('');\r\n\tconst [ subcategoria ] = useState('');\r\n\tconst [ subcategorias, setSubcategorias ] = useState([]);\r\n    \r\n    const [ haveConcepto, setHaveConcepto ] = useState(false);\r\n    const [ conceptoTraspaso, setConceptoTraspaso ] = useState(null);\r\n    const [ isAlmacenOrigen, setIsAlmacenOrigen ] = useState(false);\r\n    const [ isAlmacenDestino, setIsAlmacenDestino ] = useState(false);\r\n\r\n    const [ almacenOrigen, setAlmacenOrigen ] = useState(null);\r\n    const [ almacenDestino, setAlmacenDestino ] = useState(null);\r\n    const [almacenesDestino, setAlmacenesDestino] =useState([])\r\n    const [ transporte, setTransporte ] = useState('');\r\n    const [ placas, setPlacas ] = useState('');\r\n    const [ nombreQuien, setNombreQuien ] = useState('');\r\n  \r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [skipped, setSkipped] = useState(new Set());\r\n    const [openEnd, setOpenEnd] = useState(false);\r\n \r\n    const [ CrearTraspaso ] = useMutation(REALIZAR_TRASPASO); \r\n\r\n    let conceptos= [];\r\n    let categorias = [];\r\n   \r\n    let almacenes = [];\r\n \r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n\r\n\tconst dataConceptos = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t},\r\n         fetchPolicy: \"network-only\"\r\n\t});\r\n   \r\n    const categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n        fetchPolicy: \"network-only\"\r\n\t});\r\n\r\n    const productosQuery = useQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id, \r\n          sucursal: sesion.sucursal._id,\r\n          almacen: (almacenOrigen ) ? almacenOrigen._id : \"\",\r\n          existencias: true\r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n\r\n    const productosEmpresaQuery = useQuery(\r\n    OBTENER_PRODUCTOS_EMPRESA,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id \r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n    \r\n    const obtenerAlmacenes= () =>{\r\n        try {\r\n            setAlmacenesDestino(queryObtenerAlmacenes.data.obtenerAlmacenes.filter(element => element._id !== almacenOrigen._id));\r\n        } catch (error) {\r\n           console.log(error)\r\n        }   \r\n    };\r\n\r\n    useEffect(() => {\r\n        if(almacenOrigen){\r\n            obtenerAlmacenes();\r\n            obtenerProductosAlmacen();\r\n        }\r\n    }, [almacenOrigen ])\r\n\r\n\r\n    const obtenerProductosEmpresa = useCallback(async() =>{\r\n        try {\r\n            productosEmpresaQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosEmpresaQuery]);\r\n\r\n    const obtenerProductosAlmacen = useCallback(async() =>{\r\n        try {\r\n           productosQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosQuery]);\r\n\r\n    useEffect(() => {\r\n        if(conceptoTraspaso!== null){\r\n            if(conceptoTraspaso.origen === 'N/A'){\r\n                obtenerProductosEmpresa();\r\n            } else{\r\n                obtenerProductosAlmacen();\r\n            }      \r\n        }\r\n    }, [conceptoTraspaso])    \r\n\r\n /*    useEffect(() => {\r\n\t\t\tdataConceptos.refetch();\r\n\t},[ dataConceptos ]);  */\r\n\r\n     useEffect(() => {\r\n        if(conceptoTraspaso !== null){\r\n            if(conceptoTraspaso.destino === 'N/A'){\r\n                if(almacenOrigen !== null){\r\n                    setHaveConcepto(true)\r\n                }else{\r\n                     setHaveConcepto(false)\r\n                }\r\n            \r\n            }else{\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    if(almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }else{\r\n                    if(almacenOrigen !== null && almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }\r\n                \r\n            }    \r\n        }\r\n       \r\n\t},[ conceptoTraspaso, almacenOrigen, almacenDestino, setHaveConcepto ]); \r\n\r\n    \r\n\r\n     \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\t if(productosEmpresaQuery.data){\r\n             \r\n                //setProductos(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n                //console.log(productosEmpresaQuery.data)\r\n                setProductosEmpTo(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n            }\r\n    },[ productosEmpresaQuery.data, setProductosEmpTo ]);  \r\n\r\n\r\n     useEffect(\r\n         \r\n\t\t() => {\r\n\t\t     if(productosQuery.data && productosTo.length === 0){\r\n             \r\n                setProductos(productosQuery.data.obtenerProductos);\r\n                setProductosTo(productosQuery.data.obtenerProductos)\r\n         \r\n                return;\r\n            }\r\n            \r\n\t\t},\r\n\t\t[ productosQuery, setProductos, setProductosTo ]\r\n\t); \r\n    \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ categoriasQuery ]\r\n\t); \r\n  \r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n     const handleChange = (event) => {\r\n        \r\n        setAlmacenOrigen(event.target.value);\r\n       /*  productosQuery.refetch({\r\n            variables: { \r\n            \r\n                almacen: event.target.value._id,\r\n                existencias: true\r\n            },\r\n        }); */\r\n\r\n\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n    const handleChangeDestino = (event) => {\r\n        //console.log(event)\r\n        setAlmacenDestino(event.target.value);\r\n        setProductosTras([]);\r\n    };\r\n\r\n     const handleChangeConcepto = (event) => {\r\n        try {\r\n            \r\n            let concepto = event.target.value;  \r\n            setAlmacenesDestino([]);\r\n            almacenes = [];\r\n            setAlmacenOrigen(null); \r\n            setAlmacenDestino(null);\r\n            if(concepto.origen === 'N/A'){\r\n               \r\n                \r\n                setAlmacenesDestino( queryObtenerAlmacenes.data.obtenerAlmacenes)\r\n            }else{\r\n                  setAlmacenesDestino([])\r\n            }\r\n          \r\n            setIsAlmacenOrigen((concepto.origen === 'N/A') ? false:true);\r\n            setIsAlmacenDestino((concepto.destino === 'N/A') ? false:true);\r\n           \r\n            setConceptoTraspaso(concepto);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    \r\n      const handleChangeTransporte = (event) => {\r\n        setTransporte(event.target.value);\r\n    };\r\n\r\n    const isStepOptional = (step) => {\r\n        return step === 1;\r\n    };\r\n\r\n    const isStepSkipped = (step) => {\r\n        return skipped.has(step);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        /* if(conceptoTraspaso === null ) {setAlert({message:'No es posible continuar sin seleccionar un concepto.', status: 'error', open: true });  return}\r\n        if( isAlmacenOrigen && almacenOrigen === null)  {setAlert({message:'No es posible continuar sin seleccionar un almacén origen.', status: 'error', open: true });  return }   \r\n        if(isAlmacenDestino && almacenDestino === null) { setAlert({message:'No es posible continuar sin seleccionar un almacén destino.', status: 'error', open: true }); return}    */\r\n        \r\n        let newSkipped = skipped;\r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped(newSkipped);\r\n        \r\n    };\r\n\r\n    const handleBack = () => {\r\n        \r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleSkip = () => {\r\n        if (!isStepOptional(activeStep)) {\r\n        // You probably want to guard against something like this,\r\n        // it should never occur unless someone's actively trying to break something.\r\n        throw new Error(\"You can't skip a step that isn't optional.\");\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped((prevSkipped) => {\r\n        const newSkipped = new Set(prevSkipped.values());\r\n        newSkipped.add(activeStep);\r\n        return newSkipped;\r\n        });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setActiveStep(0);\r\n    };\r\n\r\n    const setValToFilter = (label,value) => {\r\n\t\ttry {\r\n\t\t\tif(label === 'categoria' && value !== ''){\r\n\t\t\t\tconst cat = categorias.find(element => element.categoria === value);\r\n\t\t\t\tsetSubcategorias(cat.subcategorias)\r\n\t\t\t}\r\n\t\t\tsetFiltro({...filtro, [label] : value});\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n    };\r\n\r\n    if(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}\r\n   \r\n    if(dataConceptos.data){\r\n\t\tconceptos = dataConceptos.data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n\r\n  \r\n    const obtenerSelectsProducto = (producto) => {\r\n        \r\n        if(producto !== null){\r\n            setProductosTo([producto])\r\n        }else{\r\n            setProductosTo(productos) \r\n        }\r\n    };\r\n\r\n\r\n    const handleModal = () => {\r\n        setOpenEnd(!openEnd)\r\n    }\r\n\r\n    const traspasar = async () => {\r\n        try {\r\n          \r\n            if(productosTras.length){\r\n               setOpenEnd(false)\r\n               setLoading(true)\r\n                //let productTrasTo = productosTras;\r\n             const input =  {\r\n                variables: {\r\n                    input: {\r\n                        concepto_traspaso: {\r\n                            _id: conceptoTraspaso._id, \r\n                            nombre_concepto: conceptoTraspaso.nombre_concepto,\r\n                            destino: conceptoTraspaso.destino,\r\n                            origen: conceptoTraspaso.origen,\r\n                            editable: conceptoTraspaso.editable,\r\n                        },\r\n                        almacen_origen: (almacenOrigen !== null) ? almacenOrigen._id : '',\r\n                        almacen_destino: (almacenDestino !== null) ? almacenDestino._id : '',\r\n                        productos: productosTras,\r\n                        datos_transporte :{\r\n                            transporte: transporte,\r\n                            placas: placas,\r\n                            nombre_encargado: nombreQuien\r\n                        },\r\n                        sucursalOrigen: sesion.sucursal._id,\r\n                        sucursalDestino: sesion.sucursal._id,\r\n                        fecha_registro: moment().locale(\"es-mx\").format()\r\n                    },\r\n                    usuario: sesion._id,\r\n                    empresa: sesion.empresa._id\r\n                }\r\n            }  \r\n             \r\n             const traspaso =    await CrearTraspaso(input) \r\n           \r\n                //console.log(traspaso)\r\n                setAlert({message: traspaso.data.crearTraspaso.message, status: traspaso.data.crearTraspaso.resp, open: true })\r\n                if(traspaso.data.crearTraspaso.resp !== 'error'){\r\n                    setProductosTras([]);\r\n                    setAlmacenOrigen(null);\r\n                    setAlmacenDestino(null);\r\n                    setConceptoTraspaso(null);\r\n                    handleBack();\r\n                }\r\n                \r\n            }else{\r\n                \r\n                setAlert({message:'No es posible realizar un traspaso sin agregar productos.', status: 'error', open: true })\r\n           \r\n            }\r\n            \r\n           \r\n           \r\n            setLoading(false);\r\n        } catch (error) {\r\n             setLoading(false);\r\n             setOpenEnd(false)\r\n           if(error.networkError !== undefined){\r\n\t\t\t  console.log('traspaso networkError', error.networkError)\r\n            }else if(error.graphQLErrors!== undefined){\r\n                console.log('traspaso graphQLErrors', error.graphQLErrors)\r\n            }else{\r\n             \r\n              \r\n            }\r\n             setAlert({message: 'Ocurrió un error al realizar el traspaso...', status: 'error', open: true })\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <Box sx={{ width: '100%' }}>\r\n        \r\n            <Button fullWidth onClick={handleClickOpen}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcAdvance className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n                    <Grid container spacing={10} justify=\"center\" >\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen}/>\r\n                                    </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen} />\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    Traspasos\r\n                </Box>\r\n\t\t\t\t\t\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <AppBar className={classes.appBar}>\r\n               \r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Traspasos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n                            <Button autoFocus color=\"inherit\" size=\"large\" onClick={handleClose}>\r\n                                Cerrar\r\n                            </Button>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Box style={{ width: '50%',alignSelf:'center' }}>\r\n                  \r\n                    <Stepper activeStep={activeStep}>\r\n                        {steps.map((label, index) => {\r\n                        const stepProps = {};\r\n                        const labelProps = {};\r\n                    \r\n                        if (isStepSkipped(index)) {\r\n                            stepProps.completed = false;\r\n                        }\r\n                        return (\r\n                            <Step key={label} {...stepProps}>\r\n                            <StepLabel {...labelProps}>{label}</StepLabel>\r\n                            </Step>\r\n                        );\r\n                        })}\r\n                    </Stepper>\r\n                </Box>\r\n                \r\n                <Box style={{ width: '98%',alignSelf:'center', alignContent:'center' }}>\r\n                    \r\n                    {\r\n                        (activeStep === 0) ? \r\n                            <Grid container>\r\n                                <Box style={{width:'100%'}} >\r\n                                    <Typography className={classes.subtitle}  >\r\n                                        <b>Datos traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                    <Grid container  justifyContent=\"space-evenly\" >\r\n                                        {/* <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"almacen-origen-label\">Unidad de traspaso</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"almacen-origen-label\"\r\n                                            id=\"almacen-origen-name\"\r\n                                            value={almacenOrigen}\r\n                                            onChange={handleChange}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {almacenes.map((almacen) => (\r\n                                                <MenuItem key={almacen} value={almacen} style={getStyles(almacen, almacenOrigen, theme)}>\r\n                                                {almacen}\r\n                                                </MenuItem>\r\n                                            ))}\r\n                                            </Select>\r\n                                        </FormControl> */}\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"concepto-label\">Concepto traspaso</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"concepto-label\"\r\n                                            id=\"concepto-name\"\r\n                                            value={(conceptoTraspaso) ? conceptoTraspaso : \"\"}\r\n                                            onChange={handleChangeConcepto}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {conceptos.map((concepto) => {\r\n                                             \r\n                                                return(\r\n                                                <MenuItem key={concepto._id} value={concepto} >\r\n                                                    {concepto.nombre_concepto}\r\n                                                </MenuItem>\r\n                                                )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                        {\r\n                                        (conceptoTraspaso !== null) ? \r\n                                        <div>\r\n                                        {   \r\n                                         \r\n                                            (isAlmacenOrigen) ? \r\n                                                <FormControl className={classes.formControl}>\r\n                                                    <InputLabel id=\"almacen-origen-label\">Almacén origen</InputLabel>\r\n                                                    <Select\r\n                                                    labelId=\"almacen-origen-label\"\r\n                                                    id=\"almacen-origen-name\"\r\n                                                    value={(almacenOrigen) ? almacenOrigen : \"\"}\r\n                                                    onChange={handleChange}\r\n                                                    input={<Input />}\r\n                                                    MenuProps={MenuProps}\r\n                                                    >\r\n                                                    {almacenes.map((almacen) => (\r\n                                                        <MenuItem key={almacen._id} value={almacen}>\r\n                                                            {almacen.nombre_almacen}\r\n                                                        </MenuItem>\r\n                                                    ))}\r\n                                                    </Select>\r\n                                                </FormControl>\r\n                                            :\r\n                                            <div/>\r\n                                        }\r\n                                        \r\n                                          {\r\n                                            (isAlmacenDestino) ? \r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"almacen-destino-label\">Almacén destino</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"almacen-destino-label\"\r\n                                                id=\"almacen-destino-name\"\r\n                                                value={(almacenDestino) ? almacenDestino : \"\"}\r\n\r\n                                                onChange={handleChangeDestino}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {almacenesDestino.map((almacen) => (\r\n                                                    <MenuItem key={almacen._id} value={almacen} >\r\n                                                    {almacen.nombre_almacen}\r\n                                                    </MenuItem>\r\n                                                ))}\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                            :\r\n                                            <div/>\r\n                                        }\r\n                                    </div>    \r\n                                    :\r\n                                    <div/>\r\n                                    }    \r\n                                    </Grid>\r\n                                </Box>\r\n                                <Box style={{width:'100%'}} mt={5} mb={5} >\r\n                                    <Typography className={classes.subtitle}>\r\n                                        <b>Datos transporte traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                    <Grid container >\r\n                                        <FormControl className={classes.formControl}>\r\n                                            \r\n                                                <InputLabel id=\"transporte-label\">Transporte</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"transporte-label\"\r\n                                                id=\"transporte-name\"\r\n                                                value={transporte}\r\n                                                onChange={handleChangeTransporte}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {transportes.map((trans) => (\r\n                                                    <MenuItem key={trans} value={trans} style={getStyles(trans, transporte, theme)}>\r\n                                                    {trans}\r\n                                                    </MenuItem>\r\n                                                ))}\r\n                                                </Select>\r\n                                            \r\n                                        </FormControl>\r\n                                        <FormControl>\r\n                                            <Box width=\"300px\" ml={4} mt={2}>\r\n                                                <Typography>\r\n                                                    Placas\r\n                                                </Typography>\r\n                                                <TextField\r\n                                                    fullWidth\r\n                                                    className={classes.input}\r\n                                                    type=\"text\"\r\n                                                    size=\"small\"\r\n                                                    name=\"placas\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={placas}\r\n                                                    \r\n                                                    onChange={(e) => setPlacas(e.target.value)}\r\n                                                />\r\n                                            </Box>\r\n                                            </FormControl>\r\n                                            <Box width=\"300px\"  ml={7} mt={2}>\r\n                                                <Typography>\r\n                                                    Nombre de encargado de transporte\r\n                                                </Typography>\r\n                                                <TextField\r\n                                                    fullWidth\r\n                                                    className={classes.input}\r\n                                                    type=\"text\"\r\n                                                    size=\"small\"\r\n                                                    name=\"nombreQuien\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={nombreQuien}\r\n                                                    \r\n                                                    onChange={(e) => setNombreQuien(e.target.value)}\r\n                                                />\r\n                                            </Box>\r\n                                    </Grid>\r\n                                </Box>\r\n                               \r\n                            </Grid>\r\n                        :\r\n                         \r\n                        <Box>\r\n                       \r\n                            \r\n                            <Box style={{width:'100%'}} ml={1} >\r\n                                 \r\n                               \r\n                                <Typography className={classes.subtitle}>\r\n                                    <b>Buscar producto</b>\r\n                                </Typography>\r\n                                <Grid  container direction=\"row\" >\r\n                                    <Grid item className={classes.inputBox}>\r\n                                        <Typography>Código de barras</Typography>\r\n                                        <Box width={200}>\r\n                                            <Autocomplete\r\n                                            id=\"combo-box-producto-codigo\"\r\n                                            size=\"small\"\r\n                                            fullWidth\r\n                                            options={productos}\r\n                                            getOptionLabel={(option) =>\r\n                                                option.datos_generales.codigo_barras\r\n                                                ? option.datos_generales.codigo_barras\r\n                                                : \"N/A\"\r\n                                            }\r\n                                            renderInput={(params) => (\r\n                                                <TextField {...params} variant=\"outlined\" />\r\n                                            )}\r\n                                            onChange={(_, value) => obtenerSelectsProducto(value)}\r\n                                            getOptionSelected={(option) =>\r\n                                                option.datos_generales.codigo_barras\r\n                                            }\r\n\r\n                                         \r\n                                            />\r\n                                        </Box>    \r\n                                    </Grid>\r\n                               \r\n                                    <Grid item className={classes.inputBox}>\r\n                                        <Typography>Clave alterna</Typography>\r\n                                        <Box width={200}>\r\n                                            <Autocomplete\r\n                                            id=\"combo-box-producto-clave\"\r\n                                            size=\"small\"\r\n                                            fullWidth\r\n                                            options={productos}\r\n                                            getOptionLabel={(option) =>\r\n                                                option.datos_generales.clave_alterna\r\n                                                ? option.datos_generales.clave_alterna\r\n                                                : \"N/A\"\r\n                                            }\r\n                                            renderInput={(params) => (\r\n                                                <TextField {...params} variant=\"outlined\" />\r\n                                            )}\r\n                                            onChange={(_, value) => obtenerSelectsProducto(value)}\r\n                                            getOptionSelected={(option) =>\r\n                                                option.datos_generales.clave_alterna\r\n                                            }\r\n                                            />\r\n                                        </Box>    \r\n                                    </Grid>\r\n\r\n                                    <Grid item className={classes.inputBox}>\r\n                                        <Typography>Nombre comercial</Typography>\r\n                                        <Box width={200}>\r\n                                            <Autocomplete\r\n                                            id=\"combo-box-producto-nombre-comercial\"\r\n                                            size=\"small\"\r\n                                            fullWidth\r\n                                            options={productos}\r\n                                            getOptionLabel={(option) =>\r\n                                                option.datos_generales.nombre_comercial\r\n                                                ? option.datos_generales.nombre_comercial\r\n                                                : \"N/A\"\r\n                                            }\r\n                                            renderInput={(params) => (\r\n                                                <TextField {...params} variant=\"outlined\" />\r\n                                            )}\r\n                                            onChange={(_, value) => obtenerSelectsProducto(value)}\r\n                                            getOptionSelected={(option) =>\r\n                                                option.datos_generales.nombre_comercial\r\n                                            }\r\n                                            />\r\n                                        </Box>    \r\n                                    </Grid>\r\n                                    <Grid item className={classes.inputBox}>\r\n                                        <Typography>Nombre génerico</Typography>\r\n                                        <Box width={200}>\r\n                                            <Autocomplete\r\n                                            id=\"combo-box-producto-nombre-generico\"\r\n                                            size=\"small\"\r\n                                            fullWidth\r\n                                            options={productos}\r\n                                            getOptionLabel={(option) =>\r\n                                                option.datos_generales.nombre_generico\r\n                                                ? option.datos_generales.nombre_generico\r\n                                                : \"N/A\"\r\n                                            }\r\n                                            renderInput={(params) => (\r\n                                                <TextField {...params} variant=\"outlined\" />\r\n                                            )}\r\n                                            onChange={(_, value) => obtenerSelectsProducto(value)}\r\n                                            getOptionSelected={(option) =>\r\n                                                option.datos_generales.nombre_generico\r\n                                            }\r\n                                            />\r\n                                        </Box>    \r\n                                    </Grid>\r\n{/*                                     <FormControl className={classes.boxControl} >\r\n                                    \r\n                                        <InputLabel id=\"tipo-label\"  >Tipo</InputLabel>\r\n                                        <Select\r\n                                        labelId=\"tipo-label\"\r\n                                        id=\"tipo_producto\"\r\n                                        value={filtro.tipo_producto}\r\n                                        onChange={(e) => setValToFilter('tipo_producto', e.target.value )}\r\n                                        input={<Input />}\r\n                                        MenuProps={MenuProps}\r\n                                        >\r\n                                            <MenuItem value=\"\">\r\n                                                <em>Selecciona uno</em>\r\n                                            </MenuItem>\r\n                                            <MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n                                            <MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n                                            <MenuItem value=\"OTROS\">Otros</MenuItem>\r\n                                        </Select>\r\n                                        \r\n                                    </FormControl>\r\n                                    <FormControl className={classes.boxControl} >\r\n                                    \r\n                                        <InputLabel id=\"categoria-label\"  >Categoría</InputLabel>\r\n                                        <Select\r\n                                        labelId=\"categoria-label\"\r\n                                        id=\"categoria\"\r\n                                        value={filtro.categoria}\r\n                                        onChange={(e) => setValToFilter('categoria', e.target.value )}\r\n                                        input={<Input />}\r\n                                        MenuProps={MenuProps}\r\n                                        >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona una</em>\r\n                                        </MenuItem>\r\n                                        {categorias.map((cat) => (\r\n                                            <MenuItem key={cat._id} value={cat.categoria}  style={getStyles(cat._id, categoria, theme)}>\r\n                                            {cat.categoria}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                        </Select>\r\n                                        \r\n                                    </FormControl>\r\n                                    <FormControl className={classes.boxControl} >\r\n                                    \r\n                                        <InputLabel id=\"subcategoria-label\"  >Subcategoría</InputLabel>\r\n                                        <Select\r\n                                        labelId=\"subcategoria-label\"\r\n                                        id=\"subcategoria\"\r\n                                        value={filtro.subcategoria}\r\n                                        onChange={(e) => setValToFilter('subcategoria', e.target.value )}\r\n                                        input={<Input />}\r\n                                        MenuProps={MenuProps}\r\n                                        >\r\n                                        <MenuItem value=\"\">\r\n                                                <em>Selecciona una</em>\r\n                                            </MenuItem>\r\n                                        {subcategorias.map((subcat) => (\r\n                                            <MenuItem key={subcat._id} value={subcat.subcategoria} style={getStyles(subcat._id, subcategoria, theme)}>\r\n                                            {subcat.subcategoria}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                        </Select>\r\n                                        \r\n                                    </FormControl>\r\n                                \r\n                                    <Button  variant=\"contained\" color=\"primary\" className={classes.button} style={{width:\"20%\"}} >\r\n                                        Buscar \r\n                                    </Button> */}\r\n                                </Grid> \r\n                          \r\n                                <Box  mt={2}>\r\n                                    <Grid container spacing={2} style={{width:'100%'}}>\r\n                                         <Grid item md={6}>\r\n                                        {\r\n                                            (isAlmacenOrigen) ? \r\n                                           \r\n                                            <TableSelectProducts title='Productos' add={true} almacenOrigen={almacenOrigen} />\r\n                                            :\r\n                                             <TableSelectProducts title='Productos' add={true} almacenOrigen={null} />   \r\n                                        }\r\n                                        </Grid>\r\n                                        <Grid item md={6}>\r\n                                            <TableSelectProducts title='Productos a traspasar' add={false} almacenOrigen={almacenOrigen}  />\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </Box>\r\n                                     \r\n                            \r\n                            </Box>\r\n                          \r\n                    </Box>\r\n                    }\r\n\r\n\r\n\r\n\r\n                        <Box style={{ display: 'flex', flexDirection: 'row', pt: 2 }} >\r\n                            <Button\r\n                            color=\"inherit\"\r\n                            disabled={activeStep === 0}\r\n                            onClick={handleBack}\r\n                            sx={{ mr: 1 }}\r\n                            >\r\n                            Atrás\r\n                            </Button>\r\n                            <Box style={{ flex: '1 1 auto' }} />\r\n                            {/*     {isStepOptional(activeStep) && (\r\n                                <Button color=\"inherit\" onClick={handleSkip} sx={{ mr: 1 }}>\r\n                                    Skip\r\n                                </Button>\r\n                                )} */}\r\n                            \r\n                                <Button disabled={!haveConcepto} onClick={() => (activeStep < steps.length -1) ? handleNext() : handleModal()}>\r\n                                    {activeStep < steps.length -1   ? 'Siguiente' : 'Terminar'}\r\n                                </Button>\r\n                        \r\n                        </Box>\r\n                  \r\n                </Box>\r\n                \r\n                <Dialog open={openEnd} onClose={handleModal}>\r\n                    <DialogTitle>{'¿Está seguro de realizar este traspaso?'}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => handleModal()} color=\"primary\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => traspasar()}>\r\n                            Traspasar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n               \r\n\t        <SnackBarMessages alert={alert} setAlert={setAlert} />  \r\n            \r\n\t\t\t</Dialog>\r\n            \r\n               \r\n        </Box>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\n\r\nimport ReactExport from 'react-export-excel'; //LIBRERIA EXCEL\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Grid, Button } from '@material-ui/core';\r\nconst ExcelFile = ReactExport.ExcelFile; //ARCHIVO DE EXCEL\r\nconst ExcelSheet = ReactExport.ExcelSheet; //HOJA DE EXCEL\r\nconst ExcelColumn = ReactExport.ExcelColumn; //COLUMNA DE EXCEL\r\n\r\n//Este componente requiere el ArrayData, ArrayColumn, fileName\r\nfunction ExportarExcel(props) {\r\n\treturn (\r\n\t\t<Fragment>\r\n            <Grid>\r\n                <Grid item>\r\n                <ExcelFile\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Button size=\"large\" color=\"primary\" variant=\"contained\" startIcon={<DescriptionOutlinedIcon />}>\r\n\t\t\t\t\t\t\tExportar Excel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilename={props.fileName}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ExcelSheet data={props.data} name={props.fileName}>\r\n                        {props.columnName.map((element) => {\r\n                            return(\r\n                                <ExcelColumn label={element.label} value={element.id} />\r\n                            )\r\n                        }\r\n                        )}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ExcelSheet>\r\n\t\t\t\t</ExcelFile>\r\n                </Grid>\r\n            </Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(ExportarExcel);","import React, {useEffect} from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, CircularProgress } from '@material-ui/core/';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\nimport ExportarExcel from '../../../../components/ExportExcel'\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '70vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t// const almacenesColumnas = [];\r\n\t// const productosRows = [];\r\n\t\t/* Queries */\r\n\tconst { loading, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n    const dataExcel = [];\r\n\tconst columns = [\r\n\t\t{ id: 'codigo_barras', label: 'Código de barras', minWidth: 60 , widthPx: 160, },\r\n\t\t//{ id: 'claveAlt', label: 'Clave alterna', minWidth: 100 },\r\n\t\t//{ id: 'tipoProd', label: 'Tipo producto', minWidth: 100 },\r\n\t\t{ id: 'nombre_comercial', label: 'Nombre comercial', minWidth: 170, widthPx: 160, },\r\n\t\t//{ id: 'nombregen', label: 'Nombre génerico', minWidth: 170 },\r\n\t\t//{ id: 'categoria', label: 'Categoría', minWidth: 100 },\r\n\t\t//{ id: 'subCategoria', label: 'Sub Categoría', minWidth: 100 },\r\n\t\t//{ id: 'marca', label: 'Marca', minWidth: 100 },\r\n\t\t//{ id: 'recetaFarm', label: 'Receta farmacia ', minWidth: 100 }\r\n\t];\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\t\r\n\tif(props.obtenerAlmacenes){\r\n\t\t// let existencias= []; \r\n\t\tprops.obtenerAlmacenes.forEach(element => {\r\n\t\t\tcolumns.push({ id: element._id, label: element.nombre_almacen, minWidth: 60, widthPx: 160,})\r\n\t\t\t\r\n\t\t}); \r\n\t\tcolumns.push({ id: 'total', label: 'Total existencias', minWidth: 60, widthPx: 160,})\r\n\t}\r\n\t\r\n\tconst Rowrow = ({producto}) => {\r\n\t\tlet arrayCantidades=[];\r\n\t\tlet row={'codigo_barras' : producto.datos_generales.codigo_barras, \"nombre_comercial\":producto.datos_generales.nombre_comercial, style: {\r\n                     font: { sz: '12' },\r\n                     alignment: { wrapText: true, horizontal: 'center', vertical: 'top' },\r\n                     border: { bottom: { style: 'thin', color: { rgb: '000000' } } \r\n                    }}};\r\n\t\tlet total=0;\r\n\t\r\n\t\tprops.obtenerAlmacenes.forEach((almacenColumna) => {\r\n\t\t\tconst existencias =\tproducto.existencia_almacenes.filter((existencia) => existencia._id.almacen._id === almacenColumna._id)\r\n\t\t\tif(existencias.length > 0){\r\n\t\t\t\tarrayCantidades.push(existencias[0].cantidad_existente)\r\n\t\t\t\trow = {...row, [almacenColumna._id]: existencias[0].cantidad_existente };\r\n\t\t\t\ttotal += existencias[0].cantidad_existente;\r\n\t\t\t}else{\r\n\t\t\t\tarrayCantidades.push(0);\r\n\t\t\t\trow = {...row, [almacenColumna._id]:0 };\t\r\n\t\t\t}\r\n\t\t});\t \r\n\t\trow = {...row, total:total };\t\r\n\t\t\r\n\t\tdataExcel.push(row)\r\n\t\treturn(\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={producto._id} >\r\n\t\t\t\t<TableCell style={{minWidth:60}} >{producto.datos_generales.codigo_barras}</TableCell>\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t<TableCell style={{minWidth:170}} >{producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t{/* <TableCell style={{textAlign: 'center',}} >{(producto.datos_generales.receta_farmacia) ? \"SI\" : \"NO\"}</TableCell> */}\r\n\t\t\t\t{ \r\n\t\t\t\t\tarrayCantidades.map((cantidad, index) => {\r\n\t\t\t\t\t\treturn(<TableCell key={index} style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black',fontSize:17, textAlign:'center',minWidth:60 }}>{cantidad}</TableCell>)\t\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}\r\n\t\t\t\t<TableCell  style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black', fontSize:18,fontWeight:'bold', textAlign:'center' ,minWidth:60}}>{total}</TableCell>\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader aria-label=\"sticky table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column, index) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{textAlign:(index > 1)? 'center': 'left', minWidth: column.minWidth, width: column.minWidth}}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\t\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{props.productos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Rowrow producto={row} key={index} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={props.productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\tlabelRowsPerPage={\"Renglones por página\"}\r\n\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t\t{(props.productos.length > 0) ?\r\n\t\t\t<Box m={2} alignContent=\"flex-end\">\r\n\t\t\t\t<ExportarExcel fileName=\"Inventarios almacen\" data={dataExcel} columnName={columns} />\r\n\t\t\t</Box>\r\n\t\t\t:\r\n\t\t\t<div/>\r\n\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { forwardRef } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Select,useTheme,FormControl,\r\nSlide, Button, Box, Dialog,Input, TextField, Grid, InputLabel, MenuItem,CircularProgress} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useQuery } from '@apollo/client';\r\nimport {Close} from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos'\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\nimport { useDebounce } from 'use-debounce';\r\nimport { OBTENER_PRODUCTOS_ALMACEN, OBTENER_CATEGORIAS,OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\tboxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n    },\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\timagen: {\r\n\t\twidth: 100\r\n\t},\r\n\tinputBox:{\r\n\t\tmargin:20\r\n\t},\r\n\tbutton:{\r\n\t\tmargin: theme.spacing(3),\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nfunction getStyles(tipo, tipoName, theme) {\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function InventariosPorAlmacen() {\r\n    const classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\t\r\n\t\r\n\r\n    return (\r\n        <div>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src={'https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg'} alt=\"icono almacen\" className={classes.imagen}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tInventario por almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<InventarioPorAlmacen open={open} handleClose={handleClose} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst InventarioPorAlmacen = (props) =>{\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [ loading, setLoading ] = React.useState(true);\r\n\t  \r\n\tconst [ filtro, setFiltro ] = React.useState({  codigo_barras: '',clave_alterna: '',tipo_producto: '',nombre_comercial: '',\r\n        nombre_generico: '',categoria: '',subcategoria: ''});\r\n\t\t\r\n\tconst [ filtroTo, setFiltroTo ] = React.useState({});\r\n\r\n\t// const [ almacen, setAlmacen ] = React.useState('');\r\n\tconst [ categoria ] = React.useState('');\r\n\tconst [ subcategoria ] = React.useState('');\r\n\tconst [ categoriaTo, setCategoriaTo ] = React.useState('');\r\n\tconst [ subcategoriaTo, setSubCategoriaTo ] = React.useState('');\r\n\tconst [ subcategorias, setSubcategorias ] = React.useState([]);\r\n\tconst [value] = useDebounce(filtro, 1000);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tlet productos = [];\r\n\t// let tipos = ['ROPA','CALZADO','OTROS'];\r\n\tlet categorias = [];\r\n\t\r\n\tlet obtenerAlmacenes = [];\r\n\t \t/* Queries */\r\n\t//const {  data, error, refetch } = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n    const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tconst queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\tReact.useEffect(\r\n\t\t() => {\r\n\r\n\t\t\tsetFiltroTo(value)\r\n\t\t},\r\n\t\t[ value ]\r\n\t);\r\n\r\n\tReact.useEffect(\r\n\t\t() => {\r\n\t\t\r\n\t\t\tproductosAlmacenQuery.refetch();\r\n\t\t},\r\n\t\t[ filtroTo, productosAlmacenQuery ]\r\n\t);\r\n\tReact.useEffect(\r\n\t\t() => {\r\n\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.update, queryObtenerAlmacenes ]\r\n\t);\r\n\r\n\tReact.useEffect(\r\n\t\t() => {\r\n\t\t\r\n\t\t\tproductosAlmacenQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ productosAlmacenQuery ]\r\n\t);\r\n\r\n\tReact.useEffect(\r\n\t\t() => {\r\n\t\t\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\t\r\n\t\t},\r\n\t\t[ categoriasQuery.refetch ]\r\n\t); \r\n\r\n\r\n\tif(productosAlmacenQuery.data){\r\n\t\tproductos = productosAlmacenQuery.data.obtenerProductosAlmacenes;\r\n\t}\r\n\tif(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}\r\n\t\r\n\tif(queryObtenerAlmacenes.data){\r\n\t\tobtenerAlmacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n\t}\r\n\t\r\n\t const setValToFilter = (label,value) => {\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\r\n\t\t\tif(label === 'categoria' && value !== ''){\r\n\t\t\t\tconst cat = categorias.find(element => element.categoria === value);\r\n\t\t\t\tsetSubcategorias(cat.subcategorias)\r\n\t\t\t}\r\n\r\n\t\t\tif(label === 'categoria' ){\r\n\t\t\t\t\r\n\t\t\t\tlet fil = {...filtro, subcategoria : subcategoriaTo, categoria:value}\r\n\t\t\t\r\n\t\t\t\tproductosAlmacenQuery.refetch(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfiltro: fil\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\tsetCategoriaTo((value !== '') ? value : '')\r\n\t\t\t\tsetSubCategoriaTo('');\r\n\t\t\t} \r\n\t\t\tif(label === 'subcategoria'&& value !== '' ){\r\n\t\t\t\r\n\t\t\t\tproductosAlmacenQuery.refetch(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfiltro: {...filtro, subcategoria : value, categoria:categoriaTo}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\tsetSubCategoriaTo((value !== '') ? value : '')\r\n\t\t\t}\r\n\t\t\tif(label !== 'categoria' && label !== 'subcategoria' ){\r\n\t\t\t\tsetFiltro({...filtro, [label] : value, subcategoria : subcategoriaTo, categoria:categoriaTo});\r\n\t\t\t}\r\n\t\t\t//setLoading(false)\t\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n    };\r\n\treturn(\r\n\t\t<Dialog fullScreen open={props.open} onClose={props.handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Almacenes\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={props.handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={props.handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container direction=\"row\">\r\n                        <Box width=\"20%\" className={classes.inputBox} >\r\n                            <Typography>Código de barras</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    /* error */\r\n                                    name=\"codigo_barras\"\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                    /* helperText=\"Incorrect entry.\" */\r\n                                    onChange={(e) =>  setValToFilter('codigo_barras', e.target.value)}\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box width=\"20%\" className={classes.inputBox} >\r\n                            <Typography>Clave alterna</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    /* error */\r\n                                    name=\"clave_alterna\"\r\n                                    id=\"form-producto-clave-alterna\"\r\n                                    variant=\"outlined\"\r\n                                    /* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>  setValToFilter('clave_alterna', e.target.value)}\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        \r\n                        <Box width=\"20%\" className={classes.inputBox} >\r\n                            <Typography>Nombre comercial</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    /* error */\r\n                                    name=\"clave_alterna\"\r\n                                    id=\"form-producto-clave-alterna\"\r\n                                    variant=\"outlined\"\r\n                                    /* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>  setValToFilter('nombre_comercial', e.target.value)}\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box width=\"20%\" className={classes.inputBox} >\r\n                            <Typography>Nombre génerico</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    /* error */\r\n                                    name=\"nombre_generico\"\r\n                                    id=\"form-producto-nombre-generico\"\r\n                                    variant=\"outlined\"\r\n                                    /* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>  setValToFilter('nombre_generico', e.target.value)}\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <FormControl className={classes.boxControl} >\r\n                        \r\n                            <InputLabel id=\"tipo-label\"  >Tipo</InputLabel>\r\n                            <Select\r\n                            labelId=\"tipo-label\"\r\n                            id=\"tipo_producto\"\r\n                            value={filtro.tipo_producto}\r\n                            onChange={(e) => setValToFilter('tipo_producto', e.target.value )}\r\n                            input={<Input />}\r\n                            MenuProps={MenuProps}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n                                <MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n                                <MenuItem value=\"OTROS\">Otros</MenuItem>\r\n                            </Select>\r\n                            \r\n                        </FormControl>\r\n                        <FormControl className={classes.boxControl} >\r\n                        \r\n                            <InputLabel id=\"categoria-label\"  >Categoría</InputLabel>\r\n                            <Select\r\n                            labelId=\"categoria-label\"\r\n                            id=\"categoria\"\r\n                            value={categoriaTo}\r\n                            onChange={(e) => setValToFilter('categoria', e.target.value )}\r\n                            input={<Input />}\r\n                            MenuProps={MenuProps}\r\n                            >\r\n\t\t\t\t\t\t\t <MenuItem value=\"\">\r\n                                <em>Selecciona una</em>\r\n                            </MenuItem>\r\n                            {categorias.map((cat) => (\r\n                                <MenuItem key={cat._id} value={cat.categoria}  style={getStyles(cat._id, categoria, theme)}>\r\n                                {cat.categoria}\r\n                                </MenuItem>\r\n                            ))}\r\n                            </Select>\r\n                            \r\n                        </FormControl>\r\n\t\t\t\t\t\t<FormControl className={classes.boxControl} >\r\n                        \r\n                            <InputLabel id=\"subcategoria-label\"  >Subcategoría</InputLabel>\r\n                            <Select\r\n                            labelId=\"subcategoria-label\"\r\n                            id=\"subcategoria\"\r\n                            value={subcategoriaTo}\r\n                            onChange={(e) => setValToFilter('subcategoria', e.target.value )}\r\n                            input={<Input />}\r\n                            MenuProps={MenuProps}\r\n                            >\r\n\t\t\t\t\t\t\t <MenuItem value=\"\">\r\n                                    <em>Selecciona una</em>\r\n                                </MenuItem>\r\n                            {subcategorias.map((subcat) => (\r\n                                <MenuItem key={subcat._id} value={subcat.subcategoria} style={getStyles(subcat._id, subcategoria, theme)}>\r\n                                {subcat.subcategoria}\r\n                                </MenuItem>\r\n                            ))}\r\n                            </Select>\r\n                            \r\n                        </FormControl>\r\n                    \r\n                      {/*   <Button  variant=\"contained\" color=\"primary\" className={classes.button} style={{width:\"20%\"}} >\r\n                            Buscar producto\r\n                        </Button> */}\r\n                    </Grid> \r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t(loading) ?\r\n\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t: \r\n\t\t\t\t\t\t(productosAlmacenQuery.error || categoriasQuery.error) ?\r\n\t\t\t\t\t\t\t<ErrorPage error={productosAlmacenQuery.error} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Box mx={5}>\r\n\t\t\t\t\t\t\t<ListaProductos productos={productos} obtenerAlmacenes={obtenerAlmacenes} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t</Dialog>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport RegistroAlmacen from './RegistroAlmacen/RegistroAlmacen';\r\nimport Traspasos from './Traspasos/Traspasos';\r\nimport InventariosPorAlmacen from './InventarioPorAlmacen/InventariosPorAlmacen';\r\nimport { TraspasosProvider } from \"../../../context/Almacenes/traspasosAlmacen\";\r\nexport default function Moviminetos() {\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\" >\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<RegistroAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<Traspasos />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<InventariosPorAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport 'moment'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\nimport moment from 'moment';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'movimiento', label: 'Movimieto', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '70%',\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\n\r\nexport default function TablaHistorialFiltrado({loading, historial}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historial.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tdatos={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({datos}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tconst classes = useStyles();\r\n\tconsole.log(datos)\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.hora_moviento.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.tipo_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.nombre_usuario_creador}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.horario_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.concepto}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha Movimiento: </b> {moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Hora Movimiento: </b> {datos.hora_moviento.completa}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario: </b> {datos.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario en Turno: </b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Tipo Movimiento: </b> {datos.tipo_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography> \r\n\t\t\t\t\t\t\t\t\t<b>Concepto: </b> {datos.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Caja: </b> {datos.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${datos.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import React, {  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, Slide, Box, Button, Toolbar, Typography, FormControl, MenuItem, Select, Grid, TextField} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CAJA} from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport TablaHistorialFiltrado from './TablaHistorialFiltrado';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1,\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst tipos = [\r\n    'TODOS',\r\n    'VENTA',\r\n    'DEPOSITO',\r\n    'RETIRO',\r\n    'TRANSFERENCIA'\r\n];\r\n\r\nexport default function HistorialCaja(props) {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ datosBuscar, setDatosBuscar ] = useState([]);\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\tconst [ value ] = useDebounce(datosBuscar, 500);\r\n\r\n\tlet obtenerHistorialCaja = [];\r\n\r\n    /* Queries */\r\n\tconst {  data, refetch, loading } = useQuery(OBTENER_HISTORIAL_CAJA, {\r\n\t\tvariables: {\r\n            id_Caja: props.cajaSelected._id,\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                tipo_movimiento: datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento :  \"\",\r\n                fecha_incio: datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\",\r\n                fecha_fin: datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\"\r\n            },\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (datosHistorial) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < datosHistorial.length; i++) {\r\n            arrayExcel = { \r\n                fecha: datosHistorial[i].fecha_movimiento.completa,\r\n                hora_movimiento: datosHistorial[i].hora_moviento.completa,\r\n                nombre: datosHistorial[i].nombre_usuario_creador,\r\n                horario_turno: datosHistorial[i].horario_turno,\r\n                tipo_movimiento: datosHistorial[i].tipo_movimiento,\r\n                concepto: datosHistorial[i].concepto,\r\n                caja: datosHistorial[i].numero_caja,\r\n                monto_efectivo: datosHistorial[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: datosHistorial[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: datosHistorial[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: datosHistorial[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: datosHistorial[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: datosHistorial[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: datosHistorial[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: datosHistorial[i].montos_en_caja.monto_vales_despensa.monto , \r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n\tif(data){\r\n\t\tobtenerHistorialCaja = data.obtenerHistorialCaja;\r\n        agruparDatos(obtenerHistorialCaja);\r\n\t}\r\n\r\n    const handleDatos = (e) => {\r\n        setDatosBuscar({...datosBuscar, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n\r\n    const limpiarFiltros = () => {\r\n        setDatosBuscar([]);\r\n    }\r\n\r\n    return (\r\n        <Dialog fullScreen open={props.open} onClose={()=>{props.handleClose();}} TransitionComponent={Transition}>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        Caja {props.cajaSelected.numero_caja}\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={ () => {props.handleClose()} } size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Grid container>\r\n                <ExcelFile\r\n                    element={\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            aria-label=\"Guardar\"\r\n                            className={classes.iconSave}\r\n                        >\r\n                            <SaveIcon className={classes.margin} />\r\n                            Exportar\r\n                        </Button>   \r\n                    }\r\n                    filename={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n                >\r\n                    <ExcelSheet data={datosExcel} name={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}>\r\n                        <ExcelColumn label='Usuario' value='nombre' />\r\n                        <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                        <ExcelColumn label='Hora Movimiento' value='hora_movimiento' />\r\n                        <ExcelColumn label='Horario en Turno' value='horario_turno' />\r\n                        <ExcelColumn label='Concepto' value='concepto' />\r\n                        <ExcelColumn label='Tipo Movimiento' value='tipo_movimiento' />\r\n                        <ExcelColumn label='No. de Caja' value='caja' />\r\n                        <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                        <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                        <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                        <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                        <ExcelColumn label='M. en monedero' value='monto_monedero' />\r\n                        <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                        <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                        <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                    </ExcelSheet>\r\n                </ExcelFile>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Movimiento\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={handleDatos}\r\n                                    value={datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento : \"\"}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {tipos.map((tipo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={tipo}>{tipo}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\t\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha inicio:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_incio\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha fin:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_fin\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }} >\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Usuario:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                    value={datosBuscar.usuario ? datosBuscar.usuario : \"\"}\r\n                                    onChange={handleDatos}\r\n                                />\r\n                            </Box>\r\n                        </form>\r\n                        <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                            <Box mt={2}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarFiltros}\r\n                                >\r\n                                    Limpiar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <TablaHistorialFiltrado loading={loading} historial={obtenerHistorialCaja} />\r\n                </Grid>  \r\n            </Grid>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport {Badge, Box} from '@material-ui/core';\r\n \r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n      color :({props})=> props.color,\r\n      background: ({props})=> props.color,\r\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n      '&::after': {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        borderRadius: '50%',\r\n        animation: '$ripple 1.2s infinite ease-in-out',\r\n        border: '1px solid currentColor',\r\n        content: '\"\"',\r\n      },\r\n    },\r\n    '@keyframes ripple': {\r\n      '0%': {\r\n        transform: 'scale(.8)',\r\n        opacity: 1,\r\n      },\r\n      '100%': {\r\n        transform: 'scale(2.4)',\r\n        opacity: 0,\r\n      },\r\n    }\r\n  }))(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth:230,\r\n    maxWidth: 230,\r\n    margin:5,\r\n    \r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    color: red[500],\r\n  },\r\n  textActive:{\r\n    position:'relative',\r\n    bottom:8\r\n  }\r\n}));\r\n\r\nexport default function CardCaja(props) {\r\n    const styleProps={\r\n      color: (props.activa)  ? '#44b700' : 'red'\r\n    }\r\n    const classes = useStyles();\r\n \r\n    return (\r\n        <div>\r\n            <Card className={classes.root}>\r\n                    <CardHeader\r\n                      color=\"secondary\"\r\n                        avatar={\r\n                            <StyledBadge\r\n                              overlap=\"circle\"\r\n                              props={styleProps}\r\n                              anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                              }}\r\n                              variant=\"dot\"\r\n                              badgeContent=\"\"\r\n                            >\r\n                            <Avatar alt=\"Cajero X\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </StyledBadge>\r\n                        }\r\n                    />\r\n                    <Box m={1} mb={2}>\r\n                    <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\" >\r\n                            Caja {props.name}\r\n                    </Typography>\r\n                    </Box>\r\n                    {/* <CardActions disableSpacing  >\r\n                        <Typography style={{fontWeight: 'bold'}} color=\"textSecondary\" component=\"p\">\r\n                           Total en caja: \r\n                        </Typography>\r\n                        <Typography style={{margin: '0px 10px', color: 'green'}} variant=\"h6\" color=\"textSecondary\" component=\"p\">\r\n                           $ {parseFloat(props.cantidad_efectivo_actual)}\r\n                        </Typography>\r\n                    </CardActions> */}\r\n                </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Grid  } from '@material-ui/core';\r\nimport HistorialCaja from './HistorialCaja';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport CardCaja from './CardCaja';\r\n\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n    const [ loading, setLoading ] = React.useState(false);\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n    const [ openHistorial, setOpenHistorial ] = React.useState(false);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ cajaSelected, setCajaSelected ] = React.useState({name:''});\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    let obtenerCajasSucursal = []; \r\n\r\n\t\r\n    /* Queries */\r\n    const {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n    const handleClickOpenHistorial = () => {\r\n\t\tsetOpenHistorial(true);\r\n\t};\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n    const handleCloseHistorial = () => {\r\n\t\tsetOpenHistorial(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container spacing={1} justify=\"center\" >\r\n\t\t\t\t\t{obtenerCajasSucursal?.map((caja, index) => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<Button key={index} onClick={()=>{handleClickOpenHistorial(); setCajaSelected(caja)}}>\r\n\t\t\t\t\t\t\t\t<CardCaja name={caja.numero_caja} activa={caja.activa} cantidad_efectivo_actual={caja.cantidad_efectivo_actual} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\t\r\n\t\t\t\t\t})} \r\n\t\t\t\t</Grid> \t\r\n\t\t\t</Dialog>\r\n            <HistorialCaja open={openHistorial} fetchCajas={refetch} handleClickOpen={handleClickOpenHistorial} cajaSelected={cajaSelected} handleClose={handleCloseHistorial} obtenerCajasSucursal={obtenerCajasSucursal} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n\t{ id: 'caja', label: 'Caja', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: 500,\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TablaTurnosFiltrados({loading, turnos}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{turnos.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tturno={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({turno}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst classes = useStyles();\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={turno._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{turno.fecha_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_salida.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.concepto}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.numero_caja}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación del turno\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario</b>: {turno.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Numero de caja</b>: {turno.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Moviento de turno</b>: {turno.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario de turno</b>: {turno.horario_en_turno}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Entrada de turno: </b>{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Salida de turno: </b>{turno.hora_salida.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Comentarios</b>: {turno.comentarios}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha de movimiento</b>: {turno.fecha_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${turno.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRAR_TURNOS = gql`\r\n\tmutation crearRegistroDeTurno( $input: AbrirCerrarTurnoInput, $activa: Boolean) {\r\n\t\tcrearRegistroDeTurno(input: $input, activa: $activa) {\r\n\t\t\thorario_en_turno\r\n\t\t\ttoken_turno_user\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_TURNOS = gql`\r\n\tquery obtenerFiltroTurnos($input: HistorialTurnosInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerFiltroTurnos(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\thorario_en_turno\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_movimiento\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ReactExport from 'react-export-excel'; //LIBRERIA EXCEL\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaTurnosFiltrados from './TablaTurnosFiltrados';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { OBTENER_HISTORIAL_TURNOS } from '../../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { useDebounce } from 'use-debounce';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nmoment.locale('es');\r\nconst ExcelFile = ReactExport.ExcelFile; //ARCHIVO DE EXCEL\r\nconst ExcelSheet = ReactExport.ExcelSheet; //HOJA DE EXCEL\r\nconst ExcelColumn = ReactExport.ExcelColumn; //COLUMNA DE EXCEL\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesTurnosUsuarios() {\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg'\r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n                    </Box>\r\n\t\t\t\t\tTurnos de Usuarios\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                            Reportes Turnos de Usuarios\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display=\"flex\">\r\n                            <Box p={1}>\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon style={{fontSize: 30}} />\r\n                                </Button>\r\n                            </Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <FiltroTablaTurnos />\r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n};\r\n\r\nconst FiltroTablaTurnos = () => {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [filtros, setFiltros] = useState([]);\r\n    const [ datosExcel, setDatosExcel] = useState([]);\r\n\tconst [value] = useDebounce(filtros, 500);\r\n    let historialTurnos = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  } = useQuery(OBTENER_HISTORIAL_TURNOS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                horario_en_turno: filtros.horario_turno ? filtros.horario_turno : \"\",\r\n                usuario_en_turno: value.usuario_en_turno ? value.usuario_en_turno : \"\",\r\n                numero_caja: filtros.numero_caja ? filtros.numero_caja : \"\",\r\n                fechaInicio: filtros.fechaInicio ? filtros.fechaInicio : \"\",\r\n                fechaFin: filtros.fechaFin ? filtros.fechaFin : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    const obtenerDatos = (e) => {  \r\n        setFiltros({...filtros, [e.target.name]: e.target.value.toString()});\r\n    };\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (turnos) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < turnos.length; i++) {\r\n            arrayExcel = { \r\n                fecha: turnos[i].fecha_movimiento,\r\n                nombre: turnos[i].usuario_en_turno.nombre,\r\n                numero_usuario: turnos[i].usuario_en_turno.numero_usuario,\r\n                fecha_entrada: turnos[i].fecha_entrada.completa,\r\n                fecha_salida: turnos[i].fecha_salida.completa,\r\n                hora_entrada: turnos[i].hora_entrada.completa,\r\n                hora_salida: turnos[i].hora_salida.completa,\r\n                horario_en_turno: turnos[i].horario_en_turno,\r\n                concepto: turnos[i].concepto,\r\n                caja: turnos[i].numero_caja,\r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n    if(data && cajas.loading  === false){\r\n\t\thistorialTurnos = data.obtenerFiltroTurnos;\r\n        agruparDatos(historialTurnos);\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarFiltros = () => {\r\n        setFiltros([]);\r\n    };\r\n    \r\n    return(\r\n        <>\r\n        <Grid container>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename=\"Reporte de Turnos Usuarios\"\r\n            >\r\n                <ExcelSheet data={datosExcel} name={'Reporte de Turnos Usuarios'}>\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                    <ExcelColumn label='Fecha Entrada' value='fecha_entrada' />\r\n                    <ExcelColumn label='Fecha Salida' value='fecha_salida' />\r\n                    <ExcelColumn label='Hora Entrada' value='hora_entrada' />\r\n                    <ExcelColumn label='Hora Salida' value='hora_salida' />\r\n                    <ExcelColumn label='Horario en Turno' value='horario_en_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha inicio:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaInicio\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaInicio ? filtros.fechaInicio : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha fin:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaFin\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaFin ? filtros.fechaFin : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Usuario:\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario_en_turno\"\r\n                                value={filtros.usuario_en_turno ? filtros.usuario_en_turno : \"\"}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                            />\r\n                        </Box>\r\n                    </form>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Caja:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"numero_caja\"\r\n                                onChange={obtenerDatos}\r\n                                value={filtros.numero_caja ? filtros.numero_caja : \"\"}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {\r\n                                    cajas.data?.obtenerCajasSucursal?.map((caja) =>{\r\n                                        return(\r\n                                            <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                Caja {caja.numero_caja}\r\n                                            </MenuItem>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Horario de Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_turno\"\r\n                                value={filtros.horario_turno ? filtros.horario_turno : \"\"}\r\n                                onChange={obtenerDatos}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                        <Box mt={2}>\r\n                            <Button\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                onClick={limpiarFiltros}\r\n                            >\r\n                                Limpiar\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid> \r\n           \r\n        </Grid>    \r\n        <Grid item lg={12}>\r\n            <TablaTurnosFiltrados loading={loading} turnos={historialTurnos} />\r\n        </Grid>  \r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Nombre producto\", minWidth: 160 },\r\n  { label: \"Fecha de Compra\", minWidth: 160 },\r\n  { label: \"Almacen\", minWidth: 100 },\r\n  { label: \"Proveedor\", minWidth: 100 },\r\n  { label: \"M. pago\", minWidth: 90 },\r\n  { label: \"F. pago\", minWidth: 100 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaComprasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                const result = formaPago.filter(\r\n                  (res) => res.Value === data.forma_pago\r\n                );\r\n                let forma_pago = result[0];\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>{data.almacen.nombre_almacen}</TableCell>\r\n                    <TableCell>{data.proveedor.nombre_cliente}</TableCell>\r\n                    <TableCell>\r\n                      {data.compra_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${forma_pago.Value}-${forma_pago.Name}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${data.cantidad_total} - ${data.unidad}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`%${data.descuento_porcentaje} - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_REPORTE_COMPRAS = gql`\r\n  query obtenerProductoMovimientos(\r\n    $empresa: ID!\r\n    $sucursal: ID\r\n    $input: ObteneReportesCompras\r\n  ) {\r\n    obtenerProductoMovimientos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      id_compra\r\n      id_traspaso\r\n      id_producto\r\n      id_proveedor\r\n      id_almacen\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      proveedor {\r\n        _id\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      producto {\r\n        almacen_inicial {\r\n          almacen\r\n          cantidad\r\n          fecha_de_expiracion\r\n          id_almacen\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          granel\r\n          litros\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          cantidad\r\n          codigo_barras\r\n          id_producto\r\n          precio\r\n          unidad\r\n          unidad_principal\r\n          _id\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n      }\r\n      concepto\r\n      cantidad\r\n      cantidad_regalo\r\n      unidad_regalo\r\n      cantidad_total\r\n      iva_total\r\n      ieps_total\r\n      costo\r\n      descuento_porcentaje\r\n      descuento_precio\r\n      compra_credito\r\n      forma_pago\r\n      impuestos\r\n      mantener_precio\r\n      subtotal\r\n      total\r\n      medida {\r\n        id_medida\r\n        medida\r\n        tipo\r\n      }\r\n      color {\r\n        id_color\r\n        color\r\n        hex\r\n      }\r\n      unidad\r\n      id_unidad_venta\r\n      empresa\r\n      sucursal\r\n      usuario\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarCompras({ data }) {\r\n  const compras = data.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      almacen,\r\n      proveedor,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito,\r\n      costo,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_precio,\r\n      ieps_precio,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const forma_pago_filtrada = formaPago.filter(\r\n      (forma) => forma.Value === compra.forma_pago\r\n    );\r\n    const forma_pago = forma_pago_filtrada[0];\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito: compra_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      costo: `$${costo ? formatoMexico(costo) : 0}`,\r\n      descuento_porcentaje: `%${descuento_porcentaje}`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_precio: `$${ieps_precio ? formatoMexico(ieps_precio) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n        <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Unidad de Regalo\" value=\"unidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad de Regalo\" value=\"cantidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad Total\" value=\"cantidad_total\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"compra_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Costo\" value=\"costo\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_precio\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaComprasFiltradas from \"./TablaComprasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { OBTENER_REPORTE_COMPRAS } from \"../../../../gql/Compras/reporte_compras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarCompras from \"./ExportarCompras\";\r\n\r\nexport default function FiltrosCompras() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_REPORTE_COMPRAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        proveedor: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerProductoMovimientos } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerProductoMovimientos} />\r\n        <TablaComprasFiltradas data={obtenerProductoMovimientos} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    proveedor: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      proveedor: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filter) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: filter,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Proveedor:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"proveedor\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, Clave o numero\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.proveedor}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1} display=\"flex\">\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarCompras data={data} />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\nimport FiltrosCompras from \"./FiltrosCompra\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCompras() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcPaid fontSize={100} />\r\n          </Box>\r\n          Reportes Compras\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Compras\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosCompras />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'F. Venta', minWidth: 100 },\r\n\t{ id: 'code', label: 'Producto', minWidth: 100 },\r\n\t{ id: 'code', label: 'P. de Compra', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'code', label: 'Total', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Provedor', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Fomas', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'M. de Pago', minWidth: 100 },\t\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaVentasFiltradas() {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            \r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcPaid } from 'react-icons/fc';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaVentasFiltradas from './TablaVentasFiltradas';\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesVentas() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg' alt=\"icono ventas\" style={{width: 100}} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Ventas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Ventas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>\r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaInicio\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaFin\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Clientes:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Metodos de Pago:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"tipo_producto\"\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        <MenuItem value=\"EFECTIVO\">Efectivo</MenuItem>\r\n                                        <MenuItem value=\"PUNTOS\">Puntos</MenuItem>\r\n                                        <MenuItem value=\"DEBITO\">T. Debito</MenuItem>\r\n                                        <MenuItem value=\"CREDITO\">T. Credito</MenuItem>\r\n                                        <MenuItem value=\"CHEQUES\">Cheques</MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Nombre Producto:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12}>\r\n                        <TablaVentasFiltradas />\r\n                    </Grid>\r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarTraspasos({ data }) {\r\n  const traspasos = data.map((traspaso) => {\r\n    const trasp =  {\r\n      producto: traspaso.producto.datos_generales.nombre_comercial,\r\n      cantidad: traspaso.cantidad,\r\n      fecha:\tformatoFechaCorta(traspaso.id_traspaso.fecha_registro),\r\n      concepto: traspaso.id_traspaso.concepto_traspaso.nombre_concepto,\r\n      almacen_origen: (traspaso.almacen_origen !== null) ? traspaso.almacen_origen.nombre_almacen : '',\r\n      almacen_destino:(traspaso.almacen_destino !== null) ? traspaso.almacen_destino.nombre_almacen : ''\r\n    } ;\r\n  \r\n    return trasp;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de traspasos\"\r\n    >\t\r\n\r\n      <ExcelSheet data={traspasos} name=\"Reporte de traspasos\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Almacén Origen\" value=\"almacen_origen\" />\r\n        <ExcelColumn label=\"Almacén Destino\" value=\"almacen_destino\" />\r\n        \r\n        \r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\nimport {\r\n  formatoFechaCorta,\r\n\r\n} from \"../../../../config/reuserFunctions\"; \r\n\r\nconst columns = [\r\n\t{ id: 'producto', label: 'Producto', minWidth: 200 },\r\n\t\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 50 },\r\n\t{ id: 'fecha', label: 'Fecha ', minWidth: 50 },\t\r\n\t{ id: 'concepto', label: 'Concepto ', minWidth: 100 },\r\n\t{ id: 'almacen_origen', label: 'Almacén Origen', minWidth: 100 },\t\r\n\t{ id: 'almacen_destino', label: 'Almacén Destino', minWidth: 100 },\t\r\n\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaAlmacenFiltradas({data}) {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                         <TableBody>\r\n\t\t\t\t\t\t\t{data.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<TableCell>{data.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{formatoFechaCorta(data.id_traspaso.fecha_registro)}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.id_traspaso.concepto_traspaso.nombre_concepto}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_origen !== null) ? data.almacen_origen.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_destino !== null) ? data.almacen_destino.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import React, { useState,  Fragment } from 'react';\r\n\r\nimport { AppBar, Box, Button, Dialog, FormControl, \r\nGrid, MenuItem, Select, Slide, TextField, Toolbar, \r\nTypography } from '@material-ui/core';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarTraspasos from \"./ExportarTraspasos\";\r\nimport TablaAlmacenFiltradas from './TablaAlmacenFiltradas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\n\r\nimport { OBTENER_ALMACENES, OBTENER_TRASPASOS  } from '../../../../gql/Almacenes/Almacen';\r\nimport { useDebounce } from 'use-debounce';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n    CircularProgress:{\r\n         width: '100%',\r\n        height: 200,\r\n        marginTop:100,\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesAlmacen() {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n    const [open, setOpen] = useState(false);\r\n    const [almacenOrigen, setAlmacenOrigen] = useState(null);\r\n    const [almacenDestino, setAlmacenDestino] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [inputFilter, setFilter] = useState({\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        producto: '',\r\n        fecha_inicio: '',\r\n        fecha_final: '',\r\n        usuario: ''\r\n    });\r\n\r\n    const [encargado, setEncargado] = useState('');\r\n    const [value] = useDebounce(inputFilter, 1000);\r\n\r\n    let almacenes = [];\r\n    let traspasos = [];\r\n    let usuarios = [];\r\n\r\n\r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    })\r\n    const traspasosAlmacenes = useQuery(OBTENER_TRASPASOS,{\r\n        variables:{\r\n            input: value\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n    });\t\r\n\t\r\n\r\n  /*   useEffect(() => {\r\n        try {\r\n            \r\n            traspasosAlmacenes.refetch({\r\n                  input: inputFilter\r\n            }) \r\n        } catch (error) {\r\n            console.log('traspasosAlmacenes',error)\r\n        }\r\n        \r\n    }, []); */\r\n    \r\n    const limpiarFiltros = () => {\r\n        try {\r\n            let filt = {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                producto: '',\r\n                fecha_inicio: '',\r\n                fecha_final: '',\r\n                usuario: ''\r\n            };\r\n          \r\n        \r\n            setFilter(filt);\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: filt\r\n                }\r\n            )\r\n            setEncargado('');\r\n            setAlmacenOrigen(null);\r\n            setAlmacenDestino(null);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            \r\n        }\r\n  \r\n\r\n  };\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    \r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n     \r\n    const setDatosInput = (e) =>{\r\n      \r\n          let fil = {...inputFilter, [e.target.name]: e.target.value,almacen_destino:almacenDestino,almacen_origen : almacenOrigen}\r\n        setFilter(fil)\r\n    }\r\n    const setQueryAlmacenOrigen = (alm) =>{\r\n           \r\n        let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n        \r\n        if(alm._id !== ''){\r\n             setLoading(true);\r\n            let fil = {...inputFilter, almacen_origen : alm._id, almacen_destino: almDes}\r\n        \r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n           \r\n        }\r\n         setAlmacenOrigen(alm)\r\n          setLoading(false);\r\n    }\r\n     const setQueryAlmacenDestino = (alm) =>{\r\n        let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';  \r\n        if(alm._id !== ''){\r\n      \r\n            let fil = {...inputFilter, almacen_origen : almOri, almacen_destino : alm._id}\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n            \r\n        }\r\n        \r\n        setAlmacenDestino(alm);\r\n         setLoading(false);\r\n    }\r\n    const setEncargadoInput = ( enc) =>{\r\n       try {\r\n            let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n            let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';\r\n            let encId = ( enc!== '' ) ? enc._id : ''; \r\n            let fil ={...inputFilter, usuario: encId, almacen_destino:almDes,almacen_origen : almOri};\r\n        \r\n        traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n         setEncargado(enc)  \r\n          setLoading(false);  \r\n       } catch (error) {\r\n           \r\n       }\r\n        \r\n    }\r\n\r\n    if(traspasosAlmacenes.data){\r\n       try {\r\n           \r\n            traspasos = traspasosAlmacenes.data.obtenerTraspasos;   \r\n       } catch (error) {\r\n           \r\n       }\r\n      \r\n       \r\n    }\r\n\r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg' \r\n                            alt=\"icono almacen\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Almacen\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    \r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_inicio\"\r\n                                    variant=\"outlined\"\r\n                                    value={inputFilter.fecha_inicio}\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_final\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.fecha_final}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Encargado</Typography>\r\n                                <Box display=\"flex\">\r\n                                    <Autocomplete\r\n                                        id=\"encargado\"\r\n                                        size=\"small\"\r\n                                        options={usuarios}\r\n                                       \r\n                                        getOptionLabel={(option) =>\r\n                                            option.nombre ? `${option.nombre}` : \"\"\r\n                                        }\r\n                                        fullWidth\r\n                                        renderInput={(params) => (\r\n                                            <TextField\r\n                                            {...params}\r\n                                            variant=\"outlined\"\r\n                                            InputProps={{\r\n                                                ...params.InputProps,\r\n                                                endAdornment: (\r\n                                                <Fragment>\r\n                                                  \r\n                                                    {params.InputProps.endAdornment}\r\n                                                </Fragment>\r\n                                                ),\r\n                                            }}\r\n                                            \r\n                                            />\r\n                                        )}\r\n                                        renderOption={(option) => (\r\n                                            <Fragment>\r\n                                            {`${option.nombre}`}\r\n                                            </Fragment>\r\n                                        )}\r\n                                        onChange={ (_, data) =>  setEncargadoInput(data)}\r\n                                        getOptionSelected={(option, value) =>\r\n                                            option.nombre === value.nombre\r\n                                        }\r\n             \r\n                                        value={(encargado.nombre) ? encargado: null }\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                             <Box width=\"100%\">\r\n                                <Typography>Producto:</Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"producto\"\r\n                                    variant=\"outlined\"\r\n                                    placeholder=\"Nombre, código, clave...\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.producto}\r\n                                />\r\n                            </Box>\r\n                           \r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen origen:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-origen\"\r\n                                        name=\"almacen_origen\"\r\n                                        onChange={(e) => setQueryAlmacenOrigen(e.target.value)}\r\n                                        value={(almacenOrigen !== null) ? almacenOrigen : ''} \r\n                                    >   \r\n                                       \r\n                                        {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                                {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                      \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen destino:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    \r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-destino\"\r\n                                        name=\"almacen_destino\"\r\n                                        onChange={(e) => setQueryAlmacenDestino(e.target.value)}\r\n                                        value={(almacenDestino !== null) ? almacenDestino: ''} \r\n                                    >\r\n                                     \r\n                                          {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                            {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                       \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                           \r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box mt={1} display=\"flex\">\r\n                                <Button\r\n                                color=\"primary\"\r\n                                startIcon={<ClearOutlined />}\r\n                                onClick={() => limpiarFiltros()}\r\n                                >\r\n                                Limpiar filtros\r\n                                </Button>\r\n                                <Box mx={1} />\r\n                                <ExportarTraspasos data= {traspasos} />\r\n                            </Box>\r\n                        </div>    \r\n                    </Grid> \r\n                    {\r\n                        (traspasosAlmacenes.loading || loading) ?\r\n                        <div className={classes.CircularProgress}>\r\n                        <CircularProgress/>\r\n                        </div>\r\n                        :\r\n                        <Grid item lg={12}>\r\n                         <TablaAlmacenFiltradas data={traspasos} />\r\n                        </Grid>\r\n                    }\r\n                 \r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Grid, Typography} from '@material-ui/core';\r\nimport { OBTENER_CORTE_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport moment from 'moment';\r\nimport { useLazyQuery } from '@apollo/client';\r\n\r\nconst columns = [\r\n\t{label: 'Fecha Corte', minWidth: 100 },\r\n\t{label: 'Hora Corte', minWidth: 100 },\r\n\t{label: 'Usuario', minWidth: 100 },\r\n\t{label: 'Turno Horario', minWidth: 100 },\t\r\n\t{label: 'Caja', minWidth: 100 },\r\n\t{label: 'Sucursal', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: \"70vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaCortesFiltradas({loading, cortes}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cortes.map((row) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\tcorte={row}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({corte}) {\r\n\tconst [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [obtenerCorte, { data, error, loading }] = useLazyQuery(\r\n\t\tOBTENER_CORTE_CAJA,\r\n\t\t{\r\n\t\t\tvariables: { \r\n\t\t\t\tsucursal: sesion.sucursal._id, \r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tinput: { \r\n\t\t\t\t\tusuario: sesion._id,\r\n\t\t\t\t\tcaja: corte.id_caja,\r\n\t\t\t\t\ttoken_turno_user: corte.token_turno_user,\r\n\t\t\t\t\tnumber_user: sesion.numero_usuario\r\n\t\t\t\t} \r\n\t\t\t},\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tlet montos_sistema = [];\r\n\r\n\tif(data){\r\n\t\tmontos_sistema = data.obtenerCorteCaja.montos_en_sistema;\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t\tobtenerCorte();\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"handleClickOpen\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={corte._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{corte.fecha_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.hora_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.numero_caja}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.sucursal.nombre_sucursal}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<InformacionCorteCaja corte={corte} montos_sistema={montos_sistema} loading={loading} />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Box p={2} display=\"flex\" flexDirection='row-reverse'>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tImprimir Ticket\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction InformacionCorteCaja({corte, montos_sistema, loading}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h5\">\r\n\t\t\t\t\t\t<b>Reporte de Corte de Caja</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t<b>Fecha y hora de Corte: </b>{moment(corte.fecha_movimiento).format('Do MMMM YYYY, h:mm:ss')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={2} display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Usuario: </b> {corte.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>No. de usuario: </b>{corte.usuario_en_turno.numero_usuario}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Horario en turno: </b>{corte.horario_en_turno}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Numero de caja: </b>{corte.numero_caja}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Sucursal: </b>{corte.sucursal.nombre_sucursal}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CONCEPTO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CAJERO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">SISTEMA</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">DIFERENCIA</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EFECTIVO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_efectivo.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_efectivo}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_efectivo.monto - montos_sistema.monto_efectivo)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DEBITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_debito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_debito.monto - montos_sistema.monto_tarjeta_debito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DE CREDITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_credito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_credito.monto - montos_sistema.monto_tarjeta_credito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TRANSFERENCIAS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_transferencia}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_transferencia.monto - montos_sistema.monto_transferencia)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN MONEDERO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_monedero}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_monedero.monto - montos_sistema.monto_monedero)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CREDITOS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_creditos}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_creditos.monto - montos_sistema.monto_creditos)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CHEQUES</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_cheques}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_cheques.monto - montos_sistema.monto_cheques)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN VALE DE DESPENSA</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_vales_despensa}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_vales_despensa.monto - montos_sistema.monto_vales_despensa)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}","import { Button, makeStyles } from '@material-ui/core'\r\nimport React, { useState } from 'react'\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nexport default function ExportExcel({historialCortes}) {\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\r\n    const classes = useStyles();\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (historialCortes) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < historialCortes.length; i++) {\r\n            arrayExcel = { \r\n                fecha: historialCortes[i].fecha_salida.completa,\r\n                hora_movimiento: historialCortes[i].hora_salida.completa,\r\n                horario_turno: historialCortes[i].horario_en_turno,\r\n                sucursal: historialCortes[i].sucursal.nombre_sucursal,\r\n                nombre: historialCortes[i].usuario_en_turno.nombre,\r\n                numero_usuario: historialCortes[i].usuario_en_turno.numero_usuario,\r\n                concepto: \"Corte Caja\",\r\n                caja: historialCortes[i].numero_caja,\r\n                monto_efectivo: historialCortes[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: historialCortes[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: historialCortes[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: historialCortes[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: historialCortes[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: historialCortes[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: historialCortes[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: historialCortes[i].montos_en_caja.monto_vales_despensa.monto ,\r\n            };\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                        onClick={() => agruparDatos(historialCortes)}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename={`Reporte de Historial de Cortes`}\r\n            >\r\n                <ExcelSheet data={datosExcel} name={`Reporte de Historial de Cortes`}>\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Sucursal' value='sucursal' />\r\n                    <ExcelColumn label='Fecha Corte' value='fecha' />\r\n                    <ExcelColumn label='Hora Corte' value='hora_movimiento' />\r\n                    <ExcelColumn label='Horario Turno' value='horario_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                    <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                    <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                    <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                    <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                    <ExcelColumn label='M. en Monedero' value='monto_monedero' />\r\n                    <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                    <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                    <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n        </>\r\n    )\r\n}\r\n","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaComprasFiltradas from './TablaCortesFiltradas';\r\nimport ExportExcel from './ExportExcel';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS, OBTENER_CORTES_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesCortes() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    const [ open, setOpen ] = useState(false);\r\n    const [ datosFiltro, setDatosFiltro ] = useState([]);\r\n    const [value] = useDebounce(datosFiltro, 500);\r\n\r\n    let cajas = [];\r\n    let historialCortes = [];\r\n\r\n    const cajasBase = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  }= useQuery( OBTENER_CORTES_CAJA,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                fecha_consulta: datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                numero_caja: datosFiltro.numero_caja ? parseInt(datosFiltro.numero_caja) : null\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    if(cajasBase.loading === false && loading === false){\r\n        cajas = cajasBase.data.obtenerCajasSucursal;\r\n        historialCortes = data.obtenerCortesDeCaja;\r\n    }\r\n\r\n    const handleClickOpen = () => {setOpen(!open)};\r\n\r\n    const obtenerDatos = (e) => { \r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarDatos = () => {\r\n        setDatosFiltro([]);\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <ExportExcel historialCortes={historialCortes} /> \r\n                    \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha de corte:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_consulta\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={obtenerDatos}\r\n                                    value={datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\"}\r\n                                />\r\n                            </Box>\r\n                            <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                                <Box width=\"100%\">\r\n                                    <Typography>\r\n                                        Usuario:\r\n                                    </Typography>\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"usuario\"\r\n                                        variant=\"outlined\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n                                    />\r\n                                </Box>\r\n                            </form>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Caja:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"numero_caja\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.numero_caja ? datosFiltro.numero_caja : \"\"}\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        {\r\n                                            cajas?.map((caja) =>{\r\n                                                return(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                );\r\n                                            })\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box \r\n                                width=\"100%\" \r\n                                display=\"flex\" \r\n                                justifyContent=\"center\" \r\n                                alignItems=\"center\"\r\n                                mt={2}\r\n                            >\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarDatos}\r\n                                >\r\n                                    Limpiar Filtro\r\n                                </Button>\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <TablaComprasFiltradas cortes={historialCortes} loading={loading} />\r\n                    </Grid>\r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, Grid, MenuItem, Select, Slide, TextField, Typography } from '@material-ui/core';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_EGRESOS } from '../../../../gql/Tesoreria/egresos';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 170 },\r\n\t{ id: 'nombre', label: 'Usuario', minWidth: 170 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 170 },\r\n\t{ id: 'folioF', label: 'Folio Factura', minWidth: 170 },\r\n\t{ id: 'tipo', label: 'Tipo Compra', minWidth: 170 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\t\troot: {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '70vh'\r\n\t\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nexport default function ListaEgresos() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [datosFiltro, setDatosFiltro] = useState([]);\r\n\tconst [value] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n\tconst { loading, data, error, refetch  } = useQuery( OBTENER_HISTORIAL_EGRESOS,{\r\n\t\tvariables: {\r\n\t\t\tinput: {\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? (datosFiltro.tipo_movimiento === \"CREDITO\" ?  true : false) : null\r\n            },\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch]);\r\n\r\n\t\r\n\tlet historialEgresos = [];\r\n\r\n\tif(data){\r\n\t\thistorialEgresos = data.obtenerHistorialEgresos\r\n\t}\r\n\r\n\tconst obtenerDatos =(e)=>{\r\n\t\tsetDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n\tconst limpiarDatos = () => {\r\n\t\tsetDatosFiltro([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Inicio:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_inicio\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Fin:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_fin\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tTipo Egreso:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_movimiento\"\r\n\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"TODOS\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CONTADO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Contado\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CREDITO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Credito\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"center\" \r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={limpiarDatos}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLimpiar Filtro\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid> \r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historialEgresos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsEgresos row={row} loading={loading} key={index} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction RowsEgresos({row, loading}){\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t>\r\n\t\t\t\t<DialogCaracteristicas row={row}  />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={row.code}\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_egreso}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.nombre_usuario_creador}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.fecha_compra}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_factura}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.compra_credito === false ? \"Contado\" : \"Credito\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction DialogCaracteristicas ({row}) {\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={5} xs={12}>\r\n\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Fecha Compra: </b> {moment(row.fecha_compra).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio movimiento: </b> {row.folio_egreso}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Usuario: </b> {row.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Categoria: </b> {row.categoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Sub-Categoria: </b> {row.subCategoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio Factura: </b> {row.folio_factura}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Empresa: </b> {row.empresa_distribuidora}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Provedor: </b> {row.provedor}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Metodo de pago: </b> {row.metodo_pago}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Compra credito: </b> {row.compra_credito === false ? \"NO\" : \"Si\"}\r\n\t\t\t\t\t\t\t\t{row.compra_credito === false ? null : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Fecha Vencimiento: </b> {row.fecha_vencimiento}\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Saldo Pendiente: </b> {row.saldo_credito_pendiente}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={7} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\tProductos Adquiridos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Paper style={{width: '100%', height: '30vh'}}>\r\n\t\t\t\t\t\t\t\t<TableContainer style={{maxHeight: '100%'}}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANTIDAD\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPRODUCTO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP. UNITARIO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTOTAL\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t{row?.productos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableRow \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.cantidad_productos}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.producto}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.precio_unitario}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.total}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent='flex-end' p={1}> \r\n\t\t\t\t\t\t\t<Typography variant='h6'>\r\n\t\t\t\t\t\t\t\tTotal: ${formatoMexico(row.saldo_total)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</DialogContent>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, IconButton, InputBase } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaTransferencias() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(14);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t<Box mr={5} minWidth=\"70%\">\r\n\t\t\t\t\t\t<Paper className={classes.rootBusqueda}>\r\n\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tplaceholder=\"Buscar transferencias...\"\r\n\t\t\t\t\t\t\t\t// onChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t// onKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t// value={values}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</div>\r\n\t\t<Box  p={2}>\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\r\nimport {FcSurvey } from 'react-icons/fc';\r\n\r\nimport ListaEgresos from './ListaEgresos';\r\nimport ListaTransferencias from './ListaTransferencias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ReportesTesoreria() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ventana, setVentana] = useState('');\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                        <FcSurvey style={{fontSize: 100}}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Tesoreria\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\t id=\"customized-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('egresos')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Egresos\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('transferencias')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Transferencias\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistotorial de {ventana}\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tventana === 'egresos' ? (\r\n\t\t\t\t\t\t\t<ListaEgresos />\r\n\t\t\t\t\t\t) : ventana === 'transferencias' ?(\r\n\t\t\t\t\t\t\t<ListaTransferencias />\t\t\t\r\n\t\t\t\t\t\t) :(\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport Cajas from './Cajas/Cajas';\r\nimport ReportesTurnosUsuarios from './TurnosUsuarios/ReportesTurnosUsuarios';\r\nimport ReportesCompras from './Compras/ReportesCompras';\r\nimport ReportesVentas from './Ventas/ReportesVentas';\r\nimport ReportesAlmacen from './Almacenes/ReportesAlmacen';\r\nimport ReportesCortes from './Cortes/ReportesCortes';\r\nimport ReportesTesoreria from './Tesoreria/Reporte_Tesoreria';\r\n\r\nexport default function Reportes() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_historial_cajas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_turnos.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTurnosUsuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_compras.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCompras />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_ventas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesVentas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.rerporte_almacen.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_corte_caja.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCortes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_tesoreria.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTesoreria />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { FcShop, FcPaid, FcSurvey, FcNews } from \"react-icons/fc\";\r\nimport { Toolbar, Box, Tab, Tabs, AppBar } from \"@material-ui/core\";\r\nimport Empresa from \"./Empresa/Empresa\";\r\nimport Compras from \"./Compras/Compras\";\r\nimport Catalogos from \"./Catalogos/Catalogos\";\r\nimport IndexTesoreria from \"./Tesoreria/IndexTesoreria\";\r\nimport Facturacion from \"./Facturacion/Facturacion\";\r\nimport Almacenes from \"./Almacenes/Almacenes\";\r\nimport { withRouter } from \"react-router\";\r\nimport Reportes from \"./Reportes/Reportes\";\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} my={6} minHeight=\"50vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  iconSvgVenta: {\r\n    width: 90,\r\n  },\r\n}));\r\n\r\nfunction AdminInicio(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Toolbar />\r\n      <Box>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            /* centered */ variant=\"scrollable\"\r\n            scrollButtons=\"on\"\r\n          >\r\n            <Tab\r\n              label=\"Mi empresa\"\r\n              icon={<FcShop className={classes.icon} />}\r\n              {...a11yProps(0)}\r\n            />\r\n            <Tab\r\n              label=\"Almacenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(1)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Compras\"\r\n              icon={<FcPaid className={classes.icon} />}\r\n              {...a11yProps(2)}\r\n            />\r\n            <Tab\r\n              label=\"Catalogos\"\r\n              icon={<FcNews className={classes.icon} />}\r\n              {...a11yProps(3)}\r\n            />\r\n            <Tab\r\n              label=\"Tesoreria\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                  alt=\"icono money\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            />\r\n            <Tab\r\n              label=\"Reportes\"\r\n              icon={<FcSurvey className={classes.icon} />}\r\n              {...a11yProps(5)}\r\n            />\r\n\t\t\t<Tab\r\n              label=\"Facturación\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                  alt=\"icono factura\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(6)}\r\n            />\r\n            <Tab\r\n              label=\"Ventas\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(7)}\r\n              onClick={() => props.history.push(\"/ventas/venta-general\")}\r\n            />\r\n          </Tabs>\r\n        </AppBar>\r\n        <SwipeableViews\r\n          axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\r\n          index={value}\r\n          onChangeIndex={handleChangeIndex}\r\n        >\r\n          <TabPanel value={value} index={0}>\r\n            <Empresa />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <Almacenes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <Compras />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={3}>\r\n            <Catalogos />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={4}>\r\n            <IndexTesoreria />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={5}>\r\n            <Reportes />\r\n          </TabPanel>\r\n\t\t  <TabPanel value={value} index={6}>\r\n            <Facturacion />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={7}></TabPanel>\r\n        </SwipeableViews>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AdminInicio);\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Avatar, Box, Button, Typography, Toolbar, AppBar } from '@material-ui/core';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappbar: {\r\n\t\tbackgroundColor: theme.palette.navbar,\r\n        color: grey[800]\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t}\r\n}));\r\n\r\nfunction NavegacionAdmin(props) {\r\n\tconst classes = useStyles();\r\n\tconst token = localStorage.getItem('sesionCafi');\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet usuario;\r\n\t\r\n\tif (token !== null) usuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tlocalStorage.removeItem('ListaEnEspera');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<AppBar position=\"fixed\" className={classes.appbar} elevation={0}>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={usuario.imagen} />\r\n\t\t\t\t\t<Box className={classes.title}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Bienvenido {`${usuario.nombre}`}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <Button\r\n\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\tto=\"/home\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\tstartIcon={<HomeIcon />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tInicio\r\n\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t{sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tTURNO ACTIVO\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tstartIcon={<PowerSettingsNewIcon />}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={signOut}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCerrar sesión\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default withRouter(NavegacionAdmin)","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\t// backgroundColor: theme.palette.navbar,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerColor:{\r\n\t\theight: '100%',\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.navbar\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\theight: '100%'\r\n\t},\r\n\tnavigationTop:{\r\n\t\theight: '100%'\r\n\t},\r\n\ticonSizeSuperior: {\r\n\t\tfontSize: 30,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n\ticonSizeInferior: {\r\n\t\tfontSize: 50,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondInferior: {\r\n\t\twidth: 40,\r\n\t},\r\n\ticonSizeSecondInferiorGrande: {\r\n\t\twidth: 100\r\n\t},\r\n\ticonSizeInferiorGrande:{\r\n\t\tfontSize: 110,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tavatar: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tmarginRight: theme.spacing(1)\r\n\t},\r\n\tborderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot:{\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    rootPrecioProductos:{\r\n        minHeight: '40vh',\r\n    },\r\n    containerImage:{\r\n        maxWidth: 150,\r\n        maxHeight: 150,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    imagen:{\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootBusquedaProductos: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootFecha: {\r\n        height: 40,\r\n        maxWidth: 150,\r\n\t\tdisplay: 'flex',\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n\tformInput: {\r\n\t\t// margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    iconSizeDialogs:{\r\n        width: 80,\r\n    },\r\n    iconSizeDialogsPequeno:{\r\n        width: 50,\r\n    },\r\n    containerImagenesProducto:{\r\n        maxHeight: 300,\r\n        maxWidth: 300,\r\n        display: 'flex',\r\n        justifyItems: 'center',\r\n        alignContent: 'center',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    imagenProducto:{\r\n        height: '100%',\r\n        width: '100%'\r\n    },\r\n    borderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default useStyles","import React, { createContext, useState } from 'react';\r\n\r\nexport const VentasContext = createContext();\r\n\r\nexport const VentasProvider = ({ children }) => {\r\n\r\n    const [datosProductoVentas, setDatosProductoVentas] = useState(\r\n        {\r\n            _id: null,\r\n            cantidad: null,\r\n            codigo_barras: null,\r\n            concepto: null,\r\n            default: null,\r\n            descuento: null,\r\n            descuento_activo: null,\r\n            id_producto: {},\r\n            precio: null,\r\n            unidad: null,\r\n            unidad_principal: null\r\n        }\r\n    );\r\n    \r\n    const [productosVentas, setProductosVentas] = useState([]);\r\n    const [datosVentas, setDatosVentas] = useState(\r\n        {\r\n            productos: [],\r\n            cliente: {},\r\n            subtotal: 0,\r\n            impuestos: 0,\r\n            total: 0,\r\n            usuario: {}\r\n        }\r\n    );\r\n\r\n    const [ productoCambioPrecio, setProductoCambioPrecio ] = useState({});\r\n    const [ precioSelectProductoVenta, setPrecioSelectProductoVenta ] = useState([]);\r\n    const [ clientesVentas, setClientesVentas ] = useState([]);\r\n    const [ turnoActivo, setTurnoActivo ] = useState();\r\n    const [ ubicacionTurno, setUbicacionTurno ] = useState('');\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [  alert, setAlert ] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ abrirTurnosDialog, setAbrirTurnosDialog ] = useState(false);\r\n    const [ updateClientVenta, setUpdateClientVenta ] = useState(false);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // const [precioSeleccionadoTabla, setPrecioSeleccionadoTabla] = useState(false);\r\n\r\n    const [updateTablaVentas, setUpdateTablaVentas] = useState(false);\r\n\r\n\treturn (\r\n\t\t<VentasContext.Provider value={\r\n            { \r\n                alert, \r\n                setAlert,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                datosProductoVentas,\r\n                setDatosProductoVentas,\r\n                productosVentas,\r\n                setProductosVentas,\r\n                datosVentas,\r\n                setDatosVentas,\r\n                abrirTurnosDialog, \r\n                setAbrirTurnosDialog,\r\n                setUpdateClientVenta,\r\n                updateClientVenta,\r\n                setProductoCambioPrecio,\r\n                productoCambioPrecio,\r\n                setPrecioSelectProductoVenta,\r\n                precioSelectProductoVenta,\r\n                setUpdateTablaVentas,\r\n                updateTablaVentas,\r\n                setOpen,\r\n                open,\r\n                clientesVentas, \r\n                setClientesVentas,\r\n                turnoActivo, \r\n                setTurnoActivo,\r\n                ubicacionTurno, \r\n                setUbicacionTurno\r\n                // precioSeleccionadoTabla,\r\n                // setPrecioSeleccionadoTabla\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</VentasContext.Provider>\r\n\t);\r\n};","import React, { useContext, useState } from 'react';\r\nimport { Box, Button, CircularProgress,  Dialog, DialogActions, \r\n    DialogContent, Divider, FormControl, Grid,  MenuItem, \r\n    Select, Slide, TextField, Typography } \r\nfrom '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\r\nimport { OBTENER_CONTABILIDAD } from '../../../gql/Catalogos/contabilidad';\r\nimport { CREAR_HISTORIAL_CAJA, OBTENER_PRE_CORTE_CAJA } from '../../../gql/Cajas/cajas';\r\n\r\nimport useStyles from '../styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DepositoRetiroCaja() {\r\n    const turnoEnCurso =JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ CrearHistorialCaja ] = useMutation(CREAR_HISTORIAL_CAJA);\r\n\r\n    moment.locale('es');\r\n    const classes = useStyles();\r\n\r\n    const { setAlert } = useContext(VentasContext);\r\n    const [open, setOpen] = useState(false);\r\n    const [cargando, setCargando] = useState(false);\r\n    const [movimiento, setMovimiento] = useState('DEPOSITO');\r\n    const [datosMovimiento, setDatosMovimiento] = useState([]);\r\n\r\n\tconst { loading, data } = useQuery(OBTENER_CONTABILIDAD, {\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n    const input = { \r\n        horario_en_turno: \"ABRIR TURNO\",\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        id_usuario: sesion._id,\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n    };\r\n\r\n    const preCorteDeCaja = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n        variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id, input: input},\r\n    });\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n        preCorteDeCaja.refetch();\r\n\t};\r\n\r\n    var dineroEnCaja = 0;\r\n    \r\n    if(!data || !preCorteDeCaja.data){\r\n        return null;\r\n    } else{\r\n        dineroEnCaja = preCorteDeCaja.data.obtenerPreCorteCaja.monto_efectivo_precorte;\r\n    }\r\n\r\n    if (loading || cargando || preCorteDeCaja.loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 68){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    const obtenerDatos = (e) =>{\r\n        setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const enviarDatos = async () => {\r\n        setCargando(true);\r\n        try {\r\n            if(!turnoEnCurso && sesion?.turno_en_caja_activo === false ){\r\n                setCargando(false);\r\n                setAlert({\r\n                    message: `Por el momento no hay ningun turno activo.`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }else{\r\n                if(!datosMovimiento.tipo_movimiento ||\r\n                    !datosMovimiento.monto_efectivo ||\r\n                    !datosMovimiento.concepto\r\n                ){\r\n                    setCargando(false);\r\n                    setAlert({\r\n                        message: `Por favor complete los datos.`,\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                }else{\r\n                    if(datosMovimiento.tipo_movimiento === \"RETIRO\" && dineroEnCaja <  parseFloat(datosMovimiento.monto_efectivo)){\r\n                        setCargando(false);\r\n                        setAlert({\r\n                            message: 'Lo sentimos no hay dinero suficiente en la caja para esta acción.',\r\n                            status: \"error\",\r\n                            open: true,\r\n                        });\r\n                        return null;\r\n                    }\r\n                    const input = {\r\n                        tipo_movimiento: datosMovimiento.tipo_movimiento,\r\n                        concepto: datosMovimiento.concepto,\r\n                        numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n                        id_Caja: turnoEnCurso.id_caja,\r\n                        horario_turno: turnoEnCurso.horario_en_turno,\r\n                        rol_movimiento: 'CAJA',\r\n                        hora_moviento: {\r\n                            hora: moment().format('hh'),\r\n                            minutos: moment().format('mm'),\r\n                            segundos: moment().format('ss'),\r\n                            completa: moment().format('HH:mm:ss')\r\n                        },\r\n                        fecha_movimiento: {\r\n                            year: moment().format('YYYY'),\r\n                            mes: moment().format('DD'),\r\n                            dia: moment().format('MM'),\r\n                            no_semana_year: moment().week().toString(),\r\n                            no_dia_year: moment().dayOfYear().toString(),\r\n                            completa: moment().locale('es-mx').format()\r\n                        },\r\n                        id_User: sesion._id,\r\n                        numero_usuario_creador: sesion.numero_usuario,\r\n                        nombre_usuario_creador: sesion.nombre,\r\n                        montos_en_caja: {\r\n                            monto_efectivo: {\r\n                                monto: parseFloat(datosMovimiento.monto_efectivo),\r\n                                metodo_pago: \"01\"\r\n                            },\r\n                            monto_tarjeta_debito: {\r\n                                monto: 0,\r\n                                metodo_pago: \"28\"\r\n                            },\r\n                            monto_tarjeta_credito: {\r\n                                monto: 0,\r\n                                metodo_pago: \"04\"\r\n                            },\r\n                            monto_creditos: {\r\n                                monto: 0,\r\n                                metodo_pago: \"99\"\r\n                            },\r\n                            monto_monedero: {\r\n                                monto: 0,\r\n                                metodo_pago: \"05\"\r\n                            },\r\n                            monto_transferencia: {\r\n                                monto: 0,\r\n                                metodo_pago: \"03\"\r\n                            },\r\n                            monto_cheques: {\r\n                                monto: 0,\r\n                                metodo_pago: \"02\"\r\n                            },\r\n                            monto_vales_despensa: {\r\n                                monto: 0,\r\n                                metodo_pago: \"08\"\r\n                            }\r\n                        },\r\n                        empresa: sesion.empresa._id,\r\n                        sucursal: sesion.sucursal._id\r\n                    };\r\n                    await CrearHistorialCaja({\r\n                        variables: {\r\n                            empresa: sesion.empresa._id,\r\n                            sucursal: sesion.sucursal._id,\r\n                            input\r\n                        }\r\n                    });\r\n                    setAlert({\r\n                        message: `Registro de movimiento exitoso.`,\r\n                        status: \"success\",\r\n                        open: true,\r\n                    });\r\n                    handleClickOpen();\r\n                    setCargando(false);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setCargando(false);\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n    const handleAlignment = (event, newAlignment) => {\r\n        setMovimiento(newAlignment);\r\n        setDatosMovimiento({...datosMovimiento, tipo_movimiento: newAlignment})\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={() =>{handleClickOpen();}}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 20}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Deposito/Retiro Caja</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + D</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\t\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box \r\n                            display=\"flex\" \r\n                            textAlign=\"center\" \r\n                        >\r\n                            <Box\r\n                                display=\"flex\" \r\n                                justifyContent=\"center\"\r\n                                flexGrow={1} \r\n                            >\r\n                                <Box>\r\n                                    <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                                </Box>\r\n                                <Box m={2} >\r\n                                    <Divider orientation=\"vertical\" />\r\n                                </Box>\r\n                                <Box mt={1} >\r\n                                    <Box>\r\n                                        <Typography variant=\"h6\">\r\n                                            Deposito / Retiro Caja\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box display=\"flex\" textAlign=\"right\">\r\n                                        <Box textAlign=\"right\">\r\n                                            <Typography variant=\"caption\">\r\n                                                {moment().format('MM/DD/YYYY')}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>{moment().format('h:mm')} hrs.</b> \r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>Caja: </b>{turnoEnCurso?.numero_caja}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n                                    <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon />\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            {sesion.turno_en_caja_activo === true ? (\r\n                                <>\r\n                                <div className={classes.formInputFlex}>\r\n                                    {/* <Box width=\"100%\">\r\n                                        <Typography>\r\n                                            Movimiento\r\n                                        </Typography>\r\n                                        <FormControl\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                            size=\"small\"\r\n                                        >\r\n                                            <Select\r\n                                                id=\"form-producto-tipo\"\r\n                                                name=\"tipo_movimiento\"\r\n                                                onChange={obtenerDatos}\r\n                                            >\r\n                                                <MenuItem value=\"\">\r\n                                                    <em>Selecciona uno</em>\r\n                                                </MenuItem>\r\n                                                <MenuItem value=\"DEPOSITO\">Deposito</MenuItem>\r\n                                                <MenuItem value=\"RETIRO\">Retiro</MenuItem>\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box> */}\r\n                                    <Box width=\"100%\" textAlign=\"center\">\r\n                                        <ToggleButtonGroup \r\n                                            onChange={handleAlignment}\r\n                                            value={movimiento}\r\n                                            exclusive \r\n                                        >\r\n                                            <ToggleButton \r\n                                                value=\"DEPOSITO\" \r\n                                            >\r\n                                                <Box p={1}>\r\n                                                    <Typography variant=\"h4\">\r\n                                                        <b>DEPOSITO</b>\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                            </ToggleButton>\r\n                                            <ToggleButton \r\n                                                value=\"RETIRO\"\r\n                                            >\r\n                                                <Box p={1}>\r\n                                                    <Typography variant=\"h4\">\r\n                                                        <b>RETIRO</b>\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                            </ToggleButton>\r\n                                        </ToggleButtonGroup>\r\n                                    </Box>\r\n                                </div>\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box width=\"100%\">\r\n                                        <Typography>Monto:</Typography>\r\n                                        <Box display=\"flex\">\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                size=\"small\"\r\n                                                type=\"number\"\r\n                                                name=\"monto_efectivo\"\r\n                                                onChange={obtenerDatos}\r\n                                                id=\"form-producto-codigo-barras\"\r\n                                                variant=\"outlined\"\r\n                                            />\r\n                                        </Box>\r\n                                    </Box>\r\n                                </div>\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box width=\"100%\">\r\n                                        <Typography>\r\n                                            Concepto de Movimiento:\r\n                                        </Typography>\r\n                                        <FormControl\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                            size=\"small\"\r\n                                        >\r\n                                            <Select\r\n                                                id=\"form-producto-tipo\"\r\n                                                onChange={obtenerDatos}\r\n                                                name=\"concepto\"\r\n                                            >\r\n                                                <MenuItem value=\"\">\r\n                                                    <em>Selecciona uno</em>\r\n                                                </MenuItem>\r\n                                                {data?.obtenerContabilidad.map((concepto)=> {\r\n                                                    return(\r\n                                                        <MenuItem value={concepto.nombre_servicio}>{concepto.nombre_servicio}</MenuItem>\r\n                                                    )\r\n                                                })}\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                </div>\r\n                                </>\r\n                            ) : (\r\n                                <Box textAlign=\"center\" p={2}>\r\n                                    <Typography variant=\"h6\"> \r\n                                        <b>Por el momento no hay un turno en sesión</b> \r\n                                    </Typography>\r\n                                </Box>\r\n                            )}\r\n                        </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Registrar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n};\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button, CircularProgress, \r\n        DialogActions, DialogContent,  \r\n        FormControl, Grid, MenuItem, \r\n        Select, TextField, Typography \r\n    } from '@material-ui/core'\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../gql/Cajas/cajas';\r\nimport { REGISTRAR_TURNOS } from '../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nmoment.locale('es');\r\n\r\nexport default function AbrirTurno({handleClickOpen, loading, type, setLoading}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const [ CrearRegistroDeTurno ] = useMutation(REGISTRAR_TURNOS);\r\n    const { setTurnoActivo, setAlert } = useContext(VentasContext);\r\n\r\n    const [ error, setError ] = useState(false);\r\n    const [ abrirTurno, setAbrirTurno ] = useState([]);\r\n    const [ numeroCaja, setNumeroCaja ] = useState('');\r\n    \r\n    const classes = useStyles();\r\n    let obtenerCajasSucursal = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    const obtenerTurno = (e) => {\r\n        setAbrirTurno({...abrirTurno, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    if(cajas.data){\r\n\t\tobtenerCajasSucursal = cajas.data.obtenerCajasSucursal;\r\n\t};\r\n\r\n    let arraySesion = {\r\n        accesos: sesion.accesos,\r\n        email: sesion.email,\r\n        empresa: sesion.empresa,\r\n        estado: sesion.estado,\r\n        exp: sesion.exp,\r\n        iat: sesion.iat,\r\n        imagen: sesion.imagen,\r\n        nombre: sesion.nombre,\r\n        numero_usuario: sesion.numero_usuario,\r\n        sucursal: sesion.sucursal,\r\n        telefono: sesion.telefono,\r\n        turno_en_caja_activo: true, \r\n        _id: sesion._id,\r\n    };\r\n\r\n    useEffect(() => {\r\n        cajas.refetch();\r\n    }, [loading]);\r\n\r\n    const enviarDatos = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if(!abrirTurno.turno_en_curso ||\r\n                !abrirTurno.caja_elegida ||\r\n                !abrirTurno.monto_abrir\r\n            ){\r\n                setError(true);\r\n                setLoading(false);\r\n                setAlert({\r\n                    message: `Por favor complete los datos obligatorios`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return;\r\n            }else{\r\n                const input = {\r\n                    horario_en_turno: abrirTurno.turno_en_curso,\r\n                    concepto: \"ABRIR TURNO\",\r\n                    numero_caja: numeroCaja.toString(),\r\n                    comentarios: abrirTurno.comentarios,\r\n                    id_caja: abrirTurno.caja_elegida,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    id_usuario: sesion._id,\r\n                    usuario_en_turno: {\r\n                        nombre: sesion.nombre,\r\n                        telefono: sesion.telefono,\r\n                        numero_usuario: sesion.numero_usuario.toString(),\r\n                        email: sesion.email,\r\n                    },\r\n                    hora_entrada: {\r\n                        hora: moment().format('hh'),\r\n                        minutos: moment().format('mm'),\r\n                        segundos: moment().format('ss'),\r\n                        completa: moment().format('HH:mm:ss')\r\n                    },\r\n                    hora_salida: {\r\n                        hora: \"\",\r\n                        minutos: \"\",\r\n                        segundos: \"\",\r\n                        completa: \"\"\r\n                    },\r\n                    fecha_entrada:{\r\n                        year: moment().format('YYYY'),\r\n                        mes: moment().format('MM'),\r\n                        dia: moment().format('DD'),\r\n                        no_semana_year: moment().week().toString(),\r\n                        no_dia_year: moment().dayOfYear().toString(),\r\n                        completa: moment().format(\"YYYY-MM-DD\")\r\n                    },\r\n                    fecha_salida:{\r\n                        year: \"\",\r\n                        mes: \"\",\r\n                        dia: \"\",\r\n                        no_semana_year: \"\",\r\n                        no_dia_year: \"\",\r\n                        completa: \"\"\r\n                    },\r\n                    fecha_movimiento: moment().locale('es-mx').format(),\r\n                    montos_en_caja: {\r\n                        monto_efectivo: {\r\n                            monto: parseFloat(abrirTurno.monto_abrir),\r\n                            metodo_pago: \"01\"\r\n                        },\r\n                        monto_tarjeta_debito: {\r\n                            monto: 0,\r\n                            metodo_pago: \"28\"\r\n                        },\r\n                        monto_tarjeta_credito: {\r\n                            monto: 0,\r\n                            metodo_pago: \"04\"\r\n                        },\r\n                        monto_creditos: {\r\n                            monto: 0,\r\n                            metodo_pago: \"99\"\r\n                        },\r\n                        monto_monedero: {\r\n                            monto: 0,\r\n                            metodo_pago: \"05\"\r\n                        },\r\n                        monto_transferencia: {\r\n                            monto: 0,\r\n                            metodo_pago: \"03\"\r\n                        },\r\n                        monto_cheques: {\r\n                            monto: 0,\r\n                            metodo_pago: \"02\"\r\n                        },\r\n                        monto_vales_despensa: {\r\n                            monto: 0,\r\n                            metodo_pago: \"08\"\r\n                        },\r\n                    }\r\n                };\r\n\r\n                const variableTurnoAbierto = await CrearRegistroDeTurno({\r\n                    variables: {\r\n                        activa: true,\r\n                        input\r\n                    }\r\n                });\r\n\r\n                if(variableTurnoAbierto.data.crearRegistroDeTurno === null){\r\n                    setLoading(false);\r\n                    cajas.refetch();\r\n                    setAlert({\r\n                        message: `Lo sentimos esta caja ya esta en uso`,\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                }else{\r\n                    localStorage.setItem('turnoEnCurso', JSON.stringify(variableTurnoAbierto.data.crearRegistroDeTurno));\r\n                    localStorage.setItem('sesionCafi', JSON.stringify(arraySesion));\r\n                    setTurnoActivo(true);\r\n                    setAlert({\r\n                        message: `Turno abierto con exito`,\r\n                        status: \"success\",\r\n                        open: true,\r\n                    });\r\n                    cajas.refetch();\r\n                    if (type !== \"FRENTE\") {\r\n                        handleClickOpen();\r\n                    };\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setLoading(false);\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            if (type !== \"FRENTE\") {\r\n                handleClickOpen();\r\n            }\r\n        }\r\n    };\r\n\r\n    if (cajas.loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return (\r\n        <div>\r\n            <DialogContent>\r\n                <Grid>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography> Empleado:</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"nombre_usuario\"\r\n                                    onChange={obtenerTurno}\r\n                                    disabled={true}\r\n                                    value={sesion ? sesion.nombre : ''}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                <span className=\"obligatorio\">* </span>Turno:\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                disabled={turnoEnCurso ? true : false}\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"turno_en_curso\"\r\n                                    onChange={obtenerTurno}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                    <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                <span className=\"obligatorio\">* </span>Caja:\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                disabled={turnoEnCurso ? true : false}\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"caja_elegida\"\r\n                                    onChange={obtenerTurno}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {\r\n                                        obtenerCajasSucursal.map((caja) =>{\r\n                                            return(\r\n                                                caja.activa === true ? null :(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja._id} onClick={() => setNumeroCaja(caja.numero_caja)}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                )\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography> <span className=\"obligatorio\">* </span>Monto para abrir:</Typography>\r\n                            <Box display=\"flex\" className={classes.input}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"monto_abrir\"\r\n                                    inputProps={{min: 0}}\r\n                                    type=\"number\"\r\n                                    onChange={obtenerTurno}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography> Comentarios:</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"comentarios\"\r\n                                    multiline\r\n                                    rows={5}\r\n                                    onChange={obtenerTurno}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Box display=\"flex\" alignItems='flex-end'>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        ABRIR TURNO\r\n                    </Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useState } from 'react'\r\nimport useStyles from '../styles';\r\nimport { Box,  Button,  DialogActions, \r\n        DialogContent,  FormControl, \r\n        Grid, MenuItem, Select, \r\n        TextField, Typography \r\n    } from '@material-ui/core'\r\nimport { REGISTRAR_TURNOS } from '../../../gql/Ventas/abrir_cerrar_turno';\r\n\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { useMutation } from '@apollo/client';\r\nimport { withRouter } from 'react-router-dom';\r\nmoment.locale('es');\r\n\r\nfunction  CerrarTurno(props) {\r\n    const { handleClickOpen, setLoading } = props;\r\n    const [ CrearRegistroDeTurno ] = useMutation(REGISTRAR_TURNOS);\r\n    const { setAlert, setTurnoActivo, ubicacionTurno } = useContext(VentasContext);\r\n    const [ error, setError] = useState(false);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const classes = useStyles();\r\n    const [ montoTurno, setMontoTurno ] = useState([]);\r\n    const [ cerrarTurno, setCerrarTurno ] = useState([]);\r\n\r\n    const obtenerCamposMontos = (e) => { \r\n        setMontoTurno({...montoTurno, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const obtenerCampos = (e) => { \r\n        setCerrarTurno({...cerrarTurno, [e.target.name]: e.target.value})\r\n    };\r\n    \r\n    const input = {\r\n        horario_en_turno: cerrarTurno.horario_en_turno,\r\n        concepto: \"CERRAR TURNO\",\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n        numero_caja: turnoEnCurso ? turnoEnCurso?.numero_caja.toString() : \"\",\r\n        comentarios: cerrarTurno.comentarios,\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        id_usuario: sesion._id,\r\n        usuario_en_turno: {\r\n            nombre: sesion.nombre,\r\n            telefono: sesion.telefono,\r\n            numero_usuario: sesion.numero_usuario.toString(),\r\n            email: sesion.email,\r\n        },\r\n        hora_entrada: {\r\n            hora:  \"\",\r\n            minutos: \"\",\r\n            segundos:  \"\",\r\n            completa: \"\"\r\n        },\r\n        hora_salida: {\r\n            hora: moment().format('hh'),\r\n            minutos: moment().format('mm'),\r\n            segundos: moment().format('ss'),\r\n            completa: moment().format('HH:mm:ss')\r\n        },\r\n        fecha_entrada:{\r\n            year: \"\",\r\n            mes: \"\",\r\n            dia: \"\",\r\n            no_semana_year: \"\",\r\n            no_dia_year: \"\",\r\n            completa: \"\"\r\n        },\r\n        fecha_salida:{\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().format(\"YYYY-MM-DD\")\r\n        },\r\n        fecha_movimiento: moment().locale('es-mx').format(),\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto:  parseFloat(montoTurno.monto_efectivo ? montoTurno.monto_efectivo : 0),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: parseFloat(montoTurno.monto_tarjeta_debito ? montoTurno.monto_tarjeta_debito : 0),\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: parseFloat(montoTurno.monto_tarjeta_credito ? montoTurno.monto_tarjeta_credito : 0),\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: parseFloat(montoTurno.monto_creditos ? montoTurno.monto_creditos : 0 ),\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: parseFloat(montoTurno.monto_puntos ? montoTurno.monto_puntos : 0),\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: parseFloat(montoTurno.monto_transferencia ? montoTurno.monto_transferencia : 0),\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: parseFloat(montoTurno.monto_cheques ? montoTurno.monto_cheques : 0),\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: parseFloat(montoTurno.monto_vales_despensa ? montoTurno.monto_vales_despensa : 0),\r\n                metodo_pago: \"08\"\r\n            },\r\n        }\r\n    };\r\n\r\n    let arraySesion = {\r\n        accesos: sesion.accesos,\r\n        email: sesion.email,\r\n        empresa: sesion.empresa,\r\n        estado: sesion.estado,\r\n        exp: sesion.exp,\r\n        iat: sesion.iat,\r\n        imagen: sesion.imagen,\r\n        nombre: sesion.nombre,\r\n        numero_usuario: sesion.numero_usuario,\r\n        sucursal: sesion.sucursal,\r\n        telefono: sesion.telefono,\r\n        turno_en_caja_activo: false, \r\n        _id: sesion._id,\r\n    };\r\n\r\n    const actualizarTurnoSesion  = (ubicacionTurno) => {\r\n        if (ubicacionTurno === 'SESION') {\r\n            localStorage.removeItem('sesionCafi');\r\n\t\t\tlocalStorage.removeItem('tokenCafi');\r\n            localStorage.removeItem('turnoEnCurso');\r\n            localStorage.removeItem('ListaEnEspera');\r\n            localStorage.removeItem('DatosVentas');\r\n\t\t\tprops.history.push('/');\r\n        }else{\r\n            localStorage.setItem('sesionCafi', JSON.stringify(arraySesion));\r\n            localStorage.removeItem('DatosVentas');\r\n            localStorage.removeItem('ListaEnEspera');\r\n            localStorage.removeItem('turnoEnCurso');\r\n        }\r\n    };\r\n\r\n    const enviarDatos  = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if(!cerrarTurno.horario_en_turno){\r\n                setError(true);\r\n                setLoading(false);\r\n                setAlert({\r\n                    message: `Por favor elija que turno esta cerrando`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return;\r\n            }else{\r\n                await CrearRegistroDeTurno({\r\n                    variables: {\r\n                        activa: false,\r\n                        input\r\n                    }\r\n                });\r\n                setAlert({\r\n                    message: `Turno cerrado con exito`,\r\n                    status: \"success\",\r\n                    open: true,\r\n                });\r\n\r\n                actualizarTurnoSesion(ubicacionTurno);\r\n\r\n                setLoading(false);\r\n                handleClickOpen();\r\n                setTurnoActivo(true);\r\n            }\r\n        } catch (error) {\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            setLoading(false);\r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <DialogContent style={{padding: 0}}>\r\n            <Box width=\"100%\" textAlign=\"center\">\r\n                <Typography variant=\"h6\">Montos a Depositar</Typography>\r\n            </Box>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Monto Efectivo:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_efectivo\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Creditos:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_creditos\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Tarjeta Debito:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_tarjeta_debito\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Tarjeta Credito:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_tarjeta_credito\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                \r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Monedero:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_puntos\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Transferencias:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_transferencia\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Cheques:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_cheques\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Vales de despensa:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_vales_despensa\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n                <Grid container >\r\n                    <Grid item lg={6}>\r\n                        <Box mt={1} textAlign=\"center\">\r\n                            <Typography >\r\n                                <b>Monto total efectivo:  </b>\r\n                            </Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} justify='flex-end'>\r\n                        <Box mt={1} textAlign=\"center\" >\r\n                            <Typography>\r\n                                 ${montoTurno.monto_efectivo} Mx.\r\n                            </Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <span className=\"obligatorio\">* </span> Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                onChange={obtenerCampos}\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_en_turno\"\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Comentarios:</Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                multiline\r\n                                onChange={obtenerCampos}\r\n                                rows={2}\r\n                                size=\"small\"\r\n                                name=\"comentarios\"\r\n                                id=\"form-producto-codigo-barras\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Box display=\"flex\" alignItems='flex-end'>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(CerrarTurno);\r\n","import React, { useContext, useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { AppBar, Box, Button, CircularProgress, Dialog, DialogContent, Grid, makeStyles, Slide, Tab, Tabs, Typography } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport AbrirTurno from './AbrirTurno';\r\nimport CerrarTurno from './CerrarTurno';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nmoment.locale('es');\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3} height=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(0)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(0)}px`\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 50\r\n\t},\r\n\tdialogContent: {\r\n\t\tpadding: 0\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Turnos() {\r\n\tconst { abrirTurnosDialog, setAbrirTurnosDialog, setTurnoActivo } = useContext(VentasContext);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const classes = useStyles();\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\tconst handleClickOpen = () => { \r\n\t\tsetAbrirTurnosDialog(!abrirTurnosDialog);\r\n\t\tsetTurnoActivo(true);\r\n\t};\r\n\r\n\twindow.addEventListener('keydown', Mi_función); \r\n\r\n\tif(!turnoEnCurso){\r\n\t\tconsole.log(true);\r\n\t}else{\r\n\t\tconsole.log(false);\r\n\t}\r\n\r\n\tfunction Mi_función(e){\r\n\t\tif(e.altKey && e.keyCode === 85){ \r\n\t\t\thandleClickOpen();\r\n\t\t} \r\n\t};\r\n\r\n    return (\r\n        <>\r\n\t\t\t<Button\r\n                onClick={() => handleClickOpen()}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\" style={{height: '100%', width: '100%'}}>\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg'\r\n                            alt=\"icono caja\" \r\n                            style={{width: 20}}\r\n                        />\r\n                    </Box>\r\n\t\t\t\t\t<Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Abrir/Cerrar turno</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + U</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\t\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={abrirTurnosDialog} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n            <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Cerrar Turno\"\r\n\t\t\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg' alt=\"icono almacen\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Abrir Turno\"\r\n\t\t\t\t\t\t\t\ticon={<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg' alt=\"icono almacen\" className={classes.iconSvg} />}\r\n\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t/>\t\t\t\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Grid container justify='flex-end'>\r\n\t\t\t\t\t\t\t<Box mt={2} textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('L')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('LT')} hrs.\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\tCaja {!turnoEnCurso ? null : turnoEnCurso.numero_caja }\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Box mt={3} ml={3}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"medium\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n                <ContenidoTurnos handleClickOpen={handleClickOpen} value={value} /> \r\n\t\t\t</Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nconst ContenidoTurnos = ({ handleClickOpen, value}) => {\r\n\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<DialogContent style={{padding: 0}}>\r\n\t\t\t{sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n\t\t\t\t<TabPanel style={{padding: 0}} value={value} index={0}>\r\n\t\t\t\t\t<CerrarTurno  setLoading={setLoading} handleClickOpen={handleClickOpen} />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t): (\r\n\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t<AbrirTurno loading={loading} setLoading={setLoading} handleClickOpen={handleClickOpen} />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t)}\r\n\t\t</DialogContent>\r\n\t)\r\n};\r\n","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Grid, Slide, Typography } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_PRE_CORTE_CAJA } from '../../../gql/Cajas/cajas';\r\nmoment.locale('es');\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreCorteCaja() {\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const input = { \r\n        horario_en_turno: \"ABRIR TURNO\",\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        id_usuario: sesion._id,\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\"\r\n    };\r\n\r\n    const { data, refetch} = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n        variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id, input: input},\r\n    });\r\n\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen = () => { \r\n        if(sesion.accesos.ventas.pre_corte.ver === true){\r\n\t\t\tsetOpen(!open);\r\n\t\t};\r\n\t};\r\n    \r\n    if(!data) return null;\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 79){ \r\n            handleClickOpen();\r\n            refetch();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={() =>{\r\n                    handleClickOpen()\r\n                    refetch()\r\n                }}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 20}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Pre corte caja</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + O</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\t\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container>\r\n                        <Grid item lg={10}>\r\n                            <Box\r\n                                display=\"flex\" \r\n                                alignItems=\"center\"\r\n                            >\r\n                                <Box>\r\n                                    <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                                </Box>\r\n                                <Box ml={2}>\r\n                                    <Box textAlign=\"left\">\r\n                                        <Typography variant=\"h6\">\r\n                                            Pre-Corte de Caja\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box display=\"flex\">\r\n                                        <Box textAlign=\"right\">\r\n                                            <Typography variant=\"caption\">\r\n                                                {moment().format('MM/DD/YYYY')}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>{moment().format('h:mm')} hrs.</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={2}>\r\n                            <Box ml={4} display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon />\r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid>\r\n                        <Box p={2}>\r\n                        {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                            <>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Usuario: </b> {sesion.nombre}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Caja: </b> {turnoEnCurso ? turnoEnCurso.numero_caja : ''}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Fecha y hora al precorte: </b> \r\n                                    </Typography>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        {moment().format('MMMM D YYYY, h:mm:ss a')}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box textAlign=\"center\" p={2}>\r\n                                    <Typography variant=\"h6\"> \r\n                                        <b>Monto total en efectivo: </b> \r\n                                    </Typography>\r\n                                    <Typography variant=\"h3\" style={{color: \"green\"}}> \r\n                                        <b>${data?.obtenerPreCorteCaja?.monto_efectivo_precorte}</b> \r\n                                    </Typography>\r\n                                </Box>\r\n                            </>\r\n                        ) : (\r\n                            <Box textAlign=\"center\" p={2}>\r\n                                <Typography variant=\"h6\"> \r\n                                    <b>Por el momento no hay un turno en sesión</b> \r\n                                </Typography>\r\n                            </Box>\r\n                        )}\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogContent>\r\n                \r\n                <DialogActions>\r\n                    {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                        <Button \r\n                            onClick={handleClickOpen} \r\n                            color=\"primary\"\r\n                            variant=\"outlined\"\r\n                            size=\"large\"\r\n                            autoFocus\r\n                        >\r\n                            Imprimir Ticket\r\n                        </Button>\r\n                    ) : null }\r\n                </DialogActions>\r\n\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COTIZACION = gql`\r\nmutation crearCotizacion( $input: CrearVentasInput!, $empresa: ID!, $sucursal: ID!, $usuario: ID!, $caja: ID!) {\r\n    crearCotizacion(input: $input, empresa: $empresa, sucursal: $sucursal, usuario: $usuario, caja: $caja, ) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { useContext, useState } from 'react';\r\nimport {\r\n    Box, Button, DialogActions, DialogContent, \r\n    FormControl, Grid, MenuItem, \r\n    Paper, \r\n    Select, Slider, TextField, Typography \r\n} from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport MoneyOffIcon from '@material-ui/icons/MoneyOff';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { CREAR_COTIZACION } from \"../../../gql/Ventas/cotizaciones\";\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nexport default function NuevaCotizacion({ handleClickOpen }) {\r\n    const { setAlert } = useContext(VentasContext);\r\n\r\n    const [ CrearCotizacion ] = useMutation(CREAR_COTIZACION);\r\n\r\n    const datosVentas = JSON.parse(localStorage.getItem('DatosVentas'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ newCotizacion, setNewCotizacion ] = useState([]);\r\n    const [ preciosDescuentos, setPreciosDescuentos ] = useState([]);\r\n    const [ totalDescount, setTotalDescount ] = useState(preciosDescuentos ? preciosDescuentos?.descuento_general?.precio_con_descuento : 0);\r\n    const [ value, setValue ] =  useState(preciosDescuentos?.descuento_general?.porciento ? preciosDescuentos?.descuento_general?.porciento : 0);\r\n\r\n    let descuento_general = [];\r\n    var totalCompra = datosVentas?.total;\r\n\r\n    \r\n    const classes = useStyles();\r\n    \r\n\r\n    const obtenerDatos = (e) => {\r\n        setNewCotizacion({...newCotizacion, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    // const input = {\r\n    //     folio: \"\",\r\n    //     descuento: datosVentas.descuento,\r\n    //     ieps: datosVentas.ieps,\r\n    //     impuestos: datosVentas.impuestos,\r\n    //     iva: datosVentas.iva,\r\n    //     monedero: datosVentas.monedero,\r\n    //     subTotal: datosVentas.subTotal,\r\n    //     total: datosVentas.total,\r\n    //     venta_cliente: false,\r\n    //     montos_en_caja: {},\r\n    //     credito: false,\r\n    //     descuento_general_activo: preciosDescuentos?.descuento_general_activo ? preciosDescuentos?.descuento_general_activo : false,\r\n    //     decuento_general: preciosDescuentos?.descuento_general ? preciosDescuentos?.descuento_general :\r\n    //     {\r\n    //         \"porciento\": 0,\r\n    //         \"precio_con_descuento\": 0,\r\n    //         \"cantidad_descontado\": 0\r\n    //     },\r\n    //     dias_de_credito_venta: \"\",\r\n    //     fecha_de_vencimiento_credito: \"\",\r\n    //     fecha_vencimiento_cotizacion: newCotizacion.fecha_vencimiento,\r\n    //     cliente: datosVentas.cliente,\r\n    //     productos: datosVentas.productos,\r\n    //     tipo_venta: newCotizacion.tipo_venta,\r\n    // };\r\n\r\n    const input = {\r\n        \"folio\": \"12345\",\r\n        \"descuento\": datosVentas.descuento,\r\n        \"ieps\": datosVentas.ieps,\r\n        \"impuestos\": datosVentas.impuestos,\r\n        \"iva\": datosVentas.iva,\r\n        \"monedero\": datosVentas.monedero,\r\n        \"subTotal\": datosVentas.subTotal,\r\n        \"total\": datosVentas.total,\r\n        \"venta_cliente\": false,\r\n        \"montos_en_caja\": {},\r\n        \"credito\": false,\r\n        \"descuento_general_activo\": preciosDescuentos?.descuento_general_activo ? preciosDescuentos?.descuento_general_activo : false,\r\n        \"decuento_general\": preciosDescuentos?.descuento_general ? preciosDescuentos?.descuento_general :\r\n        {\r\n            \"porciento\": 0,\r\n            \"precio_con_descuento\": 0,\r\n            \"cantidad_descontado\": 0\r\n        },\r\n        \"dias_de_credito_venta\": null,\r\n        \"fecha_de_vencimiento_credito\": null,\r\n        \"fecha_vencimiento_cotizacion\": newCotizacion.fecha_vencimiento,\r\n        \"cliente\":{\r\n            \"banco\": null,\r\n            \"celular\": null,\r\n            \"clave_cliente\": \"23233\",\r\n            \"curp\": null,\r\n            \"dias_credito\": null,\r\n            \"direccion\":{\r\n                \"calle\": \"Antonio\",\r\n                \"no_ext\": \"1\",\r\n                \"no_int\": \"1\",\r\n                \"codigo_postal\": \"1\",\r\n                \"colonia\": \"Antonio\",\r\n                \"municipio\": \"1\",\r\n                \"localidad\": \"1\",\r\n                \"estado\": \"1\",\r\n                \"pais\": \"1\"\r\n            },\r\n            \"email\": \"antonio.poday@gmail.com\",\r\n            \"imagen\": null,\r\n            \"limite_credito\": null,\r\n            \"nombre_cliente\": \"Antonio\",\r\n            \"numero_cliente\": \"2323\",\r\n            \"razon_social\": null,\r\n            \"rfc\": null,\r\n            \"telefono\": \"1212\",\r\n            \"monedero_electronico\": null\r\n        },\r\n        \"productos\": [\r\n        {\r\n            \"cantidad\": 1,\r\n            \"cantidad_venta\": 1,\r\n            \"codigo_barras\": \"226216505720\",\r\n            \"concepto\": \"unidades\",\r\n            \"default\": true,\r\n            \"descuento\": {\r\n                \"porciento\": 15,\r\n                \"dinero_descontado\": 5.4,\r\n                \"precio_con_descuento\": 30.6\r\n            },\r\n            \"descuento_activo\": true,\r\n                \"granel_producto\": {\r\n                \"granel\": false,\r\n                \"valor\": 0\r\n            },\r\n            \"precio\": 8.25,\r\n            \"precio_a_vender\": 8.25,\r\n            \"precio_actual_producto\": 8.25,\r\n            \"precio_anterior\":8.25,\r\n            \"iva_total_producto\": 1.03,\r\n            \"ieps_total_producto\": 0,\r\n            \"impuestos_total_producto\": 1.03,\r\n            \"subtotal_total_producto\": 7.22,\r\n            \"total_total_producto\": 8.25,\r\n            \"unidad\": \"Caja\",\r\n            \"codigo_unidad\": \"XBX\",\r\n            \"unidad_principal\": true,\r\n            \"inventario_general\": [\r\n                {\r\n                    \"cantidad_existente\": 120,\r\n                    \"cantidad_existente_maxima\": 10,\r\n                    \"unidad_inventario\": \"Pz\",\r\n                    \"codigo_unidad\": null,\r\n                    \"unidad_maxima\": \"Caja\"\r\n                }\r\n            ],\r\n            \"id_producto\":{\r\n                \"_id\": \"61b7bf6e3454b727a0c2e357\",\r\n                \"datos_generales\": {\r\n                    \"clave_alterna\": \"COCA\",\r\n                    \"codigo_barras\": \"226216505720\",\r\n                    \"nombre_comercial\": \"COCACOLA\",\r\n                    \"tipo_producto\": \"OTROS\",\r\n                    \"nombre_generico\": \"COCACOLA\",\r\n                    \"descripcion\": null,\r\n                    \"id_categoria\": null,\r\n                    \"categoria\": null,\r\n                    \"subcategoria\": null,\r\n                    \"id_subcategoria\": null,\r\n                    \"id_departamento\": null,\r\n                    \"departamento\": null,\r\n                    \"id_marca\": null,\r\n                    \"marca\": null,\r\n                    \"receta_farmacia\": false,\r\n                    \"clave_producto_sat\":{\r\n                        \"Name\": \"Refrescos\",\r\n                        \"Value\": \"50202306\"\r\n                    }\r\n                },\r\n                \"imagenes\":[{\r\n                    \"url_imagen\": \"\"\r\n                }],\r\n                \"precios\":{\r\n                    \"ieps\": 10,\r\n                    \"ieps_activo\": false,\r\n                    \"inventario\": {\r\n                        \"inventario_maximo\": 15,\r\n                        \"inventario_minimo\": 5,\r\n                        \"unidad_de_inventario\": \"Caja\",\r\n                        \"codigo_unidad\": \"XBX\"\r\n                    },\r\n                    \"iva\": 16,\r\n                    \"iva_activo\": true,\r\n                    \"monedero\": false,\r\n                    \"monedero_electronico\": 0,\r\n                    \"precio_de_compra\": {\r\n                        \"precio_con_impuesto\": 180,\r\n                        \"precio_sin_impuesto\": 155.1724,\r\n                        \"iva\": 24.8276,\r\n                        \"ieps\": 0\r\n                    },\r\n                    \"precios_producto\": [\r\n                        {\r\n                            \"numero_precio\": 1,\r\n                            \"precio_neto\": 8.25,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 10\r\n                        },\r\n                        {\r\n                            \"numero_precio\": 2,\r\n                            \"precio_neto\": 0,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 0\r\n                        },\r\n                        {\r\n                            \"numero_precio\": 3,\r\n                            \"precio_neto\": 0,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 0\r\n                        },\r\n                        {\r\n                            \"numero_precio\": 4,\r\n                            \"precio_neto\": 0,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 0\r\n                        },\r\n                        {\r\n                            \"numero_precio\": 5,\r\n                            \"precio_neto\": 0,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 0\r\n                        },\r\n                        {\r\n                            \"numero_precio\": 6,\r\n                            \"precio_neto\": 0,\r\n                            \"unidad_mayoreo\": 0,\r\n                            \"utilidad\": 0\r\n                        }\r\n                        ],\r\n                    \"unidad_de_compra\": {\r\n                        \"cantidad\": 24,\r\n                        \"precio_unitario_con_impuesto\": 7.5,\r\n                        \"precio_unitario_sin_impuesto\": 6.4655,\r\n                        \"unidad\": \"Caja\",\r\n                        \"codigo_unidad\": \"XBX\"\r\n                    }\r\n                }\r\n            },\r\n            \"medida\": null,\r\n            \"color\": null\r\n        }]\r\n    };\r\n\r\n    const crearCotizacion = async () => {\r\n        try {\r\n            if(!newCotizacion.fecha_vencimiento || !newCotizacion.tipo_venta){\r\n                setAlert({\r\n                    message: `Por favor completa los datos necesarios`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }else{\r\n                const registroCotizacion = await CrearCotizacion({\r\n                    variables: {\r\n                        input,\r\n                        empresa: \"60c120b6a694891f58d32a1d\",\r\n                        sucursal: \"60c8e180340d5d223432a916\",\r\n                        usuario: \"60dde52c5cda9d5510c4b7d0\",\r\n                        caja: \"61a5037918594a4ecdc1c7bf\"\r\n                    }\r\n                });\r\n                console.log(registroCotizacion);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n            if(error.networkError.result){\r\n\t\t\t\tconsole.log(error.networkError.result.errors);\r\n\t\t\t  }else if(error.graphQLErrors){\r\n\t\t\t\tconsole.log(error.graphQLErrors.message);\r\n\t\t\t  }\r\n\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    console.log(datosVentas);\r\n\r\n    const obtenerPorciento = (event, newValue) => {\r\n        setValue(newValue);\r\n        var porcentaje  =  parseFloat((100 - newValue).toFixed(6));\r\n        var descuento = parseFloat((totalCompra * porcentaje / 100).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - descuento).toFixed(6));\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": newValue,\r\n                \"precio_con_descuento\": descuento,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setTotalDescount(descuento);\r\n    };\r\n    \r\n    const obtenerPrecioText = (e) => {\r\n        var valorText = parseFloat(e.target.value);\r\n        setTotalDescount(valorText);\r\n        var porcentaje  = parseFloat(((valorText / totalCompra) * 100).toFixed(6));\r\n        var descuento = parseFloat((100 - porcentaje).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - valorText).toFixed(6));\r\n\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": descuento,\r\n                \"precio_con_descuento\": valorText,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setValue(descuento);\r\n    };\r\n\r\n    const eliminarDescuento = () => { \r\n        descuento_general = {\r\n            \"descuento_general_activo\": false,\r\n            \"descuento_general\": {\r\n                \"porciento\": 0,\r\n                \"precio_con_descuento\": 0,\r\n                \"cantidad_descontado\": 0\r\n            }\r\n        };\r\n        setValue(0);\r\n        setTotalDescount(0);\r\n        setPreciosDescuentos(descuento_general);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DialogContent style={{padding: 0}} >\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Usuario:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                                value={sesion ? sesion.nombre : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={moment().format('L')}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas.cliente?.nombre_cliente ? datosVentas.cliente?.nombre_cliente : \"Publico General\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha Vencimiento:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                type='date'\r\n                                onChange={obtenerDatos}\r\n                                size=\"small\"\r\n                                name=\"fecha_vencimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            No. Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas ? datosVentas.cliente?.numero_cliente : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Tipo de Venta:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                onChange={obtenerDatos}\r\n                                name=\"tipo_venta\"\r\n                            >\r\n                                <MenuItem value=''>\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value='CREDITO'>Credito</MenuItem>\r\n                                <MenuItem value='CONTADO'>Contado</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid lg={6}>\r\n                        <Box p={1}>\r\n                            <Paper elevation={3} >\r\n                                <Box p={2} textAlign={'center'}>\r\n                                    <Typography variant=\"h6\">\r\n                                        Agregar descuento total a la venta.\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box textAlign={'center'} p={2}>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"95%\">\r\n                                            <Box display=\"flex\" alignItems=\"center\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={1}>\r\n                                                    <img \r\n                                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png' \r\n                                                        alt=\"icono admin\" \r\n                                                        style={{width: 30}}                                   \r\n                                                    />\r\n                                                </Box>\r\n                                                <Typography variant=\"h6\">\r\n                                                    Porciento descuento\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                                <Slider\r\n                                                    getAriaValueText={valuetext}\r\n                                                    value={value.toFixed(2)}\r\n                                                    aria-labelledby=\"discrete-slider-small-steps\"\r\n                                                    valueLabelDisplay=\"auto\"\r\n                                                    onChange={obtenerPorciento} \r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\">\r\n                                            <Typography variant=\"h6\" >\r\n                                                Total con descuento:\r\n                                            </Typography>\r\n                                            <Box display=\"flex\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mr={1}>\r\n                                                    <MoneyOffIcon style={{fontSize: 38, color: \"green\"}} />\r\n                                                </Box>\r\n                                                <TextField\r\n                                                    fullWidth\r\n                                                    size=\"small\"\r\n                                                    type=\"number\"\r\n                                                    name=\"precioConDescuento\"\r\n                                                    onChange={obtenerPrecioText}\r\n                                                    value={totalDescount}\r\n                                                    className={classes.input}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box \r\n                                    p={1}\r\n                                    display=\"flex\"\r\n                                    flexDirection='row-reverse'\r\n                                >\r\n                                    <Button \r\n                                        variant=\"outlined\"\r\n                                        color=\"secondary\"\r\n                                        size=\"large\"\r\n                                        onClick={eliminarDescuento}\r\n                                    >\r\n                                        Eliminar Descuento\r\n                                    </Button>\r\n                                </Box>\r\n                            </Paper>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid lg={6}>\r\n                        <Box mr={2} mt={2}>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>No. Productos: </b> {datosVentas.productos.length}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Sub total:</b> ${datosVentas ? (datosVentas.subTotal).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Impuestos:</b> ${datosVentas ? (datosVentas.impuestos).toFixed(2): 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>I.V.A.:</b> ${datosVentas ? (datosVentas.iva).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Descuento:</b> <b style={{color: \"green\"}}>${preciosDescuentos?.descuento_general ? (preciosDescuentos?.descuento_general?.cantidad_descontado).toFixed(2) : 0} </b>\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n                            <Typography variant=\"h4\">\r\n                                Total: \r\n                                <b style={{color: \"green\"}}>\r\n                                    ${preciosDescuentos?.descuento_general && preciosDescuentos?.descuento_general?.precio_con_descuento > 0? \r\n                                    (preciosDescuentos?.descuento_general?.precio_con_descuento).toFixed(2) : (\r\n                                        datosVentas ? (datosVentas.total).toFixed(2) : 0\r\n                                    )}\r\n                                </b>\r\n                            </Typography>\r\n                            <Box mt={.5} mr={1}>\r\n                                <MonetizationOnIcon style={{fontSize: 37, color: \"green\"}} />\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                    onClick={crearCotizacion}\r\n                >\r\n                    Crear cotización\r\n                </Button>\r\n                <Button\r\n                    color=\"secondary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                    onClick={handleClickOpen}\r\n                >\r\n                    Cancelar\r\n                </Button>\r\n            </DialogActions>\r\n        </>\r\n    )\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'}\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10)\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t}\r\n});\r\n\r\nexport default function CotizacionesPendientes({ handleClickOpen }) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRetomar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<CotizacionesRows row={row} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst CotizacionesRows = ({row}) => {\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n\r\n}\r\n","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { AppBar, Box, Button, CircularProgress, \r\n\t\tDialog, Tab, Grid, Slide, Tabs, Typography \r\n} from '@material-ui/core'\r\nimport { FcCurrencyExchange } from 'react-icons/fc';\r\nimport NuevaCotizacion from './NuevaCotizacion';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport CotizacionesPendientes from './CotizacionesPendientes';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3} height=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nexport default function Cotizacion({type}) {\r\n\r\n    moment.locale('es');\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const datosVentas = JSON.parse(localStorage.getItem('DatosVentas'));\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n    const handleClickOpen = () => {\r\n\t\tif(sesion?.accesos.ventas.cotizaciones.ver === true){\r\n            setOpen(!open);\r\n        }\r\n\t};\r\n\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 84){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n\t\t\t{\r\n\t\t\t\ttype === \"GENERAR\" ? (\r\n\t\t\t\t\tdatosVentas ? (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tstartIcon={<FcCurrencyExchange style={{fontSize: 30}} />}\r\n\t\t\t\t\t\t\tonClick={() =>{handleClickOpen()}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tGenerar Cotización\r\n\t\t\t\t\t\t</Button>\t\r\n\t\t\t\t\t) : \"\"\r\n\t\t\t) : (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={() =>{handleClickOpen();}}\r\n\t\t\t\t\tstyle={{textTransform: 'none', height: '100%', width: '60%'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcCurrencyExchange style={{fontSize: 25}} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t\t<b>Cotizaciones</b>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography variant=\"caption\" style={{color: '#808080'}} >\r\n\t\t\t\t\t\t\t\t<b>Alt + T</b>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t)\r\n\t\t\t}\r\n        \t<Dialog\r\n\t\t\t\tfullWidth\r\n\t\t\t\topen={open} \r\n\t\t\t\tmaxWidth={type===\"GENERAR\"?'md':'lg'}\r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{type === \"GENERAR\" ? (\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Nueva Cotización\"\r\n\t\t\t\t\t\t\t\ticon={ <FcCurrencyExchange style={{fontSize: 60}} />}\r\n\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\tlabel=\"Cotizaciones pendientes\"\r\n\t\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\t\tsrc='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' \r\n\t\t\t\t\t\t\t\t\t\talt=\"icono caja2\" \r\n\t\t\t\t\t\t\t\t\t\tstyle={{width: 58}} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{...a11yProps(1)}\r\n\t\t\t\t\t\t\t/>\t\t\r\n\t\t\t\t\t\t)}\t\r\n\t\t\t\t\t\t<Grid container justify='flex-end'>\r\n\t\t\t\t\t\t\t<Box mt={2} textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('L')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('LT')} hrs.\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\t{sesion?.nombre}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box textAlign=\"right\">\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\r\n\t\t\t\t\t\t\t\t\t\tCaja {!turnoEnCurso ? null : turnoEnCurso.numero_caja }\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Box mt={3} ml={3}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"medium\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<VentanasCotizaciones \r\n\t\t\t\t\thandleClickOpen={handleClickOpen} \r\n\t\t\t\t\tvalue={value} \r\n\t\t\t\t\ttype={type} \r\n\t\t\t\t/> \r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n\r\nconst VentanasCotizaciones = ({ handleClickOpen, value, type}) => {\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\ttype === \"GENERAR\" ? (\r\n\t\t\t<TabPanel style={{padding: 0}} value={value} index={0}>\r\n\t\t\t\t<NuevaCotizacion handleClickOpen={handleClickOpen} />\r\n\t\t\t</TabPanel>\r\n\t\t) : (\r\n\t\t\t<TabPanel style={{padding: 0}} value={value} index={0}>\r\n\t\t\t\t<CotizacionesPendientes handleClickOpen={handleClickOpen} /> \r\n\t\t\t</TabPanel>\r\n\t\t)\r\n\t)\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogActions, \r\n        DialogContent, Divider, Grid, \r\n        Slide, Typography \r\n    } from '@material-ui/core'\r\nimport { FcExpired } from 'react-icons/fc';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nmoment.locale('es');\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaEnEspera() {\r\n    const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 69){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    const agregarVentaEnEspera = () => {\r\n        let VentaEnEspera = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n        let datos = localStorage.getItem(\"ListaEnEspera\");\r\n        if(VentaEnEspera !== null){\r\n            if(datos === null){\r\n                localStorage.setItem('ListaEnEspera', JSON.stringify([{VentaEnEspera, fecha: moment().format('MM/DD/YYYY') }]));\r\n                localStorage.removeItem('DatosVentas');\r\n                setUpdateTablaVentas(!updateTablaVentas);\r\n            }else{\r\n                let data = JSON.parse(datos);\r\n                data.push({VentaEnEspera, fecha: moment().format('MM/DD/YYYY') });\r\n                localStorage.setItem(\"ListaEnEspera\", JSON.stringify(data));\r\n                localStorage.removeItem('DatosVentas');\r\n                setUpdateTablaVentas(!updateTablaVentas);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button\r\n                onClick={() => agregarVentaEnEspera()} \r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcExpired style={{fontSize: 25}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>En espera</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + E</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\" \r\n                            textAlign=\"center\" \r\n                            justifyContent=\"center\" \r\n                            alignContent=\"center\" \r\n                            alignSelf=\"center\"\r\n                            justifySelf=\"center\"\r\n                        >\r\n                            <Box>\r\n                                <FcExpired style={{fontSize: 80}} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h5\">\r\n                                    Venta pasada a espera\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={() =>{handleClickOpen();}}\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { Fragment, useContext } from 'react';\r\n\r\nimport { Box,  Button, Checkbox, Divider, FormControl, FormControlLabel, FormHelperText, InputAdornment, makeStyles, MenuItem, OutlinedInput, Select, TextField, Typography } from '@material-ui/core';\r\nimport { RegProductoContext } from '../../../context/Catalogos/CtxRegProducto';\r\nimport CatalogosProductosSAT from '../../sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT';\r\n// import RegistroInfoAdidional from '../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    formInput: {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    }\r\n  }));\r\n\r\nexport default function RegistroInformacionRapido({ \r\n\tsetAbrirTallaColor, \r\n\tsetCantidad, \r\n\tcantidad,\r\n\tobtenerConsultasProducto,\r\n\trefetch,\r\n}) {\r\n\tconst { datos_generales, precios, setPrecios, setDatosGenerales, validacion } = useContext(RegProductoContext);\r\n\tconst { unidadVentaXDefecto, setUnidadVentaXDefecto, update } = useContext(RegProductoContext);\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tif (e.target.name === 'codigo_barras') {\r\n\t\t\tsetUnidadVentaXDefecto({\r\n\t\t\t\t...unidadVentaXDefecto,\r\n\t\t\t\tcodigo_barras: e.target.value\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetDatosGenerales({\r\n\t\t\t...datos_generales,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\r\n\t\tif (e.target.value === \"CALZADO\" || e.target.value === \"ROPA\") {\r\n\t\t\tsetAbrirTallaColor(true);\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\tconst checkFarmacia = (e) => {\r\n\t\tsetDatosGenerales({\r\n\t\t\t...datos_generales,\r\n\t\t\treceta_farmacia: e.target.checked\r\n\t\t});\r\n\t};\r\n\r\n\tconst obtenerChecks = (e) => {\r\n\t\tif (e.target.name === 'granel' && e.target.checked) {\r\n\t\t\tsetPrecios({\r\n\t\t\t\t...precios,\r\n\t\t\t\t[e.target.name]: e.target.checked,\r\n\t\t\t\tinventario: { ...precios.inventario, unidad_de_inventario: 'Kg', },\r\n\t\t\t\tunidad_de_compra: { ...precios.unidad_de_compra, unidad: 'Kg', }\r\n\t\t\t});\r\n\t\t\tsetUnidadVentaXDefecto({\r\n\t\t\t\t...unidadVentaXDefecto,\r\n\t\t\t\tunidad: 'Kg',\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tsetPrecios({\r\n\t\t\t\t...precios,\r\n\t\t\t\t[e.target.name]: e.target.checked,\r\n\t\t\t\tinventario: { ...precios.inventario, unidad_de_inventario: 'Pz', },\r\n\t\t\t\tunidad_de_compra: { ...precios.unidad_de_compra, unidad: 'Pz', }\r\n\t\t\t});\r\n\t\t\tsetUnidadVentaXDefecto({\r\n\t\t\t\t...unidadVentaXDefecto,\r\n\t\t\t\tunidad: 'Pz',\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\tconst GenCodigoBarras = () => {\r\n\t\tconst max = 999999999999;\r\n\t\tconst min = 100000000000;\r\n\t\tconst codigo_barras = Math.floor(Math.random() * (max - min + 1) + min).toString();\r\n\t\tsetDatosGenerales({\r\n\t\t\t...datos_generales,\r\n\t\t\tcodigo_barras\r\n\t\t});\r\n\t\tsetUnidadVentaXDefecto({\r\n\t\t\t...unidadVentaXDefecto,\r\n\t\t\tcodigo_barras\r\n\t\t})\r\n\t};\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<b>Información General</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Divider />\r\n                <div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<FormControl variant=\"outlined\" size=\"small\" name=\"codigo_barras\" fullWidth>\r\n\t\t\t\t\t\t\t<Typography>Código de barras</Typography>\r\n\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\tdisabled={update && datos_generales.codigo_barras}\r\n\t\t\t\t\t\t\t\tstyle={{padding: 0}}\r\n\t\t\t\t\t\t\t\tid=\"form-producto-codigo-barras\"\r\n\t\t\t\t\t\t\t\tname=\"codigo_barras\"\r\n\t\t\t\t\t\t\t\tvalue={datos_generales.codigo_barras ? datos_generales.codigo_barras : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={update && datos_generales.codigo_barras}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => GenCodigoBarras()}\r\n\t\t\t\t\t\t\t\t\t\t\t/* edge=\"end\" */\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tGenerar\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<span className=\"obligatorio\">* </span>Clave alterna\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\terror={validacion.error && !datos_generales.clave_alterna}\r\n\t\t\t\t\t\t\tname=\"clave_alterna\"\r\n\t\t\t\t\t\t\tid=\"form-producto-clave-alterna\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={datos_generales.clave_alterna ? datos_generales.clave_alterna : ''}\r\n\t\t\t\t\t\t\thelperText={validacion.message}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<span className=\"obligatorio\">* </span>Nombre comercial\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\terror={validacion.error && !datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\tname=\"nombre_comercial\"\r\n\t\t\t\t\t\t\tid=\"form-producto-nombre-comercial\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={datos_generales.nombre_comercial ? datos_generales.nombre_comercial : ''}\r\n\t\t\t\t\t\t\thelperText={validacion.message}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<CatalogosProductosSAT refetch={refetch} codigos={obtenerConsultasProducto.codigos} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<span className=\"obligatorio\">* </span>Nombre genérico\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\terror={validacion.error && !datos_generales.nombre_generico}\r\n\t\t\t\t\t\t\tname=\"nombre_generico\"\r\n\t\t\t\t\t\t\tid=\"form-producto-nombre-generico\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={datos_generales.nombre_generico ? datos_generales.nombre_generico : ''}\r\n\t\t\t\t\t\t\thelperText={validacion.message}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"60%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<span className=\"obligatorio\">* </span>Tipo de producto\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\terror={validacion.error && !datos_generales.tipo_producto}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_producto\"\r\n\t\t\t\t\t\t\t\tvalue={datos_generales.tipo_producto ? datos_generales.tipo_producto : ''}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"OTROS\">Otros</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t<FormHelperText>{validacion.message}</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{datos_generales.tipo_producto === \"OTROS\" ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Box width=\"50%\">\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<span className=\"obligatorio\">* </span>Cantidad\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\terror={validacion.error && !cantidad}\r\n\t\t\t\t\t\t\t\t\tname=\"cantidad\"\r\n\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\tid=\"form-producto-nombre-generico\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tvalue={cantidad ? cantidad : ''}\r\n\t\t\t\t\t\t\t\t\thelperText={validacion.message}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setCantidad(parseInt(e.target.value))}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box width=\"80%\">\r\n\t\t\t\t\t\t\t\t<Typography>Granel</Typography>\r\n\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox onChange={obtenerChecks} name=\"granel\" />}\r\n\t\t\t\t\t\t\t\t\tlabel=\"Vender a granel\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box width=\"80%\">\r\n\t\t\t\t\t\t\t\t<Typography>Medicamento</Typography>\r\n\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t// checked={datos_generales.receta_farmacia ? datos_generales.receta_farmacia : false}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={checkFarmacia}\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"receta_farmacia\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlabel=\"Necesita receta\"\r\n\t\t\t\t\t\t\t\t\tname=\"receta_farmacia\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : null}\r\n                </div>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { useContext, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from '@material-ui/core';\r\nimport { Cached, Close, Edit } from '@material-ui/icons';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t},\r\n\ttableRow: {\r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\nexport default function TablaPresentaciones({ from, setOnUpdate, onUpdate }) {\r\n\tconst classes = useStyles();\r\n\tconst { presentaciones } = useContext(RegProductoContext);\r\n\r\n\tlet mostrar_presentaciones = [ ...presentaciones ].sort((a, b) => compareFunction(a, b));\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Existencia</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Código de barras</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell width={200}>Nombre</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Existente</TableCell>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Editar</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{mostrar_presentaciones.map((producto, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tfrom={from}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst RenderPresentacionesRows = ({ producto, index,  from, setOnUpdate, onUpdate }) => {\r\n\tconst { presentaciones, setPresentaciones, preciosP, precios } = useContext(RegProductoContext);\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst textfield = useRef(null);\r\n\r\n\tconst copy_presentaciones = [...presentaciones].sort((a, b) => compareFunction(a, b))\r\n\tconst copy_element_presentacion = { ...copy_presentaciones[index] };\r\n\tconst copy_producto = { ...producto };\r\n\r\n\tif(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad = 0\r\n\t}\r\n\t\r\n\tconst handleEditCancel = () => {\r\n\t\tif (!copy_producto.cantidad) {\r\n\t\t\tcopy_element_presentacion.cantidad = 0;\r\n\t\t}\r\n\t\tif (!copy_producto.precio) {\r\n\t\t\tcopy_element_presentacion.precio = preciosP[0].precio_neto;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t\tsetDisabledInput(true);\r\n\t};\r\n\r\n\tconst obtenerDatos = (event) => {\r\n\t\tconst {value, name }= event.target;\r\n\t\tconsole.log(name)\r\n\t\tif (name === 'cantidad') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.cantidad = '';\r\n\t\t\t\tcopy_element_presentacion.existencia = false;\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.cantidad = parseFloat(value);\r\n\t\t\tcopy_element_presentacion.existencia = true;\r\n\t\t} else if (name === 'precio') {\r\n\t\t\tlet { iva, ieps } = precios;\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.precio = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tlet precio_neto = parseFloat(value);\r\n\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\tlet suma_impuestos = parseFloat(`0.${varIVA}`) + parseFloat(`0.${varIEPS}`);\r\n\t\t\tlet precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n\t\t\tlet iva_precio = parseFloat((precio_venta * parseFloat(`0.${varIVA}`)).toFixed(2));\r\n\t\t\tlet ieps_precio = parseFloat((precio_venta * parseFloat(`0.${varIEPS}`)).toFixed(2));\r\n\t\t\tlet PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\t\t\tlet utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n\t\t\tcopy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n\t\t\tcopy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n\t\t\tcopy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n\t\t\t\r\n\t\t\tcopy_element_presentacion.precio = parseFloat(value);\r\n\t\t} else {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.codigo_barras = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.codigo_barras = value;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst GenCodigoBarras = () => {\r\n\t\tconst max = 999999999999;\r\n\t\tconst min = 100000000000;\r\n\t\tconst codigo_barras = Math.floor(Math.random() * (max - min + 1) + min).toString();\r\n\t\tcopy_element_presentacion.codigo_barras = codigo_barras;\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst actionButton = () => {\r\n\t\tif (!disabledInput) {\r\n\t\t\thandleEditCancel();\r\n\t\t\t/* quitar del array\t */\r\n\t\t\tonUpdate.splice(onUpdate.length - 1, 1);\r\n\t\t\tsetOnUpdate([ ...onUpdate ]);\r\n\t\t} else {\r\n\t\t\tsetDisabledInput(!disabledInput);\r\n\t\t\t/*  agregar al array */\r\n\t\t\tsetOnUpdate([ ...onUpdate, index ]);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={220}>\r\n\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\t\t/* disabled={disabledInput} */\r\n\t\t\t\t\t\tvalue={copy_producto.codigo_barras}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t\t\tdisabled={!copy_producto.nuevo ? true : disabledInput}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) :  copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Box>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.medida._id ? <Chip label={copy_producto.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_producto.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_producto.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={110}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.precio}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{producto.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t\t) : null}\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.cantidad}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"cantidad\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => actionButton()}>\r\n\t\t\t\t\t{!disabledInput ? <Close /> : <Edit />}\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { useContext, useState,  useEffect, useCallback } from 'react';\r\nimport { Typography, Divider, Tooltip, } from '@material-ui/core';\r\nimport { Box,Grid } from '@material-ui/core';\r\nimport { makeStyles, useTheme } from '@material-ui/core';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nimport { Done } from '@material-ui/icons';\r\nimport TablaPresentaciones from './TablaPresentaciones';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\n// import { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\n// import ContainerRegistroAlmacen from '../../../sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearColor';\r\nimport CrearTallasProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearTalla';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\theight: 50,\r\n\t\twidth: 50,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: '15%',\r\n\t\tcursor: 'pointer'\r\n\t}\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n\treturn Math.floor(Math.random() * (999999999999 - 100000000000 + 1) + 100000000000).toString();\r\n};\r\n\r\nexport default function TallasColoresRapidos({ \r\n\tobtenerConsultasProducto, \r\n\trefetch, \r\n\tdatos, \r\n\tfrom\r\n}) {\r\n\tconst {\r\n\t\t// almacen_inicial,\r\n\t\t// setAlmacenInicial,\r\n\t\tpresentaciones,\r\n\t\tdatos_generales,\r\n\t} = useContext(RegProductoContext);\r\n\tconst { colores, tallas, calzados } = obtenerConsultasProducto;\r\n\tconst [ medidasSeleccionadas, setMedidasSeleccionadas ] = useState([]);\r\n\tconst [ coloresSeleccionados, setColoresSeleccionados ] = useState([]);\r\n\tconst medidas = datos_generales.tipo_producto === 'ROPA' ? [ ...tallas ] : [ ...calzados ];\r\n\tconst [ onUpdate, setOnUpdate ] = useState([]);\r\n\r\n\tconst obtenerColoresSeleccinados = useCallback(\r\n\t\t() => {\r\n\t\t\tlet colors = [];\r\n\t\t\tlet medidas = [];\r\n\t\t\tconst copy_presentaciones = [ ...presentaciones ];\r\n\r\n\t\t\tcopy_presentaciones.forEach((element) => {\r\n\t\t\t\tif (element.color._id) colors.push(element.color);\r\n\t\t\t\tif (element.medida._id) medidas.push(element.medida);\r\n\t\t\t});\r\n\r\n\t\t\tvar hashColor = {};\r\n\t\t\tvar hashMedida = {};\r\n\t\t\tconst colores_existentes = colors.filter((color) => {\r\n\t\t\t\tvar existColor = !hashColor[color._id];\r\n\t\t\t\thashColor[color._id] = true;\r\n\t\t\t\treturn existColor;\r\n\t\t\t});\r\n\t\t\tconst medidas_existentes = medidas.filter((medida) => {\r\n\t\t\t\tvar existMedida = !hashMedida[medida._id];\r\n\t\t\t\thashMedida[medida._id] = true;\r\n\t\t\t\treturn existMedida;\r\n\t\t\t});\r\n\r\n\t\t\tsetColoresSeleccionados([ ...colores_existentes ]);\r\n\t\t\tsetMedidasSeleccionadas([ ...medidas_existentes ]);\r\n\t\t},\r\n\t\t[ presentaciones ]\r\n\t);\r\n\r\n\t// const obtenerAlmacenes = (event, child) => {\r\n\t// \tsetAlmacenInicial({\r\n\t// \t\t...almacen_inicial,\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\t[child.props.name]: child.props.id\r\n\t// \t});\r\n\t// };\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tobtenerColoresSeleccinados();\r\n\t\t},\r\n\t\t[ obtenerColoresSeleccinados ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={9}>\r\n\t\t\t\t\t<TablaPresentaciones from={from} setOnUpdate={setOnUpdate} onUpdate={onUpdate} />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={3}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmy={2}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>{datos_generales.tipo_producto === 'ROPA' ? 'Talla' : 'Número'}</Typography>\r\n\t\t\t\t\t\t<CrearTallasProducto setMedidasSeleccionadas={setMedidasSeleccionadas} refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{medidas.map((talla, index) => (\r\n\t\t\t\t\t\t\t\t<RenderTallas\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\ttalla={talla}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tsetMedidasSeleccionadas={setMedidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmt={1}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>Color</Typography>\r\n\t\t\t\t\t\t<CrearColorProducto refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{colores.map((color, index) => (\r\n\t\t\t\t\t\t\t\t<Colores\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tsetColoresSeleccionados={setColoresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderTallas = ({\r\n\ttalla,\r\n\tcoloresSeleccionados,\r\n\tmedidasSeleccionadas,\r\n\tsetMedidasSeleccionadas,\r\n\t// datos\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tsetPresentaciones, \r\n\t\tpresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarMedidas = useCallback(\r\n\t// \t() => {\r\n\t// \t\tmedidasSeleccionadas.forEach((res) => {\r\n\t// \t\t\tif (res._id === talla._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ talla._id, medidasSeleccionadas ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarMedidas();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarMedidas ]\r\n\t// );\r\n\r\n\r\n\tconst handleAddTallas = (value) => {\r\n\t\tconst medidas_seleccionadas_temp = [ ...medidasSeleccionadas ];\r\n\r\n\t\tif (!selected) {\r\n\t\t\tmedidas_seleccionadas_temp.push(talla);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tmedidas_seleccionadas_temp.forEach((res, index) => {\r\n\t\t\t\tif (res._id === talla._id) {\r\n\t\t\t\t\tmedidas_seleccionadas_temp.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.medida._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!coloresSeleccionados.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.medida._id === producto_medida._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length === 1 && value) {\r\n\t\t\t/* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: medidas_seleccionadas_temp[k],\r\n\t\t\t\t\t\tcolor: array_medidad_finales[i].color,\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length > 0) {\r\n\t\t\t/* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tconst producto_color = coloresSeleccionados[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && !medidas_seleccionadas_temp.length) {\r\n\t\t\t/* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.medida._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: objeto_presentaciones_final.color,\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetMedidasSeleccionadas([ ...medidas_seleccionadas_temp ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\tonClick={() => handleAddTallas(!selected)}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tselected ? (\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: theme.palette.primary.main\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(selected ? theme.palette.primary.main : '#FFFFFF'),\r\n\t\t\t\t\t\tfontSize: 16\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{talla.talla}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Colores = ({ \r\n\tcolor, \r\n\tcoloresSeleccionados, \r\n\tsetColoresSeleccionados, \r\n\tmedidasSeleccionadas, \r\n\tdatos \r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tpresentaciones, \r\n\t\tsetPresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarColores = useCallback(\r\n\t// \t() => {\r\n\t// \t\tcoloresSeleccionados.forEach((res) => {\r\n\t// \t\t\tif (res._id === color._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ color._id, coloresSeleccionados ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarColores();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarColores ]\r\n\t// );\r\n\r\n\tconst obtenerColores = (value) => {\r\n\t\tif (!selected) {\r\n\t\t\tcoloresSeleccionados.push(color);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tcoloresSeleccionados.forEach((res, index) => {\r\n\t\t\t\tif (res._id === color._id) {\r\n\t\t\t\t\tcoloresSeleccionados.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.color._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: {},\r\n\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!medidasSeleccionadas.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.color._id === producto_color._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length === 1 && value) {\r\n\t\t\t/* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: array_medidad_finales[i].medida,\r\n\t\t\t\t\t\tcolor: coloresSeleccionados[k],\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length > 0) {\r\n\t\t\t/* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tfor (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n\t\t\t\t\tconst producto_medida = medidasSeleccionadas[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && !coloresSeleccionados.length) {\r\n\t\t\t/* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.color._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: objeto_presentaciones_final.medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetColoresSeleccionados([ ...coloresSeleccionados ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<Tooltip title={color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: color.hex,\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(color.hex)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => obtenerColores(!selected)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{selected ? <Done /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport RegistroInfoAdidional from \"../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport RegistroInformacionRapido from \"./RegistroInformacionRapido\";\r\nimport { Close, NavigateBefore, NavigateNext } from \"@material-ui/icons\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_presentaciones\r\n} from \"../../../context/Catalogos/initialStatesProducto\";\r\nimport { cleanTypenames } from '../../../config/reuserFunctions';\r\nimport TallasColoresRapidos from \"./TallasColoresRapidos/TallasColoresRapidos\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { CREAR_PRODUCTO_RAPIDO, OBTENER_CONSULTAS } from \"../../../gql/Catalogos/productos\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  iconSizeDialogs: {\r\n    width: 80,\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ArticuloRapido() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n  const [ cargando, setCargando ] = useState(false);\r\n\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    setPreciosP,\r\n    preciosP,\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setCentroDeCostos,\r\n    presentaciones,\r\n    setPresentaciones,\r\n  } = useContext(RegProductoContext);\r\n  const { setAlert, open, setOpen } = useContext(VentasContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [ crearProductoRapido ] = useMutation(CREAR_PRODUCTO_RAPIDO);\r\n  const {  data, refetch, loading } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setCentroDeCostos({});\r\n    setValidacion({ error: false, message: \"\" });\r\n    setPresentaciones([]);\r\n    setValue(0);\r\n  };\r\n  \r\n  const [abrirTallaColor, setAbrirTallaColor] = useState(false);\r\n  const [cantidad, setCantidad] = useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    if(sesion.accesos.ventas.producto_rapido.ver === true){\r\n      resetInitialStates();\r\n      setOpen(!open);\r\n      setAbrirTallaColor(false);\r\n    }\r\n\t};\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, []);\r\n  \r\n  if(loading || !data) { return null }\r\n  if (loading)\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      height=\"80vh\"\r\n    >\r\n      <CircularProgress />\r\n      <Typography variant=\"h6\">Cargando...</Typography>\r\n    </Box>\r\n  );\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  window.addEventListener('keydown', Mi_función); \r\n  function Mi_función(e){\r\n    if(e.altKey && e.keyCode === 65){ \r\n        handleClickOpen();\r\n    } \r\n  };\r\n\r\n  const saveData = async () => {\r\n    setCargando(true);\r\n    if (datos_generales.tipo_producto === 'OTROS' && cantidad < 1) {\r\n        return setValidacion(true);\r\n    }else{\r\n      if (\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n      ){\r\n        return setValidacion(true);\r\n      }\r\n    }\r\n    if (unidadesVenta.length === 0) {\r\n      unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = unidadesVenta.filter(\r\n        (unidades) => unidades.default\r\n      );\r\n      if (unidadxdefecto.length === 0) unidadesVenta.push(unidadVentaXDefecto);\r\n    }\r\n    precios.precios_producto = preciosP;\r\n\r\n    if (datos_generales.tipo_producto === 'OTROS' && cantidad < 1) {\r\n        setPresentaciones(initial_state_presentaciones)\r\n        setCantidad(0)\r\n    };\r\n    const data = {\r\n      datos_generales,\r\n      precios,\r\n      unidades_de_venta: unidadesVenta,\r\n      presentaciones,\r\n      cantidad,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n    \r\n    try {\r\n      const input = cleanTypenames(data);\r\n      const result = await crearProductoRapido({\r\n        variables: {\r\n          input\r\n        }\r\n      });\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `¡Listo ${result.data.crearProductoRapido.message}!`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n       datos_generales.tipo_producto === 'OTROS' ? (\r\n            !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !cantidad ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n        ):(\r\n            !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n        )\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (value === 1) {\r\n      return saveButton;\r\n    } else {\r\n      if (datos_generales.tipo_producto === 'OTROS' || !datos_generales.tipo_producto) {\r\n        return saveButton;\r\n      }else{\r\n        return (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value + 1)}\r\n            size=\"large\"\r\n            endIcon={<NavigateNext />}\r\n            disableElevation\r\n          >\r\n            Siguiente\r\n          </Button>\r\n        );\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() =>{handleClickOpen()}}\r\n        value=\"articulo-rapido\"\r\n        style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img \r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\" \r\n            alt=\"icono caja2\" \r\n            className={classes.iconSizeSecondSuperior} \r\n          />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n              <Typography variant=\"body2\" >\r\n                  <b>Producto Rapido</b>\r\n              </Typography>\r\n          </Box>\r\n          <Box>\r\n              <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                  <b>Alt + A</b>\r\n              </Typography>\r\n          </Box>\r\n\t\t\t\t</Box>\r\n      </Button>\r\n      <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Datos generales\"\r\n                icon={\r\n                  <Badge\r\n                    color=\"secondary\"\r\n                    badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                    anchorOrigin={{\r\n                      vertical: \"bottom\",\r\n                      horizontal: \"right\",\r\n                    }}\r\n                    invisible={\r\n                      validacion.error && validacion.vista1 ? false : true\r\n                    }\r\n                  >\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                      alt=\"icono registro\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  </Badge>\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              {\r\n                 abrirTallaColor === false  || datos_generales.tipo_producto === 'OTROS' ? (\r\n                  null\r\n                ) :(\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                            validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                )\r\n              }\r\n            </Tabs>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={cargando}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <div className={classes.root}>\r\n            <TabPanel value={value} index={0}>\r\n              <RegistroInformacionRapido \r\n                setAbrirTallaColor={setAbrirTallaColor} \r\n                setCantidad={setCantidad} \r\n                cantidad={cantidad} \r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n              <RegistroInfoAdidional />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <TallasColoresRapidos\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n            </TabPanel>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"inherit\"\r\n            onClick={() => {\r\n              handleClickOpen() \r\n              resetInitialStates()\r\n            }}\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            disableElevation\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n\t\t\t</Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../context/Catalogos/CtxRegProducto'\r\nimport ArticuloRapido from './ArticuloRapido'\r\n \r\nexport default function ProductoRapidoIndex({handleClickOpen}){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <ArticuloRapido handleClickOpen={handleClickOpen} />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useState, useContext, Fragment} from 'react';\r\nimport { Divider, BottomNavigation, Button } from '@material-ui/core';\r\nimport { CssBaseline, Avatar, Box, Typography } from '@material-ui/core';\r\nimport { withRouter } from 'react-router';\r\nimport { FaPowerOff } from 'react-icons/fa';\r\nimport useStyles from './styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\n\r\nimport DepositoRetiroCaja from '../../pages/ventas/Operaciones/DepositoRetiroCaja';\r\nimport Turnos from '../../pages/ventas/AbrirCerrarTurno/Turnos';\r\nimport PreCorteCaja from '../../pages/ventas/Operaciones/PreCorteCaja';\r\nimport Cotizacion from '../../pages/ventas/Cotizacion/Cotizacion';\r\nimport VentaEnEspera from '../../pages/ventas/Operaciones/VentaEnEspera';\r\nimport ProductoRapidoIndex from '../../pages/ventas/ArticuloRapido/indexArticuloRapido';\r\n\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\n\r\nfunction NavegacionVentas(props) {\r\n\tconst { alert, setAlert, abrirTurnosDialog, setAbrirTurnosDialog, setUbicacionTurno } = useContext(VentasContext);\r\n\tconst classes = useStyles();\r\n\tconst [ value, setValue ] = useState('venta-general');\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n\tmoment.locale('es');\r\n\r\n\tconst signOut = () => {\r\n\t\tif (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n\t\t\tsetAbrirTurnosDialog(!abrirTurnosDialog);\r\n\t\t\tsetUbicacionTurno('SESION');\r\n\t\t}else{\r\n\t\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\t\tlocalStorage.removeItem('tokenCafi');\r\n            localStorage.removeItem('DatosVentas');\r\n\t\t\tlocalStorage.removeItem('turnoEnCurso');\r\n\t\t\tlocalStorage.removeItem('ListaEnEspera');\r\n\t\t\tprops.history.push('/');\r\n\t\t}\r\n\t};\r\n\r\n\tfunction Mi_función(e){\r\n\t\tif( e.keyCode === 112){ \r\n\t\t\tprops.history.push('/admin');\r\n\t\t}\r\n\t\tif( e.keyCode === 115){ \r\n\t\t\tprops.history.push('/');\r\n\t\t}\r\n\t};\r\n\r\n\tfunction Administrador() {\r\n\t\tif(sesion.accesos.ventas.administrador.ver === true){\r\n\t\t\tprops.history.push('/admin')\r\n\t\t};\r\n\t}\r\n\r\n\twindow.addEventListener('keydown', Mi_función); \r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t\t<BottomNavigation\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(event, newValue) => {\r\n\t\t\t\t\t\tsetValue(newValue);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tshowLabels\r\n\t\t\t\t\tclassName={classes.navigationTop}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ProductoRapidoIndex />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Cotizacion /> \r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<DepositoRetiroCaja />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Turnos />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<PreCorteCaja />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<VentaEnEspera />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => Administrador()}\r\n\t\t\t\t\t\tstyle={{textTransform: 'none', height: '100%', width: '60%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\tsrc='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/admin.svg' \r\n\t\t\t\t\t\t\t\t\talt=\"icono admin\" \r\n\t\t\t\t\t\t\t\t\tclassName={classes.iconSizeSecondSuperior} \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t\t\t<b>Administrador</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\" style={{color: '#808080'}} >\r\n\t\t\t\t\t\t\t\t\t<b>F1</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() =>{\r\n\t\t\t\t\t\t\tsignOut()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tstyle={{textTransform: 'none', height: '100%', width: '40%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" style={{textTransform: 'none', height: '100%', width: '100%'}}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<FaPowerOff className={classes.iconSizeSuperior} style={{color: 'red'}} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t\t\t<b>Salir</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"flex-end\"\r\n\t\t\t\t\t\tstyle={{height: '100%', width: '100%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box mr={3} display=\"flex\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Avatar alt=\"Remy Sharp\" srsc=\"/static/images/avatar/1.jpg\" className={classes.avatar} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">{sesion?.nombre}</Typography>\r\n\t\t\t\t\t\t\t\t\t{!turnoEnCurso?.numero_caja ? (\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Caja: </b>{turnoEnCurso?.numero_caja}\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box mr={3} display=\"flex\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/calendario.svg' alt=\"icono admin\" className={classes.avatar} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('MM/DD/YYYY')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t<b>{moment().format('h:mm')} hrs.</b> \r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</BottomNavigation>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(NavegacionVentas);","import React, { useState } from 'react';\r\nimport { Box, Button,  Dialog, DialogActions, DialogContent, Slide, Typography } from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport { FcDonate } from 'react-icons/fc';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Abonos() {\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n    \r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 117){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcDonate style={{fontSize: 35}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Abonos</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F6</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    Abonitos\r\n                </DialogContent>\r\n                <DialogActions>\r\n\r\n                </DialogActions>\r\n\r\n            </Dialog>\r\n            \r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, CircularProgress } from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'clave', label: 'Clave', minWidth: 40, align: 'center' },\r\n\t{ id: 'codigo', label: 'C. Barras', minWidth: 40, align: 'center' },\r\n\t{ id: 'descripcion', label: 'Nombre/Descrip.', minWidth: 330 },\r\n\t{ id: 'existencia', label: 'Exist.', minWidth: 30, align: 'center'},\r\n\t{ id: 'unidad', label: 'Unidad', minWidth: 30, align: 'center'},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 30, align: 'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\tmarginTop: 15\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '40vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaProductos({\r\n\tproductosBusqueda, \r\n\tsetProductoSeleccionado, \r\n\tloading\r\n}) {\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productosBusqueda.map((producto) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsProductos \r\n\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\tsetProductoSeleccionado={setProductoSeleccionado}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nfunction RowsProductos({producto, setProductoSeleccionado}) {\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\trole=\"checkbox\" \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={producto._id}\r\n\t\t\t\tonClick={() => setProductoSeleccionado(producto)}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\" >\r\n\t\t\t\t\t{producto.id_producto.datos_generales.clave_alterna}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.id_producto.datos_generales.codigo_barras}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell >\r\n\t\t\t\t\t{producto.id_producto.datos_generales.nombre_comercial}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.cantidad}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.unidad}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.precio}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</>\t\r\n\t);\r\n\t\r\n}","import { gql } from \"@apollo/client\";\r\n\r\nexport const CONSULTA_PRODUCTOS = gql`\r\n  query ObtenerConsultaGeneralVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTO_UNITARIO = gql`\r\n   query ObtenerUnProductoVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $datosProductos: ID!\r\n  ) {\r\n    obtenerUnProductoVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      datosProductos: $datosProductos\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad{\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida{\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color{\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes{\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat{\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n      \r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_VENTAS = gql`\r\n  query ObtenerProductosVentas($empresa: ID!$sucursal: ID! $input: ObtenerProductosVentasInput) {\r\n    obtenerProductosVentas(empresa: $empresa sucursal: $sucursal input: $input) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes{\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES_VENTAS = gql`\r\n  query ObtenerClientesVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerClientesVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      numero_cliente\r\n      clave_cliente\r\n      nombre_cliente\r\n      rfc\r\n      curp\r\n      telefono\r\n      celular\r\n      email\r\n      numero_descuento\r\n      limite_credito\r\n      dias_credito\r\n      razon_social\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      banco\r\n      numero_cuenta\r\n      monedero_electronico\r\n      credito_disponible\r\n    }\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport useStyles from '../styles';\r\n\r\nimport {\r\n    TableContainer,\r\n    Table,\r\n    Box,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    Grid,\r\n    Typography} from '@material-ui/core'\r\n\r\nexport default function InformacionProducto({productoSeleccionado}) {\r\n\r\n    const classes = useStyles();\r\n\r\n    if (!productoSeleccionado) return null;\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <b>Nombre:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.id_producto?.datos_generales?.nombre_comercial}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <b>Codigo Barras:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.codigo_barras}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Cantidad:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.cantidad}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Unidad:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.unidad}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Descuento:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.descuento ? productoSeleccionado?.descuento.precio_neto : 0}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>% Descuento:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.descuento ? productoSeleccionado?.descuento.precio_neto : 0}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid>\r\n            <Grid item lg={12}>\r\n                <PreciosDeVentaCompras precios={productoSeleccionado?.id_producto?.precios?.precios_producto} />\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\n\r\nfunction PreciosDeVentaCompras({precios}) {\r\n\r\n    return (\r\n      <div>\r\n        <TableContainer>\r\n          <Table aria-label=\"simple table\" size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n                {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                  <TableCell style={{ minWidth: 100 }} key={index}>\r\n                    {numero}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {[\"Precio de venta\"].map((tipo, index) => (\r\n                <TableRow key={index}>\r\n                  <TableCell style={{ border: 0 }}>\r\n                    <b>{tipo}</b>\r\n                  </TableCell>\r\n                  {precios?.map((data, index) => (\r\n                    <TableCell key={index} style={{ border: 0 }}>{data?.precio_neto}</TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </div>\r\n    );\r\n  }\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, DialogActions, Dialog, \r\n        DialogContent, Divider, Grid, \r\n        Typography, Slide, InputBase, Paper, \r\n        IconButton} from '@material-ui/core'\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\nimport useStyles from '../styles';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { FcSearch } from 'react-icons/fc';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { CONSULTA_PRODUCTOS_VENTAS } from '../../../gql/Ventas/ventas_generales';\r\nimport InformacionProducto from './InformacionProducto';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function BuscarProducto() {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [ searchProducto, setSearchProducto ] = useState([]);\r\n    const [ productoSeleccionado, setProductoSeleccionado ] = useState([]);\r\n    \r\n\tconst [ value ] = useDebounce(searchProducto, 500);\r\n\r\n    const { data, refetch, loading } = useQuery(CONSULTA_PRODUCTOS_VENTAS, {\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                producto: value.producto ? value.producto : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n    \r\n    let productosBusqueda = [];\r\n\r\n    if(data) productosBusqueda = data.obtenerProductosVentas;\r\n\r\n    const obtenerDatos = (e) => {\r\n        setSearchProducto({...searchProducto, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const keyUpEvent = async (e) => {\r\n        if (e.code === \"Enter\" || e.code === \"NumpadEnter\") {\r\n            setSearchProducto({...searchProducto, [e.target.name]: e.target.value});\r\n            refetch();\r\n        }   \r\n    };\r\n\r\n    const handleClickOpen = () => { \r\n        setProductoSeleccionado([]);\r\n        refetch();\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 80){ \r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcSearch style={{fontSize: 45}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Productos</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + P</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='md'\r\n                fullWidth\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container>\r\n                        <Grid item lg={3}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" width=\"100%\">\r\n                                {productoSeleccionado?.id_producto?.imagenes.length > 0 ? (\r\n                                    <Box className={classes.containerImage}>\r\n                                        <img \r\n                                            alt=\"Imagen producto\" \r\n                                            src={productoSeleccionado?.id_producto?.imagenes[0].url_imagen} \r\n                                            className={classes.imagen}\r\n                                        />\r\n                                    </Box>\r\n                                ) : (\r\n                                    <Box p={8} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <PhotoLibraryIcon style={{fontSize: 40}} />\r\n                                    </Box>\r\n                                )}\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={9}>\r\n                            <Box display=\"flex\">\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexGrow={1}\r\n                                >\r\n                                    <Box>\r\n                                        <Typography variant=\"h6\">\r\n                                            Buscar Productos\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                        <CloseIcon />\r\n                                    </Button>\r\n                                </Box>\r\n                            </Box>\r\n                            <div className={classes.formInputFlex}>\r\n                                <Box width=\"50%\">\r\n                                    <Paper className={classes.rootBusqueda}>\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            name=\"producto\"\r\n                                            placeholder=\"Buscar producto...\"\r\n                                            onChange={obtenerDatos}\r\n                                            onKeyUp={keyUpEvent}\r\n                                        />\r\n                                        <IconButton >\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </Paper>\r\n                                </Box>\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <InformacionProducto productoSeleccionado={productoSeleccionado} />\r\n                    <Grid>\r\n                        <ListaProductos \r\n                            productosBusqueda={productosBusqueda}\r\n                            setProductoSeleccionado={setProductoSeleccionado}\r\n                            loading={loading}\r\n                        />\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClickOpen} variant=\"contained\" color=\"primary\" size=\"large\">\r\n                        AGREGAR\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n};\r\n","import React, { useState } from 'react';\r\nimport {  Box, Button, Dialog, DialogContent,  Grid, IconButton, InputBase, makeStyles, Paper, Slide, Typography } from '@material-ui/core'\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaClientes from '../../sucursales/Catalogos/Cliente/ListaClientes';\r\nimport CrearCliente from '../../sucursales/Catalogos/Cliente/CrearCliente';\r\nimport { ClienteProvider } from '../../../context/Catalogos/crearClienteCtx';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcBusinessman } from 'react-icons/fc';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative',\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function ClientesVentas() {\r\n\r\n    const classes = useStyles();\r\n\t\r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\tconst [ values, setValues ] = useState('');\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') setValues(e.target.defaultValue);\r\n\t};\r\n\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 67){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ClienteProvider>\r\n            <Button \r\n                style={{height: '100%', width: '100%', border: '.6px solid #DBDBDB'}}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box> \r\n                        <FcBusinessman style={{ fontSize: 45 }}/>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Clientes</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>aLT + C</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n                maxWidth='lg'\r\n                open={open} \r\n                onClose={handleClickOpen} \r\n                TransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box ml={3} display='flex' flexGrow={1}  alignItems='center'>\r\n                            <Box>\r\n                                <FcBusinessman  style={{fontSize: 65}} />\r\n                            </Box>\r\n                            <Typography variant=\"h6\" className={classes.title}>\r\n                                Clientes\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box mr={2}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon style={{fontSize: 30}} />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n                        <Box mr={5} minWidth=\"70%\">\r\n                            <Paper className={classes.root}>\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    placeholder=\"Buscar cliente...\"\r\n                                    onChange={(e) => setValues(e.target.value)}\r\n                                    onKeyPress={pressEnter}\r\n                                    value={values}\r\n                                />\r\n                                <IconButton onClick={() => setValues(values)}>\r\n                                    <Search />\r\n                                </IconButton>\r\n                            </Paper>\r\n                        </Box>\r\n                        <CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" ventas={true} handleClickOpen={handleClickOpen} />\r\n                    </Box>\r\n                    <Box mx={2}>\r\n                        <ListaClientes tipo=\"CLIENTE\" filtro={values} ventas={true} handleClickOpen={handleClickOpen} />\r\n                    </Box>\r\n                </DialogContent>\r\n            </Dialog>\r\n            </ClienteProvider>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport { Box, Button, DialogActions, Dialog, DialogContent, Divider, Grid, Typography, Slide } from '@material-ui/core'\r\n\r\nimport useStyles from '../styles';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCajon() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 119){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cajon.svg' \r\n                            alt=\"icono ventas\" \r\n                            style={{width: 38}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Cajon</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F8</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n            <DialogContent>\r\n                <Grid container item lg={12}>\r\n                    <Box\r\n                        display=\"flex\" \r\n                        textAlign=\"center\" \r\n                        justifyContent=\"center\" \r\n                        alignContent=\"center\" \r\n                        alignSelf=\"center\"\r\n                        justifySelf=\"center\"\r\n                    >\r\n                        <Box>\r\n                            <img \r\n                                src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cajon.svg' \r\n                                alt=\"icono caja\"\r\n                                style={{width: 40}}\r\n                        />\r\n                        </Box>\r\n                        <Box m={2} >\r\n                            <Divider orientation=\"vertical\" />\r\n                        </Box>\r\n                        <Box mt={3}>\r\n                            <Typography variant=\"h5\">\r\n                                Cajon Abierto\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button \r\n                    onClick={handleClickOpen} \r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                >\r\n                    Aceptar\r\n                </Button>\r\n            </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Divider, Grid, Slide, Typography } from '@material-ui/core'\r\n\r\nimport useStyles from '../styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarVenta() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => {\r\n        if(sesion.accesos.ventas.cancelar_venta.ver === true){\r\n            setOpen(!open);\r\n        }\r\n\t};\r\n    \r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 118){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg' \r\n                            alt=\"icono cancelarventa\" \r\n                            style={{width: 35}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Cancelar Venta</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F7</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            alignItems=\"center\"\r\n                            justifyContent=\"center\"\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography variant=\"h5\">\r\n                                    Cancelar Venta\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Box p={2}>\r\n                        <Typography variant='h5'>\r\n                            ¿Esta seguro que desea cancelar esta venta?\r\n                        </Typography>\r\n                    </Box> \r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={()=>{\r\n                            localStorage.removeItem('DatosVentas');\r\n                            handleClickOpen();\r\n                        }} \r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        size=\"large\"\r\n                        autoFocus\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                    <Button \r\n                        onClick={handleClickOpen} \r\n                        variant=\"contained\" \r\n                        color=\"secondary\"\r\n                        size=\"large\"\r\n                        autoFocus\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/tarjeta-de-credito.a640b329.svg\";","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { \r\n    Box, \r\n    Button, \r\n    Dialog, \r\n    DialogActions, \r\n    DialogContent, \r\n    Divider, \r\n    Grid,  \r\n    IconButton,  \r\n    Paper,  \r\n    Slide,  \r\n    TextField, \r\n    Typography \r\n} from '@material-ui/core'\r\nimport tarjeta from '../../../icons/ventas/tarjeta-de-credito.svg';\r\nimport { FcDonate, FcShop } from 'react-icons/fc';\r\nimport { Search } from '@material-ui/icons';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport {\r\n    Edit\r\n  } from \"@material-ui/icons\";\r\n\r\nimport { FcBusinessman, FcSalesPerformance } from 'react-icons/fc';\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CerrarVenta() {\r\n\r\n    const classes = useStyles();\r\n    const [cambio, setCambio] = useState(false);\r\n\r\n    const abrirCajon = () => {setCambio(!cambio)};\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const [openModalDescuento, setOpenModalDescuento] = useState(false);\r\n\r\n    const [totalVenta, setTotalVenta] = useState(0);\r\n    const [valorActual, setValorActual] = useState('EFECTIVO')\r\n    const [totalARestar, setTotalARestar] = useState(0);\r\n    const [cambioVenta, setCambioVenta] = useState(0);\r\n    const [datosCliente, setDatosCliente] = useState({});\r\n    const [monedero, setMonedero] = useState();\r\n    \r\n    const handleClickOpen = () => { \r\n        let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n        const total = venta === null ? 0 : venta.total;\r\n        // console.log(venta);\r\n        setTotalVenta(total.toFixed(2))\r\n        setTotalARestar(total.toFixed(2));\r\n\t\tsetOpen(!open);\r\n        setDatosCliente(venta === null ? {} : venta.cliente);\r\n        setMonedero(venta === null ? 0 : venta.monedero);\r\n\t};\r\n\r\n    // console.log(totalVenta);\r\n    // console.log(totalARestar);\r\n\r\n    function funcion_tecla(event) {\r\n\t\tconst tecla_escape = event.keyCode;\r\n\t\tif(tecla_escape === 27){\r\n            handleClickOpen();\r\n\t\t}\r\n\t}\r\n\r\n    const changeValue = (e) => {\r\n        setValorActual(e)\r\n    }\r\n\r\n    const handlerChangeValue = (e,location) => {\r\n        if(valorActual === location){\r\n            setTotalARestar(e.target.value);\r\n            setCambioVenta(e.target.value - parseFloat(totalVenta));\r\n        }\r\n    }\r\n\r\n\twindow.onkeydown = funcion_tecla;\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg' \r\n                            alt=\"icono ventas\" \r\n                            style={{width: 38}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Pagar</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>ESC</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12} justify=\"center\">\r\n                        <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n                            <Box> \r\n                                <img \r\n                                    src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg' \r\n                                    alt=\"icono ventas\" className={classes.iconSizeDialogsPequeno} \r\n                                />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={1} textAlign=\"center\">\r\n                                <Typography variant=\"h4\">\r\n                                    Ticket\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\" textAlign=\"center\">\r\n                                <Typography>\r\n                                    Total a pagar:\r\n                                </Typography>\r\n                                <Typography variant='h3' style={{color: 'green'}}>\r\n                                    ${totalVenta}\r\n                                </Typography>\r\n                                <Typography variant='caption'>\r\n                                    (CIENTO CICUENTA PESOS 00/100 MNX)\r\n                                </Typography>\r\n                            </Box>\r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"25%\" textAlign=\"center\">\r\n                                <Box>\r\n                                    <img\r\n                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg' \r\n                                        alt=\"icono ventas\" className={classes.iconSizeDialogsPequeno} \r\n                                        onClick={() => changeValue(\"EFECTIVO\")}\r\n                                        style={{cursor: 'pointer'}}\r\n                                    />\r\n                                </Box>\r\n                                <Typography variant='caption'>\r\n                                    Efectivo\r\n                                </Typography>\r\n                                <Box display=\"flex\">\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"efectivo\"\r\n                                        id=\"form-producto-efectivo\"\r\n                                        variant=\"outlined\"\r\n                                        value={valorActual === \"EFECTIVO\" ?  totalARestar : '0.00'}\r\n                                        onChange={(e) => handlerChangeValue(e,\"EFECTIVO\")}\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"25%\" textAlign=\"center\">\r\n                                <Box>\r\n                                    <img\r\n                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/tarjeta-de-credito.svg' \r\n                                        alt=\"icono ventas\" className={classes.iconSizeDialogsPequeno} \r\n                                        onClick={() => changeValue(\"TARJETA\")}\r\n                                        style={{cursor: 'pointer'}}\r\n                                    />\r\n                                </Box>\r\n                                <Typography variant='caption'>\r\n                                    Tarjeta\r\n                                </Typography>\r\n                                <Box display=\"flex\">\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                        value={valorActual === \"TARJETA\" ?  totalARestar : '0.00'}\r\n                                        onChange={(e) => handlerChangeValue(e,\"TARJETA\")}\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"25%\" textAlign=\"center\">\r\n                                <Box> \r\n                                    <FcShop \r\n                                        style={{fontSize: 50,cursor: 'pointer'}} \r\n                                        onClick={() => changeValue(\"PUNTOS\")}\r\n                                    />\r\n                                </Box>\r\n                                <Typography variant='caption'>\r\n                                    Puntos\r\n                                </Typography>\r\n                                <Box display=\"flex\">\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                        value={valorActual === \"PUNTOS\" ?  totalARestar : '0.00'}\r\n                                        onChange={(e) => handlerChangeValue(e,\"PUNTOS\")}\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"25%\" textAlign=\"center\">\r\n                                <Box \r\n                                    p={0}\r\n                                >\r\n                                    <img \r\n                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/transferencia-bancaria.svg' \r\n                                        alt=\"icono ventas\" className={classes.iconSizeDialogsPequeno} \r\n                                        onClick={() => changeValue(\"TRANSFERENCIA\")}\r\n                                        style={{cursor: 'pointer'}}\r\n                                    />\r\n                                </Box>\r\n                                <Typography variant='caption'>\r\n                                    Transferencia\r\n                                </Typography>\r\n                                <Box display=\"flex\">\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                        value={valorActual === \"TRANSFERENCIA\" ?  totalARestar : '0.00'}\r\n                                        onChange={(e) => handlerChangeValue(e,\"TRANSFERENCIA\")}\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"25%\" textAlign=\"center\">\r\n                                <Box \r\n                                    p={0}\r\n                                >\r\n                                    <img \r\n                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cheque.png' \r\n                                        alt=\"icono ventas\" className={classes.iconSizeDialogsPequeno} \r\n                                        onClick={() => changeValue(\"CHEQUE\")}\r\n                                        style={{cursor: 'pointer'}}\r\n                                    />\r\n                                </Box>\r\n                                <Typography variant='caption'>\r\n                                    Cheque\r\n                                </Typography>\r\n                                <Box display=\"flex\">\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                        value={valorActual === \"CHEQUE\" ?  totalARestar : '0.00'}\r\n                                        onChange={(e) => handlerChangeValue(e,\"CHEQUE\")}\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"40%\">\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box mt={.5} mr={.5} >\r\n                                        <FcBusinessman style={{fontSize: 19}} />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <Typography variant=\"caption\">\r\n                                            <b>Cliente:</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <Typography variant='subtitle1' >\r\n                                        <b style={{fontSize: 16}} >{datosCliente ? datosCliente.nombre_cliente : \"Sin cliente\" }</b>\r\n                                    </Typography> \r\n                                </Box>\r\n                            </Box>\r\n\r\n                            <Box width=\"60%\">\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box mt={.5} mr={.5} >\r\n                                        <FcSalesPerformance style={{fontSize: 19}} />\r\n                                    </Box>\r\n                                    <Box \r\n                                        display=\"flex\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <Typography variant=\"caption\" align=\"center\" >\r\n                                            <b>Puntos Generados:</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <Typography variant='subtitle1'>\r\n                                        $ {monedero}\r\n                                    </Typography> \r\n                                </Box>\r\n                            </Box>\r\n\r\n                            <Box width=\"60%\">\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box mt={.5} mr={.5} >\r\n                                        <FcSalesPerformance style={{fontSize: 19}} />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <Typography variant=\"caption\">\r\n                                            <b>Puntos Disponibles:</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <Typography variant='subtitle1'>\r\n                                        $ 800\r\n                                    </Typography> \r\n                                </Box>\r\n                            </Box>\r\n\r\n\r\n                            {/* <Box width=\"50%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Puntos Dsiponibles:</b>\r\n                                </Typography>\r\n                                <Box>\r\n                                    <Typography variant='subtitle1'>\r\n                                        $ 800\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box> */}\r\n                            \r\n                            <Box width=\"100%\" textAlign=\"right\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Su cambio:</b>\r\n                                </Typography>\r\n                                <Typography variant='h4' style={{color: 'green'}}>\r\n                                    $ { cambioVenta }\r\n                                </Typography>\r\n                                <Typography variant='caption'>\r\n                                    (CIENTO CICUENTA PESOS 00/100 MNX)\r\n                                </Typography>\r\n                            </Box>\r\n                        </div>\r\n\r\n                        <Box display=\"flex\" >\r\n                            <Box width=\"20%\">\r\n                                <Button\r\n                                    color=\"primary\" \r\n                                    variant=\"outlined\"\r\n                                    startIcon={<img src={tarjeta} alt=\"icono ventas\" style={{width: 30}} />}\r\n                                >\r\n                                    Venta a Credito\r\n                                </Button>\r\n                            </Box>\r\n                            <Box width=\"50%\">\r\n                                <Button\r\n                                    color=\"primary\" \r\n                                    variant=\"outlined\"\r\n                                    startIcon={<img src={tarjeta} alt=\"icono ventas\" style={{width: 30}} />}\r\n                                >\r\n                                    Agregar Descuento\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        \r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"20%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Dias de Crédito:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"20%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Límite de Crédito:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                            <Box width=\"20%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Crédito Disponible:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            <Box>\r\n                                <Box width=\"100%\" mt={2.5} >\r\n                                    <Button\r\n                                        color=\"primary\" \r\n                                        variant=\"outlined\"\r\n                                        size=\"large\"\r\n                                        startIcon={<Edit />}\r\n                                    >\r\n                                        Editar\r\n                                    </Button>\r\n                                </Box>\r\n                            </Box>\r\n                        </div>\r\n\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"20%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Total a Crédito:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            <Box width=\"20%\" >\r\n                                <Typography variant='caption'>\r\n                                    <b>Dias de Crédito:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            <Box width=\"20%\">\r\n                                <Typography variant='caption'>\r\n                                    <b>Fecha de Vencimiento:</b>\r\n                                </Typography>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <TextField \r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"codigo_barras\"\r\n                                        id=\"form-producto-codigo-barras\"\r\n                                        variant=\"outlined\"\r\n                                        type=\"date\"\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                        </div>\r\n\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        size=\"large\"\r\n                        onClick={() => {\r\n                            abrirCajon()\r\n                        }}\r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        autoFocus\r\n                    >\r\n                        Terminar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Dialog\r\n\t\t\t\topen={openModalDescuento} \r\n\t\t\t\tonClose={abrirCajon} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t> \r\n                <DialogContent>\r\n                    <Box textAlign=\"center\" >\r\n                        <Box>\r\n                            <FcDonate style={{fontSize: 80}} />\r\n                        </Box>\r\n                        <Box textAlign=\"center\">\r\n                            <Typography variant=\"h5\">\r\n                                Su cambio\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Grid item lg={12}>\r\n                        <Paper elevation={3}>\r\n                            <Box p={3} width=\"100%\" textAlign=\"center\">\r\n                                <Typography variant='h3' style={{color: 'red'}}>\r\n                                    $150.000\r\n                                </Typography>\r\n                                <Typography variant='caption'>\r\n                                    (CIENTO CICUENTA PESOS 00/100 MNX)\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Grid>\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClickOpen}\r\n                        variant=\"contained\" \r\n                        size=\"large\"\r\n                        color=\"primary\" \r\n                        autoFocus\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n\t\t\t</Dialog>\r\n\r\n            <Dialog\r\n\t\t\t\topen={cambio} \r\n\t\t\t\tonClose={abrirCajon} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t> \r\n                <DialogContent>\r\n                    <Box textAlign=\"center\" >\r\n                        <Box>\r\n                            <FcDonate style={{fontSize: 80}} />\r\n                        </Box>\r\n                        <Box textAlign=\"center\">\r\n                            <Typography variant=\"h5\">\r\n                                Su cambio\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Grid item lg={12}>\r\n                        <Paper elevation={3}>\r\n                            <Box p={3} width=\"100%\" textAlign=\"center\">\r\n                                <Typography variant='h3' style={{color: 'red'}}>\r\n                                    $150.000\r\n                                </Typography>\r\n                                <Typography variant='caption'>\r\n                                    (CIENTO CICUENTA PESOS 00/100 MNX)\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Grid>\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClickOpen}\r\n                        variant=\"contained\" \r\n                        size=\"large\"\r\n                        color=\"primary\" \r\n                        autoFocus\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n\t\t\t</Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button,  CircularProgress,  Dialog,  \r\n        DialogActions, DialogContent, Divider, Grid,  \r\n        IconButton,  InputBase,  Paper,  Slide,  \r\n        Typography \r\n    } from '@material-ui/core';\r\nimport ItemsCarousel from 'react-items-carousel';\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport useStyles from '../styles';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport { Search } from '@material-ui/icons';\r\nimport { useLazyQuery } from '@apollo/client';\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from '../../../gql/Ventas/ventas_generales';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConsultarPrecio() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n\r\n    const [obtenerProductos, { data, loading }] = useLazyQuery(\r\n        CONSULTA_PRODUCTO_UNITARIO,\r\n        {\r\n          variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n          fetchPolicy: \"network-only\",\r\n        }\r\n    );\r\n\r\n    let productoBase = null;\r\n    if (data) productoBase = data.obtenerUnProductoVentas;\r\n\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const classes = useStyles();\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n        productoBase = [];\r\n\t};\r\n\r\n    const keyUpEvent = async (event) => {\r\n        if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n            const input_value = event.target.value;\r\n            obtenerProductos({\r\n                variables: {\r\n                    datosProductos: input_value,\r\n                    sucursal: sesion.sucursal._id,\r\n                    empresa: sesion.empresa._id\r\n                },\r\n                fetchPolicy: \"network-only\"\r\n            });\r\n        }\r\n    };\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 120){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n    const chevronWidth = 40;\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/precios.svg' \r\n                            alt=\"icono ventas\" \r\n                            style={{width: 36}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Consultar Precio</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F9</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n                maxWidth='md'\r\n                fullWidth\r\n                open={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n            >\r\n                <DialogContent\r\n                    open={open} \r\n                    onClose={handleClickOpen} \r\n                    TransitionComponent={Transition}\r\n                >\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\" \r\n                            textAlign=\"center\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg' alt=\"icono productos\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h6\">\r\n                                    Precio Producto\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box displa=\"flex\" justifyContent=\"center\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"50%\">\r\n                            <Paper className={classes.rootBusquedaProductos}>\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    onKeyUp={keyUpEvent}\r\n                                    placeholder=\"Buscar producto...\"\r\n                                />\r\n                                <IconButton>\r\n                                    <Search />\r\n                                </IconButton>\r\n                            </Paper>\r\n                        </Box>\r\n                    </div>\r\n                    {loading ? (\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            justifyContent=\"center\"\r\n                            alignItems=\"center\"\r\n                            height=\"40vh\"\r\n                        >\r\n                            <CircularProgress />\r\n                        </Box>\r\n                    ) : (<>\r\n                        <Grid container>\r\n                            <Grid item lg={6} md={6}>\r\n                                    {productoBase?.id_producto?.imagenes.length > 0 ? (\r\n                                        <Box p={7}>\r\n                                        <ItemsCarousel\r\n                                            requestToChangeActive={setActiveItemIndex}\r\n                                            activeItemIndex={activeItemIndex}\r\n                                            numberOfCards={1}\r\n                                            leftChevron={\r\n                                                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                                                    <ArrowBackIosIcon />\r\n                                                </IconButton>\r\n                                            }\r\n                                            rightChevron={\r\n                                                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                                                    <ArrowForwardIosIcon />\r\n                                                </IconButton>\r\n                                            }\r\n                                            infiniteLoop={true}\r\n                                            outsideChevron\r\n                                            chevronWidth={chevronWidth}\r\n                                        >\r\n                                            {productoBase?.id_producto?.imagenes.map((image)=>{\r\n                                                return(\r\n                                                    <Box \r\n                                                        className={classes.containerImagenesProducto}\r\n                                                        display=\"flex\"\r\n                                                        justifyContent=\"center\"\r\n                                                        alignItems=\"center\"\r\n                                                    >\r\n                                                        <img \r\n                                                            alt=\"Imagen producto\" \r\n                                                            src={image.url_imagen} \r\n                                                            className={classes.imagenProducto}\r\n                                                        />\r\n                                                    </Box>\r\n                                                )\r\n                                            })}\r\n                                        </ItemsCarousel>\r\n                                        </Box>\r\n                                    ) : (\r\n                                        <Box p={1} mt={15} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                            <PhotoLibraryIcon style={{fontSize: 40}} />\r\n                                        </Box>\r\n                                    )}\r\n                            </Grid>\r\n\r\n                            <Grid item lg={6} md={6}>\r\n                                <Paper elevation={3} className={classes.rootPrecioProductos}>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                <b>{productoBase?.codigo_barras}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography variant=\"h6\">\r\n                                                <b>{productoBase?.id_producto?.datos_generales.nombre_comercial}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography>\r\n                                                {productoBase?.descuento_activo === true ? (<b>Precio Promoción</b>) : null}\r\n                                            </Typography>\r\n                                            <Typography variant=\"h3\">\r\n                                                {productoBase?.descuento_activo === true ? \r\n                                                    (<b style={{color: \"red\"}}>${productoBase?.descuento?.precio_con_descuento.toFixed(2)}</b>) :\r\n                                                    (<b style={{color: \"green\"}}>${productoBase?.precio}</b>)}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    {productoBase?.descuento_activo === true ? (\r\n                                        <div className={classes.formInputFlex}>\r\n                                            <Box width=\"100%\" textAlign=\"center\">\r\n                                                <Typography>\r\n                                                    <b>Precio S/D</b>\r\n                                                </Typography>\r\n                                                <Typography variant=\"h5\" style={{color: \"green\"}}>\r\n                                                    <b> ${productoBase?.precio} </b>\r\n                                                </Typography>\r\n                                            </Box>\r\n                                        </div>\r\n                                    ) : null}\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                Unidad\r\n                                            </Typography>\r\n                                            <Typography >\r\n                                                <b>{productoBase?.unidad}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                Existencia\r\n                                            </Typography>\r\n                                            <Typography >\r\n                                                <b> {productoBase?.inventario_general ? \r\n                                                        productoBase?.inventario_general[0]?.cantidad_existente :\r\n                                                        0\r\n                                                    } \r\n                                                </b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                </Paper>\r\n                            </Grid>     \r\n                        </Grid>\r\n                    </>) } \r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClickOpen} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        \r\n        </>\r\n    )\r\n}\r\n","import React, { useState, useContext, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Paper,\r\n  Slide,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { calculatePrices, findProductArray, calculatePrices2 } from \"../../../config/reuserFunctions\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreciosProductos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  // const [selected, setSelected] = useState([]);\r\n\r\n  const [preciosProductos, setPreciosProductos] = useState({})\r\n\r\n  const {\r\n    productoCambioPrecio,\r\n    precioSelectProductoVenta,\r\n    setPrecioSelectProductoVenta,\r\n    setUpdateTablaVentas,\r\n    updateTablaVentas\r\n  } = useContext(VentasContext);\r\n  // console.log(productoCambioPrecio.id_producto.precios.precios_producto[0]);\r\n  const [selectPrisingProduct, setSelectPrisingProduct] = useState(\r\n    precioSelectProductoVenta.length > 0 ? precioSelectProductoVenta[0] : {}\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // console.log(productoCambioPrecio);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPreciosProductos(productoCambioPrecio);\r\n  }, [productoCambioPrecio ])\r\n\r\n  const handleAceptChangePrising = async () => {\r\n\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? { subTotal: 0, total: 0, impuestos: 0, iva: 0, ieps: 0, descuento: 0, monedero: 0 }\r\n        : venta;\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    if (\r\n      selectPrisingProduct.precio_neto > 0 ||\r\n      precioSelectProductoVenta.length > 0\r\n    ) {\r\n\r\n      const newProductoPrecioNuevo = { ...productoCambioPrecio };\r\n      const newProductoPrecioActual = { ...productoCambioPrecio };\r\n\r\n      const producto_encontrado = await findProductArray(\r\n        productoCambioPrecio\r\n      );\r\n\r\n      if (producto_encontrado.found) {\r\n        const new_resta = await calculatePrices2({\r\n            newP: newProductoPrecioNuevo, \r\n            cantidad: newProductoPrecioNuevo.cantidad_venta, \r\n            precio_boolean: true, \r\n            precio: newProductoPrecioNuevo.precio_actual_object, \r\n            granel: newProductoPrecioNuevo.granel_producto, \r\n            origen: \"\" \r\n          });\r\n        const new_suma = await calculatePrices2({\r\n          newP: newProductoPrecioActual, \r\n          cantidad: newProductoPrecioActual.cantidad_venta, \r\n          precio_boolean: true, \r\n          precio: precioSelectProductoVenta[0], \r\n          granel: newProductoPrecioActual.granel_producto, \r\n          origen: \"Tabla\" \r\n        });\r\n\r\n        newProductoPrecioActual.precio_a_vender = precioSelectProductoVenta[0].precio_neto;\r\n        newProductoPrecioActual.precio_seleccionado = true;\r\n        newProductoPrecioActual.precio_actual_producto = parseFloat((precioSelectProductoVenta[0].precio_neto).toFixed(2));\r\n        newProductoPrecioActual.precio_actual_object = precioSelectProductoVenta[0];\r\n        \r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newProductoPrecioActual\r\n        );\r\n\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo) +\r\n          new_suma.subtotalCalculo,\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo) +\r\n          new_suma.totalCalculo,\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo) +\r\n          new_suma.impuestoCalculo,\r\n        iva:\r\n          parseFloat(venta_existente.iva) -\r\n          parseFloat(new_resta.ivaCalculo) +\r\n          new_suma.ivaCalculo,\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) -\r\n          parseFloat(new_resta.iepsCalculo) +\r\n          new_suma.iepsCalculo,\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo) +\r\n          new_suma.descuentoCalculo,\r\n        monedero: parseFloat(venta_existente.monedero) - parseFloat(new_resta.monederoCalculo) +\r\n          new_suma.monederoCalculo,\r\n      };\r\n\r\n      //Guardarlo en el localStorage\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      // newProductoPrecio = {...newProductoPrecio};\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n      setPrecioSelectProductoVenta([]);\r\n      setPreciosProductos({});\r\n      //Cerrar modal\r\n      handleClickOpen();\r\n      }else{\r\n        console.log(\"Producto no encontrado\")\r\n      }\r\n    } else {\r\n      setAlert({\r\n        message: \"Este precio no es valido.\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = (precio) => {\r\n    let newSelected = [];\r\n    newSelected = newSelected.concat([], precio);\r\n    setSelectPrisingProduct(precio);\r\n    setPrecioSelectProductoVenta(newSelected);\r\n  };\r\n\r\n  const isSelected = (name) => precioSelectProductoVenta.indexOf(name) !== -1;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 114) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Button className={classes.borderBotonChico} onClick={handleClickOpen}>\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n              alt=\"icono money\"\r\n              style={{ fontSize: 25 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Precios</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F3</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" justifyContent=\"center\">\r\n              <Box mt={3}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Box textAlign=\"right\" mb={1}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={handleClickOpen}\r\n                    size=\"medium\"\r\n                  >\r\n                    <CloseIcon />\r\n                  </Button>\r\n                </Box>\r\n                <Box mt={2}>\r\n                  <Typography variant=\"h6\">Precios de Producto</Typography>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  Nombre:{\" \"}\r\n                  {productoCambioPrecio\r\n                    ? productoCambioPrecio?.id_producto?.datos_generales\r\n                        ?.nombre_comercial\r\n                    : \"\"}\r\n                </Typography>\r\n              </Box>\r\n            </div>\r\n            <Paper className={classes.root}>\r\n              <TableContainer className={classes.container}>\r\n                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 25 }}></TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio neto</TableCell>\r\n                      <TableCell style={{ width: 200 }}>\r\n                        Unidad mayoreo\r\n                      </TableCell>\r\n                      <TableCell style={{ width: 100 }}>Utilidad</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {preciosProductos?.id_producto?.precios?.precios_producto?.map(\r\n                      (precio, index) => {\r\n                        const isItemSelected = isSelected(precio);\r\n                        const labelId = `enhanced-table-checkbox-${index}`;\r\n                        return (\r\n                          <RenderTableRows\r\n                            key={index}\r\n                            precio={precio}\r\n                            isItemSelected={isItemSelected}\r\n                            labelId={labelId}\r\n                            handleClick={handleClick}\r\n                          />\r\n                        );\r\n                      }\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleAceptChangePrising()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ precio, isItemSelected, labelId, handleClick }) => {\r\n  const doubleClick = (e) => {\r\n    try {\r\n      if (e.detail === 2) {\r\n        handleClick(precio);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={precio.numero_precio}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => doubleClick(e)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              handleClick(precio);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.numero_precio}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.precio_neto > 0 ? precio.precio_neto.toFixed(2) : 0}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.unidad_mayoreo}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.utilidad} %</TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, IconButton, Typography } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330, align: 'center' },\r\n\t{ id: 'productos', label: 'Productos', minWidth: 20, align: 'center' },\r\n\t{ id: 'total', label: 'Total', minWidth: 200, align: 'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tcontainer: {\r\n\t\theight: \"45vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t}\r\n});\r\n\r\nexport default function ListaVentas() {\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRegresar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{listaEnEspera?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsVentas venta={row} index={index} /> \r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst RowsVentas = ({ venta, index }) => {\r\n\r\n    const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\tconst [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\tlet VentaEnEspera = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n\tfunction borrarVenta(key) {\r\n\t\tif(sesion.accesos.ventas.eliminar_ventas.ver === true){\r\n\t\t\tlistaEnEspera.forEach(function(elemento, indice, array) {\r\n\t\t\t\tif(key === indice){\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t}else{\r\n\t\t\treturn null\r\n\t\t}\r\n        \r\n    };\r\n\r\n\tconst AgregarVentaDeNuevo = (key) => {\r\n\t\tif(VentaEnEspera === null){\r\n\t\t\tlistaEnEspera.forEach((element, index) => {\r\n\t\t\t\tif (index === key) {\r\n\t\t\t\t\tlocalStorage.setItem(\"DatosVentas\", JSON.stringify(element.VentaEnEspera));\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t}else{\r\n\t\t\tsetOpen(!open);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={index} \r\n\t\t\t>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{index + 1}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.fecha ? venta.fecha : \"\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.cliente ? venta.VentaEnEspera.cliente.nombre_cliente : \"Pub. General\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.productos.length}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t$ {(venta.VentaEnEspera.total).toFixed(4)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"regresar\" \r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => AgregarVentaDeNuevo(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AutorenewIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => borrarVenta(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tNo puedes agregar una venta, cuando ya esta una en curso.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tAceptar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\r\n\t);\r\n}","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button, DialogActions,Dialog, DialogContent, Divider,Grid, Typography, Slide, Badge } from '@material-ui/core'\r\nimport ListaVentas from './ListaVentas';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function VentasEspera() {\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 76){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <Badge \r\n                            badgeContent={listaEnEspera ? listaEnEspera.length : 0 } \r\n                            color=\"primary\" \r\n                            style={{fontSize: 45}}\r\n                        >\r\n                            <img \r\n                                src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' \r\n                                alt=\"icono caja2\" \r\n                                style={{width: 38}} \r\n                            />\r\n                        </Badge>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Ventas en Espera</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + L</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3} >\r\n                                <Typography variant=\"h6\">\r\n                                    Ventas en espera\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            <ListaVentas />\r\n                        </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClickOpen} variant=\"contained\" color=\"primary\" size=\"large\">\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha.', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'},\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '50vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaVentasRealizadas() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(8);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Divider,Grid, IconButton, InputBase,  Paper, Slide, Typography } from '@material-ui/core'\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaVentasRealizadas from './ListaVentasRealizadas';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcPaid, FcSearch } from 'react-icons/fc';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasRealizadas() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 86){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcSearch style={{fontSize: 45}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Buscar Folio</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + V</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h6\">\r\n                                    Ventas Realizadas\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            <div className={classes.formInputFlex}>\r\n                                <Box width=\"100%\">\r\n                                    <Paper className={classes.rootBusqueda}>\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            placeholder=\"Buscar venta...\"\r\n                                        />\r\n                                        <IconButton >\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </Paper>\r\n                                </Box>\r\n                            </div>\r\n                            <ListaVentasRealizadas />\r\n                        </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClickOpen} variant=\"contained\" color=\"primary\" size=\"large\">\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n        </>\r\n    )\r\n}","import { Box, Grid } from '@material-ui/core'\r\nimport React, { Fragment } from 'react'\r\nimport Abonos from '../../pages/ventas/Abonos/Abonos'\r\nimport BuscarProducto from '../../pages/ventas/BuscarProductos/BuscarProducto'\r\nimport ClientesVentas from '../../pages/ventas/ClientesVentas/ClientesVentas'\r\nimport AbrirCajon from '../../pages/ventas/Operaciones/AbrirCajon'\r\nimport CancelarVenta from '../../pages/ventas/Operaciones/CancelarVenta'\r\nimport CerrarVenta from '../../pages/ventas/Operaciones/CerrarVenta'\r\nimport ConsultarPrecio from '../../pages/ventas/Operaciones/ConsultarPrecio'\r\nimport PreciosProductos from '../../pages/ventas/Operaciones/PreciosProducto'\r\nimport VentasEspera from '../../pages/ventas/VentasEspera/VentasEspera'\r\nimport VentasRealizadas from '../../pages/ventas/VentasRealizadas/VentasRealizadas'\r\nimport useStyles from './styles';\r\n\r\nexport default function NavegacionVentasLateral() {\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <Grid \r\n                container \r\n                className={classes.drawerColor}\r\n            >\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <CerrarVenta />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <BuscarProducto />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <CancelarVenta />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <AbrirCajon />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <PreciosProductos />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <VentasEspera />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <ClientesVentas />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <VentasRealizadas />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <ConsultarPrecio />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <Abonos />\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { CircularProgress, IconButton } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\n\r\nimport {findProductArray, calculatePrices } from '../../config/reuserFunctions';\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ \r\n\tproducto,\r\n\tsetNewProductoVentas,\r\n\tnewProductoVentas,\r\n\tsetDatosVentasActual\r\n }) {\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\t/* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n\r\n\tconst { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n\tconst handleToggleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarProductoBD = async () => {\r\n\t\t// console.log(producto);\r\n\t\tlet venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\t\tlet productosVentas = venta === null ? [] : venta.productos;\r\n\t\tconst venta_actual = venta === null ? [] : venta;\r\n\t\tlet productosVentasTemp = productosVentas;\r\n\t\tlet venta_existente =\r\n\t\t\tventa === null\r\n\t\t\t? \r\n\t\t\t\t{\r\n\t\t\t\t\tsubTotal: 0,\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\timpuestos: 0,\r\n\t\t\t\t\tiva: 0,\r\n\t\t\t\t\tieps: 0,\r\n\t\t\t\t\tdescuento: 0,\r\n\t\t\t\t\tmonedero: 0\r\n\t\t\t\t}\r\n\t\t\t: venta;\r\n\r\n\t\tconst producto_encontrado = await findProductArray(\r\n\t\t\tproductosVentas,\r\n\t\t\tproducto\r\n\t\t);\r\n\t\tif (producto_encontrado.found) {\r\n\t\t\tconst { cantidad_venta, ...newP } = producto;\r\n\t\t\t// newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n\t\t\t//Sacar los impuestos que se van a restar\r\n\t\t\tlet calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\t\t\tproductosVentasTemp.splice(\r\n\t\t\t\tproducto_encontrado.producto_found.index,\r\n\t\t\t\t1\r\n\t\t\t);\r\n\t\t\tconst CalculosData = {\r\n\t\t\t\tsubTotal: \r\n\t\t\t\t  parseFloat(venta_existente.subTotal) -\r\n\t\t\t\t  parseFloat(calculoResta.subtotalCalculo) ,\r\n\t\t\t\ttotal: \r\n\t\t\t\t  parseFloat(venta_existente.total) -\r\n\t\t\t\t  parseFloat(calculoResta.totalCalculo),\r\n\t\t\t\timpuestos: \r\n\t\t\t\t  parseFloat(venta_existente.impuestos) -\r\n\t\t\t\t  parseFloat(calculoResta.impuestoCalculo),\r\n\t\t\t\tiva: \r\n\t\t\t\t  parseFloat(venta_existente.iva) -\r\n\t\t\t\t  parseFloat(calculoResta.ivaCalculo),\r\n\t\t\t\tieps: \r\n\t\t\t\t  parseFloat(venta_existente.ieps) -\r\n\t\t\t\t  parseFloat(calculoResta.iepsCalculo),\r\n\t\t\t\tdescuento: \r\n\t\t\t\t  parseFloat(venta_existente.descuento) -\r\n\t\t\t\t  parseFloat(calculoResta.descuentoCalculo),\r\n\t\t\t\tmonedero: \r\n\t\t\t\t  parseFloat(venta_existente.monedero) -\r\n\t\t\t\t  parseFloat(calculoResta.monederoCalculo),\r\n\t\t\t  };\r\n\t\t\t  localStorage.setItem(\"DatosVentas\", JSON.stringify({\r\n\t\t\t\t...CalculosData,\r\n\t\t\t\tcliente: venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n\t\t\t\tventa_cliente: venta_actual.venta_cliente === true ? venta_actual.venta_cliente : false,\r\n\t\t\t\tproductos: productosVentasTemp,\r\n\t\t\t  }));\r\n\t\t\t  setDatosVentasActual(CalculosData);\r\n\t\t\t  //Recargar la tabla de los productos\r\n\t\t\t//   setNewProductoVentas(!newProductoVentas);\r\n\t\t\t  setUpdateTablaVentas(!updateTablaVentas);\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\t\t\t<IconButton size=\"small\" onClick={() => handleToggleModal()}>\r\n\t\t\t\t<Delete size=\"small\" color=\"error\" />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\tonClose={() => handleToggleModal()}\r\n\t\t\t\taria-labelledby=\"alert-dialog-delete-producto\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"alert-dialog-delete-producto\">\r\n\t\t\t\t\t{'¿Estás seguro de eliminar este producto?'}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogActions style={{ display: 'flex', justifyContent: 'center' }}>\r\n\t\t\t\t\t<Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => eliminarProductoBD()} color=\"secondary\" startIcon={loading ? <CircularProgress color=\"inherit\" size={20} /> : null}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState, useEffect, Fragment, useRef, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport EliminarProductoVenta from \"./EliminarProductoVenta\";\r\n\r\nimport { useDebounce } from \"use-debounce\";\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2\r\n} from \"../../config/reuserFunctions\";\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\nimport { Avatar } from \"@material-ui/core\";\r\n\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"Cantidad\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Cantidad\",\r\n    width: 20,\r\n  },\r\n  {\r\n    id: \"Descripcion\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Descripcion\",\r\n    width: 340,\r\n  },\r\n  {\r\n    id: \"Existencias\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Existencias\",\r\n    width: 40,\r\n  },\r\n  {\r\n    id: \"% Desc\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"% Desc\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"U. Venta\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"U. Venta\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"Precio U\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Precio U\",\r\n    width: 100,\r\n  },\r\n  {\r\n    id: \"Eliminar\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Eliminar\",\r\n    width: 10,\r\n  },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"normal\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n            style={{ width: headCell.width }}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"light\"\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h6\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Nutrition\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 7\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  container: {\r\n    height: \"100%\",\r\n    '& ::-webkit-scrollbar': {\r\n      display: 'none'\r\n    }\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n    height: \"55vh\",\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n\r\n}));\r\n\r\nexport default function EnhancedTable({\r\n  setDatosVentasActual,\r\n}) {\r\n  const classes = useStyles();\r\n  const [ selected, setSelected ] = useState([]);\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { setProductoCambioPrecio, setPrecioSelectProductoVenta, updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const [datosTabla, setDatosTabla] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    setDatosTabla(venta === null ? [] : venta.productos);\r\n  }, [updateTablaVentas]);\r\n\r\n  const handleClick = (name) => {\r\n    let newSelected = [];\r\n    const exist = selected.indexOf(name) !== -1;\r\n    if(exist){\r\n      newSelected = [];\r\n    }else{\r\n      newSelected = newSelected.concat([], name);\r\n    } \r\n    const producto = name.id_producto.precios.precios_producto.filter((p) => p.precio_neto === name.precio_actual_producto);\r\n    if(producto.length > 0) setPrecioSelectProductoVenta(producto);\r\n    setProductoCambioPrecio(name);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e, producto) => {\r\n    try {\r\n      let timer;\r\n      clearTimeout(timer);\r\n      if (e.detail === 2) {\r\n        handleClick(producto);\r\n        setProductoCambioPrecio(producto);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const isSelected = (name) => {\r\n    return selected.indexOf(name) !== -1;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper>\r\n        <TableContainer className={classes.container}>\r\n          {/* <div\r\n            style={{\r\n              display: 'flex', \r\n              width: '80%', \r\n              height: '60%', \r\n              alignItems: 'center',\r\n              backgroundPosition: 'center',\r\n              justifyContent: 'center',\r\n              zIndex: 'auto',\r\n              position: 'absolute',\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                maxWidth: '40%'\r\n              }}\r\n            >\r\n              <Avatar\r\n                alt=\"Imagen fondo empresa\"\r\n                src={sesion.empresa.imagen}\r\n                style={{\r\n                  height: '100%',\r\n                  width: '100%',\r\n                  opacity: .2\r\n                }}\r\n              />\r\n            </div>\r\n          </div> */}\r\n          <Table\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{ width: 25, textAlign:\"center\" }}></TableCell>\r\n                <TableCell style={{ width: 20, textAlign:\"center\" }}>Cantidad</TableCell>\r\n                <TableCell style={{ width: 340 }}>Descripcion</TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Exis.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}><b>% Desct.</b></TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Rx.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}>U. Venta</TableCell>\r\n                <TableCell style={{ width: 100, textAlign:\"center\" }}>Precio U</TableCell>\r\n                <TableCell align=\"center\" style={{ width: 10 }} />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosTabla?.map((producto, index) => {\r\n                const isItemSelected = isSelected(producto);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RenderTableRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    setUpdateTablaVentas={setUpdateTablaVentas}\r\n                    updateTablaVentas={updateTablaVentas}\r\n                    setDatosVentasActual={setDatosVentasActual}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    TwoClickInRowTableBuy={TwoClickInRowTableBuy}\r\n                    setSelected={setSelected}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({\r\n  producto,\r\n  setUpdateTablaVentas,\r\n  updateTablaVentas,\r\n  setDatosVentasActual,\r\n  TwoClickInRowTableBuy,\r\n  handleClick,\r\n  isItemSelected,\r\n  labelId,\r\n  setSelected,\r\n  selected\r\n}) => {\r\n  // const [actuallyProduct, setActuallyProduct] = useState(producto);\r\n  const [newCantidadProduct, setNewCantidadProduct] = useState(\r\n    producto.cantidad_venta\r\n  );\r\n  \r\n  const [ tempAmount, setTempAmount ] = useState(producto.cantidad_venta);\r\n\r\n  const textfield = useRef(null);\r\n  const [value] = useDebounce(newCantidadProduct, 500);\r\n\r\n\r\n  useEffect(() => {\r\n    setTempAmount(producto.cantidad_venta);\r\n  }, [producto.cantidad_venta]);\r\n\r\n  useEffect(() => {\r\n    CalculeDataPricing(value);\r\n  }, [value]);\r\n  \r\n\r\n  const calculateNewPricingAmount = (cantidad) => {\r\n    try {\r\n      setTempAmount(cantidad);\r\n      setNewCantidadProduct(cantidad);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const CalculeDataPricing = async (new_cant) => {\r\n    if(new_cant === \"\" || new_cant == 0){\r\n      setTempAmount(producto.cantidad_venta);\r\n    }else{\r\n      let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let productosVentas = venta === null ? [] : venta.productos;\r\n      const venta_actual = venta === null ? [] : venta;\r\n      let productosVentasTemp = productosVentas;\r\n      let venta_existente =\r\n        venta === null\r\n          ? {\r\n              subTotal: 0,\r\n              total: 0,\r\n              impuestos: 0,\r\n              iva: 0,\r\n              ieps: 0,\r\n              descuento: 0,\r\n              monedero: 0\r\n            }\r\n          : venta;\r\n\r\n      let CalculosData = {};\r\n      \r\n      //Buscar y obtener ese producto en el array de ventas\r\n      const producto_encontrado = await findProductArray(\r\n        producto\r\n      );\r\n      if (producto_encontrado.found) {\r\n        const { cantidad_venta, ...newP } =\r\n          producto_encontrado.producto_found.producto;\r\n        newP.cantidad_venta = new_cant\r\n        const verify_prising = await verifiPrising(newP);\r\n        const newPrising = verify_prising.found ? verify_prising.object_prising : newP.precio_actual_object;\r\n        \r\n        const new_resta = await calculatePrices2({newP, cantidad: cantidad_venta, precio_boolean: true, precio: newP.precio_actual_object, granel: newP.granel_producto, origen: \"Tabla\" });\r\n        const new_suma = await calculatePrices2({newP, cantidad: new_cant, precio_boolean: true, precio: newPrising, granel: newP.granel_producto, origen: \"Tabla\" });\r\n\r\n        if (verify_prising.found) {\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n          newP.precio_anterior = newP.precio_actual_porducto;\r\n          newP.precio_actual_producto = verify_prising.pricing;\r\n          newP.precio_actual_object = verify_prising.object_prising;\r\n        }else{\r\n          newP.cantidad_venta = parseInt(new_cant);\r\n          newP.precio_anterior = newP.precio_actual_producto;\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n        }\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n      } else {\r\n        console.log(\"El producto no existe\");\r\n      }\r\n\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      //Recargar la tabla de los productos\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        style={{height: '15px'}}\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => TwoClickInRowTableBuy(e,producto)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              if(selected.length > 0) setSelected([]);\r\n              handleClick(producto);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => calculateNewPricingAmount(e.target.value)}\r\n            value={tempAmount}\r\n            type=\"number\"\r\n            name=\"cantidad_venta\"\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          {producto.id_producto.datos_generales.nombre_comercial}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          {producto.concepto === \"medida\"\r\n            ? producto.cantidad\r\n            : producto.inventario_general.map(\r\n                (existencia) => `${existencia.cantidad_existente}`\r\n              )}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          %{\" \"}\r\n          {producto.descuento_activo === true\r\n            ? producto.descuento.porciento\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.id_producto.datos_generales.receta_farmacia === true\r\n            ? \"Si\"\r\n            : \"No\"}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.inventario_general.map(\r\n            (existencia) => `${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          $ { producto.precio_actual_producto}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          <EliminarProductoVenta\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n          />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { TextField } from \"@material-ui/core\";\r\n// import { BlurLinear } from \"@material-ui/icons\";\r\n// import { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from '../../context/Catalogos/crearClienteCtx';\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function ClientesVentas() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { setUpdateClientVenta, updateClientVenta } = useContext(ClienteCtx);\r\n  const { setClientesVentas } = useContext(VentasContext);\r\n\r\n  const [selectClient, setSelectClient] = useState({});\r\n\r\n  // console.log(sesion.empresa._id);\r\n  // console.log(sesion.sucursal._id);\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n\r\n  // console.log(error);\r\n  // console.log(\"data\",data);\r\n  let obtenerClientes = [];\r\n  if (data) obtenerClientes = data.obtenerClientesVentas;\r\n  // console.log(obtenerClientes);\r\n\r\n  useEffect(() => {\r\n    const data = () => {\r\n      // console.log(\"llego al final\");\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      if (venta !== null) {\r\n        setSelectClient(venta.cliente);\r\n        setClientesVentas(venta.cliente);\r\n        refetch();\r\n      }\r\n    }\r\n    data();\r\n  }, [refetch, updateClientVenta]);\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n    try {\r\n      // console.log(value);\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      setSelectClient(value);\r\n      \r\n      // console.log(venta_actual);\r\n      let dataCliente = {\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero: venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          venta_cliente: value === null ? false : true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual. productos : [],\r\n      }\r\n      if(value !== null) dataCliente = {...dataCliente, cliente: value, }\r\n      localStorage.setItem(\"DatosVentas\",JSON.stringify(dataCliente));\r\n      setUpdateClientVenta(!updateClientVenta);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading) return null;\r\n\r\n  return (\r\n    <div>\r\n      <Autocomplete\r\n        id=\"combo-box-producto-codigo\"\r\n        size=\"small\"\r\n        fullWidth\r\n        options={obtenerClientes}\r\n        getOptionLabel={(option) =>\r\n          option.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n        }\r\n        renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n        onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n        getOptionSelected={(option) => option.nombre_cliente}\r\n        value={selectClient ? selectClient : null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/peso.1c192c88.svg\";","import React, { useState } from 'react';\r\n\r\nimport { AppBar, Box, Button, Dialog, InputBase, makeStyles, Paper, Slide, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Toolbar, Typography } from '@material-ui/core';\r\n\r\nimport moneda from '../../../icons/ventas/peso.svg';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst columns = [\r\n\t{ id: \"icono\", label: 'Icono', minWidth: 50 },\r\n    { id: \"moneda\", label: 'Moneda', minWidth: 50 },\r\n\t{ id: \"descripcion\", label: 'Descripcion', minWidth: 190 },\r\n\t{ id: \"cambio\", label: 'Cambio', minWidth: 20 },\r\n\r\n];\r\n\r\nfunction createData(moneda, descripcion, cambio ) {\r\n\treturn { moneda, descripcion, cambio };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Pesos Mex.', 18.90),\r\n\tcreateData(2, 'Dolar E.U.', 18.90),\r\n    createData(2, 'Dolar Canadiense', 18.90),\r\n    createData(2, 'Euro', 18.90),\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '30vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 100\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex'\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function MonedaCambio() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{ setOpen(!open) }\r\n\r\n    return (\r\n        <div>\r\n            <Box \r\n                width=\"100%\"\r\n                display=\"flex\"\r\n                justifyItems=\"center\"\r\n                alignSelf=\"center\"\r\n                justifySelf=\"center\"\r\n                alignItems=\"center\"\r\n            >\r\n                <Box mt={1}>\r\n                    <img src={moneda} alt=\"iconoBander\" className={classes.iconSize} /> \r\n                </Box>\r\n                <Box width=\"100%\" ml={1} onClick={() => handleClickOpen()}>\r\n                    <Paper width=\"100%\">\r\n                        <InputBase className={classes.rootBusqueda} />\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Dialog open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tTipo de Moneda\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                            <CloseIcon />\r\n                        </Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\r\n                    <Box p={1}>\r\n                        <TableContainer className={classes.container}>\r\n                            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        {columns.map((column, index) => (\r\n                                            <TableCell key={index} style={{ minWidth: column.minWidth }}>\r\n                                                {column.label}\r\n                                            </TableCell>\r\n                                        ))}\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {rows.map((row, index) => {\r\n                                        return (\r\n                                            <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                                                {columns.map((column, index) => {\r\n                                                    const value = row[column.id];\r\n                                                    return (\r\n                                                        <TableCell key={index} align={column.align}>\r\n                                                            {column.format && typeof value === 'number' ? (\r\n                                                                column.format(value)\r\n                                                            ) : (\r\n                                                                value\r\n                                                            )}\r\n                                                        </TableCell>\r\n                                                    );\r\n                                                })}\r\n                                            </TableRow>\r\n                                        );\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"./styles\";\r\n\r\nimport { /* FcRating, */ FcBusinessman, FcCalendar, FcSalesPerformance } from 'react-icons/fc';\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\n\r\nimport TablaVentasCheckbox from \"./Tabla_ventas_checkbox\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport ClientesVentas from \"./ClientesVentas\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from '../../components/SnackBarMessages';\r\n\r\nimport { Fragment } from \"react\";\r\nimport MonedaCambio from \"./Operaciones/MonedaCambio\";\r\nimport Cotizacion from './Cotizacion/Cotizacion'\r\n\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2\r\n} from \"../../config/reuserFunctions\";\r\n\r\n// import { ClienteProvider } from '../../context/Catalogos/crearClienteCtx';\r\n\r\nexport default function VentasGenerales() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  // const productosVentas = JSON.parse(localStorage.getItem('productosVentas'));\r\n  const classes = useStyles();\r\n  // const [newProductoVentas, setNewProductoVentas] = useState(false);\r\n  const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  });\r\n\r\n  const { updateTablaVentas, setUpdateTablaVentas, setOpen, clientesVentas  } = useContext(VentasContext);\r\n\r\n  const [DatosVentasActual, setDatosVentasActual] = useState({\r\n    subTotal: 0,\r\n    total: 0,\r\n    impuestos: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n    descuento: 0,\r\n    monedero: 0,\r\n    tipo_cambio: {},\r\n  });\r\n\r\n  const [alert, setAlert] = useState({ message: '', status: '', open: false });\r\n\r\n  const [obtenerProductos, { data, loading, error }] = useLazyQuery(\r\n    CONSULTA_PRODUCTO_UNITARIO,\r\n    {\r\n      fetchPolicy: \"network-only\"\r\n    }\r\n  );\r\n\r\n  const [consultaBase, setConsultaBase] = useState(false);\r\n\r\n  let productosBase = null;\r\n  if(error){\r\n    console.log(data,loading, error.networkError);\r\n    console.log(data,loading, error.graphQLErrors);\r\n  }\r\n  // console.log(data,loading, error);\r\n  if (data) productosBase = data.obtenerUnProductoVentas;\r\n  // console.log(productosBase);\r\n\r\n  useEffect(() => {\r\n    if(error){\r\n      if(error.networkError){\r\n          setAlert({ message: `Error de servidor`, status: 'error', open: true });\r\n        }else if(error.graphQLErrors){\r\n          setAlert({ message: `${error.graphQLErrors[0]?.message}`, status: 'error', open: true });\r\n        }\r\n    }else{\r\n      if(productosBase !== null){\r\n        if (productosBase.cantidad !== null) {\r\n          agregarProductos(productosBase);\r\n        }else{\r\n          setOpen(true);\r\n          setAlert({ message: `Este producto no existe`, status: 'error', open: true });\r\n        }\r\n      }\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    });\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (venta !== null) {\r\n      setDatosVentasActual({\r\n        subTotal: parseFloat(venta.subTotal),\r\n        total: parseFloat(venta.total),\r\n        impuestos: parseFloat(venta.impuestos),\r\n        iva: parseFloat(venta.iva),\r\n        ieps: parseFloat(venta.ieps),\r\n        descuento: parseFloat(venta.descuento),\r\n        monedero: parseFloat(venta.monedero),\r\n      });\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n      const input_value = event.target.value.trim();\r\n      const data = input_value.split(\"*\");\r\n      if (data.length > 1) {\r\n        let data_operation = isNaN(data[0]) ? data[1] : data[0];\r\n        let data_key = isNaN(data[0]) ? data[0] : data[1];\r\n        setGranelBase({\r\n          granel: true,\r\n          valor: data_operation,\r\n        });\r\n        obtenerProductos({\r\n          variables: {\r\n            datosProductos: data_key,\r\n            sucursal: sesion.sucursal._id, \r\n            empresa: sesion.empresa._id\r\n          },\r\n          fetchPolicy: \"network-only\"\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      } else {\r\n        setGranelBase({\r\n          granel: false,\r\n          valor: 0,\r\n        });\r\n        obtenerProductos({\r\n          variables: {            datosProductos: input_value,\r\n            sucursal: sesion.sucursal._id,\r\n            empresa: sesion.empresa._id\r\n          },\r\n          fetchPolicy: \"network-only\"\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      }\r\n    }\r\n  };\r\n\r\n  const agregarProductos = async (producto) => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n    \r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(\r\n      producto\r\n    );\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({newP,cantidad: 0, granel: granelBase, origen: \"Ventas1\", precio_boolean: false });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.iva);\r\n\r\n      console.log(new_prices.newP);\r\n      \r\n      productosVentasTemp.push(new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal: parseFloat(venta_existente.subTotal) + parseFloat(new_prices.subtotalCalculo),\r\n        total: parseFloat(venta_existente.total) + parseFloat(new_prices.totalCalculo),\r\n        impuestos: parseFloat(venta_existente.impuestos) + parseFloat(new_prices.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps: parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento: parseFloat(venta_existente.descuento) + parseFloat(new_prices.descuentoCalculo),\r\n        monedero: parseFloat(venta_existente.monedero) + parseFloat(new_prices.monederoCalculo)\r\n      };\r\n\r\n\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      \r\n      const { cantidad_venta, ...newP } = producto_encontrado.producto_found.producto;\r\n      \r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({newP,cantidad_venta, granel: newP.granel_producto, origen: '', precio_boolean: true, precio: newP.precio_actual_object });\r\n        \r\n        const calculo_sumar = await calculatePrices2({newP,cantidad_venta: newP.cantidad_venta, granel: newP.granel_producto, origen: '', precio_boolean: true, precio: verify_prising.pricing });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n        newP.precio_actual_object = verify_prising.object_prising;\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        }; \r\n      } else { \r\n\r\n        const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({newP, cantidad: 0, granel: granelBase, origen: \"Ventas2\"});\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n        \r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal: parseFloat(venta_existente.subTotal) + parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos: parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento: parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero: parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <Box height='9%'>\r\n          <div className={classes.formInputFlex}>\r\n            <Box\r\n              width=\"100%\"\r\n              display=\"flex\"\r\n              justifyItems=\"center\"\r\n              alignSelf=\"center\"\r\n              justifySelf=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Box mt={1} mr={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/busqueda-de-codigos-de-barras.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\">\r\n                <Paper className={classes.rootBusqueda}>\r\n                  <InputBase\r\n                    width=\"100%\"\r\n                    fullWidth\r\n                    placeholder=\"Buscar producto...\"\r\n                    onKeyUp={keyUpEvent}\r\n                  />\r\n                  <IconButton>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Box>\r\n            </Box>\r\n            <Box\r\n              width=\"100%\"\r\n              display=\"flex\"\r\n              justifyItems=\"center\"\r\n              alignSelf=\"center\"\r\n              justifySelf=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Box mt={1} mr={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\" alignItems=\"center\">\r\n                <ClientesVentas sesion={sesion} />\r\n                {/* <Paper className={classes.rootBusqueda}>\r\n                  <InputBase fullWidth placeholder=\"Buscar cliente...\" />\r\n                  <IconButton>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper> */}\r\n              </Box>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <MonedaCambio />\r\n            </Box>\r\n            <Box width=\"100%\" display=\"flex\">\r\n              <Box mr={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/publicalo.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\" >\r\n                <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                  <Select id=\"tipo_documento\" name=\"tipo_documento\">\r\n                    <MenuItem value=\"\">\r\n                      <em>Selecciona uno</em>\r\n                    </MenuItem>\r\n                    <MenuItem value=\"TICKET\">TICKET</MenuItem>\r\n                    <MenuItem value=\"FACTURA\">FACTURA</MenuItem>\r\n                    <MenuItem value=\"NOTA REMISION\">NOTA REMISION</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Box> \r\n            </Box>\r\n          </div>\r\n        </Box>\r\n\r\n        <Box height='65%'>\r\n          <TablaVentasCheckbox setDatosVentasActual={setDatosVentasActual} />\r\n        </Box>\r\n        \r\n        <Box display='flex' justifyContent='flex-end' flexDirection='column' height='25%'>\r\n          <Paper elevantion={3} style={{padding: 2, marginTop: 2}}> \r\n            <Grid container>\r\n              <Grid item lg={7}>\r\n                  <Grid \r\n                    container\r\n                    direction=\"row\"\r\n                    justifyContent=\"flex-end\"\r\n                    alignItems=\"center\"  \r\n                  >\r\n                    <Grid item lg={7}>\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                            Cliente: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.nombre_cliente : \"\"}</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <FcBusinessman style={{fontSize: 19}} />\r\n                        </Box>\r\n                      </Box>\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                        <Typography variant=\"subtitle1\">\r\n                            Cliente.: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.numero_cliente : \"\"}</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1} >\r\n                          <AiOutlineFieldNumber style={{fontSize: 22}} />\r\n                        </Box>\r\n                      </Box>\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                            Clave Clte.: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.clave_cliente : \"\"}</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <FaBarcode style={{fontSize: 19}} />\r\n                        </Box>\r\n                      </Box>\r\n                    </Grid>\r\n                    <Grid item lg={5}>\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                            Limite Credito: <b style={{fontSize: 16}}>${clientesVentas ? clientesVentas.limite_credito : 0}</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <FaMoneyCheckAlt style={{fontSize: 19}} />\r\n                        </Box>\r\n                      </Box>\r\n                      {/* <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                          Descs.: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.numero_descuento : 0}%</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <AiOutlineFieldNumber style={{fontSize: 22}} />\r\n                        </Box>\r\n                      </Box> */}P\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                            Dias Credito: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.dias_credito : 0} Dias</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <FcCalendar style={{fontSize: 19}} />\r\n                        </Box>\r\n                      </Box>\r\n                    </Grid>\r\n                  </Grid>\r\n              </Grid>\r\n              <Grid item lg={5}>\r\n                <Grid container>\r\n                  <Grid item lg={7}>\r\n                    <Box display=\"flex\" alignItems=\"center\" flexDirection=\"row-reverse\" >\r\n                      <Box>\r\n                        <Typography variant=\"subtitle1\">\r\n                          Monedero : <b style={{fontSize: 17}}>$ {DatosVentasActual ? DatosVentasActual?.monedero?.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box mt={.5} mr={1}>\r\n                        <FcSalesPerformance style={{fontSize: 19}} />\r\n                      </Box>\r\n                    </Box>\r\n                    <Box\r\n                      flexDirection=\"row-reverse\"\r\n                      alignItems=\"center\"\r\n                      display=\"flex\"\r\n                    >\r\n                      <Box>\r\n                        <Typography variant=\"subtitle1\">\r\n                          Descuento: <b style={{fontSize: 17}}>${DatosVentasActual ? DatosVentasActual?.descuento?.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box mt={.5} mr={1}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <img \r\n                              src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png' \r\n                              alt=\"icono admin\" \r\n                              style={{width: 20}}                                   \r\n                            />\r\n                        </Box>\r\n                      </Box>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={5}>\r\n                      <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        mr={1}\r\n                      >\r\n                        <Typography variant=\"subtitle1\">\r\n                          Subtotal: <b style={{fontSize: 17}}>$ {DatosVentasActual?.subTotal ? DatosVentasActual?.subTotal?.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                        <Typography variant=\"subtitle1\">\r\n                          Impuestos: <b style={{fontSize: 17}}>$ {DatosVentasActual?.impuestos ? DatosVentasActual?.impuestos?.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                      {/* <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        mr={1}\r\n                      >\r\n                        <Typography variant=\"subtitle1\" >\r\n                          Iva: <b style={{fontSize: 17}}>$ {DatosVentasActual?.iva ? DatosVentasActual.iva.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box> */}\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n              <Typography variant=\"h4\">\r\n                Total: <b style={{color: \"green\"}}>${DatosVentasActual?.total ? DatosVentasActual?.total.toFixed(2) : 0}</b>\r\n              </Typography>\r\n              <Box mt={.5} mr={1}>\r\n                <MonetizationOnIcon style={{fontSize: 37, color: \"green\"}} />\r\n              </Box>\r\n              <Box p={1}>\r\n                <Cotizacion type=\"GENERAR\" />\r\n              </Box>\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport VentasGenerales from './VentasGenerales';\r\nimport { ClienteProvider } from '../../context/Catalogos/crearClienteCtx';\r\nimport AbrirTurno from '../ventas/AbrirCerrarTurno/AbrirTurno';\r\nimport { Box, CircularProgress, Grid, Paper, Typography } from '@material-ui/core';\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\n\r\nexport default function VentaIndex() {\r\n\r\n    const { turnoActivo, setTurnoActivo } = useContext(VentasContext);\r\n    const [ varActive, setVarActive ] = useState(false);\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    useEffect(() => {\r\n        const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n        setVarActive(sesion.turno_en_caja_activo);\r\n        setTurnoActivo(false);\r\n    }, [ turnoActivo ]);\r\n\r\n    return (\r\n        <ClienteProvider>\r\n            {varActive === true && turnoEnCurso ? (\r\n                <VentasGenerales />\r\n            ) : (\r\n                <AbrirTurnoEnVentas />\r\n            )}\r\n        </ClienteProvider>\r\n    )\r\n};\r\n\r\nfunction AbrirTurnoEnVentas() {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return(\r\n        <Grid\r\n            container\r\n            direction=\"row\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n        >\r\n            <Box mt={5} >\r\n                <Paper elevation={5}>\r\n                    <Box p={2} textAlign=\"center\">\r\n                        <Typography variant=\"h6\">\r\n                            Si deseas realizar ventas inicia tu turno primeramente.\r\n                        </Typography>\r\n                    </Box>\r\n                    <AbrirTurno type=\"FRENTE\" setLoading={setLoading} />\r\n                </Paper>\r\n            </Box>\r\n        </Grid>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { BrowserRouter as Switch, Route } from 'react-router-dom';\r\nimport NavegacionVentas from '../Navegaciones/NavegacionVentas';\r\nimport NavegacionVentasLateral from '../Navegaciones/NavegacionVentasLateral';\r\nimport { Grid, Toolbar, Box } from '@material-ui/core';\r\nimport { VentasProvider } from '../../context/Ventas/ventasContext';\r\nimport VentaIndex from '../../pages/ventas/venta_index';\r\n\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\tcontent: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n    toolbar: {\r\n\t\theight: theme.spacing(9)\r\n\t}\r\n}));\r\n\r\nexport default function LayoutVentas(props) {\r\n\tconst classes = useStyles();\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<Box height='100vh'>\r\n\t\t\t<VentasProvider>\r\n\t\t\t\t<Grid lg={12} style={{height: '10vh'}}>\r\n\t\t\t\t\t<NavegacionVentas />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid container style={{height: '90vh'}}>\r\n\t\t\t\t\t<Grid lg={9}>\r\n\t\t\t\t\t\t<VentaIndex />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid lg={3}>\r\n\t\t\t\t\t\t<NavegacionVentasLateral />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</VentasProvider>\r\n\t\t</Box>\r\n\t);\r\n}","export default __webpack_public_path__ + \"static/media/logochafa.744b44f9.PNG\";","export default __webpack_public_path__ + \"static/media/admin.cecfcd64.svg\";","export default __webpack_public_path__ + \"static/media/cart-add.eacbdb19.svg\";","import { Box, Button, Container, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../img/logochafa.PNG';\r\nimport adminIcon from '../../icons/ventas/admin.svg';\r\nimport cartIcon from '../../icons/ventas/cart-add.svg';\r\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\twidth: 150,\r\n        fontSize: 150\r\n\t},\r\n\r\n}));\r\n\r\nexport default function LayoutHome(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tif (!sesion) props.history.push('/');\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Box height=\"90vh\">\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<img alt=\"logo ab\" src={logo} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" my={6}>\r\n\t\t\t\t\t<Button component={Link} to=\"/admin/inicio\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={adminIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button component={Link} to=\"/ventas/venta-general\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={cartIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tVentas\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n                    <Button color=\"secondary\" onClick={signOut}>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<PowerSettingsNewRoundedIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","//layouts\r\nimport LayoutLogin from '../components/Layouts/LayoutLogin';\r\nimport LayoutAdmin from '../components/Layouts/LayoutAdmin';\r\nimport LayoutVentas from '../components/Layouts/LayoutVentas';\r\nimport LayoutHome from '../components/Layouts/LayoutHome';\r\n\r\n//sucursales pages\r\nimport AdminInicio from '../pages/sucursales/AdminInicio'\r\n\r\n//ventas pages\r\nimport Venta_index from '../pages/ventas/venta_index'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: LayoutLogin,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/home',\r\n\t\tcomponent: LayoutHome,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/admin',\r\n\t\tcomponent: LayoutAdmin,\r\n\t\texact: false,\r\n\t\troutes: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/admin/inicio',\r\n\t\t\t\tcomponent: AdminInicio,\r\n\t\t\t\texact: true,\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: '/ventas/venta-general',\r\n\t\tcomponent: LayoutVentas,\r\n\t\texact: false\r\n\t}\r\n\t\r\n];\r\n\r\nexport default routes;\r\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport { RegProductoProvider } from '../../context/Catalogos/CtxRegProducto';\r\nimport AdminInicio from '../../pages/sucursales/AdminInicio';\r\nimport NavegacionAdmin from '../Navegaciones/NavegacionAdmin';\r\n\r\n\r\nexport default function LayoutAdmin(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<RegProductoProvider>\r\n\t\t\t\t<NavegacionAdmin />\r\n\t\t\t\t<AdminInicio />\r\n\t\t\t</RegProductoProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { blue, grey } from '@material-ui/core/colors';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tnavbar: grey[50],\r\n\t\tprimary: {\r\n\t\t\tmain: blue[500]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#f50057'\r\n\t\t},\r\n\t}\r\n});\r\n\r\nexport default theme;\r\n","import { ApolloClient, /* createHttpLink, */ InMemoryCache } from '@apollo/client';\r\nimport { createUploadLink } from 'apollo-upload-client';\r\n\r\nconst httpLink = createUploadLink({\r\n\turi: 'https://cafi-punto-venta.herokuapp.com/'\r\n});\r\n\r\nconst client = new ApolloClient({\r\n\tconnectToDevTools: true,\r\n\tcache: new InMemoryCache({\r\n\t\taddTypename: false\r\n\t}),\r\n\tlink: httpLink\r\n});\r\n\r\nexport default client;\r\n","import React from 'react';\r\nimport { Box, CssBaseline, ThemeProvider } from '@material-ui/core';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport routes from './config/routes';\r\nimport theme from './config/colors';\r\n\r\nimport client from './config/apollo';\r\nimport { ApolloProvider } from '@apollo/client';\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<Box height='100vh' >\r\n\t\t\t<ApolloProvider client={client}>\r\n\t\t\t\t<div className=\"App\" >\r\n\t\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t\t<Switch>{routes.map((route, index) => <RoutesWithSubRoutes key={index} {...route} />)}</Switch>\r\n\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t</ThemeProvider>\r\n\t\t\t\t</div>\r\n\t\t\t</ApolloProvider>\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nfunction RoutesWithSubRoutes(route) {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\tpath={route.path}\r\n\t\t\texact={route.exact}\r\n\t\t\trender={(props) => <route.component routes={route.routes} {...props} />}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./index.scss\"\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}