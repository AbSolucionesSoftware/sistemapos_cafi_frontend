{"version":3,"sources":["gql/Catalogos/usuarios.js","components/SnackBarMessages.js","components/Layouts/LayoutLogin.js","context/Catalogos/initialStatesProducto.js","context/Catalogos/CtxRegProducto.js","context/Catalogos/empresaContext.js","components/Layouts/BackDrop.js","components/ErrorPage.js","gql/Empresa/empresa.js","pages/sucursales/Empresa/Datos/MisDatos.js","pages/sucursales/Facturacion/catalogos.js","gql/Facturacion/Facturacion.js","pages/sucursales/Facturacion/CFDISellos/RegistrarSellos.js","pages/sucursales/Facturacion/CFDISellos/EliminarCSD.js","pages/sucursales/Empresa/InformacionFiscal/InformacionFiscal.js","pages/sucursales/Empresa/DatosEmpresa.js","gql/Empresa/sucursales.js","pages/sucursales/Empresa/Sucursal/DatosSucursal.js","pages/sucursales/Empresa/Empresa.js","config/reuserFunctions.js","pages/sucursales/Catalogos/Producto/PreciosVenta/UnidadesVenta.js","pages/sucursales/Catalogos/Producto/PreciosVenta/Precios.js","pages/sucursales/Catalogos/Producto/unidades.js","pages/sucursales/Catalogos/Producto/calculos_precios.js","pages/sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional.js","context/Compras/comprasContext.js","pages/sucursales/Catalogos/Producto/TallasColores/TablaPresentaciones.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosProductos.js","gql/Catalogos/productos.js","gql/Catalogos/colores.js","pages/sucursales/Catalogos/Producto/TallasColores/crearColor.js","gql/Catalogos/tallas.js","pages/sucursales/Catalogos/Producto/TallasColores/crearTalla.js","pages/sucursales/Catalogos/Producto/TallasColores/TallasColores.js","pages/sucursales/Compras/AbrirCompra/productos/TallasProducto.js","billing/Facturama/facturama.api.js","gql/CatalogosSat/catalogoProductosSat.js","pages/sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT.js","gql/Catalogos/categorias.js","gql/Catalogos/departamentos.js","gql/Catalogos/marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/RegistrarNuevoSelect.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Categorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Subcategorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Departamentos.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/registrarInfoGeneral.js","pages/sucursales/Catalogos/Producto/Imagenes/cargarImagenesProducto.js","context/Almacenes/crearAlmacen.js","gql/Almacenes/Almacen.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso.js","context/Catalogos/usuarioContext.js","pages/sucursales/Catalogos/Usuarios/FormularioUsuario.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Parametros.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Catalogos.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/MiEmpresa.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Compras.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Almacenes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Tesoreria.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Reportes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Ventas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Facturacion.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/AsignarPermisos.js","pages/sucursales/Catalogos/Usuarios/CrearUsuario.js","pages/sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen.js","pages/sucursales/Catalogos/Producto/Inventario&Almacen/AlmacenInicial.js","pages/sucursales/Catalogos/Producto/validaciones.js","gql/Catalogos/centroCostos.js","pages/sucursales/Catalogos/Producto/CentroCostos/CentroCostos.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/PrecioPlazos.js","pages/sucursales/Catalogos/Producto/validateDatos.js","pages/sucursales/Catalogos/Producto/crearProducto.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosVenta.js","pages/sucursales/Compras/AbrirCompra/productos/Descuentos.js","context/Catalogos/crearClienteCtx.js","pages/sucursales/Catalogos/Cliente/RegistrarInfoBasica.js","pages/sucursales/Catalogos/Cliente/RegistroInfoCredito.js","gql/Catalogos/clientes.js","pages/sucursales/Catalogos/Cliente/CrearCliente.js","gql/Compras/compras.js","pages/sucursales/Compras/AbrirCompra/initial_states.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProveedorAlmacen.js","pages/sucursales/Compras/AbrirCompra/productos/mostrar_precios.js","pages/sucursales/Compras/AbrirCompra/productos/calculos_compra.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProducto.js","pages/sucursales/Compras/AbrirCompra/productos/setOrResetData.js","pages/sucursales/Compras/AbrirCompra/TablaCompras.js","pages/sucursales/Compras/AbrirCompra/ConfirmarCompra.js","pages/sucursales/Compras/AbrirCompra/AbrirCompra.js","pages/sucursales/Compras/ComprasRealizadas/ExportarProductosCompra.js","pages/sucursales/Compras/ComprasRealizadas/DatosDeCompra.js","pages/sucursales/Compras/ComprasRealizadas/CancelarCompra.js","pages/sucursales/Compras/ComprasRealizadas/ListaCompras.js","pages/sucursales/Compras/ComprasRealizadas/ExportarComprasExcel.js","pages/sucursales/Compras/ComprasRealizadas/ComprasRealizadas.js","pages/sucursales/Compras/ComprasEnEspera/VerificarProductos.js","pages/sucursales/Compras/ComprasEnEspera/DatosDeCompraEspera.js","pages/sucursales/Compras/ComprasEnEspera/ListaEnEspera.js","pages/sucursales/Compras/ComprasEnEspera/ComprasEnEspera.js","pages/sucursales/Compras/Compras.js","pages/sucursales/Catalogos/Cliente/ListaClientes.js","pages/sucursales/Catalogos/Cliente/ClientesInactivos.js","pages/sucursales/Catalogos/Cliente/Cliente.js","gql/Catalogos/descuentos.js","pages/sucursales/Catalogos/Producto/Descuentos/ListaPrecios.js","pages/sucursales/Catalogos/Producto/Descuentos/Descuento.js","pages/sucursales/Catalogos/Producto/EliminarProducto.js","pages/sucursales/Catalogos/Producto/ListaProductos.js","pages/sucursales/Catalogos/Producto/ProductosEliminados.js","pages/sucursales/Catalogos/Producto/Productos.js","pages/sucursales/Catalogos/Producto/index.js","pages/sucursales/Catalogos/Tallas/ListaTallas.js","pages/sucursales/Catalogos/Tallas/RegistroTallas.js","components/DescripcionCatalogo.js","pages/sucursales/Catalogos/Tallas/Tallas.js","pages/sucursales/Catalogos/Proveedores/ListaProveedores.js","pages/sucursales/Catalogos/Proveedores/Proovedores.js","gql/Cajas/cajas.js","pages/sucursales/Catalogos/Cajas/ListaCajas.js","pages/sucursales/Catalogos/Cajas/RegistrarCajas.js","pages/sucursales/Catalogos/Cajas/Cajas.js","pages/sucursales/Catalogos/Usuarios/ListaUsuario.js","pages/sucursales/Catalogos/Usuarios/UsuariosInactivos.js","pages/sucursales/Catalogos/Usuarios/Usuarios.js","context/Catalogos/Departamentos.js","pages/sucursales/Catalogos/Departamentos/ListaDepartamentos.js","pages/sucursales/Catalogos/Departamentos/RegistroDepartamento.js","pages/sucursales/Catalogos/Departamentos/Departamentos.js","pages/sucursales/Catalogos/Categorias/RegistroCategorias.js","pages/sucursales/Catalogos/Categorias/Categorias.js","pages/sucursales/Catalogos/Colores/ListaColores.js","pages/sucursales/Catalogos/Colores/RegistroColores.js","pages/sucursales/Catalogos/Colores/Colores.js","pages/sucursales/Catalogos/Marcas/ListaMarcas.js","context/Catalogos/Marcas.js","pages/sucursales/Catalogos/Marcas/VistaMarcas.js","pages/sucursales/Catalogos/Marcas/Marcas.js","pages/sucursales/Catalogos/CentroCostos/RegistroCentroCostos.js","pages/sucursales/Catalogos/CentroCostos/CentroCostos.js","gql/Catalogos/conceptosAlmacen.js","pages/sucursales/Catalogos/ConceptosAlmacen/ListaConceptos.js","pages/sucursales/Catalogos/ConceptosAlmacen/RegistroConcepto.js","pages/sucursales/Catalogos/ConceptosAlmacen/ConceptosAlmacen.js","pages/sucursales/Catalogos/Catalogos.js","context/Tesoreria/tesoreriaCtx.js","pages/sucursales/Tesoreria/CajaPrincipal/RetiroDeposito.js","pages/sucursales/Tesoreria/CajaPrincipal/HistorialCuentas.js","pages/sucursales/Tesoreria/CajaPrincipal/CajaPrincipal.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaCompras.js","gql/Tesoreria/abonos.js","components/ExportExcel.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/AbonosProovedores.js","context/Tesoreria/abonosCtx.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonarSeleccion/DetalleVentaCredito.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonarSeleccion/HistorialAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/Liquidar.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/Abonar.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/TablaVentasCredito.js","gql/Ventas/ventas_generales.js","pages/sucursales/Tesoreria/Abonos/Clientes/AbonosClientes.js","pages/sucursales/Tesoreria/Tesoreria.js","pages/sucursales/Tesoreria/IndexTesoreria.js","context/Facturacion/facturacionCtx.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ProductosSinClave.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ListaVentasFactura.js","pages/sucursales/Facturacion/NuevaFactura/Catalogos/CodigoPostal.js","pages/sucursales/Facturacion/NuevaFactura/ClientesSelect.js","pages/sucursales/Facturacion/NuevaFactura/RegistroFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EditarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EliminarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/TablaDetallesFactura.js","pages/sucursales/Facturacion/NuevaFactura/validacion_factura.js","pages/sucursales/Facturacion/NuevaFactura/initial_factura_states.js","pages/sucursales/Facturacion/NuevaFactura/RealizarFactura.js","pages/sucursales/Facturacion/NuevaFactura/CancelarFactura.js","pages/sucursales/Facturacion/NuevaFactura/NuevaFactura.js","pages/sucursales/Facturacion/CFDISeries/RegistroSeries.js","pages/sucursales/Facturacion/CFDISeries/ListaSeries.js","pages/sucursales/Facturacion/CFDISeries/SeriesCdfi.js","pages/sucursales/Facturacion/FacturasRealizadas/DetallesFacturaModal.js","pages/sucursales/Facturacion/FacturasRealizadas/TablaComplementosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/TablaFacturasFiltradas.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarFacturas.js","pages/sucursales/Facturacion/FacturasRealizadas/FiltrosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/FacturasRealizadas.js","pages/sucursales/Facturacion/Facturacion.js","pages/sucursales/Almacenes/RegistroAlmacen/EliminarAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/ListaAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/RegistroAlmacen.js","icons/almacen.svg","context/Almacenes/traspasosAlmacen.js","components/Traspasos/TablePresentacionesNotOrigen.js","components/Traspasos/TallasColoresTraspasos.js","components/Traspasos/TableSelectMedidas.js","components/Traspasos/TableSelectProducts.js","pages/sucursales/Almacenes/Traspasos/Traspasos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/MedidasAlmacenes.js","pages/sucursales/Almacenes/InventarioPorAlmacen/DialogMedidasAlmacenes.js","pages/sucursales/Almacenes/InventarioPorAlmacen/ListaProductos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/InventariosPorAlmacen.js","pages/sucursales/Almacenes/Almacenes.js","pages/sucursales/Reportes/Cajas/TablaHistorialFiltrado.js","pages/sucursales/Reportes/Cajas/HistorialCaja.js","pages/sucursales/Reportes/Cajas/CardCaja.js","pages/sucursales/Reportes/Cajas/Cajas.js","pages/sucursales/Reportes/TurnosUsuarios/TablaTurnosFiltrados.js","gql/Ventas/abrir_cerrar_turno.js","pages/sucursales/Reportes/TurnosUsuarios/ReportesTurnosUsuarios.js","pages/sucursales/Reportes/Compras/TablaComprasFiltradas.js","gql/Compras/reporte_compras.js","pages/sucursales/Reportes/Compras/ExportarCompras.js","pages/sucursales/Reportes/Compras/FiltrosCompra.js","pages/sucursales/Reportes/Compras/ReportesCompras.js","pages/sucursales/Reportes/Ventas/TablaVentasFiltradas.js","pages/sucursales/Reportes/Ventas/ExportarVentas.js","pages/sucursales/Reportes/Ventas/FiltrosVenta.js","pages/sucursales/Reportes/Ventas/ReportesVentas.js","pages/sucursales/Reportes/Almacenes/ExportarTraspasos.js","pages/sucursales/Reportes/Almacenes/TablaAlmacenFiltradas.js","pages/sucursales/Reportes/Almacenes/ReportesAlmacen.js","pages/sucursales/Reportes/Cortes/TablaCortesFiltradas.js","pages/sucursales/Reportes/Cortes/ExportExcel.js","pages/sucursales/Reportes/Cortes/ReportesCortes.js","gql/Tesoreria/egresos.js","pages/sucursales/Reportes/Tesoreria/ListaEgresos.js","pages/sucursales/Reportes/Tesoreria/ListaTransferencias.js","pages/sucursales/Reportes/Tesoreria/Reporte_Tesoreria.js","pages/sucursales/Reportes/Reportes.js","pages/sucursales/AdminInicio.js","components/Navegaciones/NavegacionAdmin.js","components/Navegaciones/styles.js","pages/ventas/styles.js","context/Ventas/ventasContext.js","pages/ventas/Operaciones/DepositoRetiros/crearNuevaCuenta.js","pages/ventas/Operaciones/DepositoRetiros/CrearSubcuenta.js","pages/ventas/Operaciones/DepositoRetiros/DepositoRetiroCaja.js","pages/ventas/AbrirCerrarTurno/CerrarTurno.js","pages/ventas/AbrirCerrarTurno/Turnos.js","context/Accesos/accesosCtx.js","pages/ventas/Operaciones/PreCorteCaja.js","pages/ventas/Operaciones/VentaEnEspera.js","pages/ventas/ArticuloRapido/RegistroInformacionRapido.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TablaPresentaciones.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TallasColoresRapidos.js","components/AccesosPassword/Acceso.js","pages/ventas/ArticuloRapido/ArticuloRapido.js","pages/ventas/ArticuloRapido/indexArticuloRapido.js","gql/Ventas/cotizaciones.js","pages/ventas/Cotizacion/CotizacionPdf.js","pages/ventas/Cotizacion/DetalleCotizacion.js","pages/ventas/Cotizacion/CotizacionesPendientes.js","pages/ventas/Cotizacion/ListaCotizaciones.js","components/Navegaciones/NavegacionVentas.js","pages/ventas/Abonos/Abonos.js","pages/ventas/BuscarProductos/ListaProductos.js","pages/ventas/BuscarProductos/InformacionProducto.js","pages/ventas/BuscarProductos/BuscarProducto.js","pages/ventas/ClientesVentas/ClientesVentas.js","pages/ventas/Cotizacion/NuevaCotizacion.js","pages/ventas/Cotizacion/Cotizacion.js","pages/ventas/Operaciones/CancelarVenta.js","pages/ventas/CerrarVenta/Montos.js","pages/ventas/CerrarVenta/InfoVentaTotales.js","pages/ventas/CerrarVenta/Credito.js","pages/ventas/CerrarVenta/Descuento.js","pages/ventas/CerrarVenta/CerrarVenta.js","pages/ventas/CerrarVenta/calcularMonedero.js","pages/ventas/Operaciones/ConsultarPrecio/ProductoNormal.js","pages/ventas/Operaciones/ConsultarPrecio/ProductoMedidas.js","pages/ventas/Operaciones/ConsultarPrecio/ContentProductos.js","pages/ventas/Operaciones/ConsultarPrecio/ConsultarPrecio.js","pages/ventas/Operaciones/PreciosProducto.js","pages/ventas/VentasEspera/ListaVentas.js","pages/ventas/VentasEspera/VentasEspera.js","pages/ventas/VentasRealizadas/CancelarFolio.js","pages/ventas/VentasRealizadas/InfoVenta.js","pages/ventas/VentasRealizadas/ListaVentasRealizadas.js","pages/ventas/VentasRealizadas/VentasRealizadas.js","components/Navegaciones/NavegacionVentasLateral.js","pages/ventas/EliminarProductoVenta.js","pages/ventas/Tabla_ventas_checkbox.js","pages/ventas/InputsVentasGen.js/TipoVenta.js","pages/ventas/ClientesVentas.js","pages/ventas/InputsVentasGen.js/AgregarCliente.js","pages/ventas/InputsVentasGen.js/ProductoConMedidas.js","pages/ventas/InputsVentasGen.js/AgregarProducto.js","pages/ventas/InputsVentasGen.js/ContenedorInputs.js","pages/ventas/VentasGenerales.js","pages/ventas/AbrirCerrarTurno/AbrirTurno.js","pages/ventas/venta_index.js","components/Layouts/LayoutVentas.js","img/logochafa.PNG","icons/ventas/admin.svg","icons/ventas/cart-add.svg","components/Layouts/LayoutHome.js","config/routes.js","img/abLogo.jpeg","components/Layouts/LayoutAdmin.js","config/colors.js","config/apollo.js","App.js","reportWebVitals.js","index.js"],"names":["CREAR_USUARIO","gql","OBTENER_USUARIOS","ACTUALIZAR_USUARIO","LOGEAR_USUARIO","LOGEAR_USUARIO_ACCESOS","useStyles","makeStyles","theme","snack","zIndex","SnackBarMessages","alert","setAlert","classes","Portal","Snackbar","className","anchorOrigin","vertical","horizontal","open","onClose","status","message","autoHideDuration","Box","display","style","color","mr","Typography","margin","marginTop","spacing","marginBottom","containerImagen","maxWidth","maxHeight","imagen","width","height","input","initial_state_datos_generales","receta_farmacia","clave_producto_sat","Name","Value","initial_state_precios","monedero","monedero_electronico","iva_activo","ieps_activo","ieps","iva","granel","inventario","inventario_minimo","inventario_maximo","unidad_de_inventario","codigo_unidad","precio_de_compra","precio_con_impuesto","precio_sin_impuesto","unidad_de_compra","unidad","cantidad","precio_unitario_sin_impuesto","precio_unitario_con_impuesto","initial_state_unidadVentaXDefecto","codigo_barras","precio","descuento_activo","precio_unidad","numero_precio","precio_neto","precio_venta","unidad_mayoreo","iva_precio","ieps_precio","utilidad","precio_general","cantidad_unidad","unidad_maxima","unidad_principal","default","initial_state_unidadVentaSecundaria","initial_state_preciosP","initial_state_unidadesVenta","initial_state_almacen_inicial","id_almacen","almacen","fecha_de_expiracion","initial_state_centro_de_costos","initial_state_preciosPlazos","precio_piezas","precio_cajas","precio_costales","initial_state_subcategorias","initial_state_imagenes","initial_state_imagenes_eliminadas","initial_state_onPreview","index","image","initial_state_validacion","error","initial_state_subcostos","initial_state_presentaciones","RegProductoContext","createContext","RegProductoProvider","children","useState","datos_generales","setDatosGenerales","precios","setPrecios","unidadVentaXDefecto","setUnidadVentaXDefecto","unidadVentaSecundaria","setUnidadVentaSecundaria","preciosP","setPreciosP","unidadesVenta","setUnidadesVenta","almacen_inicial","setAlmacenInicial","centro_de_costos","setCentroDeCostos","preciosPlazos","setPreciosPlazos","subcategorias","setSubcategorias","imagenes","setImagenes","imagenes_eliminadas","setImagenesEliminadas","onPreview","setOnPreview","validacion","setValidacion","subcostos","setSubcostos","selectedDate","setSelectedDate","update","setUpdate","presentaciones","setPresentaciones","presentaciones_eliminadas","setPresentacionesEliminadas","React","actualizarLista","setActualizarLista","datosPreciosProducto","setDatosPreciosProducto","preciosDescuentos","setPreciosDescuentos","preciosProductos","setPreciosProductos","datosEnDescuentos","setDatosEnDescuentos","almacen_existente","setAlmacenExistente","Provider","value","EmpresaContext","EmpresaProvider","nombre_empresa","nombre_dueno","telefono_dueno","celular","correo_empresa","nombre_fiscal","rfc","regimen_fiscal","curp","info_adicio","direccion","calle","no_ext","no_int","codigo_postal","colonia","municipio","localidad","estado","pais","direccionFiscal","datosBancarios","cuenta","sucursal","clave_banco","empresa","setEmpresa","toUpdate","setToUpdate","setError","backdrop","drawer","backgroundColor","BackdropComponent","loading","setLoading","Backdrop","CircularProgress","ErrorPage","altura","flexDirection","justifyContent","alignItems","fontSize","align","OBTENER_DATOS_EMPRESA","ACTUALIZAR_EMPRESA","appBar","position","title","marginLeft","flex","icon","subtitle","require","avatarContainer","border","borderRadius","avatar","MisDatos","props","sesion","JSON","parse","localStorage","getItem","loadingPage","setLoadingPage","accesos","mi_empresa","datos_empresa","editar","bloqueo","preview","setPreview","errorPage","setErrorPage","errorForm","setErrorForm","useContext","useMutation","actualizarEmpresa","useQuery","variables","id","_id","data","refetch","valor_puntos","vender_sin_inventario","empresaDatos","setEmpresaDatos","useEffect","errorCatch","undefined","obtenerEmpresa","actEmp","a","nueva_sesion","setItem","stringify","console","log","networkError","result","graphQLErrors","obtenerCampos","e","valor","target","name","parseFloat","obtenerCamposDireccion","onDrop","useCallback","acceptedFiles","reader","FileReader","readAsDataURL","onload","useDropzone","accept","noKeyboard","getRootProps","getInputProps","Container","Grid","container","item","md","xs","Avatar","src","Button","size","onClick","startIcon","my","TextField","fullWidth","disabled","type","variant","helperText","onChange","inputMode","FormControlLabel","control","Checkbox","checked","label","mt","mb","Divider","DialogActions","setOpen","usosCfdi","tiposCfdi","NameId","tipoCambio","formaPago","metodoPago","regimenFiscal","Natural","Moral","CREAR_FACTURA","CREAR_SERIE","ACTUALIZAR_DEFAULT_SERIE","ELIMINAR_SERIE","OBTENER_SERIES","CREAR_SELLO_CFDI","ELIMINAR_SELLO_CFDI","OBTENER_FACTURAS_REALIZADAS","OBTENER_DOCUMENTO_FACTURA","RegistroSellos","datosEmpresa","firma_disabled","certificate","private_key","private_key_password","datos","setDatos","show","setShow","handleClose","crearCSDS","obtenerFiles","files","getBase64","file","Promise","resolve","baseURL","guardarBD","cer","key","then","base","split","nombre_cer","catch","err","nombre_key","Add","Dialog","DialogTitle","DialogContent","InputProps","endAdornment","InputAdornment","htmlFor","CloudUpload","component","disableElevation","readOnly","multiple","IconButton","onMouseDown","event","preventDefault","edge","Done","EliminarSellos","eliminarCSD","eliminarSelloCSD","DialogContentText","InformacionFiscal","informacion_fiscal","setFirmaDisabled","empresaFiscal","setEmpresaFiscal","new_sesion","fecha_registro_sello_sat","moment","format","sello_sat","limite_timbres","timbres_usados","response","obtenerCamposBancarios","FormControl","Select","MenuItem","map","res","multiline","m","Alert","severity","action","AlertTitle","sm","Transition","forwardRef","ref","Slide","direction","MiEmpresa","setValue","RenderViews","fullScreen","TransitionComponent","AppBar","Toolbar","Tabs","indicatorColor","centered","Tab","OBTENER_DATOS_SUCURSAL","ACTUALIZAR_SUCURSAL","CREAR_MOVIMIENTO_CUENTA","OBTENER_HISTORIAL_CUENTAS","DatosSucursal","actualizarSucursal","nombre_sucursal","descripcion","telefono","sucursalDatos","setSucursalDatos","obtenerDatosSucursal","usuario_sucursal","cuenta_sucursal","flexdirection","autoFocus","Empresa","lg","ver","numerosRandom","min","max","Math","floor","random","generateCodeNumerico","length","characters","charactersLength","i","charAt","formatoFecha","fecha","Date","toLocaleDateString","weekday","year","month","day","formatoFechaCorta","formatoMexico","number","toFixed","toString","replace","cleanTypenames","Array","isArray","newObject","property","findProductArray","producto","venta","productosVentas","productos","found","producto_found","id_producto","clave_alterna","calculatePrices2","newP","origen","precio_boolean","cantidadNueva","valor_granel","precio_actual","descuento","cantidadCaja","cantidad_unidads","ivaCalculo","iepsCalculo","impuestoCalculo","subtotalCalculo","totalCalculo","monederoCalculo","descuentoCalculo","ob","cantidad_venta","granel_producto","precio_a_vender","precio_actual_producto","precio_actual_object","porciento","dinero_descontado","precio_anterior","verifiPrising","amount","pricings","precios_producto","filter","p","finalPrising","pricing","number_pricing","object_prising","datoFinal","precio_seleccionado","PreciosDeCompra","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","LocalOffer","inputProps","tipo_producto","UnidadesVentaSecundaria","setPrecio","price","calcularUnidadDesucuento","precio_unit","precio_venta_unit","suma_impuestos","PVSI","porcentaje","PVCDSI","dineroDescontado","PCSI","calcularUnidadDesucuentoCheck","boolean","calcularUnidad","PVCI","unidad_secundaria","OutlinedInput","GenCodigoBarras","Cached","onBlur","startAdornment","Tooltip","placement","arrow","aplicarDescuento","precioTitle","marginInput","titulos","fontWeight","PreciosDeVenta","newPreciosP","RenderPreciosP","preciosVenta","calculos","cantidad_sec","descuento_sec","descuento_activo_sec","PUCSI","utilidad_base","unidadXDefecto","unidadSecundaria","new_precio_venta_desc","precio_con_descuento","new_precio_venta_desc_sec","precio_con_descuento_sec","splice","verificarCampoVacio","minWidth","valor_base","PUCCI","obtenerUtilidad","pl","suma","obtenerPrecioNeto","parseInt","obtenerMayoreo","unitCodes","unitCodes_granel","calcular_iva","calcular_ieps","required","RegistroInfoAdidional","obtenerIva","setPrecioConImpuesto","setPrecioSinImpuesto","setPrecioConImpuestoVariable","setPrecioSinImpuestoVariable","obtenerIeps","precioConImpuesto","precioSinImpuesto","precioConImpuestoVariable","precioSinImpuestoVariable","useDebounce","PCI","PSI","obtenerUnidadCompra","child","unidad_activa","total_impuesto","isNaN","obtenerPrecioConImpuesto","obtenerPrecioSinImpuesto","noWrap","onFocus","FormHelperText","ComprasContext","ComprasProvider","costo","cantidad_regalo","unidad_regalo","cantidad_total","descuento_porcentaje","descuento_precio","iva_total","ieps_total","subtotal","impuestos","total","mantener_precio","impuestos_descuento","subtotal_descuento","total_descuento","datosProducto","setDatosProducto","proveedor","en_espera","fecha_registro","locale","compra_credito","fecha_vencimiento_credito","credito_pagado","saldo_credito_pendiente","forma_pago","descuento_aplicado","cantidad_descontada","datosCompra","setDatosCompra","setPreciosVenta","productoOriginal","setProductoOriginal","productosCompra","setProductosCompra","isEditing","setIsEditing","editFinish","setEditFinish","setCosto","setCantidad","issue","setIssue","loadingProductos","setLoadingProductos","compareFunction","b","medida","talla","localeCompare","root","paper","table","tableRow","alpha","palette","primary","main","visuallyHidden","clip","overflow","padding","top","colorContainer","TablaPresentaciones","from","setOnUpdate","onUpdate","withoutPrice","onlyPrice","mostrar_presentaciones","sort","Paper","stickyHeader","RenderPresentacionesRows","disabledInput","setDisabledInput","textfield","useRef","copy_presentaciones","copy_element_presentacion","copy_element_presentacion_descuento","copy_producto","obtenerDatos","existencia","cantidad_nueva","actionButton","hover","selected","Input","inputRef","nuevo","nombre_comercial","Chip","nombre","Zoom","hex","LocalOfferOutlined","checkedIcon","Edit","TabPanel","other","role","hidden","a11yProps","AlertDialogSlide","agregarCompra","cargando","toggleDrawer","resetProducto","new_precios","unidades_de_venta","unidades_secundaria","unidadxdefecto","actualizarContextProducto","keepMounted","newValue","scrollButtons","textColor","LocalAtm","SquareFoot","OBTENER_CONSULTAS","CREAR_PRODUCTO","OBTENER_PRODUCTOS","ACTUALIZAR_PRODUCTO","ELIMINAR_PRODUCTO","PRODUCTOS_ELIMINADOS","ACTIVAR_PRODUCTOS","CREAR_PRODUCTO_RAPIDO","CREAR_COLOR","OBTENER_COLORES","ACTUALIZAR_COLOR","ELIMINAR_COLOR","CrearColorProducto","setColor","values","setValues","toggleModal","crearColor","GuardarDatosBD","colores","scroll","disableEscapeKeyDown","reason","onChangeComplete","toUpperCase","bgcolor","onSubmit","focused","form","CREAR_TALLAS","OBTENER_TALLAS","ACTUALIZAR_TALLA","ELIMINAR_TALLA","CrearTallasProducto","setMedidasSeleccionadas","crearTalla","nueva_talla","tipo","cursor","ColoresTallas","obtenerConsultasProducto","tallas","calzados","medidasSeleccionadas","coloresSeleccionados","setColoresSeleccionados","medidas","obtenerColoresSeleccinados","colors","forEach","element","push","hashColor","hashMedida","colores_existentes","existColor","medidas_existentes","existMedida","pointerEvents","opacity","mx","RenderTallas","useTheme","setSelected","seleccionarMedidas","medidas_seleccionadas_temp","presentacion","presentacion_temp","array_medidad_finales","producto_medida","k","producto_color","presentacion_existente","producto_array_final","x","objeto_presentaciones_final","handleAddTallas","getContrastText","Colores","seleccionarColores","obtenerColores","verificate","setVerificate","disableHoverListener","valuesFacturama","$","ajaxSetup","beforeSend","xhr","withCredentials","setRequestHeader","facturama","settings","url","retrieve","path","callback","jQuery","get","list","postSyncWithData","callbackError","ajax","dataType","contentType","success","putSyncWithData","deleteSyncWithParam","param","async","facturamaObject","Clients","Get","List","Create","Remove","Update","Products","BranchOffice","Series","idBranch","Cfdi","listWithParam","Send","postSyncWithParam","Cancel","params","Download","Acuse","TaxEntity","UploadCsd","UploadImage","Catalogs","States","country","Municipalities","state","Localities","Neighborhoods","postalCode","ProductsOrServices","keyword","PostalCodes","Units","Currencies","Countries","PaymentForms","PaymentMethods","FederalTaxes","FiscalRegimens","CfdiTypes","RelationTypes","CfdiUses","CREAR_CODIGO_PRODUCTO","ELIMINAR_CODIGO_PRODUCTO","background","spin_container","spin","CatalogosProductosSAT","codigos","busqueda","setBusqueda","setProductos","loading_save","setLoadingSave","loading_delete","setLoadingDelete","selectedIndex","setSelectedIndex","crearCodigoProducto","eliminarCodigoProducto","limpiarDataModal","handleOk","eliminarCodigoBD","handleCancel","buscarCatalogo","Facturama","responseJSON","Message","Autocomplete","options","getOptionLabel","option","renderInput","renderOption","flexGrow","_","getOptionSelected","Search","dense","SelectedListItem","contiene","includes","ListItem","button","click","detail","ListItemText","CREAR_CATEGORIA","CREAR_SUBCATEGORIA","ACTUALIZAR_CATEGORIA","ACTUALIZAR_SUBCATEGORIA","OBTENER_CATEGORIAS","ELIMINAR_CATEGORIA","ELIMINAR_SUBCATEGORIA","OBTENER_DEPARTAMENTOS","REGISTRAR_DEPARTAMENTO","ACTUALIZAR_DEPARTAMENTO","ELIMINAR_DEPARTAMENTO","OBTENER_MARCAS","REGISTRAR_MARCAS","ACTUALIZAR_MARCAS","ELIMINAR_MARCAS","RegistrarNuevoSelect","crearCategoria","crearSubcategoria","CrearDepartamentos","CrearMarca","handleToggle","guardarDatos","idCategoria","id_categoria","categoria_creada","categoria","subcategoria_creada","id_subcategoria","subcategoria","departamento_creado","id_departamento","crearDepartamentos","departamento","marca_creada","id_marca","crearMarcas","marca","textTransform","endIcon","CategoriasProducto","categorias","SubcategoriasProducto","DepartamentosProducto","departamentos","nombre_departamentos","MarcasProducto","marcas","nombre_marca","formInput","obligatorio","without_arrows","RegistroInfoGenerales","centro_costos","obtenerChecks","costos","id_cuenta","subcuentas","Autorenew","nombre_generico","formInputFlex","CargarImagenesProducto","render_imagenes","URL","createObjectURL","AddPhotoAlternate","minHeight","orientation","alt","RenderImagenes","key_imagen","url_imagen","handleModal","eliminarImagen","array","ModalDelete","Delete","CrearAlmacenContext","AlmacenProvider","nombre_almacen","id_usuario_encargado","datosAlmacen","setDatosAlmacen","openRegistro","setOpenRegistro","REGISTRO_ALMACEN","OBTENER_ALMACENES","ACTUALIZAR_ALMACEN","ELIMINAR_ALMACEN","OBTENER_PRODUCTOS_ALMACEN","REALIZAR_TRASPASO","OBTENER_PRODUCTOS_EMPRESA","OBTENER_TRASPASOS","arregloVacio","agregar","eliminar","compras","abrir_compra","compras_realizadas","compras_espera","tesoreria","cuentas_empresa","egresos","abonos_proveedores","abonos_clientes","caja_principal","reportes","reporte_historial_cajas","reporte_turnos","reporte_compras","reporte_ventas","rerporte_almacen","reporte_corte_caja","reporte_tesoreria","ventas","cancelar_venta","precios_productos","pre_corte","cotizaciones","administrador","eliminar_ventas","producto_rapido","almacenes","traspasos","inventario_almacen","catalogos","clientes","usuarios","contabilidad","provedores","cajas","conceptos_almacen","tallas_numeros","facturacion","generar_cdfi","cdfi_realizados","registro_series_cdfi","UsuarioContext","UsuarioProvider","estado_usuario","usuario","setUsuario","FormularioUsuario","accion","showPassword","setShowPassword","password","repeatPassword","email","ActualizarPasswordModal","actualizarUsuario","confirmarPassowrd","autoComplete","Parametros","arregloAccesos","obtenerAccesos","subDepartamento","Catalogos","elevation","ml","Compras","Almacenes","Tesoreria","Reportes","Ventas","Facturacion","iconSvg","AsignarPermisos","rootPrincipal","CrearUsuario","fromEmergent","limpiarCampos","turno_en_caja_activo","onCloseModal","crearUsuario","saveData","numero_usuario","subDepartamentos","ContainerRegistroAlmacen","CrearAlmacen","ActualizarAlmacen","obtenerUsuarios","eliminado","user","almacen_creado","crearAlmacen","id_sucursal","labelId","renderValue","RegistroAlmacenInicial","obtenerInventario","validaciones","generales","vista3","vista1","vista2","CREAR_CUENTA","CREAR_SUBCUENTA","ACTUALIZAR_CUENTA","ACTUALIZAR_SUBCUENTA","OBTENER_CUENTAS","ELIMINAR_CUENTA","ELIMINAR_SUBCUENTA","validateJsonEdit","object_date","end_array","object","root_app","dialogContent","tabs","borderRight","divider","CrearProducto","productosRefetch","fromCompra","getProductos","crearProducto","actualizarProducto","setInitialStates","resetInitialStates","validate","vista7","copy_unidadesVenta","imagenes_without_aws","precio_plazos","medidas_producto","inventario_general","window","onkeydown","keyCode","document","getElementById","saveButton","ButtonActions","NavigateNext","Badge","badgeContent","invisible","NavigateBefore","ContenidoModal","fetchPolicy","PreciosDeVentaCompras","numero","RenderPrecios","setPrecioNeto","copy_preciosVenta","preciosVenta_base","calculosCompra","DescuentosInputs","iva_precio_actual","ieps_precio_actual","impuesto_actual","PCSI_actual","cantida_suma","PCSI_ACTUAL_TOTAL","round","subtotal_con_descuento","obtenerPrecio","obtenerPorcentaje","ClienteCtx","ClienteProvider","estado_cliente","cliente","setCliente","setClientes","updateClientVenta","setUpdateClientVenta","RegistrarInfoBasica","numero_cliente","nombre_cliente","representante","clave_cliente","fecha_nacimiento","RegistrarInfoCredito","cliente_base","credito_disponible","credito_usado","limite_credito","disponible","razon_social","placeholder","dias_credito","DateRange","banco","numero_cuenta","CREAR_CLIENTE","OBTENER_CLIENTES","ACTUALIZAR_CLIENTE","ELIMINAR_CLIENTE","CrearCliente","fromCompras","handleClickOpen","crearCliente","actualizarCliente","copy_cliente","tipo_cliente","clienteBase","venta_actual","subTotal","venta_cliente","tipo_emision","CREAR_COMPRA","CREAR_COMPRA_ESPERA","CANCELAR_COMPRA","OBTENER_COMPRAS_REALIZADAS","OBTENER_COMPRAS_ESPERA","OBTENER_CONSULTA_GENERAL_PRODUCTO","ELIMINAR_COMPRA_ESPERA","initial_state_datosProducto","initial_state_datosCompra","initial_state_precios_venta","initial_state_productoOriginal","initial_state_productosCompra","DatosProveedorAlmacen","obtenerProveedorAlmacen","id_proveedor","default_almacen","errorRender","loadingRender","obtenerConsultaGeneralCompras","proveedores","MostrarPrecios","calculos_precios","anterior","DatosProducto","count","setCargando","client","useApolloClient","setData","query","COSTO","CANTIDAD","resultado","obtenerCosto","obtenerCantidad","obtenerProductos","obtenerSelectsProducto","obtenerUnidadRegalo","actualizar_Precios","copy_datosCompra","copy_datosProducto","copy_datosGenerales","copy_precios","copy_preciosP","copy_almacenInicial","copy_centroCostos","copy_presentacionesEliminadas","copy_precioPlazos","factor","cantidad_total_media","cantidad_regalo_media","productosCompra_ordenados","existente","prod_exist","Boolean","array_ordenado","ModalAgregarCompra","InfoOutlined","SetOrResetData","setStates","ListaCompras","productos_ordernados","RenderProductosCompra","isSelected","setIsSelected","productoCTX","seStates","unidad_producto","tabIndex","finish","ModalDeleteProducto","copy_compras","objeto_eliminado","ConfirmarCompra","realizarCompraBD","loading_modal","setLoadingModal","credito","setCredito","productos_recalculados","setProductosRecalculados","initial_state_descuento","descuento_base","setDescuentoBase","descuento_debounce","setDescuentoDebounce","porcentaje_debounce","setPorcentajeDebounce","DESCUENTO","PORCENTAJE","datos_descuento","productos_array","subtotal_actual","cantidad_descontada_product","recalcularPrecios","InputLabel","AbrirCompra","compra","handleOpenDetalles","refetchEspera","ModalCompra","openDelete","setOpenDelete","turnoEnCurso","crearCompra","crearCompraEnEspera","isAdmin","compra_en_espera","descuento_compra","productos_con_descuento","conflicto","turno","horario_en_turno","numero_caja","id_caja","id_usuario","token_turno_user","numero_usuario_creador","usuario_en_turno","nombre_usuario_creador","admin","nombre_usuario","handleToggleDelete","Timer","CancelarCompra","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","ExportarProductosComprasExcel","compra_realizada","productos_detalles","Cantidad_regalo","CloudDownloadOutlined","filename","DatosDeCompra","productosFiltrados","setProductosFiltrados","toLowerCase","marginRight","warning","borderColor","CancelCompraConfirm","cancelarCompra","cancelarCompraBD","id_compra","data_sesion","ListaProductos","obtenerComprasRealizadas","RenderRowsCompras","DetallesCompra","handleOpen","AssignmentOutlined","ExportarComprasExcel","filtro","filtroFecha","nombre_documento","since","ComprasRealizadas","ContentDialogCompras","setFiltro","setFiltroFecha","searchfilter","filterDate","obtenerBusqueda","subtract","obtenerFecha","onDelete","current","VerificarProductosCompras","nuevoArray","setNuevoArray","setVerificado","setSuccess","VerifiedUser","ModalVerificacion","loadingVerificacion","setLoadingVerificacion","useLazyQuery","getQuery","productos_nuevos","copy_producto_compra","productos_filtrados","precios_base","unidades_base","presentaciones_base","u_default","u_default_base","present","y","present_base","nuevo_producto_compra","nueva","total_con_descuento","setTimeout","verificarProductos","compra_temp","setCompraTemp","permisosUsuario","verificado","paddingTop","paddingBottom","ModalEliminarCompra","eliminarCompraEnEspera","eliminarCompra","DeleteOutlined","ListaEnEspera","obtenerComprasEnEspera","elimina","RenderRowsComprasEspera","ModalContinuarCompra","ComprasEnEspera","ListaClientes","selectDataClient","showModal","setShowModal","dataSelectRowClient","setDataSelectRowClient","handleClickOpenModal","obtenerClientes","row","clean_cliente","handleClickSelectClient","RowsRender","cambiarEstado","Switch","EliminarCliente","eliminarCliente","eliminarClienteBD","ClientesInactivosComponent","refetchProveedores","setFilter","handleModalToggle","RestoreFromTrash","ClientesInactivos","RenderClientes","handleDeleteToggle","paddingLeft","Cliente","InputBase","onKeyPress","defaultValue","REGISTRAR_DESCUENTOS","DESACTIVAR_DESCUENTOS","ELIMINAR_DESCUENTOS","headCells","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","datosPrecios","variable","indeterminate","headCell","numeric","disablePadding","TablaPreciosDescuentos","setCleanList","cleanList","verificarDatos","setPrecioPrueba","page","rowsPerPage","handleClick","indexOf","newSelected","concat","slice","emptyRows","newSelecteds","n","isItemSelected","colSpan","openModal","setOpenModal","DesactivarDescuentoUnidad","ELiminarDescuentoUnidad","handleChangeActivo","editarDatos","handleDelete","eliminarDescuentoUnidad","defaultChecked","Modal","avatarGroup","rootSlice","rootTable","DescuentoProductos","CrearDescuentoUnidad","openDescuento","setOpenDescuento","precioPrueba","handleCloseDescuentos","cerrarModal","arrayDescuento","descuentos","textAlign","dislay","gutterBottom","justifyItems","Slider","getAriaValueText","valueLabelDisplay","valorText","obtenerPrecioText","EliminarProducto","eliminarProducto","handleToggleModal","eliminarProductoBD","RenderTableRows","cantidad_existente","unidad_inventario","ProdcutosEliminados","productosActivosRefetch","TablaProductosEliminados","obtenerProductosInactivos","RenderProductosTabla","activarProducto","reactivarProducto","Publish","Productos","RegistroComponent","existencias","setExistencias","ArrowBack","ProductoIndex","TablaTallas","eliminarTalla","resp","msgAlert","dato","RegistroTallas","loading_bd","setLoadingBD","actualizarTalla","obtenerTallas","guardarDatosBD","talla_actualizada","DescripcionCatalogo","texto","active","setActive","Tallas","columns","TablaProveedores","column","Proveedores","ProveedoresComponent","CREAR_CAJA","OBTENER_CAJAS","CREAR_HISTORIAL_CAJA","OBTENER_HISTORIAL_CAJA","ELIMINAR_CAJA","OBTENER_PRE_CORTE_CAJA","OBTENER_CORTES_CAJA","OBTENER_CORTE_CAJA","TablaCajas","obtenerCajasSucursal","permisos","StyledBadge","withStyles","badge","boxShadow","left","animation","content","transform","RowCajasRender","styleProps","activa","overlap","principal","EliminarCajasModal","eliminarCaja","deleteCaja","RegistroCajas","crearCaja","nuevaCaja","usuario_creador","Cajas","ListaUsuarios","EliminarUsuario","deleteUsuario","UsuariosInactivosComponent","UsuariosInactivos","Usuarios","CreateDepartamentosContext","DepartamentosProvider","setAccion","idDepartamento","setIdDepartamento","TablaDepartamentos","obtenerDepartamentos","ListaDepartamentosRender","DeleteDepartamento","eliminarDepartamento","RegistroDepartamentos","ActualzarDepartamentos","Departamentos","fade","secondary","RegistroCategorias","setCategoria","toUpdateID","setToUpdateID","loadingBackDrop","setLoadingBackDrop","actualizarCategoria","guardarCategoria","categoriaActualizada","render_categorias","obtenerCategorias","RenderCategorias","setSubcategoria","actualizarSubcategoria","render_subcategorias","guardarSubcategoria","subCategoriaActualizada","idSubcategoria","Accordion","AccordionSummary","expandIcon","ExpandMore","stopPropagation","scrollTo","AccordionDetails","RenderSubcategorias","px","ModalEliminar","eliminarCategoria","eliminarSubcategoria","Categorias","TablaColores","eliminarColor","RegistroColores","error_data","loading_data","actualizarColor","msg","ListaMarcas","updateData","obtenerMarcas","eliminarMarca","CreateMarcasContext","MarcasProvider","datosMarcas","setDatosMarcas","VistaMarcas","setUpdateData","actualizarMarca","Marcas","RegistroCentroCostos","setCuenta","crearCuenta","actualizarCuenta","render_cuentas","obtenerCuentas","guardarCuenta","cuentaActualizada","idCuenta","RenderCuentas","subcuenta","setSubcuenta","eliminarCuenta","crearSubcuenta","actualizarSubcuenta","render_subcuentas","guardarSubcuenta","subCuentaActualizada","idSubcuenta","deleteCuenta","RenderSubcuentas","eliminarSubcuenta","deleteSubCuenta","idSubCuenta","CentroCostos","OBTENER_CONCEPTOS_ALMACEN","REGISTRAR_CONCEPTO_ALMACEN","ACTUALIZAR_CONCEPTO_ALMACEN","ELIMINAR_CONCEPTO_ALMACEN","TablaConceptos","setIdConcepto","idConcepto","obtenerConcepto","EliminarConceptoAlmacen","obtenerConceptosAlmacen","nombre_concepto","destino","editable","formControl","MenuProps","PaperProps","ITEM_HEIGHT","tipos","getStyles","tipoName","typography","fontWeightRegular","fontWeightMedium","RegistroServicios","crearConceptoAlmacen","actualizarConceptoAlmacen","handleSubmit","ConceptosAlmacen","alignSelf","TesoreriaCtx","TesoreriaProvider","cuentas","setCuentas","reload","setReload","formComboBox","conceptos","RetiroDeposito","CrearMovimientoCuenta","datosMovimiento","setDatosMovimiento","concepto","setConcepto","usuarioEntrega","setUsuarioEntrega","setOrigen","setDestino","fechaMovimientoEntrega","setFechaMovimientoEntrega","cajasArray","queryObtenerUsuarios","queryObtenerCajas","onChangeDatos","tipo_movimiento","rol_movimiento","horario_turno","usuario_entrega","origen_entrega","fecha_movimiento_entrega","hora_moviento","hora","minutos","segundos","completa","fecha_movimiento","mes","dia","no_semana_year","week","no_dia_year","dayOfYear","montos_en_caja","monto_efectivo","monto","metodo_pago","monto_tarjeta_debito","monto_tarjeta_credito","monto_creditos","monto_monedero","monto_transferencia","monto_cheques","monto_vales_despensa","comentarios","enviarDatos","movimiento","crearMovimientoCuenta","handleChangeConcepto","con","usu","ori","caja","fecMov","des","rows","rootBusqueda","HistorialCuentas","setSaldoCaja","datosFiltro","setDatosFiltro","fecha_inicio","fecha_fin","historialCuenta","obtenerHistorialCuenta","saldo_en_caja","movimientos","RowsHistorial","buttons","CajaPrincipal","saldoCaja","TablaCompras","OBTENER_HISTORIAL_ABONOS","OBTENER_HISTORIAL_ABONOS_CLIENTE","CREAR_ABONO","CREAR_ABONO_CLIENTE","CANCELAR_ABONO_CLIENTE","CANCELAR_ABONO_PROVEEDOR","withRouter","fileName","columnName","columnsEffect","widthPx","abonoSelected","setAbonoSelected","openCancelar","setOpenCancelar","loadingCancelar","setLoadingCancelar","cancelarAbonoProveedor","dataExcel","id_cliente","id_egreso","abonos","obtenerHistorialAbonos","monto_total_abonado","cancelAbono","id_Caja","monto_abono","clave_proveedor","nombre_proveedor","telefono_proveedor","telefono_cliente","email_proveedor","email_cliente","id_abono","metodo_de_pago","abono","history","affirmCancelar","mrstyle","alignContent","CrearAbono","setAbono","setMetodoPago","clave","metodo","DetallesCuenta","recargar","cuentaTotalDescuento","setCuentaTotalDescuento","setDineroDescontado","porciento_descuento","valueLabelFormat","cuenta_con_descuento","pagada","vencidas","TablaAbonos","RowsCuentas","cuentaSelect","clearTimeout","timer","TwoClickInRowTableBuy","estatus_credito","vencer","rootSearch","AbonosProveedores","AbonosCtx","AbonosProvider","setVentas","openAbonar","setOpenAbonar","setAbonos","DetalleVentaCredito","setOpenDetalle","openDetalle","cancelarAbonoCliente","setOpenHistorial","openHistorial","rowSelected","fecha_movimiento_credito","id_venta","setTotal","crearAbonoVentaCredito","liquidarVentas","ObjectMetodoPago","val","monto_total","total_ventas","isIcon","liquidar","setNameMetodo","hacerAbono","openDialog","sx","enviarCantidad","TablaVentasCredito","setRowSelected","folio","fecha_de_vencimiento_credito","detalle","historial","selectedClient","CONSULTA_PRODUCTO_UNITARIO","CONSULTA_PRODUCTOS_VENTAS","OBTENER_CLIENTES_VENTAS","CREAR_VENTA","OBTENER_VENTAS_SUCURSAL","OBTENER_VENTAS_REPORTES","CANCELAR_VENTA_SUCURSAL","titleSelect","iconSize","borderBotonChico","AbonosClientes","context","setSelectedClient","totalVentas","setTotalVentas","historialVentasACredito","addEventListener","fromVentas","obtenerVentasCredito","idCliente","arrayToset","obtenerClientesVentas","errors","ChangeClientAutocomplate","liquidarTodas","copyArray","IndexTesoreria","FacturacionCtx","FacturacionProvider","serie","currency","expedition_place","cfdi_type","payment_form","payment_method","logo_url","date","issuer","FiscalRegime","Rfc","receiver","CfdiUse","items","datosFactura","setDatosFactura","venta_factura","setVentaFactura","cp_valido","setCPValido","setCodigoPostal","error_validation","ProductosSinClaveSat","ListaVentasFactura","ComponentBusquedaVenta","open_productos","setOpenProductos","productos_sin_clave","setProductosSinClave","isDate","isValid","resultado_ventas","filtros","vista","openProductosClaves","RenderLista","obtenerVentasSucursal","facturada","factura","without_sat_code","productos_base","datos_factura","obtenerVenta","Description","CodigoPostal","CP","obtenerCodigoPostal","Fragment","ListaClientesFacturas","BuscadorClienteComponent","openAlertRfc","setOpenAlertRfc","resultado_clientes","openAlertRFC","RenderListClientes","minwidth","obtenerClienteTabla","RegistroFactura","serie_default","ModificarProductoFactura","producto_base","setProductoBase","venta_base","setVentaBase","cantidad_base","precio_base","venta_copy","resta_base","suma_nuevo","precios_nuevos","impuestos_precio","copy_array_productos","guardarPrecios","EliminarProductoFactura","copy_venta","copy_productos","precio_resta","DetallesFactura","RowTableProductos","verificarDatosFactura","factura_initial_state","RealizarFactura","CrearFactura","crearFactura","nuevo_obj","Taxes","Total","Base","Rate","IsRetention","ProductCode","IdentificationNumber","UnitCode","UnitPrice","Quantity","Subtotal","subtotal_antes_de_impuestos","Discount","descuento_producto","folio_venta","InputsFacturaModal","CancelarFactura","handleCloseFactura","cancelar","NuevaFactura","DialogFacturaPrincipal","openCancel","setOpenCancel","cancelarCFDI","FacturaModalContent","seriesCfdi","obtenerSeriesCdfi","RegistroSeries","crearSerieCFDI","obtenerDatosSeries","ListaSeriesCDFI","modificarDefaultSerie","setPredeterminado","ModalDeleteSerie","eliminarSerie","eliminarSerieBD","SeriesCDFI","ContentSeriesCFDI","base64toBlob","bytes","atob","out","Uint8Array","charCodeAt","Blob","DetallesFacturaModal","facturaBase64","decodedHTML","htmlBase64","blob_pdf","pdfBase64","url_pdf","blob_xml","xmlBase64","url_xml","html","download","href","borderBottom","ComplementosFactura","handleSelectFactura","Collapse","in","timeout","unmountOnExit","complementos","cfdi","complement","Payments","RelatedDocuments","PaymentMethod","PaymentForm","PartialityNumber","PreviousBalanceAmount","Amount","TablaFacturasFiltradas","setFactura","setFacturaBase64","getDocumentCfdi","id_cfdi","obtenerDocumentCfdi","RenderListFacturas","desplegar","setDesplegar","discount","sub_total","ExportarFacturas","facturas","taxes","TaxName","satCertNumber","TaxStamp","SatCertNumber","FiltrosFactura","obtenerFacturas","CapturaDeDatos","obtenerCamposFiltro","realizarBusquedaBD","ClearOutlined","EliminarAlmacen","eliminarAlmacen","handleDeleteAlmacen","heigth","ListaAlmacen","obtenerAlmacenes","RegistroAlmacen","TraspasosAlmacenContext","TraspasosProvider","productosTo","setProductosTo","productosEmpTo","setProductosEmpTo","productosTras","setProductosTras","setDataExcel","productoData","setNew_medidas","nuevaCantidad","medidas_registradas","new_medidas","presentaciones_existentes","paddingRight","cell","idProducto","cantidadAnt","copy_medida","product_selected","new_medidasCopia","med","Object","hasOwnProperty","call","cant","order","orderBy","onRequestSort","headCellsNames","add","sortDirection","TableSortLabel","useToolbarStyles","inputCantidad","inputCantidadTable","highlight","lighten","light","text","dark","flexWrap","DialogTallas","close","setOpenTallas","setproduct_selected","prod","openTallas","almacenOrigen","newMedidasCopy","prodSelect","existe","copyProductosTras","medidasTo","newMed","obj","EnhancedTableToolbar","cantidadTo","setCantidadTo","openEnd","setOpenEnd","tipoPieza","setValueToTrans","mensaje","find","totalCantExistMasNuevaCantidad","piezas","cantidad_existente_maxima","unidadMaxima","TipoPiezaComponent","TIPO_PIEZA","unidad_minima","clsx","intValue","onlyNumbers","deletesItems","EnhancedTable","setOrder","setOrderBy","setCant","setTipoPieza","elemento","haveCant","handleSelectAllClick","scope","prod_sel","editItem","prodSet","deleteItem","boxUpData","selected2","inputBox","boxControl","centerControl","almacenName","transportes","steps","Traspasos","haveConcepto","setHaveConcepto","conceptoTraspaso","setConceptoTraspaso","isAlmacenOrigen","setIsAlmacenOrigen","isAlmacenDestino","setIsAlmacenDestino","setAlmacenOrigen","almacenDestino","setAlmacenDestino","almacenesDestino","setAlmacenesDestino","transporte","setTransporte","placas","setPlacas","nombreQuien","setNombreQuien","activeStep","setActiveStep","Set","skipped","setSkipped","CrearTraspaso","queryObtenerAlmacenes","dataConceptos","categoriasQuery","productosQuery","productosEmpresaQuery","obtenerProductosAlmacen","obtenerProductosEmpresa","obtenerProductosPorEmpresa","handleBack","isStepSkipped","step","has","prevActiveStep","traspasar","concepto_traspaso","almacen_origen","almacen_destino","datos_transporte","nombre_encargado","sucursalOrigen","sucursalDestino","traspaso","crearTraspaso","almacenIcon","Stepper","stepProps","completed","Step","StepLabel","justify","trans","pt","newSkipped","delete","handleNext","MedidasAlmacenes","almacenSeleccionado","Row","ItemReturn","DialogMedidasAlmacenes","setAlmacen","medidasAlmacen","setMedidasAlmacen","alm","Rowrow","rowProps","dataExcelHere","setDataExcelHere","arrayCantidades","font","sz","alignment","wrapText","bottom","rgb","setRow","setUnidad_Minima","tot","r","datExc","uniMin","almacenColumna","existencia_almacenes","productosLength","toShowMedidasAlmacen","costoProd","costoProducto","totalProductos","ListaAlmacenes","InventariosPorAlmacen","productosAlmacenQuery","InventarioPorAlmacen","setObtenerAlmacenes","setColumns","obtenerProductosAlmacenes","almace","TablaHistorialFiltrado","abs","iconSave","right","HistorialCaja","datosBuscar","setDatosBuscar","datosExcel","obtenerHistorialCaja","cajaSelected","fecha_incio","arrayExcel","datosHistorial","hora_movimiento","agruparDatos","handleDatos","media","expand","transition","transitions","create","duration","shortest","expandOpen","red","textActive","CardCaja","Card","CardHeader","setCajaSelected","handleClickOpenHistorial","cantidad_efectivo_actual","fetchCajas","TablaTurnosFiltrados","turnos","hora_entrada","hora_salida","REGISTRAR_TURNOS","OBTENER_HISTORIAL_TURNOS","ReportesTurnosUsuarios","FiltroTablaTurnos","setFiltros","historialTurnos","fechaInicio","fechaFin","fecha_entrada","fecha_salida","obtenerFiltroTurnos","TablaComprasFiltradas","OBTENER_REPORTE_COMPRAS","ExportarCompras","forma","FiltrosCompras","obtenerProductoMovimientos","ReportesCompras","TablaVentasFiltradas","venta_credito","ExportarVentas","FiltrosVenta","obtenerVentasReportes","ReportesVentas","ExportarTraspasos","id_traspaso","TablaAlmacenFiltradas","ReportesAlmacen","fecha_final","inputFilter","encargado","setEncargado","traspasosAlmacenes","setDatosInput","fil","obtenerTraspasos","enc","almDes","almOri","encId","setEncargadoInput","setQueryAlmacenOrigen","setQueryAlmacenDestino","filt","limpiarFiltros","TablaCortesFiltradas","cortes","corte","number_user","obtenerCorte","montos_sistema","obtenerCorteCaja","montos_en_sistema","InformacionCorteCaja","ExportExcel","historialCortes","setDatosExcel","ReportesCortes","cajasBase","fecha_consulta","obtenerCortesDeCaja","createData","code","population","density","iconSvgVenta","axis","onChangeIndex","appbar","navbar","grey","menuButton","CerrarSesionDialog","signOut","token","Link","to","ShoppingCart","removeItem","flexShrink","drawerColor","drawerPaper","navigationTop","iconSizeSuperior","info","iconSizeSecondSuperior","iconSizeInferior","iconSizeSecondInferior","iconSizeSecondInferiorGrande","iconSizeInferiorGrande","borderBoton","rootPrecioProductos","containerImage","rootBusquedaProductos","rootFecha","iconSizeDialogs","iconSizeDialogsPequeno","containerImagenesProducto","imagenProducto","VentasContext","VentasProvider","DatosVentasActual","setDatosVentasActual","datosProductoVentas","setDatosProductoVentas","setProductosVentas","datosVentas","setDatosVentas","productoCambioPrecio","setProductoCambioPrecio","precioSelectProductoVenta","setPrecioSelectProductoVenta","clientesVentas","setClientesVentas","turnoActivo","setTurnoActivo","ubicacionTurno","setUbicacionTurno","abrirTurnosDialog","setAbrirTurnosDialog","venta_retomada","setVentaRetomada","updateTablaVentas","setUpdateTablaVentas","openBackDrop","setOpenBackDrop","openBuscarProducto","setOpenBuscarProducto","CrearNuevaCuenta","CrearNuevaSubcuenta","focus","DepositoRetiroCaja","CrearHistorialCaja","preCorteDeCaja","dineroEnCaja","obtenerPreCorteCaja","monto_efectivo_precorte","altKey","id_User","RadioGroup","Radio","ComponenteSinConexion","CrearRegistroDeTurno","montoTurno","setMontoTurno","cerrarTurno","setCerrarTurno","montoResguardo","setMontoResguardo","montoRetiro","setMontoRetiro","montosTotales","setMontosTotales","obtenerCamposMontos","montos","sum","monto_puntos","arraySesion","exp","iat","actualizarTurnoSesion","location","montoEfectivo","montoTranferir","sign","Turnos","AccesosContext","AccesosProvider","abrirPanelAcceso","setAbrirPanelAcceso","tipo_acceso","setDepartamentos","reloadAdministrador","setReloadAdministrador","reloadProductoRapido","setReloadProductoRapido","reloadCancelarVenta","setReloadCancelarVenta","reloadVerPrecios","setReloadVerPrecios","reloadVerPreCorte","setReloadVerPreCorte","reloadEliminarVentaEspera","setReloadEliminarVentaEspera","reloadCrearCotizacion","setReloadCrearCotizacion","PreCorteCaja","VentaEnEspera","agregarVentaEnEspera","datosVenta","cleanData","RegistroInformacionRapido","setAbrirTallaColor","varIVA","varIEPS","TallasColoresRapidos","Acceso","datosUser","setDatosUser","handleClickClose","obtenerQuery","obtenerAccesoPermiso","permiso_concedido","SwitchPermisos","ArticuloRapido","crearProductoRapido","abrirTallaColor","AceesoProductoRapido","ProductoRapidoIndex","CREAR_COTIZACION","CONSULTAR_COTIZACIONES","backgroundPosition","backgroundSize","textoSecundario","firma","intructor","codigo","CotizacionPdf","cotizacion","printDocument","divInformation","pdf","jsPDF","html2canvas","canvas","imgData","toDataURL","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","addImage","addPage","save","CotizacionInformation","iva_total_producto","ieps_total_producto","subtotal_total_producto","impuestos_total_producto","total_total_producto","ComponenteDescuento","descuento_general_activo","descuento_general","DetalleCotizacion","ComponenteMedidaColor","CotizacionesPendientes","view","setView","handleModalCotizacion","obtenerCotizaciones","CotizacionRow","openMessage","setOpenMessage","updateDataStorage","openDetail","fecha_vencimiento_cotizacion","AgregarVentaDeNuevo","objectToSave","isBefore","RegresarVenta","ListaCotizaciones","pb","BottomNavigation","Abonos","productosBusqueda","setProductoSeleccionado","productoSeleccionado","agregarProductos","handleTableSelect","RowsProductos","ComponentCantidad","InformacionProducto","BuscarProducto","open_message","searchProducto","setSearchProducto","granelBase","setGranelBase","obtenerProductosVentas","without_inventary","venta_existente","productosVentasTemp","CalculosData","producto_encontrado","productoPrecioFinal","new_prices","verify_prising","calculo_resta","calculo_sumar","ClientesVentas","NuevaCotizacion","CrearCotizacion","newCotizacion","setNewCotizacion","totalDescount","setTotalDescount","setPorcentaje","original_datos_Ventas","crearCotizacion","fecha_vencimiento","cantidad_descontado","dias_de_credito_venta","productosFinal","productStorage","product","porsentajeNewDescuento","dineroDescontadoDescuento","newPrecioVentaProduct","newIvaProduct","newIepsProduct","newPrecioNetoProduct","newUtilidadProduct","valorGranel","descuentoProducto","handleCalculateNewDiscountVenta","ventaSubtotal","obtenerPorciento","Cotizacion","tipoVentana","setTipoVentana","CancelarVenta","ObtenerMontos","setMontos","totales","setTotales","montoEnCaja","setMontoEnCaja","datosCliente","efectivoConstante","setEfectivoConstante","venta_original","total_venta","handlerChangeValue","efectivo","tarjeta","puntos","transferencia","cheque","monto_caja","monto_pagado","cambio_caja","cambio","clearFieldOnFocus","validateCantidadesCorrectas","InfoTotalesVenta","monederoTotal","CreditoVenta","setDatosCliente","fechaVencimientoDate","setfechaVencimientoDate","setAbonoMinimo","abono_minimo","modelDate","hoy","diasDiff","diff","DescuentoVenta","descuentoAplicarVenta","setDescuentoAplicarVenta","descuentoPorsentajeVenta","setDescuentoPorsentajeVenta","setVariables","subtotal_venta","handleInvalidInput","precioVariable","setPrecioVariable","porcentVariable","setPorcentVariable","PRICE","PERCENT","positiveDiscount","handlerChangeDiscountVenta","handleChangePorsentDiscount","initial_state_montos","initial_state_totales","CerrarVenta","setCambio","setVentaCredito","setCreditoDisponible","limite_superado","setLimiteSuperado","setMonederoTotal","editarCliente","setEditarCliente","setMonedero","createVenta","datos_cliente","monedero_generado","calcularMonedero","handleCloseCambio","resetStates","handleClickFinishVenta","ventaFinal","montosEnCaja","abonoMinimo","editar_cliente","puntos_totales_venta","numero_mayor","keys","tecla_escape","pr","VistaProductoNormal","productoBase","activeItemIndex","setActiveItemIndex","requestToChangeActive","numberOfCards","leftChevron","rightChevron","infiniteLoop","outsideChevron","chevronWidth","textDecoration","VistaProductoMedidas","MappingProductos","TableCellMedidaColor","TableCellDescuento","ProductosViewComponent","dataQuery","obtenerUnProductoVentas","ConsultarPrecio","setDataQuery","obtenerProducto","datosProductos","keyUpEvent","onKeyUp","PreciosProductos","selectPrisingProduct","setSelectPrisingProduct","handleAceptChangePrising","newProductoPrecioNuevo","newProductoPrecioActual","new_resta","new_suma","doubleClick","ListaVentas","handleModalEspera","listaEnEspera","RowsVentas","borrarVenta","nueva_venta_espera","verificarPermisos","EliminarVentaEspera","VentasEspera","CancelarFolio","handleCloseInfoVenta","dinero_disponible","observaciones","devolucion_efectivo","devolucion_credito","cancelarVentasSucursal","handleChangeChecks","handleCancelSale","seleccionado","InfoVentaFolio","id_unidad_venta","ListaVentasRealizadas","setParams","input_precorte","res_precorte","data_precorte","tableStyles","today_color","normal_color","RowComprasRealizadas","today","VentasRealizadas","NavegacionVentasLateral","breakpoints","up","datosTabla","setDatosTabla","newCantidadProduct","setNewCantidadProduct","tempAmount","setTempAmount","CalculeDataPricing","new_cant","newPrising","precio_actual_porducto","calculateNewPricingAmount","AgregarTipoVenta","setTipoEmision","selectClient","setSelectClient","dataCliente","AgregarClienteVenta","justifySelf","ProductoConMedidas","VistaMedidasVenta","showZero","AgregarProductoVenta","setClave","openMedidas","setOpenMedidas","setProducto","consultaBase","setConsultaBase","input_value","datosQuery","granel_base","data_operation","data_key","productosBase","ContenedorInputsGeneral","VentasGenerales","AbrirTurno","abrirTurno","setAbrirTurno","numeroCaja","setNumeroCaja","obtenerTurno","turno_en_curso","caja_elegida","monto_abrir","variableTurnoAbierto","crearRegistroDeTurno","VentaIndex","AbrirTurnoEnVentas","LayoutWithProvider","NavDataCajaUsers","Administrador","srsc","Settings","routes","logearUsuario","signin","decoded","jwt_decode","autocomplete","labelWidth","exact","logo","adminIcon","cartIcon","AdminInicio","createTheme","blue","httpLink","createUploadLink","uri","process","ApolloClient","connectToDevTools","cache","InMemoryCache","addTypename","link","RoutesWithSubRoutes","route","render","App","CssBaseline","ApolloProvider","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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,6CAER,CACEC,MAAO,MACPD,KAAM,qBAER,CACEC,MAAO,MACPD,KAAM,kBAER,CACEC,MAAO,MACPD,KAAM,kDAER,CACEC,MAAO,MACPD,KAAM,wBAER,CACEC,MAAO,MACPD,KAAM,qCAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KAAM,iCAER,CACEC,MAAO,MACPD,KAAM,8BAER,CACEC,MAAO,MACPD,KAAM,4BAER,CACEC,MAAO,MACPD,KAAM,0DAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KAAM,qBAER,CACEC,MAAO,MACPD,KAAM,aAER,CACEC,MAAO,MACPD,KACE,6FAEJ,CACEC,MAAO,MACPD,KAAM,oCAER,CACEC,MAAO,MACPD,KAAM,4CAER,CACEC,MAAO,MACPD,KAAM,oDAER,CACEC,MAAO,MACPD,KACE,4FAEJ,CACEC,MAAO,MACPD,KAAM,iDAER,CACEC,MAAO,MACPD,KAAM,gBAGGuR,GAAY,CACvB,CACEC,OAAQ,EACRxR,KAAM,UACNC,MAAO,KAET,CACEuR,OAAQ,EACRxR,KAAM,qBACNC,MAAO,KAET,CACEuR,OAAQ,GACRxR,KAAM,sBACNC,MAAO,MAGEwR,GAAa,CACxB,CACExR,MAAO,MACPD,KAAM,iBAER,CACEC,MAAO,MACPD,KAAM,QAER,CACEC,MAAO,MACPD,KAAM,oBAGG0R,GAAY,CACvB,CACE1R,KAAM,WACNC,MAAO,MAET,CACED,KAAM,oBACNC,MAAO,MAET,CACED,KAAM,yCACNC,MAAO,MAET,CACED,KAAM,wBACNC,MAAO,MAET,CACED,KAAM,0BACNC,MAAO,MAET,CACED,KAAM,wBACNC,MAAO,MAET,CACED,KAAM,oBACNC,MAAO,MA0CT,CACED,KAAM,uBACNC,MAAO,MAMT,CACED,KAAM,6BACNC,MAAO,MAMT,CACED,KAAM,cACNC,MAAO,OAGE0R,GAAa,CACxB,CACE1R,MAAO,MACPD,KAAM,uCAER,CACEC,MAAO,MACPD,KAAM,mCAGG4R,GAAgB,CAC3B,CACEC,SAAS,EACTC,OAAO,EACP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","file":"static/js/main.c8cd3654.chunk.js","sourcesContent":["import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_USUARIO = gql`\r\n\tmutation crearUsuario($input: CrearUsuarioInput) {\r\n\t\tcrearUsuario(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tturno_en_caja_activo\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcaja_principal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_USUARIOS = gql`\r\n\tquery obtenerUsuarios($empresa: String!, $filtro: String, $eliminado: Boolean) {\r\n\t\tobtenerUsuarios(empresa: $empresa, filtro: $filtro, eliminado: $eliminado) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\tturno_en_caja_activo\r\n\t\t\temail\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcaja_principal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_USUARIO = gql`\r\n\tmutation actualizarUsuario($input: ActualizarUsuarioInput, $id: ID!) {\r\n\t\tactualizarUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO = gql`\r\n\tmutation logearUsuario($input: LogearUsuarioInput) {\r\n\t\tlogearUsuario(input: $input) {\r\n\t\t\ttoken\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO_ACCESOS = gql`\r\n\tquery ObtenerAccesoPermiso($input: ObtenerAccesoPermisosInput) {\r\n\t\tobtenerAccesoPermiso(input: $input) {\r\n\t\t\tpermiso_concedido\r\n\t\t\tdepartamento\r\n        \tsubDepartamento\r\n\t\t}\r\n\t}\t\t\r\n`;\r\n\r\nexport const AGIGNAR_PERMISOS_USUARIO = gql`\r\n\tmutation asignarAccesosUsuario($input: CrearArregloDeAccesosInput, $id: ID!) {\r\n\t\tasignarAccesosUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n}\r\n`;","import { Box, makeStyles, Snackbar, Typography, Portal } from '@material-ui/core';\r\n/* import { Alert } from '@material-ui/lab'; */\r\nimport React from 'react';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\n\r\nexport default function SnackBarMessages({ alert, setAlert }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAlert({ open: false, status: alert.status, message: '' });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Portal>\r\n\t\t\t<Snackbar\r\n\t\t\t\tclassName={classes.snack}\r\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\t\topen={alert.open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t{alert.status === 'success' ? (\r\n\t\t\t\t\t\t\t<CheckCircleIcon style={{ color: '#22bb33' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ErrorIcon style={{ color: 'red' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box mr={1} />\r\n\t\t\t\t\t\t<Typography>{alert.message}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Portal>\r\n\t);\r\n\t/* return (\r\n\t\t<Snackbar\r\n\t\t\tclassName={classes.snack}\r\n\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\topen={alert.open}\r\n\t\t\tonClose={handleClose}\r\n\t\t\tautoHideDuration={2000}\r\n\t\t>\r\n\t\t\t<Alert onClose={handleClose} severity={alert.status}>\r\n\t\t\t\t{alert.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t); */\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Container, TextField, Typography, CircularProgress } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGEAR_USUARIO } from '../../gql/Catalogos/usuarios';\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { FormControl } from '@material-ui/core';\r\nimport { InputLabel } from '@material-ui/core';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport { InputAdornment } from '@material-ui/core';\r\nimport { IconButton } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport ab from '../../img/abLogo.jpeg'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tmargin: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcontainerImagen:{\r\n\t\tmaxWidth: 170,\r\n\t\tmaxHeight: 170\r\n\t},\r\n\timagen:{\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tinput: {\r\n\t\t\"& input[type=number]\": {\r\n\t\t  \"-moz-appearance\": \"textfield\",\r\n\t\t},\r\n\t\t\"& input[type=number]::-webkit-outer-spin-button\": {\r\n\t\t  \"-webkit-appearance\": \"none\",\r\n\t\t  margin: 0,\r\n\t\t},\r\n\t\t\"& input[type=number]::-webkit-inner-spin-button\": {\r\n\t\t  \"-webkit-appearance\": \"none\",\r\n\t\t  margin: 0,\r\n\t\t},\r\n\t  },\r\n}));\r\n\r\nexport default function LayoutLogin(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = localStorage.getItem('sesionCafi');\r\n\tconst [ datos, setDatos ] = useState([]);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\r\n\tif (sesion) props.history.push('/ventas/venta-general');\r\n\r\n\tconst [ logearUsuario ] = useMutation(LOGEAR_USUARIO);\r\n\r\n\tconst signin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!datos.numero_usuario || !datos.password) {\r\n\t\t\tsetAlert({ message: 'Los campos estan vacíos', status: 'error', open: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await logearUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tnumero_usuario: parseInt(datos.numero_usuario),\r\n\t\t\t\t\t\tpassword: datos.password\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst { token } = result.data.logearUsuario;\r\n\t\t\tconst decoded = jwt_decode(token);\r\n\t\t\tsetLoading(false);\r\n\t\t\tlocalStorage.setItem('sesionCafi', JSON.stringify(decoded));\r\n\t\t\tlocalStorage.setItem('tokenCafi', JSON.stringify(token));\r\n\t\t\tprops.history.push('/ventas/venta-general');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tsetDatos({\r\n\t\t\t...datos,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleClickShowPassword = () => {\r\n\t\tsetShowPassword(!showPassword);\r\n\t};\r\n\r\n\tconst handleMouseDownPassword = (event) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"sm\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Box height=\"100vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t<Box boxShadow=\"3\" p={3} width=\"80%\">\r\n\t\t\t\t\t<Box display='flex' justifyContent='center' alignItems='center' justifyItems='center' >\r\n\t\t\t\t\t\t<Box className={classes.containerImagen} textAlign='center'>\r\n\t\t\t\t\t\t\t<img className={classes.imagen} src={ab} alt=\"imagen no disponible\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display='flex' textAlign='center' justifyContent='center'>\r\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"p\" className={classes.margin}>\r\n\t\t\t\t\t\t\t<b>Inicia sesión</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<form autocomplete=\"on\" onSubmit={signin} className={classes.input}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Numero de usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tname=\"numero_usuario\"\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<FormControl variant=\"outlined\" name=\"password\" className={classes.margin} fullWidth>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor=\"usuario-password\">Contraseña</InputLabel>\r\n\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tid=\"usuario-password\"\r\n\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabelWidth={70}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tendIcon={loading ? <CircularProgress size={25} color=\"inherit\" /> : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tEntrar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","export const initial_state_datos_generales = {\r\n  receta_farmacia: false,\r\n  clave_producto_sat: {\r\n    Name: \"\",\r\n    Value: \"\",\r\n  },\r\n};\r\nexport const initial_state_precios = {\r\n  monedero: false,\r\n  monedero_electronico: 0,\r\n  iva_activo: true,\r\n  ieps_activo: false,\r\n  ieps: 0,\r\n  iva: 16,\r\n  granel: false,\r\n  inventario: {\r\n    inventario_minimo: 0,\r\n    inventario_maximo: 0,\r\n    unidad_de_inventario: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n  },\r\n  precio_de_compra: {\r\n    precio_con_impuesto: 0,\r\n    precio_sin_impuesto: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n  },\r\n  unidad_de_compra: {\r\n    unidad: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n    cantidad: 1,\r\n    precio_unitario_sin_impuesto: 0,\r\n    precio_unitario_con_impuesto: 0,\r\n  },\r\n};\r\n\r\nexport const initial_state_unidadVentaXDefecto = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Pz\",\r\n  codigo_unidad: \"H87\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: true,\r\n  default: true,\r\n};\r\n\r\nexport const initial_state_unidadVentaSecundaria = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Caja\",\r\n  codigo_unidad: \"XBX\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: false,\r\n  default: false,\r\n};\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_unidadesVenta = [\r\n  \r\n];\r\n\r\nexport const initial_state_almacen_inicial = {\r\n  id_almacen: \"\",\r\n  almacen: \"\",\r\n  cantidad: 0,\r\n  fecha_de_expiracion: \"\",\r\n};\r\nexport const initial_state_centro_de_costos = {};\r\n\r\nexport const initial_state_preciosPlazos = {\r\n  precio_piezas: [],\r\n  precio_cajas: [],\r\n  precio_costales: [],\r\n};\r\n\r\nexport const initial_state_subcategorias = [];\r\nexport const initial_state_imagenes = [];\r\nexport const initial_state_imagenes_eliminadas = [];\r\nexport const initial_state_onPreview = { index: \"\", image: \"\" };\r\nexport const initial_state_validacion = { error: false, message: \"\" };\r\nexport const initial_state_subcostos = [];\r\nexport const initial_state_selectedDate = null;\r\nexport const initial_state_presentaciones = [];\r\n","import React, { createContext, useState } from \"react\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_preciosP,\r\n  initial_state_unidadesVenta,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_subcategorias,\r\n  initial_state_imagenes,\r\n  initial_state_imagenes_eliminadas,\r\n  initial_state_onPreview,\r\n  initial_state_validacion,\r\n  initial_state_subcostos,\r\n  initial_state_selectedDate,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"./initialStatesProducto\";\r\n\r\nexport const RegProductoContext = createContext();\r\n\r\nexport const RegProductoProvider = ({ children }) => {\r\n  const [datos_generales, setDatosGenerales] = useState(\r\n    initial_state_datos_generales\r\n  );\r\n  const [precios, setPrecios] = useState(initial_state_precios);\r\n  const [unidadVentaXDefecto, setUnidadVentaXDefecto] = useState(\r\n    initial_state_unidadVentaXDefecto\r\n  );\r\n  const [unidadVentaSecundaria, setUnidadVentaSecundaria] = useState(\r\n    initial_state_unidadVentaSecundaria\r\n  );\r\n  const [preciosP, setPreciosP] = useState(initial_state_preciosP);\r\n  \r\n  const [unidadesVenta, setUnidadesVenta] = useState(\r\n    initial_state_unidadesVenta\r\n  );\r\n  const [almacen_inicial, setAlmacenInicial] = useState(\r\n    initial_state_almacen_inicial\r\n  );\r\n  const [centro_de_costos, setCentroDeCostos] = useState(\r\n    initial_state_centro_de_costos\r\n  );\r\n  const [preciosPlazos, setPreciosPlazos] = useState(\r\n    initial_state_preciosPlazos\r\n  );\r\n  const [subcategorias, setSubcategorias] = useState(\r\n    initial_state_subcategorias\r\n  );\r\n  const [imagenes, setImagenes] = useState(initial_state_imagenes);\r\n  const [imagenes_eliminadas, setImagenesEliminadas] = useState(\r\n    initial_state_imagenes_eliminadas\r\n  );\r\n  const [onPreview, setOnPreview] = useState(initial_state_onPreview);\r\n  const [validacion, setValidacion] = useState(initial_state_validacion);\r\n  const [subcostos, setSubcostos] = useState(initial_state_subcostos);\r\n  const [selectedDate, setSelectedDate] = useState(initial_state_selectedDate);\r\n  const [update, setUpdate] = useState(false);\r\n  const [presentaciones, setPresentaciones] = useState(\r\n    initial_state_presentaciones\r\n  );\r\n  const [presentaciones_eliminadas, setPresentacionesEliminadas] = useState([]);\r\n  const [actualizarLista, setActualizarLista] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // USESTATES DE DESCUENTOS DE PRODUCTOS\r\n  const [ datosPreciosProducto, setDatosPreciosProducto ] = useState([]);\r\n  const [ preciosDescuentos, setPreciosDescuentos] = useState([]);\r\n  const [ preciosProductos, setPreciosProductos ] = useState([]);\r\n  const [ datosEnDescuentos, setDatosEnDescuentos ] = useState([]);\r\n  const [ almacen_existente, setAlmacenExistente] = useState(false);\r\n\r\n  return (\r\n    <RegProductoContext.Provider\r\n      value={{\r\n        datos_generales,\r\n        setDatosGenerales,\r\n        precios,\r\n        setPrecios,\r\n        almacen_inicial,\r\n        setAlmacenInicial,\r\n        imagenes,\r\n        setImagenes,\r\n        imagenes_eliminadas,\r\n        setImagenesEliminadas,\r\n        onPreview,\r\n        setOnPreview,\r\n        validacion,\r\n        setValidacion,\r\n        preciosP,\r\n        setPreciosP,\r\n        preciosPlazos,\r\n        setPreciosPlazos,\r\n        unidadesVenta,\r\n        setUnidadesVenta,\r\n        centro_de_costos,\r\n        setCentroDeCostos,\r\n        unidadVentaXDefecto,\r\n        setUnidadVentaXDefecto,\r\n        subcategorias,\r\n        setSubcategorias,\r\n        subcostos,\r\n        setSubcostos,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        update,\r\n        setUpdate,\r\n        presentaciones,\r\n        setPresentaciones,\r\n        presentaciones_eliminadas,\r\n        setPresentacionesEliminadas,\r\n        actualizarLista,\r\n        setActualizarLista,\r\n        alert,\r\n        setAlert,\r\n\r\n        datosPreciosProducto, \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n        datosEnDescuentos, \r\n        setDatosEnDescuentos,\r\n        almacen_existente, \r\n        setAlmacenExistente,\r\n        unidadVentaSecundaria, \r\n        setUnidadVentaSecundaria\r\n      }}\r\n    >\r\n      {children}\r\n    </RegProductoContext.Provider>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const EmpresaContext = createContext();\r\n\r\nexport const EmpresaProvider = ({ children }) => {\r\n   \r\n\tconst [ empresa, setEmpresa ] = useState({\r\n\t\tnombre_empresa:'',\r\n        nombre_dueno:'',\r\n\t\ttelefono_dueno:'',\r\n\t\tcelular:'',\r\n\t\tcorreo_empresa:'',\r\n        nombre_fiscal:'',\r\n        rfc:'',\r\n        regimen_fiscal:'',\r\n        curp:'',\r\n        info_adicio:'',\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n        direccionFiscal: {\r\n            calle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n        },\r\n        datosBancarios:{\r\n            cuenta: '',\r\n            sucursal: '',\r\n            clave_banco: ''\r\n        },\r\n\t\timagen: null\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<EmpresaContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tempresa,\r\n\t\t\t\tsetEmpresa,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</EmpresaContext.Provider>\r\n\t);\r\n};","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\"\r\n  },\r\n}));\r\n\r\nexport default function BackdropComponent({loading, setLoading}) {\r\n  const classes = useStyles();\r\n\r\n  /* const handleClose = () => {\r\n    setLoading(false);\r\n  }; */\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={loading} /* onClick={handleClose} */>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorPage({ error, altura}) {\r\n\tlet height = altura\r\n\tif(!height) height = 400;\r\n\treturn (\r\n\t\t<Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height={height}>\r\n\t\t\t<ErrorOutlineIcon style={{ fontSize: 100, color: 'rgba(17,85,204, 0.7)' }} />\r\n\t\t\t<Typography align=\"center\" style={{ fontSize: 18, color: 'rgba(17,85,204)' }}>\r\n\t\t\t\tHubo un problema\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nexport const OBTENER_DATOS_EMPRESA = gql`\r\n  query obtenerEmpresa($id: ID!) {\r\n    obtenerEmpresa(id: $id) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      fecha_registro_sello_sat\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n      vender_sin_inventario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_EMPRESA = gql`\r\n  mutation actualizarEmpresa($id: ID!, $input: EditarEmpresa) {\r\n    actualizarEmpresa(id: $id, input: $input) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Container,\r\n  FormControlLabel,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, DialogActions } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& .requerido\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"150px\",\r\n    height: \"150px\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function MisDatos(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { empresa, update, setEmpresa, setUpdate } = useContext(EmpresaContext);\r\n\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  const [empresaDatos, setEmpresaDatos] = useState({\r\n    nombre_empresa: \"\",\r\n    nombre_dueno: \"\",\r\n    telefono_dueno: \"\",\r\n    celular: \"\",\r\n    correo_empresa: \"\",\r\n    valor_puntos: \"\",\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    regimen_fiscal: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n    imagen: null,\r\n    vender_sin_inventario: false,\r\n  });\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [update, refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaDatos({\r\n        nombre_empresa: empresa.nombre_empresa,\r\n        nombre_dueno: empresa.nombre_dueno,\r\n        telefono_dueno: empresa.telefono_dueno,\r\n        celular: empresa.celular,\r\n        valor_puntos: empresa.valor_puntos,\r\n        correo_empresa: empresa.correo_empresa,\r\n        direccion: empresa.direccion,\r\n        imagen: empresa.imagen,\r\n        vender_sin_inventario: empresa.vender_sin_inventario,\r\n      });\r\n    } catch (errorCatch) {\r\n      // console.log(errorCatch)\r\n    }\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaDatos,\r\n        },\r\n      });\r\n      const empresa = { ...sesion.empresa, ...empresaDatos };\r\n      let nueva_sesion = { ...sesion };\r\n      nueva_sesion.empresa = empresa;\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(nueva_sesion));\r\n\r\n      setUpdate(true);\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    try {\r\n      let valor = e.target.value;\r\n      if (e.target.name === \"valor_puntos\") {\r\n        valor = parseFloat(valor);\r\n      }\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        [e.target.name]: valor,\r\n      });\r\n    } catch (error) {}\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      direccion: { ...empresaDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [empresaDatos, setEmpresaDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const removerImagen = () => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const handleChangeVenderInventario = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      vender_sin_inventario: e.target.checked,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n      {errorPage ? (\r\n        <ErrorPage error={errorPage} />\r\n      ) : (\r\n        <Container style={{ marginTop: 8 }}>\r\n          <Grid container spacing={3} className={classes.require}>\r\n            <Grid\r\n              item\r\n              md={2}\r\n              xs={12}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <Box>\r\n                <Box className={classes.avatarContainer} {...getRootProps()}>\r\n                  <input {...getInputProps()} />\r\n                  {preview ? (\r\n                    <Avatar className={classes.avatar} src={`${preview}`} />\r\n                  ) : (\r\n                    <Avatar\r\n                      className={classes.avatar}\r\n                      src={`${empresaDatos.imagen}`}\r\n                    />\r\n                  )}\r\n                </Box>\r\n                <Box>\r\n                  <Button\r\n                    color=\"secondary\"\r\n                    size=\"medium\"\r\n                    onClick={removerImagen}\r\n                    startIcon={<DeleteOutlineIcon />}\r\n                  >\r\n                    Remover imagen\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={5} xs={12} className={classes.require}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    <span className=\"requerido\">* </span>Nombre de empresa\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm.error && !empresaDatos.nombre_empresa}\r\n                  name=\"nombre_empresa\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.nombre_empresa\r\n                      ? empresaDatos.nombre_empresa\r\n                      : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm.error &&\r\n                    errorForm.message !== \"El campo nombre es obligatorio\"\r\n                      ? errorForm.message\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    <span className=\"requerido\">* </span>Nombre dueño\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm.error && !empresaDatos.nombre_dueno}\r\n                  name=\"nombre_dueno\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.nombre_dueno ? empresaDatos.nombre_dueno : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm.error &&\r\n                    errorForm.message !== \"El campo nombre es obligatorio\"\r\n                      ? errorForm.message\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Teléfono</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"telefono_dueno\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.telefono_dueno\r\n                      ? empresaDatos.telefono_dueno\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={5} xs={12}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Celular</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"celular\"\r\n                  variant=\"outlined\"\r\n                  value={empresaDatos.celular ? empresaDatos.celular : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>E-mail</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"correo_empresa\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.correo_empresa\r\n                      ? empresaDatos.correo_empresa\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item md={4}>\r\n                    <Typography>\r\n                      <b>Valor de puntos</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      inputMode=\"numeric\"\r\n                      type=\"number\"\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"valor_puntos\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.valor_puntos\r\n                          ? empresaDatos.valor_puntos\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    md={8}\r\n                    style={{ display: \"flex\", alignItems: \"center\" }}\r\n                  >\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          disabled={bloqueo}\r\n                          checked={empresaDatos.vender_sin_inventario}\r\n                          onChange={handleChangeVenderInventario}\r\n                          name=\"checkedA\"\r\n                        />\r\n                      }\r\n                      label=\"Vender productos sin inventario\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Box mt={3} mb={2}>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Domicilio empresa</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={3} className={classes.require}>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Calle</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"calle\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.calle\r\n                      ? empresaDatos.direccion.calle\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Num. Ext</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_ext\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.no_ext\r\n                      ? empresaDatos.direccion.no_ext\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Num. Int</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_int\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.no_int\r\n                      ? empresaDatos.direccion.no_int\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>C.P.</b>{\" \"}\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"codigo_postal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.codigo_postal\r\n                      ? empresaDatos.direccion.codigo_postal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Colonia</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"colonia\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.colonia\r\n                      ? empresaDatos.direccion.colonia\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Municipio</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"municipio\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.municipio\r\n                      ? empresaDatos.direccion.municipio\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Localidad</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"localidad\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.localidad\r\n                      ? empresaDatos.direccion.localidad\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Estado</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"estado\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.estado\r\n                      ? empresaDatos.direccion.estado\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Pais</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"pais\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.pais\r\n                      ? empresaDatos.direccion.pais\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n            <DialogActions\r\n              style={{ marginTop: 15, width: \"100%\", justifyContent: \"center\" }}\r\n            >\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                onClick={() => actEmp()}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </DialogActions>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport const usosCfdi = [\r\n  {\r\n    Value: \"G01\",\r\n    Name: \"Adquisición de mercancías\",\r\n  },\r\n  {\r\n    Value: \"G02\",\r\n    Name: \"Devoluciones, descuentos o bonificaciones\",\r\n  },\r\n  {\r\n    Value: \"G03\",\r\n    Name: \"Gastos en general\",\r\n  },\r\n  {\r\n    Value: \"I01\",\r\n    Name: \"Construcciones\",\r\n  },\r\n  {\r\n    Value: \"I02\",\r\n    Name: \"Mobiliario y equipo de oficina por inversiones\",\r\n  },\r\n  {\r\n    Value: \"I03\",\r\n    Name: \"Equipo de transporte\",\r\n  },\r\n  {\r\n    Value: \"I04\",\r\n    Name: \"Equipo de cómputo y accesorios\",\r\n  },\r\n  {\r\n    Value: \"I05\",\r\n    Name: \"Dados, troqueles, moldes, matrices y herramental\",\r\n  },\r\n  {\r\n    Value: \"I06\",\r\n    Name: \"Comunicaciones telefónicas\",\r\n  },\r\n  {\r\n    Value: \"I07\",\r\n    Name: \"Comunicaciones satelitales\",\r\n  },\r\n  {\r\n    Value: \"I08\",\r\n    Name: \"Otra maquinaria y equipo\",\r\n  },\r\n  {\r\n    Value: \"D01\",\r\n    Name: \"Honorarios médicos, dentales y gastos hospitalarios\",\r\n  },\r\n  {\r\n    Value: \"D02\",\r\n    Name: \"Gastos médicos por incapacidad o discapacidad\",\r\n  },\r\n  {\r\n    Value: \"D03\",\r\n    Name: \"Gastos funerales.\",\r\n  },\r\n  {\r\n    Value: \"D04\",\r\n    Name: \"Donativos\",\r\n  },\r\n  {\r\n    Value: \"D05\",\r\n    Name:\r\n      \"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).\",\r\n  },\r\n  {\r\n    Value: \"D06\",\r\n    Name: \"Aportaciones voluntarias al SAR.\",\r\n  },\r\n  {\r\n    Value: \"D07\",\r\n    Name: \"Primas por seguros de gastos médicos.\",\r\n  },\r\n  {\r\n    Value: \"D08\",\r\n    Name: \"Gastos de transportación escolar obligatoria.\",\r\n  },\r\n  {\r\n    Value: \"D09\",\r\n    Name:\r\n      \"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.\",\r\n  },\r\n  {\r\n    Value: \"D10\",\r\n    Name: \"Pagos por servicios educativos (colegiaturas)\",\r\n  },\r\n  {\r\n    Value: \"P01\",\r\n    Name: \"Por definir\",\r\n  },\r\n];\r\nexport const tiposCfdi = [\r\n  {\r\n    NameId: 1,\r\n    Name: \"Factura\",\r\n    Value: \"I\",\r\n  },\r\n  {\r\n    NameId: 2,\r\n    Name: \"Nota de Crédito\",\r\n    Value: \"E\",\r\n  },\r\n  {\r\n    NameId: 14,\r\n    Name: \"Complemento de pago\",\r\n    Value: \"P\",\r\n  },\r\n];\r\nexport const tipoCambio = [\r\n  {\r\n    Value: \"MXN\",\r\n    Name: \"Peso Mexicano\",\r\n  },\r\n  {\r\n    Value: \"EUR\",\r\n    Name: \"Euro\",\r\n  },\r\n  {\r\n    Value: \"USD\",\r\n    Name: \"Dolar Americano\",\r\n  },\r\n];\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Dinero electrónico\",\r\n    Value: \"06\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  /* {\r\n        Name: \"Dación en pago\",\r\n        Value: \"12\"\r\n    },\r\n    {\r\n        Name: \"Pago por subrogación\",\r\n        Value: \"13\"\r\n    },\r\n    {\r\n        Name: \"Pago por consignación\",\r\n        Value: \"14\"\r\n    },\r\n    {\r\n        Name: \"Condonación\",\r\n        Value: \"15\"\r\n    },\r\n    {\r\n        Name: \"Compensación\",\r\n        Value: \"17\"\r\n    },\r\n    {\r\n        Name: \"Novación\",\r\n        Value: \"23\"\r\n    },\r\n    {\r\n        Name: \"Confusión\",\r\n        Value: \"24\"\r\n    },\r\n    {\r\n        Name: \"Remisión de deuda\",\r\n        Value: \"25\"\r\n    },\r\n    {\r\n        Name: \"Prescripción o caducidad\",\r\n        Value: \"26\"\r\n    },\r\n    {\r\n        Name: \"A satisfacción del acreedor\",\r\n        Value: \"27\"\r\n    }, */\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  /* {\r\n        Name: \"Tarjeta de servicios\",\r\n        Value: \"29\"\r\n    }, */\r\n  {\r\n    Name: \"Aplicación de anticipos\",\r\n    Value: \"30\",\r\n  },\r\n  /* {\r\n        Name: \"Intermediarios\",\r\n        Value: \"31\"\r\n    }, */\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];\r\nexport const metodoPago = [\r\n  {\r\n    Value: \"PPD\",\r\n    Name: \"Pago en parcialidades ó diferido\",\r\n  },\r\n  {\r\n    Value: \"PUE\",\r\n    Name: \"Pago en una sola exhibición\",\r\n  },\r\n];\r\nexport const regimenFiscal = [\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"General de Ley Personas Morales\",\r\n    Value: \"601\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Personas Morales con Fines no Lucrativos\",\r\n    Value: \"603\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sueldos y Salarios e Ingresos Asimilados a Salarios\",\r\n    Value: \"605\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Arrendamiento\",\r\n    Value: \"606\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Régimen de Enajenación o Adquisición de Bienes\",\r\n    Value: \"607\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Demás ingresos\",\r\n    Value: \"608\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name:\r\n      \"Residentes en el Extranjero sin Establecimiento Permanente en México\",\r\n    Value: \"610\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por Dividendos (socios y accionistas)\",\r\n    Value: \"611\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Personas Físicas con Actividades Empresariales y Profesionales\",\r\n    Value: \"612\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por intereses\",\r\n    Value: \"614\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Régimen de los ingresos por obtención de premios\",\r\n    Value: \"615\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sin obligaciones fiscales\",\r\n    Value: \"616\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name:\r\n      \"Sociedades Cooperativas de Producción que optan por diferir sus ingresos\",\r\n    Value: \"620\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Incorporación Fiscal\",\r\n    Value: \"621\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name: \"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras\",\r\n    Value: \"622\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Opcional para Grupos de Sociedades\",\r\n    Value: \"623\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Coordinados\",\r\n    Value: \"624\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas\",\r\n    Value: \"625\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Hidrocarburos\",\r\n    Value: \"628\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales\",\r\n    Value: \"629\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Enajenación de acciones en bolsa de valores\",\r\n    Value: \"630\",\r\n  },\r\n];\r\n\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_FACTURA = gql`\r\n  mutation crearFactura($input: CrearFacturaInput) {\r\n    crearFactura(input: $input) {\r\n      message\r\n      success\r\n      pdf\r\n      xml\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SERIE = gql`\r\n  mutation crearSerieCFDI($input: CrearSerieCfdiInput!) {\r\n    crearSerieCFDI(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEFAULT_SERIE = gql`\r\n  mutation modificarDefaultSerie($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    modificarDefaultSerie(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SERIE = gql`\r\n  mutation eliminarSerie($id: ID!) {\r\n    eliminarSerie(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_SERIES = gql`\r\n  query obtenerSeriesCdfi($empresa: ID!, $sucursal: ID!) {\r\n    obtenerSeriesCdfi(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n      success\r\n      seriesCfdi {\r\n        _id\r\n        serie\r\n        folio\r\n        default\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SELLO_CFDI = gql`\r\n  mutation crearCSDS($input: CrearCSDSInput!) {\r\n    crearCSDS(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SELLO_CFDI = gql`\r\n  mutation eliminarCSD($rfc: String, $empresa: ID!) {\r\n    eliminarCSD(rfc: $rfc, empresa: $empresa) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CATALOGOS_SAT_API = gql`\r\n  query obtenerCatalogosSAT($input: CrearFacturaInput!) {\r\n    obtenerCatalogosSAT(input: $input) {\r\n      message\r\n      currencies {\r\n        Decimals\r\n        PrecisionRate\r\n        Name\r\n        Value\r\n      }\r\n      paymentForms {\r\n        Name\r\n        Value\r\n      }\r\n      paymentMethods {\r\n        Name\r\n        Value\r\n      }\r\n      fiscalRegimens {\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n      cfdiTypes {\r\n        NameId\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_SERVICIOS_SAT_API = gql`\r\n  query obtenerProductosOServicios($input: CrearFacturaInput!) {\r\n    obtenerProductosOServicios(input: $input) {\r\n      message\r\n      productosOServicios {\r\n        DangerousMaterial\r\n        Complement\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_POSTAL_CODES_SAT_API = gql`\r\n  query obtenerCodigoPostal($input: CrearFacturaInput!) {\r\n    obtenerCodigoPostal(input: $input) {\r\n      message\r\n      codigoPostal {\r\n        StateCode\r\n        MunicipalityCode\r\n        LocationCode\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CFDIU_USES_SAT_API = gql`\r\n  query obtenerCfdiUses($input: CrearFacturaInput!) {\r\n    obtenerCfdiUses(input: $input) {\r\n      message\r\n      cfdiUses {\r\n        message\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_FACTURAS_REALIZADAS = gql`\r\n  query obtenerFacturas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtros: filtrosFactura\r\n  ) {\r\n    obtenerFacturas(empresa: $empresa, sucursal: $sucursal, filtros: $filtros) {\r\n      id_cfdi\r\n      serie\r\n      currency\r\n      expedition_place\r\n      folio\r\n      cfdi_type\r\n      payment_form\r\n      payment_method\r\n      logo_url\r\n      date\r\n      issuer {\r\n        FiscalRegime\r\n        Rfc\r\n        TaxName\r\n      }\r\n      receiver {\r\n        Rfc\r\n        Name\r\n        CfdiUse\r\n      }\r\n      items {\r\n        ProductCode\r\n        IdentificationNumber\r\n        Description\r\n        Unit\r\n        UnitCode\r\n        UnitPrice\r\n        Quantity\r\n        Subtotal\r\n        Discount\r\n        Total\r\n      }\r\n      taxes {\r\n        Total\r\n        Name\r\n        Rate\r\n        Type\r\n      }\r\n      complement {\r\n        TaxStamp {\r\n          Uuid\r\n          Date\r\n          CdfiSign\r\n          SatCertNumber\r\n          SatSign\r\n          RfcProvCertif\r\n        }\r\n      }\r\n      original_string\r\n      sub_total\r\n      total\r\n      discount\r\n      fecha_registro\r\n      id_venta\r\n      folio_venta\r\n      complementos{\r\n        id_cfdi\r\n      serie\r\n      currency\r\n      expedition_place\r\n      folio\r\n      cfdi_type\r\n      payment_form\r\n      payment_method\r\n      logo_url\r\n      date\r\n      issuer {\r\n        FiscalRegime\r\n        Rfc\r\n        TaxName\r\n      }\r\n      receiver {\r\n        Rfc\r\n        Name\r\n        CfdiUse\r\n      }\r\n      items {\r\n        ProductCode\r\n        IdentificationNumber\r\n        Description\r\n        Unit\r\n        UnitCode\r\n        UnitPrice\r\n        Quantity\r\n        Subtotal\r\n        Discount\r\n        Total\r\n      }\r\n      taxes {\r\n        Total\r\n        Name\r\n        Rate\r\n        Type\r\n      }\r\n      complement {\r\n        TaxStamp {\r\n          Uuid\r\n          Date\r\n          CdfiSign\r\n          SatCertNumber\r\n          SatSign\r\n          RfcProvCertif\r\n        }\r\n        Payments{\r\n          _id\r\n          RelatedDocuments{\r\n            _id\r\n            Uuid\r\n            Folio\r\n            Currency\r\n            PaymentMethod\r\n            PartialityNumber\r\n            PreviousBalanceAmount\r\n            AmountPaid\r\n            ImpSaldoInsoluto\r\n          }\r\n          Date\r\n          PaymentForm\r\n          Currency\r\n          Amount\r\n          ExpectedPaid\r\n        }\r\n      }\r\n      original_string\r\n      sub_total\r\n      total\r\n      discount\r\n      fecha_registro\r\n      id_venta\r\n      folio_venta\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_DOCUMENTO_FACTURA = gql`\r\n  query obtenerDocumentCfdi($id:String!){\r\n    obtenerDocumentCfdi(id:$id){\r\n      htmlBase64\r\n      pdfBase64\r\n      xmlBase64\r\n    }\r\n  }\r\n`;","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  CloudUpload,\r\n  Done,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function RegistroSellos({\r\n  datosEmpresa,\r\n  firma_disabled,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    certificate: \"\",\r\n    private_key: \"\",\r\n    private_key_password: \"\",\r\n    rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      certificate: \"\",\r\n      private_key: \"\",\r\n      private_key_password: \"\",\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n      sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [crearCSDS] = useMutation(CREAR_SELLO_CFDI);\r\n\r\n  const handleClickShowPassword = () => setShow(!show);\r\n  const handleMouseDownPassword = (event) => event.preventDefault();\r\n\r\n  const obtenerFiles = (e) => {\r\n    const { name, files } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: files[0],\r\n    });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      private_key_password: e.target.value,\r\n    });\r\n  };\r\n\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve) => {\r\n      let baseURL = \"\";\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        baseURL = reader.result;\r\n        resolve(baseURL);\r\n      };\r\n    });\r\n  };\r\n\r\n  const guardarBD = async () => {\r\n    if (\r\n      !datos.certificate ||\r\n      !datos.private_key ||\r\n      !datos.private_key_password ||\r\n      !datos.rfc\r\n    )\r\n      return;\r\n\r\n    try {\r\n      let data = { ...datos };\r\n      let cer = data.certificate;\r\n      let key = data.private_key;\r\n      await getBase64(cer)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.certificate = base[1];\r\n          data.nombre_cer = cer.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      await getBase64(key)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.private_key = base[1];\r\n          data.nombre_key = key.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setLoading(true);\r\n      const result = await crearCSDS({\r\n        variables: {\r\n          input: {\r\n            certificate: data.certificate,\r\n            private_key: data.private_key,\r\n            private_key_password: data.private_key_password,\r\n            rfc: data.rfc,\r\n            empresa: data.empresa,\r\n            sucursal: data.sucursal,\r\n            nombre_cer: data.nombre_cer,\r\n            nombre_key: data.nombre_key,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearCSDS.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<Add />}\r\n          disabled={firma_disabled}\r\n        >\r\n          Agregar CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Registrar firma digital</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            {datosEmpresa.rfc ? (\r\n              <Typography>{`RFC: ${datosEmpresa.rfc}`}</Typography>\r\n            ) : (\r\n              <Typography color=\"error\">\r\n                *No tienes registrado un RFC\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              Archivo *.cer <b>Certificado de la firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.certificate ? datos.certificate.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-cer-sello-digital\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".cer\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-cer-sello-digital\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"certificate\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" mt={2}>\r\n            <Typography>\r\n              Archivo *.key <b>Llave Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.private_key ? datos.private_key.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-key-llave_privada\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".key\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-key-llave_privada\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"private_key\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" my={2}>\r\n            <Typography>\r\n              Contraseña de la llave <b>Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                type={show ? \"text\" : \"password\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"private_key_password\"\r\n                onChange={obtenerDatos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        onClick={handleClickShowPassword}\r\n                        onMouseDown={handleMouseDownPassword}\r\n                        edge=\"end\"\r\n                      >\r\n                        {show ? <Visibility /> : <VisibilityOff />}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => guardarBD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { Close, DeleteOutline } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSellos({ datosEmpresa, refetch }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    rfc: datosEmpresa && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [eliminarCSD] = useMutation(ELIMINAR_SELLO_CFDI);\r\n\r\n  const eliminarSelloCSD = async () => {\r\n    if (!datos.rfc) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await eliminarCSD({\r\n        variables: {\r\n          rfc: datos.rfc,\r\n          empresa: datos.empresa,\r\n        },\r\n      });\r\n\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCSD.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<DeleteOutline />}\r\n        >\r\n          Remover CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Eliminar Firma Digital</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Se eliminara el CSD registrado con el RFC ${datosEmpresa.rfc}`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} /> : <DeleteOutline />\r\n            }\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            onClick={() => eliminarSelloCSD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Container,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, DialogActions } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { regimenFiscal } from \"../../Facturacion/catalogos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport RegistroSellos from \"../../Facturacion/CFDISellos/RegistrarSellos\";\r\nimport EliminarSellos from \"../../Facturacion/CFDISellos/EliminarCSD\";\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function InformacionFiscal(props) {\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? true : false\r\n  );\r\n  const { empresa, setEmpresa } = useContext(EmpresaContext);\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n  const [firma_disabled, setFirmaDisabled] = useState(false);\r\n  const [empresaFiscal, setEmpresaFiscal] = useState({\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    regimen_fiscal: \"\",\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n  });\r\n  /* Queries */\r\n\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n        let new_sesion = sesion;\r\n        new_sesion.empresa = data.obtenerEmpresa;\r\n        localStorage.setItem(\"sesionCafi\", JSON.stringify(new_sesion));\r\n        if (!data.obtenerEmpresa.rfc) {\r\n          setFirmaDisabled(true);\r\n        } else {\r\n          setFirmaDisabled(false);\r\n        }\r\n      }\r\n    } catch (errorCatch) {\r\n      //console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa, sesion]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaFiscal({\r\n        nombre_fiscal: empresa.nombre_fiscal,\r\n        rfc: empresa.rfc,\r\n        curp: empresa.curp,\r\n        fecha_registro_sello_sat: empresa.fecha_registro_sello_sat\r\n          ? moment(empresa.fecha_registro_sello_sat).format(\"DD/MM/YYYY\")\r\n          : \"\",\r\n        info_adicio: empresa.info_adicio,\r\n        regimen_fiscal: empresa.regimen_fiscal,\r\n        sello_sat: empresa.sello_sat,\r\n        nombre_cer: empresa.nombre_cer,\r\n        nombre_key: empresa.nombre_key,\r\n        limite_timbres: empresa.limite_timbres,\r\n        timbres_usados: empresa.timbres_usados,\r\n        direccionFiscal: {\r\n          calle: empresa.direccionFiscal.calle,\r\n          no_ext: empresa.direccionFiscal.no_ext,\r\n          no_int: empresa.direccionFiscal.no_int,\r\n          codigo_postal: empresa.direccionFiscal.codigo_postal,\r\n          colonia: empresa.direccionFiscal.colonia,\r\n          municipio: empresa.direccionFiscal.municipio,\r\n          localidad: empresa.direccionFiscal.localidad,\r\n          estado: empresa.direccionFiscal.estado,\r\n          pais: empresa.direccionFiscal.pais,\r\n        },\r\n        datosBancarios: {\r\n          cuenta: empresa.datosBancarios.cuenta,\r\n          sucursal: empresa.datosBancarios.sucursal,\r\n          clave_banco: empresa.datosBancarios.clave_banco,\r\n        },\r\n      });\r\n    } catch (errorCatch) {}\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaFiscal); */\r\n      delete empresaFiscal.fecha_registro_sello_sat;\r\n\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaFiscal,\r\n        },\r\n      });\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoadingPage(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.response) {\r\n        console.log(error.response);\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      direccionFiscal: {\r\n        ...empresaFiscal.direccionFiscal,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n  const obtenerCamposBancarios = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      datosBancarios: {\r\n        ...empresaFiscal.datosBancarios,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n      {errorPage ? (\r\n        <ErrorPage error={errorPage} />\r\n      ) : (\r\n        <Container>\r\n          <Grid container spacing={1}>\r\n            <Grid item md={6} xs={12} className={classes.require}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    {\" \"}\r\n                    <span>* </span>Nombre fiscal\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm.error && !empresaFiscal.nombre_fiscal}\r\n                  name=\"nombre_fiscal\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_fiscal\r\n                      ? empresaFiscal.nombre_fiscal\r\n                      : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm.error &&\r\n                    errorForm.message !== \"El campo nombre es obligatorio\"\r\n                      ? errorForm.message\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>RFC</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"rfc\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.rfc ? empresaFiscal.rfc : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>Régimen fiscal</Typography>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"regimen_fiscal\"\r\n                >\r\n                  <Select\r\n                    value={\r\n                      empresaFiscal.regimen_fiscal\r\n                        ? empresaFiscal.regimen_fiscal\r\n                        : \"\"\r\n                    }\r\n                    name=\"regimen_fiscal\"\r\n                    onChange={obtenerCampos}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>Selecciona uno</em>\r\n                    </MenuItem>\r\n                    {regimenFiscal.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>CURP</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled={bloqueo}\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"curp\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.curp ? empresaFiscal.curp : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Info. Adicional</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled={bloqueo}\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"info_adicio\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.info_adicio ? empresaFiscal.info_adicio : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                  multiline\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.subtitle}>\r\n                <b>Firma digital</b>\r\n              </Typography>\r\n              <Divider />\r\n              <Box m={1}>\r\n                {empresaFiscal.sello_sat === true ? (\r\n                  <Alert\r\n                    severity=\"success\"\r\n                    action={\r\n                      <EliminarSellos\r\n                        firma_disabled={firma_disabled}\r\n                        datosEmpresa={empresaFiscal}\r\n                        refetch={refetch}\r\n                      />\r\n                    }\r\n                  >\r\n                    <AlertTitle>Firma Digital Activa</AlertTitle>\r\n                  </Alert>\r\n                ) : (\r\n                  <Alert\r\n                    severity=\"info\"\r\n                    action={\r\n                      <RegistroSellos\r\n                        firma_disabled={firma_disabled}\r\n                        datosEmpresa={empresaFiscal}\r\n                        refetch={refetch}\r\n                      />\r\n                    }\r\n                  >\r\n                    <AlertTitle>Sin Firma Digital</AlertTitle>\r\n                    Sin esta firma no prodrás realizar facturas\r\n                    {firma_disabled ? (\r\n                      <li>Necesitas tener un RFC registrado</li>\r\n                    ) : null}\r\n                  </Alert>\r\n                )}\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Archivo *.cer</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_cer ? empresaFiscal.nombre_cer : \"\"\r\n                  }\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Archivo *.key</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_key ? empresaFiscal.nombre_key : \"\"\r\n                  }\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Fecha de registro</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.fecha_registro_sello_sat}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Box>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Calle</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"calle\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.calle\r\n                      ? empresaFiscal.direccionFiscal.calle\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Num. Ext</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_ext\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.no_ext\r\n                      ? empresaFiscal.direccionFiscal.no_ext\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Num. Int</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_int\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.no_int\r\n                      ? empresaFiscal.direccionFiscal.no_int\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>C.P.</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"codigo_postal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.codigo_postal\r\n                      ? empresaFiscal.direccionFiscal.codigo_postal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Colonia</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"colonia\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.colonia\r\n                      ? empresaFiscal.direccionFiscal.colonia\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Municipio</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"municipio\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.municipio\r\n                      ? empresaFiscal.direccionFiscal.municipio\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Localidad</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"localidad\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.localidad\r\n                      ? empresaFiscal.direccionFiscal.localidad\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Estado</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"estado\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.estado\r\n                      ? empresaFiscal.direccionFiscal.estado\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Pais</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"pais\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.pais\r\n                      ? empresaFiscal.direccionFiscal.pais\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Box mt={1}>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Datos bancarios</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Cuenta</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"cuenta\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.cuenta\r\n                      ? empresaFiscal.datosBancarios.cuenta\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Sucursal</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"sucursal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.sucursal\r\n                      ? empresaFiscal.datosBancarios.sucursal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Clave de banco</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"clave_banco\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.clave_banco\r\n                      ? empresaFiscal.datosBancarios.clave_banco\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          {sesion.accesos.mi_empresa.informacion_fiscal.editar ===\r\n          false ? null : (\r\n            <DialogActions\r\n              m={2}\r\n              style={{ marginTop: 10, width: \"100%\", justifyContent: \"center\" }}\r\n            >\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                onClick={() => actEmp()}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </DialogActions>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {  DialogContent, Button, Box, Dialog, Slide, Typography, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport MisDatos from './Datos/MisDatos';\r\nimport InformacionFiscal from './InformacionFiscal/InformacionFiscal';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n \r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function MiEmpresa() {\r\n  const classes = useStyles();\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [open, setOpen] = useState(false);\r\n\t\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    \r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\t\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const RenderViews = () => {\r\n    switch (value) {\r\n      case 1:\r\n        return(<InformacionFiscal setOpen={setOpen} />);\r\n      default:\r\n        return(<MisDatos setOpen={setOpen} />);\r\n    }\r\n  }\r\n  \r\n\treturn (\r\n\t\t<div>\r\n    <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de empresa\r\n        </Box>\r\n      </Button>\r\n        <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n          <Box >\r\n            <Tabs\r\n              indicatorColor=\"primary\"\r\n              value={value}\r\n              onChange={handleChange}\r\n              aria-label=\"simple tabs example\"\r\n              centered\r\n            >\r\n              <Tab label=\"Datos empresa\" value={0} />\r\n              <Tab label=\"Datos fiscales\" value={1} />\r\n            </Tabs>\r\n          </Box>\r\n          <DialogContent>  \r\n            <RenderViews />\r\n          </DialogContent>\r\n      </Dialog>  \r\n      \r\n     \r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_SUCURSALES = gql`\r\n    query ObtenerSucursalesEmpresa($id: ID!){\r\n        obtenerSucursalesEmpresa(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const OBTENER_DATOS_SUCURSAL = gql`\r\n    query obtenerDatosSucursal($id: ID!){\r\n        obtenerDatosSucursal(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const ACTUALIZAR_SUCURSAL = gql`\r\n  mutation editarSucursal($id: ID!, $input: EditarSucursal) {\r\n    editarSucursal(id: $id, input: $input) {\r\n         _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_MOVIMIENTO_CUENTA = gql`\r\n    mutation CrearMovimientoCuenta($input: CrearMovimientoCuentaInput, $empresa: ID!, $sucursal: ID!, $tipo: Boolean){\r\n        crearMovimientoCuenta(input: $input, empresa: $empresa, sucursal: $sucursal, tipo: $tipo){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CUENTAS = gql`\r\n    query ObtenerHistorialCuenta($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialCuenta, $tipo: Boolean){\r\n        obtenerHistorialCuenta(empresa: $empresa, sucursal: $sucursal, input: $input, tipo: $tipo){\r\n            saldo_en_caja\r\n            movimientos {\r\n                tipo_movimiento\r\n                id_usuario\r\n                numero_caja\r\n                id_Caja\r\n                numero_usuario_creador\r\n                nombre_usuario_creador\r\n                horario_turno\r\n                concepto\r\n                comentarios\r\n                montos_en_caja { \r\n                    monto_efectivo{\r\n                        monto \r\n                    }\r\n                }\r\n                fecha_movimiento{\r\n                    completa\r\n                }\r\n               \r\n                empresa\r\n                sucursal \r\n            }            \r\n        }\r\n    }\r\n`;","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  OBTENER_DATOS_SUCURSAL,\r\n  ACTUALIZAR_SUCURSAL,\r\n} from \"../../../../gql/Empresa/sucursales\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DatosSucursal() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarSucursal] = useMutation(ACTUALIZAR_SUCURSAL);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_SUCURSAL, {\r\n    variables: { id: sesion.sucursal._id },\r\n  });\r\n\r\n  const [sucursalDatos, setSucursalDatos] = useState({\r\n    nombre_sucursal: \"\",\r\n    descripcion: \"\",\r\n    telefono: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setSucursalDatos(data.obtenerDatosSucursal[0]);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setSucursalDatos]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      const {_id, usuario_sucursal, cuenta_sucursal, ...input} = sucursalDatos;\r\n      await actualizarSucursal({\r\n        variables: {\r\n          id: sesion.sucursal._id,\r\n          input,\r\n        },\r\n      });\r\n\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    console.log(e.target.value)\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      direccion: {\r\n        ...sucursalDatos.direccion,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de sucursal\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4} flexdirection=\"row\">\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>\r\n                        <span>* </span>Nombre de sucursal\r\n                      </b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.nombre_sucursal}\r\n                      name=\"nombre_sucursal\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.nombre_sucursal\r\n                          ? sucursalDatos.nombre_sucursal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Descripción</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.descripcion}\r\n                      name=\"descripcion\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.descripcion\r\n                          ? sucursalDatos.descripcion\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  {/*  <Box>\r\n                    <Typography>Teléfono</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.telefono_dueno\r\n                          ? sucursalDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box> */}\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Calle</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.calle\r\n                          ? sucursalDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Num. Ext</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_ext\r\n                          ? sucursalDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Num. Int</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_int\r\n                          ? sucursalDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>C.P.</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.codigo_postal\r\n                          ? sucursalDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Colonia</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.colonia\r\n                          ? sucursalDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Municipio</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.municipio\r\n                          ? sucursalDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Localidad</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.localidad\r\n                          ? sucursalDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Estado</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.estado\r\n                          ? sucursalDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Pais</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.pais\r\n                          ? sucursalDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { EmpresaProvider } from \"../../../context/Catalogos/empresaContext\";\r\nimport MiEmpresa from \"./DatosEmpresa\";\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport Sucursal from \"./Sucursal/DatosSucursal\";\r\n\r\nexport default function Empresa() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  return (\r\n    <div>\r\n      <EmpresaProvider>\r\n        <Grid container spacing={5} justifyContent=\"center\">\r\n          <Grid item lg={2}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <Sucursal />\r\n            </Box>\r\n          </Grid>\r\n          {sesion.accesos.mi_empresa.datos_empresa.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <MiEmpresa />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          {/*    {sesion.accesos.mi_empresa.informacion_fiscal.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <InformacionFiscal />\r\n                            </Box> \r\n                        </Grid>\r\n                    )} */}\r\n        </Grid>\r\n      </EmpresaProvider>\r\n    </div>\r\n  );\r\n}\r\n","export const numerosRandom = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const generateCode = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const generateCodeNumerico = (length) => {\r\n  var result = \"\";\r\n  var characters = \"0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const formatoHora = (hora) => {\r\n  if (!hora) {\r\n    return null;\r\n  } else {\r\n    var newtime = new Date(hora);\r\n    return newtime.toLocaleTimeString(\"en-US\", { hour12: \"false\" });\r\n  }\r\n};\r\n\r\nexport const formatoFecha = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"short\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoFechaCorta = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoMexico = (number) => {\r\n  if (!number) {\r\n    return 0.0;\r\n  } else {\r\n    let nueva;\r\n    if (number % 1 === 0) {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    } else {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    }\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = \"$1,\";\r\n    return nueva.toString().replace(exp, rep);\r\n  }\r\n};\r\n\r\nexport const cleanTypenames = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map(cleanTypenames);\r\n  } else if (value !== null && typeof value === \"object\") {\r\n    const newObject = {};\r\n    for (const property in value)\r\n      if (property !== \"__typename\")\r\n        newObject[property] = cleanTypenames(value[property]);\r\n    return newObject;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nexport const findProductArray = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePrices = async (\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  newPrising = 0\r\n) => {\r\n  let subtotalCalculo = 0,\r\n    totalCalculo = 0,\r\n    impuestoCalculo = 0,\r\n    ivaCalculo = 0,\r\n    iepsCalculo = 0,\r\n    descuentoCalculo = 0,\r\n    monederoCalculo = 0;\r\n  // console.log(\"newPrising\",newPrising);\r\n  const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n  console.log(newP.id_producto.precios.precios_producto[0].precio_venta);\r\n  // console.log(newP);\r\n  const iva_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.iva < 9\r\n          ? `0${newP.id_producto.precios.iva}`\r\n          : newP.id_producto.precios.iva\r\n      }`\r\n    );\r\n\r\n  const ieps_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.ieps < 9\r\n          ? `0${newP.id_producto.precios.ieps}`\r\n          : newP.id_producto.precios.ieps\r\n      }`\r\n    );\r\n\r\n  const precioProducto = newPrising;\r\n  // const precioDescuentoProducto = newP.descuento_activo ? parseFloat(newP.descuento.precio_con_descuento) : 0;\r\n\r\n  totalCalculo =\r\n    granel.granel === true\r\n      ? precioProducto * cantidadNueva * parseFloat(granel.valor)\r\n      : precioProducto * cantidadNueva;\r\n\r\n  subtotalCalculo =\r\n    granel.granel === true\r\n      ? (precioProducto - (iva_producto + ieps_producto)) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (precioProducto - (iva_producto + ieps_producto)) * cantidadNueva;\r\n\r\n  impuestoCalculo =\r\n    granel.granel === true\r\n      ? (iva_producto + ieps_producto) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (iva_producto + ieps_producto) * cantidadNueva;\r\n\r\n  console.log(cantidadNueva);\r\n\r\n  ivaCalculo =\r\n    granel.granel === true\r\n      ? iva_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : iva_producto * cantidadNueva;\r\n\r\n  iepsCalculo =\r\n    granel.granel === true\r\n      ? ieps_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : ieps_producto * cantidadNueva;\r\n\r\n  descuentoCalculo =\r\n    granel.granel === true\r\n      ? newP.descuento_activo === true\r\n        ? parseFloat(newP.descuento.dinero_descontado) *\r\n          cantidadNueva *\r\n          parseFloat(granel.valor)\r\n        : 0\r\n      : newP.descuento_activo === true\r\n      ? parseFloat(newP.descuento.dinero_descontado) * cantidadNueva\r\n      : 0;\r\n\r\n  monederoCalculo = newP.id_producto.precios.monedero\r\n    ? newP.id_producto.precios.monedero_electronico * cantidadNueva\r\n    : 0;\r\n\r\n  return {\r\n    totalCalculo,\r\n    subtotalCalculo,\r\n    impuestoCalculo,\r\n    ivaCalculo,\r\n    iepsCalculo,\r\n    descuentoCalculo,\r\n    monederoCalculo,\r\n  };\r\n};\r\n\r\nexport const calculatePrices2 = async ({\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  origen,\r\n  precio_boolean = false,\r\n  precio,\r\n}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? parseFloat(granel.valor) : 1;\r\n    const precio_actual = precio_boolean\r\n      ? precio\r\n      : newP.descuento_activo\r\n      ? newP.descuento\r\n      : newP.precio_unidad;\r\n    const cantidadCaja =\r\n      precio_actual.unidad_maxima === true ? precio_actual.cantidad_unidads : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    const ob = {\r\n      ivaCalculo: parseFloat(\r\n        (ivaCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      iepsCalculo: parseFloat(\r\n        (iepsCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      impuestoCalculo: parseFloat(\r\n        (impuestoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      subtotalCalculo: parseFloat(\r\n        (subtotalCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      totalCalculo: parseFloat(\r\n        (totalCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      monederoCalculo: parseFloat(\r\n        (monederoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      descuentoCalculo: parseFloat(\r\n        (descuentoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      newP,\r\n    };\r\n    if (origen === \"Ventas1\") {\r\n      newP.cantidad_venta = 1;\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat(\r\n        precio_actual.precio_neto.toFixed(2)\r\n      );\r\n      newP.precio_actual_object = {\r\n        cantidad_unidad: precio_actual.cantidad_unidad\r\n          ? precio_actual.cantidad_unidad\r\n          : 1,\r\n        numero_precio: precio_actual.numero_precio\r\n          ? precio_actual.numero_precio\r\n          : 1,\r\n        unidad_maxima: precio_actual.unidad_maxima\r\n          ? precio_actual.unidad_maxima\r\n          : false,\r\n        precio_general: precio_actual.precio_general\r\n          ? parseFloat(precio_actual.precio_general.toFixed(2))\r\n          : 0,\r\n        precio_neto: precio_actual.precio_neto\r\n          ? parseFloat(precio_actual.precio_neto.toFixed(2))\r\n          : 0,\r\n        precio_venta: precio_actual.precio_venta\r\n          ? parseFloat(precio_actual.precio_venta.toFixed(2))\r\n          : 0,\r\n        iva_precio: precio_actual.iva_precio\r\n          ? parseFloat(precio_actual.iva_precio.toFixed(2))\r\n          : 0,\r\n        ieps_precio: precio_actual.ieps_precio\r\n          ? parseFloat(precio_actual.ieps_precio.toFixed(2))\r\n          : 0,\r\n        utilidad: precio_actual.utilidad ? precio_actual.utilidad : 0,\r\n        porciento: precio_actual.porciento ? precio_actual.porciento : 0,\r\n        dinero_descontado: precio_actual.dinero_descontado\r\n          ? parseFloat(precio_actual.dinero_descontado.toFixed(2))\r\n          : 0,\r\n      };\r\n    } else if (origen === \"Ventas2\") {\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const verifiPrising = async (newP) => {\r\n  try {\r\n    if (!newP) return false;\r\n    const amount = newP.cantidad_venta;\r\n    const pricings = newP.id_producto.precios.precios_producto.filter(\r\n      (p) => p.unidad_mayoreo > 0 && p.precio_neto > 0\r\n    );\r\n\r\n    let finalPrising = {\r\n      found: false,\r\n      pricing: 0,\r\n      number_pricing: 0,\r\n      object_prising: {},\r\n    };\r\n    const datoFinal = pricings.length;\r\n    if (newP.precio_seleccionado) return finalPrising;\r\n    //CONIDICONAR SI EL PRECIO ES MENOR Y MENOR PERO QUE NO SEA MAYOR AL SEGUNDO\r\n    if (amount < newP.id_producto.precios.precios_producto[1].unidad_mayoreo)\r\n      return (finalPrising = {\r\n        found: true,\r\n        pricing: newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.id_producto.precios.precios_producto[0].precio_neto,\r\n        number_pricing:\r\n          newP.id_producto.precios.precios_producto[0].numero_precio,\r\n        object_prising: newP.descuento_activo\r\n          ? newP.descuento\r\n          : newP.id_producto.precios.precios_producto[0],\r\n      });\r\n\r\n    for (let i = 0; i < pricings.length; i++) {\r\n      if (i + 1 === datoFinal && amount >= pricings[i].unidad_mayoreo)\r\n        return (finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i],\r\n        });\r\n\r\n      if (\r\n        i + 1 < datoFinal &&\r\n        amount >= pricings[i].unidad_mayoreo &&\r\n        amount < pricings[i + 1].unidad_mayoreo\r\n      ) {\r\n        finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i],\r\n        };\r\n      }\r\n    }\r\n    return finalPrising;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function formatCurrency(number) {\r\n  var formatted = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n  }).format(number);\r\n  console.log(formatted);\r\n  return formatted;\r\n}\r\n\r\nexport const findProductArrayRefactor = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    //Declarar variables\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n    //Se recorren los productos\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      //Se verifica si tiene codigo de barras ya que no es obligatorio\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const truncteDecimals = (number, digits) => {\r\n  number = parseFloat(number);\r\n  var multiplier = Math.pow(10, 2),\r\n    adjustedNum = number * multiplier,\r\n    truncatedNum = Math[adjustedNum < 0 ? \"ceil\" : \"floor\"](adjustedNum);\r\n  return truncatedNum / multiplier;\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  IconButton,\r\n  InputAdornment,\r\n  OutlinedInput,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { Box, TextField, Typography, Table, Checkbox } from \"@material-ui/core\";\r\nimport { Cached, LocalOffer } from \"@material-ui/icons\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function PreciosDeCompra() {\r\n  const {\r\n    datos_generales,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const descuentoUnidadXdefecto = (descuento_activo) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      descuento_activo,\r\n    });\r\n  };\r\n\r\n  const checkUnidadDefault = (checked) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>Aplicar Descuento</TableCell>\r\n                <TableCell>Unidad Principal</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow /* selected={actualizarUnidad ? true : false} */>\r\n                <TableCell>{datos_generales.codigo_barras}</TableCell>\r\n                <TableCell>{unidadVentaXDefecto.unidad}</TableCell>\r\n                <TableCell>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    {unidadVentaXDefecto.descuento_activo &&\r\n                    unidadVentaXDefecto.descuento_activo !== null ? (\r\n                      <LocalOffer\r\n                        color={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? \"primary\"\r\n                            : \"action\"\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                    <Box mr={1} />\r\n                    <Typography>\r\n                      <b>\r\n                        $\r\n                        {formatoMexico(\r\n                          unidadVentaXDefecto.descuento_activo &&\r\n                            unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento.precio_neto\r\n                            : unidadVentaXDefecto.precio\r\n                        )}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell>{unidadVentaXDefecto.cantidad}</TableCell>\r\n                <TableCell>\r\n                  {unidadVentaXDefecto.descuento_activo &&\r\n                  unidadVentaXDefecto.descuento_activo !== null ? (\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Checkbox\r\n                        checked={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento_activo\r\n                            : false\r\n                        }\r\n                        onChange={(e) =>\r\n                          descuentoUnidadXdefecto(e.target.checked)\r\n                        }\r\n                        inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                        color=\"primary\"\r\n                        disabled={unidadVentaXDefecto.descuento_activo === null}\r\n                      />\r\n                      <Typography color=\"primary\">\r\n                        %\r\n                        {parseFloat(\r\n                          unidadVentaXDefecto.descuento_activo !== null\r\n                            ? unidadVentaXDefecto.descuento.porciento\r\n                            : 0\r\n                        )}\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : null}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={unidadVentaXDefecto.unidad_principal}\r\n                    onChange={(e) => checkUnidadDefault(e.target.checked)}\r\n                    inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n              {datos_generales.tipo_producto !== \"OTROS\" ? null : (\r\n                <UnidadesVentaSecundaria />\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst UnidadesVentaSecundaria = () => {\r\n  const {\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  const [precio, setPrecio] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let price =\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n        ? unidadVentaSecundaria.descuento.precio_neto\r\n        : unidadVentaSecundaria.precio;\r\n\r\n    setPrecio(price);\r\n  }, [unidadVentaSecundaria]);\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const obtenerCantidad = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      cantidad: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n\r\n    if (\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n    ) {\r\n      console.log(\"a\");\r\n      setPrecio(value);\r\n      calcularUnidadDesucuento(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n  };\r\n\r\n  const calcularUnidadDesucuento = (value) => {\r\n    const { cantidad, precio_unidad } = unidadVentaSecundaria;\r\n    if (!value || !cantidad) return;\r\n\r\n    const precio_unit = value / cantidad;\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n    const precio_venta_unit = precio_venta / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(precio_unit / (suma_impuestos + 1));\r\n    let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat(100 - porcentaje);\r\n\r\n    let PVCDSI = parseFloat((precio_venta_unit * porcentaje) / 100);\r\n    let dineroDescontado = parseFloat(precio_venta_unit - PVCDSI);\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n    let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n    let precio_general = parseFloat(precio_neto * cantidad);\r\n\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: parseFloat(precio_general.toFixed(2)),\r\n        precio_neto: parseFloat(precio_general.toFixed(2)),\r\n        precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        porciento: parseFloat(descuento.toFixed(2)),\r\n        dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidadDesucuentoCheck = (boolean) => {\r\n    const { cantidad, precio_unidad, descuento } = unidadVentaSecundaria;\r\n    if (!precio || !cantidad) return;\r\n\r\n    /* const precio_unit = value / cantidad; */\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n\r\n    const precio_venta_unit = precio / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(precio_venta_unit / (suma_impuestos + 1));\r\n    /* let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100)));\r\n    let descuento = parseFloat(((100 - porcentaje))); */\r\n\r\n    let PVCDSI = parseFloat((PVSI * descuento.porciento) / 100);\r\n    let dineroDescontado = parseFloat(PVSI - PVCDSI);\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n    let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n    let precio_general = parseFloat(precio_neto * cantidad);\r\n\r\n    setPrecio(precio_general);\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento_activo: boolean,\r\n      precio,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: parseFloat(precio_general.toFixed(2)),\r\n        precio_neto: parseFloat(precio_general.toFixed(2)),\r\n        precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        porciento: descuento.porciento,\r\n        dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidad = (e) => {\r\n    if (e.target.value === \"\") {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n        precio: 0,\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: true,\r\n      });\r\n      return;\r\n    }\r\n    if (!unidadVentaSecundaria.precio || !unidadVentaSecundaria.cantidad)\r\n      return;\r\n\r\n    const { cantidad } = unidadVentaSecundaria;\r\n\r\n    const { iva, ieps } = precios;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVCI = parseFloat(precio / cantidad);\r\n    let PVSI = parseFloat(PVCI / (suma_impuestos + 1));\r\n\r\n    let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let iva_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let utilidad = parseFloat(((PVSI - PCSI) / PCSI) * 100);\r\n    let precio_venta = PVSI * cantidad;\r\n    let precio_neto = PVCI * cantidad;\r\n\r\n    let unidad_secundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio,\r\n      cantidad,\r\n      precio_unidad: {\r\n        numero_precio: 1,\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        unidad_mayoreo: 0,\r\n        iva_precio: parseFloat((cantidad * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad * ieps_precio).toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        unidad_maxima: true,\r\n        precio_general: precio,\r\n        cantidad_unidad: cantidad,\r\n      },\r\n    };\r\n\r\n    setUnidadVentaSecundaria(unidad_secundaria);\r\n  };\r\n\r\n  const checkUnidadPrincipal = (checked) => {\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (boolean) => {\r\n    let precio = boolean\r\n      ? unidadVentaSecundaria.descuento.precio_neto\r\n      : unidadVentaSecundaria.precio;\r\n    if (boolean) {\r\n      calcularUnidadDesucuentoCheck(boolean);\r\n    } else {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        descuento_activo: boolean,\r\n      });\r\n      setPrecio(precio);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell width={220}>\r\n        <FormControl variant=\"outlined\" size=\"small\" name=\"codigo_barras\">\r\n          <OutlinedInput\r\n            id=\"input-codigo-barras\"\r\n            name=\"codigo_barras\"\r\n            value={unidadVentaSecundaria.codigo_barras}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => GenCodigoBarras()}\r\n                >\r\n                  <Cached />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </TableCell>\r\n      <TableCell>{unidadVentaSecundaria.unidad}</TableCell>\r\n      <TableCell width={200}>\r\n        <TextField\r\n          type=\"number\"\r\n          name=\"precio\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onBlur={(e) => calcularUnidad(e)}\r\n          onChange={obtenerPrecio}\r\n          value={precio}\r\n          disabled={\r\n            unidadVentaSecundaria.descuento_activo !== null &&\r\n            unidadVentaSecundaria.descuento_activo === true\r\n          }\r\n          InputProps={{\r\n            inputProps: { min: 0 },\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {unidadVentaSecundaria.descuento_activo !== null ? (\r\n                  <LocalOffer\r\n                    color={\r\n                      unidadVentaSecundaria.descuento_activo\r\n                        ? \"primary\"\r\n                        : \"disabled\"\r\n                    }\r\n                  />\r\n                ) : null}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Tooltip\r\n          title={<Typography variant=\"subtitle2\">Pz/Kg por Unidad</Typography>}\r\n          placement=\"top\"\r\n          arrow\r\n        >\r\n          <TextField\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            type=\"number\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"cantidad\"\r\n            onBlur={calcularUnidad}\r\n            onChange={obtenerCantidad}\r\n            value={unidadVentaSecundaria.cantidad}\r\n            /* onBlur={(e) => {\r\n              if (e.target.value === \"\") {\r\n                setUnidadVentaSecundaria({\r\n                  ...unidadVentaSecundaria,\r\n                  cantidad: precios.unidad_de_compra.cantidad,\r\n                });\r\n              }\r\n            }} */\r\n          />\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell>\r\n        {unidadVentaSecundaria.descuento_activo !== null ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Checkbox\r\n              checked={\r\n                unidadVentaSecundaria.descuento_activo\r\n                  ? unidadVentaSecundaria.descuento_activo\r\n                  : false\r\n              }\r\n              onChange={(e) => aplicarDescuento(e.target.checked)}\r\n              inputProps={{ \"aria-label\": \"check descuento\" }}\r\n              color=\"primary\"\r\n              disabled={unidadVentaSecundaria.descuento_activo === null}\r\n            />\r\n            <Typography color=\"primary\">\r\n              %\r\n              {parseFloat(\r\n                unidadVentaSecundaria.descuento &&\r\n                  unidadVentaSecundaria.descuento !== null\r\n                  ? unidadVentaSecundaria.descuento.porciento\r\n                  : 0\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <Checkbox\r\n          checked={unidadVentaSecundaria.unidad_principal}\r\n          onChange={(e) => checkUnidadPrincipal(e.target.checked)}\r\n          inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n          disabled={unidadVentaSecundaria.precio === 0}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n  },\r\n  marginInput: {\r\n    marginTop: 19,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function PreciosDeVenta() {\r\n  const { preciosP } = useContext(RegProductoContext);\r\n  let newPreciosP = [...preciosP];\r\n\r\n  return (\r\n    <Fragment>\r\n      {preciosP.map((res, index) => (\r\n        <RenderPreciosP\r\n          key={index}\r\n          data={res}\r\n          index={index}\r\n          newPreciosP={newPreciosP}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderPreciosP = ({ data, index, newPreciosP }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    preciosP,\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setPreciosP,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  let preciosVenta = { ...preciosP[index] };\r\n  const [error, setError] = useState(false);\r\n\r\n  const obtenerUtilidad = (valor_base) => {\r\n    if (!valor_base) {\r\n      preciosVenta.utilidad = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    /* let utilidad = 1; */\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let utilidad = valor_base / 100;\r\n\r\n    const precio_venta = PUCSI * utilidad + PUCSI;\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    const precio_neto = precio_venta + impuestos;\r\n\r\n    preciosVenta.utilidad = parseFloat(valor_base);\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n\r\n    let PUCCI = precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n    if (precio_neto < PUCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n        unidadXDefecto = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerPrecioNeto = (value) => {\r\n    if (!value) {\r\n      /* console.log(value); */\r\n      preciosVenta.precio_neto = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio_neto / (suma + 1)));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    let utilidad_base = ((precio_neto - impuestos - PUCSI) / PUCSI) * 100;\r\n\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    preciosVenta.utilidad = parseFloat(utilidad_base.toFixed(2));\r\n\r\n    let PUCCI = precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n    if (precio_neto < PUCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerMayoreo = (value) => {\r\n    if (!value) {\r\n      preciosVenta.unidad_mayoreo = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n    preciosVenta.unidad_mayoreo = parseInt(value);\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const calculos = () => {\r\n    let { iva, ieps } = precios;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad_base = preciosVenta.utilidad ? preciosVenta.utilidad : 0;\r\n    let utilidad = utilidad_base / 100;\r\n\r\n    //precio venta y neto con utilidad\r\n    const precio_venta = parseFloat((PUCSI * utilidad + PUCSI));\r\n    let iva_precio =\r\n      (precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`));\r\n    let ieps_precio =\r\n      (precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`));\r\n    let impuestos = iva_precio + ieps_precio;\r\n\r\n\r\n    const precio_neto = parseFloat((precio_venta + impuestos));\r\n\r\n    console.log(iva_precio, cantidad_sec, iva_precio*cantidad_sec)\r\n    console.log(cantidad_sec * precio_neto)\r\n\r\n    //meter los valores a preciosVenta\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(((cantidad * precio_neto)).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (preciosVenta.numero_precio === 1) {\r\n      calculos();\r\n    } else if (preciosVenta.numero_precio > 1 && preciosVenta.precio_neto) {\r\n      calculos();\r\n    }\r\n  }, [precios.unidad_de_compra.precio_unitario_con_impuesto]);\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    switch (name) {\r\n      case \"utilidad\":\r\n        if (!value) {\r\n          preciosVenta.utilidad = 0;\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"precio_neto\":\r\n        if (!value) {\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          preciosVenta.utilidad = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"unidad_mayoreo\":\r\n        if (!value) {\r\n          preciosVenta.unidad_mayoreo = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Utilidad</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box minWidth={130}>\r\n          <Typography className={classes.titulos}>\r\n            Precio {data.numero_precio}\r\n          </Typography>\r\n          <Box mb={2} />\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">%</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            value={preciosVenta.utilidad}\r\n            name=\"utilidad\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerUtilidad(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"utilidad\", preciosVenta.utilidad)\r\n            }\r\n            error={preciosVenta.utilidad === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Box\r\n            alignItems=\"flex-end\"\r\n            flexDirection=\"column\"\r\n            display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n          >\r\n            <Typography className={classes.precioTitle}>\r\n              <b>Precio de venta</b>\r\n            </Typography>\r\n            <Typography\r\n              className={classes.precioTitle}\r\n              variant=\"caption\"\r\n              color=\"textSecondary\"\r\n            >\r\n              (precio sin impuestos)\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box pl={1}>\r\n          <Typography>\r\n            <b>${parseFloat(preciosVenta.precio_venta.toFixed(2))}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          flexDirection=\"column\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Precio venta neto</b>\r\n          </Typography>\r\n          <Typography\r\n            className={classes.precioTitle}\r\n            variant=\"caption\"\r\n            color=\"textSecondary\"\r\n          >\r\n            (precio con impuestos)\r\n          </Typography>\r\n        </Box>\r\n        <Box className={data.numero_precio > 1 ? classes.marginInput : \"\"}>\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">$</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            name=\"precio_neto\"\r\n            variant=\"outlined\"\r\n            value={preciosVenta.precio_neto}\r\n            onChange={(e) => obtenerPrecioNeto(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"precio_neto\", preciosVenta.precio_neto)\r\n            }\r\n            error={preciosVenta.precio_neto === \"\" || error}\r\n            helperText={error ? \"Precio menor a costo\" : \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Unidad por mayoreo</b>\r\n          </Typography>\r\n        </Box>\r\n        {data.numero_precio > 1 ? (\r\n          <Box>\r\n            <TextField\r\n              disabled={\r\n                !parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                )\r\n              }\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"unidad_mayoreo\"\r\n              variant=\"outlined\"\r\n              value={preciosVenta.unidad_mayoreo}\r\n              onChange={(e) => obtenerMayoreo(e.target.value)}\r\n              onBlur={() =>\r\n                verificarCampoVacio(\r\n                  \"unidad_mayoreo\",\r\n                  preciosVenta.unidad_mayoreo\r\n                )\r\n              }\r\n              error={preciosVenta.unidad_mayoreo === \"\"}\r\n            />\r\n          </Box>\r\n        ) : null}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","export const unitCodes = [\r\n    {unidad: \"Pz\", codigo_unidad: \"H87\"},\r\n    {unidad: \"Caja\", codigo_unidad: \"XBX\"}\r\n]\r\n\r\nexport const unitCodes_granel = [\r\n  {unidad: \"Kg\", codigo_unidad: \"KGM\"},\r\n  {unidad: \"Lt\", codigo_unidad: \"LTR\"},\r\n  {unidad: \"Costal\", codigo_unidad: \"KGM\"},\r\n]","\r\nexport const calcular_iva = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"iva_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = parseFloat(precio_sin_impuesto) * 0.16;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = 0;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.ieps_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n\r\n  return {\r\n    ...precios,\r\n    iva_activo: name === \"iva_activo\" ? value : precios.iva_activo,\r\n    iva: name === \"iva\" ? parseFloat(value) : value ? 16 : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\nexport const calcular_ieps = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"ieps_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      ieps = parseFloat(precio_sin_impuesto) * precios.ieps;\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      ieps = 0;\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.iva_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n  return {\r\n    ...precios,\r\n    ieps_activo: name === \"ieps_activo\" ? value : precios.ieps_activo,\r\n    ieps: name === \"ieps\" ? parseFloat(value) : value ? precios.ieps : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  TextField,\r\n  MenuItem,\r\n  FormHelperText,\r\n  InputAdornment,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, FormControl, Select } from \"@material-ui/core\";\r\nimport PreciosDeCompra from \"./UnidadesVenta\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport PreciosDeVenta from \"./Precios\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\nimport { calcular_ieps, calcular_iva } from \"../calculos_precios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  required: {\r\n    color: \"red\",\r\n  },\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function RegistroInfoAdidional() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    preciosP,\r\n    update,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* CHECKBOX IVA */\r\n  const obtenerIva = async (e) => {\r\n    if (e.target.name === \"iva\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        iva: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"iva_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_iva(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecioConImpuestoVariable(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuestoVariable(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  /* CHECKBOX IEPS */\r\n  const obtenerIeps = async (e) => {\r\n    if (e.target.name === \"ieps\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        ieps: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"ieps_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_ieps(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecioConImpuestoVariable(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuestoVariable(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  const [precioConImpuesto, setPrecioConImpuesto] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuesto, setPrecioSinImpuesto] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [precioConImpuestoVariable, setPrecioConImpuestoVariable] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuestoVariable, setPrecioSinImpuestoVariable] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [PCI] = useDebounce(precioConImpuestoVariable, 800);\r\n  const [PSI] = useDebounce(precioSinImpuestoVariable, 800);\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioConImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let total_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio con impuesto */\r\n    precio_con_impuesto = parseFloat(value);\r\n    total_impuesto =\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva) +\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_sin_impuesto = parseFloat(value) / parseFloat(total_impuesto + 1);\r\n    iva =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioSinImpuesto(parseFloat(precio_sin_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioSinImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio sin impuesto */\r\n    precio_sin_impuesto = parseFloat(value);\r\n    iva =\r\n      parseFloat((parseFloat(value) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva)).toFixed(2));\r\n    ieps =\r\n      parseFloat((parseFloat(value) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps)).toFixed(2));\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    if (!precios.iva_activo && !precios.ieps_activo) {\r\n      precio_con_impuesto = precio_sin_impuesto /*  / precios.unidad_de_compra.cantidad */;\r\n      precio_unitario_con_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    }\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioConImpuesto(parseFloat(precio_con_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE UNIDAD DE COMPRA */\r\n  const obtenerUnidadCompra = (e, child) => {\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      let precio =\r\n        precios.unidad_de_compra.cantidad * unidadVentaXDefecto.precio;\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad,\r\n          unidad,\r\n          unidad_activa: true,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Caja\" ? \"Pz\" : \"kg\",\r\n          codigo_unidad: unidad === \"Caja\" ? \"H87\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: false,\r\n        });\r\n        /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad,\r\n            codigo_unidad,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: unidad,\r\n            codigo_unidad,\r\n          },\r\n        }); */\r\n      } else {\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Pz\" ? \"Pz\" : unidad === \"Lt\" ? \"Lt \" : \"kg\",\r\n          codigo_unidad:\r\n            unidad === \"Pz\" ? \"H87\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad:\r\n            unidad === \"Pz\" ? \"XBX\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          unidad:\r\n            unidad === \"Pz\" ? \"Caja\" : unidad === \"Caja\" ? \"LTR\" : \"Costal\",\r\n          unidad_activa: false,\r\n          unidad_principal: false,\r\n        });\r\n      }\r\n\r\n      /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad: e.target.value,\r\n            cantidad: 1,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: e.target.value,\r\n          },\r\n        }); */\r\n      setPrecios({\r\n        ...precios,\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad,\r\n          codigo_unidad,\r\n          cantidad: 1,\r\n        },\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n    } else {\r\n      if (!precios.iva_activo && !precios.ieps_activo) {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      } else {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_con_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      }\r\n      if (\r\n        precios.unidad_de_compra.unidad === \"Caja\" ||\r\n        precios.unidad_de_compra.unidad === \"Costal\"\r\n      ) {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          cantidad: parseFloat(e.target.value),\r\n        });\r\n      }\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        cantidad: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioConImpuesto(PCI);\r\n  }, [PCI]);\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioSinImpuesto(PSI);\r\n  }, [PSI]);\r\n\r\n  return (\r\n    <Box>\r\n      <div /* className={classes.input} */>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Impuestos</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.iva_activo}\r\n                        onChange={obtenerIva}\r\n                        name=\"iva_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"iva\"\r\n                id=\"form-producto-iva\"\r\n                variant=\"outlined\"\r\n                value={precios.iva}\r\n                onChange={obtenerIva}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 16,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.iva === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                porcentaje IEPS\r\n              </Typography>\r\n              <TextField\r\n                disabled={!precios.ieps_activo}\r\n                fullWidth\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.ieps_activo}\r\n                        onChange={obtenerIeps}\r\n                        name=\"ieps_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"ieps\"\r\n                id=\"form-producto-ieps\"\r\n                variant=\"outlined\"\r\n                value={precios.ieps}\r\n                onChange={obtenerIeps}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 0,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.ieps === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {/* \r\n          <Grid item md={4} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\" ml={1}>\r\n              <Alert severity=\"info\">Selecciona los impuestos aplicables</Alert>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n        <Box my={3}>\r\n          <Typography>\r\n            <b>Precios y unidad de compra</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                Unidad Compra\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={validacion.error && !precios.unidad_de_compra.unidad}\r\n                >\r\n                  {precios.granel ? (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes_granel.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  )}\r\n                  <FormHelperText>{validacion.message}</FormHelperText>\r\n                </FormControl>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap align=\"center\" className={classes.titulos}>\r\n                Unidad Conversion\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  {precios.unidad_de_compra.unidad === \"Caja\"\r\n                    ? \"Pz\"\r\n                    : precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? \"Kg\"\r\n                    : precios.unidad_de_compra.unidad}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Factor por Unidad\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={\r\n                  precios.unidad_de_compra.unidad === \"Caja\" ||\r\n                  precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? false\r\n                    : true\r\n                }\r\n                type=\"number\"\r\n                InputProps={{ inputProps: { min: 1 } }}\r\n                size=\"small\"\r\n                error={validacion.error && !precios.unidad_de_compra.cantidad}\r\n                name=\"cantidad\"\r\n                id=\"form-producto-cantidad\"\r\n                variant=\"outlined\"\r\n                value={precios.unidad_de_compra.cantidad}\r\n                helperText={validacion.message}\r\n                onChange={obtenerUnidadCompra}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio sin impuestos\r\n              </Typography>\r\n              <TextField\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !precioSinImpuesto}\r\n                name=\"precio_sin_impuesto\"\r\n                id=\"form-producto-precio_sin_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioSinImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => {\r\n                  setPrecioSinImpuesto(e.target.value);\r\n                  setPrecioSinImpuestoVariable(e.target.value);\r\n                }}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioSinImpuesto(\"\");\r\n                    setPrecioSinImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioSinImpuesto(0);\r\n                    setPrecioSinImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio con impuestos\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo && !precios.ieps_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                error={validacion.error && !precioConImpuesto}\r\n                name=\"precio_con_impuesto\"\r\n                id=\"form-producto-precio_con_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioConImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => {\r\n                  setPrecioConImpuesto(e.target.value);\r\n                  setPrecioConImpuestoVariable(e.target.value);\r\n                }}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioConImpuesto(\"\");\r\n                    setPrecioConImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioConImpuesto(0);\r\n                    setPrecioConImpuestoVariable(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={3} />\r\n        <Grid container spacing={2}>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  $ {parseFloat(precios.precio_de_compra.iva.toFixed(2))}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IEPS\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  $ {parseFloat(precios.precio_de_compra.ieps.toFixed(2))}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario sin impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                      precios.unidad_de_compra.precio_unitario_sin_impuesto.toFixed(2)\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario con impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                      precios.unidad_de_compra.precio_unitario_con_impuesto.toFixed(2)\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Precios de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Box display=\"flex\">\r\n          <PreciosDeVenta />\r\n        </Box>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Unidades de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n        <Box>\r\n          <PreciosDeCompra />\r\n        </Box>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\nimport { initial_state_precios } from \"../Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport const ComprasContext = createContext();\r\n\r\nexport const ComprasProvider = ({ children }) => {\r\n  const [datosProducto, setDatosProducto] = useState({\r\n    producto: {},\r\n    costo: 0,\r\n    cantidad: 1,\r\n    cantidad_regalo: 0,\r\n    unidad_regalo: \"\",\r\n    cantidad_total: 0,\r\n    descuento_porcentaje: 0,\r\n    descuento_precio: 0,\r\n    iva_total: 0,\r\n    ieps_total: 0,\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    mantener_precio: true,\r\n    impuestos_descuento: 0,\r\n    subtotal_descuento: 0,\r\n    total_descuento: 0,\r\n  });\r\n\r\n  const [datosCompra, setDatosCompra] = useState({\r\n    productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n  });\r\n\r\n  const [preciosVenta, setPreciosVenta] = useState([\r\n    {\r\n      numero_precio: 1,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 2,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 3,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 4,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 5,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 6,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n  ]);\r\n\r\n  const [productoOriginal, setProductoOriginal] = useState({\r\n    precios: initial_state_precios,\r\n  });\r\n  const [productosCompra, setProductosCompra] = useState([]);\r\n  const [isEditing, setIsEditing] = useState({});\r\n  const [editFinish, setEditFinish] = useState(false);\r\n  const [costo, setCosto] = useState(0);\r\n  const [cantidad, setCantidad] = useState(1);\r\n  const [issue, setIssue] = useState(false);\r\n  const [loadingProductos, setLoadingProductos] = useState(false);\r\n\r\n  return (\r\n    <ComprasContext.Provider\r\n      value={{\r\n        datosProducto,\r\n        setDatosProducto,\r\n        productosCompra,\r\n        setProductosCompra,\r\n        datosCompra,\r\n        setDatosCompra,\r\n        productoOriginal,\r\n        setProductoOriginal,\r\n        preciosVenta,\r\n        setPreciosVenta,\r\n        isEditing,\r\n        setIsEditing,\r\n        editFinish,\r\n        setEditFinish,\r\n        costo,\r\n        setCosto,\r\n        cantidad,\r\n        setCantidad,\r\n        issue,\r\n        setIssue,\r\n        loadingProductos,\r\n        setLoadingProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </ComprasContext.Provider>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { alpha } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) {\r\n  const classes = useStyles();\r\n  const { presentaciones, setPresentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  /* useEffect(() => {\r\n    let nuevo_array = [];\r\n    mostrar_presentaciones.forEach((element) => {\r\n      let obj = {\r\n        codigo_barras: element.codigo_barras,\r\n        cantidad: parseFloat(element.cantidad),\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        color: element.color,\r\n        existencia: element.existencia,\r\n        medida: element.medida,\r\n        nombre_comercial: element.nombre_comercial,\r\n      };\r\n\r\n      if (element.descuento_activo === true) {\r\n        obj.aplicar_descuento = true;\r\n        obj.precio = parseFloat(element.descuento.precio_neto);\r\n      } else {\r\n        obj.aplicar_descuento = false;\r\n        obj.precio = parseFloat(element.precio);\r\n      }\r\n      nuevo_array.push(obj);\r\n    });\r\n    setPresentaciones(nuevo_array);\r\n  }, []); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                {!withoutPrice ? (\r\n                  <Fragment>\r\n                    <TableCell>Precio</TableCell>\r\n                    <TableCell padding=\"checkbox\">Aplicar descuento</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                {!onlyPrice ? (\r\n                  <Fragment>\r\n                    {from && from === \"compra\" ? (\r\n                      <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                    ) : null}\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                    withoutPrice={withoutPrice}\r\n                    onlyPrice={onlyPrice}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_element_presentacion_descuento = {\r\n    ...copy_presentaciones[index].descuento,\r\n  };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.cantidad_nueva) {\r\n      copy_element_presentacion.cantidad_nueva = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      if (value === \"0\") {\r\n        copy_element_presentacion.existencia = false;\r\n      } else {\r\n        copy_element_presentacion.existencia = true;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n    } else if (name === \"cantidad_nueva\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad_nueva = \"\";\r\n        copy_element_presentacion.existencia = copy_producto.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad_nueva = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = precios;\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat(\r\n        precio_neto / (suma_impuestos + 1)\r\n      );\r\n      let iva_precio = parseFloat(\r\n        precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        precio_venta *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(\r\n        (((precio_venta - PUCSI) / PUCSI) * 100)\r\n      );\r\n\r\n      let { descuento_activo, descuento } = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          precio_con_descuento.toFixed(2)\r\n        );\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n        copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n      }\r\n      copy_element_presentacion.precio_unidad.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.utilidad = parseFloat(utilidad.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.descuento_activo = value;\r\n\r\n    let precio_con_descuento = 0;\r\n    let { iva, ieps } = precios;\r\n    let { descuento, precio } = copy_element_presentacion;\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio / (suma + 1)).toFixed(2));\r\n\r\n    if (value) {\r\n      let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n      let new_iva_precio =\r\n        new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n      let new_ieps_precio =\r\n        new_precio_venta_desc *\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let new_impuestos = new_iva_precio + new_ieps_precio;\r\n      precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n    } else {\r\n      precio_con_descuento = precio;\r\n    }\r\n\r\n    copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n      precio_con_descuento.toFixed(2)\r\n    );\r\n    /* copy_element_presentacion.precio = parseFloat(value); */\r\n    copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              presentaciones.length > 0 && !copy_producto.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {presentaciones.length === 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : presentaciones.length > 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      {!withoutPrice ? (\r\n        <Fragment>\r\n          <TableCell width={110} className={classes.input}>\r\n            <Input\r\n              inputRef={textfield}\r\n              onChange={(e) => obtenerDatos(e)}\r\n              disabled={disabledInput}\r\n              value={copy_producto.precio}\r\n              type=\"number\"\r\n              name=\"precio\"\r\n            />\r\n          </TableCell>\r\n          <TableCell width={200}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              {copy_producto.descuento_activo !== undefined &&\r\n              copy_producto.descuento_activo !== null ? (\r\n                <Fragment>\r\n                  <Checkbox\r\n                    checked={\r\n                      copy_producto.descuento_activo === true\r\n                        ? copy_producto.descuento_activo\r\n                        : false\r\n                    }\r\n                    onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                    icon={<LocalOfferOutlined />}\r\n                    checkedIcon={<LocalOffer />}\r\n                    inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                    color=\"primary\"\r\n                    disabled={copy_producto.descuento_activo === null}\r\n                  />\r\n                  <Typography\r\n                    color={\r\n                      copy_producto.descuento_activo === true\r\n                        ? \"primary\"\r\n                        : \"textSecondary\"\r\n                    }\r\n                  >\r\n                    %\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.porciento\r\n                        : 0\r\n                    )}{\" \"}\r\n                    $\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.precio_neto\r\n                        : 0\r\n                    )}\r\n                  </Typography>\r\n                </Fragment>\r\n              ) : null}\r\n            </Box>\r\n          </TableCell>\r\n        </Fragment>\r\n      ) : null}\r\n      {!onlyPrice ? (\r\n        <Fragment>\r\n          {from && from === \"compra\" ? (\r\n            <Fragment>\r\n              <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n              <TableCell padding=\"checkbox\">\r\n                <Input\r\n                  inputRef={textfield}\r\n                  onChange={(e) => obtenerDatos(e)}\r\n                  disabled={disabledInput}\r\n                  value={copy_producto.cantidad_nueva}\r\n                  type=\"tel\"\r\n                  name=\"cantidad_nueva\"\r\n                />\r\n              </TableCell>\r\n            </Fragment>\r\n          ) : (\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.cantidad}\r\n                type=\"tel\"\r\n                name=\"cantidad\"\r\n              />\r\n            </TableCell>\r\n          )}\r\n        </Fragment>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FormularioPrecios from \"../../../Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport { Close, LocalAtm, SquareFoot } from \"@material-ui/icons\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { CircularProgress, DialogTitle } from \"@material-ui/core\";\r\nimport TablaPresentaciones from \"../../../Catalogos/Producto/TallasColores/TablaPresentaciones\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      style={{ height: \"80vh\" }}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function AlertDialogSlide({\r\n  agregarCompra,\r\n  handleClose,\r\n  cargando,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const { datosProducto, productoOriginal /* setDatosProducto */ } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    setUnidadesVenta,\r\n    setPreciosP,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  const resetProducto = () => {\r\n    /* SET STATES WHEN UPDATING */\r\n    const { precios_producto, ...new_precios } = productoOriginal.precios;\r\n    const { unidades_de_venta } = productoOriginal;\r\n    let unidades_secundaria = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    /* setDatosProducto({...datosProducto, mantener_precio: true}) */\r\n    setPrecios(new_precios);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(productoOriginal.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    toggleDrawer();\r\n  };\r\n\r\n  const actualizarContextProducto = () => {\r\n    toggleDrawer();\r\n    let precio_unitario_con_impuesto =\r\n      datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n    let precio_unitario_sin_impuesto =\r\n      precios.precio_de_compra.precio_sin_impuesto /\r\n      precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_con_impuesto: datosProducto.costo,\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        onClick={() => actualizarContextProducto()}\r\n      >\r\n        Actualizar precios\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => resetProducto()}\r\n        aria-labelledby=\"alert-precios-compra-title\"\r\n        aria-describedby=\"alert-precios-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n          <DialogTitle style={{ padding: 0 }}>\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab label=\"Precios\" icon={<LocalAtm />} {...a11yProps(0)} />\r\n                <Tab\r\n                  label=\"Precios Medidas\"\r\n                  icon={<SquareFoot />}\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n            </AppBar>\r\n          </DialogTitle>\r\n        ) : null}\r\n        <DialogContent>\r\n          {datosProducto.producto.datos_generales &&\r\n          datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n            <div>\r\n              <TabPanel value={value} index={0}>\r\n                <FormularioPrecios />\r\n              </TabPanel>\r\n              <TabPanel value={value} index={1}>\r\n                <TablaPresentaciones\r\n                  from=\"compras\"\r\n                  datos={datosProducto.producto}\r\n                  setOnUpdate={setOnUpdate}\r\n                  onUpdate={onUpdate}\r\n                  onlyPrice={true}\r\n                />\r\n              </TabPanel>\r\n            </div>\r\n          ) : (\r\n            <FormularioPrecios />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => resetProducto()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => {\r\n              /* setDatosProducto({...datosProducto, mantener_precio: false}) */\r\n              agregarCompra(\"actualizar_precios\");\r\n              handleClose();\r\n              toggleDrawer();\r\n            }}\r\n            startIcon={\r\n              cargando ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            disabled={!precios.precio_de_compra.precio_con_impuesto}\r\n          >\r\n            Aceptar y agregar compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONSULTAS = gql`\r\n  query obtenerConsultasProducto($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultasProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      categorias {\r\n        _id\r\n        categoria\r\n        subcategorias {\r\n          _id\r\n          subcategoria\r\n        }\r\n      }\r\n      departamentos {\r\n        _id\r\n        nombre_departamentos\r\n      }\r\n      marcas {\r\n        _id\r\n        nombre_marca\r\n      }\r\n      colores {\r\n        _id\r\n        nombre\r\n        hex\r\n      }\r\n      tallas {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      calzados {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      centro_costos {\r\n        _id\r\n        cuenta\r\n        subcuentas {\r\n          _id\r\n          subcuenta\r\n        }\r\n      }\r\n      codigos {\r\n        _id\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO = gql`\r\n  mutation crearProducto($input: CrearProductoInput) {\r\n    crearProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS = gql`\r\n  query obtenerProductos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $almacen: ID\r\n    $existencias: Boolean\r\n  ) {\r\n    obtenerProductos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      almacen: $almacen\r\n      existencias: $existencias\r\n    ) {\r\n      _id\r\n      centro_de_costos {\r\n        id_cuenta\r\n        cuenta\r\n        id_subcuenta\r\n        subcuenta\r\n      }\r\n      unidades_de_venta {\r\n        _id\r\n        precio\r\n        cantidad\r\n        unidad\r\n        codigo_unidad\r\n        unidad_principal\r\n        codigo_barras\r\n        id_producto\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        default\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      empresa\r\n      imagenes {\r\n        location_imagen\r\n        extencion_imagen\r\n        url_imagen\r\n        key_imagen\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          codigo_unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n          codigo_unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n        granel\r\n      }\r\n      medidas_producto {\r\n        _id\r\n        cantidad\r\n        codigo_unidad\r\n        unidad\r\n        almacen\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        codigo_barras\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        existencia\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        nombre_comercial\r\n        precio\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      inventario_general {\r\n        _id\r\n        cantidad_existente\r\n        unidad_inventario\r\n        codigo_unidad\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        id_almacen_general\r\n        eliminado\r\n      }\r\n      medidas_registradas\r\n      sucursal\r\n      usuario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_PRODUCTO = gql`\r\n  mutation actualizarProducto($id: ID!, $input: ActualizarProductoInput) {\r\n    actualizarProducto(id: $id, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_PRODUCTO = gql`\r\n  mutation eliminarProducto($id: ID!) {\r\n    eliminarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PRODUCTOS_ELIMINADOS = gql`\r\n  query obtenerProductosInactivos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerProductosInactivos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      producto {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n      }\r\n      cantidad_existente\r\n      unidad_de_inventario\r\n      id_almacen\r\n      eliminado\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTIVAR_PRODUCTOS = gql`\r\n  mutation activarProducto($id: ID!) {\r\n    activarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO_RAPIDO = gql`\r\n  mutation crearProductoRapido($input: CrearProductoRapidoInput) {\r\n    crearProductoRapido(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_COLOR = gql`\r\n\tmutation crearColor($input: CrearColorInput) {\r\n\t\tcrearColor(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_COLORES = gql`\r\n\tquery obtenerColores($empresa: ID!) {\r\n\t\tobtenerColores(empresa: $empresa) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_COLOR = gql`\r\n\tmutation actualizarColor($input: ActualizarColorInput, $id: ID!) {\r\n\t\tactualizarColor(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_COLOR = gql`\r\n\tmutation eliminarColor($id: ID!) {\r\n\t\teliminarColor(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_COLOR } from \"../../../../../gql/Catalogos/colores\";\r\n\r\nexport default function CrearColorProducto({ refetch }) {\r\n  const [color, setColor] = useState({});\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      return;\r\n    }\r\n    try {\r\n      const colores = values;\r\n      await crearColor({\r\n        variables: {\r\n          input: {\r\n            nombre: colores.nombre,\r\n            hex: colores.hex,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add />\r\n          nuevo color\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        /* onClose={() => toggleModal()} */\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box mt={2}>\r\n              <Typography>Color seleccionado:</Typography>\r\n              {!values.hex ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n                  <Typography color=\"secondary\">NINGUNO</Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box bgcolor={values.hex} height={30} width={220} />\r\n              )}\r\n            </Box>\r\n            <Box my={2}>\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({\r\n                      ...values,\r\n                      nombre: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                  fullWidth\r\n                  focused\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_TALLAS = gql`\r\n\tmutation crearTalla($input: CrearTallaInput) {\r\n\t\tcrearTalla(input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_TALLAS = gql`\r\n\tquery obtenerTallas($empresa: ID!, $tipo: String! ) {\r\n\t\tobtenerTallas(empresa: $empresa, tipo: $tipo) {\r\n\t\t\t_id\r\n\t\t\ttalla\r\n\t\t\ttipo\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_TALLA = gql`\r\n\tmutation actualizarTalla($input: ActualizarTallaInput, $id: ID!) {\r\n\t\tactualizarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_TALLA = gql`\r\n\tmutation eliminarTalla($input: ActualizarTallaInput,$id: ID!) {\r\n\t\teliminarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_TALLAS } from \"../../../../../gql/Catalogos/tallas\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function CrearTallasProducto({\r\n  setMedidasSeleccionadas,\r\n  refetch,\r\n  tipo_producto\r\n}) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = useContext(RegProductoContext);\r\n\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return; \r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      await crearTalla({\r\n        variables: {\r\n          input: {\r\n            talla: nueva_talla,\r\n            tipo: (datos_generales.tipo_producto) ? datos_generales.tipo_producto : tipo_producto,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setMedidasSeleccionadas([nueva_talla]);\r\n      setValue(\"\");\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add /> Nueva talla\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              my={2}\r\n            >\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  id=\"outlined-error-helper-text\"\r\n                  label={\r\n                    datos_generales.tipo_producto === \"ROPA\"\r\n                      ? \"Talla\"\r\n                      : \"Número\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  focused\r\n                  fullWidth\r\n                  value={value}\r\n                  onChange={(e) => setValue(e.target.value.toUpperCase())}\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip, Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CrearColorProducto from \"./crearColor\";\r\nimport CrearTallasProducto from \"./crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  from,\r\n  withoutPrice,\r\n}) {\r\n  const {\r\n    /* almacen_inicial,\r\n    setAlmacenInicial, */\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    /* almacenes, */ colores,\r\n    tallas,\r\n    calzados,\r\n  } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const classes = useStyles();\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    const copy_presentaciones = [...presentaciones];\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      if (element.color._id) colors.push(element.color);\r\n      if (element.medida._id) medidas.push(element.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [presentaciones]);\r\n\r\n  /* const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  }; */\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Box>\r\n        <Grid container spacing={2}>\r\n          {/* {!almacen_existente ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\" >\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                    {presentaciones.length > 0 && !almacen_inicial.almacen ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n                  {from === \"compra\" ? null : (\r\n                    <AlmacenProvider>\r\n                      <ContainerRegistroAlmacen\r\n                        accion=\"registrar\"\r\n                        refetch={refetch}\r\n                      />\r\n                    </AlmacenProvider>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>\r\n                  {datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              <Grid container>\r\n                {medidas.map((talla, index) => (\r\n                  <RenderTallas\r\n                    key={index}\r\n                    talla={talla}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              <Grid container>\r\n                {colores.map((color, index) => (\r\n                  <Colores\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={3} />\r\n        <TablaPresentaciones\r\n          from={from}\r\n          withoutPrice={withoutPrice}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  talla,\r\n  coloresSeleccionados,\r\n  medidasSeleccionadas,\r\n  setMedidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [seleccionarMedidas]);\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: producto_medida,\r\n          color: { nombre: \"\", hex: \"\" },\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: medidas_seleccionadas_temp[k],\r\n            color: array_medidad_finales[i].color,\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              unidad: \"Pz\",\r\n              codigo_unidad: \"H87\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: {},\r\n            color: objeto_presentaciones_final.color,\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    presentaciones,\r\n    setPresentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: {},\r\n          color: producto_color,\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: array_medidad_finales[i].medida,\r\n            color: coloresSeleccionados[k],\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              unidad: \"Pz\",\r\n              codigo_unidad: \"H87\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: objeto_presentaciones_final.medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { Button, CircularProgress, Tooltip } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Done, SquareFoot } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTAS } from \"../../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport TallasProducto from \"../../../Catalogos/Producto/TallasColores/TallasColores\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AlertDialogSlide({verificate, setVerificate}) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datosProducto, datosCompra, setLoadingProductos } = useContext(ComprasContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  /* useEffect(() => {\r\n    if(loading){\r\n      setLoadingProductos(true);\r\n    }else{\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]); */\r\n\r\n  if (loading)\r\n    return (\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        disabled={true}\r\n        startIcon={<CircularProgress size={16} color=\"inherit\" />}\r\n      >\r\n        Medidas\r\n      </Button>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const toggleDrawer = () => {\r\n    setOpen(!open);\r\n    setVerificate(false);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Selecciona medidas y colores\" disableHoverListener={true} open={verificate} placement=\"top\">\r\n        <Button\r\n          color={verificate ? \"secondary\" :\"inherit\"}\r\n          variant=\"outlined\"\r\n          size=\"medium\"\r\n          onClick={() => toggleDrawer()}\r\n          startIcon={<SquareFoot />}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n        >\r\n          Medidas\r\n        </Button>\r\n      </Tooltip>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={toggleDrawer}\r\n        aria-labelledby=\"alert-tallas-compra\"\r\n        aria-describedby=\"alert-tallas-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <DialogContent>\r\n          <TallasProducto\r\n            datos={datosProducto.producto}\r\n            obtenerConsultasProducto={obtenerConsultasProducto}\r\n            refetch={refetch}\r\n            from=\"compra\"\r\n            almacen={datosCompra.almacen}\r\n            withoutPrice={true}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import $ from \"jquery\"\r\nimport jQuery from \"jquery\"\r\n\r\nvar valuesFacturama = {\r\n    token: \"QUJTT0xVQ0lPTkVTOkxlb24yMDE4Iw==\",\r\n    url: \"https://apisandbox.facturama.mx/\"\r\n};\r\n\r\n$.ajaxSetup({\r\n    beforeSend: function (xhr) {\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" + valuesFacturama.token);\r\n    }\r\n});\r\n\r\nfunction facturama() {\r\n\r\n    var settings = {\r\n        url: valuesFacturama.url\r\n    };\r\n\r\n    function retrieve(path, id, callback) {\r\n        return jQuery.get(settings.url + path + '/' + id, undefined, callback, \"json\");\r\n    }\r\n\r\n    function list(path, callback) {\r\n        return jQuery.get(settings.url + path, undefined, callback, \"json\");\r\n    }\r\n\r\n    function listWithParam(path, param, callback) {\r\n        return jQuery.get(settings.url + path + param, undefined, callback, \"json\");\r\n    }\r\n\r\n    function postSyncWithParam(path, param, callback) {\r\n        $.ajax({\r\n            url: settings.url + path + param,\r\n            type: 'POST',\r\n            async: false,\r\n            success: callback\r\n        });\r\n    }\r\n\r\n    function postSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function putSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'PUT',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function deleteSyncWithParam(path, param, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path + '/' + param,\r\n            type: 'DELETE',\r\n            async: false,\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    var facturamaObject = {\r\n        Clients: {\r\n            Get: function (id, callback) {\r\n                return retrieve('client', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('client', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('client', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('client/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('client/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Products: {\r\n            Get: function (id, callback) {\r\n                return retrieve('product', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('product', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('product', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('product/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('product/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        BranchOffice: {\r\n            Get: function (id, callback) {\r\n                return retrieve('branchOffice', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('branchOffice', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('branchOffice', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('branchOffice', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('branchOffice/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Series: {\r\n            List: function (id, callback) {\r\n                return retrieve('serie', id, callback);\r\n            },\r\n            Create: function (idBranch, data, callback, callbackError) {\r\n                postSyncWithData('serie/' + idBranch, data, callback, callbackError);\r\n            },\r\n            Remove: function (idBranch, name, callback, callbackError) {\r\n                deleteSyncWithParam('serie/' + idBranch, name, callback, callbackError);\r\n            },\r\n            Update: function (idBranch, name, data, callback, callbackError) {\r\n                putSyncWithData('serie/' + idBranch + '/' + name, data, callback, callbackError);\r\n            }\r\n        },\r\n        Cfdi: {\r\n            Get: function (id, callback) {\r\n                return retrieve('cfdi', id, callback);\r\n            },\r\n            List: function (param, callback) {\r\n                return listWithParam('cfdi', param, callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('2/cfdis', data, callback, callbackError);\r\n            },\r\n            Send: function (param, callback) {\r\n                postSyncWithParam('cfdi', param, callback);\r\n            },\r\n            Cancel: function (params, callback, callbackError) {\r\n                deleteSyncWithParam('cfdi', params, callback, callbackError);\r\n            },\r\n            Download: function (format, type, id, callback) {\r\n                retrieve('cfdi/' + format + '/' + type, id, callback);\r\n            },\r\n            Acuse: function (format, type, id, callback) {\r\n                retrieve('acuse/' + format + '/' + type, id, callback);\r\n            }\r\n        },\r\n        TaxEntity: {\r\n            Get: function (callback) {\r\n                return list('taxEntity', callback);\r\n            },\r\n            Update: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity', data, callback, callbackError);\r\n            },\r\n            UploadCsd: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadCsd', data, callback, callbackError);\r\n            },\r\n            UploadImage: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadLogo', data, callback, callbackError);\r\n            }\r\n        },\r\n        Catalogs: {\r\n            States: function (country, callback) {\r\n                return list('catalogs/municipalities?countryCode' + country, callback);\r\n            },\r\n            Municipalities: function (state, callback) {\r\n                return list('catalogs/municipalities?stateCode' + state, callback);\r\n            },\r\n            Localities: function (state, callback) {\r\n                return list('catalogs/localities?stateCode' + state, callback);\r\n            },\r\n            Neighborhoods: function (postalCode, callback) {\r\n                return list('catalogs/neighborhoods?postalCode' + postalCode, callback);\r\n            },\r\n            ProductsOrServices: function (keyword, callback) {\r\n                return list('catalogs/ProductsOrServices?keyword=' + keyword, callback);\r\n            },\r\n            PostalCodes: function (keyword, callback) {\r\n                return list('catalogs/PostalCodes?keyword=' + keyword, callback);\r\n            },\r\n            Units: function (callback) {\r\n                return list('catalogs/Units', callback);\r\n            },\r\n            Currencies: function (callback) {\r\n                return list('catalogs/Currencies', callback);\r\n            },\r\n            Countries: function (callback) {\r\n                return list('catalogs/Countries', callback);\r\n            },\r\n            PaymentForms: function (callback) {\r\n                return list('catalogs/PaymentForms', callback);\r\n            },\r\n            PaymentMethods: function (callback) {\r\n                return list('catalogs/PaymentMethods', callback);\r\n            },\r\n            FederalTaxes: function (callback) {\r\n                return list('catalogs/FederalTaxes', callback);\r\n            },\r\n            FiscalRegimens: function (callback) {\r\n                return list('catalogs/FiscalRegimens', callback);\r\n            },\r\n            CfdiTypes: function (callback) {\r\n                return list('catalogs/CfdiTypes', callback);\r\n            },\r\n            RelationTypes: function (callback) {\r\n                return list('catalogs/RelationTypes', callback);\r\n            },\r\n            CfdiUses: function (keyword, callback) {\r\n                return list('catalogs/CfdiUses?keyword=' + keyword, callback);\r\n            }\r\n        }\r\n    };\r\n\r\n    facturamaObject.getToken = function () {\r\n        return \"Basic \" + valuesFacturama.token;\r\n    };\r\n\r\n    facturamaObject.getBaseUri = function () {\r\n        return settings.url;\r\n    };\r\n\r\n    return facturamaObject;\r\n}\r\n\r\n export default facturama()\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CODIGO_PRODUCTO = gql`\r\n  mutation crearCodigoProducto($input: CodigoCatalogoProductoInput) {\r\n    crearCodigoProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CODIGOS_PRODUCTO = gql`\r\n  query obtenerCodigosProducto($empresa: ID!, $sucursal: ID) {\r\n    obtenerCodigosProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      Name\r\n      Value\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CODIGO_PRODUCTO = gql`\r\n  mutation eliminarCodigoProducto($id: ID!) {\r\n    eliminarCodigoProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Close, Done, Search } from \"@material-ui/icons\";\r\nimport {\r\n  CircularProgress,\r\n  IconButton,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport {\r\n  CREAR_CODIGO_PRODUCTO,\r\n  ELIMINAR_CODIGO_PRODUCTO,\r\n} from \"../../../../../gql/CatalogosSat/catalogoProductosSat\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  spin_container: {\r\n    position: \"absolute\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  spin: {\r\n    zIndex: 9999,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CatalogosProductosSAT({ codigos, refetch }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading_save, setLoadingSave] = useState(false);\r\n  const [loading_delete, setLoadingDelete] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState({});\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [crearCodigoProducto] = useMutation(CREAR_CODIGO_PRODUCTO);\r\n  const [eliminarCodigoProducto] = useMutation(ELIMINAR_CODIGO_PRODUCTO);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const limpiarDataModal = () => {\r\n    setSelectedIndex({});\r\n    setProductos([]);\r\n    setBusqueda(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  const [value] = useDebounce(busqueda, 500);\r\n\r\n  const handleOk = async (selectedIndex) => {\r\n    const { Name, Value } = selectedIndex;\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name,\r\n        Value,\r\n      },\r\n    });\r\n    //Crear Codigo product a la BD\r\n    try {\r\n      setLoadingSave(true);\r\n      const result = await crearCodigoProducto({\r\n        variables: {\r\n          input: {\r\n            Name,\r\n            Value,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.crearCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setLoadingSave(false);\r\n        refetch();\r\n        limpiarDataModal();\r\n      }\r\n    } catch (error) {\r\n      setLoadingSave(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarCodigoBD = async (data) => {\r\n    try {\r\n      setLoadingDelete(true);\r\n      const result = await eliminarCodigoProducto({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.eliminarCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosGenerales({\r\n          ...datos_generales,\r\n          clave_producto_sat: {\r\n            Name: \"\",\r\n            Value: \"\",\r\n          },\r\n        });\r\n        setLoadingDelete(false);\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setLoadingDelete(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    limpiarDataModal();\r\n  };\r\n\r\n  const obtenerCampos = (data) => {\r\n    if (!data) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        clave_producto_sat: {\r\n          Name: \"\",\r\n          Value: \"\",\r\n        },\r\n      });\r\n      return null;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name: data.Name,\r\n        Value: data.Value,\r\n      },\r\n    });\r\n  };\r\n\r\n  const buscarCatalogo = async () => {\r\n    if (!value) {\r\n      setProductos([]);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await Facturama.Catalogs.ProductsOrServices(\r\n        value,\r\n        function (result) {\r\n          setProductos(result);\r\n          setLoading(false);\r\n        },\r\n        function (error) {\r\n          if (error && error.responseJSON) {\r\n            setError(error.responseJSON);\r\n          }\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } catch (error) {\r\n      if (error && error.responseJSON) {\r\n        setError(error.responseJSON.Message);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    buscarCatalogo();\r\n  }, [value]);\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography className={classes.titulos}>Clave de producto SAT</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"catalogos-bd-productos\"\r\n          size=\"small\"\r\n          options={codigos}\r\n          disabled={loading_delete}\r\n          getOptionLabel={(option) =>\r\n            option.Name ? `${option.Value} - ${option.Name}` : \"\"\r\n          }\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <Fragment>\r\n                    {loading_delete ? <CircularProgress size={20} /> : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n          renderOption={(option) => (\r\n            <Fragment>\r\n              {`${option.Value} - ${option.Name}`}\r\n              <div style={{ flexGrow: 1 }} />\r\n              <IconButton size=\"small\" onClick={() => eliminarCodigoBD(option)}>\r\n                <Close />\r\n              </IconButton>\r\n            </Fragment>\r\n          )}\r\n          onChange={(_, data) => obtenerCampos(data)}\r\n          getOptionSelected={(option, value) => option.Value === value.Value}\r\n          value={datos_generales.clave_producto_sat}\r\n        />\r\n        <Button color=\"primary\" onClick={handleClickOpen}>\r\n          <Search />\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"alert-dialog-clave-producto\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-clave-producto\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              Catalogo de productos y servicios SAT\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleCancel()}\r\n                size=\"large\"\r\n                disabled={loading_save}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        {loading_save ? (\r\n          <div className={classes.spin_container}>\r\n            <CircularProgress className={classes.spin} size={35} />\r\n          </div>\r\n        ) : null}\r\n        <div\r\n          style={\r\n            loading_save\r\n              ? {\r\n                  pointerEvents: \"none\",\r\n                  opacity: 0.4,\r\n                }\r\n              : null\r\n          }\r\n        >\r\n          <Box p={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              label=\"producto, servicio o giro de la empresa\"\r\n              fullWidth\r\n              size=\"small\"\r\n              onChange={(e) => {\r\n                setBusqueda(e.target.value);\r\n                setError(\"\");\r\n              }}\r\n              value={busqueda}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search color=\"disabled\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              error={error ? true : false}\r\n              helperText={error ? error : \"\"}\r\n            />\r\n            <Box my={1}>\r\n              <Alert severity=\"info\">\r\n                Para seleccionar un cliente haz un doble click!\r\n              </Alert>\r\n            </Box>\r\n          </Box>\r\n\r\n          <DialogContent style={{ height: \"50vh\" }}>\r\n            <Box my={3} className={classes.root}>\r\n              {loading ? (\r\n                <Box\r\n                  display=\"flex\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                  height=\"25vh\"\r\n                >\r\n                  <CircularProgress />\r\n                </Box>\r\n              ) : (\r\n                <List dense component=\"nav\" aria-label=\"main mailbox folders\">\r\n                  {productos.map((res, index) => (\r\n                    <SelectedListItem\r\n                      key={index}\r\n                      producto={res}\r\n                      busqueda={busqueda}\r\n                      handleOk={handleOk}\r\n                      setSelectedIndex={setSelectedIndex}\r\n                      selectedIndex={selectedIndex}\r\n                    />\r\n                  ))}\r\n                </List>\r\n              )}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => handleCancel()}>Cancelar</Button>\r\n          </DialogActions>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectedListItem = ({\r\n  producto,\r\n  busqueda,\r\n  handleOk,\r\n  selectedIndex,\r\n  setSelectedIndex,\r\n}) => {\r\n  const handleListItemClick = (click, data) => {\r\n    setSelectedIndex(data);\r\n    if (click === 2) {\r\n      handleOk(data);\r\n    }\r\n  };\r\n\r\n  const contiene = busqueda.includes(\"potacio\");\r\n  if (producto.Value === \"0\" && !contiene) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ListItem\r\n        button\r\n        selected={selectedIndex.Value === producto.Value}\r\n        onClick={(e) => handleListItemClick(e.detail, producto)}\r\n      >\r\n        <ListItemText primary={`${producto.Value} - ${producto.Name}`} />\r\n      </ListItem>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n \r\nexport const CREAR_CATEGORIA = gql`\r\n\tmutation crearCategoria($input: CrearCategoriasInput) {\r\n\t\tcrearCategoria(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCATEGORIA = gql`\r\n\tmutation crearSubcategoria($idCategoria: ID!, $input: CrearSubcategoriasInput) {\r\n\t\tcrearSubcategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CATEGORIA = gql`\r\n\tmutation actualizarCategoria($idCategoria: ID!, $input: ActualizarCategoriasInput) {\r\n\t\tactualizarCategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCATEGORIA = gql`\r\n\tmutation actualizarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $input: ActualizarSubcategoriasInput) {\r\n\t\tactualizarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n\tquery obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tsubcategorias {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcategoria\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CATEGORIA = gql`\r\n\tmutation eliminarCategoria($idCategoria: ID!) {\r\n\t\teliminarCategoria(idCategoria: $idCategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ELIMINAR_SUBCATEGORIA = gql`\r\n\tmutation eliminarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!) {\r\n\t\teliminarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_DEPARTAMENTOS = gql`\r\n\tquery ObtenerDepartamentos($empresa: ID!, $sucursal: ID!){\r\n        obtenerDepartamentos(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_departamentos\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n            sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_DEPARTAMENTO = gql`\r\n\tmutation CrearDepartamentos($input: DepartamentosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearDepartamentos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEPARTAMENTO = gql`\r\n\tmutation ActualzarDepartamentos($input: DepartamentosInput, $id: ID!){\r\n        actualzarDepartamentos(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DEPARTAMENTO = gql`\r\n    mutation EliminarDepartamento($id: ID!){\r\n        eliminarDepartamento(id: $id){\r\n            message\r\n        }\r\n    }\r\n\t\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_MARCAS = gql`\r\n    query ObtenerMarcas($empresa: ID!, $sucursal: ID){\r\n        obtenerMarcas(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_marca\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_MARCAS = gql`\r\n    mutation CrearMarca($input: MarcasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearMarcas(input: $input, empresa: $empresa, sucursal: $sucursal ){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_MARCAS = gql`\r\n    mutation actualzarMarcas($input: MarcasInput, $id: ID! ) {\r\n\t\tactualzarMarcas(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_MARCAS = gql`\r\n\tmutation eliminarMarca($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarMarca(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistrarNuevoSelect({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if(error.message){\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n      }else{\r\n        setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CategoriasProducto({ categorias, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, setSubcategorias } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        categoria: \"\",\r\n        id_categoria: \"\",\r\n      });\r\n      setSubcategorias([]);\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      categoria: value.categoria,\r\n      id_categoria: value._id,\r\n    });\r\n    setSubcategorias(value.subcategorias);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Categoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-categoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={categorias}\r\n          getOptionLabel={(option) => option.categoria}\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.categoria === value.categoria\r\n          }\r\n          value={datos_generales.categoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"categoria\"\r\n          name=\"categoria\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function SubcategoriasProducto({ refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, subcategorias, setSubcategorias } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        subcategoria: \"\",\r\n        id_subcategoria: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      subcategoria: value.subcategoria,\r\n      id_subcategoria: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Subcategoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-subcategoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={subcategorias}\r\n          getOptionLabel={(option) => option.subcategoria}\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.subcategoria === value.subcategoria\r\n          }\r\n          value={datos_generales.subcategoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"subcategoria\"\r\n          name=\"subcategoria\"\r\n          refetch={refetch}\r\n          subcategorias={subcategorias}\r\n          setSubcategorias={setSubcategorias}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function DepartamentosProducto({ departamentos, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        departamento: \"\",\r\n        id_departamento: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      departamento: value.nombre_departamentos,\r\n      id_departamento: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Departamento</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-departamento\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={departamentos}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_departamentos\r\n              ? option.nombre_departamentos\r\n              : option.departamento\r\n          }\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_departamentos === value.departamento\r\n          }\r\n          value={datos_generales.departamento ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"departamento\"\r\n          name=\"nombre_departamentos\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function MarcasProducto({ marcas, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        marca: \"\",\r\n        id_marca: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      marca: value.nombre_marca,\r\n      id_marca: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Marca</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-marca\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={marcas}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_marca ? option.nombre_marca : option.marca\r\n          }\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_marca === value.marca\r\n          }\r\n          value={datos_generales.marca ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"marca\"\r\n          name=\"nombre_marca\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  Container,\r\n  FormHelperText,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  Grid,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add, Autorenew } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"./CatalogoProductosSAT\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport CategoriasProducto from \"./Categorias\";\r\nimport SubcategoriasProducto from \"./Subcategorias\";\r\nimport DepartamentosProducto from \"./Departamentos\";\r\nimport MarcasProducto from \"./Marcas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  obligatorio: {\r\n    color: \"red\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  without_arrows: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoGenerales({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    validacion,\r\n    precios,\r\n    setPrecios,\r\n    centro_de_costos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    setSubcategorias,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    categorias,\r\n    departamentos,\r\n    marcas,\r\n    centro_costos,\r\n    codigos,\r\n  } = obtenerConsultasProducto;\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"monedero_electronico\") {\r\n      if (!value) {\r\n        setPrecios({\r\n          ...precios,\r\n          [name]: \"\",\r\n        });\r\n        return;\r\n      }\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: parseFloat(value),\r\n      });\r\n      return;\r\n    }\r\n    if (name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: value,\r\n      });\r\n    }\r\n    if(name === \"tipo_producto\" && value !== \"OTROS\"){\r\n      setPrecios({\r\n        ...precios,\r\n        granel: false,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"monedero\" && checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n        monedero: checked,\r\n      });\r\n      return;\r\n    }\r\n    /* setPrecios({\r\n\t\t\t...precios,\r\n\t\t\t[name]: checked\r\n\t\t}); */\r\n    if (name === \"granel\" && checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const obtenerIDs = (event, child) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.categoria) {\r\n      const { subcategorias } = child.props.categoria;\r\n      setSubcategorias(subcategorias);\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (campo) => {\r\n    if (!precios.monedero_electronico) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (update) {\r\n      const categoria = categorias.filter(\r\n        (res) => res._id === datos_generales.id_categoria\r\n      );\r\n      const costos = centro_costos.filter(\r\n        (res) => res._id === centro_de_costos.id_cuenta\r\n      );\r\n      if (categoria.length > 0) {\r\n        setSubcategorias(categoria[0].subcategorias);\r\n      }\r\n      if (costos.length > 0) {\r\n        setSubcostos(costos[0].subcuentas);\r\n      }\r\n    }\r\n  }, [update]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"lg\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              fullWidth\r\n              className={classes.without_arrows}\r\n            >\r\n              <Typography className={classes.titulos}>\r\n                Código de barras\r\n              </Typography>\r\n              <OutlinedInput\r\n                disabled={update && datos_generales.codigo_barras}\r\n                style={{ padding: 0 }}\r\n                id=\"form-producto-codigo-barras\"\r\n                name=\"codigo_barras\"\r\n                value={\r\n                  datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"\"\r\n                }\r\n                type=\"number\"\r\n                onChange={obtenerCampos}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      disabled={update && datos_generales.codigo_barras}\r\n                      onClick={() => GenCodigoBarras()}\r\n                      /* edge=\"end\" */\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Autorenew />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Clave alterna\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.clave_alterna}\r\n              name=\"clave_alterna\"\r\n              id=\"form-producto-clave-alterna\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.clave_alterna\r\n                  ? datos_generales.clave_alterna\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Tipo de producto\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.tipo_producto}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_producto\"\r\n                value={\r\n                  datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCampos}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n                <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n                <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n              </Select>\r\n              <FormHelperText>{validacion.message}</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={5} xs={12}>\r\n            <CatalogosProductosSAT codigos={codigos} refetch={refetch} />\r\n          </Grid>\r\n\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre comercial\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_comercial}\r\n              name=\"nombre_comercial\"\r\n              id=\"form-producto-nombre-comercial\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_comercial\r\n                  ? datos_generales.nombre_comercial\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre genérico\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_generico}\r\n              name=\"nombre_generico\"\r\n              id=\"form-producto-nombre-generico\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_generico\r\n                  ? datos_generales.nombre_generico\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>Descripción</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descripcion\"\r\n              id=\"form-producto-descripcion\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.descripcion ? datos_generales.descripcion : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n\r\n          <Grid item md={6} xs={12}>\r\n            <CategoriasProducto refetch={refetch} categorias={categorias} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <SubcategoriasProducto refetch={refetch} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <DepartamentosProducto refetch={refetch} departamentos={departamentos} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <MarcasProducto refetch={refetch} marcas={marcas} />\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" mt={4}>\r\n          <Grid container>\r\n            <Grid item md={3} xs={12}>\r\n              {!update ? (\r\n                <Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Granel</b>\r\n                    </Typography>\r\n                    <Divider />\r\n                  </Box>\r\n                  <div className={classes.formInput}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={precios.granel ? precios.granel : false}\r\n                          onChange={obtenerChecks}\r\n                          name=\"granel\"\r\n                          disabled={datos_generales.tipo_producto !== \"OTROS\"}\r\n                        />\r\n                      }\r\n                      label=\"Vender a granel\"\r\n                    />\r\n                  </div>\r\n                </Box>\r\n              ) : null}\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Farmacia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={\r\n                        datos_generales.receta_farmacia\r\n                          ? datos_generales.receta_farmacia\r\n                          : false\r\n                      }\r\n                      onChange={checkFarmacia}\r\n                      name=\"receta_farmacia\"\r\n                    />\r\n                  }\r\n                  label=\"Necesita receta\"\r\n                  name=\"receta_farmacia\"\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Monedero eléctronico</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box>\r\n                <Box className={classes.formInput}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={precios.monedero}\r\n                        onChange={obtenerChecks}\r\n                        name=\"monedero\"\r\n                      />\r\n                    }\r\n                    label=\"Monedero electrónico\"\r\n                  />\r\n                  <TextField\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 }, startAdornment: <InputAdornment>$</InputAdornment> }}\r\n                    size=\"small\"\r\n                    label=\"Valor por punto\"\r\n                    name=\"monedero_electronico\"\r\n                    id=\"form-producto-monedero_electronico\"\r\n                    variant=\"outlined\"\r\n                    value={precios.monedero_electronico}\r\n                    onChange={obtenerCampos}\r\n                    disabled={precios.monedero ? false : true}\r\n                    onBlur={() => verificarCampoVacio(\"monedero_electronico\")}\r\n                    error={precios.monedero_electronico === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, DialogTitle } from '@material-ui/core';\r\nimport { Box, Typography, Button, Divider, Grid } from '@material-ui/core';\r\nimport { AddPhotoAlternate, Visibility, Delete } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nimport PhotoSizeSelectActualOutlinedIcon from '@material-ui/icons/PhotoSizeSelectActualOutlined';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\timagen: {\r\n\t\tmaxHeight: \"100%\",\r\n\t\tmaxWidth: \"100%\"\r\n\t}\r\n}));\r\n\r\nexport default function CargarImagenesProducto() {\r\n\tconst classes = useStyles();\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview } = useContext(RegProductoContext);\r\n\r\n\tconst cargarImagen = (e) => {\r\n\t\tconst { files } = e.target;\r\n\t\tif (e.target.files.length < 1) return\r\n\t\tsetImagenes([\r\n\t\t\t...imagenes,\r\n\t\t\tfiles[0]\r\n\t\t]);\r\n\t\tsetOnPreview({image: URL.createObjectURL(files[0])})\r\n\t};\r\n\r\n\tconst render_imagenes = imagenes.map((res, index) => <RenderImagenes key={index} index={index} imagen={res} />);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\t\t\t\t/* multiple */\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={cargarImagen}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\" component=\"span\" startIcon={<AddPhotoAlternate />}>\r\n\t\t\t\t\t\t\t\tCargar imagen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{render_imagenes}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box display=\"flex\" minHeight={300}>\r\n\t\t\t\t\t\t<Box mx={1}>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\" height=\"50vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t{!onPreview.image ? (\r\n\t\t\t\t\t\t\t\t<PhotoSizeSelectActualOutlinedIcon style={{ fontSize: 150 }} />\r\n\t\t\t\t\t\t\t) : (<img alt=\"img-onPreview\" src={onPreview.image} className={classes.imagen} />)}\r\n\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst RenderImagenes = ({ imagen, index }) => {\r\n\tconst classes = useStyles();\r\n\tconst preview = imagen.key_imagen ? imagen.url_imagen : URL.createObjectURL(imagen)\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview, imagenes_eliminadas, setImagenesEliminadas } = useContext(RegProductoContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarImagen = () => {\r\n\t\t/* agregar al arrya de imagenes eliminadas */\r\n\t\tif(imagen.key_imagen){\r\n\t\t\tsetImagenesEliminadas([\r\n\t\t\t\t...imagenes_eliminadas, imagen\r\n\t\t\t])\r\n\t\t}\r\n\t\t/* quitar imagenes del array */\r\n\t\tif (onPreview.index === index) {\r\n\t\t\tsetOnPreview({ index: '', image: '' })\r\n\t\t}\r\n\t\tconst array = [...imagenes];\r\n\t\tarray.splice(index, 1);\r\n\t\tsetImagenes([\r\n\t\t\t...array,\r\n\t\t]);\r\n\t\thandleModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box my={2} mr={5}>\r\n\t\t\t<Box className={classes.formInputFlex}>\r\n\t\t\t\t<Box height={70} width={70}>\r\n\t\t\t\t\t<img alt=\"producto-img-prev\" src={preview} width=\"100%\" />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box width=\"90%\">\r\n\t\t\t\t\t<Typography noWrap>\r\n\t\t\t\t\t\t{imagen.key_imagen ? imagen.key_imagen : imagen.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{imagen.key_imagen ? null : (<Typography variant=\"caption\">{imagen.size} bits</Typography>)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<Button size=\"small\" startIcon={<Visibility />} onClick={() => setOnPreview({ index, image: preview })}>\r\n\t\t\t\t\t\t\tprevisualizar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Box mx={1} />\r\n\t\t\t\t\t\t<ModalDelete handleModal={handleModal} open={open} eliminarImagen={eliminarImagen} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst ModalDelete = ({ handleModal, open, eliminarImagen }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button size=\"small\" color=\"secondary\" startIcon={<Delete />} onClick={() => handleModal()}>\r\n\t\t\t\teliminar\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => eliminarImagen()}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CrearAlmacenContext = createContext();\r\n\r\nexport const AlmacenProvider = ({ children }) => {\r\n\tconst [ datosAlmacen, setDatosAlmacen ] = useState({\r\n        nombre_almacen: '',\r\n        id_usuario_encargado: '',\r\n        direccion: {\r\n            calle: '',\r\n            no_ext: '',\r\n            no_int: '',\r\n            codigo_postal: '',\r\n            colonia: '',\r\n            municipio: '',\r\n            localidad: '',\r\n            estado: '',\r\n            pais: ''\r\n        }\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CrearAlmacenContext.Provider value={\r\n            { \r\n                datosAlmacen, \r\n                setDatosAlmacen,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CrearAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRO_ALMACEN = gql`\r\n  mutation CrearAlmacen($input: CrearAlmacen, $id: ID!, $empresa: ID!) {\r\n    crearAlmacen(input: $input, id: $id, empresa: $empresa) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_ALMACENES = gql`\r\n  query obtenerAlmacenes($id: ID!) {\r\n    obtenerAlmacenes(id: $id) {\r\n      _id\r\n      nombre_almacen\r\n      id_usuario_encargado {\r\n        _id\r\n        nombre\r\n      }\r\n      id_sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      default_almacen\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_ALMACEN = gql`\r\n  mutation ActualizarAlmacen($input: EditarAlmacen, $id: ID!) {\r\n    actualizarAlmacen(input: $input, id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_ALMACEN = gql`\r\n  mutation eliminarAlmacen($id: ID!) {\r\n    eliminarAlmacen(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_ALMACEN = gql`\r\n  query obtenerProductosAlmacenes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n  ) {\r\n    obtenerProductosAlmacenes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precios{\r\n        inventario{\r\n          inventario_maximo\r\n          inventario_minimo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n        precio_de_compra{\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        unidad_de_compra{\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n        }\r\n      }\r\n      medidas_producto {\r\n        _id\r\n        cantidad\r\n        almacen\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        codigo_barras\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        existencia\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        nombre_comercial\r\n        precio\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      existencia_almacenes {\r\n        _id {\r\n          producto\r\n          almacen {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n        }\r\n        unidad_inventario\r\n        cantidad_existente\r\n        unidad_maxima\r\n        cantidad_existente_maxima\r\n      }\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n  query obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      categoria\r\n      subcategorias {\r\n        _id\r\n        subcategoria\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REALIZAR_TRASPASO = gql`\r\n  mutation CrearTraspaso(\r\n    $input: CrearTraspasoInput\r\n    $usuario: ID!\r\n    $empresa: ID!\r\n  ) {\r\n    crearTraspaso(input: $input, usuario: $usuario, empresa: $empresa) {\r\n      message\r\n      resp\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_EMPRESA = gql`\r\n  query obtenerProductosPorEmpresa($empresa: ID!, $filtro: String) {\r\n    obtenerProductosPorEmpresa(empresa: $empresa, filtro : $filtro) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          unidad_mayoreo\r\n          utilidad\r\n          ieps_precio\r\n          iva_precio\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n        }\r\n        granel\r\n      }\r\n      sucursal\r\n      usuario\r\n      empresa\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TRASPASOS = gql`\r\n  query obtenerTraspasos( $input: ConsultaTraspasosInput) {\r\n    obtenerTraspasos(input: $input) {\r\n      _id  \r\n      cantidad\r\n      \r\n      id_traspaso{\r\n        concepto_traspaso{\r\n          nombre_concepto\r\n        }\r\n        fecha_registro\r\n      }\r\n      producto{\r\n        datos_generales{\r\n          nombre_comercial\r\n        }\r\n      }\r\n      almacen_origen{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      almacen_destino{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n    }\r\n  }\r\n`;\r\n","\r\nlet arregloVacio = {\r\n    mi_empresa:{\r\n        datos_empresa: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        informacion_fiscal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    compras:{\r\n        abrir_compra:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_realizadas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_espera:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    tesoreria:{\r\n        cuentas_empresa:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        egresos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_proveedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        caja_principal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n    },\r\n    reportes:{\r\n        reporte_historial_cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_turnos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_compras:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        rerporte_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_corte_caja:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_tesoreria:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    ventas:{\r\n        cancelar_venta:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        precios_productos: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        pre_corte:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cotizaciones:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        administrador:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        eliminar_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        producto_rapido: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    almacenes:{\r\n        almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        traspasos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        inventario_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    catalogos: {\r\n        clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        usuarios:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        productos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        marcas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        contabilidad:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        provedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        departamentos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        centro_costos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        conceptos_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        categorias:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        colores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        tallas_numeros:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n    },\r\n    facturacion:{\r\n        generar_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cdfi_realizados:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        registro_series_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    }\r\n} \r\n\r\nexport default arregloVacio;\r\n","import React, { createContext, useState } from 'react';\r\nimport arregloVacio from '../../pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso'\r\n\r\nexport const UsuarioContext = createContext();\r\n\r\nexport const UsuarioProvider = ({ children }) => {\r\n\tconst [ usuario, setUsuario ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_usuario: true,\r\n\t\taccesos: arregloVacio\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<UsuarioContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tusuario,\r\n\t\t\t\tsetUsuario,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UsuarioContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ACTUALIZAR_USUARIO } from \"../../../../gql/Catalogos/usuarios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function FormularioUsuario({ accion }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, error } = useContext(UsuarioContext);\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setUsuario({\r\n        ...usuario,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [usuario, setUsuario]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const removerImagen = () => {\r\n    setUsuario({\r\n      ...usuario,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_usuario\") {\r\n      setUsuario({\r\n        ...usuario,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      direccion: { ...usuario.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box>\r\n            <Box className={classes.avatarContainer} {...getRootProps()}>\r\n              <input {...getInputProps()} />\r\n              {preview ? (\r\n                <Avatar\r\n                  variant=\"square\"\r\n                  className={classes.avatar}\r\n                  src={`${preview}`}\r\n                />\r\n              ) : (\r\n                <Avatar\r\n                  variant=\"square\"\r\n                  className={classes.avatar}\r\n                  src={`${usuario.imagen}`}\r\n                />\r\n              )}\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                color=\"secondary\"\r\n                size=\"medium\"\r\n                onClick={removerImagen}\r\n                startIcon={<DeleteOutlineIcon />}\r\n              >\r\n                Remover imagen\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre usuario\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                type=\"text\"\r\n                size=\"small\"\r\n                error={error.error && !usuario.nombre}\r\n                name=\"nombre\"\r\n                variant=\"outlined\"\r\n                value={usuario.nombre ? usuario.nombre : \"\"}\r\n                helperText={\r\n                  error.error &&\r\n                  error.message !== \"Las contraseñas no coinciden\"\r\n                    ? error.message\r\n                    : \"\"\r\n                }\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n            {accion === \"registrar\" ? (\r\n              <Fragment>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"password\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"password\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={usuario.password ? usuario.password : \"\"}\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Repetir contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"repeatPassword\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"repeatPassword\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={\r\n                        usuario.repeatPassword ? usuario.repeatPassword : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Fragment>\r\n            ) : (\r\n              <Grid item xs={12} md={12}>\r\n                <ActualizarPasswordModal />\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Email\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.email}\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={usuario.email ? usuario.email : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Num. Telefono\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.telefono}\r\n            name=\"telefono\"\r\n            variant=\"outlined\"\r\n            value={usuario.telefono ? usuario.telefono : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>Num. Celular</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"celular\"\r\n            variant=\"outlined\"\r\n            value={usuario.celular ? usuario.celular : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={2}>\r\n        <Typography className={classes.title}>\r\n          <b>Domicilio</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Calle</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"calle\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.calle ? usuario.direccion.calle : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Colonia</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"colonia\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.colonia ? usuario.direccion.colonia : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Ext</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_ext\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_ext ? usuario.direccion.no_ext : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Int</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_int\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_int ? usuario.direccion.no_int : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>CP</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"codigo_postal\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.codigo_postal\r\n                ? usuario.direccion.codigo_postal\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Municipio</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"municipio\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.municipio ? usuario.direccion.municipio : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Localidad</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"localidad\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.localidad ? usuario.direccion.localidad : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Estado</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"estado\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.estado ? usuario.direccion.estado : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Pais</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"pais\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.pais ? usuario.direccion.pais : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ActualizarPasswordModal = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const {\r\n    usuario,\r\n    setUsuario,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(UsuarioContext);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setError({ error: false, message: \"\" });\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const confirmarPassowrd = async () => {\r\n    if (!usuario.password || !usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Este campo es requerido\" });\r\n      return;\r\n    }\r\n    if (usuario.password !== usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            password: usuario.password,\r\n            repeatPassword: usuario.repeatPassword,\r\n          },\r\n          id: usuario._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button color=\"primary\" variant=\"text\" onClick={handleClickOpen}>\r\n        Cambiar contraseña\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Cambiar contraseña\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <form autoComplete=\"off\">\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"password\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.password ? usuario.password : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Repetir contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"repeatPassword\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"repeatPassword\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.repeatPassword ? usuario.repeatPassword : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={confirmarPassowrd}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            autoFocus\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={25} /> : null\r\n            }\r\n          >\r\n            Confirmar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Box, Checkbox, FormControlLabel } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nexport default function Parametros({\r\n  arregloAccesos,\r\n  obtenerAccesos,\r\n  departamento,\r\n  subDepartamento,\r\n}) {\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={\r\n              arregloAccesos\r\n                ? arregloAccesos[departamento][subDepartamento]?.ver\r\n                : false\r\n            }\r\n            name=\"ver\"\r\n            color=\"primary\"\r\n            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n          />\r\n        }\r\n        label={\r\n          <Box mr={2} display=\"flex\">\r\n            {departamento === \"ventas\" && subDepartamento !== \"cancelar_venta\"\r\n              ? \"Autorizar\"\r\n              : \"Ver\"}\r\n          </Box>\r\n        }\r\n      />\r\n      {subDepartamento === \"informacion_fiscal\" ||\r\n      subDepartamento === \"datos_empresa\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"compras_espera\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"cuentas_empresa\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      departamento === \"reportes\" ||\r\n      departamento === \"ventas\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      subDepartamento === \"egresos\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.agregar\r\n                  : false\r\n              }\r\n              name=\"agregar\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              color=\"primary\"\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={\r\n            <Box mr={2} display=\"flex\">\r\n              Agregar\r\n            </Box>\r\n          }\r\n        />\r\n      )}\r\n      {subDepartamento === \"cajas\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"abonos_proveedores\" ||\r\n      subDepartamento === \"abonos_clientes\" ||\r\n      subDepartamento === \"egresos\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      subDepartamento === \"registro_series_cdfi\" ||\r\n      departamento === \"reportes\" ? null : departamento === \"ventas\" &&\r\n        subDepartamento !== \"cancelar_venta\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.editar\r\n                  : false\r\n              }\r\n              name=\"editar\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              color=\"primary\"\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={\r\n            <Box mr={2} display=\"flex\">\r\n              Editar\r\n            </Box>\r\n          }\r\n        />\r\n      )}\r\n      {subDepartamento === \"informacion_fiscal\" ||\r\n      subDepartamento === \"datos_empresa\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"cuentas_empresa\" ||\r\n      subDepartamento === \"abonos_proveedores\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      subDepartamento === \"abonos_clientes\" ||\r\n      subDepartamento === \"egresos\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      departamento === \"reportes\" ||\r\n      departamento === \"ventas\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.eliminar\r\n                  : false\r\n              }\r\n              name=\"eliminar\"\r\n              color=\"primary\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={<Box display=\"flex\">Eliminar</Box>}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Catalogos({ obtenerAccesos, arregloAccesos }) {\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Usuarios</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'usuarios'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Marcas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'marcas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Provedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'provedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Contabilidad</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'contabilidad'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Departamento</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'departamentos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Centro de costos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'centro_costos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Conceptos almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'conceptos_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Categorias</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'categorias'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Colores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'colores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Tallas y Numeros</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'tallas_numeros'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function MiEmpresa({ obtenerAccesos, arregloAccesos }) {\r\n      return (\r\n            <Fragment>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Typography variant=\"h6\">\r\n                            Marca los permisos que deseas asignar a este usuario\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Datos de Empresa</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'datos_empresa'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Información Fiscal</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'informacion_fiscal'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n            </Fragment>\r\n      )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Compras({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abrir una compra</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'abrir_compra'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras realizadas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_realizadas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras en espera</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_espera'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Almacenes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Almacenes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Traspasos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'traspasos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Inventario por almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'inventario_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import { Box, Paper, Typography } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Tesoreria({ obtenerAccesos, arregloAccesos }) {\r\n  return (\r\n    <Fragment>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Typography variant=\"h6\">\r\n            Marca los permisos que deseas asignar a este usuario\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Cuentas</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"cuentas_empresa\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Abonos Proveedores</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"abonos_proveedores\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Abonos Clientes</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"abonos_clientes\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Egresos</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"egresos\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Caja principal</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"caja_principal\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Reportes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes Historiales Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_historial_cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes turnos usuarios </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_turnos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de compras </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_compras'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de ventas </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de almacenes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'rerporte_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de cortes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_corte_caja'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes tesoreria </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_tesoreria'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Ventas({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cancelar ventas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cancelar_venta'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Precios de productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'precios_productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Pre cortes de caja</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'pre_corte'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cotizaciones</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cotizaciones'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Producto Rapido</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'producto_rapido'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Panel de administrador</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'administrador'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Eliminar ventas pendientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'eliminar_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Facturacion({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Generar nuevo CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'generar_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>CDFIs realizados</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'cdfi_realizados'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Registrar series CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'registro_series_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AppBar, Box, Tabs } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\nimport { FcPaid, FcShop, FcSurvey, FcNews } from \"react-icons/fc\";\r\n\r\nimport Catalogos from \"./Departamentos/Catalogos\";\r\nimport MiEmpresa from \"./Departamentos/MiEmpresa\";\r\n\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport Compras from \"./Departamentos/Compras\";\r\nimport Almacenes from \"./Departamentos/Almacenes\";\r\nimport Tesoreria from \"./Departamentos/Tesoreria\";\r\nimport Reportes from \"./Departamentos/Reportes\";\r\nimport Ventas from \"./Departamentos/Ventas\";\r\nimport Facturacion from \"./Departamentos/Facturacion\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={1} minHeight=\"20vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 30,\r\n  },\r\n  icon: {\r\n    fontSize: 30,\r\n  },\r\n}));\r\n\r\nexport default function AsignarPermisos({ obtenerAccesos, arregloAccesos }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"on\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"scrollable force tabs example\"\r\n        >\r\n          <Tab\r\n            label=\"Mi empresa\"\r\n            icon={<FcShop className={classes.icon} />}\r\n            {...a11yProps(0)}\r\n          />\r\n          <Tab\r\n            label=\"Almacenes\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(1)}\r\n          />\r\n          <Tab\r\n            label=\"Compras\"\r\n            icon={<FcPaid className={classes.icon} />}\r\n            {...a11yProps(2)}\r\n          />\r\n          <Tab\r\n            label=\"Catalogos\"\r\n            icon={<FcNews className={classes.icon} />}\r\n            {...a11yProps(3)}\r\n          />\r\n          <Tab\r\n            label=\"Tesoreria\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                alt=\"icono money\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(4)}\r\n          />\r\n          <Tab\r\n            label=\"Reportes\"\r\n            icon={<FcSurvey className={classes.icon} />}\r\n            {...a11yProps(5)}\r\n          />\r\n          <Tab\r\n            label=\"Facturación\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                alt=\"icono factura\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(6)}\r\n          />\r\n          <Tab\r\n            label=\"Ventas\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(7)}\r\n          />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <Box p={2}>\r\n          <MiEmpresa\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <Box p={2}>\r\n          <Almacenes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <Box p={2}>\r\n          <Compras\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <Box p={0}>\r\n          <Catalogos\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <Box p={2}>\r\n          <Tesoreria\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <Box p={2}>\r\n          <Reportes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        <Box p={2}>\r\n          <Facturacion\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={7}>\r\n        <Box p={2}>\r\n          <Ventas\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport { Button, IconButton, Tabs } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, Box } from \"@material-ui/core\";\r\nimport FormularioUsuario from \"./FormularioUsuario\";\r\nimport AsignarPermisos from \"./AsingarAccesos/AsignarPermisos\";\r\nimport { Add, Edit } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport arregloVacio from \"./AsingarAccesos/arregloVacioAcceso\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_USUARIO,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport {\r\n  numerosRandom,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AppBar } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box minHeight=\"70vh\">{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  rootPrincipal: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nexport default function CrearUsuario({ accion, datos, fromEmergent, refetch }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, setError, update, setUpdate } = useContext(\r\n    UsuarioContext\r\n  );\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setUsuario({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      turno_en_caja_activo: false,\r\n      estado_usuario: true,\r\n      accesos: arregloVacio,\r\n    });\r\n  }, [setUsuario]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (accion !== \"registrar\") {\r\n      setUsuario(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerAccesos = (event, departamento, subDepartamentos) => {\r\n    const { name, checked } = event.target;\r\n    setUsuario({\r\n      ...usuario,\r\n      accesos: {\r\n        ...usuario.accesos,\r\n        [departamento]: {\r\n          ...usuario.accesos[departamento],\r\n          [subDepartamentos]: {\r\n            ...usuario.accesos[departamento][subDepartamentos],\r\n            [name]: checked,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearUsuario] = useMutation(CREAR_USUARIO);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    if (accion === \"registrar\") {\r\n      if (\r\n        !usuario.nombre ||\r\n        !usuario.password ||\r\n        !usuario.repeatPassword ||\r\n        !usuario.telefono ||\r\n        !usuario.email\r\n      ) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n      if (usuario.password !== usuario.repeatPassword) {\r\n        setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n        return;\r\n      }\r\n    } else {\r\n      if (!usuario.nombre || !usuario.telefono || !usuario.email) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        usuario.numero_usuario = numerosRandom(100000000, 999999999);\r\n        usuario.empresa = sesion.empresa._id;\r\n        usuario.sucursal = sesion.sucursal._id;\r\n        usuario.turno_en_caja_activo = false;\r\n        const input = usuario;\r\n        await crearUsuario({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n      } else {\r\n        const {\r\n          numero_usuario,\r\n          _id,\r\n          sucursal,\r\n          empresa,\r\n          turno_en_caja_activo,\r\n          estado_usuario,\r\n          ...input\r\n        } = usuario;\r\n        await actualizarUsuario({\r\n          variables: {\r\n            input: input,\r\n            id: usuario._id,\r\n          },\r\n        });\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError({ error: false, message: \"\" });\r\n      setLoading(false);\r\n      onCloseModal();\r\n      if (fromEmergent) {\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"Hubo un error en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      {accion === \"registrar\" ? (\r\n        fromEmergent ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <Box className={classes.root}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Información básica\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/perfil.svg\"\r\n                    alt=\"icono perfil\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              <Tab\r\n                label=\"Permisos\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/permisos.svg\"\r\n                    alt=\"icono factura\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(1)}\r\n              />\r\n              <Box ml={58} mt={3}>\r\n                <Box>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={onCloseModal}\r\n                    size=\"large\"\r\n                  >\r\n                    <CloseIcon />\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Tabs>\r\n          </AppBar>\r\n          <form id=\"form-usuario\" onSubmit={saveData}>\r\n            <TabPanel value={value} index={0}>\r\n              <Box p={2}>\r\n                <FormularioUsuario accion={accion} />\r\n              </Box>\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <AsignarPermisos\r\n                arregloAccesos={usuario.accesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n              />\r\n            </TabPanel>\r\n          </form>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-usuario\"\r\n            size=\"large\"\r\n            startIcon={<DoneIcon />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  TextField,\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  IconButton,\r\n  DialogTitle,\r\n  Divider,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { CrearAlmacenContext } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  REGISTRO_ALMACEN,\r\n  ACTUALIZAR_ALMACEN,\r\n} from \"../../../../gql/Almacenes/Almacen\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport { OBTENER_USUARIOS } from \"../../../../gql/Catalogos/usuarios\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport RegistroUsuario from \"../../Catalogos/Usuarios/CrearUsuario\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nexport default function ContainerRegistroAlmacen({\r\n  accion,\r\n  datos,\r\n  fromEmergent,\r\n}) {\r\n  const {\r\n    datosAlmacen,\r\n    setDatosAlmacen,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(CrearAlmacenContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [CrearAlmacen] = useMutation(REGISTRO_ALMACEN);\r\n  const [ActualizarAlmacen] = useMutation(ACTUALIZAR_ALMACEN);\r\n  \r\n \r\n\r\n  let obtenerUsuarios = [];\r\n\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  // const empresa = '609eb3b4b995884dc49bbffa';\r\n  const [open, setOpen] = useState(false);\r\n\r\n \r\n\r\n  const { almacen_inicial, setAlmacenInicial } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  const  { data, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: {\r\n      sucursal: `${sesion.sucursal._id}`,\r\n      empresa: `${sesion.empresa._id}`,\r\n      eliminado: false,\r\n    },\r\n  });\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setDatosAlmacen({\r\n      nombre_almacen: \"\",\r\n      id_usuario_encargado: \"\",\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n    });\r\n  }, [setDatosAlmacen]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      let input = {};\r\n      if (datos.id_usuario_encargado) {\r\n        const { id_usuario_encargado, ...datosNew } = datos;\r\n        input = datosNew;\r\n        input.id_usuario_encargado = id_usuario_encargado._id;\r\n      } else {\r\n        input = datos;\r\n      }\r\n      setDatosAlmacen(input);\r\n    }\r\n  };\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerCampos = (e, child) => {\r\n    if (e.target.name === \"id_usuario_encargado\") {\r\n      setDatosAlmacen({\r\n        ...datosAlmacen,\r\n        [e.target.name]: child.props.user._id,\r\n      });\r\n      return;\r\n    }\r\n    setDatosAlmacen({\r\n      ...datosAlmacen,\r\n      [e.target.name]: e.target.value.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const obtenerCamposDireccion = (e) => {\r\n    setDatosAlmacen({\r\n      ...datosAlmacen,\r\n      direccion: {\r\n        ...datosAlmacen.direccion,\r\n        [e.target.name]: e.target.value.toUpperCase(),\r\n      },\r\n    });\r\n  };\r\n\r\n  const saveData = async () => {\r\n    try {\r\n      if (!datosAlmacen.nombre_almacen) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        if (accion === \"registrar\") {\r\n          let input = {};\r\n          let almacen_creado;\r\n          if (datosAlmacen.id_usuario_encargado === \"\") {\r\n            const { id_usuario_encargado, ...input } = datosAlmacen;\r\n            almacen_creado = await CrearAlmacen({\r\n              variables: {\r\n                input,\r\n                id: sesion.sucursal._id,\r\n                empresa: sesion.empresa._id,\r\n              },\r\n            });\r\n          } else {\r\n            input = datosAlmacen;\r\n            almacen_creado = await CrearAlmacen({\r\n              variables: {\r\n                input,\r\n                id: sesion.sucursal._id,\r\n                empresa: sesion.empresa._id,\r\n              },\r\n            });\r\n          }\r\n\r\n          const id_almacen = almacen_creado.data.crearAlmacen._id;\r\n          if (refetch) {\r\n            setAlmacenInicial({\r\n              ...almacen_inicial,\r\n              id_almacen,\r\n              almacen: datosAlmacen.nombre_almacen,\r\n            });\r\n            refetch();\r\n          }\r\n        } else {\r\n          const { id_sucursal, _id, ...input } = datosAlmacen;\r\n         \r\n          await ActualizarAlmacen({\r\n            variables: {\r\n             \r\n              input:{\r\n                nombre_almacen: input.nombre_almacen,\r\n                id_usuario_encargado: input.id_usuario_encargado,\r\n                direccion: input.direccion,\r\n              },\r\n              id: datosAlmacen._id,\r\n            },\r\n          });\r\n        }\r\n        setUpdate(!update);\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n        setLoading(false);\r\n        onCloseModal();\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  if (data) {\r\n    obtenerUsuarios = data.obtenerUsuarios;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        fromEmergent ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <Box display=\"flex\" flexDirection=\"row\">\r\n          <Box style={{ width: \"93%\" }}>\r\n            <DialogTitle id=\"form-dialog-title\">Registro almacen</DialogTitle>\r\n          </Box>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={onCloseModal}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n        <Container maxWidth=\"md\">\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"80%\">\r\n              <Typography>\r\n                <span style={{ color: \"red\" }}>* </span>\r\n                <b>Nombre Almacen</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error}\r\n                name=\"nombre_almacen\"\r\n                id=\"form-producto-codigo-barras\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.nombre_almacen}\r\n                /* helperText=\"Incorrect entry.\" */\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\" display=\"flex\" flexDirection=\"row\">\r\n              <Box width=\"70%\">\r\n                <Typography>\r\n                  <b>Encargado de almacen</b>\r\n                </Typography>\r\n                <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                  <Select\r\n                    labelId=\"demo-simple-select-label\"\r\n                    id=\"demo-simple-select\"\r\n                    name=\"id_usuario_encargado\"\r\n                    /* value={\r\n                      datosAlmacen.id_usuario_encargado\r\n                        ? datosAlmacen.id_usuario_encargado\r\n                        : \"\"\r\n                    } */\r\n                    renderValue={(value) => value}\r\n                    onChange={obtenerCampos}\r\n                  >\r\n                    {obtenerUsuarios?.map((user, index) => (\r\n                      <MenuItem key={index} value={user.nombre} user={user}>\r\n                        {user.nombre}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Box>\r\n              <Box mt={2} width=\"10%\">\r\n                <UsuarioProvider>\r\n                  <RegistroUsuario\r\n                    accion=\"registrar\"\r\n                    fromEmergent={true}\r\n                    refetch={refetch}\r\n                  />\r\n                </UsuarioProvider>\r\n              </Box>\r\n              <Box width=\"35%\">\r\n                <Typography>\r\n                  <b>Sucursal</b>\r\n                </Typography>\r\n                <Typography style={{ marginTop: \"7px\" }}>\r\n                  {sesion.sucursal.nombre_sucursal}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n\r\n          <Box mt={2}>\r\n            <Typography>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Calle</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.calle}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>No. exterior</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.no_ext}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>No. interior </b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.no_int}\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.no_int}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Codigo Postal</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                type=\"number\"\r\n                // error={error && !datosAlmacen.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.codigo_postal}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Colonia</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.colonia}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Municipio</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.municipio}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Localidad</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.localidad}\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.localidad}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Estado</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.estado}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>País</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                //  error={error && !datosAlmacen.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.pais}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              onClick={saveData}\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\n/* import \"date-fns\";\r\nimport local from \"date-fns/locale/es\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\"; */\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport ContainerRegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function RegistroAlmacenInicial({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    selectedDate,\r\n    setSelectedDate,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const { almacenes } = obtenerConsultasProducto;\r\n\r\n  /*ARMAR OBJETO DE INVENTARIO  */\r\n  const obtenerInventario = (e, child) => {\r\n    if (!e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: { ...precios.inventario, [e.target.name]: \"\" },\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad_de_inventario\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          [e.target.name]: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    setPrecios({\r\n      ...precios,\r\n      inventario: {\r\n        ...precios.inventario,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      },\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenInicial = (e) => {\r\n    if (!e.target.value) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: \"\",\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"almacen\") {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n      return;\r\n    }\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [e.target.name]: parseFloat(e.target.value),\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (date) => {\r\n    setSelectedDate(date);\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      fecha_de_expiracion: date,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={2}>\r\n        <Typography>\r\n          <b>Inventario</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario mínimo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_minimo\"\r\n              id=\"form-producto-inventario_minimo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_minimo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_minimo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario máximo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_maximo\"\r\n              id=\"form-producto-inventario_maximo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_maximo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_maximo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Unidad de inventario\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"unidad_de_inventario\"\r\n              >\r\n                {precios.granel ? (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes_granel.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                ) : (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      {update ? null : datos_generales.tipo_producto === \"OTROS\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography>\r\n              <b>Almacen incial</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2} style={{ alignItems: \"center\" }}>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>\r\n                  Cantidad inicial en <b>{precios.unidad_de_compra.unidad}</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    name=\"cantidad\"\r\n                    variant=\"outlined\"\r\n                    value={almacen_inicial.cantidad}\r\n                    onChange={obtenerAlmacenInicial}\r\n                    onFocus={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (parseFloat(value) === 0) {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: \"\",\r\n                        });\r\n                      }\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (value === \"\") {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: 0,\r\n                        });\r\n                      }\r\n                    }}\r\n                    error={almacen_inicial.cantidad === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>Almacen</Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      almacen_inicial.cantidad > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <AlmacenProvider>\r\n                    <ContainerRegistroAlmacen\r\n                      accion=\"registrar\"\r\n                      refetch={refetch}\r\n                      fromEmergent={true}\r\n                    />\r\n                  </AlmacenProvider>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  <Box width=\"100%\">\r\n              <Typography>Fecha de expiración</Typography>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={local}>\r\n                <Grid container justify=\"space-around\">\r\n                  <KeyboardDatePicker\r\n                    margin=\"dense\"\r\n                    id=\"date-picker-dialog\"\r\n                    placeholder=\"ex: DD/MM/AAAA\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    KeyboardButtonProps={{\r\n                      \"aria-label\": \"change date\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n            </Box> */}\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","export function validaciones(generales, precios, almacen, presentaciones) {\r\n    /* si no hay generales y datos 2 */\r\n    /* console.log(almacen); */\r\n    if (\r\n        !generales.clave_alterna ||\r\n        !generales.tipo_producto ||\r\n        !generales.nombre_generico ||\r\n        !generales.nombre_comercial\r\n    ) {\r\n        if (!precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad) {\r\n            return { error: true, message: 'Campo obligatorio', vista1: true, vista2: true };\r\n        }\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if (\r\n        /* si solo hay generales */\r\n        !precios.precio_de_compra.precio_con_impuesto || !precios.precio_de_compra.precio_sin_impuesto || !precios.unidad_de_compra.cantidad\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista2: true };\r\n    } else if (\r\n        /* si solo hay precios */\r\n        !generales.clave_alterna || !generales.tipo_producto || !generales.nombre_generico || !generales.nombre_comercial\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if(\r\n        /* si hay cantidad almacen pero no hay almacen seleccionado */\r\n        almacen.cantidad > 0 && !almacen.almacen && generales.tipo_producto === \"OTROS\"\r\n    ) {\r\n        console.log(\"si hay cantidad almacen pero no hay almacen seleccionado\");\r\n        return { error: true, message: 'Campo obligatorio', vista3: true };\r\n    }/*  else if(\r\n        //si no hay almacen seleccionado\r\n        presentaciones.length > 0 && !almacen.almacen && !almacen_existente\r\n    ){\r\n        console.log(\"no hay present\");\r\n        return { error: true, message: 'Campo obligatorio', vista7: true };\r\n    } */ else {\r\n        /* si hay todos los datos */\r\n        return { error: false, message: '' };\r\n    }\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CUENTA = gql`\r\n\tmutation crearCuenta($input: CrearCuentasInput) {\r\n\t\tcrearCuenta(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCUENTA= gql`\r\n\tmutation crearSubcuenta($idCuenta: ID!, $input: CrearSubcuentasInput) {\r\n\t\tcrearSubcuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CUENTA= gql`\r\n\tmutation actualizarCuenta($idCuenta: ID!, $input: ActualizarCuentasInput) {\r\n\t\tactualizarCuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCUENTA = gql`\r\n\tmutation actualizarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $input: ActualizarSubcuentasInput) {\r\n\t\tactualizarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CUENTAS = gql`\r\n\tquery obtenerCuentas($empresa: ID!) {\r\n\t\tobtenerCuentas(empresa: $empresa) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tsubcuentas {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcuenta\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_CUENTA = gql`\r\n\tmutation eliminarCuenta($id: ID!) {\r\n\t\teliminarCuenta(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\nexport const ELIMINAR_SUBCUENTA = gql`\r\n\tmutation eliminarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!) {\r\n\t\teliminarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; ","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  Grid,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport {\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n} from \"../../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CentroCostos({ obtenerConsultasProducto, refetch }) {\r\n  const classes = useStyles();\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const { centro_costos } = obtenerConsultasProducto;\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setCentroDeCostos({\r\n      ...centro_de_costos,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.costos) {\r\n      const { subcuentas } = child.props.costos;\r\n      setSubcostos(subcuentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Typography>\r\n          <b>Centro de costos</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Cuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"cuenta\"\r\n              >\r\n                <Select\r\n                  name=\"cuenta\"\r\n                  value={centro_de_costos.cuenta ? centro_de_costos.cuenta : \"\"}\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {centro_costos ? (\r\n                    centro_costos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_cuenta\"\r\n                          key={res._id}\r\n                          value={res.cuenta}\r\n                          id={res._id}\r\n                          costos={res}\r\n                        >\r\n                          {res.cuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"cuenta\"\r\n                name=\"cuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Subcuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"subcuenta\"\r\n              >\r\n                <Select\r\n                  name=\"subcuenta\"\r\n                  value={\r\n                    centro_de_costos.subcuenta ? centro_de_costos.subcuenta : \"\"\r\n                  }\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {subcostos ? (\r\n                    subcostos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_subcuenta\"\r\n                          key={res._id}\r\n                          value={res.subcuenta}\r\n                          id={res._id}\r\n                        >\r\n                          {res.subcuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"subcuenta\"\r\n                name=\"subcuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({ tipo, name, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  costos Mutation */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  /*  subcostos Mutation */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n    };\r\n    if (tipo === \"subcuenta\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCuenta: centro_de_costos.id_cuenta,\r\n      };\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"cuenta\":\r\n          const cuenta_creada = await crearCuenta({ variables });\r\n          refetch();\r\n          const id_cuenta = cuenta_creada.data.crearCuenta._id;\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            cuenta: value,\r\n            id_cuenta,\r\n          });\r\n          break;\r\n        case \"subcuenta\":\r\n          const subcuenta_creada = await crearSubcuenta({ variables });\r\n          refetch();\r\n          const id_subcuenta = subcuenta_creada.data.crearSubcuenta._id;\r\n          setSubcostos([...subcostos, { _id: id_subcuenta, subcuenta: value }]);\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            subcuenta: value,\r\n            id_subcuenta,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcuenta\" && !centro_de_costos.id_cuenta}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  FormControl,\r\n  Grid,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport TablaPreciosPlazos from \"./tabla_precios\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& > .precios-box\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(3)}px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PrecioPlazos() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    unidadesVenta,\r\n    unidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n  const [plazo, setPlazo] = useState({\r\n    plazo: \"1\",\r\n    unidad: precios.granel ? \"Costal\" : \"Pz\",\r\n    codigo_unidad: precios.granel ? \"KGM\" : \"H87\",\r\n    precio: 0,\r\n  });\r\n\r\n  const obtenerPlazos = (e, child) => {\r\n    if (e.target.name === \"precio\") {\r\n      setPlazo({\r\n        ...plazo,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPlazo({\r\n        ...plazo,\r\n        unidad,\r\n        codigo_unidad,\r\n      });\r\n      return;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const guardarPlazo = () => {\r\n    if (!plazo.plazo || !plazo.precio || !plazo.unidad) return;\r\n    switch (plazo.unidad) {\r\n      case \"Pz\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_piezas: [...preciosPlazos.precio_piezas, plazo],\r\n        });\r\n        break;\r\n      case \"Caja\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_cajas: [...preciosPlazos.precio_cajas, plazo],\r\n        });\r\n        break;\r\n      case \"Costal\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_costales: [...preciosPlazos.precio_costales, plazo],\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      precio: 0,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex}>\r\n        <Typography className=\"precios-box\">\r\n          Precio venta de <b>{unidadVentaXDefecto.unidad}</b> con\r\n          impuestos(NETO): <b>${unidadVentaXDefecto.precio}</b>\r\n        </Typography>\r\n        {unidadesVenta.map((unidades, index) => {\r\n          if (!unidades.default)\r\n            return (\r\n              <Typography key={index} className=\"precios-box\">\r\n                Precio venta de <b>{unidades.unidad}</b> con impuestos(NETO):{\" \"}\r\n                <b>${unidades.precio}</b>\r\n              </Typography>\r\n            );\r\n          return null;\r\n        })}\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box>\r\n          <Typography>Plazo</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"plazo\">\r\n              <Select name=\"plazo\" value={plazo.plazo} onChange={obtenerPlazos}>\r\n                <MenuItem value=\"1\">1 Mes</MenuItem>\r\n                <MenuItem value=\"2\">2 Meses</MenuItem>\r\n                <MenuItem value=\"6\">6 Meses</MenuItem>\r\n                <MenuItem value=\"8\">8 Meses</MenuItem>\r\n                <MenuItem value=\"12\">12 Meses</MenuItem>\r\n                <MenuItem value=\"18\">18 Meses</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes_granel.map((res, index) =>\r\n                    res.unidad === \"Costal\" ? (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ) : null\r\n                  )}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Precio</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            value={plazo.precio}\r\n            variant=\"outlined\"\r\n            onChange={obtenerPlazos}\r\n          />\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            onClick={() => guardarPlazo()}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          {precios.granel ? (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Costal\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_costales} />\r\n              </Grid>\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Piezas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_piezas} />\r\n              </Grid>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Cajas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_cajas} />\r\n              </Grid>\r\n            </Fragment>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const validateJsonEdit = async (data, tipo) => {\r\n    if (tipo === \"datos_generales\") {\r\n      let object_date = {\r\n        clave_alterna: data.clave_alterna,\r\n        tipo_producto: data.tipo_producto,\r\n        nombre_comercial: data.nombre_comercial,\r\n        nombre_generico: data.nombre_generico,\r\n        receta_farmacia: data.receta_farmacia,\r\n      };\r\n      if (data.codigo_barras !== null && data.codigo_barras !== \"\")\r\n        object_date = { ...object_date, codigo_barras: data.codigo_barras };\r\n      if (data.descripcion !== null && data.descripcion !== \"\")\r\n        object_date = { ...object_date, descripcion: data.descripcion };\r\n      if (data.id_categoria !== null && data.id_categoria !== \"\")\r\n        object_date = { ...object_date, id_categoria: data.id_categoria };\r\n      if (data.categoria !== null && data.categoria !== \"\")\r\n        object_date = { ...object_date, categoria: data.categoria };\r\n      if (data.subcategoria !== null && data.subcategoria !== \"\")\r\n        object_date = { ...object_date, subcategoria: data.subcategoria };\r\n      if (data.id_subcategoria !== null && data.id_subcategoria !== \"\")\r\n        object_date = { ...object_date, id_subcategoria: data.id_subcategoria };\r\n      if (data.id_departamento !== null && data.id_departamento !== \"\")\r\n        object_date = { ...object_date, id_departamento: data.id_departamento };\r\n      if (data.departamento !== null && data.departamento !== \"\")\r\n        object_date = { ...object_date, departamento: data.departamento };\r\n      if (data.id_marca !== null && data.id_marca !== \"\")\r\n        object_date = { ...object_date, id_marca: data.id_marca };\r\n      if (data.marca !== null && data.marca !== \"\")\r\n        object_date = { ...object_date, marca: data.marca };\r\n      if (data.clave_producto_sat.Name !== null)\r\n        object_date = {\r\n          ...object_date,\r\n          clave_producto_sat: data.clave_producto_sat,\r\n        };\r\n      return object_date;\r\n    } else if (tipo === \"unidades_de_venta\") {\r\n      let end_array = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        let object = {\r\n          _id: data[i]._id,\r\n          cantidad: data[i].cantidad,\r\n          id_producto: data[i].id_producto,\r\n          precio: data[i].precio,\r\n          unidad_principal: data[i].unidad_principal,\r\n          unidad: data[i].unidad,\r\n          codigo_unidad: data[i].codigo_unidad,\r\n          precio_unidad: data[i].precio_unidad\r\n        };\r\n        if (data[i].codigo_barras !== null && data[i].codigo_barras !== \"\")\r\n          object = { ...object, codigo_barras: data[i].codigo_barras };\r\n        if (data[i].default !== null && data[i].default !== \"\")\r\n          object = { ...object, default: data[i].default };\r\n        if (data[i].descuento_activo !== null && data[i].descuento_activo !== \"\")\r\n          object = { ...object, descuento_activo: data[i].descuento_activo, descuento: data[i].descuento };\r\n          \r\n          end_array.push(object);\r\n      }\r\n      return end_array;\r\n    }\r\n  };","import React, { useState, Fragment, useContext, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  Badge,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport RegistroInfoGenerales from \"./DatosGenerales/registrarInfoGeneral\";\r\nimport RegistroInfoAdidional from \"../Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport CargarImagenesProducto from \"./Imagenes/cargarImagenesProducto\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistroAlmacenInicial from \"./Inventario&Almacen/AlmacenInicial\";\r\nimport ColoresTallas from \"./TallasColores/TallasColores\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO,\r\n  OBTENER_CONSULTAS,\r\n  ACTUALIZAR_PRODUCTO,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { validaciones } from \"./validaciones\";\r\nimport CentroCostos from \"./CentroCostos/CentroCostos\";\r\nimport PrecioPlazos from \"./PrecioPlazos/PrecioPlazos\";\r\n\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaSecundaria,\r\n  initial_state_unidadesVenta,\r\n} from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  Edit,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n} from \"@material-ui/icons\";\r\nimport { validateJsonEdit } from \"./validateDatos\";\r\n/* import { cleanTypenames } from \"../../../../config/reuserFunctions\"; */\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root_app: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    maxHeight: \"80vh\",\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\nexport default function CrearProducto({\r\n  accion,\r\n  datos,\r\n  productosRefetch,\r\n  fromCompra,\r\n  getProductos,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    setUpdate,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n    almacen_existente,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const tipo = datos_generales.tipo_producto;\r\n\r\n  /* Mutations */\r\n  const [crearProducto] = useMutation(CREAR_PRODUCTO);\r\n  const [actualizarProducto] = useMutation(ACTUALIZAR_PRODUCTO);\r\n\r\n  const toggleModal = (producto) => {\r\n    setOpen(!open);\r\n    setUpdate(accion);\r\n    if (producto && accion) {\r\n      setInitialStates(producto);\r\n    } else {\r\n      resetInitialStates();\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  /* ###### GUARDAR LA INFO EN LA BD ###### */\r\n\r\n  const saveData = async () => {\r\n    const validate = validaciones(\r\n      datos_generales,\r\n      precios,\r\n      almacen_inicial,\r\n      presentaciones,\r\n      almacen_existente\r\n    );\r\n\r\n    if (validate.error) {\r\n      setValidacion(validate);\r\n      return;\r\n    }\r\n    setValidacion(validate);\r\n    if (presentaciones.length > 0) {\r\n      const pres = presentaciones.filter(\r\n        (res) => res.color._id && res.medida._id\r\n      );\r\n\r\n      if (pres.length !== presentaciones.length) {\r\n        setValidacion({\r\n          error: true,\r\n          message: \"Faltan medidas o colores a tus presentaciones\",\r\n          vista7: true,\r\n        });\r\n        setAlert({\r\n          message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [{...unidadVentaXDefecto}, {...unidadVentaSecundaria}];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    /* console.log(copy_unidadesVenta); */\r\n\r\n    precios.precios_producto = preciosP;\r\n\r\n    let imagenes_without_aws = imagenes;\r\n    if (accion) {\r\n      imagenes_without_aws = [...imagenes].filter((res) => !res.key_imagen);\r\n    }\r\n\r\n    let input = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      imagenes: imagenes_without_aws,\r\n      imagenes_eliminadas,\r\n      almacen_inicial,\r\n      centro_de_costos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      presentaciones_eliminadas,\r\n      precio_plazos: preciosPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    /* const clean_data = cleanTypenames(input); */\r\n    /* console.log(input); */\r\n\r\n    setLoading(true);\r\n     try {\r\n      if (accion) {\r\n        const result = await actualizarProducto({\r\n          variables: {\r\n            input,\r\n            id: datos._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.actualizarProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        const result = await crearProducto({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      toggleModal();\r\n      if (fromCompra) {\r\n        getProductos();\r\n      } else {\r\n        productosRefetch();\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta(initial_state_unidadesVenta);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n    setValue(0);\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    /* const producto = cleanTypenames(product); */\r\n    /* console.log(producto); */\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = producto.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const { keyCode } = event;\r\n    if (keyCode === 114) {\r\n      document.getElementById(\"modal-registro-product\").click();\r\n    }\r\n  } /* CODIGO PARA PODER EJECUTAR LAS VENTANAS A BASE DE LAS TECLAS */\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (!accion && value === 3) {\r\n      return saveButton;\r\n    } else if (accion && tipo === \"OTROS\" && value === 3) {\r\n      return saveButton;\r\n    } else if (accion && tipo !== \"OTROS\" && value === 4) {\r\n      return saveButton;\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setValue(value + 1)}\r\n          size=\"large\"\r\n          endIcon={<NavigateNext />}\r\n          disableElevation\r\n        >\r\n          Siguiente\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\r\n      {!accion ? (\r\n        fromCompra ? (\r\n          <IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            id=\"modal-registro-product\"\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => toggleModal()}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton color=\"default\" onClick={() => toggleModal(datos)}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <div className={classes.root_app}>\r\n          <Tabs\r\n            style={{ minWidth: \"200px\" }}\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            orientation=\"vertical\"\r\n            scrollButtons=\"on\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            aria-label=\"scrollable force tabs example\"\r\n            className={classes.tabs}\r\n          >\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Datos generales\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista1 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                    alt=\"icono registro\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(0)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios de venta\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista2 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/etiqueta-de-precio.svg\"\r\n                    alt=\"icono venta\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Inventario y almacen\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista3 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tarea-completada.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Centro de costos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            /> */}\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios a plazos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/calendar.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            /> */}\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Imagenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/imagenes.svg\"\r\n                  alt=\"icono imagenes\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            />\r\n            {accion ? (\r\n              datos_generales.tipo_producto !== \"OTROS\" ? (\r\n                <Tab\r\n                  style={{ minWidth: \"200px\" }}\r\n                  label=\"Tallas y colores\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista7 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                        alt=\"icono colores\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(4)}\r\n                />\r\n              ) : null\r\n            ) : null}\r\n          </Tabs>\r\n          <Box width=\"100%\">\r\n            <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => toggleModal()}\r\n                size=\"large\"\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n            <DialogContent className={classes.dialogContent}>\r\n              <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n              <ContenidoModal value={value} />\r\n            </DialogContent>\r\n          </Box>\r\n        </div>\r\n\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ContenidoModal = ({ value }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, [refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <TabPanel value={value} index={0}>\r\n        <RegistroInfoGenerales\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <RegistroInfoAdidional />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <RegistroAlmacenInicial\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      {/* <TabPanel value={value} index={3}>\r\n        <CentroCostos\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel> */}\r\n      {/* <TabPanel value={value} index={4}>\r\n        <PrecioPlazos />\r\n      </TabPanel> */}\r\n      <TabPanel value={value} index={3}>\r\n        <CargarImagenesProducto />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <ColoresTallas\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function PreciosDeVentaCompras() {\r\n  const { preciosVenta } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Utilidad\", \"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {preciosVenta.map((data, index) => (\r\n                  <RenderPrecios\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    tipo={tipo}\r\n                  />\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPrecios = ({ data, tipo, index }) => {\r\n  const {\r\n    preciosVenta,\r\n    setPreciosVenta,\r\n    datosProducto,\r\n    productoOriginal,\r\n  } = useContext(ComprasContext);\r\n  const { precios } = productoOriginal;\r\n\r\n  const [precio_neto, setPrecioNeto] = useState(data.precio_neto);\r\n\r\n  //creamos variables para trabajar con ellas, no causar errores y afectar las originales\r\n  let copy_preciosVenta = { ...preciosVenta[index] };\r\n  let preciosVenta_base = [...preciosVenta];\r\n\r\n  let precio_unitario_con_impuesto =\r\n    /* datosProducto.costo / datosProducto.cantidad; */\r\n    datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n  let precio_unitario_sin_impuesto =\r\n    /* precios.precio_de_compra.precio_sin_impuesto / datosProducto.cantidad; */\r\n    precios.precio_de_compra.precio_sin_impuesto /\r\n    precios.unidad_de_compra.cantidad;\r\n\r\n  if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n  if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n  const calculosCompra = useCallback(() => {\r\n    if (copy_preciosVenta.numero_precio === data.numero_precio) {\r\n      copy_preciosVenta.precio_neto = precio_unitario_con_impuesto;\r\n      setPrecioNeto(precio_unitario_con_impuesto);\r\n\r\n      let utilidad_base = data.utilidad ? data.utilidad : 0;\r\n      let utilidad = utilidad_base / 100;\r\n\r\n      const precio_venta = parseFloat(\r\n        (\r\n          precio_unitario_sin_impuesto * utilidad +\r\n          precio_unitario_sin_impuesto\r\n        ).toFixed(2)\r\n      );\r\n\r\n      copy_preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      if (precios.iva_activo || precios.ieps_activo) {\r\n        const precio_neto =\r\n          precio_unitario_con_impuesto +\r\n          precio_unitario_con_impuesto * utilidad;\r\n\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_neto.toFixed(2)));\r\n      } else {\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_venta.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_venta.toFixed(2)));\r\n      }\r\n      preciosVenta_base.splice(index, 1, copy_preciosVenta);\r\n      setPreciosVenta(preciosVenta_base);\r\n    }\r\n  }, [datosProducto.costo, datosProducto.cantidad]);\r\n\r\n  useEffect(() => {\r\n    if (data.numero_precio === 1) {\r\n      calculosCompra();\r\n    } else if (data.numero_precio > 1 && precio_neto) {\r\n      calculosCompra();\r\n    }\r\n  }, [calculosCompra]);\r\n\r\n  switch (tipo) {\r\n    case \"Utilidad\":\r\n      return <TableCell style={{ border: 0 }}>{data.utilidad}%</TableCell>;\r\n    case \"Precio de venta\":\r\n      return (\r\n        <TableCell style={{ border: 0 }}>\r\n          ${parseFloat(precio_neto.toFixed(2))}\r\n        </TableCell>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { Box, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function DescuentosInputs() {\r\n  const { datosProducto, setDatosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { precio_sin_impuesto, precio_con_impuesto } = precio_de_compra;\r\n  const iva_precio_actual = precio_de_compra.iva;\r\n  const ieps_precio_actual = precio_de_compra.ieps;\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const { costo } = datosProducto;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n\r\n  let cantidad_total = 0;\r\n  let cantida_suma = 0;\r\n  if (presentaciones.length > 0) {\r\n    presentaciones.forEach((presentacion) => {\r\n      const { cantidad_nueva } = presentacion;\r\n      let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n      cantida_suma += nueva;\r\n    });\r\n    if (isNaN(cantida_suma)) return;\r\n    cantidad_total = cantida_suma;\r\n  } else {\r\n    cantidad_total = datosProducto.cantidad;\r\n  }\r\n\r\n  let PCSI_ACTUAL_TOTAL = PCSI_actual * cantidad_total;\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual * cantidad_total,\r\n        descuento_porcentaje: 0,\r\n        descuento_precio: 0,\r\n        subtotal_descuento: precio_sin_impuesto * cantidad_total,\r\n        total_descuento: precio_con_impuesto * cantidad_total,\r\n        iva_total: iva_precio_actual * cantidad_total,\r\n        ieps_total: ieps_precio_actual * cantidad_total,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (PCSI_ACTUAL_TOTAL * porcentaje) / 100\r\n    );\r\n\r\n    let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(impuestos.toFixed(2)),\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n      iva_total: parseFloat(iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(ieps_precio.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual * cantidad_total,\r\n        descuento_porcentaje: 0,\r\n        descuento_precio: 0,\r\n        subtotal_descuento: precio_sin_impuesto * cantidad_total,\r\n        total_descuento: precio_con_impuesto * cantidad_total,\r\n        iva_total: iva_precio_actual * cantidad_total,\r\n        ieps_total: ieps_precio_actual * cantidad_total,\r\n      });\r\n      return;\r\n    }\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / PCSI_ACTUAL_TOTAL) * 100\r\n    );\r\n    let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: impuestos,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n      iva_total: parseFloat(iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(ieps_precio.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" width={200}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPrecio(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_precio}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n          }}\r\n        />\r\n        <Box mr={1} />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_porcentaje}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n          }}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const ClienteCtx = createContext();\r\n\r\nexport const ClienteProvider = ({ children }) => {\r\n\tconst [ cliente, setCliente ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_cliente: true\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState(false);\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\tconst [ clientes, setClientes ] = useState([]);\r\n\tconst [updateClientVenta, setUpdateClientVenta] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<ClienteCtx.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcliente,\r\n\t\t\t\tsetCliente,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate,\r\n\t\t\t\tsetUpdateClientVenta,\r\n\t\t\t\tupdateClientVenta,\r\n\t\t\t\tclientes,\r\n\t\t\t\tsetClientes\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ClienteCtx.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  InputAdornment,\r\n  IconButton,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Cached, DeleteOutline } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoBasica({ tipo, accion }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente, error } = useContext(ClienteCtx);\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setCliente({\r\n        ...cliente,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [cliente, setCliente]\r\n  );\r\n\r\n  const removerImagen = () => {\r\n    setCliente({\r\n      ...cliente,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      [name]: value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      direccion: { ...cliente.direccion, [name]: value },\r\n    });\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const clave_cliente = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setCliente({\r\n      ...cliente,\r\n      clave_cliente,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.input}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          xs={12}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${cliente.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n          <Box>\r\n            <Button\r\n              color=\"secondary\"\r\n              size=\"medium\"\r\n              onClick={removerImagen}\r\n              startIcon={<DeleteOutline />}\r\n            >\r\n              Remover imagen\r\n            </Button>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <Grid container spacing={2}>\r\n            {accion === \"registrar\" ? null : (\r\n              <Grid item md={3} xs={12}>\r\n                <Typography className={classes.title}>N. Cliente</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"numero_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.numero_cliente ? cliente.numero_cliente : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled\r\n                  type=\"number\"\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={accion === \"registrar\" ? 12 : 9} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre{\" \"}\r\n                {tipo === \"CLIENTE\" ? \"cliente\" : \"proveedor\"}\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.nombre_cliente}\r\n                name=\"nombre_cliente\"\r\n                variant=\"outlined\"\r\n                value={cliente.nombre_cliente ? cliente.nombre_cliente : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            {tipo === \"CLIENTE\" ? null : (\r\n              <Grid item md={4} xs={12}>\r\n                <Typography className={classes.title}>\r\n                  <span>* </span>Representante\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.representante}\r\n                  name=\"representante\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.representante ? cliente.representante : \"\"}\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n              </Grid>\r\n            )}\r\n            {tipo !== \"CLIENTE\" ? null : (\r\n              <Fragment>\r\n                <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Clave(Tarjeta de puntos)\r\n                  </Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={error && !cliente.clave_cliente}\r\n                    name=\"clave_cliente\"\r\n                    variant=\"outlined\"\r\n                    value={cliente.clave_cliente ? cliente.clave_cliente : \"\"}\r\n                    helperText={error ? \"Campo Requerido\" : \"\"}\r\n                    onChange={obtenerCampos}\r\n                    InputProps={{\r\n                      endAdornment: (\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            color=\"primary\"\r\n                            size=\"small\"\r\n                            onClick={() => GenCodigoBarras()}\r\n                          >\r\n                            <Cached />\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      ),\r\n                    }}\r\n                    type=\"number\"\r\n                  />\r\n                </Grid>\r\n                <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n                  <Typography className={classes.title}>\r\n                    Fecha nacimiento\r\n                  </Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_nacimiento\"\r\n                    variant=\"outlined\"\r\n                    type=\"date\"\r\n                    onChange={obtenerCampos}\r\n                    value={\r\n                      cliente.fecha_nacimiento ? cliente.fecha_nacimiento : \"\"\r\n                    }\r\n                  />\r\n                </Grid>\r\n              </Fragment>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>CURP</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"curp\"\r\n                variant=\"outlined\"\r\n                value={cliente.curp ? cliente.curp : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Email\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.email}\r\n                name=\"email\"\r\n                variant=\"outlined\"\r\n                value={cliente.email ? cliente.email : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Telefono\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.telefono}\r\n                name=\"telefono\"\r\n                variant=\"outlined\"\r\n                value={cliente.telefono ? cliente.telefono : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Num. Celular</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"celular\"\r\n                variant=\"outlined\"\r\n                value={cliente.celular ? cliente.celular : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Box my={2}>\r\n            <Typography className={classes.title}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Calle\r\n              </Typography>\r\n\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.calle ? cliente.direccion.calle : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Num. Ext\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_ext ? cliente.direccion.no_ext : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>Num. Int</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_int ? cliente.direccion.no_int : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Código postal\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.codigo_postal\r\n                    ? cliente.direccion.codigo_postal\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Colonia\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.colonia ? cliente.direccion.colonia : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Municipio\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.municipio ? cliente.direccion.municipio : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Localidad</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.localidad ? cliente.direccion.localidad : \"\"\r\n                }\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Estado\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.estado ? cliente.direccion.estado : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Pais\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.pais ? cliente.direccion.pais : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider, Grid, InputAdornment } from \"@material-ui/core\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { DateRange } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoCredito({ tipo, cliente_base }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente } = useContext(ClienteCtx);\r\n\r\n  const credito_disponible = cliente_base ? cliente_base.credito_disponible : 0;\r\n  const limite_credito = cliente_base ? cliente_base.limite_credito : 0;\r\n  const credito_usado = limite_credito - credito_disponible;\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_descuento\") {\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (name === \"limite_credito\") {\r\n      let disponible = parseInt(e.target.value) - credito_usado;\r\n\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n        credito_disponible: disponible,\r\n      });\r\n      return;\r\n    }\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {tipo === \"CLIENTE\" ? (\r\n        <Box my={3}>\r\n          <Alert severity=\"info\">\r\n            Si deseas hacer facturas a este cliente el <b>RFC</b> y la{\" \"}\r\n            <b>Razon social</b> son obligatorios.\r\n          </Alert>\r\n        </Box>\r\n      ) : null}\r\n\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography>\r\n            <b>Crédito utilizado:</b> ${\" \"}\r\n            {credito_usado ? formatoMexico(credito_usado) : 0.0}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>\r\n            <b>Crédito disponible:</b> ${\" \"}\r\n            {cliente.credito_disponible\r\n              ? formatoMexico(cliente.credito_disponible)\r\n              : 0.0}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>RFC</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"rfc\"\r\n            variant=\"outlined\"\r\n            value={cliente.rfc ? cliente.rfc : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>Razon social</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"razon_social\"\r\n            variant=\"outlined\"\r\n            value={cliente.razon_social ? cliente.razon_social : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        {/* <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Descuento</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"numero_descuento\"\r\n            variant=\"outlined\"\r\n            value={cliente.numero_descuento ? cliente.numero_descuento : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid> */}\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Limite de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"limite_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.limite_credito ? cliente.limite_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n            error={credito_usado > cliente.limite_credito}\r\n            InputProps={{\r\n              startAdornment: <InputAdornment>$</InputAdornment>\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Días de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"dias_credito\"\r\n            variant=\"outlined\"\r\n            placeholder=\"30\"\r\n            value={cliente.dias_credito ? cliente.dias_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            InputProps={{\r\n              startAdornment: <InputAdornment><DateRange color=\"action\" /></InputAdornment>\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {tipo !== \"CLIENTE\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography className={classes.title}>Datos bancarios</Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>Banco</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"banco\"\r\n                variant=\"outlined\"\r\n                value={cliente.banco ? cliente.banco : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>\r\n                No. de Cuenta Bancaria\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"numero_cuenta\"\r\n                variant=\"outlined\"\r\n                value={cliente.numero_cuenta ? cliente.numero_cuenta : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CLIENTE = gql`\r\n\tmutation crearCliente($input: CrearClienteInput) {\r\n\t\tcrearCliente(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CLIENTES = gql`\r\n\tquery obtenerClientes($tipo: String!, $filtro: String, $empresa: ID!, $eliminado: Boolean) {\r\n\t\tobtenerClientes(tipo: $tipo, filtro: $filtro, empresa: $empresa, eliminado: $eliminado) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tcredito_disponible\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t\tbanco\r\n\t\t\tnumero_cuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\tmonedero_electronico\r\n\t\t\tfecha_nacimiento\r\n    \t\tfecha_registro\r\n\t\t\teliminado\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CLIENTE = gql`\r\n\tmutation actualizarCliente($input: ActualizarClienteInput, $id: ID!) {\r\n\t\tactualizarCliente(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CLIENTE = gql`\r\n\tmutation eliminarCliente($id: ID!) {\r\n\t\teliminarCliente(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport RegistrarInfoBasica from \"./RegistrarInfoBasica\";\r\nimport RegistrarInfoCredito from \"./RegistroInfoCredito\";\r\nimport { Add, Close, Done, Edit } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CLIENTE,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { Toolbar } from \"@material-ui/core\";\r\n\r\nexport default function CrearCliente({\r\n  tipo,\r\n  accion,\r\n  datos,\r\n  refetch,\r\n  fromCompras,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const {\r\n    cliente,\r\n    setCliente,\r\n    setError,\r\n    updateClientVenta,\r\n    setUpdateClientVenta,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setCliente({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      estado_cliente: true,\r\n    });\r\n  }, [setCliente]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      setCliente(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearCliente] = useMutation(CREAR_CLIENTE);\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    let copy_cliente = { ...cliente };\r\n    if (\r\n      !copy_cliente.nombre_cliente ||\r\n      !copy_cliente.telefono ||\r\n      !copy_cliente.email\r\n    ) {\r\n      if (tipo !== \"CLIENTE\" && !copy_cliente.representante) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(true);\r\n      return;\r\n    }\r\n    if (tipo === \"CLIENTE\") {\r\n      if (\r\n        !copy_cliente.clave_cliente ||\r\n        !copy_cliente.direccion.calle ||\r\n        !copy_cliente.direccion.municipio ||\r\n        !copy_cliente.direccion.estado ||\r\n        !copy_cliente.direccion.pais\r\n      ) {\r\n        setError(true);\r\n        return;\r\n      }\r\n    }\r\n    if (\r\n      accion !== \"registrar\" &&\r\n      datos.limite_credito &&\r\n      datos.credito_disponible\r\n    ) {\r\n      let credito_usado = datos.limite_credito - datos.credito_disponible;\r\n      if (credito_usado > copy_cliente.limite_credito) {\r\n        setAlert({\r\n          message: \"Crédito utilizado es mayor al límite de crédito\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        copy_cliente.tipo_cliente = tipo;\r\n        copy_cliente.empresa = sesion.empresa._id;\r\n        copy_cliente.sucursal = sesion.sucursal._id;\r\n        if (tipo === \"CLIENTE\") {\r\n          copy_cliente.representante = \"\";\r\n        }\r\n        const input = copy_cliente;\r\n        const clienteBase = await crearCliente({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (ventas === true) {\r\n          const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n          let venta_actual = venta === null ? {} : venta;\r\n          // console.log(venta_actual);\r\n          localStorage.setItem(\r\n            \"DatosVentas\",\r\n            JSON.stringify({\r\n              subTotal:\r\n                venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n              total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n              impuestos:\r\n                venta_actual.impuestos === undefined\r\n                  ? 0\r\n                  : venta_actual.impuestos,\r\n              iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n              ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n              descuento:\r\n                venta_actual.descuento === undefined\r\n                  ? 0\r\n                  : venta_actual.descuento,\r\n              monedero:\r\n                venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n              // tipo_cambio: venta_actual.tipo_cambio\r\n              //   ? venta_actual.tipo_cambio\r\n              //   : {},\r\n              cliente: clienteBase.data.crearCliente,\r\n              venta_cliente: true,\r\n              productos:\r\n                venta_actual.productos?.length > 0\r\n                  ? venta_actual.productos\r\n                  : [],\r\n              tipo_emision: venta_actual.tipo_emision\r\n                ? venta_actual.tipo_emision\r\n                : \"TICKET\",\r\n            })\r\n          );\r\n          setUpdateClientVenta(!updateClientVenta);\r\n          onCloseModal();\r\n          handleClickOpen();\r\n        }\r\n      } else {\r\n        const {\r\n          numero_cliente,\r\n          _id,\r\n          clave_cliente,\r\n          sucursal,\r\n          empresa,\r\n          ...input\r\n        } = copy_cliente;\r\n        await actualizarCliente({\r\n          variables: {\r\n            input: input,\r\n            id: copy_cliente._id,\r\n          },\r\n        });\r\n      }\r\n      if (refetch) {\r\n        refetch();\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError(false);\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      setLoading(false);\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        fromCompras ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            onCloseModal();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\">\r\n                {accion === \"registrar\" ? \"Registrar\" : \"Actualizar\"}\r\n              </Typography>\r\n              <Box flexGrow={1} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"large\"\r\n                onClick={() => onCloseModal()}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Container>\r\n            <form id=\"crear-cliente-form\" onSubmit={saveData}>\r\n              <Typography>\r\n                <b>Información básica</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoBasica tipo={tipo} accion={accion} />\r\n              <Box my={2} />\r\n              <Typography>\r\n                <b>Información de credito</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoCredito\r\n                tipo={tipo}\r\n                accion={accion}\r\n                cliente_base={datos}\r\n              />\r\n            </form>\r\n          </Container>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            type=\"submit\"\r\n            form=\"crear-cliente-form\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COMPRA = gql`\r\n  mutation crearCompra(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompra(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_COMPRA_ESPERA = gql`\r\n  mutation crearCompraEnEspera(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompraEnEspera(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_COMPRA = gql`\r\n  mutation cancelarCompra($empresa: ID!, $sucursal:ID!, $id_compra: ID!, $data_sesion: cancelarCompraInput){\r\n    cancelarCompra(empresa:$empresa, sucursal:$sucursal, id_compra: $id_compra, data_sesion: $data_sesion){\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_REALIZADAS = gql`\r\n  query obtenerComprasRealizadas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $fecha: String\r\n  ) {\r\n    obtenerComprasRealizadas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      fecha: $fecha\r\n    ) {\r\n      _id\r\n      estatus_credito \r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      status\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_ESPERA = gql`\r\n  query obtenerComprasEnEspera($empresa: ID!, $sucursal: ID!, $filtro: String) {\r\n    obtenerComprasEnEspera(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      en_espera\r\n      proveedor {\r\n        id_proveedor\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      productos {\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              ieps\r\n              iva\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            granel\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          presentaciones {\r\n            _id\r\n            almacen\r\n            cantidad\r\n            cantidad_nueva\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        id_producto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        subtotal_descuento\r\n        total_descuento\r\n      }\r\n      impuestos\r\n      subtotal\r\n      total\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CONSULTA_GENERAL_PRODUCTO = gql`\r\n  query obtenerConsultaGeneralCompras($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralCompras(empresa: $empresa, sucursal: $sucursal) {\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          granel\r\n        }\r\n        imagenes {\r\n          url_imagen\r\n          location_imagen\r\n          key_imagen\r\n          extencion_imagen\r\n        }\r\n        centro_de_costos {\r\n          cuenta\r\n          id_cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          empresa\r\n          sucursal\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_barras\r\n          color {\r\n            hex\r\n            nombre\r\n            _id\r\n          }\r\n          existencia\r\n          medida {\r\n            talla\r\n            tipo\r\n            _id\r\n          }\r\n          nombre_comercial\r\n          precio\r\n        }\r\n        medidas_registradas\r\n        empresa\r\n        sucursal\r\n        usuario\r\n      }\r\n      proveedores {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n        default_almacen\r\n        id_usuario_encargado {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n          email\r\n          imagen\r\n          estado_usuario\r\n        }\r\n        id_sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          usuario_sucursal\r\n        }\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_COMPRA_ESPERA = gql`\r\n  mutation eliminarCompraEnEspera($id: ID!) {\r\n    eliminarCompraEnEspera(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { initial_state_precios } from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from 'moment';\r\n\r\nexport const initial_state_datosProducto = {\r\n  producto: {},\r\n  costo: 0,\r\n  cantidad: 0,\r\n  cantidad_regalo: 0,\r\n  unidad_regalo: '',\r\n  cantidad_total: 0,\r\n  descuento_porcentaje: 0,\r\n  descuento_precio: 0,\r\n  iva_total: 0,\r\n  ieps_total: 0,\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  mantener_precio: true,\r\n  impuestos_descuento: 0,\r\n  subtotal_descuento: 0,\r\n  total_descuento: 0,\r\n};\r\n\r\nexport const initial_state_datosCompra = {\r\n  productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n};\r\n\r\nexport const initial_state_precios_venta = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_productoOriginal = {\r\n  precios: initial_state_precios,\r\n};\r\nexport const initial_state_productosCompra = [];\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport RegistroProvedor from \"../../../Catalogos/Cliente/CrearCliente\";\r\nimport RegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTA_GENERAL_PRODUCTO } from \"../../../../../gql/Compras/compras\";\r\nimport { ErrorOutline } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nexport default function DatosProveedorAlmacen({ getProductos, status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosCompra,\r\n    setDatosCompra,\r\n    setDatosProducto,\r\n    productosCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONSULTA_GENERAL_PRODUCTO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n    }\r\n  );\r\n\r\n  const obtenerProveedorAlmacen = (tipo, value) => {\r\n    if (!value) {\r\n      setDatosCompra({ ...datosCompra, [tipo]: {} });\r\n      return;\r\n    }\r\n    if (tipo === \"proveedor\") {\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        proveedor: {\r\n          id_proveedor: value._id,\r\n          nombre_cliente: value.nombre_cliente,\r\n          numero_cliente: value.numero_cliente,\r\n          clave_cliente: value.clave_cliente,\r\n        },\r\n      });\r\n    } else {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      resetInitialStates();\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        almacen: {\r\n          id_almacen: value._id,\r\n          nombre_almacen: value.nombre_almacen,\r\n          default_almacen: value.default_almacen,\r\n        },\r\n      });\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: value._id,\r\n        almacen: value.nombre_almacen,\r\n        default_almacen: value.default_almacen,\r\n      });\r\n      getProductos(value._id);\r\n    }\r\n  };\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  const errorRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          value=\"Error\"\r\n          error\r\n          disabled\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <ErrorOutline fontSize=\"default\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  const loadingRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          disabled\r\n          value=\"Cargando...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <CircularProgress size={24} />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {loadingRender}\r\n        {loadingRender}\r\n        {loadingRender}\r\n      </Grid>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Grid container spacing={2} alignItems=\"center\">\r\n          {errorRender}\r\n          {errorRender}\r\n          {errorRender}\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  const { almacenes, proveedores } = data.obtenerConsultaGeneralCompras;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-proveedor\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={proveedores}\r\n              getOptionLabel={(option) => option.nombre_cliente}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Proveedor\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) =>\r\n                obtenerProveedorAlmacen(\"proveedor\", value)\r\n              }\r\n              getOptionSelected={(option) => option.nombre_cliente}\r\n              value={\r\n                datosCompra.proveedor.nombre_cliente\r\n                  ? datosCompra.proveedor\r\n                  : null\r\n              }\r\n            />\r\n            <RegistroProvedor\r\n              accion=\"registrar\"\r\n              tipo=\"PROVEEDOR\"\r\n              refetch={refetch}\r\n              fromCompras={true}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-almacen\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={almacenes}\r\n              getOptionLabel={(option) => option.nombre_almacen}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Almacen\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerProveedorAlmacen(\"almacen\", value)}\r\n              getOptionSelected={(option) => option.nombre_almacen}\r\n              value={\r\n                datosCompra.almacen.nombre_almacen ? datosCompra.almacen : null\r\n              }\r\n            />\r\n            <AlmacenProvider>\r\n              <RegistroAlmacen accion=\"registrar\" fromEmergent={true} refetch={refetch} />\r\n            </AlmacenProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_registro: e.target.value,\r\n                });\r\n              }}\r\n              value={datosCompra.fecha_registro}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function MostrarPrecios() {\r\n  const { datosProducto } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>${formatoMexico(datosProducto.subtotal_descuento)}</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>${formatoMexico(datosProducto.impuestos_descuento)}</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>{datosProducto.descuento_porcentaje}%</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>\r\n            $\r\n            {formatoMexico(\r\n              datosProducto.total_descuento\r\n            )}\r\n          </b>\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","export const calculos_precios = ({\r\n  productoOriginal,\r\n  porcentaje,\r\n  cantidad,\r\n  costo,\r\n}) => {\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { precio_sin_impuesto, precio_con_impuesto } = precio_de_compra;\r\n  const iva_precio_actual = precio_de_compra.iva;\r\n  const ieps_precio_actual = precio_de_compra.ieps;\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n  const PCSI_ACTUAL_TOTAL = PCSI_actual * cantidad;\r\n\r\n  let cantidad_descontada = Math.round((PCSI_ACTUAL_TOTAL * porcentaje) / 100);\r\n  let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n\r\n  const iva_precio =\r\n    parseFloat(subtotal_con_descuento) *\r\n    parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n  const ieps_precio =\r\n    parseFloat(subtotal_con_descuento) *\r\n    parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n  const impuestos = iva_precio + ieps_precio;\r\n\r\n  let total = subtotal_con_descuento + impuestos;\r\n  return {\r\n    result: {\r\n      iva_precio,\r\n      ieps_precio,\r\n      impuestos,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      subtotal_con_descuento,\r\n      total,\r\n    },\r\n    anterior: {\r\n      impuesto_actual,\r\n      precio_sin_impuesto,\r\n      precio_con_impuesto,\r\n      cantidad,\r\n      iva_precio_actual,\r\n      ieps_precio_actual\r\n    },\r\n  };\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport PreciosProductos from \"./PreciosProductos\";\r\nimport TallasProductos from \"./TallasProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport CrearProducto, {\r\n  initial_state_preciosP,\r\n} from \"../../../Catalogos/Producto/crearProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../../gql/Catalogos/productos\";\r\nimport PreciosDeVentaCompras from \"./PreciosVenta\";\r\nimport { validateJsonEdit } from \"../../../Catalogos/Producto/validateDatos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\nimport DescuentosInputs from \"./Descuentos\";\r\nimport DatosProveedorAlmacen from \"./DatosProveedorAlmacen\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport MostrarPrecios from \"./mostrar_precios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { calculos_precios } from \"./calculos_compra\";\r\n\r\nexport default function DatosProducto({ status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosProducto,\r\n    setDatosProducto,\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    productoOriginal,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    setDatosCompra,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setEditFinish,\r\n    costo,\r\n    setCosto,\r\n    cantidad,\r\n    setCantidad,\r\n    loadingProductos,\r\n    setLoadingProductos,\r\n  } = useContext(ComprasContext);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n  } = useContext(RegProductoContext);\r\n  const [verificate, setVerificate] = useState(false);\r\n\r\n  let count = 0;\r\n  if (status === \"enEspera\" && datosCompra) count = 1;\r\n\r\n  const [cargando, setCargando] = useState(false);\r\n  const client = useApolloClient();\r\n  const [data, setData] = useState();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const getProductos = async (id_almacen) => {\r\n    try {\r\n      let almacen = id_almacen ? id_almacen : datosCompra.almacen._id;\r\n      setLoadingProductos(true);\r\n      const response = await client.query({\r\n        query: OBTENER_PRODUCTOS,\r\n        variables: {\r\n          almacen,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoadingProductos(false);\r\n      setData(response.data);\r\n    } catch (error) {\r\n      setLoadingProductos(false);\r\n      setAlert({\r\n        message: \"Hubo un error al cargar los productos\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [COSTO] = useDebounce(costo, 500);\r\n  const [CANTIDAD] = useDebounce(cantidad, 500);\r\n\r\n  /* useEffect(() => {\r\n    if (loadingProductos) {\r\n      setLoadingProductos(true);\r\n    } else {\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loadingProductos]); */\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCosto(COSTO);\r\n  }, [COSTO]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      obtenerCantidad(CANTIDAD);\r\n    }\r\n  }, [CANTIDAD]);\r\n\r\n  useEffect(() => {\r\n    if (presentaciones.length > 0) {\r\n      let cantida_suma = 0;\r\n      let cantidad_total = 0;\r\n      presentaciones.forEach((presentacion) => {\r\n        const { cantidad_nueva } = presentacion;\r\n        let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n        cantida_suma += nueva;\r\n        if (isNaN(cantida_suma)) cantidad_total = 0;\r\n        cantidad_total = cantida_suma;\r\n      });\r\n      if (cantidad_total) {\r\n        obtenerCantidad(cantidad_total);\r\n      }\r\n    }\r\n  }, [presentaciones]);\r\n\r\n  useEffect(() => {\r\n    if (count === 1) {\r\n      getProductos(datosCompra.almacen._id);\r\n    }\r\n  }, [count]);\r\n\r\n  if (loadingProductos) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"20vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  const obtenerSelectsProducto = (producto) => {\r\n    /* console.log(producto); */\r\n    if (!producto) {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      resetInitialStates();\r\n      return;\r\n    }\r\n\r\n    const {\r\n      ieps,\r\n      iva,\r\n      precio_con_impuesto,\r\n      precio_sin_impuesto,\r\n    } = producto.precios.precio_de_compra;\r\n\r\n    const impuestos = iva + ieps;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      producto,\r\n      id_producto: producto._id,\r\n      costo: precio_con_impuesto,\r\n      cantidad: producto.datos_generales.tipo_producto === \"OTROS\" ? 1 : 0,\r\n      unidad_regalo: producto.precios.unidad_de_compra.unidad,\r\n      descuento_porcentaje: 0,\r\n      descuento_precio: 0,\r\n      subtotal: precio_sin_impuesto,\r\n      impuestos: parseFloat(impuestos.toFixed(2)),\r\n      total: precio_con_impuesto,\r\n      subtotal_descuento: precio_sin_impuesto,\r\n      total_descuento: precio_con_impuesto,\r\n    });\r\n    setInitialStates(producto);\r\n    setCosto(precio_con_impuesto);\r\n    setCantidad(producto.datos_generales.tipo_producto === \"OTROS\" ? 1 : 0);\r\n    setProductoOriginal(producto);\r\n    setPreciosVenta(producto.precios.precios_producto);\r\n  };\r\n\r\n  function obtenerCantidad(value) {\r\n    const resultado = calculos_precios({\r\n      productoOriginal,\r\n      porcentaje: datosProducto.descuento_porcentaje,\r\n      cantidad: value,\r\n      costo: datosProducto.costo,\r\n    });\r\n    const { result, anterior } = resultado;\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad: \"\",\r\n        impuestos_descuento: anterior.impuesto_actual * anterior.cantidad,\r\n        subtotal_descuento: anterior.precio_sin_impuesto * anterior.cantidad,\r\n        total_descuento: anterior.precio_con_impuesto * anterior.cantidad,\r\n        iva_total: anterior.iva_precio_actual * anterior.cantidad,\r\n        ieps_total: anterior.ieps_precio_actual * anterior.cantidad,\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad: parseFloat(value),\r\n      iva_total: parseFloat(result.iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(result.ieps_precio.toFixed(2)),\r\n      impuestos_descuento: parseFloat(result.impuestos.toFixed(2)),\r\n      descuento_porcentaje: result.porcentaje\r\n        ? parseFloat(result.porcentaje)\r\n        : 0,\r\n      descuento_precio: result.cantidad_descontada\r\n        ? parseFloat(result.cantidad_descontada.toFixed(2))\r\n        : 0,\r\n      subtotal_descuento: parseFloat(result.subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(result.total.toFixed(2)),\r\n    });\r\n  }\r\n\r\n  const obtenerCantidadRegalo = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad_regalo: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad_regalo: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerUnidadRegalo = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  function obtenerCosto(value) {\r\n    /* const { name, value } = e.target; */\r\n    const resultado = calculos_precios({\r\n      productoOriginal,\r\n      porcentaje: datosProducto.descuento_porcentaje,\r\n      cantidad: datosProducto.cantidad,\r\n      costo: parseFloat(value),\r\n    });\r\n    const { result, anterior } = resultado;\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: 0,\r\n        impuestos_descuento: anterior.impuesto_actual * anterior.cantidad,\r\n        subtotal_descuento: anterior.precio_sin_impuesto * anterior.cantidad,\r\n        total_descuento: anterior.precio_con_impuesto * anterior.cantidad,\r\n        iva_total: anterior.iva_precio_actual * anterior.cantidad,\r\n        ieps_total: anterior.ieps_precio_actual * anterior.cantidad,\r\n      });\r\n      return;\r\n    }\r\n\r\n    /* const { iva, ieps, precio_de_compra } = datosProducto.producto.precios;\r\n    const iva_precio = precio_de_compra.iva;\r\n    const ieps_precio = precio_de_compra.ieps; \r\n\r\n    let precio_neto = parseFloat(value);\r\n    let subtotal = 0;\r\n    let total = 0;\r\n    let cantidad_descontada = 0;\r\n    let impuesto_actual = iva_precio + ieps_precio;\r\n\r\n    let precio_sin_impuesto = precio_neto - impuesto_actual;\r\n    let nuevo_iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    let nuevo_ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    let nuevo_impuesto = nuevo_ieps + nuevo_iva;\r\n\r\n    if (datosProducto.descuento_porcentaje > 0) {\r\n      cantidad_descontada = Math.round(\r\n        (precio_sin_impuesto * datosProducto.descuento_porcentaje) / 100\r\n      );\r\n      subtotal = precio_sin_impuesto - cantidad_descontada;\r\n      total = subtotal + nuevo_impuesto;\r\n\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n        costo: parseFloat(precio_neto),\r\n        descuento_precio: parseFloat(cantidad_descontada),\r\n        subtotal_descuento: parseFloat(subtotal),\r\n        total_descuento: parseFloat(total),\r\n      });\r\n      return;\r\n    }*/\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      /* impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)), */\r\n      costo: parseFloat(value),\r\n      iva_total: parseFloat(result.iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(result.ieps_precio.toFixed(2)),\r\n      /* subtotal_descuento: parseFloat(precio_sin_impuesto), */\r\n      /*  total_descuento: parseFloat(precio_sin_impuesto + nuevo_impuesto), */\r\n\r\n      impuestos_descuento: parseFloat(result.impuestos.toFixed(2)),\r\n      descuento_porcentaje: result.porcentaje\r\n        ? parseFloat(result.porcentaje.toFixed(2))\r\n        : 0,\r\n      descuento_precio: result.cantidad_descontada\r\n        ? parseFloat(result.cantidad_descontada.toFixed(2))\r\n        : 0,\r\n      subtotal_descuento: parseFloat(result.subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(result.total.toFixed(2)),\r\n    });\r\n  }\r\n\r\n  const agregarCompra = async (actualizar_Precios) => {\r\n    let copy_datosCompra = { ...datosCompra };\r\n    let copy_datosProducto = { ...datosProducto };\r\n    let copy_datosGenerales = { ...datos_generales };\r\n    let copy_presentaciones = [...presentaciones];\r\n    let copy_precios = { ...precios };\r\n    let copy_preciosP = [...preciosP];\r\n    let copy_almacenInicial = { ...almacen_inicial };\r\n    let copy_centroCostos = { ...centro_de_costos };\r\n    let copy_presentacionesEliminadas = [...presentaciones_eliminadas];\r\n    let copy_precioPlazos = { ...preciosPlazos };\r\n\r\n    /* Validaciones */\r\n    setCargando(true);\r\n    if (\r\n      !copy_datosProducto.producto.datos_generales ||\r\n      !copy_datosCompra.proveedor.nombre_cliente ||\r\n      !copy_datosCompra.almacen.nombre_almacen\r\n    ) {\r\n      setCargando(false);\r\n      return;\r\n    }\r\n\r\n    if (copy_datosGenerales.tipo_producto !== \"OTROS\") {\r\n      if (copy_presentaciones.length > 0) {\r\n        const pres = copy_presentaciones.filter(\r\n          (res) => res.color._id && res.medida._id && res.existencia\r\n        );\r\n        if (pres.length !== copy_presentaciones.length) {\r\n          setVerificate(true);\r\n          setCargando(false);\r\n          return;\r\n        }\r\n      } else {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n\r\n    if (actualizar_Precios) {\r\n      copy_datosProducto.mantener_precio = false;\r\n    } else {\r\n      copy_datosProducto.mantener_precio = true;\r\n    }\r\n    copy_precios.precios_producto = copy_preciosP;\r\n\r\n    let producto = {\r\n      datos_generales: await validateJsonEdit(\r\n        copy_datosGenerales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios: copy_precios,\r\n      imagenes,\r\n      imagenes_eliminadas,\r\n      almacen_inicial: copy_almacenInicial,\r\n      centro_de_costos: copy_centroCostos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones: copy_presentaciones,\r\n      presentaciones_eliminadas: copy_presentacionesEliminadas,\r\n      precio_plazos: copy_precioPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    copy_datosProducto.producto = producto;\r\n\r\n    if (copy_datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n      //si son medidas sumas las cantidades de las presetnaciones\r\n      /* if (copy_datosProducto.producto.presentaciones.length > 0) {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n          const { cantidad, cantidad_nueva } = presentacion;\r\n          let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n          copy_datosProducto.cantidad += nueva;\r\n        });\r\n        if (isNaN(copy_datosProducto.cantidad)) copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      } else {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      }\r\n      if (copy_datosProducto.cantidad === 0 || !copy_datosProducto.cantidad) {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      } */\r\n      copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n    } else {\r\n      //Si hay cantidad regalo y es diferente unidad hacer las converciones\r\n      const { cantidad_regalo, cantidad, unidad_regalo } = copy_datosProducto;\r\n      //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n      const factor =\r\n        copy_datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n      const cantiad_media = cantidad * factor;\r\n      let cantidad_regalo_media =\r\n        unidad_regalo === \"Pz\" ||\r\n        unidad_regalo === \"Kg\" ||\r\n        unidad_regalo === \"Lt\"\r\n          ? cantidad_regalo\r\n          : cantidad_regalo * factor;\r\n      let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n      //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n      if (factor > 1) {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media / factor;\r\n      } else {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media;\r\n      }\r\n    }\r\n    copy_datosProducto.impuestos = copy_datosProducto.impuestos_descuento;\r\n    copy_datosProducto.subtotal = copy_datosProducto.subtotal_descuento;\r\n    copy_datosProducto.total = copy_datosProducto.total_descuento;\r\n\r\n    if (isEditing.producto) {\r\n      //se tiene que actualizar el producto en la fila y sumar el subtotal\r\n      let productosCompra_ordenados = [...productosCompra];\r\n      //calculos de totales, subtotales e impuestos de compra general\r\n      /* const {\r\n        iva,\r\n        ieps,\r\n      } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n      //restar datos anteriores\r\n      copy_datosCompra.impuestos -= isEditing.producto.impuestos;\r\n      copy_datosCompra.subtotal -= isEditing.producto.subtotal;\r\n      copy_datosCompra.total -= isEditing.producto.total;\r\n\r\n      /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.ieps_total = ieps * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.subtotal =\r\n        copy_datosProducto.subtotal_descuento *\r\n        copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.impuestos =\r\n        copy_datosProducto.impuestos_descuento *\r\n        copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.total =\r\n        copy_datosProducto.total_descuento * copy_datosProducto.cantidad_total; */\r\n\r\n      let subtotal = parseFloat(\r\n        (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n      );\r\n      let impuestos = parseFloat(\r\n        (copy_datosCompra.impuestos += copy_datosProducto.impuestos)\r\n      );\r\n      let total = parseFloat(\r\n        (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n      );\r\n\r\n      productosCompra_ordenados.splice(isEditing.index, 1, copy_datosProducto);\r\n\r\n      setProductosCompra(productosCompra_ordenados);\r\n      setDatosCompra({\r\n        ...copy_datosCompra,\r\n        subtotal,\r\n        impuestos,\r\n        total,\r\n      });\r\n      setIsEditing({});\r\n      setEditFinish(!editFinish);\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    } else {\r\n      // se agregar el producto normal y verificar si ya esta el producto en la lista\r\n      const existente = productosCompra\r\n        .map((prod_exist, index) => {\r\n          if (prod_exist.id_producto === copy_datosProducto.id_producto) {\r\n            return { prod_exist, index };\r\n          } else {\r\n            return \"\";\r\n          }\r\n        })\r\n        .filter(Boolean);\r\n\r\n      if (existente.length > 0) {\r\n        let productosCompra_ordenados = [...productosCompra];\r\n        const { index, prod_exist } = existente[0];\r\n        /* const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n        copy_datosCompra.subtotal -= prod_exist.subtotal;\r\n        copy_datosCompra.impuestos -= prod_exist.impuestos;\r\n        copy_datosCompra.total -= prod_exist.total;\r\n\r\n        /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total; */\r\n\r\n        let subtotal = parseFloat(\r\n          (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n        );\r\n        let impuestos = parseFloat(\r\n          (copy_datosCompra.impuestos += copy_datosProducto.impuestos).toFixed(\r\n            2\r\n          )\r\n        );\r\n        let total = parseFloat(\r\n          (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n        );\r\n\r\n        productosCompra_ordenados.splice(index, 1, copy_datosProducto);\r\n        setProductosCompra(productosCompra_ordenados);\r\n        setDatosCompra({\r\n          ...copy_datosCompra,\r\n          subtotal,\r\n          impuestos,\r\n          total,\r\n        });\r\n      } else {\r\n        let array_ordenado = [...productosCompra];\r\n        /* const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n        /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total; */\r\n\r\n        let subtotal = parseFloat(\r\n          (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n        );\r\n        let impuestos = parseFloat(\r\n          (copy_datosCompra.impuestos += copy_datosProducto.impuestos).toFixed(\r\n            2\r\n          )\r\n        );\r\n        let total = parseFloat(\r\n          (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n        );\r\n\r\n        array_ordenado.splice(0, 0, copy_datosProducto);\r\n        setProductosCompra(array_ordenado);\r\n        setDatosCompra({\r\n          ...copy_datosCompra,\r\n          subtotal,\r\n          impuestos,\r\n          total,\r\n        });\r\n      }\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (\r\n      datosCompra.almacen.id_almacen &&\r\n      producto.medidas_producto.length === 0\r\n    ) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <DatosProveedorAlmacen status={status} getProductos={getProductos} />\r\n      <Box my={1} />\r\n      <Grid container spacing={1} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography>Código de barras</Typography>\r\n          <Box width={200}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-codigo\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.codigo_barras\r\n                  ? option.datos_generales.codigo_barras\r\n                  : \"N/A\"\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Producto</Typography>\r\n          <Box display=\"flex\" width={250} alignItems=\"center\">\r\n            <Autocomplete\r\n              id=\"combo-box-producto-nombre\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.nombre_comercial\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n            {!datosCompra.almacen.id_almacen ||\r\n            !datosCompra.proveedor.id_proveedor ? (\r\n              <IconButton disabled>\r\n                <Add />\r\n              </IconButton>\r\n            ) : (\r\n              <CrearProducto\r\n                accion={false}\r\n                /* productosRefetch={refetch} */\r\n                getProductos={getProductos}\r\n                fromCompra={true}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Clave</Typography>\r\n          <Box width={140}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-clave\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) => option.datos_generales.clave_alterna}\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Costo</Typography>\r\n          <Box width={100}>\r\n            <TextField\r\n              inputMode=\"decimal\"\r\n              name=\"costo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              disabled={!datosProducto.producto.datos_generales}\r\n              value={costo}\r\n              onChange={(e) => setCosto(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item>\r\n              <Typography>Unidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  aria-readonly=\"true\"\r\n                  value={datosProducto.producto.precios.unidad_de_compra.unidad}\r\n                  disabled\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cantidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    inputProps: { min: 1 },\r\n                  }}\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={cantidad}\r\n                  onChange={(e) => setCantidad(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cant. regalo</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad_regalo\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={datosProducto.cantidad_regalo}\r\n                  onChange={(e) => obtenerCantidadRegalo(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Unidad. regalo</Typography>\r\n              <Box width={100}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  name=\"unidad_regalo\"\r\n                  fullWidth\r\n                >\r\n                  {datosProducto.producto.precios.granel ? (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Kg\">Kg</MenuItem>\r\n                      <MenuItem value=\"Costal\">Costal</MenuItem>\r\n                      <MenuItem value=\"Lt\">Lt</MenuItem>\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Caja\">Caja</MenuItem>\r\n                      <MenuItem value=\"Pz\">Pz</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </FormControl>\r\n              </Box>\r\n            </Grid>\r\n          </Fragment>\r\n        ) : (\r\n          <Grid item>\r\n            <Typography>Cantidad total</Typography>\r\n            <Box width={110}>\r\n              <TextField\r\n                name=\"cantidad\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                fullWidth\r\n                type=\"number\"\r\n                disabled\r\n                value={datosProducto.cantidad}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n\r\n        <Grid item>\r\n          <Typography>Descuento</Typography>\r\n          <DescuentosInputs />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1}>\r\n        <Grid container>\r\n          <Grid item xs={12} md={7} padding=\"checkbox\">\r\n            <PreciosDeVentaCompras />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={5}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Box m={1}>\r\n              <MostrarPrecios />\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              {datosProducto.producto.datos_generales &&\r\n              datosProducto.producto.datos_generales.tipo_producto !==\r\n                \"OTROS\" ? (\r\n                <TallasProductos\r\n                  verificate={verificate}\r\n                  setVerificate={setVerificate}\r\n                />\r\n              ) : null}\r\n\r\n              <Box mx={1} />\r\n              {datosProducto.costo !==\r\n              productoOriginal.precios.precio_de_compra.precio_con_impuesto ? (\r\n                <ModalAgregarCompra\r\n                  agregarCompra={agregarCompra}\r\n                  cargando={cargando}\r\n                />\r\n              ) : (\r\n                <Button\r\n                  style={\r\n                    loadingProductos\r\n                      ? {\r\n                          pointerEvents: \"none\",\r\n                          opacity: 0.4,\r\n                        }\r\n                      : null\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={\r\n                    cargando ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : (\r\n                      <Add />\r\n                    )\r\n                  }\r\n                  disableElevation\r\n                  disabled={\r\n                    datosProducto.producto.datos_generales\r\n                      ? datosProducto.producto.datos_generales.tipo_producto ===\r\n                        \"OTROS\"\r\n                        ? !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo ||\r\n                          !datosProducto.cantidad\r\n                          ? true\r\n                          : false\r\n                        : !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo\r\n                        ? true\r\n                        : false\r\n                      : true\r\n                  }\r\n                  onClick={() => agregarCompra()}\r\n                >\r\n                  {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalAgregarCompra = ({ agregarCompra, cargando }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    datosProducto,\r\n    datosCompra,\r\n    isEditing,\r\n    loadingProductos,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<Add />}\r\n        disableElevation\r\n        disabled={\r\n          datosProducto.producto.datos_generales\r\n            ? datosProducto.producto.datos_generales.tipo_producto === \"OTROS\"\r\n              ? !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo ||\r\n                !datosProducto.cantidad\r\n                ? true\r\n                : false\r\n              : !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo\r\n              ? true\r\n              : false\r\n            : true\r\n        }\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"modal-agregar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-agregar-compra\" style={{ padding: 0 }}>\r\n          <Alert\r\n            severity=\"info\"\r\n            icon={<InfoOutlined style={{ fontSize: 30 }} />}\r\n            style={{ padding: 16 }}\r\n          >\r\n            <AlertTitle style={{ fontSize: 20 }}>\r\n              El costo es diferente al precio de compra actual\r\n            </AlertTitle>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              ¿Desea actualizar los precios o mantenerlos?\r\n            </Typography>\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"default\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              agregarCompra();\r\n              handleClose();\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Mantener\r\n          </Button>\r\n          <PreciosProductos\r\n            cargando={cargando}\r\n            handleClose={handleClose}\r\n            agregarCompra={agregarCompra}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport { initial_state_preciosP } from \"../../../Catalogos/Producto/crearProducto\";\r\n\r\nexport const SetOrResetData = (accion,setStates, producto) => {\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n    datosCompra\r\n  } = setStates\r\n\r\n  if (accion === \"SET\") {\r\n    \r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.presentaciones ? producto.presentaciones : []\r\n    );\r\n    /* if (datosCompra.almacen.id_almacen && !producto.medidas_registradas) */\r\n    if (datosCompra.almacen.id_almacen && producto.presentaciones.length === 0) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n  } else {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  }\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { Close, Edit, Error } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"./initial_states\";\r\nimport { SetOrResetData } from \"./productos/setOrResetData\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaCompras() {\r\n  const classes = useStyles();\r\n  const { productosCompra, loadingProductos, datosCompra } = useContext(\r\n    ComprasContext\r\n  );\r\n\r\n  const productos_ordernados = [...productosCompra];\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer\r\n        className={classes.container}\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Código de barras</TableCell>\r\n              <TableCell>Producto</TableCell>\r\n              <TableCell>Precio de compra</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad regalo</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad total</TableCell>\r\n              <TableCell padding=\"checkbox\">Presentaciones</TableCell>\r\n              <TableCell>IVA Total</TableCell>\r\n              <TableCell>IEPS Total</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Remover</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos_ordernados.map((producto, index) => {\r\n              return (\r\n                <RenderProductosCompra\r\n                  key={index}\r\n                  producto={producto}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Grid container spacing={2} justifyContent=\"flex-end\">\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Subtotal:{\" \"}\r\n            <b>\r\n              ${datosCompra.subtotal ? formatoMexico(datosCompra.subtotal) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Impuestos:{\" \"}\r\n            <b>\r\n              $\r\n              {datosCompra.impuestos ? formatoMexico(datosCompra.impuestos) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              Total: ${datosCompra.total ? formatoMexico(datosCompra.total) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderProductosCompra = ({ producto, index }) => {\r\n  const {\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setCosto,\r\n    setCantidad,\r\n    setIssue,\r\n  } = useContext(ComprasContext);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const productoCTX = useContext(RegProductoContext);\r\n\r\n  const seStates = {\r\n    setDatosGenerales: productoCTX.setDatosGenerales,\r\n    setPrecios: productoCTX.setPrecios,\r\n    setValidacion: productoCTX.setValidacion,\r\n    setPreciosP: productoCTX.setPreciosP,\r\n    setImagenes: productoCTX.setImagenes,\r\n    setUnidadesVenta: productoCTX.setUnidadesVenta,\r\n    almacen_inicial: productoCTX.almacen_inicial,\r\n    setAlmacenInicial: productoCTX.setAlmacenInicial,\r\n    setUnidadVentaXDefecto: productoCTX.setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria: productoCTX.setUnidadVentaSecundaria,\r\n    setCentroDeCostos: productoCTX.setCentroDeCostos,\r\n    setPreciosPlazos: productoCTX.setPreciosPlazos,\r\n    setSubcategorias: productoCTX.setSubcategorias,\r\n    setOnPreview: productoCTX.setOnPreview,\r\n    setSubcostos: productoCTX.setSubcostos,\r\n    setImagenesEliminadas: productoCTX.setImagenesEliminadas,\r\n    setPresentaciones: productoCTX.setPresentaciones,\r\n    setPresentacionesEliminadas: productoCTX.setPresentacionesEliminadas,\r\n    datosCompra,\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsSelected(true);\r\n    setIsEditing({ producto, index, finish: false });\r\n    setDatosProducto(producto);\r\n    SetOrResetData(\"SET\", seStates, producto.producto);\r\n    setProductoOriginal(producto.producto);\r\n    setPreciosVenta(producto.producto.precios.precios_producto);\r\n    setCosto(producto.costo);\r\n    setCantidad(producto.cantidad);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsSelected(false);\r\n    setIsEditing({});\r\n    setDatosProducto(initial_state_datosProducto);\r\n    SetOrResetData(\"RESET\", seStates);\r\n    setCosto(0);\r\n    setCantidad(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(false);\r\n  }, [editFinish]);\r\n\r\n  useEffect(() => {\r\n    if (!producto.cantidad) {\r\n    } else {\r\n      setIssue(false);\r\n    }\r\n  }, [producto.cantidad]);\r\n\r\n  const unidad_producto = producto.producto.precios.unidad_de_compra.unidad;\r\n  const { cantidad, cantidad_regalo, cantidad_total } = producto;\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={isSelected || !cantidad}\r\n      style={\r\n        isEditing.producto && !isSelected\r\n          ? {\r\n              pointerEvents: \"none\",\r\n              opacity: 0.4,\r\n            }\r\n          : null\r\n      }\r\n    >\r\n      <TableCell>\r\n        {producto.producto.datos_generales\r\n          ? producto.producto.datos_generales.codigo_barras\r\n            ? producto.producto.datos_generales.codigo_barras\r\n            : \"-\"\r\n          : \"-\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell width={180}>\r\n        {!cantidad ? (\r\n          <Error color=\"error\" />\r\n        ) : (\r\n          <b>$ {formatoMexico(producto.total)}</b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_regalo}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_total}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.presentaciones.length > 0\r\n          ? producto.producto.presentaciones.length\r\n          : \"N/A\"}\r\n      </TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.iva}% - $${producto.iva_total ? formatoMexico(producto.iva_total) : 0}`}</TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.ieps}% - $${producto.ieps_total ? formatoMexico(producto.ieps_total) : 0}`}</TableCell>\r\n      <TableCell width={50}>\r\n        {isSelected ? (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            onClick={() => handleCancelEdit()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton color=\"primary\" size=\"small\" onClick={() => handleEdit()}>\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        <ModalDeleteProducto index={index} isSelected={isSelected} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalDeleteProducto = ({ index, isSelected }) => {\r\n  const {\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n  } = useContext(ComprasContext);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarCompra = () => {\r\n    let copy_compras = [...productosCompra];\r\n    let objeto_eliminado = copy_compras.splice(index, 1);\r\n\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      subtotal: datosCompra.subtotal - objeto_eliminado[0].subtotal,\r\n      impuestos: datosCompra.impuestos - objeto_eliminado[0].impuestos,\r\n      total: datosCompra.total - objeto_eliminado[0].total,\r\n    });\r\n    setProductosCompra([...copy_compras]);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        onClick={handleClickOpen}\r\n        disabled={isSelected}\r\n      >\r\n        <RemoveCircleOutlineIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          Seguro que quiere eliminar esto de la lista?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={eliminarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Done, Close } from \"@material-ui/icons\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConfirmarCompra({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const [credito, setCredito] = useState(false);\r\n  const [productos_recalculados, setProductosRecalculados] = useState([]);\r\n  const { productosCompra, datosCompra, setDatosCompra, issue } = useContext(\r\n    ComprasContext\r\n  );\r\n  const initial_state_descuento = {\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    descuento_aplicado: false,\r\n    porcentaje: 0,\r\n    cantidad_descontada: 0,\r\n    precio_con_descuento: 0,\r\n  };\r\n  const [descuento_base, setDescuentoBase] = useState(initial_state_descuento);\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const [descuento_debounce, setDescuentoDebounce] = useState(0);\r\n  const [porcentaje_debounce, setPorcentajeDebounce] = useState(0);\r\n\r\n  const cleanStates = () => {\r\n    setCredito(false);\r\n    setProductosRecalculados([]);\r\n    setDescuentoBase(initial_state_descuento);\r\n  };\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const [DESCUENTO] = useDebounce(descuento_debounce, 700);\r\n  const [PORCENTAJE] = useDebounce(porcentaje_debounce, 700);\r\n\r\n  const recalcularPrecios = () => {\r\n    //aplicar descuento a los productos y actualizar precios\r\n    const productos = [...productosCompra];\r\n    const datos_descuento = { ...initial_state_descuento };\r\n    const {\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      descuento_aplicado,\r\n    } = descuento_base;\r\n    let productos_array = [];\r\n\r\n    for (let index = 0; index < productos.length; index++) {\r\n      const producto = productos[index];\r\n      const copy_producto = { ...producto };\r\n      const { precios } = copy_producto.producto;\r\n      const { iva, ieps } = precios;\r\n      const subtotal_actual = copy_producto.subtotal;\r\n\r\n      const cantidad_descontada_product = Math.round(\r\n        (subtotal_actual * porcentaje) / 100\r\n      );\r\n      const subtotal_con_descuento =\r\n        subtotal_actual - cantidad_descontada_product;\r\n\r\n      const iva_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n      const ieps_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n\r\n      const impuestos = iva_precio + ieps_precio;\r\n      const total = subtotal_con_descuento + impuestos;\r\n\r\n      copy_producto.iva_total = iva_precio;\r\n      copy_producto.ieps_total = ieps_precio;\r\n      copy_producto.descuento_porcentaje = porcentaje;\r\n      copy_producto.descuento_precio = cantidad_descontada_product;\r\n      copy_producto.impuestos = impuestos;\r\n      copy_producto.subtotal = subtotal_con_descuento;\r\n      copy_producto.total = total;\r\n\r\n      //sumar los totales a datosCompra\r\n      datos_descuento.impuestos += impuestos;\r\n      datos_descuento.subtotal += subtotal_con_descuento;\r\n      datos_descuento.total += total;\r\n\r\n      //meterlo al nuevo array\r\n      productos_array.push(copy_producto);\r\n    }\r\n    //poner los nuevos productos\r\n    setProductosRecalculados(productos_array);\r\n    datos_descuento.porcentaje = porcentaje;\r\n    datos_descuento.cantidad_descontada = cantidad_descontada;\r\n    datos_descuento.descuento_aplicado = descuento_aplicado;\r\n    setDescuentoBase(datos_descuento);\r\n  };\r\n\r\n  useEffect(() => {\r\n    recalcularPrecios();\r\n  }, [DESCUENTO, PORCENTAJE]);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<Done />}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-confirmacion-compra\"\r\n        aria-describedby=\"dialog-confirmacion-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n              size=\"small\"\r\n              disabled={loading_modal}\r\n            >\r\n              <Close style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={2}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={credito}\r\n                      onChange={(e) => setCredito(e.target.checked)}\r\n                    />\r\n                  }\r\n                  label=\"Compra a crédito\"\r\n                />\r\n                <Typography>Fecha de vencimiento del crédito</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  type=\"date\"\r\n                  onChange={(e) => {\r\n                    setDatosCompra({\r\n                      ...datosCompra,\r\n                      fecha_vencimiento_credito: e.target.value,\r\n                    });\r\n                  }}\r\n                  disabled={!credito}\r\n                  value={datosCompra.fecha_vencimiento_credito}\r\n                />\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"forma_pago\"\r\n                >\r\n                  <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n                  <Select\r\n                    labelId=\"forma_pago\"\r\n                    value={datosCompra.forma_pago}\r\n                    name=\"forma_pago\"\r\n                    onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                    label=\"Forma de pago\"\r\n                  >\r\n                    {formaPago.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{res.Name}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={descuento_base.descuento_aplicado}\r\n                      onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                      name=\"descuento_aplicado\"\r\n                    />\r\n                  }\r\n                  label=\"Aplicar descuento\"\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => {\r\n                    obtenerPrecio(e.target.value);\r\n                    setDescuentoDebounce(e.target.value);\r\n                  }}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => {\r\n                    obtenerPorcentaje(e.target.value);\r\n                    setPorcentajeDebounce(e.target.value);\r\n                  }}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Subtotal:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.subtotal\r\n                        ? datosCompra.subtotal\r\n                        : descuento_base.subtotal\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Impuestos:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.impuestos\r\n                        ? datosCompra.impuestos\r\n                        : descuento_base.impuestos\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Total:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.total\r\n                        ? datosCompra.total\r\n                        : descuento_base.total\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              cleanStates();\r\n              realizarCompraBD(\r\n                false,\r\n                credito,\r\n                handleClose,\r\n                setLoadingModal,\r\n                descuento_base,\r\n                productos_recalculados\r\n              );\r\n            }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal || !datosCompra.forma_pago}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DatosProducto from \"./productos/DatosProducto\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport ListaCompras from \"./TablaCompras\";\r\nimport {\r\n  ComprasContext,\r\n  ComprasProvider,\r\n} from \"../../../../context/Compras/comprasContext\";\r\nimport \"date-fns\";\r\nimport { Done, Timer } from \"@material-ui/icons\";\r\nimport {\r\n  initial_state_datosCompra,\r\n  initial_state_datosProducto,\r\n  initial_state_precios_venta,\r\n  initial_state_productoOriginal,\r\n  initial_state_productosCompra,\r\n} from \"./initial_states\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_COMPRA,\r\n  CREAR_COMPRA_ESPERA,\r\n} from \"../../../../gql/Compras/compras\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ConfirmarCompra from \"./ConfirmarCompra\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCompra({\r\n  compra,\r\n  status,\r\n  handleOpenDetalles,\r\n  refetchEspera,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    if (status === \"enEspera\") {\r\n      handleOpenDetalles();\r\n      refetchEspera();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {status === \"enEspera\" ? (\r\n        <Button\r\n          fullWidth\r\n          onClick={handleClickOpen}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Done />}\r\n        >\r\n          continuar compra\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Abrir una compra\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <ComprasProvider>\r\n        <ModalCompra\r\n          open={open}\r\n          handleClose={handleClose}\r\n          status={status}\r\n          compra={compra}\r\n        />\r\n      </ComprasProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalCompra = ({ open, handleClose, compra, status }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n  } = useContext(ComprasContext);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearCompra] = useMutation(CREAR_COMPRA);\r\n  const [crearCompraEnEspera] = useMutation(CREAR_COMPRA_ESPERA);\r\n\r\n  const isAdmin = sesion ? sesion.accesos.tesoreria.caja_principal.ver : false;\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"enEspera\" && compra && open === true) {\r\n      setDatosCompra(compra);\r\n      setProductosCompra(compra.productos);\r\n    }\r\n  }, [open]);\r\n\r\n  const realizarCompraBD = async (\r\n    compra_en_espera,\r\n    credito,\r\n    handleClose,\r\n    setLoadingModal,\r\n    descuento_compra,\r\n    productos_con_descuento\r\n  ) => {\r\n    let datos = { ...datosCompra };\r\n    let copy_datosProducto = [...productosCompra];\r\n    let productos = copy_datosProducto;\r\n    if (status === \"enEspera\") {\r\n      productos = copy_datosProducto.map((res) => {\r\n        delete res.conflicto;\r\n        return res;\r\n      });\r\n      delete datos.empresa;\r\n      delete datos.sucursal;\r\n      delete datos.usuario;\r\n    }\r\n\r\n    setLoading(true);\r\n    setLoadingModal(true);\r\n    try {\r\n      datos.productos = productos;\r\n\r\n      if (compra_en_espera) {\r\n        datos.en_espera = true;\r\n        const result = await crearCompraEnEspera({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompraEnEspera.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        if (credito) {\r\n          datos.compra_credito = true;\r\n          datos.saldo_credito_pendiente = datos.total;\r\n        }\r\n        if (descuento_compra.descuento_aplicado) {\r\n          const {\r\n            descuento_aplicado,\r\n            subtotal,\r\n            total,\r\n            impuestos,\r\n            ...descuento\r\n          } = descuento_compra;\r\n          datos.productos = productos_con_descuento;\r\n          datos.descuento_aplicado = descuento_compra.descuento_aplicado;\r\n          datos.subtotal = descuento_compra.subtotal;\r\n          datos.impuestos = descuento_compra.impuestos;\r\n          datos.total = descuento_compra.total;\r\n          datos.descuento = descuento;\r\n        }\r\n\r\n        //mandar datos extras para realizar los retiros a cajas o cuentas\r\n        //turno\r\n        let turno = null;\r\n        if (turnoEnCurso) {\r\n          turno = {\r\n            horario_en_turno: turnoEnCurso.horario_en_turno,\r\n            numero_caja: turnoEnCurso\r\n              ? parseInt(turnoEnCurso.numero_caja)\r\n              : null,\r\n            id_caja: turnoEnCurso.id_caja,\r\n            id_usuario: sesion._id,\r\n            token_turno_user: turnoEnCurso.token_turno_user,\r\n            numero_usuario_creador: turnoEnCurso\r\n              ? parseFloat(turnoEnCurso.usuario_en_turno.numero_usuario)\r\n              : null,\r\n            nombre_usuario_creador: turnoEnCurso.usuario_en_turno.nombre,\r\n          };\r\n        }\r\n        datos.turnoEnCurso = turno;\r\n        datos.admin = isAdmin;\r\n        datos.sesion = {\r\n          id_usuario: sesion._id,\r\n          nombre_usuario: sesion.nombre,\r\n          numero_usuario: sesion.numero_usuario,\r\n        };\r\n\r\n        const result = await crearCompra({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompra.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      limpiarCampos();\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n      console.log(error);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n      setAlert({\r\n        message: `Error de servidor`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      /* if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      } */\r\n    }\r\n  };\r\n\r\n  const handleToggleDelete = () => {\r\n    if (productosCompra.length > 0) {\r\n      setOpenDelete(!openDelete);\r\n    } else {\r\n      limpiarCampos();\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      onClose={handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle style={{ padding: 0 }}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Nueva compra\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleToggleDelete}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n              <CancelarCompra\r\n                handleClose={handleClose}\r\n                handleToggleDelete={handleToggleDelete}\r\n                openDelete={openDelete}\r\n              />\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DatosProducto status={status} />\r\n        <Box my={2} />\r\n        <ListaCompras />\r\n      </DialogContent>\r\n\r\n      <DialogActions\r\n        style={{\r\n          justifyContent: status === \"enEspera\" ? \"flex-end\" : \"space-between\",\r\n        }}\r\n      >\r\n        {status === \"enEspera\" ? null : (\r\n          <Button\r\n            autoFocus\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => realizarCompraBD(true)} //realiza la compra en espera en la funcion\r\n            disabled={!productosCompra.length}\r\n            startIcon={<Timer />}\r\n          >\r\n            Compra en espera\r\n          </Button>\r\n        )}\r\n        <ConfirmarCompra realizarCompraBD={realizarCompraBD} />\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CancelarCompra = ({ handleClose, handleToggleDelete, openDelete }) => {\r\n  const {\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setPreciosVenta,\r\n    setProductoOriginal,\r\n    setDatosProducto,\r\n  } = useContext(ComprasContext);\r\n\r\n  const cancelarCompra = () => {\r\n    /* reset states */\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    /* cerrar modales */\r\n    handleToggleDelete();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={openDelete}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleToggleDelete}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          ¿Quieres cancelar esta compra?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleToggleDelete} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={cancelarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosComprasExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ExcelFile\r\n        element={\r\n          <Box display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              startIcon={<CloudDownloadOutlined />}\r\n            >\r\n              Exportar a Excel\r\n            </Button>\r\n          </Box>\r\n        }\r\n        filename={\"Detalle de compra\"}\r\n      >\r\n        <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n          <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n          <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n          <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n          <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n          <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n          <ExcelColumn label=\"Total\" value=\"total\" />\r\n        </ExcelSheet>\r\n        <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n          <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n          <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n          <ExcelColumn label=\"Color\" value=\"color\" />\r\n          <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n          <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n          <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n          <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n          <ExcelColumn label=\"Precio de descuento\" value=\"descuento_precio\" />\r\n          <ExcelColumn\r\n            label=\"Porcentaje de descuento\"\r\n            value=\"descuento_porcentaje\"\r\n          />\r\n          <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n          <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n          <ExcelColumn label=\"Total\" value=\"total\" />\r\n        </ExcelSheet>\r\n      </ExcelFile>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosComprasExcel from \"./ExportarProductosCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n        {compra.status && compra.status === \"CANCELADO\" ? (\r\n          <Chip label=\"Compra Cancelada\" color=\"secondary\" variant=\"outlined\" />\r\n        ) : compra.compra_credito === true ? (\r\n          <Chip\r\n            label={\r\n              compra.credito_pagado === true\r\n                ? \"Credito pagado\"\r\n                : `Saldo pendiente: $${formatoMexico(\r\n                    compra.saldo_credito_pendiente\r\n                  )}`\r\n            }\r\n            style={{\r\n              color:\r\n                compra.compra_credito === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n              borderColor:\r\n                compra.compra_credito === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n            }}\r\n            variant=\"outlined\"\r\n          />\r\n        ) : (\r\n          <Chip label=\"CONTADO\" color=\"inherit\" variant=\"outlined\" />\r\n        )}\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar un producto en esta compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              <ExportarProductosComprasExcel compra={compra} />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CANCELAR_COMPRA } from \"../../../../gql/Compras/compras\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport CircularProgres from \"@material-ui/core/CircularProgress\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelCompraConfirm({ compra, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const isAdmin = sesion ? sesion.accesos.tesoreria.caja_principal.ver : false;\r\n\r\n  const [cancelarCompra] = useMutation(CANCELAR_COMPRA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelarCompraBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      let turno = null;\r\n      if (turnoEnCurso) {\r\n        turno = {\r\n          horario_en_turno: turnoEnCurso.horario_en_turno,\r\n          numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : null,\r\n          id_caja: turnoEnCurso.id_caja,\r\n          id_usuario: sesion._id,\r\n          token_turno_user: turnoEnCurso.token_turno_user,\r\n          numero_usuario_creador: turnoEnCurso\r\n            ? parseFloat(turnoEnCurso.usuario_en_turno.numero_usuario)\r\n            : null,\r\n          nombre_usuario_creador: turnoEnCurso.usuario_en_turno.nombre,\r\n        };\r\n      }\r\n\r\n      const result = await cancelarCompra({\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          id_compra: compra._id,\r\n          data_sesion: {\r\n            turno,\r\n            admin: isAdmin,\r\n            sesion: {\r\n              id_usuario: sesion._id,\r\n              nombre_usuario: sesion.nombre,\r\n              numero_usuario: sesion.numero_usuario,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.cancelarCompra.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        onClick={handleClickOpen}\r\n        disabled={compra.status && compra.status === \"CANCELADO\" ? true : false}\r\n      >\r\n        <Close />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-cancel-compra\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-cancel-compra\">\r\n          {\"¿Está seguro que desea cancelar esta compra?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inhnerit\">\r\n            Cerrar\r\n          </Button>\r\n          <Button\r\n            onClick={() => cancelarCompraBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgres color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Cancelar Compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosDeCompra\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\nimport CancelCompraConfirm from \"./CancelarCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerComprasRealizadas, refetch }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Compra a credito</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell padding=\"checkbox\">Detalles</TableCell>\r\n              <TableCell padding=\"checkbox\">Cancelar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                theme={theme}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra, refetch, theme }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    compra_credito,\r\n    credito_pagado,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFechaCorta(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        {compra.status && compra.status === \"CANCELADO\" ? (\r\n          <Chip label=\"CANCELADO\" color=\"secondary\" variant=\"outlined\" />\r\n        ) : compra_credito === true ? (\r\n          <Chip\r\n            label={credito_pagado === true ? \"PAGADO\" : \"PENDIENTE\"}\r\n            style={{\r\n              color:\r\n                credito_pagado === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n              borderColor:\r\n                credito_pagado === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n            }}\r\n            variant=\"outlined\"\r\n          />\r\n        ) : (\r\n          <Chip label=\"CONTADO\" color=\"inherit\" variant=\"outlined\" />\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n      <TableCell>\r\n        <CancelCompraConfirm compra={compra} refetch={refetch} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de venta\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <ExcelFile\r\n          element={\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              startIcon={<CloudDownloadOutlined />}\r\n            >\r\n              Exportar a Excel\r\n            </Button>\r\n          }\r\n          filename={nombre_documento}\r\n        >\r\n          <ExcelSheet data={compras} name={nombre_documento}>\r\n            <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n            <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n            <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n            <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n            <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n            <ExcelColumn label=\"Total\" value=\"total\" />\r\n          </ExcelSheet>\r\n        </ExcelFile>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaCompras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarComprasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcInspection className={classes.icon} />\r\n          </Box>\r\n          Compras realizadas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras realizadas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras\r\n        obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n        refetch={refetch}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CheckCircle, Done, VerifiedUser } from \"@material-ui/icons\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VerificarProductosCompras({\r\n  compra,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setVerificado,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (success) {\r\n      setVerificado(true);\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={<VerifiedUser />}\r\n      >\r\n        Continuar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        /* onClose={() => handleClose()} */\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-verificarcompra-title\"\r\n        aria-describedby=\"dialog-verificarcompra-description\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <ModalVerificacion\r\n          handleClose={handleClose}\r\n          compra={compra}\r\n          handleClickOpen={handleClickOpen}\r\n          open={open}\r\n          nuevoArray={nuevoArray}\r\n          setNuevoArray={setNuevoArray}\r\n          setSuccess={setSuccess}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalVerificacion = ({\r\n  handleClose,\r\n  compra,\r\n  handleClickOpen,\r\n  open,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setSuccess,\r\n}) => {\r\n  const [loadingVerificacion, setLoadingVerificacion] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let count = 0;\r\n\r\n  /* Queries */\r\n  const [getQuery, { loading, data, error }] = useLazyQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      almacen: compra.almacen.id_almacen,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) count = 1;\r\n\r\n  useEffect(() => {\r\n    if (open && count === 0) {\r\n      getQuery();\r\n      count = 1;\r\n    }\r\n  }, [handleClickOpen]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      verificarProductos();\r\n    }\r\n  }, [data]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent\r\n          style={{\r\n            height: 150,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <DialogContentText id=\"dialog-verificarcompra-description\">\r\n            Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n            quitaran al retomar la compra para no causar conflictos, podras\r\n            editar tu compra mas adelante\r\n          </DialogContentText>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Obteniendo productos de la Base de datos...\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <ErrorPage error={error} altura={130} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  /* console.log(compra); */\r\n\r\n  function verificarProductos() {\r\n    setLoadingVerificacion(true);\r\n    const { productos } = compra;\r\n    let productos_nuevos = [...productos];\r\n    let conflicto = false;\r\n\r\n    for (let i = 0; i < productos.length; i++) {\r\n      const productosCompra = productos[i];\r\n      let copy_producto_compra = { ...productosCompra };\r\n      let copy_producto = { ...productosCompra.producto };\r\n\r\n      //Filtrar los productos\r\n      const productos_filtrados = obtenerProductos.filter(\r\n        (res) => res._id === copy_producto_compra.id_producto\r\n      );\r\n\r\n      const { precios, unidades_de_venta, presentaciones } = copy_producto;\r\n\r\n      const precios_base = productos_filtrados[0].precios;\r\n      const unidades_base = productos_filtrados[0].unidades_de_venta;\r\n      const presentaciones_base = productos_filtrados[0].medidas_producto;\r\n\r\n      //verificacion de Precios\r\n      if (\r\n        precios.unidad_de_compra.cantidad !==\r\n          precios_base.unidad_de_compra.cantidad ||\r\n        precios.unidad_de_compra.precio_unitario_con_impuesto !==\r\n          precios_base.unidad_de_compra.precio_unitario_con_impuesto ||\r\n        precios.unidad_de_compra.unidad !== precios_base.unidad_de_compra.unidad\r\n      ) {\r\n        /* console.log(\"conflicto precios\"); */\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.precios = precios_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n      }\r\n      //verificacion de Unidades de venta\r\n      const u_default = unidades_de_venta.filter((res) => res.default === true);\r\n      const u_default_base = unidades_base.filter(\r\n        (res) => res.default === true\r\n      );\r\n      if (\r\n        u_default[0].cantidad !== u_default_base[0].cantidad ||\r\n        u_default[0].precio !== u_default_base[0].precio ||\r\n        u_default[0].unidad !== u_default_base[0].unidad\r\n      ) {\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.unidades_de_venta = unidades_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n        /* console.log(\"conflicto unidades\"); */\r\n      }\r\n\r\n      //verificacion de Presentaciones si hay presentaciones\r\n\r\n      if (presentaciones.length > 0) {\r\n        /* console.log(presentaciones, presentaciones_base); */\r\n        if (presentaciones_base.length > 0) {\r\n          if (presentaciones.length === presentaciones_base.length) {\r\n            for (let x = 0; x < presentaciones.length; x++) {\r\n              const present = presentaciones[x];\r\n              for (let y = 0; y < presentaciones_base.length; y++) {\r\n                const present_base = presentaciones_base[y];\r\n\r\n                if (\r\n                  present.medida._id === present_base.medida._id &&\r\n                  present.color._id === present_base.color._id &&\r\n                  present.almacen === present_base.almacen\r\n                ) {\r\n                  if (\r\n                    present.cantidad !== present_base.cantidad ||\r\n                    present.precio !== present_base.precio\r\n                  ) {\r\n                    //si son diferentes se agrega las presentaciones_base al compra_nueva\r\n                    copy_producto.presentaciones = presentaciones_base;\r\n                    copy_producto_compra.producto = copy_producto;\r\n                    copy_producto_compra.conflicto = true;\r\n                    productos_nuevos[i] = copy_producto_compra;\r\n                    conflicto = true;\r\n                    /* console.log(\"conflicto presentaciones\"); */\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            //si son diferentes se agrega las presentaciones al compra_nueva\r\n            copy_producto.presentaciones = presentaciones_base;\r\n            copy_producto_compra.producto = copy_producto;\r\n            copy_producto_compra.conflicto = true;\r\n            productos_nuevos[i] = copy_producto_compra;\r\n            conflicto = true;\r\n            /* console.log(\"conflicto diferentes presentaciones \"); */\r\n          }\r\n        } else {\r\n          //si no hay se agrega las presentaciones al compra_nueva\r\n          copy_producto_compra.conflicto = true;\r\n          productos_nuevos[i] = copy_producto_compra;\r\n          conflicto = true;\r\n          /* console.log(\"conflicto sin presentaciones \"); */\r\n        }\r\n      }\r\n    }\r\n\r\n    const nuevo_producto_compra = [];\r\n    let subtotal = 0;\r\n    let impuestos = 0;\r\n    let total = 0;\r\n    if (conflicto) {\r\n      for (let k = 0; k < productos_nuevos.length; k++) {\r\n        const datosProducto = { ...productos_nuevos[k] };\r\n\r\n        if (datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n          //si es calzado o ropa\r\n          //CANTIDADES\r\n          if (datosProducto.producto.presentaciones.length > 0) {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n              const { cantidad, cantidad_nueva } = presentacion;\r\n              let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n              datosProducto.cantidad += cantidad + nueva;\r\n            });\r\n            if (isNaN(datosProducto.cantidad)) datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          } else {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          }\r\n        } else {\r\n          //Si es una unidad normal\r\n\r\n          //CANTIDADES\r\n          const { cantidad_regalo, cantidad, unidad_regalo } = datosProducto;\r\n          //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n          const factor =\r\n            datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n          const cantiad_media = cantidad * factor;\r\n          let cantidad_regalo_media =\r\n            unidad_regalo === \"Pz\" ||\r\n            unidad_regalo === \"Kg\" ||\r\n            unidad_regalo === \"Lt\"\r\n              ? cantidad_regalo\r\n              : cantidad_regalo * factor;\r\n          let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n          //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n          if (factor > 1) {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n            datosProducto.cantidad_total = cantidad_total_media / factor;\r\n          } else {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n            datosProducto.cantidad_total = cantidad_total_media;\r\n          }\r\n        }\r\n\r\n        //PRECIOS\r\n        const {\r\n          iva,\r\n          ieps,\r\n          precio_con_impuesto,\r\n          precio_sin_impuesto,\r\n        } = datosProducto.producto.precios.precio_de_compra;\r\n\r\n        datosProducto.total_con_descuento = precio_con_impuesto;\r\n        datosProducto.costo = precio_con_impuesto;\r\n        datosProducto.iva_total = iva * datosProducto.cantidad_total;\r\n        datosProducto.ieps_total = ieps * datosProducto.cantidad_total;\r\n        datosProducto.impuestos = (iva + ieps) * datosProducto.cantidad_total;\r\n        datosProducto.subtotal =\r\n          precio_sin_impuesto * datosProducto.cantidad_total;\r\n        datosProducto.total =\r\n          precio_con_impuesto * datosProducto.cantidad_total;\r\n\r\n        if (datosProducto.descuento_porcentaje > 0) {\r\n          datosProducto.descuento_precio = Math.round(\r\n            (precio_con_impuesto * datosProducto.descuento_porcentaje) / 100\r\n          );\r\n          datosProducto.total_con_descuento =\r\n            precio_con_impuesto - datosProducto.descuento_precio;\r\n        }\r\n\r\n        subtotal += datosProducto.subtotal;\r\n        impuestos += datosProducto.impuestos;\r\n        total +=\r\n          datosProducto.total_con_descuento * datosProducto.cantidad_total;\r\n\r\n        nuevo_producto_compra.push(datosProducto);\r\n      }\r\n      setNuevoArray({\r\n        _id: compra._id,\r\n        almacen: compra.almacen,\r\n        proveedor: compra.proveedor,\r\n        productos: nuevo_producto_compra,\r\n        en_espera: compra.en_espera,\r\n        fecha_registro: compra.fecha_registro,\r\n        impuestos,\r\n        subtotal,\r\n        total,\r\n      });\r\n    } else {\r\n      setNuevoArray(compra);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      setLoadingVerificacion(false);\r\n      setSuccess(true);\r\n    }, 1500);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent\r\n        style={{\r\n          height: 150,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <DialogContentText id=\"dialog-verificarcompra-description\">\r\n          Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n          quitaran al retomar la compra para no causar conflictos, podras editar\r\n          tu compra mas adelante\r\n        </DialogContentText>\r\n        {loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Verificando existencias en tus productos...\r\n          </Box>\r\n        ) : null}\r\n        {!loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CheckCircle color=\"primary\" style={{ marginRight: 8 }} />\r\n            Listo, producto verificados\r\n          </Box>\r\n        ) : null}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {loadingVerificacion ? (\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        ) : (\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Done />}>\r\n            Aceptar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport AbrirCompra from \"../AbrirCompra/AbrirCompra\";\r\nimport VerificarProductosCompras from \"./VerificarProductos\";\r\n\r\nimport {\r\n  Dialog,\r\n  CircularProgress,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { CheckCircle, DeleteOutlined, Done, Error } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /* let compra_temp = {...compra} */\r\n  const [compra_temp, setCompraTemp] = useState({ ...compra });\r\n  const { productos } = compra_temp;\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const [nuevoArray, setNuevoArray] = useState();\r\n  const [verificado, setVerificado] = useState(false);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  useEffect(() => {\r\n    if (verificado && nuevoArray) {\r\n      setCompraTemp(nuevoArray);\r\n    }\r\n  }, [verificado]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra_temp.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra_temp.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${parseFloat(compra_temp.subtotal.toFixed(2))}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${parseFloat(compra_temp.impuestos.toFixed(2))}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>\r\n            Total: ${formatoMexico(parseFloat(compra_temp.total.toFixed(2)))}\r\n          </b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              {permisosUsuario.accesos.compras.compras_espera.eliminar ===\r\n              false ? null : (\r\n                <ModalEliminarCompra\r\n                  compra={compra_temp}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n\r\n              {permisosUsuario.accesos.compras.compras_espera.editar ===\r\n              false ? null : verificado ? (\r\n                <AbrirCompra\r\n                  compra={compra_temp}\r\n                  status=\"enEspera\"\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                  refetchEspera={refetch}\r\n                />\r\n              ) : (\r\n                <VerificarProductosCompras\r\n                  compra={compra_temp}\r\n                  nuevoArray={nuevoArray}\r\n                  setNuevoArray={setNuevoArray}\r\n                  setVerificado={setVerificado}\r\n                />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {verificado ? <TableCell /> : null}\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                /* console.log(datos); */\r\n                return (\r\n                  <TableRow\r\n                    tabIndex={-1}\r\n                    key={index}\r\n                    selected={datos.conflicto}\r\n                  >\r\n                    {verificado ? (\r\n                      <TableCell\r\n                        style={{\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                        }}\r\n                      >\r\n                        {datos.conflicto ? (\r\n                          <Error color=\"primary\" />\r\n                        ) : (\r\n                          <CheckCircle\r\n                            style={{\r\n                              color: theme.palette.success.main,\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    ) : null}\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalEliminarCompra = ({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n      handleOpenDetalles();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"secondary\"\r\n        startIcon={<DeleteOutlined />}\r\n        onClick={() => handleOpen()}\r\n      >\r\n        Eliminar compra\r\n      </Button>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DatosDeCompraEspera from \"./DatosDeCompraEspera\";\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, DeleteOutlined, Done } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaEnEspera({ obtenerComprasEnEspera, refetch }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Detalles</TableCell>\r\n              {permisosUsuario.accesos.compras.compras_espera.elimina === false ? (null) : (\r\n                <TableCell>Eliminar</TableCell>\r\n              )}\r\n              </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasEnEspera.map((compra, index) => (\r\n              <RenderRowsComprasEspera\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsComprasEspera = ({ compra, refetch, setAlert }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalContinuarCompra\r\n          compra={compra}\r\n          refetch={refetch}\r\n          setAlert={setAlert}\r\n        />\r\n      </TableCell>\r\n      {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n        <TableCell>\r\n          <ModalEliminarCompra\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalContinuarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra en espera\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompraEspera\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            handleOpenDetalles={handleOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <DeleteOutlined color=\"error\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useRef, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FcOvertime } from \"react-icons/fc\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport ListaEnEspera from \"./ListaEnEspera\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { OBTENER_COMPRAS_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasEnEspera() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcOvertime className={classes.icon} />\r\n          </Box>\r\n          Compras en espera\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras en espera\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COMPRAS_ESPERA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasEnEspera = [];\r\n  if (data) obtenerComprasEnEspera = data.obtenerComprasEnEspera;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value });\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3} maxWidth={500}>\r\n        <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n          <TextField\r\n            inputRef={searchfilter}\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Buscar una compra...\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                    <SearchOutlined />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </form>\r\n      </Box>\r\n      <ListaEnEspera obtenerComprasEnEspera={obtenerComprasEnEspera} refetch={refetch} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport AbrirCompra from \"./AbrirCompra/AbrirCompra\";\r\nimport ComprasRealizadas from \"./ComprasRealizadas/ComprasRealizadas\";\r\n/* import CargaMasiva from './CargaMasiva/CargaMasiva'; */\r\nimport ComprasEnEspera from \"./ComprasEnEspera/ComprasEnEspera\";\r\n\r\nexport default function Compras() {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Grid container spacing={3} justifyContent=\"center\">\r\n        {permisosUsuario.accesos.compras.abrir_compra.ver === false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <AbrirCompra />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {permisosUsuario.accesos.compras.compras_realizadas.ver ===\r\n        false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <ComprasRealizadas />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {permisosUsuario.accesos.compras.compras_espera.ver === false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <ComprasEnEspera />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {/* <Grid item md={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CargaMasiva />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useContext, useState, Fragment, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CLIENTES,\r\n  ACTUALIZAR_CLIENTE,\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaClientes({\r\n  user,\r\n  tipo,\r\n  filtro,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const classes = useStyles();\r\n  const { setUpdateClientVenta, updateClientVenta, update } = useContext(\r\n    ClienteCtx\r\n  );\r\n  const [value] = useDebounce(filtro, 1000);\r\n  const [selectDataClient, setSelectDataClient] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo,\r\n      filtro: value,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  //show modal accept client\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const [dataSelectRowClient, setDataSelectRowClient] = useState({});\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpenModal = (data, e) => {\r\n    if (ventas && !selectDataClient) {\r\n      setShowModal(true);\r\n      setDataSelectRowClient(data);\r\n    }\r\n  };\r\n\r\n  const handleClickSelectClient = () => {\r\n    //clear object\r\n    const {\r\n      representante,\r\n      estado_cliente,\r\n      tipo_cliente,\r\n      empresa,\r\n      sucursal,\r\n      fecha_nacimiento,\r\n      fecha_registro,\r\n      eliminado,\r\n      ...clean_cliente\r\n    } = dataSelectRowClient;\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero:\r\n            venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          cliente: clean_cliente ? clean_cliente : {},\r\n          venta_cliente: true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n          tipo_emision: venta_actual.tipo_emision\r\n            ? venta_actual.tipo_emision\r\n            : \"TICKET\",\r\n        })\r\n      );\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setShowModal(!showModal);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n        width=\"120vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"110\">No. Cliente</TableCell>\r\n                <TableCell width=\"100\">Clave</TableCell>\r\n                <TableCell width=\"200\">Nombre</TableCell>\r\n                <TableCell width=\"150\">Correo</TableCell>\r\n                <TableCell width=\"200\">Fecha Registro</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"100\">Estado</TableCell>\r\n                )}\r\n                <TableCell width=\"50\">Editar</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"50\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    user={user}\r\n                    key={index}\r\n                    datos={row}\r\n                    handleClickOpenModal={handleClickOpenModal}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                    ventas={ventas}\r\n                    dataSelectRowClient={dataSelectRowClient}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Dialog\r\n          open={showModal}\r\n          onClose={() => setShowModal(false)}\r\n          aria-labelledby=\"select-dialog-cliente-venta\"\r\n          aria-describedby=\"select-cliente-venta-description\"\r\n        >\r\n          <DialogTitle id=\"select-dialog-cliente-venta\">\r\n            {\"¿Estas seguro que desea seleccionar este cliente?\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <Typography>\r\n              {`Cliente: ${dataSelectRowClient.nombre_cliente}`}\r\n            </Typography>\r\n            <Typography>\r\n              {`Número de clave: ${dataSelectRowClient.clave_cliente}`}\r\n            </Typography>\r\n            <DialogContentText id=\"select-cliente-venta-description\">\r\n              Al seleccionar el cliente se colocara en la venta.\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => setShowModal(false)}\r\n              color=\"primary\"\r\n              autoFocus\r\n            >\r\n              cancelar\r\n            </Button>\r\n            <Button onClick={() => handleClickSelectClient()} color=\"primary\">\r\n              Aceptar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  user,\r\n  handleClickOpenModal,\r\n  setAlert,\r\n  refetch,\r\n  ventas,\r\n  dataSelectRowClient,\r\n}) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { update, setUpdate } = useContext(ClienteCtx);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* console.log(datos); */\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            estado_cliente: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleClickOpenModal(datos, e)}\r\n        hover={ventas}\r\n        style={ventas ? { cursor: \"pointer\" } : null}\r\n        selected={\r\n          ventas && dataSelectRowClient.numero_cliente === datos.numero_cliente\r\n        }\r\n      >\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n        </TableCell>\r\n        {user === \"EMPLEADO\" ? null : (\r\n          <TableCell>\r\n            {loading ? (\r\n              <CircularProgress size={30} />\r\n            ) : (\r\n              <Switch\r\n                checked={datos.estado_cliente}\r\n                onChange={cambiarEstado}\r\n                color=\"primary\"\r\n              />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <CrearCliente\r\n              tipo=\"CLIENTE\"\r\n              accion=\"actualizar\"\r\n              datos={datos}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.eliminar ===\r\n          false ? null : (\r\n            <EliminarCliente\r\n              datos={datos}\r\n              setAlert={setAlert}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Close, Search } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport {\r\n  ACTUALIZAR_CLIENTE,\r\n  OBTENER_CLIENTES,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport moment from \"moment\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ClientesInactivosComponent({\r\n  tipo,\r\n  refetchProveedores,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"inherit\"\r\n        onClick={handleModalToggle}\r\n        startIcon={<RestoreFromTrash />}\r\n      >\r\n        {tipo === \"CLIENTE\" ? \"Clientes\" : \"Proveedores \"} inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-clientes-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-clientes-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">{tipo === \"CLIENTE\" ? \"Clientes\" : \"Proveedores \"} inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              placeholder=\"Buscar cliente: No. cliente, clave o nombre...\"\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              value={filter}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <ClientesInactivos\r\n            tipo={tipo}\r\n            filter={filter}\r\n            refetchProveedores={refetchProveedores}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ClientesInactivos = ({ tipo, filter, refetchProveedores }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(ClienteCtx);\r\n\r\n  const [value] = useDebounce(filter, 800);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo,\r\n      filtro: value ? value : \"\",\r\n      empresa: sesion.empresa._id,\r\n      eliminado: true,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <ErrorPage error={error} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay clientes inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>No. Cliente</TableCell>\r\n              <TableCell>Clave</TableCell>\r\n              <TableCell>Nombre</TableCell>\r\n              <TableCell>Correo</TableCell>\r\n              <TableCell>Fecha Registro</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => (\r\n              <RenderClientes\r\n                key={index}\r\n                datos={row}\r\n                refetchProveedores={refetchProveedores}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderClientes = ({ datos, refetchProveedores }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { setUpdate, update } = useContext(ClienteCtx);\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            eliminado: false,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n      if (refetchProveedores) refetchProveedores();\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>\r\n            {moment(datos.fecha_registro).format(\"DD/MM/YYYY\")}\r\n          </Typography>\r\n        </TableCell>\r\n        <TableCell align=\"right\">\r\n          {loading ? (\r\n            <IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n              <CircularProgress size={26} />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n              <RestoreFromTrash style={{ fontSize: 30 }} />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-cliente-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-cliente-dialog\">\r\n          {\"Se reactivará este cliente\"}\r\n        </DialogTitle>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => cambiarEstado()} color=\"primary\" autoFocus>\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FcManager } from \"react-icons/fc\";\r\nimport { Box, Grid, IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"./ListaClientes\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ClientesInactivosComponent from \"./ClientesInactivos\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cliente() {\r\n  const classes = useStyles();\r\n\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcManager className={classes.icon} />\r\n          </Box>\r\n          Cliente\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cliente\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box mx={4} my={3}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={8}>\r\n              <Paper className={classes.root}>\r\n                <InputBase\r\n                  fullWidth\r\n                  placeholder=\"Buscar cliente...\"\r\n                  onChange={(e) => setValues(e.target.value)}\r\n                  onKeyPress={pressEnter}\r\n                  value={values}\r\n                />\r\n                <IconButton onClick={() => setValues(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={6}\r\n              xs={4}\r\n              style={{ display: \"flex\", justifyContent: \"flex-end\", alignItems: \"center\" }}\r\n            >\r\n              {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n              false ? null : (\r\n                <ClientesInactivosComponent tipo=\"CLIENTE\" />\r\n              )}\r\n              <Box mx={1} />\r\n              {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n              false ? null : (\r\n                <CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" />\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n        <Box mx={4}>\r\n          <ListaClientes tipo=\"CLIENTE\" filtro={values} />\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRAR_DESCUENTOS = gql`\r\n\tmutation CrearDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        crearDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DESCUENTOS = gql`\r\n\tmutation ActualizarDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        actualizarDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const DESACTIVAR_DESCUENTOS = gql`\r\n\tmutation DesactivarDescuentoUnidad($input: ActivarDescuentoUnidades , $id: ID!){\r\n        desactivarDescuentoUnidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DESCUENTOS = gql`\r\n\tmutation ELiminarDescuentoUnidad( $id: ID!){\r\n        eliminarDescuentoUnidad( id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  Switch,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport {\r\n  DESACTIVAR_DESCUENTOS,\r\n  ELIMINAR_DESCUENTOS,\r\n} from \"../../../../../gql/Catalogos/descuentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\n\r\nconst headCells = [\r\n  { id: \"cantidad\", label: \"Cantidad\" },\r\n  { id: \"tipo\", label: \"Tipo\" },\r\n  { id: \"precio\", label: \"Precio U.\" },\r\n  { id: \"precioDes\", label: \"Precio Desc.\" },\r\n  { id: \"descuento\", label: \"% Desc.\" },\r\n  { id: \"eliminar\", label: \"Eliminar\" },\r\n  { id: \"activo\", label: \"Activo\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { onSelectAllClick, numSelected, rowCount, datosPrecios } = props;\r\n  let variable = false;\r\n  datosPrecios?.forEach((element) => {\r\n    if (element.medida) {\r\n      return (variable = true);\r\n    }\r\n  });\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n          >\r\n            {headCell.label}\r\n          </TableCell>\r\n        ))}\r\n        {variable === true ? (\r\n          <>\r\n            <TableCell>Talla</TableCell>\r\n            <TableCell>Color</TableCell>\r\n          </>\r\n        ) : null}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    height: 300,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 30,\r\n    width: 30,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPreciosDescuentos({\r\n  value,\r\n  datos,\r\n  setCleanList,\r\n  cleanList,\r\n  verificarDatos,\r\n  setPrecioPrueba,\r\n  productosRefetch,\r\n  setLoading,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    //es este\r\n    datosPreciosProducto,\r\n    setPreciosProductos,\r\n    setDatosPreciosProducto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  var porcentaje = parseFloat((100 - value).toFixed(2));\r\n  const [selected, setSelected] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n\r\n  if (datos) {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n    }\r\n  }\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = datosPreciosProducto.map((n) => n);\r\n      setSelected(newSelecteds);\r\n      verificarDatos(newSelecteds);\r\n      setPreciosProductos(newSelecteds);\r\n      return;\r\n    }\r\n    setPreciosProductos([]);\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, _id) => {\r\n    const selectedIndex = selected.indexOf(_id);\r\n    let newSelected = [];\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, _id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n    setPrecioPrueba(newSelected.length === 0 ? 0 : newSelected);\r\n    setPreciosProductos(newSelected);\r\n    verificarDatos(newSelected);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSelected([]);\r\n    setCleanList(false);\r\n  }, [cleanList]);\r\n\r\n  const isSelected = (_id) => selected.indexOf(_id) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, datosPreciosProducto.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <TableContainer className={classes.table}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              rowCount={datosPreciosProducto.length}\r\n              datosPrecios={datosPreciosProducto}\r\n            />\r\n            <TableBody>\r\n              {datosPreciosProducto.map((row, index) => {\r\n                const isItemSelected = isSelected(row);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RowsRender\r\n                    key={row._id}\r\n                    setLoading={setLoading}\r\n                    productosRefetch={productosRefetch}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    row={row}\r\n                    setAlert={setAlert}\r\n                    porcentaje={porcentaje}\r\n                    value={value}\r\n                    datos={datos}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                  />\r\n                );\r\n              })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RowsRender({\r\n  row,\r\n  value,\r\n  isItemSelected,\r\n  setLoading,\r\n  datos,\r\n  labelId,\r\n  setAlert,\r\n  porcentaje,\r\n  productosRefetch,\r\n  handleClick,\r\n  selected,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const { setDatosPreciosProducto } = useContext(RegProductoContext);\r\n  const [DesactivarDescuentoUnidad] = useMutation(DESACTIVAR_DESCUENTOS);\r\n  const [ELiminarDescuentoUnidad] = useMutation(ELIMINAR_DESCUENTOS);\r\n\r\n  const handleChangeActivo = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await DesactivarDescuentoUnidad({\r\n        variables: {\r\n          input: {\r\n            descuento_activo: !row.descuento_activo,\r\n          },\r\n          id: row._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: \"Estado de descuento actualizado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"Ocurrio un problema en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleModal = () => {\r\n    setOpenModal(!openModal);\r\n    editarDatos();\r\n  };\r\n\r\n  const editarDatos = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n      setLoading(false);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      productosRefetch();\r\n      const resultado = await ELiminarDescuentoUnidad({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      handleModal();\r\n      editarDatos();\r\n      setAlert({\r\n        message: resultado.data.eliminarDescuentoUnidad.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      aria-checked={isItemSelected}\r\n      tabIndex={-1}\r\n      key={row._id}\r\n      selected={isItemSelected}\r\n    >\r\n      <TableCell padding=\"checkbox\">\r\n        <Checkbox\r\n          onClick={(event) => {\r\n            handleClick(event, row);\r\n          }}\r\n          checked={isItemSelected}\r\n          inputProps={{ \"aria-labelledby\": labelId }}\r\n        />\r\n      </TableCell>\r\n      <TableCell align=\"center\">{row.cantidad}</TableCell>\r\n      <TableCell align=\"center\">{row?.unidad}</TableCell>\r\n      <TableCell align=\"center\">{row.precio}</TableCell>\r\n      <TableCell align=\"center\">\r\n        {isItemSelected === true && selected.length > 1 ? (\r\n          <b style={{ color: \"green\" }}>\r\n            {\" \"}\r\n            ${parseFloat(((row.precio * porcentaje) / 100).toFixed(2))}{\" \"}\r\n          </b>\r\n        ) : row.descuento === null ? (\r\n          0\r\n        ) : (\r\n          <b style={{ color: \"green\" }}> ${row.descuento.precio_neto} </b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell align=\"center\">\r\n        {isItemSelected === true && selected.length > 1 ? (\r\n          <b style={{ color: \"red\" }}> {value}% </b>\r\n        ) : !row.descuento || row.descuento === null ? (\r\n          0\r\n        ) : (\r\n          <b style={{ color: \"red\" }}> {row.descuento.porciento}% </b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell align=\"center\">\r\n        <Modal\r\n          row={row}\r\n          handleModal={handleModal}\r\n          openModal={openModal}\r\n          handleDelete={handleDelete}\r\n        />\r\n      </TableCell>\r\n      <TableCell key={row._id} align=\"center\">\r\n        <Switch\r\n          key={row._id}\r\n          onChange={handleChangeActivo}\r\n          color=\"primary\"\r\n          disabled={\r\n            !row.descuento ? true : row.descuento.porciento === 0 ? true : false\r\n          }\r\n          defaultChecked={row.descuento_activo ? row.descuento_activo : false}\r\n          name=\"descuento_activo\"\r\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\r\n        />\r\n      </TableCell>\r\n      {row.medida ? (\r\n        <TableCell align=\"center\">{row?.medida?.talla}</TableCell>\r\n      ) : null}\r\n\r\n      {row.color ? (\r\n        <TableCell align=\"center\">\r\n          <Tooltip\r\n            title={row?.color?.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: row?.color?.hex,\r\n                color: theme.palette.getContrastText(row?.color?.hex),\r\n              }}\r\n            ></div>\r\n          </Tooltip>\r\n        </TableCell>\r\n      ) : null}\r\n    </TableRow>\r\n  );\r\n}\r\n\r\n// MODAL PARA ELIMINAR EL DESCUENTO DE LOS PRODUCTOS\r\nconst Modal = ({ row, handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        onClick={handleModal}\r\n        disabled={\r\n          !row.descuento ? true : row.descuento.porciento === 0 ? true : false\r\n        }\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useState } from \"react\";\r\n\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  makeStyles,\r\n  DialogTitle,\r\n  DialogContent,\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Slider,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport TablaPreciosDescuentos from \"./ListaPrecios\";\r\n\r\nimport { REGISTRAR_DESCUENTOS } from \"../../../../../gql/Catalogos/descuentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarGroup: {\r\n    \"& > .MuiAvatarGroup-avatar\": {\r\n      width: theme.spacing(8),\r\n      height: theme.spacing(8),\r\n    },\r\n  },\r\n  root: {\r\n    width: 400,\r\n  },\r\n  rootSlice: {\r\n    width: 350,\r\n  },\r\n  margin: {\r\n    height: theme.spacing(3),\r\n  },\r\n  rootTable: {\r\n    height: 300,\r\n  },\r\n}));\r\n\r\nexport default function DescuentoProductos({ datos, productosRefetch }) {\r\n  const [CrearDescuentoUnidad] = useMutation(REGISTRAR_DESCUENTOS);\r\n  const {\r\n    setDatosPreciosProducto,\r\n    preciosDescuentos,\r\n    setPreciosDescuentos,\r\n    preciosProductos,\r\n    setPreciosProductos,\r\n  } = useContext(RegProductoContext);\r\n\r\n  let iva = datos.precios.iva;\r\n  let ieps = datos.precios.ieps;\r\n  // Precio compra sin impuestos y sin utilidad\r\n  let PCSI = datos.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [openDescuento, setOpenDescuento] = useState(false);\r\n  const [cleanList, setCleanList] = useState(false);\r\n  const [validate] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [precioPrueba, setPrecioPrueba] = useState(0);\r\n  const [value, setValue] = useState(0);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleCloseDescuentos = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n      setLoading(false);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n      setLoading(false);\r\n    }\r\n    setPrecioPrueba(0);\r\n    setValue(0);\r\n    preciosDescuentos.splice(0, preciosDescuentos.length);\r\n  };\r\n\r\n  const cerrarModal = () => {\r\n    setOpenDescuento(!openDescuento);\r\n    handleCloseDescuentos();\r\n  };\r\n\r\n  const verificarDatos = useCallback(\r\n    (datos) => {\r\n      for (let i = 0; i < datos.length; i++) {\r\n        if (datos[i].descuento) {\r\n          if (datos[i].descuento.porciento !== 0) {\r\n            setValue(datos[i].descuento.porciento);\r\n            if (datos.length === 1) {\r\n              setPrecioPrueba(datos[i].descuento.precio_neto);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [datos]\r\n  );\r\n\r\n  let arrayDescuento = [];\r\n\r\n  const obtenerPorcientoSlide = (event, newValue) => {\r\n    setValue(newValue);\r\n    preciosDescuentos.splice(0, preciosDescuentos.length);\r\n\r\n    for (let i = 0; i < preciosProductos.length; i++) {\r\n      let porcentaje = parseFloat((100 - newValue)/* .toFixed(2) */); //Porcentaje para calculos de descuento\r\n      let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n      let dineroDescontado = 0;\r\n      let cantidad_unidad = preciosProductos[i].precio_unidad.cantidad_unidad;\r\n\r\n      PVCDSI = parseFloat(\r\n        (preciosProductos[i].precio_unidad.precio_venta * porcentaje) / 100\r\n      );\r\n      dineroDescontado = parseFloat(\r\n        preciosProductos[i].precio_unidad.precio_venta - PVCDSI\r\n      );\r\n\r\n      let iva_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n\r\n      let ieps_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n      let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n      let precio_general = parseFloat(precio_neto * cantidad_unidad);\r\n\r\n      arrayDescuento = {\r\n        _id: preciosProductos[i]._id,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: cantidad_unidad,\r\n          numero_precio: preciosProductos[i].precio_unidad.numero_precio,\r\n          unidad_maxima: preciosProductos[i].precio_unidad.unidad_maxima,\r\n          precio_general: parseFloat(precio_general.toFixed(2)),\r\n          precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n          precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n          iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n          ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n          utilidad: parseFloat(utilidad.toFixed(2)),\r\n          porciento: newValue,\r\n          dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n        },\r\n      };\r\n\r\n      setPrecioPrueba(parseFloat(precio_neto.toFixed(2)));\r\n      if (preciosProductos.length !== 1) {\r\n        preciosDescuentos.push(arrayDescuento);\r\n      } else {\r\n        setPreciosDescuentos([arrayDescuento]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    let valorText = parseFloat(e.target.value);\r\n    if (preciosProductos.length === 1) {\r\n      setPrecioPrueba(valorText);\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let PVSI = parseFloat(valorText / (suma_impuestos + 1));\r\n\r\n      let cantidad_unidad = preciosProductos[0].precio_unidad.cantidad_unidad;\r\n      let dineroDescontado = 0;\r\n      let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n      let porcentaje = parseFloat(\r\n        ((PVSI / preciosProductos[0].precio_unidad.precio_venta) * 100));\r\n      let descuento = parseFloat((100 - porcentaje));\r\n      \r\n      PVCDSI = parseFloat(\r\n        (preciosProductos[0].precio_unidad.precio_venta * porcentaje) / 100\r\n      );\r\n      dineroDescontado = parseFloat(\r\n        preciosProductos[0].precio_unidad.precio_venta - PVCDSI\r\n      );\r\n\r\n      let iva_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n      let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n      let precio_general = parseFloat(precio_neto * cantidad_unidad);\r\n\r\n      arrayDescuento = {\r\n        _id: preciosProductos[0]._id,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: cantidad_unidad,\r\n          numero_precio: preciosProductos[0].precio_unidad.numero_precio,\r\n          unidad_maxima: preciosProductos[0].precio_unidad.unidad_maxima,\r\n          precio_general: parseFloat(precio_general.toFixed(2)),\r\n          precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n          precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n          iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n          ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n          utilidad: parseFloat(utilidad.toFixed(2)),\r\n          porciento: parseFloat(descuento.toFixed(2)),\r\n          dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n        },\r\n      };\r\n\r\n      setValue(parseFloat(descuento.toFixed(2)));\r\n      setPreciosDescuentos([arrayDescuento]);\r\n    }\r\n  };\r\n\r\n  function valuetext(e) {\r\n    return `${e}`;\r\n  }\r\n\r\n  const saveData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await CrearDescuentoUnidad({\r\n        variables: {\r\n          input: {\r\n            descuentos: preciosDescuentos,\r\n          },\r\n        },\r\n      });\r\n      handleCloseDescuentos();\r\n      productosRefetch();\r\n      setValue(0);\r\n      setPreciosProductos([]);\r\n      setPreciosDescuentos([]);\r\n      setCleanList(!cleanList);\r\n      setAlert({\r\n        message: \"¡Listo descuentos realizados!\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"¡Oh no, ocurrio un problema con el servidor!\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const validacion = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      for (let i = 0; i < datos.medidas_producto.length; i++) {\r\n        if (datos.medidas_producto[i]?.descuento_activo === true) {\r\n          return \"primary\";\r\n        } else {\r\n          return \"default\";\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < datos.unidades_de_venta.length; i++) {\r\n        if (datos.unidades_de_venta[i]?.descuento_activo === true) {\r\n          return \"primary\";\r\n        } else {\r\n          return \"default\";\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <IconButton\r\n        color={validacion()}\r\n        onClick={cerrarModal}\r\n        disabled={\r\n          datos.inventario_general &&\r\n          datos.inventario_general.length > 0 &&\r\n          datos.inventario_general[0].eliminado === true\r\n        }\r\n      >\r\n        <LocalOfferIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={openDescuento}\r\n        onClose={handleCloseDescuentos}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DialogTitle>\r\n          <Grid container>\r\n            <Box flexGrow={1} display=\"flex\" alignItems=\"center\">\r\n              {\"Descuento de Producto\"}\r\n            </Box>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={cerrarModal}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Typography>\r\n              <b>Nombre comercial: </b>\r\n              {datos.datos_generales.nombre_comercial\r\n                ? datos.datos_generales.nombre_comercial\r\n                : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box textAlign=\"center\">\r\n            <Typography>\r\n              <b>Nombre genérico: </b>\r\n              {datos.datos_generales.nombre_generico\r\n                ? datos.datos_generales.nombre_generico\r\n                : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Grid container>\r\n            <Grid item lg={8} md={6} xs={12}>\r\n              <Box p={1}>\r\n                <TablaPreciosDescuentos\r\n                  verificarDatos={verificarDatos}\r\n                  productosRefetch={productosRefetch}\r\n                  datos={datos}\r\n                  value={value}\r\n                  cleanList={cleanList}\r\n                  setCleanList={setCleanList}\r\n                  setPrecioPrueba={setPrecioPrueba}\r\n                  setLoading={setLoading}\r\n                  loading={loading}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={4} md={6} xs={12}>\r\n              <Box mt={5} dislay=\"flex\" justifyContent=\"center\">\r\n                <div className={classes.root}>\r\n                  <Box textAlign=\"center\">\r\n                    <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                      <b>Porcentaje de descuento</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box my={5} />\r\n                  <Box\r\n                    display=\"flex\"\r\n                    justifyContent=\"center\"\r\n                    justifyItems=\"center\"\r\n                    className={classes.rootSlice}\r\n                  >\r\n                    <Slider\r\n                      disabled={preciosProductos.length === 0 ? true : false}\r\n                      getAriaValueText={valuetext}\r\n                      value={value}\r\n                      aria-labelledby=\"discrete-slider-small-steps\"\r\n                      valueLabelDisplay=\"auto\"\r\n                      onChange={obtenerPorcientoSlide}\r\n                    />\r\n                  </Box>\r\n                </div>\r\n              </Box>\r\n              <Box mt={5} display=\"flex\" justifyContent=\"center\">\r\n                {preciosProductos.length === 1 ? (\r\n                  <div>\r\n                    <Typography>Precio con Descuento</Typography>\r\n                    <TextField\r\n                      type=\"number\"\r\n                      InputProps={{ inputProps: { min: 0 } }}\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                      value={precioPrueba}\r\n                      onChange={(e) => obtenerPrecioText(e)}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n              </Box>\r\n              <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                <Button\r\n                  disabled={\r\n                    preciosProductos.length === 0 || validate === true\r\n                      ? true\r\n                      : false\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"large\"\r\n                  onClick={saveData}\r\n                >\r\n                  Guardar\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_PRODUCTO } from \"../../../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ datos, productosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { actualizarLista, setActualizarLista, setAlert } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setActualizarLista(!actualizarLista);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <Tooltip title=\"Solo se puede eliminar un producto si este tiene 0 en inventarios\" arrow>\r\n        <IconButton\r\n          onClick={() => handleToggleModal()}\r\n          /* disabled={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? true\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? true\r\n              : false\r\n          } */\r\n        >\r\n          <Delete\r\n            /* color={\r\n              datos.inventario_general && datos.inventario_general.length === 0\r\n                ? \"disabled\"\r\n                : datos.inventario_general[0].eliminado === true\r\n                ? \"disabled\"\r\n                : \"error\"\r\n            } */\r\n            color=\"error\"\r\n          />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport DescuentoProductos from \"./Descuentos/Descuento\";\r\nimport EliminarProducto from \"./EliminarProducto\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n\t'& ::-webkit-scrollbar': {\r\n\t\tdisplay: 'none'\r\n\t}\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerProductos, productosRefetch }) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Codigo barras</TableCell>\r\n              <TableCell>Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell>Existencia</TableCell>\r\n              <TableCell>Tipo</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody className=\"hide-scroll\">\r\n            {obtenerProductos.map((producto, index) => {\r\n              return (\r\n                <RenderTableRows\r\n                  key={index}\r\n                  producto={producto}\r\n                  productosRefetch={productosRefetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ producto, productosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>{producto.datos_generales.codigo_barras}</TableCell>\r\n        <TableCell>{producto.datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{producto.datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell>\r\n          {producto.inventario_general.map(\r\n            (existencia) =>\r\n              `${existencia.cantidad_existente} ${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.tipo_producto}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.editar === false ? (null):(\r\n            <CrearProducto\r\n              accion={true}\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <DescuentoProductos\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.eliminar === false ? (null):(\r\n            <Tooltip title=\"Solo se puede eliminar un producto si este tiene 0 en inventarios\" arrow>\r\n              <EliminarProducto\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n            </Tooltip>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Publish, Close } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTIVAR_PRODUCTOS,\r\n  PRODUCTOS_ELIMINADOS,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProdcutosEliminados({ productosActivosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"primary\"\r\n        onClick={handleModalToggle}\r\n        size=\"large\"\r\n        startIcon={<RestoreFromTrash />}\r\n      >\r\n        Productos inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-productos-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-productos-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Productos inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TablaProductosEliminados\r\n            productosActivosRefetch={productosActivosRefetch}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TablaProductosEliminados = ({ productosActivosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { actualizarLista } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(PRODUCTOS_ELIMINADOS, {\r\n    variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, actualizarLista]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay productos inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerProductosInactivos } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">Código de barras</TableCell>\r\n              <TableCell align=\"left\">Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerProductosInactivos.map((producto, index) => (\r\n              <RenderProductosTabla\r\n                key={index}\r\n                datos={producto}\r\n                refetch={refetch}\r\n                productosActivosRefetch={productosActivosRefetch}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderProductosTabla = ({ datos, refetch, productosActivosRefetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const { datos_generales } = datos.producto;\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n\r\n  const [activarProducto] = useMutation(ACTIVAR_PRODUCTOS);\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  const reactivarProducto = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await activarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      refetch();\r\n      productosActivosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.activarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleDeleteToggle();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell align=\"left\">{datos_generales.codigo_barras}</TableCell>\r\n        <TableCell align=\"left\">{datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell align=\"right\">\r\n          {loading ? (\r\n            <IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n              <CircularProgress size={26} />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n              <Publish />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-producto-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-producto-dialog\">\r\n          {\"Se reactivará este producto\"}\r\n        </DialogTitle>\r\n        {/* <SnackBarMessages alert={alert} setAlert={setAlert} />        */}\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => reactivarProducto()} color=\"primary\" autoFocus>\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Search, Close, ArrowBack } from \"@material-ui/icons\";\r\nimport ProductosEliminados from \"./ProductosEliminados\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Productos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { alert, setAlert } = useContext(RegProductoContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Productos\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Productos\r\n            </Typography>\r\n\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RegistroComponent />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RegistroComponent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [existencias, setExistencias] = useState(true);\r\n  const [value, setValue] = useState(0);\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    if (value === 0) {\r\n      setExistencias(true);\r\n    } else {\r\n      setExistencias(false);\r\n    }\r\n  };\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n      filtro,\r\n      existencias,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerProductos } = data;\r\n\r\n  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    if (busqueda === \"\") {\r\n      setFiltro(\"\");\r\n      refetch({ filtro: \"\" });\r\n      return;\r\n    }\r\n    setFiltro(busqueda);\r\n  };\r\n\r\n  const reload = () => {\r\n    setBusqueda(\"\");\r\n    setFiltro(\"\");\r\n    refetch({ filtro: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box mx={4} my={3} display=\"flex\">\r\n        <Box style={{ width: \"500px\" }}>\r\n          <form\r\n            onSubmit={filtrarProductos}\r\n            style={{ display: \"flex\", alignItems: \"center\" }}\r\n          >\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            {filtro !== \"\" ? (\r\n              <IconButton color=\"primary\" onClick={() => reload()}>\r\n                <ArrowBack />\r\n              </IconButton>\r\n            ) : null}\r\n          </form>\r\n        </Box>\r\n\r\n        <Box flexGrow={1} />\r\n        <Box display=\"flex\">\r\n          <ProductosEliminados productosActivosRefetch={refetch} />\r\n          <Box mx={1} />\r\n          {sesion.accesos.catalogos.productos.agregar === false ? null : (\r\n            <CrearProducto accion={false} productosRefetch={refetch} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box mx={4}>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            indicatorColor=\"primary\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n          >\r\n            <Tab label=\"Productos de Sucursal\" />\r\n            <Tab label=\"Todos los productos\" />\r\n          </Tabs>\r\n        </div>\r\n        <ListaProductos\r\n          obtenerProductos={obtenerProductos}\r\n          productosRefetch={refetch}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../../context/Catalogos/CtxRegProducto'\r\nimport Productos from './Productos'\r\n \r\nexport default function ProductoIndex(){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <Productos />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_TALLA } from \"../../../../gql/Catalogos/tallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaTallas({\r\n  tipo,\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.talla.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mb={1}>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Buscar...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onChange={(e) => setBusqueda(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>{tipo === \"ROPA\" ? \"Talla\" : \"Número\"}</TableCell>\r\n                {sesion.accesos.catalogos.tallas_numeros.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"normal\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.tallas_numeros.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"normal\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => (\r\n                <RowsRender\r\n                  key={index}\r\n                  row={row}\r\n                  setAlert={setAlert}\r\n                  tipo={tipo}\r\n                  toUpdate={toUpdate}\r\n                  setToUpdate={setToUpdate}\r\n                  setValue={setValue}\r\n                  refetch={refetch}\r\n                />\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  tipo,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n  const [eliminarTalla] = useMutation(ELIMINAR_TALLA);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resp = await eliminarTalla({\r\n        variables: {\r\n          id: row._id,\r\n          input: {\r\n            tipo: tipo,\r\n            talla: \"\",\r\n          },\r\n        },\r\n      });\r\n\r\n      let msgAlert = {\r\n        message: resp.data.eliminarTalla.message,\r\n        status: \"success\",\r\n        open: true,\r\n      };\r\n      setAlert(msgAlert);\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      handleModal();\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setValue(\"\");\r\n      return;\r\n    }\r\n    setToUpdate(dato._id);\r\n    setValue(dato.talla);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        selected={toUpdate === row._id ? true : false}\r\n      >\r\n        <TableCell>\r\n          <Typography>\r\n            <b>{row.talla}</b>\r\n          </Typography>\r\n        </TableCell>\r\n        {sesion.accesos.catalogos.tallas_numeros.editar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            {toUpdate === row._id ? (\r\n              <IconButton onClick={() => onUpdate()}>\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton onClick={() => onUpdate(row)}>\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        {sesion.accesos.catalogos.tallas_numeros.eliminar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            <Modal\r\n              handleModal={handleModal}\r\n              openModal={openModal}\r\n              handleDelete={handleDelete}\r\n            />\r\n          </TableCell>\r\n        )}\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaTallas from \"./ListaTallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_TALLAS,\r\n  CREAR_TALLAS,\r\n  ACTUALIZAR_TALLA,\r\n} from \"../../../../gql/Catalogos/tallas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nexport default function RegistroTallas({ tipo }) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading_bd, setLoadingBD] = useState({ loading: false, tipo: \"\" });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_TALLAS, {\r\n    variables: { empresa: sesion.empresa._id, tipo },\r\n  });\r\n  /* Mutations */\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n  const [actualizarTalla] = useMutation(ACTUALIZAR_TALLA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerTallas } = data;\r\n\r\n  const guardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    setLoadingBD({ loading: true, tipo });\r\n    let resp;\r\n    try {\r\n      const nueva_talla = value;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.tallas_numeros.editar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const talla_actualizada = cleanTypenames(nueva_talla);\r\n          resp = await actualizarTalla({\r\n            variables: {\r\n              input: {\r\n                talla: talla_actualizada,\r\n                tipo,\r\n              },\r\n              id: toUpdate,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.tallas_numeros.agregar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearTalla({\r\n            variables: {\r\n              input: {\r\n                talla: nueva_talla,\r\n                tipo,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setValue(\"\");\r\n      setToUpdate(\"\");\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      let msgAlert = toUpdate\r\n        ? {\r\n            message: resp.data.actualizarTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          }\r\n        : {\r\n            message: resp.data.crearTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          };\r\n      setAlert(msgAlert);\r\n    } catch (error) {\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      <Box my={2}>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          <Grid item>\r\n            {tipo === \"ROPA\" ? (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shirt.svg\"\r\n                alt=\"icono tallas\"\r\n                style={{ width: 40 }}\r\n              />\r\n            ) : (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shoes.svg\"\r\n                alt=\"icono numeros\"\r\n                style={{ width: 40 }}\r\n              />\r\n            )}\r\n          </Grid>\r\n          <Grid item>\r\n            <form id=\"form-talla\" onSubmit={guardarDatosBD}>\r\n              <TextField\r\n                id=\"outlined-error-helper-text\"\r\n                label={tipo === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={value}\r\n                onChange={(e) => setValue(e.target.value)}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loading_bd.loading}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              disableElevation\r\n              type=\"submit\"\r\n              onClick={guardarDatosBD}\r\n              form=\"form-talla\"\r\n              disabled={loading_bd.loading && loading_bd.tipo === tipo}\r\n              startIcon={\r\n                loading_bd.loading && loading_bd.tipo === tipo ? (\r\n                  <CircularProgress color=\"inherit\" size={20} />\r\n                ) : (\r\n                  <Add />\r\n                )\r\n              }\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <TablaTallas\r\n        datos={obtenerTallas}\r\n        tipo={tipo}\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        setValue={setValue}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\r\nimport {  Typography,Box, Snackbar, makeStyles } from '@material-ui/core';\r\nimport { Button } from '@material-ui/core';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\nexport default function DescripcionCatalogo({texto, width}) {\r\n    const classes = useStyles();\r\n\tconst [active, setActive] = useState(false);\r\n    const handleClose = () => {\r\n\t\tsetActive(false);\r\n\t};\r\n\treturn (\r\n     /*    <Box width={'100%'} flexDirection=\"column\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box   p={2} mt={3} borderRadius={3} boxShadow={0.5}  width={width} style={{backgroundColor:'rgba(161, 236, 248, 0.8)'}}>\r\n                <Typography align=\"center\"  style={{ fontSize: 18, color: 'rgba(38, 78, 84, 0.8)' }}>\r\n                    {texto}\r\n                </Typography>\r\n            </Box>\r\n        </Box> */\r\n    \r\n            <Box mx={1}>\r\n                <Button\r\n                    variant=\"text\"\r\n                    color=\"secondary\"\r\n                    onClick={() => setActive(true)}\r\n                    size=\"large\"\r\n                >\r\n                    <HelpOutlineIcon style={{  fontSize: 35, color: 'white' }}  />\r\n                </Button>\r\n           \r\n                <Snackbar\r\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n                    open={active}\r\n                    onClose={handleClose}\r\n                    autoHideDuration={10000}\r\n                    message={\r\n                        <Box display=\"flex\">\r\n                            <Box mr={1} />\r\n                            <Typography>{texto}</Typography>\r\n                        </Box>\r\n                    }\r\n\t\t\t    />\r\n            </Box>\r\n      \r\n       \r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport RegistroTallas from \"./RegistroTallas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Tallas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(!open);\r\n  const descripcion = 'En este apartado se registran las  tallas y/o números que se asignarán a un producto tipo Ropa o Calzado según sea el caso .';\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Tallas y numeros\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Tallas y números\r\n            </Typography>\r\n            <Box m={1} flexDirection='row' display='flex'>\r\n              <DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container>\r\n          \r\n          <Box>\r\n            <Grid container spacing={5}>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t  \t      <RegistroTallas tipo=\"ROPA\" />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t        \t<RegistroTallas tipo=\"CALZADO\" />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { DialogTitle, IconButton, Typography } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Cliente\", minWidth: 100 },\r\n  { id: 2, label: \"Clave\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 4, label: \"Razon Social\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 6, label: \"Fecha registro\", minWidth: 100 },\r\n  { id: 7, label: \"Estado\", minWidth: 100 },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"74vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function TablaProveedores({ obtenerClientes, refetch }) {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.provedores.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <RowsRender\r\n                  key={index}\r\n                  datos={row}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert, refetch }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.clave_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.razon_social}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.estado_cliente ? \"Activo\" : \"Inactivo\"}</Typography>\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.provedores.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearCliente tipo=\"PRROVEEDOR\" accion=\"actualizar\" datos={datos} refetch={refetch} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n      false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarCliente\r\n            datos={datos}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n  const { setUpdate, update } = useContext(ClienteCtx);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  DialogContent,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport TablaProovedores from \"./ListaProveedores\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport ClientesInactivosComponent from \"../Cliente/ClientesInactivos\";\r\nimport { FcInTransit } from \"react-icons/fc\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n    fontSize: 100\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Proveedores() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran los proveedores que se podrán seleccionar en la compra de un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {/* <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/distribution.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            /> */}\r\n            <FcInTransit className={classes.icon} />\r\n          </Box>\r\n          Proveedores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Proveedores\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          <ProveedoresComponent />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ProveedoresComponent = () => {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo: \"PROVEEDOR\",\r\n      filtro,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Box my={3}>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={8}>\r\n          <Paper className={classes.root}>\r\n            <InputBase\r\n              fullWidth\r\n              placeholder=\"Buscar proveedor...\"\r\n              onChange={(e) => setValues(e.target.value)}\r\n              onKeyPress={pressEnter}\r\n              value={values}\r\n            />\r\n            <IconButton onClick={() => setFiltro(values)}>\r\n              <Search />\r\n            </IconButton>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={6}\r\n          xs={4}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n          false ? null : (\r\n            <ClientesInactivosComponent tipo=\"PROVEEDOR\" refetchProveedores={refetch} />\r\n          )}\r\n          <Box mx={1} />\r\n          {permisosUsuario.accesos.catalogos.provedores.ver === false ? null : (\r\n            <CrearCliente\r\n              tipo=\"PROVEEDOR\"\r\n              accion=\"registrar\"\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={3}>\r\n        <TablaProovedores obtenerClientes={obtenerClientes} refetch={refetch} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CAJA = gql`\r\n    mutation CrearCaja($input: CrearCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CAJAS = gql`\r\n    query ObtenerCajasSucursales($empresa: ID!, $sucursal: ID!){\r\n        obtenerCajasSucursal(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            numero_caja\r\n            activa\r\n            usuario_creador {\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n            cantidad_efectivo_actual\r\n            usuario_en_caja {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n            principal \r\n        }\r\n    }\r\n`;\r\n\r\nexport const CREAR_HISTORIAL_CAJA = gql`\r\n    mutation CrearHistorialCaja($input: CrearHistorialCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearHistorialCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CAJA = gql`\r\n    query ObtenerHistorialCaja($input: HistorialCajasInput, $id_Caja: ID!,$empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialCaja(input: $input, id_Caja: $id_Caja,empresa: $empresa, sucursal: $sucursal){\r\n            tipo_movimiento\r\n            concepto\r\n            horario_turno\r\n            numero_caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            hora_moviento{\r\n                hora\r\n                minutos\r\n                segundos\r\n                completa\r\n            }\r\n            fecha_movimiento{\r\n                year\r\n                mes\r\n                dia\r\n                no_dia_year\r\n                no_semana_year\r\n                completa\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CAJA = gql`\r\n\tmutation eliminarCaja($id: ID!) {\r\n\t\teliminarCaja(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ACTUALIZAR_CAJA = gql`\r\n\tmutation ActualizarCaja($input: EditarCaja, $id: ID!) {\r\n\t\tactualizarCaja(id: $id, input: $input) {\r\n            _id\r\n            numero_caja\r\n            activa\r\n        }\r\n    }\r\n`; \r\n\r\nexport const OBTENER_PRE_CORTE_CAJA = gql`\r\n    query ObtenerPreCorteCaja($empresa: ID!, $sucursal: ID!, $input: PreCortesDeCajaInput, $cajaPrincipal: Boolean){\r\n        obtenerPreCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input, cajaPrincipal: $cajaPrincipal){\r\n            monto_efectivo_precorte         \r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTES_CAJA = gql`\r\n    query ObtenerCortesDeCaja($empresa: ID!, $sucursal: ID!, $input: FiltroCorteDeCajaInput){\r\n        obtenerCortesDeCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            concepto\r\n            token_turno_user\r\n            numero_caja\r\n            horario_en_turno\r\n            id_caja\r\n            hora_salida{\r\n                completa\r\n            }\r\n            fecha_salida{\r\n                completa\r\n            }\r\n            fecha_movimiento\r\n            usuario_en_turno{\r\n                nombre\r\n                telefono\r\n                email\r\n                numero_usuario\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n            sucursal{\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTE_CAJA = gql`\r\n    query ObtenerCorteCaja($empresa: ID!, $sucursal: ID!, $input: CorteDeCajaInput){\r\n        obtenerCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            montos_en_sistema{\r\n                monto_efectivo\r\n                monto_tarjeta_debito\r\n                monto_tarjeta_credito\r\n                monto_creditos\r\n                monto_monedero\r\n                monto_transferencia\r\n                monto_cheques\r\n                monto_vales_despensa\r\n            }\r\n        }\r\n    }\r\n`;","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Badge, Box, CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withStyles } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaCajas({\r\n  obtenerCajasSucursal,\r\n  setAlert,\r\n  refetch,\r\n}) {\r\n  const permisos = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Cajas</TableCell>\r\n                {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerCajasSucursal.map((row) => {\r\n                return (\r\n                  <RowCajasRender\r\n                    key={row.numero_caja}\r\n                    row={row}\r\n                    permisos={permisos}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    color: ({ props }) => props.color,\r\n    background: ({ props }) => props.color,\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nconst RowCajasRender = ({ row, permisos, setAlert, refetch }) => {\r\n  const styleProps = {\r\n    color: row.activa ? \"#44b700\" : \"red\",\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Box display=\"flex\">\r\n          <StyledBadge\r\n            overlap=\"circle\"\r\n            props={styleProps}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"left\",\r\n            }}\r\n            variant=\"dot\" />\r\n            <Box mx={1} />\r\n          <Box>CAJA {row.numero_caja} {row.principal ? \"PRINCIPAL\" : \"\"}</Box>\r\n        </Box>\r\n      </TableCell>\r\n      {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <EliminarCajasModal\r\n            data={row}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCajasModal = ({ data, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const [eliminarCaja] = useMutation(ELIMINAR_CAJA);\r\n\r\n  const deleteCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await eliminarCaja({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      handleClose();\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleClickOpen()} disabled={data.activa || data.principal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={() => deleteCaja()}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Box, Button, CircularProgress } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport TablaCajas from \"./ListaCajas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_CAJA, OBTENER_CAJAS } from \"../../../../gql/Cajas/cajas\";\r\n\r\nexport default function RegistroCajas() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let obtenerCajasSucursal = [];\r\n  /* Mutation */\r\n  const [crearCaja] = useMutation(CREAR_CAJA);\r\n\r\n  /* Queries */\r\n  const { data, refetch } = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const nuevaCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await crearCaja({\r\n        variables: {\r\n          input: {\r\n            usuario_creador: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (data) {\r\n    obtenerCajasSucursal = data.obtenerCajasSucursal;\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" my={2}>\r\n        {sesion.accesos.catalogos.cajas.agregar === false ? null : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            onClick={() => nuevaCaja()}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      <TablaCajas\r\n        obtenerCajasSucursal={obtenerCajasSucursal}\r\n        setAlert={setAlert}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCajas from \"./RegistrarCajas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n   const descripcion = 'En este apartado se registran las cajas necesarias para realizar los movimientos operativos de ventas.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Cajas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cajas\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n        <Box>\r\n       \r\n          <Container maxWidth=\"sm\">\r\n          \r\n            <RegistroCajas />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  Typography,\r\n  Switch,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport CrearUsario from \"./CrearUsuario\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_USUARIOS,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Usuario\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 7, label: \"Estado\", minWidth: 100, align: \"right\" },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaUsuarios({ empresa, filtro }) {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: { empresa, filtro, eliminado: false },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.usuarios.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.usuarios.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => {\r\n              return <RowsRender key={index} datos={row} setAlert={setAlert} />;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            estado_usuario: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_usuario}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell align={\"right\"}>\r\n        {loading ? (\r\n          <CircularProgress size={30} />\r\n        ) : (\r\n          <Switch\r\n            checked={datos.estado_usuario}\r\n            onChange={cambiarEstado}\r\n            color=\"primary\"\r\n          />\r\n        )}\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.usuarios.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearUsario accion=\"actualizar\" datos={datos} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarUsuario datos={datos} setAlert={setAlert} />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarUsuario = ({ datos, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const [loading, setLoading] = useState(false);\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const deleteUsuario = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const result = await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            eliminado: true,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.actualizarUsuario;\r\n        setAlert({ message, status: \"success\", open: true });\r\n      }\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      handleClose();\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-usuario\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-usuario\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => deleteUsuario()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Close, Search } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport {\r\n  ACTUALIZAR_USUARIO,\r\n  OBTENER_USUARIOS,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function UsuariosInactivosComponent() {\r\n  const [open, setOpen] = useState(false);\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"inherit\"\r\n        onClick={handleModalToggle}\r\n        startIcon={<RestoreFromTrash />}\r\n      >\r\n        Usuarios inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-usuarios-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-usuarios-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Usuarios inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              placeholder=\"Buscar usuario: No. usuario, email o nombre...\"\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              value={filter}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <UsuariosInactivos filter={filter} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst UsuariosInactivos = ({ filter }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n\r\n  const [value] = useDebounce(filter, 800);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: {\r\n      filtro: value ? value : \"\",\r\n      empresa: sesion.empresa._id,\r\n      eliminado: true,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <ErrorPage error={error} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay usuarios inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>No. Usuario</TableCell>\r\n              <TableCell>Nombre</TableCell>\r\n              <TableCell>Correo</TableCell>\r\n              <TableCell align=\"right\">Restaurar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => (\r\n              <RenderClientes key={index} datos={row} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderClientes = ({ datos }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { setUpdate, update } = useContext(UsuarioContext);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            eliminado: false,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <Typography>{datos.numero_usuario}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell align=\"right\">\r\n          <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n            <RestoreFromTrash style={{ fontSize: 30 }} />\r\n          </IconButton>\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-usuario-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-usuario-dialog\">\r\n          {\"Se reactivará este usuario\"}\r\n        </DialogTitle>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleDeleteToggle}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => cambiarEstado()}\r\n            color=\"primary\"\r\n            autoFocus\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Restaurar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  Paper,\r\n  InputBase,\r\n  IconButton,\r\n  Grid,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport ListaUsuarios from \"./ListaUsuario\";\r\nimport CrearUsuario from \"./CrearUsuario\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport UsuariosInactivosComponent from \"./UsuariosInactivos\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Usuarios() {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UsuarioProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Usuarios\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Usuarios\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mt={3} display=\"flex\" justifyContent=\"space-between\">\r\n            <Container>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={8} md={6}>\r\n                  <Paper className={classes.root}>\r\n                    <InputBase\r\n                      fullWidth\r\n                      placeholder=\"Buscar cliente...\"\r\n                      onChange={(e) => setValues(e.target.value)}\r\n                      onKeyPress={pressEnter}\r\n                      value={values}\r\n                    />\r\n                    <IconButton onClick={() => setFiltro(values)}>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </Paper>\r\n                </Grid>\r\n                <Grid item xs={4} md={6}>\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                  {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <UsuariosInactivosComponent />\r\n                    )}\r\n                    <Box mx={1} />\r\n                    {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <CrearUsuario accion=\"registrar\" datos={undefined} />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box my={3}>\r\n                <ListaUsuarios empresa={sesion.empresa._id} filtro={filtro} />\r\n              </Box>\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </UsuarioProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateDepartamentosContext = createContext();\r\n\r\nexport const DepartamentosProvider = ({ children }) => {\r\n    const [data, setData] = useState({\r\n\t\tnombre_departamentos:''\r\n\t});\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ accion, setAccion ] = useState(true);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ idDepartamento, setIdDepartamento ] = useState(\"\");\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [  loading, setLoading ] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<CreateDepartamentosContext.Provider value={\r\n            { \r\n                data, \r\n                setData,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                accion,\r\n                setAccion,\r\n                idDepartamento, \r\n                setIdDepartamento,\r\n                alert,\r\n                setAlert,\r\n                loading,\r\n                setLoading\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateDepartamentosContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n} from \"@material-ui/core/\";\r\n\r\nimport { Delete, Edit, Close } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_DEPARTAMENTOS,\r\n  ELIMINAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\n// import ContainerRegistroAlmacen from './RegistroDepartamento';\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaDepartamentos() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let obtenerDepartamentos = [];\r\n  const { update, setData } = useContext(CreateDepartamentosContext);\r\n\r\n  /* Queries */\r\n  const { data, loading, error, refetch } = useQuery(OBTENER_DEPARTAMENTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (data) {\r\n    obtenerDepartamentos = data.obtenerDepartamentos;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Departamentos</TableCell>\r\n                {sesion.accesos.catalogos.departamentos.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.departamentos.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerDepartamentos.map((row, index) => {\r\n                return (\r\n                  <ListaDepartamentosRender\r\n                    key={index}\r\n                    row={row}\r\n                    setData={setData}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ListaDepartamentosRender = ({ row, setData, refetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [selected, setSelected] = useState(false);\r\n  const { setAccion, setIdDepartamento, idDepartamento } = useContext(\r\n    CreateDepartamentosContext\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setIdDepartamento(\"\");\r\n    setAccion(true);\r\n    setSelected(false);\r\n    setData({\r\n      nombre_departamentos: \"\",\r\n    });\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIdDepartamento(row._id);\r\n    setAccion(false);\r\n    setData({\r\n      nombre_departamentos: row.nombre_departamentos,\r\n    });\r\n    setSelected(true);\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={idDepartamento === row._id}\r\n    >\r\n      <TableCell>{row.nombre_departamentos}</TableCell>\r\n      {sesion.accesos.catalogos.departamentos.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {idDepartamento === row._id ? (\r\n            <IconButton onClick={() => handleCancel()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => handleEdit()}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.departamentos.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <DeleteDepartamento data={row} refetch={refetch} />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst DeleteDepartamento = ({ data, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState();\r\n  const handleModal = () => setOpen(!open);\r\n  const { setAlert } = useContext(CreateDepartamentosContext);\r\n\r\n  const [eliminarDepartamento] = useMutation(ELIMINAR_DEPARTAMENTO);\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const resultado = await eliminarDepartamento({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (resultado.data.eliminarDepartamento.message === \"false\") {\r\n        setAlert({\r\n          message: \"Departamento eliminado con exito\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: resultado.data.eliminarDepartamento.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n\r\n      refetch();\r\n      setLoading(false);\r\n      setOpen(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        onClick={() => {\r\n          handleModal();\r\n        }}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Box, Button, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaDepartamentos from \"./ListaDepartamentos\";\r\nimport {\r\n  REGISTRAR_DEPARTAMENTO,\r\n  ACTUALIZAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistroDepartamentos() {\r\n  const {\r\n    data,\r\n    setData,\r\n    update,\r\n    setUpdate,\r\n    error,\r\n    setError,\r\n    accion,\r\n    setAccion,\r\n    idDepartamento,\r\n    setIdDepartamento,\r\n    setAlert,\r\n    alert,\r\n  } = useContext(CreateDepartamentosContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  const [ActualzarDepartamentos] = useMutation(ACTUALIZAR_DEPARTAMENTO);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!data.nombre_departamentos) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        setLoading(true);\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.departamentos.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await CrearDepartamentos({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.departamentos.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            /* const inputActualizado = cleanTypenames(input); */\r\n            await ActualzarDepartamentos({\r\n              variables: {\r\n                input,\r\n                id: idDepartamento,\r\n              },\r\n            });\r\n          }\r\n        }\r\n        setUpdate(!update);\r\n        setAccion(true);\r\n        setIdDepartamento(\"\");\r\n        setData({\r\n          nombre_departamentos: \"\",\r\n        });\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <form onSubmit={saveData}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n          <TextField\r\n            id=\"outlined-error-helper-text\"\r\n            label=\"Nombre departamento\"\r\n            value={data.nombre_departamentos}\r\n            name=\"nombre_departamentos\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            fullWidth\r\n            onChange={obtenerDatos}\r\n            error={error}\r\n            disabled={loading}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n          <Box ml={1} />\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </form>\r\n      <TablaDepartamentos />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroDepartamentos from \"./RegistroDepartamento\";\r\nimport { DepartamentosProvider } from \"../../../../context/Catalogos/Departamentos\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Departamentos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion = 'En este apartado se registran los departamentos que se le podrá asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DepartamentosProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/departamentos.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Departamentos\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Departamentos\r\n              </Typography>\r\n              <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box >\r\n            <Container maxWidth=\"sm\">\r\n              <RegistroDepartamentos accion=\"registrar\" />\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </DepartamentosProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  fade,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  TextField,\r\n  CircularProgress,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Delete, Edit, ExpandMore, Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CATEGORIAS,\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n  ACTUALIZAR_SUBCATEGORIA,\r\n  ACTUALIZAR_CATEGORIA,\r\n  ELIMINAR_CATEGORIA,\r\n  ELIMINAR_SUBCATEGORIA,\r\n} from \"../../../../gql/Catalogos/categorias\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  selected: {\r\n    background: fade(theme.palette.secondary.main, 0.1),\r\n  },\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [categoria, setCategoria] = useState(\"\");\r\n  const [toUpdateID, setToUpdateID] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CATEGORIAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n  /*  Categorias Mutations */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  const [actualizarCategoria] = useMutation(ACTUALIZAR_CATEGORIA);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setCategoria(e.target.value);\r\n  };\r\n\r\n  const guardarCategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!categoria) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const categoriaActualizada = cleanTypenames(categoria);\r\n          await actualizarCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria: categoriaActualizada,\r\n              },\r\n              idCategoria: toUpdateID,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoadingBackDrop(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCategorias } = data;\r\n  const render_categorias = obtenerCategorias.map((categoria, index) => (\r\n    <RenderCategorias\r\n      key={index}\r\n      categoria={categoria}\r\n      setToUpdateID={setToUpdateID}\r\n      setCategoria={setCategoria}\r\n      refetch={refetch}\r\n      toUpdateID={toUpdateID}\r\n    />\r\n  ));\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box>\r\n        <Typography>\r\n          <b>Categoria</b>\r\n        </Typography>\r\n        <form onSubmit={guardarCategoria}>\r\n          <Grid container spacing={2}>\r\n            <Grid item sm={6} xs={12}>\r\n              <TextField\r\n                value={categoria}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onChange={obtenerDatos}\r\n                fullWidth\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loadingBackDrop}\r\n              />\r\n            </Grid>\r\n            <Grid item sm={6} xs={12}>\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                disableElevation\r\n                type=\"submit\"\r\n                disabled={loadingBackDrop}\r\n                startIcon={\r\n                  loadingBackDrop ? (\r\n                    <CircularProgress color=\"inherit\" size={20} />\r\n                  ) : (\r\n                    <Add />\r\n                  )\r\n                }\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography variant=\"h6\">Categorias</Typography>\r\n      </Box>\r\n      <Box mb={5}>{render_categorias}</Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderCategorias = ({\r\n  categoria,\r\n  setToUpdateID,\r\n  setCategoria,\r\n  refetch,\r\n  toUpdateID,\r\n}) => {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [subcategoria, setSubcategoria] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Subcategorias Mutations */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  const [actualizarSubcategoria] = useMutation(ACTUALIZAR_SUBCATEGORIA);\r\n\r\n  const render_subcategorias = categoria.subcategorias.map((subcategoria) => (\r\n    <RenderSubcategorias\r\n      key={subcategoria._id}\r\n      idCategoria={categoria._id}\r\n      subcategoria={subcategoria}\r\n      setToUpdateID={setToUpdateID}\r\n      toUpdateID={toUpdateID}\r\n      setSubcategoria={setSubcategoria}\r\n      setAlert={setAlert}\r\n      refetch={refetch}\r\n    />\r\n  ));\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    window.scrollTo(0, 0);\r\n    event.stopPropagation();\r\n    setToUpdateID(categoria._id);\r\n    setCategoria(categoria.categoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setCategoria(\"\");\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSubcategoria(e.target.value);\r\n  };\r\n\r\n  const guardarSubcategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!subcategoria) return;\r\n    setLoading(true);\r\n    let msgAlert = \"\";\r\n    let resp;\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria,\r\n              },\r\n              idCategoria: categoria._id,\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.crearSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.crearSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const subCategoriaActualizada = cleanTypenames(subcategoria);\r\n          resp = await actualizarSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria: subCategoriaActualizada,\r\n              },\r\n              idCategoria: categoria._id,\r\n              idSubcategoria: toUpdateID,\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.actualizarSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.actualizarSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      }\r\n      refetch();\r\n\r\n      setAlert(msgAlert);\r\n      setLoading(false);\r\n      setSubcategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Accordion>\r\n        <AccordionSummary\r\n          style={{ height: 32 }}\r\n          className={\r\n            toUpdateID && toUpdateID === categoria._id ? classes.selected : \"\"\r\n          }\r\n          expandIcon={<ExpandMore />}\r\n          aria-label=\"Expand\"\r\n          aria-controls={`categoria-action-${categoria._id}`}\r\n          id={`categoria-${categoria._id}`}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Typography>\r\n              {categoria.categoria}\r\n            </Typography>\r\n            <div className={classes.flexGrow} />\r\n            {sesion.accesos.catalogos.categorias.editar ===\r\n            false ? null : toUpdateID && toUpdateID === categoria._id ? (\r\n              <IconButton\r\n                onClick={cancelarUpdate}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton\r\n                onClick={obtenerCamposParaActualizar}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n            {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n              <ModalEliminar\r\n                idCategoria={categoria._id}\r\n                refetch={refetch}\r\n                tipo=\"categoria\"\r\n                setAlert={setAlert}\r\n              />\r\n            )}\r\n          </Box>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n            <Box mb={2} />\r\n            <form onSubmit={guardarSubcategoria}>\r\n              <Grid container spacing={2}>\r\n                <Grid item sm={6}>\r\n                  <Typography>\r\n                    <b>Subcategorias</b>\r\n                  </Typography>\r\n                  <TextField\r\n                    value={subcategoria}\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    onChange={obtenerDatos}\r\n                    fullWidth\r\n                    inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid\r\n                  item\r\n                  sm={6}\r\n                  style={{ display: \"flex\", alignItems: \"flex-end\" }}\r\n                >\r\n                  <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    size=\"large\"\r\n                    disableElevation\r\n                    onClick={guardarSubcategoria}\r\n                    disabled={loading}\r\n                    startIcon={\r\n                      loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : (\r\n                        <Add />\r\n                      )\r\n                    }\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n\r\n            <Box my={1}>\r\n              <Typography variant=\"h6\">Subcategorias</Typography>\r\n            </Box>\r\n            {render_subcategorias}\r\n          </Box>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderSubcategorias = ({\r\n  subcategoria,\r\n  idCategoria,\r\n  toUpdateID,\r\n  setToUpdateID,\r\n  setSubcategoria,\r\n  setAlert,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(subcategoria._id);\r\n    setSubcategoria(subcategoria.subcategoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setSubcategoria(\"\");\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        borderRadius={3}\r\n        px={1}\r\n        className={\r\n          toUpdateID && toUpdateID === subcategoria._id ? classes.selected : \"\"\r\n        }\r\n      >\r\n        <Typography>{subcategoria.subcategoria}</Typography>\r\n        <div className={classes.flexGrow} />\r\n        {sesion.accesos.catalogos.categorias.editar ===\r\n        false ? null : toUpdateID && toUpdateID === subcategoria._id ? (\r\n          <IconButton\r\n            onClick={cancelarUpdate}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton\r\n            onClick={obtenerCamposParaActualizar}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n        {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n          <ModalEliminar\r\n            idCategoria={idCategoria}\r\n            subcategoria={subcategoria}\r\n            refetch={refetch}\r\n            tipo=\"subcategoria\"\r\n            setAlert={setAlert}\r\n          />\r\n        )}\r\n      </Box>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminar = ({\r\n  idCategoria,\r\n  subcategoria,\r\n  refetch,\r\n  tipo,\r\n  setAlert,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCategoria] = useMutation(ELIMINAR_CATEGORIA);\r\n  const [eliminarSubcategoria] = useMutation(ELIMINAR_SUBCATEGORIA);\r\n\r\n  const handleOpen = (event) => {\r\n    console.log(event);\r\n    event.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n  const handleClose = (event) => {\r\n    event.stopPropagation();\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async (event) => {\r\n    event.stopPropagation();\r\n    setLoading(true);\r\n    let msgAlert = {};\r\n    try {\r\n      if (tipo === \"categoria\") {\r\n        const resp = await eliminarSubcategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n            idSubcategoria: subcategoria._id,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarSubcategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarSubcategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      } else {\r\n        const resp = await eliminarCategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarCategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarCategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      }\r\n      setLoading(false);\r\n      setAlert(msgAlert);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={(e) => handleOpen(e)}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={(e) => handleClose(e)}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={(e) => handleClose(e)} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={(e) => handleDelete(e)}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCategorias from \"./RegistroCategorias\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Categorias() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const descripcion= 'En este apartado se registran las categorias que se podrán asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/categorias.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Categorias\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Categorias\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n     \r\n        <Box>\r\n          <Container maxWidth=\"md\">\r\n            <RegistroCategorias />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ELIMINAR_COLOR,\r\n} from \"../../../../gql/Catalogos/colores\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaColores({\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.nombre.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <TextField\r\n            fullWidth\r\n            placeholder=\"Buscar...\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            onChange={(e) => setBusqueda(e.target.value)}\r\n          />\r\n        </Box>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell>Nombre</TableCell>\r\n                {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    key={index}\r\n                    row={row}\r\n                    setAlert={setAlert}\r\n                    toUpdate={toUpdate}\r\n                    setToUpdate={setToUpdate}\r\n                    setValues={setValues}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  const [eliminarColor] = useMutation(\r\n    ELIMINAR_COLOR /* , {\r\n    update(cache, { data: { eliminarColor } }) {\r\n      try {\r\n        const { obtenerColores } = cache.readQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n        });\r\n\r\n        cache.writeQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n          data: {\r\n            obtenerColores: {\r\n              ...obtenerColores,\r\n              eliminarColor,\r\n            },\r\n          },\r\n        });\r\n      } catch (error) {}\r\n    },\r\n  } */\r\n  );\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const resp = await eliminarColor({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch(refetch);\r\n      setAlert({\r\n        message: resp.data.eliminarColor.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleModal();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (row) => {\r\n    if (!row) {\r\n      setToUpdate(\"\");\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      return;\r\n    }\r\n    setToUpdate(row._id);\r\n    setValues({ nombre: row.nombre, hex: row.hex });\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={toUpdate === row._id ? true : false}\r\n    >\r\n      <TableCell padding=\"checkbox\">\r\n        <Box width={30} height={25} bgcolor={row.hex} borderRadius=\"10%\" />\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>\r\n          <b>{row.nombre}</b>\r\n        </Typography>\r\n      </TableCell>\r\n      {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {toUpdate === row._id ? (\r\n            <IconButton onClick={() => onUpdate()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => onUpdate(row)}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <Modal\r\n            handleModal={handleModal}\r\n            openModal={openModal}\r\n            handleDelete={handleDelete}\r\n            loading={loading}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete, loading }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  CircularProgress,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaColores from \"./ListaColores\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_COLORES,\r\n  CREAR_COLOR,\r\n  ACTUALIZAR_COLOR,\r\n} from \"../../../../gql/Catalogos/colores\";\r\n\r\nexport default function RegistroColores() {\r\n  const [color, setColor] = useState({});\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [error_data, setError] = useState(false);\r\n  const [loading_data, setLoading] = useState(false);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COLORES, {\r\n    variables: { empresa: sesion.empresa._id },\r\n  });\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n  const [actualizarColor] = useMutation(ACTUALIZAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerColores } = data;\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      setError(true);\r\n      return;\r\n    }\r\n    setError(false);\r\n    setLoading(true);\r\n    try {\r\n      const colores = values;\r\n      let msg;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.colores.editar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          /* const colorActualizado = cleanTypenames(colores); */\r\n          const resp = await actualizarColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n              },\r\n              id: toUpdate,\r\n            },\r\n          });\r\n          msg = resp.data.actualizarColor.message;\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.colores.agregar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n          msg = \"¡Listo!. Color creado.\";\r\n        }\r\n      }\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setToUpdate(\"\");\r\n      setLoading(false);\r\n      setAlert({ message: msg, status: \"success\", open: true });\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          sm={5}\r\n          xs={12}\r\n          style={{ display: \"flex\", justifyContent: \"center\" }}\r\n        >\r\n          <Box>\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box my={5}>\r\n              <form id=\"form-colores\" onSubmit={GuardarDatosBD}>\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({ ...values, nombre: e.target.value })\r\n                  }\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        {!values.hex ? (\r\n                          <Box\r\n                            border={1}\r\n                            style={\r\n                              error_data && !values.hex\r\n                                ? { borderColor: \"red\" }\r\n                                : { borderColor: \"black\" }\r\n                            }\r\n                            borderRadius={2}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        ) : (\r\n                          <Box\r\n                            border={1}\r\n                            borderRadius={2}\r\n                            bgcolor={values.hex}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        )}\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                  fullWidth\r\n                  error={error_data ? (!values.nombre ? true : false) : false}\r\n\t\t\t\t  disabled={loading_data}\r\n                  helperText={\r\n                    error_data\r\n                      ? !values.nombre\r\n                        ? \"Campo obligatorio\"\r\n                        : \"\"\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </form>\r\n\r\n              <Box my={1} />\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n                type=\"submit\"\r\n                form=\"form-colores\"\r\n                startIcon={loading_data ? <CircularProgress color=\"inherit\" size={20} /> : <Add />}\r\n\t\t\t\tdisabled={loading_data}\r\n              >\r\n                {toUpdate ? \"Actualizar\" : \"Guardar\"}\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={7} xs={12}>\r\n          <TablaColores\r\n            datos={obtenerColores}\r\n            toUpdate={toUpdate}\r\n            setToUpdate={setToUpdate}\r\n            setValues={setValues}\r\n            refetch={refetch}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroColores from \"./RegistroColores\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Colores() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =  'En este apartado se registran los colores que se le podrán asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/colores.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Colores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Colores\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box mt={4}>\r\n          <Container maxWidth=\"md\">\r\n            \r\n            <RegistroColores />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n  CircularProgress,\r\n} from \"@material-ui/core/\";\r\nimport { Delete, Edit, Close } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_MARCAS,\r\n  ELIMINAR_MARCAS,\r\n} from \"../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ListaMarcas({\r\n  updateData,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setData,\r\n}) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let obtenerMarcas = [];\r\n\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_MARCAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, updateData]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (data) {\r\n    obtenerMarcas = data.obtenerMarcas;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <TableContainer style={{ height: \"72vh\" }}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Marca</TableCell>\r\n                {sesion.accesos.catalogos.marcas.editar === false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.marcas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerMarcas.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    key={index}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                    datos={row}\r\n                    toUpdate={toUpdate}\r\n                    setToUpdate={setToUpdate}\r\n                    setData={setData}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  updateData,\r\n  toUpdate,\r\n  setAlert,\r\n  setToUpdate,\r\n  setData,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  const [eliminarMarca] = useMutation(ELIMINAR_MARCAS);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resultado = await eliminarMarca({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      if (resultado.data.eliminarMarca.message === \"false\") {\r\n        setAlert({\r\n          message: \"Marca eliminada con exito\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: resultado.data.eliminarMarca.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setData(\"\");\r\n      refetch();\r\n      return;\r\n    }\r\n    refetch();\r\n    setToUpdate(dato._id);\r\n    setData(dato);\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={toUpdate === datos._id ? true : false}\r\n    >\r\n      <TableCell>{datos.nombre_marca}</TableCell>\r\n      {sesion.accesos.catalogos.marcas.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {toUpdate === datos._id ? (\r\n            <IconButton onClick={() => onUpdate()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => onUpdate(datos)}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.marcas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <Modal\r\n            handleModal={handleModal}\r\n            openModal={openModal}\r\n            handleDelete={handleDelete}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\n//ELIMINAR DATOS DE LA TABLA\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateMarcasContext = createContext();\r\n\r\nexport const MarcasProvider = ({ children }) => {\r\n\tconst [ datosMarcas, setDatosMarcas ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CreateMarcasContext.Provider value={\r\n            { \r\n                datosMarcas, \r\n                setDatosMarcas,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateMarcasContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Button, Box, TextField } from \"@material-ui/core\";\r\nimport ListaMarcas from \"./ListaMarcas\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport {\r\n  /* OBTENER_MARCAS, */ REGISTRAR_MARCAS,\r\n  ACTUALIZAR_MARCAS,\r\n} from \"../../../../gql/Catalogos/marcas\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CreateMarcasContext } from \"../../../../context/Catalogos/Marcas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nexport default function VistaMarcas() {\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [data, setData] = useState({\r\n    nombre_marca: \"\",\r\n  });\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [updateData, setUpdateData] = useState(false);\r\n  const { /* datosMarcas, setDatosMarcas, */ error, setError } = useContext(\r\n    CreateMarcasContext\r\n  );\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n  const [actualizarMarca] = useMutation(ACTUALIZAR_MARCAS);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const saveData = async () => {\r\n    try {\r\n      if (!data.nombre_marca) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        if (toUpdate) {\r\n          if (sesion.accesos.catalogos.marcas.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción !\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const input = cleanTypenames(data);\r\n            await actualizarMarca({\r\n              variables: {\r\n                input: {\r\n                  nombre_marca: input.nombre_marca,\r\n                },\r\n                id: toUpdate,\r\n              },\r\n            });\r\n            setData(\"\");\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.marcas.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción !\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const input = data;\r\n            await CrearMarca({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n            setData(\"\");\r\n          }\r\n        }\r\n        setToUpdate(\"\");\r\n        setUpdateData(!updateData);\r\n        setLoading(false);\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") saveData();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <BackdropComponent loading={loading} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n        <TextField\r\n          id=\"outlined-error-helper-text\"\r\n          label=\"Nombre de marca\"\r\n          value={data.nombre_marca ? data.nombre_marca : \"\"}\r\n          name=\"nombre_marca\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          onChange={obtenerDatos}\r\n          error={error}\r\n          onKeyPress={pressEnter}\r\n        />\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          disableElevation\r\n          onClick={saveData}\r\n        >\r\n          <Add />\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      <ListaMarcas\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        updateData={updateData}\r\n        setData={setData}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { \r\n    Button, \r\n    Box, \r\n    Dialog,\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    Container,\r\n    makeStyles,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { FcRating } from \"react-icons/fc\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport VistaMarcas from './VistaMarcas';\r\nimport { MarcasProvider } from '../../../../context/Catalogos/Marcas';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nexport default function Marcas() {\r\n    const classes = useStyles();\r\n    const [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado se registran las marcas que se asignarán a un producto.';\r\n    const handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<MarcasProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcRating className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t\t<VistaMarcas />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</MarcasProvider>\r\n\t\t</div>\r\n    )\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  fade,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  TextField,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Delete, Edit, ExpandMore, Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CUENTAS,\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n  ACTUALIZAR_SUBCUENTA,\r\n  ACTUALIZAR_CUENTA,\r\n  ELIMINAR_CUENTA,\r\n  ELIMINAR_SUBCUENTA,\r\n} from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  selected: {\r\n    background: fade(theme.palette.secondary.main, 0.1),\r\n  },\r\n}));\r\n\r\nexport default function RegistroCentroCostos() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [cuenta, setCuenta] = useState(\"\");\r\n  const [toUpdateID, setToUpdateID] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n    variables: { empresa: sesion.empresa._id },\r\n  });\r\n  /*  Categorias Mutations */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  const [actualizarCuenta] = useMutation(ACTUALIZAR_CUENTA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCuentas } = data;\r\n  const render_cuentas = obtenerCuentas.map((cuenta, index) => (\r\n    <RenderCuentas\r\n      key={index}\r\n      cuenta={cuenta}\r\n      setToUpdateID={setToUpdateID}\r\n      setCuenta={setCuenta}\r\n      refetch={refetch}\r\n      toUpdateID={toUpdateID}\r\n    />\r\n  ));\r\n\r\n  const obtenerDatos = (e) => {\r\n    setCuenta(e.target.value);\r\n  };\r\n\r\n  const guardarCuenta = async () => {\r\n    if (!cuenta) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearCuenta({\r\n            variables: {\r\n              input: {\r\n                cuenta,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const cuentaActualizada = cleanTypenames(cuenta);\r\n          await actualizarCuenta({\r\n            variables: {\r\n              input: {\r\n                cuenta: cuentaActualizada,\r\n              },\r\n              idCuenta: toUpdateID,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        guardarCuenta();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Typography variant=\"h6\">Cuentas</Typography>\r\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n        <TextField\r\n          value={cuenta}\r\n          variant=\"outlined\"\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          size=\"small\"\r\n          style={{ width: \"35%\" }}\r\n          onKeyPress={pressEnter}\r\n          onChange={obtenerDatos}\r\n        />\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          disableElevation\r\n          onClick={guardarCuenta}\r\n        >\r\n          <Add />\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      {render_cuentas}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderCuentas = ({\r\n  cuenta,\r\n  setToUpdateID,\r\n  setCuenta,\r\n  refetch,\r\n  toUpdateID,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [subcuenta, setSubcuenta] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [eliminarCuenta] = useMutation(ELIMINAR_CUENTA);\r\n  /*  Subcategorias Mutations */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n  const [actualizarSubcuenta] = useMutation(ACTUALIZAR_SUBCUENTA);\r\n\r\n  const render_subcuentas =\r\n    cuenta.subcuentas !== null ? (\r\n      cuenta.subcuentas.map((subcuenta) => (\r\n        <RenderSubcuentas\r\n          key={subcuenta._id}\r\n          idCuenta={cuenta._id}\r\n          subcuenta={subcuenta}\r\n          setToUpdateID={setToUpdateID}\r\n          toUpdateID={toUpdateID}\r\n          setSubcuenta={setSubcuenta}\r\n          refetch={refetch}\r\n        />\r\n      ))\r\n    ) : (\r\n      <div />\r\n    );\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(cuenta._id);\r\n    setCuenta(cuenta.cuenta);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setCuenta(\"\");\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSubcuenta(e.target.value);\r\n  };\r\n\r\n  const guardarSubcuenta = async () => {\r\n    if (!subcuenta) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearSubcuenta({\r\n            variables: {\r\n              input: {\r\n                subcuenta,\r\n              },\r\n              idCuenta: cuenta._id,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const subCuentaActualizada = cleanTypenames(subcuenta);\r\n          await actualizarSubcuenta({\r\n            variables: {\r\n              input: {\r\n                subcuenta: subCuentaActualizada,\r\n              },\r\n              idCuenta: cuenta._id,\r\n              idSubcuenta: toUpdateID,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setSubcuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  const deleteCuenta = async (idCuenta) => {\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      await eliminarCuenta({\r\n        variables: {\r\n          id: idCuenta,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        guardarSubcuenta();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Accordion>\r\n        <AccordionSummary\r\n          className={\r\n            toUpdateID && toUpdateID === cuenta._id ? classes.selected : \"\"\r\n          }\r\n          expandIcon={<ExpandMore />}\r\n          aria-label=\"Expand\"\r\n          aria-controls={`cuenta-action-${cuenta._id}`}\r\n          id={`cuenta-${cuenta._id}`}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Typography style={{ fontSize: 15 }}>{cuenta.cuenta}</Typography>\r\n            <div className={classes.flexGrow} />\r\n            {toUpdateID && toUpdateID === cuenta._id ? (\r\n              <IconButton\r\n                onClick={cancelarUpdate}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            ) : sesion.accesos.catalogos.centro_costos.editar ===\r\n              false ? null : (\r\n              <IconButton\r\n                onClick={obtenerCamposParaActualizar}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n            {sesion.accesos.catalogos.centro_costos.eliminar ===\r\n            false ? null : (\r\n              <IconButton\r\n                onClick={() => deleteCuenta(cuenta._id)}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Delete />\r\n              </IconButton>\r\n            )}\r\n          </Box>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n            <Box mb={2} />\r\n            <Box ml={5} width=\"100%\" display=\"flex\">\r\n              <Typography variant=\"h6\" style={{ fontSize: 20 }}>\r\n                Subcuenta\r\n              </Typography>\r\n              <Box mr={2} />\r\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                <TextField\r\n                  value={subcuenta}\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  onChange={obtenerDatos}\r\n                  onKeyPress={pressEnter}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n                <Box ml={1} />\r\n                <Button\r\n                  color=\"primary\"\r\n                  variant=\"contained\"\r\n                  size=\"large\"\r\n                  disableElevation\r\n                  onClick={guardarSubcuenta}\r\n                >\r\n                  <Add />\r\n                  Guardar\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n            {cuenta.subcuentas !== null ? (\r\n              <Box ml={5}>{render_subcuentas}</Box>\r\n            ) : (\r\n              <div />\r\n            )}\r\n            {/* <Box ml={5}>{render_subcostos}</Box> */}\r\n          </Box>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderSubcuentas = ({\r\n  idCuenta,\r\n  subcuenta,\r\n  toUpdateID,\r\n  setToUpdateID,\r\n  setSubcuenta,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [eliminarSubcuenta] = useMutation(ELIMINAR_SUBCUENTA);\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(subcuenta._id);\r\n    setSubcuenta(subcuenta.subcuenta);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setSubcuenta(\"\");\r\n  };\r\n  const deleteSubCuenta = async (idSubCuenta) => {\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      await eliminarSubcuenta({\r\n        variables: {\r\n          idCuenta: idCuenta,\r\n          idSubcuenta: idSubCuenta,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setSubcuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        borderRadius={3}\r\n        px={1}\r\n        className={\r\n          toUpdateID && toUpdateID === subcuenta._id ? classes.selected : \"\"\r\n        }\r\n      >\r\n        <Typography>{subcuenta.subcuenta}</Typography>\r\n        <div className={classes.flexGrow} />\r\n        {sesion.accesos.catalogos.centro_costos.editar ===\r\n        false ? null : toUpdateID && toUpdateID === subcuenta._id ? (\r\n          <IconButton\r\n            onClick={cancelarUpdate}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton\r\n            onClick={obtenerCamposParaActualizar}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n        {sesion.accesos.catalogos.centro_costos.eliminar === false ? null : (\r\n          <IconButton\r\n            onClick={() => deleteSubCuenta(subcuenta._id)}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Delete />\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCentroCostos from './RegistroCentroCostos';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CentroCostos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado podrás registrar tus cuentas y subcuentas que utilizarás al momento de llevar tu control financiero. Por ejemplo: Compras, Ventas.'\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCentro de costos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCentro de costos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCentroCostos />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONCEPTOS_ALMACEN = gql`\r\n    query ObtenerConceptosAlmacen($empresa: ID!, $sucursal: ID!){\r\n        obtenerConceptosAlmacen(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_concepto\r\n            destino\r\n            origen\r\n            editable\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONCEPTO_ALMACEN = gql`\r\n    mutation CrearConceptoAlmacen($input: ConceptoAlmacenInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearConceptoAlmacen(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONCEPTO_ALMACEN = gql`\r\n    mutation ActualizarConceptoAlmacen($input: ConceptoAlmacenInput, $id: ID!){\r\n        actualizarConceptoAlmacen(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONCEPTO_ALMACEN = gql`\r\n    mutation EliminarConceptoAlmacen($id: ID!){\r\n        eliminarConceptoAlmacen(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n\tBox,\r\n\tCircularProgress,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTablePagination,\r\n\tTableRow,\r\n\tPaper,\r\n\tmakeStyles,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core';\r\n\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN, ELIMINAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaConceptos({setData, setIdConcepto, idConcepto, setAccion, updateData, setAlert}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\tlet obtenerConcepto= [];\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\tconst [ EliminarConceptoAlmacen ] = useMutation(ELIMINAR_CONCEPTO_ALMACEN);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ updateData, refetch ]\r\n\t); \r\n\r\n\tif(data){\r\n\t\tobtenerConcepto = data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait EliminarConceptoAlmacen({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: idConcepto\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t\tsetIdConcepto(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (loading){\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Concepto almacén</TableCell>\r\n                                <TableCell padding=\"default\">Origen</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Destino</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerConcepto.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_concepto}</TableCell>\r\n                                        <TableCell>{row.origen}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.destino}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_concepto: row.nombre_concepto,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torigen: row.origen,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdestino: row.destino\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerConcepto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Eliminar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Button, TextField, FormControl, Input, Grid, InputLabel, Select, MenuItem, useTheme, Dialog, DialogTitle, DialogActions } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport ListaConceptos from './ListaConceptos';\r\nimport { REGISTRAR_CONCEPTO_ALMACEN, ACTUALIZAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n     formControl: {\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom:theme.spacing(3),\r\n        minWidth: 200,\r\n        maxWidth: 200,\r\n    },\r\n}));\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nconst tipos = [\r\n    'SUMA',\r\n    'RESTA',\r\n\t'N/A'\r\n];\r\n\r\nfunction getStyles(tipo, tipoName, theme) {\r\n\tconsole.log(tipoName)\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function RegistroServicios() {\r\n\tconst classes = useStyles();\r\n     const theme = useTheme();\r\n\tconst [updateData, setUpdateData] = useState(false);\r\n\tconst [data, setData] = useState({\r\n\t\tnombre_concepto: \"\",\r\n        destino: \"\",\r\n\t\torigen:\"\"\r\n\t\t\r\n\t});\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [error, setError] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [accion, setAccion] = useState(true);\r\n\tconst [idConcepto, setIdConcepto] = useState('')\r\n    \r\n\tconst [ crearConceptoAlmacen ] = useMutation(REGISTRAR_CONCEPTO_ALMACEN);\r\n\tconst [ actualizarConceptoAlmacen ] = useMutation(ACTUALIZAR_CONCEPTO_ALMACEN);\r\n    const [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\tconst handleChangeInput = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n     const handleChangeDestino = (event) => {\r\n        setData({...data, destino:event.target.value});\r\n    };\r\n\tconst handleChangeOrigen = (event) => {\r\n        setData({...data, origen:event.target.value});\r\n    };\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n           setOpenModal(false);\r\n\t\t\tif(!data.nombre_concepto || !data.origen || !data.destino ){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data;\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\t\t\tusuario: sesion._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait actualizarConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tid: idConcepto\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetAccion(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\t\tsetData({nombre_concepto: \"\", origen: \"\", destino:\"\"});\r\n                setError(false);\r\n\t\t\t\tsetUpdateData(!updateData);\r\n\t\t\t\tsetIdConcepto(\"\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t}\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') handleSubmit();\r\n\t};\r\n\r\n    const Modal = ({ handleModal, openModal, handleSubmit }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Editar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres editar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleSubmit}>\r\n\t\t\t\t\t\tEditar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n            <Box  flexDirection=\"row\" >\r\n                <Grid container>\r\n                    <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                   \r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                         <Typography>Concepto </Typography>\r\n                        <TextField\r\n                            error={error}\r\n                            id=\"outlined-error-helper-text\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            name=\"nombre_concepto\"\r\n\t\t\t\t\t\t\tstyle={{marginLeft:2}}\r\n                            value={data.nombre_concepto}\r\n                            onChange={handleChangeInput}\r\n                            onKeyPress={pressEnter}\r\n\t\t\t\t\t\t\tinputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                        />\r\n                        \r\n                    </Box>\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"origen-label\"\r\n                        id=\"origen-name\"\r\n                        value={data.origen}\r\n                        onChange={handleChangeOrigen}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.origen, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"destino-label\">Destino</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"destino-label\"\r\n                        id=\"destino-name\"\r\n                        value={data.destino}\r\n                        onChange={handleChangeDestino}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.destino, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                        <Box ml={5} />\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={ () =>(accion) ? handleSubmit(): setOpenModal(true)} disableElevation>\r\n                            <Add />Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Box>\r\n\t\t\t<ListaConceptos \r\n\t\t\t\tsetData={setData} \r\n\t\t\t\tidConcepto={idConcepto} \r\n\t\t\t\tsetIdConcepto={setIdConcepto} \r\n\t\t\t\tsetAccion={setAccion} \r\n\t\t\t\tupdateData={updateData}\r\n\t\t\t\tsetAlert={setAlert} \r\n\t\t\t/>\r\n            <Modal handleModal={handleModal} openModal={openModal} handleSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroConcepto from './RegistroConcepto';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConceptosAlmacen() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado podrás registrar los conceptos que definirán la acción para los traspasos entre almacenes.';\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tConceptos Almacén\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tConceptos almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box mt={4} alignSelf='center' >\r\n\t\t\t\t\t<Container >\r\n\t\t\t\t\t\t<RegistroConcepto />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport Cliente from './Cliente/Cliente';\r\nimport Productos from './Producto/';\r\nimport Tallas from './Tallas/Tallas';\r\n/* import UnidadMedida from './UnidadMedida/UnidadMedida'; */\r\n/* import Contabilidad from './Contabilidad/Contabilidad'; */\r\nimport Proveedores from './Proveedores/Proovedores';\r\nimport Cajas from './Cajas/Cajas'; \r\nimport Usuarios from './Usuarios/Usuarios';\r\nimport Departamentos from './Departamentos/Departamentos';\r\nimport Categorias from './Categorias/Categorias';\r\nimport Colores from './Colores/Colores';\r\nimport Marcas from './Marcas/Marcas';\r\nimport CentroCostos from './CentroCostos/CentroCostos';\r\nimport ConceptosAlmacen from './ConceptosAlmacen/ConceptosAlmacen';\r\n\r\nexport default function Catalogos() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cliente />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.productos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Productos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.tallas_numeros.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Tallas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<UnidadMedida />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t\t{/* {permisosUsuario.accesos.catalogos.contabilidad.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Contabilidad />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Proveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.cajas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Usuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.departamentos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Departamentos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.categorias.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Categorias />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.colores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Colores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.marcas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Marcas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.centro_costos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CentroCostos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.conceptos_almacen.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ConceptosAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const TesoreriaCtx = createContext();\r\n\r\nexport const TesoreriaProvider = ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [cuentas, setCuentas] = useState([]);\r\n    const [cuenta, setCuenta] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    \r\n    return (\r\n        <TesoreriaCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                cuentas, \r\n                setCuentas,\r\n                reload, \r\n                setReload,\r\n                cuenta, \r\n                setCuenta\r\n            }}\r\n        >\r\n            {children}\r\n        </TesoreriaCtx.Provider>\r\n    );\r\n};\r\n","import { Box, Button, Dialog, DialogActions,\r\n        DialogContent, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography,\r\n        Input, FormControl, InputLabel\r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport moment from 'moment';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { CREAR_MOVIMIENTO_CUENTA } from '../../../../gql/Empresa/sucursales';\r\nimport {\r\n    OBTENER_USUARIOS,\r\n  } from \"../../../../gql/Catalogos/usuarios\";\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(0),\r\n        minWidth: '96%',\r\n        maxWidth: '96%',\r\n    },\r\n  \r\n    icon: {\r\n\t\twidth: 40\r\n\t},\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\nconst conceptos = ['CORTE DE CAJA','TRANSFERENCIA DE EFECTIVO','APORTACION SOCIOS'];\r\n\r\nexport default function RetiroDeposito({cuenta, setReload, tipo }) {\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const [ CrearMovimientoCuenta ] = useMutation(CREAR_MOVIMIENTO_CUENTA);\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [datosMovimiento, setDatosMovimiento] = useState({});\r\n    const [concepto, setConcepto] = useState(\"\");\r\n    const [usuarioEntrega, setUsuarioEntrega] = useState({});\r\n    const [origen, setOrigen] = useState({});\r\n    const [destino, setDestino] = useState({});\r\n    const [open, setOpen] = useState(false);\r\n    const [fechaMovimientoEntrega, setFechaMovimientoEntrega] = useState(\"\");\r\n    let cajasArray = []; \r\n    let usuarios = [];\r\n   \r\n\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`,\r\n            empresa: `${sesion.empresa._id}`,\r\n            eliminado: false,\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    });\r\n\r\n    const queryObtenerCajas =  useQuery(OBTENER_CAJAS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`,\r\n            empresa: `${sesion.empresa._id}`,\r\n\t\t},\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    });\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    };\r\n\r\n    const onChangeDatos = (e) => {\r\n    \r\n            setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value })\r\n        \r\n       \r\n    };\r\n\r\n    const input ={\r\n        tipo_movimiento: datosMovimiento.tipo_movimiento === 'RETIRO' ? 'CUENTA_RETIRO' : 'CUENTA_DEPOSITO',\r\n        id_usuario: sesion._id,\r\n        //rol_movimiento: tipo === true ? \"CUENTA-EMPRESA\" : \"CUENTA\",\r\n        rol_movimiento:  \"CAJA_PRINCIPAL\",\r\n        //numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        //id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : null,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_turno : '',\r\n        concepto: concepto,\r\n        usuario_entrega: usuarioEntrega._id,\r\n        origen_entrega: origen._id,\r\n        fecha_movimiento_entrega: fechaMovimientoEntrega,\r\n        \r\n        hora_moviento: {\r\n            hora: moment().locale(\"es-mx\").format('hh'),\r\n            minutos: moment().locale(\"es-mx\").format('mm'),\r\n            segundos: moment().locale(\"es-mx\").format('ss'),\r\n            completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n        },\r\n        fecha_movimiento: {\r\n            year: moment().locale(\"es-mx\").format('YYYY'),\r\n            mes: moment().locale(\"es-mx\").format('MM'),\r\n            dia: moment().locale(\"es-mx\").format('DD'),\r\n            no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n            no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto: (datosMovimiento.tipo_movimiento === 'RETIRO') ? parseFloat(datosMovimiento.cantidad * -1) : parseFloat(datosMovimiento.cantidad),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        comentarios: datosMovimiento.comentarios,\r\n    };\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n\r\n            if(datosMovimiento.tipo_movimiento !== 'RETIRO'){\r\n                if (concepto  === ''|| !usuarioEntrega || fechaMovimientoEntrega === '' || !origen || !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n                \r\n                   \r\n                    setAlert({\r\n                        message: 'Por favor complete los datos',\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                }\r\n            }else{\r\n                if (concepto  === ''|| !usuarioEntrega ||   !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n            \r\n                    \r\n                    setAlert({\r\n                        message: 'Por favor complete los datos',\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                } \r\n            }\r\n           \r\n            const movimiento = await CrearMovimientoCuenta({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    tipo: tipo\r\n                }\r\n            });\r\n            //refetch();\r\n            \r\n            setDatosMovimiento({}); \r\n            handleClickOpen();\r\n            setAlert({\r\n                message: movimiento.data.crearMovimientoCuenta.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n            setReload(true);\r\n        } catch (error) {\r\n            console.log(error)\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            setDatosMovimiento({}); \r\n            handleClickOpen();\r\n             /*  if (error.networkError.result) {\r\n                console.log(error.networkError.result.errors);\r\n              } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors.message);\r\n              } */\r\n        }\r\n    }\r\n\r\n    const handleChangeConcepto = (event) => {\r\n        try {    \r\n            let con = event.target.value;  \r\n            setConcepto(con);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeUsuarioEntrega = (event) => {\r\n        try {    \r\n            let usu = event.target.value;  \r\n            setUsuarioEntrega(usu);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeOrigen = (event) => {\r\n        try {    \r\n            let ori = event.target.value;  \r\n            setOrigen(ori);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeDestino = (event) => {\r\n        try {    \r\n            let des = event.target.value;  \r\n            setDestino(des);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeFechaMovimiento = (event) => {\r\n        try {    \r\n            let fecMov = event.target.value;  \r\n            setFechaMovimientoEntrega(fecMov);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n\r\n    \r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n       \r\n    }\r\n\r\n    if(queryObtenerCajas.data){\r\n        try {\r\n           \r\n            cajasArray = queryObtenerCajas.data.obtenerCajasSucursal;\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n       \r\n    }\r\n   \r\n\r\n    \r\n    return (\r\n        <Fragment>\r\n          <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Button  onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"row\">\r\n                    Realizar movimiento\r\n                    <Box display=\"flex\" alignItems=\"flex-end\">\r\n                        \r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/retiro-de-dinero.svg' alt=\"icono retiro\" className={classes.icon} />\r\n                    </Box>\r\n                </Box>    \r\n\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t</Button>\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <DialogContent>\r\n                  \r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h5'>\r\n                            Movimiento en caja principal\r\n                        </Typography>\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Recibe</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario\"\r\n                                variant=\"outlined\"\r\n                                disabled={true}\r\n                                value={sesion?.nombre}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\" >\r\n                            <Typography>Fecha y hora</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                disabled={true}\r\n                                size=\"small\"\r\n                                value={moment().locale(\"es-mx\").format('D MMMM YYYY, h:mm:ss')}\r\n                                name=\"fecha_movimiento\"\r\n                                variant=\"outlined\"\r\n\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"50%\">\r\n                            <Typography>Movimiento a Realizar</Typography>\r\n                            <Select\r\n                                className={classes.formComboBox}    \r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                name=\"tipo_movimiento\"\r\n                                onChange={onChangeDatos}\r\n                                fullWidth\r\n                            >\r\n                                <MenuItem value='DEPOSITO'>Depósito</MenuItem>\r\n                                <MenuItem value='RETIRO'>Retiro</MenuItem>\r\n                            </Select>\r\n                        </Box>\r\n                        <Box width=\"50%\">\r\n                            <Typography>Cantidad</Typography>\r\n                            <TextField\r\n                              \r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                \r\n                                InputProps={{type:'number'}}\r\n                                name=\"cantidad\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    {\r\n                        (datosMovimiento.tipo_movimiento) ? \r\n                              \r\n                            (datosMovimiento.tipo_movimiento === 'DEPOSITO') ? \r\n                                <div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box style={{width:'50%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(concepto) ? concepto : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto, index) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={index} value={concepto} >\r\n                                                        {concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                        <Box style={{width:'50%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"entrega-label\">Quién entrega</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"entrega-label\"\r\n                                                id=\"entrega-name\"\r\n                                                value={(usuarioEntrega) ? usuarioEntrega : \"\"}\r\n                                                onChange={handleChangeUsuarioEntrega}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {usuarios.map((usuario) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={usuario._id} value={usuario} >\r\n                                                        {usuario.nombre}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                        </div>\r\n                                        <div className={classes.formInputFlex}>\r\n                                        <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"origen-label\"\r\n                                            id=\"origen-name\"\r\n                                            value={(origen) ? origen : \"\"}\r\n                                            onChange={handleChangeOrigen}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {\r\n                                                cajasArray.map((caja) => {\r\n                                                    \r\n                                                    return(\r\n                                                        <MenuItem key={caja._id} value={caja} >\r\n                                                        Caja {(caja.principal) ? 'principal': caja.numero_caja}\r\n                                                        </MenuItem>\r\n                                                    )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                        <Box style={{width:'50%'}}>\r\n                                        <Typography>\r\n                                            <b>Fecha Movimiento :</b>\r\n                                        </Typography>\r\n                                        <Box display=\"flex\">\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                type=\"date\"\r\n                                                onChange={handleChangeFechaMovimiento}\r\n                                                size=\"small\"\r\n                                                name=\"fecha_movimiento\"\r\n                                                variant=\"outlined\"\r\n                                            />\r\n                                        </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            :\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"concepto-label\">Concepto</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"concepto-label\"\r\n                                            id=\"concepto-name\"\r\n                                            value={(concepto) ? concepto : \"\"}\r\n                                            onChange={handleChangeConcepto}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {conceptos.map((concepto, index) => {\r\n                                            \r\n                                                return(\r\n                                                <MenuItem key={index} value={concepto} >\r\n                                                    {concepto}\r\n                                                </MenuItem>\r\n                                                )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                    <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"origen-label\">Destino</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"origen-label\"\r\n                                            id=\"origen-name\"\r\n                                            value={(destino) ? destino : \"\"}\r\n                                            onChange={handleChangeDestino}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            <MenuItem key='cuentaEfectivoEmpresa' value=\"Cuenta efectivo empresa\">\r\n                                               Cuenta efectivo empresa\r\n                                            </MenuItem>\r\n                                            {\r\n                                                cajasArray.map((caja) => {\r\n                                                    \r\n                                                    return(\r\n                                                        <MenuItem key={caja._id} value={caja} >\r\n                                                        Caja {caja.numero_caja}\r\n                                                        </MenuItem>\r\n                                                    )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                </div>                    \r\n                        :\r\n                        <div/>\r\n                    }\r\n                    \r\n                    <div className={classes.formInputFlex}>\r\n\r\n                        \r\n                        <Box width=\"100%\">\r\n                            <Typography>Comentarios</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                multiline\r\n                                rows={2}\r\n                                name=\"monto_movimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant='outlined'\r\n                        onClick={enviarDatos}\r\n                        size=\"large\"\r\n                    >\r\n                        Realizar\r\n                    </Button>\r\n                   \r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_HISTORIAL_CUENTAS } from \"../../../../gql/Empresa/sucursales\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\n\r\nconst columns = [\r\n  { id: \"movimiento\", label: \"Origen Movimiento\", minWidth: 100 },\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 100 },\r\n  { id: \"name\", label: \"Usuario\", minWidth: 150 },\r\n  { id: \"cantidad\", label: \"Cantidad\", minWidth: 150 },\r\n  { id: \"concepto\", label: \"Concepto\", minWidth: 150 },\r\n  { id: \"tipo\", label: \"Tipo Movimiento\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"50vh\",\r\n  },\r\n  container: {\r\n    maxHeight: \"100%\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formComboBox: {\r\n    height: \"50%\",\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n  },\r\n}));\r\n\r\nexport default function HistorialCuentas({\r\n  cuenta,\r\n  tipo,\r\n  reload,\r\n  setSaldoCaja,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n  /* const [open, setOpen] = useState(false); */\r\n  const [datosFiltro, setDatosFiltro] = useState([]);\r\n  const [value] = useDebounce(datosFiltro, 500);\r\n\r\n  /* const handleClickOpen = () => {\r\n        setOpen(!open);\r\n        setDatosFiltro([]);\r\n        refetch();\r\n    }; */\r\n\r\n  const { data, loading, refetch } = useQuery(OBTENER_HISTORIAL_CUENTAS, {\r\n    variables: {\r\n      input: {\r\n        fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n        fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n        usuario: value.usuario ? value.usuario : \"\",\r\n        tipo_movimiento: datosFiltro.tipo_movimiento\r\n          ? datosFiltro.tipo_movimiento\r\n          : \"\",\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      tipo: tipo,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  let historialCuenta = [];\r\n  if (data) {\r\n    setSaldoCaja(data.obtenerHistorialCuenta.saldo_en_caja);\r\n    historialCuenta = data.obtenerHistorialCuenta;\r\n  }\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosFiltro({ ...datosFiltro, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    if (reload) {\r\n      refetch();\r\n    }\r\n  }, [reload]);\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <div className={classes.formInputFlex}>\r\n          <Box width=\"25%\">\r\n            <Typography>Fecha:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              type=\"date\"\r\n              name=\"fecha_inicio\"\r\n              onChange={obtenerDatos}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n          {/*    <Box width=\"100%\">\r\n                        <Typography>Fecha fin:</Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            type='date'\r\n                            onChange={obtenerDatos}\r\n                            name=\"fecha_fin\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Usuario:</Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            onChange={obtenerDatos}\r\n                            name=\"usuario\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </Box> */}\r\n          <Box width=\"25%\">\r\n            <Typography>Tipo Movimiento:</Typography>\r\n            <Select\r\n              className={classes.formComboBox}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              name=\"tipo_movimiento\"\r\n              onChange={obtenerDatos}\r\n              fullWidth\r\n            >\r\n              <MenuItem value=\"TODOS\">Ninguno</MenuItem>\r\n              <MenuItem value=\"CUENTA_DEPOSITO\">Deposito</MenuItem>\r\n              <MenuItem value=\"CUENTA_RETIRO\">Retiro</MenuItem>\r\n            </Select>\r\n          </Box>\r\n        </div>\r\n      </Box>\r\n      <Box p={2}>\r\n        <Paper className={classes.root}>\r\n          <TableContainer className={classes.container}>\r\n            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column) => (\r\n                    <TableCell\r\n                      key={column.id}\r\n                      align={column.align}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {historialCuenta?.movimientos?.map((row, index) => {\r\n                  return (\r\n                    <RowsHistorial key={index} row={row} loading={loading} />\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </Paper>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction RowsHistorial({ row, loading }) {\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <TableRow hover role=\"checkbox\" handleClickOpen tabIndex={-1}>\r\n      <TableCell>\r\n        Caja {row.numero_caja !== \"\" ? row.numero_caja : \"\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {moment(row?.fecha_movimiento.completa).format(\"D MMMM YYYY\")}\r\n      </TableCell>\r\n      <TableCell>{row?.nombre_usuario_creador}</TableCell>\r\n      <TableCell>\r\n        <b style={{ fontSize: 17 }}>\r\n          ${formatoMexico(row.montos_en_caja.monto_efectivo.monto)}\r\n        </b>\r\n      </TableCell>\r\n      <TableCell>{row?.concepto}</TableCell>\r\n      <TableCell>\r\n        {(row?.tipo_movimiento === \"CUENTA_DEPOSITO\" || row?.tipo_movimiento === \"ABONO_CLIENTE\"  || row?.tipo_movimiento === \"CANCELACION_ABONO_PROVEEDOR\"  ) ? \"DEPOSITO\" : \"RETIRO\"}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\n","import React, {useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogContent } from '@material-ui/core';\r\nimport RetiroDeposito from './RetiroDeposito';\r\nimport HistorialCuentas from './HistorialCuentas';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CajaPrincipal() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\t/* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\tconst [reload, setReload ] = useState(false);\r\n\tconst [saldoCaja, setSaldoCaja ] = useState(0);\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/retiro-de-dinero.svg' alt=\"icono retiro\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCaja principal\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\r\n\t\t\t{/* <RetiroDeposito cuenta={cuenta} tipo={false} open={open} setOpen={setOpen} /> */}\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<Box m={1} display=\"flex\" >\r\n\t\t\t\t\t<Box width='100%' >\r\n\t\t\t\t\t\t<Typography variant='h5'>\r\n\t\t\t\t\t\t\tCaja principal\r\n\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button variant=\"contained\" display=\"flex\" justifyContent=\"flex-end\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display='flex' mt={2}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<Box  display='flex' width='80%'  >\r\n\t\t\t\t\t\t\t<Typography variant='h5'>\r\n\t\t\t\t\t\t\t\tEfectivo actual\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box ml={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant='h5' >\r\n\t\t\t\t\t\t\t\t\t${saldoCaja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box >\r\n\t\t\t\t\t\t\t<RetiroDeposito tipo={false}  setReload={setReload} /> \r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<HistorialCuentas tipo={false} reload={reload} setSaldoCaja={setSaldoCaja} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 80},\r\n\t{ id: 'cantidadR', label: 'Cant. Regalo', minWidth: 80},\r\n\t{ id: 'nombre', label: 'Producto', minWidth: 80},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 80},\r\n\t{ id: 'total', label: 'Total', minWidth: 80},\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras({productos}) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos?.map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} hover role=\"checkbox\" tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad_regalo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.costo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.total}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import {gql} from \"@apollo/client\";\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS = gql `\r\n  query ObtenerHistorialAbonos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerHistorialAbonosInput\r\n  ) {\r\n    obtenerHistorialAbonos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      numero_caja\r\n      id_Caja\r\n      horario_turno\r\n      tipo_movimiento\r\n      rol_movimiento\r\n      fecha_movimiento {\r\n        completa\r\n      }\r\n      numero_usuario_creador\r\n      status\r\n      nombre_usuario_creador\r\n      monto_total_abonado\r\n      numero_cliente\r\n      nombre_cliente\r\n      telefono_cliente\r\n      email_cliente\r\n      montos_en_caja {\r\n        monto_efectivo {\r\n          monto\r\n        }\r\n        monto_tarjeta_credito {\r\n          monto\r\n        }\r\n        monto_tarjeta_debito {\r\n          monto\r\n        }\r\n        monto_creditos {\r\n          monto\r\n        }\r\n        monto_monedero {\r\n          monto\r\n        }\r\n        monto_transferencia {\r\n          monto\r\n        }\r\n        monto_cheques {\r\n          monto\r\n        }\r\n        monto_vales_despensa {\r\n          monto\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS_CLIENTE = gql `\r\n  query historialVentasACredito(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $idCliente: ID\r\n  ) {\r\n    historialVentasACredito(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      idCliente: $idCliente\r\n    ) {\r\n      _id\r\n      folio\r\n      facturacion\r\n      estatus_credito\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        eliminado\r\n        banco\r\n        numero_cuenta\r\n        monedero_electronico\r\n        credito_disponible\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general_activo\r\n      id_caja {\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      fecha_de_vencimiento_credito\r\n      dias_de_credito_venta\r\n      saldo_credito_pendiente\r\n      credito_pagado\r\n      empresa\r\n      sucursal\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      productos {\r\n        _id\r\n        producto {\r\n          _id\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n            granel\r\n            litros\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general {\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          medidas_producto {\r\n            _id\r\n            cantidad\r\n            cantidad_nueva\r\n            almacen\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n        }\r\n        concepto\r\n        cantidad\r\n        iva_total\r\n        ieps_total\r\n        subtotal\r\n        impuestos\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto {\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        id_unidad_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          codigo_unidad\r\n          unidad_principal\r\n          unidad_activa\r\n          codigo_barras\r\n          id_producto\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          codigo_unidad\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n          id_almacen_general\r\n          eliminado\r\n        }\r\n        year_registro\r\n        fecha_registro\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        precio_actual_object {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      }\r\n      fecha_registro\r\n      factura {\r\n        id_cfdi\r\n        serie\r\n        currency\r\n        expedition_place\r\n        folio\r\n        cfdi_type\r\n        payment_form\r\n        payment_method\r\n        logo_url\r\n        date\r\n        issuer {\r\n          FiscalRegime\r\n          Rfc\r\n          TaxName\r\n        }\r\n        receiver {\r\n          Rfc\r\n          Name\r\n          CfdiUse\r\n        }\r\n        items {\r\n          ProductCode\r\n          IdentificationNumber\r\n          Description\r\n          Unit\r\n          UnitCode\r\n          UnitPrice\r\n          Quantity\r\n          Subtotal\r\n          Discount\r\n          Taxes {\r\n            Total\r\n            Name\r\n            Base\r\n            Rate\r\n            IsRetention\r\n          }\r\n          Total\r\n        }\r\n        original_string\r\n        sub_total\r\n        total\r\n        discount\r\n        fecha_registro\r\n        empresa\r\n        sucursal\r\n      }\r\n      montos_en_caja {\r\n        monto_efectivo {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_tarjeta_debito {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_tarjeta_credito {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_creditos {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_monedero {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_transferencia {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_cheques {\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_vales_despensa {\r\n          monto\r\n          metodo_pago\r\n        }\r\n      }\r\n      status\r\n      abonos {\r\n        _id\r\n        numero_caja\r\n        status\r\n        id_Caja\r\n        horario_turno\r\n        tipo_movimiento\r\n        rol_movimiento\r\n        fecha_movimiento {\r\n          completa\r\n        }\r\n        numero_usuario_creador\r\n        nombre_usuario_creador\r\n        monto_total_abonado\r\n        numero_cliente\r\n        nombre_cliente\r\n        telefono_cliente\r\n        email_cliente\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n          }\r\n          monto_creditos {\r\n            monto\r\n          }\r\n          monto_monedero {\r\n            monto\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n          }\r\n          monto_cheques {\r\n            monto\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n          }\r\n        }\r\n        \r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_ABONO = gql `\r\n  mutation CrearAbono($empresa: ID!, $sucursal: ID!, $input: CrearAbonoInput) {\r\n    crearAbono(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_ABONO_CLIENTE = gql `\r\n  mutation crearAbonoVentaCredito($empresa: ID!, $sucursal: ID!, $input: AbonoVentasCreditoInput) {\r\n    crearAbonoVentaCredito(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n      pdf\r\n      xml\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_ABONO_CLIENTE = gql `\r\n  mutation cancelarAbonoCliente($empresa: ID!, $sucursal: ID!, $input: CancelarAbonoInput) {\r\n    cancelarAbonoCliente(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_ABONO_PROVEEDOR = gql `\r\n  mutation cancelarAbonoProveedor($empresa: ID!, $sucursal: ID!, $input: CancelarAbonoProveedorInput) {\r\n    cancelarAbonoProveedor(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\n","import React, { Fragment } from 'react';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\n\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Grid, Button } from '@material-ui/core';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\n\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\n//Este componente requiere el ArrayData, ArrayColumn, fileName\r\nfunction ExportarExcel(props) {\r\n\treturn (\r\n\t\t<Fragment>\r\n            <Grid>\r\n                <Grid item>\r\n                <ExcelFile\r\n\t\t\t\t\t\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\"startIcon={<DescriptionOutlinedIcon />}>\r\n\t\t\t\t\t\t\tExportar a Excel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilename={props.fileName}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ExcelSheet data={props.data} name={props.fileName}>\r\n                        {props.columnName.map((element) => {\r\n                            return(\r\n                                <ExcelColumn key={element.id} label={element.label} value={element.id} />\r\n                            )\r\n                        }\r\n                        )}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ExcelSheet>\r\n\t\t\t\t</ExcelFile>\r\n                </Grid>\r\n            </Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(ExportarExcel);","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport {\r\n\tDialog,\r\n\tBox,\r\n\tButton,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tSlide,\r\n  } from \"@material-ui/core\";\r\nimport { useMutation } from '@apollo/client';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {  CANCELAR_ABONO_PROVEEDOR } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_ABONOS } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from 'moment';\r\nimport { withRouter } from \"react-router\";\r\nimport { TesoreriaCtx } from '../../../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport ExportarExcel from '../../../../../../../components/ExportExcel';\r\nimport { formatoFecha } from \"../../../../../../../config/reuserFunctions\";\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha de abono', minWidth: 170, align: 'center' },\r\n\t{ id: 'cliente', label: 'Nombre', minWidth: 170, align: 'center' },\r\n\t{ id: 'abono', label: 'Monto', minWidth: 100, align: 'right' },\r\n\t{ id: 'cancelar', label: 'Cancelar', minWidth: 100, align: 'center' },\r\n];\r\n\r\n\r\n\r\n\r\nconst columnsEffect = [\r\n    { id: 'fecha_movimiento', label: 'Fecha', minWidth: 60 , widthPx: 160, },\r\n    { id: 'monto_total_abonado', label: 'Cantidad abono', minWidth: 170, widthPx: 160, },\r\n    \r\n];\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\nfunction TablaAbonos(props) {\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tconst { reload, setReload, setAlert } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [abonoSelected, setAbonoSelected] = useState({});\r\n\tconst [openCancelar, setOpenCancelar] = useState(false);\r\n\tconst [loadingCancelar, setLoadingCancelar] = useState(false);\r\n\r\n\tconst [ cancelarAbonoProveedor ] = useMutation(CANCELAR_ABONO_PROVEEDOR);\r\n\r\n\tlet dataExcel = [];\r\n    \r\n   \r\n\tconst { data, refetch } = useQuery(\r\n\t\tOBTENER_HISTORIAL_ABONOS, {\r\n\t\t\tvariables: {\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tfecha_inicio: \"\",\r\n\t\t\t\t\tfecha_fin: \"\",\r\n\t\t\t\t\tusuario: \"\",\r\n\t\t\t\t\tid_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n\t\t\t\t\tid_egreso: \"\",\r\n\t\t\t\t\trol_movimiento: \"ABONO_PROVEEDOR\",\r\n\t\t\t\t\tid_compra: props.cuenta._id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t  \tfetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\t\r\n\tlet abonos = []\r\n\tif(data){\r\n\t\tabonos = data.obtenerHistorialAbonos;\r\n\t\tabonos.forEach(element => {\r\n            dataExcel.push({\r\n                fecha_movimiento : formatoFecha(element.fecha_movimiento.completa),\r\n                monto_total_abonado :   element.monto_total_abonado\r\n                \r\n        \r\n            })\r\n        });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [reload])\r\n\r\n\tconst handleOpen = () =>{\r\n        setOpenCancelar(!setOpenCancelar)\r\n      \r\n    }\r\n\tconst affirmCancelar = (abono) =>{\r\n        try {\r\n             \r\n        if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n            setOpenCancelar(true);\r\n            setAbonoSelected(abono)\r\n        }else{\r\n            props.history.push('/ventas/venta-general');\r\n        }\r\n           \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n \r\n\r\n\tconst cancelAbono = async() =>{\r\n        try {\r\n         setLoadingCancelar(true);\r\n       \r\n         const input = {\r\n            tipo_movimiento: \"CANCELACION_ABONO_PROVEEDOR\",\r\n            rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n            numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n            id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n            fecha_movimiento: {\r\n                year: moment().locale(\"es-mx\").format('YYYY'),\r\n                mes: moment().locale(\"es-mx\").format('MM'),\r\n                dia: moment().locale(\"es-mx\").format('DD'),\r\n                no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                completa: moment().locale('es-mx').format()\r\n            },\r\n            monto_abono: abonoSelected.monto_total_abonado,\r\n           \r\n            horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n            hora_moviento: {\r\n                hora: moment().locale(\"es-mx\").format('hh'),\r\n                minutos: moment().locale(\"es-mx\").format('mm'),\r\n                segundos: moment().locale(\"es-mx\").format('ss'),\r\n                completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n            },\r\n           \r\n            concepto: 'CANCELACION_ABONO_PROVEEDOR',\r\n            id_usuario: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            id_proveedor: props.proveedor.id_proveedor._id,\r\n            \r\n            clave_proveedor: props.proveedor.id_proveedor.clave_cliente,\r\n            nombre_proveedor: props.proveedor.id_proveedor.nombre_cliente,\r\n            telefono_proveedor:  props.proveedor.id_proveedor.telefono_cliente,\r\n            email_proveedor: props.proveedor.id_proveedor.email_cliente,\r\n            id_abono: abonoSelected._id,\r\n            id_compra: props.cuenta._id,\r\n            metodo_de_pago: '01',\r\n            caja_principal: sesion.accesos.tesoreria.caja_principal.ver\r\n        }\r\n\r\n\r\n\r\n          await cancelarAbonoProveedor({\r\n            variables: {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                input:input\r\n            },\r\n        });\r\n        setReload(true);\r\n        setOpenCancelar(false);\r\n        setLoadingCancelar(false);\r\n        handleOpen();\r\n        setAlert({ \r\n            message: 'Venta cancelada con éxito.', \r\n            status: 'success', \r\n            open: true \r\n        });\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n            setLoadingCancelar(false);\r\n            handleOpen();\r\n            setAlert({ \r\n                message: 'La cancelación ha fallado.', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t<Paper className={classes.root}>\r\n\t\t<Dialog\r\n            open={openCancelar}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => handleOpen()}\r\n            aria-labelledby=\"alert-eliminar-abono\"\r\n        >\r\n            <DialogTitle id=\"alert-eliminar-abono\">\r\n            {\"¿Está seguro de eliminar este abono?\"}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n            <Button\r\n                onClick={() => handleOpen()}\r\n                color=\"inherit\"\r\n                disabled={loadingCancelar}\r\n            >\r\n                Cancelar\r\n            </Button>\r\n            <Button\r\n                onClick={() => cancelAbono()}\r\n                color=\"secondary\"\r\n                disabled={loadingCancelar}\r\n                startIcon={\r\n                    loadingCancelar ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n                }\r\n            >\r\n                Eliminar\r\n            </Button>\r\n            </DialogActions>\r\n      </Dialog> \r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{abonos?.map((row, index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>{moment(row.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>{row.nombre_cliente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='right'><b>${row.monto_total_abonado}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t(row.status === 'CANCELADO') ?\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.status}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => affirmCancelar(row)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: 22 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>    \r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\r\n\t\t\t\r\n             \r\n\t\t</Paper>\r\n\t\t{(abonos?.length > 0) ?\r\n\t\t\t\t<Box m={1} mb={1} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\"  >\r\n\t\t\t\t\t<Box  >\r\n\t\t\t\t\t\t<ExportarExcel fileName=\"Historial Abonos\" data={dataExcel} columnName={columnsEffect} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t:\r\n\t\t\t\t<div/>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default  withRouter(TablaAbonos);","import React, { useContext, useState, Fragment } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport { Box, Button, Dialog, \r\n        DialogContent,  DialogTitle, FormControl, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography \r\n} from '@material-ui/core';\r\nimport { withRouter } from \"react-router\";\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport moment from 'moment';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tinput: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n}));\r\n\r\nfunction AbonoaRecibir(props) {\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n    \r\n\tconst { setReload, setAlert } = useContext(TesoreriaCtx);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [abono, setAbono] = useState(''); \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n    \r\n    \r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            const input = {\r\n                tipo_movimiento: \"ABONO_PROVEEDOR\",\r\n                rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n                horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n                hora_moviento: {\r\n                    hora: moment().locale(\"es-mx\").format('hh'),\r\n                    minutos: moment().locale(\"es-mx\").format('mm'),\r\n                    segundos: moment().locale(\"es-mx\").format('ss'),\r\n                    completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n                },\r\n                fecha_movimiento: {\r\n                    year: moment().locale(\"es-mx\").format('YYYY'),\r\n                    mes: moment().locale(\"es-mx\").format('MM'),\r\n                    dia: moment().locale(\"es-mx\").format('DD'),\r\n                    no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                    no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                    completa: moment().locale('es-mx').format()\r\n                },\r\n                monto_total_abonado: parseFloat(abono),\r\n                montos_en_caja: {   \r\n                    monto_efectivo: {\r\n                        monto: metodoPago === '01' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"01\"\r\n                    },\r\n                    monto_tarjeta_debito: {\r\n                        monto: metodoPago === '28' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"28\"\r\n                    },\r\n                    monto_tarjeta_credito: {\r\n                        monto: metodoPago === '04' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"04\"\r\n                    },\r\n                    monto_creditos: {\r\n                        monto: metodoPago === '99' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"99\"\r\n                    },\r\n                    monto_monedero: {\r\n                        monto: metodoPago === '05' ? parseFloat(abono * -1 ) : 0,\r\n                        metodo_pago: \"05\"\r\n                    },\r\n                    monto_transferencia: {\r\n                        monto: metodoPago === '03' ? parseFloat(abono* -1) : 0,\r\n                        metodo_pago: \"03\"\r\n                    },\r\n                    monto_cheques: {\r\n                        monto: metodoPago === '02' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"02\"\r\n                    },\r\n                    monto_vales_despensa: {\r\n                        monto: metodoPago === '08' ? parseFloat(abono * -1) : 0,\r\n                        metodo_pago: \"08\"\r\n                    },\r\n                },\r\n                metodo_de_pago:{\r\n                    clave: metodoPago.Value,\r\n                    metodo:  metodoPago.Name,\r\n                },\r\n                numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n                id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n                id_usuario: sesion._id,\r\n                concepto: 'ABONO_PROVEEDOR',\r\n                numero_usuario_creador: sesion.numero_usuario,\r\n                nombre_usuario_creador: sesion.nombre,\r\n                id_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n                numero_cliente: props.cuenta.proveedor.numero_cliente,\r\n                nombre_cliente: props.cuenta.proveedor.nombre_cliente, \r\n                telefono_cliente: props.cuenta.proveedor.id_proveedor.telefono, \r\n                email_cliente: props.cuenta.proveedor.id_proveedor.email,\r\n                caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n                id_compra: props.cuenta._id\r\n            };\r\n            \r\n            if(abono === '' || metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete los datos', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({ \r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setAbono('');\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Abono registrado con éxito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false); \r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n              } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n              }\r\n              console.log(error)\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    \r\n       \r\n\r\n        const handleClick = () => { \r\n            if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n                setReload(true);\r\n                setOpen(!open);\r\n            }else{\r\n                props.history.push('/ventas/venta-general');\r\n            }\r\n        } \r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            {\r\n                (props.cuenta.credito_pagado ) ?\r\n                    <div/>\r\n                :\r\n                    <Button\r\n                    size=\"large\"\r\n                    variant=\"outlined\" \r\n                    fullWidth\r\n                    color=\"primary\"\r\n                    startIcon={<AddCircleOutlineIcon style={{fontSize: 35}} />}\r\n                    onClick={handleClick}\r\n                >\r\n                    <Typography variant=\"h6\">\r\n                        Abonar    \r\n                    </Typography>\r\n                </Button>\r\n            }\r\n          \r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                fullWidth\r\n                maxWidth='xs'\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box p={1} flexGrow={1}>\r\n                            Registrar nuevo abono\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\"  mt={2} >\r\n                        <Typography><b>Cantidad a abonar:</b></Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            className={classes.input}\r\n                            onChange={(e) => setAbono(e.target.value)}\r\n                            value={abono}\r\n                            size=\"small\"\r\n                            name=\"abono_recibir\"\r\n                            variant=\"outlined\"\r\n                            type='number'\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\" mt={2} >\r\n                            <Typography><b>Metodo de pago:</b></Typography>\r\n                            <FormControl \r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    width=\"100%\"\r\n                                    name=\"metodo_pago\"\r\n                                    variant='outlined'\r\n                                    value={metodoPago ? metodoPago : ''}\r\n                                    onChange={(e) => setMetodoPago(e.target.value)}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {formaPago.map((metodo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <Box width=\"100%\" mt={2} display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant='h6'>\r\n                                <b>Total cuenta</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: '#9B9B9B'}} variant='h6'>\r\n                            <b>${formatoMexico(props.cuenta.total)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography  variant='h6'>\r\n                                <b>Total abonado</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: 'green'}} variant='h6'>\r\n                            <b>${formatoMexico(props.cuenta.total - props.cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1} >\r\n                            <Typography  variant='h6'>\r\n                                <b>Total restante</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography  variant='h6'>\r\n                            <b>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 18}}\r\n                        onClick={enviarDatos}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default withRouter(AbonoaRecibir);","import React, { Fragment } from 'react'\r\nimport { Box, Grid, makeStyles, Typography, Button, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\nimport AbonoaRecibir from '../AbonoPercibir';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\n\r\nexport default function DetallesCuenta(props) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Detalles de cuenta\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={props.handleClick} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.proveedor.id_proveedor.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Clave proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.proveedor.id_proveedor.clave_cliente}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.usuario.nombre}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Numero usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.usuario.numero_usuario}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Fecha compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(props.cuenta.fecha_registro).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Fecha vencimiento: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(props.cuenta.fecha_vencimiento_credito).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                {permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (null) : (\r\n                    <Box width=\"60%\" p={1} display='flex' alignItems={'center'} >\r\n                        <AbonoaRecibir cuenta={props.cuenta} />\r\n                    </Box>\r\n                )}\r\n            </div>\r\n            <Grid container>\r\n                \r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2}>\r\n                        <Typography variant=\"h6\">\r\n                            Lista de abonos\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaAbonos cuenta={props.cuenta} proveedor={props.cuenta.proveedor} recargar={props.recargar} />\r\n                    </Box>\r\n                    <Box p={0} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total abonado: <b style={{color: \"#9B9B9B\"}}>${props.cuenta.total - props.cuenta.saldo_credito_pendiente}</b></Typography>\r\n                    </Box> \r\n                    <Box p={0} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Restante: <b  style={{color: \"green\"}}>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2} >\r\n                        <Typography variant=\"h6\">\r\n                            Lista de compra\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaCompras productos={props.cuenta.productos}/>\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total a liquidar: <b  style={{color: \"red\"}}>${formatoMexico(props.cuenta.total)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Slider,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { withRouter } from \"react-router\";\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport BackdropComponent from \"../../../../../../components/Layouts/BackDrop\";\r\nimport { formaPago } from \"../../../../Facturacion/catalogos\";\r\nimport moment from \"moment\";\r\nimport { CREAR_ABONO } from \"../../../../../../gql/Tesoreria/abonos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { TesoreriaCtx } from \"../../../../../../context/Tesoreria/tesoreriaCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n}));\r\n\r\n\r\n function LiquidarCuenta(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { setAlert, setReload } = useContext(TesoreriaCtx);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [CrearAbono] = useMutation(CREAR_ABONO);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n  const [dineroDescontado, setDineroDescontado] = useState(0);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [metodoPago, setMetodoPago] = useState(\"\");\r\n\r\n\r\n   \r\n\r\n\r\n    const handleClick = () => { \r\n      if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n        setOpen(!open);\r\n        setCuentaTotalDescuento(0);\r\n        setDineroDescontado(0);\r\n        setValue(0);\r\n      }else{\r\n      \r\n        props.history.push('/ventas/venta-general');\r\n      }\r\n  } \r\n\r\n\r\n  const classes = useStyles();\r\n\r\n  const obtenerPorcientoSlide = (event, newValue) => {\r\n    setValue(newValue);\r\n    let porcentaje = parseFloat((100 - newValue).toFixed(2)); //Porcentaje para calculos de descuento\r\n    let cuenta_con_descuento = parseFloat(\r\n      ((props.cuenta.saldo_credito_pendiente * porcentaje) / 100).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat(\r\n      (props.cuenta.saldo_credito_pendiente - cuenta_con_descuento).toFixed(2)\r\n    );\r\n    setCuentaTotalDescuento(cuenta_con_descuento);\r\n    setDineroDescontado(dineroDescontado);\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    let valorText = parseFloat(e.target.value);\r\n\r\n    let porcentaje = parseFloat(\r\n      ((valorText * 100) / props.cuenta.saldo_credito_pendiente).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat(\r\n      (props.cuenta.saldo_credito_pendiente - valorText).toFixed(2)\r\n    );\r\n\r\n    setCuentaTotalDescuento(valorText);\r\n    setDineroDescontado(dineroDescontado);\r\n    setValue(porcentaje);\r\n  };\r\n\r\n  function valuetext(e) {\r\n    return `${e}`;\r\n  }\r\n\r\n  \r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const input = {\r\n        tipo_movimiento: \"ABONO_PROVEEDOR\",\r\n        rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n        horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n        hora_moviento: {\r\n          hora: moment().locale(\"es-mx\").format('hh'),\r\n          minutos: moment().locale(\"es-mx\").format('mm'),\r\n          segundos: moment().locale(\"es-mx\").format('ss'),\r\n          completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n      },\r\n        fecha_movimiento: {\r\n          year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n          mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n          dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n          no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n          no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n          completa: moment().locale(\"es-mx\").format(),\r\n        },\r\n        concepto: 'ABONO_PROVEEDOR',\r\n        monto_total_abonado: parseFloat(props.cuenta.saldo_credito_pendiente),\r\n        descuento: {\r\n          porciento_descuento: value,\r\n          dinero_descontado: dineroDescontado,\r\n          total_con_descuento: cuentaTotalDescuento,\r\n        },\r\n        montos_en_caja: {\r\n          monto_efectivo: {\r\n            monto:\r\n              metodoPago === \"01\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"01\",\r\n          },\r\n          monto_tarjeta_debito: {\r\n            monto:\r\n              metodoPago === \"28\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"28\",\r\n          },\r\n          monto_tarjeta_credito: {\r\n            monto:\r\n              metodoPago === \"04\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"04\",\r\n          },\r\n          monto_creditos: {\r\n            monto:\r\n              metodoPago === \"99\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"99\",\r\n          },\r\n          monto_monedero: {\r\n            monto:\r\n              metodoPago === \"05\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"05\",\r\n          },\r\n          monto_transferencia: {\r\n            monto:\r\n              metodoPago === \"03\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : props.cuentaTotalDescuento *-14\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"03\",\r\n          },\r\n          monto_cheques: {\r\n            monto:\r\n              metodoPago === \"02\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"02\",\r\n          },\r\n          monto_vales_despensa: {\r\n            monto:\r\n              metodoPago === \"08\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"08\",\r\n          },\r\n        },\r\n        metodo_de_pago: {\r\n          clave: \"\",\r\n          metodo: \"\",\r\n        },\r\n        numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: props.cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: props.cuenta.proveedor.nombre_cliente,\r\n        telefono_cliente: props.cuenta.proveedor.id_proveedor.telefono,\r\n        email_cliente: props.cuenta.proveedor.id_proveedor.email,\r\n        id_compra: props.cuenta._id,\r\n        caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n      };\r\n      \r\n      if (metodoPago === \"\") {\r\n        setAlert({\r\n          message: \"Por favor complete el metodo de pago\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      await CrearAbono({\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          input,\r\n        },\r\n      });\r\n      setReload(true);\r\n      setMetodoPago(\"\");\r\n      setAlert({\r\n        message: \"Cuenta liquidada con exito\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      handleClick();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      handleClick();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: \"Ocurrio un problema en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        size=\"medium\"\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        startIcon={<DoneIcon />}\r\n        onClick={handleClick}\r\n      >\r\n        Liquidar\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n        onClose={handleClick}\r\n        aria-labelledby=\"draggable-dialog-title\"\r\n      >\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <Box display=\"flex\">\r\n          <Box flexGrow={1} p={2}>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Liquidar Cuenta\r\n            </Typography>\r\n          </Box>\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClick}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n        <DialogContent>\r\n          <Typography>\r\n            Aplica un descuento por pronto pago a tu cuenta\r\n          </Typography>\r\n          <Box mt={1} textAlign=\"center\">\r\n            <Typography id=\"discrete-slider-always\" gutterBottom>\r\n              <b>Porcentaje de descuento</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box ml={1} mr={1} mb={2}>\r\n            <Slider\r\n              getAriaValueText={valuetext}\r\n              valueLabelFormat={value.toFixed(2)}\r\n              aria-labelledby=\"discrete-slider-small-steps\"\r\n              valueLabelDisplay=\"auto\"\r\n              onChange={obtenerPorcientoSlide}\r\n            />\r\n          </Box>\r\n          <Box width=\"100%\" textAlign=\"center\">\r\n            <Typography id=\"discrete-slider-always\" gutterBottom>\r\n              <b>Cantidad a pagar con descuento</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descuento\"\r\n              variant=\"outlined\"\r\n              value={cuentaTotalDescuento ? cuentaTotalDescuento : 0}\r\n              onChange={obtenerPrecioText}\r\n            />\r\n          </Box>\r\n          <Box width=\"100%\" mt={2} textAlign={\"center\"}>\r\n            <Typography>\r\n              <b>Metodo de pago:</b>\r\n            </Typography>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <Select\r\n                width=\"100%\"\r\n                name=\"metodo_pago\"\r\n                variant=\"outlined\"\r\n                onChange={(e) => setMetodoPago(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {formaPago.map((metodo, index) => {\r\n                  return (\r\n                    <MenuItem key={index} value={metodo.Value}>\r\n                      {metodo.Name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n          <Box display=\"flex\" mt={2}>\r\n            <Box flexGrow={1}>\r\n              <Typography>Total cuenta: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(props.cuenta.total)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Saldo pendiente: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Dinero Descontado: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(dineroDescontado)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Porciento Descontado: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>{formatoMexico(value)}%</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography variant=\"h6\">Total a pagar:</Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"h6\">\r\n                <b style={{ color: \"green\" }}>\r\n                  $\r\n                  {formatoMexico(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente\r\n                      : props.cuentaTotalDescuento\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={enviarDatos}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n          >\r\n            Liquidar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(LiquidarCuenta);","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport {formatoMexico} from '../../../../../../config/reuserFunctions'\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\nimport moment from 'moment';\r\n\r\nimport { Box, CircularProgress, Dialog, Slide, TableHead, Typography } from '@material-ui/core';\r\nimport 'moment/locale/es';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha Compra', minWidth: 100, align: 'center' },\r\n\t{ id: 'provedor', label: 'Provedor', minWidth: 100, align: 'center' },\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center' },\r\n\t{ id: 'abonado', label: 'Abonado', minWidth: 100, align: 'center' },\r\n    { id: 'restante', label: 'Restante', minWidth: 100, align: 'center' },\r\n    \r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tpagada: {\r\n\t\tbackgroundColor: \"#EDFFF3\",\r\n\t\t\"&:hover\": {\r\n\t\t  backgroundColor: \"#D8FFE5\",\r\n\t\t},\r\n\t  },\r\n\tvencidas: {\r\n\t\tbackgroundColor: \"#FFF4F4\",\r\n\t\t\"&:hover\": {\r\n\t\t  backgroundColor: \"#F5F5F5\",\r\n\t\t},\r\n\t  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function TablaAbonos(props) {\r\n\r\n\tconst { cuentas} = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (props.loading) \r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"center\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\theight=\"50vh\"\r\n\t\t\t>\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t<div className={classes.root}>\r\n\t\t<Box my={1} m={2} display=\"flex\">\r\n      \r\n\t\t\t<Fragment>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tborder={1}\r\n\t\t\t\t\tborderColor=\"#58ff8f\"\r\n\t\t\t\t\tbgcolor=\"#EDFFF3\"\r\n\t\t\t\t\theight=\"24px\"\r\n\t\t\t\t\twidth=\"24px\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Box mx={1} />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>- Pagadas </b>\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Box mx={2} />\r\n\t\t\t</Fragment>\r\n\t\t\t\r\n\t\t\t\t<Box\r\n\t\t\t\t\tborder={1}\r\n\t\t\t\t\tborderColor=\"#FF8A8A\"\r\n\t\t\t\t\tbgcolor=\"#FFF4F4\"\r\n\t\t\t\t\theight=\"24px\"\r\n\t\t\t\t\twidth=\"24px\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Box mx={1} />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>- Ventas vencidas </b>\r\n\t\t\t\t</Typography>\r\n\t\t\t\r\n\t\t</Box>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\tLiquidar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cuentas?.map((row, index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(row.status === 'CANCELADO'){\r\n\t\t\t\t\t\t\t\t\treturn(<div/>)\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsCuentas \r\n\t\t\t\t\t\t\t\t\t\t\tloading={props.loading}\r\n\t\t\t\t\t\t\t\t\t\t\tcuentaSelect={row}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t})} \r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas (props){\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [open, setOpen] = useState(false);\r\n    const classes = useStyles();\r\n\tconst handleClick = () => {\r\n        setOpen(!open);\r\n    };\r\n\t\r\n\tconst TwoClickInRowTableBuy = (e) => {\r\n\t\ttry {\r\n\t\t\tlet timer;\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tif (e.detail === 2) {\r\n\t\t\t\thandleClick();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t};\r\n\t\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tonClick={(e) => TwoClickInRowTableBuy(e)}\r\n\t\t\t\tclassName={(props.cuentaSelect.estatus_credito === 'PAGADA'  ) ? classes.pagada : (props.cuentaSelect.estatus_credito === 'VENCIDA') ?  classes.vencidas : classes.vencer}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(props.cuentaSelect.fecha_registro).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{props.cuentaSelect.proveedor.id_proveedor.nombre_cliente}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(props.cuentaSelect.total)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(props.cuentaSelect.total - props.cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(props.cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t( props.cuentaSelect.credito_pagado) ?\r\n\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<LiquidarCuenta cuenta={props.cuentaSelect}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullScreen\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClick} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\t\t\t\t<DetallesCuenta\r\n\t\t\t\t\tcuenta={props.cuentaSelect}\r\n\t\t\t\t\tloading={props.loading}\r\n\t\t\t\t\thandleClick={handleClick}\r\n\t\t\t\t\trecargar={props.refetch}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { useContext, useEffect, useRef, useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../../gql/Compras/compras\";\r\n\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport SearchOutlined from '@material-ui/icons/SearchOutlined';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\trootSearch: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosProveedores(props) {\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\tconst { reload, setReload, setCuentas } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [filtro, setFiltro] = useState(\"\");\r\n\tconst searchfilter = useRef(null);\r\n\r\n\tconst { loading, data, refetch } = useQuery(\r\n\t\tOBTENER_COMPRAS_REALIZADAS,\r\n\t\t{\r\n\t\t  variables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfecha: \"\",\r\n\t\t\tfiltro: filtro\r\n\t\t  },\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tif(data){\r\n\t\tsetCuentas(data.obtenerComprasRealizadas)\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\trefetch();\r\n\t\t\r\n\t\tsetReload(false);\r\n\r\n\t}, [reload, refetch]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\trefetch({ filtro: filtro, fecha: '' });\t\r\n\t\t} catch (error) {\t\t\r\n\t\t}\r\n\t}, [filtro]);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\t\r\n\tconst obtenerBusqueda = (e, value) => {\r\n\t\te.preventDefault();\r\n\t\tsetFiltro(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de provedores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos a Provedores\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box display='flex' p={2}>\r\n\t\t\t\t\t<Box minWidth=\"40%\">\r\n\t\t\t\t\t\t<form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tinputRef={searchfilter}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Buscar una compra...\"\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\t\t\t\t\t<SearchOutlined />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos\r\n\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { createContext, useState, useEffect } from \"react\";\r\n\r\nexport const AbonosCtx = createContext();\r\n\r\nexport const AbonosProvider= ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ventas, setVentas] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    const [openAbonar, setOpenAbonar] = useState(false);\r\n    const [abonos, setAbonos] = useState([]);\r\n\r\n    return (\r\n        <AbonosCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                ventas, \r\n                setVentas,\r\n                reload, \r\n                setReload,\r\n                openAbonar, \r\n                setOpenAbonar,\r\n                abonos,\r\n                setAbonos,\r\n            \r\n            }}\r\n        >\r\n            {children}\r\n        </AbonosCtx.Provider>\r\n    );\r\n};\r\n","import React, { Fragment} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport { useTheme } from \"@material-ui/core\";\r\n\r\nimport {  Done } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles({\r\n    \r\n});\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n  \r\nexport default function DetalleVentaCredito(props){\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const handleOpen = () =>{\r\n        props.setOpenDetalle(!props.openDetalle)\r\n    }\r\n    return(\r\n       <Fragment>\r\n            <Dialog\r\n                open={props.openDetalle}\r\n                onClose={handleOpen}\r\n                fullWidth\r\n                maxWidth=\"lg\"\r\n                TransitionComponent={Transition}\r\n            >\r\n            <DialogTitle>\r\n                <Box display=\"flex\">\r\n                    <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n                    Datos de compra\r\n                    </Typography>\r\n                    <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    onClick={handleOpen}\r\n                    size=\"large\"\r\n                    >\r\n                    <CloseIcon style={{ fontSize: 30 }} />\r\n                    </Button>\r\n                </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Paper className={classes.root}>\r\n                            <TableContainer className={classes.container}>\r\n                            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Producto</TableCell>\r\n                                    <TableCell>Medida</TableCell>\r\n                                    <TableCell>Color</TableCell>\r\n                                    <TableCell>Unidad</TableCell>\r\n                                    <TableCell>Cantidad</TableCell>\r\n                                    <TableCell>C. regalo</TableCell>\r\n                                    <TableCell>C. total</TableCell>\r\n                                    {/* <TableCell>Descuento</TableCell> */}\r\n                                    <TableCell>Subtotal</TableCell>\r\n                                    <TableCell>Impuestos</TableCell>\r\n                                    <TableCell>Total</TableCell>\r\n                                </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                {props.datos?.productos?.map((producto, index) => {\r\n                                   \r\n                                    return (\r\n                                    <TableRow hover tabIndex={-1} key={index}>\r\n                                        <TableCell>\r\n                                        {producto.producto.datos_generales.nombre_comercial}\r\n                                        </TableCell>\r\n                                        <TableCell padding=\"checkbox\">\r\n                                        {producto.medida && producto.medida.medida ? producto.medida.medida : \"N/A\"}\r\n                                        </TableCell>\r\n                                        <TableCell padding=\"checkbox\">\r\n                                        {producto.color && producto.color.hex ? (\r\n                                            <Chip\r\n                                            label={producto.color.color}\r\n                                            size=\"small\"\r\n                                            style={{\r\n                                                backgroundColor: producto.color.hex,\r\n                                                color: theme.palette.getContrastText(\r\n                                                    producto.color.hex\r\n                                                ),\r\n                                            }}\r\n                                            />\r\n                                        ) : (\r\n                                            \"N/A\"\r\n                                        )}\r\n                                        </TableCell>\r\n                                        <TableCell>{producto.unidad}</TableCell>\r\n                                        <TableCell>{producto.cantidad}</TableCell>\r\n                                        <TableCell>{producto.cantidad_regalo}</TableCell>\r\n                                        <TableCell>{producto.cantidad_total}</TableCell>\r\n                                        {/* <TableCell>{`$${producto.descuento_precio} - %${producto.descuento_porcentaje}`}</TableCell> */}\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.subtotal)}</b>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.impuestos)}</b>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.total)}</b>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                    );\r\n                                })}\r\n                                </TableBody>\r\n                            </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    startIcon={<Done />}\r\n                    onClick={() => handleOpen()}\r\n                >\r\n                    Aceptar\r\n                </Button>\r\n                </DialogActions>\r\n            </Dialog>   \r\n       </Fragment>\r\n    )\r\n};\r\n","import React, { Fragment, useState} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { useMutation } from '@apollo/client';\r\nimport moment from 'moment';\r\nimport { withRouter } from \"react-router\";\r\nimport {  Done } from \"@material-ui/icons\";\r\nimport {  CANCELAR_ABONO_CLIENTE } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport { formatoMexico,formatoFecha } from \"../../../../../../../config/reuserFunctions\";\r\n\r\nimport ExportarExcel from '../../../../../../../components/ExportExcel'\r\nconst useStyles = makeStyles({\r\n    \r\n});\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nconst columnsEffect = [\r\n    { id: 'fecha_movimiento_credito', label: 'Fecha', minWidth: 60 , widthPx: 160, },\r\n    { id: 'monto_total_abonado', label: 'Cantidad abono', minWidth: 170, widthPx: 160, },\r\n    { id: 'cancelar', label: 'Cancelar abono', minWidth: 170, widthPx: 160, },\r\n];\r\nfunction HistorialAbonos(props){\r\n    const classes = useStyles();\r\n    const [openCancelar, setOpenCancelar] = useState(false);\r\n    const [loadingCancelar, setLoadingCancelar] = useState(false);\r\n    const [abonoSelected, setAbonoSelected] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n    const [ cancelarAbonoCliente ] = useMutation(CANCELAR_ABONO_CLIENTE);\r\n \r\n    const handleOpen = () =>{\r\n        props.setOpenHistorial(!props.openHistorial)\r\n      \r\n    }\r\n\r\n    let dataExcel = [];\r\n    if(props.rowSelected.abonos){\r\n        props.rowSelected.abonos.forEach(element => {\r\n            dataExcel.push({\r\n                fecha_movimiento_credito : formatoFecha(element.fecha_movimiento.completa),\r\n                monto_total_abonado :   formatoMexico(element.monto_total_abonado)\r\n                \r\n        \r\n            })\r\n        });\r\n    }\r\n    const affirmCancelar = (abono) =>{\r\n        try {\r\n            if(props.rowSelected.facturacion){\r\n                props.setAlert({ \r\n                    message: 'No se puede cancelar un abono facturado.', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n            }else{\r\n                if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n                    setOpenCancelar(true);\r\n                    setAbonoSelected(abono)\r\n                }else{\r\n                    props.history.push('/ventas/venta-general');\r\n                }\r\n            }\r\n           \r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const cancelAbono = async() =>{\r\n        try {\r\n         setLoadingCancelar(true);\r\n       \r\n         const input = {\r\n            tipo_movimiento: \"CANCELACION_ABONO_CLIENTE\",\r\n            rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n            numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n            id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n            fecha_movimiento: {\r\n                year: moment().locale(\"es-mx\").format('YYYY'),\r\n                mes: moment().locale(\"es-mx\").format('MM'),\r\n                dia: moment().locale(\"es-mx\").format('DD'),\r\n                no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                completa: moment().locale('es-mx').format()\r\n            },\r\n            monto_abono: abonoSelected.monto_total_abonado,\r\n           \r\n            horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n            hora_moviento: {\r\n                hora: moment().locale(\"es-mx\").format('hh'),\r\n                minutos: moment().locale(\"es-mx\").format('mm'),\r\n                segundos: moment().locale(\"es-mx\").format('ss'),\r\n                completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n            },\r\n            concepto: 'CANCELACION_ABONO_CLIENTE',\r\n            \r\n            id_usuario: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            id_cliente: props.rowSelected.cliente._id,\r\n            credito_disponible: props.rowSelected.cliente.credito_disponible,\r\n            numero_cliente: props.rowSelected.cliente.numero_cliente,\r\n            nombre_cliente: props.rowSelected.cliente.nombre_cliente ,\r\n            telefono_cliente: props.rowSelected.cliente.telefono,\r\n            email_cliente: props.rowSelected.cliente.email,\r\n            id_abono: abonoSelected._id,\r\n            id_venta: props.rowSelected._id,\r\n            metodo_de_pago: '01',\r\n            caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n        }\r\n\r\n\r\n\r\n          await cancelarAbonoCliente({\r\n            variables: {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                input:input\r\n            },\r\n        });\r\n        props.recargar();\r\n        setOpenCancelar(false);\r\n        setLoadingCancelar(false);\r\n        handleOpen();\r\n        props.setAlert({ \r\n            message: 'Venta cancelada con éxito.', \r\n            status: 'success', \r\n            open: true \r\n        });\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n            setOpenCancelar(false);\r\n            setLoadingCancelar(false);\r\n            handleOpen();\r\n            props.setAlert({ \r\n                message: 'La cancelación ha fallado.', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n    \r\n        }\r\n    }\r\n\r\n    return(\r\n      <Fragment>\r\n           \r\n      <Dialog\r\n          open={props.openHistorial}\r\n          onClose={handleOpen}\r\n          fullWidth\r\n          maxWidth=\"sm\"\r\n          TransitionComponent={Transition}\r\n      >\r\n        <Dialog\r\n            open={openCancelar}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => setOpenCancelar(false)}\r\n            aria-labelledby=\"alert-eliminar-abono\"\r\n        >\r\n            <DialogTitle id=\"alert-eliminar-abono\">\r\n            {\"¿Está seguro de eliminar este abono?\"}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n            <Button\r\n                onClick={() => setOpenCancelar(false)}\r\n                color=\"inherit\"\r\n                disabled={loadingCancelar}\r\n            >\r\n                Cancelar\r\n            </Button>\r\n            <Button\r\n                onClick={() => cancelAbono()}\r\n                color=\"secondary\"\r\n                disabled={loadingCancelar}\r\n                startIcon={\r\n                    loadingCancelar ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n                }\r\n            >\r\n                Eliminar\r\n            </Button>\r\n            </DialogActions>\r\n      </Dialog> \r\n      <DialogTitle>\r\n          <Box display=\"flex\">\r\n              <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Historial de abonos\r\n              </Typography>\r\n              <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n              >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n          </Box>\r\n          {(props.rowSelected.abonos?.length > 0) ?\r\n                <Box mr={4} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\"  >\r\n                    <Box  >\r\n                        <ExportarExcel fileName=\"Historial Abonos\" data={dataExcel} columnName={columnsEffect} />\r\n                    </Box>\r\n                </Box>\r\n                :\r\n                <div/>\r\n            }\r\n          </DialogTitle>\r\n          <DialogContent>\r\n              <Paper className={classes.root}>\r\n                      <TableContainer className={classes.container}>\r\n                      <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                          <TableHead>\r\n                          <TableRow>\r\n                              <TableCell>Fecha</TableCell>\r\n                              <TableCell>Cantidad abono</TableCell>\r\n                              <TableCell>Cancelar abono</TableCell>\r\n                          </TableRow>\r\n                          </TableHead>\r\n                          <TableBody>\r\n                          {props.rowSelected.abonos?.map((abono, index) => {\r\n                             \r\n                              return (\r\n                              <TableRow hover tabIndex={-1} key={index}>\r\n                                <TableCell>\r\n                                    {formatoFecha(abono.fecha_movimiento.completa)}\r\n                                </TableCell>\r\n                                <TableCell padding=\"checkbox\">\r\n                                    <b>${formatoMexico(abono.monto_total_abonado)}</b>\r\n                                </TableCell>\r\n                                {\r\n                                    (abono.status === 'CANCELADO') ?\r\n                                    <TableCell>\r\n                                        {abono.status}\r\n                                    </TableCell>\r\n                                    :\r\n                                    <TableCell padding=\"checkbox\">\r\n                                    <Button\r\n                                        variant=\"text\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => affirmCancelar(abono)}\r\n                                        size=\"large\"\r\n                                    >\r\n                                        <CloseIcon style={{ fontSize: 22 }} />\r\n                                    </Button>\r\n                                </TableCell>    \r\n                                }\r\n                               \r\n                              </TableRow>\r\n                              );\r\n                          })}\r\n                          </TableBody>\r\n                      </Table>\r\n                      </TableContainer>\r\n                  </Paper>\r\n          </DialogContent>\r\n          <DialogActions>\r\n          <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              startIcon={<Done />}\r\n              onClick={() => handleOpen()}\r\n          >\r\n              Aceptar\r\n          </Button>\r\n          </DialogActions>\r\n      </Dialog>\r\n      \r\n </Fragment>\r\n    )\r\n};\r\n\r\nexport default withRouter(HistorialAbonos);","import React, { useState, useContext } from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport DoneAll from '@material-ui/icons/DoneAll';\r\nimport { Box, Button, Dialog,  DialogContent,  InputAdornment, Grid,\r\n    DialogTitle, Slide, TextField, Typography,MenuItem,\r\n     makeStyles, IconButton, Select, FormControl} from '@material-ui/core'\r\nimport { useMutation } from '@apollo/client';\r\nimport { withRouter } from \"react-router\";\r\nimport {  CREAR_ABONO_CLIENTE } from \"../../../../../../gql/Tesoreria/abonos\";\r\nimport {AbonosCtx} from \"../../../../../../context/Tesoreria/abonosCtx\";\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';   \r\nimport RemoveCircleTwoToneIcon from \"@material-ui/icons/RemoveCircleTwoTone\";\r\nimport moment from 'moment';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nconst useStyles = makeStyles({\r\n\r\ntitle: {\r\n    fontSize: 16,\r\n},\r\n\r\n});\r\nfunction Liquidar(props) {\r\n    //listo\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const {abonos} = useContext(AbonosCtx);\r\n  \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n    const [value, setValue] = useState(0);\r\n    const [total, setTotal] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n    const [dineroDescontado, setDineroDescontado] = useState(0);\r\n    const [ crearAbonoVentaCredito ] = useMutation(CREAR_ABONO_CLIENTE);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n    const handleClick = () => { \r\n        if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n            setOpen(!open);\r\n        }else{\r\n            props.history.push('/ventas/venta-general');\r\n        }\r\n    } \r\n   \r\n    const obtenerPrecioText = (e) => {\r\n        \r\n        let valorText = parseFloat(e.target.value);\r\n        if(valorText >= 0 && valorText <= props.total_ventas){\r\n            let porcentaje  = parseFloat((((valorText * 100) / props.total_ventas ).toFixed(2)));\r\n            let dineroDescontado = parseFloat((props.total_ventas - valorText).toFixed(2));\r\n                setCuentaTotalDescuento(valorText);\r\n                setDineroDescontado(dineroDescontado);\r\n                setValue(porcentaje);\r\n                setTotal(dineroDescontado);\r\n        }\r\n    };\r\n    \r\n    const obtenerPorcientoSlide = (e) => {\r\n       \r\n        let porcentaje = parseFloat(e.target.value);\r\n        if(porcentaje >= 0 && porcentaje <= 100 ){\r\n            setValue(porcentaje);\r\n            //let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n           \r\n            let cuenta_con_descuento = parseFloat((props.total_ventas * porcentaje / 100).toFixed(2));\r\n            let dineroDescontado = parseFloat((props.total_ventas - cuenta_con_descuento).toFixed(2));\r\n            setCuentaTotalDescuento(cuenta_con_descuento);\r\n            setDineroDescontado(dineroDescontado);\r\n            setTotal(dineroDescontado);\r\n        }\r\n      \r\n    };\r\n    const quitarDescuento = () =>{\r\n        setValue('');\r\n        setCuentaTotalDescuento('');\r\n        setDineroDescontado('');\r\n        setTotal(props.total_ventas);\r\n    }\r\n    const liquidarVentas = async() =>{\r\n        try {\r\n         setLoading(true);\r\n            let ObjectMetodoPago = {};\r\n            formaPago.forEach((val) => {\r\n                if (metodoPago === val.Value) { \r\n                    ObjectMetodoPago = val;\r\n                }\r\n            });\r\n\r\n            const input = {\r\n                tipo_movimiento: \"ABONO_CLIENTE\",\r\n                rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n                numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n                id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n                fecha_movimiento: {\r\n                    year: moment().locale(\"es-mx\").format('YYYY'),\r\n                    mes: moment().locale(\"es-mx\").format('MM'),\r\n                    dia: moment().locale(\"es-mx\").format('DD'),\r\n                    no_semana_year: moment().week().toString(),\r\n                    no_dia_year: moment().dayOfYear().toString(),\r\n                    completa: moment().locale('es-mx').format()\r\n                },\r\n                concepto: 'ABONO_CLIENTE',\r\n                monto_total: props.total_ventas,\r\n                descuento: {\r\n                    porciento_descuento: value,\r\n                    dinero_descontado: dineroDescontado,\r\n                    total_con_descuento: cuentaTotalDescuento\r\n                },\r\n                horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n                hora_moviento: {\r\n                    hora: moment().locale(\"es-mx\").format('hh'),\r\n                    minutos: moment().locale(\"es-mx\").format('mm'),\r\n                    segundos: moment().locale(\"es-mx\").format('ss'),\r\n                    completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n                },\r\n                metodo_de_pago:{\r\n                    clave: ObjectMetodoPago.Value,\r\n                    metodo:  ObjectMetodoPago.Name,\r\n                },\r\n                \r\n                id_usuario: sesion._id,\r\n                numero_usuario_creador: sesion.numero_usuario,\r\n                nombre_usuario_creador: sesion.nombre,\r\n                id_cliente: props.cliente._id,\r\n                credito_disponible: props.cliente.credito_disponible,\r\n                numero_cliente: props.cliente.numero_cliente,\r\n                nombre_cliente: props.cliente.nombre_cliente ,\r\n                telefono_cliente: props.cliente.telefono_cliente  ,\r\n                email_cliente: props.cliente.email_cliente,\r\n                ventas: (props.isIcon) ? \r\n                    [\r\n                        { monto_total_abonado: 0, \r\n                            id_venta:abonos[props.index].id_venta,\r\n                            saldo_credito_pendiente:abonos[props.index].saldo_credito_pendiente\r\n                        }\r\n                    ]\r\n                    :\r\n                    abonos, \r\n                liquidar: true,\r\n                caja_principal: sesion.accesos.tesoreria.caja_principal.ver\r\n                \r\n            }\r\n            if(metodoPago){\r\n                await crearAbonoVentaCredito({\r\n                    variables: {\r\n                        empresa: sesion.empresa._id,\r\n                        sucursal: sesion.sucursal._id,\r\n                        input\r\n                    },\r\n                });\r\n                props.recargar();\r\n                setOpen(false);\r\n                setLoading(false);\r\n                props.setAlert({ \r\n                    message: 'Venta liquidada con éxito.', \r\n                    status: 'success', \r\n                    open: true \r\n                });\r\n            }\r\n            \r\n        } catch (error) {\r\n          \r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n        }\r\n    }\r\n  \r\n    return (\r\n        <Box m={1}>\r\n            {\r\n                (props.isIcon) ? \r\n                <IconButton aria-label=\"liquidar\" onClick={handleClick} disabled={props.estatus_credito === \"PAGADA\"}  >\r\n                    <DoneAll />\r\n                   \r\n                </IconButton>\r\n                :\r\n                <Button\r\n                size=\"large\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n                >\r\n                     Liquidar TODAS\r\n                </Button>\r\n            }\r\n           \r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box width='100%' display=\"flex\" justifyContent=\"flex-start\">\r\n                                {(props.isIcon) ? 'Liquidar cuenta':'Liquidar todas las cuentas'}   \r\n                        </Box>\r\n                        <Box width='42%' display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </DialogTitle>\r\n                <DialogContent>\r\n                   \r\n                  \r\n                <Box mt={4}>\r\n                    \r\n                        <Box textAlign={\"center\"}>\r\n                        <Typography style={{ fontSize: 17 }}>\r\n                            <b>Agregar descuento</b>\r\n                        </Typography>\r\n                        <Alert severity=\"info\">\r\n                            Aplica un descuento por pronto pago a tu cuenta\r\n                        </Alert>\r\n                        </Box>\r\n                        <Box p={2}>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item md={6}>\r\n                            <Typography>\r\n                                <b>Porcentaje:</b>\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"descuento\"\r\n                                id=\"form-venta-porsentaje-descuento\"\r\n                                variant=\"outlined\"\r\n                                value={value}\r\n                                onChange={obtenerPorcientoSlide}\r\n                                type=\"number\"\r\n                                disabled={false}\r\n                                InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">%</InputAdornment>\r\n                                ),\r\n                                }}\r\n                            />\r\n                            </Grid>\r\n                            <Grid item md={6}>\r\n                            <Typography>\r\n                                <b>Dinero a descontar</b>\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                type=\"number\"\r\n                                name=\"precioConDescuento\"\r\n                                onChange={obtenerPrecioText}\r\n                                value={cuentaTotalDescuento ? cuentaTotalDescuento : 0 }\r\n                                className={classes.input}\r\n                                variant=\"outlined\"\r\n                            />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box mt={2} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button\r\n                            variant=\"text\"\r\n                            color=\"secondary\"\r\n                            size=\"medium\"\r\n                            onClick={quitarDescuento}\r\n                            startIcon={<RemoveCircleTwoToneIcon />}\r\n                            >\r\n                            Quitar descuento\r\n                            </Button>\r\n                        </Box>\r\n                        </Box>\r\n                    \r\n                </Box>\r\n  \r\n                <Box width=\"65%\"  >\r\n                        <Typography><b>Método de pago:</b></Typography>\r\n                        <FormControl \r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                width=\"100%\"\r\n                                name=\"metodo_pago\"\r\n                                variant='outlined'\r\n                                value={metodoPago ? metodoPago : ''}\r\n                                onChange={(e) => setMetodoPago(e.target.value)}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {formaPago.map((metodo, index) => {\r\n                                    return(\r\n                                        <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                    )\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1} mt={1}>\r\n                        <Typography><b>Nombre de Cliente:</b> {props.cliente.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1}>\r\n                        <Typography><b>Total:</b>  {(total > 0) ? total : props.total_ventas}</Typography>\r\n                    </Box>\r\n                    {/* <Box p={1}>\r\n                        <Alert severity=\"info\">Si desea editar el abono del cliente, <br/>\r\n                        procure este sea mayor al establecido</Alert>\r\n                    </Box> */}\r\n                    \r\n                \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 16}}\r\n                        onClick={liquidarVentas}\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </Box>\r\n    )\r\n}\r\nexport default withRouter(Liquidar);\r\n/* \r\n<Box width=\"100%\">\r\n<Typography>Cuenta No. 2501265</Typography>\r\n<TextField\r\n    fullWidth\r\n    size=\"small\"\r\n    /* error \r\n    name=\"nombre_comercial\"\r\n    id=\"form-producto-nombre-comercial\"\r\n    variant=\"outlined\"\r\n    value=\"$150,000.00 Mx\" \r\n    /* helperText=\"Incorrect entry.\" \r\n    /* onChange={obtenerCampos} \r\n/>\r\n</Box>\r\n<Box width=\"100%\">\r\n<Typography>Cuenta No. 2501265</Typography>\r\n<TextField\r\n    fullWidth\r\n    size=\"small\"\r\n    /* error \r\n    name=\"nombre_comercial\"\r\n    id=\"form-producto-nombre-comercial\"\r\n    variant=\"outlined\"\r\n    value=\"$150,000.00 Mx\" \r\n    /* helperText=\"Incorrect entry.\" \r\n    /* onChange={obtenerCampos} \r\n/>\r\n</Box> */","import React, { Fragment,useState, useContext, useEffect} from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Box, Button, Dialog, DialogContent, makeStyles,  \r\n    DialogTitle, Slide, TextField, FormControl, MenuItem, \r\n    Select,Typography, IconButton } from '@material-ui/core';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';    \r\nimport {AbonosCtx} from \"../../../../../../context/Tesoreria/abonosCtx\";\r\nimport {  CREAR_ABONO_CLIENTE } from \"../../../../../../gql/Tesoreria/abonos\";\r\n\r\n\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport { withRouter } from \"react-router\";\r\nimport { useMutation } from '@apollo/client';\r\nimport moment from 'moment';\r\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(6)}px ${theme.spacing(4)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\n  function Abonar(props) {\r\n    //listo\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [abono, setAbono] = useState(''); \r\n    const {abonos} = useContext(AbonosCtx);\r\n    const [metodoPago, setMetodoPago] = useState({});\r\n    const [nameMetodo, setNameMetodo] = useState('');\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n    const [ crearAbonoVentaCredito ] = useMutation(CREAR_ABONO_CLIENTE);\r\n    \r\n    const handleClick = () =>{\r\n        setOpen(false);\r\n    }\r\n    const hacerAbono = async() => { \r\n        try {\r\n            setLoading(true);\r\n         \r\n            let ObjectMetodoPago = {};\r\n            formaPago.forEach((val) => {\r\n                if (metodoPago === val.Value) { \r\n                    ObjectMetodoPago = val;\r\n                }\r\n            });\r\n\r\n           \r\n            const input = {\r\n                tipo_movimiento: \"ABONO_CLIENTE\",\r\n                rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n                numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n                id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n                fecha_movimiento: {\r\n                    year: moment().locale(\"es-mx\").format('YYYY'),\r\n                    mes: moment().locale(\"es-mx\").format('MM'),\r\n                    dia: moment().locale(\"es-mx\").format('DD'),\r\n                    no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                    no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                    completa: moment().locale('es-mx').format()\r\n                },\r\n                monto_total: props.total_ventas,\r\n                concepto: 'ABONO_CLIENTE',\r\n                horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n                hora_moviento: {\r\n                    hora: moment().locale(\"es-mx\").format('hh'),\r\n                    minutos: moment().locale(\"es-mx\").format('mm'),\r\n                    segundos: moment().locale(\"es-mx\").format('ss'),\r\n                    completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n                },\r\n                metodo_de_pago:{\r\n                    clave: ObjectMetodoPago.Value,\r\n                    metodo:  ObjectMetodoPago.Name,\r\n                },\r\n            \r\n                id_usuario: sesion._id,\r\n                numero_usuario_creador: sesion.numero_usuario,\r\n                nombre_usuario_creador: sesion.nombre,\r\n                id_cliente: props.cliente._id,\r\n                credito_disponible: props.cliente.credito_disponible,\r\n                numero_cliente: props.cliente.numero_cliente,\r\n                nombre_cliente: props.cliente.nombre_cliente ,\r\n                telefono_cliente: props.cliente.telefono_cliente  ,\r\n                email_cliente: props.cliente.email_cliente,\r\n            \r\n\r\n                ventas: [{ monto_total_abonado: parseFloat(abono), \r\n                    id_venta:abonos[props.index].id_venta,\r\n                    saldo_credito_pendiente:abonos[props.index].saldo_credito_pendiente}],\r\n                liquidar: false,\r\n                facturacion: props.venta.facturacion,\r\n                caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n            }\r\n            if(metodoPago && abono !== '' && abono > 0){\r\n                const doAbono = await crearAbonoVentaCredito({\r\n                    variables: {\r\n                        empresa: sesion.empresa._id,\r\n                        sucursal: sesion.sucursal._id,\r\n                        input\r\n                    },\r\n                }); \r\n               \r\n                props.recargar();\r\n                setOpen(false);\r\n                setLoading(false);\r\n                props.setAlert({ \r\n                    message: 'Abono registrado con éxito.', \r\n                    status: 'success', \r\n                    open: true \r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            let message = error;\r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n                message = error.networkError.result;\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors[0].message);\r\n                message = error.graphQLErrors[0].message;\r\n            }\r\n            props.setAlert({ \r\n                message: message, \r\n                status: 'error', \r\n                open: true \r\n            });\r\n        }\r\n    }\r\n\r\n    const enviarCantidad = (e) =>{\r\n        try {\r\n            let cantidad = e.target.value;\r\n            if(cantidad >= 0 && cantidad <= props.venta.saldo_credito_pendiente){\r\n                setAbono(cantidad);\r\n            }\r\n           \r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    const openDialog = () =>{\r\n     \r\n        try {\r\n            if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n                setOpen(true);\r\n            }else{\r\n                props.history.push('/ventas/venta-general');\r\n               \r\n               \r\n            }\r\n           \r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n    useEffect(() => {\r\n    \r\n        if(metodoPago){\r\n          \r\n            setNameMetodo(metodoPago.name)\r\n          \r\n        }\r\n    }, [metodoPago])\r\n \r\n    return (\r\n        <Box m={1}>\r\n            <Box display=\"flex\">\r\n                <IconButton aria-label=\"detalle\" onClick={() =>{ openDialog();}} disabled={props.estatus_credito === \"PAGADA\"} >\r\n                    <ControlPointIcon />\r\n                </IconButton>\r\n                </Box>\r\n            <Fragment>\r\n       \r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                fullWidth\r\n                maxWidth='sm'\r\n            >\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                <Box display=\"flex\">\r\n                 \r\n                    <Box width='100%' display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={() => setOpen(false)} size=\"large\">\r\n                            <CloseIcon />\r\n                        </Button>\r\n                    </Box>\r\n                </Box>\r\n                \r\n            </DialogTitle>\r\n                \r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n            \r\n                <DialogContent>\r\n                    <Box  display=\"flex\"sx={{ justifyContent: 'space-between' }}>\r\n                        <Box width=\"40%\" >\r\n                            <Typography><b>Cantidad a abonar:</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                className={classes.input}\r\n                                onChange={(e) => enviarCantidad(e)}\r\n                                value={abono}\r\n                                size=\"small\"\r\n                                name=\"abono_recibir\"\r\n                                variant=\"outlined\"\r\n                                type='number'\r\n                            />\r\n                        </Box >\r\n                   \r\n                        <Box width=\"58%\"  >\r\n                            <Typography><b>Método de pago:</b></Typography>\r\n                            <FormControl \r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    width=\"100%\"\r\n                                    name=\"metodo_pago\"\r\n                                    variant='outlined'\r\n                                    value={metodoPago ? metodoPago : ''}\r\n                                    onChange={(e) => setMetodoPago(e.target.value)}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {formaPago.map((metodo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={ metodo.Value}>{metodo.Name}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box mt={5} width= \"100%\" display='flex' alignItems=\"flex-end\" flexDirection='column'>\r\n                        <Box width=\"55%\" display='flex'  >\r\n                            <Box flexGrow={1}>\r\n                                <Typography variant='h6'>\r\n                                    <b>Total cuenta</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Typography style={{color: '#9B9B9B'}} variant='h6'>\r\n                                <b>${formatoMexico(props.venta.total)}</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box width=\"55%\" display='flex'>\r\n                            <Box flexGrow={1}>\r\n                                <Typography  variant='h6'>\r\n                                    <b>Total abonado</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Typography style={{color: 'green'}} variant='h6'>\r\n                                <b>${formatoMexico(props.venta.total - props.venta.saldo_credito_pendiente)}</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box width=\"55%\" display='flex'>\r\n                            <Box flexGrow={1} >\r\n                                <Typography  variant='h6'>\r\n                                    <b>Total restante</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Typography  variant='h6'>\r\n                                <b>${formatoMexico(props.venta.saldo_credito_pendiente)}</b>\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" alignContent=\"center\" p={2} mt={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 15}}\r\n                        onClick={() => hacerAbono()}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n            </Fragment> \r\n        </Box> \r\n    )\r\n}\r\n\r\nexport default withRouter(Abonar);\r\n","import React, { useState, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport Ballot from '@material-ui/icons/Ballot';\r\nimport Table from '@material-ui/core/Table';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {Box, Typography} from '@material-ui/core';\r\n\r\n\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport DetalleVentaCredito from './AbonarSeleccion/DetalleVentaCredito';\r\nimport HistorialAbonos from './AbonarSeleccion/HistorialAbonos';\r\nimport IconLiquidar from './Liquidar';\r\nimport Abonar from './Abonar';\r\nimport {\r\n\tformatoFechaCorta\r\n  } from \"../../../../../../config/reuserFunctions\";\r\n//import DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\n\r\n\r\nconst rows = [];\r\n\r\nconst headCells = [\r\n\t{ id: 'folio', numeric: false, disablePadding: true, label: 'Folio' },\r\n\t{ id: 'fecha', numeric: false, disablePadding: true, label: 'Fecha' },\r\n\t{ id: 'fechaVencimiento', numeric: false, disablePadding: true, label: 'Fecha de vencimiento' },\r\n\t{ id: 'totalVenta', numeric: true, disablePadding: true, label: 'Total venta' },\r\n\t// { id: 'totalAbonado', numeric: true, disablePadding: false, label: 'Pagado' },\r\n\t{ id: 'faltaPagar', numeric: true, disablePadding: true, label: 'Falta por pagar' },\r\n\t\r\n\t{ id: 'detalle', numeric: false, disablePadding: true, label: 'Detalle venta' },\r\n\t{ id: 'historialAbonos', numeric: false, disablePadding: true, label: 'Historial Abonos' },\r\n\t{ id: 'abonar', numeric: false, disablePadding: true, label: 'Abonar' },\r\n\t{ id: 'liquidar', numeric: false, disablePadding: true, label: 'Liquidar' },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t>{headCell.label}</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\t// onRequestSort: PropTypes.func.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\t// order: PropTypes.oneOf([ 'asc', 'desc' ]).isRequired,\r\n\t// orderBy: PropTypes.string.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tpagada: {\r\n\t\tbackgroundColor: \"#EDFFF3\",\r\n\t\t\"&:hover\": {\r\n\t\t  backgroundColor: \"#D8FFE5\",\r\n\t\t},\r\n\t  },\r\n\tvencidas: {\r\n\t\tbackgroundColor: \"#FFF4F4\",\r\n\t\t\"&:hover\": {\r\n\t\t  backgroundColor: \"#F5F5F5\",\r\n\t\t},\r\n\t  },\r\n\tvencer: {\r\n\t\tbackgroundColor: \"#FFF\",\r\n\t\t\"&:hover\": {\r\n\t\t  backgroundColor: \"#F5F5F5\",\r\n\t\t},\r\n\t  },  \r\n}));\r\n\r\nexport default function TablaVentasCredito(props) {\r\n\tconst classes = useStyles();\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\t/* const { setVentas} = useContext(AbonosCtx); */\r\n\tconst [openDetalle, setOpenDetalle] = useState(false);\r\n    const [openHistorial, setOpenHistorial] = useState(false);\r\n    const [rowSelected, setRowSelected] = useState({});\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = rows.map((n) => n.name);\r\n\t\t\tsetSelected(newSelecteds);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\t/* const handleClick = (event, item) => {\r\n         try {\r\n\t\t\tlet newSelected = [];\r\n\t\t\tconst selectedIndex = selected.indexOf(item);\r\n\t\t\t//console.log(selected,selectedIndex);\r\n\t\t\t\r\n\t\t\tif (selectedIndex === -1) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected, item);\r\n\t\t\t} else if (selectedIndex === 0) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t\t} else if (selectedIndex > 0) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetSelected(newSelected);\r\n\t\t\tsetVentas(newSelected); \r\n\t\t } catch (error) {\r\n\t\t\t \r\n\t\t }\r\n\t\r\n\t\t\r\n\t}; */\r\n\tconst detalle =(row) =>{\r\n\t\tsetOpenDetalle(true);\r\n\t\tsetRowSelected(row);\r\n\t}\r\n\r\n\tconst historial =(row) =>{\r\n\t\tsetOpenHistorial(true);\r\n\t\tsetRowSelected(row);\r\n\t}\r\n\r\n\tconst isSelected = (item) => selected.indexOf(item) !== -1;\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t<Box my={1} m={2} display=\"flex\">\r\n      \r\n        <Fragment>\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#58ff8f\"\r\n              bgcolor=\"#EDFFF3\"\r\n              height=\"24px\"\r\n              width=\"24px\"\r\n            />\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>- Pagadas </b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n        </Fragment>\r\n        \r\n\t\t\t<Box\r\n\t\t\t\tborder={1}\r\n\t\t\t\tborderColor=\"#FF8A8A\"\r\n\t\t\t\tbgcolor=\"#FFF4F4\"\r\n\t\t\t\theight=\"24px\"\r\n\t\t\t\twidth=\"24px\"\r\n\t\t\t/>\r\n\t\t\t<Box mx={1} />\r\n\t\t\t<Typography>\r\n\t\t\t<b>- Ventas vencidas </b>\r\n\t\t\t</Typography>\r\n\t\t\t{/* <Box\r\n\t\t\t\tborder={1}\r\n\t\t\t\tborderColor=\"#FF8A8A\"\r\n\t\t\t\tbgcolor=\"#FFF4F4\"\r\n\t\t\t\theight=\"24px\"\r\n\t\t\t\twidth=\"24px\"\r\n\t\t\t/>\r\n\t\t\t<Box mx={1} />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t<b>- Ventas por vencer</b>\r\n\t\t\t</Typography> */}\r\n\t\t</Box>\r\n\t\t\r\n\t\t\t\t<TableContainer style={{height:'65vh'}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={rows.length}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{props.rows.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t// onClick={(event) => handleClick(event, row)}\r\n\t\t\t\t\t\t\t\t\t\trole=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\tclassName={(row.estatus_credito === 'PAGADA') ? classes.pagada : (row.estatus_credito === 'VENCIDA') ?  classes.vencidas : classes.vencer}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{/* <TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t\t\t\t\t\t\t\t/> \r\n\t\t\t\t\t\t\t\t\t\t</TableCell>*/}\r\n\t\t\t\t\t\t\t\t\t\t<TableCell id={labelId}>{row.folio}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell >{` ${formatoFechaCorta(row.fecha_registro)}`}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell >{row.fecha_de_vencimiento_credito}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='left'>{row.total}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='left'>{row.saldo_credito_pendiente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"detalle\" onClick={() =>{ detalle(row)}} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ballot />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\t\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"historial\" onClick={() => {historial(row)}} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<HistoryIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Abonar cliente={props.selectedClient} total_ventas={row.saldo_credito_pendiente}setLoading={props.setLoading}  venta={row}  setAlert={props.setAlert} index={index} recargar={props.recargar} estatus_credito={row.estatus_credito} />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconLiquidar isIcon={true}  cliente={props.selectedClient} total_ventas={row.saldo_credito_pendiente}  setAlert={props.setAlert} index={index}  setLoading={props.setLoading} recargar={props.recargar} estatus_credito={row.estatus_credito}/>\t\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\t\r\n        \t\t\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{/* {emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t{/* <TablePagination\r\n                    rowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={rows.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t\t<DetalleVentaCredito openDetalle ={openDetalle} setOpenDetalle={setOpenDetalle} datos={rowSelected} />\r\n\t\t\t\t<HistorialAbonos openHistorial ={openHistorial} setOpenHistorial={setOpenHistorial} rowSelected={rowSelected} recargar={props.recargar} setAlert={props.setAlert} />\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CONSULTA_PRODUCTOS = gql`\r\n  query ObtenerConsultaGeneralVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        \r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTO_UNITARIO = gql`\r\n  query ObtenerUnProductoVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $datosProductos: ID!\r\n  ) {\r\n    obtenerUnProductoVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      datosProductos: $datosProductos\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_VENTAS = gql`\r\n  query ObtenerProductosVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerProductosVentasInput\r\n  ) {\r\n    obtenerProductosVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n        id_almacen_general\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES_VENTAS = gql`\r\n  query ObtenerClientesVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerClientesVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      numero_cliente\r\n      clave_cliente\r\n      nombre_cliente\r\n      rfc\r\n      curp\r\n      telefono\r\n      celular\r\n      email\r\n      numero_descuento\r\n      limite_credito\r\n      dias_credito\r\n      razon_social\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      banco\r\n      numero_cuenta\r\n      monedero_electronico\r\n      credito_disponible\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_VENTA = gql`\r\n  mutation createVenta(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n  ) {\r\n    createVenta(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_VENTAS_SUCURSAL = gql`\r\nquery obtenerVentasSucursal($empresa: ID!, $sucursal: ID!, $filtros: filtrosObtenerVentas ) {\r\n\t\tobtenerVentasSucursal(empresa: $empresa, sucursal: $sucursal, filtros: $filtros) {\r\n\t\t\t_id\r\n      folio\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion{\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        eliminado\r\n        banco\r\n        numero_cuenta\r\n        monedero_electronico\r\n        credito_disponible\r\n      }\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general_activo\r\n      id_caja{\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      fecha_de_vencimiento_credito\r\n      dias_de_credito_venta\r\n      empresa\r\n      sucursal\r\n      usuario{\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      productos{\r\n        _id\r\n        id_producto{\r\n          _id\r\n          datos_generales{\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat{\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios{\r\n            ieps\r\n            ieps_activo\r\n            inventario{\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra{\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra{\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n            granel\r\n            litros\r\n          }\r\n          imagenes{\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos{\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos{\r\n            precio_cajas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_costales{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_piezas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n          }\r\n          unidades_de_venta{\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general{\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          medidas_producto{\r\n            _id\r\n            cantidad\r\n            cantidad_nueva\r\n            almacen\r\n            codigo_barras\r\n            color{\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida{\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n        }\r\n        concepto\r\n        cantidad\r\n        iva_total\r\n        ieps_total\r\n        subtotal\r\n        impuestos\r\n        total\r\n        medida{\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color{\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto{\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        id_unidad_venta{\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          codigo_unidad\r\n          unidad_principal\r\n          unidad_activa\r\n          codigo_barras\r\n          id_producto\r\n          descuento{\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n          precio_unidad{\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        inventario_general{\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          codigo_unidad\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n          id_almacen_general\r\n          eliminado\r\n        }\r\n        year_registro\r\n        fecha_registro\r\n        precio_unidad{\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        subtotal_antes_de_impuestos\r\n        descuento_activo\r\n        descuento_producto{\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        precio_actual_object{\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      }\r\n      fecha_registro\r\n      factura{\r\n        id_cfdi\r\n        serie\r\n        currency\r\n        expedition_place\r\n        folio\r\n        cfdi_type\r\n        payment_form\r\n        payment_method\r\n        logo_url\r\n        date\r\n        issuer{\r\n          FiscalRegime\r\n          Rfc\r\n          TaxName\r\n        }\r\n        receiver{\r\n          Rfc\r\n          Name\r\n          CfdiUse\r\n        }\r\n        items{\r\n          ProductCode\r\n          IdentificationNumber\r\n          Description\r\n          Unit\r\n          UnitCode\r\n          UnitPrice\r\n          Quantity\r\n          Subtotal\r\n          Discount\r\n          Taxes{\r\n            Total\r\n            Name\r\n            Base\r\n            Rate\r\n            IsRetention\r\n          }\r\n          Total\r\n        }\r\n        original_string\r\n        sub_total\r\n        total\r\n        discount\r\n        fecha_registro\r\n        empresa\r\n        sucursal\r\n      }\r\n      montos_en_caja{\r\n        monto_efectivo{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_tarjeta_debito{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_tarjeta_credito{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_creditos{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_monedero{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_transferencia{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_cheques{\r\n          monto\r\n          metodo_pago\r\n        }\r\n        monto_vales_despensa{\r\n          monto\r\n          metodo_pago\r\n        }\r\n      }\r\n      status\r\n      tipo_emision\r\n      forma_pago\r\n      metodo_pago\r\n      abono_minimo\r\n\t\t}\r\n\t}\r\n`;\r\nexport const OBTENER_VENTAS_REPORTES = gql`\r\nquery obtenerVentasReportes($empresa: ID!, $sucursal: ID!, $filtros: filtrosReportesVentas ) {\r\n\t\tobtenerVentasReportes(empresa: $empresa, sucursal: $sucursal, filtros: $filtros) {\r\n\t\t\t_id\r\n      id_compra\r\n      id_traspaso\r\n      id_producto\r\n      id_proveedor\r\n      id_almacen\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      proveedor {\r\n        _id\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      producto {\r\n        almacen_inicial {\r\n          almacen\r\n          cantidad\r\n          fecha_de_expiracion\r\n          id_almacen\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          granel\r\n          litros\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          cantidad\r\n          codigo_barras\r\n          id_producto\r\n          precio\r\n          unidad\r\n          unidad_principal\r\n          _id\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n      }\r\n      concepto\r\n      cantidad\r\n      cantidad_regalo\r\n      unidad_regalo\r\n      cantidad_total\r\n      iva_total\r\n      ieps_total\r\n      costo\r\n      descuento_porcentaje\r\n      descuento_precio\r\n      compra_credito\r\n      venta_credito\r\n      forma_pago\r\n      impuestos\r\n      mantener_precio\r\n      subtotal\r\n      total\r\n      medida {\r\n        id_medida\r\n        medida\r\n        tipo\r\n      }\r\n      color {\r\n        id_color\r\n        color\r\n        hex\r\n      }\r\n      unidad\r\n      id_unidad_venta\r\n      empresa\r\n      sucursal\r\n      usuario\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const CANCELAR_VENTA_SUCURSAL = gql`\r\n  mutation cancelarVentasSucursal(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $folio: String!\r\n  \t$input: cancelarVentaInput\r\n  ) {\r\n    cancelarVentasSucursal(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      folio: $folio\r\n      input: $input\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`\r\n","import React, { useContext, useEffect, useRef, useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { FcDonate } from \"react-icons/fc\";\r\nimport { Box, TextField, Grid, CircularProgress } from '@material-ui/core';\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\nimport {AbonosCtx} from \"../../../../../context/Tesoreria/abonosCtx\";\r\n\r\nimport TablaVentasCredito from './Components/TablaVentasCredito';\r\nimport ButtonLiquidar from './Components/Liquidar';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_HISTORIAL_ABONOS_CLIENTE } from \"../../../../../gql/Tesoreria/abonos\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../../../../gql/Ventas/ventas_generales\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ttitleSelect:{\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t\tfontSize:18\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\ticonSize: {\r\n\t\twidth: 32,\r\n\t},\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\tminHeight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    }\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosClientes(props) {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\tconst context = useContext(AbonosCtx);\r\n\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [alert,setAlert] = useState({message:'', status:'', open: false});\r\n\tconst [selectedClient, setSelectedClient] = useState(\"\");\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\t//const searchfilter = useRef(null);\r\n\tconst [totalVentas, setTotalVentas] = useState([]);\r\n\tlet historialVentasACredito = [];\r\n\tlet clientes = [];\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\t\r\n  \r\n\twindow.addEventListener(\"keydown\", Mi_función);\r\n\tfunction Mi_función(e) {\r\n\t  if (e.keyCode === 117 && props.fromVentas) {\r\n\t\t  \r\n\t\thandleClickOpen();\r\n\t  }\r\n\t}\r\n  \r\n\tconst obtenerVentasCredito = useQuery(OBTENER_HISTORIAL_ABONOS_CLIENTE, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id, idCliente: selectedClient._id },\r\n\t\tfetchPolicy: \"network-only\"\r\n\t  });\r\n\t\r\n\t\r\n\tconst obtenerClientes= useQuery(OBTENER_CLIENTES_VENTAS, {\r\n\t\tvariables: {\r\n\t\t  empresa: sesion.empresa._id,\r\n\t\t  sucursal: sesion.sucursal._id,\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\",\r\n\t});  \r\n\r\n\tconst ChangeClientAutocomplate = (value) => {\r\n\t\ttry {\r\n\t\t  let setVal  = (value !== null) ? value: \"\"; \r\n\t\t \r\n\t\t   setSelectedClient(setVal);\r\n\t\t} catch (error) {\r\n\t\t  console.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\t setLoading(obtenerVentasCredito.loading)\r\n\t}, [obtenerVentasCredito.loading])\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tif(obtenerVentasCredito.data){\r\n\t\t\t\tlet arrayToset = [];\r\n\t\t\t\tlet total_ventas = 0;\r\n\t\t\t\tif(obtenerVentasCredito.data.historialVentasACredito.length > 0){\t\r\n\t\t\t\t\tobtenerVentasCredito.data.historialVentasACredito.forEach(element => {\r\n\t\t\t\t\t\ttotal_ventas += element.saldo_credito_pendiente;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tarrayToset.push({id_venta:element._id, monto_total_abonado:0, saldo_credito_pendiente: parseFloat(element.saldo_credito_pendiente)});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTotalVentas(parseFloat(total_ventas.toFixed(2)));\r\n\t\t\t\t\tcontext.setAbonos(arrayToset);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}, [obtenerVentasCredito.data]);\r\n\r\n\t\r\n\tif(obtenerVentasCredito.data){\r\n\t\thistorialVentasACredito = obtenerVentasCredito.data.historialVentasACredito;\r\n\t}\r\n\r\n\tif(obtenerClientes.data){\r\n\t\tclientes = obtenerClientes.data.obtenerClientesVentas;\r\n\t}\r\n\t\r\n\tif(obtenerVentasCredito.error){\r\n\t\tconsole.log(obtenerVentasCredito.error)\r\n\t\tif (obtenerVentasCredito.error.networkError.result) {\r\n\t\t\tconsole.log(obtenerVentasCredito.error.networkError.result.errors);\r\n\t\t  } else if (obtenerVentasCredito.error.graphQLErrors) {\r\n\t\t\tconsole.log(obtenerVentasCredito.error.graphQLErrors.message);\r\n\t\t  }\r\n\t}\r\n\r\n\tconst enviarCantidad = (cantidad, index, _id) =>{\r\n\t\tlet copyArray = [...context.abonos];\r\n\t\t\r\n\t\tif(cantidad > 0){\r\n\t\t\tcopyArray.splice(index, 1, {id_venta: _id, monto_total_abonado: cantidad});\r\n\t\t\t\r\n\t\t\r\n\t\t}else{\r\n\t\t\tcopyArray.splice(index, 1);\r\n\t\t}\r\n\t\tcontext.setAbonos(copyArray);\r\n    };\r\n\t\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t{\r\n\t\t\t\t(props.fromVentas) ? \r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName={classes.borderBotonChico}\r\n\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\tdisabled={!turnoEnCurso}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<FcDonate style={{ fontSize: 35 }} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Typography variant=\"body2\">\r\n\t\t\t\t\t\t<b>Abonos</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n\t\t\t\t\t\t<b>F6</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t:\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de Clientes\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t}\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos de Clientes \r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={5} >\r\n\t\t\t\t\t\t<Box ml={2} mt={1}>\r\n\t\t\t\t\t\t\t<Typography className={classes.titleSelect} color=\"textPrimary\" gutterBottom>\r\n\t\t\t\t\t\t\t\t<b>Seleccionar cliente </b>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={3} style={{width:'80%'}} >\r\n\t\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\t\tid=\"combo-box-producto-codigo\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\toptions={clientes}\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option) =>\r\n\t\t\t\t\t\t\t\toption.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\trenderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n\t\t\t\t\t\t\t\tonChange={(_, value) => ChangeClientAutocomplate(value)}\r\n\t\t\t\t\t\t\t\tgetOptionSelected={(option, value) =>\r\n\t\t\t\t\t\t\t\toption.nombre_cliente === value.nombre_cliente\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={selectedClient ? selectedClient : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<Grid item lg={7}>\r\n\t\t\t\t\t\t\t<Box  mt={3} mr={2} display=\"flex\" justifyContent=\"flex-end\" alignContent=\"space-between\">\r\n\t\t\t\t\t\t \t{/*\r\n\t\t\t\t\t\t\t\tcontext.abonos.length > 0  ?( \r\n\t\t\t\t\t\t\t\t\t<ButtonAbonar setOpenAbonar={context.setOpenAbonar}  openAbonar={context.openAbonar}  setSelectedClient={setSelectedClient} selectedClient={selectedClient} ventas={context.ventas} abonos={context.abonos} setAbonos={context.setAbonos} />)\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t*/} \r\n\t\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\t\t(historialVentasACredito.length > 0 && totalVentas > 0) ? \r\n\t\t\t\t\t\t\t\t\t<ButtonLiquidar cliente={selectedClient} total_ventas={totalVentas} setAlert={setAlert} liquidarTodas={true}  recargar= {obtenerVentasCredito.refetch} setLoading={setLoading} />\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t</Grid>\r\n\t\t\t{/* \t<Grid container >\r\n                    {\r\n                        historialVentasACredito.map((venta, index) =>{\r\n\t\t\t\t\t\t\t\r\n                            return(\r\n                                <CardVentaAbono datos={venta} index={index}  setSelectedClient={setSelectedClient} selectedClient={selectedClient}  setOpen={setOpen} enviarCantidad={enviarCantidad}  empresa={sesion.empresa._id} sucursal={sesion.sucursal._id} setAlert={setAlert} />   \r\n                            )\r\n                        })\r\n\t\t\t\t\t\t\r\n                    } \r\n                </Grid>  */}\r\n\t\t\t\t{\r\n\t\t\t\t\t(historialVentasACredito.length) ? \r\n\t\t\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t\t\t<TablaVentasCredito rows={historialVentasACredito} setSelectedClient={setSelectedClient} selectedClient={selectedClient}  setOpen={setOpen} enviarCantidad={enviarCantidad}   setAlert={setAlert} setLoading={setLoading} recargar= {obtenerVentasCredito.refetch} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Box/>\t\r\n\t\t\t\t}\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\t(loading) ?\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\theight=\"50vh\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<CircularProgress/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div/>\r\n\t\t\t\t} \r\n\t\t\t</Dialog>\r\n\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport CajaPrincipal from './CajaPrincipal/CajaPrincipal';\r\nimport AbonosProveedores from './Abonos/Provedores/AbonosProovedores';\r\nimport AbonosClientes from './Abonos/Clientes/AbonosClientes';\r\nimport {AbonosProvider} from \"../../../context/Tesoreria/abonosCtx\";\r\n// import Transferencias from './Transferencias/Transferencias';\r\n\r\nimport SnackBarMessages from '../../../components/SnackBarMessages';\r\nimport { TesoreriaCtx } from '../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nexport default function Tesoreria() {\r\n  \r\n\tconst { alert, setAlert } = useContext(TesoreriaCtx);\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconsole.log(permisosUsuario.accesos.tesoreria)\r\n\treturn (\r\n\t\t<Container>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.cuentas_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CajaPrincipal />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* {permisosUsuario.accesos.tesoreria.egresos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Egresos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosProveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_clientes.ver === false ? (null):(\r\n\t\t\t\t\t<AbonosProvider>\r\n\t\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<AbonosClientes fromVentas={false} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</AbonosProvider>\r\n\t\t\t\t)}\r\n                {/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Transferencias />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { TesoreriaProvider } from '../../../context/Tesoreria/tesoreriaCtx';\r\nimport Tesoreria from './Tesoreria';\r\n\r\nexport default function IndexTesoreria() {\r\n    return (\r\n        <TesoreriaProvider>\r\n            <Tesoreria />\r\n        </TesoreriaProvider>\r\n    )\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const FacturacionCtx = createContext();\r\n\r\nexport const FacturacionProvider = ({ children }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [datosFactura, setDatosFactura] = useState({\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion && sesion.empresa.imagen ? sesion.empresa.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  });\r\n\r\n  const [venta_factura, setVentaFactura] = useState(null);\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const [cp_valido, setCPValido] = useState(false);\r\n  const [codigo_postal, setCodigoPostal] = useState(\"\");\r\n  const [error_validation, setError] = useState({ status: false, message: \"\" });\r\n\r\n  return (\r\n    <FacturacionCtx.Provider\r\n      value={{\r\n        datosFactura,\r\n        setDatosFactura,\r\n        cp_valido,\r\n        setCPValido,\r\n        codigo_postal,\r\n        setCodigoPostal,\r\n        error_validation,\r\n        setError,\r\n        venta_factura,\r\n        setVentaFactura,\r\n        productos,\r\n        setProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </FacturacionCtx.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductosSinClaveSat({ productos, open, handleClose }) {\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              Productos sin CLAVE del catalogo SAT\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Hay productos sin clave de catalogo de productos del sat, sin esta\r\n            clave no puede realizar facturas\r\n          </DialogContentText>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer style={{ maxHeight: \"40vh\" }}>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Código de barras</TableCell>\r\n                    <TableCell>Clave alterna</TableCell>\r\n                    <TableCell>Producto</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {productos.map((row, index) => {\r\n                    const { datos_generales } = row.id_producto;\r\n                    return (\r\n                      <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.codigo_barras}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.clave_alterna}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.nombre_comercial}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()} color=\"inherit\" size=\"large\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles, Snackbar } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Description, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport ProductosSinClaveSat from \"./ProductosSinClave\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport moment from \"moment\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar venta</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ComponentBusquedaVenta handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cancelar</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ComponentBusquedaVenta = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open_productos, setOpenProductos] = useState(false);\r\n  const [productos_sin_clave, setProductosSinClave] = useState([]);\r\n\r\n  const openProductosClaves = () => setOpenProductos(true);\r\n  const closeProductosClaves = () => setOpenProductos(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  const isDate = moment(value).isValid();\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        isDate,\r\n        busqueda: value ? value : \"\",\r\n        filtro: \"\",\r\n        vista: \"FACTURACION\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ProductosSinClaveSat\r\n        productos={productos_sin_clave}\r\n        open={open_productos}\r\n        handleClose={closeProductosClaves}\r\n      />\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={8} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={4} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar una venta haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        handleClose={handleClose}\r\n        setProductosSinClave={setProductosSinClave}\r\n        openProductosClaves={openProductosClaves}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  handleClose,\r\n  setProductosSinClave,\r\n  openProductosClaves,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const {\r\n    setVentaFactura,\r\n    setProductos,\r\n    setDatosFactura,\r\n    datosFactura,\r\n  } = useContext(FacturacionCtx);\r\n  const { loading, data, error } = resultado_ventas;\r\n  const [open, setOpen] = useState(false);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerVentasSucursal } = data;\r\n\r\n  const obtenerVenta = (click, data, facturada) => {\r\n    /* console.log(data); */\r\n    setSelected(data.folio);\r\n    if (click === 2) {\r\n      if (facturada) {\r\n        setOpen(true);\r\n        return;\r\n      }\r\n      const without_sat_code = data.productos.filter(\r\n        (res) => !res.id_producto.datos_generales.clave_producto_sat.Value\r\n      );\r\n\r\n      if (without_sat_code.length > 0) {\r\n        setProductosSinClave(without_sat_code);\r\n        openProductosClaves();\r\n        return;\r\n      }\r\n\r\n      const { productos, ...venta } = { ...data };\r\n      const productos_base = [...data.productos];\r\n\r\n      let datos_factura = {\r\n        ...datosFactura,\r\n        payment_form: venta.forma_pago,\r\n        payment_method: venta.metodo_pago,\r\n      };\r\n\r\n      if (data.cliente && data.cliente.rfc) {\r\n        datos_factura = {\r\n          ...datos_factura,\r\n          receiver: {\r\n            ...datosFactura.receiver,\r\n            Name: data.cliente.nombre_cliente,\r\n            Rfc: data.cliente.rfc,\r\n          },\r\n        };\r\n      }\r\n\r\n      setDatosFactura(datos_factura);\r\n      setVentaFactura(venta);\r\n      setProductos(productos_base);\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={open}\r\n        onClose={() => setOpen(false)}\r\n        message=\"Esta venta ya fue facturada\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\"></TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Fecha</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.map((data, index) => {\r\n              const facturada = data.factura.length > 0;\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  selected={data.folio === selected}\r\n                  onClick={(e) => obtenerVenta(e.detail, data, facturada)}\r\n                >\r\n                  <TableCell>\r\n                    {facturada ? <Description color=\"primary\" /> : null}\r\n                  </TableCell>\r\n                  <TableCell>{data.folio}</TableCell>\r\n                  <TableCell>\r\n                    {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {data.cliente !== null ? data.cliente.nombre_cliente : \"-\"}\r\n                  </TableCell>\r\n                  <TableCell>{data.usuario.nombre}</TableCell>\r\n                  <TableCell>{data.id_caja.numero_caja}</TableCell>\r\n                  <TableCell>\r\n                    ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n                  </TableCell>\r\n                  <TableCell>${formatoMexico(data.subTotal)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport { CircularProgress, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { CheckCircle, Error } from \"@material-ui/icons\";\r\n\r\nexport default function CodigoPostal() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const {\r\n    cp_valido,\r\n    setCPValido,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    error_validation,\r\n  } = React.useContext(FacturacionCtx);\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const [CP] = useDebounce(value, 500);\r\n\r\n  const obtenerCodigoPostal = React.useCallback(async (codigo_postal) => {\r\n    if (!codigo_postal) return;\r\n    try {\r\n      setLoading(true);\r\n      const result = await Facturama.Catalogs.PostalCodes(\r\n        codigo_postal,\r\n        function (result) {\r\n          return result;\r\n        }\r\n      );\r\n\r\n      if (result) {\r\n        setCPValido(true);\r\n        setLoading(false);\r\n        setCodigoPostal(result[0].Value);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCPValido(false);\r\n      setCodigoPostal(\"\");\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    obtenerCodigoPostal(CP);\r\n  }, [CP]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <Typography>Código Postal:</Typography> */}\r\n      <form onSubmit={obtenerCodigoPostal}>\r\n        <TextField\r\n          fullWidth\r\n          name=\"expedition_place\"\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          value={value}\r\n          label=\"Código postal\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {value ? (\r\n                  loading ? (\r\n                    <CircularProgress size={20} />\r\n                  ) : cp_valido ? (\r\n                    <CheckCircle color=\"primary\" />\r\n                  ) : (\r\n                    <Error color=\"error\" />\r\n                  )\r\n                ) : (\r\n                  <div />\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          /* error={value ? cp_valido ? false : true : false}\r\n          helperText={value ? cp_valido ? \"\" : \"Introduce un CP valido\" : \"\"} */\r\n\r\n          error={\r\n            error_validation.status && !value\r\n              ? true\r\n              : value\r\n              ? cp_valido\r\n                ? false\r\n                : true\r\n              : false\r\n          }\r\n          helperText={\r\n            error_validation.status && !value\r\n              ? error_validation.message\r\n              : value\r\n              ? cp_valido\r\n                ? \"\"\r\n                : \"Introduce un CP valido\"\r\n              : \"\"\r\n          }\r\n        />\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { Close, Error, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport CrearCliente from \"../../Catalogos/Cliente/CrearCliente\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaClientesFacturas() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar cliente</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <BuscadorClienteComponent handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button size=\"large\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst BuscadorClienteComponent = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [openAlertRfc, setOpenAlertRfc] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const resultado_clientes = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo: \"CLIENTE\",\r\n      filtro: value,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const handleCloseAlertRFC = () => {\r\n    setOpenAlertRfc(false);\r\n  };\r\n  const openAlertRFC = () => {\r\n    setOpenAlertRfc(true);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={openAlertRfc}\r\n        onClose={handleCloseAlertRFC}\r\n        message=\"Debes registrar un RFC y RAZÓN SOCIAL a este cliente.\"\r\n        autoHideDuration={2000}\r\n      />\r\n      <Box mb={2} display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setFiltro(e.target.value)}\r\n          value={filtro}\r\n        />\r\n        <CrearCliente\r\n          tipo=\"CLIENTE\"\r\n          accion=\"registrar\"\r\n          refetch={resultado_clientes.refetch}\r\n        />\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar un cliente haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderListClientes\r\n        handleClose={handleClose}\r\n        resultado_clientes={resultado_clientes}\r\n        openAlertRFC={openAlertRFC}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderListClientes = ({\r\n  handleClose,\r\n  resultado_clientes,\r\n  openAlertRFC,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  const { loading, data, error, refetch } = resultado_clientes;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const obtenerClienteTabla = (click, row) => {\r\n    setSelected(row.nombre_cliente);\r\n    if (click === 2) {\r\n      if (!row.rfc) {\r\n        openAlertRFC();\r\n        return;\r\n      }\r\n      setDatosFactura({\r\n        ...datosFactura,\r\n        receiver: {\r\n          ...datosFactura.receiver,\r\n          Name: row.nombre_cliente,\r\n          Rfc: row.rfc,\r\n        },\r\n      });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n              <TableCell minwidth=\"100\">Clave</TableCell>\r\n              <TableCell minwidth=\"150\">Nombre</TableCell>\r\n              <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              <TableCell minwidth=\"150\">RFC</TableCell>\r\n              <TableCell minwidth=\"150\">Editar Cliente</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  onClick={(e) => obtenerClienteTabla(e.detail, row)}\r\n                  selected={row.nombre_cliente === selected}\r\n                >\r\n                  <TableCell>\r\n                    <Typography>{row.numero_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.clave_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.nombre_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.razon_social}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>\r\n                      {row.rfc ? row.rfc : <Error color=\"primary\" />}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <CrearCliente\r\n                      tipo=\"CLIENTE\"\r\n                      accion=\"actualizar\"\r\n                      datos={row}\r\n                      refetch={refetch}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ListaVentasFactura from \"./ListaVentas/ListaVentasFactura.js\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx.js\";\r\nimport CodigosPostales from \"./Catalogos/CodigoPostal.js\";\r\nimport { tipoCambio, tiposCfdi } from \"../catalogos\";\r\nimport ListaClientesFacturas from \"./ClientesSelect.js\";\r\n\r\nexport default function RegistroFactura({ serie_default }) {\r\n  const { datosFactura, setDatosFactura, error_validation, venta_factura } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { folio, serie } = serie_default[0];\r\n    setDatosFactura({ ...datosFactura, folio: folio.toString(), serie });\r\n  }, []);\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={5}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>{`Emisor: ${datosFactura.issuer.Name}`}</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.issuer.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.issuer.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.issuer.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Regimen fiscal</Typography>\r\n              <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                <TextField\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={datosFactura.issuer.FiscalRegime}\r\n                  disabled\r\n                  error={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                  }\r\n                  helperText={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                      ? error_validation.message\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>Receptor</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Cliente</Typography>\r\n              <TextField\r\n                value={datosFactura.receiver.Name}\r\n                placeholder=\"Selecciona un cliente\"\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <ListaClientesFacturas />\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                  disabled: true,\r\n                }}\r\n                error={error_validation.status && !datosFactura.receiver.Name}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Name\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.receiver.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.receiver.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Box mt={1} mb={2}>\r\n        <Typography>\r\n          <b>Datos factura</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <TextField\r\n            placeholder=\"Selecciona venta a facturar\"\r\n            fullWidth\r\n            size=\"small\"\r\n            label=\"Folio Venta\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <ListaVentasFactura />\r\n                </InputAdornment>\r\n              ),\r\n              readOnly: true,\r\n              disabled: true,\r\n            }}\r\n            value={venta_factura ? venta_factura.folio : ''}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.folio}\r\n            label=\"Folio\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.folio}\r\n            helperText={\r\n              error_validation.status && !datosFactura.folio\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.serie}\r\n            label=\"Serie\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.serie}\r\n            helperText={\r\n              error_validation.status && !datosFactura.serie\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cfdi_type\"\r\n            error={error_validation.status && !datosFactura.cfdi_type}\r\n          >\r\n            <InputLabel id=\"cfdi_type\">Tipo de CFDI</InputLabel>\r\n            <Select\r\n              labelId=\"cfdi_type\"\r\n              value={datosFactura.cfdi_type}\r\n              name=\"cfdi_type\"\r\n              onChange={obtenerDatos}\r\n              label=\"tipo de CFDI\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tiposCfdi.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.cfdi_type\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"currency\"\r\n            error={error_validation.status && !datosFactura.currency}\r\n          >\r\n            <InputLabel id=\"moneda\">Moneda</InputLabel>\r\n            <Select\r\n              labelId=\"moneda\"\r\n              value={datosFactura.currency}\r\n              name=\"currency\"\r\n              onChange={obtenerDatos}\r\n              label=\"moneda\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tipoCambio.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.currency\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <CodigosPostales />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Close, Edit } from \"@material-ui/icons\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ModificarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const [producto_base, setProductoBase] = useState({ ...producto });\r\n  const [venta_base, setVentaBase] = useState({ ...venta });\r\n\r\n  const [cantidad_base, setCantidad] = useState(producto_base.cantidad_venta);\r\n  const [precio_base, setPrecio] = useState(\r\n    producto_base.precio_actual_object.precio_neto\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    handleClose();\r\n    setProductoBase(producto);\r\n    setVentaBase(venta);\r\n    setCantidad(producto.cantidad_venta);\r\n    setPrecio(producto.precio_actual_object.precio_neto);\r\n  };\r\n\r\n  const obtenerDatos = async (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad_venta\") {\r\n      setCantidad(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n    if (!value) return;\r\n    //##################\r\n    let venta_copy = { ...venta_base };\r\n    let copy_producto = { ...producto_base };\r\n    let { precio_actual_object, cantidad_venta, granel_producto } = {\r\n      ...copy_producto,\r\n    };\r\n\r\n    const { precios } = { ...copy_producto.id_producto };\r\n    //meter el precio original para restalo a la venta\r\n    const resta_base = await calculatePrices2({\r\n      newP: copy_producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //restal resultados a la venta\r\n\r\n    venta_copy.iva = venta_copy.iva - resta_base.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps - resta_base.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos - resta_base.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal - resta_base.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total - resta_base.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero - resta_base.monederoCalculo;\r\n\r\n    //realizar calculos de cantidad\r\n    //meter el precio nuevo para sumarlo a la venta\r\n    let suma_nuevo;\r\n\r\n    if (name === \"cantidad_venta\") {\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: parseFloat(value),\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precio_actual_object,\r\n      });\r\n      copy_producto.cantidad_venta = parseFloat(value);\r\n      setProductoBase({ ...copy_producto, [name]: parseFloat(value) });\r\n    } else {\r\n      const precio_neto = parseFloat(value);\r\n      //sacar impuestos\r\n      const { iva, ieps } = precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n\r\n      //sacar precio_venta\r\n      let PVCI = parseFloat(precio_neto / cantidad_venta);\r\n      let PVSI = parseFloat(PVCI / (suma_impuestos + 1));\r\n\r\n      //sacar iva e ieps\r\n      let iva_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      //sacar utilidad\r\n      let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(((PVSI - PCSI) / PCSI) * 100);\r\n      let precios_nuevos = { ...precio_actual_object };\r\n\r\n      let impuestos_precio = ieps_precio + iva_precio;\r\n\r\n      precios_nuevos.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n      precios_nuevos.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      precios_nuevos.precio_venta = parseFloat(PVSI.toFixed(2));\r\n      precios_nuevos.precio_neto = parseFloat(PVCI.toFixed(2));\r\n      precios_nuevos.utilidad = parseFloat(utilidad.toFixed(2));\r\n      if (precio_actual_object.unidad_maxima) {\r\n        precio_actual_object.precio_general = precio_neto;\r\n      }\r\n\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: cantidad_venta,\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precios_nuevos,\r\n      });\r\n      setProductoBase({\r\n        ...copy_producto,\r\n        precio_actual_object: precios_nuevos,\r\n        ieps_total: precios_nuevos.ieps_precio * cantidad_base,\r\n        iva_total: precios_nuevos.iva_precio * cantidad_base,\r\n        precio_a_vender: precios_nuevos.precio_neto * cantidad_base,\r\n        precio_actual_producto: precios_nuevos.precio_neto * cantidad_base,\r\n        subtotal: precios_nuevos.precio_venta * cantidad_base,\r\n        impuestos: impuestos_precio * cantidad_base,\r\n        total: precios_nuevos.precio_neto * cantidad_base,\r\n      });\r\n    }\r\n    //sumar resultados a la venta\r\n    venta_copy.iva = venta_copy.iva + suma_nuevo.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps + suma_nuevo.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos + suma_nuevo.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal + suma_nuevo.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total + suma_nuevo.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero + suma_nuevo.monederoCalculo;\r\n    setVentaBase(venta_copy);\r\n  };\r\n\r\n  const verificarCampoVacio = (value) => {\r\n    if (!value) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n  };\r\n\r\n  const guardarPrecios = () => {\r\n    if (error) return;\r\n    const copy_array_productos = [...productos];\r\n    copy_array_productos.splice(index, 1, producto_base);\r\n    setVentaFactura(venta_base);\r\n    setProductos(copy_array_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Edit />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              {producto_base.id_producto.datos_generales.nombre_comercial}\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleCancel()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Box mb={2}>\r\n              <Typography>\r\n                <b>Producto</b>\r\n              </Typography>\r\n              <TableContainer>\r\n                <Table size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                      <TableCell style={{ width: 50 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow tabIndex={-1}>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={cantidad_base}\r\n                          type=\"number\"\r\n                          name=\"cantidad_venta\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                {producto_base.unidad}\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={\r\n                            producto ? producto.cantidad_venta.toString() : \"\"\r\n                          }\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !cantidad_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={precio_base}\r\n                          type=\"number\"\r\n                          name=\"precio_neto\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                $\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={producto.precio_actual_object.precio_neto.toString()}\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !precio_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.subtotal)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.impuestos)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.total)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Box>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                  <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.iva)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.ieps)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.subTotal)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.impuestos)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.total)}</b>\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => guardarPrecios()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(FacturacionCtx);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const copy_venta = { ...venta };\r\n    const copy_productos = [ ...productos];\r\n    const { cantidad_venta, granel_producto, precio_actual_object } = producto;\r\n    const { iva, ieps, impuestos, subTotal, total, monedero } = copy_venta;\r\n    //devuelve cantidades a restar\r\n    const precio_resta = await calculatePrices2({\r\n      newP: producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //Restar precios a venta\r\n    console.log(precio_resta);\r\n    const {\r\n      ivaCalculo,\r\n      iepsCalculo,\r\n      impuestoCalculo,\r\n      subtotalCalculo,\r\n      totalCalculo,\r\n      monederoCalculo,\r\n    } = precio_resta;\r\n\r\n    copy_venta.iva = iva - ivaCalculo;\r\n    copy_venta.ieps = ieps - iepsCalculo;\r\n    copy_venta.impuestos = impuestos - impuestoCalculo;\r\n    copy_venta.subTotal = subTotal - subtotalCalculo;\r\n    copy_venta.total = total - totalCalculo;\r\n    copy_venta.monedero = monedero - monederoCalculo;\r\n\r\n    //remover de la lista\r\n    copy_productos.splice(index, 1);\r\n    setVentaFactura(copy_venta);\r\n    setProductos(copy_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Close />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>¿Está seguro de eliminar este producto?</DialogTitle>\r\n        <DialogContent>\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 100 }}>Producto</TableCell>\r\n                  <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n                  <TableCell>{producto.cantidad_venta}</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => handleDelete()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport ModificarProductoFactura from \"./EditarProductoFactura\";\r\nimport EliminarProductoFactura from \"./EliminarProductoFactura\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"36vh\",\r\n  },\r\n});\r\n\r\nexport default function DetallesFactura() {\r\n  const classes = useStyles();\r\n  const { venta_factura, productos } = useContext(FacturacionCtx);\r\n\r\n  if (!venta_factura) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"elevation\">\r\n      <Box textAlign=\"center\">\r\n        <Typography variant=\"button\">Detalles de Venta</Typography>\r\n      </Box>\r\n      <TableContainer>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Folio</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cliente</TableCell>\r\n              <TableCell style={{ width: 50 }}>Descuento</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Usuario</TableCell>\r\n              <TableCell style={{ width: 50 }}>Caja</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.folio}\r\n              </TableCell>\r\n              <TableCell style={{ width: 50 }}>\r\n                {venta_factura.cliente !== null\r\n                  ? venta_factura.cliente.nombre_cliente\r\n                  : \"-\"}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.descuento)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.iva\r\n                  ? formatoMexico(venta_factura.iva)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.ieps\r\n                  ? formatoMexico(venta_factura.ieps)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.subTotal)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.impuestos)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.total)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.usuario.nombre}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.id_caja.numero_caja}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box textAlign=\"center\" mt={1}>\r\n        <Typography variant=\"button\">Productos de Venta</Typography>\r\n      </Box>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Producto</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Modificar</TableCell>\r\n              <TableCell style={{ width: 50 }}>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos.map((producto, index) => {\r\n              return (\r\n                <RowTableProductos\r\n                  venta={venta_factura}\r\n                  producto={producto}\r\n                  key={index}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowTableProductos = ({ venta, producto, index }) => {\r\n  const { datos_generales } = producto.id_producto;\r\n  return (\r\n    <TableRow tabIndex={-1}>\r\n      <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n      <TableCell>{producto.cantidad_venta}</TableCell>\r\n      <TableCell>${formatoMexico(producto.iva_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.ieps_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.subtotal)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.impuestos)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.total)}</TableCell>\r\n      <TableCell>\r\n        <ModificarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n      <TableCell>\r\n        <EliminarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","export const verificarDatosFactura = (datos) => {\r\n  const {\r\n    cfdi_type,\r\n    currency,\r\n    date,\r\n    empresa,\r\n    expedition_place,\r\n    folio,\r\n    issuer,\r\n    items,\r\n    /* logo_url, */\r\n    payment_form,\r\n    payment_method,\r\n    receiver,\r\n    serie,\r\n    sucursal,\r\n  } = datos;\r\n\r\n  //verificar datos factura\r\n  if (\r\n    !cfdi_type ||\r\n    !currency ||\r\n    !date ||\r\n    !empresa ||\r\n    !expedition_place ||\r\n    !folio ||\r\n    !issuer ||\r\n    !items ||\r\n    /* !logo_url || */\r\n    !payment_form ||\r\n    !payment_method ||\r\n    !receiver ||\r\n    !serie ||\r\n    !sucursal\r\n  ){\r\n      return [{message: \"Campo requerido\"}]\r\n  }\r\n//verificar productos factura\r\n\r\n\r\n    return [];\r\n};\r\n","const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\nexport const factura_initial_state = {\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion && sesion.empresa.imagen ? sesion.empresa.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  }","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport moment from \"moment\";\r\nimport { verificarDatosFactura } from \"./validacion_factura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { CREAR_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { formaPago, metodoPago, usosCfdi } from \"../catalogos\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RealizarFactura({ setAlert }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    datosFactura,\r\n    setDatosFactura,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    productos,\r\n    setProductos,\r\n    venta_factura,\r\n    setVentaFactura,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const [CrearFactura] = useMutation(CREAR_FACTURA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const crearFactura = async () => {\r\n    try {\r\n      setLoading(true);\r\n      let nuevo_obj = { ...datosFactura };\r\n      const items = [];\r\n\r\n      productos.forEach((producto) => {\r\n        let { iva, ieps } = producto.id_producto.precios;\r\n        let Taxes = [];\r\n\r\n        if (producto.iva_total) {\r\n          Taxes.push({\r\n            Total: producto.iva_total.toFixed(2),\r\n            Name: \"IVA\",\r\n            Base: producto.subtotal.toFixed(2),\r\n            Rate: `0.${iva < 10 ? `0${iva}` : iva}`,\r\n            IsRetention: \"false\",\r\n          });\r\n        }\r\n        if (producto.ieps_total) {\r\n          Taxes.push({\r\n            Total: producto.ieps_total.toFixed(2),\r\n            Name: \"IEPS\",\r\n            Base: producto.subtotal.toFixed(2),\r\n            Rate: `0.${ieps < 10 ? `0${ieps}` : ieps}`,\r\n            IsRetention: \"true\",\r\n          });\r\n        }\r\n        items.push({\r\n          ProductCode:\r\n            producto.id_producto.datos_generales.clave_producto_sat.Value,\r\n          IdentificationNumber: producto.id_producto._id,\r\n          Description: producto.id_producto.datos_generales.nombre_comercial,\r\n          UnitCode: producto.codigo_unidad,\r\n          UnitPrice: producto.precio_unidad.precio_venta.toFixed(2),\r\n          Quantity: producto.cantidad_venta.toString(),\r\n          Subtotal: producto.subtotal_antes_de_impuestos.toFixed(2),\r\n          Discount: producto.descuento_activo\r\n            ? producto.descuento_producto.dinero_descontado.toFixed(2)\r\n            : \"0.00\",\r\n          Taxes,\r\n          Total: producto.total.toFixed(2),\r\n        });\r\n      });\r\n      //poner la fecha de facturacion\r\n      if (datosFactura.date === \"1\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(1, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else if (datosFactura.date === \"2\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(2, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else {\r\n        nuevo_obj.date = moment().locale(\"es-mx\").format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      }\r\n\r\n      nuevo_obj.items = items;\r\n      nuevo_obj.expedition_place = codigo_postal;\r\n      nuevo_obj.id_venta = venta_factura._id;\r\n      nuevo_obj.folio_venta = venta_factura.folio;\r\n\r\n      /* validar todos los datos */\r\n      const validate = verificarDatosFactura(nuevo_obj);\r\n      if (validate.length) {\r\n        setError({ status: true, message: validate[0].message });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setError({ status: false, message: \"\" });\r\n\r\n      /* console.log(nuevo_obj); */\r\n\r\n      let result = await CrearFactura({\r\n        variables: {\r\n          input: nuevo_obj,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearFactura.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      limpiarCampos();\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        startIcon={<DoneIcon />}\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" m={1}>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            variant=\"contained\"\r\n            disabled={loading}\r\n          >\r\n            <Close />\r\n          </Button>\r\n        </Box>\r\n        <DialogContent>\r\n          <InputsFacturaModal />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => crearFactura()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputsFacturaModal = () => {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerUsoCfdi = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      receiver: {\r\n        ...datosFactura.receiver,\r\n        [name]: value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box my={1}>\r\n        <Typography>Fecha de facturación</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"date\"\r\n          error={error_validation.status && !datosFactura.date}\r\n        >\r\n          <Select value={datosFactura.date} name=\"date\" onChange={obtenerDatos}>\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona una fecha</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"0\">{moment().locale(\"es-mx\").format(\"LL\")}</MenuItem>\r\n            <MenuItem value=\"1\">\r\n              {moment().subtract(1, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"2\">\r\n              {moment().subtract(2, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.date\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Forma de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_form\"\r\n          error={error_validation.status && !datosFactura.payment_form}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_form}\r\n            name=\"payment_form\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {formaPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_form\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Método de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_method\"\r\n          error={error_validation.status && !datosFactura.payment_method}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_method}\r\n            name=\"payment_method\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {metodoPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_method\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box>\r\n        <Typography>Uso de CFDi</Typography>\r\n        <FormControl\r\n          fullWidth\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          error={error_validation.status && !datosFactura.receiver.CfdiUse}\r\n        >\r\n          <Select\r\n            value={datosFactura.receiver.CfdiUse}\r\n            name=\"CfdiUse\"\r\n            onChange={obtenerUsoCfdi}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {usosCfdi.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.receiver.CfdiUse\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFactura({ open, setOpen, handleCloseFactura }) {\r\n  const {\r\n    setDatosFactura,\r\n    setCodigoPostal,\r\n    setProductos,\r\n    setVentaFactura,\r\n    setCPValido,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n    setCPValido(false);\r\n    setError({ status: false, message: \"\" });\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelar = () => {\r\n    limpiarCampos();\r\n    handleClose();\r\n    handleCloseFactura();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n      >\r\n        <DialogTitle>{\"¿Estás seguro de cancelar esta factura?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cerrar</Button>\r\n          <Button onClick={() => cancelar()} color=\"primary\">\r\n            Cancelar Factura\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport RegistroFactura from \"./RegistroFactura\";\r\nimport DetallesFactura from \"./TablaVenta/TablaDetallesFactura\";\r\nimport {\r\n  FacturacionCtx,\r\n  FacturacionProvider,\r\n} from \"../../../../context/Facturacion/facturacionCtx\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport RealizarFactura from \"./RealizarFactura\";\r\nimport CancelarFactura from \"./CancelarFactura\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function NuevaFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-2.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Nuevo CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        disableEscapeKeyDown\r\n        TransitionComponent={Transition}\r\n      >\r\n        <FacturacionProvider>\r\n          <DialogFacturaPrincipal handleClose={handleClose} />\r\n        </FacturacionProvider>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DialogFacturaPrincipal = ({ handleClose }) => {\r\n  const classes = useStyles();\r\n  const { venta_factura } = useContext(FacturacionCtx);\r\n  const [openCancel, setOpenCancel] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenCancel(true);\r\n  };\r\n\r\n  const cancelarCFDI = () => {\r\n    if (venta_factura !== null) {\r\n      handleClickOpen();\r\n    } else {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Nuevo CFDI\r\n          </Typography>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={() => cancelarCFDI()}\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <FacturaModalContent />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <RealizarFactura setAlert={setAlert} />\r\n      </DialogActions>\r\n      <CancelarFactura\r\n        open={openCancel}\r\n        setOpen={setOpenCancel}\r\n        handleCloseFactura={handleClose}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst FacturaModalContent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { seriesCfdi } = data.obtenerSeriesCdfi;\r\n\r\n  let serie_default = [];\r\n  serie_default = seriesCfdi.filter((serie) => serie.default === true);\r\n  if (!serie_default.length) {\r\n    serie_default = [{ folio: \"\", serie: \"\" }];\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {!seriesCfdi.length ? (\r\n        <Alert severity=\"warning\">No tienes Series CFDI registradas</Alert>\r\n      ) : null}\r\n      <Box my={2}>\r\n        <RegistroFactura serie_default={serie_default} />\r\n      </Box>\r\n      <DetallesFactura />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Close, Done } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CREAR_SERIE } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroSeries({ refetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({ folio: \"\", serie: \"\", default: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearSerieCFDI] = useMutation(CREAR_SERIE);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({ folio: \"\", serie: \"\", default: false });\r\n  };\r\n\r\n  const obtenerDatosSeries = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPredeterminado = (e) => {\r\n    const { name, checked } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const guardarDatosBD = async () => {\r\n    if (!datos.folio || !datos.serie) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await crearSerieCFDI({\r\n        variables: {\r\n          input: {\r\n            serie: datos.serie,\r\n            folio: parseInt(datos.folio),\r\n            default: datos.default,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearSerieCFDI.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Add />}\r\n        >\r\n          Nueva serie\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Registrar nueva serie</DialogTitle>\r\n        <DialogContent>\r\n          <Box width=\"100%\">\r\n            <Typography>Serie para CDFI:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"serie\"\r\n                onChange={obtenerDatosSeries}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>Folio Inicial:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"folio\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <FormControlLabel\r\n            style={{ marginTop: 8 }}\r\n            control={\r\n              <Checkbox\r\n                checked={datos.default}\r\n                onChange={obtenerPredeterminado}\r\n                name=\"default\"\r\n              />\r\n            }\r\n            label=\"Serie predeterminada\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            disabled={!datos.serie || !datos.folio || loading}\r\n            onClick={() => guardarDatosBD()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Backdrop, Checkbox, CircularProgress } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ACTUALIZAR_DEFAULT_SERIE,\r\n  ELIMINAR_SERIE,\r\n} from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"80vh\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function ListaSeriesCDFI({ obtenerSeriesCdfi, refetch }) {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { seriesCfdi } = obtenerSeriesCdfi;\r\n  const [modificarDefaultSerie] = useMutation(ACTUALIZAR_DEFAULT_SERIE);\r\n\r\n  const setPredeterminado = async (value, data) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await modificarDefaultSerie({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.modificarDefaultSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Backdrop className={classes.backdrop} open={loading}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Serie</TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Predeterminado</TableCell>\r\n              <TableCell padding=\"checkbox\">Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {seriesCfdi.map((row, index) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                  <TableCell>{row.serie}</TableCell>\r\n                  <TableCell>{row.folio}</TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <Checkbox\r\n                      checked={row.default}\r\n                      onChange={(e) => setPredeterminado(e.target.checked, row)}\r\n                      name=\"checkedA\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.eliminar === false ? (null) : (\r\n                      <ModalDeleteSerie\r\n                        row={row}\r\n                        refetch={refetch}\r\n                        setAlert={setAlert}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst ModalDeleteSerie = ({ row, refetch, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarSerie] = useMutation(ELIMINAR_SERIE);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const eliminarSerieBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarSerie({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton aria-label=\"delete\" size=\"small\" onClick={() => handleOpen()} disabled={row.default}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Se eliminara esta serie</DialogTitle>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            onClick={() => eliminarSerieBD()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { forwardRef, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Container,\r\n  Dialog,\r\n  makeStyles,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RegistroSeries from \"./RegistroSeries\";\r\nimport ListaSeriesCDFI from \"./ListaSeries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SeriesCDFI() {\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-1.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Series CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Series para CFDI\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button color=\"secondary\" variant=\"contained\" onClick={handleClickOpen} size=\"large\">\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ContentSeriesCFDI />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentSeriesCFDI = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerSeriesCdfi } = data;\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box my={2}>\r\n        {sesion.accesos.facturacion.registro_series_cdfi.agregar === false ? (null) : (\r\n          <RegistroSeries refetch={refetch} />\r\n        )}\r\n      </Box>\r\n      <ListaSeriesCDFI\r\n        obtenerSeriesCdfi={obtenerSeriesCdfi}\r\n        refetch={refetch}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { FaRegFileCode, FaRegFilePdf } from \"react-icons/fa\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Box, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport InnerHTML from \"dangerously-set-html-content\";\r\n\r\nconst base64toBlob = (data, type) => {\r\n  const bytes = atob(data);\r\n  let length = bytes.length;\r\n  let out = new Uint8Array(length);\r\n\r\n  while (length--) {\r\n    out[length] = bytes.charCodeAt(length);\r\n  }\r\n\r\n  return new Blob([out], { type });\r\n};\r\n\r\nexport default function DetallesFacturaModal({\r\n  factura,\r\n  facturaBase64,\r\n  setOpen,\r\n  loading,\r\n}) {\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"70vh\"\r\n          >\r\n            <CircularProgress />\r\n            <Typography variant=\"h6\">Cargando...</Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n            Cerrar\r\n          </Button>\r\n          <Button startIcon={<FaRegFilePdf />} disabled>\r\n            PDF\r\n          </Button>\r\n          <Button startIcon={<FaRegFileCode />} disabled>\r\n            XML\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (!facturaBase64 || !factura) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"70vh\"\r\n          >\r\n            <ErrorPage />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n            Cerrar\r\n          </Button>\r\n          <Button startIcon={<FaRegFilePdf />} disabled>\r\n            PDF\r\n          </Button>\r\n          <Button startIcon={<FaRegFileCode />} disabled>\r\n            XML\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n  //decodificar base64 an html\r\n  var decodedHTML = window.atob(facturaBase64.htmlBase64);\r\n  //decodificar pdfBase64 a pdf\r\n  const blob_pdf = base64toBlob(facturaBase64.pdfBase64, \"application/pdf\");\r\n  const url_pdf = URL.createObjectURL(blob_pdf);\r\n\r\n  //decodificar xmlBase64 a xml\r\n  const blob_xml = base64toBlob(facturaBase64.xmlBase64, \"text/plain\");\r\n  const url_xml = URL.createObjectURL(blob_xml);\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <InnerHTML html={decodedHTML} />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n          Cerrar\r\n        </Button>\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<FaRegFilePdf />}\r\n          download={`CFDI ${factura.fecha_registro} ${factura.receiver.Name}`}\r\n          href={url_pdf}\r\n        >\r\n          PDF\r\n        </Button>\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<FaRegFileCode />}\r\n          download={`CFDI ${factura.fecha_registro} ${factura.receiver.Name}.xml`}\r\n          href={url_xml}\r\n        >\r\n          XML\r\n        </Button>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst columns = [\r\n  { label: \"Serie\", padding: \"checkbox\" },\r\n  { label: \"Folio\", padding: \"checkbox\" },\r\n  { label: \"Folio venta\", minWidth: 90 },\r\n  { label: \"Fecha\", minWidth: 90 },\r\n  { label: \"Tipo CDFI\", minWidth: 110 },\r\n  { label: \"M. de pago\", minWidth: 90 },\r\n  { label: \"F. de pago\", minWidth: 110 },\r\n  { label: \"Cliente\", minWidth: 100 },\r\n  { label: \"Parcialidad\", minWidth: 90 },\r\n  { label: \"Saldo anterior\", minWidth: 90 },\r\n  { label: \"Cantidad\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      \"& > *\": {\r\n        borderBottom: \"unset\",\r\n      },\r\n    },\r\n  }));\r\n\r\nexport default function ComplementosFactura({ data, open, handleSelectFactura }) {\r\n    const classes = useStyles();\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={12}>\r\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n          <Box margin={1}>\r\n            <Typography variant=\"h6\" gutterBottom component=\"div\">\r\n              Complementos de pago\r\n            </Typography>\r\n            <Table size=\"small\" aria-label=\"purchases\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column, index) => (\r\n                    <TableCell\r\n                      key={index}\r\n                      /* align={column.align} */\r\n                      padding={column.padding}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {data.complementos?.map((cfdi, index) => {\r\n                  return (\r\n                    <TableRow hover key={index} onClick={(e) => handleSelectFactura(e, cfdi)} className={data.complementos.length === index+1 ? classes.root : \"\"}>\r\n                      <TableCell>{cfdi.serie}</TableCell>\r\n                      <TableCell>{cfdi.folio}</TableCell>\r\n                      <TableCell>{cfdi.folio_venta}</TableCell>\r\n                      <TableCell>\r\n                        {moment(cfdi.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                      </TableCell>\r\n                      <TableCell>{cfdi.cfdi_type}</TableCell>\r\n                      <TableCell>\r\n                        {\r\n                          cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PaymentMethod\r\n                        }\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {cfdi.complement?.Payments[0]?.PaymentForm}\r\n                      </TableCell>\r\n                      <TableCell>{cfdi.receiver.Name}</TableCell>\r\n                      <TableCell>\r\n                        {\r\n                          cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PartialityNumber\r\n                        }\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PreviousBalanceAmount)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(cfdi.complement?.Payments[0]?.Amount)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </Box>\r\n        </Collapse>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, IconButton } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\nimport DetallesFacturaModal from \"./DetallesFacturaModal\";\r\nimport { OBTENER_DOCUMENTO_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport ComplementosFactura from \"./TablaComplementosFactura\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst columns = [\r\n  { label: \"expand\", padding: \"checkbox\" },\r\n  { label: \"Serie\", padding: \"checkbox\" },\r\n  { label: \"Folio\", padding: \"checkbox\" },\r\n  { label: \"Folio venta\", minWidth: 90 },\r\n  { label: \"Fecha\", minWidth: 90 },\r\n  { label: \"Tipo CDFI\", minWidth: 110 },\r\n  { label: \"M. de pago\", minWidth: 90 },\r\n  { label: \"F. de pago\", minWidth: 110 },\r\n  { label: \"Cliente\", minWidth: 100 },\r\n  { label: \"Descuento\", minWidth: 90 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n  root: {\r\n    \"& > *\": {\r\n      borderBottom: \"unset\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaFacturasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n  const [factura, setFactura] = useState();\r\n  const [facturaBase64, setFacturaBase64] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState(false);\r\n\r\n  const handleSelectFactura = (e, factura) => {\r\n    if (e.detail === 2) {\r\n      setFactura(factura);\r\n      setOpen(true);\r\n      getDocumentCfdi(factura.id_cfdi);\r\n    }\r\n  };\r\n\r\n  //consultar documento cfdi\r\n  const client = useApolloClient();\r\n\r\n  const getDocumentCfdi = async (id) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: OBTENER_DOCUMENTO_FACTURA,\r\n        variables: {\r\n          id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoading(false);\r\n      setFacturaBase64(response.data.obtenerDocumentCfdi);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => setOpen(false)}\r\n        aria-labelledby=\"detalles-factura-modal-title\"\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle id=\"detalles-factura-modal-title\">\r\n          Detalles factura\r\n        </DialogTitle>\r\n        <DetallesFacturaModal\r\n          factura={factura}\r\n          facturaBase64={facturaBase64}\r\n          setOpen={setOpen}\r\n          loading={loading}\r\n        />\r\n      </Dialog>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={alert}\r\n        onClose={() => setAlert(false)}\r\n        message=\"Hubo un error al cargar los productos\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    padding={column.padding}\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                return (\r\n                  <RenderListFacturas\r\n                    key={index}\r\n                    data={data}\r\n                    handleSelectFactura={handleSelectFactura}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst RenderListFacturas = ({ data, handleSelectFactura }) => {\r\n  const [desplegar, setDesplegar] = useState(false);\r\n  const complement = data.complementos.length > 0 ? true : false;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleSelectFactura(e, data)}\r\n        className={classes.root}\r\n      >\r\n        <TableCell>\r\n          {complement ? (\r\n            <IconButton\r\n              aria-label=\"expand row\"\r\n              size=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setDesplegar(!desplegar);\r\n              }}\r\n            >\r\n              {desplegar ? (\r\n                <KeyboardArrowUpIcon style={{ fontSize: 18 }} />\r\n              ) : (\r\n                <KeyboardArrowDownIcon style={{ fontSize: 18 }} />\r\n              )}\r\n            </IconButton>\r\n          ) : null}\r\n        </TableCell>\r\n        <TableCell>{data.serie}</TableCell>\r\n        <TableCell>{data.folio}</TableCell>\r\n        <TableCell>{data.folio_venta}</TableCell>\r\n        <TableCell>\r\n          {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n        </TableCell>\r\n        <TableCell>{data.cfdi_type}</TableCell>\r\n        <TableCell>{data.payment_method.split(\"-\")[0]}</TableCell>\r\n        <TableCell>{data.payment_form.split(\"-\")[0]}</TableCell>\r\n        <TableCell>{data.receiver.Name}</TableCell>\r\n        <TableCell>${formatoMexico(data.discount)}</TableCell>\r\n        <TableCell>${formatoMexico(data.sub_total)}</TableCell>\r\n        <TableCell>${formatoMexico(data.total)}</TableCell>\r\n      </TableRow>\r\n      <ComplementosFactura data={data} open={desplegar} handleSelectFactura={handleSelectFactura} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarFacturas({ data }) {\r\n\r\n  const facturas = data.map((factura) => {\r\n    const {\r\n      serie,\r\n      folio,\r\n      folio_venta,\r\n      fecha_registro,\r\n      expedition_place,\r\n      cfdi_type,\r\n      payment_form,\r\n      payment_method,\r\n      issuer,\r\n      receiver,\r\n      taxes,\r\n      complement,\r\n      sub_total,\r\n      total,\r\n      discount,\r\n    } = factura;\r\n\r\n    const iva = taxes.filter(res => res.Name === \"IVA\");\r\n    const ieps = taxes.filter(res => res.Name === \"IEPS\");\r\n\r\n    const factura_realizada = {\r\n      serie,\r\n      folio,\r\n      folio_venta,\r\n      fecha_registro,\r\n      expedition_place,\r\n      cfdi_type,\r\n      payment_form,\r\n      payment_method,\r\n      issuer: issuer.TaxName,\r\n      receiver: receiver.Name,\r\n      iva: iva.length ? iva[0].Total : 0,\r\n      ieps: ieps.length ? ieps[0].Total: 0,\r\n      satCertNumber: complement.TaxStamp.SatCertNumber,\r\n      sub_total: formatoMexico(sub_total),\r\n      total: formatoMexico(total),\r\n      discount: formatoMexico(discount),\r\n    };\r\n\r\n    return factura_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={facturas} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Serie\" value=\"serie\" />\r\n        <ExcelColumn label=\"Folio\" value=\"folio\" />\r\n        <ExcelColumn label=\"Folio de venta\" value=\"folio_venta\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Lugar de Expedición\" value=\"expedition_place\" />\r\n        <ExcelColumn label=\"tipo de CFDI\" value=\"cfdi_type\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"payment_method\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"payment_form\" />\r\n        <ExcelColumn label=\"Emisor\" value=\"issuer\" />\r\n        <ExcelColumn label=\"Receptor\" value=\"receiver\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps\" />\r\n        <ExcelColumn label=\"Num. Certificado SAT\" value=\"satCertNumber\" />\r\n        <ExcelColumn label=\"Descuento\" value=\"discount\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"sub_total\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaFacturasFiltradas from \"./TablaFacturasFiltradas\";\r\nimport { formaPago } from \"../catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarFactuas from \"./ExportarFacturas\";\r\nimport { OBTENER_FACTURAS_REALIZADAS } from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nexport default function FiltrosFactura() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_FACTURAS_REALIZADAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        fecha: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        busqueda: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerFacturas } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerFacturas} />\r\n        <TablaFacturasFiltradas data={obtenerFacturas} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    busqueda: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      busqueda: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filtros) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={3} sm={3}>\r\n          <Typography>Buscar por:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"busqueda\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Folio CFDi, Folio de venta, Cliente...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.busqueda}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} sm={3}>\r\n          <Typography>Fecha Factura:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} sm={3}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"PPD - Pago en parcialidades ó diferido\">Pago en parcialidades ó diferido</MenuItem>\r\n              <MenuItem value=\"PUE - Pago en una sola exhibición\">Pago en parcialidades ó diferido</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2} sm={3}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={`${res.Value} - ${res.Name}`}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={3} sm={12}>\r\n          <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\">\r\n            <Button\r\n              color=\"primary\"\r\n              startIcon={<ClearOutlined />}\r\n              onClick={() => limpiarFiltros()}\r\n            >\r\n              Limpiar filtros\r\n            </Button>\r\n            <Box mx={1} />\r\n            <ExportarFactuas data={data} />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FiltrosFactura from \"./FiltrosFactura\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-3.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          CFDis realizados\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              CFDis realizados\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosFactura />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\n\r\nimport NuevaFactura from \"./NuevaFactura/NuevaFactura\";\r\nimport SeriesCDFI from \"./CFDISeries/SeriesCdfi\";\r\n/* import SellosCDFI from './CFDISellos/SellosCdfi'; */\r\nimport FacturasRealizadas from \"./FacturasRealizadas/FacturasRealizadas\";\r\n\r\nexport default function Facturacion() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <div>\r\n      <Container>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          {sesion.accesos.facturacion.generar_cdfi.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <NuevaFactura />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          {sesion.accesos.facturacion.cdfi_realizados.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <FacturasRealizadas />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          {/* \r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SellosCDFI />\r\n                        </Box>\r\n                    </Grid> */}\r\n          {sesion.accesos.facturacion.registro_series_cdfi.ver ===\r\n          false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <SeriesCDFI />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ELIMINAR_ALMACEN } from \"../../../../gql/Almacenes/Almacen\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarAlmacen({ datos, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const [eliminarAlmacen] = useMutation(ELIMINAR_ALMACEN);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDeleteAlmacen = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarAlmacen({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setAlert({\r\n        message: result.data.eliminarAlmacen.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        handleClose();\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleClickOpen} disabled={datos.default_almacen}>\r\n        <Delete />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"eliminarAlmacen-dialog\"\r\n      >\r\n        <DialogTitle id=\"eliminarAlmacen-dialog\">\r\n          ¿Estás seguro de eliminar esto?\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={handleDeleteAlmacen}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  CircularProgress,\r\n  Box,\r\n  Typography,\r\n} from \"@material-ui/core/\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_ALMACENES } from \"../../../../gql/Almacenes/Almacen\";\r\nimport ContainerRegistroAlmacen from \"./ContainerRegistroAlmacen\";\r\nimport { CrearAlmacenContext } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport EliminarAlmacen from \"./EliminarAlmacen\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    heigth: \"75%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"77vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n});\r\n\r\nconst columns = [\r\n  { id: 1, label: \"Nombre\", minWidth: 100 },\r\n  { id: 2, label: \"Encargado\", minWidth: 100 },\r\n  { id: 3, label: \"Sucursal\", minWidth: 150 },\r\n  { id: 13, label: \"Editar\", minWidth: 50, align: \"right\" },\r\n  { id: 14, label: \"Eliminar\", minWidth: 50, align: \"right\" },\r\n];\r\n\r\nexport default function ListaAlmacen() {\r\n  const classes = useStyles();\r\n  const { update } = useContext(CrearAlmacenContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_ALMACENES, {\r\n    variables: {\r\n      id: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerAlmacenes } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer component={Paper} className={classes.container}>\r\n        <Table className={classes.table} aria-label=\"a dense table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerAlmacenes.map((row, index) => {\r\n                return <RowsRender key={index} datos={row} refetch={refetch}  />;\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, refetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_almacen}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>\r\n          {!datos.id_usuario_encargado\r\n            ? \"Sin encargado\"\r\n            : datos.id_usuario_encargado.nombre}\r\n        </Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.id_sucursal.nombre_sucursal}</Typography>\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        {sesion.accesos.almacenes.almacen.editar === false ? null : (\r\n          <ContainerRegistroAlmacen accion=\"actualizar\" datos={datos} />\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        {sesion.accesos.almacenes.almacen.eliminar === false ? null : (\r\n          <EliminarAlmacen datos={datos} refetch={refetch} />\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { forwardRef } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Slide,\r\n  Button,\r\n  Box,\r\n  Dialog,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport ContainerRegistroAlmacen from \"./ContainerRegistroAlmacen\";\r\nimport ListaAlmacen from \"./ListaAlmacen\";\r\n\r\nimport { AlmacenProvider } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroAlmacen() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AlmacenProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Almacenes\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Agregar almacen\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Box m={3} display=\"flex\" justifyContent=\"flex-end\">\r\n            {sesion.accesos.almacenes.almacen.agregar === false ? null : (\r\n              <ContainerRegistroAlmacen accion=\"registrar\" />\r\n            )}\r\n          </Box>\r\n          <Box mx={4}>\r\n            <ListaAlmacen />\r\n          </Box>\r\n        </Dialog>\r\n      </AlmacenProvider>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/almacen.31993015.svg\";","import React, { createContext, useState, useEffect, } from 'react';\r\n\r\nexport const TraspasosAlmacenContext = createContext();\r\n\r\nexport const TraspasosProvider = ({ children }) => {\r\n\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ productos, setProductos ] = useState([]);\r\n    const [ productosTo, setProductosTo ] = useState([]);\r\n     const [ productosEmpTo, setProductosEmpTo ] = useState([]);\r\n    const [ productosTras, setProductosTras ] = useState([]);\r\n    const [ dataExcel, setDataExcel ] = useState([]);\r\n\r\n\treturn (\r\n\t\t<TraspasosAlmacenContext.Provider value={\r\n            { \r\n                \r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                productos,\r\n                setProductos,\r\n                productosTras,\r\n                setProductosTras,\r\n                productosTo,\r\n                setProductosTo,\r\n                productosEmpTo, \r\n                setProductosEmpTo,\r\n                dataExcel,\r\n                setDataExcel\r\n                \r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</TraspasosAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from \"@material-ui/core\";\r\nimport { Cached, Close, Edit } from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {},\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  productoData,\r\n  datos,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  setNew_medidas,\r\n}) {\r\n  const classes = useStyles();\r\n  //const { presentaciones, setPresentaciones } = useContext([]);\r\n  //let mostrar_presentaciones = [];\r\n\r\n  let mostrar_presentaciones = [...datos].sort((a, b) => compareFunction(a, b));\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell padding=\"checkbox\">Precio</TableCell>\r\n                {/* <TableCell padding=\"checkbox\">Descuento</TableCell> */}\r\n                {/* {!onlyPrice ? (\r\n                  <Fragment>\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null} */}\r\n                <Fragment>\r\n                  <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                </Fragment>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datos.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    productoData={productoData}\r\n                    producto={producto}\r\n                    index={index}\r\n                    datos={datos}\r\n                    setNew_medidas={setNew_medidas}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  productoData,\r\n  producto,\r\n  index,\r\n  datos,\r\n  setNew_medidas,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  /* const { presentaciones, setPresentaciones, preciosP } = useContext(\r\n    RegProductoContext\r\n  ); */\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...datos].sort((a, b) => compareFunction(a, b));\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  //const copy_element_presentacion = {  };\r\n  //const copy_element_presentacion_descuento = { ...copy_presentaciones[index].descuento };\r\n  const copy_element_presentacion_descuento = {};\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.medida.cantidad) {\r\n      copy_element_presentacion.medida.cantidad = 0;\r\n    }\r\n    if (!copy_producto.nuevaCantidad) {\r\n      copy_element_presentacion.nuevaCantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = copy_producto.precio;\r\n      //copy_element_presentacion.medida.precio = 0;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.cantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(setNew_medidas);\r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.cantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"nuevaCantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.nuevaCantidad = \"\";\r\n        copy_element_presentacion.medida.existencia =\r\n          copy_producto.medida.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.nuevaCantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = productoData.precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat(\r\n        (precio_neto / (suma_impuestos + 1))\r\n      );\r\n      let iva_precio = parseFloat(\r\n        (precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`))\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        (\r\n          precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        )\r\n      );\r\n      let PUCSI =\r\n        productoData.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(\r\n        (((precio_venta - PUCSI) / PUCSI) * 100)\r\n      );\r\n\r\n      let { descuento_activo, descuento } = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          precio_con_descuento.toFixed(2)\r\n        );\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      }\r\n\r\n      copy_element_presentacion.medida.precio_unidad.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.utilidad = parseFloat(utilidad.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    } else if (name === \"descuento\") {\r\n      /* if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      } */\r\n      copy_element_presentacion.medida.descuento = value;\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\r\n    setNew_medidas(copy_presentaciones);\r\n    //console.log(copy_presentaciones)\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.medida.codigo_barras = codigo_barras;\r\n    /*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  /*  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.medida.descuento_activo = value;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); \r\n  }; */\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.medida.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.medida.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              datos.medidas_registradas && !copy_producto.medida.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {!datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.medida.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.medida._id ? (\r\n          <Chip label={copy_producto.medida.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.medida.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.medida.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n\r\n      <Fragment>\r\n        <TableCell width={110}>\r\n          <Input\r\n            inputRef={textfield}\r\n            inputMode=\"numeric\"\r\n            type=\"number\"\r\n            onChange={(e) => obtenerDatos(e)}\r\n            disabled={disabledInput}\r\n            value={copy_producto.medida.precio}\r\n            name=\"precio\"\r\n          />\r\n        </TableCell>\r\n        {/*  <TableCell>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.descuento}\r\n                type=\"tel\"\r\n                name=\"descuento\"\r\n              />\r\n            </TableCell> */}\r\n        <TableCell padding=\"checkbox\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            disabled={disabledInput}\r\n            value={copy_producto.nuevaCantidad}\r\n            type=\"tel\"\r\n            name=\"nuevaCantidad\"\r\n          />\r\n        </TableCell>\r\n      </Fragment>\r\n\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip, Slide } from \"@material-ui/core\";\r\n\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentacionesNotOrigen from \"./TablePresentacionesNotOrigen\";\r\n\r\nimport CrearColorProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  producto,\r\n  new_medidas,\r\n  setNew_medidas,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n\r\n  \r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  /* const medidas =\r\n    producto.datos_generales.tipo_producto === \"ROPA\" ? [...obtenerConsultasProducto.tallas] : [...obtenerConsultasProducto.calzados]; */\r\n\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  //console.log(data.obtenerConsultasProducto)\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n\r\n    let copy_presentaciones = [...new_medidas];\r\n\r\n    //const copy_presentaciones = [];\r\n    /* Queries */\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      //console.log('obtenerColoresSeleccinados', element)\r\n      if (element.medida.color._id) colors.push(element.medida.color);\r\n      if (element.medida.medida._id) medidas.push(element.medida.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n    //console.log('colores_existentes', colores_existentes, 'medidas_existentes', medidas_existentes)\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [new_medidas, setColoresSeleccionados, setMedidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Box alignContent=\"center\" m={5}>\r\n        <Grid container spacing={4}>\r\n          {/*  {!datos.medidas_registradas ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\">\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    \r\n                    {presentaciones.length > 0  ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n            \r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>\r\n                  {producto.datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  tipo_producto={producto.datos_generales.tipo_producto}\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              {producto.datos_generales.tipo_producto === \"ROPA\" ? (\r\n                obtenerConsultasProducto.tallas !== undefined ? (\r\n                  <Grid container>\r\n                    {obtenerConsultasProducto.tallas.map((talla, index) => (\r\n                      <RenderTallas\r\n                        producto={producto}\r\n                        key={index}\r\n                        talla={talla}\r\n                        coloresSeleccionados={coloresSeleccionados}\r\n                        medidasSeleccionadas={medidasSeleccionadas}\r\n                        setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                        datos={new_medidas}\r\n                        setNew_medidas={setNew_medidas}\r\n                      />\r\n                    ))}\r\n                  </Grid>\r\n                ) : (\r\n                  <div />\r\n                )\r\n              ) : obtenerConsultasProducto.calzados !== undefined ? (\r\n                <Grid container>\r\n                  {obtenerConsultasProducto.calzados.map((talla, index) => (\r\n                    <RenderTallas\r\n                      producto={producto}\r\n                      key={index}\r\n                      talla={talla}\r\n                      coloresSeleccionados={coloresSeleccionados}\r\n                      medidasSeleccionadas={medidasSeleccionadas}\r\n                      setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                      datos={new_medidas}\r\n                      setNew_medidas={setNew_medidas}\r\n                    />\r\n                  ))}\r\n                </Grid>\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              {obtenerConsultasProducto.colores !== undefined ? (\r\n                <Grid container>\r\n                  {obtenerConsultasProducto.colores.map((color, index) => (\r\n                    <Colores\r\n                      producto={producto}\r\n                      key={index}\r\n                      color={color}\r\n                      coloresSeleccionados={coloresSeleccionados}\r\n                      setColoresSeleccionados={setColoresSeleccionados}\r\n                      medidasSeleccionadas={medidasSeleccionadas}\r\n                      datos={new_medidas}\r\n                      setNew_medidas={setNew_medidas}\r\n                    />\r\n                  ))}\r\n                </Grid>\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} />\r\n        <TablaPresentacionesNotOrigen\r\n          productoData={producto}\r\n          datos={new_medidas}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n          setNew_medidas={setNew_medidas}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  producto,\r\n  talla,\r\n  coloresSeleccionados,\r\n  setMedidasSeleccionadas,\r\n  medidasSeleccionadas,\r\n  setNew_medidas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /*  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext); */\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    if (datos) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [datos, seleccionarMedidas]);\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n    //console.log('handleAddTallas', datos)\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          /*     presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    //const array_medidad_finales = [];\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          medida: {\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            //precios: producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          },\r\n\r\n          nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            },\r\n\r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial:\r\n                array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: medidas_seleccionadas_temp[k],\r\n              color: array_medidad_finales[i].medida.color,\r\n              //precios:producto.precios,\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            //console.log('YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL' , array_medidad_finales, producto_medida, producto_color)\r\n            presentacion_temp.push({\r\n              medida: {\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                //precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta:\r\n                    producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                  ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                },\r\n              },\r\n              nuevaCantidad: 0,\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: objeto_presentaciones_final.medida.existencia,\r\n              codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n              nombre_comercial:\r\n                objeto_presentaciones_final.medida.nombre_comercial,\r\n              medida: objeto_presentaciones_final.medida.medida,\r\n              color: objeto_presentaciones_final.medida.color,\r\n              //precios:producto.precios,\r\n              precio: objeto_presentaciones_final.medida.precio,\r\n              cantidad: objeto_presentaciones_final.medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  producto,\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n  setNew_medidas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n\r\n  useEffect(() => {\r\n    if (producto) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [producto, seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          /*  new_medidas.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          medida: {\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            //precios:producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          },\r\n\r\n          nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            },\r\n\r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial:\r\n                array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: array_medidad_finales[i].medida.medida,\r\n              color: coloresSeleccionados[k],\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n\r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              medida: {\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                // precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                //nuevo: true\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta:\r\n                    producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                  ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                },\r\n              },\r\n\r\n              nuevaCantidad: 0,\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: objeto_presentaciones_final.medida.existencia,\r\n              codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n              nombre_comercial:\r\n                objeto_presentaciones_final.medida.nombre_comercial,\r\n              medida: objeto_presentaciones_final.medida.medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              // precios:producto.precios,\r\n              precio: objeto_presentaciones_final.medida.precio,\r\n              cantidad: objeto_presentaciones_final.medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: objeto_presentaciones_final.medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected, color)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useContext,  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {  Chip,  Tooltip, Zoom , TextField} from '@material-ui/core';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\n/* const compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n}; */\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignSelf:'center',\r\n\t\twidth:'90%',\r\n\t\tpaddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n\t\t\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\t\r\n\t\tminWidth: '100%',\r\n\t\tmaxWidth: '100%',\r\n\t\t\r\n\t},\r\n\t\r\n\ttableRow: {\r\n    \r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n    cell:{\r\n       align:'center'     \r\n    },\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\n\r\n/* function stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nexport default function TablaPresentaciones({ producto, setOnUpdate, onUpdate, new_medidas, setNew_medidas }) {\r\n  const classes = useStyles();\r\n \r\n \r\n\r\n/*  \r\nconst handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n}; */\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:400}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                                <TableCell >Cantidad a traspasar</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tidProducto={producto._id}\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tmedida={item}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t\tnew_medidas={new_medidas}\r\n\t\t\t\t\t\t\t\t\t\tsetNew_medidas={setNew_medidas}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst RenderPresentacionesRows = ({ medida, index, setOnUpdate, onUpdate,new_medidas, setNew_medidas, idProducto}) => {\r\n\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst [ cantidad, setCantidad ] = useState(0);\r\n\tconst [ cantidadAnt, setCantidadAnt ] = useState(0);\r\n\tconst copy_medida = { ...medida };\r\n\tconst {productosTras} = useContext(TraspasosAlmacenContext);\r\n\t//const [productInTras, setProductInTras] =  useState(null);\r\n\t//let productInTras = null;\r\n\t//let productInTras = productosTras.find(element => element.product_selecteded._id === idProducto);\r\n\t//const productosTrasContext = productosTras;\r\n \r\n\tuseEffect(() => {\r\n\t\tproductosTras.forEach(producto => {\r\n\t\t\t//console.log(\"SELECTMEDIDAS\",producto)\r\n\r\n\t\tif(producto.product_selected._id === idProducto){\r\n\t\t\tlet new_medidasCopia = [];\r\n\t\t\tlet element = null;\r\n\t\t\r\n\t\t\tfor (const med in producto.new_medidas) {\r\n\t\t\t\tif (Object.hasOwnProperty.call(producto.new_medidas, med)) {\r\n\t\t\t\t\telement = producto.new_medidas[med];\r\n\t\t\t\t\tnew_medidasCopia.push(element)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(medida._id === element.medida._id){\r\n\t\t\t\t\t\tsetCantidad( element.nuevaCantidad);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetNew_medidas(producto.new_medidas);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\treturn () => {\r\n\t\t\t<div/>\r\n\t\t}\r\n\t}, [productosTras])\r\n\t\r\n\r\n\r\n\t\r\n\r\n\t/* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\t\r\n\tconst obtenerDatos = (value) => {\r\n\t\tlet cant = (cantidadAnt > 0) ? parseInt(value - cantidadAnt)   : value;\r\n\t\t//console.log(\"CANT\",cantidad)\r\n\r\n\t\tif(cant <= medida.cantidad){\r\n\t\t\tsetCantidad(value);\r\n\t\t\r\n\t\t\tsetNew_medidas({...new_medidas, [index] : {medida:medida, nuevaCantidad: parseInt(cant)}})\r\n\t\t}\r\n\t\t/* \r\n\t\tconst unidades = {cantidad:} \r\n\t\tcopy_producto.push() */\r\n\t\t//Tengo que obtener los datos que se van a enviar se debe agregar un elemento al array \r\n\t\t\r\n\t\t//setPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<TableRow  selected={!disabledInput} className={classes.tableRow} >\r\n\t\t\t<TableCell >\r\n\t\t\t\t{copy_medida.medida._id ? <Chip label={copy_medida.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell  style={{width:'20%'}}>\r\n\t\t\t\t{copy_medida.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_medida.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_medida.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t\r\n\t\t\r\n\t\t\t<TableCell className={classes.cell}  style={{width:'25%'}}>\r\n\t\t\t\t{medida.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t \r\n\t\t\t<TableCell  style={{width:'25%'}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tInputProps={{ inputProps: { min: 0 } }}\r\n\t\t\t\t\tinputMode=\"numeric\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tvalue={cantidad}\r\n\t\t\t\t\tonChange={(value) => obtenerDatos(value.target.value)}\r\n\t\t\t\t\tname=\"nuevaCantidad\"\r\n\t\t\t\t/>\r\n            </TableCell>    \r\n\t\t</TableRow>\r\n\t);\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Grid,Box, TextField } from '@material-ui/core';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TableSortLabel} from '@material-ui/core';\r\nimport {Toolbar, Typography, Paper, IconButton, Tooltip, Dialog, Checkbox ,Slide, Button, DialogTitle, DialogActions} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport TallasColoresTraspasos from './TallasColoresTraspasos';\r\nimport TableSelectMedidas from './TableSelectMedidas';\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_CONSULTAS } from \"../../gql/Catalogos/productos\";\r\n\r\n// function createData(name, cantidad, precio) {\r\n//   return { name, cantidad, precio };\r\n// }\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\n/* function getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nconst headCells = (add) => {\r\n\r\nlet hC = (add) ? \r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n\r\n  ]\r\n  :\r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n    { id: 'solo', numeric: true, disablePadding: false, label: ' ' },\r\n  ]\r\n\r\n  return hC;\r\n}\r\n;\r\nconst getUnidadMax  = (cantidad_existente_maxima,unidadMaxima) => {\r\n  //console.log('getCantidad',cantidad_nueva, cantidad_medida, accion)\r\n  const UNIDAD_MAXIMA = {\r\n    'Caja' :  'Cantidad existente en cajas: ' + cantidad_existente_maxima,\r\n    'Costal' : 'Cantidad existente en costales: ' + cantidad_existente_maxima,\r\n  }  \r\n  return UNIDAD_MAXIMA[unidadMaxima];\r\n}\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { classes,  order, orderBy, onRequestSort } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n  const headCellsNames =  headCells(props.add);\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n     \r\n        {headCellsNames.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align='left'\r\n            // padding={headCell.disablePadding ? 'none' : 'normal'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // product_selected: PropTypes.object.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n    maxWidth:650\r\n  },\r\n  input:{\r\n    width:180\r\n  }\r\n  ,\r\n  inputCantidad:{\r\n    width:120,\r\n    height:10\r\n  },\r\n  inputCantidadTable:{\r\n    width:'20%',\r\n    height:10\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          \r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    fontSize:16,\r\n    flex: '1',\r\n     display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n}));\r\n\r\nconst DialogTallas = (props) => {\r\n\r\n  const [new_medidas, setNew_medidas] = useState([]);\r\n  const {setProductosTras, productosTras} = useContext(TraspasosAlmacenContext);\r\n  \r\n\r\n  \r\n  const setProd = () =>{\r\n    let newMedidasCopy = new_medidas;\r\n    let cantidad_total = 0;\r\n    \r\n    \r\n\r\n     try {\r\n     \r\n       let prodSelect = null;\r\n    prodSelect = (props.almacenOrigen !== null) ? {\r\n      _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      medidas_producto: props.product_selected.medidas_producto,\r\n      inventario_general: props.product_selected.inventario_general,\r\n      unidades_de_venta: props.product_selected.unidades_de_venta,\r\n      precios: props.product_selected.precios,\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario\r\n    }\r\n    :\r\n\r\n    {\r\n       _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      precios: props.product_selected.precios,\r\n       medidas_producto: [],\r\n      inventario_general: [{unidad_maxima:''}],\r\n      unidades_de_venta: [],\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario \r\n    }; \r\n    let existe = false;\r\n    let copyProductosTras = productosTras;\r\n    let medidasTo =[];\r\n    //Count all new_medidas from array\r\n\r\n    for (let newMed in newMedidasCopy){ \r\n        cantidad_total +=  newMedidasCopy[newMed].nuevaCantidad;\r\n        //cantidad_total += newMedidasCopy[newMed];\r\n      medidasTo.push(newMedidasCopy[newMed])\r\n    } \r\n\r\n    if(cantidad_total > 0){\r\n    \r\n      if(copyProductosTras.length){//Check have data context\r\n        copyProductosTras.forEach(element => {\r\n          if(element.product_selected._id === props.product_selected._id){\r\n            existe = true;\r\n            ///VA A SUMAR EN LAS MEDIDAS LAS CANTIDADES\r\n            element.new_medidas = medidasTo;\r\n            element.cantidad_total = cantidad_total;\r\n            return;\r\n          }\r\n        });\r\n    \r\n        if(!existe){\r\n          //console.log(\"NO está este producto\", element.product_selected._id , props.product_selected._id );\r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      \r\n        } \r\n      }else{ \r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      }\r\n         \r\n      setProductosTras([...copyProductosTras])  \r\n      setNew_medidas([]);\r\n      close();\r\n    }  \r\n     } catch (error) {\r\n       //console.log('MANDH',error)\r\n     }\r\n    \r\n  }\r\n\r\n  const close= () => {\r\n    try {\r\n      props.setOpenTallas();\r\n      props.setproduct_selected(undefined)\r\n    } catch (error) {\r\n      //console.log(error)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    let new_medidasCopia = [];\r\n\r\n    productosTras.forEach(prod => {\r\n\t\t\r\n\t\tif(prod.product_selected._id ===  props.product_selected._id){\r\n\t\t\tlet element = null;\r\n        for (const med in prod.new_medidas) {\r\n          if (Object.hasOwnProperty.call(prod.new_medidas, med)) {\r\n            element = prod.new_medidas[med];\r\n            new_medidasCopia.push(element)\r\n          }\r\n        }\r\n      }\r\n    })  \r\n    setNew_medidas(new_medidasCopia);\r\n  }, [productosTras, props.product_selected._id])\r\n     \r\n\r\n  return(\r\n    <Dialog open={props.openTallas} TransitionComponent={Transition} fullWidth maxWidth={\"md\"} >\r\n        <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => close()} size=\"large\">\r\n                  <CloseIcon />\r\n                </Button>\r\n          </Box>\r\n      {\r\n        (props.almacenOrigen === null) ? \r\n          <div>\r\n            <TallasColoresTraspasos \r\n              obtenerConsultasProducto={props.obtenerConsultasProducto}\r\n              refetch={props.refetch}\r\n              producto={props.product_selected}\r\n              new_medidas={new_medidas} \r\n              setNew_medidas={setNew_medidas}\r\n            />\r\n          </div>\r\n        :\r\n        <div>\r\n          <TableSelectMedidas producto = {props.product_selected} new_medidas={new_medidas} setNew_medidas={setNew_medidas} add={props.add} />\r\n        </div> \r\n      }    \r\n      <Box display=\"flex\" justifyContent=\"flex-end\" m={1} mr={5}>\r\n        <Button  variant=\"contained\" color=\"primary\"style={{width:\"20%\"}} onClick={setProd} >\r\n          AGREGAR \r\n        </Button>\r\n      </Box>   \r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const [cantidadTo, setCantidadTo] = useState('');\r\n  const [openEnd, setOpenEnd] = useState(false);\r\n \r\n \r\n  const { product_selected, setproduct_selected, tipoPieza, update } = props;\r\n   const {\r\n        setProductosTras,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n\r\n\r\nconst setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    props.setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === product_selected._id);\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n    if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(product_selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }else{\r\n      //Cuando sea el caso que no hay almacen de origen cambiar los datos que van a ir vacíos\r\n      //\r\n     \r\n      //console.log(props.product_selected.precios)\r\n      let prodSelect = {\r\n        _id: props.product_selected._id,\r\n        datos_generales:  props.product_selected.datos_generales,\r\n        inventario_general: props.product_selected.inventario_general,\r\n        unidades_de_venta: props.product_selected.unidades_de_venta,\r\n        medidas_producto: props.product_selected.medidas_producto,\r\n      \r\n        precios: props.product_selected.precios,\r\n        empresa:props.product_selected.empresa,\r\n        sucursal:props.product_selected.sucursal,\r\n        usuario: props.product_selected.usuario\r\n      } \r\n    //VERIFICA CANTIDAD MAXIMA\r\n    if(product_selected.inventario_general !== undefined){\r\n      if(cantidad_total <=  product_selected.inventario_general[0].cantidad_existente){\r\n      \r\n        let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n      }\r\n      else{\r\n        props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n      }\r\n    }else{\r\n       let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n    }\r\n    }\r\n    setproduct_selected(undefined);\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\nconst deletesItems =() =>{\r\n  try {\r\n  \r\n    setproduct_selected(undefined)\r\n    //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n    setProductosTras([]);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\n\r\nuseEffect(() => {\r\n  try {\r\n    if(props.add){\r\n      props.setOpenTallas(true)\r\n    }\r\n    setCantidadTo(props.cant)\r\n    \r\n  } catch (error) {\r\n    \r\n  }\r\n  \r\n}, [product_selected])   \r\n  \r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        setValueToTrans(parseFloat(e.target.value))\r\n      }\r\n    } catch (error) {\r\n      \r\n    }\r\n    \r\n  };        \r\n  function onlyNumbers(value){\r\n   \r\n    props.setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = (value !== '') ? parseFloat(value) : 0;\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          \r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              setCantidadTo((intValue !== 0) ? intValue : '');\r\n              //console.log(intValue)\r\n              return;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= product_selected.inventario_general[0].cantidad_existente){\r\n                 setCantidadTo((intValue !== 0) ? intValue : '');\r\n                return;\r\n              }\r\n              else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n            }\r\n          }else{\r\n          \r\n            setCantidadTo(intValue);\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n\r\n\r\n\r\n  const TipoPiezaComponent = () => {\r\n     try {\r\n     \r\n      const TIPO_PIEZA = {\r\n        'Pz' :  {unidad_maxima: null, unidad_minima: 'Pz' },\r\n        'Caja' : {unidad_maxima: 'Caja', unidad_minima: 'Pz' },\r\n        'Kg' : {unidad_maxima: null, unidad_minima: 'Kg' },\r\n        'Costal' : {unidad_maxima: 'Costal', unidad_minima: 'Kg' },\r\n        'Lt' : {unidad_maxima: null, unidad_minima: 'Lt' }\r\n      }\r\n      \r\n\r\n    \r\n      return (\r\n        <Box flexDirection={'row'} display=\"flex\">\r\n          <Box flexDirection={'row'}  >\r\n          <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima === null} />\r\n            <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_minima}</Typography> \r\n          </Box>\r\n    \r\n          \r\n        { \r\n          (TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima !== null) ? \r\n            <Box flexDirection={'row'} >\r\n              <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n              <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima} </Typography> \r\n            </Box>\r\n          :\r\n            <div/>\r\n          \r\n          }\r\n      \r\n        </Box>\r\n      );\r\n     } catch (error) {\r\n       \r\n     }\r\n    \r\n    \r\n  }\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: product_selected !== undefined && props.add,\r\n      })}\r\n    \r\n    >\r\n    <Grid container>\r\n      {product_selected !== undefined  && props.add ? (\r\n        <Box style={{width:'100%'}}>\r\n         \r\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle2\"  >\r\n            {product_selected.datos_generales.nombre_comercial} \r\n          </Typography>\r\n        </Box>\r\n      ) : (\r\n        <Box style={{width:'100%'}} flexDirection={'row'} display=\"flex\">\r\n          <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n            {props.title}\r\n          </Typography>\r\n          {\r\n            (productosTras.length > 0 && !props.add) ? \r\n            <Tooltip title=\"Eliminar todos\">\r\n              <IconButton aria-label=\"delete\" onClick={() => setOpenEnd(true)} >\r\n                  <DeleteIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            :\r\n            <div/>\r\n          }\r\n          \r\n         </Box>  \r\n      )}\r\n\r\n      {(product_selected !== undefined )? (\r\n      <Box > \r\n        {\r\n          (props.error.error) ?\r\n          <Typography color=\"inherit\">{props.error.mensaje}</Typography>\r\n          :\r\n          <div/>\r\n        } \r\n            {\r\n            (props.add ) ?\r\n                (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                  <Grid container  justifyContent=\"space-evenly\" ml={1}>\r\n                \r\n                      {\r\n                        (props.almacenOrigen === null)?\r\n                        \r\n                        <TipoPiezaComponent />\r\n                        :\r\n                        <Box flexDirection={'row'} display=\"flex\">\r\n                          <Box flexDirection={'row'}  >\r\n                            <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={props.product_selected.inventario_general[0].cantidad_existente_maxima === null} />\r\n                            <Typography color=\"primary\" style={{marginLeft:10}}>{props.product_selected.inventario_general[0].unidad_inventario}</Typography> \r\n                          </Box>\r\n                          {\r\n                            (props.product_selected.inventario_general[0].unidad_maxima !== null ) ?\r\n                              <Box flexDirection={'row'} >\r\n                                <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n                                <Typography color=\"primary\" style={{marginLeft:10}}>{\"\" + props.product_selected.inventario_general[0].unidad_maxima} </Typography> \r\n                              </Box>\r\n                            :\r\n                              <div/>\r\n                          }\r\n                        </Box>\r\n                      }\r\n                        \r\n                      <Box width=\"180px\" ml={2}>\r\n                    \r\n                        <Typography color=\"primary\">Cantidad</Typography>\r\n                        <TextField\r\n                            className={classes.inputCantidad}\r\n                            \r\n                            size=\"small\"\r\n                            name=\"cantidad\"\r\n                            variant=\"outlined\"\r\n                            type=\"number\"\r\n                            InputProps={{ inputProps: { min: 0 } }}\r\n                            value={cantidadTo}\r\n    \r\n                            onKeyPress={pressEnter}\r\n                            onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                        />\r\n                      \r\n                        <Tooltip title=\"Agregar\">\r\n                            <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                      {\r\n                        (props.almacenOrigen) ? \r\n                          <Box  width=\"150px\" >\r\n                            {\r\n                              (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ? \r\n                                <Typography color=\"primary\" style={{flexWrap: \"wrap\"}}>\r\n                                  {getUnidadMax(props.product_selected.inventario_general[0].cantidad_existente_maxima,props.product_selected.inventario_general[0].unidad_maxima)}\r\n                                  </Typography>\r\n                              :\r\n                              <div/>\r\n                            }\r\n                          </Box>\r\n                        :\r\n                        <div/>\r\n                      }\r\n                    </Grid>\r\n                   \r\n                  :    \r\n                  <div>\r\n                    <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto} refetch={props.refetch}/> \r\n                  </div> \r\n                :\r\n                <div>\r\n                   <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto} refetch={props.refetch}/> \r\n                </div>\r\n                /* <Grid width={'100%'} container>\r\n                  { (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                    <div>\r\n                     \r\n                      <Typography color=\"primary\">Cantidad</Typography>\r\n                      <TextField\r\n                          className={classes.inputCantidad}\r\n                          size=\"small\"\r\n                          name=\"cantidad\"\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          InputProps={{ inputProps: { min: 0 } }}\r\n                          value={cantidadTo}\r\n                          onChange={(value) => onlyNumbers(value.target.value)}\r\n                          \r\n                      />\r\n                    \r\n                      <Tooltip title=\"Agregar\">\r\n                          <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                              <AddIcon />\r\n                          </IconButton>\r\n                      </Tooltip>\r\n                    </div>\r\n                    :\r\n                    \r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                     \r\n                     \r\n                  }\r\n                  <Box mt={3} >\r\n                  { (product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                     <Tooltip title=\"Editar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => editItem()} >\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Tooltip> \r\n                    :\r\n                    <div/>\r\n                    }\r\n                    <Tooltip title=\"Eliminar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => deleteItem()} >\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                  </Box> \r\n                </Grid> */\r\n            }\r\n                \r\n         \r\n        </Box>\r\n      ) : (\r\n        <div/>\r\n      )}\r\n      </Grid>\r\n      <Dialog open={openEnd} onClose={() => setOpenEnd(false)}>\r\n            <DialogTitle>{'¿Está seguro de realizar esta acción?'}</DialogTitle>\r\n            <DialogActions>\r\n                <Button onClick={() => setOpenEnd(false)} color=\"primary\">\r\n                    Cancelar\r\n                </Button>\r\n                <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => deletesItems()}>\r\n                    Eliminar\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//   numSelected: PropTypes.number.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n   \r\n    marginLeft:theme.spacing(1),\r\n    marginRight:theme.spacing(1),\r\n\r\n\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 600,\r\n    maxWidth:600\r\n   \r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [ openTallas, setOpenTallas] = useState(false);\r\n  const [cant, setCant] = useState(0);\r\n   const [error, setError] = useState({error:false, mensaje:''});\r\n  //const [data, setData] = useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n  const [tipoPieza, setTipoPieza] = useState({piezas: true, cajas: false});\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\r\n\r\n  const update = () => {\r\n   setTipoPieza({...tipoPieza, piezas: !tipoPieza.piezas, cajas: !tipoPieza.cajas})\r\n }\r\n \r\n  const {\r\n        productosTras, productosTo,   productosEmpTo, setProductosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n  const obtenerConsultasProducto = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { \r\n      empresa: sesion.empresa._id, \r\n      sucursal: sesion.sucursal._id  },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n\r\n  \r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      //const newSelecteds = data.map((n) => n.name);\r\n      setSelected(event.target.checked);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n  const data = (!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo  ; \r\n\r\n  const handleClick = (event, elemento, cant) => {\r\n  setError({error:false, mensaje:''})\r\n    if(elemento.datos_generales.tipo_producto === 'OTROS'){\r\n      let haveCant= 0;\r\n      productosTras.forEach(producto => {\r\n        if(producto.product_selected._id === elemento._id){\r\n      \t  \r\n          haveCant = producto.cantidad_total;\t\t\r\n        }\r\n      });\r\n      \r\n        setCant(props.add ? haveCant : cant)\r\n    }\r\n\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === elemento._id;\r\n     \r\n      // let newSelected = [];\r\n      if(selectedIndex){\r\n          setSelected(undefined);\r\n      }else{\r\n          setSelected(elemento);\r\n      } \r\n    }else{\r\n      //console.log(elemento)\r\n      setSelected(elemento);\r\n    }\r\n   \r\n    \r\n  };\r\n    \r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  const deleteItem =(row) =>{\r\n    try {\r\n      \r\n      let prodSet =  [] ;\r\n      \r\n    \r\n      if(productosTras.length){\r\n        prodSet = productosTras;\r\n      }\r\n      \r\n    \r\n      //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n      setProductosTras(prodSet.filter(item => item.product_selected._id !== row._id));\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n  const setValueToTrans =(cantidad_total, rowSelected) =>{\r\n  try {\r\n    //setError({error:false, mensaje:''})\r\n   \r\n    \r\n   let element = productosTras.find(element => element.product_selected._id === rowSelected._id);\r\n   if(cantidad_total === 0 || cantidad_total === '') {element.cantidad_total = 0;return;};\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n  if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total + element.cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(rowSelected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\n  \r\n  function onlyNumbers(value, rowSelected){\r\n   \r\n    \r\n   setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      if(value === '') {setValueToTrans('', rowSelected);return;}\r\n      const intValue = parseFloat(value);\r\n\r\n      try {\r\n         \r\n        if(props.almacenOrigen !== null){\r\n            if( !tipoPieza.piezas  ){\r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n                setValueToTrans(intValue, rowSelected)\r\n                //console.log(intValue)\r\n                return;\r\n              } \r\n            }else{\r\n            \r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente){\r\n                \r\n                setValueToTrans(intValue, rowSelected)\r\n                return;\r\n              }\r\n            }\r\n           \r\n        }else{\r\n           \r\n           \r\n            setValueToTrans(intValue, rowSelected)\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    \r\n  }\r\n  const isSelected = (id) => {\r\n    //return selected.indexOf(name) !== -1;\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === id;\r\n   \r\n      // let newSelected = [];\r\n      if(!selectedIndex){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      } \r\n    }else{\r\n      return false;\r\n    }\r\n    \r\n  } \r\n\r\n  const editItem =(prod_sel) =>{\r\n  try {\r\n  \r\n  \r\n    if(prod_sel.datos_generales.tipo_producto !== 'OTROS') {\r\n      setOpenTallas(true);\r\n      obtenerConsultasProducto.refetch();\r\n      //console.log(props)\r\n    }\r\n   \r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n       \r\n        <EnhancedTableToolbar \r\n          product_selected={selected} \r\n          setproduct_selected={setSelected} \r\n          openTallas={openTallas}\r\n          setOpenTallas={setOpenTallas}\r\n          error={error}\r\n          setError={setError}\r\n          title={props.title} \r\n          add={props.add} \r\n          almacenOrigen={props.almacenOrigen} \r\n          productosTras ={productosTras} \r\n          tipoPieza={tipoPieza} \r\n          update={update} \r\n          cant={cant} \r\n          obtenerConsultasProducto={(obtenerConsultasProducto.data) ? obtenerConsultasProducto.data.obtenerConsultasProducto :[]}\r\n          refetch={( obtenerConsultasProducto.refetch ) ? obtenerConsultasProducto.refetch : null}  />\r\n        <TableContainer style={{height:'50vh'}}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={'small'}\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              product_selected={selected}\r\n              add = {props.add}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              handleSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {data\r\n                .map((row, index) => {\r\n                \r\n                  const isItemSelected = isSelected((props.add === true) ? row._id: row.product_selected._id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                \r\n                  if(props.add){\r\n                    \r\n                    if(props.almacenOrigen) {\r\n                 \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={(props.add === true) ? row._id : row.product_selected._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        \r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> {row.inventario_general[0].cantidad_existente }  {row.inventario_general[0].unidad_inventario} </TableCell>\r\n\r\n                      </TableRow>\r\n                    );\r\n                    }else{\r\n                      return(\r\n                        <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> N/A</TableCell>\r\n                      </TableRow>\r\n                      );\r\n                    }\r\n                  }else{\r\n                    \r\n                    return(\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, row.product_selected, row.cantidad_total)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={(props.add === true) ? row._id : row.product_selected._id}\r\n                      selected={isItemSelected}\r\n                      \r\n                    >\r\n                      <TableCell  id={labelId} component=\"th\" width={100}>\r\n                        {(row.product_selected.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.product_selected.datos_generales.codigo_barras}\r\n                      </TableCell>\r\n                      <TableCell id={labelId}  width={200}>\r\n                        {row.product_selected.datos_generales.nombre_comercial}\r\n                      </TableCell>\r\n                      <TableCell align=\"left\" > {row.product_selected.datos_generales.tipo_producto}</TableCell>\r\n                      {\r\n                        (row.product_selected.datos_generales.tipo_producto  === \"OTROS\" ) ? \r\n                          <TableCell align=\"left\"  width={20} > \r\n                            <TextField\r\n                              size=\"small\"\r\n                              name=\"cantidad\"\r\n                              variant=\"outlined\"\r\n                              type=\"number\"\r\n                              InputProps={{ inputProps: { min: 0 } }}\r\n                              value={row.cantidad_total} \r\n                              onChange={(value) => onlyNumbers(value.target.value, row.product_selected)}\r\n                            \r\n                            />\r\n                          </TableCell> \r\n                          :\r\n                          <TableCell align=\"left\"> {row.cantidad_total}</TableCell> \r\n\r\n                      }\r\n\r\n                      <TableCell align=\"left\" width={10}>\r\n                        <Box flexDirection={'row'} display=\"flex\" style={{width:75}}>\r\n                          { (row.product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                          <Tooltip title=\"Editar\">\r\n                              <IconButton aria-label=\"edit\" onClick={() => editItem(row.product_selected)} >\r\n                                  <EditIcon />\r\n                              </IconButton>\r\n                          </Tooltip> \r\n                          :\r\n                          <div/>\r\n                          } \r\n                          <Tooltip title=\"Eliminar\">\r\n                            <IconButton aria-label=\"delete\" onClick={() => deleteItem(row.product_selected)} >\r\n                                <DeleteIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </Box>\r\n                      </TableCell> \r\n                    </TableRow>\r\n                    )\r\n                  }\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      {/*   <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          labelRowsPerPage={\"\"}\r\n          // onRowsPerPageChange={handleChangeRowsPerPage}\r\n        /> */}\r\n       \r\n      </Paper>\r\n      \r\n    </div>\r\n  );\r\n}","import React, { forwardRef, useEffect, useContext, useState,useCallback } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Slide,\r\n         Button, Box, Dialog, Grid, DialogActions, TextField,Divider,\r\n         InputLabel, Select, Input, MenuItem, FormControl, useTheme, OutlinedInput, InputAdornment,\r\n         Stepper, Step, StepLabel, DialogTitle } from '@material-ui/core';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useDebounce } from 'use-debounce';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport {Close} from '@material-ui/icons';\r\n//import ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { FcAdvance } from 'react-icons/fc';\r\nimport almacenIcon from '../../../../icons/almacen.svg';\r\nimport TableSelectProducts from '../../../../components/Traspasos/TableSelectProducts';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN} from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { OBTENER_ALMACENES, REALIZAR_TRASPASO, OBTENER_CATEGORIAS, OBTENER_PRODUCTOS_EMPRESA} from '../../../../gql/Almacenes/Almacen';\r\n\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\n\r\n\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 50\r\n\t},\r\n    imagen: {\r\n        width: 50\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    subtitle: {\r\n\t\tmarginLeft: '10px',\r\n\t\twidth:'50%',\r\n     \r\n\t},\r\n    boxUpData:{\r\n        height: 80,\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n    selected2:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    selected:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    input:{\r\n\t\twidth:'100%'\t\r\n\t},\r\n    inputBox:{\r\n\t\tmargin:20,\r\n        marginTop:5,\r\n        marginBottom:10,\r\n       \r\n\t},\r\n    button:{\r\n\t\tmargin: theme.spacing(3),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(0)\r\n\t},\r\n    boxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n        minHeight: 20,\r\n      \r\n    },\r\n    centerControl:{\r\n        marginTop:10,\r\n      \r\n    },\r\n  \r\n}));\r\n\r\n\r\nfunction getStyles(almacen, almacenName, theme) {\r\n  return {\r\n    fontWeight:\r\n      almacenName.indexOf(almacen) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\n\r\nconst transportes = [\r\n    'Barco',\r\n    'Moto',\r\n    'Carro',\r\n    'Camioneta'\r\n];\r\n\r\n/* function createData(name, cantidad, precio, unidad) {\r\n    return { name, cantidad, precio, unidad };\r\n}  */\r\n\r\n\r\nconst steps = ['Datos traspaso', 'Seleccionar productos'];\r\n\r\nexport default function Traspasos(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const {\r\n        setProductos,\r\n        setProductosTras,\r\n        setProductosTo,\r\n        setProductosEmpTo,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ open, setOpen ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n    const [ filtro, setFiltro ] = useState('');\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\r\n    const [ haveConcepto, setHaveConcepto ] = useState(false);\r\n    const [ conceptoTraspaso, setConceptoTraspaso ] = useState(null);\r\n    const [ isAlmacenOrigen, setIsAlmacenOrigen ] = useState(false);\r\n    const [ isAlmacenDestino, setIsAlmacenDestino ] = useState(false);\r\n\r\n    const [ almacenOrigen, setAlmacenOrigen ] = useState(null);\r\n    const [ almacenDestino, setAlmacenDestino ] = useState(null);\r\n    const [almacenesDestino, setAlmacenesDestino] =useState([])\r\n    const [ transporte, setTransporte ] = useState('');\r\n    const [ placas, setPlacas ] = useState('');\r\n    const [ nombreQuien, setNombreQuien ] = useState('');\r\n  \r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [skipped, setSkipped] = useState(new Set());\r\n    const [openEnd, setOpenEnd] = useState(false);\r\n \r\n    const [ CrearTraspaso ] = useMutation(REALIZAR_TRASPASO); \r\n\r\n    let conceptos= [];\r\n    let almacenes = [];\r\n    \r\n    \r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t */\r\n\tconst dataConceptos = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t},\r\n         fetchPolicy: \"network-only\"\r\n\t});\r\n   \r\n    const categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n        fetchPolicy: \"network-only\"\r\n\t});\r\n\r\n    const productosQuery = useQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id, \r\n          sucursal: sesion.sucursal._id,\r\n          filtro: value,\r\n          almacen: (almacenOrigen ) ? almacenOrigen._id : \"\",\r\n          existencias: true\r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n\r\n    const productosEmpresaQuery = useQuery(\r\n    OBTENER_PRODUCTOS_EMPRESA,\r\n    {\r\n        variables: { \r\n          empresa: sesion.empresa._id, \r\n          filtro: value,\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n     }\r\n  );\r\n    \r\n    /* const obtenerAlmacenes= useCallback( () =>{\r\n        try {\r\n            console.log('obtenerAlmacenes')\r\n            \r\n        } catch (error) {\r\n           console.log(error)\r\n        }   \r\n    },[]); */ \r\n\r\n    const obtenerProductosAlmacen = useCallback(async() =>{\r\n        try {\r\n           productosQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosQuery]);\r\n    \r\n   \r\n    \r\n    useEffect(() => {\r\n        if(almacenOrigen){\r\n          \r\n            setAlmacenesDestino(queryObtenerAlmacenes.data.obtenerAlmacenes.filter(element => element._id !== almacenOrigen._id));\r\n            obtenerProductosAlmacen();\r\n        }\r\n    }, [almacenOrigen ])\r\n\r\n\r\n    const obtenerProductosEmpresa = useCallback(async () =>{\r\n        try {\r\n             productosEmpresaQuery.refetch();\r\n        } catch (error) {\r\n            console.log('errorObtenerProductosEmpresa',error)\r\n        }   \r\n      },[productosEmpresaQuery]);\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n        try {\r\n            if(conceptoTraspaso!== null){\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    obtenerProductosEmpresa();\r\n                } else{\r\n                    obtenerProductosAlmacen();\r\n                }      \r\n            }\r\n        } catch (error) {\r\n            console.log('conceptoTraspaso', error)\r\n        }\r\n       \r\n    }, [conceptoTraspaso])    \r\n\r\n /*    useEffect(() => {\r\n\t\t\tdataConceptos.refetch();\r\n\t},[ dataConceptos ]);  */\r\n\r\n     useEffect(() => {\r\n        \r\n        if(conceptoTraspaso !== null){\r\n            if(conceptoTraspaso.destino === 'N/A'){\r\n                if(almacenOrigen !== null){\r\n                    setHaveConcepto(true)\r\n                }else{\r\n                     setHaveConcepto(false)\r\n                }\r\n            \r\n            }else{\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    if(almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }else{\r\n                    if(almacenOrigen !== null && almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }\r\n                \r\n            }    \r\n        }\r\n       \r\n\t},[conceptoTraspaso, almacenOrigen, almacenDestino ]); \r\n\r\n    \r\n\r\n     \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\t if(productosEmpresaQuery.data){\r\n               \r\n                //setProductos(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n                //console.log(productosEmpresaQuery.data)\r\n                setProductosEmpTo(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n            }\r\n    },[ productosEmpresaQuery.data, setProductosEmpTo ]);  \r\n\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if(productosQuery.data ){\r\n             \r\n                setProductos(productosQuery.data.obtenerProductos);\r\n                setProductosTo(productosQuery.data.obtenerProductos)\r\n                return;\r\n            }    \r\n\t\t},\r\n\t\t[ productosQuery, setProductos, setProductosTo ]\r\n\t); \r\n    \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ categoriasQuery ]\r\n\t); \r\n  \r\n\r\n   \r\n    \r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n        setProductosTras([]);\r\n        setAlmacenOrigen(null);\r\n        setAlmacenDestino(null);\r\n        setConceptoTraspaso(null);\r\n        \r\n        productosEmpresaQuery.refetch();  \r\n        productosQuery.refetch();   \r\n        dataConceptos.refetch();   \r\n        queryObtenerAlmacenes.refetch(); \r\n        handleBack();\r\n\t};\r\n\r\n     const handleChange = (event) => {\r\n       \r\n        setAlmacenOrigen(event.target.value);\r\n       /*   productosQuery.refetch({\r\n            variables: { \r\n            \r\n                almacen: event.target.value._id,\r\n                existencias: true\r\n            },\r\n        });  */\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n    const handleChangeDestino = (event) => {\r\n        //console.log(event)\r\n        setAlmacenDestino(event.target.value);\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n     const handleChangeConcepto = (event) => {\r\n        try {\r\n            \r\n            let concepto = event.target.value;  \r\n            setAlmacenesDestino([]);\r\n            almacenes = [];\r\n            setAlmacenOrigen(null); \r\n            setAlmacenDestino(null);\r\n            if(concepto.origen === 'N/A'){\r\n                setAlmacenesDestino( queryObtenerAlmacenes.data.obtenerAlmacenes)\r\n            }else{\r\n                setAlmacenesDestino([])\r\n            }\r\n          \r\n            setIsAlmacenOrigen((concepto.origen === 'N/A') ? false:true);\r\n            setIsAlmacenDestino((concepto.destino === 'N/A') ? false:true);\r\n           \r\n            setConceptoTraspaso(concepto);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    \r\n      const handleChangeTransporte = (event) => {\r\n        setTransporte(event.target.value);\r\n    };\r\n\r\n    const isStepOptional = (step) => {\r\n        return step === 1;\r\n    };\r\n\r\n    const isStepSkipped = (step) => {\r\n        return skipped.has(step);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        /* if(conceptoTraspaso === null ) {setAlert({message:'No es posible continuar sin seleccionar un concepto.', status: 'error', open: true });  return}\r\n        if( isAlmacenOrigen && almacenOrigen === null)  {setAlert({message:'No es posible continuar sin seleccionar un almacén origen.', status: 'error', open: true });  return }   \r\n        if(isAlmacenDestino && almacenDestino === null) { setAlert({message:'No es posible continuar sin seleccionar un almacén destino.', status: 'error', open: true }); return}    */\r\n        \r\n        let newSkipped = skipped;\r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped(newSkipped);\r\n        \r\n    };\r\n\r\n    const handleBack = () => {\r\n        \r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    /* const handleSkip = () => {\r\n        if (!isStepOptional(activeStep)) {\r\n        // You probably want to guard against something like this,\r\n        // it should never occur unless someone's actively trying to break something.\r\n        throw new Error(\"You can't skip a step that isn't optional.\");\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped((prevSkipped) => {\r\n        const newSkipped = new Set(prevSkipped.values());\r\n        newSkipped.add(activeStep);\r\n        return newSkipped;\r\n        });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setActiveStep(0);\r\n    }; */\r\n\r\n\r\n   /*  if(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}  */\r\n   \r\n    if(dataConceptos.data){\r\n\t\tconceptos = dataConceptos.data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n\r\n   \r\n   \r\n   /*  const filtrarProductos = (event) => {\r\n        event.preventDefault();\r\n        if(almacenOrigen !== ''){\r\n            productosQuery.refetch();\r\n        }else{\r\n            productosEmpresaQuery.refetch();\r\n        }\r\n    }; */\r\n\r\n    const handleModal = () => {\r\n        setOpenEnd(!openEnd)\r\n    }\r\n\r\n    const traspasar = async () => {\r\n        try {\r\n         \r\n            if(productosTras.length){\r\n               setOpenEnd(false)\r\n               setLoading(true)\r\n                //let productTrasTo = productosTras;\r\n             const input =  {\r\n                variables: {\r\n                    input: {\r\n                        concepto_traspaso: {\r\n                            _id: conceptoTraspaso._id, \r\n                            nombre_concepto: conceptoTraspaso.nombre_concepto,\r\n                            destino: conceptoTraspaso.destino,\r\n                            origen: conceptoTraspaso.origen,\r\n                            editable: conceptoTraspaso.editable,\r\n                        },\r\n                        almacen_origen: \r\n                            (almacenOrigen !== null) ? \r\n                                {_id: almacenOrigen._id,\r\n                                nombre_almacen: almacenOrigen.nombre_almacen,\r\n                                default_almacen: almacenOrigen.default_almacen }\r\n                            : \r\n                                {_id:\"\",\r\n                                nombre_almacen: \"\",\r\n                                default_almacen: false }\r\n                        ,\r\n                        almacen_destino: \r\n                            (almacenDestino !== null) ?  \r\n                            {_id: almacenDestino._id,\r\n                            nombre_almacen: almacenDestino.nombre_almacen,\r\n                            default_almacen: almacenDestino.default_almacen }\r\n                        : \r\n                            {_id:\"\",\r\n                            nombre_almacen: \"\",\r\n                            default_almacen: false }\r\n                        ,\r\n                        productos: productosTras,\r\n                        datos_transporte :{\r\n                            transporte: transporte,\r\n                            placas: placas,\r\n                            nombre_encargado: nombreQuien\r\n                        },\r\n                        sucursalOrigen: sesion.sucursal._id,\r\n                        sucursalDestino: sesion.sucursal._id,\r\n                        fecha_registro: moment().locale(\"es-mx\").format()\r\n                    },\r\n                    usuario: sesion._id,\r\n                    empresa: sesion.empresa._id\r\n                }\r\n            }  \r\n            \r\n             const traspaso =    await CrearTraspaso(input) \r\n           \r\n                //console.log(traspaso)\r\n                setAlert({message: traspaso.data.crearTraspaso.message, status: traspaso.data.crearTraspaso.resp, open: true })\r\n                if(traspaso.data.crearTraspaso.resp !== 'error'){\r\n                    setProductosTras([]);\r\n                    setAlmacenOrigen(null);\r\n                    setAlmacenDestino(null);\r\n                    setConceptoTraspaso(null);\r\n                    handleBack();\r\n                }\r\n                \r\n            }else{\r\n                \r\n                setAlert({message:'No es posible realizar un traspaso sin agregar productos.', status: 'error', open: true })\r\n           \r\n            }\r\n            \r\n           \r\n            props.refetch();\r\n            setLoading(false);\r\n        } catch (error) {\r\n             setLoading(false);\r\n             setOpenEnd(false)\r\n           \r\n           if(error.networkError !== undefined){\r\n\t\t\t  console.log('traspaso networkError', error.networkError.result)\r\n            }else if(error.graphQLErrors!== undefined){\r\n                console.log('traspaso graphQLErrors', error.graphQLErrors)\r\n            }else{\r\n             \r\n              \r\n            }\r\n             setAlert({message: 'Ocurrió un error al realizar el traspaso...', status: 'error', open: true })\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <>\r\n        <Box sx={{ width: '100%',  }}>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Grid container justifyContent=\"center\">\r\n                        <Grid item xs={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <FcAdvance className={classes.icon} />  \r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item md={6} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen}/>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item md={6} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen} />\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    Traspasos\r\n                </Box>\r\n\t\t\t\t\t\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition} >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <AppBar className={classes.appBar}>\r\n               \r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Traspasos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n                            <Box m={1}>\r\n                                <Button  variant=\"contained\" color=\"secondary\"onClick={handleClose}>\r\n                                    <Close style={{ fontSize: 30}}/>\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Box style={{ width: '50%',alignSelf:'center', alignContent:'center', alignItems:'center' }}>\r\n                  \r\n                    <Stepper activeStep={activeStep}>\r\n                        {steps.map((label, index) => {\r\n                        const stepProps = {};\r\n                        const labelProps = {};\r\n                    \r\n                        if (isStepSkipped(index)) {\r\n                            stepProps.completed = false;\r\n                        }\r\n                        return (\r\n                            <Step key={label} {...stepProps}>\r\n                            <StepLabel {...labelProps}>{label}</StepLabel>\r\n                            </Step>\r\n                        );\r\n                        })}\r\n                    </Stepper>\r\n                </Box>\r\n                <Box >\r\n                {\r\n                (activeStep === 0) ? \r\n                    <Grid container  justify=\"center\" >\r\n                        <Grid item lg={6}>\r\n                            <Box>\r\n                                <Box >\r\n                                    <Typography className={classes.subtitle}  >\r\n                                        <b>Datos traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Box mt={2} style={{display: 'flex', width:'100%', justifyContent: 'center'}}>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Usuario</b></Typography>\r\n                                            <Typography> {sesion.nombre} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Sucursal</b></Typography>\r\n                                            <Typography> {sesion.sucursal.nombre_sucursal} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Fecha</b></Typography>\r\n                                            <Typography> \t{moment().locale(\"es-mx\").format('MM/DD/YYYY')} </Typography>\r\n                                        </Box>\r\n                                    \r\n                                    </Box>\r\n                                    <Box m={2}   style={{width:'100%', justifyContent: 'center'}}>\r\n                                        <Box style={{width:'100%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto traspaso</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(conceptoTraspaso) ? conceptoTraspaso : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={concepto._id} value={concepto} >\r\n                                                        {concepto.nombre_concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                    {\r\n                                        (conceptoTraspaso !== null) ? \r\n                                        <Box style={{display: 'flex'}}>\r\n                                            {   \r\n                                                \r\n                                                (isAlmacenOrigen) ?\r\n                                                <Box> \r\n                                                    <FormControl className={classes.formControl}>\r\n                                                        <InputLabel id=\"almacen-origen-label\">Almacén origen</InputLabel>\r\n                                                        <Select\r\n                                                        labelId=\"almacen-origen-label\"\r\n                                                        id=\"almacen-origen-name\"\r\n                                                        value={(almacenOrigen) ? almacenOrigen : \"\"}\r\n                                                        onChange={handleChange}\r\n                                                        input={<Input />}\r\n                                                        MenuProps={MenuProps}\r\n                                                        >\r\n                                                        {almacenes.map((almacen) => (\r\n                                                            <MenuItem key={almacen._id} value={almacen}>\r\n                                                                {almacen.nombre_almacen}\r\n                                                            </MenuItem>\r\n                                                        ))}\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Box>\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                            \r\n                                            {\r\n                                                (isAlmacenDestino) ? \r\n                                                <FormControl className={classes.formControl}>\r\n                                                    <InputLabel id=\"almacen-destino-label\">Almacén destino</InputLabel>\r\n                                                    <Select\r\n                                                    labelId=\"almacen-destino-label\"\r\n                                                    id=\"almacen-destino-name\"\r\n                                                    value={(almacenDestino) ? almacenDestino : \"\"}\r\n\r\n                                                    onChange={handleChangeDestino}\r\n                                                    input={<Input />}\r\n                                                    MenuProps={MenuProps}\r\n                                                    >\r\n                                                    {almacenesDestino.map((almacen) => (\r\n                                                        <MenuItem key={almacen._id} value={almacen} >\r\n                                                        {almacen.nombre_almacen}\r\n                                                        </MenuItem>\r\n                                                    ))}\r\n                                                    </Select>\r\n                                                </FormControl>\r\n\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                           \r\n                                        </Box> \r\n                                        :\r\n                                        <></>\r\n                                        \r\n                                    } \r\n                                    \r\n                                    </Box>   \r\n                                </Box>      \r\n                                <Box className={classes.centerControl}   style={{width:'100%'}} >\r\n                                    <Typography className={classes.subtitle}>\r\n                                        <b>Datos transporte traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Grid  justify=\"center\" >\r\n                                        \r\n                                        <FormControl className={classes.formControl} style={{marginTop:15}}>\r\n                                            \r\n                                            <InputLabel id=\"transporte-label\">Transporte</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"transporte-label\"\r\n                                            id=\"transporte-name\"\r\n                                            value={transporte}\r\n                                            onChange={handleChangeTransporte}\r\n                                            input={<Input />}\r\n                                            \r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {transportes.map((trans) => (\r\n                                                <MenuItem key={trans} value={trans} style={getStyles(trans, transporte, theme)}>\r\n                                                {trans}\r\n                                                </MenuItem>\r\n                                            ))}\r\n                                            </Select>\r\n                                            \r\n                                        </FormControl>\r\n                                        <Box  justify=\"center\" >\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Placas\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"placas\"\r\n                                                variant=\"outlined\"\r\n                                                value={placas.toUpperCase()}\r\n                                                \r\n                                                onChange={(e) => setPlacas(e.target.value)}\r\n                                            />\r\n                                        \r\n                                        </FormControl>\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Nombre de encargado de transporte\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"nombreQuien\"\r\n                                                variant=\"outlined\"\r\n                                                value={nombreQuien}\r\n                                                \r\n                                                onChange={(e) => setNombreQuien(e.target.value)}\r\n                                            />\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                    </Grid>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                :\r\n                    <Box>\r\n                        <Box ml={1} style={{width:'100%'}}  >\r\n                            <Box ml={2}>\r\n                            <Typography className={classes.subtitle}>\r\n                                <b>Buscar producto</b>\r\n                            </Typography>\r\n                            <Box  style={{ width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n                            </Box>\r\n                            <Box  mt={2}>\r\n                                <Grid container spacing={2} style={{width:'100%'}}>\r\n                                    <Grid item md={6}>\r\n                                    {\r\n                                        (isAlmacenOrigen) ? \r\n                                    \r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={almacenOrigen} refetch ={productosQuery.refetch} />\r\n                                        :\r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={null} refetch ={productosQuery.refetch}/>   \r\n                                    }\r\n                                    </Grid>\r\n                                    <Grid item md={6}>\r\n                                        <TableSelectProducts title='Productos a traspasar' add={false} almacenOrigen={almacenOrigen} refetch ={productosQuery.refetch} />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                }\r\n                \r\n                   <DialogActions style={{justifyContent:'center'}}>\r\n                    <Box sx={{ flexDirection: 'row',alignSelf: 'center',  width: '30%',display: 'flex', pt: 2 }} >\r\n                            <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            disabled={activeStep === 0}\r\n                            onClick={handleBack}\r\n                            style={{width:'43%'}}\r\n                            sx={{ mr: 1 }}\r\n                            >\r\n                            Atrás\r\n                            </Button>\r\n                            <Box style={{ flex: '1 1 auto' }} />\r\n                            {/*     {isStepOptional(activeStep) && (\r\n                                <Button color=\"inherit\" onClick={handleSkip} sx={{ mr: 1 }}>\r\n                                    Skip\r\n                                </Button>\r\n                                )} */}\r\n                            \r\n                                <Button color=\"primary\" variant=\"contained\"    style={{width:'43%'}} disabled={!haveConcepto} onClick={() => (activeStep < steps.length -1) ? handleNext() : handleModal()}>\r\n                                    {activeStep < steps.length -1   ? 'Siguiente' : 'Terminar'}\r\n                                </Button>\r\n                        \r\n                        </Box>\r\n                   </DialogActions>    \r\n                </Box>\r\n                <Dialog open={openEnd} onClose={handleModal}>\r\n                    <DialogTitle>{'¿Está seguro de realizar este traspaso?'}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => handleModal()} color=\"primary\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => traspasar()}>\r\n                            Traspasar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n               \r\n\t        <SnackBarMessages alert={alert} setAlert={setAlert} />  \r\n            \r\n\t\t\t</Dialog>\r\n            \r\n               \r\n        </Box>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '48vh'\r\n\t},\r\n\tcontainer: {\r\n\t\t\r\n\t\tmaxHeight: '74vh'\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: \"1px solid rgba(0,0,0, .3)\",\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: \"15%\",\r\n\t  },\r\n});\r\n\r\nexport default function MedidasAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\t\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper >\r\n\t\t\t\t<TableContainer style={{height:'45vh'}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{props.producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<Row item={item} key={index} almacenSeleccionado={props.almacen} />\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Row = ({item, almacenSeleccionado}) =>{\r\n\tconst classes = useStyles();\r\n\t\r\n\ttry {\r\n\t\tlet ItemReturn= <div/>;\r\n\t\t\r\n\t\tif(almacenSeleccionado._id  === item.almacen){\r\n\t\t\tItemReturn = \r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t<TableCell >\r\n\t\t\t\t\t\t{item.medida.talla}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell >\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={item.color.nombre}\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t\tarrow\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: item.color.hex,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell >{item.cantidad}</TableCell>\r\n\t\t\t\t</TableRow>\t\r\n\t\t\t;\t\r\n\t\t}\r\n\t\t\r\n\t\treturn(\r\n\t\t\tItemReturn\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n\t\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {Close} from '@material-ui/icons';\r\nimport { Slide,Button, Box, Dialog, InputLabel, Select, Input, MenuItem, FormControl, DialogTitle } from '@material-ui/core';\r\nimport MedidasAlmacens from './MedidasAlmacenes'\r\n\r\n\tconst ITEM_HEIGHT = 200;\r\n\tconst ITEM_PADDING_TOP = 8;\r\n\tconst MenuProps = {\r\n\t  PaperProps: {\r\n\t\tstyle: {\r\n\t\t  maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n\t\t  width: 400,\r\n\t\t},\r\n\t  },\r\n\t};\r\n\t\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\t\r\n\tcontainer: {\r\n\r\n\t\theight: '100%'\r\n\t},\r\n\tformControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function DialogMedidasAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\tconst [almacen, setAlmacen] = useState({});\r\n\r\n\r\n\tconst handleChangeAlmacen = (e) =>{\r\n\t\ttry {\r\n\t\t\r\n\t\t\tsetAlmacen(e.target.value);\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\t\r\n\t\treturn (\r\n\t\t\t<Dialog open={props.medidasAlmacen.open} TransitionComponent={Transition} fullWidth maxWidth={\"sm\"} >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\r\n\t\t\t\t<Box display='flex' >\r\n\t\t\t\t\t<Box width=\"88%\">\r\n\t\t\t\t\tTallas y medidas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box  display='flex' justifyContent=\"flex-end\" >\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => {props.setMedidasAlmacen({open:false, producto:{}}); setAlmacen({});}} size=\"large\">\r\n\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Box mx={3}>\r\n\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t<InputLabel id=\"almacen-label\">Almacén</InputLabel>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tlabelId=\"almacen-label\"\r\n\t\t\t\t\t\tid=\"almacen\"\r\n\t\t\t\t\t\tvalue={(almacen) ? almacen.nombre_almacen : \"\"}\r\n\t\t\t\t\t\tonChange={ handleChangeAlmacen}\r\n\t\t\t\t\t\tinput={<Input />}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tMenuProps={MenuProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{props.obtenerAlmacenes.map((alm) => {\r\n\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t<MenuItem key={alm._id} value={alm} >\r\n\t\t\t\t\t\t\t\t\t{alm.nombre_almacen}\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t)})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormControl>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{(props.medidasAlmacen.open) ?\r\n\t\t\t\t<Box height='100%' mx={3} mt={2}>\r\n\t\t\t\t\t<MedidasAlmacens producto={props.medidasAlmacen.producto}  almacen={almacen} />\t\r\n\t\t\t\t</Box>\r\n\t\t\t\t:\r\n\t\t\t\t<div/>\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t</Dialog>\r\n\t);\r\n}","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\n//import ErrorPage from '../../../../components/ErrorPage';\r\nimport DialogMedidasAlmacenes from \"./DialogMedidasAlmacenes\";\r\n//import { useQuery } from '@apollo/client';\r\n//import { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"76vh\",\r\n  },\r\n});\r\n\r\nconst Rowrow = (rowProps) => {\r\n  const { dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n  const [dataExcelHere, setDataExcelHere] = useState([]);\r\n  const [arrayCantidades, setArrayCantidades] = useState([]);\r\n  const [row, setRow] = useState({\r\n    codigo_barras: rowProps.producto.datos_generales.codigo_barras,\r\n    nombre_comercial: rowProps.producto.datos_generales.nombre_comercial,\r\n    style: {\r\n      font: { sz: \"12\" },\r\n      alignment: { wrapText: true, horizontal: \"center\", vertical: \"top\" },\r\n      border: { bottom: { style: \"thin\", color: { rgb: \"000000\" } } },\r\n    },\r\n  });\r\n  const [total, setTotal] = useState(0);\r\n  const [unidad_minima, setUnidad_Minima] = useState(\"\");\r\n\r\n  //console.log(rowProps)\r\n  useEffect(() => {\r\n    try {\r\n      let tot = 0;\r\n    let r = row;\r\n    let datExc = dataExcel;\r\n    let uniMin = 'pz';\r\n    \r\n    rowProps.obtenerAlmacenes.forEach((almacenColumna) => {\r\n      \r\n      const existencias = rowProps.producto.existencia_almacenes.filter(\r\n        (existencia) => existencia._id.almacen._id === almacenColumna._id\r\n      );\r\n\r\n    \r\n      if (existencias.length > 0) {\r\n      \r\n        if(existencias[0].unidad_maxima !== null){\r\n          \r\n          if(existencias[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n           \r\n            arrayCantidades.push(existencias[0].cantidad_existente_maxima);\r\n            tot += existencias[0].cantidad_existente_maxima;\r\n            uniMin = rowProps.producto.existencia_almacenes[0].unidad_maxima;\r\n          }else{\r\n            tot += existencias[0].cantidad_existente;\r\n            arrayCantidades.push(existencias[0].cantidad_existente);\r\n            uniMin = 'pz';\r\n          }\r\n        }else{\r\n          tot += existencias[0].cantidad_existente;\r\n          arrayCantidades.push(existencias[0].cantidad_existente);\r\n        }\r\n        \r\n        setUnidad_Minima(\r\n            uniMin\r\n        );\r\n\r\n        r = {\r\n          ...r,\r\n          [almacenColumna._id]:\r\n            existencias[0].cantidad_existente + \" \" + uniMin,\r\n        };\r\n       \r\n      } else {\r\n        arrayCantidades.push(0);\r\n        r = { ...r, [almacenColumna._id]: 0 };\r\n      }\r\n    });\r\n\r\n    r = { ...r, total: tot + \" \" + uniMin };\r\n\r\n    setTotal(tot);\r\n    setRow(r);\r\n    datExc.push(r);\r\n    //console.log( 'DATA EXCEL LISTA PROductos' , datExc)\r\n\r\n    if (rowProps.index === rowProps.productosLength - 1) {\r\n      setDataExcelHere(datExc);\r\n    }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n    \r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (dataExcelHere) {\r\n      setDataExcel(dataExcelHere);\r\n    }\r\n  }, [dataExcelHere]);\r\n\r\n  const costoProducto = () =>{\r\n    try {\r\n      let costoProd = 0;\r\n      costoProd = rowProps.producto.precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n  \r\n      if(rowProps.producto.existencia_almacenes[0].unidad_maxima !== null){\r\n        if(rowProps.producto.existencia_almacenes[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n          costoProd = rowProps.producto.precios.precio_de_compra.precio_con_impuesto;\r\n        }\r\n      }\r\n\r\n      return formatoMexico(costoProd);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n  const totalProductos = () =>{\r\n    try {\r\n      let tot =  0;\r\n    \r\n     \r\n      tot = rowProps.producto.precios.unidad_de_compra.precio_unitario_con_impuesto *  total;\r\n  \r\n      if(rowProps.producto.existencia_almacenes[0].unidad_maxima !== null){\r\n        if(rowProps.producto.existencia_almacenes[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n          tot = rowProps.producto.precios.precio_de_compra.precio_con_impuesto *  total;\r\n        }\r\n      }\r\n\r\n      return formatoMexico(tot);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      key={rowProps.producto._id}\r\n      onClick={() => rowProps.toShowMedidasAlmacen(rowProps.producto)}\r\n    >\r\n      <TableCell style={{ minWidth: 60 }}>\r\n        {rowProps.producto.datos_generales.codigo_barras}\r\n      </TableCell>\r\n\r\n      <TableCell style={{ minWidth: 170 }}>\r\n        {rowProps.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell style={{ textAlign: \"center\", minWidth: 60 }}>\r\n        $\r\n        {\r\n          costoProducto()\r\n        }\r\n      </TableCell>\r\n      <TableCell style={{ textAlign: \"center\", minWidth: 80 }}>\r\n        $\r\n        {\r\n          totalProductos()\r\n        }\r\n      </TableCell>\r\n      {/* <TableCell style={{textAlign: 'center',}} >{(producto.datos_generales.receta_farmacia) ? \"SI\" : \"NO\"}</TableCell> */}\r\n      {arrayCantidades.map((cantidad, index) => {\r\n        return (\r\n          <TableCell\r\n            key={index}\r\n            style={{\r\n              backgroundColor: \"rgba(255, 253, 150, 0.1)\",\r\n              color: \"black\",\r\n              fontSize: 17,\r\n              textAlign: \"center\",\r\n              minWidth: 60,\r\n            }}\r\n          >\r\n            {cantidad + \" \" + unidad_minima}\r\n          </TableCell>\r\n        );\r\n      })}\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: \"rgba(255, 253, 150, 0.1)\",\r\n          color: \"black\",\r\n          fontSize: 18,\r\n          fontWeight: \"bold\",\r\n          textAlign: \"center\",\r\n          minWidth: 60,\r\n        }}\r\n      >\r\n        {total + \" \" + unidad_minima}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\nexport default function ListaAlmacenes(props) {\r\n  const classes = useStyles();\r\n  const [medidasAlmacen, setMedidasAlmacen] = useState({\r\n    open: false,\r\n    producto: {},\r\n  });\r\n\r\n  //const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  // const almacenesColumnas = [];\r\n  // const productosRows = [];\r\n  /* Queries */\r\n  /* const { loading, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t */\r\n\r\n  /* useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); */\r\n\r\n  /* \tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t}; */\r\n\r\n  /* if (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\tif (error) {\r\n\t\tconsole.log(error)\r\n\t\treturn <ErrorPage error={error} />;\r\n\t} */\r\n\r\n  const toShowMedidasAlmacen = (producto) => {\r\n    try {\r\n      let tipo_producto = producto.datos_generales.tipo_producto;\r\n      if (tipo_producto !== \"OTROS\") {\r\n        setMedidasAlmacen({ open: true, producto });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size={\"small\"} aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {props.columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    align={column.align}\r\n                    style={{\r\n                      textAlign: index > 1 ? \"center\" : \"left\",\r\n                      minWidth: column.minWidth,\r\n                      width: column.minWidth,\r\n                    }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {props.productos.map((row, index) => {\r\n                let key = index;\r\n               \r\n                return (\r\n                  <Rowrow\r\n                    producto={row}\r\n                    index={key}\r\n                    key={index}\r\n                    productosLength={props.productos.length}\r\n                    dataExcel={props.dataExcel}\r\n                    setDataExcel={props.setDataExcel}\r\n                    obtenerAlmacenes={props.obtenerAlmacenes}\r\n                    toShowMedidasAlmacen={toShowMedidasAlmacen}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        {/* <TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={props.productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\tlabelRowsPerPage={\"Renglones por página\"}\r\n\t\t\t/> */}\r\n      </Paper>\r\n      <DialogMedidasAlmacenes\r\n        medidasAlmacen={medidasAlmacen}\r\n        setMedidasAlmacen={setMedidasAlmacen}\r\n        obtenerAlmacenes={props.obtenerAlmacenes}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, useContext, useState, useEffect } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton,FormControl,\r\nSlide, Button, Box, Dialog, OutlinedInput, InputAdornment,CircularProgress} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { useQuery } from '@apollo/client';\r\nimport {Close} from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos'\r\nimport ExportarExcel from '../../../../components/ExportExcel'\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\nimport { useDebounce } from 'use-debounce';\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_CATEGORIAS,OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\tboxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n    },\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\timagen: {\r\n\t\twidth: 100\r\n\t},\r\n\tinputBox:{\r\n\t\tmargin:20\r\n\t},\r\n\tbutton:{\r\n\t\tmargin: theme.spacing(3),\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nexport default function InventariosPorAlmacen(props) {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\t\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\t\r\n\t\r\n\r\n    return (\r\n        <div>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src={'https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg'} alt=\"icono almacen\" className={classes.imagen}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tInventario por almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<InventarioPorAlmacen open={open} productosAlmacenQuery={props.productosAlmacenQuery}  handleClose={handleClose} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst InventarioPorAlmacen = (props) =>{\r\n\tconst classes = useStyles();\r\n\tconst [ loading, setLoading ] = useState(true);\r\n\t  \r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\r\n\tconst {dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n\t\r\n\tconst [ productos, setProductos] = \tuseState([]);\r\n\tconst [ obtenerAlmacenes, setObtenerAlmacenes] = \tuseState([]);\r\n\t// const [ almacen, setAlmacen ] = React.useState('');\r\n\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t\r\n\t// let tipos = ['ROPA','CALZADO','OTROS'];\r\n\tconst [columns, setColumns] = useState([])\r\n\t\r\n\t \t/* Queries */\r\n\t//const {  data, error, refetch } = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n/* \tconst [getQuery, { data, error }] = useLazyQuery(OBTENER_PRODUCTOS_ALMACEN, {\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t}); */\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: ''\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\t  */\r\n\r\n\r\n\tconst categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\r\n\t\r\n\tconst queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\t\r\n\t\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.update, queryObtenerAlmacenes ]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(props.productosAlmacenQuery.error)\r\n\t}, [props.productosAlmacenQuery.error])\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\ttry {\r\n\t\t\t\tif(props.open){\r\n\t\t\t\t\tsetDataExcel([])\r\n\t\t\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t\t\t\tprops.productosAlmacenQuery.refetch({\r\n\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\tfiltro: value});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t},\r\n\t\t[props.open ]\r\n\t);\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\ttry {\r\n\t\t\t\tif(props.productosAlmacenQuery.data){\r\n\t\t\t\t//setDataExcel([]);\r\n\t\t\t\tconsole.log('props.productosAlmacenQuery.data',props.productosAlmacenQuery.data.obtenerProductosAlmacenes)\r\n\t\t\t\tsetProductos(props.productosAlmacenQuery.data.obtenerProductosAlmacenes);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\r\n\t\t},\r\n\t\t[ props.productosAlmacenQuery.data]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif(queryObtenerAlmacenes.data){\r\n\t\t\t\tconst columnsEffect = [\r\n\t\t\t\t\t{ id: 'codigo_barras', label: 'Código de barras', minWidth: 60 , widthPx: 160, },\r\n\t\t\t\t\t{ id: 'nombre_comercial', label: 'Nombre comercial', minWidth: 170, widthPx: 160, },\r\n\t\t\t\t\t{ id: 'costo_producto', label: 'Costo producto', minWidth: 60, widthPx: 100, },\r\n\t\t\t\t\t{ id: 'costo_total_productos', label: 'Costo total productos', minWidth: 60, widthPx: 100, }\r\n\t\t\t\t];\r\n\t\t\t\tlet almace = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n\t\t\t\talmace.forEach(element => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tcolumnsEffect.push({ id: element._id, label: element.nombre_almacen, minWidth: 60, widthPx: 160,})\r\n\t\t\t\t}); \r\n\t\t\t\tcolumnsEffect.push({ id: 'total', label: 'Total existencias', minWidth: 60, widthPx: 160,})\r\n\t\t\t\tsetObtenerAlmacenes(almace);\r\n\t\t\t\tsetColumns(columnsEffect);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.data]\r\n\t);\r\n\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\t \r\n\treturn(\r\n\t\t<Dialog fullScreen open={props.open} onClose={props.handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Inventario por almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => {setLoading(true);props.handleClose()}} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={props.handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Box ml={4} >\r\n\t\t\t\t\t\t<Typography className={classes.subtitle}>\r\n                            <b>Buscar producto</b>\r\n                        </Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={4} display=\"flex\" >\r\n                            \r\n                            <Box style={{  width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n\t\t\t\t\t\t\t{(productos.length > 0) ?\r\n\t\t\t\t\t\t\t\t<Box ml={4} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\" alignItems=\"center\" >\r\n\t\t\t\t\t\t\t\t\t<Box  >\r\n\t\t\t\t\t\t\t\t\t\t<ExportarExcel fileName=\"Inventarios almacen\" data={dataExcel} columnName={columns} />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Box>\t\t\t\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t(loading && productos.length === 0) ?\r\n\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t: \r\n\t\t\t\t\t\t(props.productosAlmacenQuery.error || categoriasQuery.error) ?\r\n\t\t\t\t\t\t\t<ErrorPage error={props.productosAlmacenQuery.error} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Box mx={5} mt={1} >\r\n\r\n\t\t\t\t\t\t\t<ListaProductos productos={productos} obtenerAlmacenes={obtenerAlmacenes} columns={columns} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t</Dialog>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport RegistroAlmacen from './RegistroAlmacen/RegistroAlmacen';\r\nimport Traspasos from './Traspasos/Traspasos';\r\nimport { useQuery } from '@apollo/client';\r\nimport InventariosPorAlmacen from './InventarioPorAlmacen/InventariosPorAlmacen';\r\nimport { TraspasosProvider } from \"../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_PRODUCTOS_ALMACEN } from '../../../gql/Almacenes/Almacen';\r\nexport default function Almacenes() {\r\n\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: ''\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t{sesion.accesos.almacenes.almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<RegistroAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.traspasos.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<Traspasos refetch={productosAlmacenQuery.refetch} />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.inventario_almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<InventariosPorAlmacen productosAlmacenQuery={productosAlmacenQuery}  />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport 'moment'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\nimport moment from 'moment';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'movimiento', label: 'Movimiento', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '70%',\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\n\r\nexport default function TablaHistorialFiltrado({loading, historial}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historial.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tdatos={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({datos}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.hora_moviento.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.tipo_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.nombre_usuario_creador}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.horario_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.concepto}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha Movimiento: </b> {moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Hora Movimiento: </b> {datos.hora_moviento.completa}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario: </b> {datos.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario en Turno: </b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Tipo Movimiento: </b> {datos.tipo_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography> \r\n\t\t\t\t\t\t\t\t\t<b>Concepto: </b> {datos.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Caja: </b> {datos.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${Math.abs(datos.montos_en_caja.monto_efectivo.monto) }</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* <TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_creditos.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_tarjeta_debito.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_tarjeta_credito.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_monedero.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_cheques.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_transferencia.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_vales_despensa.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow> */}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import React, {  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, Slide, Box, Button, Toolbar, Typography, FormControl, MenuItem, Select, Grid, TextField} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CAJA} from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport TablaHistorialFiltrado from './TablaHistorialFiltrado';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1,\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst tipos = [\r\n    'TODOS',\r\n    'COMPRA',\r\n    'VENTA',\r\n    'DEPOSITO',\r\n    'RETIRO',\r\n    'CUENTA_RETIRO',\r\n    'CUENTA_DEPOSITO',\r\n    'ABONO_CLIENTE',\r\n    'ABONO_PROVEEDOR',\r\n    'TRANSFERENCIA',\r\n    \r\n\r\n];\r\n\r\nexport default function HistorialCaja(props) {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ datosBuscar, setDatosBuscar ] = useState([]);\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\tconst [ value ] = useDebounce(datosBuscar, 500);\r\n\r\n\tlet obtenerHistorialCaja = [];\r\n\r\n    /* Queries */\r\n\tconst {  data, refetch, loading } = useQuery(OBTENER_HISTORIAL_CAJA, {\r\n\t\tvariables: {\r\n            id_Caja: props.cajaSelected._id,\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                tipo_movimiento: datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento :  \"\",\r\n                fecha_incio: datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\",\r\n                fecha_fin: datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\"\r\n            },\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (datosHistorial) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < datosHistorial.length; i++) {\r\n            arrayExcel = { \r\n                fecha: datosHistorial[i].fecha_movimiento.completa,\r\n                hora_movimiento: datosHistorial[i].hora_moviento.completa,\r\n                nombre: datosHistorial[i].nombre_usuario_creador,\r\n                horario_turno: datosHistorial[i].horario_turno,\r\n                tipo_movimiento: datosHistorial[i].tipo_movimiento,\r\n                concepto: datosHistorial[i].concepto,\r\n                caja: datosHistorial[i].numero_caja,\r\n                monto_efectivo: datosHistorial[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: datosHistorial[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: datosHistorial[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: datosHistorial[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: datosHistorial[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: datosHistorial[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: datosHistorial[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: datosHistorial[i].montos_en_caja.monto_vales_despensa.monto , \r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n\tif(data){\r\n\t\tobtenerHistorialCaja = data.obtenerHistorialCaja;\r\n        agruparDatos(obtenerHistorialCaja);\r\n\t}\r\n\r\n    const handleDatos = (e) => {\r\n        setDatosBuscar({...datosBuscar, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n\r\n    const limpiarFiltros = () => {\r\n        setDatosBuscar([]);\r\n    }\r\n\r\n    return (\r\n        <Dialog fullScreen open={props.open} onClose={()=>{props.handleClose();}} TransitionComponent={Transition}>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        Caja {props.cajaSelected.numero_caja}\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={ () => {props.handleClose()} } size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Grid container>\r\n                <ExcelFile\r\n                    element={\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            aria-label=\"Guardar\"\r\n                            className={classes.iconSave}\r\n                        >\r\n                            <SaveIcon className={classes.margin} />\r\n                            Exportar\r\n                        </Button>   \r\n                    }\r\n                    filename={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n                >\r\n                    <ExcelSheet data={datosExcel} name={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}>\r\n                        <ExcelColumn label='Usuario' value='nombre' />\r\n                        <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                        <ExcelColumn label='Hora Movimiento' value='hora_movimiento' />\r\n                        <ExcelColumn label='Horario en Turno' value='horario_turno' />\r\n                        <ExcelColumn label='Concepto' value='concepto' />\r\n                        <ExcelColumn label='Tipo Movimiento' value='tipo_movimiento' />\r\n                        <ExcelColumn label='No. de Caja' value='caja' />\r\n                        <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                        <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                        <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                        <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                        <ExcelColumn label='M. en monedero' value='monto_monedero' />\r\n                        <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                        <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                        <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                    </ExcelSheet>\r\n                </ExcelFile>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Movimiento\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={handleDatos}\r\n                                    value={datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento : \"\"}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {tipos.map((tipo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={tipo}>{tipo}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\t\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha inicio:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_incio\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha fin:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_fin\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }} >\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Usuario:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                    value={datosBuscar.usuario ? datosBuscar.usuario : \"\"}\r\n                                    onChange={handleDatos}\r\n                                />\r\n                            </Box>\r\n                        </form>\r\n                        <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                            <Box mt={2}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarFiltros}\r\n                                >\r\n                                    Limpiar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <TablaHistorialFiltrado loading={loading} historial={obtenerHistorialCaja} />\r\n                </Grid>  \r\n            </Grid>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport {Badge, Box} from '@material-ui/core';\r\n \r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n      color :({props})=> props.color,\r\n      background: ({props})=> props.color,\r\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n      '&::after': {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        borderRadius: '50%',\r\n        animation: '$ripple 1.2s infinite ease-in-out',\r\n        border: '1px solid currentColor',\r\n        content: '\"\"',\r\n      },\r\n    },\r\n    '@keyframes ripple': {\r\n      '0%': {\r\n        transform: 'scale(.8)',\r\n        opacity: 1,\r\n      },\r\n      '100%': {\r\n        transform: 'scale(2.4)',\r\n        opacity: 0,\r\n      },\r\n    }\r\n  }))(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth:230,\r\n    maxWidth: 230,\r\n    margin:5,\r\n    \r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    color: red[500],\r\n  },\r\n  textActive:{\r\n    position:'relative',\r\n    bottom:8\r\n  }\r\n}));\r\n\r\nexport default function CardCaja(props) {\r\n    const styleProps={\r\n      color: (props.activa)  ? '#44b700' : 'red'\r\n    }\r\n    const classes = useStyles();\r\n \r\n    return (\r\n        <div>\r\n            <Card className={classes.root}>\r\n                    <CardHeader\r\n                      color=\"secondary\"\r\n                        avatar={\r\n                            <StyledBadge\r\n                              overlap=\"circle\"\r\n                              props={styleProps}\r\n                              anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                              }}\r\n                              variant=\"dot\"\r\n                              badgeContent=\"\"\r\n                            >\r\n                            <Avatar alt=\"Cajero X\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </StyledBadge>\r\n                        }\r\n                    />\r\n                    <Box m={1} mb={2}>\r\n                    <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\" >\r\n                            Caja {props.name}\r\n                    </Typography>\r\n                    </Box>\r\n                    {/* <CardActions disableSpacing  >\r\n                        <Typography style={{fontWeight: 'bold'}} color=\"textSecondary\" component=\"p\">\r\n                           Total en caja: \r\n                        </Typography>\r\n                        <Typography style={{margin: '0px 10px', color: 'green'}} variant=\"h6\" color=\"textSecondary\" component=\"p\">\r\n                           $ {parseFloat(props.cantidad_efectivo_actual)}\r\n                        </Typography>\r\n                    </CardActions> */}\r\n                </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Grid  } from '@material-ui/core';\r\nimport HistorialCaja from './HistorialCaja';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport CardCaja from './CardCaja';\r\n\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n    const [ loading, setLoading ] = React.useState(false);\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n    const [ openHistorial, setOpenHistorial ] = React.useState(false);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ cajaSelected, setCajaSelected ] = React.useState({name:''});\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    let obtenerCajasSucursal = []; \r\n\r\n\t\r\n    /* Queries */\r\n    const {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n    const handleClickOpenHistorial = () => {\r\n\t\tsetOpenHistorial(true);\r\n\t};\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n    const handleCloseHistorial = () => {\r\n\t\tsetOpenHistorial(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container spacing={1} justifyContent=\"center\" >\r\n\t\t\t\t\t{obtenerCajasSucursal?.map((caja, index) => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<Button key={index} onClick={()=>{handleClickOpenHistorial(); setCajaSelected(caja)}}>\r\n\t\t\t\t\t\t\t\t<CardCaja name={caja.numero_caja} activa={caja.activa} cantidad_efectivo_actual={caja.cantidad_efectivo_actual} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\t\r\n\t\t\t\t\t})} \r\n\t\t\t\t</Grid> \t\r\n\t\t\t</Dialog>\r\n            <HistorialCaja open={openHistorial} fetchCajas={refetch} handleClickOpen={handleClickOpenHistorial} cajaSelected={cajaSelected} handleClose={handleCloseHistorial} obtenerCajasSucursal={obtenerCajasSucursal} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n\t{ id: 'caja', label: 'Caja', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: 500,\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TablaTurnosFiltrados({loading, turnos}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{turnos.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tturno={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({turno}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst classes = useStyles();\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={turno._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{turno.fecha_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_salida.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.concepto}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.numero_caja}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación del turno\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario</b>: {turno.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Numero de caja</b>: {turno.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Moviento de turno</b>: {turno.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario de turno</b>: {turno.horario_en_turno}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Entrada de turno: </b>{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Salida de turno: </b>{turno.hora_salida.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Comentarios</b>: {turno.comentarios}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha de movimiento</b>: {turno.fecha_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${turno.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRAR_TURNOS = gql`\r\n\tmutation crearRegistroDeTurno( $input: AbrirCerrarTurnoInput, $activa: Boolean) {\r\n\t\tcrearRegistroDeTurno(input: $input, activa: $activa) {\r\n\t\t\thorario_en_turno\r\n\t\t\ttoken_turno_user\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tfecha_movimiento\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_TURNOS = gql`\r\n\tquery obtenerFiltroTurnos($input: HistorialTurnosInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerFiltroTurnos(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\thorario_en_turno\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_movimiento\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ReactExport from 'react-export-excel'; //LIBRERIA EXCEL\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaTurnosFiltrados from './TablaTurnosFiltrados';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { OBTENER_HISTORIAL_TURNOS } from '../../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { useDebounce } from 'use-debounce';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nmoment.locale('es');\r\nconst ExcelFile = ReactExport.ExcelFile; //ARCHIVO DE EXCEL\r\nconst ExcelSheet = ReactExport.ExcelSheet; //HOJA DE EXCEL\r\nconst ExcelColumn = ReactExport.ExcelColumn; //COLUMNA DE EXCEL\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesTurnosUsuarios() {\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg'\r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n                    </Box>\r\n\t\t\t\t\tTurnos de Usuarios\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                            Reportes Turnos de Usuarios\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display=\"flex\">\r\n                            <Box p={1}>\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon style={{fontSize: 30}} />\r\n                                </Button>\r\n                            </Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <FiltroTablaTurnos />\r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n};\r\n\r\nconst FiltroTablaTurnos = () => {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [filtros, setFiltros] = useState([]);\r\n    const [ datosExcel, setDatosExcel] = useState([]);\r\n\tconst [value] = useDebounce(filtros, 500);\r\n    let historialTurnos = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  } = useQuery(OBTENER_HISTORIAL_TURNOS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                horario_en_turno: filtros.horario_turno ? filtros.horario_turno : \"\",\r\n                usuario_en_turno: value.usuario_en_turno ? value.usuario_en_turno : \"\",\r\n                numero_caja: filtros.numero_caja ? filtros.numero_caja : \"\",\r\n                fechaInicio: filtros.fechaInicio ? filtros.fechaInicio : \"\",\r\n                fechaFin: filtros.fechaFin ? filtros.fechaFin : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    const obtenerDatos = (e) => {  \r\n        setFiltros({...filtros, [e.target.name]: e.target.value.toString()});\r\n    };\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (turnos) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < turnos.length; i++) {\r\n            arrayExcel = { \r\n                fecha: turnos[i].fecha_movimiento,\r\n                nombre: turnos[i].usuario_en_turno.nombre,\r\n                numero_usuario: turnos[i].usuario_en_turno.numero_usuario,\r\n                fecha_entrada: turnos[i].fecha_entrada.completa,\r\n                fecha_salida: turnos[i].fecha_salida.completa,\r\n                hora_entrada: turnos[i].hora_entrada.completa,\r\n                hora_salida: turnos[i].hora_salida.completa,\r\n                horario_en_turno: turnos[i].horario_en_turno,\r\n                concepto: turnos[i].concepto,\r\n                caja: turnos[i].numero_caja,\r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n    if(data && cajas.loading  === false){\r\n\t\thistorialTurnos = data.obtenerFiltroTurnos;\r\n        agruparDatos(historialTurnos);\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarFiltros = () => {\r\n        setFiltros([]);\r\n    };\r\n    \r\n    return(\r\n        <>\r\n        <Grid container>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename=\"Reporte de Turnos Usuarios\"\r\n            >\r\n                <ExcelSheet data={datosExcel} name={'Reporte de Turnos Usuarios'}>\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                    <ExcelColumn label='Fecha Entrada' value='fecha_entrada' />\r\n                    <ExcelColumn label='Fecha Salida' value='fecha_salida' />\r\n                    <ExcelColumn label='Hora Entrada' value='hora_entrada' />\r\n                    <ExcelColumn label='Hora Salida' value='hora_salida' />\r\n                    <ExcelColumn label='Horario en Turno' value='horario_en_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha inicio:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaInicio\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaInicio ? filtros.fechaInicio : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha fin:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaFin\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaFin ? filtros.fechaFin : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Usuario:\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario_en_turno\"\r\n                                value={filtros.usuario_en_turno ? filtros.usuario_en_turno : \"\"}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                            />\r\n                        </Box>\r\n                    </form>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Caja:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"numero_caja\"\r\n                                onChange={obtenerDatos}\r\n                                value={filtros.numero_caja ? filtros.numero_caja : \"\"}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {\r\n                                    cajas.data?.obtenerCajasSucursal?.map((caja) =>{\r\n                                        return(\r\n                                            <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                Caja {caja.numero_caja}\r\n                                            </MenuItem>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Horario de Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_turno\"\r\n                                value={filtros.horario_turno ? filtros.horario_turno : \"\"}\r\n                                onChange={obtenerDatos}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                        <Box mt={2}>\r\n                            <Button\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                onClick={limpiarFiltros}\r\n                            >\r\n                                Limpiar\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid> \r\n           \r\n        </Grid>    \r\n        <Grid item lg={12}>\r\n            <TablaTurnosFiltrados loading={loading} turnos={historialTurnos} />\r\n        </Grid>  \r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Nombre producto\", minWidth: 160 },\r\n  { label: \"Fecha de Compra\", minWidth: 160 },\r\n  { label: \"Almacen\", minWidth: 100 },\r\n  { label: \"Proveedor\", minWidth: 100 },\r\n  { label: \"M. pago\", minWidth: 90 },\r\n  { label: \"F. pago\", minWidth: 100 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaComprasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                const result = formaPago.filter(\r\n                  (res) => res.Value === data.forma_pago\r\n                );\r\n                let forma_pago = result[0];\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>{data.almacen.nombre_almacen}</TableCell>\r\n                    <TableCell>{data.proveedor.nombre_cliente}</TableCell>\r\n                    <TableCell>\r\n                      {data.compra_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${forma_pago.Value}-${forma_pago.Name}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${data.cantidad_total} - ${data.unidad}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`%${data.descuento_porcentaje} - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_REPORTE_COMPRAS = gql`\r\n  query obtenerProductoMovimientos(\r\n    $empresa: ID!\r\n    $sucursal: ID\r\n    $input: ObteneReportesCompras\r\n  ) {\r\n    obtenerProductoMovimientos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      id_compra\r\n      id_traspaso\r\n      id_producto\r\n      id_proveedor\r\n      id_almacen\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      proveedor {\r\n        _id\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      producto {\r\n        almacen_inicial {\r\n          almacen\r\n          cantidad\r\n          fecha_de_expiracion\r\n          id_almacen\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          granel\r\n          litros\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          cantidad\r\n          codigo_barras\r\n          id_producto\r\n          precio\r\n          unidad\r\n          unidad_principal\r\n          _id\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n      }\r\n      concepto\r\n      cantidad\r\n      cantidad_regalo\r\n      unidad_regalo\r\n      cantidad_total\r\n      iva_total\r\n      ieps_total\r\n      costo\r\n      descuento_porcentaje\r\n      descuento_precio\r\n      compra_credito\r\n      forma_pago\r\n      impuestos\r\n      mantener_precio\r\n      subtotal\r\n      total\r\n      medida {\r\n        id_medida\r\n        medida\r\n        tipo\r\n      }\r\n      color {\r\n        id_color\r\n        color\r\n        hex\r\n      }\r\n      unidad\r\n      id_unidad_venta\r\n      empresa\r\n      sucursal\r\n      usuario\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarCompras({ data }) {\r\n  const compras = data.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      almacen,\r\n      proveedor,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito,\r\n      costo,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_precio,\r\n      ieps_precio,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const forma_pago_filtrada = formaPago.filter(\r\n      (forma) => forma.Value === compra.forma_pago\r\n    );\r\n    const forma_pago = forma_pago_filtrada[0];\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito: compra_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      costo: `$${costo ? formatoMexico(costo) : 0}`,\r\n      descuento_porcentaje: `%${descuento_porcentaje}`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_precio: `$${ieps_precio ? formatoMexico(ieps_precio) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n        <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Unidad de Regalo\" value=\"unidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad de Regalo\" value=\"cantidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad Total\" value=\"cantidad_total\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"compra_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Costo\" value=\"costo\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_precio\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaComprasFiltradas from \"./TablaComprasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { OBTENER_REPORTE_COMPRAS } from \"../../../../gql/Compras/reporte_compras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarCompras from \"./ExportarCompras\";\r\n\r\nexport default function FiltrosCompras() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_REPORTE_COMPRAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        proveedor: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerProductoMovimientos } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerProductoMovimientos} />\r\n        <TablaComprasFiltradas data={obtenerProductoMovimientos} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    proveedor: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      proveedor: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filter) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: filter,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Proveedor:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"proveedor\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, Clave o numero\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.proveedor}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1} display=\"flex\">\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarCompras data={data} />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\nimport FiltrosCompras from \"./FiltrosCompra\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCompras() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcPaid fontSize={100} />\r\n          </Box>\r\n          Reportes Compras\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Compras\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosCompras />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Artículo\", minWidth: 160 },\r\n  { label: \"Fecha venta\", minWidth: 170 },\r\n  { label: \"M. pago\", minWidth: 90 },\r\n  { label: \"F. pago\", minWidth: 100 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaVentasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n  console.log(data)\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                let forma_pago = \"-\";\r\n                if (data.forma_pago) {\r\n                  const result = formaPago.filter(\r\n                    (res) => res.Value === data.forma_pago\r\n                  );\r\n                  forma_pago = result[0];\r\n                }\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.venta_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>{`${forma_pago.Name}`}</TableCell>\r\n                    <TableCell>{`${data.cantidad} - ${data.unidad}`}</TableCell>\r\n                    <TableCell>\r\n                      {`%${\r\n                        data.descuento_porcentaje\r\n                          ? data.descuento_porcentaje\r\n                          : 0\r\n                      } - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarVentas({ data }) {\r\n  const compras = data.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      venta_credito,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_total,\r\n      ieps_total,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    let forma_pago = \"\";\r\n    if (compra.forma_pago) {\r\n      const forma_pago_filtrada = formaPago.filter(\r\n        (forma) => forma.Value === compra.forma_pago\r\n      );\r\n      forma_pago = forma_pago_filtrada[0];\r\n    }\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      venta_credito: venta_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      descuento_porcentaje: `%${\r\n        descuento_porcentaje ? descuento_porcentaje : 0\r\n      }`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_total: `$${iva_total ? formatoMexico(iva_total) : 0}`,\r\n      ieps_total: `$${ieps_total ? formatoMexico(ieps_total) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"venta_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_total\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaVentasFiltradas from \"./TablaVentasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarVentas from \"./ExportarVentas\";\r\nimport { OBTENER_VENTAS_REPORTES } from \"../../../../gql/Ventas/ventas_generales\";\r\n\r\nexport default function FiltrosVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_VENTAS_REPORTES, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerVentasReportes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerVentasReportes} />\r\n        <TablaVentasFiltradas data={obtenerVentasReportes} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filtros) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha venta inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha venta fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={4}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1} display=\"flex\" alignItems=\"center\">\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarVentas data={data} />\r\n        <Box mx={1} />\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#FF8A8A\"\r\n          bgcolor=\"#FFF4F4\"\r\n          height=\"20px\"\r\n          width=\"20px\"\r\n        />\r\n        <Box mx={0.5} />\r\n        <Typography>\r\n          <b>- Ventas canceladas</b>\r\n        </Typography>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport FiltrosVenta from \"./FiltrosVenta\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesVentas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Reportes Ventas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Ventas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosVenta />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarTraspasos({ data }) {\r\n  const traspasos = data.map((traspaso) => {\r\n    const trasp =  {\r\n      producto: traspaso.producto.datos_generales.nombre_comercial,\r\n      cantidad: traspaso.cantidad,\r\n      fecha:\tformatoFechaCorta(traspaso.id_traspaso.fecha_registro),\r\n      concepto: traspaso.id_traspaso.concepto_traspaso.nombre_concepto,\r\n      almacen_origen: (traspaso.almacen_origen !== null) ? traspaso.almacen_origen.nombre_almacen : '',\r\n      almacen_destino:(traspaso.almacen_destino !== null) ? traspaso.almacen_destino.nombre_almacen : ''\r\n    } ;\r\n  \r\n    return trasp;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de traspasos\"\r\n    >\t\r\n\r\n      <ExcelSheet data={traspasos} name=\"Reporte de traspasos\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Almacén Origen\" value=\"almacen_origen\" />\r\n        <ExcelColumn label=\"Almacén Destino\" value=\"almacen_destino\" />\r\n        \r\n        \r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\nimport {\r\n  formatoFechaCorta,\r\n\r\n} from \"../../../../config/reuserFunctions\"; \r\n\r\nconst columns = [\r\n\t{ id: 'producto', label: 'Producto', minWidth: 200 },\r\n\t\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 50 },\r\n\t{ id: 'fecha', label: 'Fecha ', minWidth: 50 },\t\r\n\t{ id: 'concepto', label: 'Concepto ', minWidth: 100 },\r\n\t{ id: 'almacen_origen', label: 'Almacén Origen', minWidth: 100 },\t\r\n\t{ id: 'almacen_destino', label: 'Almacén Destino', minWidth: 100 },\t\r\n\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaAlmacenFiltradas({data}) {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                         <TableBody>\r\n\t\t\t\t\t\t\t{data.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<TableCell>{data.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{formatoFechaCorta(data.id_traspaso.fecha_registro)}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.id_traspaso.concepto_traspaso.nombre_concepto}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_origen !== null) ? data.almacen_origen.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_destino !== null) ? data.almacen_destino.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import React, { useState,  Fragment } from 'react';\r\n\r\nimport { AppBar, Box, Button, Dialog, FormControl, \r\nGrid, MenuItem, Select, Slide, TextField, Toolbar, \r\nTypography } from '@material-ui/core';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarTraspasos from \"./ExportarTraspasos\";\r\nimport TablaAlmacenFiltradas from './TablaAlmacenFiltradas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\n\r\nimport { OBTENER_ALMACENES, OBTENER_TRASPASOS  } from '../../../../gql/Almacenes/Almacen';\r\nimport { useDebounce } from 'use-debounce';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n    CircularProgress:{\r\n         width: '100%',\r\n        height: 200,\r\n        marginTop:100,\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesAlmacen() {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n    const [open, setOpen] = useState(false);\r\n    const [almacenOrigen, setAlmacenOrigen] = useState(null);\r\n    const [almacenDestino, setAlmacenDestino] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [inputFilter, setFilter] = useState({\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        producto: '',\r\n        fecha_inicio: '',\r\n        fecha_final: '',\r\n        usuario: ''\r\n    });\r\n\r\n    const [encargado, setEncargado] = useState('');\r\n    const [value] = useDebounce(inputFilter, 1000);\r\n\r\n    let almacenes = [];\r\n    let traspasos = [];\r\n    let usuarios = [];\r\n\r\n\r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`,\r\n            eliminado: false,\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    })\r\n    const traspasosAlmacenes = useQuery(OBTENER_TRASPASOS,{\r\n        variables:{\r\n            input: value\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n    });\t\r\n\t\r\n\r\n  /*   useEffect(() => {\r\n        try {\r\n            \r\n            traspasosAlmacenes.refetch({\r\n                  input: inputFilter\r\n            }) \r\n        } catch (error) {\r\n            console.log('traspasosAlmacenes',error)\r\n        }\r\n        \r\n    }, []); */\r\n    \r\n    const limpiarFiltros = () => {\r\n        try {\r\n            let filt = {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                producto: '',\r\n                fecha_inicio: '',\r\n                fecha_final: '',\r\n                usuario: ''\r\n            };\r\n          \r\n        \r\n            setFilter(filt);\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: filt\r\n                }\r\n            )\r\n            setEncargado('');\r\n            setAlmacenOrigen(null);\r\n            setAlmacenDestino(null);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            \r\n        }\r\n  \r\n\r\n  };\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    \r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n     \r\n    const setDatosInput = (e) =>{\r\n      \r\n          let fil = {...inputFilter, [e.target.name]: e.target.value,almacen_destino:almacenDestino,almacen_origen : almacenOrigen}\r\n        setFilter(fil)\r\n    }\r\n    const setQueryAlmacenOrigen = (alm) =>{\r\n           \r\n        let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n        \r\n        if(alm._id !== ''){\r\n             setLoading(true);\r\n            let fil = {...inputFilter, almacen_origen : alm._id, almacen_destino: almDes}\r\n        \r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n           \r\n        }\r\n         setAlmacenOrigen(alm)\r\n          setLoading(false);\r\n    }\r\n     const setQueryAlmacenDestino = (alm) =>{\r\n        let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';  \r\n        if(alm._id !== ''){\r\n      \r\n            let fil = {...inputFilter, almacen_origen : almOri, almacen_destino : alm._id}\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n            \r\n        }\r\n        \r\n        setAlmacenDestino(alm);\r\n         setLoading(false);\r\n    }\r\n    const setEncargadoInput = ( enc) =>{\r\n       try {\r\n            let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n            let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';\r\n            let encId = ( enc!== '' ) ? enc._id : ''; \r\n            let fil ={...inputFilter, usuario: encId, almacen_destino:almDes,almacen_origen : almOri};\r\n        \r\n        traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n         setEncargado(enc)  \r\n          setLoading(false);  \r\n       } catch (error) {\r\n           \r\n       }\r\n        \r\n    }\r\n\r\n    if(traspasosAlmacenes.data){\r\n       try {\r\n           \r\n            traspasos = traspasosAlmacenes.data.obtenerTraspasos;   \r\n       } catch (error) {\r\n           \r\n       }\r\n      \r\n       \r\n    }\r\n\r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg' \r\n                            alt=\"icono almacen\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Almacen\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    \r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_inicio\"\r\n                                    variant=\"outlined\"\r\n                                    value={inputFilter.fecha_inicio}\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_final\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.fecha_final}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Encargado</Typography>\r\n                                <Box display=\"flex\">\r\n                                    <Autocomplete\r\n                                        id=\"encargado\"\r\n                                        size=\"small\"\r\n                                        options={usuarios}\r\n                                       \r\n                                        getOptionLabel={(option) =>\r\n                                            option.nombre ? `${option.nombre}` : \"\"\r\n                                        }\r\n                                        fullWidth\r\n                                        renderInput={(params) => (\r\n                                            <TextField\r\n                                            {...params}\r\n                                            variant=\"outlined\"\r\n                                            InputProps={{\r\n                                                ...params.InputProps,\r\n                                                endAdornment: (\r\n                                                <Fragment>\r\n                                                  \r\n                                                    {params.InputProps.endAdornment}\r\n                                                </Fragment>\r\n                                                ),\r\n                                            }}\r\n                                            \r\n                                            />\r\n                                        )}\r\n                                        renderOption={(option) => (\r\n                                            <Fragment>\r\n                                            {`${option.nombre}`}\r\n                                            </Fragment>\r\n                                        )}\r\n                                        onChange={ (_, data) =>  setEncargadoInput(data)}\r\n                                        getOptionSelected={(option, value) =>\r\n                                            option.nombre === value.nombre\r\n                                        }\r\n             \r\n                                        value={(encargado.nombre) ? encargado: null }\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                             <Box width=\"100%\">\r\n                                <Typography>Producto:</Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"producto\"\r\n                                    variant=\"outlined\"\r\n                                    placeholder=\"Nombre, código, clave...\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.producto}\r\n                                />\r\n                            </Box>\r\n                           \r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen origen:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-origen\"\r\n                                        name=\"almacen_origen\"\r\n                                        onChange={(e) => setQueryAlmacenOrigen(e.target.value)}\r\n                                        value={(almacenOrigen !== null) ? almacenOrigen : ''} \r\n                                    >   \r\n                                       \r\n                                        {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                                {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                      \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen destino:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    \r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-destino\"\r\n                                        name=\"almacen_destino\"\r\n                                        onChange={(e) => setQueryAlmacenDestino(e.target.value)}\r\n                                        value={(almacenDestino !== null) ? almacenDestino: ''} \r\n                                    >\r\n                                     \r\n                                          {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                            {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                       \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                           \r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box mt={1} display=\"flex\">\r\n                                <Button\r\n                                color=\"primary\"\r\n                                startIcon={<ClearOutlined />}\r\n                                onClick={() => limpiarFiltros()}\r\n                                >\r\n                                Limpiar filtros\r\n                                </Button>\r\n                                <Box mx={1} />\r\n                                <ExportarTraspasos data= {traspasos} />\r\n                            </Box>\r\n                        </div>    \r\n                    </Grid> \r\n                    {\r\n                        (traspasosAlmacenes.loading || loading) ?\r\n                        <div className={classes.CircularProgress}>\r\n                        <CircularProgress/>\r\n                        </div>\r\n                        :\r\n                        <Grid item lg={12}>\r\n                         <TablaAlmacenFiltradas data={traspasos} />\r\n                        </Grid>\r\n                    }\r\n                 \r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Grid, Typography} from '@material-ui/core';\r\nimport { OBTENER_CORTE_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport moment from 'moment';\r\nimport { useLazyQuery } from '@apollo/client';\r\n\r\nconst columns = [\r\n\t{label: 'Fecha Corte', minWidth: 100 },\r\n\t{label: 'Hora Corte', minWidth: 100 },\r\n\t{label: 'Usuario', minWidth: 100 },\r\n\t{label: 'Turno Horario', minWidth: 100 },\t\r\n\t{label: 'Caja', minWidth: 100 },\r\n\t{label: 'Sucursal', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: \"70vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaCortesFiltradas({loading, cortes}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cortes.map((row) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\tcorte={row}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({corte}) {\r\n\tconst [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [obtenerCorte, { data, error, loading }] = useLazyQuery(\r\n\t\tOBTENER_CORTE_CAJA,\r\n\t\t{\r\n\t\t\tvariables: { \r\n\t\t\t\tsucursal: sesion.sucursal._id, \r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tinput: { \r\n\t\t\t\t\tusuario: sesion._id,\r\n\t\t\t\t\tcaja: corte.id_caja,\r\n\t\t\t\t\ttoken_turno_user: corte.token_turno_user,\r\n\t\t\t\t\tnumber_user: sesion.numero_usuario\r\n\t\t\t\t} \r\n\t\t\t},\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tlet montos_sistema = [];\r\n\r\n\tif(data){\r\n\t\tmontos_sistema = data.obtenerCorteCaja.montos_en_sistema;\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t\tobtenerCorte();\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"handleClickOpen\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={corte._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{corte.fecha_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.hora_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.numero_caja}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.sucursal.nombre_sucursal}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<InformacionCorteCaja corte={corte} montos_sistema={montos_sistema} loading={loading} />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Box p={2} display=\"flex\" flexDirection='row-reverse'>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tImprimir Ticket\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction InformacionCorteCaja({corte, montos_sistema, loading}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h5\">\r\n\t\t\t\t\t\t<b>Reporte de Corte de Caja</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t<b>Fecha y hora de Corte: </b>{moment(corte.fecha_movimiento).format('Do MMMM YYYY, h:mm:ss')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={2} display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Usuario: </b> {corte.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>No. de usuario: </b>{corte.usuario_en_turno.numero_usuario}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Horario en turno: </b>{corte.horario_en_turno}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Numero de caja: </b>{corte.numero_caja}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Sucursal: </b>{corte.sucursal.nombre_sucursal}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CONCEPTO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CAJERO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">SISTEMA</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">DIFERENCIA</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EFECTIVO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_efectivo.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_efectivo}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_efectivo.monto - montos_sistema.monto_efectivo)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DEBITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_debito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_debito.monto - montos_sistema.monto_tarjeta_debito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DE CREDITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_credito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_credito.monto - montos_sistema.monto_tarjeta_credito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TRANSFERENCIAS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_transferencia}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_transferencia.monto - montos_sistema.monto_transferencia)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN MONEDERO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_monedero}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_monedero.monto - montos_sistema.monto_monedero)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CREDITOS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_creditos}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_creditos.monto - montos_sistema.monto_creditos)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CHEQUES</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_cheques}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_cheques.monto - montos_sistema.monto_cheques)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN VALE DE DESPENSA</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_vales_despensa}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_vales_despensa.monto - montos_sistema.monto_vales_despensa)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}","import { Button, makeStyles } from '@material-ui/core'\r\nimport React, { useState } from 'react'\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nexport default function ExportExcel({historialCortes}) {\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\r\n    const classes = useStyles();\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = () => {\r\n       \r\n        \r\n        for (let i = 0; i < historialCortes.length; i++) {\r\n            arrayExcel = { \r\n                fecha: historialCortes[i].fecha_salida.completa,\r\n                hora_movimiento: historialCortes[i].hora_salida.completa,\r\n                horario_turno: historialCortes[i].horario_en_turno,\r\n                sucursal: historialCortes[i].sucursal.nombre_sucursal,\r\n                nombre: historialCortes[i].usuario_en_turno.nombre,\r\n                numero_usuario: historialCortes[i].usuario_en_turno.numero_usuario,\r\n                concepto: \"Corte Caja\",\r\n                caja: historialCortes[i].numero_caja,\r\n                monto_efectivo: historialCortes[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: historialCortes[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: historialCortes[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: historialCortes[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: historialCortes[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: historialCortes[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: historialCortes[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: historialCortes[i].montos_en_caja.monto_vales_despensa.monto ,\r\n            };\r\n            setDatosExcel(arrayExcel);\r\n        };\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                        onClick={() => agruparDatos()}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename={`Reporte de Historial de Cortes`}\r\n            >\r\n                <ExcelSheet data={datosExcel} name={`Reporte de Historial de Cortes`}>\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Sucursal' value='sucursal' />\r\n                    <ExcelColumn label='Fecha Corte' value='fecha' />\r\n                    <ExcelColumn label='Hora Corte' value='hora_movimiento' />\r\n                    <ExcelColumn label='Horario Turno' value='horario_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                    <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                    <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                    <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                    <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                    <ExcelColumn label='M. en Monedero' value='monto_monedero' />\r\n                    <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                    <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                    <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n        </>\r\n    )\r\n}\r\n","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaComprasFiltradas from './TablaCortesFiltradas';\r\nimport ExportExcel from './ExportExcel';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS, OBTENER_CORTES_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesCortes() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    const [ open, setOpen ] = useState(false);\r\n    const [ datosFiltro, setDatosFiltro ] = useState([]);\r\n    const [value] = useDebounce(datosFiltro, 500);\r\n\r\n    let cajas = [];\r\n    let historialCortes = [];\r\n\r\n    const cajasBase = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  }= useQuery( OBTENER_CORTES_CAJA,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                fecha_consulta: datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                numero_caja: datosFiltro.numero_caja ? parseInt(datosFiltro.numero_caja) : null\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    if(cajasBase.loading === false && loading === false){\r\n        cajas = cajasBase.data.obtenerCajasSucursal;\r\n        historialCortes = data.obtenerCortesDeCaja;\r\n    }\r\n\r\n    const handleClickOpen = () => {setOpen(!open)};\r\n\r\n    const obtenerDatos = (e) => { \r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarDatos = () => {\r\n        setDatosFiltro([]);\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <ExportExcel historialCortes={historialCortes} /> \r\n                    \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha de corte:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_consulta\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={obtenerDatos}\r\n                                    value={datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\"}\r\n                                />\r\n                            </Box>\r\n                            <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                                <Box width=\"100%\">\r\n                                    <Typography>\r\n                                        Usuario:\r\n                                    </Typography>\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"usuario\"\r\n                                        variant=\"outlined\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n                                    />\r\n                                </Box>\r\n                            </form>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Caja:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"numero_caja\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.numero_caja ? datosFiltro.numero_caja : \"\"}\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        {\r\n                                            cajas?.map((caja) =>{\r\n                                                return(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                );\r\n                                            })\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box \r\n                                width=\"100%\" \r\n                                display=\"flex\" \r\n                                justifyContent=\"center\" \r\n                                alignItems=\"center\"\r\n                                mt={2}\r\n                            >\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarDatos}\r\n                                >\r\n                                    Limpiar Filtro\r\n                                </Button>\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <TablaComprasFiltradas cortes={historialCortes} loading={loading} />\r\n                    </Grid>\r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_EGRESOS = gql`\r\n    query ObtenerHistorialEgresos($input: ObtenerHistorialEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialEgresos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            folio_egreso\r\n            folio_factura\r\n            empresa_distribuidora\r\n            provedor\r\n            productos {\r\n                cantidad_productos\r\n                precio_unitario\r\n                producto\r\n                total\r\n            }\r\n            categoria\r\n            subCategoria\r\n            metodo_pago\r\n            fecha_compra\r\n            fecha_registro\r\n            fecha_vencimiento\r\n            observaciones\r\n            compra_credito\r\n            credito_pagado\r\n            saldo_credito_pendiente\r\n            saldo_total\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            id_user\r\n            empresa\r\n            sucursal         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_EGRESO = gql`\r\n    mutation CrearEgreso($input: CrearEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearEgreso(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, Grid, MenuItem, Select, Slide, TextField, Typography } from '@material-ui/core';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_EGRESOS } from '../../../../gql/Tesoreria/egresos';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 170 },\r\n\t{ id: 'nombre', label: 'Usuario', minWidth: 170 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 170 },\r\n\t{ id: 'folioF', label: 'Folio Factura', minWidth: 170 },\r\n\t{ id: 'tipo', label: 'Tipo Compra', minWidth: 170 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\t\troot: {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '70vh'\r\n\t\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nexport default function ListaEgresos() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [datosFiltro, setDatosFiltro] = useState([]);\r\n\tconst [value] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n\tconst { loading, data, error, refetch  } = useQuery( OBTENER_HISTORIAL_EGRESOS,{\r\n\t\tvariables: {\r\n\t\t\tinput: {\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? (datosFiltro.tipo_movimiento === \"CREDITO\" ?  true : false) : null\r\n            },\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch]);\r\n\r\n\t\r\n\tlet historialEgresos = [];\r\n\r\n\tif(data){\r\n\t\thistorialEgresos = data.obtenerHistorialEgresos\r\n\t}\r\n\r\n\tconst obtenerDatos =(e)=>{\r\n\t\tsetDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n\tconst limpiarDatos = () => {\r\n\t\tsetDatosFiltro([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Inicio:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_inicio\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Fin:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_fin\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tTipo Egreso:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_movimiento\"\r\n\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"TODOS\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CONTADO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Contado\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CREDITO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Credito\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"center\" \r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={limpiarDatos}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLimpiar Filtro\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid> \r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historialEgresos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsEgresos row={row} loading={loading} key={index} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction RowsEgresos({row, loading}){\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t>\r\n\t\t\t\t<DialogCaracteristicas row={row}  />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={row.code}\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_egreso}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.nombre_usuario_creador}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.fecha_compra}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_factura}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.compra_credito === false ? \"Contado\" : \"Credito\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction DialogCaracteristicas ({row}) {\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={5} xs={12}>\r\n\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Fecha Compra: </b> {moment(row.fecha_compra).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio movimiento: </b> {row.folio_egreso}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Usuario: </b> {row.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Categoria: </b> {row.categoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Sub-Categoria: </b> {row.subCategoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio Factura: </b> {row.folio_factura}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Empresa: </b> {row.empresa_distribuidora}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Provedor: </b> {row.provedor}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Metodo de pago: </b> {row.metodo_pago}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Compra credito: </b> {row.compra_credito === false ? \"NO\" : \"Si\"}\r\n\t\t\t\t\t\t\t\t{row.compra_credito === false ? null : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Fecha Vencimiento: </b> {row.fecha_vencimiento}\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Saldo Pendiente: </b> {row.saldo_credito_pendiente}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={7} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\tProductos Adquiridos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Paper style={{width: '100%', height: '30vh'}}>\r\n\t\t\t\t\t\t\t\t<TableContainer style={{maxHeight: '100%'}}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANTIDAD\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPRODUCTO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP. UNITARIO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTOTAL\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t{row?.productos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableRow \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.cantidad_productos}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.producto}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.precio_unitario}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.total}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent='flex-end' p={1}> \r\n\t\t\t\t\t\t\t<Typography variant='h6'>\r\n\t\t\t\t\t\t\t\tTotal: ${formatoMexico(row.saldo_total)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</DialogContent>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Grid, IconButton, InputBase } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\n\r\nconst columns = [\r\n  { id: \"name\", label: \"Name\", minWidth: 170 },\r\n  { id: \"code\", label: \"ISO\\u00a0Code\", minWidth: 100 },\r\n  {\r\n    id: \"population\",\r\n    label: \"Population\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toLocaleString(\"en-US\"),\r\n  },\r\n  {\r\n    id: \"size\",\r\n    label: \"Size\\u00a0(km\\u00b2)\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toLocaleString(\"en-US\"),\r\n  },\r\n  {\r\n    id: \"density\",\r\n    label: \"Density\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toFixed(2),\r\n  },\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n  const density = population / size;\r\n  return { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n  createData(\"India\", \"IN\", 1324171354, 3287263),\r\n  createData(\"China\", \"CN\", 1403500365, 9596961),\r\n  createData(\"Italy\", \"IT\", 60483973, 301340),\r\n  createData(\"United States\", \"US\", 327167434, 9833520),\r\n  createData(\"Canada\", \"CA\", 37602103, 9984670),\r\n  createData(\"Australia\", \"AU\", 25475400, 7692024),\r\n  createData(\"Germany\", \"DE\", 83019200, 357578),\r\n  createData(\"Ireland\", \"IE\", 4857000, 70273),\r\n  createData(\"Mexico\", \"MX\", 126577691, 1972550),\r\n  createData(\"Japan\", \"JP\", 126317000, 377973),\r\n  createData(\"France\", \"FR\", 67022000, 640679),\r\n  createData(\"United Kingdom\", \"GB\", 67545757, 242495),\r\n  createData(\"Russia\", \"RU\", 146793744, 17098246),\r\n  createData(\"Nigeria\", \"NG\", 200962417, 923768),\r\n  createData(\"Brazil\", \"BR\", 210147125, 8515767),\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"100%\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ListaTransferencias() {\r\n  const classes = useStyles();\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(14);\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  return (\r\n    <Grid>\r\n      <div className={classes.root}>\r\n        <Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n          <Box mr={5} minWidth=\"70%\">\r\n            <Paper className={classes.rootBusqueda}>\r\n              <InputBase\r\n                fullWidth\r\n                placeholder=\"Buscar transferencias...\"\r\n                // onChange={(e) => setValues(e.target.value)}\r\n                // onKeyPress={pressEnter}\r\n                // value={values}\r\n              />\r\n              <IconButton>\r\n                <Search />\r\n              </IconButton>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </div>\r\n      <Box p={2}>\r\n        <Paper className={classes.root}>\r\n          <TableContainer className={classes.container}>\r\n            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column) => (\r\n                    <TableCell\r\n                      key={column.id}\r\n                      align={column.align}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {rows\r\n                  .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                  .map((row) => {\r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        role=\"checkbox\"\r\n                        tabIndex={-1}\r\n                        key={row.code}\r\n                      >\r\n                        {columns.map((column) => {\r\n                          const value = row[column.id];\r\n                          return (\r\n                            <TableCell key={column.id} align={column.align}>\r\n                              {column.format && typeof value === \"number\"\r\n                                ? column.format(value)\r\n                                : value}\r\n                            </TableCell>\r\n                          );\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <TablePagination\r\n            rowsPerPageOptions={[10, 25, 100]}\r\n            component=\"div\"\r\n            count={rows.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            onChangePage={handleChangePage}\r\n            onChangeRowsPerPage={handleChangeRowsPerPage}\r\n          />\r\n        </Paper>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\r\nimport {FcSurvey } from 'react-icons/fc';\r\n\r\nimport ListaEgresos from './ListaEgresos';\r\nimport ListaTransferencias from './ListaTransferencias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ReportesTesoreria() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ventana, setVentana] = useState('');\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                        <FcSurvey style={{fontSize: 100}}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Tesoreria\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\t id=\"customized-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('egresos')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Egresos\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('transferencias')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Transferencias\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistotorial de {ventana}\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tventana === 'egresos' ? (\r\n\t\t\t\t\t\t\t<ListaEgresos />\r\n\t\t\t\t\t\t) : ventana === 'transferencias' ?(\r\n\t\t\t\t\t\t\t<ListaTransferencias />\t\t\t\r\n\t\t\t\t\t\t) :(\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport Cajas from './Cajas/Cajas';\r\nimport ReportesTurnosUsuarios from './TurnosUsuarios/ReportesTurnosUsuarios';\r\nimport ReportesCompras from './Compras/ReportesCompras';\r\nimport ReportesVentas from './Ventas/ReportesVentas';\r\nimport ReportesAlmacen from './Almacenes/ReportesAlmacen';\r\nimport ReportesCortes from './Cortes/ReportesCortes';\r\nimport ReportesTesoreria from './Tesoreria/Reporte_Tesoreria';\r\n\r\nexport default function Reportes() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_historial_cajas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_turnos.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTurnosUsuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_compras.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCompras />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_ventas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesVentas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.rerporte_almacen.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_corte_caja.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCortes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* {permisosUsuario.accesos.reportes.reporte_tesoreria.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTesoreria />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { FcShop, FcPaid, FcSurvey, FcNews } from \"react-icons/fc\";\r\nimport { Toolbar, Box, Tab, Tabs, AppBar } from \"@material-ui/core\";\r\nimport Empresa from \"./Empresa/Empresa\";\r\nimport Compras from \"./Compras/Compras\";\r\nimport Catalogos from \"./Catalogos/Catalogos\";\r\nimport IndexTesoreria from \"./Tesoreria/IndexTesoreria\";\r\nimport Facturacion from \"./Facturacion/Facturacion\";\r\nimport Almacenes from \"./Almacenes/Almacenes\";\r\nimport { withRouter } from \"react-router\";\r\nimport Reportes from \"./Reportes/Reportes\";\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} my={6} minHeight=\"50vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  iconSvgVenta: {\r\n    width: 90,\r\n  },\r\n}));\r\n\r\nfunction AdminInicio(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Toolbar />\r\n      <Box>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            centered /* variant=\"scrollable\" */\r\n            scrollButtons=\"on\"\r\n          >\r\n            <Tab\r\n              label=\"Mi empresa\"\r\n              icon={<FcShop className={classes.icon} />}\r\n              {...a11yProps(0)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Catalogos\"\r\n              icon={<FcNews className={classes.icon} />}\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              label=\"Almacenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Compras\"\r\n              icon={<FcPaid className={classes.icon} />}\r\n              {...a11yProps(3)}\r\n            />\r\n            {/*  <Tab\r\n              label=\"Ventas\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n              onClick={() => props.history.push(\"/ventas/venta-general\")}\r\n            /> */}\r\n            <Tab\r\n              label=\"Reportes\"\r\n              icon={<FcSurvey className={classes.icon} />}\r\n              {...a11yProps(4)}\r\n            />\r\n            <Tab\r\n              label=\"Tesoreria\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                  alt=\"icono money\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(5)}\r\n            />\r\n            <Tab\r\n              label=\"Facturación\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                  alt=\"icono factura\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(6)}\r\n            />\r\n          </Tabs>\r\n        </AppBar>\r\n        <SwipeableViews\r\n          axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\r\n          index={value}\r\n          onChangeIndex={handleChangeIndex}\r\n        >\r\n          <TabPanel value={value} index={0}>\r\n            <Empresa />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <Catalogos />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <Almacenes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={3}>\r\n            <Compras />\r\n          </TabPanel>\r\n          {/* <TabPanel value={value} index={4}>\r\n            ventas\r\n          </TabPanel> */}\r\n          <TabPanel value={value} index={4}>\r\n            <Reportes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={5}>\r\n            <IndexTesoreria />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={6}>\r\n            <Facturacion />\r\n          </TabPanel>\r\n        </SwipeableViews>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AdminInicio);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Box, Typography, Toolbar, AppBar } from \"@material-ui/core\";\r\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\nimport { ShoppingCart } from \"@material-ui/icons\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appbar: {\r\n    backgroundColor: theme.palette.navbar,\r\n    color: grey[800],\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction NavegacionAdmin(props) {\r\n  const classes = useStyles();\r\n  const token = localStorage.getItem(\"sesionCafi\");\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let usuario;\r\n\r\n  if (token !== null) usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const signOut = () => {\r\n    localStorage.removeItem(\"sesionCafi\");\r\n    localStorage.removeItem(\"tokenCafi\");\r\n    localStorage.removeItem(\"ListaEnEspera\");\r\n    props.history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AppBar position=\"fixed\" className={classes.appbar} elevation={0}>\r\n        <Toolbar>\r\n          <Avatar alt=\"Remy Sharp\" src={usuario.imagen} />\r\n          <Box className={classes.title}>\r\n            <Typography variant=\"h6\" color=\"inherit\">\r\n              Bienvenido {`${usuario.nombre}`}\r\n            </Typography>\r\n          </Box>\r\n          <Button\r\n            component={Link}\r\n            to=\"/ventas/venta-general\"\r\n            size=\"large\"\r\n            className={classes.menuButton}\r\n            startIcon={<ShoppingCart />}\r\n          >\r\n            Panel de venta\r\n          </Button>\r\n          {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n            <Button\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              className={classes.menuButton}\r\n              variant=\"contained\"\r\n              disabled={true}\r\n            >\r\n              TURNO ACTIVO\r\n            </Button>\r\n          ) : (\r\n            <CerrarSesionDialog signOut={signOut} />\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst CerrarSesionDialog = ({ signOut }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"secondary\"\r\n        size=\"large\"\r\n        className={classes.menuButton}\r\n        startIcon={<PowerSettingsNewIcon />}\r\n        variant=\"contained\"\r\n        onClick={handleClickOpen}\r\n      >\r\n        Cerrar sesión\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n      >\r\n        <DialogTitle>¿Seguro que deseas cerrar sesión?</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={signOut} color=\"secondary\" variant=\"contained\">\r\n            Cerrar sesión\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(NavegacionAdmin);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\t// backgroundColor: theme.palette.navbar,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerColor:{\r\n\t\theight: '95vh',\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.navbar\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\theight: '100%'\r\n\t},\r\n\tnavigationTop:{\r\n\t\theight: \"100%\"\r\n\t},\r\n\ticonSizeSuperior: {\r\n\t\tfontSize: 30,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n\ticonSizeInferior: {\r\n\t\tfontSize: 50,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondInferior: {\r\n\t\twidth: 40,\r\n\t},\r\n\ticonSizeSecondInferiorGrande: {\r\n\t\twidth: 100\r\n\t},\r\n\ticonSizeInferiorGrande:{\r\n\t\tfontSize: 110,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tavatar: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(1)\r\n\t},\r\n\tborderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot:{\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    rootPrecioProductos:{\r\n        minHeight: '40vh',\r\n    },\r\n    containerImage:{\r\n        maxWidth: 100,\r\n        maxHeight: 100,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    imagen:{\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootBusquedaProductos: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootFecha: {\r\n        height: 40,\r\n        maxWidth: 150,\r\n\t\tdisplay: 'flex',\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n    titulos: {\r\n        fontWeight: 500,\r\n        '& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n    },\r\n\tformInput: {\r\n\t\t// margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    iconSizeDialogs:{\r\n        width: 50,\r\n    },\r\n    iconSizeDialogsPequeno:{\r\n        width: 50,\r\n    },\r\n    containerImagenesProducto:{\r\n        height: \"150px\",\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    imagenProducto:{\r\n        maxHeight: '100%',\r\n        maxWidth: '100%'\r\n    },\r\n    borderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default useStyles","import React, { createContext, useState } from 'react';\r\n\r\nexport const VentasContext = createContext();\r\n\r\nexport const VentasProvider = ({ children }) => {\r\n    const [DatosVentasActual, setDatosVentasActual] = useState({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n        // tipo_cambio: {},\r\n      });\r\n    const [datosProductoVentas, setDatosProductoVentas] = useState(\r\n        {\r\n            _id: null,\r\n            cantidad: null,\r\n            codigo_barras: null,\r\n            concepto: null,\r\n            default: null,\r\n            descuento: null,\r\n            descuento_activo: null,\r\n            id_producto: {},\r\n            precio: null,\r\n            unidad: null,\r\n            unidad_principal: null\r\n        }\r\n    );\r\n    \r\n    const [productosVentas, setProductosVentas] = useState([]);\r\n    const [datosVentas, setDatosVentas] = useState(\r\n        {\r\n            productos: [],\r\n            cliente: {},\r\n            subtotal: 0,\r\n            impuestos: 0,\r\n            total: 0,\r\n            usuario: {}\r\n        }\r\n    );\r\n\r\n    const [ productoCambioPrecio, setProductoCambioPrecio ] = useState({});\r\n    const [ precioSelectProductoVenta, setPrecioSelectProductoVenta ] = useState([]);\r\n    const [ clientesVentas, setClientesVentas ] = useState([]);\r\n    const [ turnoActivo, setTurnoActivo ] = useState();\r\n    const [ ubicacionTurno, setUbicacionTurno ] = useState('');\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ alert, setAlert ] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ abrirTurnosDialog, setAbrirTurnosDialog ] = useState(false);\r\n    const [ updateClientVenta, setUpdateClientVenta ] = useState(false);\r\n    const [ venta_retomada, setVentaRetomada] = useState(null);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // const [precioSeleccionadoTabla, setPrecioSeleccionadoTabla] = useState(false);\r\n\r\n    const [updateTablaVentas, setUpdateTablaVentas] = useState(false);\r\n    const [openBackDrop, setOpenBackDrop] = useState(false);\r\n    const [openBuscarProducto, setOpenBuscarProducto] = useState(false);\r\n\r\n\treturn (\r\n\t\t<VentasContext.Provider value={\r\n            { \r\n                alert, \r\n                setAlert,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                datosProductoVentas,\r\n                setDatosProductoVentas,\r\n                productosVentas,\r\n                setProductosVentas,\r\n                datosVentas,\r\n                setDatosVentas,\r\n                abrirTurnosDialog, \r\n                setAbrirTurnosDialog,\r\n                setUpdateClientVenta,\r\n                updateClientVenta,\r\n                setProductoCambioPrecio,\r\n                productoCambioPrecio,\r\n                setPrecioSelectProductoVenta,\r\n                precioSelectProductoVenta,\r\n                setUpdateTablaVentas,\r\n                updateTablaVentas,\r\n                setOpen,\r\n                open,\r\n                clientesVentas, \r\n                setClientesVentas,\r\n                turnoActivo, \r\n                setTurnoActivo,\r\n                ubicacionTurno, \r\n                setUbicacionTurno,\r\n                DatosVentasActual, setDatosVentasActual,\r\n                // precioSeleccionadoTabla,\r\n                // setPrecioSeleccionadoTabla\r\n                setOpenBackDrop,\r\n                openBackDrop,\r\n                venta_retomada, \r\n                setVentaRetomada,\r\n                openBuscarProducto,\r\n                setOpenBuscarProducto\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</VentasContext.Provider>\r\n\t);\r\n};","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { CircularProgress, IconButton, TextField } from \"@material-ui/core\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { CREAR_CUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CrearNuevaCuenta({ refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [cuenta, setCuenta] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChangeCuenta = (value) => setCuenta(value);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!cuenta) return;\r\n    try {\r\n      setLoading(true);\r\n      await crearCuenta({\r\n        variables: {\r\n          input: {\r\n            cuenta,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: \"Guardado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      setAlert({\r\n        message: \"Hubo un error\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"primary\" onClick={handleClickOpen}>\r\n        <Add />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>Nueva cuenta</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            label=\"Cuenta\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            fullWidth\r\n            onChange={(e) => handleChangeCuenta(e.target.value)}\r\n            value={cuenta}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleSubmit()}\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { TextField, CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SUBCUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CrearNuevaSubcuenta({ cuenta, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [subcuenta, setSubcuenta] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n\r\n  const inputRef = React.useRef(null);\r\n\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChangeSubcuenta = (value) => setSubcuenta(value);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!subcuenta) return;\r\n    try {\r\n      setLoading(true);\r\n      await crearSubcuenta({\r\n        variables: {\r\n          input: {\r\n            subcuenta,\r\n          },\r\n          idCuenta: cuenta._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: \"Guardado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      setAlert({\r\n        message: \"Hubo un error\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (open) {\r\n      if (e.keyCode === 86 || e.keyCode === 67) {\r\n        inputRef.current.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!cuenta.cuenta}\r\n      >\r\n        <Add />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>Nueva Subcuenta</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            id=\"subcuenta-venta\"\r\n            label=\"Subcuenta\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            fullWidth\r\n            onChange={(e) => handleChangeSubcuenta(e.target.value)}\r\n            value={subcuenta}\r\n            inputRef={inputRef}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleSubmit()}\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  InputLabel,\r\n  ListSubheader,\r\n  MenuItem,\r\n  Radio,\r\n  RadioGroup,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { OBTENER_CUENTAS } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport {\r\n  CREAR_HISTORIAL_CAJA,\r\n  OBTENER_PRE_CORTE_CAJA,\r\n} from \"../../../../gql/Cajas/cajas\";\r\nimport useStyles from \"../../styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport CrearNuevaCuenta from \"./crearNuevaCuenta\";\r\nimport CrearNuevaSubcuenta from \"./CrearSubcuenta\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DepositoRetiroCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [CrearHistorialCaja] = useMutation(CREAR_HISTORIAL_CAJA);\r\n\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [error_data, setError] = useState(false);\r\n  const [cargando, setCargando] = useState(false);\r\n  const [datosMovimiento, setDatosMovimiento] = useState({\r\n    tipo_movimiento: \"DEPOSITO\",\r\n  });\r\n  const [cuenta, setCuenta] = useState({ cuenta: \"\", subcuentas: [] });\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n    },\r\n  });\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const preCorteDeCaja = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    preCorteDeCaja.refetch();\r\n  };\r\n\r\n  var dineroEnCaja = 0;\r\n\r\n  if (!data || !preCorteDeCaja.data) {\r\n    return <ComponenteSinConexion />;\r\n  } else {\r\n    dineroEnCaja =\r\n      preCorteDeCaja.data.obtenerPreCorteCaja.monto_efectivo_precorte;\r\n  }\r\n\r\n  if (loading || error || preCorteDeCaja.loading || preCorteDeCaja.error)\r\n    return <ComponenteSinConexion />;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 68) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const obtenerCuenta = (_, child) => {\r\n    const { cuenta } = child.props;\r\n    setCuenta({ cuenta: cuenta, subcuentas: cuenta.subcuentas });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosMovimiento({ ...datosMovimiento, [name]: value });\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setCargando(true);\r\n    try {\r\n      if (!turnoEnCurso && sesion?.turno_en_caja_activo === false) {\r\n        setCargando(false);\r\n        setAlert({\r\n          message: `Por el momento no hay ningun turno activo.`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return null;\r\n      } else {\r\n        if (\r\n          !datosMovimiento.tipo_movimiento ||\r\n          !datosMovimiento.monto_efectivo ||\r\n          !datosMovimiento.concepto\r\n        ) {\r\n          setError(true);\r\n          setCargando(false);\r\n          setAlert({\r\n            message: `Por favor complete los datos.`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n          return null;\r\n        } else {\r\n          if (\r\n            datosMovimiento.tipo_movimiento === \"RETIRO\" &&\r\n            dineroEnCaja < parseFloat(datosMovimiento.monto_efectivo)\r\n          ) {\r\n            setCargando(false);\r\n            setAlert({\r\n              message:\r\n                \"Lo sentimos no hay dinero suficiente en la caja para esta acción.\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n            return null;\r\n          }\r\n          const input = {\r\n            tipo_movimiento: datosMovimiento.tipo_movimiento,\r\n            concepto: datosMovimiento.concepto,\r\n            numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n            id_Caja: turnoEnCurso.id_caja,\r\n            horario_turno: turnoEnCurso.horario_en_turno,\r\n            rol_movimiento: \"CAJA\",\r\n            hora_moviento: {\r\n              hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n              minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n              segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n              completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n            },\r\n            fecha_movimiento: {\r\n              year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n              mes: moment().locale(\"es-mx\").format(\"DD\"),\r\n              dia: moment().locale(\"es-mx\").format(\"MM\"),\r\n              no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n              no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n              completa: moment().locale(\"es-mx\").format(),\r\n            },\r\n            id_User: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            montos_en_caja: {\r\n              monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.monto_efectivo),\r\n                metodo_pago: \"01\",\r\n              },\r\n              monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\",\r\n              },\r\n              monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\",\r\n              },\r\n              monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\",\r\n              },\r\n              monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\",\r\n              },\r\n              monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\",\r\n              },\r\n              monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\",\r\n              },\r\n              monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\",\r\n              },\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          };\r\n          await CrearHistorialCaja({\r\n            variables: {\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n              input,\r\n            },\r\n          });\r\n          setAlert({\r\n            message: `Registro de movimiento exitoso.`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          handleClickOpen();\r\n          setCargando(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setCargando(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  const handleTipoMovimiento = (e, tipo_movimiento) => {\r\n    setDatosMovimiento({ ...datosMovimiento, tipo_movimiento });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Deposito/Retiro</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + D</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box display=\"flex\" textAlign=\"center\">\r\n            <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={1}>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Deposito/Retiro Caja</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n                disabled={cargando}\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Box m={2}>\r\n            {sesion.turno_en_caja_activo === true ? (\r\n              <Fragment>\r\n                <Box width=\"100%\">\r\n                  <FormControl component=\"fieldset\">\r\n                    <RadioGroup\r\n                      row\r\n                      aria-label=\"position\"\r\n                      name=\"position\"\r\n                      value={datosMovimiento.tipo_movimiento}\r\n                      onChange={handleTipoMovimiento}\r\n                    >\r\n                      <FormControlLabel\r\n                        value=\"DEPOSITO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Deposito\"\r\n                      />\r\n                      <FormControlLabel\r\n                        value=\"RETIRO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Retiro\"\r\n                      />\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Typography>Monto:</Typography>\r\n                  <Box display=\"flex\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      name=\"monto_efectivo\"\r\n                      onChange={obtenerDatos}\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      error={error_data && !datosMovimiento.monto_efectivo}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Box my={1}>\r\n                    <Typography>Concepto de Movimiento:</Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      error={error_data && !datosMovimiento.concepto}\r\n                    >\r\n                      <InputLabel id=\"label-select-cuenta\">Cuenta</InputLabel>\r\n                      <Select\r\n                        id=\"concepto-deposito-cuenta\"\r\n                        onChange={obtenerCuenta}\r\n                        name=\"cuenta\"\r\n                        labelId=\"label-select-cuenta\"\r\n                        label=\"Cuenta\"\r\n                        value={cuenta.cuenta.cuenta ? cuenta.cuenta.cuenta : \"\"}\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {data?.obtenerCuentas.map((cuenta, index) => {\r\n                          return (\r\n                            <MenuItem\r\n                              key={index}\r\n                              value={cuenta.cuenta}\r\n                              cuenta={cuenta}\r\n                            >\r\n                              {cuenta.cuenta}\r\n                            </MenuItem>\r\n                          );\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                    <CrearNuevaCuenta refetch={refetch} />\r\n                  </Box>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      error={error_data && !datosMovimiento.concepto}\r\n                    >\r\n                      <InputLabel id=\"label-select-subcuenta\">\r\n                        Subcuenta\r\n                      </InputLabel>\r\n                      <Select\r\n                        id=\"concepto-deposito-subcuenta\"\r\n                        onChange={obtenerDatos}\r\n                        name=\"concepto\"\r\n                        labelId=\"label-select-subcuenta\"\r\n                        label=\"Subcuenta\"\r\n                        value={\r\n                          datosMovimiento.concepto\r\n                            ? datosMovimiento.concepto\r\n                            : \"\"\r\n                        }\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {cuenta.subcuentas.map((subcuenta, index) => {\r\n                          return (\r\n                            <MenuItem key={index} value={subcuenta.subcuenta}>\r\n                              {subcuenta.subcuenta}\r\n                            </MenuItem>\r\n                          );\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                    <CrearNuevaSubcuenta cuenta={cuenta} refetch={refetch} />\r\n                  </Box>\r\n                </Box>\r\n              </Fragment>\r\n            ) : (\r\n              <Box textAlign=\"center\" p={2}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Por el momento no hay un turno en sesión</b>\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={cargando}\r\n            startIcon={\r\n              cargando ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      disabled\r\n      style={{\r\n        textTransform: \"none\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        pointerEvents: \"none\",\r\n        opacity: 0.5,\r\n      }}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Typography variant=\"body2\">\r\n          <b>Deposito/Retiro</b>\r\n        </Typography>\r\n        <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n          <b>Alt + D</b>\r\n        </Typography>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  InputAdornment,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nmoment.locale(\"es\");\r\n\r\nfunction CerrarTurno(props) {\r\n  const { handleClickOpen, setLoading, loading } = props;\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  const { setAlert, /* setTurnoActivo, */ ubicacionTurno } = useContext(\r\n    VentasContext\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const classes = useStyles();\r\n  const [montoTurno, setMontoTurno] = useState([]);\r\n  const [cerrarTurno, setCerrarTurno] = useState([]);\r\n  const [montoResguardo, setMontoResguardo] = useState(0);\r\n  const [montoRetiro, setMontoRetiro] = useState(0);\r\n  const [montosTotales, setMontosTotales] = useState(0);\r\n\r\n  const obtenerCamposMontos = (e) => {\r\n    const montos = { ...montoTurno, [e.target.name]: e.target.value };\r\n    setMontoTurno(montos);\r\n\r\n    let sum = 0;\r\n    for (const property in montos) {\r\n      sum += parseFloat(montos[property]);\r\n    }\r\n    setMontosTotales(sum);\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setCerrarTurno({ ...cerrarTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const obtenerMontoResguardo = (e) => {\r\n    const montoEfectivo = parseFloat(montoTurno.monto_efectivo);\r\n    const montoResguardo = parseFloat(e.target.value);\r\n    const montoTranferir = montoEfectivo - montoResguardo;\r\n\r\n    if (Math.sign(montoTranferir) === -1) {\r\n      return;\r\n    }\r\n\r\n    /* if(montoResguardo > ) */\r\n    setMontoResguardo(montoResguardo);\r\n    setMontoRetiro(montoTranferir);\r\n  };\r\n\r\n  const obtenerMontoTransfer = (e) => {\r\n    const montoEfectivo = parseFloat(montoTurno.monto_efectivo);\r\n    const montoTranferir = parseFloat(e.target.value);\r\n    const montoResguardo = montoEfectivo - montoTranferir;\r\n\r\n    if (Math.sign(montoResguardo) === -1) {\r\n      return;\r\n    }\r\n\r\n    setMontoResguardo(montoResguardo);\r\n    setMontoRetiro(montoTranferir);\r\n  };\r\n\r\n  const input = {\r\n    horario_en_turno: cerrarTurno.horario_en_turno,\r\n    concepto: \"CERRAR TURNO\",\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n    numero_caja: turnoEnCurso ? turnoEnCurso?.numero_caja.toString() : \"\",\r\n    comentarios: cerrarTurno.comentarios,\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    empresa: sesion.empresa._id,\r\n    sucursal: sesion.sucursal._id,\r\n    id_usuario: sesion._id,\r\n    usuario_en_turno: {\r\n      nombre: sesion.nombre,\r\n      telefono: sesion.telefono,\r\n      numero_usuario: sesion.numero_usuario.toString(),\r\n      email: sesion.email,\r\n    },\r\n    hora_entrada: {\r\n      hora: \"\",\r\n      minutos: \"\",\r\n      segundos: \"\",\r\n      completa: \"\",\r\n    },\r\n    hora_salida: {\r\n      hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n      minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n      segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n      completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n    },\r\n    fecha_entrada: {\r\n      year: \"\",\r\n      mes: \"\",\r\n      dia: \"\",\r\n      no_semana_year: \"\",\r\n      no_dia_year: \"\",\r\n      completa: \"\",\r\n    },\r\n    fecha_salida: {\r\n      year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n      mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n      dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n      no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n      no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n      completa: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    },\r\n    fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n    montoRetiro,\r\n    montos_en_caja: {\r\n      monto_efectivo: {\r\n        monto: parseFloat(montoResguardo),\r\n        metodo_pago: \"01\",\r\n      },\r\n      monto_tarjeta_debito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_debito ? montoTurno.monto_tarjeta_debito : 0\r\n        ),\r\n        metodo_pago: \"28\",\r\n      },\r\n      monto_tarjeta_credito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_credito\r\n            ? montoTurno.monto_tarjeta_credito\r\n            : 0\r\n        ),\r\n        metodo_pago: \"04\",\r\n      },\r\n      monto_creditos: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_creditos ? montoTurno.monto_creditos : 0\r\n        ),\r\n        metodo_pago: \"99\",\r\n      },\r\n      monto_monedero: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_puntos ? montoTurno.monto_puntos : 0\r\n        ),\r\n        metodo_pago: \"05\",\r\n      },\r\n      monto_transferencia: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_transferencia ? montoTurno.monto_transferencia : 0\r\n        ),\r\n        metodo_pago: \"03\",\r\n      },\r\n      monto_cheques: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_cheques ? montoTurno.monto_cheques : 0\r\n        ),\r\n        metodo_pago: \"02\",\r\n      },\r\n      monto_vales_despensa: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_vales_despensa ? montoTurno.monto_vales_despensa : 0\r\n        ),\r\n        metodo_pago: \"08\",\r\n      },\r\n    },\r\n  };\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: false,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  const actualizarTurnoSesion = (ubicacionTurno) => {\r\n    if (ubicacionTurno === \"SESION\") {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      props.history.push(\"/\");\r\n    } else {\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n    }\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!cerrarTurno.horario_en_turno) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor elija que turno está cerrando`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: false,\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `Turno cerrado con exito`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n\r\n        actualizarTurnoSesion(ubicacionTurno);\r\n        /* setLoading(false); */\r\n        /*  setTurnoActivo(true); */\r\n        window.location.reload();\r\n      }\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  console.log(montoTurno);\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Montos a Depositar</b>\r\n          </Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Monto Efectivo:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_efectivo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={(e) => {\r\n                obtenerCamposMontos(e);\r\n                setMontoResguardo(parseFloat(e.target.value));\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}> Creditos:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_creditos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjetas y Transferencias:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_debito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          {/* <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjeta Credito:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_credito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid> */}\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Monedero:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_puntos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n         {/*  <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Transferencias:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_transferencia\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid> */}\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Cheques:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_cheques\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              Vales de despensa:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_vales_despensa\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} display=\"flex\">\r\n          <Typography>\r\n            <b>Monto total efectivo: </b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography>${formatoMexico(montoTurno.monto_efectivo)}</Typography>\r\n        </Box>\r\n        <Box mb={2} display=\"flex\">\r\n          <Typography>\r\n            <b>Montos totales: </b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography>${formatoMexico(montosTotales)}</Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span> Turno:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !cerrarTurno.horario_en_turno}\r\n            >\r\n              <Select\r\n                onChange={obtenerCampos}\r\n                id=\"form-producto-tipo\"\r\n                name=\"horario_en_turno\"\r\n                value={\r\n                  cerrarTurno.horario_en_turno\r\n                    ? cerrarTurno.horario_en_turno\r\n                    : \"\"\r\n                }\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Typography className={classes.titulos}>\r\n              Mantener en caja:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_reguardo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              value={montoResguardo}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerMontoResguardo}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Typography className={classes.titulos}>\r\n              Retirar de caja:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_transferencia\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              value={montoRetiro}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerMontoTransfer}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}>Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              multiline\r\n              onChange={obtenerCampos}\r\n              rows={2}\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(CerrarTurno);\r\n","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  Divider,\r\n  makeStyles,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CerrarTurno from \"./CerrarTurno\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nmoment.locale(\"es\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Turnos() {\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    /* setTurnoActivo, */\r\n  } = useContext(VentasContext);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setAbrirTurnosDialog(!abrirTurnosDialog);\r\n    /* setTurnoActivo(true); */\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 85) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n        >\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cerrar turno</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + U</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n        open={abrirTurnosDialog}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box display=\"flex\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Cerrar turno</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <CerrarTurno\r\n          setLoading={setLoading}\r\n          loading={loading}\r\n          handleClickOpen={handleClickOpen}\r\n        />\r\n        {/* <ContenidoTurnos handleClickOpen={handleClickOpen} value={value} /> */}\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\n/* \r\nconst ContenidoTurnos = ({ handleClickOpen, value }) => {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  if (loading) return <BackdropComponent loading={loading} />;\r\n\r\n  return (\r\n    <DialogContent style={{ padding: 0 }}>\r\n      {sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n        <TabPanel style={{ padding: 0 }} value={value} index={0}>\r\n          <CerrarTurno\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      ) : (\r\n        <TabPanel value={value} index={0}>\r\n          <AbrirTurno\r\n            loading={loading}\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      )}\r\n    </DialogContent>\r\n  );\r\n}; */\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const AccesosContext = createContext();\r\n\r\nexport const AccesosProvider = ({ children }) => {\r\n\r\n    const [ abrirPanelAcceso, setAbrirPanelAcceso ] = useState(false);\r\n    const [ departamentos, setDepartamentos ] = useState({departamento: '', subDepartamento: '', tipo_acceso: ''});\r\n\r\n    const [ reloadAdministrador, setReloadAdministrador ] = useState(false);\r\n    const [ reloadProductoRapido, setReloadProductoRapido ] = useState(false);\r\n    const [ reloadCancelarVenta, setReloadCancelarVenta ] = useState(false);\r\n    const [ reloadVerPrecios, setReloadVerPrecios ] = useState(false);\r\n    const [ reloadVerPreCorte, setReloadVerPreCorte ] = useState(false);\r\n    const [ reloadEliminarVentaEspera, setReloadEliminarVentaEspera ] = useState(false);\r\n    const [ reloadCrearCotizacion, setReloadCrearCotizacion ] = useState(false);\r\n\r\n    return (\r\n\t\t<AccesosContext.Provider value={\r\n            { \r\n                departamentos, \r\n                setDepartamentos,\r\n                reloadProductoRapido, \r\n                setReloadProductoRapido,\r\n                reloadAdministrador, \r\n                setReloadAdministrador,\r\n                abrirPanelAcceso, \r\n                setAbrirPanelAcceso,\r\n                reloadCancelarVenta, \r\n                setReloadCancelarVenta,\r\n                reloadVerPrecios, \r\n                setReloadVerPrecios,\r\n                reloadVerPreCorte, \r\n                setReloadVerPreCorte,\r\n                reloadEliminarVentaEspera, \r\n                setReloadEliminarVentaEspera,\r\n                reloadCrearCotizacion, \r\n                setReloadCrearCotizacion\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</AccesosContext.Provider>\r\n\t);\r\n};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport useStyles from \"../styles\";\r\nimport \"moment/locale/es\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRE_CORTE_CAJA } from \"../../../gql/Cajas/cajas\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nmoment.locale(\"es\");\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreCorteCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const {\r\n    reloadVerPreCorte,\r\n    setReloadVerPreCorte,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const { loading, error, data, refetch } = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.pre_corte.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"pre_corte\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPreCorte === true) {\r\n      setOpen(!open);\r\n      setReloadVerPreCorte(false);\r\n    }\r\n  }, [reloadVerPreCorte]);\r\n\r\n  if (!data || error || loading) {\r\n    return <ComponenteSinConexion />;\r\n  }\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 79) {\r\n      handleClickOpen();\r\n      refetch();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n          refetch();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pre corte caja</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + O</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container>\r\n            <Grid item lg={10}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n                    alt=\"icono caja\"\r\n                    className={classes.iconSizeDialogs}\r\n                  />\r\n                </Box>\r\n                <Box ml={2}>\r\n                  <Box textAlign=\"left\">\r\n                    <Typography variant=\"h6\">Pre-Corte de Caja</Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\">\r\n                    <Box textAlign=\"right\">\r\n                      <Typography variant=\"caption\">\r\n                        {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"right\" ml={2}>\r\n                      <Typography variant=\"caption\">\r\n                        <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={2}>\r\n              <Box\r\n                ml={4}\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"flex-end\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => setOpen(!open)}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon />\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid>\r\n            <Box p={2}>\r\n              {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                <>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Usuario: </b> {sesion.nombre}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Caja: </b>{\" \"}\r\n                      {turnoEnCurso ? turnoEnCurso.numero_caja : \"\"}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Fecha y hora al precorte: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\">\r\n                      {moment().locale(\"es-mx\").format(\"MMMM D YYYY, h:mm:ss a\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"center\" p={2}>\r\n                    <Typography variant=\"h6\">\r\n                      <b>Monto total en efectivo: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"h3\" style={{ color: \"green\" }}>\r\n                      <b>\r\n                        ${data?.obtenerPreCorteCaja?.monto_efectivo_precorte ? formatoMexico(data?.obtenerPreCorteCaja?.monto_efectivo_precorte) : 0.00}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <Box textAlign=\"center\" p={2}>\r\n                  <Typography variant=\"h6\">\r\n                    <b>Por el momento no hay un turno en sesión</b>\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n            <Button\r\n              onClick={() => setOpen(!open)}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              autoFocus\r\n            >\r\n              Imprimir\r\n            </Button>\r\n          ) : null}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n      disabled={true}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Pre corte caja</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + O</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Snackbar,\r\n  Typography,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { FcExpired } from \"react-icons/fc\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nmoment.locale(\"es\");\r\n\r\nexport default function VentaEnEspera() {\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const agregarVentaEnEspera = () => {\r\n    let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let datos = localStorage.getItem(\"ListaEnEspera\");\r\n\r\n    if (datosVenta !== null) {\r\n      if (datos === null) {\r\n        localStorage.setItem(\r\n          \"ListaEnEspera\",\r\n          JSON.stringify([{ datosVenta, fecha: moment().locale(\"es-mx\").format(\"MM/DD/YYYY\") }])\r\n        );\r\n        cleanData();\r\n        handleClickOpen();\r\n      } else {\r\n        let data = JSON.parse(datos);\r\n        data.push({ datosVenta, fecha: moment().locale(\"es-mx\").format(\"MM/DD/YYYY\") });\r\n        localStorage.setItem(\"ListaEnEspera\", JSON.stringify(data));\r\n        cleanData();\r\n        handleClickOpen();\r\n      }\r\n    }\r\n  };\r\n\r\n  const cleanData = () => {\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 69) {\r\n      agregarVentaEnEspera();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        onClick={() => agregarVentaEnEspera()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcExpired style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>En espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + E</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={3000}\r\n        onClose={handleClickOpen}\r\n        message=\"Compra agregada en espera\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  Grid,\r\n  InputAdornment,\r\n  makeStyles,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"../../sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInformacionRapido({\r\n  setAbrirTallaColor,\r\n  setCantidad,\r\n  cantidad,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    setDatosGenerales,\r\n    validacion,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    unidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n\r\n    if (e.target.value === \"CALZADO\" || e.target.value === \"ROPA\") {\r\n      setAbrirTallaColor(true);\r\n    }\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Typography>\r\n          <b>Información General</b>\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <Grid container spacing={2}>\r\n        <Grid item md={3} xs={12}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"codigo_barras\"\r\n            fullWidth\r\n          >\r\n            <Typography className={classes.titulos}>Código de barras</Typography>\r\n            <OutlinedInput\r\n              disabled={update && datos_generales.codigo_barras}\r\n              style={{ padding: 0 }}\r\n              id=\"form-producto-codigo-barras\"\r\n              name=\"codigo_barras\"\r\n              value={\r\n                datos_generales.codigo_barras\r\n                  ? datos_generales.codigo_barras\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <Button\r\n                    disabled={update && datos_generales.codigo_barras}\r\n                    onClick={() => GenCodigoBarras()}\r\n                    /* edge=\"end\" */\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                  >\r\n                    Generar\r\n                  </Button>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Clave alterna\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.clave_alterna}\r\n            name=\"clave_alterna\"\r\n            id=\"form-producto-clave-alterna\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.clave_alterna ? datos_generales.clave_alterna : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre comercial\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_comercial}\r\n            name=\"nombre_comercial\"\r\n            id=\"form-producto-nombre-comercial\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_comercial\r\n                ? datos_generales.nombre_comercial\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <CatalogosProductosSAT\r\n            refetch={refetch}\r\n            codigos={obtenerConsultasProducto.codigos}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 4 : 8}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre genérico\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_generico}\r\n            name=\"nombre_generico\"\r\n            id=\"form-producto-nombre-generico\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_generico\r\n                ? datos_generales.nombre_generico\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 2 : 4}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Tipo de producto\r\n          </Typography>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.tipo_producto}\r\n          >\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"tipo_producto\"\r\n              value={\r\n                datos_generales.tipo_producto\r\n                  ? datos_generales.tipo_producto\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n              <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n              <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n            </Select>\r\n            <FormHelperText>{validacion.message}</FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        {datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.titulos}>\r\n                <span className=\"obligatorio\">* </span>Cantidad en Almacen\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !cantidad}\r\n                name=\"cantidad\"\r\n                type=\"number\"\r\n                id=\"form-producto-nombre-generico\"\r\n                variant=\"outlined\"\r\n                value={cantidad ? cantidad : \"\"}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setCantidad(parseInt(e.target.value))}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Granel</Typography>\r\n              <FormControlLabel\r\n                control={<Checkbox onChange={obtenerChecks} name=\"granel\" />}\r\n                label=\"Vender a granel\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Medicamento</Typography>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    // checked={datos_generales.receta_farmacia ? datos_generales.receta_farmacia : false}\r\n                    onChange={checkFarmacia}\r\n                    name=\"receta_farmacia\"\r\n                  />\r\n                }\r\n                label=\"Necesita receta\"\r\n                name=\"receta_farmacia\"\r\n              />\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from \"@material-ui/core\";\r\nimport { Cached, Close, Edit } from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({ from, setOnUpdate, onUpdate }) {\r\n  const classes = useStyles();\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                {from && from === \"compra\" ? (\r\n                  <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_producto = { ...producto };\r\n\r\n  if (from && from === \"compra\") {\r\n    copy_producto.cantidad = 0;\r\n  }\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (event) => {\r\n    const { value, name } = event.target;\r\n    console.log(name);\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      let { iva, ieps } = precios;\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let varIVA = iva < 10 ? `0${iva}` : iva;\r\n      let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${varIVA}`) + parseFloat(`0.${varIEPS}`);\r\n      let precio_venta = parseFloat(precio_neto / (suma_impuestos + 1));\r\n      let iva_precio = parseFloat(precio_venta * parseFloat(`0.${varIVA}`));\r\n      let ieps_precio = parseFloat(precio_venta * parseFloat(`0.${varIEPS}`));\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(((precio_venta - PUCSI) / PUCSI) * 100);\r\n      copy_element_presentacion.precio_unidad.precio_venta = parseFloat(\r\n        precio_venta.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.precio_neto = parseFloat(\r\n        precio_neto.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.utilidad = parseFloat(\r\n        utilidad.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.iva_precio = parseFloat(\r\n        iva_precio.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.ieps_precio = parseFloat(\r\n        ieps_precio.toFixed(2)\r\n      );\r\n\r\n      copy_element_presentacion.precio = parseFloat(value);\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"precio\"\r\n            disabled={!copy_producto.nuevo ? true : disabledInput}\r\n          />\r\n          {copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Input\r\n          inputRef={textfield}\r\n          onChange={(e) => obtenerDatos(e)}\r\n          disabled={disabledInput}\r\n          value={copy_producto.precio}\r\n          type=\"tel\"\r\n          name=\"precio\"\r\n        />\r\n      </TableCell>\r\n      {from && from === \"compra\" ? (\r\n        <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <Input\r\n          inputRef={textfield}\r\n          onChange={(e) => obtenerDatos(e)}\r\n          disabled={disabledInput}\r\n          value={copy_producto.cantidad}\r\n          type=\"tel\"\r\n          name=\"cantidad\"\r\n        />\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Divider, Tooltip } from \"@material-ui/core\";\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n// import { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\n// import ContainerRegistroAlmacen from '../../../sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from \"../../../sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../../sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function TallasColoresRapidos({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  datos,\r\n  from,\r\n}) {\r\n  const {\r\n    // almacen_inicial,\r\n    // setAlmacenInicial,\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const { colores, tallas, calzados } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    const copy_presentaciones = [...presentaciones];\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      if (element.color._id) colors.push(element.color);\r\n      if (element.medida._id) medidas.push(element.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [presentaciones]);\r\n\r\n  // const obtenerAlmacenes = (event, child) => {\r\n  // \tsetAlmacenInicial({\r\n  // \t\t...almacen_inicial,\r\n  // \t\t[event.target.name]: event.target.value,\r\n  // \t\t[child.props.name]: child.props.id\r\n  // \t});\r\n  // };\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={9}>\r\n          <TablaPresentaciones\r\n            from={from}\r\n            setOnUpdate={setOnUpdate}\r\n            onUpdate={onUpdate}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3}>\r\n          <Box\r\n            width=\"100%\"\r\n            my={2}\r\n            style={\r\n              onUpdate.length > 0\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.4,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <Typography>\r\n              {datos_generales.tipo_producto === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n            </Typography>\r\n            <CrearTallasProducto\r\n              setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n              refetch={refetch}\r\n            />\r\n            <Grid container>\r\n              {medidas.map((talla, index) => (\r\n                <RenderTallas\r\n                  key={index}\r\n                  talla={talla}\r\n                  coloresSeleccionados={coloresSeleccionados}\r\n                  medidasSeleccionadas={medidasSeleccionadas}\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  // datos={datos}\r\n                />\r\n              ))}\r\n            </Grid>\r\n          </Box>\r\n          <Divider />\r\n          <Box\r\n            width=\"100%\"\r\n            mt={1}\r\n            style={\r\n              onUpdate.length > 0\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.4,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <Typography>Color</Typography>\r\n            <CrearColorProducto refetch={refetch} />\r\n            <Grid container>\r\n              {colores.map((color, index) => (\r\n                <Colores\r\n                  key={index}\r\n                  color={color}\r\n                  coloresSeleccionados={coloresSeleccionados}\r\n                  setColoresSeleccionados={setColoresSeleccionados}\r\n                  medidasSeleccionadas={medidasSeleccionadas}\r\n                  // datos={datos}\r\n                />\r\n              ))}\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  talla,\r\n  coloresSeleccionados,\r\n  medidasSeleccionadas,\r\n  setMedidasSeleccionadas,\r\n  // datos\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  // const seleccionarMedidas = useCallback(\r\n  // \t() => {\r\n  // \t\tmedidasSeleccionadas.forEach((res) => {\r\n  // \t\t\tif (res._id === talla._id) setSelected(true);\r\n  // \t\t});\r\n  // \t},\r\n  // \t[ talla._id, medidasSeleccionadas ]\r\n  // );\r\n\r\n  // useEffect(\r\n  // \t() => {\r\n  // \t\tif (datos.medidas_registradas) {\r\n  // \t\t\treturn seleccionarMedidas();\r\n  // \t\t}\r\n  // \t},\r\n  // \t[ seleccionarMedidas ]\r\n  // );\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: producto_medida,\r\n          color: { nombre: \"\", hex: \"\" },\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida._id === producto_medida._id\r\n        );\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: medidas_seleccionadas_temp[k],\r\n            color: array_medidad_finales[i].color,\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let varIVA = iva < 10 ? `0${iva}` : iva;\r\n          let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: {},\r\n            color: objeto_presentaciones_final.color,\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    presentaciones,\r\n    setPresentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  // const seleccionarColores = useCallback(\r\n  // \t() => {\r\n  // \t\tcoloresSeleccionados.forEach((res) => {\r\n  // \t\t\tif (res._id === color._id) setSelected(true);\r\n  // \t\t});\r\n  // \t},\r\n  // \t[ color._id, coloresSeleccionados ]\r\n  // );\r\n\r\n  // useEffect(\r\n  // \t() => {\r\n  // \t\tif (datos.medidas_registradas) {\r\n  // \t\t\treturn seleccionarColores();\r\n  // \t\t}\r\n  // \t},\r\n  // \t[ seleccionarColores ]\r\n  // );\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: {},\r\n          color: producto_color,\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.color._id === producto_color._id\r\n        );\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: array_medidad_finales[i].medida,\r\n            color: coloresSeleccionados[k],\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let varIVA = iva < 10 ? `0${iva}` : iva;\r\n          let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: objeto_presentaciones_final.medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { LOGEAR_USUARIO_ACCESOS } from \"../../gql/Catalogos/usuarios\";\r\nimport BackdropComponent from \"../Layouts/BackDrop\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n    paddingTop: 0,\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Acceso() {\r\n  const classes = useStyles();\r\n  const client = useApolloClient();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const {\r\n    departamentos,\r\n    abrirPanelAcceso,\r\n    setAbrirPanelAcceso,\r\n    setReloadProductoRapido,\r\n    setReloadAdministrador,\r\n    setReloadCancelarVenta,\r\n    setReloadVerPrecios,\r\n    setReloadVerPreCorte,\r\n    setReloadEliminarVentaEspera,\r\n    setReloadCrearCotizacion,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [datosUser, setDatosUser] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickClose = async () => {\r\n    setDatosUser([]);\r\n    setAbrirPanelAcceso(false);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosUser({ ...datosUser, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const input = {\r\n    numero_usuario: parseInt(datosUser.numero_usuario),\r\n    password: datosUser.password,\r\n    departamento: departamentos.departamento,\r\n    subDepartamento: departamentos.subDepartamento,\r\n    tipo_acceso: departamentos.tipo_acceso,\r\n  };\r\n\r\n  const obtenerQuery = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: LOGEAR_USUARIO_ACCESOS,\r\n        variables: { input },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      console.log(response);\r\n      if (response.data.obtenerAccesoPermiso.permiso_concedido === true) {\r\n        SwitchPermisos(response.data.obtenerAccesoPermiso.subDepartamento);\r\n        setAlert({\r\n          message: \"Permiso Autorizado\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosUser([]);\r\n        setAbrirPanelAcceso(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const SwitchPermisos = (subDepartamento) => {\r\n    switch (subDepartamento) {\r\n      case \"administrador\":\r\n        setReloadAdministrador(true);\r\n        break;\r\n      case \"producto_rapido\":\r\n        setReloadProductoRapido(true);\r\n        break;\r\n      case \"cancelar_venta\":\r\n        setReloadCancelarVenta(true);\r\n        break;\r\n      case \"precios_productos\":\r\n        setReloadVerPrecios(true);\r\n        break;\r\n      case \"pre_corte\":\r\n        setReloadVerPreCorte(true);\r\n        break;\r\n      case \"cotizaciones\":\r\n        setReloadCrearCotizacion(true);\r\n        break;\r\n      case \"eliminar_ventas\":\r\n        setReloadEliminarVentaEspera(true);\r\n        break;\r\n      default:\r\n        setAlert({\r\n          message: \"Permiso no autorizado\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        open={abrirPanelAcceso}\r\n        onClose={handleClickClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <BackdropComponent loading={loading} />\r\n        <Box p={3}>\r\n          <Box display=\"flex\" p={1}>\r\n            <Box flexGrow={1}>\r\n              <Typography>\r\n                <b>Por favor autoriza con tu usuario y contraseña</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleClickClose()}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Numero Usuario:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  name=\"numero_usuario\"\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Contrasena:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            variant=\"contained\"\r\n            onClick={() => obtenerQuery()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport RegistroInfoAdidional from \"../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport RegistroInformacionRapido from \"./RegistroInformacionRapido\";\r\nimport { NavigateBefore, NavigateNext } from \"@material-ui/icons\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../context/Catalogos/initialStatesProducto\";\r\nimport { cleanTypenames } from \"../../../config/reuserFunctions\";\r\nimport TallasColoresRapidos from \"./TallasColoresRapidos/TallasColoresRapidos\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO_RAPIDO,\r\n  OBTENER_CONSULTAS,\r\n} from \"../../../gql/Catalogos/productos\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../../../components/AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { validateJsonEdit } from \"../../sucursales/Catalogos/Producto/validateDatos\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  iconSizeDialogs: {\r\n    width: 80,\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  iconSizeSecondSuperior: {\r\n    width: 20,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ArticuloRapido() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    setPreciosP,\r\n    preciosP,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    presentaciones,\r\n    setPresentaciones,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const { setAlert, open, setOpen } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadProductoRapido,\r\n    setReloadProductoRapido,\r\n    setAbrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [crearProductoRapido] = useMutation(CREAR_PRODUCTO_RAPIDO);\r\n\r\n  const { data, refetch, loading, error } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setCentroDeCostos({});\r\n    setValidacion({ error: false, message: \"\" });\r\n    setPresentaciones([]);\r\n    setValue(0);\r\n  };\r\n\r\n  const [abrirTallaColor, setAbrirTallaColor] = useState(false);\r\n\r\n  const [cantidad, setCantidad] = useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    resetInitialStates();\r\n    setAbrirTallaColor(false);\r\n  };\r\n\r\n  const AceesoProductoRapido = () => {\r\n    if (sesion.accesos.ventas.producto_rapido.ver === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(true);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"producto_rapido\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadProductoRapido === true) {\r\n      handleClickOpen();\r\n      setReloadProductoRapido(false);\r\n    }\r\n  }, [reloadProductoRapido]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, []);\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 82) {\r\n      AceesoProductoRapido();\r\n    }\r\n  }\r\n\r\n  if (loading | !data || error)\r\n    return (\r\n      <Button\r\n        disabled\r\n        value=\"articulo-rapido\"\r\n        style={{\r\n          textTransform: \"none\",\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          pointerEvents: \"none\",\r\n          opacity: 0.5,\r\n        }}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\"\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Producto Rapido</b>\r\n          </Typography>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + R</b>\r\n          </Typography>\r\n        </Box>\r\n      </Button>\r\n    );\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const saveData = async () => {\r\n    setCargando(true);\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      return setValidacion(true);\r\n    } else {\r\n      if (\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n      ) {\r\n        return setValidacion(true);\r\n      }\r\n    }\r\n    /* if (unidadesVenta.length === 0) {\r\n      unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = unidadesVenta.filter(\r\n        (unidades) => unidades.default\r\n      );\r\n      if (unidadxdefecto.length === 0) unidadesVenta.push(unidadVentaXDefecto);\r\n    } */\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n    precios.precios_producto = preciosP;\r\n\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      setPresentaciones(initial_state_presentaciones);\r\n      setCantidad(0);\r\n    }\r\n\r\n    const data = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      cantidad,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    try {\r\n      const input = cleanTypenames(data);\r\n      const result = await crearProductoRapido({\r\n        variables: {\r\n          input,\r\n        },\r\n      });\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `¡Listo ${result.data.crearProductoRapido.message}!`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        datos_generales.tipo_producto === \"OTROS\"\r\n          ? !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !cantidad ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n            ? true\r\n            : false\r\n          : !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (value === 1) {\r\n      return saveButton;\r\n    } else {\r\n      if (\r\n        datos_generales.tipo_producto === \"OTROS\" ||\r\n        !datos_generales.tipo_producto\r\n      ) {\r\n        return saveButton;\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value + 1)}\r\n            size=\"large\"\r\n            endIcon={<NavigateNext />}\r\n            disableElevation\r\n          >\r\n            Siguiente\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Acceso />\r\n      <Button\r\n        onClick={() => {\r\n          AceesoProductoRapido();\r\n        }}\r\n        value=\"articulo-rapido\"\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\"\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Producto Rapido</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + R</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\">\r\n            <Box display=\"flex\" flexGrow={1} justifyContent=\"space-between\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab\r\n                  label=\"Datos generales\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista1 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                        alt=\"icono registro\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(0)}\r\n                />\r\n                {abrirTallaColor === false ||\r\n                datos_generales.tipo_producto === \"OTROS\" ? null : (\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                          validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                )}\r\n              </Tabs>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  handleClickOpen();\r\n                  resetInitialStates();\r\n                }}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={cargando}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <div className={classes.root}>\r\n            <TabPanel value={value} index={0}>\r\n              <RegistroInformacionRapido\r\n                setAbrirTallaColor={setAbrirTallaColor}\r\n                setCantidad={setCantidad}\r\n                cantidad={cantidad}\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n              <RegistroInfoAdidional />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <TallasColoresRapidos\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n            </TabPanel>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setValue(value - 1)}\r\n              size=\"large\"\r\n              startIcon={<NavigateBefore />}\r\n              disabled={value === 0}\r\n            >\r\n              Anterior\r\n            </Button>\r\n          </Box>\r\n          <Box p={1}>\r\n            <ButtonActions />\r\n          </Box>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../context/Catalogos/CtxRegProducto'\r\nimport ArticuloRapido from './ArticuloRapido'\r\n \r\nexport default function ProductoRapidoIndex({handleClickOpen}){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <ArticuloRapido handleClickOpen={handleClickOpen} />\r\n        </RegProductoProvider>\r\n    )\r\n}","import {gql} from \"@apollo/client\";\r\n\r\nexport const CREAR_COTIZACION = gql `\r\n  mutation crearCotizacion(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n  ) {\r\n    crearCotizacion(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTAR_COTIZACIONES = gql `\r\n  query obtenerCotizaciones($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCotizaciones(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      folio\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general {\r\n        cantidad_descontado\r\n        porciento\r\n        precio_con_descuento\r\n      }\r\n      descuento_general_activo\r\n      dias_de_credito_venta\r\n      fecha_de_vencimiento_credito\r\n      fecha_vencimiento_cotizacion\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n        rfc\r\n        telefono\r\n        celular\r\n        email\r\n        razon_social\r\n      }\r\n      productos {\r\n        _id\r\n         inventario_general {\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n          }\r\n        iva_total_producto\r\n        ieps_total_producto\r\n        impuestos_total_producto\r\n        subtotal_total_producto\r\n        total_total_producto  \r\n        id_producto {\r\n          _id\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n         \r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n           \r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n        \r\n         \r\n          \r\n         \r\n          \r\n        }\r\n        concepto\r\n        cantidad\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto {\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        \r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        precio_actual_object {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      \r\n      }\r\n      id_caja{\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      usuario{\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n  \r\n    }\r\n  }\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { jsPDF } from 'jspdf';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport html2canvas from 'html2canvas';\r\nimport { Box, Button, Container, Typography } from '@material-ui/core';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n\tformatoFechaCorta,\r\n\tformatoMexico,\r\n  } from \"../../../config/reuserFunctions\";\r\n//import { formatoFechaCertificado } from '../../../../config/reuserFunction';\r\n//import Spin from '../../../../components/Spin/spin';\r\n//import MessageSnackbar from '../../../../components/Snackbar/snackbar';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\t/* top: 0,\r\n\t\tleft: 0, */\r\n\t\tzIndex: 9999,\r\n\t\tposition: 'absolute',\r\n\t\twidth: '250mm',\r\n\t\tminHeight: '210mm',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tbackgroundSize: 'cover',\r\n\t\t/* border: 'solid 1px black' */\r\n\t\t/* display: 'none' */\r\n\t},\r\n\tnombre: {\r\n\t\tmarginTop: theme.spacing(54),\r\n\t\tmarginLeft: theme.spacing(61)\r\n\t},\r\n\ttextoSecundario: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(55),\r\n\t\twidth: 600\r\n\t},\r\n\tfirma: {\r\n\t\tmarginTop: theme.spacing(12),\r\n\t\tmarginLeft: theme.spacing(76)\r\n\t},\r\n\tintructor: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(85)\r\n\t},\r\n\tcodigo: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(126)\r\n\t}\r\n}));\r\n\r\nexport default function CotizacionPdf(props) {\r\n\tconst [ cotizacion, setCotizacion ] = useState(props.cotizacion);\r\n\tconst [ show, setShow ] = useState(false);\r\n\tconst classes = useStyles();\r\n/* \tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ snackbar, setSnackbar ] = useState({\r\n\t\topen: false,\r\n\t\tmensaje: '',\r\n\t\tstatus: ''\r\n\t}); */\r\n\r\n\tuseEffect(() => {\r\n\t  if(show){\r\n\t\t  printDocument();\r\n\t  }\r\n\t}, [show])\r\n\t\r\n\t\r\n\tconst printDocument = () => {\r\n\r\n\t\tconst divInformation = document.getElementById('divInformation');\r\n\t\t/* const divTitleProductos = document.getElementById('divTitleProductos'); */\r\n\t\t/* console.log(divInformation) */\r\n\t\tsetShow(false);\r\n\t\tconst pdf = new jsPDF('p', 'mm', 'letter');\r\n\t\t//Information\r\n\t\thtml2canvas(divInformation).then((canvas) => {\r\n\r\n\t\t\tconst imgData = canvas.toDataURL('image/png');\r\n\t\t\r\n\t\t\tconst imgProps = pdf.getImageProperties(imgData);\r\n\r\n\t\t\tconst pdfWidth = pdf.internal.pageSize.getWidth() - 5 ;\r\n             \r\n\t\t\tconst pdfHeight = imgProps.height * pdfWidth / imgProps.width;\r\n\r\n\t\t\tpdf.addImage(imgData, 'JPEG', 2, 5, pdfWidth, pdfHeight);\r\n\t\t\tpdf.addPage();\r\n\t\t\t// pdf.output('dataurlnewwindow');\r\n\t\t\tpdf.save('cotizacion' + cotizacion.folio + '.pdf');\r\n\r\n\t\t}); \r\n\t\t//Productos\r\n\t/* \thtml2canvas(divTitleProductos).then((canvas) => {\r\n\r\n\t\t\tconst imgData = canvas.toDataURL('image/png');\r\n\t\t\r\n\t\t\tconst imgProps = pdf.getImageProperties(imgData);\r\n\r\n\t\t\tconst pdfWidth = pdf.internal.pageSize.getWidth() - 5 ;\r\n             \r\n\t\t\tconst pdfHeight = imgProps.height * pdfWidth / imgProps.width;\r\nconsole.log('PDF' , pdfWidth, ',',imgProps.height );\r\n\t\t\t\r\n\t\t\tpdf.addImage(imgData, 'JPEG', 2, 50, pdfWidth, pdfHeight);\r\n\t\t\t// pdf.output('dataurlnewwindow');\r\n\t\t\t\r\n\t\t}); */\r\n\t\t\r\n\t};\r\n\r\n\t//if (loading) return <Spin loading={loading} />;\r\n\r\n\treturn (\r\n\t\t<Box mt={1}>\r\n\t\t\t{/* <MessageSnackbar\r\n\t\t\t\topen={snackbar.open}\r\n\t\t\t\tmensaje={snackbar.mensaje}\r\n\t\t\t\tstatus={snackbar.status}\r\n\t\t\t\tsetSnackbar={setSnackbar}\r\n\t\t\t/> */}\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} mb={0}>\r\n\t\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={() => setShow(true)} startIcon={<GetAppIcon />}>\r\n\t\t\t\t\tDescargar PDF\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Container >\r\n\t\t\t\t{\r\n\t\t\t\t\t(show) ? \r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<CotizacionInformation cotizacion={cotizacion} classes={classes} /> \r\n\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div/>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</Container>\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nconst CotizacionInformation = ({ cotizacion, classes}) => {\r\n\t\r\n\r\n/* \tif (!cotizacion) {\r\n\t\treturn null;\r\n\t} */\r\n\t\r\n\treturn (\r\n        <div id=\"divInformation\" className={classes.root} >\r\n\t\t\t\r\n\t\t\t<Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n\t\t{/* \t<Typography>\r\n                <b>Caja: </b>\r\n                {` ${cotizacion.id_caja.numero_caja}`}\r\n                </Typography>\r\n            <Box>\r\n               \r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Usuario en caja:</b> {` ${cotizacion.usuario.nombre}`}\r\n                </Typography>\r\n            </Box> */}\r\n            <Box>\r\n                <Typography align=\"right\">\r\n                <b>Folio:</b>\r\n                {` ${cotizacion.folio}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Fecha:</b>\r\n                {` ${formatoFechaCorta(cotizacion.fecha_registro)}`}\r\n                </Typography>\r\n            </Box>\r\n           \r\n        </Box>\r\n    \r\n        {(cotizacion.cliente) ? (\r\n          <Box my={1}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon size={12} />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography size={18}>Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{cotizacion.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon size={12}/>\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography size={18}>Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{cotizacion.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.descuento ? formatoMexico(cotizacion.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.monedero ? formatoMexico(cotizacion.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.iva ? formatoMexico(cotizacion.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.ieps ? formatoMexico(cotizacion.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(cotizacion.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(cotizacion.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(cotizacion.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon  size={12} />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography size={18}>Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer >\r\n                <Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t{/* <TableCell>Cód. de barras</TableCell> */}\r\n\t\t\t\t\t\t<TableCell>Producto</TableCell>\r\n\t\t\t\t\t\t{/* <TableCell>Med.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Uni.</TableCell> */}\r\n\t\t\t\t\t\t<TableCell>Cant.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t<TableCell>Desc.</TableCell>\r\n\t\t\t\t\t\t<TableCell>IVA</TableCell>\r\n\t\t\t\t\t\t<TableCell>IEPS</TableCell>\r\n\t\t\t\t\t\t<TableCell>SubTotal.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Impues.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Total</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n                  \r\n\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{cotizacion.productos.map((row, index) => {return(\r\n\t\t\t\t\t\t\t<TableRow key={index}>\r\n\t\t\t\t\t\t{/* \t<TableCell>\r\n\t\t\t\t\t\t\t\t{row.id_producto.datos_generales.codigo_barras}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</TableCell> */}\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{row.id_producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t{/* \t<ComponenteMedidaColor producto={row} />\r\n\t\t\t\t\t\t\t<TableCell>{row.unidad}</TableCell> */}\r\n\t\t\t\t\t\t\t<TableCell>{row.cantidad_venta}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t${formatoMexico(row.precio_a_vender)}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<ComponenteDescuento producto={cotizacion} />\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t$\r\n\t\t\t\t\t\t\t\t{row.iva_total_producto\r\n\t\t\t\t\t\t\t\t? formatoMexico(row.iva_total_producto)\r\n\t\t\t\t\t\t\t\t: \"0.00\"}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t$\r\n\t\t\t\t\t\t\t\t{row.ieps_total_producto\r\n\t\t\t\t\t\t\t\t? formatoMexico(row.ieps_total_producto)\r\n\t\t\t\t\t\t\t\t: \"0.00\"}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.subtotal_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.impuestos_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.total_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t)})}\r\n\t\t\t\t\t</TableBody>\r\n\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n\t\t</div>\r\n\t);\r\n\t\r\n};\r\n\r\n/* const EncabezadoTablaProductos = (cotizacion, classes) => {\r\n\treturn(\r\n\t\t<div id=\"divTitleProductos\" className={classes.root} >\r\n\t\t\r\n\t\t  </div>\r\n\t)\r\n} */\r\n\r\n/* const CotizacionRowProducto = (cotizacion) =>{\r\n\t\r\n}\r\n */\r\n/* const ComponenteMedidaColor = ({ producto }) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n  \r\n\tif (producto.color.nombre && producto.medida.talla) {\r\n\t  return (\r\n\t\t<TableCell align=\"center\">\r\n\t\t  <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n\t\t\t<div\r\n\t\t\t  className={classes.colorContainer}\r\n\t\t\t  style={{\r\n\t\t\t\tbackgroundColor: producto.color.hex,\r\n\t\t\t\tcolor: theme.palette.getContrastText(producto.color.hex),\r\n\t\t\t  }}\r\n\t\t\t>\r\n\t\t\t  {producto.medida.talla}\r\n\t\t\t</div>\r\n\t\t  </Tooltip>\r\n\t\t</TableCell>\r\n\t  );\r\n\t} else {\r\n\t  return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n\t}\r\n  }; */\r\n  \r\n  const ComponenteDescuento = ({ producto }) => {\r\n\tif (producto.descuento_general_activo === true) {\r\n\t  const { dinero_descontado, porciento } = producto.descuento_general;\r\n\t  return (\r\n\t\t<TableCell>\r\n\t\t  {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n\t\t</TableCell>\r\n\t  );\r\n\t} else {\r\n\t  return <TableCell>{\"$0.00\"}</TableCell>;\r\n\t}\r\n  };\r\n  ","import React from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport CotizacionPdf from \"./CotizacionPdf\";\r\n//import { Done } from \"@material-ui/icons\";\r\n//import CancelarFolio from \"./CancelarFolio\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetalleCotizacion({ venta, open, handleClose, refetch }) {\r\n  if (!venta) return null;\r\n    console.log(venta);\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      fullWidth\r\n      maxWidth=\"xl\"\r\n    \r\n    >\r\n      <DialogTitle>\r\n      \r\n        <Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Box>\r\n                <Typography>\r\n                <b>Caja: </b>\r\n                {` ${venta.id_caja.numero_caja}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Usuario en caja:</b> {` ${venta.usuario.nombre}`}\r\n                </Typography>\r\n            </Box>\r\n            <Box>\r\n                <Typography align=\"right\">\r\n                <b>Folio:</b>\r\n                {` ${venta.folio}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Fecha:</b>\r\n                {` ${formatoFechaCorta(venta.fecha_registro)}`}\r\n                </Typography>\r\n            </Box>\r\n           \r\n        </Box>\r\n        <Box style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <CotizacionPdf isIcon={false} cotizacion={venta} />\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {(venta.cliente) ? (\r\n          <Box my={1}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography variant=\"h6\">Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{venta.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{venta.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${venta.descuento ? formatoMexico(venta.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.monedero ? formatoMexico(venta.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.iva ? formatoMexico(venta.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.ieps ? formatoMexico(venta.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(venta.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(venta.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(venta.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Código de barras</TableCell>\r\n                      <TableCell>Producto</TableCell>\r\n                      <TableCell>Medida</TableCell>\r\n                      <TableCell>Unidad</TableCell>\r\n                      <TableCell>Cantidad</TableCell>\r\n                      <TableCell>Precio</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {venta.productos.map((row, index) => {return(\r\n                      <TableRow key={index}>\r\n                        <TableCell>\r\n                            {row.id_producto.datos_generales.codigo_barras}\r\n                         {/* {row.id_unidad_venta.codigo_barras} */}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {row.id_producto.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <ComponenteMedidaColor producto={row} />\r\n                        <TableCell>{row.unidad}</TableCell>\r\n                        <TableCell>{row.cantidad_venta}</TableCell>\r\n                        <TableCell>\r\n                          ${formatoMexico(row.precio_a_vender)}\r\n                        </TableCell>\r\n                        <ComponenteDescuento producto={venta} />\r\n                        <TableCell>\r\n                          $\r\n                          {row.iva_total_producto\r\n                            ? formatoMexico(row.iva_total_producto)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          $\r\n                          {row.ieps_total_producto\r\n                            ? formatoMexico(row.ieps_total_producto)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>${formatoMexico(row.subtotal_total_producto)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.impuestos_total_producto)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.total_total_producto)}</TableCell>\r\n                      </TableRow>\r\n                    )})}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n     {/*  <DialogActions\r\n        style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n      >\r\n        <CancelarFolio\r\n          venta={venta}\r\n          handleCloseInfoVenta={handleClose}\r\n          refetch={refetch}\r\n          selected={venta}\r\n        />\r\n        <Button\r\n          onClick={handleClose}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          startIcon={<Done />}\r\n        >\r\n          Aceptar\r\n        </Button>\r\n      </DialogActions> */}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst ComponenteMedidaColor = ({ producto }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  if (producto.color.nombre && producto.medida.talla) {\r\n    return (\r\n      <TableCell align=\"center\">\r\n        <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n          <div\r\n            className={classes.colorContainer}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n          >\r\n            {producto.medida.talla}\r\n          </div>\r\n        </Tooltip>\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n  }\r\n};\r\n\r\nconst ComponenteDescuento = ({ producto }) => {\r\n  if (producto.descuento_general_activo === true) {\r\n    const { dinero_descontado, porciento } = producto.descuento_general;\r\n    return (\r\n      <TableCell>\r\n        {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell>{\"$0.00\"}</TableCell>;\r\n  }\r\n};\r\n","import React, { Fragment, useState, useContext, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n/* import Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\"; */\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { Box, CircularProgress, IconButton } from \"@material-ui/core\";\r\n//import DeleteIcon from '@material-ui/icons/Delete';\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\n//import {formatoFecha} from '../../../config/reuserFunctions';\r\nimport moment from \"moment\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport { CONSULTAR_COTIZACIONES } from \"../../../gql/Ventas/cotizaciones\";\r\nimport DetalleCotizacion from \"./DetalleCotizacion\";\r\n\r\nconst columns = [\r\n  { id: \"folio\", label: \"Folio\", minWidth: 20, align: \"center\" },\r\n  { id: \"cliente\", label: \"Cliente\", minWidth: 100 },\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 80, align: \"center\" },\r\n  {\r\n    id: \"fechaVencimiento\",\r\n    label: \"Fecha de vencimiento\",\r\n    minWidth: 60,\r\n    align: \"center\",\r\n  },\r\n  { id: \"productos\", label: \"Productos\", minWidth: 50, align: \"center\" },\r\n  { id: \"total\", label: \"Total\", minWidth: 50, align: \"center\" },\r\n];\r\n/* \r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n */\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"70vh\",\r\n  },\r\n});\r\n\r\nexport default function CotizacionesPendientes({ setOpen }) {\r\n  const classes = useStyles();\r\n  //const [ page, setPage ] = React.useState(0);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  //const [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n  const [view, setView] = useState(false);\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { data, refetch, loading } = useQuery(CONSULTAR_COTIZACIONES, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (error) {}\r\n  }, []);\r\n\r\n  let rows = [];\r\n  const handleCloseView = () => {\r\n    setView(false);\r\n  };\r\n  /* \tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t}; */\r\n  const handleModalCotizacion = () => {\r\n    setOpen(false);\r\n  };\r\n  if (data) rows = data.obtenerCotizaciones;\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"70vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"medium\" aria-label=\"enhanced table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Retomar\r\n              </TableCell>\r\n              {/* \t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell> */}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => {\r\n              return (\r\n                <CotizacionRow\r\n                  cotizacion={row}\r\n                  handleModalCotizacion={handleModalCotizacion}\r\n                  setView={setView}\r\n                  setSelected={setSelected}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n        <DetalleCotizacion\r\n          venta={selected}\r\n          open={view}\r\n          handleClose={handleCloseView}\r\n          refetch={refetch}\r\n        />\r\n      </TableContainer>\r\n      {/* \t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/> */}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst CotizacionRow = ({\r\n  cotizacion,\r\n  index,\r\n  handleModalCotizacion,\r\n  setSelected,\r\n  setView,\r\n}) => {\r\n  const [openMessage, setOpenMessage] = useState({ message: \"\", open: false });\r\n  //const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  const AgregarVentaDeNuevo = () => {\r\n    try {\r\n      //\t(_cotizacion.fecha_vencimiento_cotizacion\r\n      console.log(cotizacion.productos);\r\n      let objectToSave = JSON.stringify({\r\n        cliente:\r\n          cotizacion.cliente.nombre_cliente === null ? {} : cotizacion.cliente,\r\n        descuento: cotizacion.descuento,\r\n        ieps: cotizacion.ieps,\r\n        impuestos: cotizacion.impuestos,\r\n        iva: cotizacion.iva,\r\n        monedero: cotizacion.monedero,\r\n        productos: cotizacion.productos,\r\n        subTotal: cotizacion.subTotal,\r\n        total: cotizacion.total,\r\n        venta_cliente: false,\r\n        tipo_emision: cotizacion.tipo_emision\r\n          ? cotizacion.tipo_emision\r\n          : \"TICKET\",\r\n      });\r\n\r\n      //Veriricar si hay una\r\n      if (datosVenta === null) {\r\n        //setOpenMessage({message: 'agregarVentaDeNuevo', open:true});\r\n\r\n        if (\r\n          moment(cotizacion.fecha_vencimiento_cotizacion).isBefore(\r\n            moment().locale(\"es-mx\").format(\"YYYY MM DD\")\r\n          )\r\n        ) {\r\n          setOpenMessage({\r\n            message: \"La cotización seleccionada ya tiene la fecha vencida.\",\r\n            open: true,\r\n          });\r\n          return;\r\n        }\r\n        localStorage.setItem(\"DatosVentas\", objectToSave);\r\n        handleModalCotizacion();\r\n        updateDataStorage();\r\n      } else {\r\n        setOpenMessage({\r\n          message: \"No puedes agregar una venta cuando ya está una en curso.\",\r\n          open: true,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"agregarVentaDeNuevo\", error);\r\n    }\r\n  };\r\n\r\n  const openDetail = (click) => {\r\n    try {\r\n      if (click === 2) {\r\n        console.log(cotizacion);\r\n        setSelected(cotizacion);\r\n        setView(true);\r\n      }\r\n    } catch (error) {}\r\n  };\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n  const handleClickOpen = () => {\r\n    try {\r\n      setOpenMessage(!openMessage.open);\r\n    } catch (error) {}\r\n  };\r\n\r\n  try {\r\n    /* \tfunction borrarCotizacion() {\r\n\t\t\tif (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n\t\t\t  let nueva_venta_espera = [...listaEnEspera];\r\n\t\t\t  nueva_venta_espera.splice(index, 1);\r\n\t\t\t  if (nueva_venta_espera.length === 0) {\r\n\t\t\t\tlocalStorage.removeItem(\"ListaEnEspera\");\r\n\t\t\t  } else {\r\n\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t  \"ListaEnEspera\",\r\n\t\t\t\t  JSON.stringify(nueva_venta_espera)\r\n\t\t\t\t);\r\n\t\t\t  }\r\n\t\t\t  setUpdateTablaVentas(!updateTablaVentas);\r\n\t\t\t} else {\r\n\t\t\t  return null;\r\n\t\t\t}\r\n\t\t  }\r\n\t\tconst verificarPermisos = () => {\r\n\t\t\tif (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n\t\t\t\tborrarCotizacion();\r\n\t\t\t} else {\r\n\t\t\t  setAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\t  setDepartamentos({\r\n\t\t\t\tdepartamento: \"ventas\",\r\n\t\t\t\tsubDepartamento: \"eliminar_ventas\",\r\n\t\t\t\ttipo_acceso: \"ver\",\r\n\t\t\t  });\r\n\t\t\t}\r\n\t\t  }; */\r\n    return (\r\n      <>\r\n        <TableRow\r\n          hover\r\n          role=\"checkbox\"\r\n          tabIndex={-1}\r\n          key={cotizacion.code}\r\n          onClick={(e) => openDetail(e.detail)}\r\n        >\r\n          <TableCell align=\"center\">{cotizacion.folio}</TableCell>\r\n          <TableCell>\r\n            {cotizacion.cliente.nombre_cliente\r\n              ? cotizacion.cliente.nombre_cliente\r\n              : \"Público general\"}\r\n          </TableCell>\r\n          <TableCell align=\"center\">{cotizacion.fecha_registro}</TableCell>\r\n          <TableCell align=\"center\">\r\n            {cotizacion.fecha_vencimiento_cotizacion}\r\n          </TableCell>\r\n          <TableCell align=\"center\">{cotizacion.productos.length}</TableCell>\r\n          <TableCell align=\"center\">{cotizacion.total}</TableCell>\r\n          <TableCell align=\"center\">\r\n            <RegresarVenta\r\n              AgregarVentaDeNuevo={AgregarVentaDeNuevo}\r\n              openMessage={openMessage}\r\n              handleClickOpen={handleClickOpen}\r\n            />\r\n          </TableCell>\r\n\r\n          {/* <TableCell align=\"center\">\r\n\t\t\t\t\t<EliminarVentaEspera verificarPermisos={verificarPermisos} />\r\n\t\t\t\t\t</TableCell> */}\r\n\r\n          {/* <TableCell align='center' >\r\n\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t    <AutorenewIcon fontSize=\"medium\" />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell> */}\r\n          {/* \t<TableCell align='center' >\r\n\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell> */}\r\n        </TableRow>\r\n      </>\r\n    );\r\n  } catch (error) {}\r\n};\r\n\r\nconst RegresarVenta = ({\r\n  openMessage,\r\n  handleClickOpen,\r\n  AgregarVentaDeNuevo,\r\n}) => {\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"regresar\"\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        onClick={AgregarVentaDeNuevo}\r\n      >\r\n        <AutorenewIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={openMessage.open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message={openMessage.message}\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\n/*  const EliminarCotizacion = ({ verificarPermisos }) => {\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n  \r\n\tconst handleClickOpen = () => setOpenModal(true);\r\n\tconst handleClose = () => setOpenModal(false);\r\n  \r\n\treturn (\r\n\t  <Fragment>\r\n\t\t<IconButton\r\n\t\t  aria-label=\"delete\"\r\n\t\t  size=\"small\"\r\n\t\t  onClick={() => handleClickOpen()}\r\n\t\t>\r\n\t\t  <DeleteIcon fontSize=\"medium\" />\r\n\t\t</IconButton>\r\n\t\t<Dialog onClose={() => handleClose()} open={openModal}>\r\n\t\t  <DialogTitle>Se eliminara esta venta en espera</DialogTitle>\r\n\t\t  <DialogActions>\r\n\t\t\t<Button color=\"inherit\" size=\"small\" onClick={() => handleClose()}>\r\n\t\t\t  Cancelar\r\n\t\t\t</Button>\r\n\t\t\t<Button\r\n\t\t\t  color=\"secondary\"\r\n\t\t\t  size=\"small\"\r\n\t\t\t  onClick={() => verificarPermisos()}\r\n\t\t\t>\r\n\t\t\t  Eliminar\r\n\t\t\t</Button>\r\n\t\t  </DialogActions>\r\n\t\t</Dialog>\r\n\t  </Fragment>\r\n\t);\r\n  }; */\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CotizacionesPendientes from \"./CotizacionesPendientes\";\r\n\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ListaCotizaciones() {\r\n  const [open, setOpen] = useState(false);\r\n  //const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcCurrencyExchange style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cotizaciones</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + T</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={\"md\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja2\"\r\n                  style={{ width: 38 }}\r\n                />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography variant=\"h6\">Cotizaciones pendientes</Typography>\r\n              </Box>\r\n            </Box>\r\n            {/*  <Box mt={2} textAlign=\"right\">\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().locale(\"es-mx\").format(\"L\")}\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().locale(\"es-mx\").format(\"LT\")} hrs.\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">{sesion?.nombre}</Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n            </Box> */}\r\n            <Box p={3} pb={0} pt={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent style={{ padding: 0 }}>\r\n          <CotizacionesPendientes setOpen={setOpen} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Divider, BottomNavigation } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport useStyles from \"./styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nimport DepositoRetiroCaja from \"../../pages/ventas/Operaciones/DepositoRetiros/DepositoRetiroCaja\";\r\nimport Turnos from \"../../pages/ventas/AbrirCerrarTurno/Turnos\";\r\nimport PreCorteCaja from \"../../pages/ventas/Operaciones/PreCorteCaja\";\r\nimport VentaEnEspera from \"../../pages/ventas/Operaciones/VentaEnEspera\";\r\nimport ProductoRapidoIndex from \"../../pages/ventas/ArticuloRapido/indexArticuloRapido\";\r\n\r\nimport SnackBarMessages from \"../SnackBarMessages\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport ListaCotizaciones from \"../../pages/ventas/Cotizacion/ListaCotizaciones\";\r\n\r\nfunction NavegacionVentas(props) {\r\n  const {\r\n    alert,\r\n    setAlert\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadAdministrador,\r\n    setReloadAdministrador,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(\"venta-general\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\")); */\r\n\r\n  moment.locale(\"es\");\r\n\r\n  /* const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  }; */\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  function Administrador() {\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadAdministrador === true) {\r\n      props.history.push(\"/admin\");\r\n      setReloadAdministrador(false);\r\n    }\r\n  }, [reloadAdministrador]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Acceso setReloadAdministrador={setReloadAdministrador} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BottomNavigation\r\n        value={value}\r\n        onChange={(event, newValue) => {\r\n          setValue(newValue);\r\n        }}\r\n        className={classes.navigationTop}\r\n      >\r\n        <ProductoRapidoIndex />\r\n        <Divider orientation=\"vertical\" />\r\n        <ListaCotizaciones />\r\n        <Divider orientation=\"vertical\" />\r\n        <DepositoRetiroCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <Turnos />\r\n        <Divider orientation=\"vertical\" />\r\n        <PreCorteCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <VentaEnEspera />\r\n      </BottomNavigation>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withRouter(NavegacionVentas);\r\n","import React from \"react\";\r\n\r\nimport AbonosClientes from '../../sucursales/Tesoreria/Abonos/Clientes/AbonosClientes';\r\nimport {AbonosProvider} from \"../../../context/Tesoreria/abonosCtx\";\r\n\r\n\r\nexport default function Abonos() {\r\n\r\n  return (\r\n    <>\r\n    <AbonosProvider>\r\n      <AbonosClientes fromVentas={true} />\r\n    </AbonosProvider>  \r\n    </>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, CircularProgress, IconButton, Tooltip } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nconst columns = [\r\n  { id: \"add\", label: \"\", width: 30, align: \"center\" },\r\n  { id: \"clave\", label: \"Clave\", minWidth: 40, align: \"center\" },\r\n  { id: \"codigo\", label: \"C. Barras\", minWidth: 40, align: \"center\" },\r\n  { id: \"descripcion\", label: \"Nombre/Descrip.\", minWidth: 330 },\r\n  /* { id: \"medida\", label: \"Medida\", minWidth: 40, align: \"center\" },\r\n  { id: \"color\", label: \"Color\", minWidth: 40, align: \"center\" }, */\r\n  {\r\n    id: \"medida-color\",\r\n    label: \"Color y Talla\",\r\n    minWidth: 200,\r\n    align: \"center\",\r\n  },\r\n  { id: \"existencia\", label: \"Exist.\", minWidth: 30, align: \"center\" },\r\n  { id: \"unidad\", label: \"Unidad\", minWidth: 30, align: \"center\" },\r\n  { id: \"precio\", label: \"Precio\", minWidth: 30, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 15,\r\n    marginBottom: 15,\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({\r\n  productosBusqueda,\r\n  setProductoSeleccionado,\r\n  productoSeleccionado,\r\n  loading,\r\n  agregarProductos,\r\n}) {\r\n  const classes = useStyles();\r\n  /*  useEffect(() => {\r\n     console.log('PRODUCTOS BUSQUEDA',productosBusqueda)\r\n   }, [productosBusqueda]) */\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  const handleTableSelect = (e, producto) => {\r\n    if (e.detail === 2 || e === \"button\") {\r\n      setProductoSeleccionado(producto);\r\n      agregarProductos(producto);\r\n      return;\r\n    }\r\n    setProductoSeleccionado(producto);\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productosBusqueda?.map((producto, index) => {\r\n              return (\r\n                <RowsProductos\r\n                  key={index}\r\n                  producto={producto}\r\n                  handleTableSelect={handleTableSelect}\r\n                  productoSeleccionado={productoSeleccionado}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nfunction RowsProductos({ producto, handleTableSelect, productoSeleccionado }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  try {\r\n    let ComponenteMedidaColor = () => {\r\n      if (producto.color && producto.medida) {\r\n        return (\r\n          <TableCell\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              height: \"56px\",\r\n            }}\r\n          >\r\n            <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n              <div\r\n                className={classes.colorContainer}\r\n                style={{\r\n                  backgroundColor: producto.color.hex,\r\n                  color: theme.palette.getContrastText(producto.color.hex),\r\n                }}\r\n              >\r\n                {producto.medida.talla}\r\n              </div>\r\n            </Tooltip>\r\n          </TableCell>\r\n        );\r\n      } else {\r\n        return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n      }\r\n    };\r\n    /* let ComponenteColor = () => {\r\n      if (producto.color) {\r\n        return (\r\n          <TableCell>\r\n            <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n              <div\r\n                className={classes.colorContainer}\r\n                style={{\r\n                  backgroundColor: producto.color.hex,\r\n                }}\r\n              />\r\n            </Tooltip>\r\n          </TableCell>\r\n        );\r\n      } else {\r\n        return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n      }\r\n    }; */\r\n\r\n    /* let ComponenteMedida = () => {\r\n      if (producto.medida) {\r\n        return <TableCell align=\"center\">{producto.medida.talla}</TableCell>;\r\n      } else {\r\n        return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n      }\r\n    }; */\r\n\r\n    let ComponentCantidad = () => {\r\n      let cantidad = \"\";\r\n      //console.log(producto)\r\n      if (producto.id_producto.datos_generales.tipo_producto === \"OTROS\") {\r\n        cantidad =\r\n          producto.unidad === \"Costal\" || producto.unidad === \"Caja\"\r\n            ? producto.inventario_general[0].cantidad_existente_maxima\r\n            : producto.inventario_general[0].cantidad_existente;\r\n      } else {\r\n        cantidad = producto.cantidad;\r\n      }\r\n      return <TableCell align=\"center\">{cantidad}</TableCell>;\r\n    };\r\n\r\n    return (\r\n      <Fragment>\r\n        <TableRow\r\n          hover\r\n          role=\"checkbox\"\r\n          tabIndex={-1}\r\n          key={producto._id}\r\n          onClick={(e) => handleTableSelect(e, producto)}\r\n          selected={productoSeleccionado._id === producto._id}\r\n        >\r\n          <TableCell align=\"center\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"primary\"\r\n              onClick={(e) => handleTableSelect(\"button\", producto)}\r\n            >\r\n              <Add />\r\n            </IconButton>\r\n          </TableCell>\r\n          <TableCell align=\"center\">\r\n            {producto.id_producto.datos_generales.clave_alterna}\r\n          </TableCell>\r\n          <TableCell align=\"center\">\r\n            {producto.codigo_barras ? producto.codigo_barras : \"N/A\"}\r\n          </TableCell>\r\n          <TableCell>\r\n            {producto.id_producto.datos_generales.nombre_comercial}\r\n          </TableCell>\r\n          {/* <ComponenteMedida />\r\n          <ComponenteColor /> */}\r\n          <ComponenteMedidaColor />\r\n          <ComponentCantidad />\r\n          <TableCell align=\"center\">{producto.unidad}</TableCell>\r\n          <TableCell align=\"center\">\r\n            ${producto.precio ? formatoMexico(producto.precio) : 0}\r\n          </TableCell>\r\n        </TableRow>\r\n      </Fragment>\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\n\r\nimport {\r\n  TableContainer,\r\n  Table,\r\n  Box,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Grid,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nexport default function InformacionProducto({\r\n  producto,\r\n  productoSeleccionado,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  /* console.log(producto);\r\n  console.log(productoSeleccionado); */\r\n  /* if (productoSeleccionado.length === 0) return null; */\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={2} style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        {productoSeleccionado?.id_producto?.imagenes.length > 0 ? (\r\n          <Box className={classes.containerImage}>\r\n            <img\r\n              alt=\"Imagen producto\"\r\n              src={productoSeleccionado?.id_producto?.imagenes[0].url_imagen}\r\n              className={classes.imagen}\r\n            />\r\n          </Box>\r\n        ) : (\r\n          <Box p={4} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <PhotoLibraryIcon style={{ fontSize: 40 }} />\r\n          </Box>\r\n        )}\r\n      </Grid>\r\n      <Grid item md={10}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Nombre:</b>\r\n            </Typography>\r\n\r\n            <Typography>\r\n              {productoSeleccionado.id_producto\r\n                ? productoSeleccionado.id_producto.datos_generales\r\n                    .nombre_comercial\r\n                : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>\r\n              <b>Codigo Barras:</b>\r\n            </Typography>\r\n            <Typography>\r\n              {productoSeleccionado.codigo_barras\r\n                ? productoSeleccionado.codigo_barras\r\n                : \"N/A\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Cantidad:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.cantidad\r\n                ? productoSeleccionado.cantidad\r\n                : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={1} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Unidad:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.unidad ? productoSeleccionado.unidad : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Descuento:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.descuento\r\n                ? productoSeleccionado.descuento.precio_neto\r\n                : 0}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>% Descuento:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.descuento\r\n                ? productoSeleccionado.descuento.precio_neto\r\n                : 0}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item md={12} lg={12}>\r\n        <PreciosDeVentaCompras\r\n          precios={productoSeleccionado?.id_producto?.precios?.precios_producto}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nfunction PreciosDeVentaCompras({ precios }) {\r\n  return (\r\n    <Box>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Numero precio</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Precios de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {precios?.map((data, index) => (\r\n                  <TableCell key={index} style={{ border: 0 }}>\r\n                    ${data?.precio_neto ? formatoMexico(data.precio_neto) : 0}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Grid,\r\n  Typography,\r\n  Slide,\r\n  IconButton,\r\n  DialogTitle,\r\n  TextField,\r\n  InputAdornment,\r\n  Snackbar,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { FcSearch } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { CONSULTA_PRODUCTOS_VENTAS } from \"../../../gql/Ventas/ventas_generales\";\r\nimport InformacionProducto from \"./InformacionProducto\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport {\r\n  calculatePrices2,\r\n  findProductArray,\r\n  verifiPrising,\r\n} from \"../../../config/reuserFunctions\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function BuscarProducto() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    openBuscarProducto, \r\n    setOpenBuscarProducto\r\n  } = useContext(VentasContext);\r\n\r\n  const [open_message, setOpenMessage] = useState(false);\r\n  const [searchProducto, setSearchProducto] = useState({ producto: \"\" });\r\n  const [productoSeleccionado, setProductoSeleccionado] = useState([]);\r\n  const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  });\r\n\r\n  const [value] = useDebounce(searchProducto, 500);\r\n\r\n  const { data, refetch, loading } = useQuery(CONSULTA_PRODUCTOS_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        producto: value.producto ? value.producto : \"\",\r\n      },\r\n    },\r\n  });\r\n\r\n  let productosBusqueda = [];\r\n\r\n  if (data) productosBusqueda = data.obtenerProductosVentas;\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSearchProducto({ ...searchProducto, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setProductoSeleccionado([]);\r\n    if (!openBuscarProducto) refetch();\r\n    //productosBusqueda = [];\r\n    setOpenBuscarProducto(!openBuscarProducto);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 80) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    });\r\n  }, []);\r\n\r\n  const without_inventary = sesion.empresa.vender_sin_inventario;\r\n\r\n  const agregarProductos = async (producto) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      //cantidad\r\n      if (!without_inventary && producto.cantidad === 0) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    } else {\r\n      //inventario_general\r\n      if (\r\n        !without_inventary &&\r\n        producto.inventario_general[0].cantidad_existente === 0\r\n      ) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granelBase,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      //   console.log(new_prices.newP);\r\n      //agregar producto al inicio del arreglo\r\n      productosVentasTemp.splice(0, 0, new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      //   console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: granelBase,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    /* handleClickOpen(); */\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Productos</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + P</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={openBuscarProducto}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <Snackbar\r\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n          open={open_message}\r\n          onClose={() => setOpenMessage(false)}\r\n          message=\"Producto sin existencias\"\r\n          autoHideDuration={3000}\r\n        />\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h6\">Buscar productos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar producto\"\r\n              name=\"producto\"\r\n              size=\"small\"\r\n              fullWidth\r\n              value={searchProducto.producto}\r\n              onChange={obtenerDatos}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <Box my={2}>\r\n            <InformacionProducto productoSeleccionado={productoSeleccionado} />\r\n          </Box>\r\n          <Grid>\r\n            <ListaProductos\r\n              productosBusqueda={productosBusqueda}\r\n              productoSeleccionado={productoSeleccionado}\r\n              setProductoSeleccionado={setProductoSeleccionado}\r\n              loading={loading}\r\n              agregarProductos={agregarProductos}\r\n            />\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  makeStyles,\r\n  Paper,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"../../sucursales/Catalogos/Cliente/ListaClientes\";\r\nimport CrearCliente from \"../../sucursales/Catalogos/Cliente/CrearCliente\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcBusinessman } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ClientesVentas() {\r\n  const classes = useStyles();\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 67) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  }, [turnoEnCurso]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          border: \".6px solid #DBDBDB\",\r\n        }}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box\r\n            style={\r\n              !turnoEnCurso\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.5,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <FcBusinessman style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Clientes</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>aLT + C</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <FcBusinessman style={{ fontSize: 45 }} />\r\n              <Box mx={1} />\r\n              <Typography variant=\"h6\">Clientes</Typography>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={8}>\r\n              <Paper className={classes.root}>\r\n                <InputBase\r\n                  fullWidth\r\n                  placeholder=\"Buscar cliente...\"\r\n                  onChange={(e) => setValues(e.target.value)}\r\n                  onKeyPress={pressEnter}\r\n                  value={values}\r\n                />\r\n                <IconButton onClick={() => setValues(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={6}\r\n              xs={4}\r\n              style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n            >\r\n              <CrearCliente\r\n                tipo=\"CLIENTE\"\r\n                accion=\"registrar\"\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Box my={2} height=\"70vh\">\r\n            <ListaClientes\r\n              tipo=\"CLIENTE\"\r\n              filtro={values}\r\n              ventas={true}\r\n              handleClickOpen={handleClickOpen}\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  DialogContent,\r\n  InputAdornment,\r\n  Grid,\r\n  Paper,\r\n  TextField,\r\n  Typography,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { CREAR_COTIZACION } from \"../../../gql/Ventas/cotizaciones\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  formatoMexico,\r\n  generateCodeNumerico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport BackdropComponent from \"../../../components/Layouts/BackDrop\";\r\nimport RemoveCircleTwoToneIcon from \"@material-ui/icons/RemoveCircleTwoTone\";\r\n\r\nexport default function NuevaCotizacion({ setOpen }) {\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const [CrearCotizacion] = useMutation(CREAR_COTIZACION);\r\n\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n  const [newCotizacion, setNewCotizacion] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [preciosDescuentos, setPreciosDescuentos] = useState({\r\n    productos: datosVentas?.productos,\r\n    subTotal: datosVentas?.subTotal,\r\n    impuestos: datosVentas?.impuestos,\r\n    iva: datosVentas?.iva,\r\n    ieps: datosVentas?.ieps,\r\n    total: datosVentas?.total,\r\n  });\r\n  const [totalDescount, setTotalDescount] = useState(\r\n    preciosDescuentos\r\n      ? preciosDescuentos?.descuento_general?.precio_con_descuento\r\n      : datosVentas?.total\r\n  );\r\n  const [porcentaje, setPorcentaje] = useState(\r\n    preciosDescuentos?.descuento_general?.porciento\r\n      ? preciosDescuentos?.descuento_general?.porciento\r\n      : 0\r\n  );\r\n  let descuento_general = [];\r\n\r\n  let original_datos_Ventas = datosVentas;\r\n\r\n  const classes = useStyles();\r\n\r\n  const obtenerDatos = (e) => {\r\n    setNewCotizacion({ ...newCotizacion, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const crearCotizacion = async () => {\r\n    try {\r\n      if (!newCotizacion.fecha_vencimiento) {\r\n        setAlert({\r\n          message: `Por favor completa los datos necesarios`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return null;\r\n      } else {\r\n        setLoading(true);\r\n        await CrearCotizacion({\r\n          variables: {\r\n            input: {\r\n              folio: generateCodeNumerico(8),\r\n              descuento: preciosDescuentos.descuento,\r\n              ieps: preciosDescuentos.ieps,\r\n              impuestos: preciosDescuentos.impuestos,\r\n              iva: preciosDescuentos.iva,\r\n              monedero: datosVentas.monedero,\r\n              subTotal: preciosDescuentos.subTotal,\r\n              total: preciosDescuentos.total,\r\n              venta_cliente: datosVentas.cliente ? true : false,\r\n              montos_en_caja: {},\r\n              //credito: newCotizacion.tipo_venta === 'CREDITO' ? true : false,\r\n              descuento_general_activo: porcentaje > 0 ? true : false,\r\n              descuento_general: {\r\n                porciento: parseFloat(porcentaje),\r\n                precio_con_descuento: preciosDescuentos.total,\r\n                cantidad_descontado: parseFloat(totalDescount),\r\n              },\r\n              dias_de_credito_venta: \"\",\r\n              fecha_de_vencimiento_credito: \"\",\r\n              fecha_vencimiento_cotizacion: newCotizacion.fecha_vencimiento,\r\n              cliente: datosVentas.cliente ? datosVentas.cliente : {},\r\n              productos: preciosDescuentos.productos,\r\n              /* inventario_general: datosVentas.inventario_general, */\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n            caja: turnoEnCurso.id_caja,\r\n          },\r\n        });\r\n\r\n        setAlert({\r\n          message: `La cotización se realizó correctamente.`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setOpen(false);\r\n      setLoading(false);\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n\r\n      setDatosVentasActual({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n      });\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Algo salió mal.`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const obtenerPorciento = (e) => {\r\n    let newValue = e.target.value;\r\n\r\n    setPorcentaje(newValue);\r\n    if (e !== \"\") {\r\n      let ventaSubtotal = original_datos_Ventas?.subTotal;\r\n      const val =\r\n        newValue < 10\r\n          ? parseFloat(`0.0${newValue.replace(\".\", \"\")}`)\r\n          : parseFloat(`0.${newValue.replace(\".\", \"\")}`);\r\n      const porsent = ventaSubtotal * val;\r\n      setTotalDescount(porsent.toFixed(2));\r\n    }\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    try {\r\n      var valorText = e.target.value !== \"\" ? parseFloat(e.target.value) : \"\";\r\n      var ventaSubtotal = original_datos_Ventas?.subTotal;\r\n      setTotalDescount(valorText);\r\n      var porcentaje =\r\n        valorText === \"\"\r\n          ? 0\r\n          : parseFloat(((valorText / ventaSubtotal) * 100).toFixed(2));\r\n      var descuento = valorText === \"\" ? 0 : parseFloat(porcentaje.toFixed(2));\r\n      setPorcentaje(descuento);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const eliminarDescuento = () => {\r\n    try {\r\n      descuento_general = {\r\n        productos: datosVentas?.productos,\r\n        subTotal: datosVentas?.subTotal,\r\n        impuestos: datosVentas?.impuestos,\r\n        iva: datosVentas?.iva,\r\n        ieps: datosVentas?.ieps,\r\n        total: datosVentas?.total,\r\n      };\r\n      setPorcentaje(0);\r\n      setTotalDescount(\"\");\r\n      setPreciosDescuentos(descuento_general);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = () => {\r\n    //let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Obtener productos\r\n    const productStorage = original_datos_Ventas?.productos;\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(porcentaje);\r\n\r\n      const dineroDescontadoDescuento =\r\n        porsentajeNewDescuento > 1\r\n          ? porsentajeNewDescuento >= 10\r\n            ? parseFloat(\r\n                (\r\n                  product.precio_actual_object.precio_venta *\r\n                  parseFloat(`0.${porsentajeNewDescuento}`)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(\r\n                (\r\n                  (product.precio_actual_object.precio_venta *\r\n                    parseFloat(`0.${porsentajeNewDescuento}`)) /\r\n                  10\r\n                ).toFixed(2)\r\n              )\r\n          : parseFloat(\r\n              (product.precio_actual_object.precio_venta *\r\n                porsentajeNewDescuento) /\r\n                100\r\n            );\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          product.precio_actual_object.precio_venta - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      );\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.iva < 10\r\n                ? `0${product.id_producto.precios.iva}`\r\n                : product.id_producto.precios.iva\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.ieps < 10\r\n                ? `0${product.id_producto.precios.ieps}`\r\n                : product.id_producto.precios.ieps\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(porcentaje)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(porcentaje),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto = parseFloat(\r\n        (\r\n          parseFloat(precio_actual_object.dinero_descontado) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n      });\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n\r\n    descuento_general = {\r\n      productos: productosFinal,\r\n      impuestos,\r\n      subTotal,\r\n      iva,\r\n      ieps,\r\n      total,\r\n      descuento,\r\n    };\r\n    setPreciosDescuentos(descuento_general);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    try {\r\n      handleCalculateNewDiscountVenta();\r\n    } catch (error) {}\r\n  }, [porcentaje]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Usuario:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                variant=\"outlined\"\r\n                onChange={obtenerDatos}\r\n                value={sesion ? sesion.nombre : \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={datosVentas?.cliente?.nombre_cliente ? 2 : 3} xs={12}>\r\n            <Typography>\r\n              <b>Cliente:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                onChange={obtenerDatos}\r\n                variant=\"outlined\"\r\n                value={\r\n                  datosVentas?.cliente?.nombre_cliente\r\n                    ? datosVentas?.cliente?.nombre_cliente\r\n                    : \"Público General\"\r\n                }\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {datosVentas?.cliente?.nombre_cliente ? (\r\n            <Grid item md={2} xs={12}>\r\n              <Typography>\r\n                <b>No. Cliente:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  disabled={true}\r\n                  onChange={obtenerDatos}\r\n                  variant=\"outlined\"\r\n                  value={datosVentas ? datosVentas.cliente?.numero_cliente : \"\"}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          ) : null}\r\n\r\n          <Grid item md={datosVentas?.cliente?.nombre_cliente ? 2 : 3} xs={12}>\r\n            <Typography>\r\n              <b>Fecha:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                onChange={obtenerDatos}\r\n                variant=\"outlined\"\r\n                value={moment().locale(\"es-mx\").format(\"L\")}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Fecha Vencimiento:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                type=\"date\"\r\n                onChange={obtenerDatos}\r\n                size=\"small\"\r\n                name=\"fecha_vencimiento\"\r\n                variant=\"outlined\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <BackdropComponent loading={loading} />\r\n\r\n        <Grid container spacing={3}>\r\n          <Grid item md={6} xs={12}>\r\n            <Box mt={4}>\r\n              <Paper elevation={3}>\r\n                <Box textAlign={\"center\"}>\r\n                  <Typography style={{ fontSize: 17 }}>\r\n                    <b>Agregar descuento</b>\r\n                  </Typography>\r\n                  <Alert severity=\"info\">\r\n                    El descuento se aplica apartir del <b>SUBTOTAL</b>\r\n                  </Alert>\r\n                </Box>\r\n                <Box p={2}>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item md={6}>\r\n                      <Typography>\r\n                        <b>Porcentaje:</b>\r\n                      </Typography>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        name=\"descuento\"\r\n                        id=\"form-venta-porsentaje-descuento\"\r\n                        variant=\"outlined\"\r\n                        value={porcentaje}\r\n                        onChange={(e) => obtenerPorciento(e)}\r\n                        type=\"number\"\r\n                        disabled={false}\r\n                        InputProps={{\r\n                          startAdornment: (\r\n                            <InputAdornment position=\"start\">%</InputAdornment>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                      <Typography>\r\n                        <b>Dinero a descontar</b>\r\n                      </Typography>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        type=\"number\"\r\n                        name=\"precioConDescuento\"\r\n                        onChange={obtenerPrecioText}\r\n                        value={totalDescount}\r\n                        className={classes.input}\r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Box mt={2} display=\"flex\" justifyContent=\"flex-end\">\r\n                    <Button\r\n                      variant=\"text\"\r\n                      color=\"secondary\"\r\n                      size=\"medium\"\r\n                      onClick={eliminarDescuento}\r\n                      startIcon={<RemoveCircleTwoToneIcon />}\r\n                    >\r\n                      Quitar descuento\r\n                    </Button>\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Box mt={3} width=\"100%\">\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>No. Productos: </b> {datosVentas?.productos.length}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Subtotal:</b> $\r\n                  {preciosDescuentos.subTotal\r\n                    ? formatoMexico(preciosDescuentos.subTotal)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Impuestos:</b> $\r\n                  {preciosDescuentos.impuestos\r\n                    ? formatoMexico(preciosDescuentos.impuestos)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 16 }}>\r\n                  <b>IVA:</b> $\r\n                  {preciosDescuentos.iva\r\n                    ? formatoMexico(preciosDescuentos.iva)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 16 }}>\r\n                  <b>IEPS:</b> $\r\n                  {preciosDescuentos.ieps\r\n                    ? formatoMexico(preciosDescuentos.ieps)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Descuento:</b>{\" \"}\r\n                  <b style={{ color: \"green\" }}>\r\n                    ${totalDescount ? formatoMexico(totalDescount) : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              <Typography style={{ fontSize: 27 }}>\r\n                {`Total: `}\r\n                <b>\r\n                  $\r\n                  {preciosDescuentos.total\r\n                    ? formatoMexico(preciosDescuentos.total)\r\n                    : 0}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          onClick={crearCotizacion}\r\n        >\r\n          Guardar\r\n        </Button>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\nimport NuevaCotizacion from \"./NuevaCotizacion\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport useStyles from \"../styles\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function Cotizacion({ type }) {\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [tipoVentana, setTipoVentana] = useState(type);\r\n\r\n  const {\r\n    reloadCrearCotizacion,\r\n    setReloadCrearCotizacion,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = (tipo) => {\r\n    if (!datosVentas) {\r\n      setAlert({\r\n        message: `Lo sentimos no hay productos que cotizar`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      return null;\r\n    } else {\r\n      if (sesion?.accesos.ventas.cotizaciones.ver === true) {\r\n        setOpen(!open);\r\n      } else {\r\n        console.log(\"pedir permiso\");\r\n        setAbrirPanelAcceso(!abrirPanelAcceso);\r\n        setDepartamentos({\r\n          departamento: \"ventas\",\r\n          subDepartamento: \"cotizaciones\",\r\n          tipo_acceso: \"ver\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadCrearCotizacion === true) {\r\n      setReloadCrearCotizacion(false);\r\n      setTipoVentana(\"GENERAR\");\r\n      setOpen(!open);\r\n    }\r\n  }, [reloadCrearCotizacion]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 84) {\r\n      handleClickOpen(\"\", false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen(tipoVentana)}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcCurrencyExchange style={{ fontSize: 50 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Generar cotizacion</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={tipoVentana === \"GENERAR\" ? \"md\" : \"lg\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <FcCurrencyExchange style={{ fontSize: 38 }} />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography style={{ fontSize: 18 }}>\r\n                  Nueva Cotización\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <NuevaCotizacion setOpen={setOpen} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarVenta() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    setVentaRetomada,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 118 && datosVenta) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const cancelarVenta = () => {\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n    setVentaRetomada(datosVenta);\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg\"\r\n              alt=\"icono cancelarventa\"\r\n              style={{ width: 35 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cancelar Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F7</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box\r\n              display=\"flex\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"center\"\r\n              flexGrow={1}\r\n            >\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Typography variant=\"h5\">Cancelar Venta</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Box p={2}>\r\n            <Typography variant=\"h5\">\r\n              ¿Esta seguro que desea cancelar esta venta?\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => cancelarVenta()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { FcShop } from \"react-icons/fc\";\r\n\r\nexport default function ObtenerMontos({\r\n  montos,\r\n  setMontos,\r\n  totales,\r\n  setTotales,\r\n  venta_credito,\r\n  montoEnCaja,\r\n  setMontoEnCaja,\r\n  datosCliente,\r\n}) {\r\n  const classes = useStyles();\r\n  const [efectivoConstante, setEfectivoConstante] = useState(totales.total);\r\n\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const total_venta = venta_original\r\n    ? parseFloat(venta_original.total.toFixed(2))\r\n    : 0;\r\n\r\n  const handlerChangeValue = (e, location) => {\r\n    const { value } = e.target;\r\n    switch (location) {\r\n      case \"EFECTIVO\":\r\n        setMontos({ ...montos, efectivo: value });\r\n        setEfectivoConstante(value);\r\n        break;\r\n      case \"TARJETA\":\r\n        setMontos({ ...montos, tarjeta: value });\r\n        break;\r\n\r\n      case \"PUNTOS\":\r\n        const valor = value !== \"\" ? parseInt(value) : 0;\r\n        if (valor <= datosCliente.monedero_electronico) {\r\n          setMontos({\r\n            ...montos,\r\n            puntos: value,\r\n            efectivo: efectivoConstante - valor,\r\n          });\r\n          setTotales({ ...totales, total: total_venta - valor });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        setMontos({ ...montos, transferencia: value });\r\n        break;\r\n      case \"CHEQUE\":\r\n        setMontos({ ...montos, cheque: value });\r\n        break;\r\n      default:\r\n        return alert(\"Error de pago\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (venta_credito) return;\r\n    let monto_caja = 0;\r\n    let monto_pagado =\r\n      parseFloat(montos.efectivo) +\r\n      parseFloat(montos.tarjeta) +\r\n      parseFloat(montos.puntos) +\r\n      parseFloat(montos.transferencia) +\r\n      parseFloat(montos.cheque);\r\n    let cambio_caja = parseFloat(monto_pagado) - total_venta;\r\n\r\n    monto_caja = parseFloat(montos.efectivo - cambio_caja);\r\n\r\n    setMontoEnCaja(monto_caja);\r\n    setTotales({\r\n      ...totales,\r\n      monto_pagado,\r\n      cambio: monto_pagado - totales.total,\r\n    });\r\n  }, [montos]);\r\n\r\n  const clearFieldOnFocus = (e) => {\r\n    const { name, value } = e.target;\r\n    const val = parseFloat(value);\r\n    switch (name) {\r\n      case \"EFECTIVO\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, efectivo: \"\" });\r\n          setEfectivoConstante(\"\");\r\n        }\r\n        break;\r\n      case \"TARJETA\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, tarjeta: \"\" });\r\n        }\r\n        break;\r\n      case \"PUNTOS\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, puntos: \"\" });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, transferencia: \"\" });\r\n        }\r\n        break;\r\n      case \"CHEQUE\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, cheque: \"\" });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const validateCantidadesCorrectas = (e) => {\r\n    const { name, value } = e.target;\r\n    const monto = parseFloat(montoEnCaja);\r\n    switch (name) {\r\n      case \"EFECTIVO\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, efectivo: 0 });\r\n          setEfectivoConstante(0);\r\n        }\r\n        break;\r\n      case \"TARJETA\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, tarjeta: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, tarjeta: 0 });\r\n        }\r\n        break;\r\n      case \"PUNTOS\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, puntos: 0 });\r\n        } else if (\r\n          monto < 0 &&\r\n          parseFloat(montos.puntos) !== parseFloat(total_venta)\r\n        ) {\r\n          setMontos({ ...montos, puntos: 0 });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, transferencia: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, transferencia: 0 });\r\n        }\r\n        break;\r\n      case \"CHEQUE\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, cheque: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, cheque: 0 });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Efectivo</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"EFECTIVO\"\r\n              id=\"form-producto-efectivo\"\r\n              variant=\"outlined\"\r\n              value={montos.efectivo}\r\n              onChange={(e) => handlerChangeValue(e, \"EFECTIVO\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              autoFocus\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/tarjeta-de-credito.svg\"\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Tarjeta</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"TARJETA\"\r\n              variant=\"outlined\"\r\n              value={montos.tarjeta}\r\n              onChange={(e) => handlerChangeValue(e, \"TARJETA\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <FcShop style={{ fontSize: 50, cursor: \"pointer\" }} />\r\n          </Box>\r\n          <Typography variant=\"caption\">Puntos</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"PUNTOS\"\r\n              variant=\"outlined\"\r\n              value={montos.puntos}\r\n              onChange={(e) => handlerChangeValue(e, \"PUNTOS\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box p={0}>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/transferencia-bancaria.svg\"\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Transferencia</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"TRANSFERENCIA\"\r\n              variant=\"outlined\"\r\n              value={montos.transferencia}\r\n              onChange={(e) => handlerChangeValue(e, \"TRANSFERENCIA\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box p={0}>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cheque.png\"\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Cheque</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"CHEQUE\"\r\n              variant=\"outlined\"\r\n              value={montos.cheque}\r\n              onChange={(e) => handlerChangeValue(e, \"CHEQUE\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\n\r\nimport { Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { FcBusinessman, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nexport default function InfoTotalesVenta({\r\n  montos,\r\n  totales,\r\n  datosCliente,\r\n  monedero,\r\n  monederoTotal,\r\n}) {\r\n  return (\r\n    <Fragment>\r\n      <Grid item md={5} xs={12}>\r\n        <Box display=\"flex\">\r\n          <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n            <Box mt={0.5} mr={0.5}>\r\n              <FcBusinessman style={{ fontSize: 19 }} />\r\n            </Box>\r\n            <Typography variant=\"subtitle1\">\r\n              <b>Cliente:</b>\r\n            </Typography>\r\n          </Box>\r\n          <Typography variant=\"subtitle1\">\r\n            {datosCliente.nombre_cliente\r\n              ? datosCliente.nombre_cliente\r\n              : \"Público General\"}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\">\r\n          <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n            <Box mt={0.5} mr={0.5}>\r\n              <FcSalesPerformance style={{ fontSize: 19 }} />\r\n            </Box>\r\n            <Typography variant=\"subtitle1\">\r\n              <b>Dinero electronico generado:</b>\r\n            </Typography>\r\n          </Box>\r\n          <Typography variant=\"subtitle1\">\r\n            ${monedero ? formatoMexico(monedero) : 0.0}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\">\r\n          <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n            <Box mt={0.5} mr={0.5}>\r\n              <FcSalesPerformance style={{ fontSize: 19 }} />\r\n            </Box>\r\n            <Typography variant=\"subtitle1\">\r\n              <b>Dinero electrónico disponible:</b>\r\n            </Typography>\r\n          </Box>\r\n          <Typography variant=\"subtitle1\">\r\n            $\r\n            {!datosCliente.monedero_electronico\r\n              ? 0.0\r\n              : formatoMexico(\r\n                  datosCliente.monedero_electronico - montos.puntos\r\n                )}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\">\r\n          <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n            <Box mt={0.5} mr={0.5}>\r\n              <FcSalesPerformance style={{ fontSize: 19 }} />\r\n            </Box>\r\n            <Typography variant=\"subtitle1\">\r\n              <b>Total puntos:</b>\r\n            </Typography>\r\n          </Box>\r\n          <Typography variant=\"subtitle1\">\r\n            $\r\n            {monederoTotal ? formatoMexico(monederoTotal - montos.puntos) : 0.0}\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item md={5} xs={12}>\r\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Monto pagado:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.monto_pagado)}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Subtotal:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.subtotal)}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Impuestos:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.impuestos)}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Total:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">$ {formatoMexico(totales.total)}</Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Descuento:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {totales.descuento ? formatoMexico(totales.descuento) : 0}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography align=\"left\" style={{ fontSize: \"17px\" }}>\r\n            <b>Cambio:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {totales.cambio ? formatoMexico(totales.cambio) : 0}\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, Fragment } from \"react\";\r\nimport { Grid, TextField, Typography } from \"@material-ui/core\";\r\n/* import { Edit } from \"@material-ui/icons\"; */\r\nimport moment from \"moment\";\r\n\r\nexport default function CreditoVenta({\r\n  montos,\r\n  setMontos,\r\n  totales,\r\n  setTotales,\r\n  venta_credito,\r\n  setMontoEnCaja,\r\n  datosCliente,\r\n  setDatosCliente,\r\n  venta_base,\r\n  /* editarCliente,\r\n  setEditarCliente, */\r\n  fechaVencimientoDate,\r\n  setfechaVencimientoDate,\r\n  setAbonoMinimo,\r\n  abono_minimo,\r\n}) {\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const total_venta = venta_original\r\n    ? parseFloat(venta_original.total.toFixed(2))\r\n    : 0;\r\n\r\n  useEffect(() => {\r\n    setfechaVencimientoDate(\r\n      moment()\r\n        .add(\r\n          datosCliente.dias_credito ? parseInt(datosCliente.dias_credito) : 0,\r\n          \"days\"\r\n        )\r\n        .format(\"YYYY-MM-DD\")\r\n    );\r\n  }, [datosCliente, datosCliente.dias_credito]);\r\n\r\n  useEffect(() => {\r\n    if (venta_credito) {\r\n      setMontos({\r\n        efectivo: 0,\r\n        tarjeta: 0,\r\n        puntos: 0,\r\n        transferencia: 0,\r\n        cheque: 0,\r\n      });\r\n      setTotales({\r\n        ...totales,\r\n\r\n        cambio: 0,\r\n        monto_pagado: total_venta,\r\n      });\r\n      setMontoEnCaja(0);\r\n    } else {\r\n      setMontos({\r\n        ...montos,\r\n        efectivo: total_venta,\r\n      });\r\n      setMontoEnCaja(total_venta);\r\n    }\r\n  }, [venta_credito]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid item xs={12}>\r\n        <Grid container spacing={1}>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Dias de Crédito:</b>\r\n            </Typography>\r\n\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.dias_credito === null\r\n                  ? 0\r\n                  : datosCliente.dias_credito\r\n              }\r\n              onChange={(e) =>\r\n                setDatosCliente({\r\n                  ...datosCliente,\r\n                  dias_credito: e.target.value,\r\n                })\r\n              }\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Límite de Crédito:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.limite_credito === null\r\n                  ? 0\r\n                  : datosCliente.limite_credito\r\n              }\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Crédito Disponible:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.credito_disponible === null\r\n                  ? 0\r\n                  : datosCliente.credito_disponible\r\n              }\r\n              disabled\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Total a Crédito:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n              value={total_venta}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Abono mínimo:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"abono_minimo\"\r\n              id=\"form-abono_minim\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setAbonoMinimo(e.target.value)}\r\n              value={abono_minimo}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Fecha de Vencimiento:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              value={fechaVencimientoDate}\r\n              onChange={(e) => {\r\n                const modelDate = moment(e.target.value).add(1, \"days\");\r\n                const hoy = moment();\r\n                const diasDiff = modelDate.diff(hoy, \"days\");\r\n                setfechaVencimientoDate(e.target.value);\r\n                setDatosCliente({\r\n                  ...datosCliente,\r\n                  dias_credito: diasDiff,\r\n                });\r\n              }}\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          {/* <Grid item md={2} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\">\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                size=\"large\"\r\n                onClick={() => setEditarCliente(true)}\r\n              >\r\n                <Edit />\r\n              </Button>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n  InputAdornment,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DescuentoVenta({\r\n  venta_base,\r\n  setVentaBase,\r\n  totales,\r\n  setTotales,\r\n  montos,\r\n  setMontos,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  //States descuento venta\r\n  const [descuentoAplicarVenta, setDescuentoAplicarVenta] = useState(0);\r\n  const [descuentoPorsentajeVenta, setDescuentoPorsentajeVenta] = useState(0);\r\n  const [variables, setVariables] = useState({\r\n    productos: venta_base.productos,\r\n    total: totales.total,\r\n    subTotal: totales.subtotal,\r\n    impuestos: totales.impuestos,\r\n    iva: venta_base.iva,\r\n    ieps: venta_base.ieps,\r\n    descuento: totales.descuento,\r\n    descuento_general_activo: false,\r\n    descuento_general: {\r\n      cantidad_descontado: 0,\r\n      porciento: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n  });\r\n\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const subtotal_venta = venta_original\r\n    ? parseFloat(venta_original.subTotal.toFixed(2))\r\n    : 0;\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const handlerChangeDiscountVenta = (PRICE) => {\r\n    /* const { value } = e.target; */\r\n    const value = PRICE.toString();\r\n    if (value && value !== \"0\") {\r\n      const nuevo_subtotal = subtotal_venta;\r\n      const descuento =\r\n        ((nuevo_subtotal - parseFloat(value)) * 100) / subtotal_venta - 100;\r\n      const positiveDiscount = Math.abs(descuento);\r\n      const descuento_porcentaje = parseFloat(positiveDiscount.toFixed(2));\r\n      setDescuentoPorsentajeVenta(descuento_porcentaje);\r\n      handleCalculateNewDiscountVenta(descuento_porcentaje);\r\n      return;\r\n    }\r\n    setVariables({\r\n      productos: venta_original.productos,\r\n      total: venta_original.total,\r\n      subTotal: venta_original.subTotal,\r\n      impuestos: venta_original.impuestos,\r\n      iva: venta_original.iva,\r\n      ieps: venta_original.ieps,\r\n      descuento: venta_original.descuento,\r\n      descuento_general_activo: false,\r\n      descuento_general: {\r\n        cantidad_descontado: 0,\r\n        porciento: 0,\r\n        precio_con_descuento: 0,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleChangePorsentDiscount = (PERCENT) => {\r\n    const value = PERCENT.toString();\r\n    if (value && value !== \"0\") {\r\n      const ventaSubtotal = subtotal_venta;\r\n      const val =\r\n        value < 10\r\n          ? parseFloat(`0.0${value.replace(\".\", \"\")}`)\r\n          : parseFloat(value) === 100\r\n          ? 1\r\n          : parseFloat(`0.${value.replace(\".\", \"\")}`);\r\n      const porsent = ventaSubtotal * val;\r\n      setDescuentoAplicarVenta(porsent.toFixed(2));\r\n      handleCalculateNewDiscountVenta(value);\r\n      return;\r\n    }\r\n    setVariables({\r\n      productos: venta_original.productos,\r\n      total: venta_original.total,\r\n      subTotal: venta_original.subTotal,\r\n      impuestos: venta_original.impuestos,\r\n      iva: venta_original.iva,\r\n      ieps: venta_original.ieps,\r\n      descuento: venta_original.descuento,\r\n      descuento_general_activo: false,\r\n      descuento_general: {\r\n        cantidad_descontado: 0,\r\n        porciento: 0,\r\n        precio_con_descuento: 0,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = (descuentoPorsentajeVenta) => {\r\n    let venta = { ...venta_original };\r\n    const productStorage = venta.productos;\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(descuentoPorsentajeVenta);\r\n      /* const dineroDescontadoDescuento = parseFloat(\r\n        product.precio_actual_object.precio_venta *\r\n          parseFloat((`0.${porsentajeNewDescuento}`).toFixed(2))\r\n      );\r\n */\r\n      const dineroDescontadoDescuento =\r\n        porsentajeNewDescuento > 1\r\n          ? porsentajeNewDescuento >= 10\r\n            ? parseFloat(\r\n                (\r\n                  product.precio_actual_object.precio_venta *\r\n                  parseFloat(`0.${porsentajeNewDescuento}`)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(\r\n                (\r\n                  (product.precio_actual_object.precio_venta *\r\n                    parseFloat(`0.${porsentajeNewDescuento}`)) /\r\n                  10\r\n                ).toFixed(2)\r\n              )\r\n          : parseFloat(\r\n              (product.precio_actual_object.precio_venta *\r\n                porsentajeNewDescuento) /\r\n                100\r\n            );\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          product.precio_actual_object.precio_venta - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      );\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.iva < 10\r\n                ? `0${product.id_producto.precios.iva}`\r\n                : product.id_producto.precios.iva\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.ieps < 10\r\n                ? `0${product.id_producto.precios.ieps}`\r\n                : product.id_producto.precios.ieps\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(descuentoPorsentajeVenta)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(descuentoPorsentajeVenta),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto = parseFloat(\r\n        (\r\n          parseFloat(precio_actual_object.dinero_descontado) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: product.precio_actual_object.cantidad_unidad,\r\n          numero_precio: product.precio_actual_object.numero_precio,\r\n          unidad_maxima: product.precio_actual_object.unidad_maxima,\r\n          precio_general: product.precio_actual_object.precio_general,\r\n          precio_neto: newPrecioNetoProduct,\r\n          precio_venta: newPrecioVentaProduct,\r\n          iva_precio: newIvaProduct,\r\n          ieps_precio: newIepsProduct,\r\n          utilidad: newUtilidadProduct,\r\n          dinero_descontado: descuentoProducto,\r\n          porciento: product.precio_actual_object.porciento\r\n            ? parseFloat(\r\n                (\r\n                  parseFloat(product.precio_actual_object.porciento) +\r\n                  parseFloat(porsentajeNewDescuento)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(porsentajeNewDescuento),\r\n        },\r\n      });\r\n\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n    setVariables({\r\n      productos: productosFinal,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo: true,\r\n      descuento_general: {\r\n        cantidad_descontado: descuento,\r\n        porciento: parseFloat(descuentoPorsentajeVenta),\r\n        precio_con_descuento: total,\r\n      },\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = () => {\r\n    let venta = { ...venta_original };\r\n    const {\r\n      productos,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo,\r\n      descuento_general,\r\n    } = variables;\r\n    /* localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...venta,\r\n        productos: productosFinal,\r\n        total,\r\n        subTotal,\r\n        impuestos,\r\n        iva,\r\n        ieps,\r\n        descuento,\r\n      })\r\n    ); */\r\n    setVentaBase({\r\n      ...venta,\r\n      productos,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo,\r\n      descuento_general,\r\n    });\r\n    setTotales({ ...totales, total, subtotal: subTotal, impuestos, descuento });\r\n    setMontos({ ...montos, efectivo: total });\r\n    handleClose();\r\n  };\r\n\r\n  const handleInvalidInput = (e) => {\r\n    const { value } = e.target;\r\n    if (!value || value === \"0\" || parseFloat(value) === 0) {\r\n      setVariables({\r\n        productos: venta_original.productos,\r\n        total: venta_original.total,\r\n        subTotal: venta_original.subTotal,\r\n        impuestos: venta_original.impuestos,\r\n        iva: venta_original.iva,\r\n        ieps: venta_original.ieps,\r\n        descuento: venta_original.descuento,\r\n        descuento_general_activo: false,\r\n        descuento_general: {\r\n          cantidad_descontado: 0,\r\n          porciento: 0,\r\n          precio_con_descuento: 0,\r\n        },\r\n      });\r\n      setDescuentoAplicarVenta(0);\r\n      setDescuentoPorsentajeVenta(0);\r\n    }\r\n  };\r\n\r\n  //states para calcular con estos y no se recalcule cuando se ejecuten las funciones\r\n  const [precioVariable, setPrecioVariable] = useState(0);\r\n  const [porcentVariable, setPorcentVariable] = useState(0);\r\n\r\n  const [PRICE] = useDebounce(precioVariable, 700);\r\n  const [PERCENT] = useDebounce(porcentVariable, 700);\r\n\r\n  useEffect(() => {\r\n    handlerChangeDiscountVenta(descuentoAplicarVenta);\r\n  }, [PRICE]);\r\n\r\n  useEffect(() => {\r\n    handleChangePorsentDiscount(descuentoPorsentajeVenta);\r\n  }, [PERCENT]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        size=\"large\"\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<LocalOfferIcon style={{ fontSize: \"28px\" }} />}\r\n        onClick={handleClickOpen}\r\n        disabled={!venta_base}\r\n      >\r\n        Descuento\r\n      </Button>\r\n\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box textAlign=\"center\" display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h5\">Descuento</Typography>\r\n            <Button\r\n              color=\"secondary\"\r\n              variant=\"contained\"\r\n              size=\"small\"\r\n              onClick={handleClose}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Alert severity=\"info\">\r\n            El descuento se aplica en el <b>SUBTOTAL</b> de la venta.\r\n          </Alert>\r\n          <Box my={1}>\r\n            <Grid container spacing={2} justifyContent=\"center\">\r\n              <Grid item md={6} xs={12}>\r\n                <Typography>\r\n                  <b>Dinero a descontar:</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"dinero-descuento\"\r\n                  id=\"form-venta-dinero-descuento\"\r\n                  value={descuentoAplicarVenta}\r\n                  /* onChange={(e) => handlerChangeDiscountVenta(e)} */\r\n                  onChange={(e) => {\r\n                    setDescuentoAplicarVenta(e.target.value);\r\n                    setPrecioVariable(e.target.value);\r\n                  }}\r\n                  variant=\"outlined\"\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                  onBlur={handleInvalidInput}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <Typography>\r\n                  <b>Porcentaje:</b>\r\n                </Typography>\r\n\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  id=\"form-venta-porsentaje-descuento\"\r\n                  variant=\"outlined\"\r\n                  value={descuentoPorsentajeVenta}\r\n                  /* onChange={(e) => handleChangePorsentDiscount(e)} */\r\n                  onChange={(e) => {\r\n                    setDescuentoPorsentajeVenta(e.target.value);\r\n                    setPorcentVariable(e.target.value);\r\n                  }}\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                  onBlur={handleInvalidInput}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  IVA\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.iva)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  IEPS\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.ieps)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={3} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Subtotal\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.subTotal)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Impuestos\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.impuestos)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={3} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Total\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.total)}</b>\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => aplicarDescuento()}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useContext, Fragment } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { formatoMexico, numerosRandom } from \"../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../sucursales/Facturacion/catalogos\";\r\nimport { calcularMonedero } from \"./calcularMonedero\";\r\nimport { CREAR_VENTA } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport ObtenerMontos from \"./Montos\";\r\nimport InfoTotalesVenta from \"./InfoVentaTotales\";\r\nimport CreditoVenta from \"./Credito\";\r\nimport DescuentoVenta from \"./Descuento\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst initial_state_montos = {\r\n  efectivo: 0,\r\n  tarjeta: 0,\r\n  puntos: 0,\r\n  transferencia: 0,\r\n  cheque: 0,\r\n};\r\n\r\nconst initial_state_totales = {\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  descuento: 0,\r\n  cambio: 0,\r\n  monto_pagado: 0,\r\n};\r\n\r\nexport default function CerrarVenta() {\r\n  const classes = useStyles();\r\n  const [cambio, setCambio] = useState(false);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [open, setOpen] = useState(false);\r\n  //Datos del context\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    setOpenBackDrop,\r\n    setVentaRetomada,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  //States de los montos a pagar\r\n  const [montos, setMontos] = useState(initial_state_montos);\r\n  const [totales, setTotales] = useState(initial_state_totales);\r\n  const [venta_credito, setVentaCredito] = useState(false);\r\n  const [credito_disponible, setCreditoDisponible] = useState(false);\r\n  const [fechaVencimientoDate, setfechaVencimientoDate] = useState(\"\");\r\n  const [limite_superado, setLimiteSuperado] = useState(false);\r\n  const [monederoTotal, setMonederoTotal] = useState(0);\r\n  const [montoEnCaja, setMontoEnCaja] = useState(0);\r\n  const [venta_base, setVentaBase] = useState(0);\r\n  const [editarCliente, setEditarCliente] = useState(false);\r\n  const [datosCliente, setDatosCliente] = useState({});\r\n  const [monedero, setMonedero] = useState(0);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [abono_minimo, setAbonoMinimo] = useState(0);\r\n\r\n  const [createVenta] = useMutation(CREAR_VENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    if (!open) {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      setVentaBase(venta);\r\n      const { cliente, subTotal, impuestos, total } = venta;\r\n\r\n      const datos_cliente = venta && cliente ? cliente : {};\r\n      if (datos_cliente.credito_disponible) {\r\n        setCreditoDisponible(true);\r\n      } else {\r\n        setCreditoDisponible(false);\r\n      }\r\n      setDatosCliente(datos_cliente);\r\n      setMontoEnCaja(venta === null ? 0 : parseFloat(total.toFixed(2)));\r\n      setTotales({\r\n        subtotal: venta === null ? 0 : parseFloat(subTotal.toFixed(2)),\r\n        impuestos: venta === null ? 0 : parseFloat(impuestos.toFixed(2)),\r\n        total: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n        descuento: 0,\r\n        cambio: 0,\r\n        monto_pagado: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n      });\r\n      setMontos({\r\n        efectivo: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n        tarjeta: 0,\r\n        puntos: 0,\r\n        transferencia: 0,\r\n        cheque: 0,\r\n      });\r\n      const monedero_generado = calcularMonedero(venta);\r\n      setMonedero(parseFloat(monedero_generado));\r\n      setMonederoTotal(\r\n        !cliente.monedero_electronico\r\n          ? parseFloat(monedero_generado)\r\n          : parseFloat(cliente.monedero_electronico) +\r\n              parseFloat(monedero_generado)\r\n      );\r\n    }\r\n    setOpen(!open);\r\n  };\r\n\r\n  const hancleClickCerrarVentaCambio = () => {\r\n    setCambio(true);\r\n\r\n    //Limpiar el storage de ventas\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    //Actualizar la tabla de ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n  };\r\n\r\n  const handleCloseCambio = () => {\r\n    //limpiar states\r\n    setCambio(false);\r\n    resetStates();\r\n  };\r\n\r\n  const resetStates = () => {\r\n    setDatosCliente({});\r\n    setMonedero(0);\r\n    setfechaVencimientoDate(\"\");\r\n    setMonederoTotal(0);\r\n    setVentaBase(0);\r\n    setEditarCliente(false);\r\n    setVentaCredito(false);\r\n\r\n    //States de los montos a pagar\r\n    setMontoEnCaja(0);\r\n    setTotales(initial_state_totales);\r\n    setMontos(initial_state_montos);\r\n    setVentaRetomada(null);\r\n    setAbonoMinimo(0);\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const tecla_escape = event.keyCode;\r\n    if (tecla_escape === 27 && datosVenta) {\r\n      handleClickOpen();\r\n    } /* else if (tecla_escape === 13 && open && venta_base){\r\n      console.log(\"ejecuta 1\");\r\n      handleClickFinishVenta();\r\n      return\r\n    } */ else if (\r\n      tecla_escape === 13 &&\r\n      cambio &&\r\n      !open\r\n    ) {\r\n      handleCloseCambio();\r\n    }\r\n  }\r\n\r\n  const handleClickFinishVenta = async () => {\r\n    if (venta_credito && venta_base.total > datosCliente.credito_disponible) {\r\n      setLimiteSuperado(true);\r\n      return;\r\n    }\r\n    setLimiteSuperado(false);\r\n    try {\r\n      setOpenBackDrop(true);\r\n      //Obtener datos del storage\r\n      const sesion = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n      const usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n      //Obtener ventad final\r\n      const ventaFinal = { ...venta_base };\r\n      //Generar folio\r\n      const folio = numerosRandom(100000000000, 999999999999);\r\n      //Agregar folio venta\r\n      ventaFinal.folio = `${folio}`;\r\n      //Agregar los montos en caja\r\n      const montosEnCaja = {\r\n        monto_efectivo: {\r\n          monto: parseFloat(montoEnCaja),\r\n          metodo_pago: formaPago[0].Value,\r\n        },\r\n        monto_tarjeta_debito: {\r\n          monto: parseFloat(montos.tarjeta),\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_tarjeta_credito: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_creditos: {\r\n          monto: 0,\r\n          metodo_pago: \"\",\r\n        },\r\n        monto_monedero: {\r\n          monto: parseFloat(montos.puntos),\r\n          metodo_pago: formaPago[4].Value,\r\n        },\r\n        monto_transferencia: {\r\n          monto: parseFloat(montos.transferencia),\r\n          metodo_pago: formaPago[2].Value,\r\n        },\r\n        monto_cheques: {\r\n          monto: parseFloat(montos.cheque),\r\n          metodo_pago: formaPago[1].Value,\r\n        },\r\n        monto_vales_despensa: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[6].Value,\r\n        },\r\n      };\r\n\r\n      const abonoMinimo = parseFloat(abono_minimo);\r\n      ventaFinal.montos_en_caja = montosEnCaja;\r\n      //Colocamos si es venta a credito\r\n      ventaFinal.credito = venta_credito;\r\n      ventaFinal.abono_minimo = venta_credito && abonoMinimo ? abonoMinimo : 0;\r\n      //Agregar descuentos de ventas\r\n      ventaFinal.descuento_general_activo = ventaFinal.descuento_general_activo\r\n        ? ventaFinal.descuento_general_activo\r\n        : false;\r\n      ventaFinal.descuento_general = ventaFinal.descuento_general\r\n        ? ventaFinal.descuento_general\r\n        : null;\r\n      //Declarar dias de credito como false\r\n      ventaFinal.dias_de_credito_venta = datosCliente\r\n        ? datosCliente.dias_credito\r\n        : null;\r\n      ventaFinal.fecha_de_vencimiento_credito = fechaVencimientoDate;\r\n      ventaFinal.fecha_vencimiento_cotizacion = null;\r\n      ventaFinal.cambio = totales.cambio;\r\n      //Editar cliente\r\n      ventaFinal.editar_cliente = editarCliente;\r\n      //Agregando los puntos finales\r\n      //si pago con puntos y su compra genero puntos, hacer que no genere esos puntos\r\n      ventaFinal.puntos_totales_venta =\r\n        parseFloat(montos.puntos) > 0\r\n          ? monederoTotal - monedero\r\n          : monederoTotal;\r\n      //poner metodo y forma de pago\r\n      ventaFinal.metodo_pago = venta_credito ? \"PPD\" : \"PUE\";\r\n      let numero_mayor = 0;\r\n      let forma_pago;\r\n\r\n      if (venta_credito) {\r\n        forma_pago = \"99\";\r\n      } else {\r\n        Object.keys(montosEnCaja).forEach((key) => {\r\n          if (montosEnCaja[key].monto > numero_mayor) {\r\n            numero_mayor = montosEnCaja[key].monto;\r\n            forma_pago = montosEnCaja[key].metodo_pago;\r\n          }\r\n        });\r\n      }\r\n\r\n      ventaFinal.forma_pago = forma_pago;\r\n\r\n      //Enviar los datos\r\n      await createVenta({\r\n        variables: {\r\n          input: ventaFinal,\r\n          empresa: sesion.empresa,\r\n          sucursal: sesion.sucursal,\r\n          usuario: usuario._id,\r\n          caja: sesion.id_caja,\r\n        },\r\n      });\r\n      //Quitar loading\r\n      setOpenBackDrop(false);\r\n      setOpen(false);\r\n      hancleClickCerrarVentaCambio();\r\n    } catch (error) {\r\n      setOpenBackDrop(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 38 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pagar</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>ESC</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n        open={open}\r\n        onClose={() => handleClickOpen()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"center\",\r\n          }}\r\n          open={limite_superado}\r\n          autoHideDuration={5000}\r\n          onClose={() => setLimiteSuperado(false)}\r\n          message=\"La cantidad total de la venta supera el crédito disponible del cliente\"\r\n          action={\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"close\"\r\n              color=\"inherit\"\r\n              onClick={() => setLimiteSuperado(false)}\r\n            >\r\n              <Close fontSize=\"small\" />\r\n            </IconButton>\r\n          }\r\n        />\r\n        <DialogTitle>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Box>\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSizeDialogsPequeno}\r\n              />\r\n            </Box>\r\n            <Box mx={2} flexGrow={1}>\r\n              <Typography variant=\"h4\">Cerrar Venta</Typography>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClickOpen()}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ObtenerMontos\r\n            montos={montos}\r\n            setMontos={setMontos}\r\n            totales={totales}\r\n            setTotales={setTotales}\r\n            venta_credito={venta_credito}\r\n            montoEnCaja={montoEnCaja}\r\n            setMontoEnCaja={setMontoEnCaja}\r\n            datosCliente={datosCliente}\r\n          />\r\n          <Box my={1}>\r\n            <Grid container spacing={2} justifyContent=\"space-between\">\r\n              <InfoTotalesVenta\r\n                montos={montos}\r\n                totales={totales}\r\n                datosCliente={datosCliente}\r\n                monedero={monedero}\r\n                monederoTotal={monederoTotal}\r\n              />\r\n\r\n              <Box display={venta_credito ? \"flex\" : \"none\"}>\r\n              <CreditoVenta\r\n                montos={montos}\r\n                setMontos={setMontos}\r\n                totales={totales}\r\n                setTotales={setTotales}\r\n                venta_credito={venta_credito}\r\n                venta_base={venta_base}\r\n                setMontoEnCaja={setMontoEnCaja}\r\n                datosCliente={datosCliente}\r\n                setDatosCliente={setDatosCliente}\r\n                editarCliente={editarCliente}\r\n                setEditarCliente={setEditarCliente}\r\n                fechaVencimientoDate={fechaVencimientoDate}\r\n                setfechaVencimientoDate={setfechaVencimientoDate}\r\n                setAbonoMinimo={setAbonoMinimo}\r\n                abono_minimo={abono_minimo}\r\n              />\r\n              </Box>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n\r\n        <DialogActions style={{ justifyContent: \"space-between\" }}>\r\n          <Box display={\"flex\"} justifyContent=\"flex-start\">\r\n            <Box pr={1}>\r\n              {venta_credito ? (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => {\r\n                    setVentaCredito(false);\r\n                    setEditarCliente(false);\r\n                  }}\r\n                  startIcon={<ClearIcon style={{ fontSize: \"28px\" }} />}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setVentaCredito(true);\r\n                  }}\r\n                  startIcon={<CreditCardIcon style={{ fontSize: \"28px\" }} />}\r\n                  disabled={!credito_disponible || !venta_base}\r\n                >\r\n                  Credito\r\n                </Button>\r\n              )}\r\n            </Box>\r\n            <DescuentoVenta\r\n              venta_base={venta_base}\r\n              setVentaBase={setVentaBase}\r\n              montos={montos}\r\n              setMontos={setMontos}\r\n              totales={totales}\r\n              setTotales={setTotales}\r\n            />\r\n          </Box>\r\n          <Button\r\n            onClick={() => {\r\n              handleClickFinishVenta();\r\n            }}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            autoFocus\r\n            disabled={!venta_base}\r\n          >\r\n            Terminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        open={cambio}\r\n        onClose={() => handleCloseCambio()}\r\n        TransitionComponent={Transition}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ textAlign: \"center\" }}>\r\n          <Alert\r\n            severity=\"success\"\r\n            action={\r\n              <IconButton\r\n                onClick={() => handleCloseCambio()}\r\n                size=\"small\"\r\n                color=\"inherit\"\r\n                autoFocus\r\n              >\r\n                <Close style={{ fontSize: \"25px\" }} />\r\n              </IconButton>\r\n            }\r\n          >\r\n            Venta finalizada\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Typography variant=\"h6\" align=\"center\">\r\n              Su cámbio\r\n            </Typography>\r\n            <Typography variant=\"h3\" align=\"center\">\r\n              ${formatoMexico(totales.cambio)}\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const calcularMonedero = (venta) => {\r\n    let suma = 0;\r\n    if (venta) {\r\n      venta.productos.forEach((element) => {\r\n        if (element.id_producto.precios.monedero) {\r\n          //multiplicacion del puntos de este producto con el total de este\r\n          const { monedero_electronico } = element.id_producto.precios;\r\n          const resultado = monedero_electronico * element.precio_a_vender;\r\n          suma += resultado;\r\n        }\r\n      });\r\n    }\r\n    return suma;\r\n  };","import React, { useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ItemsCarousel from \"react-items-carousel\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\nimport useStyles from \"../../styles\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\n\r\nexport default function VistaProductoNormal({\r\n  productoBase,\r\n  agregarProductos,\r\n}) {\r\n  const classes = useStyles();\r\n  const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n  const chevronWidth = 40;\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item sm={4} xs={12}>\r\n        {productoBase.id_producto.imagenes.length > 0 ? (\r\n          <Box px={2} border={1}>\r\n            <ItemsCarousel\r\n              requestToChangeActive={setActiveItemIndex}\r\n              activeItemIndex={activeItemIndex}\r\n              numberOfCards={1}\r\n              leftChevron={\r\n                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                  <ArrowBackIosIcon />\r\n                </IconButton>\r\n              }\r\n              rightChevron={\r\n                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                  <ArrowForwardIosIcon />\r\n                </IconButton>\r\n              }\r\n              infiniteLoop={true}\r\n              outsideChevron\r\n              chevronWidth={chevronWidth}\r\n            >\r\n              {productoBase.id_producto.imagenes.map((image, index) => {\r\n                return (\r\n                  <Box\r\n                    key={index}\r\n                    className={classes.containerImagenesProducto}\r\n                    display=\"flex\"\r\n                    justifyContent=\"center\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <img\r\n                      alt=\"Imagen producto\"\r\n                      src={image.url_imagen}\r\n                      className={classes.imagenProducto}\r\n                    />\r\n                  </Box>\r\n                );\r\n              })}\r\n            </ItemsCarousel>\r\n          </Box>\r\n        ) : (\r\n          <Box\r\n            height=\"150px\"\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <PhotoLibraryIcon color=\"disabled\" style={{ fontSize: 100 }} />\r\n          </Box>\r\n        )}\r\n      </Grid>\r\n      <Grid item sm={8} xs={12}>\r\n        <Box display=\"flex\" alignItems=\"center\" height=\"100%\">\r\n          <Box width=\"100%\">\r\n            <Typography variant=\"h6\">\r\n              <b>\r\n                {productoBase.id_producto?.datos_generales.nombre_comercial}\r\n              </b>\r\n            </Typography>\r\n            <Typography>\r\n              {`Codigo de barras: `}\r\n              <b>{productoBase.codigo_barras}</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Box textAlign=\"center\" mr={2}>\r\n                <Typography>\r\n                  {`Unidad: `}\r\n                  <b>{productoBase.unidad}</b>\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"center\" mx={1}>\r\n                <Typography>\r\n                  {`Existencias: `}\r\n                  <b>\r\n                    {productoBase.inventario_general\r\n                      ? productoBase.inventario_general[0].cantidad_existente\r\n                      : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            {productoBase.descuento_activo === true ? (\r\n              <Typography color=\"primary\">\r\n                <b>Descuento activo </b>\r\n              </Typography>\r\n            ) : null}\r\n            <Box my={1} display=\"flex\">\r\n              {productoBase.descuento_activo === true ? (\r\n                <Box mr={2}>\r\n                  <Typography\r\n                    variant=\"h5\"\r\n                    color=\"textSecondary\"\r\n                    style={{ textDecoration: \"line-through\" }}\r\n                  >\r\n                    <b> ${formatoMexico(productoBase.precio)} </b>\r\n                  </Typography>\r\n                </Box>\r\n              ) : null}\r\n              <Box>\r\n                <Typography variant=\"h4\">\r\n                  {productoBase.descuento_activo === true ? (\r\n                    <b>${formatoMexico(productoBase.descuento.precio_neto)}</b>\r\n                  ) : (\r\n                    <b>${formatoMexico(productoBase.precio)}</b>\r\n                  )}\r\n                </Typography>\r\n              </Box>\r\n              <Box mx={2} />\r\n              <Button\r\n                size=\"large\"\r\n                onClick={() => agregarProductos(productoBase)}\r\n                color=\"primary\"\r\n                startIcon={<Add />}\r\n              >\r\n                Agregar\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport ItemsCarousel from \"react-items-carousel\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Add } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  colorContainer: {\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n\r\nexport default function VistaProductoMedidas({ productos, agregarProductos }) {\r\n  const classes = useStyles();\r\n  const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n  const chevronWidth = 40;\r\n\r\n  const producto_base = productos[0];\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item sm={4} xs={12}>\r\n          {producto_base.id_producto.imagenes.length > 0 ? (\r\n            <Box px={2} border={1}>\r\n              <ItemsCarousel\r\n                requestToChangeActive={setActiveItemIndex}\r\n                activeItemIndex={activeItemIndex}\r\n                numberOfCards={1}\r\n                leftChevron={\r\n                  <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                    <ArrowBackIosIcon />\r\n                  </IconButton>\r\n                }\r\n                rightChevron={\r\n                  <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                    <ArrowForwardIosIcon />\r\n                  </IconButton>\r\n                }\r\n                infiniteLoop={true}\r\n                outsideChevron\r\n                chevronWidth={chevronWidth}\r\n              >\r\n                {producto_base.id_producto.imagenes.map((image, index) => {\r\n                  return (\r\n                    <Box\r\n                      key={index}\r\n                      className={classes.containerImagenesProducto}\r\n                      display=\"flex\"\r\n                      justifyContent=\"center\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <img\r\n                        alt=\"Imagen producto\"\r\n                        src={image.url_imagen}\r\n                        className={classes.imagenProducto}\r\n                      />\r\n                    </Box>\r\n                  );\r\n                })}\r\n              </ItemsCarousel>\r\n            </Box>\r\n          ) : (\r\n            <Box\r\n              height=\"150px\"\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <PhotoLibraryIcon color=\"disabled\" style={{ fontSize: 100 }} />\r\n            </Box>\r\n          )}\r\n        </Grid>\r\n        <Grid item sm={8} xs={12}>\r\n          <Box display=\"flex\" alignItems=\"center\" height=\"100%\">\r\n            <Box width=\"100%\">\r\n              <Typography variant=\"h6\">\r\n                <b>\r\n                  {producto_base.id_producto?.datos_generales.nombre_comercial}\r\n                </b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <Box textAlign=\"center\" mr={2}>\r\n                  <Typography>\r\n                    {`Unidad: `}\r\n                    <b>{producto_base.unidad}</b>\r\n                  </Typography>\r\n                </Box>\r\n                <Box textAlign=\"center\" mx={1}>\r\n                  <Typography>\r\n                    {`Existencias: `}\r\n                    <b>\r\n                      {producto_base.inventario_general\r\n                        ? producto_base.inventario_general[0].cantidad_existente\r\n                        : 0}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={1}>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"checkbox\"></TableCell>\r\n                <TableCell>Código</TableCell>\r\n                <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                <TableCell padding=\"checkbox\">Color/Talla</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productos.map((producto, index) => (\r\n                <MappingProductos\r\n                  key={index}\r\n                  producto={producto}\r\n                  agregarProductos={agregarProductos}\r\n                />\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst MappingProductos = ({ producto, agregarProductos }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  let TableCellMedidaColor = () => {\r\n    if (producto.color && producto.medida) {\r\n      return (\r\n        <TableCell\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            height: \"56px\",\r\n          }}\r\n        >\r\n          <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: producto.color.hex,\r\n                color: theme.palette.getContrastText(producto.color.hex),\r\n              }}\r\n            >\r\n              {producto.medida.talla}\r\n            </div>\r\n          </Tooltip>\r\n        </TableCell>\r\n      );\r\n    } else {\r\n      return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n    }\r\n  };\r\n\r\n  let TableCellDescuento = () => {\r\n    if (producto.descuento_activo === true && producto.descuento) {\r\n      return (\r\n        <TableCell>\r\n          <Typography color=\"primary\">\r\n            ${formatoMexico(producto.descuento.precio_neto)}\r\n          </Typography>\r\n        </TableCell>\r\n      );\r\n    } else {\r\n      return <TableCell align=\"center\">$0.00</TableCell>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton\r\n          size=\"small\"\r\n          onClick={() => agregarProductos(producto)}\r\n          color=\"primary\"\r\n        >\r\n          <Add />\r\n        </IconButton>\r\n      </TableCell>\r\n      <TableCell>{producto.codigo_barras}</TableCell>\r\n      <TableCell>{producto.cantidad}</TableCell>\r\n      <TableCellMedidaColor />\r\n      <TableCell>${formatoMexico(producto.precio)}</TableCell>\r\n      <TableCellDescuento />\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport VistaProductoNormal from \"./ProductoNormal\";\r\nimport VistaProductoMedidas from \"./ProductoMedidas\";\r\nimport { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport {\r\n  calculatePrices2,\r\n  findProductArray,\r\n  verifiPrising,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\n\r\nexport default function ProductosViewComponent({ dataQuery, handleClickOpen }) {\r\n  let productoBase = null;\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open_message, setOpenMessage] = useState(false);\r\n  const { data, loading, error } = dataQuery;\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"53vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <ErrorPage />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (data && data.obtenerUnProductoVentas.length === 0) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        NO HAY\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (data) productoBase = data.obtenerUnProductoVentas;\r\n\r\n  if (productoBase === null) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        BUSCA UN PRODUCTO\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const without_inventary = sesion.empresa.vender_sin_inventario;\r\n\r\n  const agregarProductos = async (producto) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      //cantidad\r\n      if (!without_inventary && producto.cantidad === 0) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    } else {\r\n      //inventario_general\r\n      if (\r\n        !without_inventary &&\r\n        producto.inventario_general[0].cantidad_existente === 0\r\n      ) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    }\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: {\r\n          granel: false,\r\n          valor: 0,\r\n        },\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      //   console.log(new_prices.newP);\r\n      //agregar producto al inicio del arreglo\r\n      productosVentasTemp.splice(0, 0, new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      //   console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: {\r\n            granel: false,\r\n            valor: 0,\r\n          },\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    handleClickOpen();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={open_message}\r\n        onClose={() => setOpenMessage(false)}\r\n        message=\"Producto sin existencias\"\r\n        autoHideDuration={3000}\r\n      />\r\n      {productoBase.length === 1 ? (\r\n        <VistaProductoNormal\r\n          productoBase={productoBase[0]}\r\n          agregarProductos={agregarProductos}\r\n        />\r\n      ) : (\r\n        <VistaProductoMedidas\r\n          productos={productoBase}\r\n          agregarProductos={agregarProductos}\r\n        />\r\n      )}\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../../styles\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../../../gql/Ventas/ventas_generales\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport ProductosViewComponent from \"./ContentProductos\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConsultarPrecio() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [value, setValue] = useState(\"\");\r\n  const [dataQuery, setDataQuery] = useState({\r\n    data: undefined,\r\n    loading: false,\r\n    error: undefined,\r\n  });\r\n  const client = useApolloClient();\r\n\r\n  const obtenerProducto = async () => {\r\n    try {\r\n      setDataQuery({ ...dataQuery, loading: true });\r\n      const response = await client.query({\r\n        query: CONSULTA_PRODUCTO_UNITARIO,\r\n        variables: {\r\n          datosProductos: value.toUpperCase(),\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      const { loading, data, error } = response;\r\n      setDataQuery({ data, loading, error });\r\n    } catch (error) {\r\n      console.log(error);\r\n      setDataQuery({ data: undefined, loading: false, error });\r\n    }\r\n  };\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    setDataQuery({\r\n      data: undefined,\r\n      loading: false,\r\n      error: undefined,\r\n    });\r\n  };\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n      obtenerProducto();\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 120) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  }, [turnoEnCurso]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/precios.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 36 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Consultar Precio</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F9</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n        PaperProps={{ style: { minWidth: \"650px\" } }}\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n                alt=\"icono productos\"\r\n                style={{ width: 50 }}\r\n              />\r\n              <Box mx={1} />\r\n              <Typography variant=\"h6\">Precio Producto</Typography>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n          <Box mt={3}>\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              placeholder=\"Buscar producto por CLAVE ALTERNA\"\r\n              onKeyUp={keyUpEvent}\r\n              onChange={(e) => setValue(e.target.value)}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton onClick={(e) => obtenerProducto(e)}>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ProductosViewComponent\r\n            dataQuery={dataQuery}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useContext, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Paper,\r\n  Slide,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Checkbox,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreciosProductos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  // const [selected, setSelected] = useState([]);\r\n\r\n  const [preciosProductos, setPreciosProductos] = useState({});\r\n\r\n  const {\r\n    productoCambioPrecio,\r\n    precioSelectProductoVenta,\r\n    setPrecioSelectProductoVenta,\r\n    setUpdateTablaVentas,\r\n    updateTablaVentas,\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadVerPrecios,\r\n    setReloadVerPrecios,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [selectPrisingProduct, setSelectPrisingProduct] = useState(\r\n    precioSelectProductoVenta.length > 0 ? precioSelectProductoVenta[0] : {}\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.precios_productos.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"precios_productos\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPreciosProductos(productoCambioPrecio);\r\n  }, [productoCambioPrecio]);\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPrecios === true) {\r\n      setOpen(!open);\r\n      setReloadVerPrecios(false);\r\n    }\r\n  }, [reloadVerPrecios]);\r\n\r\n  const handleAceptChangePrising = async () => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    if (\r\n      selectPrisingProduct.precio_neto > 0 ||\r\n      precioSelectProductoVenta.length > 0\r\n    ) {\r\n      const newProductoPrecioNuevo = { ...productoCambioPrecio };\r\n      const newProductoPrecioActual = { ...productoCambioPrecio };\r\n\r\n      const producto_encontrado = await findProductArray(productoCambioPrecio);\r\n\r\n      if (producto_encontrado.found) {\r\n        const new_resta = await calculatePrices2({\r\n          newP: newProductoPrecioNuevo,\r\n          cantidad: newProductoPrecioNuevo.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: newProductoPrecioNuevo.precio_actual_object,\r\n          granel: newProductoPrecioNuevo.granel_producto,\r\n          origen: \"\",\r\n        });\r\n\r\n        /* console.log(precioSelectProductoVenta[0]); */\r\n        const new_suma = await calculatePrices2({\r\n          newP: newProductoPrecioActual,\r\n          cantidad: newProductoPrecioActual.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: precioSelectProductoVenta[0],\r\n          granel: newProductoPrecioActual.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        newProductoPrecioActual.precio_a_vender =\r\n          precioSelectProductoVenta[0].precio_neto;\r\n        newProductoPrecioActual.precio_seleccionado = true;\r\n        newProductoPrecioActual.precio_actual_producto = parseFloat(\r\n          precioSelectProductoVenta[0].precio_neto.toFixed(2)\r\n        );\r\n        newProductoPrecioActual.precio_actual_object =\r\n          precioSelectProductoVenta[0];\r\n\r\n        newProductoPrecioActual.iva_total_producto = parseFloat(\r\n          new_suma.ivaCalculo\r\n        );\r\n        newProductoPrecioActual.ieps_total_producto = parseFloat(\r\n          new_suma.iepsCalculo\r\n        );\r\n        newProductoPrecioActual.impuestos_total_producto = parseFloat(\r\n          new_suma.impuestoCalculo\r\n        );\r\n        newProductoPrecioActual.subtotal_total_producto = parseFloat(\r\n          new_suma.subtotalCalculo\r\n        );\r\n        newProductoPrecioActual.total_total_producto = parseFloat(\r\n          new_suma.totalCalculo\r\n        );\r\n\r\n        newProductoPrecioActual.precio_actual_object = {\r\n          cantidad_unidad: precioSelectProductoVenta[0].cantidad_unidad\r\n            ? precioSelectProductoVenta[0].cantidad_unidad\r\n            : null,\r\n          numero_precio: precioSelectProductoVenta[0].numero_precio\r\n            ? precioSelectProductoVenta[0].numero_precio\r\n            : null,\r\n          unidad_maxima: precioSelectProductoVenta[0].unidad_maxima\r\n            ? precioSelectProductoVenta[0].unidad_maxima\r\n            : null,\r\n          precio_general: precioSelectProductoVenta[0].precio_general\r\n            ? precioSelectProductoVenta[0].precio_general\r\n            : null,\r\n          precio_neto: precioSelectProductoVenta[0].precio_neto\r\n            ? precioSelectProductoVenta[0].precio_neto\r\n            : null,\r\n          precio_venta: precioSelectProductoVenta[0].precio_venta\r\n            ? precioSelectProductoVenta[0].precio_venta\r\n            : null,\r\n          iva_precio: precioSelectProductoVenta[0].iva_precio\r\n            ? precioSelectProductoVenta[0].iva_precio\r\n            : null,\r\n          ieps_precio: precioSelectProductoVenta[0].ieps_precio\r\n            ? precioSelectProductoVenta[0].ieps_precio\r\n            : null,\r\n          utilidad: precioSelectProductoVenta[0].utilidad\r\n            ? precioSelectProductoVenta[0].utilidad\r\n            : null,\r\n          porciento: precioSelectProductoVenta[0].porciento\r\n            ? precioSelectProductoVenta[0].porciento\r\n            : null,\r\n          dinero_descontado: precioSelectProductoVenta[0].dinero_descontado\r\n            ? precioSelectProductoVenta[0].dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newProductoPrecioActual\r\n        );\r\n\r\n        /* console.log(\"venta >>\", venta_existente.subTotal);\r\n\r\n        console.log(\"resta >>\", new_resta.subtotalCalculo);\r\n\r\n        console.log(\"suma >>\", new_suma.subtotalCalculo); */\r\n\r\n        const CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n\r\n        //Guardarlo en el localStorage\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...CalculosData,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n        // newProductoPrecio = {...newProductoPrecio};\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        setPrecioSelectProductoVenta([]);\r\n        setPreciosProductos({});\r\n        //Cerrar modal\r\n        handleClickOpen();\r\n      } else {\r\n        console.log(\"Producto no encontrado\");\r\n      }\r\n    } else {\r\n      setAlert({\r\n        message: \"Este precio no es valido.\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = (precio) => {\r\n    let newSelected = [];\r\n    newSelected = newSelected.concat([], precio);\r\n    setSelectPrisingProduct(precio);\r\n    setPrecioSelectProductoVenta(newSelected);\r\n  };\r\n\r\n  const isSelected = (name) => precioSelectProductoVenta.indexOf(name) !== -1;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 114) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !precioSelectProductoVenta.length}\r\n      >\r\n        <Box>\r\n          <Box\r\n            style={\r\n              !turnoEnCurso || !precioSelectProductoVenta.length\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.5,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n              alt=\"icono money\"\r\n              style={{ fontSize: 25 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Precios</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F3</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Precios de Producto</Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={1}>\r\n            <Typography variant=\"h6\" align=\"center\">\r\n              {productoCambioPrecio\r\n                ? productoCambioPrecio?.id_producto?.datos_generales\r\n                    ?.nombre_comercial\r\n                : \"\"}\r\n            </Typography>\r\n          </Box>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"checkbox\"></TableCell>\r\n                    <TableCell>No. Precio</TableCell>\r\n                    <TableCell>Precio neto</TableCell>\r\n                    <TableCell>Unidad mayoreo</TableCell>\r\n                    <TableCell>Utilidad</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {preciosProductos?.id_producto?.precios?.precios_producto?.map(\r\n                    (precio, index) => {\r\n                      const isItemSelected = isSelected(precio);\r\n                      const labelId = `enhanced-table-checkbox-${index}`;\r\n                      return (\r\n                        <RenderTableRows\r\n                          key={index}\r\n                          precio={precio}\r\n                          isItemSelected={isItemSelected}\r\n                          labelId={labelId}\r\n                          handleClick={handleClick}\r\n                        />\r\n                      );\r\n                    }\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleAceptChangePrising()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ precio, isItemSelected, labelId, handleClick }) => {\r\n  const doubleClick = (e) => {\r\n    if (precio.precio_neto <= 0) return;\r\n    try {\r\n      if (e.detail === 2) {\r\n        handleClick(precio);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={precio.numero_precio}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => doubleClick(e)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            disabled={precio.precio_neto <= 0}\r\n            onClick={(event) => {\r\n              handleClick(precio);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.numero_precio}</TableCell>\r\n        <TableCell align={\"center\"}>\r\n          {precio.precio_neto > 0 ? formatoMexico(precio.precio_neto) : 0}\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.unidad_mayoreo}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.utilidad} %</TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { useEffect } from \"react\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst columns = [\r\n  /* { id: \"folio\", label: \"Folio\", minWidth: 20, align: \"center\" }, */\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 20, align: \"center\" },\r\n  { id: \"cliente\", label: \"Cliente\", minWidth: 330, align: \"center\" },\r\n  { id: \"productos\", label: \"Productos\", minWidth: 20, align: \"center\" },\r\n  { id: \"total\", label: \"Total\", minWidth: 200, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"45vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default function ListaVentas({ handleModalEspera }) {\r\n  const classes = useStyles();\r\n\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column, index) => (\r\n                <TableCell\r\n                  key={index}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Regresar\r\n              </TableCell>\r\n\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Eliminar\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {listaEnEspera?.map((row, index) => {\r\n              return (\r\n                <RowsVentas\r\n                  venta={row}\r\n                  index={index}\r\n                  key={index}\r\n                  handleModalEspera={handleModalEspera}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsVentas = ({ venta, index, handleModalEspera }) => {\r\n  const {\r\n    reloadEliminarVentaEspera,\r\n    setReloadEliminarVentaEspera,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  function borrarVenta() {\r\n    if (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n      let nueva_venta_espera = [...listaEnEspera];\r\n      nueva_venta_espera.splice(index, 1);\r\n      if (nueva_venta_espera.length === 0) {\r\n        localStorage.removeItem(\"ListaEnEspera\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"ListaEnEspera\",\r\n          JSON.stringify(nueva_venta_espera)\r\n        );\r\n      }\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const AgregarVentaDeNuevo = () => {\r\n    if (datosVenta === null) {\r\n      let nueva_venta_espera = [...listaEnEspera];\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(venta.datosVenta));\r\n      nueva_venta_espera.splice(index, 1);\r\n      if (nueva_venta_espera.length === 0) {\r\n        localStorage.removeItem(\"ListaEnEspera\");\r\n        updateDataStorage();\r\n        handleModalEspera();\r\n        return;\r\n      }\r\n      localStorage.setItem(\"ListaEnEspera\", JSON.stringify(nueva_venta_espera));\r\n      updateDataStorage();\r\n      handleModalEspera();\r\n    } else {\r\n      setOpen(!open);\r\n    }\r\n  };\r\n\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const verificarPermisos = () => {\r\n    if (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n      borrarVenta();\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"eliminar_ventas\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadEliminarVentaEspera === true) {\r\n      borrarVenta();\r\n      setReloadEliminarVentaEspera(false);\r\n    }\r\n  }, [reloadEliminarVentaEspera]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow hover tabIndex={-1}>\r\n        <TableCell align=\"center\">{venta.fecha ? venta.fecha : \"\"}</TableCell>\r\n        <TableCell align=\"center\">\r\n          {venta.datosVenta.cliente && venta.datosVenta.cliente.nombre_cliente\r\n            ? venta.datosVenta.cliente.nombre_cliente\r\n            : \"Pub. General\"}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {venta.datosVenta.productos.length}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          $ {formatoMexico(venta.datosVenta.total)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          <RegresarVenta\r\n            AgregarVentaDeNuevo={AgregarVentaDeNuevo}\r\n            open={open}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          <EliminarVentaEspera verificarPermisos={verificarPermisos} />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RegresarVenta = ({ open, handleClickOpen, AgregarVentaDeNuevo }) => {\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"regresar\"\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        onClick={() => AgregarVentaDeNuevo()}\r\n      >\r\n        <AutorenewIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message=\"No puedes agregar una venta cuando ya está una en curso.\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarVentaEspera = ({ verificarPermisos }) => {\r\n  const [openModal, setOpenModal] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpenModal(true);\r\n  const handleClose = () => setOpenModal(false);\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"delete\"\r\n        size=\"small\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        <DeleteIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Dialog onClose={() => handleClose()} open={openModal}>\r\n        <DialogTitle>Se eliminara esta venta en espera</DialogTitle>\r\n        <DialogActions>\r\n          <Button color=\"inherit\" size=\"small\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            size=\"small\"\r\n            onClick={() => verificarPermisos()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Typography,\r\n  Slide,\r\n  Badge,\r\n} from \"@material-ui/core\";\r\nimport ListaVentas from \"./ListaVentas\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function VentasEspera() {\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const { updateTablaVentas } = useContext(VentasContext);\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 76) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (listaEnEspera) {\r\n      listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  useEffect(() => {\r\n    turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  }, [updateTablaVentas, turnoEnCurso]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <Badge\r\n              badgeContent={listaEnEspera ? listaEnEspera.length : 0}\r\n              color=\"primary\"\r\n              style={{ fontSize: 45 }}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                alt=\"icono caja2\"\r\n                style={{ width: 38 }}\r\n              />\r\n            </Badge>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Ventas en Espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + L</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={3}>\r\n                <Typography variant=\"h6\">Ventas en espera</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <ListaVentas handleModalEspera={handleClickOpen} />\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Delete } from \"@material-ui/icons\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CANCELAR_VENTA_SUCURSAL } from \"../../../gql/Ventas/ventas_generales\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFolio({\r\n  venta,\r\n  handleCloseInfoVenta,\r\n  refetch,\r\n  dinero_disponible,\r\n  selected,\r\n  view,\r\n}) {\r\n  const {\r\n    reloadCancelarVenta,\r\n    setReloadCancelarVenta,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [values, setValues] = useState({\r\n    observaciones: \"\",\r\n    devolucion_efectivo: false,\r\n    devolucion_credito: false,\r\n  });\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [cancelarVentasSucursal] = useMutation(CANCELAR_VENTA_SUCURSAL);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.cancelar_venta.editar === true) {\r\n      setOpen(true);\r\n    } else {\r\n      if (!reloadCancelarVenta) return;\r\n      setOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChangeChecks = (e) => {\r\n    const { name, checked } = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const handleCancelSale = async () => {\r\n    setLoading(true);\r\n    try {\r\n      values.turno = {\r\n        horario_en_turno: turnoEnCurso.horario_en_turno,\r\n        numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n        id_caja: turnoEnCurso.id_caja,\r\n        usuario_en_turno: {\r\n          nombre: turnoEnCurso.usuario_en_turno.nombre,\r\n          numero_usuario: turnoEnCurso.usuario_en_turno.numero_usuario,\r\n          _id: sesion._id,\r\n        },\r\n        empresa: turnoEnCurso.empresa,\r\n        sucursal: turnoEnCurso.sucursal,\r\n      };\r\n      const result = await cancelarVentasSucursal({\r\n        variables: {\r\n          input: values,\r\n          empresa: venta.empresa,\r\n          sucursal: venta.sucursal,\r\n          folio: venta.folio,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.cancelarVentasSucursal.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      setValues({\r\n        devolucion_efectivo: false,\r\n        observaciones: \"\",\r\n        devolucion_credito: false,\r\n      });\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: \"Hubo un error\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const verificarPermisos = () => {\r\n    if (sesion.accesos.ventas.cancelar_venta.editar === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"cancelar_venta\",\r\n        tipo_acceso: \"editar\",\r\n      });\r\n    }\r\n  };\r\n\r\n  let seleccionado = \"\";\r\n  if (view === \"table\") {\r\n    seleccionado = selected;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadCancelarVenta === true && seleccionado._id === venta._id) {\r\n      handleClickOpen();\r\n      setReloadCancelarVenta(false);\r\n    }\r\n  }, [reloadCancelarVenta]);\r\n\r\n  return (\r\n    <div>\r\n      {handleCloseInfoVenta ? (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={() => verificarPermisos()}\r\n          startIcon={<Delete />}\r\n          disabled={venta.status === \"CANCELADO\"}\r\n        >\r\n          Cancelar venta\r\n        </Button>\r\n      ) : (\r\n        <IconButton\r\n          size=\"small\"\r\n          color=\"secondary\"\r\n          onClick={() => verificarPermisos()}\r\n          disabled={venta.status === \"CANCELADO\"}\r\n        >\r\n          <Delete />\r\n        </IconButton>\r\n      )}\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            alignItems=\"center\"\r\n            justifyContent=\"space-between\"\r\n          >\r\n            <Typography variant=\"h6\">Cancelar venta</Typography>\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {venta.factura.length ? (\r\n            <Alert severity=\"info\">Una venta facturada no se puede hacer devolucion de dinero</Alert>\r\n          ) : null}\r\n          <Box>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={values.devolucion_credito}\r\n                  onChange={handleChangeChecks}\r\n                  name=\"devolucion_credito\"\r\n                  disabled={!venta.credito || venta.factura.length}\r\n                />\r\n              }\r\n              label=\"Realizar devolucion de crédito\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={values.devolucion_efectivo}\r\n                  onChange={handleChangeChecks}\r\n                  name=\"devolucion_efectivo\"\r\n                  disabled={\r\n                    venta.montos_en_caja.monto_efectivo.monto >\r\n                    dinero_disponible || venta.factura.length\r\n                  }\r\n                />\r\n              }\r\n              label=\"Realizar devolucion de dinero\"\r\n            />\r\n            <Box my={2}>\r\n              <Container maxWidth=\"xs\">\r\n                <Box mb={1}>\r\n                  <Typography>Devolución en:</Typography>\r\n                </Box>\r\n                <Grid container spacing={2}>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>Efectivo</Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_efectivo.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      T. Crédito\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_tarjeta_credito.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      M. Electrónico\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_monedero.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      Transferencia\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_transferencia.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>Cheques</Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_cheques.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Container>\r\n            </Box>\r\n            <TextField\r\n              label=\"Observaciones\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              multiline\r\n              rows={3}\r\n              value={values.observaciones}\r\n              onChange={(e) =>\r\n                setValues({ ...values, observaciones: e.target.value })\r\n              }\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Salir\r\n          </Button>\r\n          <Button\r\n            onClick={handleCancelSale}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Cancelar Venta\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport CancelarFolio from \"./CancelarFolio\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function InfoVentaFolio({ venta, open, handleClose, refetch }) {\r\n  if (!venta) return null;\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      fullWidth\r\n      maxWidth=\"xl\"\r\n    >\r\n      <DialogTitle>\r\n        <Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box>\r\n            <Typography>\r\n              <b>Caja: </b>\r\n              {` ${venta.id_caja.numero_caja}`}\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>Usuario en caja:</b> {` ${venta.usuario.nombre}`}\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography align=\"right\">\r\n              <b>Folio:</b>\r\n              {` ${venta.folio}`}\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>Fecha:</b>\r\n              {` ${formatoFechaCorta(venta.fecha_registro)}`}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {venta.cliente !== null ? (\r\n          <Box my={2}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography variant=\"h6\">Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{venta.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{venta.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${venta.descuento ? formatoMexico(venta.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.monedero ? formatoMexico(venta.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.iva ? formatoMexico(venta.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.ieps ? formatoMexico(venta.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(venta.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(venta.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(venta.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Código de barras</TableCell>\r\n                      <TableCell>Producto</TableCell>\r\n                      <TableCell>Medida</TableCell>\r\n                      <TableCell>Unidad</TableCell>\r\n                      <TableCell>Cantidad</TableCell>\r\n                      <TableCell>Precio</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {venta.productos.map((row, index) => (\r\n                      <TableRow key={index}>\r\n                        <TableCell>\r\n                          {row.id_unidad_venta.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {row.id_producto.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <ComponenteMedidaColor producto={row} />\r\n                        <TableCell>{row.unidad}</TableCell>\r\n                        <TableCell>{row.cantidad_venta}</TableCell>\r\n                        <TableCell>\r\n                          ${formatoMexico(row.precio_a_vender)}\r\n                        </TableCell>\r\n                        <ComponenteDescuento producto={row} />\r\n                        <TableCell>\r\n                          $\r\n                          {row.iva_total\r\n                            ? formatoMexico(row.iva_total)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          $\r\n                          {row.ieps_total\r\n                            ? formatoMexico(row.ieps_total)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>${formatoMexico(row.subtotal)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.impuestos)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.total)}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions\r\n        style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n      >\r\n        <CancelarFolio\r\n          venta={venta}\r\n          handleCloseInfoVenta={handleClose}\r\n          refetch={refetch}\r\n          selected={venta}\r\n        />\r\n        <Button\r\n          onClick={handleClose}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          startIcon={<Done />}\r\n        >\r\n          Aceptar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst ComponenteMedidaColor = ({ producto }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  if (producto.color.color && producto.medida.medida) {\r\n    return (\r\n      <TableCell align=\"center\">\r\n        <Tooltip title={producto.color.color} placement=\"top\" arrow>\r\n          <div\r\n            className={classes.colorContainer}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n          >\r\n            {producto.medida.medida}\r\n          </div>\r\n        </Tooltip>\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n  }\r\n};\r\n\r\nconst ComponenteDescuento = ({ producto }) => {\r\n  if (producto.id_unidad_venta.descuento_activo === true) {\r\n    const { dinero_descontado, porciento } = producto.id_unidad_venta.descuento;\r\n    return (\r\n      <TableCell>\r\n        {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell>{\"$0.00\"}</TableCell>;\r\n  }\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { makeStyles, Snackbar, Typography } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport InfoVentaFolio from \"./InfoVenta\";\r\nimport CancelarFolio from \"./CancelarFolio\";\r\nimport { OBTENER_PRE_CORTE_CAJA } from \"../../../gql/Cajas/cajas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasRealizadas({ handleClose }) {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [params, setParams] = useState(\"TODAS\");\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  const admin = sesion.accesos.ventas.cancelar_venta.editar;\r\n  const fecha_entrada = turnoEnCurso.fecha_movimiento;\r\n\r\n  const input_precorte = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const isDate = moment(value).isValid();\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        isDate, \r\n        busqueda: value,\r\n        filtro: params,\r\n        vista: \"VENTAS\",\r\n        turno: {\r\n          id_caja: turnoEnCurso.id_caja,\r\n          fecha_entrada,\r\n        },\r\n        admin,\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n  const res_precorte = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input_precorte,\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={3} xs={12}>\r\n            <FormControl variant=\"outlined\" size=\"small\" fullWidth>\r\n              <Select\r\n                value={params}\r\n                onChange={(e) => setParams(e.target.value)}\r\n              >\r\n                <MenuItem value=\"TODAS\">\r\n                  <em>Todas</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"HOY\">Ventas de hoy</MenuItem>\r\n                <MenuItem value=\"REALIZADAS\">Ventas realizadas</MenuItem>\r\n                <MenuItem value=\"CANCELADAS\">Ventas canceladas</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item sm={3} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para ver la información completa una venta haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <Box my={1} display=\"flex\">\r\n        {admin ? (\r\n          <Fragment>\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#58ff8f\"\r\n              bgcolor=\"#EDFFF3\"\r\n              height=\"24px\"\r\n              width=\"24px\"\r\n            />\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>- Ventas de hoy</b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n          </Fragment>\r\n        ) : null}\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#FF8A8A\"\r\n          bgcolor=\"#FFF4F4\"\r\n          height=\"24px\"\r\n          width=\"24px\"\r\n        />\r\n        <Box mx={1} />\r\n        <Typography>\r\n          <b>- Ventas canceladas</b>\r\n        </Typography>\r\n      </Box>\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        res_precorte={res_precorte}\r\n        handleClose={handleClose}\r\n        admin={admin}\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  res_precorte,\r\n  handleClose,\r\n  admin,\r\n}) => {\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setVentaRetomada,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const { loading, data, error, refetch } = resultado_ventas;\r\n  const [view, setView] = useState(false);\r\n\r\n  const handleClickView = () => {\r\n    setView(true);\r\n  };\r\n\r\n  const handleCloseView = () => {\r\n    setView(false);\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  //obtener dinero en caja\r\n  const { obtenerVentasSucursal } = data;\r\n  const data_precorte = res_precorte.data;\r\n  const pre_corte = data_precorte.obtenerPreCorteCaja\r\n    ? data_precorte.obtenerPreCorteCaja.monto_efectivo_precorte\r\n    : 0;\r\n\r\n  const obtenerVenta = (click, data) => {\r\n    setSelected(data);\r\n    let temp = true;\r\n    if (click === 2 && !temp) {\r\n      let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      if (datosVenta === null) {\r\n        //armar array de productos\r\n        let productos = [];\r\n\r\n        data.productos.forEach((res) => {\r\n          productos.push({\r\n            cantidad: res.cantidad,\r\n            cantidad_venta: res.cantidad_venta,\r\n            codigo_barras: res.id_producto.datos_generales.codigo_barras,\r\n            codigo_unidad: res.codigo_unidad,\r\n            color: res.color,\r\n            concepto: res.concepto,\r\n            default: res.default,\r\n            descuento: res.id_unidad_venta.descuento,\r\n            descuento_activo: res.id_unidad_venta.descuento_activo,\r\n            granel_producto: res.granel_producto,\r\n            id_producto: res.id_producto,\r\n            ieps_total_producto: res.ieps_total,\r\n            impuestos_total_producto: res.impuestos,\r\n            inventario_general: res.inventario_general,\r\n            iva_total_producto: res.iva_total,\r\n            medida: res.medida,\r\n            precio: res.precio,\r\n            precio_a_vender: res.precio_a_vender,\r\n            precio_actual_object: res.precio_actual_object,\r\n            precio_actual_producto: res.precio_actual_producto,\r\n            precio_anterior: res.precio_actual_producto,\r\n            precio_unidad: res.precio_unidad,\r\n            subtotal_total_producto: res.subtotal,\r\n            total_total_producto: res.total,\r\n            unidad: res.unidad,\r\n            unidad_principal: res.id_unidad_venta.unidad_principal,\r\n            _id: res.id_unidad_venta._id,\r\n          });\r\n        });\r\n\r\n        //armar objeto para Storage\r\n\r\n        let datosVenta = {\r\n          cliente: data.cliente,\r\n          descuento: data.descuento,\r\n          ieps: data.ieps,\r\n          impuestos: data.impuestos,\r\n          iva: data.iva,\r\n          monedero: data.monedero,\r\n          productos,\r\n          subTotal: data.subTotal,\r\n          total: data.total,\r\n          venta_cliente: data.venta_cliente,\r\n          tipo_emision: data.tipo_emision,\r\n        };\r\n\r\n        //se agregan la venta a localStorage\r\n        localStorage.setItem(\"DatosVentas\", JSON.stringify(datosVenta));\r\n        setVentaRetomada(datosVenta);\r\n        updateDataStorage();\r\n        handleClose();\r\n      } else {\r\n        handleClickOpen();\r\n      }\r\n    } else if (click === 2 && temp) {\r\n      handleClickView();\r\n    }\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message=\"No puedes agregar una venta cuando ya está una en curso.\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Fecha</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Cancelar Venta</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.map((data, index) => {\r\n              return (\r\n                <RowComprasRealizadas\r\n                  key={index}\r\n                  data={data}\r\n                  selected={selected}\r\n                  obtenerVenta={obtenerVenta}\r\n                  refetch={refetch}\r\n                  admin={admin}\r\n                  pre_corte={pre_corte}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n        <InfoVentaFolio\r\n          venta={selected}\r\n          open={view}\r\n          handleClose={handleCloseView}\r\n          refetch={refetch}\r\n        />\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst tableStyles = makeStyles((theme) => ({\r\n  today_color: {\r\n    backgroundColor: \"#EDFFF3\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#D8FFE5\",\r\n    },\r\n  },\r\n  normal_color: {\r\n    backgroundColor: \"#FFF\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#F5F5F5\",\r\n    },\r\n  },\r\n  root: {\r\n    \"&$root\": {\r\n      backgroundColor: \"#FFF4F4\",\r\n      color: \"#FF8A8A\",\r\n    },\r\n    \"&$root:hover\": {\r\n      backgroundColor: \"#FFE0E0\",\r\n    },\r\n  },\r\n  selected: {\r\n    \"&$selected, &$selected:hover\": {\r\n      backgroundColor: \"#E8F4FD\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst RowComprasRealizadas = ({\r\n  data,\r\n  selected,\r\n  obtenerVenta,\r\n  refetch,\r\n  admin,\r\n  pre_corte,\r\n}) => {\r\n  const classes = tableStyles();\r\n  let today =\r\n    moment(data.fecha_registro).format(\"YYYY-MM-DD\") ===\r\n    moment().locale(\"es-mx\").format(\"YYYY-MM-DD\");\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={data.folio === selected.folio}\r\n      onClick={(e) => obtenerVenta(e.detail, data)}\r\n      classes={{\r\n        selected: classes.selected,\r\n        root: data.status === \"CANCELADO\" ? classes.root : null,\r\n      }}\r\n      className={today && admin ? classes.today_color : classes.normal_color}\r\n    >\r\n      <TableCell className=\"delete-color\">{data.folio}</TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        <div className=\"noWrap2\">\r\n          {data.cliente !== null\r\n            ? data.cliente.nombre_cliente\r\n            : \"Publico General\"}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\"><div className=\"noWrap2\">{data.usuario.nombre}</div></TableCell>\r\n      <TableCell className=\"delete-color\">{data.id_caja.numero_caja}</TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.subTotal)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.impuestos)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.total)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\" align=\"center\">\r\n        <CancelarFolio\r\n          venta={data}\r\n          refetch={refetch}\r\n          dinero_disponible={pre_corte}\r\n          selected={selected}\r\n          view=\"table\"\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ListaVentasRealizadas from \"./ListaVentasRealizadas\";\r\nimport { FcSearch } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasRealizadas() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 86) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Buscar Folio</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + V</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n              <Box display=\"flex\" alignItems=\"center\"> \r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n                <Box mx={2} />\r\n                <Typography variant=\"h6\">Ventas Realizadas</Typography>\r\n              </Box>\r\n              <Button size=\"small\" color=\"secondary\" variant=\"contained\" onClick={() => handleClickOpen()}>\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n            <ListaVentasRealizadas handleClose={handleClickOpen} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Abonos from \"../../pages/ventas/Abonos/Abonos\";\r\nimport BuscarProducto from \"../../pages/ventas/BuscarProductos/BuscarProducto\";\r\nimport ClientesVentas from \"../../pages/ventas/ClientesVentas/ClientesVentas\";\r\nimport Cotizacion from \"../../pages/ventas/Cotizacion/Cotizacion\";\r\n/* import AbrirCajon from \"../../pages/ventas/Operaciones/AbrirCajon\"; */\r\nimport CancelarVenta from \"../../pages/ventas/Operaciones/CancelarVenta\";\r\nimport CerrarVenta from \"../../pages/ventas/CerrarVenta/CerrarVenta\";\r\nimport ConsultarPrecio from \"../../pages/ventas/Operaciones/ConsultarPrecio/ConsultarPrecio\";\r\nimport PreciosProductos from \"../../pages/ventas/Operaciones/PreciosProducto\";\r\nimport VentasEspera from \"../../pages/ventas/VentasEspera/VentasEspera\";\r\nimport VentasRealizadas from \"../../pages/ventas/VentasRealizadas/VentasRealizadas\";\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function NavegacionVentasLateral() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.drawerColor}>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <CerrarVenta />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <CancelarVenta />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <BuscarProducto />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Cotizacion type=\"GENERAR\" />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <PreciosProductos />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasEspera />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <ClientesVentas />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasRealizadas />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <ConsultarPrecio />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Abonos />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ producto, setDatosVentasActual }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    // console.log(producto);\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = productosVentas;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n    if (producto_encontrado.found) {\r\n      const { cantidad_venta, ...newP } = producto;\r\n\r\n      // newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n      //Sacar los impuestos que se van a restar\r\n      // let calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\r\n      const new_resta = await calculatePrices2({\r\n        newP: newP,\r\n        cantidad: cantidad_venta,\r\n        precio_boolean: true,\r\n        precio: newP.precio_actual_object,\r\n        granel: newP.granel_producto,\r\n        origen: \"\",\r\n      });\r\n\r\n      productosVentasTemp.splice(producto_encontrado.producto_found.index, 1);\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) - parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) - parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) -\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n\r\n      if (productosVentasTemp.length === 0 && !venta.cliente.nombre_cliente) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        localStorage.removeItem(\"VentaOriginal\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...CalculosData,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n      }\r\n\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton size=\"small\" onClick={() => handleToggleModal()}>\r\n        <Delete size=\"small\" color=\"error\" />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => eliminarProductoBD()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  Fragment,\r\n  useRef,\r\n  useContext,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport EliminarProductoVenta from \"./EliminarProductoVenta\";\r\n\r\nimport { useDebounce } from \"use-debounce\";\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../config/reuserFunctions\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"100%\",\r\n    maxHeight: \"59vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n    [theme.breakpoints.up(\"xl\")]: {\r\n      maxHeight: \"64vh\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable({ setDatosVentasActual }) {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState([]);\r\n  /* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n\r\n  const {\r\n    setProductoCambioPrecio,\r\n    setPrecioSelectProductoVenta,\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n  } = useContext(VentasContext);\r\n\r\n  const [datosTabla, setDatosTabla] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    setDatosTabla(venta === null ? [] : venta.productos);\r\n  }, [updateTablaVentas]);\r\n\r\n  const handleClick = (name) => {\r\n    if (name.unidad === \"Caja\" || name.unidad === \"Costal\") return;\r\n    let newSelected = [];\r\n    const exist = selected.indexOf(name) !== -1;\r\n    if (exist) {\r\n      newSelected = [];\r\n      setPrecioSelectProductoVenta([]);\r\n      setProductoCambioPrecio({});\r\n      setSelected(newSelected);\r\n      return;\r\n    }\r\n    newSelected = newSelected.concat([], name);\r\n    const producto = name.id_producto.precios.precios_producto.filter(\r\n      (p) => p.precio_neto === name.precio_actual_producto\r\n    );\r\n    if (producto.length > 0) setPrecioSelectProductoVenta(producto);\r\n    setProductoCambioPrecio(name);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e, producto) => {\r\n    try {\r\n      /* let timer;\r\n      clearTimeout(timer); */\r\n      if (e.detail === 2) {\r\n        handleClick(producto);\r\n        /* setProductoCambioPrecio(producto); */\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const isSelected = (name) => {\r\n    return selected.indexOf(name) !== -1;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"checkbox\"></TableCell>\r\n                <TableCell style={{ textAlign: \"center\", width: 120 }}>\r\n                  Valor Granel\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n                  Cantidad\r\n                </TableCell>\r\n                <TableCell>Descripcion</TableCell>\r\n                <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n                  Existencia\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n                  <b>Descuento</b>\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n                  Receta\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n                  Unidad\r\n                </TableCell>\r\n                <TableCell style={{ width: 140, textAlign: \"center\" }}>\r\n                  Precio Unitario\r\n                </TableCell>\r\n                <TableCell style={{ width: 140, textAlign: \"center\" }}>\r\n                  Precio a vender\r\n                </TableCell>\r\n                <TableCell padding=\"checkbox\" />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosTabla.map((producto, index) => {\r\n                const isItemSelected = isSelected(producto);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RenderTableRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    setUpdateTablaVentas={setUpdateTablaVentas}\r\n                    updateTablaVentas={updateTablaVentas}\r\n                    setDatosVentasActual={setDatosVentasActual}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    TwoClickInRowTableBuy={TwoClickInRowTableBuy}\r\n                    setSelected={setSelected}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({\r\n  producto,\r\n  setUpdateTablaVentas,\r\n  updateTablaVentas,\r\n  setDatosVentasActual,\r\n  TwoClickInRowTableBuy,\r\n  handleClick,\r\n  isItemSelected,\r\n  labelId,\r\n  setSelected,\r\n  selected,\r\n}) => {\r\n  // const [actuallyProduct, setActuallyProduct] = useState(producto);\r\n  const [newCantidadProduct, setNewCantidadProduct] = useState(\r\n    producto.cantidad_venta\r\n  );\r\n\r\n  const [tempAmount, setTempAmount] = useState(producto.cantidad_venta);\r\n\r\n  const textfield = useRef(null);\r\n  const [value] = useDebounce(newCantidadProduct, 500);\r\n\r\n  useEffect(() => {\r\n    setTempAmount(producto.cantidad_venta);\r\n  }, [producto.cantidad_venta]);\r\n\r\n  useEffect(() => {\r\n    CalculeDataPricing(value);\r\n  }, [value]);\r\n\r\n  const calculateNewPricingAmount = (cantidad) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      if (cantidad > producto.cantidad) return;\r\n    } else {\r\n      if (cantidad > producto.inventario_general[0].cantidad_existente) return;\r\n    }\r\n    try {\r\n      setTempAmount(cantidad);\r\n      setNewCantidadProduct(cantidad);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const CalculeDataPricing = async (new_cant) => {\r\n    if (new_cant === \"\" || new_cant === 0) {\r\n      setTempAmount(producto.cantidad_venta);\r\n    } else {\r\n      let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let productosVentas = venta === null ? [] : venta.productos;\r\n      const venta_actual = venta === null ? [] : venta;\r\n      let productosVentasTemp = productosVentas;\r\n      let venta_existente =\r\n        venta === null\r\n          ? {\r\n              subTotal: 0,\r\n              total: 0,\r\n              impuestos: 0,\r\n              iva: 0,\r\n              ieps: 0,\r\n              descuento: 0,\r\n              monedero: 0,\r\n            }\r\n          : venta;\r\n\r\n      let CalculosData = {};\r\n\r\n      //Buscar y obtener ese producto en el array de ventas\r\n      const producto_encontrado = await findProductArray(producto);\r\n\r\n      if (producto_encontrado.found) {\r\n        const {\r\n          cantidad_venta,\r\n          ...newP\r\n        } = producto_encontrado.producto_found.producto;\r\n        newP.cantidad_venta = parseInt(new_cant);\r\n        const verify_prising = await verifiPrising(newP);\r\n        const newPrising = verify_prising.found\r\n          ? verify_prising.object_prising\r\n          : newP.precio_actual_object;\r\n\r\n        const new_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad: cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n          granel: newP.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n        const new_suma = await calculatePrices2({\r\n          newP,\r\n          cantidad: parseInt(new_cant),\r\n          precio_boolean: true,\r\n          precio: newPrising,\r\n          granel: newP.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        newP.iva_total_producto = parseFloat(new_suma.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(new_suma.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(new_suma.impuestoCalculo);\r\n        newP.subtotal_total_producto = parseFloat(new_suma.subtotalCalculo);\r\n        newP.total_total_producto = parseFloat(new_suma.totalCalculo);\r\n\r\n        if (verify_prising.found) {\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n          newP.precio_anterior = newP.precio_actual_porducto;\r\n          newP.precio_actual_producto = verify_prising.pricing;\r\n          newP.precio_actual_object = verify_prising.object_prising;\r\n\r\n          newP.precio_actual_object = {\r\n            cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n              ? verify_prising.object_prising.cantidad_unidad\r\n              : null,\r\n            numero_precio: verify_prising.object_prising.numero_precio\r\n              ? verify_prising.object_prising.numero_precio\r\n              : null,\r\n            unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n              ? verify_prising.object_prising.unidad_maxima\r\n              : null,\r\n            precio_general: verify_prising.object_prising.precio_general\r\n              ? verify_prising.object_prising.precio_general\r\n              : null,\r\n            precio_neto: verify_prising.object_prising.precio_neto\r\n              ? verify_prising.object_prising.precio_neto\r\n              : null,\r\n            precio_venta: verify_prising.object_prising.precio_venta\r\n              ? verify_prising.object_prising.precio_venta\r\n              : null,\r\n            iva_precio: verify_prising.object_prising.iva_precio\r\n              ? verify_prising.object_prising.iva_precio\r\n              : null,\r\n            ieps_precio: verify_prising.object_prising.ieps_precio\r\n              ? verify_prising.object_prising.ieps_precio\r\n              : null,\r\n            utilidad: verify_prising.object_prising.utilidad\r\n              ? verify_prising.object_prising.utilidad\r\n              : null,\r\n            porciento: verify_prising.object_prising.porciento\r\n              ? verify_prising.object_prising.porciento\r\n              : null,\r\n            dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n              ? verify_prising.object_prising.dinero_descontado\r\n              : null,\r\n          };\r\n        } else {\r\n          newP.cantidad_venta = parseInt(new_cant);\r\n          newP.precio_anterior = newP.precio_actual_producto;\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n        }\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n      } else {\r\n        console.log(\"El producto no existe\");\r\n      }\r\n\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n          tipo_emision: venta_actual.tipo_emision\r\n            ? venta_actual.tipo_emision\r\n            : \"TICKET\",\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      //Recargar la tabla de los productos\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        style={{ height: \"15px\" }}\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => TwoClickInRowTableBuy(e, producto)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              if (selected.length > 0) setSelected([]);\r\n              handleClick(producto);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }} padding=\"checkbox\">\r\n          {producto.granel_producto.granel\r\n            ? `${producto.granel_producto.valor} ${producto.unidad}`\r\n            : \"N/A\"}\r\n        </TableCell>\r\n        <TableCell>\r\n          <Input\r\n            inputRef={textfield}\r\n            onClick={(e) => e.stopPropagation()}\r\n            onChange={(e) => calculateNewPricingAmount(e.target.value)}\r\n            value={tempAmount}\r\n            type=\"number\"\r\n            name=\"cantidad_venta\"\r\n            inputProps={{\r\n              min: 1,\r\n              max:\r\n                producto.concepto === \"medidas\"\r\n                  ? producto.cantidad\r\n                  : producto.inventario_general.map(\r\n                      (existencia) => `${existencia.cantidad_existente}`\r\n                    ),\r\n            }}\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          {producto.id_producto.datos_generales.nombre_comercial}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>\r\n          {producto.id_producto.datos_generales.tipo_producto === \"OTROS\"\r\n            ? producto.unidad === \"Costal\" || producto.unidad === \"Caja\"\r\n              ? producto.inventario_general[0].cantidad_existente_maxima\r\n              : producto.inventario_general[0].cantidad_existente\r\n            : producto.cantidad}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>\r\n          %{\" \"}\r\n          {producto.precio_actual_object.porciento !== null\r\n            ? producto.precio_actual_object.porciento\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>\r\n          {producto.id_producto.datos_generales.receta_farmacia === true\r\n            ? \"Si\"\r\n            : \"No\"}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>{producto.unidad}</TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>\r\n          ${\" \"}\r\n          {producto.precio_actual_object.precio_neto\r\n            ? formatoMexico(producto.precio_actual_object.precio_neto)\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\" }}>\r\n          ${\" \"}\r\n          {producto.precio_a_vender\r\n            ? formatoMexico(producto.precio_a_vender)\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell>\r\n          <EliminarProductoVenta\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n          />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nexport default function AgregarTipoVenta() {\r\n  /* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n  const classes = useStyles();\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [tipo_emision, setTipoEmision] = useState(\"TICKET\");\r\n\r\n  const obtenerTipoEmision = (e) => {\r\n    const { value } = e.target;\r\n    if (!venta || venta === null) return;\r\n    setTipoEmision(value);\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({ ...venta, tipo_emision: value })\r\n    );\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  };\r\n\r\n  return (\r\n    <Box width=\"100%\" display=\"flex\">\r\n      <Box mr={1}>\r\n        <img\r\n          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/publicalo.svg\"\r\n          alt=\"iconoBander\"\r\n          className={classes.iconSize}\r\n        />\r\n      </Box>\r\n      <Box width=\"100%\">\r\n        <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n          <Select\r\n            id=\"tipo_documento\"\r\n            value={tipo_emision}\r\n            name=\"tipo_documento\"\r\n            onChange={obtenerTipoEmision}\r\n            disabled={!venta || venta === null}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"TICKET\">TICKET</MenuItem>\r\n            <MenuItem value=\"FACTURA\">FACTURA</MenuItem>\r\n            <MenuItem value=\"NOTA REMISION\">NOTA REMISION</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { TextField } from \"@material-ui/core\";\r\n// import { BlurLinear } from \"@material-ui/icons\";\r\n// import { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../context/Catalogos/crearClienteCtx\"; \r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function ClientesVentas() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { setUpdateClientVenta, updateClientVenta, setClientes } = useContext(ClienteCtx);\r\n  const { setClientesVentas } = useContext(VentasContext);\r\n\r\n  const [selectClient, setSelectClient] = useState({});\r\n\r\n  // console.log(sesion.empresa._id);\r\n  // console.log(sesion.sucursal._id);\r\n\r\n  const { loading, data, refetch } = useQuery(OBTENER_CLIENTES_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  // console.log(error);\r\n  // console.log(\"data\",data);\r\n  let obtenerClientes = [];\r\n  if (data) obtenerClientes = data.obtenerClientesVentas;\r\n  // console.log(obtenerClientes);\r\n\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setClientes(data.obtenerClientesVentas);\r\n    } catch (error) {\r\n      \r\n    }\r\n  }, [data])\r\n  \r\n  useEffect(() => {\r\n    if (datosVentas && datosVentas.cliente) {\r\n      if (datosVentas.cliente.nombre_cliente) {\r\n        setSelectClient(datosVentas.cliente);\r\n        setClientesVentas(datosVentas.cliente);\r\n      } else {\r\n        setSelectClient(null);\r\n        setClientesVentas([]);\r\n      }\r\n    } else {\r\n      setSelectClient(null);\r\n      setClientesVentas([]);\r\n    }\r\n    refetch();\r\n  }, [refetch, updateClientVenta]);\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      setSelectClient(value);\r\n\r\n      if (!value && venta.productos.length === 0) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        setUpdateClientVenta(!updateClientVenta);\r\n        return;\r\n      }\r\n\r\n      // console.log(venta_actual);\r\n      let dataCliente = {\r\n        subTotal:\r\n          venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n        total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n        impuestos:\r\n          venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n        iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n        ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n        descuento:\r\n          venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n        monedero:\r\n          venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n        // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n        venta_cliente: value === null ? false : true,\r\n        productos:\r\n          venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      };\r\n      dataCliente = { ...dataCliente, cliente: value ? value : {} };\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(dataCliente));\r\n      setUpdateClientVenta(!updateClientVenta);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading) return null;\r\n\r\n  return (\r\n    <div>\r\n      <Autocomplete\r\n        id=\"combo-box-producto-codigo\"\r\n        size=\"small\"\r\n        fullWidth\r\n        options={obtenerClientes}\r\n        getOptionLabel={(option) =>\r\n          option.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n        }\r\n        renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n        onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n        getOptionSelected={(option, value) =>\r\n          option.nombre_cliente === value.nombre_cliente\r\n        }\r\n        value={selectClient ? selectClient : null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport useStyles from \"../styles\";\r\nimport ClientesVentas from \"../ClientesVentas\";\r\n\r\nexport default function AgregarClienteVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box\r\n      width=\"100%\"\r\n      display=\"flex\"\r\n      justifyItems=\"center\"\r\n      alignSelf=\"center\"\r\n      justifySelf=\"center\"\r\n      alignItems=\"center\"\r\n    >\r\n      <Box mt={1} mr={1}>\r\n        <img\r\n          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n          alt=\"iconoBander\"\r\n          className={classes.iconSize}\r\n        />\r\n      </Box>\r\n      <Box width=\"100%\" alignItems=\"center\">\r\n        <ClientesVentas sesion={sesion} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductoConMedidas({\r\n  agregarProductos,\r\n  open,\r\n  setOpen,\r\n  productos,\r\n}) {\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <VistaMedidasVenta\r\n            productos={productos}\r\n            agregarProductos={agregarProductos}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst VistaMedidasVenta = ({ productos, agregarProductos }) => {\r\n  if (!productos) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"53vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (productos && productos.length === 0) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        NO HAY UNIDADES\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Box mb={5}>\r\n        <Box width=\"100%\" my={3}>\r\n          <Typography variant=\"h6\" align=\"center\">\r\n            <b>{productos[0]?.id_producto.datos_generales.nombre_comercial}</b>\r\n          </Typography>\r\n        </Box>\r\n        <Grid container spacing={4} justifyContent=\"center\">\r\n          {productos.map((producto, index) => (\r\n            <MappingProductos\r\n              key={index}\r\n              producto={producto}\r\n              agregarProductos={agregarProductos}\r\n            />\r\n          ))}\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  medida: {\r\n    height: 64,\r\n    width: 74,\r\n    fontSize: 28,\r\n  },\r\n  badge: {\r\n    \"& .MuiBadge-badge\": {\r\n      height: 30,\r\n      width: 30,\r\n      borderRadius: \"100%\",\r\n      fontSize: 18,\r\n    },\r\n  },\r\n});\r\n\r\nconst MappingProductos = ({ producto, agregarProductos }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Grid item className={classes.badge}>\r\n      <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n        <Badge badgeContent={producto.cantidad} color=\"primary\" showZero={true}>\r\n          <Button\r\n            disableElevation\r\n            variant=\"contained\"\r\n            className={classes.medida}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n            onClick={() => agregarProductos(producto)}\r\n          >\r\n            {producto.medida.talla}\r\n          </Button>\r\n        </Badge>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useContext, Fragment } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport useStyles from \"../styles\";\r\nimport { Add, Search } from \"@material-ui/icons\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\n\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n} from \"../../../config/reuserFunctions\";\r\nimport ProductoConMedidas from \"./ProductoConMedidas\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\n\r\nexport default function AgregarProductoVenta({ loading, setLoading }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    openBuscarProducto,\r\n    setOpenBuscarProducto,\r\n  } = useContext(VentasContext);\r\n\r\n  const [open_message, setOpenMessage] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [clave, setClave] = useState(\"\");\r\n  const client = useApolloClient();\r\n  const [openMedidas, setOpenMedidas] = useState(false);\r\n  const [producto, setProducto] = useState([]);\r\n\r\n  const obtenerProductos = async (input) => {\r\n    const response = await client.query({\r\n      query: CONSULTA_PRODUCTO_UNITARIO,\r\n      variables: {\r\n        datosProductos: input.toUpperCase(),\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    });\r\n    return response;\r\n  };\r\n\r\n  const [consultaBase, setConsultaBase] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (venta !== null) {\r\n      setDatosVentasActual({\r\n        subTotal: parseFloat(venta.subTotal),\r\n        total: parseFloat(venta.total),\r\n        impuestos: parseFloat(venta.impuestos),\r\n        iva: parseFloat(venta.iva),\r\n        ieps: parseFloat(venta.ieps),\r\n        descuento: parseFloat(venta.descuento),\r\n        monedero: parseFloat(venta.monedero),\r\n      });\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (loading) return;\r\n    if (!clave) return;\r\n    try {\r\n      if (\r\n        event.code === \"Enter\" ||\r\n        event.code === \"NumpadEnter\" ||\r\n        event.type === \"click\"\r\n      ) {\r\n        setLoading(true);\r\n        const input_value = clave;\r\n        const data = input_value.split(\"*\");\r\n        let datosQuery = {\r\n          data: undefined,\r\n          loading: false,\r\n          error: undefined,\r\n        };\r\n        let granel_base = {\r\n          granel: false,\r\n          valor: 0,\r\n        };\r\n        if (data.length > 1) {\r\n          let data_operation = isNaN(data[0]) ? data[1] : data[0];\r\n          let data_key = isNaN(data[0]) ? data[0] : data[1];\r\n          /* setGranelBase({\r\n            granel: true,\r\n            valor: parseFloat(data_operation),\r\n          }); */\r\n          granel_base = {\r\n            granel: true,\r\n            valor: parseFloat(data_operation),\r\n          };\r\n          datosQuery = await obtenerProductos(data_key);\r\n          setConsultaBase(!consultaBase);\r\n        } else {\r\n          /* setGranelBase({\r\n            granel: false,\r\n            valor: 0,\r\n          }); */\r\n          datosQuery = await obtenerProductos(input_value);\r\n          setConsultaBase(!consultaBase);\r\n        }\r\n\r\n        if (datosQuery.error) {\r\n          if (datosQuery.error.networkError) {\r\n            setAlert({\r\n              message: `Error de servidor`,\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else if (datosQuery.error.graphQLErrors) {\r\n            setAlert({\r\n              message: `${datosQuery.error.graphQLErrors[0]?.message}`,\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          }\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        if (datosQuery.data) {\r\n          let productosBase = datosQuery.data.obtenerUnProductoVentas;\r\n          if (productosBase !== null) {\r\n            if (productosBase.length === 1) {\r\n              if (productosBase[0].cantidad !== null) {\r\n                agregarProductos(productosBase[0], granel_base);\r\n              } else {\r\n                /* setOpen(true); */\r\n                setAlert({\r\n                  message: `Este producto no existe`,\r\n                  status: \"error\",\r\n                  open: true,\r\n                });\r\n              }\r\n            } else if (productosBase.length > 0) {\r\n              setOpenMedidas(true);\r\n              setProducto(productosBase);\r\n            } else {\r\n              /* setOpen(true); */\r\n              setAlert({\r\n                message: `Este producto no existe`,\r\n                status: \"error\",\r\n                open: true,\r\n              });\r\n            }\r\n          }\r\n        }\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const without_inventary = sesion.empresa.vender_sin_inventario;\r\n\r\n  const agregarProductos = async (producto, granel) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      //cantidad\r\n      if (!without_inventary && producto.cantidad === 0) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    } else {\r\n      //inventario_general\r\n      if (\r\n        !without_inventary &&\r\n        producto.inventario_general[0].cantidad_existente === 0\r\n      ) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    }\r\n    let granel_base = granel\r\n      ? granel\r\n      : {\r\n          granel: false,\r\n          valor: 0,\r\n        };\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granel_base,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      // console.log(new_prices.newP);\r\n      //agregar producto al inicio del arreglo\r\n      productosVentasTemp.splice(0, 0, new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      // console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: granel_base,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setProducto([]);\r\n    setOpenMedidas(false);\r\n    /* setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    }); */\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={open_message}\r\n        onClose={() => setOpenMessage(false)}\r\n        message=\"Producto sin existencias\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <ProductoConMedidas\r\n        agregarProductos={agregarProductos}\r\n        open={openMedidas}\r\n        setOpen={setOpenMedidas}\r\n        productos={producto}\r\n      />\r\n      <Box\r\n        width=\"100%\"\r\n        display=\"flex\"\r\n        justifyItems=\"center\"\r\n        alignSelf=\"center\"\r\n        justifySelf=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Box mt={1} mx={1}>\r\n          <img\r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/busqueda-de-codigos-de-barras.svg\"\r\n            alt=\"iconoBander\"\r\n            className={classes.iconSize}\r\n          />\r\n        </Box>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Producto...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onKeyUp={(e) => keyUpEvent(e)}\r\n          onChange={(e) => setClave(e.target.value)}\r\n          disabled={loading}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {loading ? (\r\n                  <IconButton disabled={loading}>\r\n                    <CircularProgress size={20} color=\"primary\" />\r\n                  </IconButton>\r\n                ) : (\r\n                  <Fragment>\r\n                    <IconButton\r\n                      onClick={(e) => keyUpEvent(e)}\r\n                      disabled={loading}\r\n                      color=\"primary\"\r\n                    >\r\n                      <Add />\r\n                    </IconButton>\r\n                  </Fragment>\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n        />\r\n        <IconButton\r\n          onClick={() => setOpenBuscarProducto(!openBuscarProducto)}\r\n          disabled={loading}\r\n        >\r\n          <Search />\r\n        </IconButton>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport AgregarTipoVenta from \"./TipoVenta\";\r\nimport AgregarClienteVenta from \"./AgregarCliente\";\r\nimport AgregarProductoVenta from \"./AgregarProducto\";\r\n\r\nexport default function ContenedorInputsGeneral({ loading, setLoading }) {\r\n\r\n  return (\r\n    <Fragment>\r\n      <Paper>\r\n        <Grid container spacing={3} style={{ padding: 8 }}>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarProductoVenta loading={loading} setLoading={setLoading} />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarClienteVenta />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarTipoVenta />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Portal from \"@material-ui/core/Portal\";\r\nimport { FcBusinessman, FcCalendar, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport TablaVentasCheckbox from \"./Tabla_ventas_checkbox\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { formatoMexico } from \"../../config/reuserFunctions\";\r\nimport ContenedorInputsGeneral from \"./InputsVentasGen.js/ContenedorInputs\";\r\n\r\nexport default function VentasGenerales() {\r\n  const {\r\n    clientesVentas,\r\n    openBackDrop,\r\n    DatosVentasActual,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <Box\r\n      height=\"100%\"\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      justifyContent=\"space-between\"\r\n    >\r\n      <ContenedorInputsGeneral loading={loading} setLoading={setLoading} />\r\n      <Box\r\n        height=\"100%\"\r\n        style={\r\n          loading\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.6,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <TablaVentasCheckbox setDatosVentasActual={setDatosVentasActual} />\r\n      </Box>\r\n\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" flexDirection=\"column\">\r\n        <Paper variant=\"outlined\">\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} sm={6} xs={12}>\r\n              <Box mx={2}>\r\n                <Grid container>\r\n                  <Grid item xs={12}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <FcBusinessman style={{ fontSize: 19 }} />\r\n                        <Box mr={1} />\r\n                        <Typography variant=\"subtitle1\">\r\n                          Cliente:{\" \"}\r\n                          <b style={{ fontSize: 16 }}>\r\n                            {clientesVentas\r\n                              ? clientesVentas.nombre_cliente\r\n                              : \"\"}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={5} xs={12}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <AiOutlineFieldNumber style={{ fontSize: 19 }} />\r\n                      <Box mr={1} />\r\n                      <Typography variant=\"subtitle1\">\r\n                        No. Cliente:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.numero_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={7} xs={12}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <FaBarcode style={{ fontSize: 19 }} />\r\n                      <Box mr={1} />\r\n                      <Typography variant=\"subtitle1\">\r\n                        Clave Cliente:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.clave_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={5} xs={12}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <FcCalendar style={{ fontSize: 19 }} />\r\n                      <Box mr={1} />\r\n                      <Typography variant=\"subtitle1\">\r\n                        Dias Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas && clientesVentas.dias_credito\r\n                            ? clientesVentas.dias_credito\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={7} xs={12}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <FaMoneyCheckAlt style={{ fontSize: 19 }} />\r\n                      <Box mr={1} />\r\n                      <Typography variant=\"subtitle1\">\r\n                        Limite Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          $\r\n                          {clientesVentas && clientesVentas.limite_credito\r\n                            ? formatoMexico(clientesVentas.limite_credito)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} sm={6} xs={12}>\r\n              <Grid container spacing={2}>\r\n                <Grid item lg={6} xs={12}>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    flexDirection=\"row-reverse\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Monedero :{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual.monedero\r\n                              ? formatoMexico(DatosVentasActual.monedero)\r\n                              : 0\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    alignItems=\"center\"\r\n                    display=\"flex\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Descuento:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual.descuento\r\n                              ? formatoMexico(DatosVentasActual.descuento)\r\n                              : 0\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <Box\r\n                        display=\"flex\"\r\n                        justifyContent=\"center\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png\"\r\n                          alt=\"icono admin\"\r\n                          style={{ width: 20 }}\r\n                        />\r\n                      </Box>\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                  <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Subtotal:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.subTotal\r\n                          ? formatoMexico(DatosVentasActual.subTotal)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Impuestos:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.impuestos\r\n                          ? formatoMexico(DatosVentasActual.impuestos)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  {/* <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Iva:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.iva\r\n                          ? DatosVentasActual.iva.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box> */}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n            <Typography variant=\"h4\">\r\n              Total:{\" \"}\r\n              <b style={{ color: \"green\" }}>\r\n                $\r\n                {DatosVentasActual?.total\r\n                  ? formatoMexico(DatosVentasActual.total)\r\n                  : 0}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n      <Portal>\r\n        <Backdrop style={{ zIndex: \"99999\" }} open={openBackDrop}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n      </Portal>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  InputAdornment,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CAJAS } from \"../../../gql/Cajas/cajas\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nmoment.locale(\"es\");\r\n\r\nexport default function AbrirTurno({\r\n  handleClickOpen,\r\n  loading,\r\n  type,\r\n  setLoading,\r\n}) {\r\n  let sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  const { /* setTurnoActivo,  */setAlert } = useContext(VentasContext);\r\n\r\n  const [error, setError] = useState(false);\r\n  const [abrirTurno, setAbrirTurno] = useState([]);\r\n  const [numeroCaja, setNumeroCaja] = useState(\"\");\r\n\r\n  const principal = sesion.accesos.tesoreria.caja_principal.ver;\r\n\r\n  const classes = useStyles();\r\n  let obtenerCajasSucursal = [];\r\n\r\n  const cajas = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const obtenerTurno = (e) => {\r\n    setAbrirTurno({ ...abrirTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  if (cajas.data) {\r\n    obtenerCajasSucursal = cajas.data.obtenerCajasSucursal;\r\n  }\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: true,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (\r\n        !abrirTurno.turno_en_curso ||\r\n        !abrirTurno.caja_elegida ||\r\n        !abrirTurno.monto_abrir\r\n      ) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor complete los datos obligatorios`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        const input = {\r\n          horario_en_turno: abrirTurno.turno_en_curso,\r\n          concepto: \"ABRIR TURNO\",\r\n          numero_caja: numeroCaja.toString(),\r\n          comentarios: abrirTurno.comentarios,\r\n          id_caja: abrirTurno.caja_elegida,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          id_usuario: sesion._id,\r\n          usuario_en_turno: {\r\n            nombre: sesion.nombre,\r\n            telefono: sesion.telefono,\r\n            numero_usuario: sesion.numero_usuario.toString(),\r\n            email: sesion.email,\r\n          },\r\n          hora_entrada: {\r\n            hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n            minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n            segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n            completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n          },\r\n          hora_salida: {\r\n            hora: \"\",\r\n            minutos: \"\",\r\n            segundos: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_entrada: {\r\n            year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n            mes: moment().locale(\"es-mx\").locale(\"es-mx\").format(\"MM\"),\r\n            dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n            no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n            no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n            completa: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n          },\r\n          fecha_salida: {\r\n            year: \"\",\r\n            mes: \"\",\r\n            dia: \"\",\r\n            no_semana_year: \"\",\r\n            no_dia_year: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n          montos_en_caja: {\r\n            monto_efectivo: {\r\n              monto: parseFloat(abrirTurno.monto_abrir),\r\n              metodo_pago: \"01\",\r\n            },\r\n            monto_tarjeta_debito: {\r\n              monto: 0,\r\n              metodo_pago: \"28\",\r\n            },\r\n            monto_tarjeta_credito: {\r\n              monto: 0,\r\n              metodo_pago: \"04\",\r\n            },\r\n            monto_creditos: {\r\n              monto: 0,\r\n              metodo_pago: \"99\",\r\n            },\r\n            monto_monedero: {\r\n              monto: 0,\r\n              metodo_pago: \"05\",\r\n            },\r\n            monto_transferencia: {\r\n              monto: 0,\r\n              metodo_pago: \"03\",\r\n            },\r\n            monto_cheques: {\r\n              monto: 0,\r\n              metodo_pago: \"02\",\r\n            },\r\n            monto_vales_despensa: {\r\n              monto: 0,\r\n              metodo_pago: \"08\",\r\n            },\r\n          },\r\n        };\r\n\r\n        const variableTurnoAbierto = await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: true,\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (variableTurnoAbierto.data.crearRegistroDeTurno === null) {\r\n          setLoading(false);\r\n          setAlert({\r\n            message: `Lo sentimos esta caja ya esta en uso`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          localStorage.setItem(\r\n            \"turnoEnCurso\",\r\n            JSON.stringify(variableTurnoAbierto.data.crearRegistroDeTurno)\r\n          );\r\n          localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n          /* setTurnoActivo(true); */\r\n          setAlert({\r\n            message: `Turno abierto con exito`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          /* if (type !== \"FRENTE\") {\r\n            handleClickOpen();\r\n          } */\r\n          window.location.reload();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      /* if (type !== \"FRENTE\") {\r\n        handleClickOpen();\r\n      } */\r\n    }\r\n  };\r\n\r\n  /* if (cajas.loading)\r\n    return (\r\n      <BackdropComponent loading={loading} />\r\n      // <Box\r\n      // display=\"flex\"\r\n      // flexDirection=\"column\"\r\n      // justifyContent=\"center\"\r\n      // alignItems=\"center\"\r\n      // height=\"80vh\"\r\n      // >\r\n      // \t<CircularProgress />\r\n      // </Box>\r\n    ); */\r\n\r\n  return (\r\n    <div>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}> Empleado:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"nombre_usuario\"\r\n              onChange={obtenerTurno}\r\n              disabled={true}\r\n              value={sesion ? sesion.nombre : \"\"}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Turno:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.turno_en_curso}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"turno_en_curso\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Caja:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.caja_elegida}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"caja_elegida\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {obtenerCajasSucursal.map((caja) => {\r\n                  return caja.activa === true || (caja.principal === true && !principal) ? null : (\r\n                    <MenuItem\r\n                      key={caja.numero_caja}\r\n                      value={caja._id}\r\n                      onClick={() => setNumeroCaja(caja.numero_caja)}\r\n                    >\r\n                      Caja {caja.numero_caja}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              {\" \"}\r\n              <span className=\"obligatorio\">* </span>Monto para abrir:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"monto_abrir\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              error={error && !abrirTurno.monto_abrir}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}> Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              multiline\r\n              rows={5}\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={loading || cajas.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n            disabled={loading || cajas.loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n","import React, { /* useContext, useEffect, */ useState } from \"react\";\r\nimport VentasGenerales from \"./VentasGenerales\";\r\nimport AbrirTurno from \"../ventas/AbrirCerrarTurno/AbrirTurno\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n/* import { VentasContext } from \"../../context/Ventas/ventasContext\"; */\r\nimport { DialogTitle } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaIndex() {\r\n  /* const { turnoActivo, setTurnoActivo } = useContext(VentasContext);\r\n  const [varActive, setVarActive] = useState(false); */\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* useEffect(() => {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    setVarActive(sesion.turno_en_caja_activo);\r\n    setTurnoActivo(false);\r\n  }, [turnoActivo]) */;\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      {sesion.turno_en_caja_activo && turnoEnCurso ? (\r\n        <VentasGenerales />\r\n      ) : (\r\n        <AbrirTurnoEnVentas />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction AbrirTurnoEnVentas() {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <Dialog\r\n      open={true}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      keepMounted\r\n      TransitionComponent={Transition}\r\n      disableEscapeKeyDown={false}\r\n    >\r\n      <DialogTitle>\r\n        Si deseas realizar ventas inicia tu turno primeramente.\r\n      </DialogTitle>\r\n      <AbrirTurno type=\"FRENTE\" setLoading={setLoading} loading={loading} />\r\n    </Dialog>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport NavegacionVentas from \"../Navegaciones/NavegacionVentas\";\r\nimport NavegacionVentasLateral from \"../Navegaciones/NavegacionVentasLateral\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {\r\n  VentasContext,\r\n  VentasProvider,\r\n} from \"../../context/Ventas/ventasContext\";\r\nimport VentaIndex from \"../../pages/ventas/venta_index\";\r\nimport useStyles from \"../Navegaciones/styles\";\r\nimport moment from \"moment\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport { PowerSettingsNew, Settings } from \"@material-ui/icons\";\r\n\r\nexport default function LayoutVentas(props) {\r\n  const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n  if (!sesion) props.history.push(\"/\");\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <VentasProvider>\r\n        <LayoutWithProvider props={props} />\r\n      </VentasProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst LayoutWithProvider = ({ props }) => {\r\n  return (\r\n    <Box>\r\n      <Box height=\"5vh\">\r\n        <NavDataCajaUsers props={props} />\r\n      </Box>\r\n      <Grid container>\r\n        <Grid item lg={9} md={8}>\r\n          <Box height=\"10vh\">\r\n            <NavegacionVentas />\r\n          </Box>\r\n          <Box height=\"85vh\">\r\n            <VentaIndex />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item lg={3} md={4}>\r\n          <NavegacionVentasLateral />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst NavDataCajaUsers = ({ props }) => {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    setUbicacionTurno,\r\n  } = useContext(VentasContext);\r\n  const {\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n  moment.locale(\"es\");\r\n\r\n  const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  window.onkeydown = Mi_función;\r\n\r\n  function Administrador() {\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={4} style={{ display: \"flex\" }}>\r\n        <Avatar\r\n          alt=\"Remy Sharp\"\r\n          srsc=\"/static/images/avatar/1.jpg\"\r\n          className={classes.avatar}\r\n        />\r\n        <Typography color=\"textSecondary\">{sesion?.nombre}</Typography>\r\n        <Box mx={1} />\r\n        {!turnoEnCurso?.numero_caja ? (\r\n          \"\"\r\n        ) : (\r\n          <Typography color=\"textSecondary\">\r\n            <b>Caja: </b>\r\n            {turnoEnCurso?.numero_caja}\r\n          </Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item md={4} style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        <img\r\n          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/calendario.svg\"\r\n          alt=\"icono admin\"\r\n          className={classes.avatar}\r\n        />\r\n        <Typography color=\"textSecondary\">\r\n          {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n        </Typography>\r\n        <Box mx={1} />\r\n        <Typography color=\"textSecondary\">\r\n          <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid\r\n        item\r\n        md={4}\r\n        style={\r\n          !turnoEnCurso\r\n            ? { display: \"flex\", justifyContent: \"flex-end\", zIndex: 99999 }\r\n            : { display: \"flex\", justifyContent: \"flex-end\" }\r\n        }\r\n      >\r\n        <Button\r\n          onClick={() => Administrador()}\r\n          startIcon={<Settings />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          F1 Administrador\r\n        </Button>\r\n        <Box mx={1} />\r\n        <Button\r\n          color=\"secondary\"\r\n          onClick={() => {\r\n            signOut();\r\n          }}\r\n          startIcon={<PowerSettingsNew />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          Salir\r\n        </Button>\r\n        <Box mr={2} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logochafa.744b44f9.PNG\";","export default __webpack_public_path__ + \"static/media/admin.cecfcd64.svg\";","export default __webpack_public_path__ + \"static/media/cart-add.eacbdb19.svg\";","import { Box, Button, Container, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../img/logochafa.PNG';\r\nimport adminIcon from '../../icons/ventas/admin.svg';\r\nimport cartIcon from '../../icons/ventas/cart-add.svg';\r\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\twidth: 150,\r\n        fontSize: 150\r\n\t},\r\n\r\n}));\r\n\r\nexport default function LayoutHome(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tif (!sesion) props.history.push('/');\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Box height=\"90vh\">\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<img alt=\"logo ab\" src={logo} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" my={6}>\r\n\t\t\t\t\t<Button component={Link} to=\"/admin/inicio\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={adminIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button component={Link} to=\"/ventas/venta-general\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={cartIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tVentas\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n                    <Button color=\"secondary\" onClick={signOut}>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<PowerSettingsNewRoundedIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","//layouts\r\nimport LayoutLogin from '../components/Layouts/LayoutLogin';\r\nimport LayoutAdmin from '../components/Layouts/LayoutAdmin';\r\nimport LayoutVentas from '../components/Layouts/LayoutVentas';\r\nimport LayoutHome from '../components/Layouts/LayoutHome';\r\n\r\n//sucursales pages\r\nimport AdminInicio from '../pages/sucursales/AdminInicio'\r\n\r\n//ventas pages\r\nimport Venta_index from '../pages/ventas/venta_index'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: LayoutLogin,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/home',\r\n\t\tcomponent: LayoutHome,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/admin',\r\n\t\tcomponent: LayoutAdmin,\r\n\t\texact: false,\r\n\t\troutes: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/admin/inicio',\r\n\t\t\t\tcomponent: AdminInicio,\r\n\t\t\t\texact: true,\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: '/ventas/venta-general',\r\n\t\tcomponent: LayoutVentas,\r\n\t\texact: false\r\n\t}\r\n\t\r\n];\r\n\r\nexport default routes;\r\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport { RegProductoProvider } from '../../context/Catalogos/CtxRegProducto';\r\nimport AdminInicio from '../../pages/sucursales/AdminInicio';\r\nimport NavegacionAdmin from '../Navegaciones/NavegacionAdmin';\r\n\r\n\r\nexport default function LayoutAdmin(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<RegProductoProvider>\r\n\t\t\t\t<NavegacionAdmin />\r\n\t\t\t\t<AdminInicio />\r\n\t\t\t</RegProductoProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { blue, grey } from '@material-ui/core/colors';\r\nimport { createTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createTheme({\r\n\tpalette: {\r\n\t\tnavbar: grey[50],\r\n\t\tprimary: {\r\n\t\t\tmain: blue[500]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#f50057'\r\n\t\t},\r\n\t}\r\n});\r\n\r\nexport default theme;\r\n","import {\r\n  ApolloClient,\r\n  /* createHttpLink, */ InMemoryCache,\r\n} from \"@apollo/client\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\n\r\nconst httpLink = createUploadLink({\r\n  uri: process.env.REACT_APP_ENDPOINT,\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  connectToDevTools: true,\r\n  cache: new InMemoryCache({\r\n    addTypename: false,\r\n  }),\r\n  link: httpLink,\r\n});\r\n\r\nexport default client;\r\n","import React from \"react\";\r\nimport { Box, CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport routes from \"./config/routes\";\r\nimport theme from \"./config/colors\";\r\n\r\nimport client from \"./config/apollo\";\r\nimport { ApolloProvider } from \"@apollo/client\";\r\nimport { AccesosProvider } from \"./context/Accesos/accesosCtx\";\r\nimport { ClienteProvider } from \"./context/Catalogos/crearClienteCtx\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Box height=\"100vh\" className=\"App\">\r\n      <CssBaseline />\r\n      <ApolloProvider client={client}>\r\n        <AccesosProvider>\r\n          <ClienteProvider>\r\n            <ThemeProvider theme={theme}>\r\n              <Router>\r\n                <Switch>\r\n                  {routes.map((route, index) => (\r\n                    <RoutesWithSubRoutes key={index} {...route} />\r\n                  ))}\r\n                </Switch>\r\n              </Router>\r\n            </ThemeProvider>\r\n          </ClienteProvider>\r\n        </AccesosProvider>\r\n      </ApolloProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RoutesWithSubRoutes(route) {\r\n  return (\r\n    <Route\r\n      path={route.path}\r\n      exact={route.exact}\r\n      render={(props) => <route.component routes={route.routes} {...props} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./index.scss\"\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}