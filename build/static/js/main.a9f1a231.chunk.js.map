{"version":3,"sources":["gql/Catalogos/usuarios.js","components/SnackBarMessages.js","components/Layouts/LayoutLogin.js","context/Catalogos/initialStatesProducto.js","context/Catalogos/CtxRegProducto.js","context/Catalogos/empresaContext.js","components/Layouts/BackDrop.js","components/ErrorPage.js","gql/Empresa/empresa.js","pages/sucursales/Empresa/Datos/MisDatos.js","pages/sucursales/Facturacion/catalogos.js","gql/Facturacion/Facturacion.js","pages/sucursales/Facturacion/CFDISellos/RegistrarSellos.js","pages/sucursales/Facturacion/CFDISellos/EliminarCSD.js","pages/sucursales/Empresa/InformacionFiscal/InformacionFiscal.js","pages/sucursales/Empresa/DatosEmpresa.js","gql/Empresa/sucursales.js","config/reuserFunctions.js","pages/sucursales/Empresa/Sucursal/DatosSucursal.js","pages/sucursales/Empresa/Empresa.js","pages/sucursales/Catalogos/Producto/PreciosVenta/UnidadesVenta.js","pages/sucursales/Catalogos/Producto/PreciosVenta/Precios.js","pages/sucursales/Catalogos/Producto/unidades.js","pages/sucursales/Catalogos/Producto/calculos_precios.js","pages/sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional.js","context/Compras/comprasContext.js","pages/sucursales/Catalogos/Producto/TallasColores/TablaPresentaciones.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosProductos.js","gql/Catalogos/productos.js","gql/Catalogos/colores.js","pages/sucursales/Catalogos/Producto/TallasColores/crearColor.js","gql/Catalogos/tallas.js","pages/sucursales/Catalogos/Producto/TallasColores/crearTalla.js","pages/sucursales/Catalogos/Producto/TallasColores/TallasColores.js","pages/sucursales/Compras/AbrirCompra/productos/TallasProducto.js","billing/Facturama/facturama.api.js","gql/CatalogosSat/catalogoProductosSat.js","pages/sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT.js","gql/Catalogos/categorias.js","gql/Catalogos/departamentos.js","gql/Catalogos/marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/RegistrarNuevoSelect.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Categorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Subcategorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Departamentos.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/registrarInfoGeneral.js","pages/sucursales/Catalogos/Producto/Imagenes/cargarImagenesProducto.js","context/Almacenes/crearAlmacen.js","gql/Almacenes/Almacen.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso.js","context/Catalogos/usuarioContext.js","pages/sucursales/Catalogos/Usuarios/FormularioUsuario.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Parametros.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Catalogos.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/MiEmpresa.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Compras.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Almacenes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Tesoreria.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Reportes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Ventas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Facturacion.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/AsignarPermisos.js","pages/sucursales/Catalogos/Usuarios/CrearUsuario.js","pages/sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen.js","pages/sucursales/Catalogos/Producto/Inventario&Almacen/AlmacenInicial.js","pages/sucursales/Catalogos/Producto/validaciones.js","gql/Catalogos/centroCostos.js","pages/sucursales/Catalogos/Producto/CentroCostos/CentroCostos.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/PrecioPlazos.js","pages/sucursales/Catalogos/Producto/validateDatos.js","pages/sucursales/Catalogos/Producto/crearProducto.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosVenta.js","pages/sucursales/Compras/AbrirCompra/productos/Descuentos.js","context/Catalogos/crearClienteCtx.js","pages/sucursales/Catalogos/Cliente/RegistrarInfoBasica.js","pages/sucursales/Catalogos/Cliente/RegistroInfoCredito.js","gql/Catalogos/clientes.js","pages/sucursales/Catalogos/Cliente/CrearCliente.js","gql/Compras/compras.js","pages/sucursales/Compras/AbrirCompra/initial_states.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProveedorAlmacen.js","pages/sucursales/Compras/AbrirCompra/productos/mostrar_precios.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProducto.js","pages/sucursales/Compras/AbrirCompra/productos/setOrResetData.js","pages/sucursales/Compras/AbrirCompra/TablaCompras.js","pages/sucursales/Compras/AbrirCompra/ConfirmarCompra.js","pages/sucursales/Compras/AbrirCompra/AbrirCompra.js","pages/sucursales/Compras/ComprasRealizadas/ExportarProductosCompra.js","pages/sucursales/Compras/ComprasRealizadas/DatosDeCompra.js","pages/sucursales/Compras/ComprasRealizadas/ListaCompras.js","pages/sucursales/Compras/ComprasRealizadas/ExportarComprasExcel.js","pages/sucursales/Compras/ComprasRealizadas/ComprasRealizadas.js","pages/sucursales/Compras/ComprasEnEspera/VerificarProductos.js","pages/sucursales/Compras/ComprasEnEspera/DatosDeCompraEspera.js","pages/sucursales/Compras/ComprasEnEspera/ListaEnEspera.js","pages/sucursales/Compras/ComprasEnEspera/ComprasEnEspera.js","pages/sucursales/Compras/Compras.js","pages/sucursales/Catalogos/Cliente/ListaClientes.js","pages/sucursales/Catalogos/Cliente/Cliente.js","gql/Catalogos/descuentos.js","pages/sucursales/Catalogos/Producto/Descuentos/ListaPrecios.js","pages/sucursales/Catalogos/Producto/Descuentos/Descuento.js","pages/sucursales/Catalogos/Producto/EliminarProducto.js","pages/sucursales/Catalogos/Producto/ListaProductos.js","pages/sucursales/Catalogos/Producto/ProductosEliminados.js","pages/sucursales/Catalogos/Producto/Productos.js","pages/sucursales/Catalogos/Producto/index.js","pages/sucursales/Catalogos/Tallas/ListaTallas.js","pages/sucursales/Catalogos/Tallas/RegistroTallas.js","components/DescripcionCatalogo.js","pages/sucursales/Catalogos/Tallas/Tallas.js","gql/Catalogos/contabilidad.js","pages/sucursales/Catalogos/Contabilidad/ListaServicios.js","pages/sucursales/Catalogos/Contabilidad/RegistroServicio.js","pages/sucursales/Catalogos/Contabilidad/Contabilidad.js","pages/sucursales/Catalogos/Proveedores/ListaProveedores.js","pages/sucursales/Catalogos/Proveedores/Proovedores.js","gql/Cajas/cajas.js","pages/sucursales/Catalogos/Cajas/ListaCajas.js","pages/sucursales/Catalogos/Cajas/RegistrarCajas.js","pages/sucursales/Catalogos/Cajas/Cajas.js","pages/sucursales/Catalogos/Usuarios/ListaUsuario.js","pages/sucursales/Catalogos/Usuarios/Usuarios.js","context/Catalogos/Departamentos.js","pages/sucursales/Catalogos/Departamentos/ListaDepartamentos.js","pages/sucursales/Catalogos/Departamentos/RegistroDepartamento.js","pages/sucursales/Catalogos/Departamentos/Departamentos.js","pages/sucursales/Catalogos/Categorias/RegistroCategorias.js","pages/sucursales/Catalogos/Categorias/Categorias.js","pages/sucursales/Catalogos/Colores/ListaColores.js","pages/sucursales/Catalogos/Colores/RegistroColores.js","pages/sucursales/Catalogos/Colores/Colores.js","pages/sucursales/Catalogos/Marcas/ListaMarcas.js","context/Catalogos/Marcas.js","pages/sucursales/Catalogos/Marcas/VistaMarcas.js","pages/sucursales/Catalogos/Marcas/Marcas.js","pages/sucursales/Catalogos/CentroCostos/RegistroCentroCostos.js","pages/sucursales/Catalogos/CentroCostos/CentroCostos.js","gql/Catalogos/conceptosAlmacen.js","pages/sucursales/Catalogos/ConceptosAlmacen/ListaConceptos.js","pages/sucursales/Catalogos/ConceptosAlmacen/RegistroConcepto.js","pages/sucursales/Catalogos/ConceptosAlmacen/ConceptosAlmacen.js","pages/sucursales/Catalogos/Catalogos.js","context/Tesoreria/tesoreriaCtx.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/RetiroDeposito.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/HistorialCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/ListaCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/CuentasEmpresaSucursales.js","gql/Tesoreria/egresos.js","pages/sucursales/Tesoreria/Egresos/TablaProductosEgresos.js","pages/sucursales/Tesoreria/Egresos/FormRegistroEgresos.js","pages/sucursales/Tesoreria/Egresos/VistaRegistroEgreso.js","pages/sucursales/Tesoreria/Egresos/Egresos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaCompras.js","gql/Tesoreria/abonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/AbonosProovedores.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaCompras.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Clientes/AbonosClientes.js","pages/sucursales/Tesoreria/Tesoreria.js","pages/sucursales/Tesoreria/IndexTesoreria.js","context/Facturacion/facturacionCtx.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ProductosSinClave.js","gql/Ventas/ventas_generales.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ListaVentasFactura.js","pages/sucursales/Facturacion/NuevaFactura/Catalogos/CodigoPostal.js","pages/sucursales/Facturacion/NuevaFactura/ClientesSelect.js","pages/sucursales/Facturacion/NuevaFactura/RegistroFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EditarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EliminarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/TablaDetallesFactura.js","pages/sucursales/Facturacion/NuevaFactura/initial_factura_states.js","pages/sucursales/Facturacion/NuevaFactura/RealizarFactura.js","pages/sucursales/Facturacion/NuevaFactura/CancelarFactura.js","pages/sucursales/Facturacion/NuevaFactura/NuevaFactura.js","pages/sucursales/Facturacion/CFDISeries/RegistroSeries.js","pages/sucursales/Facturacion/CFDISeries/ListaSeries.js","pages/sucursales/Facturacion/CFDISeries/SeriesCdfi.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarProductosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/DatosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/ListaFacturas.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarListaFacturasExcel.js","pages/sucursales/Facturacion/FacturasRealizadas/FacturasRealizadas.js","pages/sucursales/Facturacion/Facturacion.js","pages/sucursales/Almacenes/RegistroAlmacen/ListaAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/RegistroAlmacen.js","icons/almacen.svg","context/Almacenes/traspasosAlmacen.js","components/Traspasos/TablePresentacionesNotOrigen.js","components/Traspasos/TallasColoresTraspasos.js","components/Traspasos/TableSelectMedidas.js","components/Traspasos/TableSelectProducts.js","pages/sucursales/Almacenes/Traspasos/Traspasos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/ListaProductos.js","components/ExportExcel.js","pages/sucursales/Almacenes/InventarioPorAlmacen/InventariosPorAlmacen.js","pages/sucursales/Almacenes/Almacenes.js","pages/sucursales/Reportes/Cajas/TablaHistorialFiltrado.js","pages/sucursales/Reportes/Cajas/HistorialCaja.js","pages/sucursales/Reportes/Cajas/CardCaja.js","pages/sucursales/Reportes/Cajas/Cajas.js","pages/sucursales/Reportes/TurnosUsuarios/TablaTurnosFiltrados.js","gql/Ventas/abrir_cerrar_turno.js","pages/sucursales/Reportes/TurnosUsuarios/ReportesTurnosUsuarios.js","pages/sucursales/Reportes/Compras/TablaComprasFiltradas.js","gql/Compras/reporte_compras.js","pages/sucursales/Reportes/Compras/ExportarCompras.js","pages/sucursales/Reportes/Compras/FiltrosCompra.js","pages/sucursales/Reportes/Compras/ReportesCompras.js","pages/sucursales/Reportes/Ventas/TablaVentasFiltradas.js","pages/sucursales/Reportes/Ventas/ReportesVentas.js","pages/sucursales/Reportes/Almacenes/ExportarTraspasos.js","pages/sucursales/Reportes/Almacenes/TablaAlmacenFiltradas.js","pages/sucursales/Reportes/Almacenes/ReportesAlmacen.js","pages/sucursales/Reportes/Cortes/TablaCortesFiltradas.js","pages/sucursales/Reportes/Cortes/ExportExcel.js","pages/sucursales/Reportes/Cortes/ReportesCortes.js","pages/sucursales/Reportes/Tesoreria/ListaEgresos.js","pages/sucursales/Reportes/Tesoreria/ListaTransferencias.js","pages/sucursales/Reportes/Tesoreria/Reporte_Tesoreria.js","pages/sucursales/Reportes/Reportes.js","pages/sucursales/AdminInicio.js","components/Navegaciones/NavegacionAdmin.js","components/Navegaciones/styles.js","pages/ventas/styles.js","context/Ventas/ventasContext.js","pages/ventas/Operaciones/DepositoRetiroCaja.js","pages/ventas/AbrirCerrarTurno/CerrarTurno.js","pages/ventas/AbrirCerrarTurno/Turnos.js","context/Accesos/accesosCtx.js","pages/ventas/Operaciones/PreCorteCaja.js","pages/ventas/Operaciones/VentaEnEspera.js","pages/ventas/ArticuloRapido/RegistroInformacionRapido.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TablaPresentaciones.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TallasColoresRapidos.js","components/AccesosPassword/Acceso.js","pages/ventas/ArticuloRapido/ArticuloRapido.js","pages/ventas/ArticuloRapido/indexArticuloRapido.js","pages/ventas/Cotizacion/CotizacionesPendientes.js","pages/ventas/Cotizacion/ListaCotizaciones.js","components/Navegaciones/NavegacionVentas.js","pages/ventas/Abonos/Abonos.js","pages/ventas/BuscarProductos/ListaProductos.js","pages/ventas/BuscarProductos/InformacionProducto.js","pages/ventas/BuscarProductos/BuscarProducto.js","pages/ventas/ClientesVentas/ClientesVentas.js","gql/Ventas/cotizaciones.js","pages/ventas/Cotizacion/NuevaCotizacion.js","pages/ventas/Cotizacion/Cotizacion.js","pages/ventas/Operaciones/CancelarVenta.js","pages/ventas/Operaciones/CerrarVenta.js","pages/ventas/Operaciones/ConsultarPrecio.js","pages/ventas/Operaciones/PreciosProducto.js","pages/ventas/VentasEspera/ListaVentas.js","pages/ventas/VentasEspera/VentasEspera.js","pages/ventas/VentasRealizadas/ListaVentasRealizadas.js","pages/ventas/VentasRealizadas/VentasRealizadas.js","components/Navegaciones/NavegacionVentasLateral.js","pages/ventas/EliminarProductoVenta.js","pages/ventas/Tabla_ventas_checkbox.js","pages/ventas/ClientesVentas.js","pages/ventas/VentasGenerales.js","pages/ventas/AbrirCerrarTurno/AbrirTurno.js","pages/ventas/venta_index.js","components/Layouts/LayoutVentas.js","img/logochafa.PNG","icons/ventas/admin.svg","icons/ventas/cart-add.svg","components/Layouts/LayoutHome.js","config/routes.js","img/abLogo.jpeg","components/Layouts/LayoutAdmin.js","config/colors.js","config/apollo.js","App.js","reportWebVitals.js","index.js"],"names":["CREAR_USUARIO","gql","OBTENER_USUARIOS","ACTUALIZAR_USUARIO","LOGEAR_USUARIO","LOGEAR_USUARIO_ACCESOS","useStyles","makeStyles","theme","snack","zIndex","SnackBarMessages","alert","setAlert","classes","Portal","Snackbar","className","anchorOrigin","vertical","horizontal","open","onClose","status","message","autoHideDuration","Box","display","style","color","mr","Typography","margin","marginTop","spacing","marginBottom","containerImagen","maxWidth","maxHeight","imagen","width","height","initial_state_datos_generales","receta_farmacia","clave_producto_sat","Name","Value","initial_state_precios","monedero","monedero_electronico","iva_activo","ieps_activo","ieps","iva","granel","inventario","inventario_minimo","inventario_maximo","unidad_de_inventario","codigo_unidad","precio_de_compra","precio_con_impuesto","precio_sin_impuesto","unidad_de_compra","unidad","cantidad","precio_unitario_sin_impuesto","precio_unitario_con_impuesto","initial_state_unidadVentaXDefecto","codigo_barras","precio","descuento_activo","precio_unidad","numero_precio","precio_neto","precio_venta","unidad_mayoreo","iva_precio","ieps_precio","utilidad","precio_general","cantidad_unidad","unidad_maxima","unidad_principal","default","initial_state_unidadVentaSecundaria","initial_state_preciosP","initial_state_unidadesVenta","initial_state_almacen_inicial","id_almacen","almacen","fecha_de_expiracion","initial_state_centro_de_costos","initial_state_preciosPlazos","precio_piezas","precio_cajas","precio_costales","initial_state_subcategorias","initial_state_imagenes","initial_state_imagenes_eliminadas","initial_state_onPreview","index","image","initial_state_validacion","error","initial_state_subcostos","initial_state_presentaciones","RegProductoContext","createContext","RegProductoProvider","children","useState","datos_generales","setDatosGenerales","precios","setPrecios","unidadVentaXDefecto","setUnidadVentaXDefecto","unidadVentaSecundaria","setUnidadVentaSecundaria","preciosP","setPreciosP","unidadesVenta","setUnidadesVenta","almacen_inicial","setAlmacenInicial","centro_de_costos","setCentroDeCostos","preciosPlazos","setPreciosPlazos","subcategorias","setSubcategorias","imagenes","setImagenes","imagenes_eliminadas","setImagenesEliminadas","onPreview","setOnPreview","validacion","setValidacion","subcostos","setSubcostos","selectedDate","setSelectedDate","update","setUpdate","presentaciones","setPresentaciones","presentaciones_eliminadas","setPresentacionesEliminadas","React","actualizarLista","setActualizarLista","datosPreciosProducto","setDatosPreciosProducto","preciosDescuentos","setPreciosDescuentos","preciosProductos","setPreciosProductos","datosEnDescuentos","setDatosEnDescuentos","almacen_existente","setAlmacenExistente","Provider","value","EmpresaContext","EmpresaProvider","nombre_empresa","nombre_dueno","telefono_dueno","celular","correo_empresa","nombre_fiscal","rfc","regimen_fiscal","curp","info_adicio","direccion","calle","no_ext","no_int","codigo_postal","colonia","municipio","localidad","estado","pais","direccionFiscal","datosBancarios","cuenta","sucursal","clave_banco","empresa","setEmpresa","toUpdate","setToUpdate","setError","backdrop","drawer","backgroundColor","BackdropComponent","loading","setLoading","Backdrop","CircularProgress","ErrorPage","altura","flexDirection","justifyContent","alignItems","fontSize","align","OBTENER_DATOS_EMPRESA","ACTUALIZAR_EMPRESA","appBar","position","title","marginLeft","flex","icon","subtitle","require","avatarContainer","border","borderRadius","avatar","MisDatos","props","sesion","JSON","parse","localStorage","getItem","loadingPage","setLoadingPage","accesos","mi_empresa","datos_empresa","editar","bloqueo","preview","setPreview","errorPage","setErrorPage","errorForm","setErrorForm","useContext","useMutation","actualizarEmpresa","useQuery","variables","id","_id","data","refetch","valor_puntos","empresaDatos","setEmpresaDatos","useEffect","errorCatch","undefined","obtenerEmpresa","actEmp","a","input","console","log","networkError","result","graphQLErrors","obtenerCampos","e","valor","target","name","parseFloat","obtenerCamposDireccion","onDrop","useCallback","acceptedFiles","reader","FileReader","readAsDataURL","onload","useDropzone","accept","noKeyboard","getRootProps","getInputProps","Container","Grid","container","item","md","Avatar","src","TextField","fullWidth","disabled","type","size","variant","helperText","onChange","inputMode","mt","Divider","DialogActions","Button","onClick","setOpen","usosCfdi","tiposCfdi","NameId","tipoCambio","formaPago","metodoPago","regimenFiscal","Natural","Moral","CREAR_FACTURA","CREAR_SERIE","ACTUALIZAR_DEFAULT_SERIE","ELIMINAR_SERIE","OBTENER_SERIES","CREAR_SELLO_CFDI","ELIMINAR_SELLO_CFDI","RegistroSellos","datosEmpresa","firma_disabled","certificate","private_key","private_key_password","datos","setDatos","show","setShow","handleClose","crearCSDS","obtenerFiles","files","getBase64","file","Promise","resolve","baseURL","guardarBD","cer","key","then","base","split","nombre_cer","catch","err","nombre_key","startIcon","Add","Dialog","DialogTitle","DialogContent","mb","InputProps","endAdornment","InputAdornment","htmlFor","CloudUpload","component","disableElevation","readOnly","multiple","my","IconButton","onMouseDown","event","preventDefault","edge","Done","EliminarSellos","eliminarCSD","eliminarSelloCSD","DeleteOutline","DialogContentText","InformacionFiscal","informacion_fiscal","setFirmaDisabled","empresaFiscal","setEmpresaFiscal","new_sesion","setItem","stringify","sello_sat","limite_timbres","timbres_usados","response","obtenerCamposBancarios","xs","FormControl","Select","MenuItem","map","res","multiline","m","Alert","severity","action","AlertTitle","sm","Transition","forwardRef","ref","Slide","direction","MiEmpresa","setValue","fullScreen","TransitionComponent","AppBar","Toolbar","Tabs","indicatorColor","Tab","label","OBTENER_SUCURSALES","OBTENER_DATOS_SUCURSAL","ACTUALIZAR_SUCURSAL","CREAR_MOVIMIENTO_CUENTA","OBTENER_HISTORIAL_CUENTAS","numerosRandom","min","max","Math","floor","random","generateCodeNumerico","length","characters","charactersLength","i","charAt","formatoFecha","fecha","Date","toLocaleDateString","weekday","year","month","day","formatoFechaCorta","formatoMexico","number","toFixed","toString","replace","cleanTypenames","Array","isArray","newObject","property","findProductArray","producto","venta","productosVentas","productos","found","producto_found","id_producto","clave_alterna","calculatePrices2","newP","origen","precio_boolean","cantidadNueva","valor_granel","precio_actual","descuento","cantidadCaja","cantidad_unidads","ivaCalculo","iepsCalculo","impuestoCalculo","subtotalCalculo","totalCalculo","monederoCalculo","descuentoCalculo","ob","cantidad_venta","granel_producto","precio_a_vender","precio_actual_producto","precio_actual_object","porciento","dinero_descontado","precio_anterior","verifiPrising","amount","pricings","precios_producto","filter","p","finalPrising","pricing","number_pricing","object_prising","datoFinal","precio_seleccionado","DatosSucursal","actualizarSucursal","nombre_sucursal","descripcion","telefono","sucursalDatos","setSucursalDatos","obtenerDatosSucursal","flexdirection","autoFocus","Empresa","justify","lg","ver","PreciosDeCompra","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","LocalOffer","Checkbox","checked","inputProps","UnidadesVentaSecundaria","setPrecio","price","calcularUnidadDesucuento","precio_unit","precio_venta_unit","suma_impuestos","PVSI","porcentaje","PVCDSI","dineroDescontado","PCSI","calcularUnidadDesucuentoCheck","boolean","calcularUnidad","PVCI","unidad_secundaria","OutlinedInput","GenCodigoBarras","Cached","onBlur","startAdornment","Tooltip","placement","arrow","aplicarDescuento","precioTitle","marginInput","titulos","fontWeight","PreciosDeVenta","newPreciosP","RenderPreciosP","preciosVenta","calculos","cantidad_sec","descuento_sec","descuento_activo_sec","PUCSI","utilidad_base","unidadXDefecto","unidadSecundaria","new_precio_venta_desc","precio_con_descuento","new_precio_venta_desc_sec","precio_con_descuento_sec","splice","verificarCampoVacio","minWidth","valor_base","PCCI","obtenerUtilidad","pl","suma","obtenerPrecioNeto","parseInt","obtenerMayoreo","unitCodes","unitCodes_granel","calcular_iva","calcular_ieps","required","RegistroInfoAdidional","obtenerIva","setPrecioConImpuesto","setPrecioSinImpuesto","obtenerIeps","precioConImpuesto","precioSinImpuesto","useDebounce","PCI","PSI","obtenerUnidadCompra","child","unidad_activa","total_impuesto","isNaN","obtenerPrecioConImpuesto","obtenerPrecioSinImpuesto","noWrap","onFocus","FormHelperText","ComprasContext","ComprasProvider","costo","cantidad_regalo","unidad_regalo","cantidad_total","descuento_porcentaje","descuento_precio","iva_total","ieps_total","subtotal","impuestos","total","mantener_precio","impuestos_descuento","subtotal_descuento","total_descuento","datosProducto","setDatosProducto","proveedor","en_espera","fecha_registro","moment","locale","format","compra_credito","fecha_vencimiento_credito","credito_pagado","saldo_credito_pendiente","forma_pago","descuento_aplicado","cantidad_descontada","datosCompra","setDatosCompra","setPreciosVenta","productoOriginal","setProductoOriginal","productosCompra","setProductosCompra","isEditing","setIsEditing","editFinish","setEditFinish","setCosto","setCantidad","issue","setIssue","loadingProductos","setLoadingProductos","compareFunction","b","medida","talla","localeCompare","root","paper","table","tableRow","alpha","palette","primary","main","visuallyHidden","clip","overflow","padding","top","colorContainer","TablaPresentaciones","from","setOnUpdate","onUpdate","withoutPrice","onlyPrice","mostrar_presentaciones","sort","Paper","stickyHeader","RenderPresentacionesRows","disabledInput","setDisabledInput","textfield","useRef","copy_presentaciones","copy_element_presentacion","copy_element_presentacion_descuento","copy_producto","obtenerDatos","existencia","cantidad_nueva","actionButton","hover","selected","Input","inputRef","nuevo","nombre_comercial","Chip","nombre","Zoom","hex","LocalOfferOutlined","checkedIcon","Edit","TabPanel","other","role","hidden","a11yProps","AlertDialogSlide","agregarCompra","cargando","toggleDrawer","resetProducto","new_precios","unidades_de_venta","unidades_secundaria","unidadxdefecto","actualizarContextProducto","keepMounted","tipo_producto","newValue","scrollButtons","textColor","LocalAtm","SquareFoot","OBTENER_CONSULTAS","CREAR_PRODUCTO","OBTENER_PRODUCTOS","ACTUALIZAR_PRODUCTO","ELIMINAR_PRODUCTO","PRODUCTOS_ELIMINADOS","ACTIVAR_PRODUCTOS","CREAR_PRODUCTO_RAPIDO","CREAR_COLOR","OBTENER_COLORES","ACTUALIZAR_COLOR","ELIMINAR_COLOR","CrearColorProducto","setColor","values","setValues","toggleModal","crearColor","GuardarDatosBD","colores","scroll","disableEscapeKeyDown","reason","onChangeComplete","toUpperCase","bgcolor","onSubmit","focused","form","CREAR_TALLAS","OBTENER_TALLAS","ACTUALIZAR_TALLA","ELIMINAR_TALLA","CrearTallasProducto","setMedidasSeleccionadas","crearTalla","nueva_talla","tipo","cursor","ColoresTallas","obtenerConsultasProducto","tallas","calzados","medidasSeleccionadas","coloresSeleccionados","setColoresSeleccionados","medidas","obtenerColoresSeleccinados","colors","forEach","element","push","hashColor","hashMedida","colores_existentes","existColor","medidas_existentes","existMedida","pointerEvents","opacity","mx","RenderTallas","useTheme","setSelected","seleccionarMedidas","medidas_seleccionadas_temp","presentacion","presentacion_temp","array_medidad_finales","producto_medida","k","producto_color","presentacion_existente","producto_array_final","x","objeto_presentaciones_final","handleAddTallas","getContrastText","Colores","seleccionarColores","obtenerColores","verificate","setVerificate","disableHoverListener","valuesFacturama","$","ajaxSetup","beforeSend","xhr","withCredentials","setRequestHeader","facturama","settings","url","retrieve","path","callback","jQuery","get","list","postSyncWithData","callbackError","ajax","dataType","contentType","success","putSyncWithData","deleteSyncWithParam","param","async","facturamaObject","Clients","Get","List","Create","Remove","Update","Products","BranchOffice","Series","idBranch","Cfdi","listWithParam","Send","postSyncWithParam","Cancel","params","Download","Acuse","TaxEntity","UploadCsd","UploadImage","Catalogs","States","country","Municipalities","state","Localities","Neighborhoods","postalCode","ProductsOrServices","keyword","PostalCodes","Units","Currencies","Countries","PaymentForms","PaymentMethods","FederalTaxes","FiscalRegimens","CfdiTypes","RelationTypes","CfdiUses","CREAR_CODIGO_PRODUCTO","ELIMINAR_CODIGO_PRODUCTO","background","spin_container","spin","CatalogosProductosSAT","codigos","busqueda","setBusqueda","setProductos","loading_save","setLoadingSave","loading_delete","setLoadingDelete","selectedIndex","setSelectedIndex","crearCodigoProducto","eliminarCodigoProducto","limpiarDataModal","handleOk","eliminarCodigoBD","handleCancel","buscarCatalogo","Facturama","responseJSON","Message","Autocomplete","options","getOptionLabel","option","renderInput","renderOption","flexGrow","_","getOptionSelected","Search","dense","SelectedListItem","contiene","includes","ListItem","button","click","detail","ListItemText","CREAR_CATEGORIA","CREAR_SUBCATEGORIA","ACTUALIZAR_CATEGORIA","ACTUALIZAR_SUBCATEGORIA","OBTENER_CATEGORIAS","ELIMINAR_CATEGORIA","ELIMINAR_SUBCATEGORIA","OBTENER_DEPARTAMENTOS","REGISTRAR_DEPARTAMENTO","ACTUALIZAR_DEPARTAMENTO","ELIMINAR_DEPARTAMENTO","OBTENER_MARCAS","REGISTRAR_MARCAS","ACTUALIZAR_MARCAS","ELIMINAR_MARCAS","RegistrarNuevoSelect","crearCategoria","crearSubcategoria","CrearDepartamentos","CrearMarca","handleToggle","guardarDatos","idCategoria","id_categoria","categoria_creada","categoria","subcategoria_creada","id_subcategoria","subcategoria","departamento_creado","id_departamento","crearDepartamentos","departamento","marca_creada","id_marca","crearMarcas","marca","endIcon","CategoriasProducto","categorias","SubcategoriasProducto","DepartamentosProducto","departamentos","nombre_departamentos","MarcasProducto","marcas","nombre_marca","formInput","obligatorio","without_arrows","RegistroInfoGenerales","centro_costos","obtenerChecks","costos","id_cuenta","subcuentas","Autorenew","textTransform","nombre_generico","FormControlLabel","control","formInputFlex","CargarImagenesProducto","render_imagenes","URL","createObjectURL","AddPhotoAlternate","minHeight","orientation","alt","RenderImagenes","key_imagen","url_imagen","handleModal","eliminarImagen","array","ModalDelete","Delete","CrearAlmacenContext","AlmacenProvider","nombre_almacen","id_usuario_encargado","datosAlmacen","setDatosAlmacen","openRegistro","setOpenRegistro","REGISTRO_ALMACEN","OBTENER_ALMACENES","ACTUALIZAR_ALMACEN","OBTENER_PRODUCTOS_ALMACEN","REALIZAR_TRASPASO","OBTENER_PRODUCTOS_EMPRESA","OBTENER_TRASPASOS","arregloVacio","agregar","eliminar","compras","abrir_compra","compras_realizadas","compras_espera","tesoreria","cuentas_empresa","egresos","abonos_proveedores","abonos_clientes","reportes","reporte_historial_cajas","reporte_turnos","reporte_compras","reporte_ventas","rerporte_almacen","reporte_corte_caja","reporte_tesoreria","ventas","cancelar_venta","precios_productos","pre_corte","cotizaciones","administrador","eliminar_ventas","producto_rapido","almacenes","traspasos","inventario_almacen","catalogos","clientes","usuarios","contabilidad","provedores","cajas","conceptos_almacen","tallas_numeros","facturacion","generar_cdfi","cdfi_realizados","registro_series_cdfi","UsuarioContext","UsuarioProvider","estado_usuario","usuario","setUsuario","FormularioUsuario","accion","showPassword","setShowPassword","password","repeatPassword","email","ActualizarPasswordModal","actualizarUsuario","confirmarPassowrd","autoComplete","Parametros","arregloAccesos","obtenerAccesos","subDepartamento","Catalogos","elevation","ml","Compras","Almacenes","Tesoreria","Reportes","Ventas","Facturacion","iconSvg","AsignarPermisos","rootPrincipal","CrearUsuario","fromEmergent","limpiarCampos","turno_en_caja_activo","onCloseModal","crearUsuario","saveData","numero_usuario","subDepartamentos","ContainerRegistroAlmacen","CrearAlmacen","ActualizarAlmacen","obtenerUsuarios","almacen_creado","crearAlmacen","id_sucursal","labelId","user","RegistroAlmacenInicial","obtenerInventario","validaciones","generales","vista3","vista1","vista2","CREAR_CUENTA","CREAR_SUBCUENTA","ACTUALIZAR_CUENTA","ACTUALIZAR_SUBCUENTA","OBTENER_CUENTAS","ELIMINAR_CUENTA","ELIMINAR_SUBCUENTA","CentroCostos","obtenerAlmacenes","subcuenta","crearCuenta","crearSubcuenta","idCuenta","cuenta_creada","subcuenta_creada","id_subcuenta","validateJsonEdit","object_date","end_array","object","root_app","dialogContent","tabs","borderRight","divider","CrearProducto","productosRefetch","fromCompra","getProductos","crearProducto","actualizarProducto","setInitialStates","resetInitialStates","validate","vista7","copy_unidadesVenta","imagenes_without_aws","precio_plazos","medidas_producto","inventario_general","window","onkeydown","keyCode","document","getElementById","saveButton","ButtonActions","NavigateNext","Badge","badgeContent","invisible","NavigateBefore","ContenidoModal","fetchPolicy","PreciosDeVentaCompras","numero","RenderPrecios","setPrecioNeto","copy_preciosVenta","preciosVenta_base","calculosCompra","DescuentosInputs","impuesto_actual","PCSI_actual","round","subtotal_con_descuento","obtenerPrecio","obtenerPorcentaje","ClienteCtx","ClienteProvider","estado_cliente","cliente","setCliente","updateClientVenta","setUpdateClientVenta","RegistrarInfoBasica","numero_cliente","nombre_cliente","representante","clave_cliente","fecha_nacimiento","RegistrarInfoCredito","razon_social","numero_descuento","limite_credito","dias_credito","banco","numero_cuenta","CREAR_CLIENTE","OBTENER_CLIENTES","ACTUALIZAR_CLIENTE","ELIMINAR_CLIENTE","CrearCliente","fromCompras","handleClickOpen","crearCliente","actualizarCliente","copy_cliente","tipo_cliente","clienteBase","venta_actual","subTotal","venta_cliente","CREAR_COMPRA","CREAR_COMPRA_ESPERA","OBTENER_COMPRAS_REALIZADAS","OBTENER_COMPRAS_ESPERA","OBTENER_CONSULTA_GENERAL_PRODUCTO","ELIMINAR_COMPRA_ESPERA","initial_state_datosProducto","initial_state_datosCompra","initial_state_precios_venta","initial_state_productoOriginal","initial_state_productosCompra","DatosProveedorAlmacen","obtenerProveedorAlmacen","id_proveedor","errorRender","loadingRender","obtenerConsultaGeneralCompras","proveedores","MostrarPrecios","cantida_suma","DatosProducto","count","setCargando","client","useApolloClient","setData","query","COSTO","CANTIDAD","nuevo_iva","nuevo_impuesto","obtenerCosto","obtenerCantidad","obtenerProductos","obtenerSelectsProducto","obtenerUnidadRegalo","actualizar_Precios","copy_datosProducto","copy_datosGenerales","copy_precios","copy_preciosP","copy_almacenInicial","copy_centroCostos","copy_presentacionesEliminadas","copy_precioPlazos","nueva","factor","cantidad_total_media","cantidad_regalo_media","productosCompra_ordenados","existente","prod_exist","Boolean","array_ordenado","ModalAgregarCompra","InfoOutlined","SetOrResetData","setStates","ListaCompras","productos_ordernados","RenderProductosCompra","isSelected","setIsSelected","productoCTX","seStates","unidad_producto","tabIndex","finish","ModalDeleteProducto","copy_compras","objeto_eliminado","ConfirmarCompra","realizarCompraBD","loading_modal","setLoadingModal","credito","setCredito","productos_recalculados","setProductosRecalculados","initial_state_descuento","descuento_base","setDescuentoBase","InputLabel","datos_descuento","productos_array","subtotal_actual","cantidad_descontada_product","recalcularPrecios","AbrirCompra","compra","handleOpenDetalles","refetchEspera","ModalCompra","openDelete","setOpenDelete","crearCompra","crearCompraEnEspera","compra_en_espera","descuento_compra","productos_con_descuento","conflicto","handleToggleDelete","Timer","CancelarCompra","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","ExportarProductosComprasExcel","compra_realizada","productos_detalles","Cantidad_regalo","CloudDownloadOutlined","filename","DatosDeCompra","productosFiltrados","setProductosFiltrados","toLowerCase","marginRight","placeholder","ListaProductos","obtenerComprasRealizadas","RenderRowsCompras","DetallesCompra","handleOpen","AssignmentOutlined","ExportarComprasExcel","filtro","filtroFecha","nombre_documento","since","ComprasRealizadas","ContentDialogCompras","setFiltro","setFiltroFecha","searchfilter","filterDate","obtenerBusqueda","subtract","obtenerFecha","onDelete","current","VerificarProductosCompras","nuevoArray","setNuevoArray","setVerificado","setSuccess","VerifiedUser","ModalVerificacion","loadingVerificacion","setLoadingVerificacion","useLazyQuery","getQuery","productos_nuevos","copy_producto_compra","productos_filtrados","precios_base","unidades_base","presentaciones_base","u_default","u_default_base","present","y","present_base","nuevo_producto_compra","total_con_descuento","setTimeout","verificarProductos","compra_temp","setCompraTemp","permisosUsuario","verificado","paddingTop","paddingBottom","ModalEliminarCompra","eliminarCompraEnEspera","eliminarCompra","DeleteOutlined","ListaEnEspera","obtenerComprasEnEspera","elimina","RenderRowsComprasEspera","ModalContinuarCompra","ComprasEnEspera","ListaClientes","selectDataClient","showModal","setShowModal","dataSelectRowClient","setDataSelectRowClient","handleClickOpenModal","obtenerClientes","row","handleClickSelectClient","RowsRender","cambiarEstado","Switch","EliminarCliente","eliminarCliente","eliminarClienteBD","paddingLeft","Cliente","InputBase","onKeyPress","defaultValue","REGISTRAR_DESCUENTOS","DESACTIVAR_DESCUENTOS","ELIMINAR_DESCUENTOS","headCells","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","datosPrecios","variable","indeterminate","headCell","numeric","disablePadding","TablaPreciosDescuentos","setCleanList","cleanList","verificarDatos","setPrecioPrueba","page","rowsPerPage","handleClick","indexOf","newSelected","concat","slice","emptyRows","newSelecteds","n","isItemSelected","colSpan","openModal","setOpenModal","DesactivarDescuentoUnidad","ELiminarDescuentoUnidad","handleChangeActivo","editarDatos","handleDelete","resultado","eliminarDescuentoUnidad","defaultChecked","Modal","avatarGroup","rootSlice","rootTable","DescuentoProductos","CrearDescuentoUnidad","openDescuento","setOpenDescuento","precioPrueba","handleCloseDescuentos","cerrarModal","arrayDescuento","descuentos","eliminado","textAlign","dislay","gutterBottom","justifyItems","Slider","getAriaValueText","valueLabelDisplay","valorText","obtenerPrecioText","EliminarProducto","eliminarProducto","handleToggleModal","eliminarProductoBD","RenderTableRows","cantidad_existente","unidad_inventario","ProdcutosEliminados","productosActivosRefetch","handleModalToggle","RestoreFromTrash","TablaProductosEliminados","obtenerProductosInactivos","RenderProductosTabla","activarProducto","handleDeleteToggle","reactivarProducto","Publish","Productos","RegistroComponent","existencias","setExistencias","ArrowBack","ProductoIndex","TablaTallas","eliminarTalla","resp","msgAlert","dato","RegistroTallas","loading_bd","setLoadingBD","actualizarTalla","obtenerTallas","guardarDatosBD","talla_actualizada","DescripcionCatalogo","texto","active","setActive","Tallas","OBTENER_CONTABILIDAD","REGISTRAR_CONTABILIDAD","ACTUALIZAR_CONTABILIDAD","ELIMINAR_CONTABILIDAD","TablaServicios","setIdService","idService","setAccion","updateData","obtenerContabilidad","EliminarContabilidad","nombre_servicio","RegistroServicios","setUpdateData","CrearContabilidad","ActualizarContabilidad","handleSubmit","inputActualizado","Contabilidad","columns","TablaProveedores","column","Proveedores","ProveedoresComponent","CREAR_CAJA","OBTENER_CAJAS","CREAR_HISTORIAL_CAJA","OBTENER_HISTORIAL_CAJA","ELIMINAR_CAJA","OBTENER_PRE_CORTE_CAJA","OBTENER_CORTES_CAJA","OBTENER_CORTE_CAJA","TablaCajas","obtenerCajasSucursal","permisos","numero_caja","StyledBadge","withStyles","badge","boxShadow","left","animation","content","transform","RowCajasRender","styleProps","activa","overlap","EliminarCajasModal","eliminarCaja","deleteCaja","RegistroCajas","crearCaja","nuevaCaja","usuario_creador","numero_usuario_creador","nombre_usuario_creador","Cajas","ListaUsuarios","Usuarios","CreateDepartamentosContext","DepartamentosProvider","idDepartamento","setIdDepartamento","TablaDepartamentos","obtenerDepartamentos","ListaDepartamentosRender","DeleteDepartamento","eliminarDepartamento","RegistroDepartamentos","ActualzarDepartamentos","Departamentos","fade","secondary","RegistroCategorias","setCategoria","toUpdateID","setToUpdateID","loadingBackDrop","setLoadingBackDrop","actualizarCategoria","guardarCategoria","categoriaActualizada","render_categorias","obtenerCategorias","RenderCategorias","setSubcategoria","actualizarSubcategoria","render_subcategorias","guardarSubcategoria","subCategoriaActualizada","idSubcategoria","Accordion","AccordionSummary","expandIcon","ExpandMore","stopPropagation","scrollTo","AccordionDetails","RenderSubcategorias","px","ModalEliminar","eliminarCategoria","eliminarSubcategoria","Categorias","TablaColores","eliminarColor","RegistroColores","error_data","loading_data","actualizarColor","msg","borderColor","ListaMarcas","obtenerMarcas","eliminarMarca","CreateMarcasContext","MarcasProvider","datosMarcas","setDatosMarcas","VistaMarcas","actualizarMarca","Marcas","RegistroCentroCostos","setCuenta","actualizarCuenta","render_cuentas","obtenerCuentas","guardarCuenta","cuentaActualizada","RenderCuentas","setSubcuenta","eliminarCuenta","actualizarSubcuenta","render_subcuentas","guardarSubcuenta","subCuentaActualizada","idSubcuenta","deleteCuenta","RenderSubcuentas","eliminarSubcuenta","deleteSubCuenta","idSubCuenta","OBTENER_CONCEPTOS_ALMACEN","REGISTRAR_CONCEPTO_ALMACEN","ACTUALIZAR_CONCEPTO_ALMACEN","ELIMINAR_CONCEPTO_ALMACEN","TablaConceptos","setIdConcepto","idConcepto","obtenerConcepto","EliminarConceptoAlmacen","obtenerConceptosAlmacen","nombre_concepto","destino","editable","formControl","MenuProps","PaperProps","ITEM_HEIGHT","tipos","getStyles","tipoName","typography","fontWeightRegular","fontWeightMedium","crearConceptoAlmacen","actualizarConceptoAlmacen","ConceptosAlmacen","alignSelf","TesoreriaCtx","TesoreriaProvider","cuentas","setCuentas","reload","setReload","formComboBox","RetiroDeposito","turnoEnCurso","CrearMovimientoCuenta","datosMovimiento","setDatosMovimiento","onChangeDatos","tipo_movimiento","id_usuario","rol_movimiento","id_Caja","id_caja","horario_turno","concepto","hora_moviento","hora","minutos","segundos","completa","fecha_movimiento","mes","dia","no_semana_year","week","no_dia_year","dayOfYear","montos_en_caja","monto_efectivo","monto","metodo_pago","monto_tarjeta_debito","monto_tarjeta_credito","monto_creditos","monto_monedero","monto_transferencia","monto_cheques","monto_vales_despensa","comentarios","enviarDatos","movimiento","crearMovimientoCuenta","rows","rootBusqueda","HistorialCuentas","datosFiltro","setDatosFiltro","fecha_inicio","fecha_fin","historialCuenta","obtenerHistorialCuenta","RowsHistorial","ListaCuentas","cuentaEmpresa","cuentasSucursalesEmpresa","cuentaPrincipal","obtenerSucursalesEmpresa","cuenta_empresa","dinero_actual","RowsCuentas","cuenta_sucursal","buttons","CuentasEmpresaSucursales","OBTENER_HISTORIAL_EGRESOS","CREAR_EGRESO","TablaProductosEgresos","borrarProducto","setPage","setRowsPerPage","RowsProductos","TablePagination","rowsPerPageOptions","onPageChange","newPage","onRowsPerPageChange","cantidad_productos","precio_unitario","FormRegistroEgresos","CrearEgreso","upload","setUpload","datosEgreso","setDatosEgreso","totalCompra","setTotalCompra","subCuentas","setSubCuentas","setProducto","obtenerDatoProductos","totalCompraVenta","folio_egreso","folio_factura","empresa_distribuidora","provedor","subCategoria","fecha_compra","fecha_vencimiento","fecha_vencimiento0","observaciones","id_user","saldo_total","egreso","crearEgreso","GenFolio","InputLabelProps","shrink","obtenerSubCuentas","subCuenta","producto_guardado","elemento","indice","iconSize","info","VistaRegistroEgreso","iconSizeSecond","Egresos","TablaCompras","OBTENER_HISTORIAL_ABONOS","CREAR_ABONO","TablaAbonos","id_cliente","id_egreso","id_compra","abonos","obtenerHistorialAbonos","monto_total_abonado","AbonoaRecibir","CrearAbono","abono","setAbono","setMetodoPago","metodo_de_pago","clave","metodo","telefono_cliente","email_cliente","alignContent","DetallesCuenta","LiquidarCuenta","cuentaTotalDescuento","setCuentaTotalDescuento","setDineroDescontado","porciento_descuento","valueLabelFormat","cuenta_con_descuento","cuentaSelect","clearTimeout","timer","TwoClickInRowTableBuy","rootSearch","AbonosProveedores","toLocaleString","createData","code","population","density","onChangePage","onChangeRowsPerPage","ToggleButtonGroup","exclusive","calories","fat","carbs","protein","scope","AbonosClientes","IndexTesoreria","FacturacionCtx","FacturacionProvider","serie","currency","expedition_place","folio","cfdi_type","payment_form","payment_method","logo_url","date","issuer","FiscalRegime","Rfc","receiver","CfdiUse","items","datosFactura","setDatosFactura","venta_factura","setVentaFactura","cp_valido","setCPValido","setCodigoPostal","error_validation","ProductosSinClaveSat","CONSULTA_PRODUCTO_UNITARIO","CONSULTA_PRODUCTOS_VENTAS","OBTENER_CLIENTES_VENTAS","CREAR_VENTA","OBTENER_VENTAS_SUCURSAL","ListaVentasFactura","ComponentBusquedaVenta","open_productos","setOpenProductos","productos_sin_clave","setProductosSinClave","resultado_ventas","openProductosClaves","RenderLista","obtenerVentasSucursal","without_sat_code","productos_base","obtenerVenta","CodigoPostal","CP","obtenerCodigoPostal","Fragment","ListaClientesFacturas","BuscadorClienteComponent","openAlertRfc","setOpenAlertRfc","resultado_clientes","handleCloseAlertRFC","openAlertRFC","RenderListClientes","minwidth","obtenerClienteTabla","RegistroFactura","serie_default","ModificarProductoFactura","producto_base","setProductoBase","venta_base","setVentaBase","cantidad_base","precio_base","venta_copy","resta_base","suma_nuevo","precios_nuevos","impuestos_precio","copy_array_productos","guardarPrecios","EliminarProductoFactura","copy_venta","copy_productos","precio_resta","DetallesFactura","RowTableProductos","factura_initial_state","RealizarFactura","setProductosFactura","CrearFactura","crearFactura","nuevo_obj","Taxes","Total","Base","Rate","IsRetention","ProductCode","IdentificationNumber","Description","UnitCode","UnitPrice","Quantity","Subtotal","Discount","InputsFacturaModal","CancelarFactura","handleCloseFactura","cancelar","NuevaFactura","DialogFacturaPrincipal","openCancel","setOpenCancel","cancelarCFDI","FacturaModalContent","seriesCfdi","obtenerSeriesCdfi","RegistroSeries","crearSerieCFDI","obtenerDatosSeries","ListaSeriesCDFI","modificarDefaultSerie","setPredeterminado","ModalDeleteSerie","eliminarSerie","eliminarSerieBD","SeriesCDFI","ContentSeriesCFDI","ExportarProductosFacturaExcel","ListaFacturas","heigth","ListaAlmacen","RegistroAlmacen","TraspasosAlmacenContext","TraspasosProvider","productosTo","setProductosTo","productosEmpTo","setProductosEmpTo","productosTras","setProductosTras","dataExcel","setDataExcel","productoData","setNew_medidas","nuevaCantidad","medidas_registradas","new_medidas","presentaciones_existentes","paddingRight","cell","idProducto","cantidadAnt","copy_medida","product_selected","new_medidasCopia","med","Object","hasOwnProperty","call","cant","order","orderBy","onRequestSort","headCellsNames","add","sortDirection","TableSortLabel","useToolbarStyles","inputCantidad","inputCantidadTable","highlight","lighten","light","text","dark","flexWrap","DialogTallas","close","setOpenTallas","setproduct_selected","prod","openTallas","almacenOrigen","newMedidasCopy","prodSelect","existe","copyProductosTras","medidasTo","newMed","obj","EnhancedTableToolbar","cantidadTo","setCantidadTo","openEnd","setOpenEnd","tipoPieza","setValueToTrans","mensaje","find","totalCantExistMasNuevaCantidad","piezas","cantidad_existente_maxima","unidadMaxima","TipoPiezaComponent","TIPO_PIEZA","unidad_minima","clsx","intValue","onlyNumbers","deletesItems","EnhancedTable","setOrder","setOrderBy","setCant","setTipoPieza","haveCant","rowSelected","handleSelectAllClick","prod_sel","editItem","prodSet","deleteItem","boxUpData","selected2","inputBox","boxControl","centerControl","almacenName","transportes","steps","Traspasos","haveConcepto","setHaveConcepto","conceptoTraspaso","setConceptoTraspaso","isAlmacenOrigen","setIsAlmacenOrigen","isAlmacenDestino","setIsAlmacenDestino","setAlmacenOrigen","almacenDestino","setAlmacenDestino","almacenesDestino","setAlmacenesDestino","transporte","setTransporte","placas","setPlacas","nombreQuien","setNombreQuien","activeStep","setActiveStep","Set","skipped","setSkipped","CrearTraspaso","conceptos","queryObtenerAlmacenes","dataConceptos","categoriasQuery","productosQuery","productosEmpresaQuery","obtenerProductosAlmacen","obtenerProductosEmpresa","obtenerProductosPorEmpresa","isStepSkipped","step","has","handleBack","prevActiveStep","traspasar","concepto_traspaso","almacen_origen","almacen_destino","datos_transporte","nombre_encargado","sucursalOrigen","sucursalDestino","traspaso","crearTraspaso","sx","almacenIcon","Stepper","stepProps","completed","Step","StepLabel","trans","pt","newSkipped","delete","handleNext","Rowrow","rowProps","dataExcelHere","setDataExcelHere","arrayCantidades","font","sz","alignment","wrapText","bottom","rgb","setRow","setTotal","setUnidad_Minima","tot","r","datExc","almacenColumna","existencia_almacenes","productosLength","ListaAlmacenes","withRouter","fileName","columnName","InventariosPorAlmacen","productosAlmacenQuery","InventarioPorAlmacen","setObtenerAlmacenes","setColumns","obtenerProductosAlmacenes","columnsEffect","widthPx","almace","mrstyle","TablaHistorialFiltrado","historial","iconSave","right","HistorialCaja","datosBuscar","setDatosBuscar","datosExcel","obtenerHistorialCaja","cajaSelected","fecha_incio","arrayExcel","datosHistorial","hora_movimiento","caja","agruparDatos","handleDatos","media","expand","transition","transitions","create","duration","shortest","expandOpen","red","textActive","CardCaja","Card","CardHeader","openHistorial","setOpenHistorial","setCajaSelected","handleClickOpenHistorial","cantidad_efectivo_actual","fetchCajas","TablaTurnosFiltrados","turnos","turno","hora_entrada","hora_salida","usuario_en_turno","horario_en_turno","REGISTRAR_TURNOS","OBTENER_HISTORIAL_TURNOS","ReportesTurnosUsuarios","FiltroTablaTurnos","filtros","setFiltros","historialTurnos","fechaInicio","fechaFin","fecha_entrada","fecha_salida","obtenerFiltroTurnos","TablaComprasFiltradas","OBTENER_REPORTE_COMPRAS","ExportarCompras","forma","FiltrosCompras","obtenerProductoMovimientos","CapturaDeDatos","obtenerCamposFiltro","realizarBusquedaBD","ClearOutlined","ReportesCompras","TablaVentasFiltradas","ReportesVentas","ExportarTraspasos","id_traspaso","TablaAlmacenFiltradas","ReportesAlmacen","fecha_final","inputFilter","setFilter","encargado","setEncargado","queryObtenerUsuarios","traspasosAlmacenes","setDatosInput","fil","obtenerTraspasos","enc","almDes","almOri","encId","setEncargadoInput","alm","setQueryAlmacenOrigen","setQueryAlmacenDestino","filt","limpiarFiltros","TablaCortesFiltradas","cortes","corte","token_turno_user","number_user","obtenerCorte","montos_sistema","obtenerCorteCaja","montos_en_sistema","InformacionCorteCaja","ExportExcel","historialCortes","setDatosExcel","ReportesCortes","cajasBase","fecha_consulta","obtenerCortesDeCaja","ListaEgresos","historialEgresos","obtenerHistorialEgresos","RowsEgresos","DialogCaracteristicas","ListaTransferencias","ReportesTesoreria","ventana","setVentana","anchorEl","setAnchorEl","currentTarget","Menu","ListItemIcon","iconSvgVenta","history","axis","onChangeIndex","appbar","navbar","grey","menuButton","token","removeItem","flexShrink","drawerColor","drawerPaper","navigationTop","iconSizeSuperior","iconSizeSecondSuperior","iconSizeInferior","iconSizeSecondInferior","iconSizeSecondInferiorGrande","iconSizeInferiorGrande","borderBoton","borderBotonChico","rootPrecioProductos","containerImage","rootBusquedaProductos","rootFecha","iconSizeDialogs","iconSizeDialogsPequeno","containerImagenesProducto","imagenProducto","VentasContext","VentasProvider","DatosVentasActual","setDatosVentasActual","datosProductoVentas","setDatosProductoVentas","setProductosVentas","datosVentas","setDatosVentas","productoCambioPrecio","setProductoCambioPrecio","precioSelectProductoVenta","setPrecioSelectProductoVenta","clientesVentas","setClientesVentas","turnoActivo","setTurnoActivo","ubicacionTurno","setUbicacionTurno","abrirTurnosDialog","setAbrirTurnosDialog","updateTablaVentas","setUpdateTablaVentas","openBackDrop","setOpenBackDrop","DepositoRetiroCaja","CrearHistorialCaja","preCorteDeCaja","dineroEnCaja","obtenerPreCorteCaja","monto_efectivo_precorte","addEventListener","altKey","id_User","RadioGroup","Radio","ComponenteSinConexion","CrearRegistroDeTurno","montoTurno","setMontoTurno","cerrarTurno","setCerrarTurno","obtenerCamposMontos","monto_puntos","arraySesion","exp","iat","actualizarTurnoSesion","Turnos","AccesosContext","AccesosProvider","abrirPanelAcceso","setAbrirPanelAcceso","tipo_acceso","setDepartamentos","reloadAdministrador","setReloadAdministrador","reloadProductoRapido","setReloadProductoRapido","reloadCancelarVenta","setReloadCancelarVenta","reloadVerPrecios","setReloadVerPrecios","reloadVerPreCorte","setReloadVerPreCorte","reloadEliminarVentaEspera","setReloadEliminarVentaEspera","reloadCrearCotizacion","setReloadCrearCotizacion","PreCorteCaja","VentaEnEspera","agregarVentaEnEspera","datosVenta","RegistroInformacionRapido","setAbrirTallaColor","varIVA","varIEPS","TallasColoresRapidos","Acceso","datosUser","setDatosUser","handleClickClose","obtenerQuery","obtenerAccesoPermiso","permiso_concedido","SwitchPermisos","ArticuloRapido","crearProductoRapido","abrirTallaColor","AceesoProductoRapido","ProductoRapidoIndex","CotizacionesPendientes","CotizacionesRows","ListaCotizaciones","BottomNavigation","Abonos","productosBusqueda","setProductoSeleccionado","InformacionProducto","productoSeleccionado","BuscarProducto","searchProducto","setSearchProducto","granelBase","setGranelBase","obtenerProductosVentas","agregarProductos","venta_existente","productosVentasTemp","CalculosData","producto_encontrado","productoPrecioFinal","new_prices","iva_total_producto","ieps_total_producto","impuestos_total_producto","subtotal_total_producto","total_total_producto","verify_prising","calculo_resta","calculo_sumar","ClientesVentas","CREAR_COTIZACION","NuevaCotizacion","CrearCotizacion","newCotizacion","setNewCotizacion","descuento_general","totalDescount","setTotalDescount","tipo_venta","descuento_general_activo","decuento_general","dias_de_credito_venta","fecha_de_vencimiento_credito","fecha_vencimiento_cotizacion","crearCotizacion","registroCotizacion","errors","cantidad_descontado","Cotizacion","tipoVentana","setTipoVentana","CancelarVenta","CerrarVenta","cambio","setCambio","openModalDescuento","setOpenModalDescuento","recalcular","setRecalcular","totalVenta","setTotalVenta","montoPagado","setMontoPagado","cambioVenta","setCambioVenta","datosCliente","setDatosCliente","setMonedero","descuentoVenta","fechaVencimientoDate","setfechaVencimientoDate","valorPuntoProducto","setValorPuntoProducto","valorFinalCambioPuntos","monederoTotal","setMonederoTotal","ventaActual","setVentaActual","editableClient","setEditableClient","visible","setVisible","descuentoAplicarVenta","setDescuentoAplicarVenta","descuentoPorsentajeVenta","setDescuentoPorsentajeVenta","setVentaOriginal","creditoActivo","setCreditoActivo","efectivo","setEfectivo","tarjeta","setTarjeta","puntos","setPuntos","transferencia","setTransferencia","cheque","setCheque","createVenta","handleClickFinishVenta","ventaFinal","montosEnCaja","editar_cliente","puntos_totales_venta","handlerChangeValue","location","valor2","monederoVenta","credito_disponible","modelDate","hoy","diasDiff","diff","pr","positiveDiscount","abs","handlerChangeDiscountVenta","ventaSubtotal","val","handleChangePorsentDiscount","productosFinal","productStorage","product","porsentajeNewDescuento","dineroDescontadoDescuento","newPrecioVentaProduct","newIvaProduct","newIepsProduct","newPrecioNetoProduct","newUtilidadProduct","valorGranel","descuentoProducto","handleCalculateNewDiscountVenta","ConsultarPrecio","activeItemIndex","setActiveItemIndex","productoBase","obtenerUnProductoVentas","keyUpEvent","input_value","datosProductos","displa","onKeyUp","requestToChangeActive","numberOfCards","leftChevron","rightChevron","infiniteLoop","outsideChevron","chevronWidth","PreciosProductos","selectPrisingProduct","setSelectPrisingProduct","handleAceptChangePrising","newProductoPrecioNuevo","newProductoPrecioActual","new_resta","new_suma","doubleClick","ListaVentas","listaEnEspera","RowsVentas","keyIndex","setKeyIndex","borrarVenta","VentasEspera","ListaVentasRealizadas","VentasRealizadas","NavegacionVentasLateral","setNewProductoVentas","newProductoVentas","datosTabla","setDatosTabla","newCantidadProduct","setNewCantidadProduct","tempAmount","setTempAmount","CalculeDataPricing","new_cant","newPrising","precio_actual_porducto","calculateNewPricingAmount","clear","selectClient","setSelectClient","obtenerClientesVentas","dataCliente","ChangeClientAutocomplate","VentasGenerales","consultaBase","setConsultaBase","productosBase","trim","data_operation","data_key","justifySelf","elevantion","AbrirTurno","abrirTurno","setAbrirTurno","numeroCaja","setNumeroCaja","obtenerTurno","turno_en_curso","caja_elegida","monto_abrir","variableTurnoAbierto","crearRegistroDeTurno","VentaIndex","varActive","setVarActive","AbrirTurnoEnVentas","LayoutWithProvider","NavDataCajaUsers","Administrador","srsc","Settings","routes","logearUsuario","signin","decoded","jwt_decode","labelWidth","exact","logo","Link","to","adminIcon","cartIcon","AdminInicio","createTheme","blue","httpLink","createUploadLink","uri","ApolloClient","connectToDevTools","cache","InMemoryCache","addTypename","link","RoutesWithSubRoutes","route","render","App","CssBaseline","ApolloProvider","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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","file":"static/js/main.a9f1a231.chunk.js","sourcesContent":["import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_USUARIO = gql`\r\n\tmutation crearUsuario($input: CrearUsuarioInput) {\r\n\t\tcrearUsuario(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tturno_en_caja_activo\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_USUARIOS = gql`\r\n\tquery obtenerUsuarios($sucursal: String!, $filtro: String) {\r\n\t\tobtenerUsuarios(sucursal: $sucursal, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\tturno_en_caja_activo\r\n\t\t\temail\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_USUARIO = gql`\r\n\tmutation actualizarUsuario($input: ActualizarUsuarioInput, $id: ID!) {\r\n\t\tactualizarUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO = gql`\r\n\tmutation logearUsuario($input: LogearUsuarioInput) {\r\n\t\tlogearUsuario(input: $input) {\r\n\t\t\ttoken\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO_ACCESOS = gql`\r\n\tquery ObtenerAccesoPermiso($input: ObtenerAccesoPermisosInput) {\r\n\t\tobtenerAccesoPermiso(input: $input) {\r\n\t\t\tpermiso_concedido\r\n\t\t\tdepartamento\r\n        \tsubDepartamento\r\n\t\t}\r\n\t}\t\t\r\n`;\r\n\r\nexport const AGIGNAR_PERMISOS_USUARIO = gql`\r\n\tmutation asignarAccesosUsuario($input: CrearArregloDeAccesosInput, $id: ID!) {\r\n\t\tasignarAccesosUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n}\r\n`;","import { Box, makeStyles, Snackbar, Typography, Portal } from '@material-ui/core';\r\n/* import { Alert } from '@material-ui/lab'; */\r\nimport React from 'react';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\n\r\nexport default function SnackBarMessages({ alert, setAlert }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAlert({ open: false, status: alert.status, message: '' });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Portal>\r\n\t\t\t<Snackbar\r\n\t\t\t\tclassName={classes.snack}\r\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\t\topen={alert.open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t{alert.status === 'success' ? (\r\n\t\t\t\t\t\t\t<CheckCircleIcon style={{ color: '#22bb33' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ErrorIcon style={{ color: 'red' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box mr={1} />\r\n\t\t\t\t\t\t<Typography>{alert.message}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Portal>\r\n\t);\r\n\t/* return (\r\n\t\t<Snackbar\r\n\t\t\tclassName={classes.snack}\r\n\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\topen={alert.open}\r\n\t\t\tonClose={handleClose}\r\n\t\t\tautoHideDuration={2000}\r\n\t\t>\r\n\t\t\t<Alert onClose={handleClose} severity={alert.status}>\r\n\t\t\t\t{alert.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t); */\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Container, TextField, Typography, CircularProgress } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGEAR_USUARIO } from '../../gql/Catalogos/usuarios';\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { FormControl } from '@material-ui/core';\r\nimport { InputLabel } from '@material-ui/core';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport { InputAdornment } from '@material-ui/core';\r\nimport { IconButton } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport ab from '../../img/abLogo.jpeg'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tmargin: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcontainerImagen:{\r\n\t\tmaxWidth: 170,\r\n\t\tmaxHeight: 170\r\n\t},\r\n\timagen:{\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t}\r\n}));\r\n\r\nexport default function LayoutLogin(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = localStorage.getItem('sesionCafi');\r\n\tconst [ datos, setDatos ] = useState([]);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\r\n\tif (sesion) props.history.push('/ventas/venta-general');\r\n\r\n\tconst [ logearUsuario ] = useMutation(LOGEAR_USUARIO);\r\n\r\n\tconst signin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!datos.numero_usuario || !datos.password) {\r\n\t\t\tsetAlert({ message: 'Los campos estan vacíos', status: 'error', open: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await logearUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: datos\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst { token } = result.data.logearUsuario;\r\n\t\t\tconst decoded = jwt_decode(token);\r\n\t\t\tsetLoading(false);\r\n\t\t\tlocalStorage.setItem('sesionCafi', JSON.stringify(decoded));\r\n\t\t\tlocalStorage.setItem('tokenCafi', JSON.stringify(token));\r\n\t\t\tprops.history.push('/ventas/venta-general');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tif (e.target.name === 'numero_usuario') {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: parseInt(e.target.value)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: e.target.value\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickShowPassword = () => {\r\n\t\tsetShowPassword(!showPassword);\r\n\t};\r\n\r\n\tconst handleMouseDownPassword = (event) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"sm\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Box height=\"100vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t<Box boxShadow=\"3\" p={3} width=\"80%\">\r\n\t\t\t\t\t<Box display='flex' justifyContent='center' alignItems='center' justifyItems='center' >\r\n\t\t\t\t\t\t<Box className={classes.containerImagen} textAlign='center'>\r\n\t\t\t\t\t\t\t<img className={classes.imagen} src={ab} alt=\"imagen no disponible\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display='flex' textAlign='center' justifyContent='center'>\r\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"p\" className={classes.margin}>\r\n\t\t\t\t\t\t\t<b>Inicia sesión</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<form autoComplete=\"off\" onSubmit={signin} >\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Numero de usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tname=\"numero_usuario\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<FormControl variant=\"outlined\" name=\"password\" className={classes.margin} fullWidth>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor=\"usuario-password\">Contraseña</InputLabel>\r\n\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tid=\"usuario-password\"\r\n\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabelWidth={70}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tendIcon={loading ? <CircularProgress size={25} color=\"inherit\" /> : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tEntrar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","export const initial_state_datos_generales = {\r\n  receta_farmacia: false,\r\n  clave_producto_sat: {\r\n    Name: \"\",\r\n    Value: \"\",\r\n  },\r\n};\r\nexport const initial_state_precios = {\r\n  monedero: false,\r\n  monedero_electronico: 0,\r\n  iva_activo: true,\r\n  ieps_activo: false,\r\n  ieps: 0,\r\n  iva: 16,\r\n  granel: false,\r\n  inventario: {\r\n    inventario_minimo: 0,\r\n    inventario_maximo: 0,\r\n    unidad_de_inventario: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n  },\r\n  precio_de_compra: {\r\n    precio_con_impuesto: 0,\r\n    precio_sin_impuesto: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n  },\r\n  unidad_de_compra: {\r\n    unidad: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n    cantidad: 1,\r\n    precio_unitario_sin_impuesto: 0,\r\n    precio_unitario_con_impuesto: 0,\r\n  },\r\n};\r\n\r\nexport const initial_state_unidadVentaXDefecto = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Pz\",\r\n  codigo_unidad: \"H87\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: true,\r\n  default: true,\r\n};\r\n\r\nexport const initial_state_unidadVentaSecundaria = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Caja\",\r\n  codigo_unidad: \"XBX\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: false,\r\n  default: false,\r\n};\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_unidadesVenta = [\r\n  \r\n];\r\n\r\nexport const initial_state_almacen_inicial = {\r\n  id_almacen: \"\",\r\n  almacen: \"\",\r\n  cantidad: 0,\r\n  fecha_de_expiracion: \"\",\r\n};\r\nexport const initial_state_centro_de_costos = {};\r\n\r\nexport const initial_state_preciosPlazos = {\r\n  precio_piezas: [],\r\n  precio_cajas: [],\r\n  precio_costales: [],\r\n};\r\n\r\nexport const initial_state_subcategorias = [];\r\nexport const initial_state_imagenes = [];\r\nexport const initial_state_imagenes_eliminadas = [];\r\nexport const initial_state_onPreview = { index: \"\", image: \"\" };\r\nexport const initial_state_validacion = { error: false, message: \"\" };\r\nexport const initial_state_subcostos = [];\r\nexport const initial_state_selectedDate = null;\r\nexport const initial_state_presentaciones = [];\r\n","import React, { createContext, useState } from \"react\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_preciosP,\r\n  initial_state_unidadesVenta,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_subcategorias,\r\n  initial_state_imagenes,\r\n  initial_state_imagenes_eliminadas,\r\n  initial_state_onPreview,\r\n  initial_state_validacion,\r\n  initial_state_subcostos,\r\n  initial_state_selectedDate,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"./initialStatesProducto\";\r\n\r\nexport const RegProductoContext = createContext();\r\n\r\nexport const RegProductoProvider = ({ children }) => {\r\n  const [datos_generales, setDatosGenerales] = useState(\r\n    initial_state_datos_generales\r\n  );\r\n  const [precios, setPrecios] = useState(initial_state_precios);\r\n  const [unidadVentaXDefecto, setUnidadVentaXDefecto] = useState(\r\n    initial_state_unidadVentaXDefecto\r\n  );\r\n  const [unidadVentaSecundaria, setUnidadVentaSecundaria] = useState(\r\n    initial_state_unidadVentaSecundaria\r\n  );\r\n  const [preciosP, setPreciosP] = useState(initial_state_preciosP);\r\n  \r\n  const [unidadesVenta, setUnidadesVenta] = useState(\r\n    initial_state_unidadesVenta\r\n  );\r\n  const [almacen_inicial, setAlmacenInicial] = useState(\r\n    initial_state_almacen_inicial\r\n  );\r\n  const [centro_de_costos, setCentroDeCostos] = useState(\r\n    initial_state_centro_de_costos\r\n  );\r\n  const [preciosPlazos, setPreciosPlazos] = useState(\r\n    initial_state_preciosPlazos\r\n  );\r\n  const [subcategorias, setSubcategorias] = useState(\r\n    initial_state_subcategorias\r\n  );\r\n  const [imagenes, setImagenes] = useState(initial_state_imagenes);\r\n  const [imagenes_eliminadas, setImagenesEliminadas] = useState(\r\n    initial_state_imagenes_eliminadas\r\n  );\r\n  const [onPreview, setOnPreview] = useState(initial_state_onPreview);\r\n  const [validacion, setValidacion] = useState(initial_state_validacion);\r\n  const [subcostos, setSubcostos] = useState(initial_state_subcostos);\r\n  const [selectedDate, setSelectedDate] = useState(initial_state_selectedDate);\r\n  const [update, setUpdate] = useState(false);\r\n  const [presentaciones, setPresentaciones] = useState(\r\n    initial_state_presentaciones\r\n  );\r\n  const [presentaciones_eliminadas, setPresentacionesEliminadas] = useState([]);\r\n  const [actualizarLista, setActualizarLista] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // USESTATES DE DESCUENTOS DE PRODUCTOS\r\n  const [ datosPreciosProducto, setDatosPreciosProducto ] = useState([]);\r\n  const [ preciosDescuentos, setPreciosDescuentos] = useState([]);\r\n  const [ preciosProductos, setPreciosProductos ] = useState([]);\r\n  const [ datosEnDescuentos, setDatosEnDescuentos ] = useState([]);\r\n  const [ almacen_existente, setAlmacenExistente] = useState(false);\r\n\r\n  return (\r\n    <RegProductoContext.Provider\r\n      value={{\r\n        datos_generales,\r\n        setDatosGenerales,\r\n        precios,\r\n        setPrecios,\r\n        almacen_inicial,\r\n        setAlmacenInicial,\r\n        imagenes,\r\n        setImagenes,\r\n        imagenes_eliminadas,\r\n        setImagenesEliminadas,\r\n        onPreview,\r\n        setOnPreview,\r\n        validacion,\r\n        setValidacion,\r\n        preciosP,\r\n        setPreciosP,\r\n        preciosPlazos,\r\n        setPreciosPlazos,\r\n        unidadesVenta,\r\n        setUnidadesVenta,\r\n        centro_de_costos,\r\n        setCentroDeCostos,\r\n        unidadVentaXDefecto,\r\n        setUnidadVentaXDefecto,\r\n        subcategorias,\r\n        setSubcategorias,\r\n        subcostos,\r\n        setSubcostos,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        update,\r\n        setUpdate,\r\n        presentaciones,\r\n        setPresentaciones,\r\n        presentaciones_eliminadas,\r\n        setPresentacionesEliminadas,\r\n        actualizarLista,\r\n        setActualizarLista,\r\n        alert,\r\n        setAlert,\r\n\r\n        datosPreciosProducto, \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n        datosEnDescuentos, \r\n        setDatosEnDescuentos,\r\n        almacen_existente, \r\n        setAlmacenExistente,\r\n        unidadVentaSecundaria, \r\n        setUnidadVentaSecundaria\r\n      }}\r\n    >\r\n      {children}\r\n    </RegProductoContext.Provider>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const EmpresaContext = createContext();\r\n\r\nexport const EmpresaProvider = ({ children }) => {\r\n   \r\n\tconst [ empresa, setEmpresa ] = useState({\r\n\t\tnombre_empresa:'',\r\n        nombre_dueno:'',\r\n\t\ttelefono_dueno:'',\r\n\t\tcelular:'',\r\n\t\tcorreo_empresa:'',\r\n        nombre_fiscal:'',\r\n        rfc:'',\r\n        regimen_fiscal:'',\r\n        curp:'',\r\n        info_adicio:'',\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n        direccionFiscal: {\r\n            calle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n        },\r\n        datosBancarios:{\r\n            cuenta: '',\r\n            sucursal: '',\r\n            clave_banco: ''\r\n        },\r\n\t\timagen: null\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<EmpresaContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tempresa,\r\n\t\t\t\tsetEmpresa,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</EmpresaContext.Provider>\r\n\t);\r\n};","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\"\r\n  },\r\n}));\r\n\r\nexport default function BackdropComponent({loading, setLoading}) {\r\n  const classes = useStyles();\r\n\r\n  /* const handleClose = () => {\r\n    setLoading(false);\r\n  }; */\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={loading} /* onClick={handleClose} */>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorPage({ error, altura}) {\r\n\tlet height = altura\r\n\tif(!height) height = 400;\r\n\treturn (\r\n\t\t<Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height={height}>\r\n\t\t\t<ErrorOutlineIcon style={{ fontSize: 100, color: 'rgba(17,85,204, 0.7)' }} />\r\n\t\t\t<Typography align=\"center\" style={{ fontSize: 18, color: 'rgba(17,85,204)' }}>\r\n\t\t\t\tHubo un problema\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nexport const OBTENER_DATOS_EMPRESA = gql`\r\n  query obtenerEmpresa($id: ID!) {\r\n    obtenerEmpresa(id: $id) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_EMPRESA = gql`\r\n  mutation actualizarEmpresa($id: ID!, $input: EditarEmpresa) {\r\n    actualizarEmpresa(id: $id, input: $input) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Typography,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport default function MisDatos(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n   \r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { empresa, update, setEmpresa, setUpdate } = useContext(EmpresaContext);\r\n\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  const [empresaDatos, setEmpresaDatos] = useState({\r\n    nombre_empresa: \"\",\r\n    nombre_dueno: \"\",\r\n    telefono_dueno: \"\",\r\n    celular: \"\",\r\n    correo_empresa: \"\",\r\n    valor_puntos: \"\",\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    regimen_fiscal: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n    imagen: null,\r\n  });\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [update, refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaDatos({\r\n        nombre_empresa: empresa.nombre_empresa,\r\n        nombre_dueno: empresa.nombre_dueno,\r\n        telefono_dueno: empresa.telefono_dueno,\r\n        celular: empresa.celular,\r\n        valor_puntos: empresa.valor_puntos,\r\n        correo_empresa: empresa.correo_empresa,\r\n        direccion: empresa.direccion,\r\n        imagen: empresa.imagen,\r\n      });\r\n    } catch (errorCatch) {\r\n      // console.log(errorCatch)\r\n    }\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaDatos,\r\n        },\r\n      });\r\n      setUpdate(true);\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n \r\n  const obtenerCampos = (e) => {\r\n    try {\r\n      let valor = e.target.value;\r\n      if(e.target.name === 'valor_puntos'){ valor = parseFloat(valor)}\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        [e.target.name]: valor,\r\n      });\r\n    } catch (error) {\r\n      \r\n    }\r\n  \r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      direccion: { ...empresaDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    props.setOpen(false)\r\n  }\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [empresaDatos, setEmpresaDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n  \r\n  return (\r\n    <div>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={2}>\r\n                  <Box className={classes.avatarContainer} {...getRootProps()}>\r\n                    <input {...getInputProps()} />\r\n                    {preview ? (\r\n                      <Avatar className={classes.avatar} src={`${preview}`} />\r\n                    ) : (\r\n                      <Avatar\r\n                        className={classes.avatar}\r\n                        src={`${empresa.imagen}`}\r\n                      />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre de empresa</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_empresa}\r\n                      name=\"nombre_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_empresa\r\n                          ? empresaDatos.nombre_empresa\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre dueño</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_dueno}\r\n                      name=\"nombre_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_dueno\r\n                          ? empresaDatos.nombre_dueno\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Teléfono</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.telefono_dueno\r\n                          ? empresaDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Celular</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"celular\"\r\n                      variant=\"outlined\"\r\n                      value={empresaDatos.celular ? empresaDatos.celular : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>E-mail</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"correo_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.correo_empresa\r\n                          ? empresaDatos.correo_empresa\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                   <Box>\r\n                    <Typography><b>Valor de puntos</b></Typography>\r\n                    <TextField\r\n                      inputMode=\"numeric\"\r\n\t\t\t\t\t            type=\"number\"\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"valor_puntos\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.valor_puntos\r\n                          ? empresaDatos.valor_puntos\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio empresa</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.calle\r\n                          ? empresaDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_ext\r\n                          ? empresaDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_int\r\n                          ? empresaDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b> </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.codigo_postal\r\n                          ? empresaDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.colonia\r\n                          ? empresaDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.municipio\r\n                          ? empresaDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.localidad\r\n                          ? empresaDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.estado\r\n                          ? empresaDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.pais\r\n                          ? empresaDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n                <DialogActions style={{ marginTop:15,width:'100%',justifyContent: \"center\" }}>\r\n                    <Button onClick={handleClose} color=\"primary\">\r\n                    Cancelar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => actEmp()}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                  \r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </DialogActions>\r\n                )}\r\n            </Container>\r\n          )}\r\n       \r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport const usosCfdi = [\r\n  {\r\n    Value: \"G01\",\r\n    Name: \"Adquisición de mercancías\",\r\n  },\r\n  {\r\n    Value: \"G02\",\r\n    Name: \"Devoluciones, descuentos o bonificaciones\",\r\n  },\r\n  {\r\n    Value: \"G03\",\r\n    Name: \"Gastos en general\",\r\n  },\r\n  {\r\n    Value: \"I01\",\r\n    Name: \"Construcciones\",\r\n  },\r\n  {\r\n    Value: \"I02\",\r\n    Name: \"Mobiliario y equipo de oficina por inversiones\",\r\n  },\r\n  {\r\n    Value: \"I03\",\r\n    Name: \"Equipo de transporte\",\r\n  },\r\n  {\r\n    Value: \"I04\",\r\n    Name: \"Equipo de cómputo y accesorios\",\r\n  },\r\n  {\r\n    Value: \"I05\",\r\n    Name: \"Dados, troqueles, moldes, matrices y herramental\",\r\n  },\r\n  {\r\n    Value: \"I06\",\r\n    Name: \"Comunicaciones telefónicas\",\r\n  },\r\n  {\r\n    Value: \"I07\",\r\n    Name: \"Comunicaciones satelitales\",\r\n  },\r\n  {\r\n    Value: \"I08\",\r\n    Name: \"Otra maquinaria y equipo\",\r\n  },\r\n  {\r\n    Value: \"D01\",\r\n    Name: \"Honorarios médicos, dentales y gastos hospitalarios\",\r\n  },\r\n  {\r\n    Value: \"D02\",\r\n    Name: \"Gastos médicos por incapacidad o discapacidad\",\r\n  },\r\n  {\r\n    Value: \"D03\",\r\n    Name: \"Gastos funerales.\",\r\n  },\r\n  {\r\n    Value: \"D04\",\r\n    Name: \"Donativos\",\r\n  },\r\n  {\r\n    Value: \"D05\",\r\n    Name:\r\n      \"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).\",\r\n  },\r\n  {\r\n    Value: \"D06\",\r\n    Name: \"Aportaciones voluntarias al SAR.\",\r\n  },\r\n  {\r\n    Value: \"D07\",\r\n    Name: \"Primas por seguros de gastos médicos.\",\r\n  },\r\n  {\r\n    Value: \"D08\",\r\n    Name: \"Gastos de transportación escolar obligatoria.\",\r\n  },\r\n  {\r\n    Value: \"D09\",\r\n    Name:\r\n      \"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.\",\r\n  },\r\n  {\r\n    Value: \"D10\",\r\n    Name: \"Pagos por servicios educativos (colegiaturas)\",\r\n  },\r\n  {\r\n    Value: \"P01\",\r\n    Name: \"Por definir\",\r\n  },\r\n];\r\nexport const tiposCfdi = [\r\n  {\r\n    NameId: 1,\r\n    Name: \"Factura\",\r\n    Value: \"I\",\r\n  },\r\n  {\r\n    NameId: 2,\r\n    Name: \"Nota de Crédito\",\r\n    Value: \"E\",\r\n  },\r\n  {\r\n    NameId: 14,\r\n    Name: \"Complemento de pago\",\r\n    Value: \"P\",\r\n  },\r\n];\r\nexport const tipoCambio = [\r\n  {\r\n    Value: \"MXN\",\r\n    Name: \"Peso Mexicano\",\r\n  },\r\n  {\r\n    Value: \"EUR\",\r\n    Name: \"Euro\",\r\n  },\r\n  {\r\n    Value: \"USD\",\r\n    Name: \"Dolar Americano\",\r\n  },\r\n];\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Dinero electrónico\",\r\n    Value: \"06\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  /* {\r\n        Name: \"Dación en pago\",\r\n        Value: \"12\"\r\n    },\r\n    {\r\n        Name: \"Pago por subrogación\",\r\n        Value: \"13\"\r\n    },\r\n    {\r\n        Name: \"Pago por consignación\",\r\n        Value: \"14\"\r\n    },\r\n    {\r\n        Name: \"Condonación\",\r\n        Value: \"15\"\r\n    },\r\n    {\r\n        Name: \"Compensación\",\r\n        Value: \"17\"\r\n    },\r\n    {\r\n        Name: \"Novación\",\r\n        Value: \"23\"\r\n    },\r\n    {\r\n        Name: \"Confusión\",\r\n        Value: \"24\"\r\n    },\r\n    {\r\n        Name: \"Remisión de deuda\",\r\n        Value: \"25\"\r\n    },\r\n    {\r\n        Name: \"Prescripción o caducidad\",\r\n        Value: \"26\"\r\n    },\r\n    {\r\n        Name: \"A satisfacción del acreedor\",\r\n        Value: \"27\"\r\n    }, */\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  /* {\r\n        Name: \"Tarjeta de servicios\",\r\n        Value: \"29\"\r\n    }, */\r\n  {\r\n    Name: \"Aplicación de anticipos\",\r\n    Value: \"30\",\r\n  },\r\n  /* {\r\n        Name: \"Intermediarios\",\r\n        Value: \"31\"\r\n    }, */\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];\r\nexport const metodoPago = [\r\n  {\r\n    Value: \"PPD\",\r\n    Name: \"Pago en parcialidades ó diferido\",\r\n  },\r\n  {\r\n    Value: \"PUE\",\r\n    Name: \"Pago en una sola exhibición\",\r\n  },\r\n];\r\nexport const regimenFiscal = [\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"General de Ley Personas Morales\",\r\n    Value: \"601\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Personas Morales con Fines no Lucrativos\",\r\n    Value: \"603\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sueldos y Salarios e Ingresos Asimilados a Salarios\",\r\n    Value: \"605\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Arrendamiento\",\r\n    Value: \"606\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Régimen de Enajenación o Adquisición de Bienes\",\r\n    Value: \"607\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Demás ingresos\",\r\n    Value: \"608\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name:\r\n      \"Residentes en el Extranjero sin Establecimiento Permanente en México\",\r\n    Value: \"610\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por Dividendos (socios y accionistas)\",\r\n    Value: \"611\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Personas Físicas con Actividades Empresariales y Profesionales\",\r\n    Value: \"612\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por intereses\",\r\n    Value: \"614\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Régimen de los ingresos por obtención de premios\",\r\n    Value: \"615\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sin obligaciones fiscales\",\r\n    Value: \"616\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name:\r\n      \"Sociedades Cooperativas de Producción que optan por diferir sus ingresos\",\r\n    Value: \"620\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Incorporación Fiscal\",\r\n    Value: \"621\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name: \"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras\",\r\n    Value: \"622\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Opcional para Grupos de Sociedades\",\r\n    Value: \"623\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Coordinados\",\r\n    Value: \"624\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas\",\r\n    Value: \"625\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Hidrocarburos\",\r\n    Value: \"628\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales\",\r\n    Value: \"629\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Enajenación de acciones en bolsa de valores\",\r\n    Value: \"630\",\r\n  },\r\n];\r\n\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_FACTURA = gql`\r\n  mutation crearFactura($input: CrearFacturaInput) {\r\n    crearFactura(input: $input) {\r\n      message\r\n      success\r\n      pdf\r\n      xml\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SERIE = gql`\r\n  mutation crearSerieCFDI($input: CrearSerieCfdiInput!) {\r\n    crearSerieCFDI(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEFAULT_SERIE = gql`\r\n  mutation modificarDefaultSerie($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    modificarDefaultSerie(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SERIE = gql`\r\n  mutation eliminarSerie($id: ID!) {\r\n    eliminarSerie(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_SERIES = gql`\r\n  query obtenerSeriesCdfi($empresa: ID!, $sucursal: ID!) {\r\n    obtenerSeriesCdfi(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n      success\r\n      seriesCfdi {\r\n        _id\r\n        serie\r\n        folio\r\n        default\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SELLO_CFDI = gql`\r\n  mutation crearCSDS($input: CrearCSDSInput!) {\r\n    crearCSDS(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SELLO_CFDI = gql`\r\n  mutation eliminarCSD($rfc: String, $empresa: ID!) {\r\n    eliminarCSD(rfc: $rfc, empresa: $empresa) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CATALOGOS_SAT_API = gql`\r\n  query obtenerCatalogosSAT($input: CrearFacturaInput!) {\r\n    obtenerCatalogosSAT(input: $input) {\r\n      message\r\n      currencies {\r\n        Decimals\r\n        PrecisionRate\r\n        Name\r\n        Value\r\n      }\r\n      paymentForms {\r\n        Name\r\n        Value\r\n      }\r\n      paymentMethods {\r\n        Name\r\n        Value\r\n      }\r\n      fiscalRegimens {\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n      cfdiTypes {\r\n        NameId\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_SERVICIOS_SAT_API = gql`\r\n  query obtenerProductosOServicios($input: CrearFacturaInput!) {\r\n    obtenerProductosOServicios(input: $input) {\r\n      message\r\n      productosOServicios {\r\n        DangerousMaterial\r\n        Complement\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_POSTAL_CODES_SAT_API = gql`\r\n  query obtenerCodigoPostal($input: CrearFacturaInput!) {\r\n    obtenerCodigoPostal(input: $input) {\r\n      message\r\n      codigoPostal {\r\n        StateCode\r\n        MunicipalityCode\r\n        LocationCode\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CFDIU_USES_SAT_API = gql`\r\n  query obtenerCfdiUses($input: CrearFacturaInput!) {\r\n    obtenerCfdiUses(input: $input) {\r\n      message\r\n      cfdiUses {\r\n        message\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  CloudUpload,\r\n  Done,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function RegistroSellos({\r\n  datosEmpresa,\r\n  firma_disabled,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    certificate: \"\",\r\n    private_key: \"\",\r\n    private_key_password: \"\",\r\n    rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      certificate: \"\",\r\n      private_key: \"\",\r\n      private_key_password: \"\",\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n      sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [crearCSDS] = useMutation(CREAR_SELLO_CFDI);\r\n\r\n  const handleClickShowPassword = () => setShow(!show);\r\n  const handleMouseDownPassword = (event) => event.preventDefault();\r\n\r\n  const obtenerFiles = (e) => {\r\n    const { name, files } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: files[0],\r\n    });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      private_key_password: e.target.value,\r\n    });\r\n  };\r\n\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve) => {\r\n      let baseURL = \"\";\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        baseURL = reader.result;\r\n        resolve(baseURL);\r\n      };\r\n    });\r\n  };\r\n\r\n  const guardarBD = async () => {\r\n    if (\r\n      !datos.certificate ||\r\n      !datos.private_key ||\r\n      !datos.private_key_password ||\r\n      !datos.rfc\r\n    )\r\n      return;\r\n\r\n    try {\r\n      let data = { ...datos };\r\n      let cer = data.certificate;\r\n      let key = data.private_key;\r\n      await getBase64(cer)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.certificate = base[1];\r\n          data.nombre_cer = cer.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      await getBase64(key)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.private_key = base[1];\r\n          data.nombre_key = key.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setLoading(true);\r\n      const result = await crearCSDS({\r\n        variables: {\r\n          input: {\r\n            certificate: data.certificate,\r\n            private_key: data.private_key,\r\n            private_key_password: data.private_key_password,\r\n            rfc: data.rfc,\r\n            empresa: data.empresa,\r\n            sucursal: data.sucursal,\r\n            nombre_cer: data.nombre_cer,\r\n            nombre_key: data.nombre_key,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearCSDS.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<Add />}\r\n          disabled={firma_disabled}\r\n        >\r\n          Agregar CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Registrar firma digital</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            {datosEmpresa.rfc ? (\r\n              <Typography>{`RFC: ${datosEmpresa.rfc}`}</Typography>\r\n            ) : (\r\n              <Typography color=\"error\">\r\n                *No tienes registrado un RFC\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              Archivo *.cer <b>Certificado de la firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.certificate ? datos.certificate.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-cer-sello-digital\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".cer\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-cer-sello-digital\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"certificate\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" mt={2}>\r\n            <Typography>\r\n              Archivo *.key <b>Llave Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.private_key ? datos.private_key.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-key-llave_privada\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".key\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-key-llave_privada\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"private_key\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" my={2}>\r\n            <Typography>\r\n              Contraseña de la llave <b>Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                type={show ? \"text\" : \"password\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"private_key_password\"\r\n                onChange={obtenerDatos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        onClick={handleClickShowPassword}\r\n                        onMouseDown={handleMouseDownPassword}\r\n                        edge=\"end\"\r\n                      >\r\n                        {show ? <Visibility /> : <VisibilityOff />}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => guardarBD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { Close, DeleteOutline } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSellos({ datosEmpresa, refetch }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    rfc: datosEmpresa && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [eliminarCSD] = useMutation(ELIMINAR_SELLO_CFDI);\r\n\r\n  const eliminarSelloCSD = async () => {\r\n    if (!datos.rfc) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await eliminarCSD({\r\n        variables: {\r\n          rfc: datos.rfc,\r\n          empresa: datos.empresa,\r\n        },\r\n      });\r\n\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCSD.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<DeleteOutline />}\r\n        >\r\n          Remover CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Eliminar Firma Digital</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Se eliminara el CSD registrado con el RFC ${datosEmpresa.rfc}`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} /> : <DeleteOutline />\r\n            }\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            onClick={() => eliminarSelloCSD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Container,\r\n  FormControl,\r\n  Select,\r\n  MenuItem\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Typography,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { regimenFiscal } from \"../../Facturacion/catalogos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport RegistroSellos from \"../../Facturacion/CFDISellos/RegistrarSellos\";\r\nimport EliminarSellos from \"../../Facturacion/CFDISellos/EliminarCSD\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport default function InformacionFiscal(props) {\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? true : false\r\n  );\r\n  const { empresa, setEmpresa } = useContext(EmpresaContext);\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n  const [firma_disabled, setFirmaDisabled] = useState(false);\r\n  const [empresaFiscal, setEmpresaFiscal] = useState({\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    regimen_fiscal: \"\",\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n  });\r\n  /* Queries */ \r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n        let new_sesion = sesion;\r\n        new_sesion.empresa = data.obtenerEmpresa;\r\n        localStorage.setItem(\"sesionCafi\", JSON.stringify(new_sesion));\r\n        if (!data.obtenerEmpresa.rfc) {\r\n          setFirmaDisabled(true);\r\n        } else {\r\n          setFirmaDisabled(false);\r\n        }\r\n      }\r\n    } catch (errorCatch) {\r\n      //console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa, sesion]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n      \r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaFiscal({\r\n        nombre_fiscal: empresa.nombre_fiscal,\r\n        rfc: empresa.rfc,\r\n        curp: empresa.curp,\r\n\r\n        info_adicio: empresa.info_adicio,\r\n        regimen_fiscal: empresa.regimen_fiscal,\r\n        sello_sat: empresa.sello_sat,\r\n        nombre_cer: empresa.nombre_cer,\r\n        nombre_key: empresa.nombre_key,\r\n        limite_timbres: empresa.limite_timbres,\r\n        timbres_usados: empresa.timbres_usados,\r\n        direccionFiscal: {\r\n          calle: empresa.direccionFiscal.calle,\r\n          no_ext: empresa.direccionFiscal.no_ext,\r\n          no_int: empresa.direccionFiscal.no_int,\r\n          codigo_postal: empresa.direccionFiscal.codigo_postal,\r\n          colonia: empresa.direccionFiscal.colonia,\r\n          municipio: empresa.direccionFiscal.municipio,\r\n          localidad: empresa.direccionFiscal.localidad,\r\n          estado: empresa.direccionFiscal.estado,\r\n          pais: empresa.direccionFiscal.pais,\r\n        },\r\n        datosBancarios: {\r\n          cuenta: empresa.datosBancarios.cuenta,\r\n          sucursal: empresa.datosBancarios.sucursal,\r\n          clave_banco: empresa.datosBancarios.clave_banco,\r\n        },\r\n      });\r\n    } catch (errorCatch) {}\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaFiscal); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaFiscal,\r\n        },\r\n      });\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoadingPage(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.response) {\r\n        console.log(error.response);\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      direccionFiscal: {\r\n        ...empresaFiscal.direccionFiscal,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n  const obtenerCamposBancarios = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      datosBancarios: {\r\n        ...empresaFiscal.datosBancarios,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n     \r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n     \r\n        \r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container>\r\n              <Grid container spacing={1} >\r\n                <Grid item md={6} xs={12} className={classes.require}>\r\n                  <Box my={1}>\r\n                    <Typography>\r\n                     <b> <span>* </span>Nombre fiscal</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaFiscal.nombre_fiscal}\r\n                      name=\"nombre_fiscal\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.nombre_fiscal\r\n                          ? empresaFiscal.nombre_fiscal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>RFC</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"rfc\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.rfc ? empresaFiscal.rfc : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Régimen fiscal</Typography>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"regimen_fiscal\"\r\n                    >\r\n                      <Select\r\n                        value={\r\n                          empresaFiscal.regimen_fiscal\r\n                            ? empresaFiscal.regimen_fiscal\r\n                            : \"\"\r\n                        }\r\n                        name=\"regimen_fiscal\"\r\n                        onChange={obtenerCampos}\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {regimenFiscal.map((res, index) => (\r\n                          <MenuItem\r\n                            key={index}\r\n                            value={res.Value}\r\n                          >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>CURP</b></Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"curp\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.curp ? empresaFiscal.curp : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Info. Adicional</b></Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"info_adicio\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.info_adicio\r\n                          ? empresaFiscal.info_adicio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      multiline\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                  <Typography className={classes.subtitle}>\r\n                    <b>Firma digital</b>\r\n                  </Typography>\r\n                  <Divider />\r\n                  <Box m={1}>\r\n                    {empresaFiscal.sello_sat === true ? (\r\n                      <Alert\r\n                        severity=\"success\"\r\n                        action={\r\n                          <EliminarSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Firma Digital Activa</AlertTitle>\r\n                      </Alert>\r\n                    ) : (\r\n                      <Alert\r\n                        severity=\"info\"\r\n                        action={\r\n                          <RegistroSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Sin Firma Digital</AlertTitle>\r\n                        Sin esta firma no prodrás realizar facturas\r\n                        {firma_disabled ? (\r\n                          <li>Necesitas tener un RFC registrado</li>\r\n                        ) : null}\r\n                      </Alert>\r\n                    )}\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Archivo *.cer</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Archivo *.key</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Fecha de registro</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box >\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.calle\r\n                          ? empresaFiscal.direccionFiscal.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_ext\r\n                          ? empresaFiscal.direccionFiscal.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_int\r\n                          ? empresaFiscal.direccionFiscal.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.codigo_postal\r\n                          ? empresaFiscal.direccionFiscal.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.colonia\r\n                          ? empresaFiscal.direccionFiscal.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.municipio\r\n                          ? empresaFiscal.direccionFiscal.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.localidad\r\n                          ? empresaFiscal.direccionFiscal.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.estado\r\n                          ? empresaFiscal.direccionFiscal.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.pais\r\n                          ? empresaFiscal.direccionFiscal.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box mt={1}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Datos bancarios</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Cuenta</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"cuenta\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.cuenta\r\n                          ? empresaFiscal.datosBancarios.cuenta\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Sucursal</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"sucursal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.sucursal\r\n                          ? empresaFiscal.datosBancarios.sucursal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Clave de banco</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"clave_banco\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.clave_banco\r\n                          ? empresaFiscal.datosBancarios.clave_banco\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                \r\n     \r\n              </Grid>\r\n              {sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? null : (\r\n                  <DialogActions m={2} style={{ marginTop:10, width:'100%',justifyContent: \"center\" }}>\r\n                  <Button onClick={handleClose} color=\"primary\">\r\n                    Cancelar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => actEmp()}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    \r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </DialogActions>\r\n              )}\r\n            </Container>\r\n          )}\r\n       \r\n      \r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {  DialogContent, Button, Box, Dialog, Slide, Typography, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport MisDatos from './Datos/MisDatos';\r\nimport InformacionFiscal from './InformacionFiscal/InformacionFiscal';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n \r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function MiEmpresa() {\r\n  const classes = useStyles();\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [open, setOpen] = useState(false);\r\n\t\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    \r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\t\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\treturn (\r\n\t\t<div>\r\n    <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de empresa\r\n        </Box>\r\n      </Button>\r\n        <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n          <Box >\r\n            <Tabs\r\n              indicatorColor=\"primary\"\r\n              value={value}\r\n              onChange={handleChange}\r\n              aria-label=\"simple tabs example\"\r\n            >\r\n              <Tab label=\"Datos empresa\" />\r\n              <Tab label=\"Datos fiscales\" />\r\n            </Tabs>\r\n          </Box>\r\n          <DialogContent>  \r\n            {\r\n              (value === 0 ) ? \r\n                <MisDatos setOpen={setOpen} />\r\n                :\r\n                <InformacionFiscal setOpen={setOpen} />\r\n            }\r\n          </DialogContent>\r\n      </Dialog>  \r\n      \r\n     \r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_SUCURSALES = gql`\r\n    query ObtenerSucursalesEmpresa($id: ID!){\r\n        obtenerSucursalesEmpresa(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const OBTENER_DATOS_SUCURSAL = gql`\r\n    query obtenerDatosSucursal($id: ID!){\r\n        obtenerDatosSucursal(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const ACTUALIZAR_SUCURSAL = gql`\r\n  mutation editarSucursal($id: ID!, $input: EditarSucursal) {\r\n    editarSucursal(id: $id, input: $input) {\r\n         _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_MOVIMIENTO_CUENTA = gql`\r\n    mutation CrearMovimientoCuenta($input: CrearMovimientoCuentaInput, $empresa: ID!, $sucursal: ID!, $tipo: Boolean){\r\n        crearMovimientoCuenta(input: $input, empresa: $empresa, sucursal: $sucursal, tipo: $tipo){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CUENTAS = gql`\r\n    query ObtenerHistorialCuenta($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialCuenta, $tipo: Boolean){\r\n        obtenerHistorialCuenta(empresa: $empresa, sucursal: $sucursal, input: $input, tipo: $tipo){\r\n            tipo_movimiento\r\n            id_usuario\r\n            numero_caja\r\n            id_Caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            horario_turno\r\n            concepto\r\n            comentarios\r\n            montos_en_caja { \r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n            }\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            empresa\r\n            sucursal             \r\n        }\r\n    }\r\n`;","export const numerosRandom = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const generateCode = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const generateCodeNumerico = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const formatoHora = (hora) => {\r\n  if (!hora) {\r\n    return null;\r\n  } else {\r\n    var newtime = new Date(hora);\r\n    return newtime.toLocaleTimeString(\"en-US\", { hour12: \"false\" });\r\n  }\r\n};\r\n\r\nexport const formatoFecha = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoFechaCorta = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"short\",\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoMexico = (number) => {\r\n  if (!number) {\r\n    return null;\r\n  } else {\r\n    let nueva;\r\n    if (number % 1 === 0) {\r\n      nueva = number;\r\n    } else {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    }\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = \"$1,\";\r\n    return nueva.toString().replace(exp, rep);\r\n  }\r\n};\r\n\r\nexport const cleanTypenames = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map(cleanTypenames);\r\n  } else if (value !== null && typeof value === \"object\") {\r\n    const newObject = {};\r\n    for (const property in value)\r\n      if (property !== \"__typename\")\r\n        newObject[property] = cleanTypenames(value[property]);\r\n    return newObject;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nexport const findProductArray = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePrices = async (\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  newPrising = 0\r\n) => {\r\n  let subtotalCalculo = 0,\r\n    totalCalculo = 0,\r\n    impuestoCalculo = 0,\r\n    ivaCalculo = 0,\r\n    iepsCalculo = 0,\r\n    descuentoCalculo = 0,\r\n    monederoCalculo = 0;\r\n  // console.log(\"newPrising\",newPrising);\r\n  const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n  console.log(newP.id_producto.precios.precios_producto[0].precio_venta);\r\n  // console.log(newP);\r\n  const iva_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.iva < 9\r\n          ? `0${newP.id_producto.precios.iva}`\r\n          : newP.id_producto.precios.iva\r\n      }`\r\n    );\r\n\r\n  const ieps_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.ieps < 9\r\n          ? `0${newP.id_producto.precios.ieps}`\r\n          : newP.id_producto.precios.ieps\r\n      }`\r\n    );\r\n\r\n  const precioProducto = newPrising;\r\n  // const precioDescuentoProducto = newP.descuento_activo ? parseFloat(newP.descuento.precio_con_descuento) : 0;\r\n\r\n  totalCalculo =\r\n    granel.granel === true\r\n      ? precioProducto * cantidadNueva * parseFloat(granel.valor)\r\n      : precioProducto * cantidadNueva;\r\n\r\n  subtotalCalculo =\r\n    granel.granel === true\r\n      ? (precioProducto - (iva_producto + ieps_producto)) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (precioProducto - (iva_producto + ieps_producto)) * cantidadNueva;\r\n\r\n  impuestoCalculo =\r\n    granel.granel === true\r\n      ? (iva_producto + ieps_producto) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (iva_producto + ieps_producto) * cantidadNueva;\r\n\r\n  console.log(cantidadNueva);\r\n\r\n  ivaCalculo =\r\n    granel.granel === true\r\n      ? iva_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : iva_producto * cantidadNueva;\r\n\r\n  iepsCalculo =\r\n    granel.granel === true\r\n      ? ieps_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : ieps_producto * cantidadNueva;\r\n\r\n  descuentoCalculo =\r\n    granel.granel === true\r\n      ? newP.descuento_activo === true\r\n        ? parseFloat(newP.descuento.dinero_descontado) *\r\n          cantidadNueva *\r\n          parseFloat(granel.valor)\r\n        : 0\r\n      : newP.descuento_activo === true\r\n      ? parseFloat(newP.descuento.dinero_descontado) * cantidadNueva\r\n      : 0;\r\n\r\n  monederoCalculo = newP.id_producto.precios.monedero\r\n    ? newP.id_producto.precios.monedero_electronico * cantidadNueva\r\n    : 0;\r\n\r\n  return {\r\n    totalCalculo,\r\n    subtotalCalculo,\r\n    impuestoCalculo,\r\n    ivaCalculo,\r\n    iepsCalculo,\r\n    descuentoCalculo,\r\n    monederoCalculo,\r\n  };\r\n};\r\n\r\nexport const calculatePrices2 = async ({ newP, cantidad, granel, origen, precio_boolean = false, precio}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? parseFloat(granel.valor) : 1;\r\n    const precio_actual = precio_boolean ? precio : newP.descuento_activo ? newP.descuento : newP.precio_unidad;\r\n    const cantidadCaja =\r\n    precio_actual.unidad_maxima === true\r\n      ? precio_actual.cantidad_unidads\r\n      : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    const ob = {\r\n      ivaCalculo: parseFloat((ivaCalculo * valor_granel * cantidadNueva).toFixed(2)),\r\n      iepsCalculo: parseFloat((iepsCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      impuestoCalculo: parseFloat((impuestoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      subtotalCalculo: parseFloat((subtotalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      totalCalculo: parseFloat((totalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      monederoCalculo: parseFloat((monederoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      descuentoCalculo: parseFloat((descuentoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      newP\r\n    };\r\n    if(origen === \"Ventas1\"){\r\n      newP.cantidad_venta = 1;\r\n      newP.granel_producto  = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat((precio_actual.precio_neto).toFixed(2));\r\n      newP.precio_actual_object = {\r\n        cantidad_unidad: precio_actual.cantidad_unidad ? precio_actual.cantidad_unidad : 1,\r\n        numero_precio: precio_actual.numero_precio ? precio_actual.numero_precio : 1,\r\n        unidad_maxima: precio_actual.unidad_maxima ? precio_actual.unidad_maxima : false,\r\n        precio_general: precio_actual.precio_general ? precio_actual.precio_general : 0,\r\n        precio_neto: precio_actual.precio_neto ? precio_actual.precio_neto : 0,\r\n        precio_venta: precio_actual.precio_venta ? precio_actual.precio_venta : 0,\r\n        iva_precio: precio_actual.iva_precio ? precio_actual.iva_precio : 0,\r\n        ieps_precio: precio_actual.ieps_precio ? precio_actual.ieps_precio : 0,\r\n        utilidad: precio_actual.utilidad ? precio_actual.utilidad : 0,\r\n        porciento: precio_actual.porciento ? precio_actual.porciento : 0,\r\n        dinero_descontado: precio_actual.dinero_descontado ? precio_actual.dinero_descontado : 0,\r\n      };\r\n    }else if(origen === \"Ventas2\") {\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const verifiPrising = async (newP) => {\r\n  try {\r\n    if (!newP) return false;\r\n    const amount = newP.cantidad_venta;\r\n    const pricings = newP.id_producto.precios.precios_producto.filter(\r\n      (p) => p.unidad_mayoreo > 0 && p.precio_neto > 0\r\n    );\r\n\r\n    let finalPrising = {\r\n      found: false,\r\n      pricing: 0,\r\n      number_pricing: 0,\r\n      object_prising: {}\r\n    };\r\n    const datoFinal = pricings.length;\r\n    if (newP.precio_seleccionado) return finalPrising;\r\n    //CONIDICONAR SI EL PRECIO ES MENOR Y MENOR PERO QUE NO SEA MAYOR AL SEGUNDO\r\n    if (amount < newP.id_producto.precios.precios_producto[1].unidad_mayoreo)\r\n      return (finalPrising = {\r\n        found: true,\r\n        pricing: newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.id_producto.precios.precios_producto[0].precio_neto,\r\n        number_pricing:\r\n          newP.id_producto.precios.precios_producto[0].numero_precio,\r\n        object_prising: newP.descuento_activo ? newP.descuento : newP.id_producto.precios.precios_producto[0]\r\n      });\r\n\r\n    for (let i = 0; i < pricings.length; i++) {\r\n      if (i + 1 === datoFinal && amount >= pricings[i].unidad_mayoreo)\r\n        return (finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        });\r\n\r\n      if (\r\n        i + 1 < datoFinal &&\r\n        amount >= pricings[i].unidad_mayoreo &&\r\n        amount < pricings[i + 1].unidad_mayoreo\r\n      ) {\r\n        finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        };\r\n      }\r\n    }\r\n    return finalPrising;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function formatCurrency(number) {\r\n  var formatted = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n  }).format(number);\r\n  console.log(formatted);\r\n  return formatted;\r\n}\r\n\r\nexport const findProductArrayRefactor = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    //Declarar variables\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n    //Se recorren los productos\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      //Se verifica si tiene codigo de barras ya que no es obligatorio\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  Avatar,\r\n  DialogContent,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  OBTENER_DATOS_SUCURSAL, ACTUALIZAR_SUCURSAL\r\n} from \"../../../../gql/Empresa/sucursales\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DatosSucursal() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n \r\n\r\n  const [actualizarSucursal] = useMutation(ACTUALIZAR_SUCURSAL);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_SUCURSAL, {\r\n    variables: { id: sesion.sucursal._id },\r\n  });\r\n\r\n  const [sucursalDatos, setSucursalDatos] = useState({\r\n    nombre_sucursal: \"\",\r\n    descripcion: \"\",\r\n    telefono:\"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    }    \r\n  });\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  },  [refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        \r\n        setSucursalDatos(data.obtenerDatosSucursal[0]);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setSucursalDatos]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  \r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarSucursal({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: sucursalDatos,\r\n        },\r\n      });\r\n     \r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      direccion: { ...sucursalDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setSucursalDatos({\r\n        ...sucursalDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [sucursalDatos, setSucursalDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de sucursal\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n              \r\n                <Grid item md={4} flexdirection='row'>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre de empresa</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.nombre_sucursal}\r\n                      name=\"nombre_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.nombre_sucursal\r\n                          ? sucursalDatos.nombre_sucursal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Descripción</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.descripcion}\r\n                      name=\"nombre_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.descripcion\r\n                          ? sucursalDatos.descripcion\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                 {/*  <Box>\r\n                    <Typography>Teléfono</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.telefono_dueno\r\n                          ? sucursalDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box> */}\r\n                </Grid>\r\n                \r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.calle\r\n                          ? sucursalDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_ext\r\n                          ? sucursalDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_int\r\n                          ? sucursalDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.codigo_postal\r\n                          ? sucursalDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.colonia\r\n                          ? sucursalDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.municipio\r\n                          ? sucursalDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.localidad\r\n                          ? sucursalDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.estado\r\n                          ? sucursalDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.pais\r\n                          ? sucursalDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { EmpresaProvider } from '../../../context/Catalogos/empresaContext';\r\nimport MiEmpresa from './DatosEmpresa';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport Sucursal from './Sucursal/DatosSucursal';\r\n\r\nexport default function Empresa() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    return(\r\n        <div>\r\n            <EmpresaProvider>\r\n                <Grid container spacing={5} justify=\"center\">\r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <Sucursal />\r\n                        </Box>\r\n                    </Grid>\r\n                    {sesion.accesos.mi_empresa.datos_empresa.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                               < MiEmpresa />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                 {/*    {sesion.accesos.mi_empresa.informacion_fiscal.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <InformacionFiscal />\r\n                            </Box> \r\n                        </Grid>\r\n                    )} */}\r\n                </Grid>\r\n            </EmpresaProvider>\r\n        </div>\r\n    )\r\n}","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  IconButton,\r\n  InputAdornment,\r\n  OutlinedInput,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { Box, TextField, Typography, Table, Checkbox } from \"@material-ui/core\";\r\nimport { Cached, LocalOffer } from \"@material-ui/icons\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function PreciosDeCompra() {\r\n  const {\r\n    datos_generales,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const descuentoUnidadXdefecto = (descuento_activo) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      descuento_activo,\r\n    });\r\n  };\r\n\r\n  const checkUnidadDefault = (checked) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>Aplicar Descuento</TableCell>\r\n                <TableCell>Unidad Principal</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow /* selected={actualizarUnidad ? true : false} */>\r\n                <TableCell>{datos_generales.codigo_barras}</TableCell>\r\n                <TableCell>{unidadVentaXDefecto.unidad}</TableCell>\r\n                <TableCell>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    {unidadVentaXDefecto.descuento_activo &&\r\n                    unidadVentaXDefecto.descuento_activo !== null ? (\r\n                      <LocalOffer\r\n                        color={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? \"primary\"\r\n                            : \"action\"\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                    <Box mr={1} />\r\n                    <Typography>\r\n                      <b>\r\n                        $\r\n                        {formatoMexico(\r\n                          unidadVentaXDefecto.descuento_activo &&\r\n                            unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento.precio_neto\r\n                            : unidadVentaXDefecto.precio\r\n                        )}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell>{unidadVentaXDefecto.cantidad}</TableCell>\r\n                <TableCell>\r\n                  {unidadVentaXDefecto.descuento_activo &&\r\n                  unidadVentaXDefecto.descuento_activo !== null ? (\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Checkbox\r\n                        checked={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento_activo\r\n                            : false\r\n                        }\r\n                        onChange={(e) =>\r\n                          descuentoUnidadXdefecto(e.target.checked)\r\n                        }\r\n                        inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                        color=\"primary\"\r\n                        disabled={unidadVentaXDefecto.descuento_activo === null}\r\n                      />\r\n                      <Typography color=\"primary\">\r\n                        %\r\n                        {parseFloat(\r\n                          unidadVentaXDefecto.descuento_activo !== null\r\n                            ? unidadVentaXDefecto.descuento.porciento\r\n                            : 0\r\n                        )}\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : null}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={unidadVentaXDefecto.unidad_principal}\r\n                    onChange={(e) => checkUnidadDefault(e.target.checked)}\r\n                    inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n              <UnidadesVentaSecundaria />\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst UnidadesVentaSecundaria = () => {\r\n  const {\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  const [precio, setPrecio] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let price =\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n        ? unidadVentaSecundaria.descuento.precio_neto\r\n        : unidadVentaSecundaria.precio;\r\n\r\n    return () => {\r\n      setPrecio(price);\r\n    };\r\n  }, [unidadVentaSecundaria]);\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const obtenerCantidad = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      cantidad: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    if (\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n    ) {\r\n      setPrecio(value);\r\n      calcularUnidadDesucuento(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n  };\r\n\r\n  const calcularUnidadDesucuento = (value) => {\r\n    const { cantidad, precio_unidad } = unidadVentaSecundaria;\r\n    if (!value || !cantidad) return;\r\n\r\n    const precio_unit = value / cantidad;\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n    const precio_venta_unit = precio_venta / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat((precio_unit / (suma_impuestos + 1)).toFixed(2));\r\n    let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat((100 - porcentaje).toFixed(2));\r\n\r\n    let PVCDSI = parseFloat(\r\n      ((precio_venta_unit * porcentaje) / 100).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat((precio_venta_unit - PVCDSI).toFixed(2));\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_neto = parseFloat(\r\n      (PVCDSI + iva_precio + ieps_precio).toFixed(2)\r\n    );\r\n    let precio_general = parseFloat((precio_neto * cantidad).toFixed(2));\r\n\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: precio_general,\r\n        precio_neto: precio_general,\r\n        precio_venta: PVCDSI,\r\n        iva_precio: iva_precio,\r\n        ieps_precio: ieps_precio,\r\n        utilidad: utilidad,\r\n        porciento: descuento,\r\n        dinero_descontado: dineroDescontado,\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidadDesucuentoCheck = (boolean) => {\r\n    const { cantidad, precio_unidad, descuento } = unidadVentaSecundaria;\r\n    if (!precio || !cantidad) return;\r\n\r\n    /* const precio_unit = value / cantidad; */\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n\r\n    const precio_venta_unit = precio / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(\r\n      (precio_venta_unit / (suma_impuestos + 1)).toFixed(2)\r\n    );\r\n    /* let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat((100 - porcentaje).toFixed(2)); */\r\n\r\n    let PVCDSI = parseFloat(((PVSI * descuento.porciento) / 100).toFixed(2));\r\n    let dineroDescontado = parseFloat((PVSI - PVCDSI).toFixed(2));\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_neto = parseFloat(\r\n      (PVCDSI + iva_precio + ieps_precio).toFixed(2)\r\n    );\r\n    let precio_general = parseFloat((precio_neto * cantidad).toFixed(2));\r\n\r\n    setPrecio(precio_general);\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento_activo: boolean,\r\n      precio,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: precio_general,\r\n        precio_neto: precio_general,\r\n        precio_venta: PVCDSI,\r\n        iva_precio: iva_precio,\r\n        ieps_precio: ieps_precio,\r\n        utilidad: utilidad,\r\n        porciento: descuento.porciento,\r\n        dinero_descontado: dineroDescontado,\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidad = (e) => {\r\n    if (e.target.value === \"\") {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n        precio: 0,\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: true,\r\n      });\r\n      return;\r\n    }\r\n    if (!unidadVentaSecundaria.precio || !unidadVentaSecundaria.cantidad)\r\n      return;\r\n\r\n    const { precio, cantidad } = unidadVentaSecundaria;\r\n\r\n    const { iva, ieps } = precios;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVCI = parseFloat((precio / cantidad).toFixed(2));\r\n    let PVSI = parseFloat((PVCI / (suma_impuestos + 1)).toFixed(2));\r\n\r\n    let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let iva_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let utilidad = parseFloat((((PVSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_venta = PVSI * cantidad;\r\n    let precio_neto = PVCI * cantidad;\r\n\r\n    let unidad_secundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio,\r\n      cantidad,\r\n      precio_unidad: {\r\n        numero_precio: 1,\r\n        precio_venta: precio_venta,\r\n        precio_neto: precio_neto,\r\n        unidad_mayoreo: 0,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad,\r\n        unidad_maxima: true,\r\n        precio_general: precio,\r\n        cantidad_unidad: cantidad,\r\n      },\r\n    };\r\n\r\n    setUnidadVentaSecundaria(unidad_secundaria);\r\n  };\r\n\r\n  const checkUnidadPrincipal = (checked) => {\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (boolean) => {\r\n    let precio = boolean\r\n      ? unidadVentaSecundaria.descuento.precio_neto\r\n      : unidadVentaSecundaria.precio;\r\n    if (boolean) {\r\n      calcularUnidadDesucuentoCheck(boolean);\r\n    } else {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        descuento_activo: boolean,\r\n      });\r\n      setPrecio(precio);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell width={220}>\r\n        <FormControl variant=\"outlined\" size=\"small\" name=\"codigo_barras\">\r\n          <OutlinedInput\r\n            id=\"input-codigo-barras\"\r\n            name=\"codigo_barras\"\r\n            value={unidadVentaSecundaria.codigo_barras}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => GenCodigoBarras()}\r\n                >\r\n                  <Cached />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </TableCell>\r\n      <TableCell>{unidadVentaSecundaria.unidad}</TableCell>\r\n      <TableCell width={200}>\r\n        <TextField\r\n          type=\"number\"\r\n          name=\"precio\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onBlur={(e) => calcularUnidad(e)}\r\n          onChange={obtenerPrecio}\r\n          value={precio}\r\n          disabled={\r\n            unidadVentaSecundaria.descuento_activo !== null &&\r\n            unidadVentaSecundaria.descuento_activo === true\r\n          }\r\n          InputProps={{\r\n            inputProps: { min: 0 },\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {unidadVentaSecundaria.descuento_activo !== null ? (\r\n                  <LocalOffer\r\n                    color={\r\n                      unidadVentaSecundaria.descuento_activo\r\n                        ? \"primary\"\r\n                        : \"disabled\"\r\n                    }\r\n                  />\r\n                ) : null}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Tooltip\r\n          title={<Typography variant=\"subtitle2\">Pz/Kg por Unidad</Typography>}\r\n          placement=\"top\"\r\n          arrow\r\n        >\r\n          <TextField\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            type=\"number\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"cantidad\"\r\n            onBlur={calcularUnidad}\r\n            onChange={obtenerCantidad}\r\n            value={unidadVentaSecundaria.cantidad}\r\n            onBlur={(e) => {\r\n              if (e.target.value === \"\") {\r\n                setUnidadVentaSecundaria({\r\n                  ...unidadVentaSecundaria,\r\n                  cantidad: precios.unidad_de_compra.cantidad,\r\n                });\r\n              }\r\n            }}\r\n          />\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell>\r\n        {unidadVentaSecundaria.descuento_activo !== null ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Checkbox\r\n              checked={\r\n                unidadVentaSecundaria.descuento_activo\r\n                  ? unidadVentaSecundaria.descuento_activo\r\n                  : false\r\n              }\r\n              onChange={(e) => aplicarDescuento(e.target.checked)}\r\n              inputProps={{ \"aria-label\": \"check descuento\" }}\r\n              color=\"primary\"\r\n              disabled={unidadVentaSecundaria.descuento_activo === null}\r\n            />\r\n            <Typography color=\"primary\">\r\n              %\r\n              {parseFloat(\r\n                unidadVentaSecundaria.descuento &&\r\n                  unidadVentaSecundaria.descuento !== null\r\n                  ? unidadVentaSecundaria.descuento.porciento\r\n                  : 0\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <Checkbox\r\n          checked={unidadVentaSecundaria.unidad_principal}\r\n          onChange={(e) => checkUnidadPrincipal(e.target.checked)}\r\n          inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n          disabled={unidadVentaSecundaria.precio === 0}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n  },\r\n  marginInput: {\r\n    marginTop: 19,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function PreciosDeVenta() {\r\n  const { preciosP } = useContext(RegProductoContext);\r\n  let newPreciosP = [...preciosP];\r\n\r\n  return (\r\n    <Fragment>\r\n      {preciosP.map((res, index) => (\r\n        <RenderPreciosP\r\n          key={index}\r\n          data={res}\r\n          index={index}\r\n          newPreciosP={newPreciosP}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderPreciosP = ({ data, index, newPreciosP }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    preciosP,\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setPreciosP,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  let preciosVenta = { ...preciosP[index] };\r\n  const [error, setError] = useState(false);\r\n\r\n  const obtenerUtilidad = (valor_base) => {\r\n    if (!valor_base) {\r\n      preciosVenta.utilidad = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    /* let utilidad = 1; */\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let utilidad = valor_base / 100;\r\n\r\n    const precio_venta = PUCSI * utilidad + PUCSI;\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    const precio_neto = precio_venta + impuestos;\r\n\r\n    preciosVenta.utilidad = parseFloat(valor_base);\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.iva_precio = iva_precio;\r\n    preciosVenta.ieps_precio = ieps_precio;\r\n\r\n    let PCCI = precios.precio_de_compra.precio_con_impuesto;\r\n    if (precio_neto < PCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n        unidadXDefecto = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerPrecioNeto = (value) => {\r\n    if (!value) {\r\n      console.log(value);\r\n      preciosVenta.precio_neto = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio_neto / (suma + 1)).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    let utilidad_base = ((precio_neto - impuestos - PUCSI) / PUCSI) * 100;\r\n\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.iva_precio = iva_precio;\r\n    preciosVenta.ieps_precio = ieps_precio;\r\n    preciosVenta.utilidad = parseFloat(utilidad_base.toFixed(2));\r\n\r\n    let PCCI = precios.precio_de_compra.precio_con_impuesto;\r\n    if (precio_neto < PCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerMayoreo = (value) => {\r\n    if (!value) {\r\n      preciosVenta.unidad_mayoreo = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n    preciosVenta.unidad_mayoreo = parseInt(value);\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const calculos = () => {\r\n    let { iva, ieps } = precios;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad_base = preciosVenta.utilidad ? preciosVenta.utilidad : 0;\r\n    let utilidad = utilidad_base / 100;\r\n\r\n    //precio venta y neto con utilidad\r\n    const precio_venta = parseFloat((PUCSI * utilidad + PUCSI).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n\r\n    const precio_neto = parseFloat((precio_venta + impuestos).toFixed(2));\r\n\r\n    //meter los valores a preciosVenta\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.iva_precio = iva_precio;\r\n    preciosVenta.ieps_precio = ieps_precio;\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (preciosVenta.numero_precio === 1) {\r\n      calculos();\r\n    } else if (preciosVenta.numero_precio > 1 && preciosVenta.precio_neto) {\r\n      calculos();\r\n    }\r\n  }, [precios.unidad_de_compra.precio_unitario_con_impuesto]);\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    switch (name) {\r\n      case \"utilidad\":\r\n        if (!value) {\r\n          preciosVenta.utilidad = 0;\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"precio_neto\":\r\n        if (!value) {\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          preciosVenta.utilidad = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"unidad_mayoreo\":\r\n        if (!value) {\r\n          preciosVenta.unidad_mayoreo = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Utilidad</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box minWidth={100}>\r\n          <Typography className={classes.titulos}>\r\n            Precio {data.numero_precio}\r\n          </Typography>\r\n          <Box mb={2} />\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">%</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            value={preciosVenta.utilidad}\r\n            name=\"utilidad\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerUtilidad(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"utilidad\", preciosVenta.utilidad)\r\n            }\r\n            error={preciosVenta.utilidad === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Box\r\n            alignItems=\"flex-end\"\r\n            flexDirection=\"column\"\r\n            display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n          >\r\n            <Typography className={classes.precioTitle}>\r\n              <b>Precio de venta</b>\r\n            </Typography>\r\n            <Typography\r\n              className={classes.precioTitle}\r\n              variant=\"caption\"\r\n              color=\"textSecondary\"\r\n            >\r\n              (precio sin impuestos)\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box pl={1}>\r\n          <Typography>\r\n            <b>${parseFloat(preciosVenta.precio_venta).toFixed(2)}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          flexDirection=\"column\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Precio venta neto</b>\r\n          </Typography>\r\n          <Typography\r\n            className={classes.precioTitle}\r\n            variant=\"caption\"\r\n            color=\"textSecondary\"\r\n          >\r\n            (precio con impuestos)\r\n          </Typography>\r\n        </Box>\r\n        <Box className={data.numero_precio > 1 ? classes.marginInput : \"\"}>\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">$</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            name=\"precio_neto\"\r\n            variant=\"outlined\"\r\n            value={preciosVenta.precio_neto}\r\n            onChange={(e) => obtenerPrecioNeto(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"precio_neto\", preciosVenta.precio_neto)\r\n            }\r\n            error={preciosVenta.precio_neto === \"\" || error}\r\n            helperText={error ? \"Precio menor a costo\" : \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Unidad por mayoreo</b>\r\n          </Typography>\r\n        </Box>\r\n        {data.numero_precio > 1 ? (\r\n          <Box>\r\n            <TextField\r\n              disabled={\r\n                !parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                )\r\n              }\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"unidad_mayoreo\"\r\n              variant=\"outlined\"\r\n              value={preciosVenta.unidad_mayoreo}\r\n              onChange={(e) => obtenerMayoreo(e.target.value)}\r\n              onBlur={() =>\r\n                verificarCampoVacio(\r\n                  \"unidad_mayoreo\",\r\n                  preciosVenta.unidad_mayoreo\r\n                )\r\n              }\r\n              error={preciosVenta.unidad_mayoreo === \"\"}\r\n            />\r\n          </Box>\r\n        ) : null}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","export const unitCodes = [\r\n    {unidad: \"Pz\", codigo_unidad: \"H87\"},\r\n    {unidad: \"Caja\", codigo_unidad: \"XBX\"}\r\n]\r\n\r\nexport const unitCodes_granel = [\r\n  {unidad: \"Kg\", codigo_unidad: \"KGM\"},\r\n  {unidad: \"Lt\", codigo_unidad: \"LTR\"},\r\n  {unidad: \"Costal\", codigo_unidad: \"KGM\"},\r\n]","export const calcular_iva = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"iva_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = parseFloat(precio_sin_impuesto) * 0.16;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = 0;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.ieps_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n\r\n  return {\r\n    ...precios,\r\n    iva_activo: name === \"iva_activo\" ? value : precios.iva_activo,\r\n    iva: name === \"iva\" ? parseFloat(value) : value ? 16 : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\nexport const calcular_ieps = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"ieps_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      ieps = parseFloat(precio_sin_impuesto) * precios.ieps;\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      ieps = 0;\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.iva_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n  return {\r\n    ...precios,\r\n    ieps_activo: name === \"ieps_activo\" ? value : precios.ieps_activo,\r\n    ieps: name === \"ieps\" ? parseFloat(value) : value ? precios.ieps : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  TextField,\r\n  MenuItem,\r\n  FormHelperText,\r\n  InputAdornment,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, FormControl, Select } from \"@material-ui/core\";\r\nimport PreciosDeCompra from \"./UnidadesVenta\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport PreciosDeVenta from \"./Precios\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\nimport { calcular_ieps, calcular_iva } from \"../calculos_precios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  required: {\r\n    color: \"red\",\r\n  },\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function RegistroInfoAdidional() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    preciosP,\r\n    update,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* CHECKBOX IVA */\r\n  const obtenerIva = async (e) => {\r\n    if (e.target.name === \"iva\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        iva: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"iva_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_iva(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  /* CHECKBOX IEPS */\r\n  const obtenerIeps = async (e) => {\r\n    if (e.target.name === \"ieps\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        ieps: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"ieps_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_ieps(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  const [precioConImpuesto, setPrecioConImpuesto] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuesto, setPrecioSinImpuesto] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [PCI] = useDebounce(precioConImpuesto, 800);\r\n  const [PSI] = useDebounce(precioSinImpuesto, 800);\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioConImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let total_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio con impuesto */\r\n    precio_con_impuesto = parseFloat(value);\r\n    total_impuesto =\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva) +\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_sin_impuesto = parseFloat(value) / parseFloat(total_impuesto + 1);\r\n    iva =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioSinImpuesto(parseFloat(precio_sin_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioSinImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio sin impuesto */\r\n    precio_sin_impuesto = parseFloat(value);\r\n    iva =\r\n      parseFloat(value) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(value) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    if (!precios.iva_activo && !precios.ieps_activo) {\r\n      precio_con_impuesto = precio_sin_impuesto /*  / precios.unidad_de_compra.cantidad */;\r\n      precio_unitario_con_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    }\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioConImpuesto(parseFloat(precio_con_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE UNIDAD DE COMPRA */\r\n  const obtenerUnidadCompra = (e, child) => {\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      let precio =\r\n        precios.unidad_de_compra.cantidad * unidadVentaXDefecto.precio;\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad,\r\n          unidad,\r\n          unidad_activa: true,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Caja\" ? \"Pz\" : \"kg\",\r\n          codigo_unidad: unidad === \"Caja\" ? \"H87\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: false,\r\n        });\r\n        /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad,\r\n            codigo_unidad,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: unidad,\r\n            codigo_unidad,\r\n          },\r\n        }); */\r\n      } else {\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Pz\" ? \"Pz\" : unidad === \"Lt\" ? \"Lt \": \"kg\",\r\n          codigo_unidad: unidad === \"Pz\" ? \"H87\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad: unidad === \"Pz\" ? \"XBX\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          unidad: unidad === \"Pz\" ? \"Caja\" : unidad === \"Caja\" ? \"LTR\" : \"Costal\",\r\n          unidad_activa: false,\r\n          unidad_principal: false,\r\n        });\r\n      }\r\n\r\n      /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad: e.target.value,\r\n            cantidad: 1,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: e.target.value,\r\n          },\r\n        }); */\r\n      setPrecios({\r\n        ...precios,\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad,\r\n          codigo_unidad,\r\n          cantidad: 1,\r\n        },\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n    } else {\r\n      if (!precios.iva_activo && !precios.ieps_activo) {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      } else {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_con_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      }\r\n      if (\r\n        precios.unidad_de_compra.unidad === \"Caja\" ||\r\n        precios.unidad_de_compra.unidad === \"Costal\"\r\n      ) {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          cantidad: parseFloat(e.target.value),\r\n        });\r\n      }\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        cantidad: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioConImpuesto(PCI);\r\n  }, [PCI]);\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioSinImpuesto(PSI);\r\n  }, [PSI]);\r\n\r\n  return (\r\n    <Box>\r\n      <div /* className={classes.input} */>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Impuestos</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.iva_activo}\r\n                        onChange={obtenerIva}\r\n                        name=\"iva_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"iva\"\r\n                id=\"form-producto-iva\"\r\n                variant=\"outlined\"\r\n                value={precios.iva}\r\n                onChange={obtenerIva}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 16,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.iva === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                porcentaje IEPS\r\n              </Typography>\r\n              <TextField\r\n                disabled={!precios.ieps_activo}\r\n                fullWidth\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.ieps_activo}\r\n                        onChange={obtenerIeps}\r\n                        name=\"ieps_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"ieps\"\r\n                id=\"form-producto-ieps\"\r\n                variant=\"outlined\"\r\n                value={precios.ieps}\r\n                onChange={obtenerIeps}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 0,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.ieps === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {/* \r\n          <Grid item md={4} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\" ml={1}>\r\n              <Alert severity=\"info\">Selecciona los impuestos aplicables</Alert>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n        <Box my={3}>\r\n          <Typography>\r\n            <b>Precios y unidad de compra</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                Unidad Compra\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={validacion.error && !precios.unidad_de_compra.unidad}\r\n                >\r\n                  {precios.granel ? (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes_granel.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  )}\r\n                  <FormHelperText>{validacion.message}</FormHelperText>\r\n                </FormControl>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap align=\"center\" className={classes.titulos}>\r\n                Unidad Conversion\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  {precios.unidad_de_compra.unidad === \"Caja\"\r\n                    ? \"Pz\"\r\n                    : precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? \"Kg\"\r\n                    : precios.unidad_de_compra.unidad}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Factor por Unidad\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={\r\n                  precios.unidad_de_compra.unidad === \"Caja\" ||\r\n                  precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? false\r\n                    : true\r\n                }\r\n                type=\"number\"\r\n                InputProps={{ inputProps: { min: 1 } }}\r\n                size=\"small\"\r\n                error={validacion.error && !precios.unidad_de_compra.cantidad}\r\n                name=\"cantidad\"\r\n                id=\"form-producto-cantidad\"\r\n                variant=\"outlined\"\r\n                value={precios.unidad_de_compra.cantidad}\r\n                helperText={validacion.message}\r\n                onChange={obtenerUnidadCompra}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio sin impuestos\r\n              </Typography>\r\n              <TextField\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !precioSinImpuesto}\r\n                name=\"precio_sin_impuesto\"\r\n                id=\"form-producto-precio_sin_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioSinImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setPrecioSinImpuesto(e.target.value)}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioSinImpuesto(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioSinImpuesto(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio con impuestos\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo && !precios.ieps_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                error={validacion.error && !precioConImpuesto}\r\n                name=\"precio_con_impuesto\"\r\n                id=\"form-producto-precio_con_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioConImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setPrecioConImpuesto(e.target.value)}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioConImpuesto(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioConImpuesto(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={3} />\r\n        <Grid container spacing={2}>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>$ {parseFloat(precios.precio_de_compra.iva).toFixed(2)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IEPS\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>$ {parseFloat(precios.precio_de_compra.ieps).toFixed(2)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario sin impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                    precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                  ).toFixed(2)}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario con impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                    precios.unidad_de_compra.precio_unitario_con_impuesto\r\n                  ).toFixed(2)}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Precios de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Box display=\"flex\">\r\n          <PreciosDeVenta />\r\n        </Box>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Unidades de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n        <Box>\r\n          <PreciosDeCompra />\r\n        </Box>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\nimport { initial_state_precios } from \"../Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport const ComprasContext = createContext();\r\n\r\nexport const ComprasProvider = ({ children }) => {\r\n  const [datosProducto, setDatosProducto] = useState({\r\n    producto: {},\r\n    costo: 0,\r\n    cantidad: 1,\r\n    cantidad_regalo: 0,\r\n    unidad_regalo: \"\",\r\n    cantidad_total: 0,\r\n    descuento_porcentaje: 0,\r\n    descuento_precio: 0,\r\n    iva_total: 0,\r\n    ieps_total: 0,\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    mantener_precio: true,\r\n    impuestos_descuento: 0,\r\n    subtotal_descuento: 0,\r\n    total_descuento: 0,\r\n  });\r\n\r\n  const [datosCompra, setDatosCompra] = useState({\r\n    productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n  });\r\n\r\n  const [preciosVenta, setPreciosVenta] = useState([\r\n    {\r\n      numero_precio: 1,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 2,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 3,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 4,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 5,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 6,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n  ]);\r\n\r\n  const [productoOriginal, setProductoOriginal] = useState({\r\n    precios: initial_state_precios,\r\n  });\r\n  const [productosCompra, setProductosCompra] = useState([]);\r\n  const [isEditing, setIsEditing] = useState({});\r\n  const [editFinish, setEditFinish] = useState(false);\r\n  const [costo, setCosto] = useState(0);\r\n  const [cantidad, setCantidad] = useState(1);\r\n  const [issue, setIssue] = useState(false);\r\n  const [loadingProductos, setLoadingProductos] = useState(false);\r\n\r\n  return (\r\n    <ComprasContext.Provider\r\n      value={{\r\n        datosProducto,\r\n        setDatosProducto,\r\n        productosCompra,\r\n        setProductosCompra,\r\n        datosCompra,\r\n        setDatosCompra,\r\n        productoOriginal,\r\n        setProductoOriginal,\r\n        preciosVenta,\r\n        setPreciosVenta,\r\n        isEditing,\r\n        setIsEditing,\r\n        editFinish,\r\n        setEditFinish,\r\n        costo,\r\n        setCosto,\r\n        cantidad,\r\n        setCantidad,\r\n        issue,\r\n        setIssue,\r\n        loadingProductos,\r\n        setLoadingProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </ComprasContext.Provider>\r\n  );\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { alpha } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) {\r\n  const classes = useStyles();\r\n  const { presentaciones, setPresentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  /* useEffect(() => {\r\n    let nuevo_array = [];\r\n    mostrar_presentaciones.forEach((element) => {\r\n      let obj = {\r\n        codigo_barras: element.codigo_barras,\r\n        cantidad: parseFloat(element.cantidad),\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        color: element.color,\r\n        existencia: element.existencia,\r\n        medida: element.medida,\r\n        nombre_comercial: element.nombre_comercial,\r\n      };\r\n\r\n      if (element.descuento_activo === true) {\r\n        obj.aplicar_descuento = true;\r\n        obj.precio = parseFloat(element.descuento.precio_neto);\r\n      } else {\r\n        obj.aplicar_descuento = false;\r\n        obj.precio = parseFloat(element.precio);\r\n      }\r\n      nuevo_array.push(obj);\r\n    });\r\n    setPresentaciones(nuevo_array);\r\n  }, []); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                {!withoutPrice ? (\r\n                  <Fragment>\r\n                    <TableCell>Precio</TableCell>\r\n                    <TableCell padding=\"checkbox\">Aplicar descuento</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                {!onlyPrice ? (\r\n                  <Fragment>\r\n                    {from && from === \"compra\" ? (\r\n                      <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                    ) : null}\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                    withoutPrice={withoutPrice}\r\n                    onlyPrice={onlyPrice}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_element_presentacion_descuento = {\r\n    ...copy_presentaciones[index].descuento,\r\n  };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.cantidad_nueva) {\r\n      copy_element_presentacion.cantidad_nueva = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      if (value === \"0\") {\r\n        copy_element_presentacion.existencia = false;\r\n      } else {\r\n        copy_element_presentacion.existencia = true;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n    } else if (name === \"cantidad_nueva\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad_nueva = \"\";\r\n        copy_element_presentacion.existencia = copy_producto.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad_nueva = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = precios;\r\n      let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n      let iva_precio = parseFloat((precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)).toFixed(2));\r\n      let ieps_precio = parseFloat((precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)).toFixed(2));\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n      \r\n\r\n      let {descuento_activo, descuento} = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          (precio_con_descuento).toFixed(2)\r\n        );\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n        copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n      }\r\n      copy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n      copy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n      copy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n      copy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n      copy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.descuento_activo = value;\r\n\r\n    let precio_con_descuento = 0;\r\n    let { iva, ieps } = precios;\r\n    let {descuento, precio} = copy_element_presentacion;\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio / (suma + 1)).toFixed(2));\r\n\r\n    if(value){\r\n      let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n    }else{\r\n      precio_con_descuento = precio\r\n    }\r\n    \r\n    copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n      (precio_con_descuento).toFixed(2)\r\n    );\r\n    /* copy_element_presentacion.precio = parseFloat(value); */\r\n    copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n  \r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              presentaciones.length > 0 && !copy_producto.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {presentaciones.length === 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : presentaciones.length > 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      {!withoutPrice ? (\r\n        <Fragment>\r\n          <TableCell width={110} className={classes.input}>\r\n            <Input\r\n              inputRef={textfield}\r\n              onChange={(e) => obtenerDatos(e)}\r\n              disabled={disabledInput}\r\n              value={copy_producto.precio}\r\n              type=\"number\"\r\n              name=\"precio\"\r\n            />\r\n          </TableCell>\r\n          <TableCell width={200}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              {copy_producto.descuento_activo !== undefined &&\r\n              copy_producto.descuento_activo !== null ? (\r\n                <Fragment>\r\n                  <Checkbox\r\n                    checked={\r\n                      copy_producto.descuento_activo === true\r\n                        ? copy_producto.descuento_activo\r\n                        : false\r\n                    }\r\n                    onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                    icon={<LocalOfferOutlined />}\r\n                    checkedIcon={<LocalOffer />}\r\n                    inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                    color=\"primary\"\r\n                    disabled={copy_producto.descuento_activo === null}\r\n                  />\r\n                  <Typography\r\n                    color={\r\n                      copy_producto.descuento_activo === true\r\n                        ? \"primary\"\r\n                        : \"textSecondary\"\r\n                    }\r\n                  >\r\n                    %\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.porciento\r\n                        : 0\r\n                    )}{\" \"}\r\n                    $\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.precio_neto\r\n                        : 0\r\n                    )}\r\n                  </Typography>\r\n                </Fragment>\r\n              ) : null}\r\n            </Box>\r\n          </TableCell>\r\n        </Fragment>\r\n      ) : null}\r\n      {!onlyPrice ? (\r\n        <Fragment>\r\n          {from && from === \"compra\" ? (\r\n            <Fragment>\r\n              <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n              <TableCell padding=\"checkbox\">\r\n                <Input\r\n                  inputRef={textfield}\r\n                  onChange={(e) => obtenerDatos(e)}\r\n                  disabled={disabledInput}\r\n                  value={copy_producto.cantidad_nueva}\r\n                  type=\"tel\"\r\n                  name=\"cantidad_nueva\"\r\n                />\r\n              </TableCell>\r\n            </Fragment>\r\n          ) : (\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.cantidad}\r\n                type=\"tel\"\r\n                name=\"cantidad\"\r\n              />\r\n            </TableCell>\r\n          )}\r\n        </Fragment>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FormularioPrecios from \"../../../Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport { Close, LocalAtm, SquareFoot } from \"@material-ui/icons\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { CircularProgress, DialogTitle } from \"@material-ui/core\";\r\nimport TablaPresentaciones from \"../../../Catalogos/Producto/TallasColores/TablaPresentaciones\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      style={{ height: \"80vh\" }}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function AlertDialogSlide({ agregarCompra, handleClose, cargando }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const { datosProducto, productoOriginal /* setDatosProducto */ } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    setUnidadesVenta,\r\n    setPreciosP,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  const resetProducto = () => {\r\n    /* SET STATES WHEN UPDATING */\r\n    const { precios_producto, ...new_precios } = productoOriginal.precios;\r\n    const { unidades_de_venta } = productoOriginal;\r\n    let unidades_secundaria = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    /* setDatosProducto({...datosProducto, mantener_precio: true}) */\r\n    setPrecios(new_precios);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(productoOriginal.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    toggleDrawer();\r\n  };\r\n\r\n  const actualizarContextProducto = () => {\r\n    toggleDrawer();\r\n    let precio_unitario_con_impuesto =\r\n      datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n    let precio_unitario_sin_impuesto =\r\n      precios.precio_de_compra.precio_sin_impuesto /\r\n      precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_con_impuesto: datosProducto.costo,\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(6)\r\n        ),\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(6)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        onClick={() => actualizarContextProducto()}\r\n      >\r\n        Actualizar precios\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => resetProducto()}\r\n        aria-labelledby=\"alert-precios-compra-title\"\r\n        aria-describedby=\"alert-precios-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n          <DialogTitle style={{ padding: 0 }}>\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab label=\"Precios\" icon={<LocalAtm />} {...a11yProps(0)} />\r\n                <Tab\r\n                  label=\"Precios Medidas\"\r\n                  icon={<SquareFoot />}\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n            </AppBar>\r\n          </DialogTitle>\r\n        ) : null}\r\n        <DialogContent>\r\n          {datosProducto.producto.datos_generales &&\r\n          datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n            <div>\r\n              <TabPanel value={value} index={0}>\r\n                <FormularioPrecios />\r\n              </TabPanel>\r\n              <TabPanel value={value} index={1}>\r\n                <TablaPresentaciones\r\n                  from=\"compras\"\r\n                  datos={datosProducto.producto}\r\n                  setOnUpdate={setOnUpdate}\r\n                  onUpdate={onUpdate}\r\n                  onlyPrice={true}\r\n                />\r\n              </TabPanel>\r\n            </div>\r\n          ) : (\r\n            <FormularioPrecios />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => resetProducto()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => {\r\n              /* setDatosProducto({...datosProducto, mantener_precio: false}) */\r\n              agregarCompra(\"actualizar_precios\");\r\n              handleClose();\r\n              toggleDrawer();\r\n            }}\r\n            startIcon={cargando ? <CircularProgress color=\"inherit\" size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            disabled={!precios.precio_de_compra.precio_con_impuesto}\r\n          >\r\n            Aceptar y agregar compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONSULTAS = gql`\r\n  query obtenerConsultasProducto($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultasProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      categorias {\r\n        _id\r\n        categoria\r\n        subcategorias {\r\n          _id\r\n          subcategoria\r\n        }\r\n      }\r\n      departamentos {\r\n        _id\r\n        nombre_departamentos\r\n      }\r\n      marcas {\r\n        _id\r\n        nombre_marca\r\n      }\r\n      colores {\r\n        _id\r\n        nombre\r\n        hex\r\n      }\r\n      tallas {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      calzados {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      centro_costos {\r\n        _id\r\n        cuenta\r\n        subcuentas {\r\n          _id\r\n          subcuenta\r\n        }\r\n      }\r\n      codigos {\r\n        _id\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO = gql`\r\n  mutation crearProducto($input: CrearProductoInput) {\r\n    crearProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS = gql`\r\n  query obtenerProductos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $almacen: ID\r\n    $existencias: Boolean\r\n  ) {\r\n    obtenerProductos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      almacen: $almacen\r\n      existencias: $existencias\r\n    ) {\r\n      _id\r\n      centro_de_costos {\r\n        id_cuenta\r\n        cuenta\r\n        id_subcuenta\r\n        subcuenta\r\n      }\r\n      unidades_de_venta {\r\n        _id\r\n        precio\r\n        cantidad\r\n        unidad\r\n        codigo_unidad\r\n        unidad_principal\r\n        codigo_barras\r\n        id_producto\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        default\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      empresa\r\n      imagenes {\r\n        location_imagen\r\n        extencion_imagen\r\n        url_imagen\r\n        key_imagen\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          codigo_unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n          codigo_unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n        granel\r\n      }\r\n      medidas_producto {\r\n        _id\r\n        cantidad\r\n        almacen\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        codigo_barras\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        existencia\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        nombre_comercial\r\n        precio\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      inventario_general {\r\n        _id\r\n        cantidad_existente\r\n        unidad_inventario\r\n        codigo_unidad\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        id_almacen_general\r\n        eliminado\r\n      }\r\n      medidas_registradas\r\n      sucursal\r\n      usuario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_PRODUCTO = gql`\r\n  mutation actualizarProducto($id: ID!, $input: ActualizarProductoInput) {\r\n    actualizarProducto(id: $id, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_PRODUCTO = gql`\r\n  mutation eliminarProducto($id: ID!) {\r\n    eliminarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PRODUCTOS_ELIMINADOS = gql`\r\n  query obtenerProductosInactivos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerProductosInactivos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      producto {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n      }\r\n      cantidad_existente\r\n      unidad_de_inventario\r\n      id_almacen\r\n      eliminado\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTIVAR_PRODUCTOS = gql`\r\n  mutation activarProducto($id: ID!) {\r\n    activarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO_RAPIDO = gql`\r\n  mutation crearProductoRapido($input: CrearProductoRapidoInput) {\r\n    crearProductoRapido(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_COLOR = gql`\r\n\tmutation crearColor($input: CrearColorInput) {\r\n\t\tcrearColor(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_COLORES = gql`\r\n\tquery obtenerColores($sucursal: String!) {\r\n\t\tobtenerColores(sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_COLOR = gql`\r\n\tmutation actualizarColor($input: ActualizarColorInput, $id: ID!) {\r\n\t\tactualizarColor(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_COLOR = gql`\r\n\tmutation eliminarColor($id: ID!) {\r\n\t\teliminarColor(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_COLOR } from \"../../../../../gql/Catalogos/colores\";\r\n\r\nexport default function CrearColorProducto({ refetch }) {\r\n  const [color, setColor] = useState({});\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      return;\r\n    }\r\n    try {\r\n      const colores = values;\r\n      await crearColor({\r\n        variables: {\r\n          input: {\r\n            nombre: colores.nombre,\r\n            hex: colores.hex,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add />\r\n          nuevo color\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        /* onClose={() => toggleModal()} */\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box mt={2}>\r\n              <Typography>Color seleccionado:</Typography>\r\n              {!values.hex ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n                  <Typography color=\"secondary\">NINGUNO</Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box bgcolor={values.hex} height={30} width={220} />\r\n              )}\r\n            </Box>\r\n            <Box my={2}>\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({\r\n                      ...values,\r\n                      nombre: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                  fullWidth\r\n                  focused\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_TALLAS = gql`\r\n\tmutation crearTalla($input: CrearTallaInput) {\r\n\t\tcrearTalla(input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_TALLAS = gql`\r\n\tquery obtenerTallas($sucursal: String!, $tipo: String! ) {\r\n\t\tobtenerTallas(sucursal: $sucursal, tipo: $tipo) {\r\n\t\t\t_id\r\n\t\t\ttalla\r\n\t\t\ttipo\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_TALLA = gql`\r\n\tmutation actualizarTalla($input: ActualizarTallaInput, $id: ID!) {\r\n\t\tactualizarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_TALLA = gql`\r\n\tmutation eliminarTalla($input: ActualizarTallaInput,$id: ID!) {\r\n\t\teliminarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_TALLAS } from \"../../../../../gql/Catalogos/tallas\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function CrearTallasProducto({\r\n  setMedidasSeleccionadas,\r\n  refetch,\r\n}) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = useContext(RegProductoContext);\r\n\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      await crearTalla({\r\n        variables: {\r\n          input: {\r\n            talla: nueva_talla,\r\n            tipo: datos_generales.tipo_producto,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setMedidasSeleccionadas([nueva_talla]);\r\n      setValue(\"\");\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add /> Nueva talla\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              my={2}\r\n            >\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  id=\"outlined-error-helper-text\"\r\n                  label={\r\n                    datos_generales.tipo_producto === \"ROPA\"\r\n                      ? \"Talla\"\r\n                      : \"Número\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  focused\r\n                  fullWidth\r\n                  value={value}\r\n                  onChange={(e) => setValue(e.target.value.toUpperCase())}\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip, Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CrearColorProducto from \"./crearColor\";\r\nimport CrearTallasProducto from \"./crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  from,\r\n  withoutPrice,\r\n}) {\r\n  const {\r\n    /* almacen_inicial,\r\n    setAlmacenInicial, */\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    /* almacenes, */ colores,\r\n    tallas,\r\n    calzados,\r\n  } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const classes = useStyles();\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    const copy_presentaciones = [...presentaciones];\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      if (element.color._id) colors.push(element.color);\r\n      if (element.medida._id) medidas.push(element.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [presentaciones]);\r\n\r\n  /* const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  }; */\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Box>\r\n        <Grid container spacing={2}>\r\n          {/* {!almacen_existente ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\" >\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                    {presentaciones.length > 0 && !almacen_inicial.almacen ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n                  {from === \"compra\" ? null : (\r\n                    <AlmacenProvider>\r\n                      <ContainerRegistroAlmacen\r\n                        accion=\"registrar\"\r\n                        refetch={refetch}\r\n                      />\r\n                    </AlmacenProvider>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>\r\n                  {datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              <Grid container>\r\n                {medidas.map((talla, index) => (\r\n                  <RenderTallas\r\n                    key={index}\r\n                    talla={talla}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              <Grid container>\r\n                {colores.map((color, index) => (\r\n                  <Colores\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={3} />\r\n        <TablaPresentaciones\r\n          from={from}\r\n          withoutPrice={withoutPrice}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  talla,\r\n  coloresSeleccionados,\r\n  medidasSeleccionadas,\r\n  setMedidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [seleccionarMedidas]);\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: producto_medida,\r\n          color: { nombre: \"\", hex: \"\" },\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: iva_precio,\r\n            ieps_precio: ieps_precio,\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: iva_precio,\r\n              ieps_precio: ieps_precio,\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: medidas_seleccionadas_temp[k],\r\n            color: array_medidad_finales[i].color,\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: {},\r\n            color: objeto_presentaciones_final.color,\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    presentaciones,\r\n    setPresentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let iva_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: {},\r\n          color: producto_color,\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: iva_precio,\r\n            ieps_precio: ieps_precio,\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: iva_precio,\r\n              ieps_precio: ieps_precio,\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: array_medidad_finales[i].medida,\r\n            color: coloresSeleccionados[k],\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: objeto_presentaciones_final.medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { Button, CircularProgress, Tooltip } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Done, SquareFoot } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTAS } from \"../../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport TallasProducto from \"../../../Catalogos/Producto/TallasColores/TallasColores\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AlertDialogSlide({verificate, setVerificate}) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datosProducto, datosCompra, setLoadingProductos } = useContext(ComprasContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  /* useEffect(() => {\r\n    if(loading){\r\n      setLoadingProductos(true);\r\n    }else{\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]); */\r\n\r\n  if (loading)\r\n    return (\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        disabled={true}\r\n        startIcon={<CircularProgress size={16} color=\"inherit\" />}\r\n      >\r\n        Medidas\r\n      </Button>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const toggleDrawer = () => {\r\n    setOpen(!open);\r\n    setVerificate(false);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Selecciona medidas y colores\" disableHoverListener={true} open={verificate} placement=\"top\">\r\n        <Button\r\n          color={verificate ? \"secondary\" :\"inherit\"}\r\n          variant=\"outlined\"\r\n          size=\"medium\"\r\n          onClick={() => toggleDrawer()}\r\n          startIcon={<SquareFoot />}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n        >\r\n          Medidas\r\n        </Button>\r\n      </Tooltip>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={toggleDrawer}\r\n        aria-labelledby=\"alert-tallas-compra\"\r\n        aria-describedby=\"alert-tallas-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <DialogContent>\r\n          <TallasProducto\r\n            datos={datosProducto.producto}\r\n            obtenerConsultasProducto={obtenerConsultasProducto}\r\n            refetch={refetch}\r\n            from=\"compra\"\r\n            almacen={datosCompra.almacen}\r\n            withoutPrice={true}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import $ from \"jquery\"\r\nimport jQuery from \"jquery\"\r\n\r\nvar valuesFacturama = {\r\n    token: \"QUJTT0xVQ0lPTkVTOkxlb24yMDE4Iw==\",\r\n    url: \"https://apisandbox.facturama.mx/\"\r\n};\r\n\r\n$.ajaxSetup({\r\n    beforeSend: function (xhr) {\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" + valuesFacturama.token);\r\n    }\r\n});\r\n\r\nfunction facturama() {\r\n\r\n    var settings = {\r\n        url: valuesFacturama.url\r\n    };\r\n\r\n    function retrieve(path, id, callback) {\r\n        return jQuery.get(settings.url + path + '/' + id, undefined, callback, \"json\");\r\n    }\r\n\r\n    function list(path, callback) {\r\n        return jQuery.get(settings.url + path, undefined, callback, \"json\");\r\n    }\r\n\r\n    function listWithParam(path, param, callback) {\r\n        return jQuery.get(settings.url + path + param, undefined, callback, \"json\");\r\n    }\r\n\r\n    function postSyncWithParam(path, param, callback) {\r\n        $.ajax({\r\n            url: settings.url + path + param,\r\n            type: 'POST',\r\n            async: false,\r\n            success: callback\r\n        });\r\n    }\r\n\r\n    function postSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function putSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'PUT',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function deleteSyncWithParam(path, param, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path + '/' + param,\r\n            type: 'DELETE',\r\n            async: false,\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    var facturamaObject = {\r\n        Clients: {\r\n            Get: function (id, callback) {\r\n                return retrieve('client', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('client', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('client', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('client/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('client/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Products: {\r\n            Get: function (id, callback) {\r\n                return retrieve('product', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('product', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('product', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('product/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('product/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        BranchOffice: {\r\n            Get: function (id, callback) {\r\n                return retrieve('branchOffice', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('branchOffice', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('branchOffice', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('branchOffice', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('branchOffice/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Series: {\r\n            List: function (id, callback) {\r\n                return retrieve('serie', id, callback);\r\n            },\r\n            Create: function (idBranch, data, callback, callbackError) {\r\n                postSyncWithData('serie/' + idBranch, data, callback, callbackError);\r\n            },\r\n            Remove: function (idBranch, name, callback, callbackError) {\r\n                deleteSyncWithParam('serie/' + idBranch, name, callback, callbackError);\r\n            },\r\n            Update: function (idBranch, name, data, callback, callbackError) {\r\n                putSyncWithData('serie/' + idBranch + '/' + name, data, callback, callbackError);\r\n            }\r\n        },\r\n        Cfdi: {\r\n            Get: function (id, callback) {\r\n                return retrieve('cfdi', id, callback);\r\n            },\r\n            List: function (param, callback) {\r\n                return listWithParam('cfdi', param, callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('2/cfdis', data, callback, callbackError);\r\n            },\r\n            Send: function (param, callback) {\r\n                postSyncWithParam('cfdi', param, callback);\r\n            },\r\n            Cancel: function (params, callback, callbackError) {\r\n                deleteSyncWithParam('cfdi', params, callback, callbackError);\r\n            },\r\n            Download: function (format, type, id, callback) {\r\n                retrieve('cfdi/' + format + '/' + type, id, callback);\r\n            },\r\n            Acuse: function (format, type, id, callback) {\r\n                retrieve('acuse/' + format + '/' + type, id, callback);\r\n            }\r\n        },\r\n        TaxEntity: {\r\n            Get: function (callback) {\r\n                return list('taxEntity', callback);\r\n            },\r\n            Update: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity', data, callback, callbackError);\r\n            },\r\n            UploadCsd: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadCsd', data, callback, callbackError);\r\n            },\r\n            UploadImage: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadLogo', data, callback, callbackError);\r\n            }\r\n        },\r\n        Catalogs: {\r\n            States: function (country, callback) {\r\n                return list('catalogs/municipalities?countryCode' + country, callback);\r\n            },\r\n            Municipalities: function (state, callback) {\r\n                return list('catalogs/municipalities?stateCode' + state, callback);\r\n            },\r\n            Localities: function (state, callback) {\r\n                return list('catalogs/localities?stateCode' + state, callback);\r\n            },\r\n            Neighborhoods: function (postalCode, callback) {\r\n                return list('catalogs/neighborhoods?postalCode' + postalCode, callback);\r\n            },\r\n            ProductsOrServices: function (keyword, callback) {\r\n                return list('catalogs/ProductsOrServices?keyword=' + keyword, callback);\r\n            },\r\n            PostalCodes: function (keyword, callback) {\r\n                return list('catalogs/PostalCodes?keyword=' + keyword, callback);\r\n            },\r\n            Units: function (callback) {\r\n                return list('catalogs/Units', callback);\r\n            },\r\n            Currencies: function (callback) {\r\n                return list('catalogs/Currencies', callback);\r\n            },\r\n            Countries: function (callback) {\r\n                return list('catalogs/Countries', callback);\r\n            },\r\n            PaymentForms: function (callback) {\r\n                return list('catalogs/PaymentForms', callback);\r\n            },\r\n            PaymentMethods: function (callback) {\r\n                return list('catalogs/PaymentMethods', callback);\r\n            },\r\n            FederalTaxes: function (callback) {\r\n                return list('catalogs/FederalTaxes', callback);\r\n            },\r\n            FiscalRegimens: function (callback) {\r\n                return list('catalogs/FiscalRegimens', callback);\r\n            },\r\n            CfdiTypes: function (callback) {\r\n                return list('catalogs/CfdiTypes', callback);\r\n            },\r\n            RelationTypes: function (callback) {\r\n                return list('catalogs/RelationTypes', callback);\r\n            },\r\n            CfdiUses: function (keyword, callback) {\r\n                return list('catalogs/CfdiUses?keyword=' + keyword, callback);\r\n            }\r\n        }\r\n    };\r\n\r\n    facturamaObject.getToken = function () {\r\n        return \"Basic \" + valuesFacturama.token;\r\n    };\r\n\r\n    facturamaObject.getBaseUri = function () {\r\n        return settings.url;\r\n    };\r\n\r\n    return facturamaObject;\r\n}\r\n\r\n export default facturama()\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CODIGO_PRODUCTO = gql`\r\n  mutation crearCodigoProducto($input: CodigoCatalogoProductoInput) {\r\n    crearCodigoProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CODIGOS_PRODUCTO = gql`\r\n  query obtenerCodigosProducto($empresa: ID!, $sucursal: ID) {\r\n    obtenerCodigosProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      Name\r\n      Value\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CODIGO_PRODUCTO = gql`\r\n  mutation eliminarCodigoProducto($id: ID!) {\r\n    eliminarCodigoProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Close, Done, Search } from \"@material-ui/icons\";\r\nimport {\r\n  CircularProgress,\r\n  IconButton,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport {\r\n  CREAR_CODIGO_PRODUCTO,\r\n  ELIMINAR_CODIGO_PRODUCTO,\r\n} from \"../../../../../gql/CatalogosSat/catalogoProductosSat\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  spin_container: {\r\n    position: \"absolute\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  spin: {\r\n    zIndex: 9999,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CatalogosProductosSAT({ codigos, refetch }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading_save, setLoadingSave] = useState(false);\r\n  const [loading_delete, setLoadingDelete] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState({});\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [crearCodigoProducto] = useMutation(CREAR_CODIGO_PRODUCTO);\r\n  const [eliminarCodigoProducto] = useMutation(ELIMINAR_CODIGO_PRODUCTO);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const limpiarDataModal = () => {\r\n    setSelectedIndex({});\r\n    setProductos([]);\r\n    setBusqueda(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  const [value] = useDebounce(busqueda, 500);\r\n\r\n  const handleOk = async (selectedIndex) => {\r\n    const { Name, Value } = selectedIndex;\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name,\r\n        Value,\r\n      },\r\n    });\r\n    //Crear Codigo product a la BD\r\n    try {\r\n      setLoadingSave(true);\r\n      const result = await crearCodigoProducto({\r\n        variables: {\r\n          input: {\r\n            Name,\r\n            Value,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.crearCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setLoadingSave(false);\r\n        refetch();\r\n        limpiarDataModal();\r\n      }\r\n    } catch (error) {\r\n      setLoadingSave(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarCodigoBD = async (data) => {\r\n    try {\r\n      setLoadingDelete(true);\r\n      const result = await eliminarCodigoProducto({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.eliminarCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosGenerales({\r\n          ...datos_generales,\r\n          clave_producto_sat: {\r\n            Name: \"\",\r\n            Value: \"\",\r\n          },\r\n        });\r\n        setLoadingDelete(false);\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setLoadingDelete(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    limpiarDataModal();\r\n  };\r\n\r\n  const obtenerCampos = (data) => {\r\n    if (!data) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        clave_producto_sat: {\r\n          Name: \"\",\r\n          Value: \"\",\r\n        },\r\n      });\r\n      return null;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name: data.Name,\r\n        Value: data.Value,\r\n      },\r\n    });\r\n  };\r\n\r\n  const buscarCatalogo = async () => {\r\n    if (!value) {\r\n      setProductos([]);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await Facturama.Catalogs.ProductsOrServices(\r\n        value,\r\n        function (result) {\r\n          setProductos(result);\r\n          setLoading(false);\r\n        },\r\n        function (error) {\r\n          if (error && error.responseJSON) {\r\n            setError(error.responseJSON);\r\n          }\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } catch (error) {\r\n      if (error && error.responseJSON) {\r\n        setError(error.responseJSON.Message);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    buscarCatalogo();\r\n  }, [value]);\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography className={classes.titulos}>Clave de producto SAT</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"catalogos-bd-productos\"\r\n          size=\"small\"\r\n          options={codigos}\r\n          disabled={loading_delete}\r\n          getOptionLabel={(option) =>\r\n            option.Name ? `${option.Value} - ${option.Name}` : \"\"\r\n          }\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <Fragment>\r\n                    {loading_delete ? <CircularProgress size={20} /> : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n          renderOption={(option) => (\r\n            <Fragment>\r\n              {`${option.Value} - ${option.Name}`}\r\n              <div style={{ flexGrow: 1 }} />\r\n              <IconButton size=\"small\" onClick={() => eliminarCodigoBD(option)}>\r\n                <Close />\r\n              </IconButton>\r\n            </Fragment>\r\n          )}\r\n          onChange={(_, data) => obtenerCampos(data)}\r\n          getOptionSelected={(option, value) => option.Value === value.Value}\r\n          value={datos_generales.clave_producto_sat}\r\n        />\r\n        <Button color=\"primary\" onClick={handleClickOpen}>\r\n          <Search />\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"alert-dialog-clave-producto\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-clave-producto\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              Catalogo de productos y servicios SAT\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleCancel()}\r\n                size=\"large\"\r\n                disabled={loading_save}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        {loading_save ? (\r\n          <div className={classes.spin_container}>\r\n            <CircularProgress className={classes.spin} size={35} />\r\n          </div>\r\n        ) : null}\r\n        <div\r\n          style={\r\n            loading_save\r\n              ? {\r\n                  pointerEvents: \"none\",\r\n                  opacity: 0.4,\r\n                }\r\n              : null\r\n          }\r\n        >\r\n          <Box p={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              label=\"producto, servicio o giro de la empresa\"\r\n              fullWidth\r\n              size=\"small\"\r\n              onChange={(e) => {\r\n                setBusqueda(e.target.value);\r\n                setError(\"\");\r\n              }}\r\n              value={busqueda}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search color=\"disabled\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              error={error ? true : false}\r\n              helperText={error ? error : \"\"}\r\n            />\r\n            <Box my={1}>\r\n              <Alert severity=\"info\">\r\n                Para seleccionar un cliente haz un doble click!\r\n              </Alert>\r\n            </Box>\r\n          </Box>\r\n\r\n          <DialogContent style={{ height: \"50vh\" }}>\r\n            <Box my={3} className={classes.root}>\r\n              {loading ? (\r\n                <Box\r\n                  display=\"flex\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                  height=\"25vh\"\r\n                >\r\n                  <CircularProgress />\r\n                </Box>\r\n              ) : (\r\n                <List dense component=\"nav\" aria-label=\"main mailbox folders\">\r\n                  {productos.map((res, index) => (\r\n                    <SelectedListItem\r\n                      key={index}\r\n                      producto={res}\r\n                      busqueda={busqueda}\r\n                      handleOk={handleOk}\r\n                      setSelectedIndex={setSelectedIndex}\r\n                      selectedIndex={selectedIndex}\r\n                    />\r\n                  ))}\r\n                </List>\r\n              )}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => handleCancel()}>Cancelar</Button>\r\n          </DialogActions>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectedListItem = ({\r\n  producto,\r\n  busqueda,\r\n  handleOk,\r\n  selectedIndex,\r\n  setSelectedIndex,\r\n}) => {\r\n  const handleListItemClick = (click, data) => {\r\n    setSelectedIndex(data);\r\n    if (click === 2) {\r\n      handleOk(data);\r\n    }\r\n  };\r\n\r\n  const contiene = busqueda.includes(\"potacio\");\r\n  if (producto.Value === \"0\" && !contiene) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ListItem\r\n        button\r\n        selected={selectedIndex.Value === producto.Value}\r\n        onClick={(e) => handleListItemClick(e.detail, producto)}\r\n      >\r\n        <ListItemText primary={`${producto.Value} - ${producto.Name}`} />\r\n      </ListItem>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n \r\nexport const CREAR_CATEGORIA = gql`\r\n\tmutation crearCategoria($input: CrearCategoriasInput) {\r\n\t\tcrearCategoria(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCATEGORIA = gql`\r\n\tmutation crearSubcategoria($idCategoria: ID!, $input: CrearSubcategoriasInput) {\r\n\t\tcrearSubcategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CATEGORIA = gql`\r\n\tmutation actualizarCategoria($idCategoria: ID!, $input: ActualizarCategoriasInput) {\r\n\t\tactualizarCategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCATEGORIA = gql`\r\n\tmutation actualizarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $input: ActualizarSubcategoriasInput) {\r\n\t\tactualizarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n\tquery obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tsubcategorias {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcategoria\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CATEGORIA = gql`\r\n\tmutation eliminarCategoria($idCategoria: ID!) {\r\n\t\teliminarCategoria(idCategoria: $idCategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ELIMINAR_SUBCATEGORIA = gql`\r\n\tmutation eliminarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!) {\r\n\t\teliminarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_DEPARTAMENTOS = gql`\r\n\tquery ObtenerDepartamentos($empresa: ID!, $sucursal: ID!){\r\n        obtenerDepartamentos(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_departamentos\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n            sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_DEPARTAMENTO = gql`\r\n\tmutation CrearDepartamentos($input: DepartamentosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearDepartamentos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEPARTAMENTO = gql`\r\n\tmutation ActualzarDepartamentos($input: DepartamentosInput, $id: ID!){\r\n        actualzarDepartamentos(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DEPARTAMENTO = gql`\r\n    mutation EliminarDepartamento($id: ID!){\r\n        eliminarDepartamento(id: $id){\r\n            message\r\n        }\r\n    }\r\n\t\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_MARCAS = gql`\r\n    query ObtenerMarcas($empresa: ID!, $sucursal: ID!){\r\n        obtenerMarcas(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_marca\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_MARCAS = gql`\r\n    mutation CrearMarca($input: MarcasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearMarcas(input: $input, empresa: $empresa, sucursal: $sucursal ){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_MARCAS = gql`\r\n    mutation actualzarMarcas($input: MarcasInput, $id: ID! ) {\r\n\t\tactualzarMarcas(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_MARCAS = gql`\r\n\tmutation eliminarMarca($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarMarca(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistrarNuevoSelect({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if(error.message){\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n      }else{\r\n        setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CategoriasProducto({ categorias, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, setSubcategorias } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        categoria: \"\",\r\n        id_categoria: \"\",\r\n      });\r\n      setSubcategorias([]);\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      categoria: value.categoria,\r\n      id_categoria: value._id,\r\n    });\r\n    setSubcategorias(value.subcategorias);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Categoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-categoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={categorias}\r\n          getOptionLabel={(option) => option.categoria}\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.categoria === value.categoria\r\n          }\r\n          value={datos_generales.categoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"categoria\"\r\n          name=\"categoria\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function SubcategoriasProducto({ refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, subcategorias, setSubcategorias } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        subcategoria: \"\",\r\n        id_subcategoria: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      subcategoria: value.subcategoria,\r\n      id_subcategoria: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Subcategoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-subcategoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={subcategorias}\r\n          getOptionLabel={(option) => option.subcategoria}\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.subcategoria === value.subcategoria\r\n          }\r\n          value={datos_generales.subcategoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"subcategoria\"\r\n          name=\"subcategoria\"\r\n          refetch={refetch}\r\n          subcategorias={subcategorias}\r\n          setSubcategorias={setSubcategorias}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function DepartamentosProducto({ departamentos, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        departamento: \"\",\r\n        id_departamento: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      departamento: value.nombre_departamentos,\r\n      id_departamento: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Departamento</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-departamento\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={departamentos}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_departamentos\r\n              ? option.nombre_departamentos\r\n              : option.departamento\r\n          }\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_departamentos === value.departamento\r\n          }\r\n          value={datos_generales.departamento ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"departamento\"\r\n          name=\"nombre_departamentos\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function MarcasProducto({ marcas, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        marca: \"\",\r\n        id_marca: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      marca: value.nombre_marca,\r\n      id_marca: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Marca</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-marca\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={marcas}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_marca ? option.nombre_marca : option.marca\r\n          }\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_marca === value.marca\r\n          }\r\n          value={datos_generales.marca ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"marca\"\r\n          name=\"nombre_marca\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  Container,\r\n  FormHelperText,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  Grid,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add, Autorenew } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"./CatalogoProductosSAT\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport CategoriasProducto from \"./Categorias\";\r\nimport SubcategoriasProducto from \"./Subcategorias\";\r\nimport DepartamentosProducto from \"./Departamentos\";\r\nimport MarcasProducto from \"./Marcas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  obligatorio: {\r\n    color: \"red\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  without_arrows: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoGenerales({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    validacion,\r\n    precios,\r\n    setPrecios,\r\n    centro_de_costos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    setSubcategorias,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    categorias,\r\n    departamentos,\r\n    marcas,\r\n    centro_costos,\r\n    codigos,\r\n  } = obtenerConsultasProducto;\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"monedero_electronico\") {\r\n      if (!e.target.value) {\r\n        setPrecios({\r\n          ...precios,\r\n          [e.target.name]: \"\",\r\n        });\r\n        return;\r\n      }\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"monedero\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n        monedero: e.target.checked,\r\n      });\r\n      return;\r\n    }\r\n    /* setPrecios({\r\n\t\t\t...precios,\r\n\t\t\t[e.target.name]: e.target.checked\r\n\t\t}); */\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const obtenerIDs = (event, child) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.categoria) {\r\n      const { subcategorias } = child.props.categoria;\r\n      setSubcategorias(subcategorias);\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (campo) => {\r\n    if (!precios.monedero_electronico) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (update) {\r\n      const categoria = categorias.filter(\r\n        (res) => res._id === datos_generales.id_categoria\r\n      );\r\n      const costos = centro_costos.filter(\r\n        (res) => res._id === centro_de_costos.id_cuenta\r\n      );\r\n      if (categoria.length > 0) {\r\n        setSubcategorias(categoria[0].subcategorias);\r\n      }\r\n      if (costos.length > 0) {\r\n        setSubcostos(costos[0].subcuentas);\r\n      }\r\n    }\r\n  }, [update]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"lg\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              fullWidth\r\n              className={classes.without_arrows}\r\n            >\r\n              <Typography className={classes.titulos}>\r\n                Código de barras\r\n              </Typography>\r\n              <OutlinedInput\r\n                disabled={update && datos_generales.codigo_barras}\r\n                style={{ padding: 0 }}\r\n                id=\"form-producto-codigo-barras\"\r\n                name=\"codigo_barras\"\r\n                value={\r\n                  datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"\"\r\n                }\r\n                type=\"number\"\r\n                onChange={obtenerCampos}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      disabled={update && datos_generales.codigo_barras}\r\n                      onClick={() => GenCodigoBarras()}\r\n                      /* edge=\"end\" */\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Autorenew />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Clave alterna\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.clave_alterna}\r\n              name=\"clave_alterna\"\r\n              id=\"form-producto-clave-alterna\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.clave_alterna\r\n                  ? datos_generales.clave_alterna\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Tipo de producto\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.tipo_producto}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_producto\"\r\n                value={\r\n                  datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCampos}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n                <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n                <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n              </Select>\r\n              <FormHelperText>{validacion.message}</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={5} xs={12}>\r\n            <CatalogosProductosSAT codigos={codigos} refetch={refetch} />\r\n          </Grid>\r\n\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre comercial\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_comercial}\r\n              name=\"nombre_comercial\"\r\n              id=\"form-producto-nombre-comercial\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_comercial\r\n                  ? datos_generales.nombre_comercial\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre genérico\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_generico}\r\n              name=\"nombre_generico\"\r\n              id=\"form-producto-nombre-generico\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_generico\r\n                  ? datos_generales.nombre_generico\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>Descripción</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descripcion\"\r\n              id=\"form-producto-descripcion\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.descripcion ? datos_generales.descripcion : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n\r\n          <Grid item md={6} xs={12}>\r\n            <CategoriasProducto refetch={refetch} categorias={categorias} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <SubcategoriasProducto refetch={refetch} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <DepartamentosProducto refetch={refetch} departamentos={departamentos} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <MarcasProducto refetch={refetch} marcas={marcas} />\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" mt={4}>\r\n          <Grid container>\r\n            <Grid item md={3} xs={12}>\r\n              {!update ? (\r\n                <Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Granel</b>\r\n                    </Typography>\r\n                    <Divider />\r\n                  </Box>\r\n                  <div className={classes.formInput}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={precios.granel ? precios.granel : false}\r\n                          onChange={obtenerChecks}\r\n                          name=\"granel\"\r\n                        />\r\n                      }\r\n                      label=\"Vender a granel\"\r\n                    />\r\n                  </div>\r\n                </Box>\r\n              ) : null}\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Farmacia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={\r\n                        datos_generales.receta_farmacia\r\n                          ? datos_generales.receta_farmacia\r\n                          : false\r\n                      }\r\n                      onChange={checkFarmacia}\r\n                      name=\"receta_farmacia\"\r\n                    />\r\n                  }\r\n                  label=\"Necesita receta\"\r\n                  name=\"receta_farmacia\"\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Monedero eléctronico</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box>\r\n                <Box className={classes.formInput}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={precios.monedero}\r\n                        onChange={obtenerChecks}\r\n                        name=\"monedero\"\r\n                      />\r\n                    }\r\n                    label=\"Monedero electrónico\"\r\n                  />\r\n                  <TextField\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    label=\"Valor por punto\"\r\n                    name=\"monedero_electronico\"\r\n                    id=\"form-producto-monedero_electronico\"\r\n                    variant=\"outlined\"\r\n                    value={precios.monedero_electronico}\r\n                    onChange={obtenerCampos}\r\n                    disabled={precios.monedero ? false : true}\r\n                    onBlur={() => verificarCampoVacio(\"monedero_electronico\")}\r\n                    error={precios.monedero_electronico === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, DialogTitle } from '@material-ui/core';\r\nimport { Box, Typography, Button, Divider, Grid } from '@material-ui/core';\r\nimport { AddPhotoAlternate, Visibility, Delete } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nimport PhotoSizeSelectActualOutlinedIcon from '@material-ui/icons/PhotoSizeSelectActualOutlined';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\timagen: {\r\n\t\tmaxHeight: \"100%\",\r\n\t\tmaxWidth: \"100%\"\r\n\t}\r\n}));\r\n\r\nexport default function CargarImagenesProducto() {\r\n\tconst classes = useStyles();\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview } = useContext(RegProductoContext);\r\n\r\n\tconst cargarImagen = (e) => {\r\n\t\tconst { files } = e.target;\r\n\t\tif (e.target.files.length < 1) return\r\n\t\tsetImagenes([\r\n\t\t\t...imagenes,\r\n\t\t\tfiles[0]\r\n\t\t]);\r\n\t\tsetOnPreview({image: URL.createObjectURL(files[0])})\r\n\t};\r\n\r\n\tconst render_imagenes = imagenes.map((res, index) => <RenderImagenes key={index} index={index} imagen={res} />);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\t\t\t\t/* multiple */\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={cargarImagen}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\" component=\"span\" startIcon={<AddPhotoAlternate />}>\r\n\t\t\t\t\t\t\t\tCargar imagen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{render_imagenes}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box display=\"flex\" minHeight={300}>\r\n\t\t\t\t\t\t<Box mx={1}>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\" height=\"50vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t{!onPreview.image ? (\r\n\t\t\t\t\t\t\t\t<PhotoSizeSelectActualOutlinedIcon style={{ fontSize: 150 }} />\r\n\t\t\t\t\t\t\t) : (<img alt=\"img-onPreview\" src={onPreview.image} className={classes.imagen} />)}\r\n\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst RenderImagenes = ({ imagen, index }) => {\r\n\tconst classes = useStyles();\r\n\tconst preview = imagen.key_imagen ? imagen.url_imagen : URL.createObjectURL(imagen)\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview, imagenes_eliminadas, setImagenesEliminadas } = useContext(RegProductoContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarImagen = () => {\r\n\t\t/* agregar al arrya de imagenes eliminadas */\r\n\t\tif(imagen.key_imagen){\r\n\t\t\tsetImagenesEliminadas([\r\n\t\t\t\t...imagenes_eliminadas, imagen\r\n\t\t\t])\r\n\t\t}\r\n\t\t/* quitar imagenes del array */\r\n\t\tif (onPreview.index === index) {\r\n\t\t\tsetOnPreview({ index: '', image: '' })\r\n\t\t}\r\n\t\tconst array = [...imagenes];\r\n\t\tarray.splice(index, 1);\r\n\t\tsetImagenes([\r\n\t\t\t...array,\r\n\t\t]);\r\n\t\thandleModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box my={2} mr={5}>\r\n\t\t\t<Box className={classes.formInputFlex}>\r\n\t\t\t\t<Box height={70} width={70}>\r\n\t\t\t\t\t<img alt=\"producto-img-prev\" src={preview} width=\"100%\" />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box width=\"90%\">\r\n\t\t\t\t\t<Typography noWrap>\r\n\t\t\t\t\t\t{imagen.key_imagen ? imagen.key_imagen : imagen.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{imagen.key_imagen ? null : (<Typography variant=\"caption\">{imagen.size} bits</Typography>)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<Button size=\"small\" startIcon={<Visibility />} onClick={() => setOnPreview({ index, image: preview })}>\r\n\t\t\t\t\t\t\tprevisualizar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Box mx={1} />\r\n\t\t\t\t\t\t<ModalDelete handleModal={handleModal} open={open} eliminarImagen={eliminarImagen} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst ModalDelete = ({ handleModal, open, eliminarImagen }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button size=\"small\" color=\"secondary\" startIcon={<Delete />} onClick={() => handleModal()}>\r\n\t\t\t\teliminar\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => eliminarImagen()}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CrearAlmacenContext = createContext();\r\n\r\nexport const AlmacenProvider = ({ children }) => {\r\n\tconst [ datosAlmacen, setDatosAlmacen ] = useState({\r\n        nombre_almacen: '',\r\n        id_usuario_encargado: '',\r\n        direccion: {\r\n            calle: '',\r\n            no_ext: '',\r\n            no_int: '',\r\n            codigo_postal: '',\r\n            colonia: '',\r\n            municipio: '',\r\n            localidad: '',\r\n            estado: '',\r\n            pais: ''\r\n        }\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CrearAlmacenContext.Provider value={\r\n            { \r\n                datosAlmacen, \r\n                setDatosAlmacen,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CrearAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRO_ALMACEN = gql`\r\n  mutation CrearAlmacen($input: CrearAlmacen, $id: ID!, $empresa: ID!) {\r\n    crearAlmacen(input: $input, id: $id, empresa: $empresa) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_ALMACENES = gql`\r\n  query obtenerAlmacenes($id: ID!) {\r\n    obtenerAlmacenes(id: $id) {\r\n      _id\r\n      nombre_almacen\r\n      id_usuario_encargado {\r\n        _id\r\n        nombre\r\n      }\r\n      id_sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_ALMACEN = gql`\r\n  mutation ActualizarAlmacen($input: EditarAlmacen, $id: ID!) {\r\n    actualizarAlmacen(input: $input, id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_ALMACEN = gql`\r\n  query obtenerProductosAlmacenes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n  ) {\r\n    obtenerProductosAlmacenes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precios{\r\n        inventario{\r\n          inventario_maximo\r\n          inventario_minimo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n      }\r\n  \r\n      existencia_almacenes {\r\n        _id {\r\n          producto\r\n          almacen {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n        }\r\n        unidad_inventario\r\n        cantidad_existente\r\n      }\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n  query obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      categoria\r\n      subcategorias {\r\n        _id\r\n        subcategoria\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REALIZAR_TRASPASO = gql`\r\n  mutation CrearTraspaso(\r\n    $input: CrearTraspasoInput\r\n    $usuario: ID!\r\n    $empresa: ID!\r\n  ) {\r\n    crearTraspaso(input: $input, usuario: $usuario, empresa: $empresa) {\r\n      message\r\n      resp\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_EMPRESA = gql`\r\n  query obtenerProductosPorEmpresa($empresa: ID!, $filtro: String) {\r\n    obtenerProductosPorEmpresa(empresa: $empresa, filtro : $filtro) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          unidad_mayoreo\r\n          utilidad\r\n          ieps_precio\r\n          iva_precio\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n        }\r\n        granel\r\n      }\r\n      sucursal\r\n      usuario\r\n      empresa\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TRASPASOS = gql`\r\n  query obtenerTraspasos( $input: ConsultaTraspasosInput) {\r\n    obtenerTraspasos(input: $input) {\r\n      _id  \r\n      cantidad\r\n      \r\n      id_traspaso{\r\n        concepto_traspaso{\r\n          nombre_concepto\r\n        }\r\n        fecha_registro\r\n      }\r\n      producto{\r\n        datos_generales{\r\n          nombre_comercial\r\n        }\r\n      }\r\n      almacen_origen{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      almacen_destino{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n    }\r\n  }\r\n`;\r\n","\r\nlet arregloVacio = {\r\n    mi_empresa:{\r\n        datos_empresa: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        informacion_fiscal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    compras:{\r\n        abrir_compra:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_realizadas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_espera:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    tesoreria:{\r\n        cuentas_empresa:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        egresos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_proveedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    reportes:{\r\n        reporte_historial_cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_turnos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_compras:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        rerporte_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_corte_caja:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_tesoreria:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    ventas:{\r\n        cancelar_venta:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        precios_productos: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        pre_corte:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cotizaciones:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        administrador:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        eliminar_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        producto_rapido: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    almacenes:{\r\n        almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        traspasos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        inventario_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    catalogos: {\r\n        clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        usuarios:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        productos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        marcas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        contabilidad:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        provedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        departamentos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        centro_costos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        conceptos_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        categorias:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        colores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        tallas_numeros:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n    },\r\n    facturacion:{\r\n        generar_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cdfi_realizados:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        registro_series_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    }\r\n} \r\n\r\nexport default arregloVacio;\r\n","import React, { createContext, useState } from 'react';\r\nimport arregloVacio from '../../pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso'\r\n\r\nexport const UsuarioContext = createContext();\r\n\r\nexport const UsuarioProvider = ({ children }) => {\r\n\tconst [ usuario, setUsuario ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_usuario: true,\r\n\t\taccesos: arregloVacio\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<UsuarioContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tusuario,\r\n\t\t\t\tsetUsuario,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UsuarioContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  IconButton,\r\n  OutlinedInput,\r\n  FormHelperText,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n  FormControl,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ACTUALIZAR_USUARIO } from \"../../../../gql/Catalogos/usuarios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function FormularioUsuario({ accion }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, error } = useContext(UsuarioContext);\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setUsuario({\r\n        ...usuario,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [usuario, setUsuario]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_usuario\") {\r\n      setUsuario({\r\n        ...usuario,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      direccion: { ...usuario.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${usuario.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre usuario\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                type=\"text\"\r\n                size=\"small\"\r\n                error={error.error && !usuario.nombre}\r\n                name=\"nombre\"\r\n                variant=\"outlined\"\r\n                value={usuario.nombre ? usuario.nombre : \"\"}\r\n                helperText={\r\n                  error.error &&\r\n                  error.message !== \"Las contraseñas no coinciden\"\r\n                    ? error.message\r\n                    : \"\"\r\n                }\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n            {accion === \"registrar\" ? (\r\n              <Fragment>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"password\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"password\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={usuario.password ? usuario.password : \"\"}\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Repetir contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"repeatPassword\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"repeatPassword\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={\r\n                        usuario.repeatPassword ? usuario.repeatPassword : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Fragment>\r\n            ) : (\r\n              <Grid item xs={12} md={12}>\r\n                <ActualizarPasswordModal />\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Email\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.email}\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={usuario.email ? usuario.email : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Num. Telefono\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.telefono}\r\n            name=\"telefono\"\r\n            variant=\"outlined\"\r\n            value={usuario.telefono ? usuario.telefono : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>Num. Celular</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"celular\"\r\n            variant=\"outlined\"\r\n            value={usuario.celular ? usuario.celular : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={2}>\r\n        <Typography className={classes.title}>\r\n          <b>Domicilio</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Calle</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"calle\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.calle ? usuario.direccion.calle : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Colonia</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"colonia\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.colonia ? usuario.direccion.colonia : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Ext</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_ext\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_ext ? usuario.direccion.no_ext : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Int</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_int\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_int ? usuario.direccion.no_int : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>CP</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"codigo_postal\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.codigo_postal\r\n                ? usuario.direccion.codigo_postal\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Municipio</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"municipio\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.municipio ? usuario.direccion.municipio : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Localidad</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"localidad\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.localidad ? usuario.direccion.localidad : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Estado</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"estado\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.estado ? usuario.direccion.estado : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Pais</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"pais\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.pais ? usuario.direccion.pais : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ActualizarPasswordModal = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const {\r\n    usuario,\r\n    setUsuario,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(UsuarioContext);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setError({ error: false, message: \"\" });\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const confirmarPassowrd = async () => {\r\n    if (!usuario.password || !usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Este campo es requerido\" });\r\n      return;\r\n    }\r\n    if (usuario.password !== usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            password: usuario.password,\r\n            repeatPassword: usuario.repeatPassword,\r\n          },\r\n          id: usuario._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button color=\"primary\" variant=\"text\" onClick={handleClickOpen}>\r\n        Cambiar contraseña\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Cambiar contraseña\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <form autoComplete=\"off\">\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"password\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.password ? usuario.password : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Repetir contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"repeatPassword\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"repeatPassword\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.repeatPassword ? usuario.repeatPassword : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={confirmarPassowrd}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            autoFocus\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={25} /> : null\r\n            }\r\n          >\r\n            Confirmar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Box, Checkbox, FormControlLabel } from '@material-ui/core'\r\nimport React from 'react';\r\n\r\nexport default function Parametros({ \r\n    arregloAccesos, \r\n    obtenerAccesos, \r\n    departamento, \r\n    subDepartamento\r\n}) {\r\n\r\n    return(\r\n        <Box display='flex' justifyContent='center' alignItems='center'>\r\n            <FormControlLabel\r\n                control={\r\n                    <Checkbox\r\n                        checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver : false}\r\n                        name=\"ver\"\r\n                        color=\"primary\"\r\n                        onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                    />\r\n                }\r\n                label={\r\n                    <Box mr={2} display='flex'>\r\n                        {departamento === 'ventas' ? \"Autorizar\" : \"Ver\" } \r\n                    </Box>\r\n                }\r\n            />\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'compras_espera' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'|| \r\n                subDepartamento === 'egresos' ? (null):(\r\n                    <FormControlLabel\r\n                        control={\r\n                            <Checkbox\r\n                                checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].agregar : false}\r\n                                name=\"agregar\"\r\n                                disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                                color=\"primary\"\r\n                                onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                            />\r\n                        }\r\n                        label={\r\n                            <Box mr={2}  display='flex'>\r\n                                Agregar\r\n                            </Box>\r\n                        }\r\n                    />\r\n            )}\r\n            {   subDepartamento === 'cajas' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'abonos_proveedores'|| \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                subDepartamento === 'registro_series_cdfi' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas' ? (null) : ( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].editar : false}\r\n                            name=\"editar\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            color=\"primary\"\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box mr={2}  display='flex'>\r\n                            Editar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                subDepartamento === 'abonos_proveedores' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'? (null):( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].eliminar : false}\r\n                            name=\"eliminar\"\r\n                            color=\"primary\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box display='flex'>\r\n                            Eliminar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n        </Box>\r\n    )\r\n}\r\n","import {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Catalogos({ obtenerAccesos, arregloAccesos }) {\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Usuarios</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'usuarios'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Marcas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'marcas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Provedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'provedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Contabilidad</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'contabilidad'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Departamento</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'departamentos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Centro de costos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'centro_costos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Conceptos almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'conceptos_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Categorias</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'categorias'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Colores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'colores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Tallas y Numeros</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'tallas_numeros'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function MiEmpresa({ obtenerAccesos, arregloAccesos }) {\r\n      return (\r\n            <Fragment>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Typography variant=\"h6\">\r\n                            Marca los permisos que deseas asignar a este usuario\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Datos de Empresa</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'datos_empresa'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Información Fiscal</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'informacion_fiscal'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n            </Fragment>\r\n      )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Compras({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abrir una compra</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'abrir_compra'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras realizadas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_realizadas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras en espera</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_espera'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Almacenes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Almacenes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Traspasos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'traspasos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Inventario por almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'inventario_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Tesoreria({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cuentas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'cuentas_empresa'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Proveedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_proveedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Egresos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'egresos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Reportes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes Historiales Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_historial_cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes turnos usuarios </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_turnos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de compras </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_compras'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de ventas </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de almacenes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'rerporte_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de cortes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_corte_caja'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes tesoreria </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_tesoreria'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Ventas({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cancelar ventas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cancelar_venta'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Precios de productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'precios_productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Pre cortes de caja</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'pre_corte'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cotizaciones</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cotizaciones'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Producto Rapido</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'producto_rapido'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Panel de administrador</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'administrador'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Eliminar ventas pendientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'eliminar_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Facturacion({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Generar nuevo CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'generar_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>CDFIs realizados</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'cdfi_realizados'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Registrar series CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'registro_series_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AppBar, Box, Tabs } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\nimport { FcPaid, FcShop, FcSurvey, FcNews } from \"react-icons/fc\";\r\n\r\nimport Catalogos from \"./Departamentos/Catalogos\";\r\nimport MiEmpresa from \"./Departamentos/MiEmpresa\";\r\n\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport Compras from \"./Departamentos/Compras\";\r\nimport Almacenes from \"./Departamentos/Almacenes\";\r\nimport Tesoreria from \"./Departamentos/Tesoreria\";\r\nimport Reportes from \"./Departamentos/Reportes\";\r\nimport Ventas from \"./Departamentos/Ventas\";\r\nimport Facturacion from \"./Departamentos/Facturacion\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={1} minHeight=\"20vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 30,\r\n  },\r\n  icon: {\r\n    fontSize: 30,\r\n  },\r\n}));\r\n\r\nexport default function AsignarPermisos({ obtenerAccesos, arregloAccesos }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"on\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"scrollable force tabs example\"\r\n        >\r\n          <Tab\r\n            label=\"Mi empresa\"\r\n            icon={<FcShop className={classes.icon} />}\r\n            {...a11yProps(0)}\r\n          />\r\n          <Tab\r\n            label=\"Almacenes\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(1)}\r\n          />\r\n          <Tab\r\n            label=\"Compras\"\r\n            icon={<FcPaid className={classes.icon} />}\r\n            {...a11yProps(2)}\r\n          />\r\n          <Tab\r\n            label=\"Catalogos\"\r\n            icon={<FcNews className={classes.icon} />}\r\n            {...a11yProps(3)}\r\n          />\r\n          <Tab\r\n            label=\"Tesoreria\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                alt=\"icono money\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(4)}\r\n          />\r\n          <Tab\r\n            label=\"Reportes\"\r\n            icon={<FcSurvey className={classes.icon} />}\r\n            {...a11yProps(5)}\r\n          />\r\n          <Tab\r\n            label=\"Facturación\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                alt=\"icono factura\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(6)}\r\n          />\r\n          <Tab\r\n            label=\"Ventas\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(7)}\r\n          />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <Box p={2}>\r\n          <MiEmpresa\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <Box p={2}>\r\n          <Almacenes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <Box p={2}>\r\n          <Compras\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <Box p={0}>\r\n          <Catalogos\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <Box p={2}>\r\n          <Tesoreria\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <Box p={2}>\r\n          <Reportes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        <Box p={2}>\r\n          <Facturacion\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={7}>\r\n        <Box p={2}>\r\n          <Ventas\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport { Button, IconButton, Tabs } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, Box } from \"@material-ui/core\";\r\nimport FormularioUsuario from \"./FormularioUsuario\";\r\nimport AsignarPermisos from \"./AsingarAccesos/AsignarPermisos\";\r\nimport { Add, Edit } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport arregloVacio from \"./AsingarAccesos/arregloVacioAcceso\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_USUARIO,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport {\r\n  cleanTypenames,\r\n  numerosRandom,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AppBar } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box minHeight=\"70vh\">{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  rootPrincipal: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nexport default function CrearUsuario({ accion, datos, fromEmergent, refetch }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, setError, update, setUpdate } = useContext(\r\n    UsuarioContext\r\n  );\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setUsuario({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      turno_en_caja_activo: false,\r\n      estado_usuario: true,\r\n      accesos: arregloVacio,\r\n    });\r\n  }, [setUsuario]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (accion !== \"registrar\") {\r\n      setUsuario(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerAccesos = (event, departamento, subDepartamentos) => {\r\n    const { name, checked } = event.target;\r\n    setUsuario({\r\n      ...usuario,\r\n      accesos: {\r\n        ...usuario.accesos,\r\n        [departamento]: {\r\n          ...usuario.accesos[departamento],\r\n          [subDepartamentos]: {\r\n            ...usuario.accesos[departamento][subDepartamentos],\r\n            [name]: checked,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearUsuario] = useMutation(CREAR_USUARIO);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    if (accion === \"registrar\") {\r\n      if (\r\n        !usuario.nombre ||\r\n        !usuario.password ||\r\n        !usuario.repeatPassword ||\r\n        !usuario.telefono ||\r\n        !usuario.email\r\n      ) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n      if (usuario.password !== usuario.repeatPassword) {\r\n        setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n        return;\r\n      }\r\n    } else {\r\n      if (!usuario.nombre || !usuario.telefono || !usuario.email) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        usuario.numero_usuario = numerosRandom(100000000, 999999999);\r\n        usuario.empresa = sesion.empresa._id;\r\n        usuario.sucursal = sesion.sucursal._id;\r\n        usuario.turno_en_caja_activo = false;\r\n        const input = usuario;\r\n        await crearUsuario({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n      } else {\r\n        const {\r\n          numero_usuario,\r\n          _id,\r\n          sucursal,\r\n          empresa,\r\n          turno_en_caja_activo,\r\n          estado_usuario,\r\n          ...input\r\n        } = usuario;\r\n        await actualizarUsuario({\r\n          variables: {\r\n            input: input,\r\n            id: usuario._id,\r\n          },\r\n        });\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError({ error: false, message: \"\" });\r\n      setLoading(false);\r\n      onCloseModal();\r\n      if (fromEmergent) {\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"Hubo un error en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      {accion === \"registrar\" ? (\r\n        fromEmergent ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <Box className={classes.root}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Información básica\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/perfil.svg\"\r\n                    alt=\"icono perfil\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              <Tab\r\n                label=\"Permisos\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/permisos.svg\"\r\n                    alt=\"icono factura\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(1)}\r\n              />\r\n              <Box ml={58} mt={3}>\r\n                <Box>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={onCloseModal}\r\n                    size=\"large\"\r\n                  >\r\n                    <CloseIcon />\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Tabs>\r\n          </AppBar>\r\n          <TabPanel value={value} index={0}>\r\n            <Box p={2}>\r\n              <form id=\"form-usuario\" onSubmit={saveData}>\r\n                <FormularioUsuario accion={accion} />\r\n              </form>\r\n            </Box>\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <AsignarPermisos\r\n              arregloAccesos={usuario.accesos}\r\n              obtenerAccesos={obtenerAccesos}\r\n            />\r\n          </TabPanel>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-usuario\"\r\n            size=\"large\"\r\n            startIcon={<DoneIcon />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from 'react';\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Dialog,\r\n    TextField,\r\n    Container,\r\n    Typography,\r\n    Box,\r\n    IconButton,\r\n    DialogTitle,\r\n    Divider,\r\n    FormControl,\r\n    Select,\r\n    MenuItem,\r\n    Toolbar\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { REGISTRO_ALMACEN, ACTUALIZAR_ALMACEN } from '../../../../gql/Almacenes/Almacen';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport { Edit } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport RegistroUsuario from \"../../Catalogos/Usuarios/CrearUsuario\";\r\nimport Add from '@material-ui/icons/Add';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formInputFlex: {\r\n        display: 'flex',\r\n        '& > *': {\r\n            margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n        },\r\n       \r\n    },\r\n    formInput: {\r\n        margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n    }\r\n}));\r\n\r\nexport default function ContainerRegistroAlmacen({ accion, datos, fromEmergent }) {\r\n\r\n    /* const sucursal = {\r\n        _id: \"60c8e180340d5d223432a916\",\r\n        nombre_sucursal: \"Sucursal 1 editada\"\r\n    }; */\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [CrearAlmacen] = useMutation(REGISTRO_ALMACEN);\r\n    const [ActualizarAlmacen] = useMutation(ACTUALIZAR_ALMACEN);\r\n    const { data, refetch } = useQuery(OBTENER_USUARIOS, {\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        }\r\n    });\r\n    let obtenerUsuarios = [];\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: '', status: '', open: false });\r\n    // const empresa = '609eb3b4b995884dc49bbffa';\r\n    const [open, setOpen] = useState(false);\r\n    const { datosAlmacen, setDatosAlmacen, error, setError, update, setUpdate } = useContext(CrearAlmacenContext);\r\n    const { almacen_inicial, setAlmacenInicial } = useContext(RegProductoContext);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    // const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const limpiarCampos = useCallback(\r\n        () => {\r\n            setDatosAlmacen({\r\n                nombre_almacen: '',\r\n                id_usuario_encargado: '',\r\n                direccion: {\r\n                    calle: '',\r\n                    no_ext: '',\r\n                    no_int: '',\r\n                    codigo_postal: '',\r\n                    colonia: '',\r\n                    municipio: '',\r\n                    localidad: '',\r\n                    estado: '',\r\n                    pais: ''\r\n                }\r\n            });\r\n        },\r\n        [setDatosAlmacen]\r\n    );\r\n    const toggleModal = () => {\r\n        setOpen(true);\r\n        if (datos) {\r\n            let input = {};\r\n            if (datos.id_usuario_encargado) {\r\n                const { id_usuario_encargado, ...datosNew } = datos;\r\n                input = datosNew;\r\n                input.id_usuario_encargado = id_usuario_encargado._id;\r\n            } else {\r\n                input = datos;\r\n            }\r\n            setDatosAlmacen(input);\r\n        }\r\n    };\r\n    const onCloseModal = () => {\r\n        setOpen(false);\r\n        limpiarCampos();\r\n    };\r\n\r\n    const obtenerCampos = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            [e.target.name]: e.target.value.toUpperCase()\r\n        });\r\n    };\r\n\r\n    const obtenerCamposDireccion = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            direccion: { ...datosAlmacen.direccion, [e.target.name]: e.target.value.toUpperCase() }\r\n        });\r\n    };\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if (!datosAlmacen.nombre_almacen) {\r\n                setError(true);\r\n                return;\r\n            } else {\r\n                if (accion === \"registrar\") {\r\n                    let input = {};\r\n                    let almacen_creado;\r\n                    if (datosAlmacen.id_usuario_encargado === \"\") {\r\n                        const { id_usuario_encargado, ...input } = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    } else {\r\n                        input = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    const id_almacen = almacen_creado.data.crearAlmacen._id;\r\n                    if (refetch) {\r\n                        setAlmacenInicial({\r\n                            ...almacen_inicial,\r\n                            id_almacen,\r\n                            almacen: datosAlmacen.nombre_almacen,\r\n                        })\r\n                        refetch();\r\n                    }\r\n                } else {\r\n                    const { id_sucursal, _id, ...input } = datosAlmacen;\r\n                    await ActualizarAlmacen({\r\n                        variables: {\r\n                            input,\r\n                            id: datosAlmacen._id\r\n                        }\r\n                    })\r\n                }\r\n                setUpdate(!update);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n                setLoading(false);\r\n                onCloseModal();\r\n            }\r\n        } catch (error) {\r\n            setAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    if (data) {\r\n        obtenerUsuarios = data.obtenerUsuarios;\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            {accion === 'registrar' ? fromEmergent ? (\r\n                <IconButton color=\"primary\" onClick={toggleModal}>\r\n                    <Add />\r\n                </IconButton>\r\n            ) : (\r\n                <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={toggleModal}>\r\n                    AGREGAR\r\n                </Button>\r\n            ) : (\r\n                <IconButton onClick={toggleModal}>\r\n                    <Edit />\r\n                </IconButton>\r\n            )}\r\n            <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n             \r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <Box display='flex' flexDirection='row'>\r\n                    <Box style={{width:'93%'}}>\r\n                    <DialogTitle id=\"form-dialog-title\" >Registro almacen</DialogTitle>\r\n                    </Box>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={ onCloseModal} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Box>\r\n                <Container maxWidth=\"md\">\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"80%\">\r\n                            <Typography><span style={{color:'red'}}>* </span><b>Nombre Almacen</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                error={error}\r\n                                name=\"nombre_almacen\"\r\n                                id=\"form-producto-codigo-barras\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.nombre_almacen}\r\n                                /* helperText=\"Incorrect entry.\" */\r\n                                onChange={obtenerCampos}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box  width=\"100%\" display='flex' flexDirection='row' >\r\n                            <Box   width=\"70%\">\r\n                            <Typography><b>Encargado de almacen</b></Typography>\r\n                            <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                                <Select\r\n                                    labelId=\"demo-simple-select-label\"\r\n                                    id=\"demo-simple-select\"\r\n                                    name=\"id_usuario_encargado\"\r\n                                    value={datosAlmacen.id_usuario_encargado ? datosAlmacen.id_usuario_encargado : \"\"}\r\n                                    onChange={obtenerCampos}\r\n                                >\r\n                                    {\r\n                                        obtenerUsuarios?.map((user, index) => (\r\n                                            <MenuItem key={index} value={user._id}>{user.nombre}</MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                            </Box>\r\n                            <Box mt={2} width=\"10%\">\r\n                                <UsuarioProvider>\r\n                                    <RegistroUsuario  accion='registrar' fromEmergent={true} refetch={refetch} />\r\n                                </UsuarioProvider>\r\n                            </Box>\r\n                            <Box width=\"35%\">\r\n                                <Typography><b>Sucursal</b></Typography>\r\n                                <Typography style={{ marginTop: \"7px\" }}>{sesion.sucursal.nombre_sucursal}</Typography>\r\n                            </Box>\r\n                        </Box> \r\n                    </div>\r\n                   \r\n                    <Box mt={2}>\r\n                        <Typography>\r\n                            <b>Domicilio</b>\r\n                        </Typography>\r\n                        <Divider />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Calle</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.calle}\r\n                                name=\"calle\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.calle}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>No. exterior</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_ext}\r\n                                name=\"no_ext\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_ext}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>No. interior </b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_int}\r\n                                name=\"no_int\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_int}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Codigo Postal</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                type=\"number\"\r\n                                // error={error && !datosAlmacen.direccion.codigo_postal}\r\n                                name=\"codigo_postal\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.codigo_postal}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Colonia</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.colonia}\r\n                                name=\"colonia\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.colonia}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Municipio</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.municipio}\r\n                                name=\"municipio\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.municipio}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Localidad</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.localidad}\r\n                                name=\"localidad\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.localidad}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>Estado</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.estado}\r\n                                name=\"estado\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.estado}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography><b>País</b></Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                //  error={error && !datosAlmacen.direccion.pais}\r\n                                name=\"pais\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.pais}\r\n                                onChange={obtenerCamposDireccion}\r\n                                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={saveData} >\r\n                            Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Container>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\n/* import \"date-fns\";\r\nimport local from \"date-fns/locale/es\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\"; */\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport ContainerRegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function RegistroAlmacenInicial({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    selectedDate,\r\n    setSelectedDate,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const { almacenes } = obtenerConsultasProducto;\r\n\r\n  /*ARMAR OBJETO DE INVENTARIO  */\r\n  const obtenerInventario = (e, child) => {\r\n    if (!e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: { ...precios.inventario, [e.target.name]: \"\" },\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad_de_inventario\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          [e.target.name]: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    setPrecios({\r\n      ...precios,\r\n      inventario: {\r\n        ...precios.inventario,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      },\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenInicial = (e) => {\r\n    if (!e.target.value) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: \"\",\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"almacen\") {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n      return;\r\n    }\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [e.target.name]: parseFloat(e.target.value),\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (date) => {\r\n    setSelectedDate(date);\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      fecha_de_expiracion: date,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={2}>\r\n        <Typography>\r\n          <b>Inventario</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario mínimo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_minimo\"\r\n              id=\"form-producto-inventario_minimo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_minimo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_minimo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario máximo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_maximo\"\r\n              id=\"form-producto-inventario_maximo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_maximo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_maximo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Unidad de inventario\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"unidad_de_inventario\"\r\n              >\r\n                {precios.granel ? (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes_granel.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                ) : (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      {update ? null : datos_generales.tipo_producto === \"OTROS\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography>\r\n              <b>Almacen incial</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2} style={{ alignItems: \"center\" }}>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>\r\n                  Cantidad inicial en <b>{precios.unidad_de_compra.unidad}</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    name=\"cantidad\"\r\n                    variant=\"outlined\"\r\n                    value={almacen_inicial.cantidad}\r\n                    onChange={obtenerAlmacenInicial}\r\n                    onFocus={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (parseFloat(value) === 0) {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: \"\",\r\n                        });\r\n                      }\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (value === \"\") {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: 0,\r\n                        });\r\n                      }\r\n                    }}\r\n                    error={almacen_inicial.cantidad === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>Almacen</Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      almacen_inicial.cantidad > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <AlmacenProvider>\r\n                    <ContainerRegistroAlmacen\r\n                      accion=\"registrar\"\r\n                      refetch={refetch}\r\n                    />\r\n                  </AlmacenProvider>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  <Box width=\"100%\">\r\n              <Typography>Fecha de expiración</Typography>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={local}>\r\n                <Grid container justify=\"space-around\">\r\n                  <KeyboardDatePicker\r\n                    margin=\"dense\"\r\n                    id=\"date-picker-dialog\"\r\n                    placeholder=\"ex: DD/MM/AAAA\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    KeyboardButtonProps={{\r\n                      \"aria-label\": \"change date\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n            </Box> */}\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","export function validaciones(generales, precios, almacen, presentaciones) {\r\n    /* si no hay generales y datos 2 */\r\n    /* console.log(almacen); */\r\n    if (\r\n        !generales.clave_alterna ||\r\n        !generales.tipo_producto ||\r\n        !generales.nombre_generico ||\r\n        !generales.nombre_comercial\r\n    ) {\r\n        if (!precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad) {\r\n            return { error: true, message: 'Campo obligatorio', vista1: true, vista2: true };\r\n        }\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if (\r\n        /* si solo hay generales */\r\n        !precios.precio_de_compra.precio_con_impuesto || !precios.precio_de_compra.precio_sin_impuesto || !precios.unidad_de_compra.cantidad\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista2: true };\r\n    } else if (\r\n        /* si solo hay precios */\r\n        !generales.clave_alterna || !generales.tipo_producto || !generales.nombre_generico || !generales.nombre_comercial\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if(\r\n        /* si hay cantidad almacen pero no hay almacen seleccionado */\r\n        almacen.cantidad > 0 && !almacen.almacen && generales.tipo_producto === \"OTROS\"\r\n    ) {\r\n        console.log(\"si hay cantidad almacen pero no hay almacen seleccionado\");\r\n        return { error: true, message: 'Campo obligatorio', vista3: true };\r\n    }/*  else if(\r\n        //si no hay almacen seleccionado\r\n        presentaciones.length > 0 && !almacen.almacen && !almacen_existente\r\n    ){\r\n        console.log(\"no hay present\");\r\n        return { error: true, message: 'Campo obligatorio', vista7: true };\r\n    } */ else {\r\n        /* si hay todos los datos */\r\n        return { error: false, message: '' };\r\n    }\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CUENTA = gql`\r\n\tmutation crearCuenta($input: CrearCuentasInput) {\r\n\t\tcrearCuenta(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCUENTA= gql`\r\n\tmutation crearSubcuenta($idCuenta: ID!, $input: CrearSubcuentasInput) {\r\n\t\tcrearSubcuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CUENTA= gql`\r\n\tmutation actualizarCuenta($idCuenta: ID!, $input: ActualizarCuentasInput) {\r\n\t\tactualizarCuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCUENTA = gql`\r\n\tmutation actualizarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $input: ActualizarSubcuentasInput) {\r\n\t\tactualizarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CUENTAS = gql`\r\n\tquery obtenerCuentas($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCuentas(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tsubcuentas {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcuenta\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_CUENTA = gql`\r\n\tmutation eliminarCuenta($id: ID!) {\r\n\t\teliminarCuenta(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\nexport const ELIMINAR_SUBCUENTA = gql`\r\n\tmutation eliminarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!) {\r\n\t\teliminarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; ","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  Grid,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport {\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n} from \"../../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CentroCostos({ obtenerConsultasProducto, refetch }) {\r\n  const classes = useStyles();\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const { centro_costos } = obtenerConsultasProducto;\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setCentroDeCostos({\r\n      ...centro_de_costos,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.costos) {\r\n      const { subcuentas } = child.props.costos;\r\n      setSubcostos(subcuentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Typography>\r\n          <b>Centro de costos</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Cuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"cuenta\"\r\n              >\r\n                <Select\r\n                  name=\"cuenta\"\r\n                  value={centro_de_costos.cuenta ? centro_de_costos.cuenta : \"\"}\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {centro_costos ? (\r\n                    centro_costos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_cuenta\"\r\n                          key={res._id}\r\n                          value={res.cuenta}\r\n                          id={res._id}\r\n                          costos={res}\r\n                        >\r\n                          {res.cuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"cuenta\"\r\n                name=\"cuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Subcuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"subcuenta\"\r\n              >\r\n                <Select\r\n                  name=\"subcuenta\"\r\n                  value={\r\n                    centro_de_costos.subcuenta ? centro_de_costos.subcuenta : \"\"\r\n                  }\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {subcostos ? (\r\n                    subcostos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_subcuenta\"\r\n                          key={res._id}\r\n                          value={res.subcuenta}\r\n                          id={res._id}\r\n                        >\r\n                          {res.subcuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"subcuenta\"\r\n                name=\"subcuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({ tipo, name, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  costos Mutation */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  /*  subcostos Mutation */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n    };\r\n    if (tipo === \"subcuenta\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCuenta: centro_de_costos.id_cuenta,\r\n      };\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"cuenta\":\r\n          const cuenta_creada = await crearCuenta({ variables });\r\n          refetch();\r\n          const id_cuenta = cuenta_creada.data.crearCuenta._id;\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            cuenta: value,\r\n            id_cuenta,\r\n          });\r\n          break;\r\n        case \"subcuenta\":\r\n          const subcuenta_creada = await crearSubcuenta({ variables });\r\n          refetch();\r\n          const id_subcuenta = subcuenta_creada.data.crearSubcuenta._id;\r\n          setSubcostos([...subcostos, { _id: id_subcuenta, subcuenta: value }]);\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            subcuenta: value,\r\n            id_subcuenta,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcuenta\" && !centro_de_costos.id_cuenta}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  FormControl,\r\n  Grid,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport TablaPreciosPlazos from \"./tabla_precios\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& > .precios-box\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(3)}px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PrecioPlazos() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    unidadesVenta,\r\n    unidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n  const [plazo, setPlazo] = useState({\r\n    plazo: \"1\",\r\n    unidad: precios.granel ? \"Costal\" : \"Pz\",\r\n    codigo_unidad: precios.granel ? \"KGM\" : \"H87\",\r\n    precio: 0,\r\n  });\r\n\r\n  const obtenerPlazos = (e, child) => {\r\n    if (e.target.name === \"precio\") {\r\n      setPlazo({\r\n        ...plazo,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPlazo({\r\n        ...plazo,\r\n        unidad,\r\n        codigo_unidad,\r\n      });\r\n      return;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const guardarPlazo = () => {\r\n    if (!plazo.plazo || !plazo.precio || !plazo.unidad) return;\r\n    switch (plazo.unidad) {\r\n      case \"Pz\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_piezas: [...preciosPlazos.precio_piezas, plazo],\r\n        });\r\n        break;\r\n      case \"Caja\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_cajas: [...preciosPlazos.precio_cajas, plazo],\r\n        });\r\n        break;\r\n      case \"Costal\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_costales: [...preciosPlazos.precio_costales, plazo],\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      precio: 0,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex}>\r\n        <Typography className=\"precios-box\">\r\n          Precio venta de <b>{unidadVentaXDefecto.unidad}</b> con\r\n          impuestos(NETO): <b>${unidadVentaXDefecto.precio}</b>\r\n        </Typography>\r\n        {unidadesVenta.map((unidades, index) => {\r\n          if (!unidades.default)\r\n            return (\r\n              <Typography key={index} className=\"precios-box\">\r\n                Precio venta de <b>{unidades.unidad}</b> con impuestos(NETO):{\" \"}\r\n                <b>${unidades.precio}</b>\r\n              </Typography>\r\n            );\r\n          return null;\r\n        })}\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box>\r\n          <Typography>Plazo</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"plazo\">\r\n              <Select name=\"plazo\" value={plazo.plazo} onChange={obtenerPlazos}>\r\n                <MenuItem value=\"1\">1 Mes</MenuItem>\r\n                <MenuItem value=\"2\">2 Meses</MenuItem>\r\n                <MenuItem value=\"6\">6 Meses</MenuItem>\r\n                <MenuItem value=\"8\">8 Meses</MenuItem>\r\n                <MenuItem value=\"12\">12 Meses</MenuItem>\r\n                <MenuItem value=\"18\">18 Meses</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes_granel.map((res, index) =>\r\n                    res.unidad === \"Costal\" ? (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ) : null\r\n                  )}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Precio</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            value={plazo.precio}\r\n            variant=\"outlined\"\r\n            onChange={obtenerPlazos}\r\n          />\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            onClick={() => guardarPlazo()}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <Grid container spacing={2} justify=\"center\">\r\n          {precios.granel ? (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Costal\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_costales} />\r\n              </Grid>\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Piezas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_piezas} />\r\n              </Grid>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Cajas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_cajas} />\r\n              </Grid>\r\n            </Fragment>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const validateJsonEdit = async (data, tipo) => {\r\n    if (tipo === \"datos_generales\") {\r\n      let object_date = {\r\n        clave_alterna: data.clave_alterna,\r\n        tipo_producto: data.tipo_producto,\r\n        nombre_comercial: data.nombre_comercial,\r\n        nombre_generico: data.nombre_generico,\r\n        receta_farmacia: data.receta_farmacia,\r\n      };\r\n      if (data.codigo_barras !== null && data.codigo_barras !== \"\")\r\n        object_date = { ...object_date, codigo_barras: data.codigo_barras };\r\n      if (data.descripcion !== null && data.descripcion !== \"\")\r\n        object_date = { ...object_date, descripcion: data.descripcion };\r\n      if (data.id_categoria !== null && data.id_categoria !== \"\")\r\n        object_date = { ...object_date, id_categoria: data.id_categoria };\r\n      if (data.categoria !== null && data.categoria !== \"\")\r\n        object_date = { ...object_date, categoria: data.categoria };\r\n      if (data.subcategoria !== null && data.subcategoria !== \"\")\r\n        object_date = { ...object_date, subcategoria: data.subcategoria };\r\n      if (data.id_subcategoria !== null && data.id_subcategoria !== \"\")\r\n        object_date = { ...object_date, id_subcategoria: data.id_subcategoria };\r\n      if (data.id_departamento !== null && data.id_departamento !== \"\")\r\n        object_date = { ...object_date, id_departamento: data.id_departamento };\r\n      if (data.departamento !== null && data.departamento !== \"\")\r\n        object_date = { ...object_date, departamento: data.departamento };\r\n      if (data.id_marca !== null && data.id_marca !== \"\")\r\n        object_date = { ...object_date, id_marca: data.id_marca };\r\n      if (data.marca !== null && data.marca !== \"\")\r\n        object_date = { ...object_date, marca: data.marca };\r\n      if (data.clave_producto_sat.Name !== null)\r\n        object_date = {\r\n          ...object_date,\r\n          clave_producto_sat: data.clave_producto_sat,\r\n        };\r\n      return object_date;\r\n    } else if (tipo === \"unidades_de_venta\") {\r\n      let end_array = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        let object = {\r\n          _id: data[i]._id,\r\n          cantidad: data[i].cantidad,\r\n          id_producto: data[i].id_producto,\r\n          precio: data[i].precio,\r\n          unidad_principal: data[i].unidad_principal,\r\n          unidad: data[i].unidad,\r\n          codigo_unidad: data[i].codigo_unidad,\r\n          precio_unidad: data[i].precio_unidad\r\n        };\r\n        if (data[i].codigo_barras !== null && data[i].codigo_barras !== \"\")\r\n          object = { ...object, codigo_barras: data[i].codigo_barras };\r\n        if (data[i].default !== null && data[i].default !== \"\")\r\n          object = { ...object, default: data[i].default };\r\n        if (data[i].descuento_activo !== null && data[i].descuento_activo !== \"\")\r\n          object = { ...object, descuento_activo: data[i].descuento_activo, descuento: data[i].descuento };\r\n          \r\n          end_array.push(object);\r\n      }\r\n      return end_array;\r\n    }\r\n  };","import React, { useState, Fragment, useContext, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  Badge,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport RegistroInfoGenerales from \"./DatosGenerales/registrarInfoGeneral\";\r\nimport RegistroInfoAdidional from \"../Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport CargarImagenesProducto from \"./Imagenes/cargarImagenesProducto\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistroAlmacenInicial from \"./Inventario&Almacen/AlmacenInicial\";\r\nimport ColoresTallas from \"./TallasColores/TallasColores\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO,\r\n  OBTENER_CONSULTAS,\r\n  ACTUALIZAR_PRODUCTO,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { validaciones } from \"./validaciones\";\r\nimport CentroCostos from \"./CentroCostos/CentroCostos\";\r\nimport PrecioPlazos from \"./PrecioPlazos/PrecioPlazos\";\r\n\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaSecundaria,\r\n  initial_state_unidadesVenta,\r\n} from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  Edit,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n} from \"@material-ui/icons\";\r\nimport { validateJsonEdit } from \"./validateDatos\";\r\n/* import { cleanTypenames } from \"../../../../config/reuserFunctions\"; */\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root_app: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    maxHeight: \"80vh\",\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\nexport default function CrearProducto({\r\n  accion,\r\n  datos,\r\n  productosRefetch,\r\n  fromCompra,\r\n  getProductos,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    setUpdate,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n    almacen_existente,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const tipo = datos_generales.tipo_producto;\r\n\r\n  /* Mutations */\r\n  const [crearProducto] = useMutation(CREAR_PRODUCTO);\r\n  const [actualizarProducto] = useMutation(ACTUALIZAR_PRODUCTO);\r\n\r\n  const toggleModal = (producto) => {\r\n    setOpen(!open);\r\n    setUpdate(accion);\r\n    if (producto && accion) {\r\n      setInitialStates(producto);\r\n    } else {\r\n      resetInitialStates();\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  /* ###### GUARDAR LA INFO EN LA BD ###### */\r\n\r\n  const saveData = async () => {\r\n    const validate = validaciones(\r\n      datos_generales,\r\n      precios,\r\n      almacen_inicial,\r\n      presentaciones,\r\n      almacen_existente\r\n    );\r\n\r\n    if (validate.error) {\r\n      setValidacion(validate);\r\n      return;\r\n    }\r\n    setValidacion(validate);\r\n    if (presentaciones.length > 0) {\r\n      const pres = presentaciones.filter(\r\n        (res) => res.color._id && res.medida._id\r\n      );\r\n\r\n      if (pres.length !== presentaciones.length) {\r\n        setValidacion({\r\n          error: true,\r\n          message: \"Faltan medidas o colores a tus presentaciones\",\r\n          vista7: true,\r\n        });\r\n        setAlert({\r\n          message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [{...unidadVentaXDefecto}, {...unidadVentaSecundaria}];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    /* console.log(copy_unidadesVenta); */\r\n\r\n    precios.precios_producto = preciosP;\r\n\r\n    let imagenes_without_aws = imagenes;\r\n    if (accion) {\r\n      imagenes_without_aws = [...imagenes].filter((res) => !res.key_imagen);\r\n    }\r\n\r\n    let input = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      imagenes: imagenes_without_aws,\r\n      imagenes_eliminadas,\r\n      almacen_inicial,\r\n      centro_de_costos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      presentaciones_eliminadas,\r\n      precio_plazos: preciosPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    /* const clean_data = cleanTypenames(input); */\r\n    /* console.log(input); */\r\n\r\n    setLoading(true);\r\n     try {\r\n      if (accion) {\r\n        const result = await actualizarProducto({\r\n          variables: {\r\n            input,\r\n            id: datos._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.actualizarProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        const result = await crearProducto({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      toggleModal();\r\n      if (fromCompra) {\r\n        getProductos();\r\n      } else {\r\n        productosRefetch();\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta(initial_state_unidadesVenta);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n    setValue(0);\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    /* const producto = cleanTypenames(product); */\r\n    console.log(producto);\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = producto.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const { keyCode } = event;\r\n    if (keyCode === 114) {\r\n      document.getElementById(\"modal-registro-product\").click();\r\n    }\r\n  } /* CODIGO PARA PODER EJECUTAR LAS VENTANAS A BASE DE LAS TECLAS */\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (!accion && value === 4) {\r\n      return saveButton;\r\n    } else if (accion && tipo === \"OTROS\" && value === 4) {\r\n      return saveButton;\r\n    } else if (accion && tipo !== \"OTROS\" && value === 5) {\r\n      return saveButton;\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setValue(value + 1)}\r\n          size=\"large\"\r\n          endIcon={<NavigateNext />}\r\n          disableElevation\r\n        >\r\n          Siguiente\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\r\n      {!accion ? (\r\n        fromCompra ? (\r\n          <IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            id=\"modal-registro-product\"\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => toggleModal()}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton color=\"default\" onClick={() => toggleModal(datos)}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <div className={classes.root_app}>\r\n          <Tabs\r\n            style={{ minWidth: \"200px\" }}\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            orientation=\"vertical\"\r\n            scrollButtons=\"on\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            aria-label=\"scrollable force tabs example\"\r\n            className={classes.tabs}\r\n          >\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Datos generales\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista1 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                    alt=\"icono registro\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(0)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios de venta\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista2 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/etiqueta-de-precio.svg\"\r\n                    alt=\"icono venta\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Inventario y almacen\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista3 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tarea-completada.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Centro de costos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            />\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios a plazos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/calendar.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            /> */}\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Imagenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/imagenes.svg\"\r\n                  alt=\"icono imagenes\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            />\r\n            {accion ? (\r\n              datos_generales.tipo_producto !== \"OTROS\" ? (\r\n                <Tab\r\n                  style={{ minWidth: \"200px\" }}\r\n                  label=\"Tallas y colores\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista7 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                        alt=\"icono colores\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(5)}\r\n                />\r\n              ) : null\r\n            ) : null}\r\n          </Tabs>\r\n          <Box width=\"100%\">\r\n            <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => toggleModal()}\r\n                size=\"large\"\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n            <DialogContent className={classes.dialogContent}>\r\n              <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n              <ContenidoModal value={value} />\r\n            </DialogContent>\r\n          </Box>\r\n        </div>\r\n\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ContenidoModal = ({ value }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, [refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <TabPanel value={value} index={0}>\r\n        <RegistroInfoGenerales\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <RegistroInfoAdidional />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <RegistroAlmacenInicial\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <CentroCostos\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      {/* <TabPanel value={value} index={4}>\r\n        <PrecioPlazos />\r\n      </TabPanel> */}\r\n      <TabPanel value={value} index={4}>\r\n        <CargarImagenesProducto />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <ColoresTallas\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function PreciosDeVentaCompras() {\r\n  const { preciosVenta } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Utilidad\", \"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {preciosVenta.map((data, index) => (\r\n                  <RenderPrecios\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    tipo={tipo}\r\n                  />\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPrecios = ({ data, tipo, index }) => {\r\n  const { preciosVenta, setPreciosVenta, datosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { precios } = productoOriginal;\r\n\r\n  const [precio_neto, setPrecioNeto] = useState(data.precio_neto);\r\n\r\n  //creamos variables para trabajar con ellas, no causar errores y afectar las originales\r\n  let copy_preciosVenta = { ...preciosVenta[index] };\r\n  let preciosVenta_base = [...preciosVenta];\r\n\r\n  let precio_unitario_con_impuesto =\r\n    /* datosProducto.costo / datosProducto.cantidad; */\r\n    datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n  let precio_unitario_sin_impuesto =\r\n    /* precios.precio_de_compra.precio_sin_impuesto / datosProducto.cantidad; */\r\n    precios.precio_de_compra.precio_sin_impuesto /\r\n    precios.unidad_de_compra.cantidad;\r\n\r\n  if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n  if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n  const calculosCompra = useCallback(() => {\r\n    if (copy_preciosVenta.numero_precio === data.numero_precio) {\r\n      copy_preciosVenta.precio_neto = precio_unitario_con_impuesto;\r\n      setPrecioNeto(precio_unitario_con_impuesto);\r\n\r\n      let utilidad_base = data.utilidad ? data.utilidad : 0;\r\n      let utilidad = utilidad_base / 100;\r\n\r\n      const precio_venta = parseFloat(\r\n        (\r\n          precio_unitario_sin_impuesto * utilidad +\r\n          precio_unitario_sin_impuesto\r\n        ).toFixed(2)\r\n      );\r\n      copy_preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      if (precios.iva_activo || precios.ieps_activo) {\r\n        const precio_neto =\r\n          precio_unitario_con_impuesto +\r\n          precio_unitario_con_impuesto * utilidad;\r\n\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_neto.toFixed(2)));\r\n      } else {\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_venta.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_venta.toFixed(2)));\r\n      }\r\n      preciosVenta_base.splice(index, 1, copy_preciosVenta);\r\n      setPreciosVenta(preciosVenta_base)\r\n    }\r\n  }, [datosProducto.costo, datosProducto.cantidad]);\r\n\r\n  useEffect(() => {\r\n    if (data.numero_precio === 1) {\r\n      calculosCompra();\r\n    } else if (data.numero_precio > 1 && precio_neto) {\r\n      calculosCompra();\r\n    }\r\n  }, [calculosCompra]);\r\n\r\n  switch (tipo) {\r\n    case \"Utilidad\":\r\n      return <TableCell style={{ border: 0 }}>{data.utilidad}%</TableCell>;\r\n    case \"Precio de venta\":\r\n      return (\r\n        <TableCell style={{ border: 0 }}>\r\n          ${parseFloat(precio_neto).toFixed(2)}\r\n        </TableCell>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { Box, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function DescuentosInputs() {\r\n  const { datosProducto, setDatosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { precio_sin_impuesto, precio_con_impuesto } = precio_de_compra;\r\n  const iva_precio_actual = precio_de_compra.iva;\r\n  const ieps_precio_actual = precio_de_compra.ieps;\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const { costo } = datosProducto;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round((PCSI_actual * porcentaje) / 100);\r\n\r\n    let subtotal_con_descuento = PCSI_actual - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(impuestos.toFixed(2)),\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round((cantidad_descontada / PCSI_actual) * 100);\r\n    let subtotal_con_descuento = PCSI_actual - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: impuestos,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" width={160}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPrecio(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_precio}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n          }}\r\n        />\r\n        <Box mr={1} />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_porcentaje}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n          }}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const ClienteCtx = createContext();\r\n\r\nexport const ClienteProvider = ({ children }) => {\r\n\tconst [ cliente, setCliente ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_cliente: true\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState(false);\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\tconst [updateClientVenta, setUpdateClientVenta] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<ClienteCtx.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcliente,\r\n\t\t\t\tsetCliente,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate,\r\n\t\t\t\tsetUpdateClientVenta,\r\n\t\t\t\tupdateClientVenta\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ClienteCtx.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  InputAdornment,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Cached } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoBasica({ tipo, accion }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente, error } = useContext(ClienteCtx);\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setCliente({\r\n        ...cliente,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [cliente, setCliente]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      [name]: value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      direccion: { ...cliente.direccion, [name]: value },\r\n    });\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const clave_cliente = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setCliente({\r\n      ...cliente,\r\n      clave_cliente,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.input}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          xs={12}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${cliente.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <Grid container spacing={2}>\r\n            {accion === \"registrar\" ? null : (\r\n              <Grid item md={3} xs={12}>\r\n                <Typography className={classes.title}>N. Cliente</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"numero_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.numero_cliente ? cliente.numero_cliente : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled\r\n                  type=\"number\"\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={accion === \"registrar\" ? 12 : 9} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre Cliente\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.nombre_cliente}\r\n                name=\"nombre_cliente\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.nombre_cliente\r\n                    ? cliente.nombre_cliente\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            {tipo === \"CLIENTE\" ? null : (\r\n              <Grid item md={4} xs={12}>\r\n                <Typography className={classes.title}>\r\n                  <span>* </span>Representante\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.representante}\r\n                  name=\"representante\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    cliente.representante\r\n                      ? cliente.representante\r\n                      : \"\"\r\n                  }\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Clave(Tarjeta de puntos)\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.clave_cliente}\r\n                name=\"clave_cliente\"\r\n                variant=\"outlined\"\r\n                value={cliente.clave_cliente ? cliente.clave_cliente : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        color=\"primary\"\r\n                        size=\"small\"\r\n                        onClick={() => GenCodigoBarras()}\r\n                      >\r\n                        <Cached />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                  disabled: true,\r\n                }}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n              <Typography className={classes.title}>\r\n                Fecha nacimiento\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"fecha_nacimiento\"\r\n                variant=\"outlined\"\r\n                type=\"date\"\r\n                onChange={obtenerCampos}\r\n                value={cliente.fecha_nacimiento ? cliente.fecha_nacimiento : \"\"}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>CURP</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"curp\"\r\n                variant=\"outlined\"\r\n                value={cliente.curp ? cliente.curp : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Email\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.email}\r\n                name=\"email\"\r\n                variant=\"outlined\"\r\n                value={cliente.email ? cliente.email : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Telefono\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.telefono}\r\n                name=\"telefono\"\r\n                variant=\"outlined\"\r\n                value={cliente.telefono ? cliente.telefono : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Num. Celular</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"celular\"\r\n                variant=\"outlined\"\r\n                value={cliente.celular ? cliente.celular : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Box my={2}>\r\n            <Typography className={classes.title}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Calle\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.calle\r\n                    ? cliente.direccion.calle\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Ext\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_ext ? cliente.direccion.no_ext : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>Num. Int</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_int ? cliente.direccion.no_int : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Código postal\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.codigo_postal\r\n                    ? cliente.direccion.codigo_postal\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Colonia\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.colonia\r\n                    ? cliente.direccion.colonia\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Municipio\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.municipio\r\n                    ? cliente.direccion.municipio\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Localidad</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.localidad\r\n                    ? cliente.direccion.localidad\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Estado\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.estado\r\n                    ? cliente.direccion.estado\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Pais\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.pais\r\n                    ? cliente.direccion.pais\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider, Grid } from \"@material-ui/core\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoCredito({ tipo }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente } = useContext(ClienteCtx);\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_descuento\" || name === \"limite_credito\") {\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Alert severity=\"info\">\r\n          Si deseas hacer facturas a este cliente el <b>RFC</b> y la{\" \"}\r\n          <b>Razon social</b> son obligatorios.\r\n        </Alert>\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>RFC</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"rfc\"\r\n            variant=\"outlined\"\r\n            value={cliente.rfc ? cliente.rfc : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>Razon social</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"razon_social\"\r\n            variant=\"outlined\"\r\n            value={\r\n              cliente.razon_social ? cliente.razon_social : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Descuento</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"numero_descuento\"\r\n            variant=\"outlined\"\r\n            value={cliente.numero_descuento ? cliente.numero_descuento : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Limite de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"limite_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.limite_credito ? cliente.limite_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Días de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"dias_credito\"\r\n            variant=\"outlined\"\r\n            value={\r\n              cliente.dias_credito ? cliente.dias_credito : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {tipo !== \"CLIENTE\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography className={classes.title}>\r\n              Datos bancarios\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>Banco</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"banco\"\r\n                variant=\"outlined\"\r\n                value={cliente.banco ? cliente.banco : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>\r\n                No. de Cuenta Bancaria\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"numero_cuenta\"\r\n                variant=\"outlined\"\r\n                value={cliente.numero_cuenta ? cliente.numero_cuenta : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CLIENTE = gql`\r\n\tmutation crearCliente($input: CrearClienteInput) {\r\n\t\tcrearCliente(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CLIENTES = gql`\r\n\tquery obtenerClientes($tipo: String!, $filtro: String) {\r\n\t\tobtenerClientes(tipo: $tipo, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t\tbanco\r\n\t\t\tnumero_cuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\tmonedero_electronico\r\n\t\t\tfecha_nacimiento\r\n    \t\tfecha_registro\r\n\t\t\teliminado\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CLIENTE = gql`\r\n\tmutation actualizarCliente($input: ActualizarClienteInput, $id: ID!) {\r\n\t\tactualizarCliente(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CLIENTE = gql`\r\n\tmutation eliminarCliente($id: ID!) {\r\n\t\teliminarCliente(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport RegistrarInfoBasica from \"./RegistrarInfoBasica\";\r\nimport RegistrarInfoCredito from \"./RegistroInfoCredito\";\r\nimport { Add, Close, Done, Edit } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CLIENTE,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { Toolbar } from \"@material-ui/core\";\r\n\r\nexport default function CrearCliente({\r\n  tipo,\r\n  accion,\r\n  datos,\r\n  refetch,\r\n  fromCompras,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const {\r\n    cliente,\r\n    setCliente,\r\n    setError,\r\n    updateClientVenta,\r\n    setUpdateClientVenta,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setCliente({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      estado_cliente: true,\r\n    });\r\n  }, [setCliente]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      setCliente(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearCliente] = useMutation(CREAR_CLIENTE);\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    let copy_cliente = { ...cliente };\r\n    if (\r\n      !copy_cliente.clave_cliente ||\r\n      !copy_cliente.nombre_cliente ||\r\n      !copy_cliente.telefono ||\r\n      !copy_cliente.email ||\r\n      !copy_cliente.direccion.calle ||\r\n      !copy_cliente.direccion.municipio ||\r\n      !copy_cliente.direccion.estado ||\r\n      !copy_cliente.direccion.pais\r\n    ) {\r\n      if (tipo !== \"CLIENTE\" && !copy_cliente.representante) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(true);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        copy_cliente.tipo_cliente = tipo;\r\n        copy_cliente.empresa = sesion.empresa._id;\r\n        copy_cliente.sucursal = sesion.sucursal._id;\r\n        if (tipo === \"CLIENTE\") {\r\n          copy_cliente.representante = \"\";\r\n        }\r\n        const input = copy_cliente;\r\n        const clienteBase = await crearCliente({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (ventas === true) {\r\n          const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n          let venta_actual = venta === null ? {} : venta;\r\n          // console.log(venta_actual);\r\n          localStorage.setItem(\r\n            \"DatosVentas\",\r\n            JSON.stringify({\r\n              subTotal:\r\n                venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n              total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n              impuestos:\r\n                venta_actual.impuestos === undefined\r\n                  ? 0\r\n                  : venta_actual.impuestos,\r\n              iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n              ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n              descuento:\r\n                venta_actual.descuento === undefined\r\n                  ? 0\r\n                  : venta_actual.descuento,\r\n              monedero:\r\n                venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n              // tipo_cambio: venta_actual.tipo_cambio\r\n              //   ? venta_actual.tipo_cambio\r\n              //   : {},\r\n              cliente: clienteBase.data.crearCliente,\r\n              venta_cliente: true,\r\n              productos:\r\n                venta_actual.productos?.length > 0\r\n                  ? venta_actual.productos\r\n                  : [],\r\n            })\r\n          );\r\n          setUpdateClientVenta(!updateClientVenta);\r\n          onCloseModal();\r\n          handleClickOpen();\r\n        }\r\n      } else {\r\n        const {\r\n          numero_cliente,\r\n          _id,\r\n          clave_cliente,\r\n          sucursal,\r\n          empresa,\r\n          ...input\r\n        } = copy_cliente;\r\n        await actualizarCliente({\r\n          variables: {\r\n            input: input,\r\n            id: copy_cliente._id,\r\n          },\r\n        });\r\n      }\r\n      if (refetch) {\r\n        refetch();\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError(false);\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      setLoading(false);\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        fromCompras ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : ( \r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            onCloseModal();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\">\r\n                {accion === \"registrar\" ? \"Registrar\" : \"Actualizar\"}\r\n              </Typography>\r\n              <Box flexGrow={1} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"large\"\r\n                onClick={() => onCloseModal()}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Container>\r\n            <form id=\"crear-cliente-form\" onSubmit={saveData}>\r\n              <Typography>\r\n                <b>Información básica</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoBasica tipo={tipo} accion={accion} />\r\n              <Box my={2} />\r\n              <Typography>\r\n                <b>Información de credito</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoCredito tipo={tipo} accion={accion} />\r\n            </form>\r\n          </Container>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            type=\"submit\"\r\n            form=\"crear-cliente-form\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COMPRA = gql`\r\n  mutation crearCompra(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompra(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_COMPRA_ESPERA = gql`\r\n  mutation crearCompraEnEspera(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompraEnEspera(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_REALIZADAS = gql`\r\n  query obtenerComprasRealizadas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $fecha: String\r\n  ) {\r\n    obtenerComprasRealizadas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      fecha: $fecha\r\n    ) {\r\n      _id\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_ESPERA = gql`\r\n  query obtenerComprasEnEspera($empresa: ID!, $sucursal: ID!, $filtro: String) {\r\n    obtenerComprasEnEspera(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      en_espera\r\n      proveedor {\r\n        id_proveedor\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      productos {\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              ieps\r\n              iva\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            granel\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          presentaciones {\r\n            _id\r\n            almacen\r\n            cantidad\r\n            cantidad_nueva\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        id_producto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        subtotal_descuento\r\n        total_descuento\r\n      }\r\n      impuestos\r\n      subtotal\r\n      total\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CONSULTA_GENERAL_PRODUCTO = gql`\r\n  query obtenerConsultaGeneralCompras($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralCompras(empresa: $empresa, sucursal: $sucursal) {\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          granel\r\n        }\r\n        imagenes {\r\n          url_imagen\r\n          location_imagen\r\n          key_imagen\r\n          extencion_imagen\r\n        }\r\n        centro_de_costos {\r\n          cuenta\r\n          id_cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          empresa\r\n          sucursal\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_barras\r\n          color {\r\n            hex\r\n            nombre\r\n            _id\r\n          }\r\n          existencia\r\n          medida {\r\n            talla\r\n            tipo\r\n            _id\r\n          }\r\n          nombre_comercial\r\n          precio\r\n        }\r\n        medidas_registradas\r\n        empresa\r\n        sucursal\r\n        usuario\r\n      }\r\n      proveedores {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n        id_usuario_encargado {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n          email\r\n          imagen\r\n          estado_usuario\r\n        }\r\n        id_sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          usuario_sucursal\r\n        }\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_COMPRA_ESPERA = gql`\r\n  mutation eliminarCompraEnEspera($id: ID!) {\r\n    eliminarCompraEnEspera(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { initial_state_precios } from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from 'moment';\r\n\r\nexport const initial_state_datosProducto = {\r\n  producto: {},\r\n  costo: 0,\r\n  cantidad: 0,\r\n  cantidad_regalo: 0,\r\n  unidad_regalo: '',\r\n  cantidad_total: 0,\r\n  descuento_porcentaje: 0,\r\n  descuento_precio: 0,\r\n  iva_total: 0,\r\n  ieps_total: 0,\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  mantener_precio: true,\r\n  impuestos_descuento: 0,\r\n  subtotal_descuento: 0,\r\n  total_descuento: 0,\r\n};\r\n\r\nexport const initial_state_datosCompra = {\r\n  productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n};\r\n\r\nexport const initial_state_precios_venta = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_productoOriginal = {\r\n  precios: initial_state_precios,\r\n};\r\nexport const initial_state_productosCompra = [];\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport RegistroProvedor from \"../../../Catalogos/Cliente/CrearCliente\";\r\nimport RegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTA_GENERAL_PRODUCTO } from \"../../../../../gql/Compras/compras\";\r\nimport { ErrorOutline } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nexport default function DatosProveedorAlmacen({ getProductos, status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosCompra,\r\n    setDatosCompra,\r\n    setDatosProducto,\r\n    productosCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONSULTA_GENERAL_PRODUCTO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n    }\r\n  );\r\n\r\n  const obtenerProveedorAlmacen = (tipo, value) => {\r\n    if (!value) {\r\n      setDatosCompra({ ...datosCompra, [tipo]: {} });\r\n      return;\r\n    }\r\n    if (tipo === \"proveedor\") {\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        proveedor: {\r\n          id_proveedor: value._id,\r\n          nombre_cliente: value.nombre_cliente,\r\n          numero_cliente: value.numero_cliente,\r\n          clave_cliente: value.clave_cliente,\r\n        },\r\n      });\r\n    } else {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      resetInitialStates();\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        almacen: {\r\n          id_almacen: value._id,\r\n          nombre_almacen: value.nombre_almacen,\r\n        },\r\n      });\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: value._id,\r\n        almacen: value.nombre_almacen,\r\n      });\r\n      getProductos(value._id);\r\n    }\r\n  };\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  const errorRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          value=\"Error\"\r\n          error\r\n          disabled\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <ErrorOutline fontSize=\"default\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  const loadingRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          disabled\r\n          value=\"Cargando...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <CircularProgress size={24} />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {loadingRender}\r\n        {loadingRender}\r\n        {loadingRender}\r\n      </Grid>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Grid container spacing={2} alignItems=\"center\">\r\n          {errorRender}\r\n          {errorRender}\r\n          {errorRender}\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  const { almacenes, proveedores } = data.obtenerConsultaGeneralCompras;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-proveedor\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={proveedores}\r\n              getOptionLabel={(option) => option.nombre_cliente}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Proveedor\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) =>\r\n                obtenerProveedorAlmacen(\"proveedor\", value)\r\n              }\r\n              getOptionSelected={(option) => option.nombre_cliente}\r\n              value={\r\n                datosCompra.proveedor.nombre_cliente\r\n                  ? datosCompra.proveedor\r\n                  : null\r\n              }\r\n            />\r\n            <RegistroProvedor\r\n              accion=\"registrar\"\r\n              tipo=\"PROVEEDOR\"\r\n              refetch={refetch}\r\n              fromCompras={true}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-almacen\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={almacenes}\r\n              getOptionLabel={(option) => option.nombre_almacen}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Almacen\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerProveedorAlmacen(\"almacen\", value)}\r\n              getOptionSelected={(option) => option.nombre_almacen}\r\n              value={\r\n                datosCompra.almacen.nombre_almacen ? datosCompra.almacen : null\r\n              }\r\n            />\r\n            <AlmacenProvider>\r\n              <RegistroAlmacen accion=\"registrar\" refetch={refetch} />\r\n            </AlmacenProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                console.log(e.target.value);\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_registro: e.target.value,\r\n                });\r\n              }}\r\n              value={datosCompra.fecha_registro}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function MostrarPrecios() {\r\n  const { datosProducto } = useContext(ComprasContext);\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n\r\n  if (presentaciones.length > 0) {\r\n    let cantida_suma = 0;\r\n    let cantidad_total = 0;\r\n    presentaciones.forEach((presentacion) => {\r\n      const { cantidad, cantidad_nueva } = presentacion;\r\n      let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n\r\n      cantida_suma += cantidad + nueva;\r\n    });\r\n    if (isNaN(cantida_suma)) cantidad_total = 0;\r\n    cantidad_total = cantida_suma; \r\n\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos_descuento * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * cantidad_total\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  } else {\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos_descuento * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * datosProducto.cantidad\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport PreciosProductos from \"./PreciosProductos\";\r\nimport TallasProductos from \"./TallasProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport CrearProducto, {\r\n  initial_state_preciosP,\r\n} from \"../../../Catalogos/Producto/crearProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../../gql/Catalogos/productos\";\r\nimport PreciosDeVentaCompras from \"./PreciosVenta\";\r\nimport { validateJsonEdit } from \"../../../Catalogos/Producto/validateDatos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\nimport DescuentosInputs from \"./Descuentos\";\r\nimport DatosProveedorAlmacen from \"./DatosProveedorAlmacen\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport MostrarPrecios from \"./mostrar_precios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function DatosProducto({ status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosProducto,\r\n    setDatosProducto,\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    productoOriginal,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    setDatosCompra,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setEditFinish,\r\n    costo,\r\n    setCosto,\r\n    cantidad,\r\n    setCantidad,\r\n    loadingProductos,\r\n    setLoadingProductos,\r\n  } = useContext(ComprasContext);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n  } = useContext(RegProductoContext);\r\n  const [verificate, setVerificate] = useState(false);\r\n\r\n  let count = 0;\r\n  if (status === \"enEspera\" && datosCompra) count = 1;\r\n\r\n  const [cargando, setCargando] = useState(false);\r\n  const client = useApolloClient();\r\n  const [data, setData] = useState();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const getProductos = async (id_almacen) => {\r\n    try {\r\n      let almacen = id_almacen ? id_almacen : datosCompra.almacen._id;\r\n      setLoadingProductos(true);\r\n      const response = await client.query({\r\n        query: OBTENER_PRODUCTOS,\r\n        variables: {\r\n          almacen,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoadingProductos(false);\r\n      setData(response.data);\r\n    } catch (error) {\r\n      setLoadingProductos(false);\r\n      setAlert({\r\n        message: \"Hubo un error al cargar los productos\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [COSTO] = useDebounce(costo, 500);\r\n  const [CANTIDAD] = useDebounce(cantidad, 500);\r\n\r\n  /* useEffect(() => {\r\n    if (loadingProductos) {\r\n      setLoadingProductos(true);\r\n    } else {\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loadingProductos]); */\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCosto(COSTO);\r\n  }, [COSTO]);\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCantidad(CANTIDAD);\r\n  }, [CANTIDAD]);\r\n\r\n  useEffect(() => {\r\n    if (count === 1) {\r\n      getProductos(datosCompra.almacen._id);\r\n    }\r\n  }, [count]);\r\n\r\n  if (loadingProductos) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"20vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  const obtenerSelectsProducto = (producto) => {\r\n    /* console.log(producto); */\r\n    if (!producto) {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      resetInitialStates();\r\n      return;\r\n    }\r\n\r\n    const {\r\n      ieps,\r\n      iva,\r\n      precio_con_impuesto,\r\n      precio_sin_impuesto,\r\n    } = producto.precios.precio_de_compra;\r\n\r\n    const impuestos = iva + ieps;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      producto,\r\n      id_producto: producto._id,\r\n      costo: precio_con_impuesto,\r\n      cantidad: 1,\r\n      unidad_regalo: producto.precios.unidad_de_compra.unidad,\r\n      descuento_porcentaje: 0,\r\n      descuento_precio: 0,\r\n      subtotal: precio_sin_impuesto,\r\n      impuestos: parseFloat(impuestos.toFixed(6)),\r\n      total: precio_con_impuesto,\r\n      subtotal_descuento: precio_sin_impuesto,\r\n      total_descuento: precio_con_impuesto,\r\n    });\r\n    setInitialStates(producto);\r\n    setCosto(precio_con_impuesto);\r\n    setCantidad(1);\r\n    setProductoOriginal(producto);\r\n    setPreciosVenta(producto.precios.precios_producto);\r\n  };\r\n\r\n  function obtenerCantidad(value) {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad: parseFloat(value),\r\n    });\r\n  }\r\n\r\n  const obtenerCantidadRegalo = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad_regalo: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad_regalo: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerUnidadRegalo = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  function obtenerCosto(value) {\r\n    /* const { name, value } = e.target; */\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: \"\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const { iva, ieps, precio_de_compra } = datosProducto.producto.precios;\r\n    const iva_precio = precio_de_compra.iva;\r\n    const ieps_precio = precio_de_compra.ieps;\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let subtotal = 0;\r\n    let total = 0;\r\n    let cantidad_descontada = 0;\r\n    let impuesto_actual = iva_precio + ieps_precio;\r\n\r\n    let precio_sin_impuesto = precio_neto - impuesto_actual;\r\n    let nuevo_iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    let nuevo_ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    let nuevo_impuesto = nuevo_ieps + nuevo_iva;\r\n\r\n    if (datosProducto.descuento_porcentaje > 0) {\r\n      cantidad_descontada = Math.round(\r\n        (precio_sin_impuesto * datosProducto.descuento_porcentaje) / 100\r\n      );\r\n      subtotal = precio_sin_impuesto - cantidad_descontada;\r\n      total = subtotal + nuevo_impuesto;\r\n\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n        costo: parseFloat(precio_neto),\r\n        descuento_precio: parseFloat(cantidad_descontada),\r\n        subtotal_descuento: parseFloat(subtotal),\r\n        total_descuento: parseFloat(total),\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n      costo: parseFloat(precio_neto),\r\n      subtotal_descuento: parseFloat(precio_sin_impuesto),\r\n      total_descuento: parseFloat(precio_sin_impuesto + nuevo_impuesto),\r\n    });\r\n  }\r\n\r\n  const agregarCompra = async (actualizar_Precios) => {\r\n    let copy_datosProducto = { ...datosProducto };\r\n    let copy_datosGenerales = { ...datos_generales };\r\n    let copy_presentaciones = [...presentaciones];\r\n    let copy_precios = { ...precios };\r\n    let copy_preciosP = [...preciosP];\r\n    let copy_almacenInicial = { ...almacen_inicial };\r\n    let copy_centroCostos = { ...centro_de_costos };\r\n    let copy_presentacionesEliminadas = [...presentaciones_eliminadas];\r\n    let copy_precioPlazos = { ...preciosPlazos };\r\n\r\n    /* Validaciones */\r\n    setCargando(true);\r\n    if (\r\n      !copy_datosProducto.producto.datos_generales ||\r\n      !datosCompra.proveedor.nombre_cliente ||\r\n      !datosCompra.almacen.nombre_almacen\r\n    ) {\r\n      setCargando(false);\r\n      return;\r\n    }\r\n\r\n    if (copy_datosGenerales.tipo_producto !== \"OTROS\") {\r\n      if (copy_presentaciones.length > 0) {\r\n        const pres = copy_presentaciones.filter(\r\n          (res) => res.color._id && res.medida._id && res.existencia\r\n        );\r\n        if (pres.length !== copy_presentaciones.length) {\r\n          setVerificate(true);\r\n          setCargando(false);\r\n          return;\r\n        }\r\n      } else {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    /* let copy_unidadesVenta = [...unidadesVenta]; */\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    if (actualizar_Precios) {\r\n      copy_datosProducto.mantener_precio = false;\r\n    } else {\r\n      copy_datosProducto.mantener_precio = true;\r\n    }\r\n    copy_precios.precios_producto = copy_preciosP;\r\n\r\n    let producto = {\r\n      datos_generales: await validateJsonEdit(\r\n        copy_datosGenerales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios: copy_precios,\r\n      imagenes,\r\n      imagenes_eliminadas,\r\n      almacen_inicial: copy_almacenInicial,\r\n      centro_de_costos: copy_centroCostos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones: copy_presentaciones,\r\n      presentaciones_eliminadas: copy_presentacionesEliminadas,\r\n      precio_plazos: copy_precioPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    copy_datosProducto.producto = producto;\r\n\r\n    if (copy_datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n      //si son medidas sumas las cantidades de las presetnaciones\r\n      if (copy_datosProducto.producto.presentaciones.length > 0) {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n          const { cantidad, cantidad_nueva } = presentacion;\r\n          let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n          copy_datosProducto.cantidad += cantidad + nueva;\r\n        });\r\n        if (isNaN(copy_datosProducto.cantidad)) copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      } else {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      }\r\n    } else {\r\n      //Si hay cantidad regalo y es diferente unidad hacer las converciones\r\n      const { cantidad_regalo, cantidad, unidad_regalo } = copy_datosProducto;\r\n      //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n      const factor =\r\n        copy_datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n      const cantiad_media = cantidad * factor;\r\n      let cantidad_regalo_media =\r\n        unidad_regalo === \"Pz\" ||\r\n        unidad_regalo === \"Kg\" ||\r\n        unidad_regalo === \"Lt\"\r\n          ? cantidad_regalo\r\n          : cantidad_regalo * factor;\r\n      let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n      //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n      if (factor > 1) {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media / factor;\r\n      } else {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media;\r\n      }\r\n    }\r\n    copy_datosProducto.subtotal = copy_datosProducto.subtotal_descuento;\r\n    copy_datosProducto.total = copy_datosProducto.total_descuento;\r\n\r\n    if (isEditing.producto) {\r\n      //se tiene que actualizar el producto en la fila y sumar el subtotal\r\n      let productosCompra_ordenados = [...productosCompra];\r\n      //calculos de totales, subtotales e impuestos de compra general\r\n      const {\r\n        iva,\r\n        ieps,\r\n      } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n      copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.ieps_total = ieps * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.subtotal =\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.impuestos =\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.total =\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n      let subtotal =\r\n        datosCompra.subtotal +\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.subtotal;\r\n      let impuestos =\r\n        datosCompra.impuestos +\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.impuestos;\r\n      let total =\r\n        datosCompra.total +\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.total;\r\n\r\n      productosCompra_ordenados.splice(isEditing.index, 1, copy_datosProducto);\r\n\r\n      setProductosCompra(productosCompra_ordenados);\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        subtotal,\r\n        impuestos,\r\n        total,\r\n      });\r\n      setIsEditing({});\r\n      setEditFinish(!editFinish);\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    } else {\r\n      // se agregar el producto normal y verificar si ya esta el producto en la lista\r\n\r\n      const existente = productosCompra\r\n        .map((prod_exist, index) => {\r\n          if (prod_exist.id_producto === copy_datosProducto.id_producto) {\r\n            return { prod_exist, index };\r\n          } else {\r\n            return \"\";\r\n          }\r\n        })\r\n        .filter(Boolean);\r\n\r\n      if (existente.length > 0) {\r\n        let productosCompra_ordenados = [...productosCompra];\r\n        const { index, prod_exist } = existente[0];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        productosCompra_ordenados.splice(index, 1, copy_datosProducto);\r\n        setProductosCompra(productosCompra_ordenados);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal:\r\n            datosCompra.subtotal -\r\n            prod_exist.subtotal +\r\n            copy_datosProducto.subtotal,\r\n          impuestos:\r\n            datosCompra.impuestos -\r\n            prod_exist.impuestos +\r\n            copy_datosProducto.impuestos,\r\n          total:\r\n            datosCompra.total - prod_exist.total + copy_datosProducto.total,\r\n        });\r\n      } else {\r\n        let array_ordenado = [...productosCompra];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        array_ordenado.splice(0, 0, copy_datosProducto);\r\n        setProductosCompra(array_ordenado);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal: datosCompra.subtotal + copy_datosProducto.subtotal,\r\n          impuestos: datosCompra.impuestos + copy_datosProducto.impuestos,\r\n          total: datosCompra.total + copy_datosProducto.total,\r\n        });\r\n      }\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (\r\n      datosCompra.almacen.id_almacen &&\r\n      producto.medidas_producto.length === 0\r\n    ) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <DatosProveedorAlmacen status={status} getProductos={getProductos} />\r\n      <Box my={1} />\r\n      <Grid container spacing={1} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography>Código de barras</Typography>\r\n          <Box width={200}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-codigo\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.codigo_barras\r\n                  ? option.datos_generales.codigo_barras\r\n                  : \"N/A\"\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Producto</Typography>\r\n          <Box display=\"flex\" width={250} alignItems=\"center\">\r\n            <Autocomplete\r\n              id=\"combo-box-producto-nombre\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.nombre_comercial\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n            {!datosCompra.almacen.id_almacen ||\r\n            !datosCompra.proveedor.id_proveedor ? (\r\n              <IconButton disabled>\r\n                <Add />\r\n              </IconButton>\r\n            ) : (\r\n              <CrearProducto\r\n                accion={false}\r\n                /* productosRefetch={refetch} */\r\n                getProductos={getProductos}\r\n                fromCompra={true}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Clave</Typography>\r\n          <Box width={140}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-clave\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) => option.datos_generales.clave_alterna}\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Costo</Typography>\r\n          <Box width={100}>\r\n            <TextField\r\n              inputMode=\"decimal\"\r\n              name=\"costo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              disabled={!datosProducto.producto.datos_generales}\r\n              value={costo}\r\n              onChange={(e) => setCosto(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item>\r\n              <Typography>Unidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  aria-readonly=\"true\"\r\n                  value={datosProducto.producto.precios.unidad_de_compra.unidad}\r\n                  disabled\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cantidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    inputProps: { min: 1 },\r\n                  }}\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={cantidad}\r\n                  onChange={(e) => setCantidad(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cant. regalo</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad_regalo\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={datosProducto.cantidad_regalo}\r\n                  onChange={(e) => obtenerCantidadRegalo(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Unidad. regalo</Typography>\r\n              <Box width={100}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  name=\"unidad_regalo\"\r\n                  fullWidth\r\n                >\r\n                  {datosProducto.producto.precios.granel ? (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Kg\">Kg</MenuItem>\r\n                      <MenuItem value=\"Costal\">Costal</MenuItem>\r\n                      <MenuItem value=\"Lt\">Lt</MenuItem>\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Caja\">Caja</MenuItem>\r\n                      <MenuItem value=\"Pz\">Pz</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </FormControl>\r\n              </Box>\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n\r\n        <Grid item>\r\n          <Typography>Descuento</Typography>\r\n          <DescuentosInputs />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1}>\r\n        <Grid container>\r\n          <Grid item xs={12} md={7} padding=\"checkbox\">\r\n            <PreciosDeVentaCompras />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={5}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Box m={1}>\r\n              <MostrarPrecios />\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              {datosProducto.producto.datos_generales &&\r\n              datosProducto.producto.datos_generales.tipo_producto !==\r\n                \"OTROS\" ? (\r\n                <TallasProductos\r\n                  verificate={verificate}\r\n                  setVerificate={setVerificate}\r\n                />\r\n              ) : null}\r\n\r\n              <Box mx={1} />\r\n              {datosProducto.costo !==\r\n              productoOriginal.precios.precio_de_compra.precio_con_impuesto ? (\r\n                <ModalAgregarCompra\r\n                  agregarCompra={agregarCompra}\r\n                  cargando={cargando}\r\n                />\r\n              ) : (\r\n                <Button\r\n                  style={\r\n                    loadingProductos\r\n                      ? {\r\n                          pointerEvents: \"none\",\r\n                          opacity: 0.4,\r\n                        }\r\n                      : null\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={\r\n                    cargando ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : (\r\n                      <Add />\r\n                    )\r\n                  }\r\n                  disableElevation\r\n                  disabled={\r\n                    datosProducto.producto.datos_generales\r\n                      ? datosProducto.producto.datos_generales.tipo_producto ===\r\n                        \"OTROS\"\r\n                        ? !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo ||\r\n                          !datosProducto.cantidad\r\n                          ? true\r\n                          : false\r\n                        : !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo\r\n                        ? true\r\n                        : false\r\n                      : true\r\n                  }\r\n                  onClick={() => agregarCompra()}\r\n                >\r\n                  {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalAgregarCompra = ({ agregarCompra, cargando }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    datosProducto,\r\n    datosCompra,\r\n    isEditing,\r\n    loadingProductos,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<Add />}\r\n        disableElevation\r\n        disabled={\r\n          datosProducto.producto.datos_generales\r\n            ? datosProducto.producto.datos_generales.tipo_producto === \"OTROS\"\r\n              ? !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo ||\r\n                !datosProducto.cantidad\r\n                ? true\r\n                : false\r\n              : !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo\r\n              ? true\r\n              : false\r\n            : true\r\n        }\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"modal-agregar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-agregar-compra\" style={{ padding: 0 }}>\r\n          <Alert\r\n            severity=\"info\"\r\n            icon={<InfoOutlined style={{ fontSize: 30 }} />}\r\n            style={{ padding: 16 }}\r\n          >\r\n            <AlertTitle style={{ fontSize: 20 }}>\r\n              El costo es diferente al precio de compra actual\r\n            </AlertTitle>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              ¿Desea actualizar los precios o mantenerlos?\r\n            </Typography>\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"default\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              agregarCompra();\r\n              handleClose();\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Mantener\r\n          </Button>\r\n          <PreciosProductos\r\n            cargando={cargando}\r\n            handleClose={handleClose}\r\n            agregarCompra={agregarCompra}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport { initial_state_preciosP } from \"../../../Catalogos/Producto/crearProducto\";\r\n\r\nexport const SetOrResetData = (accion,setStates, producto) => {\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n    datosCompra\r\n  } = setStates\r\n\r\n  if (accion === \"SET\") {\r\n    \r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.presentaciones ? producto.presentaciones : []\r\n    );\r\n    /* if (datosCompra.almacen.id_almacen && !producto.medidas_registradas) */\r\n    if (datosCompra.almacen.id_almacen && producto.presentaciones.length === 0) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n  } else {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  }\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { Close, Edit, Error } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"./initial_states\";\r\nimport { SetOrResetData } from \"./productos/setOrResetData\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaCompras() {\r\n  const classes = useStyles();\r\n  const { productosCompra, loadingProductos, datosCompra } = useContext(\r\n    ComprasContext\r\n  );\r\n\r\n  const productos_ordernados = [...productosCompra];\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer\r\n        className={classes.container}\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Código de barras</TableCell>\r\n              <TableCell>Producto</TableCell>\r\n              <TableCell>Precio de compra</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad regalo</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad total</TableCell>\r\n              <TableCell padding=\"checkbox\">Presentaciones</TableCell>\r\n              <TableCell>IVA Total</TableCell>\r\n              <TableCell>IEPS Total</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Remover</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos_ordernados.map((producto, index) => {\r\n              return (\r\n                <RenderProductosCompra\r\n                  key={index}\r\n                  producto={producto}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Grid container spacing={2} justifyContent=\"flex-end\">\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Subtotal:{\" \"}\r\n            <b>\r\n              ${datosCompra.subtotal ? formatoMexico(datosCompra.subtotal) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Impuestos:{\" \"}\r\n            <b>\r\n              $\r\n              {datosCompra.impuestos ? formatoMexico(datosCompra.impuestos) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              Total: ${datosCompra.total ? formatoMexico(datosCompra.total) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderProductosCompra = ({ producto, index }) => {\r\n  const {\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setCosto,\r\n    setCantidad,\r\n    setIssue,\r\n  } = useContext(ComprasContext);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const productoCTX = useContext(RegProductoContext);\r\n\r\n  const seStates = {\r\n    setDatosGenerales: productoCTX.setDatosGenerales,\r\n    setPrecios: productoCTX.setPrecios,\r\n    setValidacion: productoCTX.setValidacion,\r\n    setPreciosP: productoCTX.setPreciosP,\r\n    setImagenes: productoCTX.setImagenes,\r\n    setUnidadesVenta: productoCTX.setUnidadesVenta,\r\n    almacen_inicial: productoCTX.almacen_inicial,\r\n    setAlmacenInicial: productoCTX.setAlmacenInicial,\r\n    setUnidadVentaXDefecto: productoCTX.setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria: productoCTX.setUnidadVentaSecundaria,\r\n    setCentroDeCostos: productoCTX.setCentroDeCostos,\r\n    setPreciosPlazos: productoCTX.setPreciosPlazos,\r\n    setSubcategorias: productoCTX.setSubcategorias,\r\n    setOnPreview: productoCTX.setOnPreview,\r\n    setSubcostos: productoCTX.setSubcostos,\r\n    setImagenesEliminadas: productoCTX.setImagenesEliminadas,\r\n    setPresentaciones: productoCTX.setPresentaciones,\r\n    setPresentacionesEliminadas: productoCTX.setPresentacionesEliminadas,\r\n    datosCompra,\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsSelected(true);\r\n    setIsEditing({ producto, index, finish: false });\r\n    setDatosProducto(producto);\r\n    SetOrResetData(\"SET\", seStates, producto.producto);\r\n    setProductoOriginal(producto.producto);\r\n    setPreciosVenta(producto.producto.precios.precios_producto);\r\n    setCosto(producto.costo);\r\n    setCantidad(producto.cantidad);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsSelected(false);\r\n    setIsEditing({});\r\n    setDatosProducto(initial_state_datosProducto);\r\n    SetOrResetData(\"RESET\", seStates);\r\n    setCosto(0);\r\n    setCantidad(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(false);\r\n  }, [editFinish]);\r\n\r\n  useEffect(() => {\r\n    if (!producto.cantidad) {\r\n    } else {\r\n      setIssue(false);\r\n    }\r\n  }, [producto.cantidad]);\r\n\r\n  const unidad_producto = producto.producto.precios.unidad_de_compra.unidad;\r\n  const { cantidad, cantidad_regalo, cantidad_total } = producto;\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={isSelected || !cantidad}\r\n      style={\r\n        isEditing.producto && !isSelected\r\n          ? {\r\n              pointerEvents: \"none\",\r\n              opacity: 0.4,\r\n            }\r\n          : null\r\n      }\r\n    >\r\n      <TableCell>\r\n        {producto.producto.datos_generales\r\n          ? producto.producto.datos_generales.codigo_barras\r\n            ? producto.producto.datos_generales.codigo_barras\r\n            : \"-\"\r\n          : \"-\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell width={180}>\r\n        {!cantidad ? (\r\n          <Error color=\"error\" />\r\n        ) : (\r\n          <b>$ {formatoMexico(producto.total)}</b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_regalo}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_total}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.presentaciones.length > 0\r\n          ? producto.producto.presentaciones.length\r\n          : \"N/A\"}\r\n      </TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.iva}% - $${producto.iva_total ? formatoMexico(producto.iva_total) : 0}`}</TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.ieps}% - $${producto.ieps_total ? formatoMexico(producto.ieps_total) : 0}`}</TableCell>\r\n      <TableCell width={50}>\r\n        {isSelected ? (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            onClick={() => handleCancelEdit()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton color=\"primary\" size=\"small\" onClick={() => handleEdit()}>\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        <ModalDeleteProducto index={index} isSelected={isSelected} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalDeleteProducto = ({ index, isSelected }) => {\r\n  const {\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n  } = useContext(ComprasContext);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarCompra = () => {\r\n    let copy_compras = [...productosCompra];\r\n    let objeto_eliminado = copy_compras.splice(index, 1);\r\n\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      subtotal: datosCompra.subtotal - objeto_eliminado[0].subtotal,\r\n      impuestos: datosCompra.impuestos - objeto_eliminado[0].impuestos,\r\n      total: datosCompra.total - objeto_eliminado[0].total,\r\n    });\r\n    setProductosCompra([...copy_compras]);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        onClick={handleClickOpen}\r\n        disabled={isSelected}\r\n      >\r\n        <RemoveCircleOutlineIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          Seguro que quiere eliminar esto de la lista?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={eliminarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { Done, Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConfirmarCompra({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const [credito, setCredito] = useState(false);\r\n  const [productos_recalculados, setProductosRecalculados] = useState([]);\r\n  const { productosCompra, datosCompra, setDatosCompra, issue } = useContext(\r\n    ComprasContext\r\n  );\r\n  const initial_state_descuento = {\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    descuento_aplicado: false,\r\n    porcentaje: 0,\r\n    cantidad_descontada: 0,\r\n    precio_con_descuento: 0,\r\n  };\r\n  const [descuento_base, setDescuentoBase] = useState(initial_state_descuento);\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const cleanStates = () => {\r\n    setCredito(false);\r\n    setProductosRecalculados([]);\r\n    setDescuentoBase(initial_state_descuento);\r\n  };\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const recalcularPrecios = () => {\r\n    //aplicar descuento a los productos y actualizar precios\r\n    const productos = [...productosCompra];\r\n    const datos_descuento = { ...initial_state_descuento };\r\n    const {\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      descuento_aplicado,\r\n    } = descuento_base;\r\n    let productos_array = [];\r\n\r\n    for (let index = 0; index < productos.length; index++) {\r\n      const producto = productos[index];\r\n      const copy_producto = { ...producto };\r\n      const { precios } = copy_producto.producto;\r\n      const { iva, ieps } = precios;\r\n      const subtotal_actual = copy_producto.subtotal;\r\n\r\n      const cantidad_descontada_product = Math.round(\r\n        (subtotal_actual * porcentaje) / 100\r\n      );\r\n      const subtotal_con_descuento =\r\n        subtotal_actual - cantidad_descontada_product;\r\n\r\n      const iva_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n      const ieps_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n\r\n      const impuestos = iva_precio + ieps_precio;\r\n      const total = subtotal_con_descuento + impuestos;\r\n\r\n      copy_producto.iva_total = iva_precio;\r\n      copy_producto.ieps_total = ieps_precio;\r\n      copy_producto.descuento_porcentaje = porcentaje;\r\n      copy_producto.descuento_precio = cantidad_descontada_product;\r\n      copy_producto.impuestos = impuestos;\r\n      copy_producto.subtotal = subtotal_con_descuento;\r\n      copy_producto.total = total;\r\n\r\n      //sumar los totales a datosCompra\r\n      datos_descuento.impuestos += impuestos;\r\n      datos_descuento.subtotal += subtotal_con_descuento;\r\n      datos_descuento.total += total;\r\n\r\n      //meterlo al nuevo array\r\n      productos_array.push(copy_producto);\r\n    }\r\n    //poner los nuevos productos\r\n    setProductosRecalculados(productos_array);\r\n    datos_descuento.porcentaje = porcentaje;\r\n    datos_descuento.cantidad_descontada = cantidad_descontada;\r\n    datos_descuento.descuento_aplicado = descuento_aplicado;\r\n    setDescuentoBase(datos_descuento);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<Done />}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-confirmacion-compra\"\r\n        aria-describedby=\"dialog-confirmacion-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n              size=\"small\"\r\n              disabled={loading_modal}\r\n            >\r\n              <Close style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={2}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={credito}\r\n                      onChange={(e) => setCredito(e.target.checked)}\r\n                    />\r\n                  }\r\n                  label=\"Compra a crédito\"\r\n                />\r\n                <Typography>Fecha de vencimiento del crédito</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  type=\"date\"\r\n                  onChange={(e) => {\r\n                    setDatosCompra({\r\n                      ...datosCompra,\r\n                      fecha_vencimiento_credito: e.target.value,\r\n                    });\r\n                  }}\r\n                  disabled={!credito}\r\n                  value={datosCompra.fecha_vencimiento_credito}\r\n                />\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"forma_pago\"\r\n                >\r\n                  <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n                  <Select\r\n                    labelId=\"forma_pago\"\r\n                    value={datosCompra.forma_pago}\r\n                    name=\"forma_pago\"\r\n                    onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                    label=\"Forma de pago\"\r\n                  >\r\n                    {formaPago.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={descuento_base.descuento_aplicado}\r\n                      onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                      name=\"descuento_aplicado\"\r\n                    />\r\n                  }\r\n                  label=\"Aplicar descuento\"\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPrecio(e.target.value)}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => recalcularPrecios()}\r\n                >\r\n                  Recalcular\r\n                </Button>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Subtotal:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.subtotal\r\n                        ? datosCompra.subtotal\r\n                        : descuento_base.subtotal\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Impuestos:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.impuestos\r\n                        ? datosCompra.impuestos\r\n                        : descuento_base.impuestos\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Total:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.total\r\n                        ? datosCompra.total\r\n                        : descuento_base.total\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              cleanStates();\r\n              realizarCompraBD(\r\n                false,\r\n                credito,\r\n                handleClose,\r\n                setLoadingModal,\r\n                descuento_base,\r\n                productos_recalculados\r\n              );\r\n            }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal || !datosCompra.forma_pago}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DatosProducto from \"./productos/DatosProducto\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport ListaCompras from \"./TablaCompras\";\r\nimport {\r\n  ComprasContext,\r\n  ComprasProvider,\r\n} from \"../../../../context/Compras/comprasContext\";\r\nimport \"date-fns\";\r\nimport { Done, Timer } from \"@material-ui/icons\";\r\nimport {\r\n  initial_state_datosCompra,\r\n  initial_state_datosProducto,\r\n  initial_state_precios_venta,\r\n  initial_state_productoOriginal,\r\n  initial_state_productosCompra,\r\n} from \"./initial_states\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_COMPRA,\r\n  CREAR_COMPRA_ESPERA,\r\n} from \"../../../../gql/Compras/compras\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ConfirmarCompra from \"./ConfirmarCompra\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCompra({\r\n  compra,\r\n  status,\r\n  handleOpenDetalles,\r\n  refetchEspera,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    if (status === \"enEspera\") {\r\n      handleOpenDetalles();\r\n      refetchEspera();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {status === \"enEspera\" ? (\r\n        <Button\r\n          fullWidth\r\n          onClick={handleClickOpen}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Done />}\r\n        >\r\n          continuar compra\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Abrir una compra\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <ComprasProvider>\r\n        <ModalCompra\r\n          open={open}\r\n          handleClose={handleClose}\r\n          status={status}\r\n          compra={compra}\r\n        />\r\n      </ComprasProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalCompra = ({ open, handleClose, compra, status }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n  } = useContext(ComprasContext);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearCompra] = useMutation(CREAR_COMPRA);\r\n  const [crearCompraEnEspera] = useMutation(CREAR_COMPRA_ESPERA);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"enEspera\" && compra && open === true) {\r\n      setDatosCompra(compra);\r\n      setProductosCompra(compra.productos);\r\n    }\r\n  }, [open]);\r\n\r\n  const realizarCompraBD = async (\r\n    compra_en_espera,\r\n    credito,\r\n    handleClose,\r\n    setLoadingModal,\r\n    descuento_compra,\r\n    productos_con_descuento\r\n  ) => {\r\n    let datos = { ...datosCompra };\r\n    let copy_datosProducto = { ...productosCompra };\r\n    let productos = copy_datosProducto;\r\n    if (status === \"enEspera\") {\r\n      productos = copy_datosProducto.map((res) => {\r\n        delete res.conflicto;\r\n        return res;\r\n      });\r\n      delete datos.empresa;\r\n      delete datos.sucursal;\r\n      delete datos.usuario;\r\n    }\r\n\r\n    setLoading(true);\r\n    if (credito) setLoadingModal(true);\r\n    try {\r\n      datos.productos = productos;\r\n\r\n      if (compra_en_espera) {\r\n        datos.en_espera = true;\r\n        const result = await crearCompraEnEspera({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompraEnEspera.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        if (credito) {\r\n          datos.compra_credito = true;\r\n          datos.saldo_credito_pendiente = datos.total;\r\n        }\r\n        if (descuento_compra.descuento_aplicado) {\r\n          const {\r\n            descuento_aplicado,\r\n            subtotal,\r\n            total,\r\n            impuestos,\r\n            ...descuento\r\n          } = descuento_compra;\r\n          datos.productos = productos_con_descuento;\r\n          datos.descuento_aplicado = descuento_compra.descuento_aplicado;\r\n          datos.subtotal = descuento_compra.subtotal;\r\n          datos.impuestos = descuento_compra.impuestos;\r\n          datos.total = descuento_compra.total;\r\n          datos.descuento = descuento;\r\n        }\r\n        /* console.log(datos); */\r\n        const result = await crearCompra({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompra.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      limpiarCampos();\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error de servidor`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleDelete = () => {\r\n    if (productosCompra.length > 0) {\r\n      setOpenDelete(!openDelete);\r\n    } else {\r\n      limpiarCampos();\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      onClose={handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle style={{ padding: 0 }}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Nueva compra\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleToggleDelete}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n              <CancelarCompra\r\n                handleClose={handleClose}\r\n                handleToggleDelete={handleToggleDelete}\r\n                openDelete={openDelete}\r\n              />\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DatosProducto status={status} />\r\n        <Box my={2} />\r\n        <ListaCompras />\r\n      </DialogContent>\r\n\r\n      <DialogActions\r\n        style={{\r\n          justifyContent: status === \"enEspera\" ? \"flex-end\" : \"space-between\",\r\n        }}\r\n      >\r\n        {status === \"enEspera\" ? null : (\r\n          <Button\r\n            autoFocus\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => realizarCompraBD(true)} //realiza la compra en espera en la funcion\r\n            disabled={!productosCompra.length}\r\n            startIcon={<Timer />}\r\n          >\r\n            Compra en espera\r\n          </Button>\r\n        )}\r\n        <ConfirmarCompra realizarCompraBD={realizarCompraBD} />\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CancelarCompra = ({ handleClose, handleToggleDelete, openDelete }) => {\r\n  const {\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setPreciosVenta,\r\n    setProductoOriginal,\r\n    setDatosProducto,\r\n  } = useContext(ComprasContext);\r\n\r\n  const cancelarCompra = () => {\r\n    /* reset states */\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    /* cerrar modales */\r\n    handleToggleDelete();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={openDelete}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleToggleDelete}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          ¿Quieres cancelar esta compra?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleToggleDelete} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={cancelarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosComprasExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosComprasExcel from \"./ExportarProductosCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n        {compra.compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            compra.credito_pagado === true ? 'Credito pagado' : `Saldo pendiente: $${formatoMexico(compra.saldo_credito_pendiente)}`\r\n          }\r\n          color={compra.credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosComprasExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosDeCompra\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Compra a credito</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    compra_credito,\r\n    credito_pagado,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        {compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            credito_pagado === true ? 'Credito: Pagado' : \"Credito: Pendiente\"\r\n          }\r\n          color={credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaCompras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarComprasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcInspection className={classes.icon} />\r\n          </Box>\r\n          Compras realizadas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras realizadas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CheckCircle, Done, VerifiedUser } from \"@material-ui/icons\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VerificarProductosCompras({\r\n  compra,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setVerificado,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (success) {\r\n      setVerificado(true);\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={<VerifiedUser />}\r\n      >\r\n        Continuar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        /* onClose={() => handleClose()} */\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-verificarcompra-title\"\r\n        aria-describedby=\"dialog-verificarcompra-description\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <ModalVerificacion\r\n          handleClose={handleClose}\r\n          compra={compra}\r\n          handleClickOpen={handleClickOpen}\r\n          open={open}\r\n          nuevoArray={nuevoArray}\r\n          setNuevoArray={setNuevoArray}\r\n          setSuccess={setSuccess}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalVerificacion = ({\r\n  handleClose,\r\n  compra,\r\n  handleClickOpen,\r\n  open,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setSuccess,\r\n}) => {\r\n  const [loadingVerificacion, setLoadingVerificacion] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let count = 0;\r\n\r\n  /* Queries */\r\n  const [getQuery, { loading, data, error }] = useLazyQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      almacen: compra.almacen.id_almacen,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) count = 1;\r\n\r\n  useEffect(() => {\r\n    if (open && count === 0) {\r\n      getQuery();\r\n      count = 1;\r\n    }\r\n  }, [handleClickOpen]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      verificarProductos();\r\n    }\r\n  }, [data]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent\r\n          style={{\r\n            height: 150,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <DialogContentText id=\"dialog-verificarcompra-description\">\r\n            Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n            quitaran al retomar la compra para no causar conflictos, podras\r\n            editar tu compra mas adelante\r\n          </DialogContentText>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Obteniendo productos de la Base de datos...\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <ErrorPage error={error} altura={130} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  /* console.log(compra); */\r\n\r\n  function verificarProductos() {\r\n    setLoadingVerificacion(true);\r\n    const { productos } = compra;\r\n    let productos_nuevos = [...productos];\r\n    let conflicto = false;\r\n\r\n    for (let i = 0; i < productos.length; i++) {\r\n      const productosCompra = productos[i];\r\n      let copy_producto_compra = { ...productosCompra };\r\n      let copy_producto = { ...productosCompra.producto };\r\n\r\n      //Filtrar los productos\r\n      const productos_filtrados = obtenerProductos.filter(\r\n        (res) => res._id === copy_producto_compra.id_producto\r\n      );\r\n\r\n      const { precios, unidades_de_venta, presentaciones } = copy_producto;\r\n\r\n      const precios_base = productos_filtrados[0].precios;\r\n      const unidades_base = productos_filtrados[0].unidades_de_venta;\r\n      const presentaciones_base = productos_filtrados[0].medidas_producto;\r\n\r\n      //verificacion de Precios\r\n      if (\r\n        precios.unidad_de_compra.cantidad !==\r\n          precios_base.unidad_de_compra.cantidad ||\r\n        precios.unidad_de_compra.precio_unitario_con_impuesto !==\r\n          precios_base.unidad_de_compra.precio_unitario_con_impuesto ||\r\n        precios.unidad_de_compra.unidad !== precios_base.unidad_de_compra.unidad\r\n      ) {\r\n        /* console.log(\"conflicto precios\"); */\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.precios = precios_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n      }\r\n      //verificacion de Unidades de venta\r\n      const u_default = unidades_de_venta.filter((res) => res.default === true);\r\n      const u_default_base = unidades_base.filter(\r\n        (res) => res.default === true\r\n      );\r\n      if (\r\n        u_default[0].cantidad !== u_default_base[0].cantidad ||\r\n        u_default[0].precio !== u_default_base[0].precio ||\r\n        u_default[0].unidad !== u_default_base[0].unidad\r\n      ) {\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.unidades_de_venta = unidades_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n        /* console.log(\"conflicto unidades\"); */\r\n      }\r\n\r\n      //verificacion de Presentaciones si hay presentaciones\r\n\r\n      if (presentaciones.length > 0) {\r\n        /* console.log(presentaciones, presentaciones_base); */\r\n        if (presentaciones_base.length > 0) {\r\n          if (presentaciones.length === presentaciones_base.length) {\r\n            for (let x = 0; x < presentaciones.length; x++) {\r\n              const present = presentaciones[x];\r\n              for (let y = 0; y < presentaciones_base.length; y++) {\r\n                const present_base = presentaciones_base[y];\r\n\r\n                if (\r\n                  present.medida._id === present_base.medida._id &&\r\n                  present.color._id === present_base.color._id &&\r\n                  present.almacen === present_base.almacen\r\n                ) {\r\n                  if (\r\n                    present.cantidad !== present_base.cantidad ||\r\n                    present.precio !== present_base.precio\r\n                  ) {\r\n                    //si son diferentes se agrega las presentaciones_base al compra_nueva\r\n                    copy_producto.presentaciones = presentaciones_base;\r\n                    copy_producto_compra.producto = copy_producto;\r\n                    copy_producto_compra.conflicto = true;\r\n                    productos_nuevos[i] = copy_producto_compra;\r\n                    conflicto = true;\r\n                    /* console.log(\"conflicto presentaciones\"); */\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            //si son diferentes se agrega las presentaciones al compra_nueva\r\n            copy_producto.presentaciones = presentaciones_base;\r\n            copy_producto_compra.producto = copy_producto;\r\n            copy_producto_compra.conflicto = true;\r\n            productos_nuevos[i] = copy_producto_compra;\r\n            conflicto = true;\r\n            /* console.log(\"conflicto diferentes presentaciones \"); */\r\n          }\r\n        } else {\r\n          //si no hay se agrega las presentaciones al compra_nueva\r\n          copy_producto_compra.conflicto = true;\r\n          productos_nuevos[i] = copy_producto_compra;\r\n          conflicto = true;\r\n          /* console.log(\"conflicto sin presentaciones \"); */\r\n        }\r\n      }\r\n    }\r\n\r\n    const nuevo_producto_compra = [];\r\n    let subtotal = 0;\r\n    let impuestos = 0;\r\n    let total = 0;\r\n    if (conflicto) {\r\n      for (let k = 0; k < productos_nuevos.length; k++) {\r\n        const datosProducto = { ...productos_nuevos[k] };\r\n\r\n        if (datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n          //si es calzado o ropa\r\n          //CANTIDADES\r\n          if (datosProducto.producto.presentaciones.length > 0) {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n              const { cantidad, cantidad_nueva } = presentacion;\r\n              let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n              datosProducto.cantidad += cantidad + nueva;\r\n            });\r\n            if (isNaN(datosProducto.cantidad)) datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          } else {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          }\r\n        } else {\r\n          //Si es una unidad normal\r\n\r\n          //CANTIDADES\r\n          const { cantidad_regalo, cantidad, unidad_regalo } = datosProducto;\r\n          //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n          const factor =\r\n            datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n          const cantiad_media = cantidad * factor;\r\n          let cantidad_regalo_media =\r\n            unidad_regalo === \"Pz\" ||\r\n            unidad_regalo === \"Kg\" ||\r\n            unidad_regalo === \"Lt\"\r\n              ? cantidad_regalo\r\n              : cantidad_regalo * factor;\r\n          let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n          //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n          if (factor > 1) {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n            datosProducto.cantidad_total = cantidad_total_media / factor;\r\n          } else {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n            datosProducto.cantidad_total = cantidad_total_media;\r\n          }\r\n        }\r\n\r\n        //PRECIOS\r\n        const {\r\n          iva,\r\n          ieps,\r\n          precio_con_impuesto,\r\n          precio_sin_impuesto,\r\n        } = datosProducto.producto.precios.precio_de_compra;\r\n\r\n        datosProducto.total_con_descuento = precio_con_impuesto;\r\n        datosProducto.costo = precio_con_impuesto;\r\n        datosProducto.iva_total = iva * datosProducto.cantidad_total;\r\n        datosProducto.ieps_total = ieps * datosProducto.cantidad_total;\r\n        datosProducto.impuestos = (iva + ieps) * datosProducto.cantidad_total;\r\n        datosProducto.subtotal =\r\n          precio_sin_impuesto * datosProducto.cantidad_total;\r\n        datosProducto.total =\r\n          precio_con_impuesto * datosProducto.cantidad_total;\r\n\r\n        if (datosProducto.descuento_porcentaje > 0) {\r\n          datosProducto.descuento_precio = Math.round(\r\n            (precio_con_impuesto * datosProducto.descuento_porcentaje) / 100\r\n          );\r\n          datosProducto.total_con_descuento =\r\n            precio_con_impuesto - datosProducto.descuento_precio;\r\n        }\r\n\r\n        subtotal += datosProducto.subtotal;\r\n        impuestos += datosProducto.impuestos;\r\n        total +=\r\n          datosProducto.total_con_descuento * datosProducto.cantidad_total;\r\n\r\n        nuevo_producto_compra.push(datosProducto);\r\n      }\r\n      setNuevoArray({\r\n        _id: compra._id,\r\n        almacen: compra.almacen,\r\n        proveedor: compra.proveedor,\r\n        productos: nuevo_producto_compra,\r\n        en_espera: compra.en_espera,\r\n        fecha_registro: compra.fecha_registro,\r\n        impuestos,\r\n        subtotal,\r\n        total,\r\n      });\r\n    } else {\r\n      setNuevoArray(compra);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      setLoadingVerificacion(false);\r\n      setSuccess(true);\r\n    }, 1500);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent\r\n        style={{\r\n          height: 150,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <DialogContentText id=\"dialog-verificarcompra-description\">\r\n          Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n          quitaran al retomar la compra para no causar conflictos, podras editar\r\n          tu compra mas adelante\r\n        </DialogContentText>\r\n        {loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Verificando existencias en tus productos...\r\n          </Box>\r\n        ) : null}\r\n        {!loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CheckCircle color=\"primary\" style={{ marginRight: 8 }} />\r\n            Listo, producto verificados\r\n          </Box>\r\n        ) : null}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {loadingVerificacion ? (\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        ) : (\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Done />}>\r\n            Aceptar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport AbrirCompra from \"../AbrirCompra/AbrirCompra\";\r\nimport VerificarProductosCompras from \"./VerificarProductos\";\r\n\r\nimport {\r\n  Dialog,\r\n  CircularProgress,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { CheckCircle, DeleteOutlined, Done, Error } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /* let compra_temp = {...compra} */\r\n  const [compra_temp, setCompraTemp] = useState({ ...compra });\r\n  const { productos } = compra_temp;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const [nuevoArray, setNuevoArray] = useState();\r\n  const [verificado, setVerificado] = useState(false);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  useEffect(() => {\r\n    if (verificado && nuevoArray) {\r\n      setCompraTemp(nuevoArray);\r\n    }\r\n  }, [verificado]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra_temp.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra_temp.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${parseFloat(compra_temp.subtotal).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${parseFloat(compra_temp.impuestos).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${formatoMexico(parseFloat(compra_temp.total).toFixed(2))}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n                <ModalEliminarCompra\r\n                  compra={compra_temp}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n\r\n              {permisosUsuario.accesos.compras.compras_espera.editar === false ? (null) : (\r\n                verificado ? (\r\n                  <AbrirCompra\r\n                    compra={compra_temp}\r\n                    status=\"enEspera\"\r\n                    handleOpenDetalles={handleOpenDetalles}\r\n                    refetchEspera={refetch}\r\n                  />\r\n                ) : (\r\n                  <VerificarProductosCompras\r\n                    compra={compra_temp}\r\n                    nuevoArray={nuevoArray}\r\n                    setNuevoArray={setNuevoArray}\r\n                    setVerificado={setVerificado}\r\n                  />\r\n                )\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {verificado ? <TableCell /> : null}\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                /* console.log(datos); */\r\n                return (\r\n                  <TableRow\r\n                    tabIndex={-1}\r\n                    key={index}\r\n                    selected={datos.conflicto}\r\n                  >\r\n                    {verificado ? (\r\n                      <TableCell\r\n                        style={{\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                        }}\r\n                      >\r\n                        {datos.conflicto ? (\r\n                          <Error color=\"primary\" />\r\n                        ) : (\r\n                          <CheckCircle\r\n                            style={{\r\n                              color: theme.palette.success.main,\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    ) : null}\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalEliminarCompra = ({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n      handleOpenDetalles();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"secondary\"\r\n        startIcon={<DeleteOutlined />}\r\n        onClick={() => handleOpen()}\r\n      >\r\n        Eliminar compra\r\n      </Button>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DatosDeCompraEspera from \"./DatosDeCompraEspera\";\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, DeleteOutlined, Done } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaEnEspera({ obtenerComprasEnEspera, refetch }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Detalles</TableCell>\r\n              {permisosUsuario.accesos.compras.compras_espera.elimina === false ? (null) : (\r\n                <TableCell>Eliminar</TableCell>\r\n              )}\r\n              </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasEnEspera.map((compra, index) => (\r\n              <RenderRowsComprasEspera\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsComprasEspera = ({ compra, refetch, setAlert }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalContinuarCompra\r\n          compra={compra}\r\n          refetch={refetch}\r\n          setAlert={setAlert}\r\n        />\r\n      </TableCell>\r\n      {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n        <TableCell>\r\n          <ModalEliminarCompra\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalContinuarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra en espera\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompraEspera\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            handleOpenDetalles={handleOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <DeleteOutlined color=\"error\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useRef, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FcOvertime } from \"react-icons/fc\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport ListaEnEspera from \"./ListaEnEspera\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { OBTENER_COMPRAS_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasEnEspera() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcOvertime className={classes.icon} />\r\n          </Box>\r\n          Compras en espera\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras en espera\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COMPRAS_ESPERA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasEnEspera = [];\r\n  if (data) obtenerComprasEnEspera = data.obtenerComprasEnEspera;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value });\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3} maxWidth={500}>\r\n        <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n          <TextField\r\n            inputRef={searchfilter}\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Buscar una compra...\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                    <SearchOutlined />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </form>\r\n      </Box>\r\n      <ListaEnEspera obtenerComprasEnEspera={obtenerComprasEnEspera} refetch={refetch} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport AbrirCompra from './AbrirCompra/AbrirCompra';\r\nimport ComprasRealizadas from './ComprasRealizadas/ComprasRealizadas';\r\n/* import CargaMasiva from './CargaMasiva/CargaMasiva'; */\r\nimport ComprasEnEspera from './ComprasEnEspera/ComprasEnEspera';\r\n\r\n\r\nexport default function Compras() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t{permisosUsuario.accesos.compras.abrir_compra.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<AbrirCompra />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_realizadas.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasRealizadas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_espera.ver === false ? (null):(\r\n                <Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasEnEspera />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t\t{/* <Grid item md={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CargaMasiva />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useContext, useState, Fragment, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CLIENTES,\r\n  ACTUALIZAR_CLIENTE,\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaClientes({\r\n  user,\r\n  tipo,\r\n  filtro,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const classes = useStyles();\r\n  const { setUpdateClientVenta, updateClientVenta, update } = useContext(\r\n    ClienteCtx\r\n  );\r\n  const [value] = useDebounce(filtro, 1000);\r\n  const [selectDataClient, setSelectDataClient] = useState(false);\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo, filtro: value },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  //show modal accept client\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const [dataSelectRowClient, setDataSelectRowClient] = useState({});\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpenModal = (data, e) => {\r\n    if (ventas && !selectDataClient) {\r\n      setShowModal(true);\r\n      setDataSelectRowClient(data);\r\n    }\r\n  };\r\n\r\n  const handleClickSelectClient = () => {\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero:\r\n            venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          cliente: dataSelectRowClient,\r\n          venta_cliente: true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n        })\r\n      );\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setShowModal(!showModal);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n        width=\"120vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"110\">No. Cliente</TableCell>\r\n                <TableCell width=\"100\">Clave</TableCell>\r\n                <TableCell width=\"200\">Nombre</TableCell>\r\n                <TableCell width=\"150\">Correo</TableCell>\r\n                <TableCell width=\"200\">Fecha Registro</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"100\">Estado</TableCell>\r\n                )}\r\n                <TableCell width=\"50\">Editar</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"50\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    user={user}\r\n                    key={index}\r\n                    datos={row}\r\n                    handleClickOpenModal={handleClickOpenModal}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Dialog\r\n          open={showModal}\r\n          onClose={() => setShowModal(false)}\r\n          aria-labelledby=\"select-dialog-cliente-venta\"\r\n          aria-describedby=\"select-cliente-venta-description\"\r\n        >\r\n          <DialogTitle id=\"select-dialog-cliente-venta\">\r\n            {\" Estas seguro que desea seleccionar este cliente ?\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"select-cliente-venta-description\">\r\n              Al seleccionar el cliente se colocara en la venta.\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => setShowModal(false)}\r\n              color=\"primary\"\r\n              autoFocus\r\n            >\r\n              cancelar\r\n            </Button>\r\n            <Button onClick={() => handleClickSelectClient()} color=\"primary\">\r\n              Aceptar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  user,\r\n  handleClickOpenModal,\r\n  setAlert,\r\n  refetch,\r\n}) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { update, setUpdate } = useContext(ClienteCtx);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* console.log(datos); */\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            estado_cliente: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleClickOpenModal(datos, e)}\r\n      >\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n        </TableCell>\r\n        {user === \"EMPLEADO\" ? null : (\r\n          <TableCell>\r\n            {loading ? (\r\n              <CircularProgress size={30} />\r\n            ) : (\r\n              <Switch\r\n                checked={datos.estado_cliente}\r\n                onChange={cambiarEstado}\r\n                color=\"primary\"\r\n              />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <CrearCliente\r\n              tipo=\"CLIENTE\"\r\n              accion=\"actualizar\"\r\n              datos={datos}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <EliminarCliente\r\n              datos={datos}\r\n              setAlert={setAlert}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FcManager } from \"react-icons/fc\";\r\nimport { Box, Grid, IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"./ListaClientes\";\r\nimport CrearCliente from \"./CrearCliente\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cliente() {\r\n  const classes = useStyles();\r\n\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcManager className={classes.icon} />\r\n          </Box>\r\n          Cliente\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cliente\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box mx={4} my={3}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={8}>\r\n              <Paper className={classes.root}>\r\n                <InputBase\r\n                  fullWidth\r\n                  placeholder=\"Buscar cliente...\"\r\n                  onChange={(e) => setValues(e.target.value)}\r\n                  onKeyPress={pressEnter}\r\n                  value={values}\r\n                />\r\n                <IconButton onClick={() => setValues(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={6}\r\n              xs={4}\r\n              style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n            >\r\n              {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n              false ? null : (\r\n                <CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" />\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n        <Box mx={4}>\r\n          <ListaClientes tipo=\"CLIENTE\" filtro={values} />\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRAR_DESCUENTOS = gql`\r\n\tmutation CrearDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        crearDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DESCUENTOS = gql`\r\n\tmutation ActualizarDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        actualizarDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const DESACTIVAR_DESCUENTOS = gql`\r\n\tmutation DesactivarDescuentoUnidad($input: ActivarDescuentoUnidades , $id: ID!){\r\n        desactivarDescuentoUnidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DESCUENTOS = gql`\r\n\tmutation ELiminarDescuentoUnidad( $id: ID!){\r\n        eliminarDescuentoUnidad( id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Delete } from '@material-ui/icons';\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Button, Dialog, DialogActions, DialogTitle, IconButton, Switch, Tooltip } from '@material-ui/core';\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport {  DESACTIVAR_DESCUENTOS, ELIMINAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\n\r\nconst headCells = [\r\n\t{ id: 'cantidad',  label: 'Cantidad' },\r\n\t{ id: 'tipo',  label: 'Tipo' },\r\n\t{ id: 'precio',  label: 'Precio U.' },\r\n\t{ id: 'precioDes',  label: 'Precio Desc.' },\r\n\t{ id: 'descuento',  label: '% Desc.' },\r\n\t{ id: 'eliminar',  label: 'Eliminar'},\r\n\t{ id: 'activo',  label: 'Activo'}\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount, datosPrecios } = props;\r\n\tlet variable = false;\r\n\tdatosPrecios?.forEach(element => {\r\n\t\tif (element.medida) {\r\n\t\t\treturn variable = true;\r\n\t\t}\r\n\t});\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t\t{ variable === true ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell>Talla</TableCell>\r\n\t\t\t\t\t\t<TableCell>Color</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t): null}\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\theight: 300\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: \"1px solid rgba(0,0,0, .3)\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: \"15%\",\r\n\t\tcursor: \"pointer\",\r\n\t  },\r\n}));\r\n\r\nexport default function TablaPreciosDescuentos(\r\n\t{ \r\n\t\tvalue,\r\n\t\tdatos,\r\n\t\tsetCleanList, \r\n\t\tcleanList, \r\n\t\tverificarDatos, \r\n\t\tsetPrecioPrueba,\r\n\t\tproductosRefetch,\r\n\t\tsetLoading,\r\n\t\tloading\r\n\t}\r\n\t) {\r\n\tconst classes = useStyles();\r\n\tconst { \r\n\t\t//es este \r\n\t\tdatosPreciosProducto, \r\n        setPreciosProductos,\r\n\t\tsetDatosPreciosProducto\r\n    } = useContext(RegProductoContext);\r\n\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tvar porcentaje  =  parseFloat((100 - value).toFixed(6));\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tif(datos){\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n\t\t\tsetDatosPreciosProducto(datos.medidas_producto);\r\n\t\t}else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = datosPreciosProducto.map((n) => n);\r\n\t\t\tsetSelected(newSelecteds); \r\n\t\t\tverificarDatos(newSelecteds);\r\n\t\t\tsetPreciosProductos(newSelecteds);\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tsetPreciosProductos([]); \r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, _id) => {\r\n\t\tconst selectedIndex = selected.indexOf(_id);\r\n\t\tlet newSelected = [];\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, _id);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\t\tsetPrecioPrueba(newSelected.length === 0 ? 0 : newSelected);\r\n\t\tsetPreciosProductos(newSelected);\r\n\t\tverificarDatos(newSelected);\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetSelected([]);\r\n\t\tsetCleanList(false);\r\n\t}, [cleanList]);\r\n\r\n\tconst isSelected = (_id) => selected.indexOf(_id) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, datosPreciosProducto.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<TableContainer className={classes.table}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={datosPreciosProducto.length}\r\n\t\t\t\t\t\t\tdatosPrecios={datosPreciosProducto}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{datosPreciosProducto.map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t    setLoading={setLoading}\r\n\t\t\t\t\t\t\t\t\t\tproductosRefetch={productosRefetch}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={handleClick} \r\n\t\t\t\t\t\t\t\t\t\tselected={selected} \r\n\t\t\t\t\t\t\t\t\t\trow={row}\r\n\t\t\t\t\t\t\t\t\t\tsetAlert={setAlert}\r\n\t\t\t\t\t\t\t\t\t\tporcentaje={porcentaje}\r\n\t\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\t\tdatos={datos}\r\n\t\t\t\t\t\t\t\t\t\tisItemSelected={isItemSelected} \r\n\t\t\t\t\t\t\t\t\t\tlabelId={labelId} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({row, value, isItemSelected, setLoading, datos, labelId, setAlert, porcentaje, productosRefetch, handleClick, selected}) {\r\n\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n\tconst { \r\n        setDatosPreciosProducto,\r\n    } = useContext(RegProductoContext);\r\n\tconst [ DesactivarDescuentoUnidad ] = useMutation(DESACTIVAR_DESCUENTOS);\r\n\tconst [ ELiminarDescuentoUnidad ] = useMutation(ELIMINAR_DESCUENTOS);\r\n\r\n\tconst handleChangeActivo = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait DesactivarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tdescuento_activo: !row.descuento_activo,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: row._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetLoading(false);\r\n\t\t\tproductosRefetch();\r\n\t\t\tsetAlert({ message: 'Estado de descuento actualizado', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Ocurrio un problema en el servidor' , status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleModal = () => {\r\n\t\tsetOpenModal(!openModal);\r\n\t\teditarDatos();\r\n\t};\r\n\t\r\n\tconst editarDatos = () => {\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n\t\t\tsetLoading(false);\r\n        }else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t\tsetLoading(false);\r\n        }\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tproductosRefetch();\r\n\t\t\tconst resultado = await ELiminarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\thandleModal();\r\n\t\t\teditarDatos();\r\n\t\t\tsetAlert({ message: resultado.data.eliminarDescuentoUnidad.message, status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<TableRow\r\n\t\t\thover\r\n\t\t\trole=\"checkbox\"\r\n\t\t\taria-checked={isItemSelected}\r\n\t\t\ttabIndex={-1}\r\n\t\t\tkey={row._id}\r\n\t\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\thandleClick(event, row)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.cantidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row?.unidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.precio}</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{\r\n\t\t\t\t\tisItemSelected === true && selected.length > 1 ? <b style={{color: 'green'}}> ${parseFloat((row.precio * porcentaje / 100).toFixed(2))} </b>\r\n\t\t\t\t\t: (row.descuento === null ? 0 : <b style={{color: 'green'}}> ${row.descuento.precio_neto} </b> )\r\n\t\t\t\t}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{isItemSelected === true && selected.length > 1 ? <b style={{color: 'red'}}> {value}% </b> : (!row.descuento || row.descuento === null ? 0 : <b style={{color: 'red'}}> {row.descuento.porciento}% </b>)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Modal row={row} handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell key={row._id} align=\"center\">\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\tonChange={handleChangeActivo}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t\t : ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t\t\tdefaultChecked={row.descuento_activo ? row.descuento_activo : false}\r\n\t\t\t\t\tname=\"descuento_activo\"\r\n\t\t\t\t\tinputProps={{ 'aria-label': 'secondary checkbox' }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{\r\n\t\t\t\trow.medida ? (\r\n\t\t\t\t\t<TableCell align=\"center\">{row?.medida?.talla}</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\trow.color ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={row?.color?.nombre}\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t\tarrow\r\n\t\t\t\t\t\t\tTransitionComponent={Zoom}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor:row?.color?.hex,\r\n\t\t\t\t\t\t\t\t\tcolor: theme.palette.getContrastText(row?.color?.hex),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</TableRow>\r\n\t)\r\n};\r\n\r\n// MODAL PARA ELIMINAR EL DESCUENTO DE LOS PRODUCTOS\r\nconst Modal = ({row, handleModal, openModal, handleDelete }) => {\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton \r\n\t\t\t\tcolor=\"secondary\" \r\n\t\t\t\tonClick={handleModal}\r\n\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t: ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useCallback, useContext, useState } from 'react';\r\n\r\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\r\nimport { Button, Dialog, makeStyles, DialogTitle, DialogContent, Grid, Box, Typography, TextField, Slider, IconButton } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport TablaPreciosDescuentos from './ListaPrecios';\r\n\r\nimport {  REGISTRAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tavatarGroup: {\r\n\t\t'& > .MuiAvatarGroup-avatar': {\r\n\t\t\twidth: theme.spacing(8),\r\n\t\t\theight: theme.spacing(8)\r\n\t\t}\r\n\t},\r\n\troot: {\r\n\t\twidth: 400\r\n\t},\r\n    rootSlice:{\r\n        width: 350\r\n    },\r\n\tmargin: {\r\n\t\theight: theme.spacing(3)\r\n\t},\r\n    rootTable:{\r\n        height: 300\r\n    }\r\n}));\r\n\r\nexport default function DescuentoProductos({datos, productosRefetch}) {\r\n    const [ CrearDescuentoUnidad ] = useMutation(REGISTRAR_DESCUENTOS);\r\n    const { \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n    } = useContext(RegProductoContext);\r\n\r\n    let iva = datos.precios.iva;\r\n    let ieps = datos.precios.ieps;\r\n    // Precio compra sin impuestos y sin utilidad\r\n    let PCSI = datos.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ openDescuento, setOpenDescuento ] = useState(false);\r\n    const [ cleanList, setCleanList ] = useState(false);\r\n    const [ validate ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n\r\n    const [ precioPrueba, setPrecioPrueba ] = useState(0);\r\n    const [ value, setValue] =  useState(0);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleCloseDescuentos = () => {\r\n        if (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n            setLoading(false);\r\n        }else{\r\n            setDatosPreciosProducto(datos.unidades_de_venta);\r\n            setLoading(false);\r\n        }\r\n        setPrecioPrueba(0);\r\n        setValue(0);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n    };\r\n\r\n    const cerrarModal =()=>{\r\n        setOpenDescuento(!openDescuento);\r\n        handleCloseDescuentos();\r\n    }\r\n\r\n    const verificarDatos = useCallback(\r\n        (datos) => {\r\n            for (let i = 0; i < datos.length; i++) {\r\n                if (datos[i].descuento) {\r\n                    if ( datos[i].descuento.porciento !== 0) {\r\n                        setValue(datos[i].descuento.porciento);\r\n                        if (datos.length === 1) {\r\n                            setPrecioPrueba(datos[i].descuento.precio_neto);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n    },\r\n        [datos]\r\n    );\r\n    \r\n    let arrayDescuento = [];\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n\r\n        for (let i = 0; i < preciosProductos.length; i++) {\r\n            let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let dineroDescontado = 0; \r\n            let cantidad_unidad = preciosProductos[i].precio_unidad.cantidad_unidad;\r\n\r\n            PVCDSI = parseFloat((preciosProductos[i].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[i].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat(((( PVCDSI - PCSI ) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                _id: preciosProductos[i]._id,\r\n                descuento_activo: true,\r\n                descuento:{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[i].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[i].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: newValue,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n\r\n            setPrecioPrueba(precio_neto);\r\n            if (preciosProductos.length !== 1) {\r\n                preciosDescuentos.push(arrayDescuento);\r\n            }else{\r\n                setPreciosDescuentos([arrayDescuento]);\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n        if (preciosProductos.length === 1) {\r\n            setPrecioPrueba(valorText);\r\n            \r\n            let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n            let PVSI = parseFloat((valorText / (suma_impuestos+1)).toFixed(2));\r\n\r\n            let cantidad_unidad = preciosProductos[0].precio_unidad.cantidad_unidad;\r\n            let dineroDescontado = 0;\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let porcentaje  = parseFloat(((PVSI / preciosProductos[0].precio_unidad.precio_venta) * 100).toFixed(2));\r\n            let descuento = parseFloat((100 - porcentaje).toFixed(2));\r\n\r\n            PVCDSI = parseFloat((preciosProductos[0].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[0].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                \"_id\": preciosProductos[0]._id,\r\n                \"descuento_activo\": true,\r\n                \"descuento\":{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[0].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[0].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: descuento,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n            \r\n            setValue(descuento);\r\n            setPreciosDescuentos([arrayDescuento]);\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const saveData = async () => {\r\n        setLoading(true);\r\n\t\ttry {\r\n            await CrearDescuentoUnidad({\r\n                variables: {\r\n                    input: {\r\n                        descuentos: preciosDescuentos\r\n                    }\r\n                }\r\n            });\r\n            handleCloseDescuentos()\r\n            productosRefetch();\r\n            setValue(0);\r\n            setPreciosProductos([]);\r\n            setPreciosDescuentos([]);\r\n            setCleanList(!cleanList);\r\n            setAlert({ message: '¡Listo descuentos realizados!', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n            setAlert({ message: '¡Oh no, ocurrio un problema con el servidor!', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n    const validacion = () => {\r\n        if (datos.medidas_producto.length > 0 ) {\r\n            for (let i = 0; i < datos.medidas_producto.length; i++) {\r\n                if (datos.medidas_producto[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }else{\r\n            for (let i = 0; i < datos.unidades_de_venta.length; i++) {\r\n                if (datos.unidades_de_venta[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <IconButton\r\n                color={validacion()}\r\n                onClick={cerrarModal}\r\n                disabled={datos.inventario_general && datos.inventario_general.length > 0 && datos.inventario_general[0].eliminado === true}\r\n            >\r\n               <LocalOfferIcon />\r\n            </IconButton>\r\n            <Dialog open={openDescuento} onClose={handleCloseDescuentos} fullWidth maxWidth=\"lg\">\r\n            <BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<DialogTitle>\r\n                    <Grid container>\r\n                        <Box flexGrow={1} display=\"flex\" alignItems=\"center\">\r\n                            {'Descuento de Producto'}\r\n                        </Box>\r\n                        <Box m={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={cerrarModal} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre comercial: </b>\r\n                            {datos.datos_generales.nombre_comercial ? datos.datos_generales.nombre_comercial : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre genérico: </b>\r\n                            {datos.datos_generales.nombre_generico ? datos.datos_generales.nombre_generico : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Grid container>\r\n                        <Grid item lg={8} md={6} xs={12}> \r\n                            <Box p={1}>\r\n                                <TablaPreciosDescuentos\r\n                                    verificarDatos={verificarDatos}\r\n                                    productosRefetch={productosRefetch}\r\n                                    datos={datos}\r\n                                    value={value}\r\n                                    cleanList={cleanList}\r\n                                    setCleanList={setCleanList}\r\n                                    setPrecioPrueba={setPrecioPrueba}\r\n                                    setLoading={setLoading}\r\n                                    loading={loading}\r\n                                />\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={4} md={6} xs={12}> \r\n                            <Box mt={5} dislay=\"flex\" justifyContent=\"center\">\r\n                                <div className={classes.root}>\r\n                                    <Box textAlign=\"center\">\r\n                                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                                            <b>Porcentaje de descuento</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box my={5} />\r\n                                    <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                        <Slider\r\n                                            disabled={preciosProductos.length === 0 ? true : false}\r\n                                            getAriaValueText={valuetext}\r\n                                            value={value.toFixed(2)}\r\n                                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                                            valueLabelDisplay=\"auto\"\r\n                                            onChange={obtenerPorcientoSlide} \r\n                                        />\r\n                                    </Box>\r\n                                </div>\r\n                            </Box>\r\n                            <Box mt={5} display=\"flex\" justifyContent=\"center\">\r\n                                {preciosProductos.length === 1 ? ( \r\n                                    <div>\r\n                                        <Typography>Precio con Descuento</Typography>\r\n                                        <TextField\r\n                                            type=\"number\"\r\n                                            InputProps={{ inputProps: { min: 0} }}\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            value={ precioPrueba }\r\n                                            onChange={(e) => obtenerPrecioText(e)}\r\n                                        />\r\n                                    </div>\r\n                                ) : (\r\n                                    null\r\n                                )}\r\n\r\n                            </Box>\r\n                            <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                                <Button \r\n                                    disabled={preciosProductos.length === 0 || validate === true ? true : false}\r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    size=\"large\"\r\n                                    onClick={saveData}\r\n                                >\r\n                                    Guardar \r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_PRODUCTO } from \"../../../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ datos, productosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { actualizarLista, setActualizarLista, setAlert } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setActualizarLista(!actualizarLista);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton\r\n        onClick={() => handleToggleModal()}\r\n        disabled={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? true\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? true\r\n              : false\r\n          }\r\n      >\r\n        <Delete\r\n          color={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? \"disabled\"\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? \"disabled\"\r\n              : \"error\"\r\n          }\r\n        />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport DescuentoProductos from \"./Descuentos/Descuento\";\r\nimport EliminarProducto from \"./EliminarProducto\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n\t'& ::-webkit-scrollbar': {\r\n\t\tdisplay: 'none'\r\n\t}\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerProductos, productosRefetch }) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Codigo barras</TableCell>\r\n              <TableCell>Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell>Existencia</TableCell>\r\n              <TableCell>Tipo</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody className=\"hide-scroll\">\r\n            {obtenerProductos.map((producto, index) => {\r\n              return (\r\n                <RenderTableRows\r\n                  key={index}\r\n                  producto={producto}\r\n                  productosRefetch={productosRefetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ producto, productosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>{producto.datos_generales.codigo_barras}</TableCell>\r\n        <TableCell>{producto.datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{producto.datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell>\r\n          {producto.inventario_general.map(\r\n            (existencia) =>\r\n              `${existencia.cantidad_existente} ${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.tipo_producto}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.editar === false ? (null):(\r\n            <CrearProducto\r\n              accion={true}\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <DescuentoProductos\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.agregar === false ? (null):(\r\n            <EliminarProducto\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Publish, Close } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTIVAR_PRODUCTOS,\r\n  PRODUCTOS_ELIMINADOS,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProdcutosEliminados({ productosActivosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"primary\"\r\n        onClick={handleModalToggle}\r\n        size=\"large\"\r\n        startIcon={<RestoreFromTrash />}\r\n      >\r\n        Productos inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-productos-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-productos-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Productos inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TablaProductosEliminados\r\n            productosActivosRefetch={productosActivosRefetch}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TablaProductosEliminados = ({ productosActivosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { actualizarLista } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(PRODUCTOS_ELIMINADOS, {\r\n    variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, actualizarLista]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay productos inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerProductosInactivos } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">Código de barras</TableCell>\r\n              <TableCell align=\"left\">Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerProductosInactivos.map((producto, index) => (\r\n              <RenderProductosTabla\r\n                key={index}\r\n                datos={producto}\r\n                refetch={refetch}\r\n                productosActivosRefetch={productosActivosRefetch}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderProductosTabla = ({ datos, refetch, productosActivosRefetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const { datos_generales } = datos.producto;\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n\r\n  const [activarProducto] = useMutation(ACTIVAR_PRODUCTOS);\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  const reactivarProducto = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await activarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      refetch();\r\n      productosActivosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.activarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleDeleteToggle();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell align=\"left\">{datos_generales.codigo_barras}</TableCell>\r\n        <TableCell align=\"left\">{datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell align=\"right\">\r\n          {loading ? (\r\n            <IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n              <CircularProgress size={26} />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n              <Publish />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-producto-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-producto-dialog\">\r\n          {\"Se reactivará este producto\"}\r\n        </DialogTitle>\r\n        {/* <SnackBarMessages alert={alert} setAlert={setAlert} />        */}\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => reactivarProducto()} color=\"primary\" autoFocus>\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Search, Close, ArrowBack } from \"@material-ui/icons\";\r\nimport ProductosEliminados from \"./ProductosEliminados\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Productos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { alert, setAlert } = useContext(RegProductoContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Productos\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Productos\r\n            </Typography>\r\n\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RegistroComponent />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RegistroComponent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [existencias, setExistencias] = useState(true);\r\n  const [value, setValue] = useState(0);\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    if (value === 0) {\r\n      setExistencias(true);\r\n    } else {\r\n      setExistencias(false);\r\n    }\r\n  };\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n      filtro,\r\n      existencias,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerProductos } = data;\r\n\r\n  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    if (busqueda === \"\") {\r\n      setFiltro(\"\");\r\n      refetch({ filtro: \"\" });\r\n      return;\r\n    }\r\n    setFiltro(busqueda);\r\n  };\r\n\r\n  const reload = () => {\r\n    setBusqueda(\"\");\r\n    setFiltro(\"\");\r\n    refetch({ filtro: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box mx={4} my={3} display=\"flex\">\r\n        <Box style={{ width: \"500px\" }}>\r\n          <form\r\n            onSubmit={filtrarProductos}\r\n            style={{ display: \"flex\", alignItems: \"center\" }}\r\n          >\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            {filtro !== \"\" ? (\r\n              <IconButton color=\"primary\" onClick={() => reload()}>\r\n                <ArrowBack />\r\n              </IconButton>\r\n            ) : null}\r\n          </form>\r\n        </Box>\r\n\r\n        <Box flexGrow={1} />\r\n        <Box display=\"flex\">\r\n          <ProductosEliminados productosActivosRefetch={refetch} />\r\n          <Box mx={1} />\r\n          {sesion.accesos.catalogos.productos.agregar === false ? null : (\r\n            <CrearProducto accion={false} productosRefetch={refetch} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box mx={4}>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            indicatorColor=\"primary\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n          >\r\n            <Tab label=\"Productos de Sucursal\" />\r\n            <Tab label=\"Todos los productos\" />\r\n          </Tabs>\r\n        </div>\r\n        <ListaProductos\r\n          obtenerProductos={obtenerProductos}\r\n          productosRefetch={refetch}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../../context/Catalogos/CtxRegProducto'\r\nimport Productos from './Productos'\r\n \r\nexport default function ProductoIndex(){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <Productos />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_TALLA } from \"../../../../gql/Catalogos/tallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaTallas({\r\n  tipo,\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.talla.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mb={1}>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Buscar...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onChange={(e) => setBusqueda(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>{tipo === \"ROPA\" ? \"Talla\" : \"Número\"}</TableCell>\r\n                {sesion.accesos.catalogos.tallas_numeros.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.tallas_numeros.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => (\r\n                <RowsRender\r\n                  key={index}\r\n                  row={row}\r\n                  setAlert={setAlert}\r\n                  tipo={tipo}\r\n                  toUpdate={toUpdate}\r\n                  setToUpdate={setToUpdate}\r\n                  setValue={setValue}\r\n                  refetch={refetch}\r\n                />\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  tipo,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n  const [eliminarTalla] = useMutation(ELIMINAR_TALLA);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resp = await eliminarTalla({\r\n        variables: {\r\n          id: row._id,\r\n          input: {\r\n            tipo: tipo,\r\n            talla: \"\",\r\n          },\r\n        },\r\n      });\r\n\r\n      let msgAlert = {\r\n        message: resp.data.eliminarTalla.message,\r\n        status: \"success\",\r\n        open: true,\r\n      };\r\n      setAlert(msgAlert);\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      handleModal();\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setValue(\"\");\r\n      return;\r\n    }\r\n    setToUpdate(dato._id);\r\n    setValue(dato.talla);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        selected={toUpdate === row._id ? true : false}\r\n      >\r\n        <TableCell>\r\n          <Typography>\r\n            <b>{row.talla}</b>\r\n          </Typography>\r\n        </TableCell>\r\n        {sesion.accesos.catalogos.tallas_numeros.editar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            {toUpdate === row._id ? (\r\n              <IconButton onClick={() => onUpdate()}>\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton onClick={() => onUpdate(row)}>\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        {sesion.accesos.catalogos.tallas_numeros.eliminar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            <Modal\r\n              handleModal={handleModal}\r\n              openModal={openModal}\r\n              handleDelete={handleDelete}\r\n            />\r\n          </TableCell>\r\n        )}\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaTallas from \"./ListaTallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_TALLAS,\r\n  CREAR_TALLAS,\r\n  ACTUALIZAR_TALLA,\r\n} from \"../../../../gql/Catalogos/tallas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nexport default function RegistroTallas({ tipo }) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading_bd, setLoadingBD] = useState({ loading: false, tipo: \"\" });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_TALLAS, {\r\n    variables: { sucursal: sesion.sucursal._id, tipo },\r\n  });\r\n  /* Mutations */\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n  const [actualizarTalla] = useMutation(ACTUALIZAR_TALLA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerTallas } = data;\r\n\r\n  const guardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    setLoadingBD({ loading: true, tipo });\r\n    let resp;\r\n    try {\r\n      const nueva_talla = value;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.tallas_numeros.editar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const talla_actualizada = cleanTypenames(nueva_talla);\r\n          resp = await actualizarTalla({\r\n            variables: {\r\n              input: {\r\n                talla: talla_actualizada,\r\n                tipo,\r\n              },\r\n              id: toUpdate,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.tallas_numeros.agregar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearTalla({\r\n            variables: {\r\n              input: {\r\n                talla: nueva_talla,\r\n                tipo,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setValue(\"\");\r\n      setToUpdate(\"\");\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      let msgAlert = toUpdate\r\n        ? {\r\n            message: resp.data.actualizarTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          }\r\n        : {\r\n            message: resp.data.crearTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          };\r\n      setAlert(msgAlert);\r\n    } catch (error) {\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      <Box my={2}>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          <Grid item>\r\n            {tipo === \"ROPA\" ? (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shirt.svg\"\r\n                alt=\"icono tallas\"\r\n                style={{ width: 40 }}\r\n              />\r\n            ) : (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shoes.svg\"\r\n                alt=\"icono numeros\"\r\n                style={{ width: 40 }}\r\n              />\r\n            )}\r\n          </Grid>\r\n          <Grid item>\r\n            <form id=\"form-talla\" onSubmit={guardarDatosBD}>\r\n              <TextField\r\n                id=\"outlined-error-helper-text\"\r\n                label={tipo === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={value}\r\n                onChange={(e) => setValue(e.target.value)}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loading_bd.loading}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              disableElevation\r\n              type=\"submit\"\r\n              form=\"form-talla\"\r\n              disabled={loading_bd.loading && loading_bd.tipo === tipo}\r\n              startIcon={\r\n                loading_bd.loading && loading_bd.tipo === tipo ? (\r\n                  <CircularProgress color=\"inherit\" size={20} />\r\n                ) : (\r\n                  <Add />\r\n                )\r\n              }\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <TablaTallas\r\n        datos={obtenerTallas}\r\n        tipo={tipo}\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        setValue={setValue}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\r\nimport {  Typography,Box, Snackbar, makeStyles } from '@material-ui/core';\r\nimport { Button } from '@material-ui/core';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\nexport default function DescripcionCatalogo({texto, width}) {\r\n    const classes = useStyles();\r\n\tconst [active, setActive] = useState(false);\r\n    const handleClose = () => {\r\n\t\tsetActive(false);\r\n\t};\r\n\treturn (\r\n     /*    <Box width={'100%'} flexDirection=\"column\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box   p={2} mt={3} borderRadius={3} boxShadow={0.5}  width={width} style={{backgroundColor:'rgba(161, 236, 248, 0.8)'}}>\r\n                <Typography align=\"center\"  style={{ fontSize: 18, color: 'rgba(38, 78, 84, 0.8)' }}>\r\n                    {texto}\r\n                </Typography>\r\n            </Box>\r\n        </Box> */\r\n    \r\n            <Box>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    color=\"secondary\"\r\n                    onClick={() => setActive(true)}\r\n                    size=\"large\"\r\n                >\r\n                    <HelpOutlineIcon style={{  fontSize: 35, color: 'white' }}  />\r\n                </Button>\r\n           \r\n                <Snackbar\r\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n                    open={active}\r\n                    onClose={handleClose}\r\n                    autoHideDuration={10000}\r\n                    message={\r\n                        <Box display=\"flex\">\r\n                            <Box mr={1} />\r\n                            <Typography>{texto}</Typography>\r\n                        </Box>\r\n                    }\r\n\t\t\t    />\r\n            </Box>\r\n      \r\n       \r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport RegistroTallas from \"./RegistroTallas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Tallas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(!open);\r\n  const descripcion = 'En este apartado se registran las  tallas y/o números que se asignarán a un producto tipo Ropa o Calzado según sea el caso .';\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Tallas y numeros\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Tallas y números\r\n            </Typography>\r\n            <Box m={1} flexDirection='row' display='flex'>\r\n              <DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container>\r\n          \r\n          <Box>\r\n            <Grid container spacing={5}>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t  \t      <RegistroTallas tipo=\"ROPA\" />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t        \t<RegistroTallas tipo=\"CALZADO\" />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONTABILIDAD = gql`\r\n    query obtenerContabilidad($empresa: ID!, $sucursal: ID!){\r\n        obtenerContabilidad(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_servicio\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONTABILIDAD = gql`\r\n    mutation CrearContabilidad($input: ContabilidadInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearContabilidad(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONTABILIDAD = gql`\r\n    mutation ActualizarContabilidad($input: ContabilidadInput, $id: ID!){\r\n        actualzarContabilidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONTABILIDAD = gql`\r\n    mutation EliminarContabilidad($id: ID!){\r\n        eliminarContabilidad(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  makeStyles,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CONTABILIDAD,\r\n  ELIMINAR_CONTABILIDAD,\r\n} from \"../../../../gql/Catalogos/contabilidad\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\"\r\n  },\r\n}));\r\n\r\nexport default function TablaServicios({\r\n  setData,\r\n  setIdService,\r\n  idService,\r\n  setAccion,\r\n  updateData,\r\n  setAlert,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  let obtenerContabilidad = [];\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONTABILIDAD, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const [EliminarContabilidad] = useMutation(ELIMINAR_CONTABILIDAD);\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [updateData, refetch]);\r\n\r\n  if (data) {\r\n    obtenerContabilidad = data.obtenerContabilidad;\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await EliminarContabilidad({\r\n        variables: {\r\n          id: idService,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      handleModal();\r\n      setIdService(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Servicios</TableCell>\r\n                {sesion.accesos.catalogos.contabilidad.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.contabilidad.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerContabilidad.map((row, index) => {\r\n                return (\r\n                  <TableRow role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n                    <TableCell>{row.nombre_servicio}</TableCell>\r\n                    {sesion.accesos.catalogos.contabilidad.editar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          onClick={() => {\r\n                            setAccion(false);\r\n                            setIdService(row._id);\r\n                            setData({\r\n                              nombre_servicio: row.nombre_servicio,\r\n                            });\r\n                          }}\r\n                        >\r\n                          <Edit />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                    {sesion.accesos.catalogos.contabilidad.eliminar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          onClick={() => {\r\n                            setIdService(row._id);\r\n                            handleModal();\r\n                          }}\r\n                        >\r\n                          <Delete />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n      <Modal\r\n        handleModal={handleModal}\r\n        openModal={openModal}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Box, Button, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport ListaServicios from \"./ListaServicios\";\r\nimport {\r\n  REGISTRAR_CONTABILIDAD,\r\n  ACTUALIZAR_CONTABILIDAD,\r\n} from \"../../../../gql/Catalogos/contabilidad\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\nexport default function RegistroServicios() {\r\n  const classes = useStyles();\r\n  const [updateData, setUpdateData] = useState(false);\r\n  const [data, setData] = useState({\r\n    nombre_servicio: \"\",\r\n  });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [error, setError] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [accion, setAccion] = useState(true);\r\n  const [idService, setIdService] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [CrearContabilidad] = useMutation(REGISTRAR_CONTABILIDAD);\r\n  const [ActualizarContabilidad] = useMutation(ACTUALIZAR_CONTABILIDAD);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if(!data.nombre_servicio) return\r\n    try {\r\n      setLoading(true);\r\n      if (!data.nombre_servicio) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.contabilidad.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await CrearContabilidad({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                usuario: sesion._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.contabilidad.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const inputActualizado = cleanTypenames(input);\r\n            await ActualizarContabilidad({\r\n              variables: {\r\n                input: inputActualizado,\r\n                id: idService,\r\n              },\r\n            });\r\n            setAccion(true);\r\n          }\r\n        }\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setData({ nombre_servicio: \"\" });\r\n        setUpdateData(!updateData);\r\n        setIdService(\"\");\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography>\r\n        <b>Tipo de Servicio</b>\r\n      </Typography>\r\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n        <form id=\"form-contabilidad\" onSubmit={handleSubmit}>\r\n          <TextField\r\n            error={error}\r\n            id=\"outlined-error-helper-text\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"nombre_servicio\"\r\n            value={data.nombre_servicio}\r\n            onChange={handleChangeInput}\r\n            inputProps={{\r\n              style: { textTransform: \"uppercase\", width: \"400px\" },\r\n            }}\r\n            disabled={loading}\r\n          />\r\n        </form>\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          type=\"submit\"\r\n          form=\"form-contabilidad\"\r\n          disableElevation\r\n          startIcon={\r\n            loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n          }\r\n        >\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      <ListaServicios\r\n        setData={setData}\r\n        idService={idService}\r\n        setIdService={setIdService}\r\n        setAccion={setAccion}\r\n        updateData={updateData}\r\n        setAlert={setAlert}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroServicios from \"./RegistroServicio\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Contabilidad() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion = 'En este apartado se registran conceptos para pagos.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/contabilidad.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Contabilidad\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Contabilidad\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n        <Box >\r\n          \r\n          <Container maxWidth=\"md\">\r\n           \r\n            <RegistroServicios />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { DialogTitle, IconButton, Typography } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Cliente\", minWidth: 100 },\r\n  { id: 2, label: \"Clave\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 4, label: \"Razon Social\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 6, label: \"Fecha registro\", minWidth: 100 },\r\n  { id: 7, label: \"Estado\", minWidth: 100 },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"74vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function TablaProveedores({ obtenerClientes, refetch }) {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.provedores.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <RowsRender\r\n                  key={index}\r\n                  datos={row}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert, refetch }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.clave_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.razon_social}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.estado_cliente ? \"Activo\" : \"Inactivo\"}</Typography>\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.provedores.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearCliente tipo=\"PRROVEEDOR\" accion=\"actualizar\" datos={datos} refetch={refetch} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n      false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarCliente\r\n            datos={datos}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  DialogContent,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport TablaProovedores from \"./ListaProveedores\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Proveedores() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran los proveedores que se podrán seleccionar en la compra de un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/distribution.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Proveedores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Proveedores\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          <ProveedoresComponent />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ProveedoresComponent = () => {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo: \"PROVEEDOR\", filtro },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Box my={3}>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={8}>\r\n          <Paper className={classes.root}>\r\n            <InputBase\r\n              fullWidth\r\n              placeholder=\"Buscar proveedor...\"\r\n              onChange={(e) => setValues(e.target.value)}\r\n              onKeyPress={pressEnter}\r\n              value={values}\r\n            />\r\n            <IconButton onClick={() => setFiltro(values)}>\r\n              <Search />\r\n            </IconButton>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={6}\r\n          xs={4}\r\n          style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n        >\r\n          {permisosUsuario.accesos.catalogos.provedores.ver === false ? null : (\r\n            <CrearCliente\r\n              tipo=\"PROVEEDOR\"\r\n              accion=\"registrar\"\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={3}>\r\n        <TablaProovedores obtenerClientes={obtenerClientes} refetch={refetch} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CAJA = gql`\r\n    mutation CrearCaja($input: CrearCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CAJAS = gql`\r\n    query ObtenerCajasSucursales($empresa: ID!, $sucursal: ID!){\r\n        obtenerCajasSucursal(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            numero_caja\r\n            activa\r\n            usuario_creador {\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n            cantidad_efectivo_actual\r\n            usuario_en_caja {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n             \r\n        }\r\n    }\r\n`;\r\n\r\nexport const CREAR_HISTORIAL_CAJA = gql`\r\n    mutation CrearHistorialCaja($input: CrearHistorialCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearHistorialCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CAJA = gql`\r\n    query ObtenerHistorialCaja($input: HistorialCajasInput, $id_Caja: ID!,$empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialCaja(input: $input, id_Caja: $id_Caja,empresa: $empresa, sucursal: $sucursal){\r\n            tipo_movimiento\r\n            concepto\r\n            horario_turno\r\n            numero_caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            hora_moviento{\r\n                hora\r\n                minutos\r\n                segundos\r\n                completa\r\n            }\r\n            fecha_movimiento{\r\n                year\r\n                mes\r\n                dia\r\n                no_dia_year\r\n                no_semana_year\r\n                completa\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CAJA = gql`\r\n\tmutation eliminarCaja($id: ID!) {\r\n\t\teliminarCaja(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ACTUALIZAR_CAJA = gql`\r\n\tmutation ActualizarCaja($input: EditarCaja, $id: ID!) {\r\n\t\tactualizarCaja(id: $id, input: $input) {\r\n            _id\r\n            numero_caja\r\n            activa\r\n        }\r\n    }\r\n`; \r\n\r\nexport const OBTENER_PRE_CORTE_CAJA = gql`\r\n    query ObtenerPreCorteCaja($empresa: ID!, $sucursal: ID!, $input: PreCortesDeCajaInput){\r\n        obtenerPreCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            monto_efectivo_precorte         \r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTES_CAJA = gql`\r\n    query ObtenerCortesDeCaja($empresa: ID!, $sucursal: ID!, $input: FiltroCorteDeCajaInput){\r\n        obtenerCortesDeCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            concepto\r\n            token_turno_user\r\n            numero_caja\r\n            horario_en_turno\r\n            id_caja\r\n            hora_salida{\r\n                completa\r\n            }\r\n            fecha_salida{\r\n                completa\r\n            }\r\n            fecha_movimiento\r\n            usuario_en_turno{\r\n                nombre\r\n                telefono\r\n                email\r\n                numero_usuario\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n            sucursal{\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTE_CAJA = gql`\r\n    query ObtenerCorteCaja($empresa: ID!, $sucursal: ID!, $input: CorteDeCajaInput){\r\n        obtenerCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            montos_en_sistema{\r\n                monto_efectivo\r\n                monto_tarjeta_debito\r\n                monto_tarjeta_credito\r\n                monto_creditos\r\n                monto_monedero\r\n                monto_transferencia\r\n                monto_cheques\r\n                monto_vales_despensa\r\n            }\r\n        }\r\n    }\r\n`;","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Badge, Box, CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withStyles } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaCajas({\r\n  obtenerCajasSucursal,\r\n  setAlert,\r\n  refetch,\r\n}) {\r\n  const permisos = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Cajas</TableCell>\r\n                {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerCajasSucursal.map((row) => {\r\n                return (\r\n                  <RowCajasRender\r\n                    key={row.numero_caja}\r\n                    row={row}\r\n                    permisos={permisos}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    color: ({ props }) => props.color,\r\n    background: ({ props }) => props.color,\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nconst RowCajasRender = ({ row, permisos, setAlert, refetch }) => {\r\n  const styleProps = {\r\n    color: row.activa ? \"#44b700\" : \"red\",\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Box display=\"flex\">\r\n          <StyledBadge\r\n            overlap=\"circle\"\r\n            props={styleProps}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"left\",\r\n            }}\r\n            variant=\"dot\" />\r\n            <Box mx={1} />\r\n          <Box>CAJA {row.numero_caja}</Box>\r\n        </Box>\r\n      </TableCell>\r\n      {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <EliminarCajasModal\r\n            data={row}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCajasModal = ({ data, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const [eliminarCaja] = useMutation(ELIMINAR_CAJA);\r\n\r\n  const deleteCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await eliminarCaja({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      handleClose();\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleClickOpen()} disabled={data.activa}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={() => deleteCaja()}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Box, Button, CircularProgress } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport TablaCajas from \"./ListaCajas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_CAJA, OBTENER_CAJAS } from \"../../../../gql/Cajas/cajas\";\r\n\r\nexport default function RegistroCajas() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let obtenerCajasSucursal = [];\r\n  /* Mutation */\r\n  const [crearCaja] = useMutation(CREAR_CAJA);\r\n\r\n  /* Queries */\r\n  const { data, refetch } = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const nuevaCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await crearCaja({\r\n        variables: {\r\n          input: {\r\n            usuario_creador: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (data) {\r\n    obtenerCajasSucursal = data.obtenerCajasSucursal;\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" my={2}>\r\n        {sesion.accesos.catalogos.cajas.agregar === false ? null : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            onClick={() => nuevaCaja()}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      <TablaCajas\r\n        obtenerCajasSucursal={obtenerCajasSucursal}\r\n        setAlert={setAlert}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCajas from \"./RegistrarCajas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n   const descripcion = 'En este apartado se registran las cajas necesarias para realizar los movimientos operativos de ventas.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Cajas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cajas\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n        <Box>\r\n       \r\n          <Container maxWidth=\"sm\">\r\n          \r\n            <RegistroCajas />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  Typography,\r\n  Switch,\r\n} from \"@material-ui/core\";\r\nimport CrearUsario from \"./CrearUsuario\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_USUARIOS,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Usuario\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 7, label: \"Estado\", minWidth: 100, align: \"right\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaUsuarios({ sucursal, filtro }) {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: { sucursal, filtro },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.usuarios.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.usuarios.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => {\r\n              return <RowsRender key={index} datos={row} />;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            estado_usuario: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_usuario}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell align={\"right\"}>\r\n        {loading ? (\r\n          <CircularProgress size={30} />\r\n        ) : (\r\n          <Switch\r\n            checked={datos.estado_usuario}\r\n            onChange={cambiarEstado}\r\n            color=\"primary\"\r\n          />\r\n        )}\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.usuarios.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearUsario accion=\"actualizar\" datos={datos} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? null : (\r\n        <TableCell width={50}>\r\n          <IconButton color=\"secondary\">\r\n            <Delete />\r\n          </IconButton>\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  Paper,\r\n  InputBase,\r\n  IconButton,\r\n  Grid,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport ListaUsuarios from \"./ListaUsuario\";\r\nimport CrearUsuario from \"./CrearUsuario\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Usuarios() {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UsuarioProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Usuarios\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Usuarios\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mt={3} display=\"flex\" justifyContent=\"space-between\">\r\n            <Container>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={8} md={6}>\r\n                  <Paper className={classes.root}>\r\n                    <InputBase\r\n                      fullWidth\r\n                      placeholder=\"Buscar cliente...\"\r\n                      onChange={(e) => setValues(e.target.value)}\r\n                      onKeyPress={pressEnter}\r\n                      value={values}\r\n                    />\r\n                    <IconButton onClick={() => setFiltro(values)}>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </Paper>\r\n                </Grid>\r\n                <Grid item xs={4} md={6}>\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                    {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <CrearUsuario accion=\"registrar\" datos={undefined} />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box my={3}>\r\n                <ListaUsuarios sucursal={sesion.sucursal._id} filtro={filtro} />\r\n              </Box>\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </UsuarioProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateDepartamentosContext = createContext();\r\n\r\nexport const DepartamentosProvider = ({ children }) => {\r\n    const [data, setData] = useState({\r\n\t\tnombre_departamentos:''\r\n\t});\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ accion, setAccion ] = useState(true);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ idDepartamento, setIdDepartamento ] = useState(\"\");\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [  loading, setLoading ] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<CreateDepartamentosContext.Provider value={\r\n            { \r\n                data, \r\n                setData,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                accion,\r\n                setAccion,\r\n                idDepartamento, \r\n                setIdDepartamento,\r\n                alert,\r\n                setAlert,\r\n                loading,\r\n                setLoading\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateDepartamentosContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n} from \"@material-ui/core/\";\r\n\r\nimport { Delete, Edit, Close } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_DEPARTAMENTOS,\r\n  ELIMINAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\n// import ContainerRegistroAlmacen from './RegistroDepartamento';\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaDepartamentos() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let obtenerDepartamentos = [];\r\n  const { update, setData } = useContext(CreateDepartamentosContext);\r\n\r\n  /* Queries */\r\n  const { data, loading, error, refetch } = useQuery(OBTENER_DEPARTAMENTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (data) {\r\n    obtenerDepartamentos = data.obtenerDepartamentos;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Departamentos</TableCell>\r\n                {sesion.accesos.catalogos.departamentos.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.departamentos.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerDepartamentos.map((row, index) => {\r\n                return (\r\n                  <ListaDepartamentosRender\r\n                    key={index}\r\n                    row={row}\r\n                    setData={setData}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ListaDepartamentosRender = ({ row, setData, refetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [selected, setSelected] = useState(false);\r\n  const { setAccion, setIdDepartamento, idDepartamento } = useContext(\r\n    CreateDepartamentosContext\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setIdDepartamento(\"\");\r\n    setAccion(true);\r\n    setSelected(false);\r\n    setData({\r\n      nombre_departamentos: \"\",\r\n    });\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIdDepartamento(row._id);\r\n    setAccion(false);\r\n    setData({\r\n      nombre_departamentos: row.nombre_departamentos,\r\n    });\r\n    setSelected(true);\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={idDepartamento === row._id}\r\n    >\r\n      <TableCell>{row.nombre_departamentos}</TableCell>\r\n      {sesion.accesos.catalogos.departamentos.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {idDepartamento === row._id ? (\r\n            <IconButton onClick={() => handleCancel()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => handleEdit()}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.departamentos.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <DeleteDepartamento data={row} refetch={refetch} />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst DeleteDepartamento = ({ data, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState();\r\n  const handleModal = () => setOpen(!open);\r\n  const { setAlert } = useContext(CreateDepartamentosContext);\r\n\r\n  const [eliminarDepartamento] = useMutation(ELIMINAR_DEPARTAMENTO);\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const resultado = await eliminarDepartamento({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (resultado.data.eliminarDepartamento.message === \"false\") {\r\n        setAlert({\r\n          message: \"Departamento eliminado con exito\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: resultado.data.eliminarDepartamento.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n\r\n      refetch();\r\n      setLoading(false);\r\n      setOpen(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        onClick={() => {\r\n          handleModal();\r\n        }}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Box, Button, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaDepartamentos from \"./ListaDepartamentos\";\r\nimport {\r\n  REGISTRAR_DEPARTAMENTO,\r\n  ACTUALIZAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistroDepartamentos() {\r\n  const {\r\n    data,\r\n    setData,\r\n    update,\r\n    setUpdate,\r\n    error,\r\n    setError,\r\n    accion,\r\n    setAccion,\r\n    idDepartamento,\r\n    setIdDepartamento,\r\n    setAlert,\r\n    alert,\r\n  } = useContext(CreateDepartamentosContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  const [ActualzarDepartamentos] = useMutation(ACTUALIZAR_DEPARTAMENTO);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!data.nombre_departamentos) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        setLoading(true);\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.departamentos.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await CrearDepartamentos({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.departamentos.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            /* const inputActualizado = cleanTypenames(input); */\r\n            await ActualzarDepartamentos({\r\n              variables: {\r\n                input,\r\n                id: idDepartamento,\r\n              },\r\n            });\r\n          }\r\n        }\r\n        setUpdate(!update);\r\n        setAccion(true);\r\n        setIdDepartamento(\"\");\r\n        setData({\r\n          nombre_departamentos: \"\",\r\n        });\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <form onSubmit={saveData}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n          <TextField\r\n            id=\"outlined-error-helper-text\"\r\n            label=\"Nombre departamento\"\r\n            value={data.nombre_departamentos}\r\n            name=\"nombre_departamentos\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            fullWidth\r\n            onChange={obtenerDatos}\r\n            error={error}\r\n            disabled={loading}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n          <Box ml={1} />\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </form>\r\n      <TablaDepartamentos />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroDepartamentos from \"./RegistroDepartamento\";\r\nimport { DepartamentosProvider } from \"../../../../context/Catalogos/Departamentos\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Departamentos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion = 'En este apartado se registran los departamentos que se le podrá asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DepartamentosProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/departamentos.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Departamentos\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Departamentos\r\n              </Typography>\r\n              <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box >\r\n            <Container maxWidth=\"sm\">\r\n              <RegistroDepartamentos accion=\"registrar\" />\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </DepartamentosProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  fade,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  TextField,\r\n  CircularProgress,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Delete, Edit, ExpandMore, Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CATEGORIAS,\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n  ACTUALIZAR_SUBCATEGORIA,\r\n  ACTUALIZAR_CATEGORIA,\r\n  ELIMINAR_CATEGORIA,\r\n  ELIMINAR_SUBCATEGORIA,\r\n} from \"../../../../gql/Catalogos/categorias\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  selected: {\r\n    background: fade(theme.palette.secondary.main, 0.1),\r\n  },\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [categoria, setCategoria] = useState(\"\");\r\n  const [toUpdateID, setToUpdateID] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CATEGORIAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n  /*  Categorias Mutations */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  const [actualizarCategoria] = useMutation(ACTUALIZAR_CATEGORIA);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setCategoria(e.target.value);\r\n  };\r\n\r\n  const guardarCategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!categoria) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const categoriaActualizada = cleanTypenames(categoria);\r\n          await actualizarCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria: categoriaActualizada,\r\n              },\r\n              idCategoria: toUpdateID,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoadingBackDrop(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCategorias } = data;\r\n  const render_categorias = obtenerCategorias.map((categoria, index) => (\r\n    <RenderCategorias\r\n      key={index}\r\n      categoria={categoria}\r\n      setToUpdateID={setToUpdateID}\r\n      setCategoria={setCategoria}\r\n      refetch={refetch}\r\n      toUpdateID={toUpdateID}\r\n    />\r\n  ));\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box>\r\n        <Typography>\r\n          <b>Categoria</b>\r\n        </Typography>\r\n        <form onSubmit={guardarCategoria}>\r\n          <Grid container spacing={2}>\r\n            <Grid item sm={6} xs={12}>\r\n              <TextField\r\n                value={categoria}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onChange={obtenerDatos}\r\n                fullWidth\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loadingBackDrop}\r\n              />\r\n            </Grid>\r\n            <Grid item sm={6} xs={12}>\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                disableElevation\r\n                type=\"submit\"\r\n                disabled={loadingBackDrop}\r\n                startIcon={\r\n                  loadingBackDrop ? (\r\n                    <CircularProgress color=\"inherit\" size={20} />\r\n                  ) : (\r\n                    <Add />\r\n                  )\r\n                }\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography variant=\"h6\">Categorias</Typography>\r\n      </Box>\r\n      <Box mb={5}>{render_categorias}</Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderCategorias = ({\r\n  categoria,\r\n  setToUpdateID,\r\n  setCategoria,\r\n  refetch,\r\n  toUpdateID,\r\n}) => {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [subcategoria, setSubcategoria] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Subcategorias Mutations */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  const [actualizarSubcategoria] = useMutation(ACTUALIZAR_SUBCATEGORIA);\r\n\r\n  const render_subcategorias = categoria.subcategorias.map((subcategoria) => (\r\n    <RenderSubcategorias\r\n      key={subcategoria._id}\r\n      idCategoria={categoria._id}\r\n      subcategoria={subcategoria}\r\n      setToUpdateID={setToUpdateID}\r\n      toUpdateID={toUpdateID}\r\n      setSubcategoria={setSubcategoria}\r\n      setAlert={setAlert}\r\n      refetch={refetch}\r\n    />\r\n  ));\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    window.scrollTo(0, 0);\r\n    event.stopPropagation();\r\n    setToUpdateID(categoria._id);\r\n    setCategoria(categoria.categoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setCategoria(\"\");\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSubcategoria(e.target.value);\r\n  };\r\n\r\n  const guardarSubcategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!subcategoria) return;\r\n    setLoading(true);\r\n    let msgAlert = \"\";\r\n    let resp;\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria,\r\n              },\r\n              idCategoria: categoria._id,\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.crearSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.crearSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const subCategoriaActualizada = cleanTypenames(subcategoria);\r\n          resp = await actualizarSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria: subCategoriaActualizada,\r\n              },\r\n              idCategoria: categoria._id,\r\n              idSubcategoria: toUpdateID,\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.actualizarSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.actualizarSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      }\r\n      refetch();\r\n\r\n      setAlert(msgAlert);\r\n      setLoading(false);\r\n      setSubcategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Accordion>\r\n        <AccordionSummary\r\n          style={{ height: 32 }}\r\n          className={\r\n            toUpdateID && toUpdateID === categoria._id ? classes.selected : \"\"\r\n          }\r\n          expandIcon={<ExpandMore />}\r\n          aria-label=\"Expand\"\r\n          aria-controls={`categoria-action-${categoria._id}`}\r\n          id={`categoria-${categoria._id}`}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Typography>\r\n              {categoria.categoria}\r\n            </Typography>\r\n            <div className={classes.flexGrow} />\r\n            {sesion.accesos.catalogos.categorias.editar ===\r\n            false ? null : toUpdateID && toUpdateID === categoria._id ? (\r\n              <IconButton\r\n                onClick={cancelarUpdate}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton\r\n                onClick={obtenerCamposParaActualizar}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n            {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n              <ModalEliminar\r\n                idCategoria={categoria._id}\r\n                refetch={refetch}\r\n                tipo=\"categoria\"\r\n                setAlert={setAlert}\r\n              />\r\n            )}\r\n          </Box>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n            <Box mb={2} />\r\n            <form onSubmit={guardarSubcategoria}>\r\n              <Grid container spacing={2}>\r\n                <Grid item sm={6}>\r\n                  <Typography>\r\n                    <b>Subcategorias</b>\r\n                  </Typography>\r\n                  <TextField\r\n                    value={subcategoria}\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    onChange={obtenerDatos}\r\n                    fullWidth\r\n                    inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid\r\n                  item\r\n                  sm={6}\r\n                  style={{ display: \"flex\", alignItems: \"flex-end\" }}\r\n                >\r\n                  <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    size=\"large\"\r\n                    disableElevation\r\n                    onClick={guardarSubcategoria}\r\n                    disabled={loading}\r\n                    startIcon={\r\n                      loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : (\r\n                        <Add />\r\n                      )\r\n                    }\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n\r\n            <Box my={1}>\r\n              <Typography variant=\"h6\">Subcategorias</Typography>\r\n            </Box>\r\n            {render_subcategorias}\r\n          </Box>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderSubcategorias = ({\r\n  subcategoria,\r\n  idCategoria,\r\n  toUpdateID,\r\n  setToUpdateID,\r\n  setSubcategoria,\r\n  setAlert,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(subcategoria._id);\r\n    setSubcategoria(subcategoria.subcategoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setSubcategoria(\"\");\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        borderRadius={3}\r\n        px={1}\r\n        className={\r\n          toUpdateID && toUpdateID === subcategoria._id ? classes.selected : \"\"\r\n        }\r\n      >\r\n        <Typography>{subcategoria.subcategoria}</Typography>\r\n        <div className={classes.flexGrow} />\r\n        {sesion.accesos.catalogos.categorias.editar ===\r\n        false ? null : toUpdateID && toUpdateID === subcategoria._id ? (\r\n          <IconButton\r\n            onClick={cancelarUpdate}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton\r\n            onClick={obtenerCamposParaActualizar}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n        {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n          <ModalEliminar\r\n            idCategoria={idCategoria}\r\n            subcategoria={subcategoria}\r\n            refetch={refetch}\r\n            tipo=\"subcategoria\"\r\n            setAlert={setAlert}\r\n          />\r\n        )}\r\n      </Box>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminar = ({\r\n  idCategoria,\r\n  subcategoria,\r\n  refetch,\r\n  tipo,\r\n  setAlert,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCategoria] = useMutation(ELIMINAR_CATEGORIA);\r\n  const [eliminarSubcategoria] = useMutation(ELIMINAR_SUBCATEGORIA);\r\n\r\n  const handleOpen = (event) => {\r\n    console.log(event);\r\n    event.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n  const handleClose = (event) => {\r\n    event.stopPropagation();\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async (event) => {\r\n    event.stopPropagation();\r\n    setLoading(true);\r\n    let msgAlert = {};\r\n    try {\r\n      if (tipo === \"categoria\") {\r\n        const resp = await eliminarSubcategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n            idSubcategoria: subcategoria._id,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarSubcategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarSubcategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      } else {\r\n        const resp = await eliminarCategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarCategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarCategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      }\r\n      setLoading(false);\r\n      setAlert(msgAlert);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={(e) => handleOpen(e)}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={(e) => handleClose(e)}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={(e) => handleClose(e)} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={(e) => handleDelete(e)}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCategorias from \"./RegistroCategorias\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Categorias() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const descripcion= 'En este apartado se registran las categorias que se podrán asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/categorias.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Categorias\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Categorias\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n     \r\n        <Box>\r\n          <Container maxWidth=\"md\">\r\n            <RegistroCategorias />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ELIMINAR_COLOR,\r\n} from \"../../../../gql/Catalogos/colores\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaColores({\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.nombre.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <TextField\r\n            fullWidth\r\n            placeholder=\"Buscar...\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            onChange={(e) => setBusqueda(e.target.value)}\r\n          />\r\n        </Box>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell>Nombre</TableCell>\r\n                {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    key={index}\r\n                    row={row}\r\n                    setAlert={setAlert}\r\n                    toUpdate={toUpdate}\r\n                    setToUpdate={setToUpdate}\r\n                    setValues={setValues}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  const [eliminarColor] = useMutation(\r\n    ELIMINAR_COLOR /* , {\r\n    update(cache, { data: { eliminarColor } }) {\r\n      try {\r\n        const { obtenerColores } = cache.readQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n        });\r\n\r\n        cache.writeQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n          data: {\r\n            obtenerColores: {\r\n              ...obtenerColores,\r\n              eliminarColor,\r\n            },\r\n          },\r\n        });\r\n      } catch (error) {}\r\n    },\r\n  } */\r\n  );\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const resp = await eliminarColor({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch(refetch);\r\n      setAlert({\r\n        message: resp.data.eliminarColor.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleModal();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (row) => {\r\n    if (!row) {\r\n      setToUpdate(\"\");\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      return;\r\n    }\r\n    setToUpdate(row._id);\r\n    setValues({ nombre: row.nombre, hex: row.hex });\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={toUpdate === row._id ? true : false}\r\n    >\r\n      <TableCell padding=\"checkbox\">\r\n        <Box width={30} height={25} bgcolor={row.hex} borderRadius=\"10%\" />\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>\r\n          <b>{row.nombre}</b>\r\n        </Typography>\r\n      </TableCell>\r\n      {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {toUpdate === row._id ? (\r\n            <IconButton onClick={() => onUpdate()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => onUpdate(row)}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <Modal\r\n            handleModal={handleModal}\r\n            openModal={openModal}\r\n            handleDelete={handleDelete}\r\n            loading={loading}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete, loading }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  CircularProgress,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaColores from \"./ListaColores\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_COLORES,\r\n  CREAR_COLOR,\r\n  ACTUALIZAR_COLOR,\r\n} from \"../../../../gql/Catalogos/colores\";\r\n\r\nexport default function RegistroColores() {\r\n  const [color, setColor] = useState({});\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [error_data, setError] = useState(false);\r\n  const [loading_data, setLoading] = useState(false);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COLORES, {\r\n    variables: { sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n  const [actualizarColor] = useMutation(ACTUALIZAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerColores } = data;\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      setError(true);\r\n      return;\r\n    }\r\n    setError(false);\r\n    setLoading(true);\r\n    try {\r\n      const colores = values;\r\n      let msg;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.colores.editar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          /* const colorActualizado = cleanTypenames(colores); */\r\n          const resp = await actualizarColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n              },\r\n              id: toUpdate,\r\n            },\r\n          });\r\n          msg = resp.data.actualizarColor.message;\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.colores.agregar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n          msg = \"¡Listo!. Color creado.\";\r\n        }\r\n      }\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setToUpdate(\"\");\r\n      setLoading(false);\r\n      setAlert({ message: msg, status: \"success\", open: true });\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          sm={5}\r\n          xs={12}\r\n          style={{ display: \"flex\", justifyContent: \"center\" }}\r\n        >\r\n          <Box>\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box my={5}>\r\n              <form id=\"form-colores\" onSubmit={GuardarDatosBD}>\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({ ...values, nombre: e.target.value })\r\n                  }\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        {!values.hex ? (\r\n                          <Box\r\n                            border={1}\r\n                            style={\r\n                              error_data && !values.hex\r\n                                ? { borderColor: \"red\" }\r\n                                : { borderColor: \"black\" }\r\n                            }\r\n                            borderRadius={2}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        ) : (\r\n                          <Box\r\n                            border={1}\r\n                            borderRadius={2}\r\n                            bgcolor={values.hex}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        )}\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                  fullWidth\r\n                  error={error_data ? (!values.nombre ? true : false) : false}\r\n\t\t\t\t  disabled={loading_data}\r\n                  helperText={\r\n                    error_data\r\n                      ? !values.nombre\r\n                        ? \"Campo obligatorio\"\r\n                        : \"\"\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </form>\r\n\r\n              <Box my={1} />\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n                type=\"submit\"\r\n                form=\"form-colores\"\r\n                startIcon={loading_data ? <CircularProgress color=\"inherit\" size={20} /> : <Add />}\r\n\t\t\t\tdisabled={loading_data}\r\n              >\r\n                {toUpdate ? \"Actualizar\" : \"Guardar\"}\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={7} xs={12}>\r\n          <TablaColores\r\n            datos={obtenerColores}\r\n            toUpdate={toUpdate}\r\n            setToUpdate={setToUpdate}\r\n            setValues={setValues}\r\n            refetch={refetch}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroColores from \"./RegistroColores\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Colores() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =  'En este apartado se registran los colores que se le podrán asignar a un producto.';\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/colores.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Colores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Colores\r\n            </Typography>\r\n            <Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box mt={4}>\r\n          <Container maxWidth=\"md\">\r\n            \r\n            <RegistroColores />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow,\r\n\tIconButton,\r\n\tTablePagination,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core/';\r\nimport { Delete, Edit, Close } from '@material-ui/icons';\r\nimport { useQuery } from '@apollo/client';\r\nimport { useMutation } from '@apollo/client';\r\nimport { OBTENER_MARCAS, ELIMINAR_MARCAS } from '../../../../gql/Catalogos/marcas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function ListaMarcas({updateData, toUpdate, setToUpdate, setData}) {\r\n\r\n    const classes = useStyles();\r\n    const [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet obtenerMarcas = [];\r\n\t\r\n\r\n    const { data, refetch } = useQuery(OBTENER_MARCAS,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch, updateData])\r\n\r\n    if(data){\r\n\t\tobtenerMarcas = data.obtenerMarcas\r\n\t}\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:'72vh'}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n            \t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Marca</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tobtenerMarcas.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <RowsRender key={index} setAlert={setAlert} refetch={refetch} datos={row} toUpdate={toUpdate} setToUpdate={setToUpdate} setData={setData} />;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t{/* <TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerMarcas.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos, updateData, toUpdate, setAlert, setToUpdate, setData, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst [ eliminarMarca ] = useMutation(ELIMINAR_MARCAS);\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tconst resultado = await eliminarMarca({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: datos._id,\r\n\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(resultado.data.eliminarMarca.message === 'false'){\r\n\t\t\t\tsetAlert({ message: 'Marca eliminada con exito', status: 'success', open: true });\r\n\t\t\t}else{\r\n\t\t\t\tsetAlert({ message: resultado.data.eliminarMarca.message, status: 'error', open: true });\r\n\t\t\t};\r\n\t\t\trefetch();\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (dato) => {\r\n\t\tif(!dato){\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetData('');\r\n\t\t\trefetch();\r\n\t\t\treturn\r\n\t\t}\r\n\t\trefetch();\r\n\t\tsetToUpdate(dato._id);\r\n\t\tsetData(dato);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === datos._id ? true : false}>\r\n\t\t\t<TableCell>{datos.nombre_marca}</TableCell>\r\n\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t{toUpdate === datos._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate(datos)}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\n\r\n//ELIMINAR DATOS DE LA TABLA\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateMarcasContext = createContext();\r\n\r\nexport const MarcasProvider = ({ children }) => {\r\n\tconst [ datosMarcas, setDatosMarcas ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CreateMarcasContext.Provider value={\r\n            { \r\n                datosMarcas, \r\n                setDatosMarcas,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateMarcasContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport {\r\n    Button,\r\n    Box,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport ListaMarcas from './ListaMarcas';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop'\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { Add } from '@material-ui/icons';\r\nimport { /* OBTENER_MARCAS, */ REGISTRAR_MARCAS, ACTUALIZAR_MARCAS} from '../../../../gql/Catalogos/marcas';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CreateMarcasContext } from '../../../../context/Catalogos/Marcas';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\n\r\nexport default function VistaMarcas() {\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ data, setData ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n    const [ toUpdate, setToUpdate ] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [updateData, setUpdateData] = useState(false);\r\n    const { /* datosMarcas, setDatosMarcas, */ error, setError } = useContext(CreateMarcasContext);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ CrearMarca ] = useMutation(REGISTRAR_MARCAS);\r\n\tconst [ actualizarMarca ] = useMutation(ACTUALIZAR_MARCAS);\r\n\r\n    const obtenerDatos = (e) => {\r\n        \r\n        setData({\r\n            ...data,\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if(!data.nombre_marca){\r\n                setError(true);\r\n\t\t\t    return;\r\n            }else{\r\n               \r\n                if(toUpdate){\r\n                    if (sesion.accesos.catalogos.marcas.editar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = cleanTypenames(data);\r\n                        await actualizarMarca({\r\n                            variables: {\r\n                                input: {\r\n                                    nombre_marca: input.nombre_marca,\r\n                                },\r\n                                id: toUpdate\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }else{\r\n                    if (sesion.accesos.catalogos.marcas.agregar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = data;\r\n                        await CrearMarca({\r\n                            variables: {\r\n                                input,\r\n                                empresa: sesion.empresa._id,\r\n                                sucursal: sesion.sucursal._id\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }\r\n                setToUpdate('');\r\n                setUpdateData(!updateData);\r\n                setLoading(false);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            setLoading(false);\r\n            if (error.message) {\r\n                setAlert({ message: error.message, status: \"error\", open: true });\r\n                return;\r\n            }\r\n            setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n \r\n        }\r\n    }\r\n\r\n    const pressEnter = (e) => {\r\n        if (e.key === 'Enter') saveData();\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n             <BackdropComponent loading={loading} />\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n                    <TextField\r\n                        id=\"outlined-error-helper-text\"\r\n                        label=\"Nombre de marca\"\r\n                        value={data.nombre_marca ? data.nombre_marca : \"\"}\r\n                        name=\"nombre_marca\"\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        fullWidth\r\n                        inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                        onChange={obtenerDatos}\r\n                        error={error}\r\n                        onKeyPress={pressEnter}\r\n                    />\r\n                    <Box ml={1} />\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant=\"contained\" \r\n                        size=\"large\" \r\n                        disableElevation \r\n                        onClick={saveData}\r\n                    >\r\n                        <Add />Guardar\r\n                    </Button>\r\n                </Box>\r\n            <ListaMarcas toUpdate={toUpdate} setToUpdate={setToUpdate} updateData={updateData} setData={setData} />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { \r\n    Button, \r\n    Box, \r\n    Dialog,\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    Container,\r\n    makeStyles,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { FcRating } from \"react-icons/fc\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport VistaMarcas from './VistaMarcas';\r\nimport { MarcasProvider } from '../../../../context/Catalogos/Marcas';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nexport default function Marcas() {\r\n    const classes = useStyles();\r\n    const [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado se registran las marcas que se asignarán a un producto.';\r\n    const handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<MarcasProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcRating className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t\t<VistaMarcas />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</MarcasProvider>\r\n\t\t</div>\r\n    )\r\n}\r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, fade } from '@material-ui/core';\r\nimport { Box, Button, Divider, IconButton, TextField, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Add, Delete, Edit, ExpandMore, Close } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport {\r\n\tOBTENER_CUENTAS,\r\n\tCREAR_CUENTA,\r\n\tCREAR_SUBCUENTA,\r\n\tACTUALIZAR_SUBCUENTA,\r\n\tACTUALIZAR_CUENTA,\r\n    ELIMINAR_CUENTA,\r\n    ELIMINAR_SUBCUENTA\r\n} from '../../../../gql/Catalogos/centroCostos';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tselected: {\r\n\t\tbackground: fade(theme.palette.secondary.main, 0.1)\r\n\t}\r\n}));\r\n\r\nexport default function RegistroCentroCostos() {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ cuenta, setCuenta ] = useState('');\r\n\tconst [ toUpdateID, setToUpdateID ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\t/*  Categorias Mutations */\r\n\tconst [ crearCuenta ] = useMutation(CREAR_CUENTA);\r\n\tconst [ actualizarCuenta ] = useMutation(ACTUALIZAR_CUENTA);\r\n   \r\n  \r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerCuentas } = data;\r\n\tconst render_cuentas = obtenerCuentas.map((cuenta, index) => (\r\n\t\t<RenderCuentas\r\n\t\t\tkey={index}\r\n\t\t\tcuenta={cuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\tsetCuenta={setCuenta}\r\n\t\t\trefetch={refetch}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t/>\r\n\t));\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetCuenta(e.target.value);\r\n\t};\r\n    \r\n\tconst guardarCuenta = async () => {\r\n\t\tif (!cuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst cuentaActualizada = cleanTypenames(cuenta);\r\n\t\t\t\t\tawait actualizarCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta: cuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    const pressEnter = (e) => {\r\n\t\ttry {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tguardarCuenta()\r\n\t\t}\r\n\t\t} catch (error) {\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t};  \r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Typography variant=\"h6\">Cuentas</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField value={cuenta} variant=\"outlined\" inputProps={{ style: { textTransform: \"uppercase\" } }} size=\"small\" style={{width:'35%'}} onKeyPress={pressEnter} onChange={obtenerDatos}  />\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={guardarCuenta}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{render_cuentas}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderCuentas = ({ cuenta, setToUpdateID, setCuenta, refetch, toUpdateID }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ subcuenta, setSubcuenta ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n     const [ eliminarCuenta ] = useMutation(ELIMINAR_CUENTA);\r\n\t/*  Subcategorias Mutations */\r\n\tconst [ crearSubcuenta ] = useMutation(CREAR_SUBCUENTA);\r\n\tconst [ actualizarSubcuenta ] = useMutation(ACTUALIZAR_SUBCUENTA);\r\n   \r\n\t\r\n    const render_subcuentas = (cuenta.subcuentas !== null) ? cuenta.subcuentas.map((subcuenta) => (\r\n\t\t<RenderSubcuentas\r\n\t\t\tkey={subcuenta._id}\r\n            idCuenta={cuenta._id}\r\n\t\t\tsubcuenta={subcuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t\tsetSubcuenta={setSubcuenta}\r\n            refetch={refetch}\r\n\t\t/>\r\n\t))\r\n\t: \r\n\t(<div/>)\r\n\t; \r\n\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(cuenta._id);\r\n\t\tsetCuenta(cuenta.cuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetCuenta('');\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetSubcuenta(e.target.value);\r\n\t};\r\n\r\n\tconst guardarSubcuenta = async () => {\r\n\t\tif (!subcuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcuenta\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst subCuentaActualizada = cleanTypenames(subcuenta)\r\n\t\t\t\t\tawait actualizarSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: { \r\n\t\t\t\t\t\t\t\tsubcuenta: subCuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id,\r\n\t\t\t\t\t\t\tidSubcuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    const deleteCuenta = async (idCuenta) => {\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarCuenta({\r\n                variables: {\r\n                    id: idCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    const pressEnter = (e) => {\r\n\t\ttry {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tguardarSubcuenta()\r\n\t\t}\r\n\t\t} catch (error) {\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t}; \r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\tclassName={toUpdateID && toUpdateID === cuenta._id ? classes.selected : ''}\r\n\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\taria-label=\"Expand\"\r\n\t\t\t\t\taria-controls={`cuenta-action-${cuenta._id}`}\r\n\t\t\t\t\tid={`cuenta-${cuenta._id}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n\t\t\t\t\t\t<Typography style={{fontSize:15}}>{cuenta.cuenta}</Typography>\r\n\t\t\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t\t\t{toUpdateID && toUpdateID === cuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tonClick={obtenerCamposParaActualizar}\r\n\t\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={() => deleteCuenta(cuenta._id )}\r\n\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Box mb={2} />\r\n\t\t\t\t\t\t<Box ml={5} width=\"100%\" display=\"flex\">\r\n\t\t\t\t\t\t\t<Typography  variant=\"h6\" style={{fontSize:20}}>Subcuenta</Typography>\r\n\t\t\t\t\t\t\t<Box mr={2} />\r\n\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tvalue={subcuenta}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={pressEnter} \r\n\t\t\t\t\t\t\t\t\tinputProps={{ style: { textTransform: \"uppercase\" } }}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Box ml={1} />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tonClick={guardarSubcuenta}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{(cuenta.subcuentas !== null ) ?\r\n\t\t\t\t\t\t\t<Box ml={5}>{render_subcuentas}</Box>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t{/* <Box ml={5}>{render_subcostos}</Box> */}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst RenderSubcuentas = ({ idCuenta,subcuenta, toUpdateID, setToUpdateID, setSubcuenta, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n    const [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ eliminarSubcuenta ] = useMutation(ELIMINAR_SUBCUENTA);\r\n\t\r\n    const obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(subcuenta._id);\r\n\t\tsetSubcuenta(subcuenta.subcuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetSubcuenta('');\r\n\t};\r\n    const deleteSubCuenta = async ( idSubCuenta) => {\r\n        \r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarSubcuenta({\r\n                variables: {\r\n                    idCuenta: idCuenta,\r\n                    idSubcuenta: idSubCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n    \r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tborderRadius={3}\r\n\t\t\t\tpx={1}\r\n\t\t\t\tclassName={toUpdateID && toUpdateID === subcuenta._id ? classes.selected : ''}\r\n\t\t\t>\r\n\t\t\t\t<Typography>{subcuenta.subcuenta}</Typography>\r\n\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t{\r\n\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\ttoUpdateID && toUpdateID === subcuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<IconButton onClick={obtenerCamposParaActualizar} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t<IconButton onClick={() => deleteSubCuenta(subcuenta._id)} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCentroCostos from './RegistroCentroCostos';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CentroCostos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado podrás registrar tus cuentas y subcuentas que utilizarás al momento de llevar tu control financiero. Por ejemplo: Compras, Ventas.'\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCentro de costos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCentro de costos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCentroCostos />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONCEPTOS_ALMACEN = gql`\r\n    query ObtenerConceptosAlmacen($empresa: ID!, $sucursal: ID!){\r\n        obtenerConceptosAlmacen(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_concepto\r\n            destino\r\n            origen\r\n            editable\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONCEPTO_ALMACEN = gql`\r\n    mutation CrearConceptoAlmacen($input: ConceptoAlmacenInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearConceptoAlmacen(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONCEPTO_ALMACEN = gql`\r\n    mutation ActualizarConceptoAlmacen($input: ConceptoAlmacenInput, $id: ID!){\r\n        actualizarConceptoAlmacen(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONCEPTO_ALMACEN = gql`\r\n    mutation EliminarConceptoAlmacen($id: ID!){\r\n        eliminarConceptoAlmacen(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n\tBox,\r\n\tCircularProgress,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTablePagination,\r\n\tTableRow,\r\n\tPaper,\r\n\tmakeStyles,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core';\r\n\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN, ELIMINAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaConceptos({setData, setIdConcepto, idConcepto, setAccion, updateData, setAlert}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\tlet obtenerConcepto= [];\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\tconst [ EliminarConceptoAlmacen ] = useMutation(ELIMINAR_CONCEPTO_ALMACEN);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ updateData, refetch ]\r\n\t); \r\n\r\n\tif(data){\r\n\t\tobtenerConcepto = data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait EliminarConceptoAlmacen({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: idConcepto\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t\tsetIdConcepto(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (loading){\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Concepto almacén</TableCell>\r\n                                <TableCell padding=\"default\">Origen</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Destino</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerConcepto.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_concepto}</TableCell>\r\n                                        <TableCell>{row.origen}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.destino}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_concepto: row.nombre_concepto,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torigen: row.origen,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdestino: row.destino\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerConcepto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Eliminar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Button, TextField, FormControl, Input, Grid, InputLabel, Select, MenuItem, useTheme, Dialog, DialogTitle, DialogActions } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport ListaConceptos from './ListaConceptos';\r\nimport { REGISTRAR_CONCEPTO_ALMACEN, ACTUALIZAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n     formControl: {\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom:theme.spacing(3),\r\n        minWidth: 200,\r\n        maxWidth: 200,\r\n    },\r\n}));\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nconst tipos = [\r\n    'SUMA',\r\n    'RESTA',\r\n\t'N/A'\r\n];\r\n\r\nfunction getStyles(tipo, tipoName, theme) {\r\n\tconsole.log(tipoName)\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function RegistroServicios() {\r\n\tconst classes = useStyles();\r\n     const theme = useTheme();\r\n\tconst [updateData, setUpdateData] = useState(false);\r\n\tconst [data, setData] = useState({\r\n\t\tnombre_concepto: \"\",\r\n        destino: \"\",\r\n\t\torigen:\"\"\r\n\t\t\r\n\t});\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [error, setError] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [accion, setAccion] = useState(true);\r\n\tconst [idConcepto, setIdConcepto] = useState('')\r\n    \r\n\tconst [ crearConceptoAlmacen ] = useMutation(REGISTRAR_CONCEPTO_ALMACEN);\r\n\tconst [ actualizarConceptoAlmacen ] = useMutation(ACTUALIZAR_CONCEPTO_ALMACEN);\r\n    const [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\tconst handleChangeInput = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n     const handleChangeDestino = (event) => {\r\n        setData({...data, destino:event.target.value});\r\n    };\r\n\tconst handleChangeOrigen = (event) => {\r\n        setData({...data, origen:event.target.value});\r\n    };\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n           setOpenModal(false);\r\n\t\t\tif(!data.nombre_concepto || !data.origen || !data.destino ){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data;\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\t\t\tusuario: sesion._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait actualizarConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tid: idConcepto\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetAccion(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\t\tsetData({nombre_concepto: \"\", origen: \"\", destino:\"\"});\r\n                setError(false);\r\n\t\t\t\tsetUpdateData(!updateData);\r\n\t\t\t\tsetIdConcepto(\"\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t}\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') handleSubmit();\r\n\t};\r\n\r\n    const Modal = ({ handleModal, openModal, handleSubmit }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Editar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres editar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleSubmit}>\r\n\t\t\t\t\t\tEditar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n            <Box  flexDirection=\"row\" >\r\n                <Grid container>\r\n                    <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                   \r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                         <Typography>Concepto </Typography>\r\n                        <TextField\r\n                            error={error}\r\n                            id=\"outlined-error-helper-text\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            name=\"nombre_concepto\"\r\n\t\t\t\t\t\t\tstyle={{marginLeft:2}}\r\n                            value={data.nombre_concepto}\r\n                            onChange={handleChangeInput}\r\n                            onKeyPress={pressEnter}\r\n\t\t\t\t\t\t\tinputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                        />\r\n                        \r\n                    </Box>\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"origen-label\"\r\n                        id=\"origen-name\"\r\n                        value={data.origen}\r\n                        onChange={handleChangeOrigen}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.origen, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"destino-label\">Destino</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"destino-label\"\r\n                        id=\"destino-name\"\r\n                        value={data.destino}\r\n                        onChange={handleChangeDestino}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.destino, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                        <Box ml={5} />\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={ () =>(accion) ? handleSubmit(): setOpenModal(true)} disableElevation>\r\n                            <Add />Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Box>\r\n\t\t\t<ListaConceptos \r\n\t\t\t\tsetData={setData} \r\n\t\t\t\tidConcepto={idConcepto} \r\n\t\t\t\tsetIdConcepto={setIdConcepto} \r\n\t\t\t\tsetAccion={setAccion} \r\n\t\t\t\tupdateData={updateData}\r\n\t\t\t\tsetAlert={setAlert} \r\n\t\t\t/>\r\n            <Modal handleModal={handleModal} openModal={openModal} handleSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroConcepto from './RegistroConcepto';\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConceptosAlmacen() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst descripcion = 'En este apartado podrás registrar los conceptos que definirán la acción para los traspasos entre almacenes.';\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tConceptos Almacén\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tConceptos almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display='flex' flexDirection='row'>\r\n\t\t\t\t\t\t\t<DescripcionCatalogo  texto={descripcion} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box mt={4} alignSelf='center' >\r\n\t\t\t\t\t<Container >\r\n\t\t\t\t\t\t<RegistroConcepto />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport Cliente from './Cliente/Cliente';\r\nimport Productos from './Producto/';\r\nimport Tallas from './Tallas/Tallas';\r\n/* import UnidadMedida from './UnidadMedida/UnidadMedida'; */\r\nimport Contabilidad from './Contabilidad/Contabilidad';\r\nimport Proveedores from './Proveedores/Proovedores';\r\nimport Cajas from './Cajas/Cajas'; \r\nimport Usuarios from './Usuarios/Usuarios';\r\nimport Departamentos from './Departamentos/Departamentos';\r\nimport Categorias from './Categorias/Categorias';\r\nimport Colores from './Colores/Colores';\r\nimport Marcas from './Marcas/Marcas';\r\nimport CentroCostos from './CentroCostos/CentroCostos';\r\nimport ConceptosAlmacen from './ConceptosAlmacen/ConceptosAlmacen';\r\n\r\nexport default function Catalogos() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cliente />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.productos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Productos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.tallas_numeros.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Tallas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<UnidadMedida />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.contabilidad.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Contabilidad />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Proveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.cajas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Usuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.departamentos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Departamentos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.categorias.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Categorias />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.colores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Colores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.marcas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Marcas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.centro_costos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CentroCostos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.conceptos_almacen.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ConceptosAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const TesoreriaCtx = createContext();\r\n\r\nexport const TesoreriaProvider = ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [cuentas, setCuentas] = useState([]);\r\n    const [cuenta, setCuenta] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    \r\n    return (\r\n        <TesoreriaCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                cuentas, \r\n                setCuentas,\r\n                reload, \r\n                setReload,\r\n                cuenta, \r\n                setCuenta\r\n            }}\r\n        >\r\n            {children}\r\n        </TesoreriaCtx.Provider>\r\n    );\r\n};\r\n","import { Box, Button, Dialog, DialogActions,\r\n        DialogContent, IconButton, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography \r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport moment from 'moment';\r\n\r\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\r\n\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { CREAR_MOVIMIENTO_CUENTA } from '../../../../gql/Empresa/sucursales';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    }\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RetiroDeposito({cuenta, refetch, tipo}) {\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const [ CrearMovimientoCuenta ] = useMutation(CREAR_MOVIMIENTO_CUENTA);\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [datosMovimiento, setDatosMovimiento] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    };\r\n\r\n    const onChangeDatos = (e) => {\r\n        setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value })\r\n    };\r\n\r\n    const input ={\r\n        tipo_movimiento: datosMovimiento.tipo_movimiento === 'RETIRO' ? 'CUENTA-RETIRO' : 'CUENTA-DEPOSITO',\r\n        id_usuario: sesion._id,\r\n        rol_movimiento: tipo === true ? \"CUENTA-EMPRESA\" : \"CUENTA\",\r\n        numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : null,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_turno : null,\r\n        concepto: datosMovimiento.concepto,\r\n        hora_moviento: {\r\n            hora: moment().format('hh'),\r\n            minutos: moment().format('mm'),\r\n            segundos: moment().format('ss'),\r\n            completa: moment().format('HH:mm:ss')\r\n        },\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.cantidad),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        comentarios: datosMovimiento.comentarios,\r\n    };\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if (!datosMovimiento.concepto || !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n                setAlert({\r\n                    message: 'Por favor complete los datos',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }\r\n            const movimiento = await CrearMovimientoCuenta({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: cuenta._id,\r\n                    tipo: tipo\r\n                }\r\n            });\r\n            refetch();\r\n            setDatosMovimiento([]); \r\n            handleClickOpen();\r\n            setAlert({\r\n                message: movimiento.data.crearMovimientoCuenta.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n              });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <Box>\r\n                <IconButton\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                >\r\n                    <CompareArrowsIcon style={{fontSize: 35}} />\r\n                </IconButton>\r\n            </Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h5'>\r\n                            Movimiento en Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Usuario</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario\"\r\n                                variant=\"outlined\"\r\n                                disabled={true}\r\n                                value={sesion?.nombre}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\" >\r\n                            <Typography>Fecha y hora</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                disabled={true}\r\n                                size=\"small\"\r\n                                value={moment().format('D MMMM YYYY, h:mm:ss')}\r\n                                name=\"fecha_movimiento\"\r\n                                variant=\"outlined\"\r\n\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Movimiento a Realizar</Typography>\r\n                            <Select\r\n                                className={classes.formComboBox}    \r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                name=\"tipo_movimiento\"\r\n                                onChange={onChangeDatos}\r\n                                fullWidth\r\n                            >\r\n                                <MenuItem value=''>Ninguno</MenuItem>\r\n                                <MenuItem value='DEPOSITO'>Deposito</MenuItem>\r\n                                <MenuItem value='RETIRO'>Retiro</MenuItem>\r\n                            </Select>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Cantidad</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                type='number'\r\n                                name=\"cantidad\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Concepto</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                name=\"concepto\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Comentarios</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                multiline\r\n                                rows={2}\r\n                                type='number'\r\n                                name=\"monto_movimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant='outlined'\r\n                        onClick={enviarDatos}\r\n                        size=\"large\"\r\n                    >\r\n                        Realizar\r\n                    </Button>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, \r\n        DialogContent,  MenuItem,  Select,  Slide, \r\n        TextField, Typography\r\n} from '@material-ui/core';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport moment from 'moment';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CUENTAS } from '../../../../gql/Empresa/sucursales';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'movimiento', label: 'Origen Movimiento', minWidth: 100 },\t\r\n    { id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'name', label: 'Usuario', minWidth: 150 },\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 150 },\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 150 },\r\n\t{ id: 'tipo', label: 'Tipo Movimiento', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function HistorialCuentas({cuenta, tipo}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    moment.locale('es');\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    const [datosFiltro, setDatosFiltro] = useState([]);\r\n    const [ value ] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(!open);\r\n        setDatosFiltro([]);\r\n        refetch();\r\n    };\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_HISTORIAL_CUENTAS, {\r\n\t\tvariables: {\r\n            input:{\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\",\r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? datosFiltro.tipo_movimiento : \"\"\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: cuenta._id,\r\n            tipo: tipo\r\n\t\t}\r\n\t});\t\r\n    \r\n    let historialCuenta = [];\r\n    if(data){\r\n        historialCuenta = data.obtenerHistorialCuenta;\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch()\r\n    }, [refetch])\r\n\r\n\treturn (\r\n        <Fragment>\r\n            <Box>\r\n                <Button\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                    endIcon={<VisibilityIcon style={{fontSize: 35}}  />}\r\n                >\r\n                    Ver\r\n                </Button>\r\n            </Box>\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h6'>\r\n                            Historial de cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha inicio:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    name=\"fecha_inicio\"\r\n                                    onChange={obtenerDatos}\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha fin:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"fecha_fin\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Usuario:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Tipo Movimiento:</Typography>\r\n                                <Select\r\n                                    className={classes.formComboBox}    \r\n                                    size=\"small\"\r\n                                    variant=\"outlined\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={obtenerDatos}\r\n                                    fullWidth\r\n                                >\r\n                                    <MenuItem value='TODOS'>Ninguno</MenuItem>\r\n                                    <MenuItem value='CUENTA-DEPOSITO'>Deposito</MenuItem>\r\n                                    <MenuItem value='CUENTA-RETIRO'>Retiro</MenuItem>\r\n                                </Select>\r\n                            </Box>\r\n                        </div>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <Paper className={classes.root}>\r\n                            <TableContainer className={classes.container}>\r\n                                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            {columns.map((column) => (\r\n                                                <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                                    {column.label}\r\n                                                </TableCell>\r\n                                            ))}\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody> \r\n                                        {\r\n                                            historialCuenta?.map((row, index) => {\r\n                                                return(\r\n                                                    <RowsHistorial \r\n                                                        key={index}\r\n                                                        row={row}\r\n                                                        loading={loading}\r\n                                                    />\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                       \r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsHistorial ({ row, loading }) {\r\n\r\n    if (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell>Caja {row.numero_caja !== \"\" ? row.numero_caja : \"\"}</TableCell>\r\n            <TableCell>{moment(row?.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n            <TableCell>{row?.nombre_usuario_creador}</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(row.montos_en_caja.monto_efectivo.monto)}</b>\r\n            </TableCell>\r\n            <TableCell>{row?.concepto}</TableCell>\r\n            <TableCell>{\r\n                row?.tipo_movimiento === \"CUENTA-DEPOSITO\" ? 'DEPOSITO' : 'RETIRO'    \r\n            }</TableCell>\r\n\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, CircularProgress} from '@material-ui/core';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nimport RetiroDeposito from './RetiroDeposito';\r\nimport HistorialCuentas from './HistorialCuentas';\r\nimport { OBTENER_SUCURSALES } from '../../../../gql/Empresa/sucursales';\r\nimport { OBTENER_DATOS_EMPRESA } from '../../../../gql/Empresa/empresa';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Origen', minWidth: 150, align: 'left' },\r\n\t{ id: 'tipo', label: 'Tipo Cuenta', minWidth: 150, align: 'left' },\r\n\t{ id: 'dinero', label: 'Dinero Existencia', minWidth: 100, align: 'left' },\r\n\t{ id: 'movimiento', label: 'Realizar Movimiento', minWidth: 100, align: 'center' },\t\r\n\t{ id: 'historial', label: 'Historial', minWidth: 100, align: 'center' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaCuentas() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_SUCURSALES, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\r\n    const cuentaEmpresa = useQuery(OBTENER_DATOS_EMPRESA, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst classes = useStyles();\r\n    let cuentasSucursalesEmpresa = [];\r\n    let cuentaPrincipal = [];\r\n\r\n\r\n    if(cuentaEmpresa.data){\r\n        cuentaPrincipal = cuentaEmpresa.data.obtenerEmpresa;\r\n    };\r\n\r\n    if (data) {\r\n        cuentasSucursalesEmpresa = data.obtenerSucursalesEmpresa\r\n    };\r\n\r\n    if (loading && cuentaEmpresa.loading) \r\n        return (\r\n            <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"50vh\"\r\n            >\r\n                <CircularProgress/>\r\n            </Box>\r\n        );\r\n    \r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody> \r\n                        <TableRow\r\n                            hover\r\n                            role=\"checkbox\"handleClickOpen\r\n                            tabIndex={-1}\r\n                        >\r\n                            <TableCell >{cuentaPrincipal?.nombre_empresa}</TableCell>\r\n                            <TableCell >CUENTA PRINCIPAL</TableCell>\r\n                            <TableCell >\r\n                                <b style={{fontSize: 17}}>${formatoMexico(cuentaPrincipal?.cuenta_empresa?.dinero_actual)}</b>\r\n                            </TableCell>\r\n                            {sesion.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                                <TableCell align='center'>  </TableCell>\r\n                            ):(\r\n                                <TableCell align='center'> <RetiroDeposito cuenta={cuentaPrincipal} refetch={cuentaEmpresa.refetch} tipo={true} /> </TableCell>\r\n                            )}\r\n                            <TableCell align='center'> <HistorialCuentas cuenta={cuentaPrincipal}  tipo={true} /> </TableCell>\r\n                        </TableRow>\r\n                            {cuentasSucursalesEmpresa?.map((cuenta, index) => {\r\n                                return(\r\n                                    <RowsCuentas \r\n                                        key={index}\r\n                                        refetch={refetch}\r\n                                        cuenta={cuenta}\r\n                                        loading={loading}\r\n                                        \r\n                                    /> \r\n                                )\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuenta, refetch}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell >{cuenta.nombre_sucursal}</TableCell>\r\n            <TableCell >SUCURSAL</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(cuenta?.cuenta_sucursal?.dinero_actual)}</b>\r\n            </TableCell>\r\n            {permisosUsuario.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                <TableCell align='center'>  </TableCell>\r\n            ):(\r\n                <TableCell align='center'> <RetiroDeposito cuenta={cuenta} refetch={refetch} tipo={false} /> </TableCell>\r\n            )}\r\n            <TableCell align='center'> <HistorialCuentas cuenta={cuenta} tipo={false}/> </TableCell>\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogContent } from '@material-ui/core';\r\nimport ListaCuentas from './ListaCuentas';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CuentasEmpresaSucursales() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/retiro-de-dinero.svg' alt=\"icono retiro\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCuentas de Empresa\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tCuentas de empresa\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<ListaCuentas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_EGRESOS = gql`\r\n    query ObtenerHistorialEgresos($input: ObtenerHistorialEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialEgresos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            folio_egreso\r\n            folio_factura\r\n            empresa_distribuidora\r\n            provedor\r\n            productos {\r\n                cantidad_productos\r\n                precio_unitario\r\n                producto\r\n                total\r\n            }\r\n            categoria\r\n            subCategoria\r\n            metodo_pago\r\n            fecha_compra\r\n            fecha_registro\r\n            fecha_vencimiento\r\n            observaciones\r\n            compra_credito\r\n            credito_pagado\r\n            saldo_credito_pendiente\r\n            saldo_total\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            id_user\r\n            empresa\r\n            sucursal         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_EGRESO = gql`\r\n    mutation CrearEgreso($input: CrearEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearEgreso(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'nombre', label: 'Nombre', minWidth: 100 },\r\n\t{ id: 'precioU', label: 'Precio Unitario', minWidth: 100 },\r\n    { id: 'total', label: 'Total', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1\r\n\t},\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n}));\r\n\r\nexport default function TablaProductosEgresos({productos, borrarProducto}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(3);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsProductos \r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\tborrarProducto={borrarProducto}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonPageChange={handleChangePage}\r\n\t\t\t\tonRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nfunction RowsProductos ({index, producto, borrarProducto}) {\r\n\treturn(\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.cantidad_productos}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.producto}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.precio_unitario)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.total)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align='center' >\r\n\t\t\t\t<IconButton \r\n\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\tsize='small'\r\n\t\t\t\t\tonClick={() => borrarProducto(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t)\r\n}","import { useMutation, useQuery } from '@apollo/client';\r\nimport { Box, makeStyles, Select,MenuItem , TextField, Typography, FormControl, OutlinedInput, InputAdornment, IconButton, Button, Divider } from '@material-ui/core';\r\nimport { Autorenew } from '@material-ui/icons';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\nimport { OBTENER_CUENTAS } from '../../../../gql/Catalogos/centroCostos';\r\nimport { CREAR_EGRESO } from '../../../../gql/Tesoreria/egresos';\r\nimport TablaProductosEgresos from './TablaProductosEgresos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function FormRegistroEgresos({tipo, handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const { setAlert } = useContext(TesoreriaCtx);\r\n    const [ CrearEgreso ] = useMutation(CREAR_EGRESO);\r\n\r\n    const classes = useStyles();\r\n    const [upload, setUpload] = useState(false);\r\n    const [datosEgreso, setDatosEgreso] = useState([]);\r\n    const [totalCompra, setTotalCompra] = useState(0);\r\n    const [subCuentas, setSubCuentas] = useState([]);\r\n    const [producto, setProducto] = useState([]);\r\n    const [productos, setProductos] = useState([]);\r\n\r\n    const obtenerCuentas = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\r\n    let cuentas = [];\r\n\r\n    if (obtenerCuentas.data) {\r\n        cuentas = obtenerCuentas.data.obtenerCuentas;\r\n    };\r\n\r\n    const GenFolio = () => {\r\n        const max = 999999999999;\r\n        const min = 100000000000;\r\n        const folio_egreso = Math.floor(\r\n          Math.random() * (max - min + 1) + min\r\n        ).toString();\r\n        setDatosEgreso({\r\n          ...datosEgreso,\r\n          folio_egreso,\r\n        });\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosEgreso({...datosEgreso, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const obtenerSubCuentas = (cuenta) => {\r\n        setSubCuentas(cuenta.subcuentas);\r\n    };\r\n\r\n    const obtenerDatoProductos = (e) => {\r\n        setProducto({...producto, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const agregarProducto = () => {\r\n        let producto_guardado = {\r\n            cantidad_productos: parseFloat(producto.cantidad_productos),\r\n            precio_unitario: parseFloat(producto.precio_unitario),\r\n            producto: producto.producto,\r\n            total: (parseFloat(producto.cantidad_productos) * parseFloat(producto.precio_unitario))\r\n        };\r\n\r\n        productos.push(producto_guardado);\r\n\r\n        setDatosEgreso({\r\n            ...datosEgreso,\r\n            productos,\r\n        });\r\n        totalCompraVenta();\r\n        setProducto([]);\r\n    };\r\n    \r\n    function borrarProducto(index) {\r\n        productos.forEach(function(elemento, indice, array) {\r\n            if(index === indice){\r\n                productos.splice(index, 1);\r\n            }\r\n        });\r\n        setUpload(true);\r\n    };\r\n\r\n    useEffect(() => { \r\n        totalCompraVenta();\r\n        setProductos(productos);\r\n        setUpload(false);\r\n\r\n    }, [upload, productos]);\r\n\r\n    const totalCompraVenta = () =>{\r\n        let total = 0;\r\n        for (let i = 0; i < productos.length; i++) {\r\n            total += productos[i].total;\r\n        };\r\n        setTotalCompra(total);\r\n    };\r\n\r\n    const input = {\r\n        folio_egreso:  datosEgreso.folio_egreso,\r\n        folio_factura: datosEgreso.folio_factura,\r\n        empresa_distribuidora: datosEgreso.empresa_distribuidora,\r\n        provedor: datosEgreso.provedor,\r\n        productos: datosEgreso.productos ? datosEgreso.productos : [],\r\n        categoria: datosEgreso.categoria,\r\n        subCategoria:  datosEgreso.subCategoria,\r\n        metodo_pago: datosEgreso.metodo_pago,\r\n        fecha_compra: datosEgreso.fecha_compra,\r\n        fecha_vencimiento: datosEgreso.fecha_vencimiento0 ? datosEgreso.fecha_vencimiento : \"\",\r\n        observaciones: datosEgreso.observaciones,\r\n        compra_credito: datosEgreso.compra_credito ? datosEgreso.compra_credito : false, \r\n        credito_pagado: datosEgreso.credito_pagado ? datosEgreso.credito_pagado : false,\r\n        saldo_credito_pendiente: datosEgreso.saldo_credito_pendiente ? datosEgreso.saldo_credito_pendiente : 0,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_user: sesion._id,\r\n        saldo_total: totalCompra ? totalCompra : 0\r\n    }\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if(!datosEgreso.folio_egreso){\r\n                setAlert({\r\n                    message: 'Por favor genere un folio.',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            };\r\n\r\n            const egreso = await CrearEgreso({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id\r\n                }\r\n            });\r\n            handleClickOpen();\r\n            setDatosEgreso([]); \r\n            setAlert({\r\n                message: egreso.data.crearEgreso.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n        <Box p={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Datos Generales</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <FormControl\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    name=\"folio_egreso\"\r\n                    fullWidth\r\n                >\r\n                    <Typography>Folio</Typography>\r\n                    <OutlinedInput\r\n                        style={{ padding: 0 }}\r\n                        id=\"form-producto-codigo-barras\"\r\n                        name=\"folio_egreso\"\r\n                        value={\r\n                            datosEgreso.folio_egreso\r\n                            ? datosEgreso.folio_egreso\r\n                            : \"\"\r\n                        }\r\n                        onChange={obtenerDatos}\r\n                        endAdornment={\r\n                        <InputAdornment position=\"start\">\r\n                            <IconButton\r\n                                onClick={() => GenFolio()}\r\n                                color=\"primary\"\r\n                                size=\"small\"\r\n                            >\r\n                                <Autorenew />\r\n                            </IconButton>\r\n                        </InputAdornment>\r\n                        }\r\n                    />\r\n                </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>ID Factura:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"id_factura\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Fecha de Compra:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_compra\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    type=\"date\"\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Metodo de pago:</Typography>\r\n                    <Select\r\n                        className={classes.formComboBox}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onChange={obtenerDatos}\r\n                        name=\"metodo_pago\"\r\n                        fullWidth\r\n                    >\r\n                        <MenuItem value='TARJETA'>Tarjeta</MenuItem>\r\n                        <MenuItem value='EFECTIVO'>Efectivo</MenuItem>\r\n                        <MenuItem value='CHEQUE'>Cheque</MenuItem>\r\n                        <MenuItem value='TRANSFERENCIA'>Transferencia</MenuItem>\r\n                        <MenuItem value='MONEDERO ELECTRONICO'>Monedero electronico</MenuItem>\r\n                    </Select>\r\n            </Box>\r\n        </div>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Categoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"categoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno' onClick={() => setSubCuentas([])}>Ninguno</MenuItem>\r\n                    {cuentas?.map((cuenta) =>{\r\n                        return(\r\n                            <MenuItem \r\n                                key={cuenta._id}\r\n                                onClick={() => obtenerSubCuentas(cuenta)}\r\n                                value={cuenta.cuenta}\r\n                            >\r\n                                {cuenta.cuenta}\r\n                            </MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>SubCatergoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"subCategoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno'>Ninguno</MenuItem>\r\n                    {subCuentas?.map((subCuenta) =>{\r\n                        return(\r\n                            <MenuItem value={subCuenta.subcuenta}>{subCuenta.subcuenta}</MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Empresa:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"empresa_distribuidora\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Provedor: </Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"provedor\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box p={1} mt={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Productos Adquiridos</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Cantidad:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    className={classes.input}\r\n                    size=\"small\"\r\n                    name=\"cantidad_productos\"\r\n                    value={producto.cantidad_productos ? producto.cantidad_productos : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Producto:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"producto\"\r\n                    value={producto.producto ? producto.producto : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Precio Unitario:</Typography>\r\n                <TextField\r\n                    className={classes.input}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"precio_unitario\"\r\n                    value={producto.precio_unitario ? producto.precio_unitario : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box> \r\n            <Box width=\"100%\" display='flex' justifyContent='center' alignItems='center'>\r\n                <Button\r\n                    variant='outlined'\r\n                    size='large'\r\n                    color='primary'\r\n                    onClick={agregarProducto}\r\n                    startIcon={<AddIcon />}\r\n                >\r\n                    Agregar\r\n                </Button>\r\n            </Box>\r\n        </div>\r\n        <Box p={1} >\r\n            <TablaProductosEgresos productos={productos} borrarProducto={borrarProducto} />\r\n        </Box>\r\n        <Box display='flex' justifyContent='flex-end' p={1}> \r\n            <Typography variant='h6'>\r\n                Total: ${formatoMexico(totalCompra)}\r\n            </Typography>\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Observaciónes:</Typography>\r\n                <TextField\r\n                    multiline\r\n                    rows={2}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"observaciones\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\">\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='primary'\r\n                    onClick={enviarDatos}\r\n                >\r\n                    Guardar Egreso\r\n                </Button>\r\n            </Box>\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='secondary'\r\n                >\r\n                    Cancelar\r\n                </Button>\r\n            </Box>\r\n        </Box>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { AppBar, Box, Button, Grid, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport { FcDonate } from 'react-icons/fc';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FormRegistroEgresos from './FormRegistroEgresos';\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3} minHeight=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 50\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nexport default function VistaRegistroEgreso({handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\tconst { setAlert } = useContext(TesoreriaCtx);\r\n    const [ value, setValue ] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n    return (\r\n        <Fragment>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\tlabel=\"Egreso a Contado\"\r\n\t\t\t\t\t\t\ticon={<FcDonate className={classes.iconSize} />}\r\n\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Grid container justify=\"flex-end\">\r\n\t\t\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t\t\t<Typography>Usuario: <b>{sesion.nombre}</b></Typography> \r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<b>{moment().format('D MMMM YYYY')}</b>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t<Box mt={3} ml={5} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t<FormRegistroEgresos handleClickOpen={handleClickOpen} tipo='CONTADO' />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t</div>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogActions,Paper} from '@material-ui/core';\r\nimport VistaRegistroEgreso from './VistaRegistroEgreso';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\ticonSizeSecond: {\r\n\t\twidth: 40,\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Egresos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/income.svg' alt=\"icono egreso\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tEgresos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t>\r\n\t\t\t\t<VistaRegistroEgreso handleClickOpen={handleClickOpen} />\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 80},\r\n\t{ id: 'cantidadR', label: 'Cant. Regalo', minWidth: 80},\r\n\t{ id: 'nombre', label: 'Producto', minWidth: 80},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 80},\r\n\t{ id: 'total', label: 'Total', minWidth: 80},\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras({productos}) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos?.map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} hover role=\"checkbox\" tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad_regalo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.costo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.total}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS = gql`\r\n    query ObtenerHistorialAbonos($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialAbonosInput){\r\n        obtenerHistorialAbonos( empresa: $empresa, sucursal: $sucursal, input: $input ){\r\n            numero_caja\r\n            id_Caja\r\n            horario_turno\r\n            tipo_movimiento\r\n            rol_movimiento\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            monto_total_abonado\r\n            numero_cliente\r\n            nombre_cliente\r\n            telefono_cliente\r\n            email_cliente\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_ABONO = gql`\r\n    mutation CrearAbono($empresa: ID!, $sucursal: ID!, $input: CrearAbonoInput){\r\n        crearAbono(empresa: $empresa, sucursal: $sucursal, input: $input, ){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_ABONOS } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha de abono', minWidth: 170, align: 'center' },\r\n\t{ id: 'cliente', label: 'Nombre', minWidth: 170, align: 'center' },\r\n\t{ id: 'abono', label: 'Cantidad abonada', minWidth: 170, align: 'right' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos({cuenta}) {\r\n\t\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tconst { reload } = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_HISTORIAL_ABONOS, {\r\n\t\t\tvariables: {\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tfecha_inicio: \"\",\r\n\t\t\t\t\tfecha_fin: \"\",\r\n\t\t\t\t\tusuario: \"\",\r\n\t\t\t\t\tid_cliente: cuenta.proveedor.id_proveedor._id,\r\n\t\t\t\t\tid_egreso: \"\",\r\n\t\t\t\t\trol_movimiento: \"PROVEEDOR\",\r\n\t\t\t\t\tid_compra: cuenta._id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t  \tfetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\t\r\n\tlet abonos = []\r\n\tif(data){\r\n\t\tabonos = data.obtenerHistorialAbonos;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [reload])\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{abonos?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={index}>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{moment(row.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{row.nombre_cliente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='right'><b>${row.monto_total_abonado}</b></TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useContext, useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport { Box, Button, Dialog, \r\n        DialogContent,  DialogTitle, FormControl, makeStyles, \r\n        MenuItem, \r\n        Select, \r\n        Slide, TextField, Typography \r\n} from '@material-ui/core'\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport moment from 'moment';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tinput: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n}));\r\n\r\nexport default function AbonoaRecibir({cuenta}) {\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n    \r\n\tconst { setReload, setAlert } = useContext(TesoreriaCtx);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [abono, setAbono] = useState(''); \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    \r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(abono),\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        id_usuario: sesion._id,\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if(abono === '' || metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete los datos', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setAbono('');\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Abono registrado con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    const handleClick = () => {\r\n        setReload(true);\r\n        setOpen(!open);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"large\"\r\n                variant=\"outlined\" \r\n                fullWidth\r\n                color=\"primary\"\r\n                startIcon={<AddCircleOutlineIcon style={{fontSize: 35}} />}\r\n                onClick={handleClick}\r\n            >\r\n                <Typography variant=\"h6\">\r\n                    Abonar    \r\n                </Typography>\r\n            </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                fullWidth\r\n                maxWidth='xs'\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box p={1} flexGrow={1}>\r\n                            Registrar nuevo abono\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\"  mt={2} >\r\n                        <Typography><b>Cantidad a abonar:</b></Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            className={classes.input}\r\n                            onChange={(e) => setAbono(e.target.value)}\r\n                            value={abono}\r\n                            size=\"small\"\r\n                            name=\"abono_recibir\"\r\n                            variant=\"outlined\"\r\n                            type='number'\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\" mt={2} >\r\n                            <Typography><b>Metodo de pago:</b></Typography>\r\n                            <FormControl \r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    width=\"100%\"\r\n                                    name=\"metodo_pago\"\r\n                                    variant='outlined'\r\n                                    value={metodoPago ? metodoPago : ''}\r\n                                    onChange={(e) => setMetodoPago(e.target.value)}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {formaPago.map((metodo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <Box width=\"100%\" mt={2} display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant='h6'>\r\n                                <b>Total cuenta</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: '#9B9B9B'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography  variant='h6'>\r\n                                <b>Total abonado</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: 'green'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total - cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1} >\r\n                            <Typography  variant='h6'>\r\n                                <b>Total restante</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography  variant='h6'>\r\n                            <b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 18}}\r\n                        onClick={enviarDatos}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react'\r\nimport { Box, Grid, makeStyles, Typography, Button, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\nimport AbonoaRecibir from '../AbonoPercibir';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\n\r\nexport default function DetallesCuenta({handleClick, cuenta}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Detalles de cuenta\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Clave proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.clave_cliente}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.nombre}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Numero usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.numero_usuario}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Fecha compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_registro).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Fecha vencimiento: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_vencimiento_credito).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                {permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (null) : (\r\n                    <Box width=\"60%\" p={1} display='flex' alignItems={'center'} >\r\n                        <AbonoaRecibir cuenta={cuenta} />\r\n                    </Box>\r\n                )}\r\n            </div>\r\n            <Grid container>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2}>\r\n                        <Typography variant=\"h6\">\r\n                            Lista de abonos\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaAbonos cuenta={cuenta} />\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total abonado: <b style={{color: \"#9B9B9B\"}}>${cuenta.total - cuenta.saldo_credito_pendiente}</b></Typography>\r\n                    </Box> \r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Restante: <b  style={{color: \"green\"}}>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2} >\r\n                        <Typography variant=\"h6\">\r\n                            Lista de compra\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaCompras productos={cuenta.productos}/>\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total a liquidar: <b  style={{color: \"red\"}}>${formatoMexico(cuenta.total)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState } from 'react'\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, FormControl, makeStyles, MenuItem, Select, Slider, TextField, Typography } from '@material-ui/core';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport moment from 'moment';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport { useMutation } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta({cuenta, refetch}) {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const { setAlert, setReload } = useContext(TesoreriaCtx);\r\n\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [value, setValue] = useState(0);\r\n    const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n    const [dineroDescontado, setDineroDescontado] = useState(0);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n        setCuentaTotalDescuento(0);\r\n        setDineroDescontado(0);\r\n        setValue(0)\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n        let cuenta_con_descuento = parseFloat((cuenta.saldo_credito_pendiente * porcentaje / 100).toFixed(2));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - cuenta_con_descuento).toFixed(2));\r\n        setCuentaTotalDescuento(cuenta_con_descuento);\r\n        setDineroDescontado(dineroDescontado);\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n\r\n        let porcentaje  = parseFloat((((valorText * 100) / cuenta.saldo_credito_pendiente ).toFixed(2)));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - valorText).toFixed(2));\r\n\r\n        setCuentaTotalDescuento(valorText);\r\n        setDineroDescontado(dineroDescontado);\r\n        setValue(porcentaje);\r\n\r\n    };\r\n    \r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(cuenta.saldo_credito_pendiente),\r\n        descuento: {\r\n            porciento_descuento: value,\r\n            dinero_descontado: dineroDescontado,\r\n            total_con_descuento: cuentaTotalDescuento\r\n        },\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if( metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete el metodo de pago', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Cuenta liquidada con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"outlined\"  \r\n                color=\"primary\"\r\n                startIcon={<DoneIcon />}\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                fullWidth\r\n                maxWidth='xs'\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <Box display=\"flex\">\r\n                    <Box flexGrow={1} p={2}>\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            Liquidar Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Typography>Aplica un descuento por pronto pago a tu cuenta</Typography>\r\n                    <Box mt={1} textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Porcentaje de descuento</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box ml={1} mr={1} mb={2} >\r\n                        <Slider\r\n                            getAriaValueText={valuetext}\r\n                            valueLabelFormat={value.toFixed(2)}\r\n                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                            valueLabelDisplay=\"auto\"\r\n                            onChange={obtenerPorcientoSlide} \r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Dinero a liquidar con descuento</b>\r\n                        </Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"descuento\"\r\n                            variant=\"outlined\"\r\n                            value={cuentaTotalDescuento ? cuentaTotalDescuento : 0 }\r\n                            onChange={obtenerPrecioText}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" mt={2} textAlign={'center'} >\r\n                        <Typography><b>Metodo de pago:</b></Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                width=\"100%\"\r\n                                name=\"metodo_pago\"\r\n                                variant='outlined'\r\n                                onChange={(e) => setMetodoPago(e.target.value )}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {formaPago.map((metodo, index) => {\r\n                                    return(\r\n                                        <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                    )\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box display=\"flex\" mt={2}>\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Total cuenta: </Typography>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography><b>${formatoMexico(cuenta.total)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Saldo pendiente: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Dinero Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(dineroDescontado)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Porciento Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>{formatoMexico(value)}%</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant=\"h6\" >Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography variant=\"h6\" ><b style={{color: 'green'}}>${formatoMexico(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {formatoMexico} from '../../../../../../config/reuserFunctions'\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\nimport moment from 'moment';\r\n\r\nimport { Box, CircularProgress, Dialog, Slide, TableHead } from '@material-ui/core';\r\nimport 'moment/locale/es';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha Compra', minWidth: 100, align: 'center' },\r\n\t{ id: 'provedor', label: 'Provedor', minWidth: 100, align: 'center' },\r\n\t{ id: 'abonado', label: 'Abonado', minWidth: 100, align: 'center' },\r\n    { id: 'restante', label: 'Restante', minWidth: 100, align: 'center' },\r\n    { id: 'total', label: 'Total', minWidth: 100, align: 'center' }\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function TablaAbonos({loading}) {\r\n\r\n\tconst { cuentas} = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading) \r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"center\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\theight=\"50vh\"\r\n\t\t\t>\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\tLiquidar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cuentas?.map((row, index) => {\r\n\t\t\t\t\t\t\t\tif(row.credito_pagado === false){\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsCuentas \r\n\t\t\t\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\t\t\t\tcuentaSelect={row}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})} \r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuentaSelect, loading}){\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [open, setOpen] = useState(false);\r\n    \r\n\tconst handleClick = () => {\r\n        setOpen(!open);\r\n    };\r\n\t\r\n\tconst TwoClickInRowTableBuy = (e) => {\r\n\t\ttry {\r\n\t\t\tlet timer;\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tif (e.detail === 2) {\r\n\t\t\t\thandleClick();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tonClick={(e) => TwoClickInRowTableBuy(e)}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(cuentaSelect.fecha_registro).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{cuentaSelect.proveedor.id_proveedor.nombre_cliente}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total - cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total)}</TableCell>\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<LiquidarCuenta cuenta={cuentaSelect}/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullScreen\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClick} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\t\t\t\t<DetallesCuenta\r\n\t\t\t\t\tcuenta={cuentaSelect}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\thandleClick={handleClick}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../../gql/Compras/compras\";\r\n\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport SearchOutlined from '@material-ui/icons/SearchOutlined';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\trootSearch: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosProveedores() {\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\tconst { reload, setReload, setCuentas } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [filtro, setFiltro] = useState(\"\");\r\n\tconst searchfilter = useRef(null);\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_COMPRAS_REALIZADAS,\r\n\t\t{\r\n\t\t  variables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfecha: \"\"\r\n\t\t  },\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tif(data){\r\n\t\tsetCuentas(data.obtenerComprasRealizadas)\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\trefetch();\r\n\t\t\r\n\t\tsetReload(false);\r\n\r\n\t}, [reload, refetch]);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst obtenerBusqueda = (e, value) => {\r\n\t\te.preventDefault();\r\n\t\trefetch({ filtro: value, fecha: '' });\r\n\t\tsetFiltro(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de provedores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos a Provedores\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box display='flex' p={2}>\r\n\t\t\t\t\t<Box minWidth=\"70%\">\r\n\t\t\t\t\t<form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tinputRef={searchfilter}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tplaceholder=\"Buscar una compra...\"\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\t\t\t\t<SearchOutlined />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos \t\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { Box, Grid, makeStyles, Typography, Button, Dialog, Slide, AppBar, Toolbar } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(4)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetallesCuenta() {\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const classes = useStyles();\r\n\r\n    const handleClick =()=>{\r\n        setOpen(!open);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Detalles\r\n            </Button>\r\n            <Dialog fullScreen open={open} onClose={handleClick} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tDetalle de cuenta\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Nombre de Cliente:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Fecha:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Factura:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Empresa:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Domicilio:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1}>\r\n                            <Typography variant=\"h6\">\r\n                                Lista de abonos\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaAbonos />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a abonado: $ 150,000.00</Typography>\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Restante: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1} >\r\n                            <Typography variant=\"h6\">\r\n                               Lista de compra\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaCompras />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a liquidar: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n\t\t\t</Dialog>\r\n          \r\n        </div>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ToggleButtonGroup } from '@material-ui/lab';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta() {\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <Box display=\"flex\" alignItems=\"center\" m={1}>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Abonos a Proveedores\r\n                    </Typography>\r\n                    <Box m={1} ml={8} >\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>Descuento por pronto pago</Typography>\r\n\r\n                        <Box p={1}>\r\n                            <ToggleButtonGroup\r\n                                // value={alignment}\r\n                                exclusive\r\n                                // onChange={handleAlignment}\r\n                                aria-label=\"text alignment\"\r\n                            >\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por decuento\r\n                                    </Button>\r\n                                </Box>\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por pesos\r\n                                    </Button>\r\n                                </Box>\r\n                            </ToggleButtonGroup>\r\n                        </Box>\r\n                       \r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"10% o $100.00\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Sub Total: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Descuento: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClick} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\n\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n\treturn { name, calories, fat, carbs, protein };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('Cupcake', 305, 3.7, 67, 4.3),\r\n\tcreateData('Donut', 452, 25.0, 51, 4.9),\r\n\tcreateData('Eclair', 262, 16.0, 24, 6.0),\r\n\tcreateData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n\tcreateData('Gingerbread', 356, 16.0, 49, 3.9),\r\n\tcreateData('Honeycomb', 408, 3.2, 87, 6.5),\r\n\tcreateData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n\tcreateData('Jelly Bean', 375, 0.0, 94, 0.0),\r\n\tcreateData('KitKat', 518, 26.0, 65, 7.0),\r\n\tcreateData('Lollipop', 392, 0.2, 98, 0.0),\r\n\tcreateData('Marshmallow', 318, 0, 81, 2.0),\r\n\tcreateData('Nougat', 360, 19.0, 9, 37.0),\r\n\tcreateData('Oreo', 437, 18.0, 63, 4.0)\r\n];\r\n\r\nconst headCells = [\r\n\t{ id: 'name', numeric: false, disablePadding: true, label: 'Cliente' },\r\n\t{ id: 'calories', numeric: true, disablePadding: false, label: 'Abondado' },\r\n\t{ id: 'fat', numeric: true, disablePadding: false, label: 'Restante' },\r\n\t{ id: 'abono', numeric: true, disablePadding: false, label: 'Abono a percibir' },\r\n\t{ id: 'carbs', numeric: true, disablePadding: false, label: 'Detalles' },\r\n\t{ id: 'protein', numeric: true, disablePadding: false, label: 'Liquidar' }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount } = props;\r\n\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\t// onRequestSort: PropTypes.func.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\t// order: PropTypes.oneOf([ 'asc', 'desc' ]).isRequired,\r\n\t// orderBy: PropTypes.string.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = rows.map((n) => n.name);\r\n\t\t\tsetSelected(newSelecteds);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, name) => {\r\n\t\tconst selectedIndex = selected.indexOf(name);\r\n\t\tlet newSelected = [];\r\n\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, name);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={rows.length}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row.name);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => handleClick(event, row.name)}\r\n\t\t\t\t\t\t\t\t\t\trole=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\">\r\n\t\t\t\t\t\t\t\t\t\t\t{row.name}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.calories}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.fat}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.carbs}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<DetallesCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<LiquidarCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n                    rowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={rows.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { Box, Button, Dialog,  DialogContent,  DialogTitle, Slide, TextField, Typography } from '@material-ui/core'\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\nexport default function AbonoaRecibir() {\r\n    //listo\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n\r\n    return (\r\n        <div>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    onClick={handleClick}\r\n                >\r\n                   Abonar\r\n                </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box display=\"flex\" justifyContent=\"flex-start\">\r\n                            Abono a recibir por cuenta\r\n                        </Box>\r\n                        <Box ml={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1} mt={1}>\r\n                        <Typography>Nombre de Cliente: SUTANO</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1}>\r\n                        <Typography>Total a abonar:  $15,100</Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Alert severity=\"info\">Si desea editar el abono del cliente, <br/>\r\n                        procure este sea mayor al establecido</Alert>\r\n                    </Box>\r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 16}}\r\n                        onClick={handleClick}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, TextField, Grid } from '@material-ui/core';\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport AbonoaRecibir from './Components/AbonoPercibir';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosClientes() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de Clientes\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos de Clientes\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Box width=\"50%\" p={2}>\r\n\t\t\t\t\t\t<Typography>Busqueda por cliente o por cuenta</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t/* error */\r\n\t\t\t\t\t\t\tname=\"nombre_comercial\"\r\n\t\t\t\t\t\t\tid=\"form-producto-nombre-comercial\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t/* value=\"\" */\r\n\t\t\t\t\t\t\t/* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t/* onChange={obtenerCampos} */\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box mt={5}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\" \r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBuscar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Grid item lg={5}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" mt={4}>\r\n\t\t\t\t\t\t\t<AbonoaRecibir />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos />\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport CuentasEmpresaSucursales from './CuentasEmpresaSucursales/CuentasEmpresaSucursales';\r\nimport Egresos from './Egresos/Egresos';\r\nimport AbonosProveedores from './Abonos/Provedores/AbonosProovedores';\r\nimport AbonosClientes from './Abonos/Clientes/AbonosClientes';\r\n// import Transferencias from './Transferencias/Transferencias';\r\n\r\nimport SnackBarMessages from '../../../components/SnackBarMessages';\r\nimport { TesoreriaCtx } from '../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nexport default function Tesoreria() {\r\n\r\n\tconst { alert, setAlert } = useContext(TesoreriaCtx);\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.cuentas_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CuentasEmpresaSucursales />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.egresos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Egresos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosProveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosClientes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n                {/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Transferencias />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { TesoreriaProvider } from '../../../context/Tesoreria/tesoreriaCtx';\r\nimport Tesoreria from './Tesoreria';\r\n\r\nexport default function IndexTesoreria() {\r\n    return (\r\n        <TesoreriaProvider>\r\n            <Tesoreria />\r\n        </TesoreriaProvider>\r\n    )\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const FacturacionCtx = createContext();\r\n\r\nexport const FacturacionProvider = ({ children }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [datosFactura, setDatosFactura] = useState({\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion ? sesion.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  });\r\n\r\n  const [venta_factura, setVentaFactura] = useState(null);\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const [cp_valido, setCPValido] = useState(false);\r\n  const [codigo_postal, setCodigoPostal] = useState(\"\");\r\n  const [error_validation, setError] = useState({ status: false, message: \"\" });\r\n\r\n  return (\r\n    <FacturacionCtx.Provider\r\n      value={{\r\n        datosFactura,\r\n        setDatosFactura,\r\n        cp_valido,\r\n        setCPValido,\r\n        codigo_postal,\r\n        setCodigoPostal,\r\n        error_validation,\r\n        setError,\r\n        venta_factura,\r\n        setVentaFactura,\r\n        productos,\r\n        setProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </FacturacionCtx.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductosSinClaveSat({ productos, open, handleClose }) {\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              Productos sin CLAVE del catalogo SAT\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Hay productos sin clave de catalogo de productos del sat, sin esta\r\n            clave no puede realizar facturas\r\n          </DialogContentText>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer style={{ maxHeight: \"40vh\" }}>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Código de barras</TableCell>\r\n                    <TableCell>Clave alterna</TableCell>\r\n                    <TableCell>Producto</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {productos.map((row, index) => {\r\n                    const { datos_generales } = row.id_producto;\r\n                    return (\r\n                      <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.codigo_barras}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.clave_alterna}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.nombre_comercial}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()} color=\"inherit\" size=\"large\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CONSULTA_PRODUCTOS = gql`\r\n  query ObtenerConsultaGeneralVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTO_UNITARIO = gql`\r\n  query ObtenerUnProductoVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $datosProductos: ID!\r\n  ) {\r\n    obtenerUnProductoVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      datosProductos: $datosProductos\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_VENTAS = gql`\r\n  query ObtenerProductosVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerProductosVentasInput\r\n  ) {\r\n    obtenerProductosVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES_VENTAS = gql`\r\n  query ObtenerClientesVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerClientesVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      numero_cliente\r\n      clave_cliente\r\n      nombre_cliente\r\n      rfc\r\n      curp\r\n      telefono\r\n      celular\r\n      email\r\n      numero_descuento\r\n      limite_credito\r\n      dias_credito\r\n      razon_social\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      banco\r\n      numero_cuenta\r\n      monedero_electronico\r\n      credito_disponible\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_VENTA = gql`\r\n  mutation createVenta(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n  ) {\r\n    createVenta(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_VENTAS_SUCURSAL = gql`\r\nquery obtenerVentasSucursal($empresa: ID!, $sucursal: ID!, $filtro: String ) {\r\n\t\tobtenerVentasSucursal(empresa: $empresa, sucursal: $sucursal, filtro: $filtro) {\r\n\t\t\t_id\r\n      folio\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n        rfc\r\n        telefono\r\n        celular\r\n        email\r\n        razon_social\r\n      }\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general_activo\r\n      id_caja{\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      fecha_de_vencimiento_credito\r\n      dias_de_credito_venta\r\n      empresa\r\n      sucursal\r\n      usuario{\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      productos{\r\n        _id\r\n        id_producto{\r\n          _id\r\n          datos_generales{\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat{\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios{\r\n            ieps\r\n            ieps_activo\r\n            inventario{\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra{\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra{\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n            granel\r\n            litros\r\n          }\r\n          imagenes{\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos{\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos{\r\n            precio_cajas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_costales{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_piezas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n          }\r\n          unidades_de_venta{\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general{\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          medidas_producto{\r\n            _id\r\n            cantidad\r\n            cantidad_nueva\r\n            almacen\r\n            codigo_barras\r\n            color{\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida{\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        iva_total\r\n        ieps_total\r\n        subtotal\r\n        impuestos\r\n        total\r\n        medida{\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color{\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto{\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        id_unidad_venta\r\n        year_registro\r\n        fecha_registro\r\n        precio_unidad{\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        precio_actual_object{\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      }\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport ProductosSinClaveSat from \"./ProductosSinClave\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar venta</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ComponentBusquedaVenta handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cancelar</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ComponentBusquedaVenta = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open_productos, setOpenProductos] = useState(false);\r\n  const [productos_sin_clave, setProductosSinClave] = useState([]);\r\n\r\n  const openProductosClaves = () => setOpenProductos(true);\r\n  const closeProductosClaves = () => setOpenProductos(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro: value,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ProductosSinClaveSat\r\n        productos={productos_sin_clave}\r\n        open={open_productos}\r\n        handleClose={closeProductosClaves}\r\n      />\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={8} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={4} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar una venta haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        handleClose={handleClose}\r\n        setProductosSinClave={setProductosSinClave}\r\n        openProductosClaves={openProductosClaves}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  handleClose,\r\n  setProductosSinClave,\r\n  openProductosClaves,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { setVentaFactura, setProductos } = useContext(FacturacionCtx);\r\n  const { loading, data, error } = resultado_ventas;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerVentasSucursal } = data;\r\n\r\n  const obtenerVenta = (click, data) => {\r\n    setSelected(data.folio);\r\n    if (click === 2) {\r\n      console.log(data);\r\n      const without_sat_code = data.productos.filter(\r\n        (res) => !res.id_producto.datos_generales.clave_producto_sat.Value\r\n      );\r\n\r\n      if (without_sat_code.length > 0) {\r\n        setProductosSinClave(without_sat_code);\r\n        openProductosClaves();\r\n        return;\r\n      }\r\n\r\n      const { productos, ...venta } = {...data}\r\n      const productos_base = [...data.productos]\r\n      setVentaFactura(venta);\r\n      setProductos(productos_base);\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.map((data, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  selected={data.folio === selected}\r\n                  onClick={(e) => obtenerVenta(e.detail, data)}\r\n                >\r\n                  <TableCell>{data.folio}</TableCell>\r\n                  <TableCell>\r\n                    {data.cliente !== null ? data.cliente.nombre_cliente : \"-\"}\r\n                  </TableCell>\r\n                  <TableCell>{data.usuario.nombre}</TableCell>\r\n                  <TableCell>{data.id_caja.numero_caja}</TableCell>\r\n                  <TableCell>\r\n                    ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n                  </TableCell>\r\n                  <TableCell>${formatoMexico(data.subTotal)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport { CircularProgress, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { CheckCircle, Error } from \"@material-ui/icons\";\r\n\r\nexport default function CodigoPostal() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const {\r\n    cp_valido,\r\n    setCPValido,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    error_validation,\r\n  } = React.useContext(FacturacionCtx);\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const [CP] = useDebounce(value, 500);\r\n\r\n  const obtenerCodigoPostal = React.useCallback(async (codigo_postal) => {\r\n    if (!codigo_postal) return;\r\n    try {\r\n      setLoading(true);\r\n      const result = await Facturama.Catalogs.PostalCodes(\r\n        codigo_postal,\r\n        function (result) {\r\n          return result;\r\n        }\r\n      );\r\n\r\n      if (result) {\r\n        setCPValido(true);\r\n        setLoading(false);\r\n        setCodigoPostal(result[0].Value);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCPValido(false);\r\n      setCodigoPostal(\"\");\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    obtenerCodigoPostal(CP);\r\n  }, [CP]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <Typography>Código Postal:</Typography> */}\r\n      <form onSubmit={obtenerCodigoPostal}>\r\n        <TextField\r\n          fullWidth\r\n          name=\"expedition_place\"\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          value={value}\r\n          label=\"Código postal\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {value ? (\r\n                  loading ? (\r\n                    <CircularProgress size={20} />\r\n                  ) : cp_valido ? (\r\n                    <CheckCircle color=\"primary\" />\r\n                  ) : (\r\n                    <Error color=\"error\" />\r\n                  )\r\n                ) : (\r\n                  <div />\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          /* error={value ? cp_valido ? false : true : false}\r\n          helperText={value ? cp_valido ? \"\" : \"Introduce un CP valido\" : \"\"} */\r\n\r\n          error={\r\n            error_validation.status && !value\r\n              ? true\r\n              : value\r\n              ? cp_valido\r\n                ? false\r\n                : true\r\n              : false\r\n          }\r\n          helperText={\r\n            error_validation.status && !value\r\n              ? error_validation.message\r\n              : value\r\n              ? cp_valido\r\n                ? \"\"\r\n                : \"Introduce un CP valido\"\r\n              : \"\"\r\n          }\r\n        />\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { Close, Error, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport CrearCliente from \"../../Catalogos/Cliente/CrearCliente\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaClientesFacturas() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar cliente</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <BuscadorClienteComponent handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button size=\"large\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst BuscadorClienteComponent = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [openAlertRfc, setOpenAlertRfc] = useState(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const resultado_clientes = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo: \"CLIENTE\", filtro: value },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const handleCloseAlertRFC = () => {\r\n    setOpenAlertRfc(false);\r\n  };\r\n  const openAlertRFC = () => {\r\n    setOpenAlertRfc(true);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        open={openAlertRfc}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleCloseAlertRFC();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Alert severity=\"info\">\r\n            Deber registrar un RFC y RAZON SOCIAL a este cliente.\r\n          </Alert>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleCloseAlertRFC()} color=\"primary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Box mb={2} display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setFiltro(e.target.value)}\r\n          value={filtro}\r\n        />\r\n        <CrearCliente\r\n          tipo=\"CLIENTE\"\r\n          accion=\"registrar\"\r\n          refetch={resultado_clientes.refetch}\r\n        />\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar un cliente haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderListClientes\r\n        handleClose={handleClose}\r\n        resultado_clientes={resultado_clientes}\r\n        openAlertRFC={openAlertRFC}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderListClientes = ({\r\n  handleClose,\r\n  resultado_clientes,\r\n  openAlertRFC,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  const { loading, data, error, refetch } = resultado_clientes;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const obtenerClienteTabla = (click, row) => {\r\n    setSelected(row.nombre_cliente);\r\n    if (click === 2) {\r\n      if (!row.rfc) {\r\n        openAlertRFC();\r\n        return;\r\n      }\r\n      setDatosFactura({\r\n        ...datosFactura,\r\n        receiver: {\r\n          ...datosFactura.receiver,\r\n          Name: row.nombre_cliente,\r\n          Rfc: row.rfc,\r\n        },\r\n      });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n              <TableCell minwidth=\"100\">Clave</TableCell>\r\n              <TableCell minwidth=\"150\">Nombre</TableCell>\r\n              <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              <TableCell minwidth=\"150\">RFC</TableCell>\r\n              <TableCell minwidth=\"150\">Editar Cliente</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  onClick={(e) => obtenerClienteTabla(e.detail, row)}\r\n                  selected={row.nombre_cliente === selected}\r\n                >\r\n                  <TableCell>\r\n                    <Typography>{row.numero_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.clave_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.nombre_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.razon_social}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>\r\n                      {row.rfc ? row.rfc : <Error color=\"primary\" />}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <CrearCliente\r\n                      tipo=\"CLIENTE\"\r\n                      accion=\"actualizar\"\r\n                      datos={row}\r\n                      refetch={refetch}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ListaVentasFactura from \"./ListaVentas/ListaVentasFactura.js\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx.js\";\r\nimport CodigosPostales from \"./Catalogos/CodigoPostal.js\";\r\nimport { tipoCambio, tiposCfdi } from \"../catalogos\";\r\nimport ListaClientesFacturas from \"./ClientesSelect.js\";\r\n\r\nexport default function RegistroFactura({ serie_default }) {\r\n  const { datosFactura, setDatosFactura, error_validation, venta_factura } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { folio, serie } = serie_default[0];\r\n    setDatosFactura({ ...datosFactura, folio: folio.toString(), serie });\r\n  }, []);\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={5}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>{`Emisor: ${datosFactura.issuer.Name}`}</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.issuer.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.issuer.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.issuer.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Regimen fiscal</Typography>\r\n              <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                <TextField\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={datosFactura.issuer.FiscalRegime}\r\n                  disabled\r\n                  error={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                  }\r\n                  helperText={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                      ? error_validation.message\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>Receptor</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Cliente</Typography>\r\n              <TextField\r\n                value={datosFactura.receiver.Name}\r\n                placeholder=\"Selecciona un cliente\"\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <ListaClientesFacturas />\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                  disabled: true,\r\n                }}\r\n                error={error_validation.status && !datosFactura.receiver.Name}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Name\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.receiver.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.receiver.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Box mt={1} mb={2}>\r\n        <Typography>\r\n          <b>Datos factura</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <TextField\r\n            value={datosFactura.cliente}\r\n            placeholder=\"Selecciona venta a facturar\"\r\n            fullWidth\r\n            size=\"small\"\r\n            label=\"Folio Venta\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <ListaVentasFactura />\r\n                </InputAdornment>\r\n              ),\r\n              readOnly: true,\r\n              disabled: true,\r\n            }}\r\n            value={venta_factura ? venta_factura.folio : ''}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.folio}\r\n            label=\"Folio\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.folio}\r\n            helperText={\r\n              error_validation.status && !datosFactura.folio\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.serie}\r\n            label=\"Serie\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.serie}\r\n            helperText={\r\n              error_validation.status && !datosFactura.serie\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cfdi_type\"\r\n            error={error_validation.status && !datosFactura.cfdi_type}\r\n          >\r\n            <InputLabel id=\"cfdi_type\">Tipo de CFDI</InputLabel>\r\n            <Select\r\n              labelId=\"cfdi_type\"\r\n              value={datosFactura.cfdi_type}\r\n              name=\"cfdi_type\"\r\n              onChange={obtenerDatos}\r\n              label=\"tipo de CFDI\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tiposCfdi.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.cfdi_type\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"currency\"\r\n            error={error_validation.status && !datosFactura.currency}\r\n          >\r\n            <InputLabel id=\"moneda\">Moneda</InputLabel>\r\n            <Select\r\n              labelId=\"moneda\"\r\n              value={datosFactura.currency}\r\n              name=\"currency\"\r\n              onChange={obtenerDatos}\r\n              label=\"moneda\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tipoCambio.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.currency\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <CodigosPostales />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Close, Edit } from \"@material-ui/icons\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ModificarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const [producto_base, setProductoBase] = useState({ ...producto });\r\n  const [venta_base, setVentaBase] = useState({ ...venta });\r\n\r\n  const [cantidad_base, setCantidad] = useState(producto_base.cantidad_venta);\r\n  const [precio_base, setPrecio] = useState(\r\n    producto_base.precio_actual_object.precio_neto\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    handleClose();\r\n    setProductoBase(producto);\r\n    setVentaBase(venta);\r\n    setCantidad(producto.cantidad_venta);\r\n    setPrecio(producto.precio_actual_object.precio_neto);\r\n  };\r\n\r\n  const obtenerDatos = async (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad_venta\") {\r\n      setCantidad(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n    if (!value) return;\r\n    //##################\r\n    let venta_copy = { ...venta_base };\r\n    let copy_producto = { ...producto_base };\r\n    let { precio_actual_object, cantidad_venta, granel_producto } = {\r\n      ...copy_producto,\r\n    };\r\n\r\n    const { precios } = { ...copy_producto.id_producto };\r\n    //meter el precio original para restalo a la venta\r\n    const resta_base = await calculatePrices2({\r\n      newP: copy_producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //restal resultados a la venta\r\n\r\n    venta_copy.iva = venta_copy.iva - resta_base.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps - resta_base.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos - resta_base.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal - resta_base.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total - resta_base.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero - resta_base.monederoCalculo;\r\n\r\n    //realizar calculos de cantidad\r\n    //meter el precio nuevo para sumarlo a la venta\r\n    let suma_nuevo;\r\n\r\n    if (name === \"cantidad_venta\") {\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: parseFloat(value),\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precio_actual_object,\r\n      });\r\n      copy_producto.cantidad_venta = parseFloat(value);\r\n      setProductoBase({ ...copy_producto, [name]: parseFloat(value) });\r\n    } else {\r\n      const precio_neto = parseFloat(value);\r\n      //sacar impuestos\r\n      const { iva, ieps } = precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n\r\n      //sacar precio_venta\r\n      let PVCI = parseFloat((precio_neto / cantidad_venta).toFixed(2));\r\n      let PVSI = parseFloat((PVCI / (suma_impuestos + 1)).toFixed(2));\r\n\r\n      //sacar iva e ieps\r\n      let iva_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n      );\r\n      //sacar utilidad\r\n      let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((PVSI - PCSI) / PCSI) * 100).toFixed(2));\r\n      let precios_nuevos = { ...precio_actual_object };\r\n\r\n      let impuestos_precio = ieps_precio + iva_precio;\r\n\r\n      precios_nuevos.ieps_precio = ieps_precio;\r\n      precios_nuevos.iva_precio = iva_precio;\r\n      precios_nuevos.precio_venta = PVSI;\r\n      precios_nuevos.precio_neto = PVCI;\r\n      precios_nuevos.utilidad = utilidad;\r\n      if (precio_actual_object.unidad_maxima) {\r\n        precio_actual_object.precio_general = precio_neto;\r\n      }\r\n\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: cantidad_venta,\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precios_nuevos,\r\n      });\r\n      setProductoBase({\r\n        ...copy_producto,\r\n        precio_actual_object: precios_nuevos,\r\n        ieps_total: precios_nuevos.ieps_precio * cantidad_base,\r\n        iva_total: precios_nuevos.iva_precio * cantidad_base,\r\n        precio_a_vender: precios_nuevos.precio_neto * cantidad_base,\r\n        precio_actual_producto: precios_nuevos.precio_neto * cantidad_base,\r\n        subtotal: precios_nuevos.precio_venta * cantidad_base,\r\n        impuestos: impuestos_precio * cantidad_base,\r\n        total: precios_nuevos.precio_neto * cantidad_base,\r\n      });\r\n    }\r\n    //sumar resultados a la venta\r\n    venta_copy.iva = venta_copy.iva + suma_nuevo.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps + suma_nuevo.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos + suma_nuevo.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal + suma_nuevo.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total + suma_nuevo.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero + suma_nuevo.monederoCalculo;\r\n    setVentaBase(venta_copy);\r\n  };\r\n\r\n  const verificarCampoVacio = (value) => {\r\n    if (!value) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n  };\r\n\r\n  const guardarPrecios = () => {\r\n    if (error) return;\r\n    const copy_array_productos = [...productos];\r\n    copy_array_productos.splice(index, 1, producto_base);\r\n    setVentaFactura(venta_base);\r\n    setProductos(copy_array_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Edit />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              {producto_base.id_producto.datos_generales.nombre_comercial}\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleCancel()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Box mb={2}>\r\n              <Typography>\r\n                <b>Producto</b>\r\n              </Typography>\r\n              <TableContainer>\r\n                <Table size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                      <TableCell style={{ width: 50 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow tabIndex={-1}>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={cantidad_base}\r\n                          type=\"number\"\r\n                          name=\"cantidad_venta\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                {producto_base.unidad}\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={\r\n                            producto ? producto.cantidad_venta.toString() : \"\"\r\n                          }\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !cantidad_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={precio_base}\r\n                          type=\"number\"\r\n                          name=\"precio_neto\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                $\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={producto.precio_actual_object.precio_neto.toString()}\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !precio_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.subtotal)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.impuestos)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.total)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Box>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                  <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.iva)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.ieps)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.subTotal)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.impuestos)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.total)}</b>\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => guardarPrecios()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(FacturacionCtx);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const copy_venta = { ...venta };\r\n    const copy_productos = [ ...productos];\r\n    const { cantidad_venta, granel_producto, precio_actual_object } = producto;\r\n    const { iva, ieps, impuestos, subTotal, total, monedero } = copy_venta;\r\n    //devuelve cantidades a restar\r\n    const precio_resta = await calculatePrices2({\r\n      newP: producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //Restar precios a venta\r\n    console.log(precio_resta);\r\n    const {\r\n      ivaCalculo,\r\n      iepsCalculo,\r\n      impuestoCalculo,\r\n      subtotalCalculo,\r\n      totalCalculo,\r\n      monederoCalculo,\r\n    } = precio_resta;\r\n\r\n    copy_venta.iva = iva - ivaCalculo;\r\n    copy_venta.ieps = ieps - iepsCalculo;\r\n    copy_venta.impuestos = impuestos - impuestoCalculo;\r\n    copy_venta.subTotal = subTotal - subtotalCalculo;\r\n    copy_venta.total = total - totalCalculo;\r\n    copy_venta.monedero = monedero - monederoCalculo;\r\n\r\n    //remover de la lista\r\n    copy_productos.splice(index, 1);\r\n    setVentaFactura(copy_venta);\r\n    setProductos(copy_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Close />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>¿Está seguro de eliminar este producto?</DialogTitle>\r\n        <DialogContent>\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 100 }}>Producto</TableCell>\r\n                  <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n                  <TableCell>{producto.cantidad_venta}</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => handleDelete()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport ModificarProductoFactura from \"./EditarProductoFactura\";\r\nimport EliminarProductoFactura from \"./EliminarProductoFactura\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"36vh\",\r\n  },\r\n});\r\n\r\nexport default function DetallesFactura() {\r\n  const classes = useStyles();\r\n  const { venta_factura, productos } = useContext(FacturacionCtx);\r\n\r\n  if (!venta_factura) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"elevation\">\r\n      <Box textAlign=\"center\">\r\n        <Typography variant=\"button\">Detalles de Venta</Typography>\r\n      </Box>\r\n      <TableContainer>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Folio</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cliente</TableCell>\r\n              <TableCell style={{ width: 50 }}>Descuento</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Usuario</TableCell>\r\n              <TableCell style={{ width: 50 }}>Caja</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.folio}\r\n              </TableCell>\r\n              <TableCell style={{ width: 50 }}>\r\n                {venta_factura.cliente !== null\r\n                  ? venta_factura.cliente.nombre_cliente\r\n                  : \"-\"}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.descuento)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.iva\r\n                  ? formatoMexico(venta_factura.iva)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.ieps\r\n                  ? formatoMexico(venta_factura.ieps)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.subTotal)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.impuestos)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.total)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.usuario.nombre}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.id_caja.numero_caja}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box textAlign=\"center\" mt={1}>\r\n        <Typography variant=\"button\">Productos de Venta</Typography>\r\n      </Box>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Producto</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Modificar</TableCell>\r\n              <TableCell style={{ width: 50 }}>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos.map((producto, index) => {\r\n              return (\r\n                <RowTableProductos\r\n                  venta={venta_factura}\r\n                  producto={producto}\r\n                  key={index}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowTableProductos = ({ venta, producto, index }) => {\r\n  const { datos_generales } = producto.id_producto;\r\n  return (\r\n    <TableRow tabIndex={-1}>\r\n      <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n      <TableCell>{producto.cantidad_venta}</TableCell>\r\n      <TableCell>${formatoMexico(producto.iva_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.ieps_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.subtotal)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.impuestos)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.total)}</TableCell>\r\n      <TableCell>\r\n        <ModificarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n      <TableCell>\r\n        <EliminarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\nexport const factura_initial_state = {\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion ? sesion.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  }","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport moment from \"moment\";\r\nimport { verificarDatosFactura } from \"./validacion_factura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { CREAR_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { formaPago, metodoPago, tiposCfdi, usosCfdi } from \"../catalogos\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RealizarFactura({ setAlert }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    datosFactura,\r\n    setDatosFactura,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    productos,\r\n    setProductosFactura,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const [CrearFactura] = useMutation(CREAR_FACTURA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setProductosFactura([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const crearFactura = async () => {\r\n    try {\r\n      /* setLoading(true); */\r\n      let nuevo_obj = { ...datosFactura };\r\n\r\n      /* \r\n      {\r\n          ProductCode: \"50202306\",\r\n          IdentificationNumber: \"61b7bf6e3454b727a0c2e357\",\r\n          Description: \"COCACOLA\",\r\n          //Unit: \"Unidad de Servicio\",\r\n          UnitCode: \"XBX\",\r\n          UnitPrice: \"36\",\r\n          Quantity: \"1\",\r\n          Subtotal: \"36\",\r\n          Discount: \"5.4\",\r\n          Taxes: [\r\n            {\r\n              Total: \"4.89\",\r\n              Name: \"IVA\",\r\n              Base: \"30.6\",\r\n              Rate: \"0.16\",\r\n              IsRetention: \"false\",\r\n            },\r\n          ],\r\n          Total: \"35.49\",\r\n        }, */\r\n\r\n      const items = [];\r\n\r\n      productos.forEach(producto => {\r\n        console.log(producto);\r\n        let {iva, ieps} = producto.id_producto.precios;\r\n        let Taxes = [];\r\n\r\n        if(producto.iva_total){\r\n          Taxes.push({\r\n            Total: producto.iva_total,\r\n            Name: \"IVA\",\r\n            Base: producto.precio_a_vender,\r\n            Rate: `0.${iva < 10 ? `0${iva}` : iva}`,\r\n            IsRetention: \"true\",\r\n          })\r\n        }\r\n        if(producto.ieps_total){\r\n          Taxes.push({\r\n            Total: producto.ieps_total,\r\n            Name: \"IEPS\",\r\n            Base: producto.precio_a_vender,\r\n            Rate: `0.${ieps < 10 ? `0${ieps}` : ieps}`,\r\n            IsRetention: \"true\",\r\n          })\r\n        }\r\n        items.push(\r\n          {\r\n            ProductCode: producto.id_producto.datos_generales.clave_producto_sat.Value,\r\n            IdentificationNumber: producto.id_producto._id,\r\n            Description: producto.id_producto.datos_generales.nombre_comercial,\r\n            UnitCode: producto.codigo_unidad,\r\n            UnitPrice: producto.precio_actual_object.precio_venta,\r\n            Quantity: producto.cantidad_venta,\r\n            Subtotal: producto.subtotal,\r\n            Discount: producto.precio_actual_object.dinero_descontado ? producto.precio_actual_object.dinero_descontado : 0,\r\n            Taxes,\r\n            Total: producto.total\r\n          },\r\n        )\r\n      });\r\n      \r\nconsole.log(items);\r\n      return\r\n\r\n      //poner la fecha de facturacion\r\n      if (datosFactura.date === \"1\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(1, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else if (datosFactura.date === \"2\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(2, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else {\r\n        nuevo_obj.date = moment().format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      }\r\n\r\n      nuevo_obj.items = productos;\r\n      nuevo_obj.expedition_place = codigo_postal;\r\n\r\n      /* validar todos los datos */\r\n      const validate = verificarDatosFactura(nuevo_obj);\r\n\r\n      console.log(nuevo_obj);\r\n      if (validate.length) {\r\n        setError({ status: true, message: validate[0].message });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setError({ status: false, message: \"\" });\r\n\r\n      let result = await CrearFactura({\r\n        variables: {\r\n          input: nuevo_obj,\r\n        },\r\n      });\r\n      console.log(\"result\", result);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearFactura.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      /* limpiarCampos(); */\r\n    } catch (error) {\r\n      console.log(error);\r\n      console.log(error.response);\r\n      setLoading(false);\r\n      if (error.response) {\r\n        setAlert({\r\n          message: error.response,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        startIcon={<DoneIcon />}\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" m={1}>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            variant=\"contained\"\r\n          >\r\n            <Close />\r\n          </Button>\r\n        </Box>\r\n        <DialogContent>\r\n          <InputsFacturaModal />\r\n        </DialogContent>\r\n        <DialogActions style={{justifyContent: \"center\"}}>\r\n          <Button\r\n            startIcon={<Done />}\r\n            onClick={() => crearFactura()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputsFacturaModal = () => {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerUsoCfdi = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      receiver: {\r\n        ...datosFactura.receiver,\r\n        [name]: value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box my={1}>\r\n        <Typography>Fecha de facturación</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"date\"\r\n          error={error_validation.status && !datosFactura.date}\r\n        >\r\n          <Select value={datosFactura.date} name=\"date\" onChange={obtenerDatos}>\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona una fecha</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"0\">{moment().format(\"LL\")}</MenuItem>\r\n            <MenuItem value=\"1\">\r\n              {moment().subtract(1, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"2\">\r\n              {moment().subtract(2, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.date\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Forma de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_form\"\r\n          error={error_validation.status && !datosFactura.payment_form}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_form}\r\n            name=\"payment_form\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {formaPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_form\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Método de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_method\"\r\n          error={error_validation.status && !datosFactura.payment_method}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_method}\r\n            name=\"payment_method\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {metodoPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_method\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box>\r\n        <Typography>Uso de CFDi</Typography>\r\n        <FormControl\r\n          fullWidth\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          error={error_validation.status && !datosFactura.receiver.CfdiUse}\r\n        >\r\n          <Select\r\n            value={datosFactura.receiver.CfdiUse}\r\n            name=\"CfdiUse\"\r\n            onChange={obtenerUsoCfdi}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {usosCfdi.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.receiver.CfdiUse\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFactura({ open, setOpen, handleCloseFactura }) {\r\n  const {\r\n    setDatosFactura,\r\n    setCodigoPostal,\r\n    setProductos,\r\n    setVentaFactura,\r\n    setCPValido,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n    setCPValido(false);\r\n    setError({ status: false, message: \"\" });\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelar = () => {\r\n    limpiarCampos();\r\n    handleClose();\r\n    handleCloseFactura();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n      >\r\n        <DialogTitle>{\"¿Estás seguro de cancelar esta factura?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cerrar</Button>\r\n          <Button onClick={() => cancelar()} color=\"primary\">\r\n            Cancelar Factura\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport RegistroFactura from \"./RegistroFactura\";\r\nimport DetallesFactura from \"./TablaVenta/TablaDetallesFactura\";\r\nimport {\r\n  FacturacionCtx,\r\n  FacturacionProvider,\r\n} from \"../../../../context/Facturacion/facturacionCtx\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport RealizarFactura from \"./RealizarFactura\";\r\nimport CancelarFactura from \"./CancelarFactura\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function NuevaFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-2.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Generar nuevo CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        disableEscapeKeyDown\r\n        TransitionComponent={Transition}\r\n      >\r\n        <FacturacionProvider>\r\n          <DialogFacturaPrincipal handleClose={handleClose} />\r\n        </FacturacionProvider>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DialogFacturaPrincipal = ({ handleClose }) => {\r\n  const classes = useStyles();\r\n  const { venta_factura } = useContext(FacturacionCtx);\r\n  const [openCancel, setOpenCancel] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenCancel(true);\r\n  };\r\n\r\n  const cancelarCFDI = () => {\r\n    if (venta_factura !== null) {\r\n      handleClickOpen();\r\n    } else {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Generar nuevo CFDI\r\n          </Typography>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"inherit\"\r\n              onClick={() => cancelarCFDI()}\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <FacturaModalContent />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <RealizarFactura setAlert={setAlert} />\r\n      </DialogActions>\r\n      <CancelarFactura\r\n        open={openCancel}\r\n        setOpen={setOpenCancel}\r\n        handleCloseFactura={handleClose}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst FacturaModalContent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { seriesCfdi } = data.obtenerSeriesCdfi;\r\n\r\n  let serie_default = [];\r\n  serie_default = seriesCfdi.filter((serie) => serie.default === true);\r\n  if (!serie_default.length) {\r\n    serie_default = [{ folio: \"\", serie: \"\" }];\r\n    console.log(serie_default);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {!seriesCfdi.length ? (\r\n        <Alert severity=\"warning\">No tienes Series CFDI registradas</Alert>\r\n      ) : null}\r\n      <Box my={2}>\r\n        <RegistroFactura serie_default={serie_default} />\r\n      </Box>\r\n      <DetallesFactura />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Close, Done } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CREAR_SERIE } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroSeries({ refetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({ folio: \"\", serie: \"\", default: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearSerieCFDI] = useMutation(CREAR_SERIE);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({ folio: \"\", serie: \"\", default: false });\r\n  };\r\n\r\n  const obtenerDatosSeries = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPredeterminado = (e) => {\r\n    const { name, checked } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const guardarDatosBD = async () => {\r\n    if (!datos.folio || !datos.serie) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await crearSerieCFDI({\r\n        variables: {\r\n          input: {\r\n            serie: datos.serie,\r\n            folio: parseInt(datos.folio),\r\n            default: datos.default,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearSerieCFDI.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Add />}\r\n        >\r\n          Nueva serie\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Registrar nueva serie</DialogTitle>\r\n        <DialogContent>\r\n          <Box width=\"100%\">\r\n            <Typography>Serie para CDFI:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"serie\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>Folio Inicial:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"folio\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <FormControlLabel\r\n            style={{ marginTop: 8 }}\r\n            control={\r\n              <Checkbox\r\n                checked={datos.default}\r\n                onChange={obtenerPredeterminado}\r\n                name=\"default\"\r\n              />\r\n            }\r\n            label=\"Serie predeterminada\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            disabled={!datos.serie || !datos.folio || loading}\r\n            onClick={() => guardarDatosBD()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Backdrop, Checkbox, CircularProgress } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ACTUALIZAR_DEFAULT_SERIE,\r\n  ELIMINAR_SERIE,\r\n} from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"80vh\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function ListaSeriesCDFI({ obtenerSeriesCdfi, refetch }) {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { seriesCfdi } = obtenerSeriesCdfi;\r\n  const [modificarDefaultSerie] = useMutation(ACTUALIZAR_DEFAULT_SERIE);\r\n\r\n  const setPredeterminado = async (value, data) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await modificarDefaultSerie({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.modificarDefaultSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Backdrop className={classes.backdrop} open={loading}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Serie</TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Predeterminado</TableCell>\r\n              <TableCell padding=\"checkbox\">Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {seriesCfdi.map((row, index) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                  <TableCell>{row.serie}</TableCell>\r\n                  <TableCell>{row.folio}</TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <Checkbox\r\n                      checked={row.default}\r\n                      onChange={(e) => setPredeterminado(e.target.checked, row)}\r\n                      name=\"checkedA\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.eliminar === false ? (null) : (\r\n                      <ModalDeleteSerie\r\n                        row={row}\r\n                        refetch={refetch}\r\n                        setAlert={setAlert}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst ModalDeleteSerie = ({ row, refetch, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarSerie] = useMutation(ELIMINAR_SERIE);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const eliminarSerieBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarSerie({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton aria-label=\"delete\" size=\"small\" onClick={() => handleOpen()} disabled={row.default}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Se eliminara esta serie</DialogTitle>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            onClick={() => eliminarSerieBD()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { forwardRef, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Container,\r\n  Dialog,\r\n  makeStyles,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RegistroSeries from \"./RegistroSeries\";\r\nimport ListaSeriesCDFI from \"./ListaSeries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SeriesCDFI() {\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-1.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Registrar Series CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Seleccion de Series para CFDI\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button color=\"secondary\" variant=\"contained\" onClick={handleClickOpen} size=\"large\">\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ContentSeriesCFDI />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentSeriesCFDI = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerSeriesCdfi } = data;\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box my={2}>\r\n        {sesion.accesos.facturacion.registro_series_cdfi.agregar === false ? (null) : (\r\n          <RegistroSeries refetch={refetch} />\r\n        )}\r\n      </Box>\r\n      <ListaSeriesCDFI\r\n        obtenerSeriesCdfi={obtenerSeriesCdfi}\r\n        refetch={refetch}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosFacturaExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosFacturaExcel from \"./ExportarProductosFactura\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosFacturaExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosFactura\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaFacturas({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaFacturas\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarListaFacturasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-3.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          CFDis realizados\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              CFDis realizados\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nimport { Box, Container, Grid } from '@material-ui/core'\r\n\r\nimport NuevaFactura from './NuevaFactura/NuevaFactura';\r\nimport SeriesCDFI from './CFDISeries/SeriesCdfi';\r\n/* import SellosCDFI from './CFDISellos/SellosCdfi'; */\r\nimport FacturasRealizadas from './FacturasRealizadas/FacturasRealizadas';\r\n\r\nexport default function Facturacion() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Grid container spacing={2} justify=\"center\">\r\n                    {sesion.accesos.facturacion.generar_cdfi.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <NuevaFactura />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    {sesion.accesos.facturacion.cdfi_realizados.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <FacturasRealizadas />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    {/* \r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SellosCDFI />\r\n                        </Box>\r\n                    </Grid> */}\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <SeriesCDFI />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    \r\n                </Grid>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow, \r\n    CircularProgress,\r\n    Box,\r\n    Typography,\r\n\tIconButton,\r\n\tTablePagination\r\n} from '@material-ui/core/';\r\nimport { Delete } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\n\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theigth: '75%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: \"77vh\",\r\n\t\t'& ::-webkit-scrollbar': {\r\n\t\t\tdisplay: 'none'\r\n\t\t}\r\n  \t},\r\n  });\r\n\r\n  const columns = [\r\n\t{ id: 1, label: 'Nombre', minWidth: 100 },\r\n\t{ id: 2, label: 'Encargado', minWidth: 100 },\r\n\t{ id: 3, label: 'Sucursal', minWidth: 150 },\r\n\t{ id: 4, label: 'Calle', minWidth: 150 },\r\n\t{ id: 5, label: 'No. exterior', minWidth: 150 },\r\n\t{ id: 6, label: 'No. interior', minWidth: 100 },\r\n\t{ id: 7, label: 'Codigo postal', minWidth: 100 },\r\n\t{ id: 8, label: 'Colonia', minWidth: 100 },\r\n\t{ id: 9, label: 'Municipio', minWidth: 50, align: 'right' },\r\n\t{ id: 10, label: 'Localidad', minWidth: 50, align: 'right' },\r\n\t{ id: 11, label: 'Estado', minWidth: 50, align: 'right' },\r\n\t{ id: 12, label: 'Pais', minWidth: 50, align: 'right' },\r\n\t{ id: 13, label: 'Editar', minWidth: 50, align: 'right' },\r\n\t{ id: 14, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n];\r\n\r\nexport default function ListaAlmacen() {\r\n\r\n    const classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\tconst { update } = useContext(CrearAlmacenContext);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerAlmacenes } = data;\r\n\r\n    // const classes = useStyles();\r\n\r\n    return (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer component={Paper}  className={classes.container}>\r\n\t\t\t\t<Table className={classes.table}  aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerAlmacenes\r\n\t\t\t\t\t\t\t?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn <RowsRender key={index} datos={row} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t{/* \t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={obtenerAlmacenes.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/> */}\r\n\t\t</Paper>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.nombre_almacen}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{!datos.id_usuario_encargado ? \"Sin encargado\" : datos.id_usuario_encargado.nombre}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.id_sucursal.nombre_sucursal}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.calle ? datos.direccion.calle : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_ext ? datos.direccion.no_ext : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_int ? datos.direccion.no_int : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.codigo_postal ? datos.direccion.codigo_postal : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.colonia ? datos.direccion.colonia : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.municipio ? datos.direccion.municipio : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.localidad ? datos.direccion.localidad : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.estado ? datos.direccion.estado : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.pais ? datos.direccion.pais : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t{sesion.accesos.almacenes.almacen.editar === false ? (null):(\r\n\t\t\t\t\t<ContainerRegistroAlmacen accion=\"actualizar\" datos={datos} />\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t{sesion.accesos.almacenes.almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t{/* <TableCell width={50}>\r\n\t\t\t\t<ModalDetalles openDetalles={openDetalles} handleDetalles={handleDetalles} datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<CrearCliente tipo=\"CLIENTE\" accion=\"actualizar\" datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t<Delete />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell> */}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { forwardRef } from 'react';\r\nimport { AppBar, Toolbar, Typography, Slide, Button, Box, Dialog } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { FcPlus } from 'react-icons/fc';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport ListaAlmacen from './ListaAlmacen';\r\n\r\nimport { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroAlmacen() {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<AlmacenProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcPlus className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t{sesion.accesos.almacenes.almacen.agregar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<ContainerRegistroAlmacen accion=\"registrar\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<ListaAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</AlmacenProvider>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/almacen.31993015.svg\";","import React, { createContext, useState, useEffect, } from 'react';\r\n\r\nexport const TraspasosAlmacenContext = createContext();\r\n\r\nexport const TraspasosProvider = ({ children }) => {\r\n\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ productos, setProductos ] = useState([]);\r\n    const [ productosTo, setProductosTo ] = useState([]);\r\n     const [ productosEmpTo, setProductosEmpTo ] = useState([]);\r\n    const [ productosTras, setProductosTras ] = useState([]);\r\n    const [ dataExcel, setDataExcel ] = useState([]);\r\n\r\n\treturn (\r\n\t\t<TraspasosAlmacenContext.Provider value={\r\n            { \r\n                \r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                productos,\r\n                setProductos,\r\n                productosTras,\r\n                setProductosTras,\r\n                productosTo,\r\n                setProductosTo,\r\n                productosEmpTo, \r\n                setProductosEmpTo,\r\n                dataExcel,\r\n                setDataExcel\r\n                \r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</TraspasosAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit\r\n} from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    \r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  productoData,\r\n  datos,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  setNew_medidas\r\n}) {\r\n \r\n  const classes = useStyles();\r\n  //const { presentaciones, setPresentaciones } = useContext([]);\r\n //let mostrar_presentaciones = [];\r\n\r\n \r\n   let mostrar_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell padding=\"checkbox\">Precio</TableCell>\r\n                {/* <TableCell padding=\"checkbox\">Descuento</TableCell> */}\r\n                {/* {!onlyPrice ? (\r\n                  <Fragment>\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null} */}\r\n                <Fragment>\r\n                  <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                </Fragment>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datos.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    productoData={productoData}\r\n                    producto={producto}\r\n                    index={index}\r\n                    datos={datos}\r\n                    setNew_medidas={setNew_medidas} \r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  productoData,\r\n  producto,\r\n  index,\r\n  datos,\r\n  setNew_medidas,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  /* const { presentaciones, setPresentaciones, preciosP } = useContext(\r\n    RegProductoContext\r\n  ); */\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  //const copy_element_presentacion = {  };\r\n  //const copy_element_presentacion_descuento = { ...copy_presentaciones[index].descuento };\r\n  const copy_element_presentacion_descuento = { };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.medida.cantidad) {\r\n      copy_element_presentacion.medida.cantidad = 0;\r\n    }\r\n    if (!copy_producto.nuevaCantidad) {\r\n      copy_element_presentacion.nuevaCantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = copy_producto.precio;\r\n      //copy_element_presentacion.medida.precio = 0;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones); \r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.cantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(setNew_medidas); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.cantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"nuevaCantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.nuevaCantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = copy_producto.medida.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.nuevaCantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      \r\n        if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n    \r\n    let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = productoData.precios;\r\n    \r\n      let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n      let iva_precio = parseFloat((precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)).toFixed(2));\r\n      let ieps_precio = parseFloat((precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)).toFixed(2));\r\n      let PUCSI = productoData.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n      \r\n\r\n      let {descuento_activo, descuento} = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          (precio_con_descuento).toFixed(2)\r\n        );\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      }\r\n  \r\n      copy_element_presentacion.medida.precio_unidad.precio_venta = precio_venta;\r\n      copy_element_presentacion.medida.precio_unidad.precio_neto = precio_neto;\r\n      copy_element_presentacion.medida.precio_unidad.utilidad = utilidad;\r\n      copy_element_presentacion.medida.precio_unidad.iva_precio = iva_precio;\r\n      copy_element_presentacion.medida.precio_unidad.ieps_precio = ieps_precio;\r\n       \r\n    } \r\n  \r\n      else if (name === \"descuento\") {\r\n      /* if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      } */\r\n       copy_element_presentacion.medida.descuento = value;\r\n         \r\n    }\r\n    else {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.codigo_barras = value;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n   \r\n    setNew_medidas(copy_presentaciones); \r\n    //console.log(copy_presentaciones)\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.medida.codigo_barras = codigo_barras;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n /*  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.medida.descuento_activo = value;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); \r\n  }; */\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.medida.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.medida.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              datos.medidas_registradas && !copy_producto.medida.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {!datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.medida.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.medida._id ? (\r\n          <Chip label={copy_producto.medida.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.medida.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.medida.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n     \r\n\r\n         <Fragment>\r\n            <TableCell width={110}>\r\n              <Input\r\n                inputRef={textfield}\r\n                inputMode=\"numeric\"\r\n                type=\"number\"\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.precio}\r\n               \r\n                name=\"precio\"\r\n              />\r\n              \r\n            </TableCell>\r\n           {/*  <TableCell>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.descuento}\r\n                type=\"tel\"\r\n                name=\"descuento\"\r\n              />\r\n            </TableCell> */}\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.nuevaCantidad}\r\n                type=\"tel\"\r\n                name=\"nuevaCantidad\"\r\n              />\r\n            </TableCell>\r\n          </Fragment>\r\n     \r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Typography,\r\n  Tooltip,\r\n  Slide\r\n} from \"@material-ui/core\";\r\n\r\n\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentacionesNotOrigen from \"./TablePresentacionesNotOrigen\";\r\n\r\n\r\nimport CrearColorProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n    \r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\n\r\nexport default function ColoresTallas({\r\n  producto,\r\n  new_medidas,\r\n  setNew_medidas,\r\n  obtenerConsultasProducto,\r\n  refetch\r\n}) {\r\n\r\n    const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n    const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n    /* const medidas =\r\n    producto.datos_generales.tipo_producto === \"ROPA\" ? [...obtenerConsultasProducto.tallas] : [...obtenerConsultasProducto.calzados]; */ \r\n    const [onUpdate, setOnUpdate] = useState([]);\r\n //console.log(data.obtenerConsultasProducto)\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    \r\n    let copy_presentaciones =  [...new_medidas ];\r\n  \r\n    \r\n \r\n//const copy_presentaciones = [];\r\n    /* Queries */\r\n \r\n    copy_presentaciones.forEach((element) => {\r\n   //console.log('obtenerColoresSeleccinados', element)\r\n      if (element.medida.color._id) colors.push(element.medida.color);\r\n      if (element.medida.medida._id) medidas.push(element.medida.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n    //console.log('colores_existentes', colores_existentes, 'medidas_existentes', medidas_existentes)\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n   \r\n    \r\n  }, [new_medidas,setColoresSeleccionados, setMedidasSeleccionadas]);\r\n\r\n \r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n     <div>\r\n       <Box alignContent='center' m={5} >\r\n        <Grid container spacing={4}>\r\n         {/*  {!datos.medidas_registradas ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\">\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    \r\n                    {presentaciones.length > 0  ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n            \r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>\r\n                  {producto.datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              { (producto.datos_generales.tipo_producto === \"ROPA\") ? \r\n                  (obtenerConsultasProducto.tallas  !== undefined) ? \r\n                    <Grid container >\r\n                        {obtenerConsultasProducto.tallas.map((talla, index) => (\r\n                        <RenderTallas\r\n                     \r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                  :\r\n                  <div/>\r\n                :\r\n                   (obtenerConsultasProducto.calzados  !== undefined) ? \r\n                      <Grid container >\r\n                        {obtenerConsultasProducto.calzados.map((talla, index) => (\r\n                        <RenderTallas\r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                    :\r\n                    <div/>\r\n              }\r\n              \r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n            {\r\n            (obtenerConsultasProducto.colores !== undefined) ? \r\n              <Grid container>\r\n                {obtenerConsultasProducto.colores.map((color, index) => (\r\n                  <Colores\r\n                    producto={producto}\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    datos={new_medidas}\r\n                    setNew_medidas={setNew_medidas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            :\r\n            <div/>\r\n            }  \r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} />\r\n        <TablaPresentacionesNotOrigen\r\n          productoData = {producto}\r\n          datos={new_medidas}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n          setNew_medidas={setNew_medidas}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  producto,\r\n  talla,\r\n  coloresSeleccionados,\r\n  setMedidasSeleccionadas,\r\n  medidasSeleccionadas,\r\n  setNew_medidas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n /*  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext); */\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n   useEffect(() => {\r\n    if (datos) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [datos, seleccionarMedidas]); \r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n    //console.log('handleAddTallas', datos)\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n      /*     presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    //const array_medidad_finales = [];\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        presentacion_temp.push({\r\n          medida :{\r\n           \r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            //precios: producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n             precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: iva_precio,\r\n              ieps_precio: ieps_precio,\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            }\r\n          },\r\n         \r\n          nuevaCantidad: 0\r\n          \r\n        });\r\n        \r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n              medida :{\r\n              \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false\r\n              },\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n    \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n             medida :{\r\n              \r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: medidas_seleccionadas_temp[k],\r\n              color: array_medidad_finales[i].medida.color,\r\n              //precios:producto.precios,\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n               precio_unidad: array_medidad_finales[i].medida.precio_unidad\r\n            },\r\n           \r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            //console.log('YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL' , array_medidad_finales, producto_medida, producto_color)\r\n            presentacion_temp.push({\r\n              \r\n              medida :{\r\n                \r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                 //precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: iva_precio,\r\n                  ieps_precio: ieps_precio,\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false\r\n                },\r\n              },\r\n              nuevaCantidad: 0,\r\n              \r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n              \r\n              medida :{\r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: objeto_presentaciones_final.medida.color,\r\n                //precios:producto.precios,\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n                precio_unidad: objeto_presentaciones_final.precio_unidad\r\n              },\r\n              \r\n              nuevaCantidad: objeto_presentaciones_final.nuevaCantidad, \r\n\r\n          \r\n          });\r\n        }\r\n      }\r\n    }\r\n     \r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  producto,\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n  setNew_medidas\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n \r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n \r\n  useEffect(() => {\r\n    if (producto) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [producto, seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n         /*  new_medidas.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n         let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n        presentacion_temp.push({\r\n          medida :{\r\n             \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              }\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n             medida :{\r\n            \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              }\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            medida :{\r\n            \r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: array_medidad_finales[i].medida.medida,\r\n              color: coloresSeleccionados[k],\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              \r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n           \r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n               medida :{\r\n               \r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                // precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                //nuevo: true\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: iva_precio,\r\n                  ieps_precio: ieps_precio,\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                }\r\n              },\r\n              \r\n              nuevaCantidad: 0,\r\n              \r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida :{\r\n                \r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: { nombre: \"\", hex: \"\" },\r\n                // precios:producto.precios,\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n                precio_unidad: objeto_presentaciones_final.medida.precio_unidad\r\n              },\r\n              \r\n              nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item >\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected, color)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useContext,  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {  Chip,  Tooltip, Zoom , TextField} from '@material-ui/core';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\n/* const compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n}; */\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignSelf:'center',\r\n\t\twidth:'90%',\r\n\t\tpaddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n\t\t\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\t\r\n\t\tminWidth: '100%',\r\n\t\tmaxWidth: '100%',\r\n\t\t\r\n\t},\r\n\t\r\n\ttableRow: {\r\n    \r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n    cell:{\r\n       align:'center'     \r\n    },\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\n\r\n/* function stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nexport default function TablaPresentaciones({ producto, setOnUpdate, onUpdate, new_medidas, setNew_medidas }) {\r\n  const classes = useStyles();\r\n \r\n \r\n\r\n/*  \r\nconst handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n}; */\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:400}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                                <TableCell >Cantidad a traspasar</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tidProducto={producto._id}\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tmedida={item}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t\tnew_medidas={new_medidas}\r\n\t\t\t\t\t\t\t\t\t\tsetNew_medidas={setNew_medidas}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst RenderPresentacionesRows = ({ medida, index, setOnUpdate, onUpdate,new_medidas, setNew_medidas, idProducto}) => {\r\n\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst [ cantidad, setCantidad ] = useState(0);\r\n\tconst [ cantidadAnt, setCantidadAnt ] = useState(0);\r\n\tconst copy_medida = { ...medida };\r\n\tconst {productosTras} = useContext(TraspasosAlmacenContext);\r\n\t//const [productInTras, setProductInTras] =  useState(null);\r\n\t//let productInTras = null;\r\n\t//let productInTras = productosTras.find(element => element.product_selecteded._id === idProducto);\r\n\t//const productosTrasContext = productosTras;\r\n \r\n\tuseEffect(() => {\r\n\t\tproductosTras.forEach(producto => {\r\n\t\t\t//console.log(\"SELECTMEDIDAS\",producto)\r\n\r\n\t\tif(producto.product_selected._id === idProducto){\r\n\t\t\tlet new_medidasCopia = [];\r\n\t\t\tlet element = null;\r\n\t\t\r\n\t\t\tfor (const med in producto.new_medidas) {\r\n\t\t\t\tif (Object.hasOwnProperty.call(producto.new_medidas, med)) {\r\n\t\t\t\t\telement = producto.new_medidas[med];\r\n\t\t\t\t\tnew_medidasCopia.push(element)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(medida._id === element.medida._id){\r\n\t\t\t\t\t\tsetCantidad( element.nuevaCantidad);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetNew_medidas(producto.new_medidas);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\treturn () => {\r\n\t\t\t<div/>\r\n\t\t}\r\n\t}, [productosTras])\r\n\t\r\n\r\n\r\n\t\r\n\r\n\t/* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\t\r\n\tconst obtenerDatos = (value) => {\r\n\t\tlet cant = (cantidadAnt > 0) ? parseInt(value - cantidadAnt)   : value;\r\n\t\t//console.log(\"CANT\",cantidad)\r\n\r\n\t\tif(cant <= medida.cantidad){\r\n\t\t\tsetCantidad(value);\r\n\t\t\r\n\t\t\tsetNew_medidas({...new_medidas, [index] : {medida:medida, nuevaCantidad: parseInt(cant)}})\r\n\t\t}\r\n\t\t/* \r\n\t\tconst unidades = {cantidad:} \r\n\t\tcopy_producto.push() */\r\n\t\t//Tengo que obtener los datos que se van a enviar se debe agregar un elemento al array \r\n\t\t\r\n\t\t//setPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<TableRow  selected={!disabledInput} className={classes.tableRow} >\r\n\t\t\t<TableCell >\r\n\t\t\t\t{copy_medida.medida._id ? <Chip label={copy_medida.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell  style={{width:'20%'}}>\r\n\t\t\t\t{copy_medida.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_medida.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_medida.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t\r\n\t\t\r\n\t\t\t<TableCell className={classes.cell}  style={{width:'25%'}}>\r\n\t\t\t\t{medida.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t \r\n\t\t\t<TableCell  style={{width:'25%'}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tInputProps={{ inputProps: { min: 0 } }}\r\n\t\t\t\t\tinputMode=\"numeric\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tvalue={cantidad}\r\n\t\t\t\t\tonChange={(value) => obtenerDatos(value.target.value)}\r\n\t\t\t\t\tname=\"nuevaCantidad\"\r\n\t\t\t\t/>\r\n            </TableCell>    \r\n\t\t</TableRow>\r\n\t);\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Grid,Box, TextField } from '@material-ui/core';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TableSortLabel} from '@material-ui/core';\r\nimport {Toolbar, Typography, Paper, IconButton, Tooltip, Dialog, Checkbox ,Slide, Button, DialogTitle, DialogActions} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport TallasColoresTraspasos from './TallasColoresTraspasos';\r\nimport TableSelectMedidas from './TableSelectMedidas';\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_CONSULTAS } from \"../../gql/Catalogos/productos\";\r\n\r\n// function createData(name, cantidad, precio) {\r\n//   return { name, cantidad, precio };\r\n// }\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\n/* function getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nconst headCells = (add) => {\r\n\r\nlet hC = (add) ? \r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n\r\n  ]\r\n  :\r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n    { id: 'solo', numeric: true, disablePadding: false, label: ' ' },\r\n  ]\r\n\r\n  return hC;\r\n}\r\n;\r\nconst getUnidadMax  = (cantidad_existente_maxima,unidadMaxima) => {\r\n  //console.log('getCantidad',cantidad_nueva, cantidad_medida, accion)\r\n  const UNIDAD_MAXIMA = {\r\n    'Caja' :  'Cantidad existente en cajas: ' + cantidad_existente_maxima,\r\n    'Costal' : 'Cantidad existente en costales: ' + cantidad_existente_maxima,\r\n  }  \r\n  return UNIDAD_MAXIMA[unidadMaxima];\r\n}\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { classes,  order, orderBy, onRequestSort } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n  const headCellsNames =  headCells(props.add);\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n     \r\n        {headCellsNames.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align='left'\r\n            // padding={headCell.disablePadding ? 'none' : 'normal'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // product_selected: PropTypes.object.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n    maxWidth:650\r\n  },\r\n  input:{\r\n    width:180\r\n  }\r\n  ,\r\n  inputCantidad:{\r\n    width:120,\r\n    height:10\r\n  },\r\n  inputCantidadTable:{\r\n    width:'20%',\r\n    height:10\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          \r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    fontSize:16,\r\n    flex: '1',\r\n     display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n}));\r\n\r\nconst DialogTallas = (props) => {\r\n\r\n  const [new_medidas, setNew_medidas] = useState([]);\r\n  const {setProductosTras, productosTras} = useContext(TraspasosAlmacenContext);\r\n  \r\n\r\n  \r\n  const setProd = () =>{\r\n    let newMedidasCopy = new_medidas;\r\n    let cantidad_total = 0;\r\n    \r\n    \r\n\r\n     try {\r\n     \r\n       let prodSelect = null;\r\n    prodSelect = (props.almacenOrigen !== null) ? {\r\n      _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      medidas_producto: props.product_selected.medidas_producto,\r\n      inventario_general: props.product_selected.inventario_general,\r\n      unidades_de_venta: props.product_selected.unidades_de_venta,\r\n      precios: props.product_selected.precios,\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario\r\n    }\r\n    :\r\n\r\n    {\r\n       _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      precios: props.product_selected.precios,\r\n       medidas_producto: [],\r\n      inventario_general: [{unidad_maxima:''}],\r\n      unidades_de_venta: [],\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario \r\n    }; \r\n    let existe = false;\r\n    let copyProductosTras = productosTras;\r\n    let medidasTo =[];\r\n    //Count all new_medidas from array\r\n\r\n    for (let newMed in newMedidasCopy){ \r\n        cantidad_total +=  newMedidasCopy[newMed].nuevaCantidad;\r\n        //cantidad_total += newMedidasCopy[newMed];\r\n      medidasTo.push(newMedidasCopy[newMed])\r\n    } \r\n\r\n    if(cantidad_total > 0){\r\n    \r\n      if(copyProductosTras.length){//Check have data context\r\n        copyProductosTras.forEach(element => {\r\n          if(element.product_selected._id === props.product_selected._id){\r\n            existe = true;\r\n            ///VA A SUMAR EN LAS MEDIDAS LAS CANTIDADES\r\n            element.new_medidas = medidasTo;\r\n            element.cantidad_total = cantidad_total;\r\n            return;\r\n          }\r\n        });\r\n    \r\n        if(!existe){\r\n          //console.log(\"NO está este producto\", element.product_selected._id , props.product_selected._id );\r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      \r\n        } \r\n      }else{ \r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      }\r\n         \r\n      setProductosTras([...copyProductosTras])  \r\n      setNew_medidas([]);\r\n      close();\r\n    }  \r\n     } catch (error) {\r\n       //console.log('MANDH',error)\r\n     }\r\n    \r\n  }\r\n\r\n  const close= () => {\r\n    try {\r\n      props.setOpenTallas();\r\n      props.setproduct_selected(undefined)\r\n    } catch (error) {\r\n      //console.log(error)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    let new_medidasCopia = [];\r\n\r\n    productosTras.forEach(prod => {\r\n\t\t\r\n\t\tif(prod.product_selected._id ===  props.product_selected._id){\r\n\t\t\tlet element = null;\r\n        for (const med in prod.new_medidas) {\r\n          if (Object.hasOwnProperty.call(prod.new_medidas, med)) {\r\n            element = prod.new_medidas[med];\r\n            new_medidasCopia.push(element)\r\n          }\r\n        }\r\n      }\r\n    })  \r\n    setNew_medidas(new_medidasCopia);\r\n  }, [productosTras, props.product_selected._id])\r\n     \r\n\r\n  return(\r\n    <Dialog open={props.openTallas} TransitionComponent={Transition} fullWidth maxWidth={\"md\"} >\r\n        <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => close()} size=\"large\">\r\n                  <CloseIcon />\r\n                </Button>\r\n          </Box>\r\n      {\r\n        (props.almacenOrigen === null) ? \r\n          <div>\r\n            <TallasColoresTraspasos \r\n              obtenerConsultasProducto={props.obtenerConsultasProducto}\r\n              refetch={props.obtenerConsultasProducto.refetch}\r\n              producto={props.product_selected}\r\n              new_medidas={new_medidas} \r\n              setNew_medidas={setNew_medidas}\r\n            />\r\n          </div>\r\n        :\r\n        <div>\r\n          <TableSelectMedidas producto = {props.product_selected} new_medidas={new_medidas} setNew_medidas={setNew_medidas} add={props.add} />\r\n        </div> \r\n      }    \r\n      <Box display=\"flex\" justifyContent=\"flex-end\" m={1} mr={5}>\r\n        <Button  variant=\"contained\" color=\"primary\"style={{width:\"20%\"}} onClick={setProd} >\r\n          AGREGAR \r\n        </Button>\r\n      </Box>   \r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const [cantidadTo, setCantidadTo] = useState('');\r\n  const [openEnd, setOpenEnd] = useState(false);\r\n \r\n  \r\n  const { product_selected, setproduct_selected, tipoPieza, update } = props;\r\n   const {\r\n        setProductosTras,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n\r\n\r\nconst setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    props.setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === product_selected._id);\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n    if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(product_selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }else{\r\n      //Cuando sea el caso que no hay almacen de origen cambiar los datos que van a ir vacíos\r\n      //\r\n     \r\n      //console.log(props.product_selected.precios)\r\n      let prodSelect = {\r\n        _id: props.product_selected._id,\r\n        datos_generales:  props.product_selected.datos_generales,\r\n        inventario_general: props.product_selected.inventario_general,\r\n        unidades_de_venta: props.product_selected.unidades_de_venta,\r\n        medidas_producto: props.product_selected.medidas_producto,\r\n      \r\n        precios: props.product_selected.precios,\r\n        empresa:props.product_selected.empresa,\r\n        sucursal:props.product_selected.sucursal,\r\n        usuario: props.product_selected.usuario\r\n      } \r\n    //VERIFICA CANTIDAD MAXIMA\r\n    if(product_selected.inventario_general !== undefined){\r\n      if(cantidad_total <=  product_selected.inventario_general[0].cantidad_existente){\r\n      \r\n        let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n      }\r\n      else{\r\n        props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n      }\r\n    }else{\r\n       let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n    }\r\n    }\r\n    setproduct_selected(undefined);\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\nconst deletesItems =() =>{\r\n  try {\r\n  \r\n    setproduct_selected(undefined)\r\n    //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n    setProductosTras([]);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\n\r\nuseEffect(() => {\r\n  try {\r\n    if(props.add){\r\n      props.setOpenTallas(true)\r\n    }\r\n    setCantidadTo(props.cant)\r\n    \r\n  } catch (error) {\r\n    \r\n  }\r\n  \r\n}, [product_selected])   \r\n  \r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        setValueToTrans(parseFloat(e.target.value))\r\n      }\r\n    } catch (error) {\r\n      \r\n    }\r\n    \r\n  };        \r\n  function onlyNumbers(value){\r\n   \r\n    props.setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = (value !== '') ? parseFloat(value) : 0;\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          \r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              setCantidadTo((intValue !== 0) ? intValue : '');\r\n              //console.log(intValue)\r\n              return;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= product_selected.inventario_general[0].cantidad_existente){\r\n                 setCantidadTo((intValue !== 0) ? intValue : '');\r\n                return;\r\n              }\r\n              else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n            }\r\n          }else{\r\n          \r\n            setCantidadTo(intValue);\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n\r\n\r\n\r\n  const TipoPiezaComponent = () => {\r\n     try {\r\n     \r\n      const TIPO_PIEZA = {\r\n        'Pz' :  {unidad_maxima: null, unidad_minima: 'Pz' },\r\n        'Caja' : {unidad_maxima: 'Caja', unidad_minima: 'Pz' },\r\n        'Kg' : {unidad_maxima: null, unidad_minima: 'Kg' },\r\n        'Costal' : {unidad_maxima: 'Costal', unidad_minima: 'Kg' },\r\n        'Lt' : {unidad_maxima: null, unidad_minima: 'Lt' }\r\n      }\r\n      \r\n\r\n    \r\n      return (\r\n        <Box flexDirection={'row'} display=\"flex\">\r\n          <Box flexDirection={'row'}  >\r\n          <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima === null} />\r\n            <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_minima}</Typography> \r\n          </Box>\r\n    \r\n          \r\n        { \r\n          (TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima !== null) ? \r\n            <Box flexDirection={'row'} >\r\n              <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n              <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima} </Typography> \r\n            </Box>\r\n          :\r\n            <div/>\r\n          \r\n          }\r\n      \r\n        </Box>\r\n      );\r\n     } catch (error) {\r\n       \r\n     }\r\n    \r\n    \r\n  }\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: product_selected !== undefined && props.add,\r\n      })}\r\n    \r\n    >\r\n    <Grid container>\r\n      {product_selected !== undefined  && props.add ? (\r\n        <Box style={{width:'100%'}}>\r\n         \r\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle2\"  >\r\n            {product_selected.datos_generales.nombre_comercial} \r\n          </Typography>\r\n        </Box>\r\n      ) : (\r\n        <Box style={{width:'100%'}} flexDirection={'row'} display=\"flex\">\r\n          <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n            {props.title}\r\n          </Typography>\r\n          {\r\n            (productosTras.length > 0 && !props.add) ? \r\n            <Tooltip title=\"Eliminar todos\">\r\n              <IconButton aria-label=\"delete\" onClick={() => setOpenEnd(true)} >\r\n                  <DeleteIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            :\r\n            <div/>\r\n          }\r\n          \r\n         </Box>  \r\n      )}\r\n\r\n      {(product_selected !== undefined )? (\r\n      <Box > \r\n        {\r\n          (props.error.error) ?\r\n          <Typography color=\"inherit\">{props.error.mensaje}</Typography>\r\n          :\r\n          <div/>\r\n        } \r\n            {\r\n            (props.add ) ?\r\n                (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                  <Grid container  justifyContent=\"space-evenly\" ml={1}>\r\n                \r\n                      {\r\n                        (props.almacenOrigen === null)?\r\n                        \r\n                        <TipoPiezaComponent />\r\n                        :\r\n                        <Box flexDirection={'row'} display=\"flex\">\r\n                          <Box flexDirection={'row'}  >\r\n                            <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={props.product_selected.inventario_general[0].cantidad_existente_maxima === null} />\r\n                            <Typography color=\"primary\" style={{marginLeft:10}}>{props.product_selected.inventario_general[0].unidad_inventario}</Typography> \r\n                          </Box>\r\n                          {\r\n                            (props.product_selected.inventario_general[0].unidad_maxima !== null ) ?\r\n                              <Box flexDirection={'row'} >\r\n                                <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n                                <Typography color=\"primary\" style={{marginLeft:10}}>{\"\" + props.product_selected.inventario_general[0].unidad_maxima} </Typography> \r\n                              </Box>\r\n                            :\r\n                              <div/>\r\n                          }\r\n                        </Box>\r\n                      }\r\n                        \r\n                      <Box width=\"180px\" ml={2}>\r\n                    \r\n                        <Typography color=\"primary\">Cantidad</Typography>\r\n                        <TextField\r\n                            className={classes.inputCantidad}\r\n                            \r\n                            size=\"small\"\r\n                            name=\"cantidad\"\r\n                            variant=\"outlined\"\r\n                            type=\"number\"\r\n                            InputProps={{ inputProps: { min: 0 } }}\r\n                            value={cantidadTo}\r\n    \r\n                            onKeyPress={pressEnter}\r\n                            onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                        />\r\n                      \r\n                        <Tooltip title=\"Agregar\">\r\n                            <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                      {\r\n                        (props.almacenOrigen) ? \r\n                          <Box  width=\"150px\" >\r\n                            {\r\n                              (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ? \r\n                                <Typography color=\"primary\" style={{flexWrap: \"wrap\"}}>\r\n                                  {getUnidadMax(props.product_selected.inventario_general[0].cantidad_existente_maxima,props.product_selected.inventario_general[0].unidad_maxima)}\r\n                                  </Typography>\r\n                              :\r\n                              <div/>\r\n                            }\r\n                          </Box>\r\n                        :\r\n                        <div/>\r\n                      }\r\n                    </Grid>\r\n                   \r\n                  :    \r\n                  <div>\r\n                    <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                  </div> \r\n                :\r\n                <div>\r\n                   <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                </div>\r\n                /* <Grid width={'100%'} container>\r\n                  { (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                    <div>\r\n                     \r\n                      <Typography color=\"primary\">Cantidad</Typography>\r\n                      <TextField\r\n                          className={classes.inputCantidad}\r\n                          size=\"small\"\r\n                          name=\"cantidad\"\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          InputProps={{ inputProps: { min: 0 } }}\r\n                          value={cantidadTo}\r\n                          onChange={(value) => onlyNumbers(value.target.value)}\r\n                          \r\n                      />\r\n                    \r\n                      <Tooltip title=\"Agregar\">\r\n                          <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                              <AddIcon />\r\n                          </IconButton>\r\n                      </Tooltip>\r\n                    </div>\r\n                    :\r\n                    \r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                     \r\n                     \r\n                  }\r\n                  <Box mt={3} >\r\n                  { (product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                     <Tooltip title=\"Editar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => editItem()} >\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Tooltip> \r\n                    :\r\n                    <div/>\r\n                    }\r\n                    <Tooltip title=\"Eliminar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => deleteItem()} >\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                  </Box> \r\n                </Grid> */\r\n            }\r\n                \r\n         \r\n        </Box>\r\n      ) : (\r\n        <div/>\r\n      )}\r\n      </Grid>\r\n      <Dialog open={openEnd} onClose={() => setOpenEnd(false)}>\r\n            <DialogTitle>{'¿Está seguro de realizar esta acción?'}</DialogTitle>\r\n            <DialogActions>\r\n                <Button onClick={() => setOpenEnd(false)} color=\"primary\">\r\n                    Cancelar\r\n                </Button>\r\n                <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => deletesItems()}>\r\n                    Eliminar\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//   numSelected: PropTypes.number.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n   \r\n    marginLeft:theme.spacing(1),\r\n    marginRight:theme.spacing(1),\r\n\r\n\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 600,\r\n    maxWidth:600\r\n   \r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [ openTallas, setOpenTallas] = useState(false);\r\n  const [cant, setCant] = useState(0);\r\n   const [error, setError] = useState({error:false, mensaje:''});\r\n  //const [data, setData] = useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n  const [tipoPieza, setTipoPieza] = useState({piezas: true, cajas: false});\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\r\n\r\n  const update = () => {\r\n   setTipoPieza({...tipoPieza, piezas: !tipoPieza.piezas, cajas: !tipoPieza.cajas})\r\n }\r\n \r\n  const {\r\n        productosTras, productosTo,   productosEmpTo, setProductosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n  const obtenerConsultasProducto = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  \r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      //const newSelecteds = data.map((n) => n.name);\r\n      setSelected(event.target.checked);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n  const data = (!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo  ; \r\n\r\n  const handleClick = (event, elemento, cant) => {\r\n  setError({error:false, mensaje:''})\r\n    if(elemento.datos_generales.tipo_producto === 'OTROS'){\r\n      let haveCant= 0;\r\n      productosTras.forEach(producto => {\r\n        if(producto.product_selected._id === elemento._id){\r\n      \t  \r\n          haveCant = producto.cantidad_total;\t\t\r\n        }\r\n      });\r\n      \r\n        setCant(props.add ? haveCant : cant)\r\n    }\r\n\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === elemento._id;\r\n     \r\n      // let newSelected = [];\r\n      if(selectedIndex){\r\n          setSelected(undefined);\r\n      }else{\r\n          setSelected(elemento);\r\n      } \r\n    }else{\r\n      //console.log(elemento)\r\n      setSelected(elemento);\r\n    }\r\n   \r\n    \r\n  };\r\n    \r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  const deleteItem =(row) =>{\r\n    try {\r\n      \r\n      let prodSet =  [] ;\r\n      \r\n    \r\n      if(productosTras.length){\r\n        prodSet = productosTras;\r\n      }\r\n      \r\n    \r\n      //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n      setProductosTras(prodSet.filter(item => item.product_selected._id !== row._id));\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n  const setValueToTrans =(cantidad_total, rowSelected) =>{\r\n  try {\r\n    //setError({error:false, mensaje:''})\r\n   \r\n    \r\n   let element = productosTras.find(element => element.product_selected._id === rowSelected._id);\r\n   if(cantidad_total === 0 || cantidad_total === '') {element.cantidad_total = 0;return;};\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n  if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total + element.cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(rowSelected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\n  \r\n  function onlyNumbers(value, rowSelected){\r\n   \r\n    \r\n   setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      if(value === '') {setValueToTrans('', rowSelected);return;}\r\n      const intValue = parseFloat(value);\r\n\r\n      try {\r\n         \r\n        if(props.almacenOrigen !== null){\r\n            if( !tipoPieza.piezas  ){\r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n                setValueToTrans(intValue, rowSelected)\r\n                //console.log(intValue)\r\n                return;\r\n              } \r\n            }else{\r\n            \r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente){\r\n                \r\n                setValueToTrans(intValue, rowSelected)\r\n                return;\r\n              }\r\n            }\r\n           \r\n        }else{\r\n           \r\n           \r\n            setValueToTrans(intValue, rowSelected)\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    \r\n  }\r\n  const isSelected = (id) => {\r\n    //return selected.indexOf(name) !== -1;\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === id;\r\n   \r\n      // let newSelected = [];\r\n      if(!selectedIndex){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      } \r\n    }else{\r\n      return false;\r\n    }\r\n    \r\n  } \r\n\r\n  const editItem =(prod_sel) =>{\r\n  try {\r\n  \r\n  \r\n    if(prod_sel.datos_generales.tipo_producto !== 'OTROS') {\r\n      setOpenTallas(true);\r\n      //console.log(props)\r\n    }\r\n   \r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n       \r\n        <EnhancedTableToolbar \r\n          product_selected={selected} \r\n          setproduct_selected={setSelected} \r\n          openTallas={openTallas}\r\n          setOpenTallas={setOpenTallas}\r\n          error={error}\r\n          setError={setError}\r\n          title={props.title} add={props.add} almacenOrigen={props.almacenOrigen} productosTras ={productosTras} tipoPieza={tipoPieza} update={update} cant={cant} obtenerConsultasProducto={(obtenerConsultasProducto.data) ? obtenerConsultasProducto.data.obtenerConsultasProducto :[]}refetch={( obtenerConsultasProducto.refetch ) ? obtenerConsultasProducto.refetch : null}  />\r\n        <TableContainer style={{height:'50vh'}}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={'small'}\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              product_selected={selected}\r\n              add = {props.add}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              handleSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {data\r\n                .map((row, index) => {\r\n                \r\n                  const isItemSelected = isSelected((props.add === true) ? row._id: row.product_selected._id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                \r\n                  if(props.add){\r\n                    \r\n                    if(props.almacenOrigen) {\r\n                 \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={(props.add === true) ? row._id : row.product_selected._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        \r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> {row.inventario_general[0].cantidad_existente }  {row.inventario_general[0].unidad_inventario} </TableCell>\r\n\r\n                      </TableRow>\r\n                    );\r\n                    }else{\r\n                      return(\r\n                        <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> N/A</TableCell>\r\n                      </TableRow>\r\n                      );\r\n                    }\r\n                  }else{\r\n                    \r\n                    return(\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, row.product_selected, row.cantidad_total)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={(props.add === true) ? row._id : row.product_selected._id}\r\n                      selected={isItemSelected}\r\n                      \r\n                    >\r\n                      <TableCell  id={labelId} component=\"th\" width={100}>\r\n                        {(row.product_selected.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.product_selected.datos_generales.codigo_barras}\r\n                      </TableCell>\r\n                      <TableCell id={labelId}  width={200}>\r\n                        {row.product_selected.datos_generales.nombre_comercial}\r\n                      </TableCell>\r\n                      <TableCell align=\"left\" > {row.product_selected.datos_generales.tipo_producto}</TableCell>\r\n                      {\r\n                        (row.product_selected.datos_generales.tipo_producto  === \"OTROS\" ) ? \r\n                          <TableCell align=\"left\"  width={20} > \r\n                            <TextField\r\n                              size=\"small\"\r\n                              name=\"cantidad\"\r\n                              variant=\"outlined\"\r\n                              type=\"number\"\r\n                              InputProps={{ inputProps: { min: 0 } }}\r\n                              value={row.cantidad_total} \r\n                              onChange={(value) => onlyNumbers(value.target.value, row.product_selected)}\r\n                            \r\n                            />\r\n                          </TableCell> \r\n                          :\r\n                          <TableCell align=\"left\"> {row.cantidad_total}</TableCell> \r\n\r\n                      }\r\n\r\n                      <TableCell align=\"left\" width={10}>\r\n                        <Box flexDirection={'row'} display=\"flex\" style={{width:75}}>\r\n                          { (row.product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                          <Tooltip title=\"Editar\">\r\n                              <IconButton aria-label=\"edit\" onClick={() => editItem(row.product_selected)} >\r\n                                  <EditIcon />\r\n                              </IconButton>\r\n                          </Tooltip> \r\n                          :\r\n                          <div/>\r\n                          } \r\n                          <Tooltip title=\"Eliminar\">\r\n                            <IconButton aria-label=\"delete\" onClick={() => deleteItem(row.product_selected)} >\r\n                                <DeleteIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </Box>\r\n                      </TableCell> \r\n                    </TableRow>\r\n                    )\r\n                  }\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      {/*   <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          labelRowsPerPage={\"\"}\r\n          // onRowsPerPageChange={handleChangeRowsPerPage}\r\n        /> */}\r\n       \r\n      </Paper>\r\n      \r\n    </div>\r\n  );\r\n}","import React, { forwardRef, useEffect, useContext, useState,useCallback } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Slide,\r\n         Button, Box, Dialog, Grid, DialogActions, TextField,Divider,\r\n         InputLabel, Select, Input, MenuItem, FormControl, useTheme, OutlinedInput, InputAdornment,\r\n         Stepper, Step, StepLabel, DialogTitle } from '@material-ui/core';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useDebounce } from 'use-debounce';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport {Close} from '@material-ui/icons';\r\n//import ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { FcAdvance } from 'react-icons/fc';\r\nimport almacenIcon from '../../../../icons/almacen.svg';\r\nimport TableSelectProducts from '../../../../components/Traspasos/TableSelectProducts';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN} from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { OBTENER_ALMACENES, REALIZAR_TRASPASO, OBTENER_CATEGORIAS, OBTENER_PRODUCTOS_EMPRESA} from '../../../../gql/Almacenes/Almacen';\r\n\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\n\r\n\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 50\r\n\t},\r\n    imagen: {\r\n        width: 50\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    subtitle: {\r\n\t\tmarginLeft: '10px',\r\n\t\twidth:'50%',\r\n     \r\n\t},\r\n    boxUpData:{\r\n        height: 80,\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n    selected2:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    selected:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    input:{\r\n\t\twidth:'100%'\t\r\n\t},\r\n    inputBox:{\r\n\t\tmargin:20,\r\n        marginTop:5,\r\n        marginBottom:10,\r\n       \r\n\t},\r\n    button:{\r\n\t\tmargin: theme.spacing(3),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(0)\r\n\t},\r\n    boxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n        minHeight: 20,\r\n      \r\n    },\r\n    centerControl:{\r\n        marginTop:10,\r\n      \r\n    },\r\n  \r\n}));\r\n\r\n\r\nfunction getStyles(almacen, almacenName, theme) {\r\n  return {\r\n    fontWeight:\r\n      almacenName.indexOf(almacen) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\n\r\nconst transportes = [\r\n    'Barco',\r\n    'Moto',\r\n    'Carro',\r\n    'Camioneta'\r\n];\r\n\r\n/* function createData(name, cantidad, precio, unidad) {\r\n    return { name, cantidad, precio, unidad };\r\n}  */\r\n\r\n\r\nconst steps = ['Datos traspaso', 'Seleccionar productos'];\r\n\r\nexport default function Traspasos(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const {\r\n        setProductos,\r\n        setProductosTras,\r\n        setProductosTo,\r\n        setProductosEmpTo,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ open, setOpen ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n    const [ filtro, setFiltro ] = useState('');\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\r\n    const [ haveConcepto, setHaveConcepto ] = useState(false);\r\n    const [ conceptoTraspaso, setConceptoTraspaso ] = useState(null);\r\n    const [ isAlmacenOrigen, setIsAlmacenOrigen ] = useState(false);\r\n    const [ isAlmacenDestino, setIsAlmacenDestino ] = useState(false);\r\n\r\n    const [ almacenOrigen, setAlmacenOrigen ] = useState(null);\r\n    const [ almacenDestino, setAlmacenDestino ] = useState(null);\r\n    const [almacenesDestino, setAlmacenesDestino] =useState([])\r\n    const [ transporte, setTransporte ] = useState('');\r\n    const [ placas, setPlacas ] = useState('');\r\n    const [ nombreQuien, setNombreQuien ] = useState('');\r\n  \r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [skipped, setSkipped] = useState(new Set());\r\n    const [openEnd, setOpenEnd] = useState(false);\r\n \r\n    const [ CrearTraspaso ] = useMutation(REALIZAR_TRASPASO); \r\n\r\n    let conceptos= [];\r\n    let almacenes = [];\r\n    \r\n    \r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t */\r\n\tconst dataConceptos = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t},\r\n         fetchPolicy: \"network-only\"\r\n\t});\r\n   \r\n    const categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n        fetchPolicy: \"network-only\"\r\n\t});\r\n\r\n    const productosQuery = useQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id, \r\n          sucursal: sesion.sucursal._id,\r\n          filtro: value,\r\n          almacen: (almacenOrigen ) ? almacenOrigen._id : \"\",\r\n          existencias: true\r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n\r\n    const productosEmpresaQuery = useQuery(\r\n    OBTENER_PRODUCTOS_EMPRESA,\r\n    {\r\n        variables: { \r\n          empresa: sesion.empresa._id, \r\n          filtro: value,\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n     }\r\n  );\r\n    \r\n    /* const obtenerAlmacenes= useCallback( () =>{\r\n        try {\r\n            console.log('obtenerAlmacenes')\r\n            \r\n        } catch (error) {\r\n           console.log(error)\r\n        }   \r\n    },[]); */ \r\n\r\n    const obtenerProductosAlmacen = useCallback(async() =>{\r\n        try {\r\n           productosQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosQuery]);\r\n    \r\n   \r\n    \r\n    useEffect(() => {\r\n        if(almacenOrigen){\r\n          \r\n            setAlmacenesDestino(queryObtenerAlmacenes.data.obtenerAlmacenes.filter(element => element._id !== almacenOrigen._id));\r\n            obtenerProductosAlmacen();\r\n        }\r\n    }, [almacenOrigen ])\r\n\r\n\r\n    const obtenerProductosEmpresa = useCallback(async () =>{\r\n        try {\r\n             productosEmpresaQuery.refetch();\r\n        } catch (error) {\r\n            console.log('errorObtenerProductosEmpresa',error)\r\n        }   \r\n      },[productosEmpresaQuery]);\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n        try {\r\n            if(conceptoTraspaso!== null){\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    obtenerProductosEmpresa();\r\n                } else{\r\n                    obtenerProductosAlmacen();\r\n                }      \r\n            }\r\n        } catch (error) {\r\n            console.log('conceptoTraspaso', error)\r\n        }\r\n       \r\n    }, [conceptoTraspaso])    \r\n\r\n /*    useEffect(() => {\r\n\t\t\tdataConceptos.refetch();\r\n\t},[ dataConceptos ]);  */\r\n\r\n     useEffect(() => {\r\n        \r\n        if(conceptoTraspaso !== null){\r\n            if(conceptoTraspaso.destino === 'N/A'){\r\n                if(almacenOrigen !== null){\r\n                    setHaveConcepto(true)\r\n                }else{\r\n                     setHaveConcepto(false)\r\n                }\r\n            \r\n            }else{\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    if(almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }else{\r\n                    if(almacenOrigen !== null && almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }\r\n                \r\n            }    \r\n        }\r\n       \r\n\t},[conceptoTraspaso, almacenOrigen, almacenDestino ]); \r\n\r\n    \r\n\r\n     \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\t if(productosEmpresaQuery.data){\r\n             \r\n                //setProductos(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n                //console.log(productosEmpresaQuery.data)\r\n                setProductosEmpTo(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n            }\r\n    },[ productosEmpresaQuery.data, setProductosEmpTo ]);  \r\n\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if(productosQuery.data ){\r\n                setProductos(productosQuery.data.obtenerProductos);\r\n                setProductosTo(productosQuery.data.obtenerProductos)\r\n                return;\r\n            }    \r\n\t\t},\r\n\t\t[ productosQuery, setProductos, setProductosTo ]\r\n\t); \r\n    \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ categoriasQuery ]\r\n\t); \r\n  \r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n     const handleChange = (event) => {\r\n        setAlmacenOrigen(event.target.value);\r\n       /*   productosQuery.refetch({\r\n            variables: { \r\n            \r\n                almacen: event.target.value._id,\r\n                existencias: true\r\n            },\r\n        });  */\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n    const handleChangeDestino = (event) => {\r\n        //console.log(event)\r\n        setAlmacenDestino(event.target.value);\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n     const handleChangeConcepto = (event) => {\r\n        try {\r\n            \r\n            let concepto = event.target.value;  \r\n            setAlmacenesDestino([]);\r\n            almacenes = [];\r\n            setAlmacenOrigen(null); \r\n            setAlmacenDestino(null);\r\n            if(concepto.origen === 'N/A'){\r\n                setAlmacenesDestino( queryObtenerAlmacenes.data.obtenerAlmacenes)\r\n            }else{\r\n                setAlmacenesDestino([])\r\n            }\r\n          \r\n            setIsAlmacenOrigen((concepto.origen === 'N/A') ? false:true);\r\n            setIsAlmacenDestino((concepto.destino === 'N/A') ? false:true);\r\n           \r\n            setConceptoTraspaso(concepto);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    \r\n      const handleChangeTransporte = (event) => {\r\n        setTransporte(event.target.value);\r\n    };\r\n\r\n    const isStepOptional = (step) => {\r\n        return step === 1;\r\n    };\r\n\r\n    const isStepSkipped = (step) => {\r\n        return skipped.has(step);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        /* if(conceptoTraspaso === null ) {setAlert({message:'No es posible continuar sin seleccionar un concepto.', status: 'error', open: true });  return}\r\n        if( isAlmacenOrigen && almacenOrigen === null)  {setAlert({message:'No es posible continuar sin seleccionar un almacén origen.', status: 'error', open: true });  return }   \r\n        if(isAlmacenDestino && almacenDestino === null) { setAlert({message:'No es posible continuar sin seleccionar un almacén destino.', status: 'error', open: true }); return}    */\r\n        \r\n        let newSkipped = skipped;\r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped(newSkipped);\r\n        \r\n    };\r\n\r\n    const handleBack = () => {\r\n        \r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    /* const handleSkip = () => {\r\n        if (!isStepOptional(activeStep)) {\r\n        // You probably want to guard against something like this,\r\n        // it should never occur unless someone's actively trying to break something.\r\n        throw new Error(\"You can't skip a step that isn't optional.\");\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped((prevSkipped) => {\r\n        const newSkipped = new Set(prevSkipped.values());\r\n        newSkipped.add(activeStep);\r\n        return newSkipped;\r\n        });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setActiveStep(0);\r\n    }; */\r\n\r\n\r\n   /*  if(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}  */\r\n   \r\n    if(dataConceptos.data){\r\n\t\tconceptos = dataConceptos.data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n\r\n   \r\n   \r\n   /*  const filtrarProductos = (event) => {\r\n        event.preventDefault();\r\n        if(almacenOrigen !== ''){\r\n            productosQuery.refetch();\r\n        }else{\r\n            productosEmpresaQuery.refetch();\r\n        }\r\n    }; */\r\n\r\n    const handleModal = () => {\r\n        setOpenEnd(!openEnd)\r\n    }\r\n\r\n    const traspasar = async () => {\r\n        try {\r\n         \r\n            if(productosTras.length){\r\n               setOpenEnd(false)\r\n               setLoading(true)\r\n                //let productTrasTo = productosTras;\r\n             const input =  {\r\n                variables: {\r\n                    input: {\r\n                        concepto_traspaso: {\r\n                            _id: conceptoTraspaso._id, \r\n                            nombre_concepto: conceptoTraspaso.nombre_concepto,\r\n                            destino: conceptoTraspaso.destino,\r\n                            origen: conceptoTraspaso.origen,\r\n                            editable: conceptoTraspaso.editable,\r\n                        },\r\n                        almacen_origen: (almacenOrigen !== null) ? almacenOrigen._id : '',\r\n                        almacen_destino: (almacenDestino !== null) ? almacenDestino._id : '',\r\n                        productos: productosTras,\r\n                        datos_transporte :{\r\n                            transporte: transporte,\r\n                            placas: placas,\r\n                            nombre_encargado: nombreQuien\r\n                        },\r\n                        sucursalOrigen: sesion.sucursal._id,\r\n                        sucursalDestino: sesion.sucursal._id,\r\n                        fecha_registro: moment().locale(\"es-mx\").format()\r\n                    },\r\n                    usuario: sesion._id,\r\n                    empresa: sesion.empresa._id\r\n                }\r\n            }  \r\n            \r\n             const traspaso =    await CrearTraspaso(input) \r\n           \r\n                //console.log(traspaso)\r\n                setAlert({message: traspaso.data.crearTraspaso.message, status: traspaso.data.crearTraspaso.resp, open: true })\r\n                if(traspaso.data.crearTraspaso.resp !== 'error'){\r\n                    setProductosTras([]);\r\n                    setAlmacenOrigen(null);\r\n                    setAlmacenDestino(null);\r\n                    setConceptoTraspaso(null);\r\n                    handleBack();\r\n                }\r\n                \r\n            }else{\r\n                \r\n                setAlert({message:'No es posible realizar un traspaso sin agregar productos.', status: 'error', open: true })\r\n           \r\n            }\r\n            \r\n           \r\n            props.refetch();\r\n            setLoading(false);\r\n        } catch (error) {\r\n             setLoading(false);\r\n             setOpenEnd(false)\r\n             console.log(error)\r\n           if(error.networkError !== undefined){\r\n\t\t\t  console.log('traspaso networkError', error.networkError.result)\r\n            }else if(error.graphQLErrors!== undefined){\r\n                console.log('traspaso graphQLErrors', error.graphQLErrors)\r\n            }else{\r\n             \r\n              \r\n            }\r\n             setAlert({message: 'Ocurrió un error al realizar el traspaso...', status: 'error', open: true })\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <>\r\n        <Box sx={{ width: '100%',  }}>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcAdvance className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n                    <Grid container spacing={10} justify=\"center\" >\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen}/>\r\n                                    </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen} />\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    Traspasos\r\n                </Box>\r\n\t\t\t\t\t\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition} >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <AppBar className={classes.appBar}>\r\n               \r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Traspasos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n                            <Box m={1}>\r\n                                <Button  variant=\"contained\" color=\"secondary\"onClick={handleClose}>\r\n                                    <Close style={{ fontSize: 30}}/>\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Box style={{ width: '50%',alignSelf:'center', alignContent:'center', alignItems:'center' }}>\r\n                  \r\n                    <Stepper activeStep={activeStep}>\r\n                        {steps.map((label, index) => {\r\n                        const stepProps = {};\r\n                        const labelProps = {};\r\n                    \r\n                        if (isStepSkipped(index)) {\r\n                            stepProps.completed = false;\r\n                        }\r\n                        return (\r\n                            <Step key={label} {...stepProps}>\r\n                            <StepLabel {...labelProps}>{label}</StepLabel>\r\n                            </Step>\r\n                        );\r\n                        })}\r\n                    </Stepper>\r\n                </Box>\r\n                <Box >\r\n                {\r\n                (activeStep === 0) ? \r\n                    <Grid container  justify=\"center\" >\r\n                        <Grid item lg={6}>\r\n                            <Box>\r\n                                <Box >\r\n                                    <Typography className={classes.subtitle}  >\r\n                                        <b>Datos traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Box mt={2} style={{display: 'flex', width:'100%', justifyContent: 'center'}}>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Usuario</b></Typography>\r\n                                            <Typography> {sesion.nombre} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Sucursal</b></Typography>\r\n                                            <Typography> {sesion.sucursal.nombre_sucursal} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Fecha</b></Typography>\r\n                                            <Typography> \t{moment().format('MM/DD/YYYY')} </Typography>\r\n                                        </Box>\r\n                                    \r\n                                    </Box>\r\n                                    <Box m={2}   style={{width:'100%', justifyContent: 'center'}}>\r\n                                        <Box style={{width:'100%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto traspaso</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(conceptoTraspaso) ? conceptoTraspaso : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={concepto._id} value={concepto} >\r\n                                                        {concepto.nombre_concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                    {\r\n                                        (conceptoTraspaso !== null) ? \r\n                                        <Box style={{display: 'flex'}}>\r\n                                            {   \r\n                                                \r\n                                                (isAlmacenOrigen) ?\r\n                                                <Box> \r\n                                                    <FormControl className={classes.formControl}>\r\n                                                        <InputLabel id=\"almacen-origen-label\">Almacén origen</InputLabel>\r\n                                                        <Select\r\n                                                        labelId=\"almacen-origen-label\"\r\n                                                        id=\"almacen-origen-name\"\r\n                                                        value={(almacenOrigen) ? almacenOrigen : \"\"}\r\n                                                        onChange={handleChange}\r\n                                                        input={<Input />}\r\n                                                        MenuProps={MenuProps}\r\n                                                        >\r\n                                                        {almacenes.map((almacen) => (\r\n                                                            <MenuItem key={almacen._id} value={almacen}>\r\n                                                                {almacen.nombre_almacen}\r\n                                                            </MenuItem>\r\n                                                        ))}\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Box>\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                            \r\n                                            {\r\n                                                (isAlmacenDestino) ? \r\n                                                <FormControl className={classes.formControl}>\r\n                                                    <InputLabel id=\"almacen-destino-label\">Almacén destino</InputLabel>\r\n                                                    <Select\r\n                                                    labelId=\"almacen-destino-label\"\r\n                                                    id=\"almacen-destino-name\"\r\n                                                    value={(almacenDestino) ? almacenDestino : \"\"}\r\n\r\n                                                    onChange={handleChangeDestino}\r\n                                                    input={<Input />}\r\n                                                    MenuProps={MenuProps}\r\n                                                    >\r\n                                                    {almacenesDestino.map((almacen) => (\r\n                                                        <MenuItem key={almacen._id} value={almacen} >\r\n                                                        {almacen.nombre_almacen}\r\n                                                        </MenuItem>\r\n                                                    ))}\r\n                                                    </Select>\r\n                                                </FormControl>\r\n\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                           \r\n                                        </Box> \r\n                                        :\r\n                                        <></>\r\n                                        \r\n                                    } \r\n                                    \r\n                                    </Box>   \r\n                                </Box>      \r\n                                <Box className={classes.centerControl}   style={{width:'100%'}} >\r\n                                    <Typography className={classes.subtitle}>\r\n                                        <b>Datos transporte traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Grid  justify=\"center\" >\r\n                                        \r\n                                        <FormControl className={classes.formControl} style={{marginTop:15}}>\r\n                                            \r\n                                            <InputLabel id=\"transporte-label\">Transporte</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"transporte-label\"\r\n                                            id=\"transporte-name\"\r\n                                            value={transporte}\r\n                                            onChange={handleChangeTransporte}\r\n                                            input={<Input />}\r\n                                            \r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {transportes.map((trans) => (\r\n                                                <MenuItem key={trans} value={trans} style={getStyles(trans, transporte, theme)}>\r\n                                                {trans}\r\n                                                </MenuItem>\r\n                                            ))}\r\n                                            </Select>\r\n                                            \r\n                                        </FormControl>\r\n                                        <Box  justify=\"center\" >\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Placas\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"placas\"\r\n                                                variant=\"outlined\"\r\n                                                value={placas.toUpperCase()}\r\n                                                \r\n                                                onChange={(e) => setPlacas(e.target.value)}\r\n                                            />\r\n                                        \r\n                                        </FormControl>\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Nombre de encargado de transporte\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"nombreQuien\"\r\n                                                variant=\"outlined\"\r\n                                                value={nombreQuien}\r\n                                                \r\n                                                onChange={(e) => setNombreQuien(e.target.value)}\r\n                                            />\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                    </Grid>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                :\r\n                    <Box>\r\n                        <Box ml={1} style={{width:'100%'}}  >\r\n                            <Box ml={2}>\r\n                            <Typography className={classes.subtitle}>\r\n                                <b>Buscar producto</b>\r\n                            </Typography>\r\n                            <Box  style={{ width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n                            </Box>\r\n                            <Box  mt={2}>\r\n                                <Grid container spacing={2} style={{width:'100%'}}>\r\n                                    <Grid item md={6}>\r\n                                    {\r\n                                        (isAlmacenOrigen) ? \r\n                                    \r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={almacenOrigen} />\r\n                                        :\r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={null} />   \r\n                                    }\r\n                                    </Grid>\r\n                                    <Grid item md={6}>\r\n                                        <TableSelectProducts title='Productos a traspasar' add={false} almacenOrigen={almacenOrigen}  />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                }\r\n                \r\n                   <DialogActions style={{justifyContent:'center'}}>\r\n                    <Box sx={{ flexDirection: 'row',alignSelf: 'center',  width: '15%',display: 'flex', pt: 2 }} >\r\n                            <Button\r\n                            color=\"inherit\"\r\n                            disabled={activeStep === 0}\r\n                            onClick={handleBack}\r\n                            sx={{ mr: 1 }}\r\n                            >\r\n                            Atrás\r\n                            </Button>\r\n                            <Box style={{ flex: '1 1 auto' }} />\r\n                            {/*     {isStepOptional(activeStep) && (\r\n                                <Button color=\"inherit\" onClick={handleSkip} sx={{ mr: 1 }}>\r\n                                    Skip\r\n                                </Button>\r\n                                )} */}\r\n                            \r\n                                <Button disabled={!haveConcepto} onClick={() => (activeStep < steps.length -1) ? handleNext() : handleModal()}>\r\n                                    {activeStep < steps.length -1   ? 'Siguiente' : 'Terminar'}\r\n                                </Button>\r\n                        \r\n                        </Box>\r\n                   </DialogActions>    \r\n                </Box>\r\n                <Dialog open={openEnd} onClose={handleModal}>\r\n                    <DialogTitle>{'¿Está seguro de realizar este traspaso?'}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => handleModal()} color=\"primary\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => traspasar()}>\r\n                            Traspasar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n               \r\n\t        <SnackBarMessages alert={alert} setAlert={setAlert} />  \r\n            \r\n\t\t\t</Dialog>\r\n            \r\n               \r\n        </Box>\r\n        </>\r\n    )\r\n}","import React, {useEffect, useState, useContext} from 'react';\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\t\r\n\t\tmaxHeight: '76vh'\r\n\t}\r\n});\r\n\r\nconst Rowrow = (rowProps) => {\r\n\tconst {dataExcel, setDataExcel} = useContext(TraspasosAlmacenContext);\t\r\n\tconst [dataExcelHere, setDataExcelHere] = useState([]);\t\r\n\tconst [arrayCantidades , setArrayCantidades] = useState([]);\r\n\tconst [row, setRow] = useState({'codigo_barras' : rowProps.producto.datos_generales.codigo_barras, \"nombre_comercial\":rowProps.producto.datos_generales.nombre_comercial, style: {\r\n\t\t\t\t\tfont: { sz: '12' },\r\n\t\t\t\t\talignment: { wrapText: true, horizontal: 'center', vertical: 'top' },\r\n\t\t\t\t\tborder: { bottom: { style: 'thin', color: { rgb: '000000' } } \r\n\t\t\t\t}}});\r\n\tconst [total , setTotal] = useState(0)\r\n\tconst [unidad_minima , setUnidad_Minima] = useState('')\r\n\t\t\r\n\t\t\r\n\t\tuseEffect(() => {\r\n\t\t\tlet tot= 0;\r\n\t\t\tlet r = row;\r\n\t\t\tlet datExc = dataExcel;\r\n\t\t\trowProps.obtenerAlmacenes.forEach((almacenColumna) => {\r\n\t\t\t\tconst existencias =\trowProps.producto.existencia_almacenes.filter((existencia) => existencia._id.almacen._id === almacenColumna._id)\r\n\r\n\t\t\t\tif(existencias.length > 0){\r\n\t\t\t\t\tarrayCantidades.push(existencias[0].cantidad_existente )\r\n\t\t\t\t\tsetUnidad_Minima((existencias[0].unidad_inventario !== null) ? existencias[0].unidad_inventario: 'pz');\r\n\t\t\t\t\tr = {...r, [almacenColumna._id]: existencias[0].cantidad_existente + \" \" + unidad_minima };\r\n\t\t\t\t\ttot +=  existencias[0].cantidad_existente;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse{\r\n\t\t\t\t\tarrayCantidades.push(0);\r\n\t\t\t\t\tr = {...r, [almacenColumna._id]:0   };\t\r\n\t\t\t\t}\r\n\t\t\t});\t \r\n\t\t\tr = {...r, total:tot + \" \" + unidad_minima };\r\n\r\n\t\t\tsetTotal(tot)\r\n\t\t\tsetRow(r);\r\n\t\t\tdatExc.push(r);\r\n\t\t\t//console.log( 'DATA EXCEL LISTA PROductos' , datExc)\r\n\t\t\t\r\n\t\t\r\n\t\t \t\r\n\t\t\tif(rowProps.index === rowProps.productosLength -1){\r\n\t\t\t\t\r\n\t\t\t\tsetDataExcelHere(datExc);\r\n\t\t\t} \r\n\t\t\r\n\t\t}, []);\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\r\n\t\t\tif(dataExcelHere){\r\n\t\t\t\tsetDataExcel(dataExcelHere);\r\n\t\t\t}\r\n\t\t\r\n\t\t}, [dataExcelHere])\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={rowProps.producto._id} >\r\n\t\t\t\t<TableCell style={{minWidth:60}} >{rowProps.producto.datos_generales.codigo_barras}</TableCell>\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t<TableCell style={{minWidth:170}} >{rowProps.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t{/* <TableCell style={{textAlign: 'center',}} >{(producto.datos_generales.receta_farmacia) ? \"SI\" : \"NO\"}</TableCell> */}\r\n\t\t\t\t{ \r\n\t\t\t\t\tarrayCantidades.map((cantidad, index) => {\r\n\t\t\t\t\t\treturn(<TableCell key={index} onClick={() => console.log('TABLECELL', index)} style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black',fontSize:17, textAlign:'center',minWidth:60 }}>{cantidad + \" \" + unidad_minima}</TableCell>)\t\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}\r\n\t\t\t\t<TableCell  style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black', fontSize:18,fontWeight:'bold', textAlign:'center' ,minWidth:60}}>{total + \" \" + unidad_minima }</TableCell>\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\nexport default function ListaAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t//const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t// const almacenesColumnas = [];\r\n\t// const productosRows = [];\r\n\t\t/* Queries */\r\n\t/* const { loading, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t */\r\n   \r\n\t\r\n\r\n\t/* useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); */\r\n\t\r\n\r\n\t\r\n\t\r\n/* \tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t}; */\r\n\r\n\t/* if (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\tif (error) {\r\n\t\tconsole.log(error)\r\n\t\treturn <ErrorPage error={error} />;\r\n\t} */\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\r\n\t\t<Paper className={classes.root}>\r\n\t\t\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size={'small'} aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{props.columns.map((column, index) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{textAlign:(index > 1)? 'center': 'left', minWidth: column.minWidth, width: column.minWidth}}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\t\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{props.productos.map((row, index) => {\r\n\t\t\t\t\t\t    let key =  index;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Rowrow producto={row} index={key} key={index} productosLength={props.productos.length} dataExcel ={props.dataExcel} setDataExcel={props.setDataExcel} obtenerAlmacenes={props.obtenerAlmacenes} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t{/* <TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={props.productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\tlabelRowsPerPage={\"Renglones por página\"}\r\n\t\t\t/> */}\r\n\t\t\t\r\n\t\t</Paper>\r\n\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\n\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Grid, Button } from '@material-ui/core';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\n\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\n//Este componente requiere el ArrayData, ArrayColumn, fileName\r\nfunction ExportarExcel(props) {\r\n\treturn (\r\n\t\t<Fragment>\r\n            <Grid>\r\n                <Grid item>\r\n                <ExcelFile\r\n\t\t\t\t\t\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\"startIcon={<DescriptionOutlinedIcon />}>\r\n\t\t\t\t\t\t\tExportar a Excel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilename={props.fileName}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ExcelSheet data={props.data} name={props.fileName}>\r\n                        {props.columnName.map((element) => {\r\n                            return(\r\n                                <ExcelColumn key={element.id} label={element.label} value={element.id} />\r\n                            )\r\n                        }\r\n                        )}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ExcelSheet>\r\n\t\t\t\t</ExcelFile>\r\n                </Grid>\r\n            </Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(ExportarExcel);","import React, { forwardRef, useContext, useState, useEffect } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton,FormControl,\r\nSlide, Button, Box, Dialog, OutlinedInput, InputAdornment,CircularProgress} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { useQuery } from '@apollo/client';\r\nimport {Close} from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos'\r\nimport ExportarExcel from '../../../../components/ExportExcel'\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\nimport { useDebounce } from 'use-debounce';\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_CATEGORIAS,OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\tboxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n    },\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\timagen: {\r\n\t\twidth: 100\r\n\t},\r\n\tinputBox:{\r\n\t\tmargin:20\r\n\t},\r\n\tbutton:{\r\n\t\tmargin: theme.spacing(3),\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nexport default function InventariosPorAlmacen(props) {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\t\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\t\r\n\t\r\n\r\n    return (\r\n        <div>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src={'https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg'} alt=\"icono almacen\" className={classes.imagen}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tInventario por almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<InventarioPorAlmacen open={open} productosAlmacenQuery={props.productosAlmacenQuery}  handleClose={handleClose} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst InventarioPorAlmacen = (props) =>{\r\n\tconst classes = useStyles();\r\n\tconst [ loading, setLoading ] = useState(true);\r\n\t  \r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\r\n\tconst {dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n\t\r\n\tconst [ productos, setProductos] = \tuseState([]);\r\n\tconst [ obtenerAlmacenes, setObtenerAlmacenes] = \tuseState([]);\r\n\t// const [ almacen, setAlmacen ] = React.useState('');\r\n\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t\r\n\t// let tipos = ['ROPA','CALZADO','OTROS'];\r\n\tconst [columns, setColumns] = useState([])\r\n\t\r\n\t \t/* Queries */\r\n\t//const {  data, error, refetch } = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n/* \tconst [getQuery, { data, error }] = useLazyQuery(OBTENER_PRODUCTOS_ALMACEN, {\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t}); */\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: ''\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\t  */\r\n\r\n\r\n\tconst categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\r\n\t\r\n\tconst queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\t\r\n\t\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.update, queryObtenerAlmacenes ]\r\n\t);\r\n\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\ttry {\r\n\t\t\t\tif(props.open){\r\n\t\t\t\t\tsetDataExcel([])\r\n\t\t\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t\t\t\tprops.productosAlmacenQuery.refetch({\r\n\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\tfiltro: value});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t},\r\n\t\t[props.open ]\r\n\t);\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\ttry {\r\n\t\t\t\tif(props.productosAlmacenQuery.data){\r\n\t\t\t\t//setDataExcel([]);\r\n\t\t\t\tsetProductos(props.productosAlmacenQuery.data.obtenerProductosAlmacenes);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\r\n\t\t},\r\n\t\t[ props.productosAlmacenQuery.data]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif(queryObtenerAlmacenes.data){\r\n\t\t\t\tconst columnsEffect = [\r\n\t\t\t\t\t{ id: 'codigo_barras', label: 'Código de barras', minWidth: 60 , widthPx: 160, },\r\n\t\t\t\t\t{ id: 'nombre_comercial', label: 'Nombre comercial', minWidth: 170, widthPx: 160, }\r\n\t\t\t\t];\r\n\t\t\t\tlet almace = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n\t\t\t\talmace.forEach(element => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tcolumnsEffect.push({ id: element._id, label: element.nombre_almacen, minWidth: 60, widthPx: 160,})\r\n\t\t\t\t}); \r\n\t\t\t\tcolumnsEffect.push({ id: 'total', label: 'Total existencias', minWidth: 60, widthPx: 160,})\r\n\t\t\t\tsetObtenerAlmacenes(almace);\r\n\t\t\t\tsetColumns(columnsEffect);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.data]\r\n\t);\r\n\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\t \r\n\treturn(\r\n\t\t<Dialog fullScreen open={props.open} onClose={props.handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Inventario por almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => {setLoading(true);props.handleClose()}} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={props.handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Box ml={4} >\r\n\t\t\t\t\t\t<Typography className={classes.subtitle}>\r\n                            <b>Buscar producto</b>\r\n                        </Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={4} display=\"flex\" >\r\n                            \r\n                            <Box style={{  width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n\t\t\t\t\t\t\t{(productos.length > 0) ?\r\n\t\t\t\t\t\t\t\t<Box ml={4} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\" alignItems=\"center\" >\r\n\t\t\t\t\t\t\t\t\t<Box  >\r\n\t\t\t\t\t\t\t\t\t\t<ExportarExcel fileName=\"Inventarios almacen\" data={dataExcel} columnName={columns} />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Box>\t\t\t\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t(loading && productos.length === 0) ?\r\n\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t: \r\n\t\t\t\t\t\t(props.productosAlmacenQuery.error || categoriasQuery.error) ?\r\n\t\t\t\t\t\t\t<ErrorPage error={props.productosAlmacenQuery.error} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Box mx={5} mt={1} >\r\n\r\n\t\t\t\t\t\t\t<ListaProductos productos={productos} obtenerAlmacenes={obtenerAlmacenes} columns={columns} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t</Dialog>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport RegistroAlmacen from './RegistroAlmacen/RegistroAlmacen';\r\nimport Traspasos from './Traspasos/Traspasos';\r\nimport { useQuery } from '@apollo/client';\r\nimport InventariosPorAlmacen from './InventarioPorAlmacen/InventariosPorAlmacen';\r\nimport { TraspasosProvider } from \"../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_PRODUCTOS_ALMACEN } from '../../../gql/Almacenes/Almacen';\r\nexport default function Almacenes() {\r\n\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: ''\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\" >\r\n\t\t\t{sesion.accesos.almacenes.almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<RegistroAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.traspasos.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<Traspasos refetch={productosAlmacenQuery.refetch} />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.inventario_almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<InventariosPorAlmacen productosAlmacenQuery={productosAlmacenQuery}  />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport 'moment'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\nimport moment from 'moment';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'movimiento', label: 'Movimieto', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '70%',\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\n\r\nexport default function TablaHistorialFiltrado({loading, historial}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historial.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tdatos={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({datos}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tconst classes = useStyles();\r\n\tconsole.log(datos)\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.hora_moviento.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.tipo_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.nombre_usuario_creador}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.horario_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.concepto}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha Movimiento: </b> {moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Hora Movimiento: </b> {datos.hora_moviento.completa}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario: </b> {datos.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario en Turno: </b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Tipo Movimiento: </b> {datos.tipo_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography> \r\n\t\t\t\t\t\t\t\t\t<b>Concepto: </b> {datos.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Caja: </b> {datos.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${datos.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import React, {  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, Slide, Box, Button, Toolbar, Typography, FormControl, MenuItem, Select, Grid, TextField} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CAJA} from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport TablaHistorialFiltrado from './TablaHistorialFiltrado';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1,\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst tipos = [\r\n    'TODOS',\r\n    'VENTA',\r\n    'DEPOSITO',\r\n    'RETIRO',\r\n    'TRANSFERENCIA'\r\n];\r\n\r\nexport default function HistorialCaja(props) {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ datosBuscar, setDatosBuscar ] = useState([]);\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\tconst [ value ] = useDebounce(datosBuscar, 500);\r\n\r\n\tlet obtenerHistorialCaja = [];\r\n\r\n    /* Queries */\r\n\tconst {  data, refetch, loading } = useQuery(OBTENER_HISTORIAL_CAJA, {\r\n\t\tvariables: {\r\n            id_Caja: props.cajaSelected._id,\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                tipo_movimiento: datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento :  \"\",\r\n                fecha_incio: datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\",\r\n                fecha_fin: datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\"\r\n            },\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (datosHistorial) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < datosHistorial.length; i++) {\r\n            arrayExcel = { \r\n                fecha: datosHistorial[i].fecha_movimiento.completa,\r\n                hora_movimiento: datosHistorial[i].hora_moviento.completa,\r\n                nombre: datosHistorial[i].nombre_usuario_creador,\r\n                horario_turno: datosHistorial[i].horario_turno,\r\n                tipo_movimiento: datosHistorial[i].tipo_movimiento,\r\n                concepto: datosHistorial[i].concepto,\r\n                caja: datosHistorial[i].numero_caja,\r\n                monto_efectivo: datosHistorial[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: datosHistorial[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: datosHistorial[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: datosHistorial[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: datosHistorial[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: datosHistorial[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: datosHistorial[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: datosHistorial[i].montos_en_caja.monto_vales_despensa.monto , \r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n\tif(data){\r\n\t\tobtenerHistorialCaja = data.obtenerHistorialCaja;\r\n        agruparDatos(obtenerHistorialCaja);\r\n\t}\r\n\r\n    const handleDatos = (e) => {\r\n        setDatosBuscar({...datosBuscar, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n\r\n    const limpiarFiltros = () => {\r\n        setDatosBuscar([]);\r\n    }\r\n\r\n    return (\r\n        <Dialog fullScreen open={props.open} onClose={()=>{props.handleClose();}} TransitionComponent={Transition}>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        Caja {props.cajaSelected.numero_caja}\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={ () => {props.handleClose()} } size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Grid container>\r\n                <ExcelFile\r\n                    element={\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            aria-label=\"Guardar\"\r\n                            className={classes.iconSave}\r\n                        >\r\n                            <SaveIcon className={classes.margin} />\r\n                            Exportar\r\n                        </Button>   \r\n                    }\r\n                    filename={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n                >\r\n                    <ExcelSheet data={datosExcel} name={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}>\r\n                        <ExcelColumn label='Usuario' value='nombre' />\r\n                        <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                        <ExcelColumn label='Hora Movimiento' value='hora_movimiento' />\r\n                        <ExcelColumn label='Horario en Turno' value='horario_turno' />\r\n                        <ExcelColumn label='Concepto' value='concepto' />\r\n                        <ExcelColumn label='Tipo Movimiento' value='tipo_movimiento' />\r\n                        <ExcelColumn label='No. de Caja' value='caja' />\r\n                        <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                        <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                        <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                        <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                        <ExcelColumn label='M. en monedero' value='monto_monedero' />\r\n                        <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                        <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                        <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                    </ExcelSheet>\r\n                </ExcelFile>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Movimiento\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={handleDatos}\r\n                                    value={datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento : \"\"}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {tipos.map((tipo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={tipo}>{tipo}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\t\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha inicio:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_incio\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha fin:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_fin\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }} >\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Usuario:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                    value={datosBuscar.usuario ? datosBuscar.usuario : \"\"}\r\n                                    onChange={handleDatos}\r\n                                />\r\n                            </Box>\r\n                        </form>\r\n                        <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                            <Box mt={2}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarFiltros}\r\n                                >\r\n                                    Limpiar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <TablaHistorialFiltrado loading={loading} historial={obtenerHistorialCaja} />\r\n                </Grid>  \r\n            </Grid>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport {Badge, Box} from '@material-ui/core';\r\n \r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n      color :({props})=> props.color,\r\n      background: ({props})=> props.color,\r\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n      '&::after': {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        borderRadius: '50%',\r\n        animation: '$ripple 1.2s infinite ease-in-out',\r\n        border: '1px solid currentColor',\r\n        content: '\"\"',\r\n      },\r\n    },\r\n    '@keyframes ripple': {\r\n      '0%': {\r\n        transform: 'scale(.8)',\r\n        opacity: 1,\r\n      },\r\n      '100%': {\r\n        transform: 'scale(2.4)',\r\n        opacity: 0,\r\n      },\r\n    }\r\n  }))(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth:230,\r\n    maxWidth: 230,\r\n    margin:5,\r\n    \r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    color: red[500],\r\n  },\r\n  textActive:{\r\n    position:'relative',\r\n    bottom:8\r\n  }\r\n}));\r\n\r\nexport default function CardCaja(props) {\r\n    const styleProps={\r\n      color: (props.activa)  ? '#44b700' : 'red'\r\n    }\r\n    const classes = useStyles();\r\n \r\n    return (\r\n        <div>\r\n            <Card className={classes.root}>\r\n                    <CardHeader\r\n                      color=\"secondary\"\r\n                        avatar={\r\n                            <StyledBadge\r\n                              overlap=\"circle\"\r\n                              props={styleProps}\r\n                              anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                              }}\r\n                              variant=\"dot\"\r\n                              badgeContent=\"\"\r\n                            >\r\n                            <Avatar alt=\"Cajero X\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </StyledBadge>\r\n                        }\r\n                    />\r\n                    <Box m={1} mb={2}>\r\n                    <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\" >\r\n                            Caja {props.name}\r\n                    </Typography>\r\n                    </Box>\r\n                    {/* <CardActions disableSpacing  >\r\n                        <Typography style={{fontWeight: 'bold'}} color=\"textSecondary\" component=\"p\">\r\n                           Total en caja: \r\n                        </Typography>\r\n                        <Typography style={{margin: '0px 10px', color: 'green'}} variant=\"h6\" color=\"textSecondary\" component=\"p\">\r\n                           $ {parseFloat(props.cantidad_efectivo_actual)}\r\n                        </Typography>\r\n                    </CardActions> */}\r\n                </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Grid  } from '@material-ui/core';\r\nimport HistorialCaja from './HistorialCaja';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport CardCaja from './CardCaja';\r\n\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n    const [ loading, setLoading ] = React.useState(false);\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n    const [ openHistorial, setOpenHistorial ] = React.useState(false);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ cajaSelected, setCajaSelected ] = React.useState({name:''});\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    let obtenerCajasSucursal = []; \r\n\r\n\t\r\n    /* Queries */\r\n    const {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n    const handleClickOpenHistorial = () => {\r\n\t\tsetOpenHistorial(true);\r\n\t};\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n    const handleCloseHistorial = () => {\r\n\t\tsetOpenHistorial(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container spacing={1} justify=\"center\" >\r\n\t\t\t\t\t{obtenerCajasSucursal?.map((caja, index) => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<Button key={index} onClick={()=>{handleClickOpenHistorial(); setCajaSelected(caja)}}>\r\n\t\t\t\t\t\t\t\t<CardCaja name={caja.numero_caja} activa={caja.activa} cantidad_efectivo_actual={caja.cantidad_efectivo_actual} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\t\r\n\t\t\t\t\t})} \r\n\t\t\t\t</Grid> \t\r\n\t\t\t</Dialog>\r\n            <HistorialCaja open={openHistorial} fetchCajas={refetch} handleClickOpen={handleClickOpenHistorial} cajaSelected={cajaSelected} handleClose={handleCloseHistorial} obtenerCajasSucursal={obtenerCajasSucursal} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n\t{ id: 'caja', label: 'Caja', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: 500,\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TablaTurnosFiltrados({loading, turnos}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{turnos.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tturno={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({turno}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst classes = useStyles();\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={turno._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{turno.fecha_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_salida.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.concepto}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.numero_caja}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación del turno\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario</b>: {turno.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Numero de caja</b>: {turno.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Moviento de turno</b>: {turno.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario de turno</b>: {turno.horario_en_turno}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Entrada de turno: </b>{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Salida de turno: </b>{turno.hora_salida.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Comentarios</b>: {turno.comentarios}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha de movimiento</b>: {turno.fecha_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${turno.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRAR_TURNOS = gql`\r\n\tmutation crearRegistroDeTurno( $input: AbrirCerrarTurnoInput, $activa: Boolean) {\r\n\t\tcrearRegistroDeTurno(input: $input, activa: $activa) {\r\n\t\t\thorario_en_turno\r\n\t\t\ttoken_turno_user\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_TURNOS = gql`\r\n\tquery obtenerFiltroTurnos($input: HistorialTurnosInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerFiltroTurnos(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\thorario_en_turno\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_movimiento\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ReactExport from 'react-export-excel'; //LIBRERIA EXCEL\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaTurnosFiltrados from './TablaTurnosFiltrados';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { OBTENER_HISTORIAL_TURNOS } from '../../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { useDebounce } from 'use-debounce';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nmoment.locale('es');\r\nconst ExcelFile = ReactExport.ExcelFile; //ARCHIVO DE EXCEL\r\nconst ExcelSheet = ReactExport.ExcelSheet; //HOJA DE EXCEL\r\nconst ExcelColumn = ReactExport.ExcelColumn; //COLUMNA DE EXCEL\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesTurnosUsuarios() {\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg'\r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n                    </Box>\r\n\t\t\t\t\tTurnos de Usuarios\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                            Reportes Turnos de Usuarios\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display=\"flex\">\r\n                            <Box p={1}>\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon style={{fontSize: 30}} />\r\n                                </Button>\r\n                            </Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <FiltroTablaTurnos />\r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n};\r\n\r\nconst FiltroTablaTurnos = () => {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [filtros, setFiltros] = useState([]);\r\n    const [ datosExcel, setDatosExcel] = useState([]);\r\n\tconst [value] = useDebounce(filtros, 500);\r\n    let historialTurnos = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  } = useQuery(OBTENER_HISTORIAL_TURNOS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                horario_en_turno: filtros.horario_turno ? filtros.horario_turno : \"\",\r\n                usuario_en_turno: value.usuario_en_turno ? value.usuario_en_turno : \"\",\r\n                numero_caja: filtros.numero_caja ? filtros.numero_caja : \"\",\r\n                fechaInicio: filtros.fechaInicio ? filtros.fechaInicio : \"\",\r\n                fechaFin: filtros.fechaFin ? filtros.fechaFin : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    const obtenerDatos = (e) => {  \r\n        setFiltros({...filtros, [e.target.name]: e.target.value.toString()});\r\n    };\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (turnos) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < turnos.length; i++) {\r\n            arrayExcel = { \r\n                fecha: turnos[i].fecha_movimiento,\r\n                nombre: turnos[i].usuario_en_turno.nombre,\r\n                numero_usuario: turnos[i].usuario_en_turno.numero_usuario,\r\n                fecha_entrada: turnos[i].fecha_entrada.completa,\r\n                fecha_salida: turnos[i].fecha_salida.completa,\r\n                hora_entrada: turnos[i].hora_entrada.completa,\r\n                hora_salida: turnos[i].hora_salida.completa,\r\n                horario_en_turno: turnos[i].horario_en_turno,\r\n                concepto: turnos[i].concepto,\r\n                caja: turnos[i].numero_caja,\r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n    if(data && cajas.loading  === false){\r\n\t\thistorialTurnos = data.obtenerFiltroTurnos;\r\n        agruparDatos(historialTurnos);\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarFiltros = () => {\r\n        setFiltros([]);\r\n    };\r\n    \r\n    return(\r\n        <>\r\n        <Grid container>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename=\"Reporte de Turnos Usuarios\"\r\n            >\r\n                <ExcelSheet data={datosExcel} name={'Reporte de Turnos Usuarios'}>\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                    <ExcelColumn label='Fecha Entrada' value='fecha_entrada' />\r\n                    <ExcelColumn label='Fecha Salida' value='fecha_salida' />\r\n                    <ExcelColumn label='Hora Entrada' value='hora_entrada' />\r\n                    <ExcelColumn label='Hora Salida' value='hora_salida' />\r\n                    <ExcelColumn label='Horario en Turno' value='horario_en_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha inicio:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaInicio\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaInicio ? filtros.fechaInicio : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha fin:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaFin\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaFin ? filtros.fechaFin : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Usuario:\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario_en_turno\"\r\n                                value={filtros.usuario_en_turno ? filtros.usuario_en_turno : \"\"}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                            />\r\n                        </Box>\r\n                    </form>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Caja:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"numero_caja\"\r\n                                onChange={obtenerDatos}\r\n                                value={filtros.numero_caja ? filtros.numero_caja : \"\"}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {\r\n                                    cajas.data?.obtenerCajasSucursal?.map((caja) =>{\r\n                                        return(\r\n                                            <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                Caja {caja.numero_caja}\r\n                                            </MenuItem>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Horario de Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_turno\"\r\n                                value={filtros.horario_turno ? filtros.horario_turno : \"\"}\r\n                                onChange={obtenerDatos}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                        <Box mt={2}>\r\n                            <Button\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                onClick={limpiarFiltros}\r\n                            >\r\n                                Limpiar\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid> \r\n           \r\n        </Grid>    \r\n        <Grid item lg={12}>\r\n            <TablaTurnosFiltrados loading={loading} turnos={historialTurnos} />\r\n        </Grid>  \r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Nombre producto\", minWidth: 160 },\r\n  { label: \"Fecha de Compra\", minWidth: 160 },\r\n  { label: \"Almacen\", minWidth: 100 },\r\n  { label: \"Proveedor\", minWidth: 100 },\r\n  { label: \"M. pago\", minWidth: 90 },\r\n  { label: \"F. pago\", minWidth: 100 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaComprasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                const result = formaPago.filter(\r\n                  (res) => res.Value === data.forma_pago\r\n                );\r\n                let forma_pago = result[0];\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>{data.almacen.nombre_almacen}</TableCell>\r\n                    <TableCell>{data.proveedor.nombre_cliente}</TableCell>\r\n                    <TableCell>\r\n                      {data.compra_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${forma_pago.Value}-${forma_pago.Name}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${data.cantidad_total} - ${data.unidad}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`%${data.descuento_porcentaje} - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_REPORTE_COMPRAS = gql`\r\n  query obtenerProductoMovimientos(\r\n    $empresa: ID!\r\n    $sucursal: ID\r\n    $input: ObteneReportesCompras\r\n  ) {\r\n    obtenerProductoMovimientos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      id_compra\r\n      id_traspaso\r\n      id_producto\r\n      id_proveedor\r\n      id_almacen\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      proveedor {\r\n        _id\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      producto {\r\n        almacen_inicial {\r\n          almacen\r\n          cantidad\r\n          fecha_de_expiracion\r\n          id_almacen\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          granel\r\n          litros\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          cantidad\r\n          codigo_barras\r\n          id_producto\r\n          precio\r\n          unidad\r\n          unidad_principal\r\n          _id\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n      }\r\n      concepto\r\n      cantidad\r\n      cantidad_regalo\r\n      unidad_regalo\r\n      cantidad_total\r\n      iva_total\r\n      ieps_total\r\n      costo\r\n      descuento_porcentaje\r\n      descuento_precio\r\n      compra_credito\r\n      forma_pago\r\n      impuestos\r\n      mantener_precio\r\n      subtotal\r\n      total\r\n      medida {\r\n        id_medida\r\n        medida\r\n        tipo\r\n      }\r\n      color {\r\n        id_color\r\n        color\r\n        hex\r\n      }\r\n      unidad\r\n      id_unidad_venta\r\n      empresa\r\n      sucursal\r\n      usuario\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarCompras({ data }) {\r\n  const compras = data.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      almacen,\r\n      proveedor,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito,\r\n      costo,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_precio,\r\n      ieps_precio,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const forma_pago_filtrada = formaPago.filter(\r\n      (forma) => forma.Value === compra.forma_pago\r\n    );\r\n    const forma_pago = forma_pago_filtrada[0];\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito: compra_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      costo: `$${costo ? formatoMexico(costo) : 0}`,\r\n      descuento_porcentaje: `%${descuento_porcentaje}`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_precio: `$${ieps_precio ? formatoMexico(ieps_precio) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n        <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Unidad de Regalo\" value=\"unidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad de Regalo\" value=\"cantidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad Total\" value=\"cantidad_total\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"compra_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Costo\" value=\"costo\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_precio\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaComprasFiltradas from \"./TablaComprasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { OBTENER_REPORTE_COMPRAS } from \"../../../../gql/Compras/reporte_compras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarCompras from \"./ExportarCompras\";\r\n\r\nexport default function FiltrosCompras() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_REPORTE_COMPRAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        proveedor: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerProductoMovimientos } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerProductoMovimientos} />\r\n        <TablaComprasFiltradas data={obtenerProductoMovimientos} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    proveedor: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      proveedor: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filter) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: filter,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Proveedor:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"proveedor\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, Clave o numero\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.proveedor}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1} display=\"flex\">\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarCompras data={data} />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\nimport FiltrosCompras from \"./FiltrosCompra\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCompras() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcPaid fontSize={100} />\r\n          </Box>\r\n          Reportes Compras\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Compras\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosCompras />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'F. Venta', minWidth: 100 },\r\n\t{ id: 'code', label: 'Producto', minWidth: 100 },\r\n\t{ id: 'code', label: 'P. de Compra', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'code', label: 'Total', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Provedor', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Fomas', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'M. de Pago', minWidth: 100 },\t\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaVentasFiltradas() {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            \r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcPaid } from 'react-icons/fc';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaVentasFiltradas from './TablaVentasFiltradas';\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesVentas() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg' alt=\"icono ventas\" style={{width: 100}} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Ventas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Ventas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>\r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaInicio\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaFin\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Clientes:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Metodos de Pago:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"tipo_producto\"\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        <MenuItem value=\"EFECTIVO\">Efectivo</MenuItem>\r\n                                        <MenuItem value=\"PUNTOS\">Puntos</MenuItem>\r\n                                        <MenuItem value=\"DEBITO\">T. Debito</MenuItem>\r\n                                        <MenuItem value=\"CREDITO\">T. Credito</MenuItem>\r\n                                        <MenuItem value=\"CHEQUES\">Cheques</MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Nombre Producto:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12}>\r\n                        <TablaVentasFiltradas />\r\n                    </Grid>\r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarTraspasos({ data }) {\r\n  const traspasos = data.map((traspaso) => {\r\n    const trasp =  {\r\n      producto: traspaso.producto.datos_generales.nombre_comercial,\r\n      cantidad: traspaso.cantidad,\r\n      fecha:\tformatoFechaCorta(traspaso.id_traspaso.fecha_registro),\r\n      concepto: traspaso.id_traspaso.concepto_traspaso.nombre_concepto,\r\n      almacen_origen: (traspaso.almacen_origen !== null) ? traspaso.almacen_origen.nombre_almacen : '',\r\n      almacen_destino:(traspaso.almacen_destino !== null) ? traspaso.almacen_destino.nombre_almacen : ''\r\n    } ;\r\n  \r\n    return trasp;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de traspasos\"\r\n    >\t\r\n\r\n      <ExcelSheet data={traspasos} name=\"Reporte de traspasos\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Almacén Origen\" value=\"almacen_origen\" />\r\n        <ExcelColumn label=\"Almacén Destino\" value=\"almacen_destino\" />\r\n        \r\n        \r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\nimport {\r\n  formatoFechaCorta,\r\n\r\n} from \"../../../../config/reuserFunctions\"; \r\n\r\nconst columns = [\r\n\t{ id: 'producto', label: 'Producto', minWidth: 200 },\r\n\t\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 50 },\r\n\t{ id: 'fecha', label: 'Fecha ', minWidth: 50 },\t\r\n\t{ id: 'concepto', label: 'Concepto ', minWidth: 100 },\r\n\t{ id: 'almacen_origen', label: 'Almacén Origen', minWidth: 100 },\t\r\n\t{ id: 'almacen_destino', label: 'Almacén Destino', minWidth: 100 },\t\r\n\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaAlmacenFiltradas({data}) {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                         <TableBody>\r\n\t\t\t\t\t\t\t{data.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<TableCell>{data.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{formatoFechaCorta(data.id_traspaso.fecha_registro)}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.id_traspaso.concepto_traspaso.nombre_concepto}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_origen !== null) ? data.almacen_origen.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_destino !== null) ? data.almacen_destino.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import React, { useState,  Fragment } from 'react';\r\n\r\nimport { AppBar, Box, Button, Dialog, FormControl, \r\nGrid, MenuItem, Select, Slide, TextField, Toolbar, \r\nTypography } from '@material-ui/core';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarTraspasos from \"./ExportarTraspasos\";\r\nimport TablaAlmacenFiltradas from './TablaAlmacenFiltradas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\n\r\nimport { OBTENER_ALMACENES, OBTENER_TRASPASOS  } from '../../../../gql/Almacenes/Almacen';\r\nimport { useDebounce } from 'use-debounce';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n    CircularProgress:{\r\n         width: '100%',\r\n        height: 200,\r\n        marginTop:100,\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesAlmacen() {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n    const [open, setOpen] = useState(false);\r\n    const [almacenOrigen, setAlmacenOrigen] = useState(null);\r\n    const [almacenDestino, setAlmacenDestino] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [inputFilter, setFilter] = useState({\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        producto: '',\r\n        fecha_inicio: '',\r\n        fecha_final: '',\r\n        usuario: ''\r\n    });\r\n\r\n    const [encargado, setEncargado] = useState('');\r\n    const [value] = useDebounce(inputFilter, 1000);\r\n\r\n    let almacenes = [];\r\n    let traspasos = [];\r\n    let usuarios = [];\r\n\r\n\r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    })\r\n    const traspasosAlmacenes = useQuery(OBTENER_TRASPASOS,{\r\n        variables:{\r\n            input: value\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n    });\t\r\n\t\r\n\r\n  /*   useEffect(() => {\r\n        try {\r\n            \r\n            traspasosAlmacenes.refetch({\r\n                  input: inputFilter\r\n            }) \r\n        } catch (error) {\r\n            console.log('traspasosAlmacenes',error)\r\n        }\r\n        \r\n    }, []); */\r\n    \r\n    const limpiarFiltros = () => {\r\n        try {\r\n            let filt = {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                producto: '',\r\n                fecha_inicio: '',\r\n                fecha_final: '',\r\n                usuario: ''\r\n            };\r\n          \r\n        \r\n            setFilter(filt);\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: filt\r\n                }\r\n            )\r\n            setEncargado('');\r\n            setAlmacenOrigen(null);\r\n            setAlmacenDestino(null);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            \r\n        }\r\n  \r\n\r\n  };\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    \r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n     \r\n    const setDatosInput = (e) =>{\r\n      \r\n          let fil = {...inputFilter, [e.target.name]: e.target.value,almacen_destino:almacenDestino,almacen_origen : almacenOrigen}\r\n        setFilter(fil)\r\n    }\r\n    const setQueryAlmacenOrigen = (alm) =>{\r\n           \r\n        let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n        \r\n        if(alm._id !== ''){\r\n             setLoading(true);\r\n            let fil = {...inputFilter, almacen_origen : alm._id, almacen_destino: almDes}\r\n        \r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n           \r\n        }\r\n         setAlmacenOrigen(alm)\r\n          setLoading(false);\r\n    }\r\n     const setQueryAlmacenDestino = (alm) =>{\r\n        let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';  \r\n        if(alm._id !== ''){\r\n      \r\n            let fil = {...inputFilter, almacen_origen : almOri, almacen_destino : alm._id}\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n            \r\n        }\r\n        \r\n        setAlmacenDestino(alm);\r\n         setLoading(false);\r\n    }\r\n    const setEncargadoInput = ( enc) =>{\r\n       try {\r\n            let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n            let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';\r\n            let encId = ( enc!== '' ) ? enc._id : ''; \r\n            let fil ={...inputFilter, usuario: encId, almacen_destino:almDes,almacen_origen : almOri};\r\n        \r\n        traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n         setEncargado(enc)  \r\n          setLoading(false);  \r\n       } catch (error) {\r\n           \r\n       }\r\n        \r\n    }\r\n\r\n    if(traspasosAlmacenes.data){\r\n       try {\r\n           \r\n            traspasos = traspasosAlmacenes.data.obtenerTraspasos;   \r\n       } catch (error) {\r\n           \r\n       }\r\n      \r\n       \r\n    }\r\n\r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg' \r\n                            alt=\"icono almacen\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Almacen\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    \r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_inicio\"\r\n                                    variant=\"outlined\"\r\n                                    value={inputFilter.fecha_inicio}\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_final\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.fecha_final}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Encargado</Typography>\r\n                                <Box display=\"flex\">\r\n                                    <Autocomplete\r\n                                        id=\"encargado\"\r\n                                        size=\"small\"\r\n                                        options={usuarios}\r\n                                       \r\n                                        getOptionLabel={(option) =>\r\n                                            option.nombre ? `${option.nombre}` : \"\"\r\n                                        }\r\n                                        fullWidth\r\n                                        renderInput={(params) => (\r\n                                            <TextField\r\n                                            {...params}\r\n                                            variant=\"outlined\"\r\n                                            InputProps={{\r\n                                                ...params.InputProps,\r\n                                                endAdornment: (\r\n                                                <Fragment>\r\n                                                  \r\n                                                    {params.InputProps.endAdornment}\r\n                                                </Fragment>\r\n                                                ),\r\n                                            }}\r\n                                            \r\n                                            />\r\n                                        )}\r\n                                        renderOption={(option) => (\r\n                                            <Fragment>\r\n                                            {`${option.nombre}`}\r\n                                            </Fragment>\r\n                                        )}\r\n                                        onChange={ (_, data) =>  setEncargadoInput(data)}\r\n                                        getOptionSelected={(option, value) =>\r\n                                            option.nombre === value.nombre\r\n                                        }\r\n             \r\n                                        value={(encargado.nombre) ? encargado: null }\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                             <Box width=\"100%\">\r\n                                <Typography>Producto:</Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"producto\"\r\n                                    variant=\"outlined\"\r\n                                    placeholder=\"Nombre, código, clave...\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.producto}\r\n                                />\r\n                            </Box>\r\n                           \r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen origen:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-origen\"\r\n                                        name=\"almacen_origen\"\r\n                                        onChange={(e) => setQueryAlmacenOrigen(e.target.value)}\r\n                                        value={(almacenOrigen !== null) ? almacenOrigen : ''} \r\n                                    >   \r\n                                       \r\n                                        {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                                {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                      \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen destino:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    \r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-destino\"\r\n                                        name=\"almacen_destino\"\r\n                                        onChange={(e) => setQueryAlmacenDestino(e.target.value)}\r\n                                        value={(almacenDestino !== null) ? almacenDestino: ''} \r\n                                    >\r\n                                     \r\n                                          {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                            {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                       \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                           \r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box mt={1} display=\"flex\">\r\n                                <Button\r\n                                color=\"primary\"\r\n                                startIcon={<ClearOutlined />}\r\n                                onClick={() => limpiarFiltros()}\r\n                                >\r\n                                Limpiar filtros\r\n                                </Button>\r\n                                <Box mx={1} />\r\n                                <ExportarTraspasos data= {traspasos} />\r\n                            </Box>\r\n                        </div>    \r\n                    </Grid> \r\n                    {\r\n                        (traspasosAlmacenes.loading || loading) ?\r\n                        <div className={classes.CircularProgress}>\r\n                        <CircularProgress/>\r\n                        </div>\r\n                        :\r\n                        <Grid item lg={12}>\r\n                         <TablaAlmacenFiltradas data={traspasos} />\r\n                        </Grid>\r\n                    }\r\n                 \r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Grid, Typography} from '@material-ui/core';\r\nimport { OBTENER_CORTE_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport moment from 'moment';\r\nimport { useLazyQuery } from '@apollo/client';\r\n\r\nconst columns = [\r\n\t{label: 'Fecha Corte', minWidth: 100 },\r\n\t{label: 'Hora Corte', minWidth: 100 },\r\n\t{label: 'Usuario', minWidth: 100 },\r\n\t{label: 'Turno Horario', minWidth: 100 },\t\r\n\t{label: 'Caja', minWidth: 100 },\r\n\t{label: 'Sucursal', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: \"70vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaCortesFiltradas({loading, cortes}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cortes.map((row) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\tcorte={row}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({corte}) {\r\n\tconst [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [obtenerCorte, { data, error, loading }] = useLazyQuery(\r\n\t\tOBTENER_CORTE_CAJA,\r\n\t\t{\r\n\t\t\tvariables: { \r\n\t\t\t\tsucursal: sesion.sucursal._id, \r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tinput: { \r\n\t\t\t\t\tusuario: sesion._id,\r\n\t\t\t\t\tcaja: corte.id_caja,\r\n\t\t\t\t\ttoken_turno_user: corte.token_turno_user,\r\n\t\t\t\t\tnumber_user: sesion.numero_usuario\r\n\t\t\t\t} \r\n\t\t\t},\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tlet montos_sistema = [];\r\n\r\n\tif(data){\r\n\t\tmontos_sistema = data.obtenerCorteCaja.montos_en_sistema;\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t\tobtenerCorte();\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"handleClickOpen\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={corte._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{corte.fecha_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.hora_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.numero_caja}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.sucursal.nombre_sucursal}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<InformacionCorteCaja corte={corte} montos_sistema={montos_sistema} loading={loading} />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Box p={2} display=\"flex\" flexDirection='row-reverse'>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tImprimir Ticket\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction InformacionCorteCaja({corte, montos_sistema, loading}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h5\">\r\n\t\t\t\t\t\t<b>Reporte de Corte de Caja</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t<b>Fecha y hora de Corte: </b>{moment(corte.fecha_movimiento).format('Do MMMM YYYY, h:mm:ss')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={2} display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Usuario: </b> {corte.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>No. de usuario: </b>{corte.usuario_en_turno.numero_usuario}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Horario en turno: </b>{corte.horario_en_turno}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Numero de caja: </b>{corte.numero_caja}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Sucursal: </b>{corte.sucursal.nombre_sucursal}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CONCEPTO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CAJERO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">SISTEMA</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">DIFERENCIA</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EFECTIVO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_efectivo.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_efectivo}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_efectivo.monto - montos_sistema.monto_efectivo)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DEBITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_debito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_debito.monto - montos_sistema.monto_tarjeta_debito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DE CREDITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_credito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_credito.monto - montos_sistema.monto_tarjeta_credito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TRANSFERENCIAS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_transferencia}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_transferencia.monto - montos_sistema.monto_transferencia)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN MONEDERO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_monedero}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_monedero.monto - montos_sistema.monto_monedero)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CREDITOS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_creditos}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_creditos.monto - montos_sistema.monto_creditos)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CHEQUES</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_cheques}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_cheques.monto - montos_sistema.monto_cheques)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN VALE DE DESPENSA</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_vales_despensa}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_vales_despensa.monto - montos_sistema.monto_vales_despensa)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}","import { Button, makeStyles } from '@material-ui/core'\r\nimport React, { useState } from 'react'\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nexport default function ExportExcel({historialCortes}) {\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\r\n    const classes = useStyles();\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = () => {\r\n       \r\n        \r\n        for (let i = 0; i < historialCortes.length; i++) {\r\n            arrayExcel = { \r\n                fecha: historialCortes[i].fecha_salida.completa,\r\n                hora_movimiento: historialCortes[i].hora_salida.completa,\r\n                horario_turno: historialCortes[i].horario_en_turno,\r\n                sucursal: historialCortes[i].sucursal.nombre_sucursal,\r\n                nombre: historialCortes[i].usuario_en_turno.nombre,\r\n                numero_usuario: historialCortes[i].usuario_en_turno.numero_usuario,\r\n                concepto: \"Corte Caja\",\r\n                caja: historialCortes[i].numero_caja,\r\n                monto_efectivo: historialCortes[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: historialCortes[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: historialCortes[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: historialCortes[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: historialCortes[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: historialCortes[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: historialCortes[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: historialCortes[i].montos_en_caja.monto_vales_despensa.monto ,\r\n            };\r\n            setDatosExcel(arrayExcel);\r\n        };\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                        onClick={() => agruparDatos()}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename={`Reporte de Historial de Cortes`}\r\n            >\r\n                <ExcelSheet data={datosExcel} name={`Reporte de Historial de Cortes`}>\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Sucursal' value='sucursal' />\r\n                    <ExcelColumn label='Fecha Corte' value='fecha' />\r\n                    <ExcelColumn label='Hora Corte' value='hora_movimiento' />\r\n                    <ExcelColumn label='Horario Turno' value='horario_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                    <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                    <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                    <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                    <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                    <ExcelColumn label='M. en Monedero' value='monto_monedero' />\r\n                    <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                    <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                    <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n        </>\r\n    )\r\n}\r\n","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaComprasFiltradas from './TablaCortesFiltradas';\r\nimport ExportExcel from './ExportExcel';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS, OBTENER_CORTES_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesCortes() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    const [ open, setOpen ] = useState(false);\r\n    const [ datosFiltro, setDatosFiltro ] = useState([]);\r\n    const [value] = useDebounce(datosFiltro, 500);\r\n\r\n    let cajas = [];\r\n    let historialCortes = [];\r\n\r\n    const cajasBase = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  }= useQuery( OBTENER_CORTES_CAJA,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                fecha_consulta: datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                numero_caja: datosFiltro.numero_caja ? parseInt(datosFiltro.numero_caja) : null\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    if(cajasBase.loading === false && loading === false){\r\n        cajas = cajasBase.data.obtenerCajasSucursal;\r\n        historialCortes = data.obtenerCortesDeCaja;\r\n    }\r\n\r\n    const handleClickOpen = () => {setOpen(!open)};\r\n\r\n    const obtenerDatos = (e) => { \r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarDatos = () => {\r\n        setDatosFiltro([]);\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <ExportExcel historialCortes={historialCortes} /> \r\n                    \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha de corte:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_consulta\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={obtenerDatos}\r\n                                    value={datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\"}\r\n                                />\r\n                            </Box>\r\n                            <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                                <Box width=\"100%\">\r\n                                    <Typography>\r\n                                        Usuario:\r\n                                    </Typography>\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"usuario\"\r\n                                        variant=\"outlined\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n                                    />\r\n                                </Box>\r\n                            </form>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Caja:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"numero_caja\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.numero_caja ? datosFiltro.numero_caja : \"\"}\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        {\r\n                                            cajas?.map((caja) =>{\r\n                                                return(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                );\r\n                                            })\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box \r\n                                width=\"100%\" \r\n                                display=\"flex\" \r\n                                justifyContent=\"center\" \r\n                                alignItems=\"center\"\r\n                                mt={2}\r\n                            >\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarDatos}\r\n                                >\r\n                                    Limpiar Filtro\r\n                                </Button>\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <TablaComprasFiltradas cortes={historialCortes} loading={loading} />\r\n                    </Grid>\r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, Grid, MenuItem, Select, Slide, TextField, Typography } from '@material-ui/core';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_EGRESOS } from '../../../../gql/Tesoreria/egresos';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 170 },\r\n\t{ id: 'nombre', label: 'Usuario', minWidth: 170 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 170 },\r\n\t{ id: 'folioF', label: 'Folio Factura', minWidth: 170 },\r\n\t{ id: 'tipo', label: 'Tipo Compra', minWidth: 170 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\t\troot: {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '70vh'\r\n\t\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nexport default function ListaEgresos() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [datosFiltro, setDatosFiltro] = useState([]);\r\n\tconst [value] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n\tconst { loading, data, error, refetch  } = useQuery( OBTENER_HISTORIAL_EGRESOS,{\r\n\t\tvariables: {\r\n\t\t\tinput: {\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? (datosFiltro.tipo_movimiento === \"CREDITO\" ?  true : false) : null\r\n            },\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch]);\r\n\r\n\t\r\n\tlet historialEgresos = [];\r\n\r\n\tif(data){\r\n\t\thistorialEgresos = data.obtenerHistorialEgresos\r\n\t}\r\n\r\n\tconst obtenerDatos =(e)=>{\r\n\t\tsetDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n\tconst limpiarDatos = () => {\r\n\t\tsetDatosFiltro([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Inicio:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_inicio\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Fin:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_fin\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tTipo Egreso:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_movimiento\"\r\n\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"TODOS\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CONTADO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Contado\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CREDITO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Credito\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"center\" \r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={limpiarDatos}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLimpiar Filtro\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid> \r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historialEgresos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsEgresos row={row} loading={loading} key={index} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction RowsEgresos({row, loading}){\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t>\r\n\t\t\t\t<DialogCaracteristicas row={row}  />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={row.code}\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_egreso}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.nombre_usuario_creador}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.fecha_compra}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_factura}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.compra_credito === false ? \"Contado\" : \"Credito\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction DialogCaracteristicas ({row}) {\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={5} xs={12}>\r\n\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Fecha Compra: </b> {moment(row.fecha_compra).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio movimiento: </b> {row.folio_egreso}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Usuario: </b> {row.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Categoria: </b> {row.categoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Sub-Categoria: </b> {row.subCategoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio Factura: </b> {row.folio_factura}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Empresa: </b> {row.empresa_distribuidora}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Provedor: </b> {row.provedor}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Metodo de pago: </b> {row.metodo_pago}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Compra credito: </b> {row.compra_credito === false ? \"NO\" : \"Si\"}\r\n\t\t\t\t\t\t\t\t{row.compra_credito === false ? null : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Fecha Vencimiento: </b> {row.fecha_vencimiento}\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Saldo Pendiente: </b> {row.saldo_credito_pendiente}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={7} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\tProductos Adquiridos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Paper style={{width: '100%', height: '30vh'}}>\r\n\t\t\t\t\t\t\t\t<TableContainer style={{maxHeight: '100%'}}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANTIDAD\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPRODUCTO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP. UNITARIO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTOTAL\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t{row?.productos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableRow \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.cantidad_productos}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.producto}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.precio_unitario}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.total}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent='flex-end' p={1}> \r\n\t\t\t\t\t\t\t<Typography variant='h6'>\r\n\t\t\t\t\t\t\t\tTotal: ${formatoMexico(row.saldo_total)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</DialogContent>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, IconButton, InputBase } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaTransferencias() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(14);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t<Box mr={5} minWidth=\"70%\">\r\n\t\t\t\t\t\t<Paper className={classes.rootBusqueda}>\r\n\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tplaceholder=\"Buscar transferencias...\"\r\n\t\t\t\t\t\t\t\t// onChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t// onKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t// value={values}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</div>\r\n\t\t<Box  p={2}>\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\r\nimport {FcSurvey } from 'react-icons/fc';\r\n\r\nimport ListaEgresos from './ListaEgresos';\r\nimport ListaTransferencias from './ListaTransferencias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ReportesTesoreria() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ventana, setVentana] = useState('');\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                        <FcSurvey style={{fontSize: 100}}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Tesoreria\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\t id=\"customized-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('egresos')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Egresos\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('transferencias')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Transferencias\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistotorial de {ventana}\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tventana === 'egresos' ? (\r\n\t\t\t\t\t\t\t<ListaEgresos />\r\n\t\t\t\t\t\t) : ventana === 'transferencias' ?(\r\n\t\t\t\t\t\t\t<ListaTransferencias />\t\t\t\r\n\t\t\t\t\t\t) :(\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport Cajas from './Cajas/Cajas';\r\nimport ReportesTurnosUsuarios from './TurnosUsuarios/ReportesTurnosUsuarios';\r\nimport ReportesCompras from './Compras/ReportesCompras';\r\nimport ReportesVentas from './Ventas/ReportesVentas';\r\nimport ReportesAlmacen from './Almacenes/ReportesAlmacen';\r\nimport ReportesCortes from './Cortes/ReportesCortes';\r\nimport ReportesTesoreria from './Tesoreria/Reporte_Tesoreria';\r\n\r\nexport default function Reportes() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_historial_cajas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_turnos.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTurnosUsuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_compras.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCompras />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_ventas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesVentas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.rerporte_almacen.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_corte_caja.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCortes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_tesoreria.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTesoreria />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { FcShop, FcPaid, FcSurvey, FcNews } from \"react-icons/fc\";\r\nimport { Toolbar, Box, Tab, Tabs, AppBar } from \"@material-ui/core\";\r\nimport Empresa from \"./Empresa/Empresa\";\r\nimport Compras from \"./Compras/Compras\";\r\nimport Catalogos from \"./Catalogos/Catalogos\";\r\nimport IndexTesoreria from \"./Tesoreria/IndexTesoreria\";\r\nimport Facturacion from \"./Facturacion/Facturacion\";\r\nimport Almacenes from \"./Almacenes/Almacenes\";\r\nimport { withRouter } from \"react-router\";\r\nimport Reportes from \"./Reportes/Reportes\";\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} my={6} minHeight=\"50vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  iconSvgVenta: {\r\n    width: 90,\r\n  },\r\n}));\r\n\r\nfunction AdminInicio(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Toolbar />\r\n      <Box>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            /* centered */ variant=\"scrollable\"\r\n            scrollButtons=\"on\"\r\n          >\r\n            <Tab\r\n              label=\"Mi empresa\"\r\n              icon={<FcShop className={classes.icon} />}\r\n              {...a11yProps(0)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Catalogos\"\r\n              icon={<FcNews className={classes.icon} />}\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              label=\"Almacenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Compras\"\r\n              icon={<FcPaid className={classes.icon} />}\r\n              {...a11yProps(3)}\r\n            />\r\n            <Tab\r\n              label=\"Ventas\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n              onClick={() => props.history.push(\"/ventas/venta-general\")}\r\n            />\r\n            <Tab\r\n              label=\"Reportes\"\r\n              icon={<FcSurvey className={classes.icon} />}\r\n              {...a11yProps(5)}\r\n            />\r\n            <Tab\r\n              label=\"Tesoreria\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                  alt=\"icono money\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(6)}\r\n            />\r\n            <Tab\r\n              label=\"Facturación\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                  alt=\"icono factura\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(7)}\r\n            />\r\n          </Tabs>\r\n        </AppBar>\r\n        <SwipeableViews\r\n          axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\r\n          index={value}\r\n          onChangeIndex={handleChangeIndex}\r\n        >\r\n          <TabPanel value={value} index={0}>\r\n            <Empresa />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <Catalogos />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <Almacenes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={3}>\r\n            <Compras />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={4}>\r\n            {/* ventas */}\r\n          </TabPanel>\r\n          <TabPanel value={value} index={5}>\r\n            <Reportes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={6}>\r\n            <IndexTesoreria />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={7}>\r\n            <Facturacion />\r\n          </TabPanel>\r\n        </SwipeableViews>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AdminInicio);\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Avatar, Box, Button, Typography, Toolbar, AppBar } from '@material-ui/core';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappbar: {\r\n\t\tbackgroundColor: theme.palette.navbar,\r\n        color: grey[800]\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t}\r\n}));\r\n\r\nfunction NavegacionAdmin(props) {\r\n\tconst classes = useStyles();\r\n\tconst token = localStorage.getItem('sesionCafi');\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet usuario;\r\n\t\r\n\tif (token !== null) usuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tlocalStorage.removeItem('ListaEnEspera');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<AppBar position=\"fixed\" className={classes.appbar} elevation={0}>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={usuario.imagen} />\r\n\t\t\t\t\t<Box className={classes.title}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Bienvenido {`${usuario.nombre}`}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <Button\r\n\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\tto=\"/home\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\tstartIcon={<HomeIcon />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tInicio\r\n\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t{sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tTURNO ACTIVO\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tstartIcon={<PowerSettingsNewIcon />}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={signOut}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCerrar sesión\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default withRouter(NavegacionAdmin)","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\t// backgroundColor: theme.palette.navbar,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerColor:{\r\n\t\theight: '95vh',\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.navbar\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\theight: '100%'\r\n\t},\r\n\tnavigationTop:{\r\n\t\theight: \"100%\"\r\n\t},\r\n\ticonSizeSuperior: {\r\n\t\tfontSize: 30,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n\ticonSizeInferior: {\r\n\t\tfontSize: 50,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondInferior: {\r\n\t\twidth: 40,\r\n\t},\r\n\ticonSizeSecondInferiorGrande: {\r\n\t\twidth: 100\r\n\t},\r\n\ticonSizeInferiorGrande:{\r\n\t\tfontSize: 110,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tavatar: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(1)\r\n\t},\r\n\tborderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot:{\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    rootPrecioProductos:{\r\n        minHeight: '40vh',\r\n    },\r\n    containerImage:{\r\n        maxWidth: 100,\r\n        maxHeight: 100,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    imagen:{\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootBusquedaProductos: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootFecha: {\r\n        height: 40,\r\n        maxWidth: 150,\r\n\t\tdisplay: 'flex',\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n    titulos: {\r\n        fontWeight: 500,\r\n        '& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n    },\r\n\tformInput: {\r\n\t\t// margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    iconSizeDialogs:{\r\n        width: 80,\r\n    },\r\n    iconSizeDialogsPequeno:{\r\n        width: 50,\r\n    },\r\n    containerImagenesProducto:{\r\n        maxHeight: 300,\r\n        maxWidth: 300,\r\n        display: 'flex',\r\n        justifyItems: 'center',\r\n        alignContent: 'center',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    imagenProducto:{\r\n        height: '100%',\r\n        width: '100%'\r\n    },\r\n    borderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default useStyles","import React, { createContext, useState } from 'react';\r\n\r\nexport const VentasContext = createContext();\r\n\r\nexport const VentasProvider = ({ children }) => {\r\n    const [DatosVentasActual, setDatosVentasActual] = useState({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n        // tipo_cambio: {},\r\n      });\r\n    const [datosProductoVentas, setDatosProductoVentas] = useState(\r\n        {\r\n            _id: null,\r\n            cantidad: null,\r\n            codigo_barras: null,\r\n            concepto: null,\r\n            default: null,\r\n            descuento: null,\r\n            descuento_activo: null,\r\n            id_producto: {},\r\n            precio: null,\r\n            unidad: null,\r\n            unidad_principal: null\r\n        }\r\n    );\r\n    \r\n    const [productosVentas, setProductosVentas] = useState([]);\r\n    const [datosVentas, setDatosVentas] = useState(\r\n        {\r\n            productos: [],\r\n            cliente: {},\r\n            subtotal: 0,\r\n            impuestos: 0,\r\n            total: 0,\r\n            usuario: {}\r\n        }\r\n    );\r\n\r\n    const [ productoCambioPrecio, setProductoCambioPrecio ] = useState({});\r\n    const [ precioSelectProductoVenta, setPrecioSelectProductoVenta ] = useState([]);\r\n    const [ clientesVentas, setClientesVentas ] = useState([]);\r\n    const [ turnoActivo, setTurnoActivo ] = useState();\r\n    const [ ubicacionTurno, setUbicacionTurno ] = useState('');\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ alert, setAlert ] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ abrirTurnosDialog, setAbrirTurnosDialog ] = useState(false);\r\n    const [ updateClientVenta, setUpdateClientVenta ] = useState(false);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // const [precioSeleccionadoTabla, setPrecioSeleccionadoTabla] = useState(false);\r\n\r\n    const [updateTablaVentas, setUpdateTablaVentas] = useState(false);\r\n    const [openBackDrop, setOpenBackDrop] = useState(false);\r\n\r\n\treturn (\r\n\t\t<VentasContext.Provider value={\r\n            { \r\n                alert, \r\n                setAlert,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                datosProductoVentas,\r\n                setDatosProductoVentas,\r\n                productosVentas,\r\n                setProductosVentas,\r\n                datosVentas,\r\n                setDatosVentas,\r\n                abrirTurnosDialog, \r\n                setAbrirTurnosDialog,\r\n                setUpdateClientVenta,\r\n                updateClientVenta,\r\n                setProductoCambioPrecio,\r\n                productoCambioPrecio,\r\n                setPrecioSelectProductoVenta,\r\n                precioSelectProductoVenta,\r\n                setUpdateTablaVentas,\r\n                updateTablaVentas,\r\n                setOpen,\r\n                open,\r\n                clientesVentas, \r\n                setClientesVentas,\r\n                turnoActivo, \r\n                setTurnoActivo,\r\n                ubicacionTurno, \r\n                setUbicacionTurno,\r\n                DatosVentasActual, setDatosVentasActual,\r\n                // precioSeleccionadoTabla,\r\n                // setPrecioSeleccionadoTabla\r\n                setOpenBackDrop,\r\n                openBackDrop,\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</VentasContext.Provider>\r\n\t);\r\n};","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  MenuItem,\r\n  Radio,\r\n  RadioGroup,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { OBTENER_CONTABILIDAD } from \"../../../gql/Catalogos/contabilidad\";\r\nimport {\r\n  CREAR_HISTORIAL_CAJA,\r\n  OBTENER_PRE_CORTE_CAJA,\r\n} from \"../../../gql/Cajas/cajas\";\r\nimport useStyles from \"../styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { Done } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DepositoRetiroCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [CrearHistorialCaja] = useMutation(CREAR_HISTORIAL_CAJA);\r\n\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [error_data, setError] = useState(false);\r\n  const [cargando, setCargando] = useState(false);\r\n  const [datosMovimiento, setDatosMovimiento] = useState({\r\n    tipo_movimiento: \"DEPOSITO\",\r\n  });\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_CONTABILIDAD, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const preCorteDeCaja = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    preCorteDeCaja.refetch();\r\n  };\r\n\r\n  var dineroEnCaja = 0;\r\n\r\n  if (!data || !preCorteDeCaja.data) {\r\n    return <ComponenteSinConexion />;\r\n  } else {\r\n    dineroEnCaja =\r\n      preCorteDeCaja.data.obtenerPreCorteCaja.monto_efectivo_precorte;\r\n  }\r\n\r\n  if (loading || error || preCorteDeCaja.loading || preCorteDeCaja.error)\r\n    return <ComponenteSinConexion />;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 68) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosMovimiento({ ...datosMovimiento, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setCargando(true);\r\n    try {\r\n      if (!turnoEnCurso && sesion?.turno_en_caja_activo === false) {\r\n        setCargando(false);\r\n        setAlert({\r\n          message: `Por el momento no hay ningun turno activo.`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return null;\r\n      } else {\r\n        if (\r\n          !datosMovimiento.tipo_movimiento ||\r\n          !datosMovimiento.monto_efectivo ||\r\n          !datosMovimiento.concepto\r\n        ) {\r\n          setError(true);\r\n          setCargando(false);\r\n          setAlert({\r\n            message: `Por favor complete los datos.`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n          return null;\r\n        } else {\r\n          if (\r\n            datosMovimiento.tipo_movimiento === \"RETIRO\" &&\r\n            dineroEnCaja < parseFloat(datosMovimiento.monto_efectivo)\r\n          ) {\r\n            setCargando(false);\r\n            setAlert({\r\n              message:\r\n                \"Lo sentimos no hay dinero suficiente en la caja para esta acción.\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n            return null;\r\n          }\r\n          const input = {\r\n            tipo_movimiento: datosMovimiento.tipo_movimiento,\r\n            concepto: datosMovimiento.concepto,\r\n            numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n            id_Caja: turnoEnCurso.id_caja,\r\n            horario_turno: turnoEnCurso.horario_en_turno,\r\n            rol_movimiento: \"CAJA\",\r\n            hora_moviento: {\r\n              hora: moment().format(\"hh\"),\r\n              minutos: moment().format(\"mm\"),\r\n              segundos: moment().format(\"ss\"),\r\n              completa: moment().format(\"HH:mm:ss\"),\r\n            },\r\n            fecha_movimiento: {\r\n              year: moment().format(\"YYYY\"),\r\n              mes: moment().format(\"DD\"),\r\n              dia: moment().format(\"MM\"),\r\n              no_semana_year: moment().week().toString(),\r\n              no_dia_year: moment().dayOfYear().toString(),\r\n              completa: moment().locale(\"es-mx\").format(),\r\n            },\r\n            id_User: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            montos_en_caja: {\r\n              monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.monto_efectivo),\r\n                metodo_pago: \"01\",\r\n              },\r\n              monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\",\r\n              },\r\n              monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\",\r\n              },\r\n              monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\",\r\n              },\r\n              monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\",\r\n              },\r\n              monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\",\r\n              },\r\n              monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\",\r\n              },\r\n              monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\",\r\n              },\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          };\r\n          await CrearHistorialCaja({\r\n            variables: {\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n              input,\r\n            },\r\n          });\r\n          setAlert({\r\n            message: `Registro de movimiento exitoso.`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          handleClickOpen();\r\n          setCargando(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setCargando(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  const handleTipoMovimiento = (e, tipo_movimiento) => {\r\n    setDatosMovimiento({ ...datosMovimiento, tipo_movimiento });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Deposito/Retiro</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + D</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box display=\"flex\" textAlign=\"center\">\r\n            <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={1}>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Deposito/Retiro Caja</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n                disabled={cargando}\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Box m={2}>\r\n            {sesion.turno_en_caja_activo === true ? (\r\n              <Fragment>\r\n                <Box width=\"100%\">\r\n                  <FormControl component=\"fieldset\">\r\n                    <RadioGroup\r\n                      row\r\n                      aria-label=\"position\"\r\n                      name=\"position\"\r\n                      value={datosMovimiento.tipo_movimiento}\r\n                      onChange={handleTipoMovimiento}\r\n                    >\r\n                      <FormControlLabel\r\n                        value=\"DEPOSITO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Deposito\"\r\n                      />\r\n                      <FormControlLabel\r\n                        value=\"RETIRO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Retiro\"\r\n                      />\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Typography>Monto:</Typography>\r\n                  <Box display=\"flex\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      name=\"monto_efectivo\"\r\n                      onChange={obtenerDatos}\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      error={error_data && !datosMovimiento.monto_efectivo}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Typography>Concepto de Movimiento:</Typography>\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={error_data && !datosMovimiento.concepto}\r\n                  >\r\n                    <Select\r\n                      id=\"form-producto-tipo\"\r\n                      onChange={obtenerDatos}\r\n                      name=\"concepto\"\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Selecciona uno</em>\r\n                      </MenuItem>\r\n                      {data?.obtenerContabilidad.map((concepto, index) => {\r\n                        return (\r\n                          <MenuItem key={index} value={concepto.nombre_servicio}>\r\n                            {concepto.nombre_servicio}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Box>\r\n              </Fragment>\r\n            ) : (\r\n              <Box textAlign=\"center\" p={2}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Por el momento no hay un turno en sesión</b>\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={cargando}\r\n            startIcon={\r\n              cargando ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      disabled\r\n      style={{\r\n        textTransform: \"none\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        pointerEvents: \"none\",\r\n        opacity: 0.5,\r\n      }}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg\"\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Typography variant=\"body2\">\r\n          <b>Deposito/Retiro</b>\r\n        </Typography>\r\n        <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n          <b>Alt + D</b>\r\n        </Typography>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withRouter } from \"react-router-dom\";\r\nmoment.locale(\"es\");\r\n\r\nfunction CerrarTurno(props) {\r\n  const { handleClickOpen, setLoading, loading } = props;\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  const { setAlert, setTurnoActivo, ubicacionTurno } = useContext(\r\n    VentasContext\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const classes = useStyles();\r\n  const [montoTurno, setMontoTurno] = useState([]);\r\n  const [cerrarTurno, setCerrarTurno] = useState([]);\r\n\r\n  const obtenerCamposMontos = (e) => {\r\n    setMontoTurno({ ...montoTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setCerrarTurno({ ...cerrarTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const input = {\r\n    horario_en_turno: cerrarTurno.horario_en_turno,\r\n    concepto: \"CERRAR TURNO\",\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n    numero_caja: turnoEnCurso ? turnoEnCurso?.numero_caja.toString() : \"\",\r\n    comentarios: cerrarTurno.comentarios,\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    empresa: sesion.empresa._id,\r\n    sucursal: sesion.sucursal._id,\r\n    id_usuario: sesion._id,\r\n    usuario_en_turno: {\r\n      nombre: sesion.nombre,\r\n      telefono: sesion.telefono,\r\n      numero_usuario: sesion.numero_usuario.toString(),\r\n      email: sesion.email,\r\n    },\r\n    hora_entrada: {\r\n      hora: \"\",\r\n      minutos: \"\",\r\n      segundos: \"\",\r\n      completa: \"\",\r\n    },\r\n    hora_salida: {\r\n      hora: moment().format(\"hh\"),\r\n      minutos: moment().format(\"mm\"),\r\n      segundos: moment().format(\"ss\"),\r\n      completa: moment().format(\"HH:mm:ss\"),\r\n    },\r\n    fecha_entrada: {\r\n      year: \"\",\r\n      mes: \"\",\r\n      dia: \"\",\r\n      no_semana_year: \"\",\r\n      no_dia_year: \"\",\r\n      completa: \"\",\r\n    },\r\n    fecha_salida: {\r\n      year: moment().format(\"YYYY\"),\r\n      mes: moment().format(\"MM\"),\r\n      dia: moment().format(\"DD\"),\r\n      no_semana_year: moment().week().toString(),\r\n      no_dia_year: moment().dayOfYear().toString(),\r\n      completa: moment().format(\"YYYY-MM-DD\"),\r\n    },\r\n    fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n    montos_en_caja: {\r\n      monto_efectivo: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_efectivo ? montoTurno.monto_efectivo : 0\r\n        ),\r\n        metodo_pago: \"01\",\r\n      },\r\n      monto_tarjeta_debito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_debito ? montoTurno.monto_tarjeta_debito : 0\r\n        ),\r\n        metodo_pago: \"28\",\r\n      },\r\n      monto_tarjeta_credito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_credito\r\n            ? montoTurno.monto_tarjeta_credito\r\n            : 0\r\n        ),\r\n        metodo_pago: \"04\",\r\n      },\r\n      monto_creditos: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_creditos ? montoTurno.monto_creditos : 0\r\n        ),\r\n        metodo_pago: \"99\",\r\n      },\r\n      monto_monedero: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_puntos ? montoTurno.monto_puntos : 0\r\n        ),\r\n        metodo_pago: \"05\",\r\n      },\r\n      monto_transferencia: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_transferencia ? montoTurno.monto_transferencia : 0\r\n        ),\r\n        metodo_pago: \"03\",\r\n      },\r\n      monto_cheques: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_cheques ? montoTurno.monto_cheques : 0\r\n        ),\r\n        metodo_pago: \"02\",\r\n      },\r\n      monto_vales_despensa: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_vales_despensa ? montoTurno.monto_vales_despensa : 0\r\n        ),\r\n        metodo_pago: \"08\",\r\n      },\r\n    },\r\n  };\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: false,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  const actualizarTurnoSesion = (ubicacionTurno) => {\r\n    if (ubicacionTurno === \"SESION\") {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      props.history.push(\"/\");\r\n    } else {\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n    }\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!cerrarTurno.horario_en_turno) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor elija que turno esta cerrando`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: false,\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `Turno cerrado con exito`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n\r\n        actualizarTurnoSesion(ubicacionTurno);\r\n\r\n        setLoading(false);\r\n        handleClickOpen();\r\n        setTurnoActivo(true);\r\n      }\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Montos a Depositar</b>\r\n          </Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Monto Efectivo:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_efectivo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}> Creditos:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_creditos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjeta Debito:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_debito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjeta Credito:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_credito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Monedero:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_puntos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Transferencias:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_transferencia\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Cheques:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_cheques\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              Vales de despensa:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_vales_despensa\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              defaultValue={0}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={2} display=\"flex\">\r\n          <Typography>\r\n            <b>Monto total efectivo: </b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography>${montoTurno.monto_efectivo} Mx.</Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span> Turno:\r\n            </Typography>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" error={error && !cerrarTurno.horario_en_turno}>\r\n              <Select\r\n                onChange={obtenerCampos}\r\n                id=\"form-producto-tipo\"\r\n                name=\"horario_en_turno\"\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} justify=\"flex-end\">\r\n            <Typography className={classes.titulos}>Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              multiline\r\n              onChange={obtenerCampos}\r\n              rows={2}\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(CerrarTurno);\r\n","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  Divider,\r\n  makeStyles,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CerrarTurno from \"./CerrarTurno\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nmoment.locale(\"es\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Turnos() {\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    setTurnoActivo,\r\n  } = useContext(VentasContext);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setAbrirTurnosDialog(!abrirTurnosDialog);\r\n    setTurnoActivo(true);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 85) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n        >\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cerrar turno</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + U</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n        open={abrirTurnosDialog}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box display=\"flex\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Cerrar turno</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <CerrarTurno\r\n          setLoading={setLoading}\r\n          loading={loading}\r\n          handleClickOpen={handleClickOpen}\r\n        />\r\n        {/* <ContenidoTurnos handleClickOpen={handleClickOpen} value={value} /> */}\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\n/* \r\nconst ContenidoTurnos = ({ handleClickOpen, value }) => {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  if (loading) return <BackdropComponent loading={loading} />;\r\n\r\n  return (\r\n    <DialogContent style={{ padding: 0 }}>\r\n      {sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n        <TabPanel style={{ padding: 0 }} value={value} index={0}>\r\n          <CerrarTurno\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      ) : (\r\n        <TabPanel value={value} index={0}>\r\n          <AbrirTurno\r\n            loading={loading}\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      )}\r\n    </DialogContent>\r\n  );\r\n}; */\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const AccesosContext = createContext();\r\n\r\nexport const AccesosProvider = ({ children }) => {\r\n\r\n    const [ abrirPanelAcceso, setAbrirPanelAcceso ] = useState(false);\r\n    const [ departamentos, setDepartamentos ] = useState({departamento: '', subDepartamento: '', tipo_acceso: ''});\r\n\r\n    const [ reloadAdministrador, setReloadAdministrador ] = useState(false);\r\n    const [ reloadProductoRapido, setReloadProductoRapido ] = useState(false);\r\n    const [ reloadCancelarVenta, setReloadCancelarVenta ] = useState(false);\r\n    const [ reloadVerPrecios, setReloadVerPrecios ] = useState(false);\r\n    const [ reloadVerPreCorte, setReloadVerPreCorte ] = useState(false);\r\n    const [ reloadEliminarVentaEspera, setReloadEliminarVentaEspera ] = useState(false);\r\n    const [ reloadCrearCotizacion, setReloadCrearCotizacion ] = useState(false);\r\n\r\n    return (\r\n\t\t<AccesosContext.Provider value={\r\n            { \r\n                departamentos, \r\n                setDepartamentos,\r\n                reloadProductoRapido, \r\n                setReloadProductoRapido,\r\n                reloadAdministrador, \r\n                setReloadAdministrador,\r\n                abrirPanelAcceso, \r\n                setAbrirPanelAcceso,\r\n                reloadCancelarVenta, \r\n                setReloadCancelarVenta,\r\n                reloadVerPrecios, \r\n                setReloadVerPrecios,\r\n                reloadVerPreCorte, \r\n                setReloadVerPreCorte,\r\n                reloadEliminarVentaEspera, \r\n                setReloadEliminarVentaEspera,\r\n                reloadCrearCotizacion, \r\n                setReloadCrearCotizacion\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</AccesosContext.Provider>\r\n\t);\r\n};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport useStyles from \"../styles\";\r\nimport \"moment/locale/es\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRE_CORTE_CAJA } from \"../../../gql/Cajas/cajas\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nmoment.locale(\"es\");\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreCorteCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const {\r\n    reloadVerPreCorte,\r\n    setReloadVerPreCorte,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const { loading, error, data, refetch } = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.pre_corte.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"pre_corte\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPreCorte === true) {\r\n      setOpen(!open);\r\n      setReloadVerPreCorte(false);\r\n    }\r\n  }, [reloadVerPreCorte]);\r\n\r\n  if (!data || error || loading) {\r\n    return <ComponenteSinConexion />;\r\n  }\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 79) {\r\n      handleClickOpen();\r\n      refetch();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n          refetch();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pre corte caja</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + O</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container>\r\n            <Grid item lg={10}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n                    alt=\"icono caja\"\r\n                    className={classes.iconSizeDialogs}\r\n                  />\r\n                </Box>\r\n                <Box ml={2}>\r\n                  <Box textAlign=\"left\">\r\n                    <Typography variant=\"h6\">Pre-Corte de Caja</Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\">\r\n                    <Box textAlign=\"right\">\r\n                      <Typography variant=\"caption\">\r\n                        {moment().format(\"MM/DD/YYYY\")}\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"right\" ml={2}>\r\n                      <Typography variant=\"caption\">\r\n                        <b>{moment().format(\"h:mm\")} hrs.</b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={2}>\r\n              <Box\r\n                ml={4}\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"flex-end\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => setOpen(!open)}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon />\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid>\r\n            <Box p={2}>\r\n              {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                <>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Usuario: </b> {sesion.nombre}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Caja: </b>{\" \"}\r\n                      {turnoEnCurso ? turnoEnCurso.numero_caja : \"\"}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Fecha y hora al precorte: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\">\r\n                      {moment().format(\"MMMM D YYYY, h:mm:ss a\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"center\" p={2}>\r\n                    <Typography variant=\"h6\">\r\n                      <b>Monto total en efectivo: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"h3\" style={{ color: \"green\" }}>\r\n                      <b>\r\n                        ${data?.obtenerPreCorteCaja?.monto_efectivo_precorte}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <Box textAlign=\"center\" p={2}>\r\n                  <Typography variant=\"h6\">\r\n                    <b>Por el momento no hay un turno en sesión</b>\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n            <Button\r\n              onClick={() => setOpen(!open)}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              autoFocus\r\n            >\r\n              Imprimir\r\n            </Button>\r\n          ) : null}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n      disabled={true}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg\"\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Pre corte caja</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + O</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Snackbar,\r\n  Slide,\r\n  Typography,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { FcExpired } from \"react-icons/fc\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nmoment.locale(\"es\");\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaEnEspera() {\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const agregarVentaEnEspera = () => {\r\n    let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let datos = localStorage.getItem(\"ListaEnEspera\");\r\n\r\n    if (datosVenta !== null) {\r\n      if (datos === null) {\r\n        localStorage.setItem(\r\n          \"ListaEnEspera\",\r\n          JSON.stringify([{ datosVenta, fecha: moment().format(\"MM/DD/YYYY\") }])\r\n        );\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        handleClickOpen();\r\n      } else {\r\n        let data = JSON.parse(datos);\r\n        data.push({ datosVenta, fecha: moment().format(\"MM/DD/YYYY\") });\r\n        localStorage.setItem(\"ListaEnEspera\", JSON.stringify(data));\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        handleClickOpen();\r\n      }\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 69) {\r\n      agregarVentaEnEspera();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        onClick={() => agregarVentaEnEspera()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcExpired style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>En espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + E</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={3000}\r\n        onClose={handleClickOpen}\r\n        message=\"Compra agregada en espera\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  Grid,\r\n  InputAdornment,\r\n  makeStyles,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"../../sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInformacionRapido({\r\n  setAbrirTallaColor,\r\n  setCantidad,\r\n  cantidad,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    setDatosGenerales,\r\n    validacion,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    unidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n\r\n    if (e.target.value === \"CALZADO\" || e.target.value === \"ROPA\") {\r\n      setAbrirTallaColor(true);\r\n    }\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Typography>\r\n          <b>Información General</b>\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <Grid container spacing={2}>\r\n        <Grid item md={3} xs={12}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"codigo_barras\"\r\n            fullWidth\r\n          >\r\n            <Typography className={classes.titulos}>Código de barras</Typography>\r\n            <OutlinedInput\r\n              disabled={update && datos_generales.codigo_barras}\r\n              style={{ padding: 0 }}\r\n              id=\"form-producto-codigo-barras\"\r\n              name=\"codigo_barras\"\r\n              value={\r\n                datos_generales.codigo_barras\r\n                  ? datos_generales.codigo_barras\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <Button\r\n                    disabled={update && datos_generales.codigo_barras}\r\n                    onClick={() => GenCodigoBarras()}\r\n                    /* edge=\"end\" */\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                  >\r\n                    Generar\r\n                  </Button>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Clave alterna\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.clave_alterna}\r\n            name=\"clave_alterna\"\r\n            id=\"form-producto-clave-alterna\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.clave_alterna ? datos_generales.clave_alterna : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre comercial\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_comercial}\r\n            name=\"nombre_comercial\"\r\n            id=\"form-producto-nombre-comercial\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_comercial\r\n                ? datos_generales.nombre_comercial\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <CatalogosProductosSAT\r\n            refetch={refetch}\r\n            codigos={obtenerConsultasProducto.codigos}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 4 : 8}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre genérico\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_generico}\r\n            name=\"nombre_generico\"\r\n            id=\"form-producto-nombre-generico\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_generico\r\n                ? datos_generales.nombre_generico\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 2 : 4}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Tipo de producto\r\n          </Typography>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.tipo_producto}\r\n          >\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"tipo_producto\"\r\n              value={\r\n                datos_generales.tipo_producto\r\n                  ? datos_generales.tipo_producto\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n              <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n              <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n            </Select>\r\n            <FormHelperText>{validacion.message}</FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        {datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.titulos}>\r\n                <span className=\"obligatorio\">* </span>Cantidad en Almacen\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !cantidad}\r\n                name=\"cantidad\"\r\n                type=\"number\"\r\n                id=\"form-producto-nombre-generico\"\r\n                variant=\"outlined\"\r\n                value={cantidad ? cantidad : \"\"}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setCantidad(parseInt(e.target.value))}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Granel</Typography>\r\n              <FormControlLabel\r\n                control={<Checkbox onChange={obtenerChecks} name=\"granel\" />}\r\n                label=\"Vender a granel\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Medicamento</Typography>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    // checked={datos_generales.receta_farmacia ? datos_generales.receta_farmacia : false}\r\n                    onChange={checkFarmacia}\r\n                    name=\"receta_farmacia\"\r\n                  />\r\n                }\r\n                label=\"Necesita receta\"\r\n                name=\"receta_farmacia\"\r\n              />\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from '@material-ui/core';\r\nimport { Cached, Close, Edit } from '@material-ui/icons';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t},\r\n\ttableRow: {\r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\nexport default function TablaPresentaciones({ from, setOnUpdate, onUpdate }) {\r\n\tconst classes = useStyles();\r\n\tconst { presentaciones } = useContext(RegProductoContext);\r\n\r\n\tlet mostrar_presentaciones = [ ...presentaciones ].sort((a, b) => compareFunction(a, b));\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Existencia</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Código de barras</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell width={200}>Nombre</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Existente</TableCell>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Editar</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{mostrar_presentaciones.map((producto, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tfrom={from}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst RenderPresentacionesRows = ({ producto, index,  from, setOnUpdate, onUpdate }) => {\r\n\tconst { presentaciones, setPresentaciones, preciosP, precios } = useContext(RegProductoContext);\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst textfield = useRef(null);\r\n\r\n\tconst copy_presentaciones = [...presentaciones].sort((a, b) => compareFunction(a, b))\r\n\tconst copy_element_presentacion = { ...copy_presentaciones[index] };\r\n\tconst copy_producto = { ...producto };\r\n\r\n\tif(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad = 0\r\n\t}\r\n\t\r\n\tconst handleEditCancel = () => {\r\n\t\tif (!copy_producto.cantidad) {\r\n\t\t\tcopy_element_presentacion.cantidad = 0;\r\n\t\t}\r\n\t\tif (!copy_producto.precio) {\r\n\t\t\tcopy_element_presentacion.precio = preciosP[0].precio_neto;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t\tsetDisabledInput(true);\r\n\t};\r\n\r\n\tconst obtenerDatos = (event) => {\r\n\t\tconst {value, name }= event.target;\r\n\t\tconsole.log(name)\r\n\t\tif (name === 'cantidad') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.cantidad = '';\r\n\t\t\t\tcopy_element_presentacion.existencia = false;\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.cantidad = parseFloat(value);\r\n\t\t\tcopy_element_presentacion.existencia = true;\r\n\t\t} else if (name === 'precio') {\r\n\t\t\tlet { iva, ieps } = precios;\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.precio = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tlet precio_neto = parseFloat(value);\r\n\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\tlet suma_impuestos = parseFloat(`0.${varIVA}`) + parseFloat(`0.${varIEPS}`);\r\n\t\t\tlet precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n\t\t\tlet iva_precio = parseFloat((precio_venta * parseFloat(`0.${varIVA}`)).toFixed(2));\r\n\t\t\tlet ieps_precio = parseFloat((precio_venta * parseFloat(`0.${varIEPS}`)).toFixed(2));\r\n\t\t\tlet PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\t\t\tlet utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n\t\t\tcopy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n\t\t\tcopy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n\t\t\tcopy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n\t\t\t\r\n\t\t\tcopy_element_presentacion.precio = parseFloat(value);\r\n\t\t} else {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.codigo_barras = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.codigo_barras = value;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst GenCodigoBarras = () => {\r\n\t\tconst max = 999999999999;\r\n\t\tconst min = 100000000000;\r\n\t\tconst codigo_barras = Math.floor(Math.random() * (max - min + 1) + min).toString();\r\n\t\tcopy_element_presentacion.codigo_barras = codigo_barras;\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst actionButton = () => {\r\n\t\tif (!disabledInput) {\r\n\t\t\thandleEditCancel();\r\n\t\t\t/* quitar del array\t */\r\n\t\t\tonUpdate.splice(onUpdate.length - 1, 1);\r\n\t\t\tsetOnUpdate([ ...onUpdate ]);\r\n\t\t} else {\r\n\t\t\tsetDisabledInput(!disabledInput);\r\n\t\t\t/*  agregar al array */\r\n\t\t\tsetOnUpdate([ ...onUpdate, index ]);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={220}>\r\n\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\t\t/* disabled={disabledInput} */\r\n\t\t\t\t\t\tvalue={copy_producto.codigo_barras}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t\t\tdisabled={!copy_producto.nuevo ? true : disabledInput}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) :  copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Box>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.medida._id ? <Chip label={copy_producto.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_producto.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_producto.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={110}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.precio}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{producto.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t\t) : null}\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.cantidad}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"cantidad\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => actionButton()}>\r\n\t\t\t\t\t{!disabledInput ? <Close /> : <Edit />}\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { useContext, useState,  useEffect, useCallback } from 'react';\r\nimport { Typography, Divider, Tooltip, } from '@material-ui/core';\r\nimport { Box,Grid } from '@material-ui/core';\r\nimport { makeStyles, useTheme } from '@material-ui/core';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nimport { Done } from '@material-ui/icons';\r\nimport TablaPresentaciones from './TablaPresentaciones';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\n// import { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\n// import ContainerRegistroAlmacen from '../../../sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearColor';\r\nimport CrearTallasProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearTalla';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\theight: 50,\r\n\t\twidth: 50,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: '15%',\r\n\t\tcursor: 'pointer'\r\n\t}\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n\treturn Math.floor(Math.random() * (999999999999 - 100000000000 + 1) + 100000000000).toString();\r\n};\r\n\r\nexport default function TallasColoresRapidos({ \r\n\tobtenerConsultasProducto, \r\n\trefetch, \r\n\tdatos, \r\n\tfrom\r\n}) {\r\n\tconst {\r\n\t\t// almacen_inicial,\r\n\t\t// setAlmacenInicial,\r\n\t\tpresentaciones,\r\n\t\tdatos_generales,\r\n\t} = useContext(RegProductoContext);\r\n\tconst { colores, tallas, calzados } = obtenerConsultasProducto;\r\n\tconst [ medidasSeleccionadas, setMedidasSeleccionadas ] = useState([]);\r\n\tconst [ coloresSeleccionados, setColoresSeleccionados ] = useState([]);\r\n\tconst medidas = datos_generales.tipo_producto === 'ROPA' ? [ ...tallas ] : [ ...calzados ];\r\n\tconst [ onUpdate, setOnUpdate ] = useState([]);\r\n\r\n\tconst obtenerColoresSeleccinados = useCallback(\r\n\t\t() => {\r\n\t\t\tlet colors = [];\r\n\t\t\tlet medidas = [];\r\n\t\t\tconst copy_presentaciones = [ ...presentaciones ];\r\n\r\n\t\t\tcopy_presentaciones.forEach((element) => {\r\n\t\t\t\tif (element.color._id) colors.push(element.color);\r\n\t\t\t\tif (element.medida._id) medidas.push(element.medida);\r\n\t\t\t});\r\n\r\n\t\t\tvar hashColor = {};\r\n\t\t\tvar hashMedida = {};\r\n\t\t\tconst colores_existentes = colors.filter((color) => {\r\n\t\t\t\tvar existColor = !hashColor[color._id];\r\n\t\t\t\thashColor[color._id] = true;\r\n\t\t\t\treturn existColor;\r\n\t\t\t});\r\n\t\t\tconst medidas_existentes = medidas.filter((medida) => {\r\n\t\t\t\tvar existMedida = !hashMedida[medida._id];\r\n\t\t\t\thashMedida[medida._id] = true;\r\n\t\t\t\treturn existMedida;\r\n\t\t\t});\r\n\r\n\t\t\tsetColoresSeleccionados([ ...colores_existentes ]);\r\n\t\t\tsetMedidasSeleccionadas([ ...medidas_existentes ]);\r\n\t\t},\r\n\t\t[ presentaciones ]\r\n\t);\r\n\r\n\t// const obtenerAlmacenes = (event, child) => {\r\n\t// \tsetAlmacenInicial({\r\n\t// \t\t...almacen_inicial,\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\t[child.props.name]: child.props.id\r\n\t// \t});\r\n\t// };\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tobtenerColoresSeleccinados();\r\n\t\t},\r\n\t\t[ obtenerColoresSeleccinados ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={9}>\r\n\t\t\t\t\t<TablaPresentaciones from={from} setOnUpdate={setOnUpdate} onUpdate={onUpdate} />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={3}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmy={2}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>{datos_generales.tipo_producto === 'ROPA' ? 'Talla' : 'Número'}</Typography>\r\n\t\t\t\t\t\t<CrearTallasProducto setMedidasSeleccionadas={setMedidasSeleccionadas} refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{medidas.map((talla, index) => (\r\n\t\t\t\t\t\t\t\t<RenderTallas\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\ttalla={talla}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tsetMedidasSeleccionadas={setMedidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmt={1}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>Color</Typography>\r\n\t\t\t\t\t\t<CrearColorProducto refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{colores.map((color, index) => (\r\n\t\t\t\t\t\t\t\t<Colores\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tsetColoresSeleccionados={setColoresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderTallas = ({\r\n\ttalla,\r\n\tcoloresSeleccionados,\r\n\tmedidasSeleccionadas,\r\n\tsetMedidasSeleccionadas,\r\n\t// datos\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tsetPresentaciones, \r\n\t\tpresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarMedidas = useCallback(\r\n\t// \t() => {\r\n\t// \t\tmedidasSeleccionadas.forEach((res) => {\r\n\t// \t\t\tif (res._id === talla._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ talla._id, medidasSeleccionadas ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarMedidas();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarMedidas ]\r\n\t// );\r\n\r\n\r\n\tconst handleAddTallas = (value) => {\r\n\t\tconst medidas_seleccionadas_temp = [ ...medidasSeleccionadas ];\r\n\r\n\t\tif (!selected) {\r\n\t\t\tmedidas_seleccionadas_temp.push(talla);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tmedidas_seleccionadas_temp.forEach((res, index) => {\r\n\t\t\t\tif (res._id === talla._id) {\r\n\t\t\t\t\tmedidas_seleccionadas_temp.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.medida._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!coloresSeleccionados.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.medida._id === producto_medida._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length === 1 && value) {\r\n\t\t\t/* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: medidas_seleccionadas_temp[k],\r\n\t\t\t\t\t\tcolor: array_medidad_finales[i].color,\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length > 0) {\r\n\t\t\t/* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tconst producto_color = coloresSeleccionados[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && !medidas_seleccionadas_temp.length) {\r\n\t\t\t/* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.medida._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: objeto_presentaciones_final.color,\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetMedidasSeleccionadas([ ...medidas_seleccionadas_temp ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\tonClick={() => handleAddTallas(!selected)}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tselected ? (\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: theme.palette.primary.main\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(selected ? theme.palette.primary.main : '#FFFFFF'),\r\n\t\t\t\t\t\tfontSize: 16\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{talla.talla}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Colores = ({ \r\n\tcolor, \r\n\tcoloresSeleccionados, \r\n\tsetColoresSeleccionados, \r\n\tmedidasSeleccionadas, \r\n\tdatos \r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tpresentaciones, \r\n\t\tsetPresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarColores = useCallback(\r\n\t// \t() => {\r\n\t// \t\tcoloresSeleccionados.forEach((res) => {\r\n\t// \t\t\tif (res._id === color._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ color._id, coloresSeleccionados ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarColores();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarColores ]\r\n\t// );\r\n\r\n\tconst obtenerColores = (value) => {\r\n\t\tif (!selected) {\r\n\t\t\tcoloresSeleccionados.push(color);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tcoloresSeleccionados.forEach((res, index) => {\r\n\t\t\t\tif (res._id === color._id) {\r\n\t\t\t\t\tcoloresSeleccionados.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.color._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: {},\r\n\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!medidasSeleccionadas.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.color._id === producto_color._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length === 1 && value) {\r\n\t\t\t/* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: array_medidad_finales[i].medida,\r\n\t\t\t\t\t\tcolor: coloresSeleccionados[k],\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length > 0) {\r\n\t\t\t/* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tfor (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n\t\t\t\t\tconst producto_medida = medidasSeleccionadas[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && !coloresSeleccionados.length) {\r\n\t\t\t/* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.color._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: objeto_presentaciones_final.medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetColoresSeleccionados([ ...coloresSeleccionados ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<Tooltip title={color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: color.hex,\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(color.hex)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => obtenerColores(!selected)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{selected ? <Done /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { useApolloClient } from  \"@apollo/client\";\r\nimport { LOGEAR_USUARIO_ACCESOS } from \"../../gql/Catalogos/usuarios\";\r\nimport BackdropComponent from \"../Layouts/BackDrop\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n    paddingTop: 0,\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Acceso() {\r\n  const classes = useStyles();\r\n  const client = useApolloClient();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const {\r\n    departamentos,\r\n    abrirPanelAcceso,\r\n    setAbrirPanelAcceso,\r\n    setReloadProductoRapido,\r\n    setReloadAdministrador,\r\n    setReloadCancelarVenta,\r\n    setReloadVerPrecios,\r\n    setReloadVerPreCorte,\r\n    setReloadEliminarVentaEspera,\r\n    setReloadCrearCotizacion,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [datosUser, setDatosUser] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickClose = async () => {\r\n    setDatosUser([]);\r\n    setAbrirPanelAcceso(false);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosUser({ ...datosUser, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const input = {\r\n    numero_usuario: parseInt(datosUser.numero_usuario),\r\n    password: datosUser.password,\r\n    departamento: departamentos.departamento,\r\n    subDepartamento: departamentos.subDepartamento,\r\n    tipo_acceso: departamentos.tipo_acceso,\r\n  };\r\n\r\n  const obtenerQuery = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: LOGEAR_USUARIO_ACCESOS,\r\n        variables: { input },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      if (response.data.obtenerAccesoPermiso.permiso_concedido === true) {\r\n        SwitchPermisos(response.data.obtenerAccesoPermiso.subDepartamento);\r\n        setAbrirPanelAcceso(false);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: \"Permiso Autorizado\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosUser([]);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const SwitchPermisos = (subDepartamento) => {\r\n    switch (subDepartamento) {\r\n      case \"administrador\":\r\n        setReloadAdministrador(true);\r\n        break;\r\n      case \"producto_rapido\":\r\n        setReloadProductoRapido(true);\r\n        break;\r\n      case \"cancelar_venta\":\r\n        setReloadCancelarVenta(true);\r\n        break;\r\n      case \"precios_productos\":\r\n        setReloadVerPrecios(true);\r\n        break;\r\n      case \"pre_corte\":\r\n        setReloadVerPreCorte(true);\r\n        break;\r\n      case \"cotizaciones\":\r\n        setReloadCrearCotizacion(true);\r\n        break;\r\n      case \"eliminar_ventas\":\r\n        setReloadEliminarVentaEspera(true);\r\n        break;\r\n      default:\r\n        setAlert({\r\n            message: \"Permiso no autorizado\",\r\n            status: \"error\",\r\n            open: true,\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        open={abrirPanelAcceso}\r\n        onClose={handleClickClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <BackdropComponent loading={loading} />\r\n        <Box p={3}>\r\n          <Box display='flex' p={1}>\r\n            <Box flexGrow={1}>\r\n              <Typography>\r\n                <b>Por favor autoriza con tu usuario y contraseña</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box >\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => handleClickClose()} size=\"medium\">\r\n                    <CloseIcon />\r\n                </Button>\r\n            </Box>\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Numero Usuario:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  name=\"numero_usuario\"\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Contrasena:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            variant=\"contained\"\r\n            onClick={() => obtenerQuery()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport RegistroInfoAdidional from \"../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport RegistroInformacionRapido from \"./RegistroInformacionRapido\";\r\nimport { NavigateBefore, NavigateNext } from \"@material-ui/icons\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../context/Catalogos/initialStatesProducto\";\r\nimport { cleanTypenames } from \"../../../config/reuserFunctions\";\r\nimport TallasColoresRapidos from \"./TallasColoresRapidos/TallasColoresRapidos\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO_RAPIDO,\r\n  OBTENER_CONSULTAS,\r\n} from \"../../../gql/Catalogos/productos\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../../../components/AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { validateJsonEdit } from \"../../sucursales/Catalogos/Producto/validateDatos\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  iconSizeDialogs: {\r\n    width: 80,\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  iconSizeSecondSuperior: {\r\n    width: 20,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ArticuloRapido() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    setPreciosP,\r\n    preciosP,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    presentaciones,\r\n    setPresentaciones,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const { setAlert, open, setOpen } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadProductoRapido,\r\n    setReloadProductoRapido,\r\n    setAbrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [crearProductoRapido] = useMutation(CREAR_PRODUCTO_RAPIDO);\r\n\r\n  const { data, refetch, loading, error } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setCentroDeCostos({});\r\n    setValidacion({ error: false, message: \"\" });\r\n    setPresentaciones([]);\r\n    setValue(0);\r\n  };\r\n\r\n  const [abrirTallaColor, setAbrirTallaColor] = useState(false);\r\n\r\n  const [cantidad, setCantidad] = useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    resetInitialStates();\r\n    setAbrirTallaColor(false);\r\n  };\r\n\r\n  const AceesoProductoRapido = () => {\r\n    if (sesion.accesos.ventas.producto_rapido.ver === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(true);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"producto_rapido\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadProductoRapido === true) {\r\n      handleClickOpen();\r\n      setReloadProductoRapido(false);\r\n    }\r\n  }, [reloadProductoRapido]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, []);\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 82) {\r\n      AceesoProductoRapido();\r\n    }\r\n  }\r\n\r\n  if (loading | !data || error)\r\n    return (\r\n      <Button\r\n        disabled\r\n        value=\"articulo-rapido\"\r\n        style={{\r\n          textTransform: \"none\",\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          pointerEvents: \"none\",\r\n          opacity: 0.5,\r\n        }}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\"\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Producto Rapido</b>\r\n          </Typography>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + R</b>\r\n          </Typography>\r\n        </Box>\r\n      </Button>\r\n    );\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const saveData = async () => {\r\n    setCargando(true);\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      return setValidacion(true);\r\n    } else {\r\n      if (\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n      ) {\r\n        return setValidacion(true);\r\n      }\r\n    }\r\n    /* if (unidadesVenta.length === 0) {\r\n      unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = unidadesVenta.filter(\r\n        (unidades) => unidades.default\r\n      );\r\n      if (unidadxdefecto.length === 0) unidadesVenta.push(unidadVentaXDefecto);\r\n    } */\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n    precios.precios_producto = preciosP;\r\n\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      setPresentaciones(initial_state_presentaciones);\r\n      setCantidad(0);\r\n    }\r\n\r\n    const data = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      cantidad,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    try {\r\n      const input = cleanTypenames(data);\r\n      const result = await crearProductoRapido({\r\n        variables: {\r\n          input,\r\n        },\r\n      });\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `¡Listo ${result.data.crearProductoRapido.message}!`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        datos_generales.tipo_producto === \"OTROS\"\r\n          ? !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !cantidad ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n            ? true\r\n            : false\r\n          : !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (value === 1) {\r\n      return saveButton;\r\n    } else {\r\n      if (\r\n        datos_generales.tipo_producto === \"OTROS\" ||\r\n        !datos_generales.tipo_producto\r\n      ) {\r\n        return saveButton;\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value + 1)}\r\n            size=\"large\"\r\n            endIcon={<NavigateNext />}\r\n            disableElevation\r\n          >\r\n            Siguiente\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Acceso />\r\n      <Button\r\n        onClick={() => {\r\n          AceesoProductoRapido();\r\n        }}\r\n        value=\"articulo-rapido\"\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\"\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Producto Rapido</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + R</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\">\r\n            <Box display=\"flex\" flexGrow={1} justifyContent=\"space-between\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab\r\n                  label=\"Datos generales\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista1 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                        alt=\"icono registro\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(0)}\r\n                />\r\n                {abrirTallaColor === false ||\r\n                datos_generales.tipo_producto === \"OTROS\" ? null : (\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                          validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                )}\r\n              </Tabs>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  handleClickOpen();\r\n                  resetInitialStates();\r\n                }}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={cargando}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <div className={classes.root}>\r\n            <TabPanel value={value} index={0}>\r\n              <RegistroInformacionRapido\r\n                setAbrirTallaColor={setAbrirTallaColor}\r\n                setCantidad={setCantidad}\r\n                cantidad={cantidad}\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n              <RegistroInfoAdidional />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <TallasColoresRapidos\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n            </TabPanel>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setValue(value - 1)}\r\n              size=\"large\"\r\n              startIcon={<NavigateBefore />}\r\n              disabled={value === 0}\r\n            >\r\n              Anterior\r\n            </Button>\r\n          </Box>\r\n          <Box p={1}>\r\n            <ButtonActions />\r\n          </Box>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../context/Catalogos/CtxRegProducto'\r\nimport ArticuloRapido from './ArticuloRapido'\r\n \r\nexport default function ProductoRapidoIndex({handleClickOpen}){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <ArticuloRapido handleClickOpen={handleClickOpen} />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'}\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10)\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t}\r\n});\r\n\r\nexport default function CotizacionesPendientes({ setOpen }) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRetomar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<CotizacionesRows row={row} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst CotizacionesRows = ({row}) => {\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CotizacionesPendientes from \"./CotizacionesPendientes\";\r\n\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\nimport moment from \"moment\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ListaCotizaciones() {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcCurrencyExchange style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cotizaciones</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + T</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={\"lg\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja2\"\r\n                  style={{ width: 58 }}\r\n                />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography variant=\"h6\">Cotizaciones pendientes</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box mt={2} textAlign=\"right\">\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().format(\"L\")}\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().format(\"LT\")} hrs.\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">{sesion?.nombre}</Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box p={3}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <CotizacionesPendientes setOpen={setOpen} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Divider, BottomNavigation } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport useStyles from \"./styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nimport DepositoRetiroCaja from \"../../pages/ventas/Operaciones/DepositoRetiroCaja\";\r\nimport Turnos from \"../../pages/ventas/AbrirCerrarTurno/Turnos\";\r\nimport PreCorteCaja from \"../../pages/ventas/Operaciones/PreCorteCaja\";\r\nimport VentaEnEspera from \"../../pages/ventas/Operaciones/VentaEnEspera\";\r\nimport ProductoRapidoIndex from \"../../pages/ventas/ArticuloRapido/indexArticuloRapido\";\r\n\r\nimport SnackBarMessages from \"../SnackBarMessages\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport ListaCotizaciones from \"../../pages/ventas/Cotizacion/ListaCotizaciones\";\r\n\r\nfunction NavegacionVentas(props) {\r\n  const {\r\n    alert,\r\n    setAlert,\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    setUbicacionTurno,\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadAdministrador,\r\n    setReloadAdministrador,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(\"venta-general\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  moment.locale(\"es\");\r\n\r\n  const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  function Administrador() {\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadAdministrador === true) {\r\n      props.history.push(\"/admin\");\r\n      setReloadAdministrador(false);\r\n    }\r\n  }, [reloadAdministrador]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Acceso setReloadAdministrador={setReloadAdministrador} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BottomNavigation\r\n        value={value}\r\n        onChange={(event, newValue) => {\r\n          setValue(newValue);\r\n        }}\r\n        className={classes.navigationTop}\r\n      >\r\n        <ProductoRapidoIndex />\r\n        <Divider orientation=\"vertical\" />\r\n        <ListaCotizaciones />\r\n        <Divider orientation=\"vertical\" />\r\n        <DepositoRetiroCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <Turnos />\r\n        <Divider orientation=\"vertical\" />\r\n        <PreCorteCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <VentaEnEspera />\r\n      </BottomNavigation>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withRouter(NavegacionVentas);\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport { FcDonate } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Abonos() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 117) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcDonate style={{ fontSize: 35 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Abonos</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F6</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>Abonitos</DialogContent>\r\n        <DialogActions></DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nconst columns = [\r\n  { id: \"clave\", label: \"Clave\", minWidth: 40, align: \"center\" },\r\n  { id: \"codigo\", label: \"C. Barras\", minWidth: 40, align: \"center\" },\r\n  { id: \"descripcion\", label: \"Nombre/Descrip.\", minWidth: 330 },\r\n  { id: \"existencia\", label: \"Exist.\", minWidth: 30, align: \"center\" },\r\n  { id: \"unidad\", label: \"Unidad\", minWidth: 30, align: \"center\" },\r\n  { id: \"precio\", label: \"Precio\", minWidth: 30, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 15,\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({\r\n  productosBusqueda,\r\n  setProductoSeleccionado,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productosBusqueda?.map((producto, index) => {\r\n              return (\r\n                <RowsProductos\r\n                  key={index}\r\n                  producto={producto}\r\n                  setProductoSeleccionado={setProductoSeleccionado}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nfunction RowsProductos({ producto, setProductoSeleccionado }) {\r\n  return (\r\n    <>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        onClick={() => setProductoSeleccionado(producto)}\r\n      >\r\n        <TableCell align=\"center\">\r\n          {producto.id_producto.datos_generales.clave_alterna}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {producto.codigo_barras ? producto.codigo_barras : \"N/A\"}\r\n        </TableCell>\r\n        <TableCell>\r\n          {producto.id_producto.datos_generales.nombre_comercial}\r\n        </TableCell>\r\n        <TableCell align=\"center\">{producto.cantidad}</TableCell>\r\n        <TableCell align=\"center\">{producto.unidad}</TableCell>\r\n        <TableCell align=\"center\">{producto.precio}</TableCell>\r\n      </TableRow>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\n\r\nimport {\r\n  TableContainer,\r\n  Table,\r\n  Box,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Grid,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nexport default function InformacionProducto({ producto, productoSeleccionado }) {\r\n  const classes = useStyles();\r\n\r\n  console.log(producto)\r\n  console.log(productoSeleccionado)\r\n  if (productoSeleccionado.length === 0) return null;\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid item md={2} style={{display: \"flex\", justifyContent: \"center\"}}>\r\n        {productoSeleccionado?.id_producto?.imagenes.length > 0 ? (\r\n          <Box className={classes.containerImage}>\r\n            <img\r\n              alt=\"Imagen producto\"\r\n              src={productoSeleccionado?.id_producto?.imagenes[0].url_imagen}\r\n              className={classes.imagen}\r\n            />\r\n          </Box>\r\n        ) : (\r\n          <Box p={4} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <PhotoLibraryIcon style={{ fontSize: 40 }} />\r\n          </Box>\r\n        )}\r\n      </Grid>\r\n      <Grid item md={10}>\r\n        <div className={classes.formInputFlex}>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              <b>Nombre:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>\r\n                {\r\n                  productoSeleccionado.id_producto.datos_generales.nombre_comercial\r\n                }\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              <b>Codigo Barras:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>{productoSeleccionado.codigo_barras ? productoSeleccionado.codigo_barras : \"N/A\"}</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"70%\">\r\n            <Typography>\r\n              <b>Cantidad:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>{productoSeleccionado?.cantidad}</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"70%\">\r\n            <Typography>\r\n              <b>Unidad:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>{productoSeleccionado?.unidad}</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"70%\">\r\n            <Typography>\r\n              <b>Descuento:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>\r\n                {productoSeleccionado?.descuento\r\n                  ? productoSeleccionado?.descuento.precio_neto\r\n                  : 0}\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"70%\">\r\n            <Typography>\r\n              <b>% Descuento:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <Typography>\r\n                {productoSeleccionado?.descuento\r\n                  ? productoSeleccionado?.descuento.precio_neto\r\n                  : 0}\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </div>\r\n      </Grid>\r\n      <Grid item lg={12}>\r\n        <PreciosDeVentaCompras\r\n          precios={productoSeleccionado?.id_producto?.precios?.precios_producto}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nfunction PreciosDeVentaCompras({ precios }) {\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {precios?.map((data, index) => (\r\n                  <TableCell key={index} style={{ border: 0 }}>\r\n                    {data?.precio_neto}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  DialogActions,\r\n  Dialog,\r\n  DialogContent,\r\n  Grid,\r\n  Typography,\r\n  Slide,\r\n  InputBase,\r\n  Paper,\r\n  IconButton,\r\n  DialogTitle,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { FcSearch } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { CONSULTA_PRODUCTOS_VENTAS } from \"../../../gql/Ventas/ventas_generales\";\r\nimport InformacionProducto from \"./InformacionProducto\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport {\r\n  calculatePrices2,\r\n  findProductArray,\r\n  verifiPrising,\r\n} from \"../../../config/reuserFunctions\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function BuscarProducto() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [searchProducto, setSearchProducto] = useState([]);\r\n  const [productoSeleccionado, setProductoSeleccionado] = useState([]);\r\n  const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  });\r\n\r\n  const [value] = useDebounce(searchProducto, 500);\r\n\r\n  const { data, refetch, loading } = useQuery(CONSULTA_PRODUCTOS_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        producto: value.producto ? value.producto : \"\",\r\n      },\r\n    },\r\n  });\r\n\r\n  let productosBusqueda = [];\r\n\r\n  if (data) productosBusqueda = data.obtenerProductosVentas;\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSearchProducto({ ...searchProducto, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setProductoSeleccionado([]);\r\n    refetch();\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 80) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    });\r\n  }, []);\r\n\r\n  const agregarProductos = async (producto) => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granelBase,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      //   console.log(new_prices.newP);\r\n\r\n      productosVentasTemp.push(new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      //   console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: granelBase,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    handleClickOpen();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Productos</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + P</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h6\">Buscar productos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar producto\"\r\n              name=\"producto\"\r\n              size=\"small\"\r\n              fullWidth\r\n              onChange={obtenerDatos}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <InformacionProducto productoSeleccionado={productoSeleccionado} />\r\n          <Grid>\r\n            <ListaProductos\r\n              productosBusqueda={productosBusqueda}\r\n              setProductoSeleccionado={setProductoSeleccionado}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => agregarProductos(productoSeleccionado)}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  makeStyles,\r\n  Paper,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"../../sucursales/Catalogos/Cliente/ListaClientes\";\r\nimport CrearCliente from \"../../sucursales/Catalogos/Cliente/CrearCliente\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcBusinessman } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ClientesVentas() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 67) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n        <Button\r\n          style={{\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            border: \".6px solid #DBDBDB\",\r\n          }}\r\n          onClick={handleClickOpen}\r\n          disabled={!turnoEnCurso}\r\n        >\r\n          <Box>\r\n            <Box>\r\n              <FcBusinessman style={{ fontSize: 45 }} />\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"body2\">\r\n                <b>Clientes</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n                <b>aLT + C</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={open}\r\n          onClose={handleClickOpen}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <DialogContent>\r\n            <Grid container item lg={12}>\r\n              <Box ml={3} display=\"flex\" flexGrow={1} alignItems=\"center\">\r\n                <Box>\r\n                  <FcBusinessman style={{ fontSize: 65 }} />\r\n                </Box>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                  Clientes\r\n                </Typography>\r\n              </Box>\r\n              <Box mr={2}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClickOpen}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n            <Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n              <Box mr={5} minWidth=\"70%\">\r\n                <Paper className={classes.root}>\r\n                  <InputBase\r\n                    fullWidth\r\n                    placeholder=\"Buscar cliente...\"\r\n                    onChange={(e) => setValues(e.target.value)}\r\n                    onKeyPress={pressEnter}\r\n                    value={values}\r\n                  />\r\n                  <IconButton onClick={() => setValues(values)}>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Box>\r\n              <CrearCliente\r\n                tipo=\"CLIENTE\"\r\n                accion=\"registrar\"\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Box>\r\n            <Box mx={2}>\r\n              <ListaClientes\r\n                tipo=\"CLIENTE\"\r\n                filtro={values}\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Box>\r\n          </DialogContent>\r\n        </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COTIZACION = gql`\r\nmutation crearCotizacion( $input: CrearVentasInput!, $empresa: ID!, $sucursal: ID!, $usuario: ID!, $caja: ID!) {\r\n    crearCotizacion(input: $input, empresa: $empresa, sucursal: $sucursal, usuario: $usuario, caja: $caja, ) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { useContext, useState } from 'react';\r\nimport {\r\n    Box, Button, DialogContent, \r\n    FormControl, Grid, MenuItem, \r\n    Paper, \r\n    Select, Slider, TextField, Typography \r\n} from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport MoneyOffIcon from '@material-ui/icons/MoneyOff';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { CREAR_COTIZACION } from \"../../../gql/Ventas/cotizaciones\";\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { useMutation } from '@apollo/client';\r\nimport { generateCodeNumerico } from '../../../config/reuserFunctions';\r\n\r\nexport default function NuevaCotizacion({ setOpen }) {\r\n    const { setAlert } = useContext(VentasContext);\r\n\r\n    const [ CrearCotizacion ] = useMutation(CREAR_COTIZACION);\r\n\r\n    const datosVentas = JSON.parse(localStorage.getItem('DatosVentas'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ newCotizacion, setNewCotizacion ] = useState([]);\r\n    const [ preciosDescuentos, setPreciosDescuentos ] = useState([]);\r\n    const [ totalDescount, setTotalDescount ] = useState(preciosDescuentos ? preciosDescuentos?.descuento_general?.precio_con_descuento : 0);\r\n    const [ value, setValue ] =  useState(preciosDescuentos?.descuento_general?.porciento ? preciosDescuentos?.descuento_general?.porciento : 0);\r\n\r\n    let descuento_general = [];\r\n    var totalCompra = datosVentas?.total;\r\n\r\n    \r\n    const classes = useStyles();\r\n\r\n    const obtenerDatos = (e) => {\r\n        setNewCotizacion({...newCotizacion, [e.target.name]: e.target.value});\r\n    };\r\n    console.log(newCotizacion)\r\n\r\n    const input = {\r\n        folio: generateCodeNumerico(8), \r\n        descuento: datosVentas.descuento,\r\n        ieps: datosVentas.ieps,\r\n        impuestos: datosVentas.impuestos,\r\n        iva: datosVentas.iva,\r\n        monedero: datosVentas.monedero,\r\n        subTotal: datosVentas.subTotal,\r\n        total: datosVentas.total,\r\n        venta_cliente:  datosVentas.cliente ? true : false,\r\n        montos_en_caja: {},\r\n        credito: newCotizacion.tipo_venta === 'CREDITO' ? true : false,\r\n        descuento_general_activo: preciosDescuentos?.descuento_general_activo ? preciosDescuentos?.descuento_general_activo : false,\r\n        decuento_general: preciosDescuentos?.descuento_general ? preciosDescuentos?.descuento_general :\r\n        {\r\n            \"porciento\": 0,\r\n            \"precio_con_descuento\": 0,\r\n            \"cantidad_descontado\": 0\r\n        },\r\n        dias_de_credito_venta: \"\", \r\n        fecha_de_vencimiento_credito: \"\",\r\n        fecha_vencimiento_cotizacion: newCotizacion.fecha_vencimiento,\r\n        cliente: datosVentas.cliente ?  datosVentas.cliente : {},\r\n        productos: datosVentas.productos,\r\n    };\r\n\r\n    const crearCotizacion = async () => {\r\n        try {\r\n            if(!newCotizacion.fecha_vencimiento || !newCotizacion.tipo_venta){\r\n                setAlert({\r\n                    message: `Por favor completa los datos necesarios`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }else{\r\n                const registroCotizacion = await CrearCotizacion({\r\n                    variables: {\r\n                        input,\r\n                        empresa: \"60c120b6a694891f58d32a1d\",\r\n                        sucursal: \"60c8e180340d5d223432a916\",\r\n                        usuario: \"60dde52c5cda9d5510c4b7d0\",\r\n                        caja: \"61a5037918594a4ecdc1c7bf\"\r\n                    }\r\n                });\r\n                console.log(registroCotizacion);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n            if(error.networkError.result){\r\n\t\t\t\tconsole.log(error.networkError.result.errors);\r\n\t\t\t}else if(error.graphQLErrors){\r\n\t\t\t\tconsole.log(error.graphQLErrors.message);\r\n\t\t\t}\r\n\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const obtenerPorciento = (event, newValue) => {\r\n        setValue(newValue);\r\n        var porcentaje  =  parseFloat((100 - newValue).toFixed(6));\r\n        var descuento = parseFloat((totalCompra * porcentaje / 100).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - descuento).toFixed(6));\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": newValue,\r\n                \"precio_con_descuento\": descuento,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setTotalDescount(descuento);\r\n    };\r\n    \r\n    const obtenerPrecioText = (e) => {\r\n        var valorText = parseFloat(e.target.value);\r\n        setTotalDescount(valorText);\r\n        var porcentaje  = parseFloat(((valorText / totalCompra) * 100).toFixed(6));\r\n        var descuento = parseFloat((100 - porcentaje).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - valorText).toFixed(6));\r\n\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": descuento,\r\n                \"precio_con_descuento\": valorText,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setValue(descuento);\r\n    };\r\n\r\n    const eliminarDescuento = () => { \r\n        descuento_general = {\r\n            \"descuento_general_activo\": false,\r\n            \"descuento_general\": {\r\n                \"porciento\": 0,\r\n                \"precio_con_descuento\": 0,\r\n                \"cantidad_descontado\": 0\r\n            }\r\n        };\r\n        setValue(0);\r\n        setTotalDescount(0);\r\n        setPreciosDescuentos(descuento_general);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DialogContent style={{padding: 0}} >\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Usuario:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                                value={sesion ? sesion.nombre : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={moment().format('L')}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas.cliente?.nombre_cliente ? datosVentas.cliente?.nombre_cliente : \"Publico General\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha Vencimiento:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                type='date'\r\n                                onChange={obtenerDatos}\r\n                                size=\"small\"\r\n                                name=\"fecha_vencimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            No. Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas ? datosVentas.cliente?.numero_cliente : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Tipo de Venta:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                onChange={obtenerDatos}\r\n                                name=\"tipo_venta\"\r\n                            >\r\n                                <MenuItem value=''>\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value='CREDITO'>Credito</MenuItem>\r\n                                <MenuItem value='CONTADO'>Contado</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid item lg={6}>\r\n                        <Box p={1}>\r\n                            <Paper elevation={3} >\r\n                                <Box p={2} textAlign={'center'}>\r\n                                    <Typography variant=\"h6\">\r\n                                        Agregar descuento total a la venta.\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box textAlign={'center'} p={2}>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"95%\">\r\n                                            <Box display=\"flex\" alignItems=\"center\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={1}>\r\n                                                    <img \r\n                                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png' \r\n                                                        alt=\"icono admin\" \r\n                                                        style={{width: 30}}                                   \r\n                                                    />\r\n                                                </Box>\r\n                                                <Typography variant=\"h6\">\r\n                                                    Porciento descuento\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                                <Slider\r\n                                                    getAriaValueText={valuetext}\r\n                                                    value={value.toFixed(2)}\r\n                                                    aria-labelledby=\"discrete-slider-small-steps\"\r\n                                                    valueLabelDisplay=\"auto\"\r\n                                                    onChange={obtenerPorciento} \r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\">\r\n                                            <Typography variant=\"h6\" >\r\n                                                Total con descuento:\r\n                                            </Typography>\r\n                                            <Box display=\"flex\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mr={1}>\r\n                                                    <MoneyOffIcon style={{fontSize: 38, color: \"green\"}} />\r\n                                                </Box>\r\n                                                <TextField\r\n                                                    fullWidth\r\n                                                    size=\"small\"\r\n                                                    type=\"number\"\r\n                                                    name=\"precioConDescuento\"\r\n                                                    onChange={obtenerPrecioText}\r\n                                                    value={totalDescount}\r\n                                                    className={classes.input}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box \r\n                                    p={1}\r\n                                    display=\"flex\"\r\n                                    flexDirection='row-reverse'\r\n                                >\r\n                                    <Button \r\n                                        variant=\"outlined\"\r\n                                        color=\"secondary\"\r\n                                        size=\"large\"\r\n                                        onClick={eliminarDescuento}\r\n                                    >\r\n                                        Eliminar Descuento\r\n                                    </Button>\r\n                                </Box>\r\n                            </Paper>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6}>\r\n                        <Box mr={2} mt={2}>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>No. Productos: </b> {datosVentas.productos.length}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Sub total:</b> ${datosVentas ? (datosVentas.subTotal).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Impuestos:</b> ${datosVentas ? (datosVentas.impuestos).toFixed(2): 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>I.V.A.:</b> ${datosVentas ? (datosVentas.iva).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Descuento:</b> <b style={{color: \"green\"}}>${preciosDescuentos?.descuento_general ? (preciosDescuentos?.descuento_general?.cantidad_descontado).toFixed(2) : 0} </b>\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n                            <Typography variant=\"h4\">\r\n                                Total: \r\n                                <b style={{color: \"green\"}}>\r\n                                    ${preciosDescuentos?.descuento_general && preciosDescuentos?.descuento_general?.precio_con_descuento > 0? \r\n                                    (preciosDescuentos?.descuento_general?.precio_con_descuento).toFixed(2) : (\r\n                                        datosVentas ? (datosVentas.total).toFixed(2) : 0\r\n                                    )}\r\n                                </b>\r\n                            </Typography>\r\n                            <Box mt={.5} mr={1}>\r\n                                <MonetizationOnIcon style={{fontSize: 37, color: \"green\"}} />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display='flex' justifyContent={'flex-end'}  >\r\n                            <Box mt={6}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    size=\"large\"\r\n                                    onClick={crearCotizacion}\r\n                                >\r\n                                    Guardar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n           \r\n        </>\r\n    )\r\n};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\nimport NuevaCotizacion from \"./NuevaCotizacion\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport useStyles from \"../styles\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function Cotizacion({ type }) {\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [tipoVentana, setTipoVentana] = useState(type);\r\n\r\n  const {\r\n    reloadCrearCotizacion,\r\n    setReloadCrearCotizacion,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = (tipo) => {\r\n    if (!datosVentas) {\r\n      setAlert({\r\n        message: `Lo sentimos no hay productos que cotizar`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      return null;\r\n    } else {\r\n      if (sesion?.accesos.ventas.cotizaciones.ver === true) {\r\n        setOpen(!open);\r\n      } else {\r\n        console.log(\"pedir permiso\");\r\n        setAbrirPanelAcceso(!abrirPanelAcceso);\r\n        setDepartamentos({\r\n          departamento: \"ventas\",\r\n          subDepartamento: \"cotizaciones\",\r\n          tipo_acceso: \"ver\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadCrearCotizacion === true) {\r\n      setReloadCrearCotizacion(false);\r\n      setTipoVentana(\"GENERAR\");\r\n      setOpen(!open);\r\n    }\r\n  }, [reloadCrearCotizacion]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 84) {\r\n      handleClickOpen(\"\", false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen(tipoVentana)}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcCurrencyExchange style={{ fontSize: 50 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Generar cotizacion</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={tipoVentana === \"GENERAR\" ? \"md\" : \"lg\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <FcCurrencyExchange style={{ fontSize: 60 }} />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography variant=\"h6\">Nueva Cotización</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box mt={2} textAlign=\"right\">\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().format(\"L\")}\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().format(\"LT\")} hrs.\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">{sesion?.nombre}</Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box p={3}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <Box p={2}>\r\n          <NuevaCotizacion setOpen={setOpen} />\r\n        </Box>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const {\r\n    reloadCancelarVenta,\r\n    setReloadCancelarVenta,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.cancelar_venta.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"cancelar_venta\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 118 && datosVenta) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadCancelarVenta === true) {\r\n      setOpen(!open);\r\n      setReloadCancelarVenta(false);\r\n    }\r\n  }, [reloadCancelarVenta]);\r\n\r\n  const cancelarVenta = () => {\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg\"\r\n              alt=\"icono cancelarventa\"\r\n              style={{ width: 35 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cancelar Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F7</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box\r\n              display=\"flex\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"center\"\r\n              flexGrow={1}\r\n            >\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Typography variant=\"h5\">Cancelar Venta</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Box p={2}>\r\n            <Typography variant=\"h5\">\r\n              ¿Esta seguro que desea cancelar esta venta?\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => cancelarVenta()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Paper,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { FcDonate, FcShop } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { FcBusinessman, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { numerosRandom } from \"../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../pages/sucursales/Facturacion/catalogos\";\r\nimport { CREAR_VENTA } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport moment from \"moment\";\r\n\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CerrarVenta() {\r\n  const classes = useStyles();\r\n  const [cambio, setCambio] = useState(false);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const abrirCajon = () => {\r\n    setCambio(!cambio);\r\n  };\r\n  const [open, setOpen] = useState(false);\r\n  const [openModalDescuento, setOpenModalDescuento] = useState(false);\r\n  const [recalcular, setRecalcular] = useState(false);\r\n  //Datos del context\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    openBackDrop,\r\n    setOpenBackDrop,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  //States de venta\r\n  const [totalVenta, setTotalVenta] = useState(0);\r\n  const [montoPagado, setMontoPagado] = useState(0);\r\n  const [cambioVenta, setCambioVenta] = useState(0);\r\n  const [datosCliente, setDatosCliente] = useState({});\r\n  const [monedero, setMonedero] = useState(0);\r\n  const [descuentoVenta, setDescuentoVenta] = useState(0);\r\n  const [fechaVencimientoDate, setfechaVencimientoDate] = useState(\"\");\r\n  const [valorPuntoProducto, setValorPuntoProducto] = useState(0.5);\r\n  const [valorFinalCambioPuntos, setValorFinalCambioPuntos] = useState(0);\r\n  const [monederoTotal, setMonederoTotal] = useState(0);\r\n  const [ventaActual, setVentaActual] = useState(0);\r\n  const [editableClient, setEditableClient] = useState(true);\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  //States descuento venta\r\n  const [descuentoAplicarVenta, setDescuentoAplicarVenta] = useState(0);\r\n  const [descuentoPorsentajeVenta, setDescuentoPorsentajeVenta] = useState(0);\r\n\r\n  // const [descuentoAplicadoVenta, setDescuentoAplicadoVenta] = useState(0);\r\n  const [ventaOriginal, setVentaOriginal] = useState(0);\r\n  const [creditoActivo, setCreditoActivo] = useState(false);\r\n\r\n  //States de los montos a pagar\r\n  const [efectivo, setEfectivo] = useState(0);\r\n  const [tarjeta, setTarjeta] = useState(0);\r\n  const [puntos, setPuntos] = useState(0);\r\n  const [transferencia, setTransferencia] = useState(0);\r\n  const [cheque, setCheque] = useState(0);\r\n\r\n  const [createVenta] = useMutation(CREAR_VENTA);\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    setRecalcular(!recalcular);\r\n    //TODO: Guardar la venta original en un context u localstorage por si se quiere resetear el descuento\r\n  };\r\n\r\n  const hancleClickCerrarVentaCambio = () => {\r\n    setCambio(!cambio);\r\n\r\n    //Limpiar el storage de ventas\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    /* localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        cliente: {},\r\n        venta_cliente: false,\r\n        monedero: 0,\r\n        productos: [],\r\n        total: 0,\r\n        subTotal: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n      })\r\n    ); */\r\n    //Actualizar la tabla de ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n    //Quitar venta a credito\r\n    setCreditoActivo(false);\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const tecla_escape = event.keyCode;\r\n    if (tecla_escape === 27 && datosVenta) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const handleClickFinishVenta = async () => {\r\n    try {\r\n      //TODO: Colocar loading en el modal\r\n      setOpenBackDrop(!openBackDrop);\r\n      //Obtener datos del storage\r\n      const sesion = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n      const usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n      //Obtener ventad final\r\n      const ventaFinal = { ...ventaActual };\r\n      //Generar folio\r\n      const folio = numerosRandom(100000000000, 999999999999);\r\n      //Agregar folio venta\r\n      ventaFinal.folio = `${folio}`;\r\n      //Agregar los montos en caja\r\n      const montosEnCaja = {\r\n        monto_efectivo: {\r\n          monto: parseFloat(efectivo),\r\n          metodo_pago: formaPago[0].Value,\r\n        },\r\n        monto_tarjeta_debito: {\r\n          monto: parseFloat(tarjeta),\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_tarjeta_credito: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_creditos: {\r\n          monto: 0,\r\n          metodo_pago: \"\",\r\n        },\r\n        monto_monedero: {\r\n          monto: parseFloat(puntos),\r\n          metodo_pago: formaPago[4].Value,\r\n        },\r\n        monto_transferencia: {\r\n          monto: parseFloat(transferencia),\r\n          metodo_pago: formaPago[2].Value,\r\n        },\r\n        monto_cheques: {\r\n          monto: parseFloat(cheque),\r\n          metodo_pago: formaPago[1].Value,\r\n        },\r\n        monto_vales_despensa: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[6].Value,\r\n        },\r\n      };\r\n      ventaFinal.montos_en_caja = montosEnCaja;\r\n      //Colocamos si es venta a credito\r\n      ventaFinal.credito = visible;\r\n      //Agregar descuentos de ventas\r\n      ventaFinal.descuento_general_activo = false;\r\n      ventaFinal.decuento_general = null;\r\n      //Declarar dias de credito como false\r\n      ventaFinal.dias_de_credito_venta = datosCliente\r\n        ? datosCliente.dias_credito\r\n        : null;\r\n      ventaFinal.fecha_de_vencimiento_credito = fechaVencimientoDate;\r\n      ventaFinal.fecha_vencimiento_cotizacion = null;\r\n      ventaFinal.cambio = cambioVenta;\r\n      //Editar cliente\r\n      ventaFinal.editar_cliente = editableClient;\r\n      //Agregando los puntos finales\r\n      ventaFinal.puntos_totales_venta = monederoTotal;\r\n      //Enviar los datos\r\n      await createVenta({\r\n        variables: {\r\n          input: ventaFinal,\r\n          empresa: sesion.empresa,\r\n          sucursal: sesion.sucursal,\r\n          usuario: usuario._id,\r\n          caja: sesion.id_caja,\r\n        },\r\n      });\r\n      //TODO: Mandar mensaje de error en dado caso de que la venta sea incorrecta\r\n      //Cerrar modal venta\r\n      setOpen(!open);\r\n      //Mandar mensaje de cambio en dado caso de ser correcta\r\n      //Quitar loading\r\n      setOpenBackDrop(false);\r\n      hancleClickCerrarVentaCambio();\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlerChangeValue = (e, location) => {\r\n    switch (location) {\r\n      case \"EFECTIVO\":\r\n        setEfectivo(e.target.value);\r\n        break;\r\n      case \"TARJETA\":\r\n        setTarjeta(e.target.value);\r\n        break;\r\n\r\n      case \"PUNTOS\":\r\n        const valor = e.target.value != \"\" ? parseInt(e.target.value) : 0;\r\n        console.log(e.target.value, valor);\r\n        if (valor <= monederoTotal) {\r\n          const valor2 = valorPuntoProducto * parseFloat(valor);\r\n          setPuntos(valor);\r\n          // setValorFinalCambioPuntos(valor2);\r\n          setEfectivo(efectivo - valor2);\r\n          setTotalVenta(totalVenta - valor2);\r\n          // console.log(\"Valor efectivo >>> \", efectivo);\r\n          // console.log(\"Valor2 >>\", valor2);\r\n          // console.log(\"Faltante >>> \",efectivo - valor2);\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        setTransferencia(e.target.value);\r\n        break;\r\n      case \"CHEQUE\":\r\n        setCheque(e.target.value);\r\n        break;\r\n      default:\r\n        return alert(\"Error de pago\");\r\n    }\r\n  };\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const handlerChangeDiscountVenta = (e) => {\r\n    const valor = e.target.value;\r\n    setDescuentoAplicarVenta(valor);\r\n    setDescuentoPorsentajeVenta(0);\r\n    if (valor !== \"\") {\r\n      const ventaSubtotal = ventaActual.subTotal;\r\n      const descuento =\r\n        ((ventaSubtotal - parseFloat(valor)) * 100) / ventaActual.subTotal -\r\n        100;\r\n      const positiveDiscount = Math.abs(descuento);\r\n      setDescuentoPorsentajeVenta(parseFloat(positiveDiscount.toFixed(2)));\r\n    }\r\n  };\r\n\r\n  const handleChangePorsentDiscount = (e) => {\r\n    const valor = e.target.value;\r\n    setDescuentoAplicarVenta(0);\r\n    setDescuentoPorsentajeVenta(valor);\r\n    if (valor !== \"\") {\r\n      const ventaSubtotal = ventaActual.subTotal;\r\n      const val =\r\n        valor < 10\r\n          ? parseFloat(`0.0${valor.replace(\".\", \"\")}`)\r\n          : parseFloat(`0.${valor.replace(\".\", \"\")}`);\r\n      const porsent = ventaSubtotal * val;\r\n      setDescuentoAplicarVenta(porsent.toFixed(2));\r\n    }\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = () => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Obtener productos\r\n    const productStorage = ventaActual.productos;\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(descuentoPorsentajeVenta);\r\n      const dineroDescontadoDescuento = parseFloat(\r\n        product.precio_actual_object.precio_venta *\r\n          parseFloat(`0.${porsentajeNewDescuento}`).toFixed(2)\r\n      );\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          product.precio_actual_object.precio_venta - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      );\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(`0.${product.id_producto.precios.iva}`)\r\n        ).toFixed(2)\r\n      );\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(`0.${product.id_producto.precios.ieps}`)\r\n        ).toFixed(2)\r\n      );\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(descuentoPorsentajeVenta)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(descuentoPorsentajeVenta),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto =\r\n        parseFloat(precio_actual_object.dinero_descontado.toFixed(2)) *\r\n        valorGranel *\r\n        product.cantidad_venta;\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n      });\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...venta,\r\n        productos: productosFinal,\r\n        total,\r\n        subTotal,\r\n        impuestos,\r\n        iva,\r\n        ieps,\r\n        descuento,\r\n      })\r\n    );\r\n    setRecalcular(!recalcular);\r\n    setOpenModalDescuento(!openModalDescuento);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    setVentaActual(venta);\r\n\r\n    setVentaOriginal(venta);\r\n    const total = venta === null ? 0 : venta.total;\r\n    const monederoVenta = venta === null ? 0 : venta.monedero;\r\n    const cliente = venta && venta.cliente ? venta.cliente : {};\r\n    if (cliente.numero_cliente === undefined) {\r\n      setCreditoActivo(true);\r\n    } else {\r\n      setCreditoActivo(false);\r\n    }\r\n    setValorPuntoProducto(parseFloat(sesion.empresa.valor_puntos));\r\n    setTotalVenta(total.toFixed(2));\r\n    setEfectivo(total.toFixed(2));\r\n    setDatosCliente(cliente);\r\n    setMonedero(parseFloat(monederoVenta));\r\n    setMonederoTotal(\r\n      !cliente.monedero_electronico\r\n        ? parseFloat(monederoVenta)\r\n        : parseFloat(cliente.monedero_electronico) + parseFloat(monederoVenta)\r\n    );\r\n    //Recargar tabla ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  }, [recalcular]);\r\n\r\n  useEffect(() => {\r\n    setfechaVencimientoDate(\r\n      moment()\r\n        .add(\r\n          datosCliente.dias_credito ? parseInt(datosCliente.dias_credito) : 0,\r\n          \"days\"\r\n        )\r\n        .format(\"YYYY-MM-DD\")\r\n    );\r\n  }, [datosCliente, datosCliente.dias_credito]);\r\n\r\n  useEffect(() => {\r\n    setMontoPagado(\r\n      parseFloat(efectivo) +\r\n        parseFloat(tarjeta) +\r\n        parseFloat(valorFinalCambioPuntos) +\r\n        parseFloat(transferencia) +\r\n        parseFloat(cheque)\r\n    );\r\n  }, [efectivo, tarjeta, puntos, transferencia, cheque]);\r\n\r\n  useEffect(() => {\r\n    setCambioVenta(montoPagado - totalVenta);\r\n  }, [montoPagado]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 38 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pagar</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>ESC</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSizeDialogsPequeno}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={1} textAlign=\"center\">\r\n                <Typography variant=\"h4\">Ticket</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Efectivo</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"efectivo\"\r\n                    id=\"form-producto-efectivo\"\r\n                    variant=\"outlined\"\r\n                    value={efectivo}\r\n                    onChange={(e) => handlerChangeValue(e, \"EFECTIVO\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/tarjeta-de-credito.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Tarjeta</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={tarjeta}\r\n                    onChange={(e) => handlerChangeValue(e, \"TARJETA\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <FcShop style={{ fontSize: 50, cursor: \"pointer\" }} />\r\n                </Box>\r\n                <Typography variant=\"caption\">Puntos</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={puntos}\r\n                    onChange={(e) => handlerChangeValue(e, \"PUNTOS\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box p={0}>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/transferencia-bancaria.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Transferencia</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={transferencia}\r\n                    onChange={(e) => handlerChangeValue(e, \"TRANSFERENCIA\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box p={0}>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cheque.png\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Cheque</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={cheque}\r\n                    onChange={(e) => handlerChangeValue(e, \"CHEQUE\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"70%\" textAlign=\"left\">\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcBusinessman style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Cliente:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">\r\n                    {datosCliente ? datosCliente.nombre_cliente : \"Sin cliente\"}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Puntos Generados:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">{monedero}</Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Puntos Disponibles:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">\r\n                    {!datosCliente.monedero_electronico\r\n                      ? 0\r\n                      : datosCliente.monedero_electronico}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Total puntos:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">{monederoTotal}</Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Valor:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">\r\n                    ${monederoTotal * valorPuntoProducto}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n\r\n              <Box width=\"45%\" textAlign=\"right\">\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Monto pagado:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {montoPagado.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Total:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">$ {totalVenta}</Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Descuento:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {descuentoVenta.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Cambio:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {cambioVenta.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n\r\n            <div style={{ display: visible ? \"block\" : \"none\" }}>\r\n              <div className={classes.formInputFlex}>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Dias de Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.dias_credito === null\r\n                          ? 0\r\n                          : datosCliente.dias_credito\r\n                      }\r\n                      onChange={(e) =>\r\n                        setDatosCliente({\r\n                          ...datosCliente,\r\n                          dias_credito: e.target.value,\r\n                        })\r\n                      }\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Límite de Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.limite_credito === null\r\n                          ? 0\r\n                          : datosCliente.limite_credito\r\n                      }\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Crédito Disponible:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.credito_disponible === null\r\n                          ? 0\r\n                          : datosCliente.credito_disponible\r\n                      }\r\n                      disabled={true}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n\r\n                <Box>\r\n                  <Box width=\"100%\" mt={2.5}>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      variant=\"outlined\"\r\n                      size=\"large\"\r\n                      startIcon={<Edit />}\r\n                      onClick={() => setEditableClient(!editableClient)}\r\n                    >\r\n                      Editar\r\n                    </Button>\r\n                  </Box>\r\n                </Box>\r\n              </div>\r\n              <div className={classes.formInputFlex}>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Total a Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      disabled={editableClient}\r\n                      value={totalVenta}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Fecha de Vencimiento:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      type=\"date\"\r\n                      value={fechaVencimientoDate}\r\n                      onChange={(e) => {\r\n                        const modelDate = moment(e.target.value).add(1, \"days\");\r\n                        const hoy = moment();\r\n                        const diasDiff = modelDate.diff(hoy, \"days\");\r\n                        setfechaVencimientoDate(e.target.value);\r\n                        setDatosCliente({\r\n                          ...datosCliente,\r\n                          dias_credito: diasDiff,\r\n                        });\r\n                      }}\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n              </div>\r\n            </div>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions style={{ justifyContent: \"space-between\" }}>\r\n          <Box display={\"flex\"} justifyContent=\"flex-start\">\r\n            <Box pr={1}>\r\n              {visible ? (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => {\r\n                    setVisible(!visible);\r\n                    setEditableClient(!editableClient);\r\n                  }}\r\n                  startIcon={<ClearIcon style={{ fontSize: \"28px\" }} />}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => setVisible(!visible)}\r\n                  startIcon={<CreditCardIcon style={{ fontSize: \"28px\" }} />}\r\n                  disabled={creditoActivo || !ventaActual}\r\n                >\r\n                  Credito\r\n                </Button>\r\n              )}\r\n            </Box>\r\n\r\n            <Box>\r\n              <Button\r\n                size=\"large\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<LocalOfferIcon style={{ fontSize: \"28px\" }} />}\r\n                onClick={() => setOpenModalDescuento(!openModalDescuento)}\r\n                disabled={!ventaActual}\r\n              >\r\n                Descuento\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Button\r\n            onClick={() => {\r\n              handleClickFinishVenta();\r\n            }}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            autoFocus\r\n            disabled={!ventaActual}\r\n          >\r\n            Terminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openModalDescuento}\r\n        onClose={abrirCajon}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Box textAlign=\"center\">\r\n              <Typography variant=\"h5\">Descuento</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Grid item lg={12}>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"50%\">\r\n                <Typography variant=\"caption\">\r\n                  <b>Dinero a descontar:</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"dinero-descuento\"\r\n                    id=\"form-venta-dinero-descuento\"\r\n                    value={descuentoAplicarVenta}\r\n                    onChange={(e) => handlerChangeDiscountVenta(e)}\r\n                    variant=\"outlined\"\r\n                    disabled={false}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">$</InputAdornment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n\r\n              <Box width=\"50%\">\r\n                <Typography variant=\"caption\">\r\n                  <b>Porsentaje:</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-venta-porsentaje-descuento\"\r\n                    variant=\"outlined\"\r\n                    value={descuentoPorsentajeVenta}\r\n                    onChange={(e) => handleChangePorsentDiscount(e)}\r\n                    type=\"number\"\r\n                    disabled={false}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">%</InputAdornment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setOpenModalDescuento(!openModalDescuento)}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            autoFocus\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleCalculateNewDiscountVenta()}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={cambio}\r\n        onClose={() => setCambio(!cambio)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Box>\r\n              <FcDonate style={{ fontSize: 80 }} />\r\n            </Box>\r\n            <Box textAlign=\"center\">\r\n              <Typography variant=\"h5\">Su cambio</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Grid item lg={12}>\r\n            <Paper elevation={3}>\r\n              <Box p={3} width=\"100%\" textAlign=\"center\">\r\n                <Typography variant=\"h3\" style={{ color: \"red\" }}>\r\n                  ${cambioVenta.toFixed(2)}\r\n                </Typography>\r\n              </Box>\r\n            </Paper>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setCambio(!cambio)}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  Paper,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ItemsCarousel from \"react-items-carousel\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../../gql/Ventas/ventas_generales\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConsultarPrecio() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n\r\n  const [obtenerProductos, { data, loading }] = useLazyQuery(\r\n    CONSULTA_PRODUCTO_UNITARIO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  let productoBase = null;\r\n  if (data) productoBase = data.obtenerUnProductoVentas;\r\n  console.log(data);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    productoBase = [];\r\n  };\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n      const input_value = event.target.value;\r\n      obtenerProductos({\r\n        variables: {\r\n          datosProductos: input_value,\r\n          sucursal: sesion.sucursal._id,\r\n          empresa: sesion.empresa._id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 120) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n  const chevronWidth = 40;\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/precios.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 36 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Consultar Precio</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F9</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent\r\n          open={open}\r\n          onClose={handleClickOpen}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" textAlign=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n                  alt=\"icono productos\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={3}>\r\n                <Typography variant=\"h6\">Precio Producto</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box displa=\"flex\" justifyContent=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"50%\">\r\n              <Paper className={classes.rootBusquedaProductos}>\r\n                <InputBase\r\n                  fullWidth\r\n                  onKeyUp={keyUpEvent}\r\n                  placeholder=\"Buscar producto...\"\r\n                />\r\n                <IconButton>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Box>\r\n          </div>\r\n          {loading ? (\r\n            <Box\r\n              display=\"flex\"\r\n              flexDirection=\"column\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              height=\"40vh\"\r\n            >\r\n              <CircularProgress />\r\n            </Box>\r\n          ) : (\r\n            <>\r\n              <Grid container>\r\n                <Grid item lg={6} md={6}>\r\n                  {productoBase?.id_producto?.imagenes.length > 0 ? (\r\n                    <Box p={7}>\r\n                      <ItemsCarousel\r\n                        requestToChangeActive={setActiveItemIndex}\r\n                        activeItemIndex={activeItemIndex}\r\n                        numberOfCards={1}\r\n                        leftChevron={\r\n                          <IconButton\r\n                            aria-label=\"delete\"\r\n                            disabled\r\n                            color=\"primary\"\r\n                          >\r\n                            <ArrowBackIosIcon />\r\n                          </IconButton>\r\n                        }\r\n                        rightChevron={\r\n                          <IconButton\r\n                            aria-label=\"delete\"\r\n                            disabled\r\n                            color=\"primary\"\r\n                          >\r\n                            <ArrowForwardIosIcon />\r\n                          </IconButton>\r\n                        }\r\n                        infiniteLoop={true}\r\n                        outsideChevron\r\n                        chevronWidth={chevronWidth}\r\n                      >\r\n                        {productoBase?.id_producto?.imagenes.map((image) => {\r\n                          return (\r\n                            <Box\r\n                              className={classes.containerImagenesProducto}\r\n                              display=\"flex\"\r\n                              justifyContent=\"center\"\r\n                              alignItems=\"center\"\r\n                            >\r\n                              <img\r\n                                alt=\"Imagen producto\"\r\n                                src={image.url_imagen}\r\n                                className={classes.imagenProducto}\r\n                              />\r\n                            </Box>\r\n                          );\r\n                        })}\r\n                      </ItemsCarousel>\r\n                    </Box>\r\n                  ) : (\r\n                    <Box\r\n                      p={1}\r\n                      mt={15}\r\n                      display=\"flex\"\r\n                      justifyContent=\"center\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <PhotoLibraryIcon style={{ fontSize: 40 }} />\r\n                    </Box>\r\n                  )}\r\n                </Grid>\r\n\r\n                <Grid item lg={6} md={6}>\r\n                  <Paper elevation={3} className={classes.rootPrecioProductos}>\r\n                    <div className={classes.formInputFlex}>\r\n                      <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>\r\n                          <b>{productoBase?.codigo_barras}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                      <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography variant=\"h6\">\r\n                          <b>\r\n                            {\r\n                              productoBase?.id_producto?.datos_generales\r\n                                .nombre_comercial\r\n                            }\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                      <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>\r\n                          {productoBase?.descuento_activo === true ? (\r\n                            <b>Precio Promoción</b>\r\n                          ) : null}\r\n                        </Typography>\r\n                        <Typography variant=\"h3\">\r\n                          {productoBase?.descuento_activo === true ? (\r\n                            <b style={{ color: \"red\" }}>\r\n                              ${productoBase?.descuento?.precio_neto.toFixed(2)}\r\n                            </b>\r\n                          ) : (\r\n                            <b style={{ color: \"green\" }}>\r\n                              ${productoBase?.precio}\r\n                            </b>\r\n                          )}\r\n                        </Typography>\r\n                      </Box>\r\n                    </div>\r\n                    {productoBase?.descuento_activo === true ? (\r\n                      <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\" textAlign=\"center\">\r\n                          <Typography>\r\n                            <b>Precio S/D</b>\r\n                          </Typography>\r\n                          <Typography variant=\"h5\" style={{ color: \"green\" }}>\r\n                            <b> ${productoBase?.precio} </b>\r\n                          </Typography>\r\n                        </Box>\r\n                      </div>\r\n                    ) : null}\r\n                    <div className={classes.formInputFlex}>\r\n                      <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>Unidad</Typography>\r\n                        <Typography>\r\n                          <b>{productoBase?.unidad}</b>\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>Existencia</Typography>\r\n                        <Typography>\r\n                          <b>\r\n                            {\" \"}\r\n                            {productoBase?.inventario_general\r\n                              ? productoBase?.inventario_general[0]\r\n                                  ?.cantidad_existente\r\n                              : 0}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </div>\r\n                  </Paper>\r\n                </Grid>\r\n              </Grid>\r\n            </>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClickOpen}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useContext, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Paper,\r\n  Slide,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport {\r\n  calculatePrices,\r\n  findProductArray,\r\n  calculatePrices2,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreciosProductos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  // const [selected, setSelected] = useState([]);\r\n\r\n  const [preciosProductos, setPreciosProductos] = useState({});\r\n\r\n  const {\r\n    productoCambioPrecio,\r\n    precioSelectProductoVenta,\r\n    setPrecioSelectProductoVenta,\r\n    setUpdateTablaVentas,\r\n    updateTablaVentas,\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadVerPrecios,\r\n    setReloadVerPrecios,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [selectPrisingProduct, setSelectPrisingProduct] = useState(\r\n    precioSelectProductoVenta.length > 0 ? precioSelectProductoVenta[0] : {}\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.precios_productos.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"precios_productos\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPreciosProductos(productoCambioPrecio);\r\n  }, [productoCambioPrecio]);\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPrecios === true) {\r\n      setOpen(!open);\r\n      setReloadVerPrecios(false);\r\n    }\r\n  }, [reloadVerPrecios]);\r\n\r\n  const handleAceptChangePrising = async () => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    if (\r\n      selectPrisingProduct.precio_neto > 0 ||\r\n      precioSelectProductoVenta.length > 0\r\n    ) {\r\n      const newProductoPrecioNuevo = { ...productoCambioPrecio };\r\n      const newProductoPrecioActual = { ...productoCambioPrecio };\r\n\r\n      const producto_encontrado = await findProductArray(productoCambioPrecio);\r\n\r\n      if (producto_encontrado.found) {\r\n        const new_resta = await calculatePrices2({\r\n          newP: newProductoPrecioNuevo,\r\n          cantidad: newProductoPrecioNuevo.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: newProductoPrecioNuevo.precio_actual_object,\r\n          granel: newProductoPrecioNuevo.granel_producto,\r\n          origen: \"\",\r\n        });\r\n\r\n        console.log(precioSelectProductoVenta[0]);\r\n        const new_suma = await calculatePrices2({\r\n          newP: newProductoPrecioActual,\r\n          cantidad: newProductoPrecioActual.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: precioSelectProductoVenta[0],\r\n          granel: newProductoPrecioActual.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        newProductoPrecioActual.precio_a_vender =\r\n          precioSelectProductoVenta[0].precio_neto;\r\n        newProductoPrecioActual.precio_seleccionado = true;\r\n        newProductoPrecioActual.precio_actual_producto = parseFloat(\r\n          precioSelectProductoVenta[0].precio_neto.toFixed(2)\r\n        );\r\n        newProductoPrecioActual.precio_actual_object =\r\n          precioSelectProductoVenta[0];\r\n\r\n        newProductoPrecioActual.iva_total_producto = parseFloat(\r\n          new_suma.ivaCalculo\r\n        );\r\n        newProductoPrecioActual.ieps_total_producto = parseFloat(\r\n          new_suma.iepsCalculo\r\n        );\r\n        newProductoPrecioActual.impuestos_total_producto = parseFloat(\r\n          new_suma.impuestoCalculo\r\n        );\r\n        newProductoPrecioActual.subtotal_total_producto = parseFloat(\r\n          new_suma.subtotalCalculo\r\n        );\r\n        newProductoPrecioActual.total_total_producto = parseFloat(\r\n          new_suma.totalCalculo\r\n        );\r\n\r\n        newProductoPrecioActual.precio_actual_object = {\r\n          cantidad_unidad: precioSelectProductoVenta[0].cantidad_unidad\r\n            ? precioSelectProductoVenta[0].cantidad_unidad\r\n            : null,\r\n          numero_precio: precioSelectProductoVenta[0].numero_precio\r\n            ? precioSelectProductoVenta[0].numero_precio\r\n            : null,\r\n          unidad_maxima: precioSelectProductoVenta[0].unidad_maxima\r\n            ? precioSelectProductoVenta[0].unidad_maxima\r\n            : null,\r\n          precio_general: precioSelectProductoVenta[0].precio_general\r\n            ? precioSelectProductoVenta[0].precio_general\r\n            : null,\r\n          precio_neto: precioSelectProductoVenta[0].precio_neto\r\n            ? precioSelectProductoVenta[0].precio_neto\r\n            : null,\r\n          precio_venta: precioSelectProductoVenta[0].precio_venta\r\n            ? precioSelectProductoVenta[0].precio_venta\r\n            : null,\r\n          iva_precio: precioSelectProductoVenta[0].iva_precio\r\n            ? precioSelectProductoVenta[0].iva_precio\r\n            : null,\r\n          ieps_precio: precioSelectProductoVenta[0].ieps_precio\r\n            ? precioSelectProductoVenta[0].ieps_precio\r\n            : null,\r\n          utilidad: precioSelectProductoVenta[0].utilidad\r\n            ? precioSelectProductoVenta[0].utilidad\r\n            : null,\r\n          porciento: precioSelectProductoVenta[0].porciento\r\n            ? precioSelectProductoVenta[0].porciento\r\n            : null,\r\n          dinero_descontado: precioSelectProductoVenta[0].dinero_descontado\r\n            ? precioSelectProductoVenta[0].dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newProductoPrecioActual\r\n        );\r\n\r\n        console.log(\"venta >>\", venta_existente.subTotal);\r\n\r\n        console.log(\"resta >>\", new_resta.subtotalCalculo);\r\n\r\n        console.log(\"suma >>\", new_suma.subtotalCalculo);\r\n\r\n        const CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n\r\n        //Guardarlo en el localStorage\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...CalculosData,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n          })\r\n        );\r\n        // newProductoPrecio = {...newProductoPrecio};\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        setPrecioSelectProductoVenta([]);\r\n        setPreciosProductos({});\r\n        //Cerrar modal\r\n        handleClickOpen();\r\n      } else {\r\n        console.log(\"Producto no encontrado\");\r\n      }\r\n    } else {\r\n      setAlert({\r\n        message: \"Este precio no es valido.\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = (precio) => {\r\n    let newSelected = [];\r\n    newSelected = newSelected.concat([], precio);\r\n    setSelectPrisingProduct(precio);\r\n    setPrecioSelectProductoVenta(newSelected);\r\n  };\r\n\r\n  const isSelected = (name) => precioSelectProductoVenta.indexOf(name) !== -1;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 114) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n              alt=\"icono money\"\r\n              style={{ fontSize: 25 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Precios</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F3</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box display=\"flex\" p={2}>\r\n            <Box flexGrow={1}>\r\n              <Typography variant=\"h6\">Precios de Producto</Typography>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  Nombre:{\" \"}\r\n                  {productoCambioPrecio\r\n                    ? productoCambioPrecio?.id_producto?.datos_generales\r\n                        ?.nombre_comercial\r\n                    : \"\"}\r\n                </Typography>\r\n              </Box>\r\n            </div>\r\n            <Paper className={classes.root}>\r\n              <TableContainer className={classes.container}>\r\n                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 25 }}></TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio neto</TableCell>\r\n                      <TableCell style={{ width: 200 }}>\r\n                        Unidad mayoreo\r\n                      </TableCell>\r\n                      <TableCell style={{ width: 100 }}>Utilidad</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {preciosProductos?.id_producto?.precios?.precios_producto?.map(\r\n                      (precio, index) => {\r\n                        const isItemSelected = isSelected(precio);\r\n                        const labelId = `enhanced-table-checkbox-${index}`;\r\n                        return (\r\n                          <RenderTableRows\r\n                            key={index}\r\n                            precio={precio}\r\n                            isItemSelected={isItemSelected}\r\n                            labelId={labelId}\r\n                            handleClick={handleClick}\r\n                          />\r\n                        );\r\n                      }\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleAceptChangePrising()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ precio, isItemSelected, labelId, handleClick }) => {\r\n  const doubleClick = (e) => {\r\n    try {\r\n      if (e.detail === 2) {\r\n        handleClick(precio);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={precio.numero_precio}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => doubleClick(e)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              handleClick(precio);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.numero_precio}</TableCell>\r\n        <TableCell align={\"center\"}>\r\n          {precio.precio_neto > 0 ? precio.precio_neto.toFixed(2) : 0}\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.unidad_mayoreo}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.utilidad} %</TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, Dialog, DialogContent, IconButton, Typography } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { AccesosContext } from '../../../context/Accesos/accesosCtx';\r\nimport { useEffect } from 'react';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330, align: 'center' },\r\n\t{ id: 'productos', label: 'Productos', minWidth: 20, align: 'center' },\r\n\t{ id: 'total', label: 'Total', minWidth: 200, align: 'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tcontainer: {\r\n\t\theight: \"45vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t}\r\n});\r\n\r\nexport default function ListaVentas() {\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRegresar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{listaEnEspera?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsVentas venta={row} index={index} /> \r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst RowsVentas = ({ venta, index }) => {\r\n\r\n\tconst { \r\n\t\treloadEliminarVentaEspera, \r\n        setReloadEliminarVentaEspera,\r\n\t\tsetAbrirPanelAcceso,\r\n        abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\t\r\n    const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\tconst [ open, setOpen] = useState(false);\r\n\tconst [ keyIndex, setKeyIndex ] = useState('');\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\tlet VentaEnEspera = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n\tfunction borrarVenta(key) {\r\n\t\tif(sesion.accesos.ventas.eliminar_ventas.ver === true){\r\n\t\t\tlistaEnEspera.forEach(function(elemento, indice, array) {\r\n\t\t\t\tif(key === indice){\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t}else{\r\n\t\t\treturn null\r\n\t\t}\r\n    };\r\n\r\n\tconst AgregarVentaDeNuevo = (key) => {\r\n\t\tif(VentaEnEspera === null){\r\n\t\t\tlistaEnEspera.forEach((element, index) => {\r\n\t\t\t\tif (index === key) {\r\n\t\t\t\t\tlocalStorage.setItem(\"DatosVentas\", JSON.stringify(element.VentaEnEspera));\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t}else{\r\n\t\t\tsetOpen(!open);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n\tconst verificarPermisos = (key) => {\r\n\t\tsetKeyIndex(key)\r\n\t\tif(sesion.accesos.ventas.eliminar_ventas.ver === true){\r\n\t\t\tsetKeyIndex(''); \r\n            borrarVenta(key);\r\n        }else{\r\n\t\t\tsetAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\tsetDepartamentos({departamento: 'ventas', subDepartamento: 'eliminar_ventas', tipo_acceso: 'ver'})\r\n\t\t}\r\n\t};\t\r\n\r\n\tuseEffect(() => {\r\n\t\tif (reloadEliminarVentaEspera === true) {\t\r\n\t\t\tborrarVenta(keyIndex);\r\n\t\t\tsetReloadEliminarVentaEspera(false);\r\n\t\t}\r\n\t}, [reloadEliminarVentaEspera]);\r\n\t\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={index} \r\n\t\t\t>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{index + 1}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.fecha ? venta.fecha : \"\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.cliente ? venta.VentaEnEspera.cliente.nombre_cliente : \"Pub. General\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.productos.length}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t$ {(venta.VentaEnEspera.total).toFixed(4)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"regresar\" \r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => AgregarVentaDeNuevo(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AutorenewIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => verificarPermisos(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tfullWidth\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box p={1} display='flex'>\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tNo puedes agregar una venta, cuando ya esta una en curso.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent={'flex-end'} p={2}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\r\n\t);\r\n}","import React, { useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Typography,\r\n  Slide,\r\n  Badge,\r\n} from \"@material-ui/core\";\r\nimport ListaVentas from \"./ListaVentas\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function VentasEspera() {\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 76) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <Badge\r\n              badgeContent={listaEnEspera ? listaEnEspera.length : 0}\r\n              color=\"primary\"\r\n              style={{ fontSize: 45 }}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                alt=\"icono caja2\"\r\n                style={{ width: 38 }}\r\n              />\r\n            </Badge>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Ventas en Espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + L</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={3}>\r\n                <Typography variant=\"h6\">Ventas en espera</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <ListaVentas />\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha.', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'},\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '50vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaVentasRealizadas() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(8);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  Paper,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaVentasRealizadas from \"./ListaVentasRealizadas\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid, FcSearch } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasRealizadas() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 86) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Buscar Folio</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + V</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg\"\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={3}>\r\n                <Typography variant=\"h6\">Ventas Realizadas</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"100%\">\r\n                <Paper className={classes.rootBusqueda}>\r\n                  <InputBase fullWidth placeholder=\"Buscar venta...\" />\r\n                  <IconButton>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Box>\r\n            </div>\r\n            <ListaVentasRealizadas />\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Abonos from \"../../pages/ventas/Abonos/Abonos\";\r\nimport BuscarProducto from \"../../pages/ventas/BuscarProductos/BuscarProducto\";\r\nimport ClientesVentas from \"../../pages/ventas/ClientesVentas/ClientesVentas\";\r\nimport Cotizacion from \"../../pages/ventas/Cotizacion/Cotizacion\";\r\nimport AbrirCajon from \"../../pages/ventas/Operaciones/AbrirCajon\";\r\nimport CancelarVenta from \"../../pages/ventas/Operaciones/CancelarVenta\";\r\nimport CerrarVenta from \"../../pages/ventas/Operaciones/CerrarVenta\";\r\nimport ConsultarPrecio from \"../../pages/ventas/Operaciones/ConsultarPrecio\";\r\nimport PreciosProductos from \"../../pages/ventas/Operaciones/PreciosProducto\";\r\nimport VentasEspera from \"../../pages/ventas/VentasEspera/VentasEspera\";\r\nimport VentasRealizadas from \"../../pages/ventas/VentasRealizadas/VentasRealizadas\";\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function NavegacionVentasLateral() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.drawerColor}>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <CerrarVenta />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <CancelarVenta />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <BuscarProducto />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Cotizacion type=\"GENERAR\" />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <PreciosProductos />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasEspera />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <ClientesVentas />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasRealizadas />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <ConsultarPrecio />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Abonos />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({\r\n  producto,\r\n  setNewProductoVentas,\r\n  newProductoVentas,\r\n  setDatosVentasActual,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    // console.log(producto);\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = productosVentas;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(\r\n      producto\r\n    );\r\n    console.log(\"llego\");\r\n    if (producto_encontrado.found) {\r\n      const { cantidad_venta, ...newP } = producto;\r\n      console.log(\"llego\");\r\n\r\n      // newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n      //Sacar los impuestos que se van a restar\r\n      // let calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\r\n      const new_resta = await calculatePrices2({\r\n        newP: newP,\r\n        cantidad: cantidad_venta,\r\n        precio_boolean: true,\r\n        precio: newP.precio_actual_object,\r\n        granel: newP.granel_producto,\r\n        origen: \"\",\r\n      });\r\n\r\n      productosVentasTemp.splice(producto_encontrado.producto_found.index, 1);\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) - parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) - parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) -\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton size=\"small\" onClick={() => handleToggleModal()}>\r\n        <Delete size=\"small\" color=\"error\" />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, Fragment, useRef, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport EliminarProductoVenta from \"./EliminarProductoVenta\";\r\n\r\nimport { useDebounce } from \"use-debounce\";\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2\r\n} from \"../../config/reuserFunctions\";\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\nimport { Avatar } from \"@material-ui/core\";\r\n\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"Cantidad\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Cantidad\",\r\n    width: 20,\r\n  },\r\n  {\r\n    id: \"Descripcion\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Descripcion\",\r\n    width: 340,\r\n  },\r\n  {\r\n    id: \"Existencias\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Existencias\",\r\n    width: 40,\r\n  },\r\n  {\r\n    id: \"% Desc\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"% Desc\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"U. Venta\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"U. Venta\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"Precio U\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Precio U\",\r\n    width: 100,\r\n  },\r\n  {\r\n    id: \"Eliminar\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Eliminar\",\r\n    width: 10,\r\n  },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"normal\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n            style={{ width: headCell.width }}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"light\"\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h6\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Nutrition\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"100%\",\r\n    '& ::-webkit-scrollbar': {\r\n      display: 'none'\r\n    }\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n\r\n}));\r\n\r\nexport default function EnhancedTable({\r\n  setDatosVentasActual,\r\n}) {\r\n  const classes = useStyles();\r\n  const [ selected, setSelected ] = useState([]);\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { setProductoCambioPrecio, setPrecioSelectProductoVenta, updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const [datosTabla, setDatosTabla] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    setDatosTabla(venta === null ? [] : venta.productos);\r\n  }, [updateTablaVentas]);\r\n\r\n  const handleClick = (name) => {\r\n    let newSelected = [];\r\n    const exist = selected.indexOf(name) !== -1;\r\n    if(exist){\r\n      newSelected = [];\r\n    }else{\r\n      newSelected = newSelected.concat([], name);\r\n    } \r\n    const producto = name.id_producto.precios.precios_producto.filter((p) => p.precio_neto === name.precio_actual_producto);\r\n    if(producto.length > 0) setPrecioSelectProductoVenta(producto);\r\n    setProductoCambioPrecio(name);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e, producto) => {\r\n    try {\r\n      let timer;\r\n      clearTimeout(timer);\r\n      if (e.detail === 2) {\r\n        handleClick(producto);\r\n        setProductoCambioPrecio(producto);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const isSelected = (name) => {\r\n    return selected.indexOf(name) !== -1;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{ width: 25, textAlign:\"center\" }}></TableCell>\r\n                <TableCell style={{ width: 20, textAlign:\"center\" }}>Cantidad</TableCell>\r\n                <TableCell style={{ width: 340 }}>Descripcion</TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Exis.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}><b>% Desct.</b></TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Rx.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}>U. Venta</TableCell>\r\n                <TableCell style={{ width: 100, textAlign:\"center\" }}>Precio U</TableCell>\r\n                <TableCell align=\"center\" style={{ width: 10 }} />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosTabla?.map((producto, index) => {\r\n                const isItemSelected = isSelected(producto);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RenderTableRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    setUpdateTablaVentas={setUpdateTablaVentas}\r\n                    updateTablaVentas={updateTablaVentas}\r\n                    setDatosVentasActual={setDatosVentasActual}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    TwoClickInRowTableBuy={TwoClickInRowTableBuy}\r\n                    setSelected={setSelected}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({\r\n  producto,\r\n  setUpdateTablaVentas,\r\n  updateTablaVentas,\r\n  setDatosVentasActual,\r\n  TwoClickInRowTableBuy,\r\n  handleClick,\r\n  isItemSelected,\r\n  labelId,\r\n  setSelected,\r\n  selected\r\n}) => {\r\n  // const [actuallyProduct, setActuallyProduct] = useState(producto);\r\n  const [newCantidadProduct, setNewCantidadProduct] = useState(\r\n    producto.cantidad_venta\r\n  );\r\n  \r\n  const [ tempAmount, setTempAmount ] = useState(producto.cantidad_venta);\r\n\r\n  const textfield = useRef(null);\r\n  const [value] = useDebounce(newCantidadProduct, 500);\r\n\r\n\r\n  useEffect(() => {\r\n    setTempAmount(producto.cantidad_venta);\r\n  }, [producto.cantidad_venta]);\r\n\r\n  useEffect(() => {\r\n    console.log(value);\r\n    CalculeDataPricing(value);\r\n  }, [value]);\r\n  \r\n\r\n  const calculateNewPricingAmount = (cantidad) => {\r\n    try {\r\n      setTempAmount(cantidad);\r\n      setNewCantidadProduct(cantidad);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const CalculeDataPricing = async (new_cant) => {\r\n    if(new_cant === \"\" || new_cant == 0){\r\n      setTempAmount(producto.cantidad_venta);\r\n    }else{\r\n      let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let productosVentas = venta === null ? [] : venta.productos;\r\n      const venta_actual = venta === null ? [] : venta;\r\n      let productosVentasTemp = productosVentas;\r\n      let venta_existente =\r\n        venta === null\r\n          ? {\r\n              subTotal: 0,\r\n              total: 0,\r\n              impuestos: 0,\r\n              iva: 0,\r\n              ieps: 0,\r\n              descuento: 0,\r\n              monedero: 0\r\n            }\r\n          : venta;\r\n\r\n      let CalculosData = {};\r\n      \r\n      //Buscar y obtener ese producto en el array de ventas\r\n      const producto_encontrado = await findProductArray(\r\n        producto\r\n      );\r\n      \r\n      if (producto_encontrado.found) {\r\n        const { cantidad_venta, ...newP } =\r\n          producto_encontrado.producto_found.producto;\r\n        newP.cantidad_venta = parseInt(new_cant);\r\n        const verify_prising = await verifiPrising(newP);\r\n        const newPrising = verify_prising.found ? verify_prising.object_prising : newP.precio_actual_object;\r\n        \r\n        const new_resta = await calculatePrices2({newP, cantidad: cantidad_venta, precio_boolean: true, precio: newP.precio_actual_object, granel: newP.granel_producto, origen: \"Tabla\" });\r\n        const new_suma = await calculatePrices2({newP, cantidad: parseInt(new_cant), precio_boolean: true, precio: newPrising, granel: newP.granel_producto, origen: \"Tabla\" });\r\n\r\n        console.log(new_resta);\r\n        console.log(new_suma);\r\n\r\n        newP.iva_total_producto = parseFloat(new_suma.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(new_suma.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(new_suma.impuestoCalculo);\r\n        newP.subtotal_total_producto = parseFloat(new_suma.subtotalCalculo);\r\n        newP.total_total_producto = parseFloat(new_suma.totalCalculo);\r\n\r\n        if (verify_prising.found) {\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n          newP.precio_anterior = newP.precio_actual_porducto;\r\n          newP.precio_actual_producto = verify_prising.pricing;\r\n          newP.precio_actual_object = verify_prising.object_prising;\r\n\r\n          newP.precio_actual_object = {\r\n            cantidad_unidad: verify_prising.object_prising.cantidad_unidad ? verify_prising.object_prising.cantidad_unidad : null,\r\n            numero_precio: verify_prising.object_prising.numero_precio ? verify_prising.object_prising.numero_precio : null,\r\n            unidad_maxima: verify_prising.object_prising.unidad_maxima ? verify_prising.object_prising.unidad_maxima : null,\r\n            precio_general: verify_prising.object_prising.precio_general ? verify_prising.object_prising.precio_general : null,\r\n            precio_neto: verify_prising.object_prising.precio_neto ? verify_prising.object_prising.precio_neto : null,\r\n            precio_venta: verify_prising.object_prising.precio_venta ? verify_prising.object_prising.precio_venta : null,\r\n            iva_precio: verify_prising.object_prising.iva_precio ? verify_prising.object_prising.iva_precio : null,\r\n            ieps_precio: verify_prising.object_prising.ieps_precio ? verify_prising.object_prising.ieps_precio : null,\r\n            utilidad: verify_prising.object_prising.utilidad ? verify_prising.object_prising.utilidad : null,\r\n            porciento: verify_prising.object_prising.porciento ? verify_prising.object_prising.porciento : null,\r\n            dinero_descontado: verify_prising.object_prising.dinero_descontado ? verify_prising.object_prising.dinero_descontado : null,\r\n          };\r\n\r\n        }else{\r\n          newP.cantidad_venta = parseInt(new_cant);\r\n          newP.precio_anterior = newP.precio_actual_producto;\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n        }\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n      } else {\r\n        console.log(\"El producto no existe\");\r\n      }\r\n\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      //Recargar la tabla de los productos\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        style={{height: '15px'}}\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => TwoClickInRowTableBuy(e,producto)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              if(selected.length > 0) setSelected([]);\r\n              handleClick(producto);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => calculateNewPricingAmount(e.target.value)}\r\n            value={tempAmount}\r\n            type=\"number\"\r\n            name=\"cantidad_venta\"\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          {producto.id_producto.datos_generales.nombre_comercial}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          {producto.concepto === \"medida\"\r\n            ? producto.cantidad\r\n            : producto.inventario_general.map(\r\n                (existencia) => `${existencia.cantidad_existente}`\r\n              )}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          %{\" \"}\r\n          {producto.precio_actual_object.porciento !== null\r\n            ? producto.precio_actual_object.porciento\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.id_producto.datos_generales.receta_farmacia === true\r\n            ? \"Si\"\r\n            : \"No\"}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.inventario_general.map(\r\n            (existencia) => `${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          $ { producto.precio_actual_object.precio_neto}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          <EliminarProductoVenta\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n          />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { TextField } from \"@material-ui/core\";\r\n// import { BlurLinear } from \"@material-ui/icons\";\r\n// import { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../context/Catalogos/crearClienteCtx\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function ClientesVentas() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { setUpdateClientVenta, updateClientVenta } = useContext(ClienteCtx);\r\n  const { setClientesVentas, clear } = useContext(VentasContext);\r\n\r\n  const [selectClient, setSelectClient] = useState({});\r\n\r\n  // console.log(sesion.empresa._id);\r\n  // console.log(sesion.sucursal._id);\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  // console.log(error);\r\n  // console.log(\"data\",data);\r\n  let obtenerClientes = [];\r\n  if (data) obtenerClientes = data.obtenerClientesVentas;\r\n  // console.log(obtenerClientes);\r\n\r\n  useEffect(() => {\r\n    if (datosVentas && datosVentas.cliente) {\r\n      if (datosVentas.cliente.nombre_cliente) {\r\n        setSelectClient(datosVentas.cliente);\r\n        setClientesVentas(datosVentas.cliente);\r\n      } else {\r\n        setSelectClient(null);\r\n      }\r\n    } else {\r\n      setSelectClient(null);\r\n    }\r\n    refetch();\r\n  }, [refetch, updateClientVenta]);\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      setSelectClient(value);\r\n\r\n      // console.log(venta_actual);\r\n      let dataCliente = {\r\n        subTotal:\r\n          venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n        total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n        impuestos:\r\n          venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n        iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n        ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n        descuento:\r\n          venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n        monedero:\r\n          venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n        // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n        venta_cliente: value === null ? false : true,\r\n        productos:\r\n          venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n      };\r\n      if (value) {\r\n        dataCliente = { ...dataCliente, cliente: value };\r\n      }\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(dataCliente));\r\n      setUpdateClientVenta(!updateClientVenta);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading) return null;\r\n\r\n  return (\r\n    <div>\r\n      <Autocomplete\r\n        id=\"combo-box-producto-codigo\"\r\n        size=\"small\"\r\n        fullWidth\r\n        options={obtenerClientes}\r\n        getOptionLabel={(option) =>\r\n          option.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n        }\r\n        renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n        onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n        getOptionSelected={(option, value) =>\r\n          option.nombre_cliente === value.nombre_cliente\r\n        }\r\n        value={selectClient ? selectClient : null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  Portal,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"./styles\";\r\n\r\nimport {\r\n  FcBusinessman,\r\n  FcCalendar,\r\n  FcSalesPerformance,\r\n} from \"react-icons/fc\";\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\r\n\r\nimport TablaVentasCheckbox from \"./Tabla_ventas_checkbox\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport ClientesVentas from \"./ClientesVentas\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../components/SnackBarMessages\";\r\n\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\nexport default function VentasGenerales() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  // const productosVentas = JSON.parse(localStorage.getItem('productosVentas'));\r\n  const classes = useStyles();\r\n  // const [newProductoVentas, setNewProductoVentas] = useState(false);\r\n  const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  });\r\n\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setOpen,\r\n    clientesVentas,\r\n    openBackDrop,\r\n    DatosVentasActual,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n\r\n  // const [DatosVentasActual, setDatosVentasActual] = useState({\r\n  //   subTotal: 0,\r\n  //   total: 0,\r\n  //   impuestos: 0,\r\n  //   iva: 0,\r\n  //   ieps: 0,\r\n  //   descuento: 0,\r\n  //   monedero: 0,\r\n  //   // tipo_cambio: {},\r\n  // });\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [obtenerProductos, { data, loading, error }] = useLazyQuery(\r\n    CONSULTA_PRODUCTO_UNITARIO,\r\n    {\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  const [consultaBase, setConsultaBase] = useState(false);\r\n\r\n  let productosBase = null;\r\n  if (error) {\r\n    console.log(data, loading, error.networkError);\r\n    console.log(data, loading, error.graphQLErrors);\r\n  }\r\n  // console.log(data,loading, error);\r\n  if (data) productosBase = data.obtenerUnProductoVentas;\r\n  // console.log(productosBase);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      if (error.networkError) {\r\n        setAlert({ message: `Error de servidor`, status: \"error\", open: true });\r\n      } else if (error.graphQLErrors) {\r\n        setAlert({\r\n          message: `${error.graphQLErrors[0]?.message}`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n    } else {\r\n      if (productosBase !== null) {\r\n        if (productosBase.cantidad !== null) {\r\n          agregarProductos(productosBase);\r\n        } else {\r\n          setOpen(true);\r\n          setAlert({\r\n            message: `Este producto no existe`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    });\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (venta !== null) {\r\n      setDatosVentasActual({\r\n        subTotal: parseFloat(venta.subTotal),\r\n        total: parseFloat(venta.total),\r\n        impuestos: parseFloat(venta.impuestos),\r\n        iva: parseFloat(venta.iva),\r\n        ieps: parseFloat(venta.ieps),\r\n        descuento: parseFloat(venta.descuento),\r\n        monedero: parseFloat(venta.monedero),\r\n      });\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n      const input_value = event.target.value.trim();\r\n      const data = input_value.split(\"*\");\r\n      if (data.length > 1) {\r\n        let data_operation = isNaN(data[0]) ? data[1] : data[0];\r\n        let data_key = isNaN(data[0]) ? data[0] : data[1];\r\n        setGranelBase({\r\n          granel: true,\r\n          valor: parseFloat(data_operation),\r\n        });\r\n        obtenerProductos({\r\n          variables: {\r\n            datosProductos: data_key,\r\n            sucursal: sesion.sucursal._id,\r\n            empresa: sesion.empresa._id,\r\n          },\r\n          fetchPolicy: \"network-only\",\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      } else {\r\n        setGranelBase({\r\n          granel: false,\r\n          valor: 0,\r\n        });\r\n        obtenerProductos({\r\n          variables: {\r\n            datosProductos: input_value,\r\n            sucursal: sesion.sucursal._id,\r\n            empresa: sesion.empresa._id,\r\n          },\r\n          fetchPolicy: \"network-only\",\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      }\r\n    }\r\n  };\r\n\r\n  const agregarProductos = async (producto) => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granelBase,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      // console.log(new_prices.newP);\r\n\r\n      productosVentasTemp.push(new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      // console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: granelBase,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      height=\"100%\"\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      justifyContent=\"space-between\"\r\n    >\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper>\r\n        <Grid container spacing={3} style={{ padding: 8 }}>\r\n          <Grid item md={4} xs={12}>\r\n            <Box\r\n              width=\"100%\"\r\n              display=\"flex\"\r\n              justifyItems=\"center\"\r\n              alignSelf=\"center\"\r\n              justifySelf=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Box mt={1} mx={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/busqueda-de-codigos-de-barras.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <TextField\r\n                fullWidth\r\n                placeholder=\"Buscar producto...\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onKeyUp={keyUpEvent}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <IconButton>\r\n                        <Search />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box\r\n              width=\"100%\"\r\n              display=\"flex\"\r\n              justifyItems=\"center\"\r\n              alignSelf=\"center\"\r\n              justifySelf=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Box mt={1} mr={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\" alignItems=\"center\">\r\n                <ClientesVentas sesion={sesion} />\r\n                {/* <Paper className={classes.rootBusqueda}>\r\n                  <InputBase fullWidth placeholder=\"Buscar cliente...\" />\r\n                  <IconButton>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper> */}\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box width=\"100%\" display=\"flex\">\r\n              <Box mr={1}>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/publicalo.svg\"\r\n                  alt=\"iconoBander\"\r\n                  className={classes.iconSize}\r\n                />\r\n              </Box>\r\n              <Box width=\"100%\">\r\n                <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                  <Select\r\n                    id=\"tipo_documento\"\r\n                    value=\"TICKET\"\r\n                    name=\"tipo_documento\"\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>Selecciona uno</em>\r\n                    </MenuItem>\r\n                    <MenuItem value=\"TICKET\">TICKET</MenuItem>\r\n                    <MenuItem value=\"FACTURA\">FACTURA</MenuItem>\r\n                    <MenuItem value=\"NOTA REMISION\">NOTA REMISION</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n\r\n      <Box height=\"100%\">\r\n        <TablaVentasCheckbox setDatosVentasActual={setDatosVentasActual} />\r\n      </Box>\r\n\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" flexDirection=\"column\">\r\n        <Paper elevantion={3} style={{ padding: 2, marginTop: 2 }}>\r\n          <Grid container>\r\n            <Grid item lg={7}>\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justifyContent=\"flex-end\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item lg={7}>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Cliente:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.nombre_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcBusinessman style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Cliente.:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.numero_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <AiOutlineFieldNumber style={{ fontSize: 22 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Clave Clte.:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.clave_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FaBarcode style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item lg={5}>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Limite Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          ${clientesVentas ? clientesVentas.limite_credito : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FaMoneyCheckAlt style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  {/* <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Descs.:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.numero_descuento : 0}\r\n                          %\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <AiOutlineFieldNumber style={{ fontSize: 22 }} />\r\n                    </Box>\r\n                  </Box> */}\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Dias Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.dias_credito : 0}{\" \"}\r\n                          Dias\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcCalendar style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item lg={5}>\r\n              <Grid container>\r\n                <Grid item lg={7}>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    flexDirection=\"row-reverse\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Monedero :{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual?.monedero?.toFixed(2)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    alignItems=\"center\"\r\n                    display=\"flex\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Descuento:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          $\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual?.descuento?.toFixed(2)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <Box\r\n                        display=\"flex\"\r\n                        justifyContent=\"center\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png\"\r\n                          alt=\"icono admin\"\r\n                          style={{ width: 20 }}\r\n                        />\r\n                      </Box>\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item lg={5}>\r\n                  <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Subtotal:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.subTotal\r\n                          ? DatosVentasActual?.subTotal?.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Impuestos:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.impuestos\r\n                          ? DatosVentasActual?.impuestos?.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  {/* <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Iva:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.iva\r\n                          ? DatosVentasActual.iva.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box> */}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n            <Typography variant=\"h4\">\r\n              Total:{\" \"}\r\n              <b style={{ color: \"green\" }}>\r\n                $\r\n                {DatosVentasActual?.total\r\n                  ? DatosVentasActual?.total.toFixed(2)\r\n                  : 0}\r\n              </b>\r\n            </Typography>\r\n            <Box mt={0.5} mr={1}>\r\n              <MonetizationOnIcon style={{ fontSize: 37, color: \"green\" }} />\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n      <Portal>\r\n        <Backdrop style={{ zIndex: \"99999\" }} open={openBackDrop}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n      </Portal>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport BackdropComponent from \"../../../components/Layouts/BackDrop\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CAJAS } from \"../../../gql/Cajas/cajas\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nmoment.locale(\"es\");\r\n\r\nexport default function AbrirTurno({\r\n  handleClickOpen,\r\n  loading,\r\n  type,\r\n  setLoading,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  const { setTurnoActivo, setAlert } = useContext(VentasContext);\r\n\r\n  const [error, setError] = useState(false);\r\n  const [abrirTurno, setAbrirTurno] = useState([]);\r\n  const [numeroCaja, setNumeroCaja] = useState(\"\");\r\n\r\n  const classes = useStyles();\r\n  let obtenerCajasSucursal = [];\r\n\r\n  const cajas = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const obtenerTurno = (e) => {\r\n    setAbrirTurno({ ...abrirTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  if (cajas.data) {\r\n    obtenerCajasSucursal = cajas.data.obtenerCajasSucursal;\r\n  }\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: true,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  useEffect(() => {\r\n    cajas.refetch();\r\n  }, [loading]);\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (\r\n        !abrirTurno.turno_en_curso ||\r\n        !abrirTurno.caja_elegida ||\r\n        !abrirTurno.monto_abrir\r\n      ) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor complete los datos obligatorios`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        const input = {\r\n          horario_en_turno: abrirTurno.turno_en_curso,\r\n          concepto: \"ABRIR TURNO\",\r\n          numero_caja: numeroCaja.toString(),\r\n          comentarios: abrirTurno.comentarios,\r\n          id_caja: abrirTurno.caja_elegida,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          id_usuario: sesion._id,\r\n          usuario_en_turno: {\r\n            nombre: sesion.nombre,\r\n            telefono: sesion.telefono,\r\n            numero_usuario: sesion.numero_usuario.toString(),\r\n            email: sesion.email,\r\n          },\r\n          hora_entrada: {\r\n            hora: moment().format(\"hh\"),\r\n            minutos: moment().format(\"mm\"),\r\n            segundos: moment().format(\"ss\"),\r\n            completa: moment().format(\"HH:mm:ss\"),\r\n          },\r\n          hora_salida: {\r\n            hora: \"\",\r\n            minutos: \"\",\r\n            segundos: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_entrada: {\r\n            year: moment().format(\"YYYY\"),\r\n            mes: moment().format(\"MM\"),\r\n            dia: moment().format(\"DD\"),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().format(\"YYYY-MM-DD\"),\r\n          },\r\n          fecha_salida: {\r\n            year: \"\",\r\n            mes: \"\",\r\n            dia: \"\",\r\n            no_semana_year: \"\",\r\n            no_dia_year: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n          montos_en_caja: {\r\n            monto_efectivo: {\r\n              monto: parseFloat(abrirTurno.monto_abrir),\r\n              metodo_pago: \"01\",\r\n            },\r\n            monto_tarjeta_debito: {\r\n              monto: 0,\r\n              metodo_pago: \"28\",\r\n            },\r\n            monto_tarjeta_credito: {\r\n              monto: 0,\r\n              metodo_pago: \"04\",\r\n            },\r\n            monto_creditos: {\r\n              monto: 0,\r\n              metodo_pago: \"99\",\r\n            },\r\n            monto_monedero: {\r\n              monto: 0,\r\n              metodo_pago: \"05\",\r\n            },\r\n            monto_transferencia: {\r\n              monto: 0,\r\n              metodo_pago: \"03\",\r\n            },\r\n            monto_cheques: {\r\n              monto: 0,\r\n              metodo_pago: \"02\",\r\n            },\r\n            monto_vales_despensa: {\r\n              monto: 0,\r\n              metodo_pago: \"08\",\r\n            },\r\n          },\r\n        };\r\n\r\n        const variableTurnoAbierto = await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: true,\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (variableTurnoAbierto.data.crearRegistroDeTurno === null) {\r\n          setLoading(false);\r\n          cajas.refetch();\r\n          setAlert({\r\n            message: `Lo sentimos esta caja ya esta en uso`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          localStorage.setItem(\r\n            \"turnoEnCurso\",\r\n            JSON.stringify(variableTurnoAbierto.data.crearRegistroDeTurno)\r\n          );\r\n          localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n          setTurnoActivo(true);\r\n          setAlert({\r\n            message: `Turno abierto con exito`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          cajas.refetch();\r\n          if (type !== \"FRENTE\") {\r\n            handleClickOpen();\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (type !== \"FRENTE\") {\r\n        handleClickOpen();\r\n      }\r\n    }\r\n  };\r\n\r\n  /* if (cajas.loading)\r\n    return (\r\n      <BackdropComponent loading={loading} />\r\n      // <Box\r\n      // display=\"flex\"\r\n      // flexDirection=\"column\"\r\n      // justifyContent=\"center\"\r\n      // alignItems=\"center\"\r\n      // height=\"80vh\"\r\n      // >\r\n      // \t<CircularProgress />\r\n      // </Box>\r\n    ); */\r\n\r\n  return (\r\n    <div>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}> Empleado:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"nombre_usuario\"\r\n              onChange={obtenerTurno}\r\n              disabled={true}\r\n              value={sesion ? sesion.nombre : \"\"}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Turno:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.turno_en_curso}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"turno_en_curso\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Caja:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.caja_elegida}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"caja_elegida\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {obtenerCajasSucursal.map((caja) => {\r\n                  return caja.activa === true ? null : (\r\n                    <MenuItem\r\n                      key={caja.numero_caja}\r\n                      value={caja._id}\r\n                      onClick={() => setNumeroCaja(caja.numero_caja)}\r\n                    >\r\n                      Caja {caja.numero_caja}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              {\" \"}\r\n              <span className=\"obligatorio\">* </span>Monto para abrir:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"monto_abrir\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              error={error && !abrirTurno.monto_abrir}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}> Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              multiline\r\n              rows={5}\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={loading || cajas.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n            disabled={loading || cajas.loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport VentasGenerales from \"./VentasGenerales\";\r\nimport AbrirTurno from \"../ventas/AbrirCerrarTurno/AbrirTurno\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { DialogTitle } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaIndex() {\r\n  const { turnoActivo, setTurnoActivo } = useContext(VentasContext);\r\n  const [varActive, setVarActive] = useState(false);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  useEffect(() => {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    setVarActive(sesion.turno_en_caja_activo);\r\n    setTurnoActivo(false);\r\n  }, [turnoActivo]);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      {varActive === true && turnoEnCurso ? (\r\n        <VentasGenerales />\r\n      ) : (\r\n        <AbrirTurnoEnVentas />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction AbrirTurnoEnVentas() {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <Dialog\r\n      open={true}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      keepMounted\r\n      TransitionComponent={Transition}\r\n      disableEscapeKeyDown={false}\r\n    >\r\n      <DialogTitle>\r\n        Si deseas realizar ventas inicia tu turno primeramente.\r\n      </DialogTitle>\r\n      <AbrirTurno type=\"FRENTE\" setLoading={setLoading} loading={loading} />\r\n    </Dialog>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport NavegacionVentas from \"../Navegaciones/NavegacionVentas\";\r\nimport NavegacionVentasLateral from \"../Navegaciones/NavegacionVentasLateral\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {\r\n  VentasContext,\r\n  VentasProvider,\r\n} from \"../../context/Ventas/ventasContext\";\r\nimport VentaIndex from \"../../pages/ventas/venta_index\";\r\nimport useStyles from \"../Navegaciones/styles\";\r\nimport moment from \"moment\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport { PowerSettingsNew, Settings } from \"@material-ui/icons\";\r\n\r\nexport default function LayoutVentas(props) {\r\n  const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n  if (!sesion) props.history.push(\"/\");\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <VentasProvider>\r\n        <LayoutWithProvider props={props} />\r\n      </VentasProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst LayoutWithProvider = ({ props }) => {\r\n  return (\r\n    <Box>\r\n      <Box height=\"5vh\">\r\n        <NavDataCajaUsers props={props} />\r\n      </Box>\r\n      <Grid container>\r\n        <Grid item lg={9} md={8}>\r\n          <Box height=\"10vh\">\r\n            <NavegacionVentas />\r\n          </Box>\r\n          <Box height=\"85vh\">\r\n            <VentaIndex />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item lg={3} md={4}>\r\n          <NavegacionVentasLateral />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst NavDataCajaUsers = ({ props }) => {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    setUbicacionTurno,\r\n  } = useContext(VentasContext);\r\n  const {\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n  moment.locale(\"es\");\r\n\r\n  const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  function Administrador() {\r\n    console.log(sesion);\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={4} style={{ display: \"flex\" }}>\r\n        <Avatar\r\n          alt=\"Remy Sharp\"\r\n          srsc=\"/static/images/avatar/1.jpg\"\r\n          className={classes.avatar}\r\n        />\r\n        <Typography color=\"textSecondary\">{sesion?.nombre}</Typography>\r\n        <Box mx={1} />\r\n        {!turnoEnCurso?.numero_caja ? (\r\n          \"\"\r\n        ) : (\r\n          <Typography color=\"textSecondary\">\r\n            <b>Caja: </b>\r\n            {turnoEnCurso?.numero_caja}\r\n          </Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item md={4} style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        <img\r\n          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/calendario.svg\"\r\n          alt=\"icono admin\"\r\n          className={classes.avatar}\r\n        />\r\n        <Typography color=\"textSecondary\">\r\n          {moment().format(\"MM/DD/YYYY\")}\r\n        </Typography>\r\n        <Box mx={1} />\r\n        <Typography color=\"textSecondary\">\r\n          <b>{moment().format(\"h:mm\")} hrs.</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid\r\n        item\r\n        md={4}\r\n        style={\r\n          !turnoEnCurso\r\n            ? { display: \"flex\", justifyContent: \"flex-end\", zIndex: 99999 }\r\n            : { display: \"flex\", justifyContent: \"flex-end\" }\r\n        }\r\n      >\r\n        <Button\r\n          onClick={() => Administrador()}\r\n          startIcon={<Settings />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          F1 Administrador\r\n        </Button>\r\n        <Box mx={1} />\r\n        <Button\r\n          color=\"secondary\"\r\n          onClick={() => {\r\n            signOut();\r\n          }}\r\n          startIcon={<PowerSettingsNew />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          Salir\r\n        </Button>\r\n        <Box mr={2} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logochafa.744b44f9.PNG\";","export default __webpack_public_path__ + \"static/media/admin.cecfcd64.svg\";","export default __webpack_public_path__ + \"static/media/cart-add.eacbdb19.svg\";","import { Box, Button, Container, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../img/logochafa.PNG';\r\nimport adminIcon from '../../icons/ventas/admin.svg';\r\nimport cartIcon from '../../icons/ventas/cart-add.svg';\r\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\twidth: 150,\r\n        fontSize: 150\r\n\t},\r\n\r\n}));\r\n\r\nexport default function LayoutHome(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tif (!sesion) props.history.push('/');\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Box height=\"90vh\">\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<img alt=\"logo ab\" src={logo} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" my={6}>\r\n\t\t\t\t\t<Button component={Link} to=\"/admin/inicio\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={adminIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button component={Link} to=\"/ventas/venta-general\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={cartIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tVentas\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n                    <Button color=\"secondary\" onClick={signOut}>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<PowerSettingsNewRoundedIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","//layouts\r\nimport LayoutLogin from '../components/Layouts/LayoutLogin';\r\nimport LayoutAdmin from '../components/Layouts/LayoutAdmin';\r\nimport LayoutVentas from '../components/Layouts/LayoutVentas';\r\nimport LayoutHome from '../components/Layouts/LayoutHome';\r\n\r\n//sucursales pages\r\nimport AdminInicio from '../pages/sucursales/AdminInicio'\r\n\r\n//ventas pages\r\nimport Venta_index from '../pages/ventas/venta_index'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: LayoutLogin,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/home',\r\n\t\tcomponent: LayoutHome,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/admin',\r\n\t\tcomponent: LayoutAdmin,\r\n\t\texact: false,\r\n\t\troutes: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/admin/inicio',\r\n\t\t\t\tcomponent: AdminInicio,\r\n\t\t\t\texact: true,\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: '/ventas/venta-general',\r\n\t\tcomponent: LayoutVentas,\r\n\t\texact: false\r\n\t}\r\n\t\r\n];\r\n\r\nexport default routes;\r\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport { RegProductoProvider } from '../../context/Catalogos/CtxRegProducto';\r\nimport AdminInicio from '../../pages/sucursales/AdminInicio';\r\nimport NavegacionAdmin from '../Navegaciones/NavegacionAdmin';\r\n\r\n\r\nexport default function LayoutAdmin(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<RegProductoProvider>\r\n\t\t\t\t<NavegacionAdmin />\r\n\t\t\t\t<AdminInicio />\r\n\t\t\t</RegProductoProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { blue, grey } from '@material-ui/core/colors';\r\nimport { createTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createTheme({\r\n\tpalette: {\r\n\t\tnavbar: grey[50],\r\n\t\tprimary: {\r\n\t\t\tmain: blue[500]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#f50057'\r\n\t\t},\r\n\t}\r\n});\r\n\r\nexport default theme;\r\n","import {\r\n  ApolloClient,\r\n  /* createHttpLink, */ InMemoryCache,\r\n} from \"@apollo/client\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\n\r\nconst httpLink = createUploadLink({\r\n  uri: \"https://cafi-punto-venta.herokuapp.com/\",\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  connectToDevTools: true,\r\n  cache: new InMemoryCache({\r\n    addTypename: false,\r\n  }),\r\n  link: httpLink,\r\n});\r\n\r\nexport default client;\r\n","import React from \"react\";\r\nimport { Box, CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport routes from \"./config/routes\";\r\nimport theme from \"./config/colors\";\r\n\r\nimport client from \"./config/apollo\";\r\nimport { ApolloProvider } from \"@apollo/client\";\r\nimport { AccesosProvider } from \"./context/Accesos/accesosCtx\";\r\nimport { ClienteProvider } from \"./context/Catalogos/crearClienteCtx\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Box height=\"100vh\" className=\"App\">\r\n      <CssBaseline />\r\n      <ApolloProvider client={client}>\r\n        <AccesosProvider>\r\n          <ClienteProvider>\r\n            <ThemeProvider theme={theme}>\r\n              <Router>\r\n                <Switch>\r\n                  {routes.map((route, index) => (\r\n                    <RoutesWithSubRoutes key={index} {...route} />\r\n                  ))}\r\n                </Switch>\r\n              </Router>\r\n            </ThemeProvider>\r\n          </ClienteProvider>\r\n        </AccesosProvider>\r\n      </ApolloProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RoutesWithSubRoutes(route) {\r\n  return (\r\n    <Route\r\n      path={route.path}\r\n      exact={route.exact}\r\n      render={(props) => <route.component routes={route.routes} {...props} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./index.scss\"\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}