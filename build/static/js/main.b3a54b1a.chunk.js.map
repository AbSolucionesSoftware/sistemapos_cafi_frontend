{"version":3,"sources":["gql/Catalogos/usuarios.js","components/SnackBarMessages.js","components/Layouts/LayoutLogin.js","context/Catalogos/initialStatesProducto.js","context/Catalogos/CtxRegProducto.js","context/Catalogos/empresaContext.js","components/Layouts/BackDrop.js","components/ErrorPage.js","gql/Empresa/empresa.js","pages/sucursales/Empresa/Datos/MisDatos.js","pages/sucursales/Facturacion/catalogos.js","gql/Facturacion/Facturacion.js","pages/sucursales/Facturacion/CFDISellos/RegistrarSellos.js","pages/sucursales/Facturacion/CFDISellos/EliminarCSD.js","pages/sucursales/Empresa/InformacionFiscal/InformacionFiscal.js","pages/sucursales/Empresa/DatosEmpresa.js","gql/Empresa/sucursales.js","config/reuserFunctions.js","pages/sucursales/Empresa/Sucursal/DatosSucursal.js","pages/sucursales/Empresa/Empresa.js","pages/sucursales/Catalogos/Producto/PreciosVenta/UnidadesVenta.js","pages/sucursales/Catalogos/Producto/PreciosVenta/Precios.js","pages/sucursales/Catalogos/Producto/unidades.js","pages/sucursales/Catalogos/Producto/calculos_precios.js","pages/sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional.js","context/Compras/comprasContext.js","pages/sucursales/Catalogos/Producto/TallasColores/TablaPresentaciones.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosProductos.js","gql/Catalogos/productos.js","gql/Catalogos/colores.js","pages/sucursales/Catalogos/Producto/TallasColores/crearColor.js","gql/Catalogos/tallas.js","pages/sucursales/Catalogos/Producto/TallasColores/crearTalla.js","pages/sucursales/Catalogos/Producto/TallasColores/TallasColores.js","pages/sucursales/Compras/AbrirCompra/productos/TallasProducto.js","billing/Facturama/facturama.api.js","gql/CatalogosSat/catalogoProductosSat.js","pages/sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT.js","gql/Catalogos/categorias.js","gql/Catalogos/departamentos.js","gql/Catalogos/marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/RegistrarNuevoSelect.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Categorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Subcategorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Departamentos.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/registrarInfoGeneral.js","pages/sucursales/Catalogos/Producto/Imagenes/cargarImagenesProducto.js","context/Almacenes/crearAlmacen.js","gql/Almacenes/Almacen.js","pages/sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen.js","pages/sucursales/Catalogos/Producto/Inventario&Almacen/AlmacenInicial.js","pages/sucursales/Catalogos/Producto/validaciones.js","gql/Catalogos/centroCostos.js","pages/sucursales/Catalogos/Producto/CentroCostos/CentroCostos.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/PrecioPlazos.js","pages/sucursales/Catalogos/Producto/validateDatos.js","pages/sucursales/Catalogos/Producto/crearProducto.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosVenta.js","pages/sucursales/Compras/AbrirCompra/productos/Descuentos.js","context/Catalogos/crearClienteCtx.js","pages/sucursales/Catalogos/Cliente/RegistrarInfoBasica.js","pages/sucursales/Catalogos/Cliente/RegistroInfoCredito.js","gql/Catalogos/clientes.js","pages/sucursales/Catalogos/Cliente/CrearCliente.js","gql/Compras/compras.js","pages/sucursales/Compras/AbrirCompra/initial_states.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProveedorAlmacen.js","pages/sucursales/Compras/AbrirCompra/productos/mostrar_precios.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProducto.js","pages/sucursales/Compras/AbrirCompra/productos/setOrResetData.js","pages/sucursales/Compras/AbrirCompra/TablaCompras.js","pages/sucursales/Compras/AbrirCompra/ConfirmarCompra.js","pages/sucursales/Compras/AbrirCompra/AbrirCompra.js","pages/sucursales/Compras/ComprasRealizadas/ExportarProductosCompra.js","pages/sucursales/Compras/ComprasRealizadas/DatosDeCompra.js","pages/sucursales/Compras/ComprasRealizadas/ListaCompras.js","pages/sucursales/Compras/ComprasRealizadas/ExportarComprasExcel.js","pages/sucursales/Compras/ComprasRealizadas/ComprasRealizadas.js","pages/sucursales/Compras/ComprasEnEspera/VerificarProductos.js","pages/sucursales/Compras/ComprasEnEspera/DatosDeCompraEspera.js","pages/sucursales/Compras/ComprasEnEspera/ListaEnEspera.js","pages/sucursales/Compras/ComprasEnEspera/ComprasEnEspera.js","pages/sucursales/Compras/Compras.js","pages/sucursales/Catalogos/Cliente/ListaClientes.js","pages/sucursales/Catalogos/Cliente/Cliente.js","gql/Catalogos/descuentos.js","pages/sucursales/Catalogos/Producto/Descuentos/ListaPrecios.js","pages/sucursales/Catalogos/Producto/Descuentos/Descuento.js","pages/sucursales/Catalogos/Producto/EliminarProducto.js","pages/sucursales/Catalogos/Producto/ListaProductos.js","pages/sucursales/Catalogos/Producto/ProductosEliminados.js","pages/sucursales/Catalogos/Producto/Productos.js","pages/sucursales/Catalogos/Producto/index.js","pages/sucursales/Catalogos/Tallas/ListaTallas.js","pages/sucursales/Catalogos/Tallas/RegistroTallas.js","pages/sucursales/Catalogos/Tallas/Tallas.js","gql/Catalogos/contabilidad.js","pages/sucursales/Catalogos/Contabilidad/ListaServicios.js","pages/sucursales/Catalogos/Contabilidad/RegistroServicio.js","pages/sucursales/Catalogos/Contabilidad/Contabilidad.js","pages/sucursales/Catalogos/Proveedores/ListaProveedores.js","pages/sucursales/Catalogos/Proveedores/Proovedores.js","gql/Cajas/cajas.js","pages/sucursales/Catalogos/Cajas/ListaCajas.js","pages/sucursales/Catalogos/Cajas/RegistrarCajas.js","pages/sucursales/Catalogos/Cajas/Cajas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso.js","context/Catalogos/usuarioContext.js","pages/sucursales/Catalogos/Usuarios/FormularioUsuario.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Parametros.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Catalogos.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/MiEmpresa.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Compras.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Almacenes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Tesoreria.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Reportes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Ventas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Facturacion.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/AsignarPermisos.js","pages/sucursales/Catalogos/Usuarios/CrearUsuario.js","pages/sucursales/Catalogos/Usuarios/ListaUsuario.js","pages/sucursales/Catalogos/Usuarios/Usuarios.js","context/Catalogos/Departamentos.js","pages/sucursales/Catalogos/Departamentos/ListaDepartamentos.js","pages/sucursales/Catalogos/Departamentos/RegistroDepartamento.js","pages/sucursales/Catalogos/Departamentos/Departamentos.js","pages/sucursales/Catalogos/Categorias/RegistroCategorias.js","pages/sucursales/Catalogos/Categorias/Categorias.js","pages/sucursales/Catalogos/Colores/ListaColores.js","pages/sucursales/Catalogos/Colores/RegistroColores.js","pages/sucursales/Catalogos/Colores/Colores.js","pages/sucursales/Catalogos/Marcas/ListaMarcas.js","context/Catalogos/Marcas.js","pages/sucursales/Catalogos/Marcas/VistaMarcas.js","pages/sucursales/Catalogos/Marcas/Marcas.js","pages/sucursales/Catalogos/CentroCostos/RegistroCentroCostos.js","pages/sucursales/Catalogos/CentroCostos/CentroCostos.js","gql/Catalogos/conceptosAlmacen.js","pages/sucursales/Catalogos/ConceptosAlmacen/ListaConceptos.js","pages/sucursales/Catalogos/ConceptosAlmacen/RegistroConcepto.js","pages/sucursales/Catalogos/ConceptosAlmacen/ConceptosAlmacen.js","pages/sucursales/Catalogos/Catalogos.js","context/Tesoreria/tesoreriaCtx.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/RetiroDeposito.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/HistorialCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/ListaCuentas.js","pages/sucursales/Tesoreria/CuentasEmpresaSucursales/CuentasEmpresaSucursales.js","gql/Tesoreria/egresos.js","pages/sucursales/Tesoreria/Egresos/TablaProductosEgresos.js","pages/sucursales/Tesoreria/Egresos/FormRegistroEgresos.js","pages/sucursales/Tesoreria/Egresos/VistaRegistroEgreso.js","pages/sucursales/Tesoreria/Egresos/Egresos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaCompras.js","gql/Tesoreria/abonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/AbonosProovedores.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaCompras.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/TablaAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Clientes/AbonosClientes.js","pages/sucursales/Tesoreria/Tesoreria.js","pages/sucursales/Tesoreria/IndexTesoreria.js","context/Facturacion/facturacionCtx.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ProductosSinClave.js","gql/Ventas/ventas_generales.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ListaVentasFactura.js","pages/sucursales/Facturacion/NuevaFactura/Catalogos/CodigoPostal.js","pages/sucursales/Facturacion/NuevaFactura/ClientesSelect.js","pages/sucursales/Facturacion/NuevaFactura/RegistroFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EditarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EliminarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/TablaDetallesFactura.js","pages/sucursales/Facturacion/NuevaFactura/initial_factura_states.js","pages/sucursales/Facturacion/NuevaFactura/RealizarFactura.js","pages/sucursales/Facturacion/NuevaFactura/CancelarFactura.js","pages/sucursales/Facturacion/NuevaFactura/NuevaFactura.js","pages/sucursales/Facturacion/CFDISeries/RegistroSeries.js","pages/sucursales/Facturacion/CFDISeries/ListaSeries.js","pages/sucursales/Facturacion/CFDISeries/SeriesCdfi.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarProductosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/DatosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/ListaFacturas.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarListaFacturasExcel.js","pages/sucursales/Facturacion/FacturasRealizadas/FacturasRealizadas.js","pages/sucursales/Facturacion/Facturacion.js","pages/sucursales/Almacenes/RegistroAlmacen/ListaAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/RegistroAlmacen.js","icons/almacen.svg","context/Almacenes/traspasosAlmacen.js","components/Traspasos/TablePresentacionesNotOrigen.js","components/Traspasos/TallasColoresTraspasos.js","components/Traspasos/TableSelectMedidas.js","components/Traspasos/TableSelectProducts.js","pages/sucursales/Almacenes/Traspasos/Traspasos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/ListaProductos.js","components/ExportExcel.js","pages/sucursales/Almacenes/InventarioPorAlmacen/InventariosPorAlmacen.js","pages/sucursales/Almacenes/Almacenes.js","pages/sucursales/Reportes/Cajas/TablaHistorialFiltrado.js","pages/sucursales/Reportes/Cajas/HistorialCaja.js","pages/sucursales/Reportes/Cajas/CardCaja.js","pages/sucursales/Reportes/Cajas/Cajas.js","pages/sucursales/Reportes/TurnosUsuarios/TablaTurnosFiltrados.js","gql/Ventas/abrir_cerrar_turno.js","pages/sucursales/Reportes/TurnosUsuarios/ReportesTurnosUsuarios.js","pages/sucursales/Reportes/Compras/TablaComprasFiltradas.js","gql/Compras/reporte_compras.js","pages/sucursales/Reportes/Compras/ExportarCompras.js","pages/sucursales/Reportes/Compras/FiltrosCompra.js","pages/sucursales/Reportes/Compras/ReportesCompras.js","pages/sucursales/Reportes/Ventas/TablaVentasFiltradas.js","pages/sucursales/Reportes/Ventas/ReportesVentas.js","pages/sucursales/Reportes/Almacenes/ExportarTraspasos.js","pages/sucursales/Reportes/Almacenes/TablaAlmacenFiltradas.js","pages/sucursales/Reportes/Almacenes/ReportesAlmacen.js","pages/sucursales/Reportes/Cortes/TablaCortesFiltradas.js","pages/sucursales/Reportes/Cortes/ExportExcel.js","pages/sucursales/Reportes/Cortes/ReportesCortes.js","pages/sucursales/Reportes/Tesoreria/ListaEgresos.js","pages/sucursales/Reportes/Tesoreria/ListaTransferencias.js","pages/sucursales/Reportes/Tesoreria/Reporte_Tesoreria.js","pages/sucursales/Reportes/Reportes.js","pages/sucursales/AdminInicio.js","components/Navegaciones/NavegacionAdmin.js","components/Navegaciones/styles.js","pages/ventas/styles.js","context/Ventas/ventasContext.js","pages/ventas/Operaciones/DepositoRetiroCaja.js","pages/ventas/AbrirCerrarTurno/AbrirTurno.js","pages/ventas/AbrirCerrarTurno/CerrarTurno.js","pages/ventas/AbrirCerrarTurno/Turnos.js","context/Accesos/accesosCtx.js","pages/ventas/Operaciones/PreCorteCaja.js","pages/ventas/Operaciones/VentaEnEspera.js","pages/ventas/ArticuloRapido/RegistroInformacionRapido.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TablaPresentaciones.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TallasColoresRapidos.js","components/AccesosPassword/Acceso.js","pages/ventas/ArticuloRapido/ArticuloRapido.js","pages/ventas/ArticuloRapido/indexArticuloRapido.js","pages/ventas/Cotizacion/CotizacionesPendientes.js","pages/ventas/Cotizacion/ListaCotizaciones.js","components/Navegaciones/NavegacionVentas.js","pages/ventas/Abonos/Abonos.js","pages/ventas/BuscarProductos/ListaProductos.js","pages/ventas/BuscarProductos/InformacionProducto.js","pages/ventas/BuscarProductos/BuscarProducto.js","pages/ventas/ClientesVentas/ClientesVentas.js","gql/Ventas/cotizaciones.js","pages/ventas/Cotizacion/NuevaCotizacion.js","pages/ventas/Cotizacion/Cotizacion.js","pages/ventas/Operaciones/CancelarVenta.js","pages/ventas/Operaciones/CerrarVenta.js","pages/ventas/Operaciones/ConsultarPrecio.js","pages/ventas/Operaciones/PreciosProducto.js","pages/ventas/VentasEspera/ListaVentas.js","pages/ventas/VentasEspera/VentasEspera.js","pages/ventas/VentasRealizadas/ListaVentasRealizadas.js","pages/ventas/VentasRealizadas/VentasRealizadas.js","components/Navegaciones/NavegacionVentasLateral.js","pages/ventas/EliminarProductoVenta.js","pages/ventas/Tabla_ventas_checkbox.js","pages/ventas/ClientesVentas.js","pages/ventas/VentasGenerales.js","pages/ventas/venta_index.js","img/logochafa.PNG","icons/ventas/admin.svg","icons/ventas/cart-add.svg","components/Layouts/LayoutHome.js","config/routes.js","img/abLogo.jpeg","components/Layouts/LayoutAdmin.js","components/Layouts/LayoutVentas.js","config/colors.js","config/apollo.js","App.js","reportWebVitals.js","index.js"],"names":["CREAR_USUARIO","gql","OBTENER_USUARIOS","ACTUALIZAR_USUARIO","LOGEAR_USUARIO","LOGEAR_USUARIO_ACCESOS","useStyles","makeStyles","theme","snack","zIndex","SnackBarMessages","alert","setAlert","classes","Portal","Snackbar","className","anchorOrigin","vertical","horizontal","open","onClose","status","message","autoHideDuration","Box","display","style","color","mr","Typography","margin","marginTop","spacing","marginBottom","containerImagen","maxWidth","maxHeight","imagen","width","height","initial_state_datos_generales","receta_farmacia","clave_producto_sat","Name","Value","initial_state_precios","monedero","monedero_electronico","iva_activo","ieps_activo","ieps","iva","granel","inventario","inventario_minimo","inventario_maximo","unidad_de_inventario","codigo_unidad","precio_de_compra","precio_con_impuesto","precio_sin_impuesto","unidad_de_compra","unidad","cantidad","precio_unitario_sin_impuesto","precio_unitario_con_impuesto","initial_state_unidadVentaXDefecto","codigo_barras","precio","descuento_activo","precio_unidad","numero_precio","precio_neto","precio_venta","unidad_mayoreo","iva_precio","ieps_precio","utilidad","precio_general","cantidad_unidad","unidad_maxima","unidad_principal","default","initial_state_unidadVentaSecundaria","initial_state_preciosP","initial_state_unidadesVenta","initial_state_almacen_inicial","id_almacen","almacen","fecha_de_expiracion","initial_state_centro_de_costos","initial_state_preciosPlazos","precio_piezas","precio_cajas","precio_costales","initial_state_subcategorias","initial_state_imagenes","initial_state_imagenes_eliminadas","initial_state_onPreview","index","image","initial_state_validacion","error","initial_state_subcostos","initial_state_presentaciones","RegProductoContext","createContext","RegProductoProvider","children","useState","datos_generales","setDatosGenerales","precios","setPrecios","unidadVentaXDefecto","setUnidadVentaXDefecto","unidadVentaSecundaria","setUnidadVentaSecundaria","preciosP","setPreciosP","unidadesVenta","setUnidadesVenta","almacen_inicial","setAlmacenInicial","centro_de_costos","setCentroDeCostos","preciosPlazos","setPreciosPlazos","subcategorias","setSubcategorias","imagenes","setImagenes","imagenes_eliminadas","setImagenesEliminadas","onPreview","setOnPreview","validacion","setValidacion","subcostos","setSubcostos","selectedDate","setSelectedDate","update","setUpdate","presentaciones","setPresentaciones","presentaciones_eliminadas","setPresentacionesEliminadas","React","actualizarLista","setActualizarLista","datosPreciosProducto","setDatosPreciosProducto","preciosDescuentos","setPreciosDescuentos","preciosProductos","setPreciosProductos","datosEnDescuentos","setDatosEnDescuentos","almacen_existente","setAlmacenExistente","Provider","value","EmpresaContext","EmpresaProvider","nombre_empresa","nombre_dueno","telefono_dueno","celular","correo_empresa","nombre_fiscal","rfc","regimen_fiscal","curp","info_adicio","direccion","calle","no_ext","no_int","codigo_postal","colonia","municipio","localidad","estado","pais","direccionFiscal","datosBancarios","cuenta","sucursal","clave_banco","empresa","setEmpresa","toUpdate","setToUpdate","setError","backdrop","drawer","backgroundColor","BackdropComponent","loading","setLoading","Backdrop","CircularProgress","ErrorPage","altura","flexDirection","justifyContent","alignItems","fontSize","align","OBTENER_DATOS_EMPRESA","ACTUALIZAR_EMPRESA","appBar","position","title","marginLeft","flex","icon","subtitle","require","avatarContainer","border","borderRadius","avatar","MisDatos","props","sesion","JSON","parse","localStorage","getItem","loadingPage","setLoadingPage","accesos","mi_empresa","datos_empresa","editar","bloqueo","preview","setPreview","errorPage","setErrorPage","errorForm","setErrorForm","useContext","useMutation","actualizarEmpresa","useQuery","variables","id","_id","data","refetch","valor_puntos","empresaDatos","setEmpresaDatos","useEffect","errorCatch","undefined","obtenerEmpresa","actEmp","a","input","console","log","networkError","result","graphQLErrors","obtenerCampos","e","valor","target","name","parseFloat","obtenerCamposDireccion","onDrop","useCallback","acceptedFiles","reader","FileReader","readAsDataURL","onload","useDropzone","accept","noKeyboard","getRootProps","getInputProps","Container","Grid","container","item","md","Avatar","src","TextField","fullWidth","disabled","type","size","variant","helperText","onChange","inputMode","mt","Divider","DialogActions","Button","onClick","setOpen","usosCfdi","tiposCfdi","NameId","tipoCambio","formaPago","metodoPago","regimenFiscal","Natural","Moral","CREAR_FACTURA","CREAR_SERIE","ACTUALIZAR_DEFAULT_SERIE","ELIMINAR_SERIE","OBTENER_SERIES","CREAR_SELLO_CFDI","ELIMINAR_SELLO_CFDI","RegistroSellos","datosEmpresa","firma_disabled","certificate","private_key","private_key_password","datos","setDatos","show","setShow","handleClose","crearCSDS","obtenerFiles","files","getBase64","file","Promise","resolve","baseURL","guardarBD","cer","key","then","base","split","nombre_cer","catch","err","nombre_key","startIcon","Add","Dialog","DialogTitle","DialogContent","mb","InputProps","endAdornment","InputAdornment","htmlFor","CloudUpload","component","disableElevation","readOnly","multiple","my","IconButton","onMouseDown","event","preventDefault","edge","Done","EliminarSellos","eliminarCSD","eliminarSelloCSD","DeleteOutline","DialogContentText","InformacionFiscal","informacion_fiscal","setFirmaDisabled","empresaFiscal","setEmpresaFiscal","new_sesion","setItem","stringify","sello_sat","limite_timbres","timbres_usados","response","obtenerCamposBancarios","xs","FormControl","Select","MenuItem","map","res","multiline","m","Alert","severity","action","AlertTitle","sm","Transition","forwardRef","ref","Slide","direction","MiEmpresa","setValue","fullScreen","TransitionComponent","AppBar","Toolbar","Tabs","indicatorColor","Tab","label","OBTENER_SUCURSALES","OBTENER_DATOS_SUCURSAL","ACTUALIZAR_SUCURSAL","CREAR_MOVIMIENTO_CUENTA","OBTENER_HISTORIAL_CUENTAS","numerosRandom","min","max","Math","floor","random","generateCodeNumerico","length","characters","charactersLength","i","charAt","formatoFecha","fecha","Date","toLocaleDateString","weekday","year","month","day","formatoFechaCorta","formatoMexico","number","toFixed","toString","replace","cleanTypenames","Array","isArray","newObject","property","findProductArray","producto","venta","productosVentas","productos","found","producto_found","id_producto","clave_alterna","calculatePrices2","newP","origen","precio_boolean","cantidadNueva","valor_granel","precio_actual","descuento","cantidadCaja","cantidad_unidads","ivaCalculo","iepsCalculo","impuestoCalculo","subtotalCalculo","totalCalculo","monederoCalculo","descuentoCalculo","ob","cantidad_venta","granel_producto","precio_a_vender","precio_actual_producto","precio_actual_object","porciento","dinero_descontado","precio_anterior","verifiPrising","amount","pricings","precios_producto","filter","p","finalPrising","pricing","number_pricing","object_prising","datoFinal","precio_seleccionado","DatosSucursal","actualizarSucursal","nombre_sucursal","descripcion","telefono","sucursalDatos","setSucursalDatos","obtenerDatosSucursal","flexdirection","autoFocus","Empresa","justify","lg","ver","PreciosDeCompra","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","LocalOffer","Checkbox","checked","inputProps","UnidadesVentaSecundaria","setPrecio","calcularUnidadDesucuento","precio_unit","precio_venta_unit","suma_impuestos","PVSI","porcentaje","PVCDSI","dineroDescontado","PCSI","calcularUnidadDesucuentoCheck","boolean","calcularUnidad","PVCI","unidad_secundaria","OutlinedInput","GenCodigoBarras","Cached","onBlur","startAdornment","Tooltip","placement","arrow","aplicarDescuento","precioTitle","marginInput","titulos","fontWeight","PreciosDeVenta","newPreciosP","RenderPreciosP","preciosVenta","calculos","cantidad_sec","descuento_sec","descuento_activo_sec","PUCSI","utilidad_base","unidadXDefecto","unidadSecundaria","new_precio_venta_desc","precio_con_descuento","new_precio_venta_desc_sec","precio_con_descuento_sec","splice","verificarCampoVacio","minWidth","valor_base","PCCI","obtenerUtilidad","pl","suma","obtenerPrecioNeto","parseInt","obtenerMayoreo","unitCodes","unitCodes_granel","calcular_iva","calcular_ieps","required","RegistroInfoAdidional","obtenerIva","setPrecioConImpuesto","setPrecioSinImpuesto","obtenerIeps","precioConImpuesto","precioSinImpuesto","useDebounce","PCI","PSI","obtenerUnidadCompra","child","unidad_activa","total_impuesto","isNaN","obtenerPrecioConImpuesto","obtenerPrecioSinImpuesto","noWrap","onFocus","FormHelperText","ComprasContext","ComprasProvider","costo","cantidad_regalo","unidad_regalo","cantidad_total","descuento_porcentaje","descuento_precio","iva_total","ieps_total","subtotal","impuestos","total","mantener_precio","impuestos_descuento","subtotal_descuento","total_descuento","datosProducto","setDatosProducto","proveedor","en_espera","fecha_registro","moment","locale","format","compra_credito","fecha_vencimiento_credito","credito_pagado","saldo_credito_pendiente","forma_pago","descuento_aplicado","cantidad_descontada","datosCompra","setDatosCompra","setPreciosVenta","productoOriginal","setProductoOriginal","productosCompra","setProductosCompra","isEditing","setIsEditing","editFinish","setEditFinish","setCosto","setCantidad","issue","setIssue","loadingProductos","setLoadingProductos","compareFunction","b","medida","talla","localeCompare","root","paper","table","tableRow","alpha","palette","primary","main","visuallyHidden","clip","overflow","padding","top","colorContainer","TablaPresentaciones","from","setOnUpdate","onUpdate","withoutPrice","onlyPrice","mostrar_presentaciones","sort","Paper","stickyHeader","RenderPresentacionesRows","disabledInput","setDisabledInput","textfield","useRef","copy_presentaciones","copy_element_presentacion","copy_element_presentacion_descuento","copy_producto","obtenerDatos","existencia","cantidad_nueva","actionButton","hover","selected","Input","inputRef","nuevo","nombre_comercial","Chip","nombre","Zoom","hex","LocalOfferOutlined","checkedIcon","Edit","TabPanel","other","role","hidden","a11yProps","AlertDialogSlide","agregarCompra","cargando","toggleDrawer","resetProducto","new_precios","unidades_de_venta","unidades_secundaria","unidadxdefecto","actualizarContextProducto","keepMounted","tipo_producto","newValue","scrollButtons","textColor","LocalAtm","SquareFoot","OBTENER_CONSULTAS","CREAR_PRODUCTO","OBTENER_PRODUCTOS","ACTUALIZAR_PRODUCTO","ELIMINAR_PRODUCTO","PRODUCTOS_ELIMINADOS","ACTIVAR_PRODUCTOS","CREAR_PRODUCTO_RAPIDO","CREAR_COLOR","OBTENER_COLORES","ACTUALIZAR_COLOR","ELIMINAR_COLOR","CrearColorProducto","setColor","values","setValues","toggleModal","crearColor","GuardarDatosBD","colores","scroll","disableEscapeKeyDown","reason","onChangeComplete","toUpperCase","bgcolor","onSubmit","focused","form","CREAR_TALLAS","OBTENER_TALLAS","ACTUALIZAR_TALLA","ELIMINAR_TALLA","CrearTallasProducto","setMedidasSeleccionadas","crearTalla","nueva_talla","tipo","cursor","ColoresTallas","obtenerConsultasProducto","tallas","calzados","medidasSeleccionadas","coloresSeleccionados","setColoresSeleccionados","medidas","obtenerColoresSeleccinados","colors","forEach","element","push","hashColor","hashMedida","colores_existentes","existColor","medidas_existentes","existMedida","pointerEvents","opacity","mx","RenderTallas","useTheme","setSelected","seleccionarMedidas","medidas_registradas","medidas_seleccionadas_temp","presentacion_temp","array_medidad_finales","producto_medida","k","producto_color","presentacion_existente","producto_array_final","x","objeto_presentaciones_final","handleAddTallas","getContrastText","Colores","seleccionarColores","obtenerColores","verificate","setVerificate","disableHoverListener","valuesFacturama","$","ajaxSetup","beforeSend","xhr","withCredentials","setRequestHeader","facturama","settings","url","retrieve","path","callback","jQuery","get","list","postSyncWithData","callbackError","ajax","dataType","contentType","success","putSyncWithData","deleteSyncWithParam","param","async","facturamaObject","Clients","Get","List","Create","Remove","Update","Products","BranchOffice","Series","idBranch","Cfdi","listWithParam","Send","postSyncWithParam","Cancel","params","Download","Acuse","TaxEntity","UploadCsd","UploadImage","Catalogs","States","country","Municipalities","state","Localities","Neighborhoods","postalCode","ProductsOrServices","keyword","PostalCodes","Units","Currencies","Countries","PaymentForms","PaymentMethods","FederalTaxes","FiscalRegimens","CfdiTypes","RelationTypes","CfdiUses","CREAR_CODIGO_PRODUCTO","ELIMINAR_CODIGO_PRODUCTO","background","spin_container","spin","CatalogosProductosSAT","codigos","busqueda","setBusqueda","setProductos","loading_save","setLoadingSave","loading_delete","setLoadingDelete","selectedIndex","setSelectedIndex","crearCodigoProducto","eliminarCodigoProducto","limpiarDataModal","handleOk","eliminarCodigoBD","handleCancel","buscarCatalogo","Facturama","responseJSON","Message","Autocomplete","options","getOptionLabel","option","renderInput","renderOption","flexGrow","_","getOptionSelected","Search","dense","SelectedListItem","contiene","includes","ListItem","button","click","detail","ListItemText","CREAR_CATEGORIA","CREAR_SUBCATEGORIA","ACTUALIZAR_CATEGORIA","ACTUALIZAR_SUBCATEGORIA","OBTENER_CATEGORIAS","ELIMINAR_CATEGORIA","ELIMINAR_SUBCATEGORIA","OBTENER_DEPARTAMENTOS","REGISTRAR_DEPARTAMENTO","ACTUALIZAR_DEPARTAMENTO","ELIMINAR_DEPARTAMENTO","OBTENER_MARCAS","REGISTRAR_MARCAS","ACTUALIZAR_MARCAS","ELIMINAR_MARCAS","RegistrarNuevoSelect","crearCategoria","crearSubcategoria","CrearDepartamentos","CrearMarca","handleToggle","guardarDatos","idCategoria","id_categoria","categoria_creada","categoria","subcategoria_creada","id_subcategoria","subcategoria","departamento_creado","id_departamento","crearDepartamentos","departamento","marca_creada","id_marca","crearMarcas","marca","endIcon","CategoriasProducto","categorias","SubcategoriasProducto","DepartamentosProducto","departamentos","nombre_departamentos","MarcasProducto","marcas","nombre_marca","formInput","obligatorio","without_arrows","RegistroInfoGenerales","centro_costos","obtenerChecks","costos","id_cuenta","subcuentas","Autorenew","textTransform","nombre_generico","FormControlLabel","control","formInputFlex","CargarImagenesProducto","render_imagenes","URL","createObjectURL","AddPhotoAlternate","minHeight","orientation","alt","RenderImagenes","key_imagen","url_imagen","handleModal","eliminarImagen","array","ModalDelete","Delete","CrearAlmacenContext","AlmacenProvider","nombre_almacen","id_usuario_encargado","datosAlmacen","setDatosAlmacen","openRegistro","setOpenRegistro","REGISTRO_ALMACEN","OBTENER_ALMACENES","ACTUALIZAR_ALMACEN","OBTENER_PRODUCTOS_ALMACEN","REALIZAR_TRASPASO","OBTENER_PRODUCTOS_EMPRESA","OBTENER_TRASPASOS","ContainerRegistroAlmacen","accion","CrearAlmacen","ActualizarAlmacen","obtenerUsuarios","limpiarCampos","onCloseModal","saveData","almacen_creado","crearAlmacen","id_sucursal","labelId","user","RegistroAlmacenInicial","almacenes","obtenerInventario","validaciones","generales","vista3","vista1","vista2","CREAR_CUENTA","CREAR_SUBCUENTA","ACTUALIZAR_CUENTA","ACTUALIZAR_SUBCUENTA","OBTENER_CUENTAS","ELIMINAR_CUENTA","ELIMINAR_SUBCUENTA","CentroCostos","obtenerAlmacenes","subcuenta","crearCuenta","crearSubcuenta","idCuenta","cuenta_creada","subcuenta_creada","id_subcuenta","validateJsonEdit","object_date","end_array","object","root_app","iconSvg","dialogContent","tabs","borderRight","divider","CrearProducto","productosRefetch","fromCompra","getProductos","crearProducto","actualizarProducto","setInitialStates","resetInitialStates","validate","vista7","copy_unidadesVenta","imagenes_without_aws","precio_plazos","usuario","medidas_producto","inventario_general","window","onkeydown","keyCode","document","getElementById","saveButton","ButtonActions","NavigateNext","Badge","badgeContent","invisible","NavigateBefore","ContenidoModal","fetchPolicy","PreciosDeVentaCompras","numero","RenderPrecios","setPrecioNeto","copy_preciosVenta","preciosVenta_base","calculosCompra","DescuentosInputs","impuesto_actual","PCSI_actual","round","subtotal_con_descuento","obtenerPrecio","obtenerPorcentaje","ClienteCtx","ClienteProvider","estado_cliente","cliente","setCliente","updateClientVenta","setUpdateClientVenta","RegistrarInfoBasica","numero_cliente","nombre_cliente","representante","clave_cliente","fecha_nacimiento","email","RegistrarInfoCredito","razon_social","numero_descuento","limite_credito","dias_credito","banco","numero_cuenta","CREAR_CLIENTE","OBTENER_CLIENTES","ACTUALIZAR_CLIENTE","ELIMINAR_CLIENTE","CrearCliente","ventas","handleClickOpen","crearCliente","actualizarCliente","copy_cliente","tipo_cliente","clienteBase","venta_actual","subTotal","venta_cliente","elevation","CREAR_COMPRA","CREAR_COMPRA_ESPERA","OBTENER_COMPRAS_REALIZADAS","OBTENER_COMPRAS_ESPERA","OBTENER_CONSULTA_GENERAL_PRODUCTO","ELIMINAR_COMPRA_ESPERA","initial_state_datosProducto","initial_state_datosCompra","initial_state_precios_venta","initial_state_productoOriginal","initial_state_productosCompra","DatosProveedorAlmacen","obtenerProveedorAlmacen","id_proveedor","errorRender","loadingRender","obtenerConsultaGeneralCompras","proveedores","MostrarPrecios","cantida_suma","presentacion","DatosProducto","count","setCargando","client","useApolloClient","setData","query","COSTO","CANTIDAD","nuevo_iva","nuevo_impuesto","obtenerCosto","obtenerCantidad","obtenerProductos","obtenerSelectsProducto","obtenerUnidadRegalo","actualizar_Precios","copy_datosProducto","copy_datosGenerales","copy_precios","copy_preciosP","copy_almacenInicial","copy_centroCostos","copy_presentacionesEliminadas","copy_precioPlazos","nueva","factor","cantidad_total_media","cantidad_regalo_media","productosCompra_ordenados","existente","prod_exist","Boolean","array_ordenado","ModalAgregarCompra","InfoOutlined","SetOrResetData","setStates","ListaCompras","productos_ordernados","RenderProductosCompra","isSelected","setIsSelected","productoCTX","seStates","unidad_producto","tabIndex","finish","ModalDeleteProducto","copy_compras","objeto_eliminado","ConfirmarCompra","realizarCompraBD","loading_modal","setLoadingModal","credito","setCredito","productos_recalculados","setProductosRecalculados","initial_state_descuento","descuento_base","setDescuentoBase","InputLabel","datos_descuento","productos_array","subtotal_actual","cantidad_descontada_product","recalcularPrecios","AbrirCompra","compra","handleOpenDetalles","refetchEspera","ModalCompra","openDelete","setOpenDelete","crearCompra","crearCompraEnEspera","compra_en_espera","descuento_compra","productos_con_descuento","conflicto","handleToggleDelete","Timer","CancelarCompra","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","ExportarProductosComprasExcel","compra_realizada","productos_detalles","Cantidad_regalo","CloudDownloadOutlined","filename","DatosDeCompra","productosFiltrados","setProductosFiltrados","toLowerCase","marginRight","placeholder","ListaProductos","obtenerComprasRealizadas","RenderRowsCompras","DetallesCompra","handleOpen","AssignmentOutlined","ExportarComprasExcel","filtro","filtroFecha","compras","nombre_documento","since","ComprasRealizadas","ContentDialogCompras","setFiltro","setFiltroFecha","searchfilter","filterDate","obtenerBusqueda","subtract","obtenerFecha","onDelete","current","VerificarProductosCompras","nuevoArray","setNuevoArray","setVerificado","setSuccess","VerifiedUser","ModalVerificacion","loadingVerificacion","setLoadingVerificacion","useLazyQuery","getQuery","productos_nuevos","copy_producto_compra","productos_filtrados","precios_base","unidades_base","presentaciones_base","u_default","u_default_base","present","y","present_base","nuevo_producto_compra","total_con_descuento","setTimeout","verificarProductos","compra_temp","setCompraTemp","permisosUsuario","verificado","compras_espera","eliminar","paddingTop","paddingBottom","ModalEliminarCompra","eliminarCompraEnEspera","eliminarCompra","DeleteOutlined","ListaEnEspera","obtenerComprasEnEspera","elimina","RenderRowsComprasEspera","ModalContinuarCompra","ComprasEnEspera","Compras","abrir_compra","compras_realizadas","ListaClientes","selectDataClient","showModal","setShowModal","dataSelectRowClient","setDataSelectRowClient","handleClickOpenModal","obtenerClientes","row","handleClickSelectClient","RowsRender","cambiarEstado","Switch","catalogos","clientes","EliminarCliente","eliminarCliente","eliminarClienteBD","paddingLeft","Cliente","InputBase","onKeyPress","defaultValue","agregar","REGISTRAR_DESCUENTOS","DESACTIVAR_DESCUENTOS","ELIMINAR_DESCUENTOS","headCells","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","datosPrecios","variable","indeterminate","headCell","numeric","disablePadding","TablaPreciosDescuentos","setCleanList","cleanList","verificarDatos","setPrecioPrueba","page","rowsPerPage","handleClick","indexOf","newSelected","concat","slice","emptyRows","newSelecteds","n","isItemSelected","colSpan","openModal","setOpenModal","DesactivarDescuentoUnidad","ELiminarDescuentoUnidad","handleChangeActivo","editarDatos","handleDelete","resultado","eliminarDescuentoUnidad","defaultChecked","Modal","avatarGroup","rootSlice","rootTable","DescuentoProductos","CrearDescuentoUnidad","openDescuento","setOpenDescuento","precioPrueba","handleCloseDescuentos","cerrarModal","arrayDescuento","descuentos","eliminado","textAlign","dislay","gutterBottom","justifyItems","Slider","getAriaValueText","valueLabelDisplay","valorText","obtenerPrecioText","EliminarProducto","eliminarProducto","handleToggleModal","eliminarProductoBD","RenderTableRows","cantidad_existente","unidad_inventario","ProdcutosEliminados","productosActivosRefetch","handleModalToggle","RestoreFromTrash","TablaProductosEliminados","obtenerProductosInactivos","RenderProductosTabla","activarProducto","handleDeleteToggle","reactivarProducto","Publish","Productos","RegistroComponent","existencias","setExistencias","ArrowBack","ProductoIndex","TablaTallas","tallas_numeros","eliminarTalla","resp","msgAlert","dato","RegistroTallas","loading_bd","setLoadingBD","actualizarTalla","obtenerTallas","talla_actualizada","Tallas","OBTENER_CONTABILIDAD","REGISTRAR_CONTABILIDAD","ACTUALIZAR_CONTABILIDAD","ELIMINAR_CONTABILIDAD","TablaServicios","setIdService","idService","setAccion","updateData","obtenerContabilidad","EliminarContabilidad","contabilidad","nombre_servicio","RegistroServicios","setUpdateData","CrearContabilidad","ActualizarContabilidad","handleSubmit","inputActualizado","ml","Contabilidad","columns","TablaProveedores","column","provedores","Proveedores","CREAR_CAJA","OBTENER_CAJAS","CREAR_HISTORIAL_CAJA","OBTENER_HISTORIAL_CAJA","ELIMINAR_CAJA","OBTENER_PRE_CORTE_CAJA","OBTENER_CORTES_CAJA","OBTENER_CORTE_CAJA","TablaCajas","obtenerCajasSucursal","permisos","cajas","numero_caja","RowCajasRender","eliminarCaja","deleteCaja","RegistroCajas","crearCaja","nuevaCaja","usuario_creador","numero_usuario_creador","numero_usuario","nombre_usuario_creador","Cajas","arregloVacio","tesoreria","cuentas_empresa","egresos","abonos_proveedores","abonos_clientes","reportes","reporte_historial_cajas","reporte_turnos","reporte_compras","reporte_ventas","rerporte_almacen","reporte_corte_caja","reporte_tesoreria","cancelar_venta","precios_productos","pre_corte","cotizaciones","administrador","eliminar_ventas","producto_rapido","traspasos","inventario_almacen","usuarios","conceptos_almacen","facturacion","generar_cdfi","cdfi_realizados","registro_series_cdfi","UsuarioContext","UsuarioProvider","estado_usuario","setUsuario","FormularioUsuario","showPassword","setShowPassword","password","repeatPassword","ActualizarPasswordModal","actualizarUsuario","confirmarPassowrd","autoComplete","Parametros","arregloAccesos","obtenerAccesos","subDepartamento","Catalogos","Almacenes","Tesoreria","Reportes","Ventas","Facturacion","AsignarPermisos","CrearUsuario","turno_en_caja_activo","crearUsuario","subDepartamentos","ListaUsuarios","Usuarios","CreateDepartamentosContext","DepartamentosProvider","idDepartamento","setIdDepartamento","TablaDepartamentos","setPage","setRowsPerPage","obtenerDepartamentos","eliminarDepartamento","TablePagination","rowsPerPageOptions","onChangePage","newPage","onChangeRowsPerPage","RegistroDepartamentos","ActualzarDepartamentos","Departamentos","fade","secondary","RegistroCategorias","setCategoria","toUpdateID","setToUpdateID","loadingBackDrop","setLoadingBackDrop","actualizarCategoria","guardarCategoria","categoriaActualizada","render_categorias","obtenerCategorias","RenderCategorias","setSubcategoria","actualizarSubcategoria","eliminarCategoria","render_subcategorias","guardarSubcategoria","subCategoriaActualizada","idSubcategoria","stopPropagation","Accordion","AccordionSummary","expandIcon","ExpandMore","scrollTo","AccordionDetails","RenderSubcategorias","eliminarSubcategoria","px","Categorias","TablaColores","cache","eliminarColor","readQuery","writeQuery","RegistroColores","actualizarColor","colorActualizado","msg","ListaMarcas","obtenerMarcas","eliminarMarca","CreateMarcasContext","MarcasProvider","datosMarcas","setDatosMarcas","VistaMarcas","actualizarMarca","Marcas","setCuenta","actualizarCuenta","render_cuentas","obtenerCuentas","guardarCuenta","cuentaActualizada","RenderCuentas","setSubcuenta","eliminarCuenta","actualizarSubcuenta","render_subcuentas","guardarSubcuenta","subCuentaActualizada","idSubcuenta","deleteCuenta","RenderSubcuentas","eliminarSubcuenta","deleteSubCuenta","idSubCuenta","OBTENER_CONCEPTOS_ALMACEN","REGISTRAR_CONCEPTO_ALMACEN","ACTUALIZAR_CONCEPTO_ALMACEN","ELIMINAR_CONCEPTO_ALMACEN","TablaConceptos","setIdConcepto","idConcepto","obtenerConcepto","EliminarConceptoAlmacen","obtenerConceptosAlmacen","nombre_concepto","destino","editable","formControl","MenuProps","PaperProps","ITEM_HEIGHT","tipos","getStyles","tipoName","typography","fontWeightRegular","fontWeightMedium","crearConceptoAlmacen","actualizarConceptoAlmacen","ConceptosAlmacen","alignSelf","TesoreriaCtx","TesoreriaProvider","cuentas","setCuentas","reload","setReload","formComboBox","RetiroDeposito","turnoEnCurso","CrearMovimientoCuenta","datosMovimiento","setDatosMovimiento","onChangeDatos","tipo_movimiento","id_usuario","rol_movimiento","id_Caja","id_caja","horario_turno","concepto","hora_moviento","hora","minutos","segundos","completa","fecha_movimiento","mes","dia","no_semana_year","week","no_dia_year","dayOfYear","montos_en_caja","monto_efectivo","monto","metodo_pago","monto_tarjeta_debito","monto_tarjeta_credito","monto_creditos","monto_monedero","monto_transferencia","monto_cheques","monto_vales_despensa","comentarios","enviarDatos","movimiento","crearMovimientoCuenta","rows","rootBusqueda","HistorialCuentas","datosFiltro","setDatosFiltro","fecha_inicio","fecha_fin","historialCuenta","obtenerHistorialCuenta","RowsHistorial","ListaCuentas","cuentaEmpresa","cuentasSucursalesEmpresa","cuentaPrincipal","obtenerSucursalesEmpresa","cuenta_empresa","dinero_actual","RowsCuentas","cuenta_sucursal","buttons","CuentasEmpresaSucursales","OBTENER_HISTORIAL_EGRESOS","CREAR_EGRESO","TablaProductosEgresos","borrarProducto","RowsProductos","onPageChange","onRowsPerPageChange","cantidad_productos","precio_unitario","FormRegistroEgresos","CrearEgreso","upload","setUpload","datosEgreso","setDatosEgreso","totalCompra","setTotalCompra","subCuentas","setSubCuentas","setProducto","obtenerDatoProductos","totalCompraVenta","folio_egreso","folio_factura","empresa_distribuidora","provedor","subCategoria","fecha_compra","fecha_vencimiento","fecha_vencimiento0","observaciones","id_user","saldo_total","egreso","crearEgreso","GenFolio","InputLabelProps","shrink","obtenerSubCuentas","subCuenta","producto_guardado","elemento","indice","iconSize","info","VistaRegistroEgreso","iconSizeSecond","Egresos","TablaCompras","OBTENER_HISTORIAL_ABONOS","CREAR_ABONO","TablaAbonos","id_cliente","id_egreso","id_compra","abonos","obtenerHistorialAbonos","monto_total_abonado","AbonoaRecibir","CrearAbono","abono","setAbono","setMetodoPago","metodo_de_pago","clave","metodo","telefono_cliente","email_cliente","alignContent","DetallesCuenta","LiquidarCuenta","cuentaTotalDescuento","setCuentaTotalDescuento","setDineroDescontado","porciento_descuento","valueLabelFormat","cuenta_con_descuento","cuentaSelect","clearTimeout","timer","TwoClickInRowTableBuy","rootSearch","AbonosProveedores","toLocaleString","createData","code","population","density","ToggleButtonGroup","exclusive","calories","fat","carbs","protein","scope","AbonosClientes","IndexTesoreria","FacturacionCtx","FacturacionProvider","serie","currency","expedition_place","folio","cfdi_type","payment_form","payment_method","logo_url","date","issuer","FiscalRegime","Rfc","receiver","CfdiUse","items","datosFactura","setDatosFactura","venta_factura","setVentaFactura","cp_valido","setCPValido","setCodigoPostal","error_validation","ProductosSinClaveSat","CONSULTA_PRODUCTO_UNITARIO","CONSULTA_PRODUCTOS_VENTAS","OBTENER_CLIENTES_VENTAS","CREAR_VENTA","OBTENER_VENTAS_SUCURSAL","ListaVentasFactura","ComponentBusquedaVenta","open_productos","setOpenProductos","productos_sin_clave","setProductosSinClave","resultado_ventas","openProductosClaves","RenderLista","obtenerVentasSucursal","without_sat_code","productos_base","obtenerVenta","CodigoPostal","CP","obtenerCodigoPostal","Fragment","ListaClientesFacturas","BuscadorClienteComponent","openAlertRfc","setOpenAlertRfc","resultado_clientes","handleCloseAlertRFC","openAlertRFC","RenderListClientes","minwidth","obtenerClienteTabla","RegistroFactura","serie_default","ModificarProductoFactura","producto_base","setProductoBase","venta_base","setVentaBase","cantidad_base","precio_base","venta_copy","resta_base","suma_nuevo","precios_nuevos","impuestos_precio","copy_array_productos","guardarPrecios","EliminarProductoFactura","copy_venta","copy_productos","precio_resta","DetallesFactura","RowTableProductos","factura_initial_state","RealizarFactura","setProductosFactura","CrearFactura","crearFactura","nuevo_obj","Taxes","Total","Base","Rate","IsRetention","ProductCode","IdentificationNumber","Description","UnitCode","UnitPrice","Quantity","Subtotal","Discount","InputsFacturaModal","CancelarFactura","handleCloseFactura","cancelar","NuevaFactura","DialogFacturaPrincipal","openCancel","setOpenCancel","cancelarCFDI","FacturaModalContent","seriesCfdi","obtenerSeriesCdfi","RegistroSeries","crearSerieCFDI","obtenerDatosSeries","guardarDatosBD","ListaSeriesCDFI","modificarDefaultSerie","setPredeterminado","ModalDeleteSerie","eliminarSerie","eliminarSerieBD","SeriesCDFI","ContentSeriesCFDI","ExportarProductosFacturaExcel","ListaFacturas","ListaAlmacen","RegistroAlmacen","TraspasosAlmacenContext","TraspasosProvider","productosTo","setProductosTo","productosEmpTo","setProductosEmpTo","productosTras","setProductosTras","dataExcel","setDataExcel","productoData","setNew_medidas","nuevaCantidad","new_medidas","presentaciones_existentes","paddingRight","cell","idProducto","cantidadAnt","copy_medida","product_selected","new_medidasCopia","med","Object","hasOwnProperty","call","cant","order","orderBy","onRequestSort","headCellsNames","add","sortDirection","TableSortLabel","active","useToolbarStyles","inputCantidad","inputCantidadTable","highlight","lighten","light","text","dark","flexWrap","DialogTallas","close","setOpenTallas","setproduct_selected","prod","openTallas","almacenOrigen","newMedidasCopy","prodSelect","existe","copyProductosTras","medidasTo","newMed","obj","EnhancedTableToolbar","cantidadTo","setCantidadTo","openEnd","setOpenEnd","tipoPieza","setValueToTrans","mensaje","find","totalCantExistMasNuevaCantidad","piezas","cantidad_existente_maxima","unidadMaxima","TipoPiezaComponent","TIPO_PIEZA","unidad_minima","clsx","intValue","onlyNumbers","deletesItems","EnhancedTable","setOrder","setOrderBy","setCant","setTipoPieza","haveCant","handleSelectAllClick","prod_sel","editItem","prodSet","deleteItem","boxUpData","selected2","inputBox","boxControl","centerControl","almacenName","transportes","steps","Traspasos","haveConcepto","setHaveConcepto","conceptoTraspaso","setConceptoTraspaso","isAlmacenOrigen","setIsAlmacenOrigen","isAlmacenDestino","setIsAlmacenDestino","setAlmacenOrigen","almacenDestino","setAlmacenDestino","almacenesDestino","setAlmacenesDestino","transporte","setTransporte","placas","setPlacas","nombreQuien","setNombreQuien","activeStep","setActiveStep","Set","skipped","setSkipped","CrearTraspaso","conceptos","queryObtenerAlmacenes","dataConceptos","categoriasQuery","productosQuery","productosEmpresaQuery","obtenerProductosAlmacen","obtenerProductosEmpresa","obtenerProductosPorEmpresa","isStepSkipped","step","has","handleBack","prevActiveStep","traspasar","concepto_traspaso","almacen_origen","almacen_destino","datos_transporte","nombre_encargado","sucursalOrigen","sucursalDestino","traspaso","crearTraspaso","sx","almacenIcon","Stepper","stepProps","completed","Step","StepLabel","trans","pt","newSkipped","delete","handleNext","Rowrow","rowProps","dataExcelHere","setDataExcelHere","arrayCantidades","font","sz","alignment","wrapText","bottom","rgb","setRow","setTotal","setUnidad_Minima","tot","r","datExc","almacenColumna","existencia_almacenes","productosLength","ListaAlmacenes","withRouter","fileName","columnName","InventariosPorAlmacen","InventarioPorAlmacen","setObtenerAlmacenes","setColumns","productosAlmacenQuery","obtenerProductosAlmacenes","columnsEffect","widthPx","almace","mrstyle","Moviminetos","TablaHistorialFiltrado","historial","iconSave","right","HistorialCaja","datosBuscar","setDatosBuscar","datosExcel","obtenerHistorialCaja","cajaSelected","fecha_incio","arrayExcel","datosHistorial","hora_movimiento","caja","agruparDatos","handleDatos","StyledBadge","withStyles","badge","boxShadow","left","animation","content","transform","media","expand","transition","transitions","create","duration","shortest","expandOpen","red","textActive","CardCaja","styleProps","activa","Card","CardHeader","overlap","openHistorial","setOpenHistorial","setCajaSelected","handleClickOpenHistorial","cantidad_efectivo_actual","fetchCajas","TablaTurnosFiltrados","turnos","turno","hora_entrada","hora_salida","usuario_en_turno","horario_en_turno","REGISTRAR_TURNOS","OBTENER_HISTORIAL_TURNOS","ReportesTurnosUsuarios","FiltroTablaTurnos","filtros","setFiltros","historialTurnos","fechaInicio","fechaFin","fecha_entrada","fecha_salida","obtenerFiltroTurnos","TablaComprasFiltradas","OBTENER_REPORTE_COMPRAS","ExportarCompras","forma","FiltrosCompras","obtenerProductoMovimientos","CapturaDeDatos","obtenerCamposFiltro","realizarBusquedaBD","ClearOutlined","ReportesCompras","TablaVentasFiltradas","ReportesVentas","ExportarTraspasos","id_traspaso","TablaAlmacenFiltradas","ReportesAlmacen","fecha_final","inputFilter","setFilter","encargado","setEncargado","queryObtenerUsuarios","traspasosAlmacenes","setDatosInput","fil","obtenerTraspasos","enc","almDes","almOri","encId","setEncargadoInput","alm","setQueryAlmacenOrigen","setQueryAlmacenDestino","filt","limpiarFiltros","TablaCortesFiltradas","cortes","corte","token_turno_user","number_user","obtenerCorte","montos_sistema","obtenerCorteCaja","montos_en_sistema","InformacionCorteCaja","ExportExcel","historialCortes","setDatosExcel","ReportesCortes","cajasBase","fecha_consulta","obtenerCortesDeCaja","ListaEgresos","historialEgresos","obtenerHistorialEgresos","RowsEgresos","DialogCaracteristicas","ListaTransferencias","ReportesTesoreria","ventana","setVentana","anchorEl","setAnchorEl","currentTarget","Menu","ListItemIcon","iconSvgVenta","history","axis","onChangeIndex","appbar","navbar","grey","menuButton","token","removeItem","flexShrink","drawerColor","drawerPaper","navigationTop","iconSizeSuperior","iconSizeSecondSuperior","iconSizeInferior","iconSizeSecondInferior","iconSizeSecondInferiorGrande","iconSizeInferiorGrande","borderBoton","borderBotonChico","rootPrecioProductos","containerImage","rootBusquedaProductos","rootFecha","iconSizeDialogs","iconSizeDialogsPequeno","containerImagenesProducto","imagenProducto","VentasContext","VentasProvider","DatosVentasActual","setDatosVentasActual","datosProductoVentas","setDatosProductoVentas","setProductosVentas","datosVentas","setDatosVentas","productoCambioPrecio","setProductoCambioPrecio","precioSelectProductoVenta","setPrecioSelectProductoVenta","clientesVentas","setClientesVentas","turnoActivo","setTurnoActivo","ubicacionTurno","setUbicacionTurno","abrirTurnosDialog","setAbrirTurnosDialog","updateTablaVentas","setUpdateTablaVentas","openBackDrop","setOpenBackDrop","DepositoRetiroCaja","CrearHistorialCaja","setMovimiento","preCorteDeCaja","dineroEnCaja","obtenerPreCorteCaja","monto_efectivo_precorte","addEventListener","altKey","id_User","newAlignment","ToggleButton","AbrirTurno","CrearRegistroDeTurno","abrirTurno","setAbrirTurno","numeroCaja","setNumeroCaja","obtenerTurno","arraySesion","exp","iat","turno_en_curso","caja_elegida","monto_abrir","variableTurnoAbierto","crearRegistroDeTurno","montoTurno","setMontoTurno","cerrarTurno","setCerrarTurno","obtenerCamposMontos","monto_puntos","actualizarTurnoSesion","Turnos","ContenidoTurnos","AccesosContext","AccesosProvider","abrirPanelAcceso","setAbrirPanelAcceso","tipo_acceso","setDepartamentos","reloadAdministrador","setReloadAdministrador","reloadProductoRapido","setReloadProductoRapido","reloadCancelarVenta","setReloadCancelarVenta","reloadVerPrecios","setReloadVerPrecios","reloadVerPreCorte","setReloadVerPreCorte","reloadEliminarVentaEspera","setReloadEliminarVentaEspera","reloadCrearCotizacion","setReloadCrearCotizacion","PreCorteCaja","VentaEnEspera","agregarVentaEnEspera","justifySelf","RegistroInformacionRapido","setAbrirTallaColor","varIVA","varIEPS","TallasColoresRapidos","Acceso","datosUser","setDatosUser","handleClickClose","obtenerQuery","obtenerAccesoPermiso","permiso_concedido","SwitchPermisos","ArticuloRapido","crearProductoRapido","abrirTallaColor","AceesoProductoRapido","ProductoRapidoIndex","CotizacionesPendientes","CotizacionesRows","ListaCotizaciones","Administrador","BottomNavigation","showLabels","srsc","Abonos","productosBusqueda","setProductoSeleccionado","InformacionProducto","productoSeleccionado","BuscarProducto","searchProducto","setSearchProducto","granelBase","setGranelBase","obtenerProductosVentas","keyUpEvent","agregarProductos","venta_existente","productosVentasTemp","CalculosData","producto_encontrado","productoPrecioFinal","new_prices","iva_total_producto","ieps_total_producto","impuestos_total_producto","subtotal_total_producto","total_total_producto","verify_prising","calculo_resta","calculo_sumar","onKeyUp","ClientesVentas","CREAR_COTIZACION","NuevaCotizacion","CrearCotizacion","newCotizacion","setNewCotizacion","descuento_general","totalDescount","setTotalDescount","tipo_venta","descuento_general_activo","decuento_general","dias_de_credito_venta","fecha_de_vencimiento_credito","fecha_vencimiento_cotizacion","crearCotizacion","registroCotizacion","errors","cantidad_descontado","Cotizacion","tipoVentana","setTipoVentana","CancelarVenta","CerrarVenta","cambio","setCambio","openModalDescuento","setOpenModalDescuento","recalcular","setRecalcular","totalVenta","setTotalVenta","montoPagado","setMontoPagado","cambioVenta","setCambioVenta","datosCliente","setDatosCliente","setMonedero","descuentoVenta","fechaVencimientoDate","setfechaVencimientoDate","valorPuntoProducto","setValorPuntoProducto","valorFinalCambioPuntos","monederoTotal","setMonederoTotal","ventaActual","setVentaActual","editableClient","setEditableClient","visible","setVisible","descuentoAplicarVenta","setDescuentoAplicarVenta","descuentoPorsentajeVenta","setDescuentoPorsentajeVenta","setVentaOriginal","creditoActivo","setCreditoActivo","efectivo","setEfectivo","tarjeta","setTarjeta","puntos","setPuntos","transferencia","setTransferencia","cheque","setCheque","createVenta","handleClickFinishVenta","ventaFinal","montosEnCaja","editar_cliente","puntos_totales_venta","handlerChangeValue","location","valor2","monederoVenta","credito_disponible","modelDate","hoy","diasDiff","diff","pr","positiveDiscount","abs","handlerChangeDiscountVenta","ventaSubtotal","val","handleChangePorsentDiscount","productosFinal","productStorage","product","porsentajeNewDescuento","dineroDescontadoDescuento","newPrecioVentaProduct","newIvaProduct","newIepsProduct","newPrecioNetoProduct","newUtilidadProduct","valorGranel","descuentoProducto","handleCalculateNewDiscountVenta","ConsultarPrecio","activeItemIndex","setActiveItemIndex","productoBase","obtenerUnProductoVentas","input_value","datosProductos","displa","requestToChangeActive","numberOfCards","leftChevron","rightChevron","infiniteLoop","outsideChevron","chevronWidth","PreciosProductos","selectPrisingProduct","setSelectPrisingProduct","handleAceptChangePrising","newProductoPrecioNuevo","newProductoPrecioActual","new_resta","new_suma","doubleClick","ListaVentas","listaEnEspera","RowsVentas","keyIndex","setKeyIndex","borrarVenta","VentasEspera","ListaVentasRealizadas","VentasRealizadas","NavegacionVentasLateral","setNewProductoVentas","newProductoVentas","datosTabla","setDatosTabla","newCantidadProduct","setNewCantidadProduct","tempAmount","setTempAmount","CalculeDataPricing","new_cant","newPrising","precio_actual_porducto","calculateNewPricingAmount","selectClient","setSelectClient","obtenerClientesVentas","dataCliente","ChangeClientAutocomplate","VentasGenerales","consultaBase","setConsultaBase","productosBase","trim","data_operation","data_key","elevantion","VentaIndex","varActive","setVarActive","AbrirTurnoEnVentas","routes","logearUsuario","signin","decoded","jwt_decode","labelWidth","exact","logo","Link","to","adminIcon","cartIcon","AdminInicio","createMuiTheme","blue","httpLink","createUploadLink","uri","ApolloClient","connectToDevTools","InMemoryCache","addTypename","link","RoutesWithSubRoutes","route","render","App","ApolloProvider","ThemeProvider","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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","file":"static/js/main.b3a54b1a.chunk.js","sourcesContent":["import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_USUARIO = gql`\r\n\tmutation crearUsuario($input: CrearUsuarioInput) {\r\n\t\tcrearUsuario(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tturno_en_caja_activo\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_USUARIOS = gql`\r\n\tquery obtenerUsuarios($sucursal: String!, $filtro: String) {\r\n\t\tobtenerUsuarios(sucursal: $sucursal, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_usuario\r\n\t\t\tnombre\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\tturno_en_caja_activo\r\n\t\t\temail\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_usuario\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\taccesos {\r\n\t\t\t\tmi_empresa {\r\n\t\t\t\t\tdatos_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinformacion_fiscal {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcompras {\r\n\t\t\t\t\tabrir_compra {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_realizadas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompras_espera {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttesoreria {\r\n\t\t\t\t\tcuentas_empresa {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tegresos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_proveedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tabonos_clientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treportes {\r\n\t\t\t\t\treporte_historial_cajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_turnos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_compras {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\trerporte_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_corte_caja {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\treporte_tesoreria {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tventas {\r\n\t\t\t\t\tcancelar_venta {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprecios_productos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpre_corte {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcotizaciones {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadministrador {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\teliminar_ventas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducto_rapido {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\talmacenes {\r\n\t\t\t\t\talmacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraspasos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinventario_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfacturacion {\r\n\t\t\t\t\tgenerar_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcdfi_realizados {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregistro_series_cdfi {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatalogos {\r\n\t\t\t\t\tclientes {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tusuarios {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproductos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarcas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontabilidad {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprovedores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcajas {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdepartamentos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcentro_costos {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconceptos_almacen {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorias {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolores {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttallas_numeros {\r\n\t\t\t\t\t\tver\r\n\t\t\t\t\t\tagregar\r\n\t\t\t\t\t\teditar\r\n\t\t\t\t\t\teliminar\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_USUARIO = gql`\r\n\tmutation actualizarUsuario($input: ActualizarUsuarioInput, $id: ID!) {\r\n\t\tactualizarUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO = gql`\r\n\tmutation logearUsuario($input: LogearUsuarioInput) {\r\n\t\tlogearUsuario(input: $input) {\r\n\t\t\ttoken\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGEAR_USUARIO_ACCESOS = gql`\r\n\tquery ObtenerAccesoPermiso($input: ObtenerAccesoPermisosInput) {\r\n\t\tobtenerAccesoPermiso(input: $input) {\r\n\t\t\tpermiso_concedido\r\n\t\t\tdepartamento\r\n        \tsubDepartamento\r\n\t\t}\r\n\t}\t\t\r\n`;\r\n\r\nexport const AGIGNAR_PERMISOS_USUARIO = gql`\r\n\tmutation asignarAccesosUsuario($input: CrearArregloDeAccesosInput, $id: ID!) {\r\n\t\tasignarAccesosUsuario(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n}\r\n`;\r\n","import { Box, makeStyles, Snackbar, Typography, Portal } from '@material-ui/core';\r\n/* import { Alert } from '@material-ui/lab'; */\r\nimport React from 'react';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\n\r\nexport default function SnackBarMessages({ alert, setAlert }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAlert({ open: false, status: alert.status, message: '' });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Portal>\r\n\t\t\t<Snackbar\r\n\t\t\t\tclassName={classes.snack}\r\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\t\topen={alert.open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t{alert.status === 'success' ? (\r\n\t\t\t\t\t\t\t<CheckCircleIcon style={{ color: '#22bb33' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ErrorIcon style={{ color: 'red' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box mr={1} />\r\n\t\t\t\t\t\t<Typography>{alert.message}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Portal>\r\n\t);\r\n\t/* return (\r\n\t\t<Snackbar\r\n\t\t\tclassName={classes.snack}\r\n\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\topen={alert.open}\r\n\t\t\tonClose={handleClose}\r\n\t\t\tautoHideDuration={2000}\r\n\t\t>\r\n\t\t\t<Alert onClose={handleClose} severity={alert.status}>\r\n\t\t\t\t{alert.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t); */\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Container, TextField, Typography, CircularProgress } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGEAR_USUARIO } from '../../gql/Catalogos/usuarios';\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { FormControl } from '@material-ui/core';\r\nimport { InputLabel } from '@material-ui/core';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport { InputAdornment } from '@material-ui/core';\r\nimport { IconButton } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport ab from '../../img/abLogo.jpeg'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tmargin: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcontainerImagen:{\r\n\t\tmaxWidth: 170,\r\n\t\tmaxHeight: 170\r\n\t},\r\n\timagen:{\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t}\r\n}));\r\n\r\nexport default function LayoutLogin(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = localStorage.getItem('sesionCafi');\r\n\tconst [ datos, setDatos ] = useState([]);\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ showPassword, setShowPassword ] = useState(false);\r\n\r\n\tif (sesion) props.history.push('/ventas/venta-general');\r\n\r\n\tconst [ logearUsuario ] = useMutation(LOGEAR_USUARIO);\r\n\r\n\tconst signin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!datos.numero_usuario || !datos.password) {\r\n\t\t\tsetAlert({ message: 'Los campos estan vacíos', status: 'error', open: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await logearUsuario({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: datos\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst { token } = result.data.logearUsuario;\r\n\t\t\tconst decoded = jwt_decode(token);\r\n\t\t\tsetLoading(false);\r\n\t\t\tlocalStorage.setItem('sesionCafi', JSON.stringify(decoded));\r\n\t\t\tlocalStorage.setItem('tokenCafi', JSON.stringify(token));\r\n\t\t\tprops.history.push('/ventas/venta-general');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst obtenerCampos = (e) => {\r\n\t\tif (e.target.name === 'numero_usuario') {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: parseInt(e.target.value)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetDatos({\r\n\t\t\t\t...datos,\r\n\t\t\t\t[e.target.name]: e.target.value\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickShowPassword = () => {\r\n\t\tsetShowPassword(!showPassword);\r\n\t};\r\n\r\n\tconst handleMouseDownPassword = (event) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"sm\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Box height=\"100vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t<Box boxShadow=\"3\" p={3} width=\"80%\">\r\n\t\t\t\t\t<Box display='flex' justifyContent='center' alignItems='center' justifyItems='center' >\r\n\t\t\t\t\t\t<Box className={classes.containerImagen} textAlign='center'>\r\n\t\t\t\t\t\t\t<img className={classes.imagen} src={ab} alt=\"imagen no disponible\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display='flex' textAlign='center' justifyContent='center'>\r\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"p\" className={classes.margin}>\r\n\t\t\t\t\t\t\t<b>Inicia sesión</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<form autoComplete=\"off\" onSubmit={signin} >\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Numero de usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tname=\"numero_usuario\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<FormControl variant=\"outlined\" name=\"password\" className={classes.margin} fullWidth>\r\n\t\t\t\t\t\t\t<InputLabel htmlFor=\"usuario-password\">Contraseña</InputLabel>\r\n\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tid=\"usuario-password\"\r\n\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\tonChange={obtenerCampos}\r\n\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabelWidth={70}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tclassName={classes.margin}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tendIcon={loading ? <CircularProgress size={25} color=\"inherit\" /> : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tEntrar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","export const initial_state_datos_generales = {\r\n  receta_farmacia: false,\r\n  clave_producto_sat: {\r\n    Name: \"\",\r\n    Value: \"\",\r\n  },\r\n};\r\nexport const initial_state_precios = {\r\n  monedero: false,\r\n  monedero_electronico: 0,\r\n  iva_activo: true,\r\n  ieps_activo: false,\r\n  ieps: 0,\r\n  iva: 16,\r\n  granel: false,\r\n  inventario: {\r\n    inventario_minimo: 0,\r\n    inventario_maximo: 0,\r\n    unidad_de_inventario: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n  },\r\n  precio_de_compra: {\r\n    precio_con_impuesto: 0,\r\n    precio_sin_impuesto: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n  },\r\n  unidad_de_compra: {\r\n    unidad: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n    cantidad: 1,\r\n    precio_unitario_sin_impuesto: 0,\r\n    precio_unitario_con_impuesto: 0,\r\n  },\r\n};\r\n\r\nexport const initial_state_unidadVentaXDefecto = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Pz\",\r\n  codigo_unidad: \"H87\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: true,\r\n  default: true,\r\n};\r\n\r\nexport const initial_state_unidadVentaSecundaria = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Caja\",\r\n  codigo_unidad: \"XBX\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: false,\r\n  default: false,\r\n};\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_unidadesVenta = [\r\n  \r\n];\r\n\r\nexport const initial_state_almacen_inicial = {\r\n  id_almacen: \"\",\r\n  almacen: \"\",\r\n  cantidad: 0,\r\n  fecha_de_expiracion: \"\",\r\n};\r\nexport const initial_state_centro_de_costos = {};\r\n\r\nexport const initial_state_preciosPlazos = {\r\n  precio_piezas: [],\r\n  precio_cajas: [],\r\n  precio_costales: [],\r\n};\r\n\r\nexport const initial_state_subcategorias = [];\r\nexport const initial_state_imagenes = [];\r\nexport const initial_state_imagenes_eliminadas = [];\r\nexport const initial_state_onPreview = { index: \"\", image: \"\" };\r\nexport const initial_state_validacion = { error: false, message: \"\" };\r\nexport const initial_state_subcostos = [];\r\nexport const initial_state_selectedDate = null;\r\nexport const initial_state_presentaciones = [];\r\n","import React, { createContext, useState } from \"react\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_preciosP,\r\n  initial_state_unidadesVenta,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_subcategorias,\r\n  initial_state_imagenes,\r\n  initial_state_imagenes_eliminadas,\r\n  initial_state_onPreview,\r\n  initial_state_validacion,\r\n  initial_state_subcostos,\r\n  initial_state_selectedDate,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"./initialStatesProducto\";\r\n\r\nexport const RegProductoContext = createContext();\r\n\r\nexport const RegProductoProvider = ({ children }) => {\r\n  const [datos_generales, setDatosGenerales] = useState(\r\n    initial_state_datos_generales\r\n  );\r\n  const [precios, setPrecios] = useState(initial_state_precios);\r\n  const [unidadVentaXDefecto, setUnidadVentaXDefecto] = useState(\r\n    initial_state_unidadVentaXDefecto\r\n  );\r\n  const [unidadVentaSecundaria, setUnidadVentaSecundaria] = useState(\r\n    initial_state_unidadVentaSecundaria\r\n  );\r\n  const [preciosP, setPreciosP] = useState(initial_state_preciosP);\r\n  \r\n  const [unidadesVenta, setUnidadesVenta] = useState(\r\n    initial_state_unidadesVenta\r\n  );\r\n  const [almacen_inicial, setAlmacenInicial] = useState(\r\n    initial_state_almacen_inicial\r\n  );\r\n  const [centro_de_costos, setCentroDeCostos] = useState(\r\n    initial_state_centro_de_costos\r\n  );\r\n  const [preciosPlazos, setPreciosPlazos] = useState(\r\n    initial_state_preciosPlazos\r\n  );\r\n  const [subcategorias, setSubcategorias] = useState(\r\n    initial_state_subcategorias\r\n  );\r\n  const [imagenes, setImagenes] = useState(initial_state_imagenes);\r\n  const [imagenes_eliminadas, setImagenesEliminadas] = useState(\r\n    initial_state_imagenes_eliminadas\r\n  );\r\n  const [onPreview, setOnPreview] = useState(initial_state_onPreview);\r\n  const [validacion, setValidacion] = useState(initial_state_validacion);\r\n  const [subcostos, setSubcostos] = useState(initial_state_subcostos);\r\n  const [selectedDate, setSelectedDate] = useState(initial_state_selectedDate);\r\n  const [update, setUpdate] = useState(false);\r\n  const [presentaciones, setPresentaciones] = useState(\r\n    initial_state_presentaciones\r\n  );\r\n  const [presentaciones_eliminadas, setPresentacionesEliminadas] = useState([]);\r\n  const [actualizarLista, setActualizarLista] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // USESTATES DE DESCUENTOS DE PRODUCTOS\r\n  const [ datosPreciosProducto, setDatosPreciosProducto ] = useState([]);\r\n  const [ preciosDescuentos, setPreciosDescuentos] = useState([]);\r\n  const [ preciosProductos, setPreciosProductos ] = useState([]);\r\n  const [ datosEnDescuentos, setDatosEnDescuentos ] = useState([]);\r\n  const [ almacen_existente, setAlmacenExistente] = useState(false);\r\n\r\n  return (\r\n    <RegProductoContext.Provider\r\n      value={{\r\n        datos_generales,\r\n        setDatosGenerales,\r\n        precios,\r\n        setPrecios,\r\n        almacen_inicial,\r\n        setAlmacenInicial,\r\n        imagenes,\r\n        setImagenes,\r\n        imagenes_eliminadas,\r\n        setImagenesEliminadas,\r\n        onPreview,\r\n        setOnPreview,\r\n        validacion,\r\n        setValidacion,\r\n        preciosP,\r\n        setPreciosP,\r\n        preciosPlazos,\r\n        setPreciosPlazos,\r\n        unidadesVenta,\r\n        setUnidadesVenta,\r\n        centro_de_costos,\r\n        setCentroDeCostos,\r\n        unidadVentaXDefecto,\r\n        setUnidadVentaXDefecto,\r\n        subcategorias,\r\n        setSubcategorias,\r\n        subcostos,\r\n        setSubcostos,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        update,\r\n        setUpdate,\r\n        presentaciones,\r\n        setPresentaciones,\r\n        presentaciones_eliminadas,\r\n        setPresentacionesEliminadas,\r\n        actualizarLista,\r\n        setActualizarLista,\r\n        alert,\r\n        setAlert,\r\n\r\n        datosPreciosProducto, \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n        datosEnDescuentos, \r\n        setDatosEnDescuentos,\r\n        almacen_existente, \r\n        setAlmacenExistente,\r\n        unidadVentaSecundaria, \r\n        setUnidadVentaSecundaria\r\n      }}\r\n    >\r\n      {children}\r\n    </RegProductoContext.Provider>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const EmpresaContext = createContext();\r\n\r\nexport const EmpresaProvider = ({ children }) => {\r\n   \r\n\tconst [ empresa, setEmpresa ] = useState({\r\n\t\tnombre_empresa:'',\r\n        nombre_dueno:'',\r\n\t\ttelefono_dueno:'',\r\n\t\tcelular:'',\r\n\t\tcorreo_empresa:'',\r\n        nombre_fiscal:'',\r\n        rfc:'',\r\n        regimen_fiscal:'',\r\n        curp:'',\r\n        info_adicio:'',\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n        direccionFiscal: {\r\n            calle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n        },\r\n        datosBancarios:{\r\n            cuenta: '',\r\n            sucursal: '',\r\n            clave_banco: ''\r\n        },\r\n\t\timagen: null\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<EmpresaContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tempresa,\r\n\t\t\t\tsetEmpresa,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</EmpresaContext.Provider>\r\n\t);\r\n};","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\"\r\n  },\r\n}));\r\n\r\nexport default function BackdropComponent({loading, setLoading}) {\r\n  const classes = useStyles();\r\n\r\n  /* const handleClose = () => {\r\n    setLoading(false);\r\n  }; */\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={loading} /* onClick={handleClose} */>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorPage({ error, altura}) {\r\n\tlet height = altura\r\n\tif(!height) height = 400;\r\n\treturn (\r\n\t\t<Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height={height}>\r\n\t\t\t<ErrorOutlineIcon style={{ fontSize: 100, color: 'rgba(17,85,204, 0.7)' }} />\r\n\t\t\t<Typography align=\"center\" style={{ fontSize: 18, color: 'rgba(17,85,204)' }}>\r\n\t\t\t\tHubo un problema\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nexport const OBTENER_DATOS_EMPRESA = gql`\r\n  query obtenerEmpresa($id: ID!) {\r\n    obtenerEmpresa(id: $id) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_EMPRESA = gql`\r\n  mutation actualizarEmpresa($id: ID!, $input: EditarEmpresa) {\r\n    actualizarEmpresa(id: $id, input: $input) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Typography,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport default function MisDatos(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n   \r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { empresa, update, setEmpresa, setUpdate } = useContext(EmpresaContext);\r\n\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  const [empresaDatos, setEmpresaDatos] = useState({\r\n    nombre_empresa: \"\",\r\n    nombre_dueno: \"\",\r\n    telefono_dueno: \"\",\r\n    celular: \"\",\r\n    correo_empresa: \"\",\r\n    valor_puntos: \"\",\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    regimen_fiscal: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n    imagen: null,\r\n  });\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [update, refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaDatos({\r\n        nombre_empresa: empresa.nombre_empresa,\r\n        nombre_dueno: empresa.nombre_dueno,\r\n        telefono_dueno: empresa.telefono_dueno,\r\n        celular: empresa.celular,\r\n        valor_puntos: empresa.valor_puntos,\r\n        correo_empresa: empresa.correo_empresa,\r\n        direccion: empresa.direccion,\r\n        imagen: empresa.imagen,\r\n      });\r\n    } catch (errorCatch) {\r\n      // console.log(errorCatch)\r\n    }\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaDatos,\r\n        },\r\n      });\r\n      setUpdate(true);\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n \r\n  const obtenerCampos = (e) => {\r\n    try {\r\n      let valor = e.target.value;\r\n      if(e.target.name === 'valor_puntos'){ valor = parseFloat(valor)}\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        [e.target.name]: valor,\r\n      });\r\n    } catch (error) {\r\n      \r\n    }\r\n  \r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      direccion: { ...empresaDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    props.setOpen(false)\r\n  }\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [empresaDatos, setEmpresaDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n  \r\n  return (\r\n    <div>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={2}>\r\n                  <Box className={classes.avatarContainer} {...getRootProps()}>\r\n                    <input {...getInputProps()} />\r\n                    {preview ? (\r\n                      <Avatar className={classes.avatar} src={`${preview}`} />\r\n                    ) : (\r\n                      <Avatar\r\n                        className={classes.avatar}\r\n                        src={`${empresa.imagen}`}\r\n                      />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre de empresa</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_empresa}\r\n                      name=\"nombre_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_empresa\r\n                          ? empresaDatos.nombre_empresa\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre dueño</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaDatos.nombre_dueno}\r\n                      name=\"nombre_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.nombre_dueno\r\n                          ? empresaDatos.nombre_dueno\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Teléfono</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.telefono_dueno\r\n                          ? empresaDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Celular</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"celular\"\r\n                      variant=\"outlined\"\r\n                      value={empresaDatos.celular ? empresaDatos.celular : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>E-mail</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"correo_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.correo_empresa\r\n                          ? empresaDatos.correo_empresa\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                   <Box>\r\n                    <Typography><b>Valor de puntos</b></Typography>\r\n                    <TextField\r\n                      inputMode=\"numeric\"\r\n\t\t\t\t\t            type=\"number\"\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"valor_puntos\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.valor_puntos\r\n                          ? empresaDatos.valor_puntos\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio empresa</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.calle\r\n                          ? empresaDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_ext\r\n                          ? empresaDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.no_int\r\n                          ? empresaDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b> </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.codigo_postal\r\n                          ? empresaDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.colonia\r\n                          ? empresaDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.municipio\r\n                          ? empresaDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.localidad\r\n                          ? empresaDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.estado\r\n                          ? empresaDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaDatos.direccion.pais\r\n                          ? empresaDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n                <DialogActions style={{ marginTop:15,width:'100%',justifyContent: \"center\" }}>\r\n                    <Button onClick={handleClose} color=\"primary\">\r\n                    Cancelar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => actEmp()}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                  \r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </DialogActions>\r\n                )}\r\n            </Container>\r\n          )}\r\n       \r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport const usosCfdi = [\r\n  {\r\n    Value: \"G01\",\r\n    Name: \"Adquisición de mercancías\",\r\n  },\r\n  {\r\n    Value: \"G02\",\r\n    Name: \"Devoluciones, descuentos o bonificaciones\",\r\n  },\r\n  {\r\n    Value: \"G03\",\r\n    Name: \"Gastos en general\",\r\n  },\r\n  {\r\n    Value: \"I01\",\r\n    Name: \"Construcciones\",\r\n  },\r\n  {\r\n    Value: \"I02\",\r\n    Name: \"Mobiliario y equipo de oficina por inversiones\",\r\n  },\r\n  {\r\n    Value: \"I03\",\r\n    Name: \"Equipo de transporte\",\r\n  },\r\n  {\r\n    Value: \"I04\",\r\n    Name: \"Equipo de cómputo y accesorios\",\r\n  },\r\n  {\r\n    Value: \"I05\",\r\n    Name: \"Dados, troqueles, moldes, matrices y herramental\",\r\n  },\r\n  {\r\n    Value: \"I06\",\r\n    Name: \"Comunicaciones telefónicas\",\r\n  },\r\n  {\r\n    Value: \"I07\",\r\n    Name: \"Comunicaciones satelitales\",\r\n  },\r\n  {\r\n    Value: \"I08\",\r\n    Name: \"Otra maquinaria y equipo\",\r\n  },\r\n  {\r\n    Value: \"D01\",\r\n    Name: \"Honorarios médicos, dentales y gastos hospitalarios\",\r\n  },\r\n  {\r\n    Value: \"D02\",\r\n    Name: \"Gastos médicos por incapacidad o discapacidad\",\r\n  },\r\n  {\r\n    Value: \"D03\",\r\n    Name: \"Gastos funerales.\",\r\n  },\r\n  {\r\n    Value: \"D04\",\r\n    Name: \"Donativos\",\r\n  },\r\n  {\r\n    Value: \"D05\",\r\n    Name:\r\n      \"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).\",\r\n  },\r\n  {\r\n    Value: \"D06\",\r\n    Name: \"Aportaciones voluntarias al SAR.\",\r\n  },\r\n  {\r\n    Value: \"D07\",\r\n    Name: \"Primas por seguros de gastos médicos.\",\r\n  },\r\n  {\r\n    Value: \"D08\",\r\n    Name: \"Gastos de transportación escolar obligatoria.\",\r\n  },\r\n  {\r\n    Value: \"D09\",\r\n    Name:\r\n      \"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.\",\r\n  },\r\n  {\r\n    Value: \"D10\",\r\n    Name: \"Pagos por servicios educativos (colegiaturas)\",\r\n  },\r\n  {\r\n    Value: \"P01\",\r\n    Name: \"Por definir\",\r\n  },\r\n];\r\nexport const tiposCfdi = [\r\n  {\r\n    NameId: 1,\r\n    Name: \"Factura\",\r\n    Value: \"I\",\r\n  },\r\n  {\r\n    NameId: 2,\r\n    Name: \"Nota de Crédito\",\r\n    Value: \"E\",\r\n  },\r\n  {\r\n    NameId: 14,\r\n    Name: \"Complemento de pago\",\r\n    Value: \"P\",\r\n  },\r\n];\r\nexport const tipoCambio = [\r\n  {\r\n    Value: \"MXN\",\r\n    Name: \"Peso Mexicano\",\r\n  },\r\n  {\r\n    Value: \"EUR\",\r\n    Name: \"Euro\",\r\n  },\r\n  {\r\n    Value: \"USD\",\r\n    Name: \"Dolar Americano\",\r\n  },\r\n];\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Dinero electrónico\",\r\n    Value: \"06\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  /* {\r\n        Name: \"Dación en pago\",\r\n        Value: \"12\"\r\n    },\r\n    {\r\n        Name: \"Pago por subrogación\",\r\n        Value: \"13\"\r\n    },\r\n    {\r\n        Name: \"Pago por consignación\",\r\n        Value: \"14\"\r\n    },\r\n    {\r\n        Name: \"Condonación\",\r\n        Value: \"15\"\r\n    },\r\n    {\r\n        Name: \"Compensación\",\r\n        Value: \"17\"\r\n    },\r\n    {\r\n        Name: \"Novación\",\r\n        Value: \"23\"\r\n    },\r\n    {\r\n        Name: \"Confusión\",\r\n        Value: \"24\"\r\n    },\r\n    {\r\n        Name: \"Remisión de deuda\",\r\n        Value: \"25\"\r\n    },\r\n    {\r\n        Name: \"Prescripción o caducidad\",\r\n        Value: \"26\"\r\n    },\r\n    {\r\n        Name: \"A satisfacción del acreedor\",\r\n        Value: \"27\"\r\n    }, */\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  /* {\r\n        Name: \"Tarjeta de servicios\",\r\n        Value: \"29\"\r\n    }, */\r\n  {\r\n    Name: \"Aplicación de anticipos\",\r\n    Value: \"30\",\r\n  },\r\n  /* {\r\n        Name: \"Intermediarios\",\r\n        Value: \"31\"\r\n    }, */\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];\r\nexport const metodoPago = [\r\n  {\r\n    Value: \"PPD\",\r\n    Name: \"Pago en parcialidades ó diferido\",\r\n  },\r\n  {\r\n    Value: \"PUE\",\r\n    Name: \"Pago en una sola exhibición\",\r\n  },\r\n];\r\nexport const regimenFiscal = [\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"General de Ley Personas Morales\",\r\n    Value: \"601\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Personas Morales con Fines no Lucrativos\",\r\n    Value: \"603\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sueldos y Salarios e Ingresos Asimilados a Salarios\",\r\n    Value: \"605\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Arrendamiento\",\r\n    Value: \"606\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Régimen de Enajenación o Adquisición de Bienes\",\r\n    Value: \"607\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Demás ingresos\",\r\n    Value: \"608\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name:\r\n      \"Residentes en el Extranjero sin Establecimiento Permanente en México\",\r\n    Value: \"610\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por Dividendos (socios y accionistas)\",\r\n    Value: \"611\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Personas Físicas con Actividades Empresariales y Profesionales\",\r\n    Value: \"612\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por intereses\",\r\n    Value: \"614\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Régimen de los ingresos por obtención de premios\",\r\n    Value: \"615\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sin obligaciones fiscales\",\r\n    Value: \"616\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name:\r\n      \"Sociedades Cooperativas de Producción que optan por diferir sus ingresos\",\r\n    Value: \"620\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Incorporación Fiscal\",\r\n    Value: \"621\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name: \"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras\",\r\n    Value: \"622\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Opcional para Grupos de Sociedades\",\r\n    Value: \"623\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Coordinados\",\r\n    Value: \"624\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas\",\r\n    Value: \"625\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Hidrocarburos\",\r\n    Value: \"628\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales\",\r\n    Value: \"629\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Enajenación de acciones en bolsa de valores\",\r\n    Value: \"630\",\r\n  },\r\n];\r\n\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_FACTURA = gql`\r\n  mutation crearFactura($input: CrearFacturaInput) {\r\n    crearFactura(input: $input) {\r\n      message\r\n      success\r\n      pdf\r\n      xml\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SERIE = gql`\r\n  mutation crearSerieCFDI($input: CrearSerieCfdiInput!) {\r\n    crearSerieCFDI(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEFAULT_SERIE = gql`\r\n  mutation modificarDefaultSerie($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    modificarDefaultSerie(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SERIE = gql`\r\n  mutation eliminarSerie($id: ID!) {\r\n    eliminarSerie(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_SERIES = gql`\r\n  query obtenerSeriesCdfi($empresa: ID!, $sucursal: ID!) {\r\n    obtenerSeriesCdfi(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n      success\r\n      seriesCfdi {\r\n        _id\r\n        serie\r\n        folio\r\n        default\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SELLO_CFDI = gql`\r\n  mutation crearCSDS($input: CrearCSDSInput!) {\r\n    crearCSDS(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SELLO_CFDI = gql`\r\n  mutation eliminarCSD($rfc: String, $empresa: ID!) {\r\n    eliminarCSD(rfc: $rfc, empresa: $empresa) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CATALOGOS_SAT_API = gql`\r\n  query obtenerCatalogosSAT($input: CrearFacturaInput!) {\r\n    obtenerCatalogosSAT(input: $input) {\r\n      message\r\n      currencies {\r\n        Decimals\r\n        PrecisionRate\r\n        Name\r\n        Value\r\n      }\r\n      paymentForms {\r\n        Name\r\n        Value\r\n      }\r\n      paymentMethods {\r\n        Name\r\n        Value\r\n      }\r\n      fiscalRegimens {\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n      cfdiTypes {\r\n        NameId\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_SERVICIOS_SAT_API = gql`\r\n  query obtenerProductosOServicios($input: CrearFacturaInput!) {\r\n    obtenerProductosOServicios(input: $input) {\r\n      message\r\n      productosOServicios {\r\n        DangerousMaterial\r\n        Complement\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_POSTAL_CODES_SAT_API = gql`\r\n  query obtenerCodigoPostal($input: CrearFacturaInput!) {\r\n    obtenerCodigoPostal(input: $input) {\r\n      message\r\n      codigoPostal {\r\n        StateCode\r\n        MunicipalityCode\r\n        LocationCode\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CFDIU_USES_SAT_API = gql`\r\n  query obtenerCfdiUses($input: CrearFacturaInput!) {\r\n    obtenerCfdiUses(input: $input) {\r\n      message\r\n      cfdiUses {\r\n        message\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  CloudUpload,\r\n  Done,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function RegistroSellos({\r\n  datosEmpresa,\r\n  firma_disabled,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    certificate: \"\",\r\n    private_key: \"\",\r\n    private_key_password: \"\",\r\n    rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      certificate: \"\",\r\n      private_key: \"\",\r\n      private_key_password: \"\",\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n      sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [crearCSDS] = useMutation(CREAR_SELLO_CFDI);\r\n\r\n  const handleClickShowPassword = () => setShow(!show);\r\n  const handleMouseDownPassword = (event) => event.preventDefault();\r\n\r\n  const obtenerFiles = (e) => {\r\n    const { name, files } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: files[0],\r\n    });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      private_key_password: e.target.value,\r\n    });\r\n  };\r\n\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve) => {\r\n      let baseURL = \"\";\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        baseURL = reader.result;\r\n        resolve(baseURL);\r\n      };\r\n    });\r\n  };\r\n\r\n  const guardarBD = async () => {\r\n    if (\r\n      !datos.certificate ||\r\n      !datos.private_key ||\r\n      !datos.private_key_password ||\r\n      !datos.rfc\r\n    )\r\n      return;\r\n\r\n    try {\r\n      let data = { ...datos };\r\n      let cer = data.certificate;\r\n      let key = data.private_key;\r\n      await getBase64(cer)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.certificate = base[1];\r\n          data.nombre_cer = cer.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      await getBase64(key)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.private_key = base[1];\r\n          data.nombre_key = key.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setLoading(true);\r\n      const result = await crearCSDS({\r\n        variables: {\r\n          input: {\r\n            certificate: data.certificate,\r\n            private_key: data.private_key,\r\n            private_key_password: data.private_key_password,\r\n            rfc: data.rfc,\r\n            empresa: data.empresa,\r\n            sucursal: data.sucursal,\r\n            nombre_cer: data.nombre_cer,\r\n            nombre_key: data.nombre_key,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearCSDS.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<Add />}\r\n          disabled={firma_disabled}\r\n        >\r\n          Agregar CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Registrar firma digital</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            {datosEmpresa.rfc ? (\r\n              <Typography>{`RFC: ${datosEmpresa.rfc}`}</Typography>\r\n            ) : (\r\n              <Typography color=\"error\">\r\n                *No tienes registrado un RFC\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              Archivo *.cer <b>Certificado de la firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.certificate ? datos.certificate.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-cer-sello-digital\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".cer\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-cer-sello-digital\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"certificate\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" mt={2}>\r\n            <Typography>\r\n              Archivo *.key <b>Llave Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.private_key ? datos.private_key.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-key-llave_privada\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".key\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-key-llave_privada\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"private_key\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" my={2}>\r\n            <Typography>\r\n              Contraseña de la llave <b>Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                type={show ? \"text\" : \"password\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"private_key_password\"\r\n                onChange={obtenerDatos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        onClick={handleClickShowPassword}\r\n                        onMouseDown={handleMouseDownPassword}\r\n                        edge=\"end\"\r\n                      >\r\n                        {show ? <Visibility /> : <VisibilityOff />}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => guardarBD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { Close, DeleteOutline } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSellos({ datosEmpresa, refetch }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    rfc: datosEmpresa && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [eliminarCSD] = useMutation(ELIMINAR_SELLO_CFDI);\r\n\r\n  const eliminarSelloCSD = async () => {\r\n    if (!datos.rfc) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await eliminarCSD({\r\n        variables: {\r\n          rfc: datos.rfc,\r\n          empresa: datos.empresa,\r\n        },\r\n      });\r\n\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCSD.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<DeleteOutline />}\r\n        >\r\n          Remover CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Eliminar Firma Digital</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Se eliminara el CSD registrado con el RFC ${datosEmpresa.rfc}`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} /> : <DeleteOutline />\r\n            }\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            onClick={() => eliminarSelloCSD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Container,\r\n  FormControl,\r\n  Select,\r\n  MenuItem\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Typography,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { regimenFiscal } from \"../../Facturacion/catalogos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport RegistroSellos from \"../../Facturacion/CFDISellos/RegistrarSellos\";\r\nimport EliminarSellos from \"../../Facturacion/CFDISellos/EliminarCSD\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport default function InformacionFiscal(props) {\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? true : false\r\n  );\r\n  const { empresa, setEmpresa } = useContext(EmpresaContext);\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n  const [firma_disabled, setFirmaDisabled] = useState(false);\r\n  const [empresaFiscal, setEmpresaFiscal] = useState({\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    regimen_fiscal: \"\",\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n  });\r\n  /* Queries */ \r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n        let new_sesion = sesion;\r\n        new_sesion.empresa = data.obtenerEmpresa;\r\n        localStorage.setItem(\"sesionCafi\", JSON.stringify(new_sesion));\r\n        if (!data.obtenerEmpresa.rfc) {\r\n          setFirmaDisabled(true);\r\n        } else {\r\n          setFirmaDisabled(false);\r\n        }\r\n      }\r\n    } catch (errorCatch) {\r\n      //console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa, sesion]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n      \r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaFiscal({\r\n        nombre_fiscal: empresa.nombre_fiscal,\r\n        rfc: empresa.rfc,\r\n        curp: empresa.curp,\r\n\r\n        info_adicio: empresa.info_adicio,\r\n        regimen_fiscal: empresa.regimen_fiscal,\r\n        sello_sat: empresa.sello_sat,\r\n        nombre_cer: empresa.nombre_cer,\r\n        nombre_key: empresa.nombre_key,\r\n        limite_timbres: empresa.limite_timbres,\r\n        timbres_usados: empresa.timbres_usados,\r\n        direccionFiscal: {\r\n          calle: empresa.direccionFiscal.calle,\r\n          no_ext: empresa.direccionFiscal.no_ext,\r\n          no_int: empresa.direccionFiscal.no_int,\r\n          codigo_postal: empresa.direccionFiscal.codigo_postal,\r\n          colonia: empresa.direccionFiscal.colonia,\r\n          municipio: empresa.direccionFiscal.municipio,\r\n          localidad: empresa.direccionFiscal.localidad,\r\n          estado: empresa.direccionFiscal.estado,\r\n          pais: empresa.direccionFiscal.pais,\r\n        },\r\n        datosBancarios: {\r\n          cuenta: empresa.datosBancarios.cuenta,\r\n          sucursal: empresa.datosBancarios.sucursal,\r\n          clave_banco: empresa.datosBancarios.clave_banco,\r\n        },\r\n      });\r\n    } catch (errorCatch) {}\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaFiscal); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaFiscal,\r\n        },\r\n      });\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoadingPage(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.response) {\r\n        console.log(error.response);\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      direccionFiscal: {\r\n        ...empresaFiscal.direccionFiscal,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n  const obtenerCamposBancarios = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      datosBancarios: {\r\n        ...empresaFiscal.datosBancarios,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n     \r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n     \r\n        \r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container>\r\n              <Grid container spacing={1} >\r\n                <Grid item md={6} xs={12} className={classes.require}>\r\n                  <Box my={1}>\r\n                    <Typography>\r\n                     <b> <span>* </span>Nombre fiscal</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !empresaFiscal.nombre_fiscal}\r\n                      name=\"nombre_fiscal\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.nombre_fiscal\r\n                          ? empresaFiscal.nombre_fiscal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>RFC</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"rfc\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.rfc ? empresaFiscal.rfc : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography>Régimen fiscal</Typography>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"regimen_fiscal\"\r\n                    >\r\n                      <Select\r\n                        value={\r\n                          empresaFiscal.regimen_fiscal\r\n                            ? empresaFiscal.regimen_fiscal\r\n                            : \"\"\r\n                        }\r\n                        name=\"regimen_fiscal\"\r\n                        onChange={obtenerCampos}\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {regimenFiscal.map((res, index) => (\r\n                          <MenuItem\r\n                            key={index}\r\n                            value={res.Value}\r\n                          >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>CURP</b></Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"curp\"\r\n                      variant=\"outlined\"\r\n                      value={empresaFiscal.curp ? empresaFiscal.curp : \"\"}\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Info. Adicional</b></Typography>\r\n                    <TextField\r\n                      disabled={bloqueo}\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"info_adicio\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaFiscal.info_adicio\r\n                          ? empresaFiscal.info_adicio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      multiline\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>\r\n                  <Typography className={classes.subtitle}>\r\n                    <b>Firma digital</b>\r\n                  </Typography>\r\n                  <Divider />\r\n                  <Box m={1}>\r\n                    {empresaFiscal.sello_sat === true ? (\r\n                      <Alert\r\n                        severity=\"success\"\r\n                        action={\r\n                          <EliminarSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Firma Digital Activa</AlertTitle>\r\n                      </Alert>\r\n                    ) : (\r\n                      <Alert\r\n                        severity=\"info\"\r\n                        action={\r\n                          <RegistroSellos\r\n                            firma_disabled={firma_disabled}\r\n                            datosEmpresa={empresaFiscal}\r\n                            refetch={refetch}\r\n                          />\r\n                        }\r\n                      >\r\n                        <AlertTitle>Sin Firma Digital</AlertTitle>\r\n                        Sin esta firma no prodrás realizar facturas\r\n                        {firma_disabled ? (\r\n                          <li>Necesitas tener un RFC registrado</li>\r\n                        ) : null}\r\n                      </Alert>\r\n                    )}\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Archivo *.cer</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Archivo *.key</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  <Box my={1}>\r\n                    <Typography><b>Fecha de registro</b></Typography>\r\n                    <TextField\r\n                      disabled\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box >\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.calle\r\n                          ? empresaFiscal.direccionFiscal.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_ext\r\n                          ? empresaFiscal.direccionFiscal.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.no_int\r\n                          ? empresaFiscal.direccionFiscal.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.codigo_postal\r\n                          ? empresaFiscal.direccionFiscal.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.colonia\r\n                          ? empresaFiscal.direccionFiscal.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.municipio\r\n                          ? empresaFiscal.direccionFiscal.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.localidad\r\n                          ? empresaFiscal.direccionFiscal.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.estado\r\n                          ? empresaFiscal.direccionFiscal.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.direccionFiscal.pais\r\n                          ? empresaFiscal.direccionFiscal.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box mt={1}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Datos bancarios</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Cuenta</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"cuenta\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.cuenta\r\n                          ? empresaFiscal.datosBancarios.cuenta\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Sucursal</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"sucursal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.sucursal\r\n                          ? empresaFiscal.datosBancarios.sucursal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                  <Box>\r\n                    <Typography><b>Clave de banco</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"clave_banco\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        empresaFiscal.datosBancarios.clave_banco\r\n                          ? empresaFiscal.datosBancarios.clave_banco\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposBancarios}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                \r\n     \r\n              </Grid>\r\n              {sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? null : (\r\n                  <DialogActions m={2} style={{ marginTop:10, width:'100%',justifyContent: \"center\" }}>\r\n                  <Button onClick={handleClose} color=\"primary\">\r\n                    Cancelar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => actEmp()}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    \r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </DialogActions>\r\n              )}\r\n            </Container>\r\n          )}\r\n       \r\n      \r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {  DialogContent, Button, Box, Dialog, Slide, Typography, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport MisDatos from './Datos/MisDatos';\r\nimport InformacionFiscal from './InformacionFiscal/InformacionFiscal';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n \r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function MiEmpresa() {\r\n  const classes = useStyles();\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [open, setOpen] = useState(false);\r\n\t\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    \r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\t\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\treturn (\r\n\t\t<div>\r\n    <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de empresa\r\n        </Box>\r\n      </Button>\r\n        <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n          <Box >\r\n            <Tabs\r\n              indicatorColor=\"primary\"\r\n              value={value}\r\n              onChange={handleChange}\r\n              aria-label=\"simple tabs example\"\r\n            >\r\n              <Tab label=\"Datos empresa\" />\r\n              <Tab label=\"Datos fiscales\" />\r\n            </Tabs>\r\n          </Box>\r\n          <DialogContent>  \r\n            {\r\n              (value === 0 ) ? \r\n                <MisDatos setOpen={setOpen} />\r\n                :\r\n                <InformacionFiscal setOpen={setOpen} />\r\n            }\r\n          </DialogContent>\r\n      </Dialog>  \r\n      \r\n     \r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_SUCURSALES = gql`\r\n    query ObtenerSucursalesEmpresa($id: ID!){\r\n        obtenerSucursalesEmpresa(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const OBTENER_DATOS_SUCURSAL = gql`\r\n    query obtenerDatosSucursal($id: ID!){\r\n        obtenerDatosSucursal(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const ACTUALIZAR_SUCURSAL = gql`\r\n  mutation editarSucursal($id: ID!, $input: EditarSucursal) {\r\n    editarSucursal(id: $id, input: $input) {\r\n         _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                dinero_actual\r\n            }         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_MOVIMIENTO_CUENTA = gql`\r\n    mutation CrearMovimientoCuenta($input: CrearMovimientoCuentaInput, $empresa: ID!, $sucursal: ID!, $tipo: Boolean){\r\n        crearMovimientoCuenta(input: $input, empresa: $empresa, sucursal: $sucursal, tipo: $tipo){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CUENTAS = gql`\r\n    query ObtenerHistorialCuenta($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialCuenta, $tipo: Boolean){\r\n        obtenerHistorialCuenta(empresa: $empresa, sucursal: $sucursal, input: $input, tipo: $tipo){\r\n            tipo_movimiento\r\n            id_usuario\r\n            numero_caja\r\n            id_Caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            horario_turno\r\n            concepto\r\n            comentarios\r\n            montos_en_caja { \r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n            }\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            empresa\r\n            sucursal             \r\n        }\r\n    }\r\n`;","export const numerosRandom = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const generateCode = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const generateCodeNumerico = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const formatoHora = (hora) => {\r\n  if (!hora) {\r\n    return null;\r\n  } else {\r\n    var newtime = new Date(hora);\r\n    return newtime.toLocaleTimeString(\"en-US\", { hour12: \"false\" });\r\n  }\r\n};\r\n\r\nexport const formatoFecha = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoFechaCorta = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"short\",\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoMexico = (number) => {\r\n  if (!number) {\r\n    return null;\r\n  } else {\r\n    let nueva;\r\n    if (number % 1 === 0) {\r\n      nueva = number;\r\n    } else {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    }\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = \"$1,\";\r\n    return nueva.toString().replace(exp, rep);\r\n  }\r\n};\r\n\r\nexport const cleanTypenames = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map(cleanTypenames);\r\n  } else if (value !== null && typeof value === \"object\") {\r\n    const newObject = {};\r\n    for (const property in value)\r\n      if (property !== \"__typename\")\r\n        newObject[property] = cleanTypenames(value[property]);\r\n    return newObject;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nexport const findProductArray = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n          return {\r\n            producto_found,\r\n            found,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePrices = async (\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  newPrising = 0\r\n) => {\r\n  let subtotalCalculo = 0,\r\n    totalCalculo = 0,\r\n    impuestoCalculo = 0,\r\n    ivaCalculo = 0,\r\n    iepsCalculo = 0,\r\n    descuentoCalculo = 0,\r\n    monederoCalculo = 0;\r\n  // console.log(\"newPrising\",newPrising);\r\n  const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n  console.log(newP.id_producto.precios.precios_producto[0].precio_venta);\r\n  // console.log(newP);\r\n  const iva_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.iva < 9\r\n          ? `0${newP.id_producto.precios.iva}`\r\n          : newP.id_producto.precios.iva\r\n      }`\r\n    );\r\n\r\n  const ieps_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.ieps < 9\r\n          ? `0${newP.id_producto.precios.ieps}`\r\n          : newP.id_producto.precios.ieps\r\n      }`\r\n    );\r\n\r\n  const precioProducto = newPrising;\r\n  // const precioDescuentoProducto = newP.descuento_activo ? parseFloat(newP.descuento.precio_con_descuento) : 0;\r\n\r\n  totalCalculo =\r\n    granel.granel === true\r\n      ? precioProducto * cantidadNueva * parseFloat(granel.valor)\r\n      : precioProducto * cantidadNueva;\r\n\r\n  subtotalCalculo =\r\n    granel.granel === true\r\n      ? (precioProducto - (iva_producto + ieps_producto)) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (precioProducto - (iva_producto + ieps_producto)) * cantidadNueva;\r\n\r\n  impuestoCalculo =\r\n    granel.granel === true\r\n      ? (iva_producto + ieps_producto) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (iva_producto + ieps_producto) * cantidadNueva;\r\n\r\n  console.log(cantidadNueva);\r\n\r\n  ivaCalculo =\r\n    granel.granel === true\r\n      ? iva_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : iva_producto * cantidadNueva;\r\n\r\n  iepsCalculo =\r\n    granel.granel === true\r\n      ? ieps_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : ieps_producto * cantidadNueva;\r\n\r\n  descuentoCalculo =\r\n    granel.granel === true\r\n      ? newP.descuento_activo === true\r\n        ? parseFloat(newP.descuento.dinero_descontado) *\r\n          cantidadNueva *\r\n          parseFloat(granel.valor)\r\n        : 0\r\n      : newP.descuento_activo === true\r\n      ? parseFloat(newP.descuento.dinero_descontado) * cantidadNueva\r\n      : 0;\r\n\r\n  monederoCalculo = newP.id_producto.precios.monedero\r\n    ? newP.id_producto.precios.monedero_electronico * cantidadNueva\r\n    : 0;\r\n\r\n  return {\r\n    totalCalculo,\r\n    subtotalCalculo,\r\n    impuestoCalculo,\r\n    ivaCalculo,\r\n    iepsCalculo,\r\n    descuentoCalculo,\r\n    monederoCalculo,\r\n  };\r\n};\r\n\r\nexport const calculatePrices2 = async ({ newP, cantidad, granel, origen, precio_boolean = false, precio}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? parseFloat(granel.valor) : 1;\r\n    const precio_actual = precio_boolean ? precio : newP.descuento_activo ? newP.descuento : newP.precio_unidad;\r\n    const cantidadCaja =\r\n    precio_actual.unidad_maxima === true\r\n      ? precio_actual.cantidad_unidads\r\n      : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    const ob = {\r\n      ivaCalculo: parseFloat((ivaCalculo * valor_granel * cantidadNueva).toFixed(2)),\r\n      iepsCalculo: parseFloat((iepsCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      impuestoCalculo: parseFloat((impuestoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      subtotalCalculo: parseFloat((subtotalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      totalCalculo: parseFloat((totalCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      monederoCalculo: parseFloat((monederoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      descuentoCalculo: parseFloat((descuentoCalculo * valor_granel * cantidadNueva).toFixed(2)) ,\r\n      newP\r\n    };\r\n    if(origen === \"Ventas1\"){\r\n      newP.cantidad_venta = 1;\r\n      newP.granel_producto  = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat((precio_actual.precio_neto).toFixed(2));\r\n      newP.precio_actual_object = {\r\n        cantidad_unidad: precio_actual.cantidad_unidad ? precio_actual.cantidad_unidad : 1,\r\n        numero_precio: precio_actual.numero_precio ? precio_actual.numero_precio : 1,\r\n        unidad_maxima: precio_actual.unidad_maxima ? precio_actual.unidad_maxima : false,\r\n        precio_general: precio_actual.precio_general ? precio_actual.precio_general : 0,\r\n        precio_neto: precio_actual.precio_neto ? precio_actual.precio_neto : 0,\r\n        precio_venta: precio_actual.precio_venta ? precio_actual.precio_venta : 0,\r\n        iva_precio: precio_actual.iva_precio ? precio_actual.iva_precio : 0,\r\n        ieps_precio: precio_actual.ieps_precio ? precio_actual.ieps_precio : 0,\r\n        utilidad: precio_actual.utilidad ? precio_actual.utilidad : 0,\r\n        porciento: precio_actual.porciento ? precio_actual.porciento : 0,\r\n        dinero_descontado: precio_actual.dinero_descontado ? precio_actual.dinero_descontado : 0,\r\n      };\r\n    }else if(origen === \"Ventas2\") {\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const verifiPrising = async (newP) => {\r\n  try {\r\n    if (!newP) return false;\r\n    const amount = newP.cantidad_venta;\r\n    const pricings = newP.id_producto.precios.precios_producto.filter(\r\n      (p) => p.unidad_mayoreo > 0 && p.precio_neto > 0\r\n    );\r\n\r\n    let finalPrising = {\r\n      found: false,\r\n      pricing: 0,\r\n      number_pricing: 0,\r\n      object_prising: {}\r\n    };\r\n    const datoFinal = pricings.length;\r\n    if (newP.precio_seleccionado) return finalPrising;\r\n    //CONIDICONAR SI EL PRECIO ES MENOR Y MENOR PERO QUE NO SEA MAYOR AL SEGUNDO\r\n    if (amount < newP.id_producto.precios.precios_producto[1].unidad_mayoreo)\r\n      return (finalPrising = {\r\n        found: true,\r\n        pricing: newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.id_producto.precios.precios_producto[0].precio_neto,\r\n        number_pricing:\r\n          newP.id_producto.precios.precios_producto[0].numero_precio,\r\n        object_prising: newP.descuento_activo ? newP.descuento : newP.id_producto.precios.precios_producto[0]\r\n      });\r\n\r\n    for (let i = 0; i < pricings.length; i++) {\r\n      if (i + 1 === datoFinal && amount >= pricings[i].unidad_mayoreo)\r\n        return (finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        });\r\n\r\n      if (\r\n        i + 1 < datoFinal &&\r\n        amount >= pricings[i].unidad_mayoreo &&\r\n        amount < pricings[i + 1].unidad_mayoreo\r\n      ) {\r\n        finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i]\r\n        };\r\n      }\r\n    }\r\n    return finalPrising;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function formatCurrency(number) {\r\n  var formatted = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n  }).format(number);\r\n  console.log(formatted);\r\n  return formatted;\r\n}\r\n\r\nexport const findProductArrayRefactor = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    //Declarar variables\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n    //Se recorren los productos\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      //Se verifica si tiene codigo de barras ya que no es obligatorio\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  Avatar,\r\n  DialogContent,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  OBTENER_DATOS_SUCURSAL, ACTUALIZAR_SUCURSAL\r\n} from \"../../../../gql/Empresa/sucursales\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DatosSucursal() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n \r\n\r\n  const [actualizarSucursal] = useMutation(ACTUALIZAR_SUCURSAL);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_SUCURSAL, {\r\n    variables: { id: sesion.sucursal._id },\r\n  });\r\n\r\n  const [sucursalDatos, setSucursalDatos] = useState({\r\n    nombre_sucursal: \"\",\r\n    descripcion: \"\",\r\n    telefono:\"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    }    \r\n  });\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  },  [refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        \r\n        setSucursalDatos(data.obtenerDatosSucursal[0]);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setSucursalDatos]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  \r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarSucursal({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: sucursalDatos,\r\n        },\r\n      });\r\n     \r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      direccion: { ...sucursalDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setSucursalDatos({\r\n        ...sucursalDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [sucursalDatos, setSucursalDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de sucursal\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n              \r\n                <Grid item md={4} flexdirection='row'>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b><span>* </span>Nombre de empresa</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.nombre_sucursal}\r\n                      name=\"nombre_empresa\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.nombre_sucursal\r\n                          ? sucursalDatos.nombre_sucursal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Descripción</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm.error && !sucursalDatos.descripcion}\r\n                      name=\"nombre_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.descripcion\r\n                          ? sucursalDatos.descripcion\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm.error &&\r\n                        errorForm.message !== \"El campo nombre es obligatorio\"\r\n                          ? errorForm.message\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                 {/*  <Box>\r\n                    <Typography>Teléfono</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.telefono_dueno\r\n                          ? sucursalDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box> */}\r\n                </Grid>\r\n                \r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Calle</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.calle\r\n                          ? sucursalDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Ext</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_ext\r\n                          ? sucursalDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Num. Int</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_int\r\n                          ? sucursalDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>C.P.</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.codigo_postal\r\n                          ? sucursalDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Colonia</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.colonia\r\n                          ? sucursalDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Municipio</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.municipio\r\n                          ? sucursalDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography><b>Localidad</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.localidad\r\n                          ? sucursalDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Estado</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.estado\r\n                          ? sucursalDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography><b>Pais</b></Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.pais\r\n                          ? sucursalDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { EmpresaProvider } from '../../../context/Catalogos/empresaContext';\r\nimport MiEmpresa from './DatosEmpresa';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport Sucursal from './Sucursal/DatosSucursal';\r\n\r\nexport default function Empresa() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    return(\r\n        <div>\r\n            <EmpresaProvider>\r\n                <Grid container spacing={5} justify=\"center\">\r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <Sucursal />\r\n                        </Box>\r\n                    </Grid>\r\n                    {sesion.accesos.mi_empresa.datos_empresa.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                               < MiEmpresa />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                 {/*    {sesion.accesos.mi_empresa.informacion_fiscal.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <InformacionFiscal />\r\n                            </Box> \r\n                        </Grid>\r\n                    )} */}\r\n                </Grid>\r\n            </EmpresaProvider>\r\n        </div>\r\n    )\r\n}","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  IconButton,\r\n  InputAdornment,\r\n  OutlinedInput,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { Box, TextField, Typography, Table, Checkbox } from \"@material-ui/core\";\r\nimport { Cached, LocalOffer } from \"@material-ui/icons\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function PreciosDeCompra() {\r\n  const {\r\n    datos_generales,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const descuentoUnidadXdefecto = (descuento_activo) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      descuento_activo,\r\n    });\r\n  };\r\n\r\n  const checkUnidadDefault = (checked) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>Aplicar Descuento</TableCell>\r\n                <TableCell>Unidad Principal</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow /* selected={actualizarUnidad ? true : false} */>\r\n                <TableCell>{datos_generales.codigo_barras}</TableCell>\r\n                <TableCell>{unidadVentaXDefecto.unidad}</TableCell>\r\n                <TableCell>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    {unidadVentaXDefecto.descuento_activo &&\r\n                    unidadVentaXDefecto.descuento_activo !== null ? (\r\n                      <LocalOffer\r\n                        color={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? \"primary\"\r\n                            : \"action\"\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                    <Box mr={1} />\r\n                    <Typography>\r\n                      <b>\r\n                        $\r\n                        {formatoMexico(\r\n                          unidadVentaXDefecto.descuento_activo &&\r\n                            unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento.precio_neto\r\n                            : unidadVentaXDefecto.precio\r\n                        )}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell>{unidadVentaXDefecto.cantidad}</TableCell>\r\n                <TableCell>\r\n                  {unidadVentaXDefecto.descuento_activo &&\r\n                  unidadVentaXDefecto.descuento_activo !== null ? (\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Checkbox\r\n                        checked={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento_activo\r\n                            : false\r\n                        }\r\n                        onChange={(e) =>\r\n                          descuentoUnidadXdefecto(e.target.checked)\r\n                        }\r\n                        inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                        color=\"primary\"\r\n                        disabled={unidadVentaXDefecto.descuento_activo === null}\r\n                      />\r\n                      <Typography color=\"primary\">\r\n                        %\r\n                        {parseFloat(\r\n                          unidadVentaXDefecto.descuento_activo !== null\r\n                            ? unidadVentaXDefecto.descuento.porciento\r\n                            : 0\r\n                        )}\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : null}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={unidadVentaXDefecto.unidad_principal}\r\n                    onChange={(e) => checkUnidadDefault(e.target.checked)}\r\n                    inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n              <UnidadesVentaSecundaria />\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst UnidadesVentaSecundaria = () => {\r\n  const {\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  const [precio, setPrecio] = useState(\r\n    unidadVentaSecundaria.descuento_activo !== null &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n      ? unidadVentaSecundaria.descuento.precio_neto\r\n      : unidadVentaSecundaria.precio\r\n  );\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const obtenerCantidad = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      cantidad: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    if (\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n    ) {\r\n      setPrecio(value);\r\n      calcularUnidadDesucuento(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n  };\r\n\r\n  const calcularUnidadDesucuento = (value) => {\r\n    const { cantidad, precio_unidad } = unidadVentaSecundaria;\r\n    if (!value || !cantidad) return;\r\n\r\n    const precio_unit = value / cantidad;\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n    const precio_venta_unit = precio_venta / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat((precio_unit / (suma_impuestos + 1)).toFixed(2));\r\n    let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat((100 - porcentaje).toFixed(2));\r\n\r\n    let PVCDSI = parseFloat(\r\n      ((precio_venta_unit * porcentaje) / 100).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat((precio_venta_unit - PVCDSI).toFixed(2));\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_neto = parseFloat(\r\n      (PVCDSI + iva_precio + ieps_precio).toFixed(2)\r\n    );\r\n    let precio_general = parseFloat((precio_neto * cantidad).toFixed(2));\r\n\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: precio_general,\r\n        precio_neto: precio_general,\r\n        precio_venta: PVCDSI,\r\n        iva_precio: iva_precio,\r\n        ieps_precio: ieps_precio,\r\n        utilidad: utilidad,\r\n        porciento: descuento,\r\n        dinero_descontado: dineroDescontado,\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidadDesucuentoCheck = (boolean) => {\r\n    const { cantidad, precio_unidad, descuento } = unidadVentaSecundaria;\r\n    if (!precio || !cantidad) return;\r\n\r\n    /* const precio_unit = value / cantidad; */\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n\r\n    const precio_venta_unit = precio / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(\r\n      (precio_venta_unit / (suma_impuestos + 1)).toFixed(2)\r\n    );\r\n    /* let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat((100 - porcentaje).toFixed(2)); */\r\n\r\n    let PVCDSI = parseFloat(((PVSI * descuento.porciento) / 100).toFixed(2));\r\n    let dineroDescontado = parseFloat((PVSI - PVCDSI).toFixed(2));\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_neto = parseFloat(\r\n      (PVCDSI + iva_precio + ieps_precio).toFixed(2)\r\n    );\r\n    let precio_general = parseFloat((precio_neto * cantidad).toFixed(2));\r\n\r\n    setPrecio(precio_general);\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento_activo: boolean,\r\n      precio,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: precio_general,\r\n        precio_neto: precio_general,\r\n        precio_venta: PVCDSI,\r\n        iva_precio: iva_precio,\r\n        ieps_precio: ieps_precio,\r\n        utilidad: utilidad,\r\n        porciento: descuento.porciento,\r\n        dinero_descontado: dineroDescontado,\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidad = (e) => {\r\n    if (e.target.value === \"\") {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n        precio: 0,\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: true,\r\n      });\r\n      return;\r\n    }\r\n    if (!unidadVentaSecundaria.precio || !unidadVentaSecundaria.cantidad)\r\n      return;\r\n\r\n    const { precio, cantidad } = unidadVentaSecundaria;\r\n\r\n    const { iva, ieps } = precios;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVCI = parseFloat((precio / cantidad).toFixed(2));\r\n    let PVSI = parseFloat((PVCI / (suma_impuestos + 1)).toFixed(2));\r\n\r\n    let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let iva_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n    );\r\n    let utilidad = parseFloat((((PVSI - PCSI) / PCSI) * 100).toFixed(2));\r\n    let precio_venta = PVSI * cantidad;\r\n    let precio_neto = PVCI * cantidad;\r\n\r\n    let unidad_secundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio,\r\n      cantidad,\r\n      precio_unidad: {\r\n        numero_precio: 1,\r\n        precio_venta: precio_venta,\r\n        precio_neto: precio_neto,\r\n        unidad_mayoreo: 0,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad,\r\n        unidad_maxima: true,\r\n        precio_general: precio,\r\n        cantidad_unidad: cantidad,\r\n      },\r\n    };\r\n\r\n    setUnidadVentaSecundaria(unidad_secundaria);\r\n  };\r\n\r\n  const checkUnidadPrincipal = (checked) => {\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (boolean) => {\r\n    let precio = boolean\r\n      ? unidadVentaSecundaria.descuento.precio_neto\r\n      : unidadVentaSecundaria.precio;\r\n    if (boolean) {\r\n      calcularUnidadDesucuentoCheck(boolean);\r\n    } else {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        descuento_activo: boolean,\r\n      });\r\n      setPrecio(precio);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell width={220}>\r\n        <FormControl variant=\"outlined\" size=\"small\" name=\"codigo_barras\">\r\n          <OutlinedInput\r\n            id=\"input-codigo-barras\"\r\n            name=\"codigo_barras\"\r\n            value={unidadVentaSecundaria.codigo_barras}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => GenCodigoBarras()}\r\n                >\r\n                  <Cached />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </TableCell>\r\n      <TableCell>{unidadVentaSecundaria.unidad}</TableCell>\r\n      <TableCell width={200}>\r\n        <TextField\r\n          type=\"number\"\r\n          name=\"precio\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onBlur={(e) => calcularUnidad(e)}\r\n          onChange={obtenerPrecio}\r\n          value={precio}\r\n          disabled={\r\n            unidadVentaSecundaria.descuento_activo !== null &&\r\n            unidadVentaSecundaria.descuento_activo === true\r\n          }\r\n          InputProps={{\r\n            inputProps: { min: 0 },\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {unidadVentaSecundaria.descuento_activo !== null ? (\r\n                  <LocalOffer\r\n                    color={\r\n                      unidadVentaSecundaria.descuento_activo\r\n                        ? \"primary\"\r\n                        : \"disabled\"\r\n                    }\r\n                  />\r\n                ) : null}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Tooltip\r\n          title={<Typography variant=\"subtitle2\">Pz/Kg por Unidad</Typography>}\r\n          placement=\"top\"\r\n          arrow\r\n        >\r\n          <TextField\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            type=\"number\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"cantidad\"\r\n            onBlur={calcularUnidad}\r\n            onChange={obtenerCantidad}\r\n            value={unidadVentaSecundaria.cantidad}\r\n            onBlur={(e) => {\r\n              if (e.target.value === \"\") {\r\n                setUnidadVentaSecundaria({\r\n                  ...unidadVentaSecundaria,\r\n                  cantidad: precios.unidad_de_compra.cantidad,\r\n                });\r\n              }\r\n            }}\r\n          />\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell>\r\n        {unidadVentaSecundaria.descuento_activo !== null ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Checkbox\r\n              checked={\r\n                unidadVentaSecundaria.descuento_activo\r\n                  ? unidadVentaSecundaria.descuento_activo\r\n                  : false\r\n              }\r\n              onChange={(e) => aplicarDescuento(e.target.checked)}\r\n              inputProps={{ \"aria-label\": \"check descuento\" }}\r\n              color=\"primary\"\r\n              disabled={unidadVentaSecundaria.descuento_activo === null}\r\n            />\r\n            <Typography color=\"primary\">\r\n              %\r\n              {parseFloat(\r\n                unidadVentaSecundaria.descuento &&\r\n                  unidadVentaSecundaria.descuento !== null\r\n                  ? unidadVentaSecundaria.descuento.porciento\r\n                  : 0\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <Checkbox\r\n          checked={unidadVentaSecundaria.unidad_principal}\r\n          onChange={(e) => checkUnidadPrincipal(e.target.checked)}\r\n          inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n          disabled={unidadVentaSecundaria.precio === 0}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n  },\r\n  marginInput: {\r\n    marginTop: 19,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function PreciosDeVenta() {\r\n  const { preciosP } = useContext(RegProductoContext);\r\n  let newPreciosP = [...preciosP];\r\n\r\n  return (\r\n    <Fragment>\r\n      {preciosP.map((res, index) => (\r\n        <RenderPreciosP\r\n          key={index}\r\n          data={res}\r\n          index={index}\r\n          newPreciosP={newPreciosP}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderPreciosP = ({ data, index, newPreciosP }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    preciosP,\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setPreciosP,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  let preciosVenta = { ...preciosP[index] };\r\n  const [ error, setError ] = useState(false);\r\n\r\n  const obtenerUtilidad = (valor_base) => {\r\n    if (!valor_base) {\r\n      preciosVenta.utilidad = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    /* let utilidad = 1; */\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let { /* unidad, cantidad,  */descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let utilidad = valor_base / 100;\r\n\r\n    const precio_venta = PUCSI * utilidad + PUCSI;\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    const precio_neto = precio_venta + impuestos;\r\n\r\n    preciosVenta.utilidad = parseFloat(valor_base);\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n\r\n    let PCCI = precios.precio_de_compra.precio_con_impuesto;\r\n    if(precio_neto < PCCI && precio_neto !== 0){\r\n      setError(true);\r\n    }else{\r\n      setError(false);\r\n    }\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n        unidadXDefecto = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec = (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec = new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat((cantidad_sec * precio_con_descuento_sec).toFixed(2)),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerPrecioNeto = (value) => {\r\n    \r\n    if (!value) {\r\n      console.log(value);\r\n      preciosVenta.precio_neto = 0;\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let { /* unidad, cantidad,  */descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio_neto / (suma + 1)).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    let utilidad_base = ((precio_neto - impuestos - PUCSI) / PUCSI) * 100;\r\n\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.utilidad = parseFloat(utilidad_base.toFixed(2));\r\n\r\n    let PCCI = precios.precio_de_compra.precio_con_impuesto;\r\n    if(precio_neto < PCCI && precio_neto !== 0){\r\n      setError(true);\r\n    }else{\r\n      setError(false);\r\n    }\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec = (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec = new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat((cantidad_sec * precio_con_descuento_sec).toFixed(2)),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerMayoreo = (value) => {\r\n    if (!value) {\r\n      preciosVenta.unidad_mayoreo = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n    preciosVenta.unidad_mayoreo = parseInt(value);\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const calculos = () => {\r\n    let { iva, ieps } = precios;\r\n    let { /* unidad, cantidad,  */descuento, descuento_activo } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad_base = preciosVenta.utilidad ? preciosVenta.utilidad : 0;\r\n    let utilidad = utilidad_base / 100;\r\n\r\n    //precio venta y neto con utilidad\r\n    const precio_venta = parseFloat((PUCSI * utilidad + PUCSI).toFixed(2));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n\r\n    const precio_neto = parseFloat((precio_venta + impuestos).toFixed(2));\r\n\r\n    //meter los valores a preciosVenta\r\n    preciosVenta.precio_venta = precio_venta;\r\n    preciosVenta.precio_neto = precio_neto;\r\n    preciosVenta.iva_precio = iva_precio;\r\n    preciosVenta.ieps_precio = ieps_precio;\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: precio_neto,\r\n        precio_venta: precio_venta,\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio,\r\n        ieps_precio,\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad * precio_neto).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec = (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec = new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat((cantidad_sec * precio_con_descuento_sec).toFixed(2)),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (preciosVenta.numero_precio === 1) {\r\n      calculos();\r\n    } else if (preciosVenta.numero_precio > 1 && preciosVenta.precio_neto) {\r\n      calculos();\r\n    }\r\n\r\n    /* preciosP.splice(index, 1, preciosVenta); */\r\n  }, [\r\n    precios.unidad_de_compra.precio_unitario_con_impuesto,\r\n    preciosVenta.precio_venta,\r\n  ]);\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    switch (name) {\r\n      case \"utilidad\":\r\n        if (!value) {\r\n          preciosVenta.utilidad = 0;\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      case \"precio_neto\":\r\n        if (!value) {\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          preciosVenta.utilidad = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      case \"unidad_mayoreo\":\r\n        if (!value) {\r\n          preciosVenta.unidad_mayoreo = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Utilidad</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box minWidth={100}>\r\n          <Typography className={classes.titulos}>\r\n            Precio {data.numero_precio}\r\n          </Typography>\r\n          <Box mb={2} />\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">%</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            value={preciosVenta.utilidad}\r\n            name=\"utilidad\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerUtilidad(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"utilidad\", preciosVenta.utilidad)\r\n            }\r\n            error={preciosVenta.utilidad === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Box\r\n            alignItems=\"flex-end\"\r\n            flexDirection=\"column\"\r\n            display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n          >\r\n            <Typography className={classes.precioTitle}>\r\n              <b>Precio de venta</b>\r\n            </Typography>\r\n            <Typography\r\n              className={classes.precioTitle}\r\n              variant=\"caption\"\r\n              color=\"textSecondary\"\r\n            >\r\n              (precio sin impuestos)\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box pl={1}>\r\n          <Typography>\r\n            <b>${parseFloat(preciosVenta.precio_venta).toFixed(2)}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          flexDirection=\"column\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Precio venta neto</b>\r\n          </Typography>\r\n          <Typography\r\n            className={classes.precioTitle}\r\n            variant=\"caption\"\r\n            color=\"textSecondary\"\r\n          >\r\n            (precio con impuestos)\r\n          </Typography>\r\n        </Box>\r\n        <Box className={data.numero_precio > 1 ? classes.marginInput : \"\"}>\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">$</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            name=\"precio_neto\"\r\n            variant=\"outlined\"\r\n            value={preciosVenta.precio_neto}\r\n            onChange={(e) => obtenerPrecioNeto(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"precio_neto\", preciosVenta.precio_neto)\r\n            }\r\n            error={preciosVenta.precio_neto === \"\" || error}\r\n            helperText={error ? \"Precio menor a costo\" : \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Unidad por mayoreo</b>\r\n          </Typography>\r\n        </Box>\r\n        {data.numero_precio > 1 ? (\r\n          <Box>\r\n            <TextField\r\n              disabled={\r\n                !parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                )\r\n              }\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"unidad_mayoreo\"\r\n              variant=\"outlined\"\r\n              value={preciosVenta.unidad_mayoreo}\r\n              onChange={(e) => obtenerMayoreo(e.target.value)}\r\n              onBlur={() =>\r\n                verificarCampoVacio(\r\n                  \"unidad_mayoreo\",\r\n                  preciosVenta.unidad_mayoreo\r\n                )\r\n              }\r\n              error={preciosVenta.unidad_mayoreo === \"\"}\r\n            />\r\n          </Box>\r\n        ) : null}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","export const unitCodes = [\r\n    {unidad: \"Pz\", codigo_unidad: \"H87\"},\r\n    {unidad: \"Caja\", codigo_unidad: \"XBX\"}\r\n]\r\n\r\nexport const unitCodes_granel = [\r\n  {unidad: \"Kg\", codigo_unidad: \"KGM\"},\r\n  {unidad: \"Lt\", codigo_unidad: \"LTR\"},\r\n  {unidad: \"Costal\", codigo_unidad: \"KGM\"},\r\n]","export const calcular_iva = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"iva_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = parseFloat(precio_sin_impuesto) * 0.16;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = 0;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.ieps_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n\r\n  return {\r\n    ...precios,\r\n    iva_activo: name === \"iva_activo\" ? value : precios.iva_activo,\r\n    iva: name === \"iva\" ? parseFloat(value) : value ? 16 : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\nexport const calcular_ieps = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"ieps_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      ieps = parseFloat(precio_sin_impuesto) * precios.ieps;\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      ieps = 0;\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.iva_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n  return {\r\n    ...precios,\r\n    ieps_activo: name === \"ieps_activo\" ? value : precios.ieps_activo,\r\n    ieps: name === \"ieps\" ? parseFloat(value) : value ? precios.ieps : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  TextField,\r\n  MenuItem,\r\n  FormHelperText,\r\n  InputAdornment,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, FormControl, Select } from \"@material-ui/core\";\r\nimport PreciosDeCompra from \"./UnidadesVenta\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport PreciosDeVenta from \"./Precios\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\nimport { calcular_ieps, calcular_iva } from \"../calculos_precios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  required: {\r\n    color: \"red\",\r\n  },\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  /* input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  }, */\r\n}));\r\n\r\nexport default function RegistroInfoAdidional() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    preciosP,\r\n    update,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* CHECKBOX IVA */\r\n  const obtenerIva = async (e) => {\r\n    if (e.target.name === \"iva\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        iva: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"iva_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_iva(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  /* CHECKBOX IEPS */\r\n  const obtenerIeps = async (e) => {\r\n    if (e.target.name === \"ieps\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        ieps: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"ieps_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_ieps(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  const [precioConImpuesto, setPrecioConImpuesto] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuesto, setPrecioSinImpuesto] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [PCI] = useDebounce(precioConImpuesto, 800);\r\n  const [PSI] = useDebounce(precioSinImpuesto, 800);\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioConImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let total_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio con impuesto */\r\n    precio_con_impuesto = parseFloat(value);\r\n    total_impuesto =\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva) +\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_sin_impuesto = parseFloat(value) / parseFloat(total_impuesto + 1);\r\n    iva =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioSinImpuesto(parseFloat(precio_sin_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioSinImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio sin impuesto */\r\n    precio_sin_impuesto = parseFloat(value);\r\n    iva =\r\n      parseFloat(value) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(value) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    if (!precios.iva_activo && !precios.ieps_activo) {\r\n      precio_con_impuesto = precio_sin_impuesto /*  / precios.unidad_de_compra.cantidad */;\r\n      precio_unitario_con_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    }\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioConImpuesto(parseFloat(precio_con_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE UNIDAD DE COMPRA */\r\n  const obtenerUnidadCompra = (e, child) => {\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      let precio =\r\n        precios.unidad_de_compra.cantidad * unidadVentaXDefecto.precio;\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad,\r\n          unidad,\r\n          unidad_activa: true,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Caja\" ? \"Pz\" : \"kg\",\r\n          codigo_unidad: unidad === \"Caja\" ? \"H87\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: false,\r\n        });\r\n        /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad,\r\n            codigo_unidad,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: unidad,\r\n            codigo_unidad,\r\n          },\r\n        }); */\r\n      } else {\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Pz\" ? \"Pz\" : unidad === \"Lt\" ? \"Lt \": \"kg\",\r\n          codigo_unidad: unidad === \"Pz\" ? \"H87\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad: unidad === \"Pz\" ? \"XBX\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          unidad: unidad === \"Pz\" ? \"Caja\" : unidad === \"Caja\" ? \"LTR\" : \"Costal\",\r\n          unidad_activa: false,\r\n          unidad_principal: false,\r\n        });\r\n      }\r\n\r\n      /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad: e.target.value,\r\n            cantidad: 1,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: e.target.value,\r\n          },\r\n        }); */\r\n      setPrecios({\r\n        ...precios,\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad,\r\n          codigo_unidad,\r\n          cantidad: 1,\r\n        },\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n    } else {\r\n      if (!precios.iva_activo && !precios.ieps_activo) {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      } else {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_con_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      }\r\n      if (\r\n        precios.unidad_de_compra.unidad === \"Caja\" ||\r\n        precios.unidad_de_compra.unidad === \"Costal\"\r\n      ) {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          cantidad: parseFloat(e.target.value),\r\n        });\r\n      }\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        cantidad: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioConImpuesto(PCI);\r\n  }, [PCI]);\r\n\r\n  useEffect(() => {\r\n    obtenerPrecioSinImpuesto(PSI);\r\n  }, [PSI]);\r\n\r\n  return (\r\n    <Box>\r\n      <div /* className={classes.input} */>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Impuestos</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.iva_activo}\r\n                        onChange={obtenerIva}\r\n                        name=\"iva_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"iva\"\r\n                id=\"form-producto-iva\"\r\n                variant=\"outlined\"\r\n                value={precios.iva}\r\n                onChange={obtenerIva}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 16,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.iva === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                porcentaje IEPS\r\n              </Typography>\r\n              <TextField\r\n                disabled={!precios.ieps_activo}\r\n                fullWidth\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.ieps_activo}\r\n                        onChange={obtenerIeps}\r\n                        name=\"ieps_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"ieps\"\r\n                id=\"form-producto-ieps\"\r\n                variant=\"outlined\"\r\n                value={precios.ieps}\r\n                onChange={obtenerIeps}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 0,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.ieps === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {/* \r\n          <Grid item md={4} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\" ml={1}>\r\n              <Alert severity=\"info\">Selecciona los impuestos aplicables</Alert>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n        <Box my={3}>\r\n          <Typography>\r\n            <b>Precios y unidad de compra</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                Unidad Compra\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={validacion.error && !precios.unidad_de_compra.unidad}\r\n                >\r\n                  {precios.granel ? (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes_granel.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  )}\r\n                  <FormHelperText>{validacion.message}</FormHelperText>\r\n                </FormControl>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap align=\"center\" className={classes.titulos}>\r\n                Unidad Conversion\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  {precios.unidad_de_compra.unidad === \"Caja\"\r\n                    ? \"Pz\"\r\n                    : precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? \"Kg\"\r\n                    : precios.unidad_de_compra.unidad}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Factor por Unidad\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={\r\n                  precios.unidad_de_compra.unidad === \"Caja\" ||\r\n                  precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? false\r\n                    : true\r\n                }\r\n                type=\"number\"\r\n                InputProps={{ inputProps: { min: 1 } }}\r\n                size=\"small\"\r\n                error={validacion.error && !precios.unidad_de_compra.cantidad}\r\n                name=\"cantidad\"\r\n                id=\"form-producto-cantidad\"\r\n                variant=\"outlined\"\r\n                value={precios.unidad_de_compra.cantidad}\r\n                helperText={validacion.message}\r\n                onChange={obtenerUnidadCompra}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio sin impuestos\r\n              </Typography>\r\n              <TextField\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !precioSinImpuesto}\r\n                name=\"precio_sin_impuesto\"\r\n                id=\"form-producto-precio_sin_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioSinImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setPrecioSinImpuesto(e.target.value)}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioSinImpuesto(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioSinImpuesto(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio con impuestos\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo && !precios.ieps_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                error={validacion.error && !precioConImpuesto}\r\n                name=\"precio_con_impuesto\"\r\n                id=\"form-producto-precio_con_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioConImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setPrecioConImpuesto(e.target.value)}\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioConImpuesto(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioConImpuesto(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={3} />\r\n        <Grid container spacing={2}>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>$ {parseFloat(precios.precio_de_compra.iva).toFixed(2)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IEPS\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>$ {parseFloat(precios.precio_de_compra.ieps).toFixed(2)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario sin impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                    precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                  ).toFixed(2)}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario con impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                    precios.unidad_de_compra.precio_unitario_con_impuesto\r\n                  ).toFixed(2)}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Precios de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Box display=\"flex\">\r\n          <PreciosDeVenta />\r\n        </Box>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Unidades de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n        <Box>\r\n          <PreciosDeCompra />\r\n        </Box>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\nimport { initial_state_precios } from \"../Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport const ComprasContext = createContext();\r\n\r\nexport const ComprasProvider = ({ children }) => {\r\n  const [datosProducto, setDatosProducto] = useState({\r\n    producto: {},\r\n    costo: 0,\r\n    cantidad: 1,\r\n    cantidad_regalo: 0,\r\n    unidad_regalo: \"\",\r\n    cantidad_total: 0,\r\n    descuento_porcentaje: 0,\r\n    descuento_precio: 0,\r\n    iva_total: 0,\r\n    ieps_total: 0,\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    mantener_precio: true,\r\n    impuestos_descuento: 0,\r\n    subtotal_descuento: 0,\r\n    total_descuento: 0,\r\n  });\r\n\r\n  const [datosCompra, setDatosCompra] = useState({\r\n    productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n  });\r\n\r\n  const [preciosVenta, setPreciosVenta] = useState([\r\n    {\r\n      numero_precio: 1,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 2,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 3,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 4,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 5,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 6,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n  ]);\r\n\r\n  const [productoOriginal, setProductoOriginal] = useState({\r\n    precios: initial_state_precios,\r\n  });\r\n  const [productosCompra, setProductosCompra] = useState([]);\r\n  const [isEditing, setIsEditing] = useState({});\r\n  const [editFinish, setEditFinish] = useState(false);\r\n  const [costo, setCosto] = useState(0);\r\n  const [cantidad, setCantidad] = useState(1);\r\n  const [issue, setIssue] = useState(false);\r\n  const [loadingProductos, setLoadingProductos] = useState(false);\r\n\r\n  return (\r\n    <ComprasContext.Provider\r\n      value={{\r\n        datosProducto,\r\n        setDatosProducto,\r\n        productosCompra,\r\n        setProductosCompra,\r\n        datosCompra,\r\n        setDatosCompra,\r\n        productoOriginal,\r\n        setProductoOriginal,\r\n        preciosVenta,\r\n        setPreciosVenta,\r\n        isEditing,\r\n        setIsEditing,\r\n        editFinish,\r\n        setEditFinish,\r\n        costo,\r\n        setCosto,\r\n        cantidad,\r\n        setCantidad,\r\n        issue,\r\n        setIssue,\r\n        loadingProductos,\r\n        setLoadingProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </ComprasContext.Provider>\r\n  );\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { alpha } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) {\r\n  const classes = useStyles();\r\n  const { presentaciones, setPresentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  /* useEffect(() => {\r\n    let nuevo_array = [];\r\n    mostrar_presentaciones.forEach((element) => {\r\n      let obj = {\r\n        codigo_barras: element.codigo_barras,\r\n        cantidad: parseFloat(element.cantidad),\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        color: element.color,\r\n        existencia: element.existencia,\r\n        medida: element.medida,\r\n        nombre_comercial: element.nombre_comercial,\r\n      };\r\n\r\n      if (element.descuento_activo === true) {\r\n        obj.aplicar_descuento = true;\r\n        obj.precio = parseFloat(element.descuento.precio_neto);\r\n      } else {\r\n        obj.aplicar_descuento = false;\r\n        obj.precio = parseFloat(element.precio);\r\n      }\r\n      nuevo_array.push(obj);\r\n    });\r\n    setPresentaciones(nuevo_array);\r\n  }, []); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                {!withoutPrice ? (\r\n                  <Fragment>\r\n                    <TableCell>Precio</TableCell>\r\n                    <TableCell padding=\"checkbox\">Aplicar descuento</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                {!onlyPrice ? (\r\n                  <Fragment>\r\n                    {from && from === \"compra\" ? (\r\n                      <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                    ) : null}\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                    withoutPrice={withoutPrice}\r\n                    onlyPrice={onlyPrice}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_element_presentacion_descuento = {\r\n    ...copy_presentaciones[index].descuento,\r\n  };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.cantidad_nueva) {\r\n      copy_element_presentacion.cantidad_nueva = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      if (value === \"0\") {\r\n        copy_element_presentacion.existencia = false;\r\n      } else {\r\n        copy_element_presentacion.existencia = true;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n    } else if (name === \"cantidad_nueva\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad_nueva = \"\";\r\n        copy_element_presentacion.existencia = copy_producto.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad_nueva = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = precios;\r\n      let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n      let iva_precio = parseFloat((precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)).toFixed(2));\r\n      let ieps_precio = parseFloat((precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)).toFixed(2));\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n      \r\n\r\n      let {descuento_activo, descuento} = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          (precio_con_descuento).toFixed(2)\r\n        );\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n        copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n      }\r\n      copy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n      copy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n      copy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n      copy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n      copy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.descuento_activo = value;\r\n\r\n    let precio_con_descuento = 0;\r\n    let { iva, ieps } = precios;\r\n    let {descuento, precio} = copy_element_presentacion;\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio / (suma + 1)).toFixed(2));\r\n\r\n    if(value){\r\n      let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n    }else{\r\n      precio_con_descuento = precio\r\n    }\r\n    \r\n    copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n      (precio_con_descuento).toFixed(2)\r\n    );\r\n    /* copy_element_presentacion.precio = parseFloat(value); */\r\n    copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n  \r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              presentaciones.length > 0 && !copy_producto.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {presentaciones.length === 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : presentaciones.length > 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      {!withoutPrice ? (\r\n        <Fragment>\r\n          <TableCell width={110} className={classes.input}>\r\n            <Input\r\n              inputRef={textfield}\r\n              onChange={(e) => obtenerDatos(e)}\r\n              disabled={disabledInput}\r\n              value={copy_producto.precio}\r\n              type=\"number\"\r\n              name=\"precio\"\r\n            />\r\n          </TableCell>\r\n          <TableCell width={200}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              {copy_producto.descuento_activo !== undefined &&\r\n              copy_producto.descuento_activo !== null ? (\r\n                <Fragment>\r\n                  <Checkbox\r\n                    checked={\r\n                      copy_producto.descuento_activo === true\r\n                        ? copy_producto.descuento_activo\r\n                        : false\r\n                    }\r\n                    onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                    icon={<LocalOfferOutlined />}\r\n                    checkedIcon={<LocalOffer />}\r\n                    inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                    color=\"primary\"\r\n                    disabled={copy_producto.descuento_activo === null}\r\n                  />\r\n                  <Typography\r\n                    color={\r\n                      copy_producto.descuento_activo === true\r\n                        ? \"primary\"\r\n                        : \"textSecondary\"\r\n                    }\r\n                  >\r\n                    %\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.porciento\r\n                        : 0\r\n                    )}{\" \"}\r\n                    $\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.precio_neto\r\n                        : 0\r\n                    )}\r\n                  </Typography>\r\n                </Fragment>\r\n              ) : null}\r\n            </Box>\r\n          </TableCell>\r\n        </Fragment>\r\n      ) : null}\r\n      {!onlyPrice ? (\r\n        <Fragment>\r\n          {from && from === \"compra\" ? (\r\n            <Fragment>\r\n              <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n              <TableCell padding=\"checkbox\">\r\n                <Input\r\n                  inputRef={textfield}\r\n                  onChange={(e) => obtenerDatos(e)}\r\n                  disabled={disabledInput}\r\n                  value={copy_producto.cantidad_nueva}\r\n                  type=\"tel\"\r\n                  name=\"cantidad_nueva\"\r\n                />\r\n              </TableCell>\r\n            </Fragment>\r\n          ) : (\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.cantidad}\r\n                type=\"tel\"\r\n                name=\"cantidad\"\r\n              />\r\n            </TableCell>\r\n          )}\r\n        </Fragment>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FormularioPrecios from \"../../../Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport { Close, LocalAtm, SquareFoot } from \"@material-ui/icons\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { CircularProgress, DialogTitle } from \"@material-ui/core\";\r\nimport TablaPresentaciones from \"../../../Catalogos/Producto/TallasColores/TablaPresentaciones\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      style={{ height: \"80vh\" }}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function AlertDialogSlide({ agregarCompra, handleClose, cargando }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const { datosProducto, productoOriginal /* setDatosProducto */ } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    setUnidadesVenta,\r\n    setPreciosP,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  const resetProducto = () => {\r\n    /* SET STATES WHEN UPDATING */\r\n    const { precios_producto, ...new_precios } = productoOriginal.precios;\r\n    const { unidades_de_venta } = productoOriginal;\r\n    let unidades_secundaria = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    /* setDatosProducto({...datosProducto, mantener_precio: true}) */\r\n    setPrecios(new_precios);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(productoOriginal.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    toggleDrawer();\r\n  };\r\n\r\n  const actualizarContextProducto = () => {\r\n    toggleDrawer();\r\n    let precio_unitario_con_impuesto =\r\n      datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n    let precio_unitario_sin_impuesto =\r\n      precios.precio_de_compra.precio_sin_impuesto /\r\n      precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_con_impuesto: datosProducto.costo,\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(6)\r\n        ),\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(6)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        onClick={() => actualizarContextProducto()}\r\n      >\r\n        Actualizar precios\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => resetProducto()}\r\n        aria-labelledby=\"alert-precios-compra-title\"\r\n        aria-describedby=\"alert-precios-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n          <DialogTitle style={{ padding: 0 }}>\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab label=\"Precios\" icon={<LocalAtm />} {...a11yProps(0)} />\r\n                <Tab\r\n                  label=\"Precios Medidas\"\r\n                  icon={<SquareFoot />}\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n            </AppBar>\r\n          </DialogTitle>\r\n        ) : null}\r\n        <DialogContent>\r\n          {datosProducto.producto.datos_generales &&\r\n          datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n            <div>\r\n              <TabPanel value={value} index={0}>\r\n                <FormularioPrecios />\r\n              </TabPanel>\r\n              <TabPanel value={value} index={1}>\r\n                <TablaPresentaciones\r\n                  from=\"compras\"\r\n                  datos={datosProducto.producto}\r\n                  setOnUpdate={setOnUpdate}\r\n                  onUpdate={onUpdate}\r\n                  onlyPrice={true}\r\n                />\r\n              </TabPanel>\r\n            </div>\r\n          ) : (\r\n            <FormularioPrecios />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => resetProducto()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => {\r\n              /* setDatosProducto({...datosProducto, mantener_precio: false}) */\r\n              agregarCompra(\"actualizar_precios\");\r\n              handleClose();\r\n              toggleDrawer();\r\n            }}\r\n            startIcon={cargando ? <CircularProgress color=\"inherit\" size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            disabled={!precios.precio_de_compra.precio_con_impuesto}\r\n          >\r\n            Aceptar y agregar compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONSULTAS = gql`\r\n  query obtenerConsultasProducto($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultasProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      categorias {\r\n        _id\r\n        categoria\r\n        subcategorias {\r\n          _id\r\n          subcategoria\r\n        }\r\n      }\r\n      departamentos {\r\n        _id\r\n        nombre_departamentos\r\n      }\r\n      marcas {\r\n        _id\r\n        nombre_marca\r\n      }\r\n      colores {\r\n        _id\r\n        nombre\r\n        hex\r\n      }\r\n      tallas {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      calzados {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      centro_costos {\r\n        _id\r\n        cuenta\r\n        subcuentas {\r\n          _id\r\n          subcuenta\r\n        }\r\n      }\r\n      codigos {\r\n        _id\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO = gql`\r\n  mutation crearProducto($input: CrearProductoInput) {\r\n    crearProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS = gql`\r\n  query obtenerProductos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $almacen: ID\r\n    $existencias: Boolean\r\n  ) {\r\n    obtenerProductos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      almacen: $almacen\r\n      existencias: $existencias\r\n    ) {\r\n      _id\r\n      centro_de_costos {\r\n        id_cuenta\r\n        cuenta\r\n        id_subcuenta\r\n        subcuenta\r\n      }\r\n      unidades_de_venta {\r\n        _id\r\n        precio\r\n        cantidad\r\n        unidad\r\n        codigo_unidad\r\n        unidad_principal\r\n        codigo_barras\r\n        id_producto\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        default\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      empresa\r\n      imagenes {\r\n        location_imagen\r\n        extencion_imagen\r\n        url_imagen\r\n        key_imagen\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n          codigo_unidad\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          codigo_unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n          codigo_unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n        granel\r\n      }\r\n      medidas_producto {\r\n        _id\r\n        cantidad\r\n        almacen\r\n        descuento_activo\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        codigo_barras\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        existencia\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        nombre_comercial\r\n        precio\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n      }\r\n      inventario_general {\r\n        _id\r\n        cantidad_existente\r\n        unidad_inventario\r\n        codigo_unidad\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        id_almacen_general\r\n        eliminado\r\n      }\r\n      medidas_registradas\r\n      sucursal\r\n      usuario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_PRODUCTO = gql`\r\n  mutation actualizarProducto($id: ID!, $input: ActualizarProductoInput) {\r\n    actualizarProducto(id: $id, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_PRODUCTO = gql`\r\n  mutation eliminarProducto($id: ID!) {\r\n    eliminarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PRODUCTOS_ELIMINADOS = gql`\r\n  query obtenerProductosInactivos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerProductosInactivos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      producto {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n      }\r\n      cantidad_existente\r\n      unidad_de_inventario\r\n      id_almacen\r\n      eliminado\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTIVAR_PRODUCTOS = gql`\r\n  mutation activarProducto($id: ID!) {\r\n    activarProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO_RAPIDO = gql`\r\n  mutation crearProductoRapido($input: CrearProductoRapidoInput) {\r\n    crearProductoRapido(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_COLOR = gql`\r\n\tmutation crearColor($input: CrearColorInput) {\r\n\t\tcrearColor(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_COLORES = gql`\r\n\tquery obtenerColores($sucursal: String!) {\r\n\t\tobtenerColores(sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tnombre\r\n\t\t\thex\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_COLOR = gql`\r\n\tmutation actualizarColor($input: ActualizarColorInput, $id: ID!) {\r\n\t\tactualizarColor(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_COLOR = gql`\r\n\tmutation eliminarColor($id: ID!) {\r\n\t\teliminarColor(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_COLOR } from \"../../../../../gql/Catalogos/colores\";\r\n\r\nexport default function CrearColorProducto({ refetch }) {\r\n  const [color, setColor] = useState({});\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      return;\r\n    }\r\n    try {\r\n      const colores = values;\r\n      await crearColor({\r\n        variables: {\r\n          input: {\r\n            nombre: colores.nombre,\r\n            hex: colores.hex,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add />\r\n          nuevo color\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        /* onClose={() => toggleModal()} */\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box mt={2}>\r\n              <Typography>Color seleccionado:</Typography>\r\n              {!values.hex ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n                  <Typography color=\"secondary\">NINGUNO</Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box bgcolor={values.hex} height={30} width={220} />\r\n              )}\r\n            </Box>\r\n            <Box my={2}>\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({\r\n                      ...values,\r\n                      nombre: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                  fullWidth\r\n                  focused\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_TALLAS = gql`\r\n\tmutation crearTalla($input: CrearTallaInput) {\r\n\t\tcrearTalla(input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_TALLAS = gql`\r\n\tquery obtenerTallas($sucursal: String!, $tipo: String! ) {\r\n\t\tobtenerTallas(sucursal: $sucursal, tipo: $tipo) {\r\n\t\t\t_id\r\n\t\t\ttalla\r\n\t\t\ttipo\r\n\t\t\tempresa {\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t\t_id\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_TALLA = gql`\r\n\tmutation actualizarTalla($input: ActualizarTallaInput, $id: ID!) {\r\n\t\tactualizarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_TALLA = gql`\r\n\tmutation eliminarTalla($input: ActualizarTallaInput,$id: ID!) {\r\n\t\teliminarTalla(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_TALLAS } from \"../../../../../gql/Catalogos/tallas\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function CrearTallasProducto({\r\n  setMedidasSeleccionadas,\r\n  refetch,\r\n}) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = useContext(RegProductoContext);\r\n\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      await crearTalla({\r\n        variables: {\r\n          input: {\r\n            talla: nueva_talla,\r\n            tipo: datos_generales.tipo_producto,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setMedidasSeleccionadas([nueva_talla]);\r\n      setValue(\"\");\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add /> Nueva talla\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              my={2}\r\n            >\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  id=\"outlined-error-helper-text\"\r\n                  label={\r\n                    datos_generales.tipo_producto === \"ROPA\"\r\n                      ? \"Talla\"\r\n                      : \"Número\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  focused\r\n                  fullWidth\r\n                  value={value}\r\n                  onChange={(e) => setValue(e.target.value.toUpperCase())}\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip, Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CrearColorProducto from \"./crearColor\";\r\nimport CrearTallasProducto from \"./crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n\treturn Math.floor(Math.random() * (999999999999 - 100000000000 + 1) + 100000000000).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  from,\r\n  withoutPrice,\r\n}) {\r\n  const {\r\n    /* almacen_inicial,\r\n    setAlmacenInicial, */\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    /* almacenes, */ colores,\r\n    tallas,\r\n    calzados,\r\n  } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const classes = useStyles();\r\n\r\n\tconst obtenerColoresSeleccinados = useCallback(\r\n\t\t() => {\r\n\t\t\tlet colors = [];\r\n\t\t\tlet medidas = [];\r\n\t\t\tconst copy_presentaciones = [ ...presentaciones ];\r\n\r\n\t\t\tcopy_presentaciones.forEach((element) => {\r\n\t\t\t\tif (element.color._id) colors.push(element.color);\r\n\t\t\t\tif (element.medida._id) medidas.push(element.medida);\r\n\t\t\t});\r\n\r\n\t\t\tvar hashColor = {};\r\n\t\t\tvar hashMedida = {};\r\n\t\t\tconst colores_existentes = colors.filter((color) => {\r\n\t\t\t\tvar existColor = !hashColor[color._id];\r\n\t\t\t\thashColor[color._id] = true;\r\n\t\t\t\treturn existColor;\r\n\t\t\t});\r\n\t\t\tconst medidas_existentes = medidas.filter((medida) => {\r\n\t\t\t\tvar existMedida = !hashMedida[medida._id];\r\n\t\t\t\thashMedida[medida._id] = true;\r\n\t\t\t\treturn existMedida;\r\n\t\t\t});\r\n\r\n\t\t\tsetColoresSeleccionados([ ...colores_existentes ]);\r\n\t\t\tsetMedidasSeleccionadas([ ...medidas_existentes ]);\r\n\t\t},\r\n\t\t[ presentaciones ]\r\n\t);\r\n\r\n\t// const obtenerAlmacenes = (event, child) => {\r\n\t// \tsetAlmacenInicial({\r\n\t// \t\t...almacen_inicial,\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\t[child.props.name]: child.props.id\r\n\t// \t});\r\n\t// };\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tobtenerColoresSeleccinados();\r\n\t\t},\r\n\t\t[ obtenerColoresSeleccinados ]\r\n\t);\r\n\r\n  return (\r\n    <div>\r\n      <Box>\r\n        <Grid container spacing={2}>\r\n          {/* {!almacen_existente ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\" >\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                    {presentaciones.length > 0 && !almacen_inicial.almacen ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n                  {from === \"compra\" ? null : (\r\n                    <AlmacenProvider>\r\n                      <ContainerRegistroAlmacen\r\n                        accion=\"registrar\"\r\n                        refetch={refetch}\r\n                      />\r\n                    </AlmacenProvider>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>\r\n                  {datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              <Grid container>\r\n                {medidas.map((talla, index) => (\r\n                  <RenderTallas\r\n                    key={index}\r\n                    talla={talla}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              <Grid container>\r\n                {colores.map((color, index) => (\r\n                  <Colores\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={3} />\r\n        <TablaPresentaciones\r\n          from={from}\r\n          withoutPrice={withoutPrice}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n\ttalla,\r\n\tcoloresSeleccionados,\r\n\tmedidasSeleccionadas,\r\n\tsetMedidasSeleccionadas,\r\n\tdatos\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { setPresentaciones, presentaciones, datos_generales, preciosP } = useContext(RegProductoContext);\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\tconst seleccionarMedidas = useCallback(\r\n\t\t() => {\r\n\t\t\tmedidasSeleccionadas.forEach((res) => {\r\n\t\t\t\tif (res._id === talla._id) setSelected(true);\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ talla._id, medidasSeleccionadas ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (datos.medidas_registradas) {\r\n\t\t\t\treturn seleccionarMedidas();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ seleccionarMedidas ]\r\n\t);\r\n\r\n\tconst handleAddTallas = (value) => {\r\n\t\tconst medidas_seleccionadas_temp = [ ...medidasSeleccionadas ];\r\n\r\n\t\tif (!selected) {\r\n\t\t\tmedidas_seleccionadas_temp.push(talla);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tmedidas_seleccionadas_temp.forEach((res, index) => {\r\n\t\t\t\tif (res._id === talla._id) {\r\n\t\t\t\t\tmedidas_seleccionadas_temp.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\r\n\t\tif (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!coloresSeleccionados.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.medida._id === producto_medida._id);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length === 1 && value) {\r\n\t\t\t/* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: medidas_seleccionadas_temp[k],\r\n\t\t\t\t\t\tcolor: array_medidad_finales[i].color,\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length > 0) {\r\n\t\t\t/* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tconst producto_color = coloresSeleccionados[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && !medidas_seleccionadas_temp.length) {\r\n\t\t\t/* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.medida._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: objeto_presentaciones_final.color,\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetMedidasSeleccionadas([ ...medidas_seleccionadas_temp ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\tonClick={() => handleAddTallas(!selected)}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tselected ? (\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: theme.palette.primary.main\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(selected ? theme.palette.primary.main : '#FFFFFF'),\r\n\t\t\t\t\t\tfontSize: 16\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{talla.talla}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Colores = ({ color, coloresSeleccionados, setColoresSeleccionados, medidasSeleccionadas, datos }) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { presentaciones, setPresentaciones, datos_generales, preciosP } = useContext(RegProductoContext);\r\n\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\tconst seleccionarColores = useCallback(\r\n\t\t() => {\r\n\t\t\tcoloresSeleccionados.forEach((res) => {\r\n\t\t\t\tif (res._id === color._id) setSelected(true);\r\n\t\t\t});\r\n\t\t},\r\n\t\t[ color._id, coloresSeleccionados ]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (datos.medidas_registradas) {\r\n\t\t\t\treturn seleccionarColores();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ seleccionarColores ]\r\n\t);\r\n\r\n\tconst obtenerColores = (value) => {\r\n\t\tif (!selected) {\r\n\t\t\tcoloresSeleccionados.push(color);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tcoloresSeleccionados.forEach((res, index) => {\r\n\t\t\t\tif (res._id === color._id) {\r\n\t\t\t\t\tcoloresSeleccionados.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\r\n\t\tif (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: {},\r\n\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!medidasSeleccionadas.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.color._id === producto_color._id);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length === 1 && value) {\r\n\t\t\t/* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: array_medidad_finales[i].medida,\r\n\t\t\t\t\t\tcolor: coloresSeleccionados[k],\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length > 0) {\r\n\t\t\t/* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tfor (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n\t\t\t\t\tconst producto_medida = medidasSeleccionadas[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && !coloresSeleccionados.length) {\r\n\t\t\t/* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.color._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: objeto_presentaciones_final.medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetColoresSeleccionados([ ...coloresSeleccionados ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<Tooltip title={color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: color.hex,\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(color.hex)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => obtenerColores(!selected)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{selected ? <Done /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { Button, CircularProgress, Tooltip } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Done, SquareFoot } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTAS } from \"../../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport TallasProducto from \"../../../Catalogos/Producto/TallasColores/TallasColores\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AlertDialogSlide({verificate, setVerificate}) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datosProducto, datosCompra, setLoadingProductos } = useContext(ComprasContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  /* useEffect(() => {\r\n    if(loading){\r\n      setLoadingProductos(true);\r\n    }else{\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]); */\r\n\r\n  if (loading)\r\n    return (\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        disabled={true}\r\n        startIcon={<CircularProgress size={16} color=\"inherit\" />}\r\n      >\r\n        Medidas\r\n      </Button>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const toggleDrawer = () => {\r\n    setOpen(!open);\r\n    setVerificate(false);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Selecciona medidas y colores\" disableHoverListener={true} open={verificate} placement=\"top\">\r\n        <Button\r\n          color={verificate ? \"secondary\" :\"inherit\"}\r\n          variant=\"outlined\"\r\n          size=\"medium\"\r\n          onClick={() => toggleDrawer()}\r\n          startIcon={<SquareFoot />}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n        >\r\n          Medidas\r\n        </Button>\r\n      </Tooltip>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={toggleDrawer}\r\n        aria-labelledby=\"alert-tallas-compra\"\r\n        aria-describedby=\"alert-tallas-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <DialogContent>\r\n          <TallasProducto\r\n            datos={datosProducto.producto}\r\n            obtenerConsultasProducto={obtenerConsultasProducto}\r\n            refetch={refetch}\r\n            from=\"compra\"\r\n            almacen={datosCompra.almacen}\r\n            withoutPrice={true}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import $ from \"jquery\"\r\nimport jQuery from \"jquery\"\r\n\r\nvar valuesFacturama = {\r\n    token: \"QUJTT0xVQ0lPTkVTOkxlb24yMDE4Iw==\",\r\n    url: \"https://apisandbox.facturama.mx/\"\r\n};\r\n\r\n$.ajaxSetup({\r\n    beforeSend: function (xhr) {\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" + valuesFacturama.token);\r\n    }\r\n});\r\n\r\nfunction facturama() {\r\n\r\n    var settings = {\r\n        url: valuesFacturama.url\r\n    };\r\n\r\n    function retrieve(path, id, callback) {\r\n        return jQuery.get(settings.url + path + '/' + id, undefined, callback, \"json\");\r\n    }\r\n\r\n    function list(path, callback) {\r\n        return jQuery.get(settings.url + path, undefined, callback, \"json\");\r\n    }\r\n\r\n    function listWithParam(path, param, callback) {\r\n        return jQuery.get(settings.url + path + param, undefined, callback, \"json\");\r\n    }\r\n\r\n    function postSyncWithParam(path, param, callback) {\r\n        $.ajax({\r\n            url: settings.url + path + param,\r\n            type: 'POST',\r\n            async: false,\r\n            success: callback\r\n        });\r\n    }\r\n\r\n    function postSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function putSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'PUT',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function deleteSyncWithParam(path, param, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path + '/' + param,\r\n            type: 'DELETE',\r\n            async: false,\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    var facturamaObject = {\r\n        Clients: {\r\n            Get: function (id, callback) {\r\n                return retrieve('client', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('client', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('client', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('client/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('client/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Products: {\r\n            Get: function (id, callback) {\r\n                return retrieve('product', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('product', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('product', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('product/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('product/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        BranchOffice: {\r\n            Get: function (id, callback) {\r\n                return retrieve('branchOffice', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('branchOffice', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('branchOffice', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('branchOffice', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('branchOffice/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Series: {\r\n            List: function (id, callback) {\r\n                return retrieve('serie', id, callback);\r\n            },\r\n            Create: function (idBranch, data, callback, callbackError) {\r\n                postSyncWithData('serie/' + idBranch, data, callback, callbackError);\r\n            },\r\n            Remove: function (idBranch, name, callback, callbackError) {\r\n                deleteSyncWithParam('serie/' + idBranch, name, callback, callbackError);\r\n            },\r\n            Update: function (idBranch, name, data, callback, callbackError) {\r\n                putSyncWithData('serie/' + idBranch + '/' + name, data, callback, callbackError);\r\n            }\r\n        },\r\n        Cfdi: {\r\n            Get: function (id, callback) {\r\n                return retrieve('cfdi', id, callback);\r\n            },\r\n            List: function (param, callback) {\r\n                return listWithParam('cfdi', param, callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('2/cfdis', data, callback, callbackError);\r\n            },\r\n            Send: function (param, callback) {\r\n                postSyncWithParam('cfdi', param, callback);\r\n            },\r\n            Cancel: function (params, callback, callbackError) {\r\n                deleteSyncWithParam('cfdi', params, callback, callbackError);\r\n            },\r\n            Download: function (format, type, id, callback) {\r\n                retrieve('cfdi/' + format + '/' + type, id, callback);\r\n            },\r\n            Acuse: function (format, type, id, callback) {\r\n                retrieve('acuse/' + format + '/' + type, id, callback);\r\n            }\r\n        },\r\n        TaxEntity: {\r\n            Get: function (callback) {\r\n                return list('taxEntity', callback);\r\n            },\r\n            Update: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity', data, callback, callbackError);\r\n            },\r\n            UploadCsd: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadCsd', data, callback, callbackError);\r\n            },\r\n            UploadImage: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadLogo', data, callback, callbackError);\r\n            }\r\n        },\r\n        Catalogs: {\r\n            States: function (country, callback) {\r\n                return list('catalogs/municipalities?countryCode' + country, callback);\r\n            },\r\n            Municipalities: function (state, callback) {\r\n                return list('catalogs/municipalities?stateCode' + state, callback);\r\n            },\r\n            Localities: function (state, callback) {\r\n                return list('catalogs/localities?stateCode' + state, callback);\r\n            },\r\n            Neighborhoods: function (postalCode, callback) {\r\n                return list('catalogs/neighborhoods?postalCode' + postalCode, callback);\r\n            },\r\n            ProductsOrServices: function (keyword, callback) {\r\n                return list('catalogs/ProductsOrServices?keyword=' + keyword, callback);\r\n            },\r\n            PostalCodes: function (keyword, callback) {\r\n                return list('catalogs/PostalCodes?keyword=' + keyword, callback);\r\n            },\r\n            Units: function (callback) {\r\n                return list('catalogs/Units', callback);\r\n            },\r\n            Currencies: function (callback) {\r\n                return list('catalogs/Currencies', callback);\r\n            },\r\n            Countries: function (callback) {\r\n                return list('catalogs/Countries', callback);\r\n            },\r\n            PaymentForms: function (callback) {\r\n                return list('catalogs/PaymentForms', callback);\r\n            },\r\n            PaymentMethods: function (callback) {\r\n                return list('catalogs/PaymentMethods', callback);\r\n            },\r\n            FederalTaxes: function (callback) {\r\n                return list('catalogs/FederalTaxes', callback);\r\n            },\r\n            FiscalRegimens: function (callback) {\r\n                return list('catalogs/FiscalRegimens', callback);\r\n            },\r\n            CfdiTypes: function (callback) {\r\n                return list('catalogs/CfdiTypes', callback);\r\n            },\r\n            RelationTypes: function (callback) {\r\n                return list('catalogs/RelationTypes', callback);\r\n            },\r\n            CfdiUses: function (keyword, callback) {\r\n                return list('catalogs/CfdiUses?keyword=' + keyword, callback);\r\n            }\r\n        }\r\n    };\r\n\r\n    facturamaObject.getToken = function () {\r\n        return \"Basic \" + valuesFacturama.token;\r\n    };\r\n\r\n    facturamaObject.getBaseUri = function () {\r\n        return settings.url;\r\n    };\r\n\r\n    return facturamaObject;\r\n}\r\n\r\n export default facturama()\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CODIGO_PRODUCTO = gql`\r\n  mutation crearCodigoProducto($input: CodigoCatalogoProductoInput) {\r\n    crearCodigoProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CODIGOS_PRODUCTO = gql`\r\n  query obtenerCodigosProducto($empresa: ID!, $sucursal: ID) {\r\n    obtenerCodigosProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      Name\r\n      Value\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CODIGO_PRODUCTO = gql`\r\n  mutation eliminarCodigoProducto($id: ID!) {\r\n    eliminarCodigoProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Close, Done, Search } from \"@material-ui/icons\";\r\nimport {\r\n  CircularProgress,\r\n  IconButton,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport {\r\n  CREAR_CODIGO_PRODUCTO,\r\n  ELIMINAR_CODIGO_PRODUCTO,\r\n} from \"../../../../../gql/CatalogosSat/catalogoProductosSat\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  spin_container: {\r\n    position: \"absolute\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  spin: {\r\n    zIndex: 9999,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CatalogosProductosSAT({ codigos, refetch }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading_save, setLoadingSave] = useState(false);\r\n  const [loading_delete, setLoadingDelete] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState({});\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [crearCodigoProducto] = useMutation(CREAR_CODIGO_PRODUCTO);\r\n  const [eliminarCodigoProducto] = useMutation(ELIMINAR_CODIGO_PRODUCTO);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const limpiarDataModal = () => {\r\n    setSelectedIndex({});\r\n    setProductos([]);\r\n    setBusqueda(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  const [value] = useDebounce(busqueda, 500);\r\n\r\n  const handleOk = async (selectedIndex) => {\r\n    const { Name, Value } = selectedIndex;\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name,\r\n        Value,\r\n      },\r\n    });\r\n    //Crear Codigo product a la BD\r\n    try {\r\n      setLoadingSave(true);\r\n      const result = await crearCodigoProducto({\r\n        variables: {\r\n          input: {\r\n            Name,\r\n            Value,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.crearCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setLoadingSave(false);\r\n        refetch();\r\n        limpiarDataModal();\r\n      }\r\n    } catch (error) {\r\n      setLoadingSave(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarCodigoBD = async (data) => {\r\n    try {\r\n      setLoadingDelete(true);\r\n      const result = await eliminarCodigoProducto({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.eliminarCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosGenerales({\r\n          ...datos_generales,\r\n          clave_producto_sat: {\r\n            Name: \"\",\r\n            Value: \"\",\r\n          },\r\n        });\r\n        setLoadingDelete(false);\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setLoadingDelete(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    limpiarDataModal();\r\n  };\r\n\r\n  const obtenerCampos = (data) => {\r\n    if (!data) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        clave_producto_sat: {\r\n          Name: \"\",\r\n          Value: \"\",\r\n        },\r\n      });\r\n      return null;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name: data.Name,\r\n        Value: data.Value,\r\n      },\r\n    });\r\n  };\r\n\r\n  const buscarCatalogo = async () => {\r\n    if (!value) {\r\n      setProductos([]);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await Facturama.Catalogs.ProductsOrServices(\r\n        value,\r\n        function (result) {\r\n          setProductos(result);\r\n          setLoading(false);\r\n        },\r\n        function (error) {\r\n          if (error && error.responseJSON) {\r\n            setError(error.responseJSON);\r\n          }\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } catch (error) {\r\n      if (error && error.responseJSON) {\r\n        setError(error.responseJSON.Message);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    buscarCatalogo();\r\n  }, [value]);\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography className={classes.titulos}>Clave de producto SAT</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"catalogos-bd-productos\"\r\n          size=\"small\"\r\n          options={codigos}\r\n          disabled={loading_delete}\r\n          getOptionLabel={(option) =>\r\n            option.Name ? `${option.Value} - ${option.Name}` : \"\"\r\n          }\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <Fragment>\r\n                    {loading_delete ? <CircularProgress size={20} /> : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n          renderOption={(option) => (\r\n            <Fragment>\r\n              {`${option.Value} - ${option.Name}`}\r\n              <div style={{ flexGrow: 1 }} />\r\n              <IconButton size=\"small\" onClick={() => eliminarCodigoBD(option)}>\r\n                <Close />\r\n              </IconButton>\r\n            </Fragment>\r\n          )}\r\n          onChange={(_, data) => obtenerCampos(data)}\r\n          getOptionSelected={(option, value) => option.Value === value.Value}\r\n          value={datos_generales.clave_producto_sat}\r\n        />\r\n        <Button color=\"primary\" onClick={handleClickOpen}>\r\n          <Search />\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"alert-dialog-clave-producto\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-clave-producto\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              Catalogo de productos y servicios SAT\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleCancel()}\r\n                size=\"large\"\r\n                disabled={loading_save}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        {loading_save ? (\r\n          <div className={classes.spin_container}>\r\n            <CircularProgress className={classes.spin} size={35} />\r\n          </div>\r\n        ) : null}\r\n        <div\r\n          style={\r\n            loading_save\r\n              ? {\r\n                  pointerEvents: \"none\",\r\n                  opacity: 0.4,\r\n                }\r\n              : null\r\n          }\r\n        >\r\n          <Box p={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              label=\"producto, servicio o giro de la empresa\"\r\n              fullWidth\r\n              size=\"small\"\r\n              onChange={(e) => {\r\n                setBusqueda(e.target.value);\r\n                setError(\"\");\r\n              }}\r\n              value={busqueda}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search color=\"disabled\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              error={error ? true : false}\r\n              helperText={error ? error : \"\"}\r\n            />\r\n            <Box my={1}>\r\n              <Alert severity=\"info\">\r\n                Para seleccionar un cliente haz un doble click!\r\n              </Alert>\r\n            </Box>\r\n          </Box>\r\n\r\n          <DialogContent style={{ height: \"50vh\" }}>\r\n            <Box my={3} className={classes.root}>\r\n              {loading ? (\r\n                <Box\r\n                  display=\"flex\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                  height=\"25vh\"\r\n                >\r\n                  <CircularProgress />\r\n                </Box>\r\n              ) : (\r\n                <List dense component=\"nav\" aria-label=\"main mailbox folders\">\r\n                  {productos.map((res, index) => (\r\n                    <SelectedListItem\r\n                      key={index}\r\n                      producto={res}\r\n                      busqueda={busqueda}\r\n                      handleOk={handleOk}\r\n                      setSelectedIndex={setSelectedIndex}\r\n                      selectedIndex={selectedIndex}\r\n                    />\r\n                  ))}\r\n                </List>\r\n              )}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => handleCancel()}>Cancelar</Button>\r\n          </DialogActions>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectedListItem = ({\r\n  producto,\r\n  busqueda,\r\n  handleOk,\r\n  selectedIndex,\r\n  setSelectedIndex,\r\n}) => {\r\n  const handleListItemClick = (click, data) => {\r\n    setSelectedIndex(data);\r\n    if (click === 2) {\r\n      handleOk(data);\r\n    }\r\n  };\r\n\r\n  const contiene = busqueda.includes(\"potacio\");\r\n  if (producto.Value === \"0\" && !contiene) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ListItem\r\n        button\r\n        selected={selectedIndex.Value === producto.Value}\r\n        onClick={(e) => handleListItemClick(e.detail, producto)}\r\n      >\r\n        <ListItemText primary={`${producto.Value} - ${producto.Name}`} />\r\n      </ListItem>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n \r\nexport const CREAR_CATEGORIA = gql`\r\n\tmutation crearCategoria($input: CrearCategoriasInput) {\r\n\t\tcrearCategoria(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCATEGORIA = gql`\r\n\tmutation crearSubcategoria($idCategoria: ID!, $input: CrearSubcategoriasInput) {\r\n\t\tcrearSubcategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CATEGORIA = gql`\r\n\tmutation actualizarCategoria($idCategoria: ID!, $input: ActualizarCategoriasInput) {\r\n\t\tactualizarCategoria(idCategoria: $idCategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCATEGORIA = gql`\r\n\tmutation actualizarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $input: ActualizarSubcategoriasInput) {\r\n\t\tactualizarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n\tquery obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tsubcategorias {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcategoria\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CATEGORIA = gql`\r\n\tmutation eliminarCategoria($idCategoria: ID!) {\r\n\t\teliminarCategoria(idCategoria: $idCategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ELIMINAR_SUBCATEGORIA = gql`\r\n\tmutation eliminarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!) {\r\n\t\teliminarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_DEPARTAMENTOS = gql`\r\n\tquery ObtenerDepartamentos($empresa: ID!, $sucursal: ID!){\r\n        obtenerDepartamentos(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_departamentos\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n            sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_DEPARTAMENTO = gql`\r\n\tmutation CrearDepartamentos($input: DepartamentosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearDepartamentos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEPARTAMENTO = gql`\r\n\tmutation ActualzarDepartamentos($input: DepartamentosInput, $id: ID!){\r\n        actualzarDepartamentos(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DEPARTAMENTO = gql`\r\n    mutation EliminarDepartamento($id: ID!){\r\n        eliminarDepartamento(id: $id){\r\n            message\r\n        }\r\n    }\r\n\t\r\n`;","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_MARCAS = gql`\r\n    query ObtenerMarcas($empresa: ID!, $sucursal: ID!){\r\n        obtenerMarcas(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            nombre_marca\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_MARCAS = gql`\r\n    mutation CrearMarca($input: MarcasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearMarcas(input: $input, empresa: $empresa, sucursal: $sucursal ){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_MARCAS = gql`\r\n    mutation actualzarMarcas($input: MarcasInput, $id: ID! ) {\r\n\t\tactualzarMarcas(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_MARCAS = gql`\r\n\tmutation eliminarMarca($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarMarca(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistrarNuevoSelect({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if(error.message){\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n      }else{\r\n        setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CategoriasProducto({ categorias, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, setSubcategorias } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        categoria: \"\",\r\n        id_categoria: \"\",\r\n      });\r\n      setSubcategorias([]);\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      categoria: value.categoria,\r\n      id_categoria: value._id,\r\n    });\r\n    setSubcategorias(value.subcategorias);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Categoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-categoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={categorias}\r\n          getOptionLabel={(option) => option.categoria}\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.categoria === value.categoria\r\n          }\r\n          value={datos_generales.categoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"categoria\"\r\n          name=\"categoria\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function SubcategoriasProducto({ refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, subcategorias, setSubcategorias } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        subcategoria: \"\",\r\n        id_subcategoria: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      subcategoria: value.subcategoria,\r\n      id_subcategoria: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Subcategoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-subcategoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={subcategorias}\r\n          getOptionLabel={(option) => option.subcategoria}\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.subcategoria === value.subcategoria\r\n          }\r\n          value={datos_generales.subcategoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"subcategoria\"\r\n          name=\"subcategoria\"\r\n          refetch={refetch}\r\n          subcategorias={subcategorias}\r\n          setSubcategorias={setSubcategorias}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function DepartamentosProducto({ departamentos, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        departamento: \"\",\r\n        id_departamento: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      departamento: value.nombre_departamentos,\r\n      id_departamento: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Departamento</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-departamento\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={departamentos}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_departamentos\r\n              ? option.nombre_departamentos\r\n              : option.departamento\r\n          }\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_departamentos === value.departamento\r\n          }\r\n          value={datos_generales.departamento ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"departamento\"\r\n          name=\"nombre_departamentos\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function MarcasProducto({ marcas, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        marca: \"\",\r\n        id_marca: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      marca: value.nombre_marca,\r\n      id_marca: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Marca</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-marca\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={marcas}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_marca ? option.nombre_marca : option.marca\r\n          }\r\n          renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_marca === value.marca\r\n          }\r\n          value={datos_generales.marca ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"marca\"\r\n          name=\"nombre_marca\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  Container,\r\n  FormHelperText,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  Grid,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add, Autorenew } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"./CatalogoProductosSAT\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport CategoriasProducto from \"./Categorias\";\r\nimport SubcategoriasProducto from \"./Subcategorias\";\r\nimport DepartamentosProducto from \"./Departamentos\";\r\nimport MarcasProducto from \"./Marcas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  obligatorio: {\r\n    color: \"red\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  without_arrows: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoGenerales({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    validacion,\r\n    precios,\r\n    setPrecios,\r\n    centro_de_costos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    setSubcategorias,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    categorias,\r\n    departamentos,\r\n    marcas,\r\n    centro_costos,\r\n    codigos,\r\n  } = obtenerConsultasProducto;\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"monedero_electronico\") {\r\n      if (!e.target.value) {\r\n        setPrecios({\r\n          ...precios,\r\n          [e.target.name]: \"\",\r\n        });\r\n        return;\r\n      }\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"monedero\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n        monedero: e.target.checked,\r\n      });\r\n      return;\r\n    }\r\n    /* setPrecios({\r\n\t\t\t...precios,\r\n\t\t\t[e.target.name]: e.target.checked\r\n\t\t}); */\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const obtenerIDs = (event, child) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.categoria) {\r\n      const { subcategorias } = child.props.categoria;\r\n      setSubcategorias(subcategorias);\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (campo) => {\r\n    if (!precios.monedero_electronico) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (update) {\r\n      const categoria = categorias.filter(\r\n        (res) => res._id === datos_generales.id_categoria\r\n      );\r\n      const costos = centro_costos.filter(\r\n        (res) => res._id === centro_de_costos.id_cuenta\r\n      );\r\n      if (categoria.length > 0) {\r\n        setSubcategorias(categoria[0].subcategorias);\r\n      }\r\n      if (costos.length > 0) {\r\n        setSubcostos(costos[0].subcuentas);\r\n      }\r\n    }\r\n  }, [update]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"lg\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              fullWidth\r\n              className={classes.without_arrows}\r\n            >\r\n              <Typography className={classes.titulos}>\r\n                Código de barras\r\n              </Typography>\r\n              <OutlinedInput\r\n                disabled={update && datos_generales.codigo_barras}\r\n                style={{ padding: 0 }}\r\n                id=\"form-producto-codigo-barras\"\r\n                name=\"codigo_barras\"\r\n                value={\r\n                  datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"\"\r\n                }\r\n                type=\"number\"\r\n                onChange={obtenerCampos}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      disabled={update && datos_generales.codigo_barras}\r\n                      onClick={() => GenCodigoBarras()}\r\n                      /* edge=\"end\" */\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Autorenew />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Clave alterna\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.clave_alterna}\r\n              name=\"clave_alterna\"\r\n              id=\"form-producto-clave-alterna\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.clave_alterna\r\n                  ? datos_generales.clave_alterna\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Tipo de producto\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.tipo_producto}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_producto\"\r\n                value={\r\n                  datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCampos}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n                <MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n                <MenuItem value=\"OTROS\">Otros</MenuItem>\r\n              </Select>\r\n              <FormHelperText>{validacion.message}</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={5} xs={12}>\r\n            <CatalogosProductosSAT codigos={codigos} refetch={refetch} />\r\n          </Grid>\r\n\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre comercial\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_comercial}\r\n              name=\"nombre_comercial\"\r\n              id=\"form-producto-nombre-comercial\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_comercial\r\n                  ? datos_generales.nombre_comercial\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre genérico\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_generico}\r\n              name=\"nombre_generico\"\r\n              id=\"form-producto-nombre-generico\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_generico\r\n                  ? datos_generales.nombre_generico\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>Descripción</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descripcion\"\r\n              id=\"form-producto-descripcion\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.descripcion ? datos_generales.descripcion : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n\r\n          <Grid item md={6} xs={12}>\r\n            <CategoriasProducto refetch={refetch} categorias={categorias} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <SubcategoriasProducto refetch={refetch} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <DepartamentosProducto refetch={refetch} departamentos={departamentos} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <MarcasProducto refetch={refetch} marcas={marcas} />\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" mt={4}>\r\n          <Grid container>\r\n            <Grid item md={3} xs={12}>\r\n              {!update ? (\r\n                <Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Granel</b>\r\n                    </Typography>\r\n                    <Divider />\r\n                  </Box>\r\n                  <div className={classes.formInput}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={precios.granel ? precios.granel : false}\r\n                          onChange={obtenerChecks}\r\n                          name=\"granel\"\r\n                        />\r\n                      }\r\n                      label=\"Vender a granel\"\r\n                    />\r\n                  </div>\r\n                </Box>\r\n              ) : null}\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Farmacia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={\r\n                        datos_generales.receta_farmacia\r\n                          ? datos_generales.receta_farmacia\r\n                          : false\r\n                      }\r\n                      onChange={checkFarmacia}\r\n                      name=\"receta_farmacia\"\r\n                    />\r\n                  }\r\n                  label=\"Necesita receta\"\r\n                  name=\"receta_farmacia\"\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Monedero eléctronico</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box>\r\n                <Box className={classes.formInput}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={precios.monedero}\r\n                        onChange={obtenerChecks}\r\n                        name=\"monedero\"\r\n                      />\r\n                    }\r\n                    label=\"Monedero electrónico\"\r\n                  />\r\n                  <TextField\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    label=\"Valor por punto\"\r\n                    name=\"monedero_electronico\"\r\n                    id=\"form-producto-monedero_electronico\"\r\n                    variant=\"outlined\"\r\n                    value={precios.monedero_electronico}\r\n                    onChange={obtenerCampos}\r\n                    disabled={precios.monedero ? false : true}\r\n                    onBlur={() => verificarCampoVacio(\"monedero_electronico\")}\r\n                    error={precios.monedero_electronico === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria({ variables });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, DialogTitle } from '@material-ui/core';\r\nimport { Box, Typography, Button, Divider, Grid } from '@material-ui/core';\r\nimport { AddPhotoAlternate, Visibility, Delete } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nimport PhotoSizeSelectActualOutlinedIcon from '@material-ui/icons/PhotoSizeSelectActualOutlined';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\timagen: {\r\n\t\tmaxHeight: \"100%\",\r\n\t\tmaxWidth: \"100%\"\r\n\t}\r\n}));\r\n\r\nexport default function CargarImagenesProducto() {\r\n\tconst classes = useStyles();\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview } = useContext(RegProductoContext);\r\n\r\n\tconst cargarImagen = (e) => {\r\n\t\tconst { files } = e.target;\r\n\t\tif (e.target.files.length < 1) return\r\n\t\tsetImagenes([\r\n\t\t\t...imagenes,\r\n\t\t\tfiles[0]\r\n\t\t]);\r\n\t\tsetOnPreview({image: URL.createObjectURL(files[0])})\r\n\t};\r\n\r\n\tconst render_imagenes = imagenes.map((res, index) => <RenderImagenes key={index} index={index} imagen={res} />);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\t\t\t\t/* multiple */\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={cargarImagen}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\" component=\"span\" startIcon={<AddPhotoAlternate />}>\r\n\t\t\t\t\t\t\t\tCargar imagen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{render_imagenes}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box display=\"flex\" minHeight={300}>\r\n\t\t\t\t\t\t<Box mx={1}>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\" height=\"50vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t{!onPreview.image ? (\r\n\t\t\t\t\t\t\t\t<PhotoSizeSelectActualOutlinedIcon style={{ fontSize: 150 }} />\r\n\t\t\t\t\t\t\t) : (<img alt=\"img-onPreview\" src={onPreview.image} className={classes.imagen} />)}\r\n\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst RenderImagenes = ({ imagen, index }) => {\r\n\tconst classes = useStyles();\r\n\tconst preview = imagen.key_imagen ? imagen.url_imagen : URL.createObjectURL(imagen)\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview, imagenes_eliminadas, setImagenesEliminadas } = useContext(RegProductoContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarImagen = () => {\r\n\t\t/* agregar al arrya de imagenes eliminadas */\r\n\t\tif(imagen.key_imagen){\r\n\t\t\tsetImagenesEliminadas([\r\n\t\t\t\t...imagenes_eliminadas, imagen\r\n\t\t\t])\r\n\t\t}\r\n\t\t/* quitar imagenes del array */\r\n\t\tif (onPreview.index === index) {\r\n\t\t\tsetOnPreview({ index: '', image: '' })\r\n\t\t}\r\n\t\tconst array = [...imagenes];\r\n\t\tarray.splice(index, 1);\r\n\t\tsetImagenes([\r\n\t\t\t...array,\r\n\t\t]);\r\n\t\thandleModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box my={2} mr={5}>\r\n\t\t\t<Box className={classes.formInputFlex}>\r\n\t\t\t\t<Box height={70} width={70}>\r\n\t\t\t\t\t<img alt=\"producto-img-prev\" src={preview} width=\"100%\" />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box width=\"90%\">\r\n\t\t\t\t\t<Typography noWrap>\r\n\t\t\t\t\t\t{imagen.key_imagen ? imagen.key_imagen : imagen.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{imagen.key_imagen ? null : (<Typography variant=\"caption\">{imagen.size} bits</Typography>)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<Button size=\"small\" startIcon={<Visibility />} onClick={() => setOnPreview({ index, image: preview })}>\r\n\t\t\t\t\t\t\tprevisualizar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Box mx={1} />\r\n\t\t\t\t\t\t<ModalDelete handleModal={handleModal} open={open} eliminarImagen={eliminarImagen} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst ModalDelete = ({ handleModal, open, eliminarImagen }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button size=\"small\" color=\"secondary\" startIcon={<Delete />} onClick={() => handleModal()}>\r\n\t\t\t\teliminar\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => eliminarImagen()}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CrearAlmacenContext = createContext();\r\n\r\nexport const AlmacenProvider = ({ children }) => {\r\n\tconst [ datosAlmacen, setDatosAlmacen ] = useState({\r\n        nombre_almacen: '',\r\n        id_usuario_encargado: '',\r\n        direccion: {\r\n            calle: '',\r\n            no_ext: '',\r\n            no_int: '',\r\n            codigo_postal: '',\r\n            colonia: '',\r\n            municipio: '',\r\n            localidad: '',\r\n            estado: '',\r\n            pais: ''\r\n        }\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CrearAlmacenContext.Provider value={\r\n            { \r\n                datosAlmacen, \r\n                setDatosAlmacen,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CrearAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRO_ALMACEN = gql`\r\n  mutation CrearAlmacen($input: CrearAlmacen, $id: ID!, $empresa: ID!) {\r\n    crearAlmacen(input: $input, id: $id, empresa: $empresa) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_ALMACENES = gql`\r\n  query obtenerAlmacenes($id: ID!) {\r\n    obtenerAlmacenes(id: $id) {\r\n      _id\r\n      nombre_almacen\r\n      id_usuario_encargado {\r\n        _id\r\n        nombre\r\n      }\r\n      id_sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_ALMACEN = gql`\r\n  mutation ActualizarAlmacen($input: EditarAlmacen, $id: ID!) {\r\n    actualizarAlmacen(input: $input, id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_ALMACEN = gql`\r\n  query obtenerProductosAlmacenes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n  ) {\r\n    obtenerProductosAlmacenes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precios{\r\n        inventario{\r\n          inventario_maximo\r\n          inventario_minimo\r\n          unidad_de_inventario\r\n          codigo_unidad\r\n        }\r\n      }\r\n  \r\n      existencia_almacenes {\r\n        _id {\r\n          producto\r\n          almacen {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n        }\r\n        unidad_inventario\r\n        cantidad_existente\r\n      }\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n  query obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      categoria\r\n      subcategorias {\r\n        _id\r\n        subcategoria\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REALIZAR_TRASPASO = gql`\r\n  mutation CrearTraspaso(\r\n    $input: CrearTraspasoInput\r\n    $usuario: ID!\r\n    $empresa: ID!\r\n  ) {\r\n    crearTraspaso(input: $input, usuario: $usuario, empresa: $empresa) {\r\n      message\r\n      resp\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_EMPRESA = gql`\r\n  query obtenerProductosPorEmpresa($empresa: ID!, $filtro: String) {\r\n    obtenerProductosPorEmpresa(empresa: $empresa, filtro : $filtro) {\r\n      _id\r\n      datos_generales {\r\n        codigo_barras\r\n        clave_alterna\r\n        tipo_producto\r\n        nombre_comercial\r\n        nombre_generico\r\n        descripcion\r\n        id_categoria\r\n        categoria\r\n        subcategoria\r\n        id_subcategoria\r\n        id_departamento\r\n        departamento\r\n        id_marca\r\n        marca\r\n        clave_producto_sat {\r\n          Name\r\n          Value\r\n        }\r\n        receta_farmacia\r\n      }\r\n      precio_plazos {\r\n        precio_cajas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_piezas {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n        precio_costales {\r\n          plazo\r\n          unidad\r\n          precio\r\n        }\r\n      }\r\n      precios {\r\n        ieps\r\n        ieps_activo\r\n        iva\r\n        iva_activo\r\n        monedero\r\n        monedero_electronico\r\n        precio_de_compra {\r\n          ieps\r\n          iva\r\n          precio_con_impuesto\r\n          precio_sin_impuesto\r\n        }\r\n        precios_producto {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          unidad_mayoreo\r\n          utilidad\r\n          ieps_precio\r\n          iva_precio\r\n        }\r\n        unidad_de_compra {\r\n          cantidad\r\n          precio_unitario_con_impuesto\r\n          precio_unitario_sin_impuesto\r\n          unidad\r\n        }\r\n        inventario {\r\n          inventario_minimo\r\n          inventario_maximo\r\n          unidad_de_inventario\r\n        }\r\n        granel\r\n      }\r\n      sucursal\r\n      usuario\r\n      empresa\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TRASPASOS = gql`\r\n  query obtenerTraspasos( $input: ConsultaTraspasosInput) {\r\n    obtenerTraspasos(input: $input) {\r\n      _id  \r\n      cantidad\r\n      \r\n      id_traspaso{\r\n        concepto_traspaso{\r\n          nombre_concepto\r\n        }\r\n        fecha_registro\r\n      }\r\n      producto{\r\n        datos_generales{\r\n          nombre_comercial\r\n        }\r\n      }\r\n      almacen_origen{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      almacen_destino{\r\n        _id\r\n        nombre_almacen\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    TextField,\r\n    Container,\r\n    Typography,\r\n    Box,\r\n    IconButton,\r\n    DialogTitle,\r\n    Divider,\r\n    FormControl,\r\n    Select,\r\n    MenuItem\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { REGISTRO_ALMACEN, ACTUALIZAR_ALMACEN } from '../../../../gql/Almacenes/Almacen';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport { Edit } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport Add from '@material-ui/icons/Add';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formInputFlex: {\r\n        display: 'flex',\r\n        '& > *': {\r\n            margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n        },\r\n        '& span': {\r\n            color: 'red'\r\n        }\r\n    },\r\n    formInput: {\r\n        margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n    }\r\n}));\r\n\r\nexport default function ContainerRegistroAlmacen({ accion, datos, refetch }) {\r\n\r\n    /* const sucursal = {\r\n        _id: \"60c8e180340d5d223432a916\",\r\n        nombre_sucursal: \"Sucursal 1 editada\"\r\n    }; */\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [CrearAlmacen] = useMutation(REGISTRO_ALMACEN);\r\n    const [ActualizarAlmacen] = useMutation(ACTUALIZAR_ALMACEN);\r\n    const { data } = useQuery(OBTENER_USUARIOS, {\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        }\r\n    });\r\n    let obtenerUsuarios = [];\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: '', status: '', open: false });\r\n    // const empresa = '609eb3b4b995884dc49bbffa';\r\n    const [open, setOpen] = useState(false);\r\n    const { datosAlmacen, setDatosAlmacen, error, setError, update, setUpdate } = useContext(CrearAlmacenContext);\r\n    const { almacen_inicial, setAlmacenInicial } = useContext(RegProductoContext);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    // const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const limpiarCampos = useCallback(\r\n        () => {\r\n            setDatosAlmacen({\r\n                nombre_almacen: '',\r\n                id_usuario_encargado: '',\r\n                direccion: {\r\n                    calle: '',\r\n                    no_ext: '',\r\n                    no_int: '',\r\n                    codigo_postal: '',\r\n                    colonia: '',\r\n                    municipio: '',\r\n                    localidad: '',\r\n                    estado: '',\r\n                    pais: ''\r\n                }\r\n            });\r\n        },\r\n        [setDatosAlmacen]\r\n    );\r\n    const toggleModal = () => {\r\n        setOpen(true);\r\n        if (datos) {\r\n            let input = {};\r\n            if (datos.id_usuario_encargado) {\r\n                const { id_usuario_encargado, ...datosNew } = datos;\r\n                input = datosNew;\r\n                input.id_usuario_encargado = id_usuario_encargado._id;\r\n            } else {\r\n                input = datos;\r\n            }\r\n            setDatosAlmacen(input);\r\n        }\r\n    };\r\n    const onCloseModal = () => {\r\n        setOpen(false);\r\n        limpiarCampos();\r\n    };\r\n\r\n    const obtenerCampos = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const obtenerCamposDireccion = (e) => {\r\n        setDatosAlmacen({\r\n            ...datosAlmacen,\r\n            direccion: { ...datosAlmacen.direccion, [e.target.name]: e.target.value }\r\n        });\r\n    };\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if (!datosAlmacen.nombre_almacen) {\r\n                setError(true);\r\n                return;\r\n            } else {\r\n                if (accion === \"registrar\") {\r\n                    let input = {};\r\n                    let almacen_creado;\r\n                    if (datosAlmacen.id_usuario_encargado === \"\") {\r\n                        const { id_usuario_encargado, ...input } = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    } else {\r\n                        input = datosAlmacen;\r\n                        almacen_creado = await CrearAlmacen({\r\n                            variables: {\r\n                                input,\r\n                                id: sesion.sucursal._id,\r\n                                empresa: sesion.empresa._id\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    const id_almacen = almacen_creado.data.crearAlmacen._id;\r\n                    if (refetch) {\r\n                        setAlmacenInicial({\r\n                            ...almacen_inicial,\r\n                            id_almacen,\r\n                            almacen: datosAlmacen.nombre_almacen,\r\n                        })\r\n                        refetch();\r\n                    }\r\n                } else {\r\n                    const { id_sucursal, _id, ...input } = datosAlmacen;\r\n                    await ActualizarAlmacen({\r\n                        variables: {\r\n                            input,\r\n                            id: datosAlmacen._id\r\n                        }\r\n                    })\r\n                }\r\n                setUpdate(!update);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n                setLoading(false);\r\n                onCloseModal();\r\n            }\r\n        } catch (error) {\r\n            setAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    if (data) {\r\n        obtenerUsuarios = data.obtenerUsuarios;\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            {accion === 'registrar' ? refetch ? (\r\n                <IconButton color=\"primary\" onClick={toggleModal}>\r\n                    <Add />\r\n                </IconButton>\r\n            ) : (\r\n                <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={toggleModal}>\r\n                    AGREGAR\r\n                </Button>\r\n            ) : (\r\n                <IconButton onClick={toggleModal}>\r\n                    <Edit />\r\n                </IconButton>\r\n            )}\r\n            <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"form-dialog-title\">Registro almacen</DialogTitle>\r\n                <Container maxWidth=\"md\">\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography><span>* </span>Nombre Almacen</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                error={error}\r\n                                name=\"nombre_almacen\"\r\n                                id=\"form-producto-codigo-barras\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.nombre_almacen}\r\n                                /* helperText=\"Incorrect entry.\" */\r\n                                onChange={obtenerCampos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Encargado de almacen</Typography>\r\n                            <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                                <Select\r\n                                    labelId=\"demo-simple-select-label\"\r\n                                    id=\"demo-simple-select\"\r\n                                    name=\"id_usuario_encargado\"\r\n                                    value={datosAlmacen.id_usuario_encargado ? datosAlmacen.id_usuario_encargado : \"\"}\r\n                                    onChange={obtenerCampos}\r\n                                >\r\n                                    {\r\n                                        obtenerUsuarios?.map((user, index) => (\r\n                                            <MenuItem key={index} value={user._id}>{user.nombre}</MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Sucursal</Typography>\r\n                            <Typography style={{ marginTop: \"7px\", fontWeight: \"bold\" }}>{sesion.sucursal.nombre_sucursal}</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <Box mt={2}>\r\n                        <Typography>\r\n                            <b>Domicilio</b>\r\n                        </Typography>\r\n                        <Divider />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Calle</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.calle}\r\n                                name=\"calle\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.calle}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>No. exterior</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_ext}\r\n                                name=\"no_ext\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_ext}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>No. interior</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.no_int}\r\n                                name=\"no_int\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.no_int}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Codigo Postal</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                type=\"number\"\r\n                                // error={error && !datosAlmacen.direccion.codigo_postal}\r\n                                name=\"codigo_postal\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.codigo_postal}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Colonia</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.colonia}\r\n                                name=\"colonia\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.colonia}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Municipio</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.municipio}\r\n                                name=\"municipio\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.municipio}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Localidad</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.localidad}\r\n                                name=\"localidad\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.localidad}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Estado</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                // error={error && !datosAlmacen.direccion.estado}\r\n                                name=\"estado\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.estado}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Pais</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                //  error={error && !datosAlmacen.direccion.pais}\r\n                                name=\"pais\"\r\n                                variant=\"outlined\"\r\n                                value={datosAlmacen.direccion.pais}\r\n                                onChange={obtenerCamposDireccion}\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={saveData} >\r\n                            Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Container>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\n/* import \"date-fns\";\r\nimport local from \"date-fns/locale/es\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\"; */\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport ContainerRegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function RegistroAlmacenInicial({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    selectedDate,\r\n    setSelectedDate,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const { almacenes } = obtenerConsultasProducto;\r\n\r\n  /*ARMAR OBJETO DE INVENTARIO  */\r\n  const obtenerInventario = (e, child) => {\r\n    if (!e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: { ...precios.inventario, [e.target.name]: \"\" },\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad_de_inventario\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          [e.target.name]: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    setPrecios({\r\n      ...precios,\r\n      inventario: {\r\n        ...precios.inventario,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      },\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenInicial = (e) => {\r\n    if (!e.target.value) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: \"\",\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"almacen\") {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n      return;\r\n    }\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [e.target.name]: parseFloat(e.target.value),\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (date) => {\r\n    setSelectedDate(date);\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      fecha_de_expiracion: date,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={2}>\r\n        <Typography>\r\n          <b>Inventario</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario mínimo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_minimo\"\r\n              id=\"form-producto-inventario_minimo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_minimo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_minimo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario máximo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_maximo\"\r\n              id=\"form-producto-inventario_maximo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_maximo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_maximo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Unidad de inventario\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"unidad_de_inventario\"\r\n              >\r\n                {precios.granel ? (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes_granel.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                ) : (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      {update ? null : datos_generales.tipo_producto === \"OTROS\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography>\r\n              <b>Almacen incial</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2} style={{ alignItems: \"center\" }}>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>\r\n                  Cantidad inicial en <b>{precios.unidad_de_compra.unidad}</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    name=\"cantidad\"\r\n                    variant=\"outlined\"\r\n                    value={almacen_inicial.cantidad}\r\n                    onChange={obtenerAlmacenInicial}\r\n                    onFocus={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (parseFloat(value) === 0) {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: \"\",\r\n                        });\r\n                      }\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (value === \"\") {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: 0,\r\n                        });\r\n                      }\r\n                    }}\r\n                    error={almacen_inicial.cantidad === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>Almacen</Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      almacen_inicial.cantidad > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <AlmacenProvider>\r\n                    <ContainerRegistroAlmacen\r\n                      accion=\"registrar\"\r\n                      refetch={refetch}\r\n                    />\r\n                  </AlmacenProvider>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  <Box width=\"100%\">\r\n              <Typography>Fecha de expiración</Typography>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={local}>\r\n                <Grid container justify=\"space-around\">\r\n                  <KeyboardDatePicker\r\n                    margin=\"dense\"\r\n                    id=\"date-picker-dialog\"\r\n                    placeholder=\"ex: DD/MM/AAAA\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    KeyboardButtonProps={{\r\n                      \"aria-label\": \"change date\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n            </Box> */}\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","export function validaciones(generales, precios, almacen, presentaciones) {\r\n    /* si no hay generales y datos 2 */\r\n    /* console.log(almacen); */\r\n    if (\r\n        !generales.clave_alterna ||\r\n        !generales.tipo_producto ||\r\n        !generales.nombre_generico ||\r\n        !generales.nombre_comercial\r\n    ) {\r\n        if (!precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad) {\r\n            return { error: true, message: 'Campo obligatorio', vista1: true, vista2: true };\r\n        }\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if (\r\n        /* si solo hay generales */\r\n        !precios.precio_de_compra.precio_con_impuesto || !precios.precio_de_compra.precio_sin_impuesto || !precios.unidad_de_compra.cantidad\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista2: true };\r\n    } else if (\r\n        /* si solo hay precios */\r\n        !generales.clave_alterna || !generales.tipo_producto || !generales.nombre_generico || !generales.nombre_comercial\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if(\r\n        /* si hay cantidad almacen pero no hay almacen seleccionado */\r\n        almacen.cantidad > 0 && !almacen.almacen && generales.tipo_producto === \"OTROS\"\r\n    ) {\r\n        console.log(\"si hay cantidad almacen pero no hay almacen seleccionado\");\r\n        return { error: true, message: 'Campo obligatorio', vista3: true };\r\n    }/*  else if(\r\n        //si no hay almacen seleccionado\r\n        presentaciones.length > 0 && !almacen.almacen && !almacen_existente\r\n    ){\r\n        console.log(\"no hay present\");\r\n        return { error: true, message: 'Campo obligatorio', vista7: true };\r\n    } */ else {\r\n        /* si hay todos los datos */\r\n        return { error: false, message: '' };\r\n    }\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CUENTA = gql`\r\n\tmutation crearCuenta($input: CrearCuentasInput) {\r\n\t\tcrearCuenta(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCUENTA= gql`\r\n\tmutation crearSubcuenta($idCuenta: ID!, $input: CrearSubcuentasInput) {\r\n\t\tcrearSubcuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CUENTA= gql`\r\n\tmutation actualizarCuenta($idCuenta: ID!, $input: ActualizarCuentasInput) {\r\n\t\tactualizarCuenta(idCuenta: $idCuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCUENTA = gql`\r\n\tmutation actualizarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $input: ActualizarSubcuentasInput) {\r\n\t\tactualizarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CUENTAS = gql`\r\n\tquery obtenerCuentas($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCuentas(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tsubcuentas {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcuenta\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_CUENTA = gql`\r\n\tmutation eliminarCuenta($id: ID!) {\r\n\t\teliminarCuenta(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\nexport const ELIMINAR_SUBCUENTA = gql`\r\n\tmutation eliminarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!) {\r\n\t\teliminarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; ","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  Grid,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport {\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n} from \"../../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CentroCostos({ obtenerConsultasProducto, refetch }) {\r\n  const classes = useStyles();\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const { centro_costos } = obtenerConsultasProducto;\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setCentroDeCostos({\r\n      ...centro_de_costos,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.costos) {\r\n      const { subcuentas } = child.props.costos;\r\n      setSubcostos(subcuentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Typography>\r\n          <b>Centro de costos</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Cuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"cuenta\"\r\n              >\r\n                <Select\r\n                  name=\"cuenta\"\r\n                  value={centro_de_costos.cuenta ? centro_de_costos.cuenta : \"\"}\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {centro_costos ? (\r\n                    centro_costos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_cuenta\"\r\n                          key={res._id}\r\n                          value={res.cuenta}\r\n                          id={res._id}\r\n                          costos={res}\r\n                        >\r\n                          {res.cuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"cuenta\"\r\n                name=\"cuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Subcuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"subcuenta\"\r\n              >\r\n                <Select\r\n                  name=\"subcuenta\"\r\n                  value={\r\n                    centro_de_costos.subcuenta ? centro_de_costos.subcuenta : \"\"\r\n                  }\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {subcostos ? (\r\n                    subcostos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_subcuenta\"\r\n                          key={res._id}\r\n                          value={res.subcuenta}\r\n                          id={res._id}\r\n                        >\r\n                          {res.subcuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"subcuenta\"\r\n                name=\"subcuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({ tipo, name, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  costos Mutation */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  /*  subcostos Mutation */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n    };\r\n    if (tipo === \"subcuenta\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCuenta: centro_de_costos.id_cuenta,\r\n      };\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"cuenta\":\r\n          const cuenta_creada = await crearCuenta({ variables });\r\n          refetch();\r\n          const id_cuenta = cuenta_creada.data.crearCuenta._id;\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            cuenta: value,\r\n            id_cuenta,\r\n          });\r\n          break;\r\n        case \"subcuenta\":\r\n          const subcuenta_creada = await crearSubcuenta({ variables });\r\n          refetch();\r\n          const id_subcuenta = subcuenta_creada.data.crearSubcuenta._id;\r\n          setSubcostos([...subcostos, { _id: id_subcuenta, subcuenta: value }]);\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            subcuenta: value,\r\n            id_subcuenta,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcuenta\" && !centro_de_costos.id_cuenta}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  FormControl,\r\n  Grid,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport TablaPreciosPlazos from \"./tabla_precios\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& > .precios-box\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(3)}px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PrecioPlazos() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    unidadesVenta,\r\n    unidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n  const [plazo, setPlazo] = useState({\r\n    plazo: \"1\",\r\n    unidad: precios.granel ? \"Costal\" : \"Pz\",\r\n    codigo_unidad: precios.granel ? \"KGM\" : \"H87\",\r\n    precio: 0,\r\n  });\r\n\r\n  const obtenerPlazos = (e, child) => {\r\n    if (e.target.name === \"precio\") {\r\n      setPlazo({\r\n        ...plazo,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPlazo({\r\n        ...plazo,\r\n        unidad,\r\n        codigo_unidad,\r\n      });\r\n      return;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const guardarPlazo = () => {\r\n    if (!plazo.plazo || !plazo.precio || !plazo.unidad) return;\r\n    switch (plazo.unidad) {\r\n      case \"Pz\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_piezas: [...preciosPlazos.precio_piezas, plazo],\r\n        });\r\n        break;\r\n      case \"Caja\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_cajas: [...preciosPlazos.precio_cajas, plazo],\r\n        });\r\n        break;\r\n      case \"Costal\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_costales: [...preciosPlazos.precio_costales, plazo],\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      precio: 0,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex}>\r\n        <Typography className=\"precios-box\">\r\n          Precio venta de <b>{unidadVentaXDefecto.unidad}</b> con\r\n          impuestos(NETO): <b>${unidadVentaXDefecto.precio}</b>\r\n        </Typography>\r\n        {unidadesVenta.map((unidades, index) => {\r\n          if (!unidades.default)\r\n            return (\r\n              <Typography key={index} className=\"precios-box\">\r\n                Precio venta de <b>{unidades.unidad}</b> con impuestos(NETO):{\" \"}\r\n                <b>${unidades.precio}</b>\r\n              </Typography>\r\n            );\r\n          return null;\r\n        })}\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box>\r\n          <Typography>Plazo</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"plazo\">\r\n              <Select name=\"plazo\" value={plazo.plazo} onChange={obtenerPlazos}>\r\n                <MenuItem value=\"1\">1 Mes</MenuItem>\r\n                <MenuItem value=\"2\">2 Meses</MenuItem>\r\n                <MenuItem value=\"6\">6 Meses</MenuItem>\r\n                <MenuItem value=\"8\">8 Meses</MenuItem>\r\n                <MenuItem value=\"12\">12 Meses</MenuItem>\r\n                <MenuItem value=\"18\">18 Meses</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes_granel.map((res, index) =>\r\n                    res.unidad === \"Costal\" ? (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ) : null\r\n                  )}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Precio</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            value={plazo.precio}\r\n            variant=\"outlined\"\r\n            onChange={obtenerPlazos}\r\n          />\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            onClick={() => guardarPlazo()}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <Grid container spacing={2} justify=\"center\">\r\n          {precios.granel ? (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Costal\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_costales} />\r\n              </Grid>\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Piezas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_piezas} />\r\n              </Grid>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Cajas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_cajas} />\r\n              </Grid>\r\n            </Fragment>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const validateJsonEdit = async (data, tipo) => {\r\n    if (tipo === \"datos_generales\") {\r\n      let object_date = {\r\n        clave_alterna: data.clave_alterna,\r\n        tipo_producto: data.tipo_producto,\r\n        nombre_comercial: data.nombre_comercial,\r\n        nombre_generico: data.nombre_generico,\r\n        receta_farmacia: data.receta_farmacia,\r\n      };\r\n      if (data.codigo_barras !== null && data.codigo_barras !== \"\")\r\n        object_date = { ...object_date, codigo_barras: data.codigo_barras };\r\n      if (data.descripcion !== null && data.descripcion !== \"\")\r\n        object_date = { ...object_date, descripcion: data.descripcion };\r\n      if (data.id_categoria !== null && data.id_categoria !== \"\")\r\n        object_date = { ...object_date, id_categoria: data.id_categoria };\r\n      if (data.categoria !== null && data.categoria !== \"\")\r\n        object_date = { ...object_date, categoria: data.categoria };\r\n      if (data.subcategoria !== null && data.subcategoria !== \"\")\r\n        object_date = { ...object_date, subcategoria: data.subcategoria };\r\n      if (data.id_subcategoria !== null && data.id_subcategoria !== \"\")\r\n        object_date = { ...object_date, id_subcategoria: data.id_subcategoria };\r\n      if (data.id_departamento !== null && data.id_departamento !== \"\")\r\n        object_date = { ...object_date, id_departamento: data.id_departamento };\r\n      if (data.departamento !== null && data.departamento !== \"\")\r\n        object_date = { ...object_date, departamento: data.departamento };\r\n      if (data.id_marca !== null && data.id_marca !== \"\")\r\n        object_date = { ...object_date, id_marca: data.id_marca };\r\n      if (data.marca !== null && data.marca !== \"\")\r\n        object_date = { ...object_date, marca: data.marca };\r\n      if (data.clave_producto_sat.Name !== null)\r\n        object_date = {\r\n          ...object_date,\r\n          clave_producto_sat: data.clave_producto_sat,\r\n        };\r\n      return object_date;\r\n    } else if (tipo === \"unidades_de_venta\") {\r\n      let end_array = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        let object = {\r\n          _id: data[i]._id,\r\n          cantidad: data[i].cantidad,\r\n          id_producto: data[i].id_producto,\r\n          precio: data[i].precio,\r\n          unidad_principal: data[i].unidad_principal,\r\n          unidad: data[i].unidad,\r\n          codigo_unidad: data[i].codigo_unidad,\r\n          precio_unidad: data[i].precio_unidad\r\n        };\r\n        if (data[i].codigo_barras !== null && data[i].codigo_barras !== \"\")\r\n          object = { ...object, codigo_barras: data[i].codigo_barras };\r\n        if (data[i].default !== null && data[i].default !== \"\")\r\n          object = { ...object, default: data[i].default };\r\n        if (data[i].descuento_activo !== null && data[i].descuento_activo !== \"\")\r\n          object = { ...object, descuento_activo: data[i].descuento_activo, descuento: data[i].descuento };\r\n          \r\n          end_array.push(object);\r\n      }\r\n      return end_array;\r\n    }\r\n  };","import React, { useState, Fragment, useContext, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  Badge,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport RegistroInfoGenerales from \"./DatosGenerales/registrarInfoGeneral\";\r\nimport RegistroInfoAdidional from \"../Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport CargarImagenesProducto from \"./Imagenes/cargarImagenesProducto\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistroAlmacenInicial from \"./Inventario&Almacen/AlmacenInicial\";\r\nimport ColoresTallas from \"./TallasColores/TallasColores\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO,\r\n  OBTENER_CONSULTAS,\r\n  ACTUALIZAR_PRODUCTO,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { validaciones } from \"./validaciones\";\r\nimport CentroCostos from \"./CentroCostos/CentroCostos\";\r\nimport PrecioPlazos from \"./PrecioPlazos/PrecioPlazos\";\r\n\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaSecundaria,\r\n  initial_state_unidadesVenta,\r\n} from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  Edit,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n} from \"@material-ui/icons\";\r\nimport { validateJsonEdit } from \"./validateDatos\";\r\n/* import { cleanTypenames } from \"../../../../config/reuserFunctions\"; */\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root_app: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    maxHeight: \"80vh\",\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\nexport default function CrearProducto({\r\n  accion,\r\n  datos,\r\n  productosRefetch,\r\n  fromCompra,\r\n  getProductos,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    setUpdate,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n    almacen_existente,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const tipo = datos_generales.tipo_producto;\r\n\r\n  /* Mutations */\r\n  const [crearProducto] = useMutation(CREAR_PRODUCTO);\r\n  const [actualizarProducto] = useMutation(ACTUALIZAR_PRODUCTO);\r\n\r\n  const toggleModal = (producto) => {\r\n    setOpen(!open);\r\n    setUpdate(accion);\r\n    if (producto && accion) {\r\n      setInitialStates(producto);\r\n    } else {\r\n      resetInitialStates();\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  /* ###### GUARDAR LA INFO EN LA BD ###### */\r\n\r\n  const saveData = async () => {\r\n    const validate = validaciones(\r\n      datos_generales,\r\n      precios,\r\n      almacen_inicial,\r\n      presentaciones,\r\n      almacen_existente\r\n    );\r\n\r\n    if (validate.error) {\r\n      setValidacion(validate);\r\n      return;\r\n    }\r\n    setValidacion(validate);\r\n    if (presentaciones.length > 0) {\r\n      const pres = presentaciones.filter(\r\n        (res) => res.color._id && res.medida._id\r\n      );\r\n\r\n      if (pres.length !== presentaciones.length) {\r\n        setValidacion({\r\n          error: true,\r\n          message: \"Faltan medidas o colores a tus presentaciones\",\r\n          vista7: true,\r\n        });\r\n        setAlert({\r\n          message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [{...unidadVentaXDefecto}, {...unidadVentaSecundaria}];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    /* console.log(copy_unidadesVenta); */\r\n\r\n    precios.precios_producto = preciosP;\r\n\r\n    let imagenes_without_aws = imagenes;\r\n    if (accion) {\r\n      imagenes_without_aws = [...imagenes].filter((res) => !res.key_imagen);\r\n    }\r\n\r\n    let input = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      imagenes: imagenes_without_aws,\r\n      imagenes_eliminadas,\r\n      almacen_inicial,\r\n      centro_de_costos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      presentaciones_eliminadas,\r\n      precio_plazos: preciosPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    /* const clean_data = cleanTypenames(input); */\r\n    /* console.log(input); */\r\n\r\n    setLoading(true);\r\n     try {\r\n      if (accion) {\r\n        const result = await actualizarProducto({\r\n          variables: {\r\n            input,\r\n            id: datos._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.actualizarProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        const result = await crearProducto({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      toggleModal();\r\n      if (fromCompra) {\r\n        getProductos();\r\n      } else {\r\n        productosRefetch();\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta(initial_state_unidadesVenta);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n    setValue(0);\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    /* const producto = cleanTypenames(product); */\r\n    console.log(producto);\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = producto.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const { keyCode } = event;\r\n    if (keyCode === 114) {\r\n      document.getElementById(\"modal-registro-product\").click();\r\n    }\r\n  } /* CODIGO PARA PODER EJECUTAR LAS VENTANAS A BASE DE LAS TECLAS */\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (!accion && value === 4) {\r\n      return saveButton;\r\n    } else if (accion && tipo === \"OTROS\" && value === 4) {\r\n      return saveButton;\r\n    } else if (accion && tipo !== \"OTROS\" && value === 5) {\r\n      return saveButton;\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setValue(value + 1)}\r\n          size=\"large\"\r\n          endIcon={<NavigateNext />}\r\n          disableElevation\r\n        >\r\n          Siguiente\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\r\n      {!accion ? (\r\n        fromCompra ? (\r\n          <IconButton color=\"primary\" onClick={() => toggleModal()}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            id=\"modal-registro-product\"\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => toggleModal()}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton color=\"default\" onClick={() => toggleModal(datos)}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <div className={classes.root_app}>\r\n          <Tabs\r\n            style={{ minWidth: \"200px\" }}\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            orientation=\"vertical\"\r\n            scrollButtons=\"on\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            aria-label=\"scrollable force tabs example\"\r\n            className={classes.tabs}\r\n          >\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Datos generales\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista1 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                    alt=\"icono registro\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(0)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios de venta\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista2 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/etiqueta-de-precio.svg\"\r\n                    alt=\"icono venta\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Inventario y almacen\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista3 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tarea-completada.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Centro de costos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            />\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios a plazos\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/calendar.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            /> */}\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Imagenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/imagenes.svg\"\r\n                  alt=\"icono imagenes\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            />\r\n            {accion ? (\r\n              datos_generales.tipo_producto !== \"OTROS\" ? (\r\n                <Tab\r\n                  style={{ minWidth: \"200px\" }}\r\n                  label=\"Tallas y colores\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista7 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                        alt=\"icono colores\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(5)}\r\n                />\r\n              ) : null\r\n            ) : null}\r\n          </Tabs>\r\n          <Box width=\"100%\">\r\n            <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => toggleModal()}\r\n                size=\"large\"\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n            <DialogContent className={classes.dialogContent}>\r\n              <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n              <ContenidoModal value={value} />\r\n            </DialogContent>\r\n          </Box>\r\n        </div>\r\n\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ContenidoModal = ({ value }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, [refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <TabPanel value={value} index={0}>\r\n        <RegistroInfoGenerales\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <RegistroInfoAdidional />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <RegistroAlmacenInicial\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <CentroCostos\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      {/* <TabPanel value={value} index={4}>\r\n        <PrecioPlazos />\r\n      </TabPanel> */}\r\n      <TabPanel value={value} index={4}>\r\n        <CargarImagenesProducto />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <ColoresTallas\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function PreciosDeVentaCompras() {\r\n  const { preciosVenta } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Utilidad\", \"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {preciosVenta.map((data, index) => (\r\n                  <RenderPrecios\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    tipo={tipo}\r\n                  />\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPrecios = ({ data, tipo, index }) => {\r\n  const { preciosVenta, setPreciosVenta, datosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { precios } = productoOriginal;\r\n\r\n  const [precio_neto, setPrecioNeto] = useState(data.precio_neto);\r\n\r\n  //creamos variables para trabajar con ellas, no causar errores y afectar las originales\r\n  let copy_preciosVenta = { ...preciosVenta[index] };\r\n  let preciosVenta_base = [...preciosVenta];\r\n\r\n  let precio_unitario_con_impuesto =\r\n    /* datosProducto.costo / datosProducto.cantidad; */\r\n    datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n  let precio_unitario_sin_impuesto =\r\n    /* precios.precio_de_compra.precio_sin_impuesto / datosProducto.cantidad; */\r\n    precios.precio_de_compra.precio_sin_impuesto /\r\n    precios.unidad_de_compra.cantidad;\r\n\r\n  if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n  if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n  const calculosCompra = useCallback(() => {\r\n    if (copy_preciosVenta.numero_precio === data.numero_precio) {\r\n      copy_preciosVenta.precio_neto = precio_unitario_con_impuesto;\r\n      setPrecioNeto(precio_unitario_con_impuesto);\r\n\r\n      let utilidad_base = data.utilidad ? data.utilidad : 0;\r\n      let utilidad = utilidad_base / 100;\r\n\r\n      const precio_venta = parseFloat(\r\n        (\r\n          precio_unitario_sin_impuesto * utilidad +\r\n          precio_unitario_sin_impuesto\r\n        ).toFixed(2)\r\n      );\r\n      copy_preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      if (precios.iva_activo || precios.ieps_activo) {\r\n        const precio_neto =\r\n          precio_unitario_con_impuesto +\r\n          precio_unitario_con_impuesto * utilidad;\r\n\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_neto.toFixed(2)));\r\n      } else {\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_venta.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_venta.toFixed(2)));\r\n      }\r\n      preciosVenta_base.splice(index, 1, copy_preciosVenta);\r\n      setPreciosVenta(preciosVenta_base)\r\n    }\r\n  }, [datosProducto.costo, datosProducto.cantidad]);\r\n\r\n  useEffect(() => {\r\n    if (data.numero_precio === 1) {\r\n      calculosCompra();\r\n    } else if (data.numero_precio > 1 && precio_neto) {\r\n      calculosCompra();\r\n    }\r\n  }, [calculosCompra]);\r\n\r\n  switch (tipo) {\r\n    case \"Utilidad\":\r\n      return <TableCell style={{ border: 0 }}>{data.utilidad}%</TableCell>;\r\n    case \"Precio de venta\":\r\n      return (\r\n        <TableCell style={{ border: 0 }}>\r\n          ${parseFloat(precio_neto).toFixed(2)}\r\n        </TableCell>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { Box, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function DescuentosInputs() {\r\n  const { datosProducto, setDatosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { precio_sin_impuesto, precio_con_impuesto } = precio_de_compra;\r\n  const iva_precio_actual = precio_de_compra.iva;\r\n  const ieps_precio_actual = precio_de_compra.ieps;\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const { costo } = datosProducto;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round((PCSI_actual * porcentaje) / 100);\r\n\r\n    let subtotal_con_descuento = PCSI_actual - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(impuestos.toFixed(2)),\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual,\r\n        descuento_porcentaje: \"\",\r\n        descuento_precio: \"\",\r\n        subtotal_descuento: precio_sin_impuesto,\r\n        total_descuento: precio_con_impuesto,\r\n      });\r\n      return;\r\n    }\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round((cantidad_descontada / PCSI_actual) * 100);\r\n    let subtotal_con_descuento = PCSI_actual - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: impuestos,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" width={160}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPrecio(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_precio}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n          }}\r\n        />\r\n        <Box mr={1} />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_porcentaje}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n          }}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const ClienteCtx = createContext();\r\n\r\nexport const ClienteProvider = ({ children }) => {\r\n\tconst [ cliente, setCliente ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_cliente: true\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState(false);\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\tconst [updateClientVenta, setUpdateClientVenta] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<ClienteCtx.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcliente,\r\n\t\t\t\tsetCliente,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate,\r\n\t\t\t\tsetUpdateClientVenta,\r\n\t\t\t\tupdateClientVenta\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ClienteCtx.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  InputAdornment,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Cached } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoBasica({ tipo, accion }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente, error } = useContext(ClienteCtx);\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setCliente({\r\n        ...cliente,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [cliente, setCliente]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      [name]: value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      direccion: { ...cliente.direccion, [name]: value },\r\n    });\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const clave_cliente = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setCliente({\r\n      ...cliente,\r\n      clave_cliente,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.input}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          xs={12}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${cliente.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <Grid container spacing={2}>\r\n            {accion === \"registrar\" ? null : (\r\n              <Grid item md={3} xs={12}>\r\n                <Typography className={classes.title}>N. Cliente</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"numero_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.numero_cliente ? cliente.numero_cliente : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled\r\n                  type=\"number\"\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={accion === \"registrar\" ? 12 : 9} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre Cliente\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.nombre_cliente}\r\n                name=\"nombre_cliente\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.nombre_cliente\r\n                    ? cliente.nombre_cliente\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            {tipo === \"CLIENTE\" ? null : (\r\n              <Grid item md={4} xs={12}>\r\n                <Typography className={classes.title}>\r\n                  <span>* </span>Representante\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.representante}\r\n                  name=\"representante\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    cliente.representante\r\n                      ? cliente.representante\r\n                      : \"\"\r\n                  }\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Clave(Tarjeta de puntos)\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.clave_cliente}\r\n                name=\"clave_cliente\"\r\n                variant=\"outlined\"\r\n                value={cliente.clave_cliente ? cliente.clave_cliente : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        color=\"primary\"\r\n                        size=\"small\"\r\n                        onClick={() => GenCodigoBarras()}\r\n                      >\r\n                        <Cached />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                  disabled: true,\r\n                }}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n              <Typography className={classes.title}>\r\n                Fecha nacimiento\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"fecha_nacimiento\"\r\n                variant=\"outlined\"\r\n                type=\"date\"\r\n                onChange={obtenerCampos}\r\n                value={cliente.fecha_nacimiento ? cliente.fecha_nacimiento : \"\"}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>CURP</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"curp\"\r\n                variant=\"outlined\"\r\n                value={cliente.curp ? cliente.curp : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Email\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.email}\r\n                name=\"email\"\r\n                variant=\"outlined\"\r\n                value={cliente.email ? cliente.email : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Telefono\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.telefono}\r\n                name=\"telefono\"\r\n                variant=\"outlined\"\r\n                value={cliente.telefono ? cliente.telefono : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Num. Celular</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"celular\"\r\n                variant=\"outlined\"\r\n                value={cliente.celular ? cliente.celular : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Box my={2}>\r\n            <Typography className={classes.title}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Calle\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.calle\r\n                    ? cliente.direccion.calle\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Ext\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_ext ? cliente.direccion.no_ext : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>Num. Int</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_int ? cliente.direccion.no_int : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Código postal\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.codigo_postal\r\n                    ? cliente.direccion.codigo_postal\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Colonia\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.colonia\r\n                    ? cliente.direccion.colonia\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Municipio\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.municipio\r\n                    ? cliente.direccion.municipio\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Localidad</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.localidad\r\n                    ? cliente.direccion.localidad\r\n                    : \"\"\r\n                }\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Estado\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.estado\r\n                    ? cliente.direccion.estado\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Pais\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.pais\r\n                    ? cliente.direccion.pais\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider, Grid } from \"@material-ui/core\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoCredito({ tipo }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente } = useContext(ClienteCtx);\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_descuento\" || name === \"limite_credito\") {\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Alert severity=\"info\">\r\n          Si deseas hacer facturas a este cliente el <b>RFC</b> y la{\" \"}\r\n          <b>Razon social</b> son obligatorios.\r\n        </Alert>\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>RFC</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"rfc\"\r\n            variant=\"outlined\"\r\n            value={cliente.rfc ? cliente.rfc : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>Razon social</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"razon_social\"\r\n            variant=\"outlined\"\r\n            value={\r\n              cliente.razon_social ? cliente.razon_social : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Descuento</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"numero_descuento\"\r\n            variant=\"outlined\"\r\n            value={cliente.numero_descuento ? cliente.numero_descuento : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Limite de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"limite_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.limite_credito ? cliente.limite_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Días de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"dias_credito\"\r\n            variant=\"outlined\"\r\n            value={\r\n              cliente.dias_credito ? cliente.dias_credito : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {tipo !== \"CLIENTE\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography className={classes.title}>\r\n              Datos bancarios\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>Banco</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"banco\"\r\n                variant=\"outlined\"\r\n                value={cliente.banco ? cliente.banco : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>\r\n                No. de Cuenta Bancaria\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"numero_cuenta\"\r\n                variant=\"outlined\"\r\n                value={cliente.numero_cuenta ? cliente.numero_cuenta : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CLIENTE = gql`\r\n\tmutation crearCliente($input: CrearClienteInput) {\r\n\t\tcrearCliente(input: $input) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CLIENTES = gql`\r\n\tquery obtenerClientes($tipo: String!, $filtro: String) {\r\n\t\tobtenerClientes(tipo: $tipo, filtro: $filtro) {\r\n\t\t\t_id\r\n\t\t\tnumero_cliente\r\n\t\t\tclave_cliente\r\n\t\t\trepresentante\r\n\t\t\tnombre_cliente\r\n\t\t\trfc\r\n\t\t\tcurp\r\n\t\t\ttelefono\r\n\t\t\tcelular\r\n\t\t\temail\r\n\t\t\tnumero_descuento\r\n\t\t\tlimite_credito\r\n\t\t\tdias_credito\r\n\t\t\trazon_social\r\n\t\t\tdireccion {\r\n\t\t\t\tcalle\r\n\t\t\t\tno_ext\r\n\t\t\t\tno_int\r\n\t\t\t\tcodigo_postal\r\n\t\t\t\tcolonia\r\n\t\t\t\tmunicipio\r\n\t\t\t\tlocalidad\r\n\t\t\t\testado\r\n\t\t\t\tpais\r\n\t\t\t}\r\n\t\t\timagen\r\n\t\t\testado_cliente\r\n\t\t\ttipo_cliente\r\n\t\t\tbanco\r\n\t\t\tnumero_cuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t\tsucursales_activas\r\n\t\t\t\tlimite_sucursales\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t\tmonedero_electronico\r\n\t\t\tfecha_nacimiento\r\n    \t\tfecha_registro\r\n\t\t\teliminado\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CLIENTE = gql`\r\n\tmutation actualizarCliente($input: ActualizarClienteInput, $id: ID!) {\r\n\t\tactualizarCliente(id: $id, input: $input) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CLIENTE = gql`\r\n\tmutation eliminarCliente($id: ID!) {\r\n\t\teliminarCliente(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport RegistrarInfoBasica from \"./RegistrarInfoBasica\";\r\nimport RegistrarInfoCredito from \"./RegistroInfoCredito\";\r\nimport { Add, Close, Done, Edit } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CLIENTE,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { Toolbar } from \"@material-ui/core\";\r\n\r\nexport default function CrearCliente({\r\n  tipo,\r\n  accion,\r\n  datos,\r\n  refetch,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const {\r\n    cliente,\r\n    setCliente,\r\n    setError,\r\n    updateClientVenta,\r\n    setUpdateClientVenta,\r\n  } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setCliente({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      estado_cliente: true,\r\n    });\r\n  }, [setCliente]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      setCliente(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearCliente] = useMutation(CREAR_CLIENTE);\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const saveData = async () => {\r\n    let copy_cliente = { ...cliente };\r\n    if (\r\n      !copy_cliente.clave_cliente ||\r\n      !copy_cliente.nombre_cliente ||\r\n      !copy_cliente.telefono ||\r\n      !copy_cliente.email ||\r\n      !copy_cliente.direccion.calle ||\r\n      !copy_cliente.direccion.municipio ||\r\n      !copy_cliente.direccion.estado ||\r\n      !copy_cliente.direccion.pais\r\n    ) {\r\n      if (tipo !== \"CLIENTE\" && !copy_cliente.representante) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(true);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        copy_cliente.tipo_cliente = tipo;\r\n        copy_cliente.empresa = sesion.empresa._id;\r\n        copy_cliente.sucursal = sesion.sucursal._id;\r\n        if (tipo === \"CLIENTE\") {\r\n          copy_cliente.representante = \"\";\r\n        }\r\n        const input = copy_cliente;\r\n        const clienteBase = await crearCliente({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (ventas === true) {\r\n          const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n          let venta_actual = venta === null ? {} : venta;\r\n          // console.log(venta_actual);\r\n          localStorage.setItem(\r\n            \"DatosVentas\",\r\n            JSON.stringify({\r\n              subTotal:\r\n                venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n              total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n              impuestos:\r\n                venta_actual.impuestos === undefined\r\n                  ? 0\r\n                  : venta_actual.impuestos,\r\n              iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n              ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n              descuento:\r\n                venta_actual.descuento === undefined\r\n                  ? 0\r\n                  : venta_actual.descuento,\r\n              monedero:\r\n                venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n              // tipo_cambio: venta_actual.tipo_cambio\r\n              //   ? venta_actual.tipo_cambio\r\n              //   : {},\r\n              cliente: clienteBase.data.crearCliente,\r\n              venta_cliente: true,\r\n              productos:\r\n                venta_actual.productos?.length > 0\r\n                  ? venta_actual.productos\r\n                  : [],\r\n            })\r\n          );\r\n          setUpdateClientVenta(!updateClientVenta);\r\n          onCloseModal();\r\n          handleClickOpen();\r\n        }\r\n      } else {\r\n        const {\r\n          numero_cliente,\r\n          _id,\r\n          clave_cliente,\r\n          sucursal,\r\n          empresa,\r\n          ...input\r\n        } = copy_cliente;\r\n        await actualizarCliente({\r\n          variables: {\r\n            input: input,\r\n            id: copy_cliente._id,\r\n          },\r\n        });\r\n      }\r\n      /* if (refetch) {\r\n        refetch();\r\n      } */\r\n      refetch();\r\n      /* setUpdate(!update); */\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError(false);\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      setLoading(false);\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        refetch ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            onCloseModal();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\">\r\n                {accion === \"registrar\" ? \"Registrar\" : \"Actualizar\"}\r\n              </Typography>\r\n              <Box flexGrow={1} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"large\"\r\n                onClick={() => onCloseModal()}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Container>\r\n            <Typography>\r\n              <b>Información básica</b>\r\n            </Typography>\r\n            <Divider />\r\n            <RegistrarInfoBasica tipo={tipo} accion={accion} />\r\n            <Box my={2} />\r\n            <Typography>\r\n              <b>Información de credito</b>\r\n            </Typography>\r\n            <Divider />\r\n            <RegistrarInfoCredito tipo={tipo} accion={accion} />\r\n          </Container>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={saveData}\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COMPRA = gql`\r\n  mutation crearCompra(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompra(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_COMPRA_ESPERA = gql`\r\n  mutation crearCompraEnEspera(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompraEnEspera(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_REALIZADAS = gql`\r\n  query obtenerComprasRealizadas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $fecha: String\r\n  ) {\r\n    obtenerComprasRealizadas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      fecha: $fecha\r\n    ) {\r\n      _id\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_ESPERA = gql`\r\n  query obtenerComprasEnEspera($empresa: ID!, $sucursal: ID!, $filtro: String) {\r\n    obtenerComprasEnEspera(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n    ) {\r\n      _id\r\n      en_espera\r\n      proveedor {\r\n        id_proveedor\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      productos {\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              ieps\r\n              iva\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            granel\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          presentaciones {\r\n            _id\r\n            almacen\r\n            cantidad\r\n            cantidad_nueva\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        id_producto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        subtotal_descuento\r\n        total_descuento\r\n      }\r\n      impuestos\r\n      subtotal\r\n      total\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CONSULTA_GENERAL_PRODUCTO = gql`\r\n  query obtenerConsultaGeneralCompras($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralCompras(empresa: $empresa, sucursal: $sucursal) {\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          granel\r\n        }\r\n        imagenes {\r\n          url_imagen\r\n          location_imagen\r\n          key_imagen\r\n          extencion_imagen\r\n        }\r\n        centro_de_costos {\r\n          cuenta\r\n          id_cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          empresa\r\n          sucursal\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_barras\r\n          color {\r\n            hex\r\n            nombre\r\n            _id\r\n          }\r\n          existencia\r\n          medida {\r\n            talla\r\n            tipo\r\n            _id\r\n          }\r\n          nombre_comercial\r\n          precio\r\n        }\r\n        medidas_registradas\r\n        empresa\r\n        sucursal\r\n        usuario\r\n      }\r\n      proveedores {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n        id_usuario_encargado {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n          email\r\n          imagen\r\n          estado_usuario\r\n        }\r\n        id_sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          usuario_sucursal\r\n        }\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_COMPRA_ESPERA = gql`\r\n  mutation eliminarCompraEnEspera($id: ID!) {\r\n    eliminarCompraEnEspera(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { initial_state_precios } from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from 'moment';\r\n\r\nexport const initial_state_datosProducto = {\r\n  producto: {},\r\n  costo: 0,\r\n  cantidad: 0,\r\n  cantidad_regalo: 0,\r\n  unidad_regalo: '',\r\n  cantidad_total: 0,\r\n  descuento_porcentaje: 0,\r\n  descuento_precio: 0,\r\n  iva_total: 0,\r\n  ieps_total: 0,\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  mantener_precio: true,\r\n  impuestos_descuento: 0,\r\n  subtotal_descuento: 0,\r\n  total_descuento: 0,\r\n};\r\n\r\nexport const initial_state_datosCompra = {\r\n  productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n};\r\n\r\nexport const initial_state_precios_venta = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_productoOriginal = {\r\n  precios: initial_state_precios,\r\n};\r\nexport const initial_state_productosCompra = [];\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { ClienteProvider } from \"../../../../../context/Catalogos/crearClienteCtx\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport RegistroProvedor from \"../../../Catalogos/Cliente/CrearCliente\";\r\nimport RegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTA_GENERAL_PRODUCTO } from \"../../../../../gql/Compras/compras\";\r\nimport { ErrorOutline } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nexport default function DatosProveedorAlmacen({\r\n  getProductos,\r\n  status,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosCompra,\r\n    setDatosCompra,\r\n    setDatosProducto,\r\n    productosCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONSULTA_GENERAL_PRODUCTO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n    }\r\n  );\r\n\r\n  const obtenerProveedorAlmacen = (tipo, value) => {\r\n    if (!value) {\r\n      setDatosCompra({ ...datosCompra, [tipo]: {} });\r\n      return;\r\n    }\r\n    if (tipo === \"proveedor\") {\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        proveedor: {\r\n          id_proveedor: value._id,\r\n          nombre_cliente: value.nombre_cliente,\r\n          numero_cliente: value.numero_cliente,\r\n          clave_cliente: value.clave_cliente,\r\n        },\r\n      });\r\n    } else {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      resetInitialStates();\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        almacen: {\r\n          id_almacen: value._id,\r\n          nombre_almacen: value.nombre_almacen,\r\n        },\r\n      });\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: value._id,\r\n        almacen: value.nombre_almacen,\r\n      });\r\n      getProductos(value._id);\r\n    }\r\n  };\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  const errorRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          value=\"Error\"\r\n          error\r\n          disabled\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <ErrorOutline fontSize=\"default\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  const loadingRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          disabled\r\n          value=\"Cargando...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <CircularProgress size={24} />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {loadingRender}\r\n        {loadingRender}\r\n        {loadingRender}\r\n      </Grid>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Grid container spacing={2} alignItems=\"center\">\r\n          {errorRender}\r\n          {errorRender}\r\n          {errorRender}\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  const { almacenes, proveedores } = data.obtenerConsultaGeneralCompras;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-proveedor\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={proveedores}\r\n              getOptionLabel={(option) => option.nombre_cliente}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Proveedor\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) =>\r\n                obtenerProveedorAlmacen(\"proveedor\", value)\r\n              }\r\n              getOptionSelected={(option) => option.nombre_cliente}\r\n              value={\r\n                datosCompra.proveedor.nombre_cliente\r\n                  ? datosCompra.proveedor\r\n                  : null\r\n              }\r\n            />\r\n            <ClienteProvider>\r\n              <RegistroProvedor\r\n                accion=\"registrar\"\r\n                tipo=\"PROVEEDOR\"\r\n                refetch={refetch}\r\n              />\r\n            </ClienteProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-almacen\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={almacenes}\r\n              getOptionLabel={(option) => option.nombre_almacen}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Almacen\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerProveedorAlmacen(\"almacen\", value)}\r\n              getOptionSelected={(option) => option.nombre_almacen}\r\n              value={\r\n                datosCompra.almacen.nombre_almacen ? datosCompra.almacen : null\r\n              }\r\n            />\r\n            <AlmacenProvider>\r\n              <RegistroAlmacen accion=\"registrar\" refetch={refetch} />\r\n            </AlmacenProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                console.log(e.target.value);\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_registro: e.target.value,\r\n                });\r\n              }}\r\n              value={datosCompra.fecha_registro}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function MostrarPrecios() {\r\n  const { datosProducto } = useContext(ComprasContext);\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n\r\n  if (presentaciones.length > 0) {\r\n    let cantida_suma = 0;\r\n    let cantidad_total = 0;\r\n    presentaciones.forEach((presentacion) => {\r\n      const { cantidad, cantidad_nueva } = presentacion;\r\n      let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n\r\n      cantida_suma += cantidad + nueva;\r\n    });\r\n    if (isNaN(cantida_suma)) cantidad_total = 0;\r\n    cantidad_total = cantida_suma; \r\n\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos_descuento * cantidad_total)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * cantidad_total\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  } else {\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.subtotal_descuento * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>${formatoMexico(datosProducto.impuestos_descuento * datosProducto.cantidad)}</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>{datosProducto.descuento_porcentaje}%</b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              $\r\n              {formatoMexico(\r\n                datosProducto.total_descuento * datosProducto.cantidad\r\n              )}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport PreciosProductos from \"./PreciosProductos\";\r\nimport TallasProductos from \"./TallasProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport CrearProducto, {\r\n  initial_state_preciosP,\r\n} from \"../../../Catalogos/Producto/crearProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../../gql/Catalogos/productos\";\r\nimport PreciosDeVentaCompras from \"./PreciosVenta\";\r\nimport { validateJsonEdit } from \"../../../Catalogos/Producto/validateDatos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\nimport DescuentosInputs from \"./Descuentos\";\r\nimport DatosProveedorAlmacen from \"./DatosProveedorAlmacen\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport MostrarPrecios from \"./mostrar_precios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function DatosProducto({ status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosProducto,\r\n    setDatosProducto,\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    productoOriginal,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    setDatosCompra,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setEditFinish,\r\n    costo,\r\n    setCosto,\r\n    cantidad,\r\n    setCantidad,\r\n    loadingProductos,\r\n    setLoadingProductos,\r\n  } = useContext(ComprasContext);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n  } = useContext(RegProductoContext);\r\n  const [verificate, setVerificate] = useState(false);\r\n\r\n  let count = 0;\r\n  if (status === \"enEspera\" && datosCompra) count = 1;\r\n\r\n  const [cargando, setCargando] = useState(false);\r\n  const client = useApolloClient();\r\n  const [data, setData] = useState();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const getProductos = async (id_almacen) => {\r\n    try {\r\n      let almacen = id_almacen ? id_almacen : datosCompra.almacen._id;\r\n      setLoadingProductos(true);\r\n      const response = await client.query({\r\n        query: OBTENER_PRODUCTOS,\r\n        variables: {\r\n          almacen,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoadingProductos(false);\r\n      setData(response.data);\r\n    } catch (error) {\r\n      setLoadingProductos(false);\r\n      setAlert({\r\n        message: \"Hubo un error al cargar los productos\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [COSTO] = useDebounce(costo, 500);\r\n  const [CANTIDAD] = useDebounce(cantidad, 500);\r\n\r\n  /* useEffect(() => {\r\n    if (loadingProductos) {\r\n      setLoadingProductos(true);\r\n    } else {\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loadingProductos]); */\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCosto(COSTO);\r\n  }, [COSTO]);\r\n\r\n  useEffect(() => {\r\n    if (data) obtenerCantidad(CANTIDAD);\r\n  }, [CANTIDAD]);\r\n\r\n  useEffect(() => {\r\n    if (count === 1) {\r\n      getProductos(datosCompra.almacen._id);\r\n    }\r\n  }, [count]);\r\n\r\n  if (loadingProductos) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"20vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  const obtenerSelectsProducto = (producto) => {\r\n    /* console.log(producto); */\r\n    if (!producto) {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      resetInitialStates();\r\n      return;\r\n    }\r\n\r\n    const {\r\n      ieps,\r\n      iva,\r\n      precio_con_impuesto,\r\n      precio_sin_impuesto,\r\n    } = producto.precios.precio_de_compra;\r\n\r\n    const impuestos = iva + ieps;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      producto,\r\n      id_producto: producto._id,\r\n      costo: precio_con_impuesto,\r\n      cantidad: 1,\r\n      unidad_regalo: producto.precios.unidad_de_compra.unidad,\r\n      descuento_porcentaje: 0,\r\n      descuento_precio: 0,\r\n      subtotal: precio_sin_impuesto,\r\n      impuestos: parseFloat(impuestos.toFixed(6)),\r\n      total: precio_con_impuesto,\r\n      subtotal_descuento: precio_sin_impuesto,\r\n      total_descuento: precio_con_impuesto,\r\n    });\r\n    setInitialStates(producto);\r\n    setCosto(precio_con_impuesto);\r\n    setCantidad(1);\r\n    setProductoOriginal(producto);\r\n    setPreciosVenta(producto.precios.precios_producto);\r\n  };\r\n\r\n  function obtenerCantidad(value) {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad: parseFloat(value),\r\n    });\r\n  }\r\n\r\n  const obtenerCantidadRegalo = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad_regalo: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad_regalo: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerUnidadRegalo = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  function obtenerCosto(value) {\r\n    /* const { name, value } = e.target; */\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: \"\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const { iva, ieps, precio_de_compra } = datosProducto.producto.precios;\r\n    const iva_precio = precio_de_compra.iva;\r\n    const ieps_precio = precio_de_compra.ieps;\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let subtotal = 0;\r\n    let total = 0;\r\n    let cantidad_descontada = 0;\r\n    let impuesto_actual = iva_precio + ieps_precio;\r\n\r\n    let precio_sin_impuesto = precio_neto - impuesto_actual;\r\n    let nuevo_iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    let nuevo_ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    let nuevo_impuesto = nuevo_ieps + nuevo_iva;\r\n\r\n    if (datosProducto.descuento_porcentaje > 0) {\r\n      cantidad_descontada = Math.round(\r\n        (precio_sin_impuesto * datosProducto.descuento_porcentaje) / 100\r\n      );\r\n      subtotal = precio_sin_impuesto - cantidad_descontada;\r\n      total = subtotal + nuevo_impuesto;\r\n\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n        costo: parseFloat(precio_neto),\r\n        descuento_precio: parseFloat(cantidad_descontada),\r\n        subtotal_descuento: parseFloat(subtotal),\r\n        total_descuento: parseFloat(total),\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n      costo: parseFloat(precio_neto),\r\n      subtotal_descuento: parseFloat(precio_sin_impuesto),\r\n      total_descuento: parseFloat(precio_sin_impuesto + nuevo_impuesto),\r\n    });\r\n  }\r\n\r\n  const agregarCompra = async (actualizar_Precios) => {\r\n    let copy_datosProducto = { ...datosProducto };\r\n    let copy_datosGenerales = { ...datos_generales };\r\n    let copy_presentaciones = [...presentaciones];\r\n    let copy_precios = { ...precios };\r\n    let copy_preciosP = [...preciosP];\r\n    let copy_almacenInicial = { ...almacen_inicial };\r\n    let copy_centroCostos = { ...centro_de_costos };\r\n    let copy_presentacionesEliminadas = [...presentaciones_eliminadas];\r\n    let copy_precioPlazos = { ...preciosPlazos };\r\n\r\n    /* Validaciones */\r\n    setCargando(true);\r\n    if (\r\n      !copy_datosProducto.producto.datos_generales ||\r\n      !datosCompra.proveedor.nombre_cliente ||\r\n      !datosCompra.almacen.nombre_almacen\r\n    ) {\r\n      setCargando(false);\r\n      return;\r\n    }\r\n\r\n    if (copy_datosGenerales.tipo_producto !== \"OTROS\") {\r\n      if (copy_presentaciones.length > 0) {\r\n        const pres = copy_presentaciones.filter(\r\n          (res) => res.color._id && res.medida._id && res.existencia\r\n        );\r\n        if (pres.length !== copy_presentaciones.length) {\r\n          setVerificate(true);\r\n          setCargando(false);\r\n          return;\r\n        }\r\n      } else {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    /* let copy_unidadesVenta = [...unidadesVenta]; */\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    if (actualizar_Precios) {\r\n      copy_datosProducto.mantener_precio = false;\r\n    } else {\r\n      copy_datosProducto.mantener_precio = true;\r\n    }\r\n    copy_precios.precios_producto = copy_preciosP;\r\n\r\n    let producto = {\r\n      datos_generales: await validateJsonEdit(\r\n        copy_datosGenerales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios: copy_precios,\r\n      imagenes,\r\n      imagenes_eliminadas,\r\n      almacen_inicial: copy_almacenInicial,\r\n      centro_de_costos: copy_centroCostos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones: copy_presentaciones,\r\n      presentaciones_eliminadas: copy_presentacionesEliminadas,\r\n      precio_plazos: copy_precioPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    copy_datosProducto.producto = producto;\r\n\r\n    if (copy_datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n      //si son medidas sumas las cantidades de las presetnaciones\r\n      if (copy_datosProducto.producto.presentaciones.length > 0) {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n          const { cantidad, cantidad_nueva } = presentacion;\r\n          let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n          copy_datosProducto.cantidad += cantidad + nueva;\r\n        });\r\n        if (isNaN(copy_datosProducto.cantidad)) copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      } else {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      }\r\n    } else {\r\n      //Si hay cantidad regalo y es diferente unidad hacer las converciones\r\n      const { cantidad_regalo, cantidad, unidad_regalo } = copy_datosProducto;\r\n      //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n      const factor =\r\n        copy_datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n      const cantiad_media = cantidad * factor;\r\n      let cantidad_regalo_media =\r\n        unidad_regalo === \"Pz\" ||\r\n        unidad_regalo === \"Kg\" ||\r\n        unidad_regalo === \"Lt\"\r\n          ? cantidad_regalo\r\n          : cantidad_regalo * factor;\r\n      let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n      //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n      if (factor > 1) {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media / factor;\r\n      } else {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media;\r\n      }\r\n    }\r\n    copy_datosProducto.subtotal = copy_datosProducto.subtotal_descuento;\r\n    copy_datosProducto.total = copy_datosProducto.total_descuento;\r\n\r\n    if (isEditing.producto) {\r\n      //se tiene que actualizar el producto en la fila y sumar el subtotal\r\n      let productosCompra_ordenados = [...productosCompra];\r\n      //calculos de totales, subtotales e impuestos de compra general\r\n      const {\r\n        iva,\r\n        ieps,\r\n      } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n      copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.ieps_total = ieps * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.subtotal =\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.impuestos =\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.total =\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n      let subtotal =\r\n        datosCompra.subtotal +\r\n        copy_datosProducto.subtotal * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.subtotal;\r\n      let impuestos =\r\n        datosCompra.impuestos +\r\n        copy_datosProducto.impuestos * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.impuestos;\r\n      let total =\r\n        datosCompra.total +\r\n        copy_datosProducto.total * copy_datosProducto.cantidad_total -\r\n        isEditing.producto.total;\r\n\r\n      productosCompra_ordenados.splice(isEditing.index, 1, copy_datosProducto);\r\n\r\n      setProductosCompra(productosCompra_ordenados);\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        subtotal,\r\n        impuestos,\r\n        total,\r\n      });\r\n      setIsEditing({});\r\n      setEditFinish(!editFinish);\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    } else {\r\n      // se agregar el producto normal y verificar si ya esta el producto en la lista\r\n\r\n      const existente = productosCompra\r\n        .map((prod_exist, index) => {\r\n          if (prod_exist.id_producto === copy_datosProducto.id_producto) {\r\n            return { prod_exist, index };\r\n          } else {\r\n            return \"\";\r\n          }\r\n        })\r\n        .filter(Boolean);\r\n\r\n      if (existente.length > 0) {\r\n        let productosCompra_ordenados = [...productosCompra];\r\n        const { index, prod_exist } = existente[0];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        productosCompra_ordenados.splice(index, 1, copy_datosProducto);\r\n        setProductosCompra(productosCompra_ordenados);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal:\r\n            datosCompra.subtotal -\r\n            prod_exist.subtotal +\r\n            copy_datosProducto.subtotal,\r\n          impuestos:\r\n            datosCompra.impuestos -\r\n            prod_exist.impuestos +\r\n            copy_datosProducto.impuestos,\r\n          total:\r\n            datosCompra.total - prod_exist.total + copy_datosProducto.total,\r\n        });\r\n      } else {\r\n        let array_ordenado = [...productosCompra];\r\n        const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra;\r\n\r\n        copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total;\r\n\r\n        array_ordenado.splice(0, 0, copy_datosProducto);\r\n        setProductosCompra(array_ordenado);\r\n        setDatosCompra({\r\n          ...datosCompra,\r\n          subtotal: datosCompra.subtotal + copy_datosProducto.subtotal,\r\n          impuestos: datosCompra.impuestos + copy_datosProducto.impuestos,\r\n          total: datosCompra.total + copy_datosProducto.total,\r\n        });\r\n      }\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (\r\n      datosCompra.almacen.id_almacen &&\r\n      producto.medidas_producto.length === 0\r\n    ) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <DatosProveedorAlmacen status={status} getProductos={getProductos} />\r\n      <Box my={1} />\r\n      <Grid container spacing={1} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography>Código de barras</Typography>\r\n          <Box width={200}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-codigo\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.codigo_barras\r\n                  ? option.datos_generales.codigo_barras\r\n                  : \"N/A\"\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Producto</Typography>\r\n          <Box display=\"flex\" width={250} alignItems=\"center\">\r\n            <Autocomplete\r\n              id=\"combo-box-producto-nombre\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.nombre_comercial\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n            {!datosCompra.almacen.id_almacen ||\r\n            !datosCompra.proveedor.id_proveedor ? (\r\n              <IconButton disabled>\r\n                <Add />\r\n              </IconButton>\r\n            ) : (\r\n              <CrearProducto\r\n                accion={false}\r\n                /* productosRefetch={refetch} */\r\n                getProductos={getProductos}\r\n                fromCompra={true}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Clave</Typography>\r\n          <Box width={140}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-clave\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={obtenerProductos}\r\n              getOptionLabel={(option) => option.datos_generales.clave_alterna}\r\n              renderInput={(params) => (\r\n                <TextField {...params} variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Costo</Typography>\r\n          <Box width={100}>\r\n            <TextField\r\n              inputMode=\"decimal\"\r\n              name=\"costo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              disabled={!datosProducto.producto.datos_generales}\r\n              value={costo}\r\n              onChange={(e) => setCosto(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item>\r\n              <Typography>Unidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  aria-readonly=\"true\"\r\n                  value={datosProducto.producto.precios.unidad_de_compra.unidad}\r\n                  disabled\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cantidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    inputProps: { min: 1 },\r\n                  }}\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={cantidad}\r\n                  onChange={(e) => setCantidad(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cant. regalo</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad_regalo\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={datosProducto.cantidad_regalo}\r\n                  onChange={(e) => obtenerCantidadRegalo(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Unidad. regalo</Typography>\r\n              <Box width={100}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  name=\"unidad_regalo\"\r\n                  fullWidth\r\n                >\r\n                  {datosProducto.producto.precios.granel ? (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Kg\">Kg</MenuItem>\r\n                      <MenuItem value=\"Costal\">Costal</MenuItem>\r\n                      <MenuItem value=\"Lt\">Lt</MenuItem>\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Caja\">Caja</MenuItem>\r\n                      <MenuItem value=\"Pz\">Pz</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </FormControl>\r\n              </Box>\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n\r\n        <Grid item>\r\n          <Typography>Descuento</Typography>\r\n          <DescuentosInputs />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1}>\r\n        <Grid container>\r\n          <Grid item xs={12} md={7} padding=\"checkbox\">\r\n            <PreciosDeVentaCompras />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={5}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Box m={1}>\r\n              <MostrarPrecios />\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              {datosProducto.producto.datos_generales &&\r\n              datosProducto.producto.datos_generales.tipo_producto !==\r\n                \"OTROS\" ? (\r\n                <TallasProductos\r\n                  verificate={verificate}\r\n                  setVerificate={setVerificate}\r\n                />\r\n              ) : null}\r\n\r\n              <Box mx={1} />\r\n              {datosProducto.costo !==\r\n              productoOriginal.precios.precio_de_compra.precio_con_impuesto ? (\r\n                <ModalAgregarCompra\r\n                  agregarCompra={agregarCompra}\r\n                  cargando={cargando}\r\n                />\r\n              ) : (\r\n                <Button\r\n                  style={\r\n                    loadingProductos\r\n                      ? {\r\n                          pointerEvents: \"none\",\r\n                          opacity: 0.4,\r\n                        }\r\n                      : null\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={\r\n                    cargando ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : (\r\n                      <Add />\r\n                    )\r\n                  }\r\n                  disableElevation\r\n                  disabled={\r\n                    datosProducto.producto.datos_generales\r\n                      ? datosProducto.producto.datos_generales.tipo_producto ===\r\n                        \"OTROS\"\r\n                        ? !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo ||\r\n                          !datosProducto.cantidad\r\n                          ? true\r\n                          : false\r\n                        : !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo\r\n                        ? true\r\n                        : false\r\n                      : true\r\n                  }\r\n                  onClick={() => agregarCompra()}\r\n                >\r\n                  {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalAgregarCompra = ({ agregarCompra, cargando }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    datosProducto,\r\n    datosCompra,\r\n    isEditing,\r\n    loadingProductos,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<Add />}\r\n        disableElevation\r\n        disabled={\r\n          datosProducto.producto.datos_generales\r\n            ? datosProducto.producto.datos_generales.tipo_producto === \"OTROS\"\r\n              ? !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo ||\r\n                !datosProducto.cantidad\r\n                ? true\r\n                : false\r\n              : !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo\r\n              ? true\r\n              : false\r\n            : true\r\n        }\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"modal-agregar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-agregar-compra\" style={{ padding: 0 }}>\r\n          <Alert\r\n            severity=\"info\"\r\n            icon={<InfoOutlined style={{ fontSize: 30 }} />}\r\n            style={{ padding: 16 }}\r\n          >\r\n            <AlertTitle style={{ fontSize: 20 }}>\r\n              El costo es diferente al precio de compra actual\r\n            </AlertTitle>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              ¿Desea actualizar los precios o mantenerlos?\r\n            </Typography>\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"default\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              agregarCompra();\r\n              handleClose();\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Mantener\r\n          </Button>\r\n          <PreciosProductos\r\n            cargando={cargando}\r\n            handleClose={handleClose}\r\n            agregarCompra={agregarCompra}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport { initial_state_preciosP } from \"../../../Catalogos/Producto/crearProducto\";\r\n\r\nexport const SetOrResetData = (accion,setStates, producto) => {\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n    datosCompra\r\n  } = setStates\r\n\r\n  if (accion === \"SET\") {\r\n    \r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.presentaciones ? producto.presentaciones : []\r\n    );\r\n    /* if (datosCompra.almacen.id_almacen && !producto.medidas_registradas) */\r\n    if (datosCompra.almacen.id_almacen && producto.presentaciones.length === 0) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n  } else {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  }\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { Close, Edit, Error } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"./initial_states\";\r\nimport { SetOrResetData } from \"./productos/setOrResetData\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaCompras() {\r\n  const classes = useStyles();\r\n  const { productosCompra, loadingProductos, datosCompra } = useContext(\r\n    ComprasContext\r\n  );\r\n\r\n  const productos_ordernados = [...productosCompra];\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer\r\n        className={classes.container}\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Código de barras</TableCell>\r\n              <TableCell>Producto</TableCell>\r\n              <TableCell>Precio de compra</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad regalo</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad total</TableCell>\r\n              <TableCell padding=\"checkbox\">Presentaciones</TableCell>\r\n              <TableCell>IVA Total</TableCell>\r\n              <TableCell>IEPS Total</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Remover</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos_ordernados.map((producto, index) => {\r\n              return (\r\n                <RenderProductosCompra\r\n                  key={index}\r\n                  producto={producto}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Grid container spacing={2} justifyContent=\"flex-end\">\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Subtotal:{\" \"}\r\n            <b>\r\n              ${datosCompra.subtotal ? formatoMexico(datosCompra.subtotal) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Impuestos:{\" \"}\r\n            <b>\r\n              $\r\n              {datosCompra.impuestos ? formatoMexico(datosCompra.impuestos) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              Total: ${datosCompra.total ? formatoMexico(datosCompra.total) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderProductosCompra = ({ producto, index }) => {\r\n  const {\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setCosto,\r\n    setCantidad,\r\n    setIssue,\r\n  } = useContext(ComprasContext);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const productoCTX = useContext(RegProductoContext);\r\n\r\n  const seStates = {\r\n    setDatosGenerales: productoCTX.setDatosGenerales,\r\n    setPrecios: productoCTX.setPrecios,\r\n    setValidacion: productoCTX.setValidacion,\r\n    setPreciosP: productoCTX.setPreciosP,\r\n    setImagenes: productoCTX.setImagenes,\r\n    setUnidadesVenta: productoCTX.setUnidadesVenta,\r\n    almacen_inicial: productoCTX.almacen_inicial,\r\n    setAlmacenInicial: productoCTX.setAlmacenInicial,\r\n    setUnidadVentaXDefecto: productoCTX.setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria: productoCTX.setUnidadVentaSecundaria,\r\n    setCentroDeCostos: productoCTX.setCentroDeCostos,\r\n    setPreciosPlazos: productoCTX.setPreciosPlazos,\r\n    setSubcategorias: productoCTX.setSubcategorias,\r\n    setOnPreview: productoCTX.setOnPreview,\r\n    setSubcostos: productoCTX.setSubcostos,\r\n    setImagenesEliminadas: productoCTX.setImagenesEliminadas,\r\n    setPresentaciones: productoCTX.setPresentaciones,\r\n    setPresentacionesEliminadas: productoCTX.setPresentacionesEliminadas,\r\n    datosCompra,\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsSelected(true);\r\n    setIsEditing({ producto, index, finish: false });\r\n    setDatosProducto(producto);\r\n    SetOrResetData(\"SET\", seStates, producto.producto);\r\n    setProductoOriginal(producto.producto);\r\n    setPreciosVenta(producto.producto.precios.precios_producto);\r\n    setCosto(producto.costo);\r\n    setCantidad(producto.cantidad);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsSelected(false);\r\n    setIsEditing({});\r\n    setDatosProducto(initial_state_datosProducto);\r\n    SetOrResetData(\"RESET\", seStates);\r\n    setCosto(0);\r\n    setCantidad(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(false);\r\n  }, [editFinish]);\r\n\r\n  useEffect(() => {\r\n    if (!producto.cantidad) {\r\n    } else {\r\n      setIssue(false);\r\n    }\r\n  }, [producto.cantidad]);\r\n\r\n  const unidad_producto = producto.producto.precios.unidad_de_compra.unidad;\r\n  const { cantidad, cantidad_regalo, cantidad_total } = producto;\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={isSelected || !cantidad}\r\n      style={\r\n        isEditing.producto && !isSelected\r\n          ? {\r\n              pointerEvents: \"none\",\r\n              opacity: 0.4,\r\n            }\r\n          : null\r\n      }\r\n    >\r\n      <TableCell>\r\n        {producto.producto.datos_generales\r\n          ? producto.producto.datos_generales.codigo_barras\r\n            ? producto.producto.datos_generales.codigo_barras\r\n            : \"-\"\r\n          : \"-\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell width={180}>\r\n        {!cantidad ? (\r\n          <Error color=\"error\" />\r\n        ) : (\r\n          <b>$ {formatoMexico(producto.total)}</b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_regalo}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_total}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.presentaciones.length > 0\r\n          ? producto.producto.presentaciones.length\r\n          : \"N/A\"}\r\n      </TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.iva}% - $${producto.iva_total ? formatoMexico(producto.iva_total) : 0}`}</TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.ieps}% - $${producto.ieps_total ? formatoMexico(producto.ieps_total) : 0}`}</TableCell>\r\n      <TableCell width={50}>\r\n        {isSelected ? (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            onClick={() => handleCancelEdit()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton color=\"primary\" size=\"small\" onClick={() => handleEdit()}>\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        <ModalDeleteProducto index={index} isSelected={isSelected} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalDeleteProducto = ({ index, isSelected }) => {\r\n  const {\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n  } = useContext(ComprasContext);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarCompra = () => {\r\n    let copy_compras = [...productosCompra];\r\n    let objeto_eliminado = copy_compras.splice(index, 1);\r\n\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      subtotal: datosCompra.subtotal - objeto_eliminado[0].subtotal,\r\n      impuestos: datosCompra.impuestos - objeto_eliminado[0].impuestos,\r\n      total: datosCompra.total - objeto_eliminado[0].total,\r\n    });\r\n    setProductosCompra([...copy_compras]);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        onClick={handleClickOpen}\r\n        disabled={isSelected}\r\n      >\r\n        <RemoveCircleOutlineIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          Seguro que quiere eliminar esto de la lista?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={eliminarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { Done, Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConfirmarCompra({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const [credito, setCredito] = useState(false);\r\n  const [productos_recalculados, setProductosRecalculados] = useState([]);\r\n  const { productosCompra, datosCompra, setDatosCompra, issue } = useContext(\r\n    ComprasContext\r\n  );\r\n  const initial_state_descuento = {\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    descuento_aplicado: false,\r\n    porcentaje: 0,\r\n    cantidad_descontada: 0,\r\n    precio_con_descuento: 0,\r\n  };\r\n  const [descuento_base, setDescuentoBase] = useState(initial_state_descuento);\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const cleanStates = () => {\r\n    setCredito(false);\r\n    setProductosRecalculados([]);\r\n    setDescuentoBase(initial_state_descuento);\r\n  };\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const recalcularPrecios = () => {\r\n    //aplicar descuento a los productos y actualizar precios\r\n    const productos = [...productosCompra];\r\n    const datos_descuento = { ...initial_state_descuento };\r\n    const {\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      descuento_aplicado,\r\n    } = descuento_base;\r\n    let productos_array = [];\r\n\r\n    for (let index = 0; index < productos.length; index++) {\r\n      const producto = productos[index];\r\n      const copy_producto = { ...producto };\r\n      const { precios } = copy_producto.producto;\r\n      const { iva, ieps } = precios;\r\n      const subtotal_actual = copy_producto.subtotal;\r\n\r\n      const cantidad_descontada_product = Math.round(\r\n        (subtotal_actual * porcentaje) / 100\r\n      );\r\n      const subtotal_con_descuento =\r\n        subtotal_actual - cantidad_descontada_product;\r\n\r\n      const iva_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n      const ieps_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n\r\n      const impuestos = iva_precio + ieps_precio;\r\n      const total = subtotal_con_descuento + impuestos;\r\n\r\n      copy_producto.iva_total = iva_precio;\r\n      copy_producto.ieps_total = ieps_precio;\r\n      copy_producto.descuento_porcentaje = porcentaje;\r\n      copy_producto.descuento_precio = cantidad_descontada_product;\r\n      copy_producto.impuestos = impuestos;\r\n      copy_producto.subtotal = subtotal_con_descuento;\r\n      copy_producto.total = total;\r\n\r\n      //sumar los totales a datosCompra\r\n      datos_descuento.impuestos += impuestos;\r\n      datos_descuento.subtotal += subtotal_con_descuento;\r\n      datos_descuento.total += total;\r\n\r\n      //meterlo al nuevo array\r\n      productos_array.push(copy_producto);\r\n    }\r\n    //poner los nuevos productos\r\n    setProductosRecalculados(productos_array);\r\n    datos_descuento.porcentaje = porcentaje;\r\n    datos_descuento.cantidad_descontada = cantidad_descontada;\r\n    datos_descuento.descuento_aplicado = descuento_aplicado;\r\n    setDescuentoBase(datos_descuento);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<Done />}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-confirmacion-compra\"\r\n        aria-describedby=\"dialog-confirmacion-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n              size=\"small\"\r\n              disabled={loading_modal}\r\n            >\r\n              <Close style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={2}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={credito}\r\n                      onChange={(e) => setCredito(e.target.checked)}\r\n                    />\r\n                  }\r\n                  label=\"Compra a crédito\"\r\n                />\r\n                <Typography>Fecha de vencimiento del crédito</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  type=\"date\"\r\n                  onChange={(e) => {\r\n                    setDatosCompra({\r\n                      ...datosCompra,\r\n                      fecha_vencimiento_credito: e.target.value,\r\n                    });\r\n                  }}\r\n                  disabled={!credito}\r\n                  value={datosCompra.fecha_vencimiento_credito}\r\n                />\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"forma_pago\"\r\n                >\r\n                  <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n                  <Select\r\n                    labelId=\"forma_pago\"\r\n                    value={datosCompra.forma_pago}\r\n                    name=\"forma_pago\"\r\n                    onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                    label=\"Forma de pago\"\r\n                  >\r\n                    {formaPago.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={descuento_base.descuento_aplicado}\r\n                      onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                      name=\"descuento_aplicado\"\r\n                    />\r\n                  }\r\n                  label=\"Aplicar descuento\"\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPrecio(e.target.value)}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => recalcularPrecios()}\r\n                >\r\n                  Recalcular\r\n                </Button>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Subtotal:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.subtotal\r\n                        ? datosCompra.subtotal\r\n                        : descuento_base.subtotal\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Impuestos:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.impuestos\r\n                        ? datosCompra.impuestos\r\n                        : descuento_base.impuestos\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Total:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.total\r\n                        ? datosCompra.total\r\n                        : descuento_base.total\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              cleanStates();\r\n              realizarCompraBD(\r\n                false,\r\n                credito,\r\n                handleClose,\r\n                setLoadingModal,\r\n                descuento_base,\r\n                productos_recalculados\r\n              );\r\n            }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal || !datosCompra.forma_pago}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DatosProducto from \"./productos/DatosProducto\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport ListaCompras from \"./TablaCompras\";\r\nimport {\r\n  ComprasContext,\r\n  ComprasProvider,\r\n} from \"../../../../context/Compras/comprasContext\";\r\nimport \"date-fns\";\r\nimport { Done, Timer } from \"@material-ui/icons\";\r\nimport {\r\n  initial_state_datosCompra,\r\n  initial_state_datosProducto,\r\n  initial_state_precios_venta,\r\n  initial_state_productoOriginal,\r\n  initial_state_productosCompra,\r\n} from \"./initial_states\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_COMPRA,\r\n  CREAR_COMPRA_ESPERA,\r\n} from \"../../../../gql/Compras/compras\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ConfirmarCompra from \"./ConfirmarCompra\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCompra({\r\n  compra,\r\n  status,\r\n  handleOpenDetalles,\r\n  refetchEspera,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    if (status === \"enEspera\") {\r\n      handleOpenDetalles();\r\n      refetchEspera();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {status === \"enEspera\" ? (\r\n        <Button\r\n          fullWidth\r\n          onClick={handleClickOpen}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Done />}\r\n        >\r\n          continuar compra\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Abrir una compra\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <ComprasProvider>\r\n        <ModalCompra\r\n          open={open}\r\n          handleClose={handleClose}\r\n          status={status}\r\n          compra={compra}\r\n        />\r\n      </ComprasProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalCompra = ({ open, handleClose, compra, status }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n  } = useContext(ComprasContext);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearCompra] = useMutation(CREAR_COMPRA);\r\n  const [crearCompraEnEspera] = useMutation(CREAR_COMPRA_ESPERA);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"enEspera\" && compra && open === true) {\r\n      setDatosCompra(compra);\r\n      setProductosCompra(compra.productos);\r\n    }\r\n  }, [open]);\r\n\r\n  const realizarCompraBD = async (\r\n    compra_en_espera,\r\n    credito,\r\n    handleClose,\r\n    setLoadingModal,\r\n    descuento_compra,\r\n    productos_con_descuento\r\n  ) => {\r\n    let datos = { ...datosCompra };\r\n    let copy_datosProducto = { ...productosCompra };\r\n    let productos = copy_datosProducto;\r\n    if (status === \"enEspera\") {\r\n      productos = copy_datosProducto.map((res) => {\r\n        delete res.conflicto;\r\n        return res;\r\n      });\r\n      delete datos.empresa;\r\n      delete datos.sucursal;\r\n      delete datos.usuario;\r\n    }\r\n\r\n    setLoading(true);\r\n    if (credito) setLoadingModal(true);\r\n    try {\r\n      datos.productos = productos;\r\n\r\n      if (compra_en_espera) {\r\n        datos.en_espera = true;\r\n        const result = await crearCompraEnEspera({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompraEnEspera.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        if (credito) {\r\n          datos.compra_credito = true;\r\n          datos.saldo_credito_pendiente = datos.total;\r\n        }\r\n        if (descuento_compra.descuento_aplicado) {\r\n          const {\r\n            descuento_aplicado,\r\n            subtotal,\r\n            total,\r\n            impuestos,\r\n            ...descuento\r\n          } = descuento_compra;\r\n          datos.productos = productos_con_descuento;\r\n          datos.descuento_aplicado = descuento_compra.descuento_aplicado;\r\n          datos.subtotal = descuento_compra.subtotal;\r\n          datos.impuestos = descuento_compra.impuestos;\r\n          datos.total = descuento_compra.total;\r\n          datos.descuento = descuento;\r\n        }\r\n        /* console.log(datos); */\r\n        const result = await crearCompra({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompra.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      limpiarCampos();\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error de servidor`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleDelete = () => {\r\n    if (productosCompra.length > 0) {\r\n      setOpenDelete(!openDelete);\r\n    } else {\r\n      limpiarCampos();\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      onClose={handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle style={{ padding: 0 }}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Nueva compra\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleToggleDelete}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n              <CancelarCompra\r\n                handleClose={handleClose}\r\n                handleToggleDelete={handleToggleDelete}\r\n                openDelete={openDelete}\r\n              />\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DatosProducto status={status} />\r\n        <Box my={2} />\r\n        <ListaCompras />\r\n      </DialogContent>\r\n\r\n      <DialogActions\r\n        style={{\r\n          justifyContent: status === \"enEspera\" ? \"flex-end\" : \"space-between\",\r\n        }}\r\n      >\r\n        {status === \"enEspera\" ? null : (\r\n          <Button\r\n            autoFocus\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => realizarCompraBD(true)} //realiza la compra en espera en la funcion\r\n            disabled={!productosCompra.length}\r\n            startIcon={<Timer />}\r\n          >\r\n            Compra en espera\r\n          </Button>\r\n        )}\r\n        <ConfirmarCompra realizarCompraBD={realizarCompraBD} />\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CancelarCompra = ({ handleClose, handleToggleDelete, openDelete }) => {\r\n  const {\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setPreciosVenta,\r\n    setProductoOriginal,\r\n    setDatosProducto,\r\n  } = useContext(ComprasContext);\r\n\r\n  const cancelarCompra = () => {\r\n    /* reset states */\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    /* cerrar modales */\r\n    handleToggleDelete();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={openDelete}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleToggleDelete}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          ¿Quieres cancelar esta compra?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleToggleDelete} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={cancelarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosComprasExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosComprasExcel from \"./ExportarProductosCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n        {compra.compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            compra.credito_pagado === true ? 'Credito pagado' : `Saldo pendiente: $${formatoMexico(compra.saldo_credito_pendiente)}`\r\n          }\r\n          color={compra.credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosComprasExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosDeCompra\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Compra a credito</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    compra_credito,\r\n    credito_pagado,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        {compra_credito === true ? (\r\n          <Chip\r\n          label={\r\n            credito_pagado === true ? 'Credito: Pagado' : \"Credito: Pendiente\"\r\n          }\r\n          color={credito_pagado === true ? \"primary\" : \"secondary\"}\r\n          variant=\"outlined\"\r\n        />\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaCompras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarComprasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcInspection className={classes.icon} />\r\n          </Box>\r\n          Compras realizadas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras realizadas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CheckCircle, Done, VerifiedUser } from \"@material-ui/icons\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VerificarProductosCompras({\r\n  compra,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setVerificado,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (success) {\r\n      setVerificado(true);\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={<VerifiedUser />}\r\n      >\r\n        Continuar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        /* onClose={() => handleClose()} */\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-verificarcompra-title\"\r\n        aria-describedby=\"dialog-verificarcompra-description\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <ModalVerificacion\r\n          handleClose={handleClose}\r\n          compra={compra}\r\n          handleClickOpen={handleClickOpen}\r\n          open={open}\r\n          nuevoArray={nuevoArray}\r\n          setNuevoArray={setNuevoArray}\r\n          setSuccess={setSuccess}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalVerificacion = ({\r\n  handleClose,\r\n  compra,\r\n  handleClickOpen,\r\n  open,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setSuccess,\r\n}) => {\r\n  const [loadingVerificacion, setLoadingVerificacion] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let count = 0;\r\n\r\n  /* Queries */\r\n  const [getQuery, { loading, data, error }] = useLazyQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      almacen: compra.almacen.id_almacen,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) count = 1;\r\n\r\n  useEffect(() => {\r\n    if (open && count === 0) {\r\n      getQuery();\r\n      count = 1;\r\n    }\r\n  }, [handleClickOpen]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      verificarProductos();\r\n    }\r\n  }, [data]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent\r\n          style={{\r\n            height: 150,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <DialogContentText id=\"dialog-verificarcompra-description\">\r\n            Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n            quitaran al retomar la compra para no causar conflictos, podras\r\n            editar tu compra mas adelante\r\n          </DialogContentText>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Obteniendo productos de la Base de datos...\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <ErrorPage error={error} altura={130} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos;\r\n\r\n  /* console.log(compra); */\r\n\r\n  function verificarProductos() {\r\n    setLoadingVerificacion(true);\r\n    const { productos } = compra;\r\n    let productos_nuevos = [...productos];\r\n    let conflicto = false;\r\n\r\n    for (let i = 0; i < productos.length; i++) {\r\n      const productosCompra = productos[i];\r\n      let copy_producto_compra = { ...productosCompra };\r\n      let copy_producto = { ...productosCompra.producto };\r\n\r\n      //Filtrar los productos\r\n      const productos_filtrados = obtenerProductos.filter(\r\n        (res) => res._id === copy_producto_compra.id_producto\r\n      );\r\n\r\n      const { precios, unidades_de_venta, presentaciones } = copy_producto;\r\n\r\n      const precios_base = productos_filtrados[0].precios;\r\n      const unidades_base = productos_filtrados[0].unidades_de_venta;\r\n      const presentaciones_base = productos_filtrados[0].medidas_producto;\r\n\r\n      //verificacion de Precios\r\n      if (\r\n        precios.unidad_de_compra.cantidad !==\r\n          precios_base.unidad_de_compra.cantidad ||\r\n        precios.unidad_de_compra.precio_unitario_con_impuesto !==\r\n          precios_base.unidad_de_compra.precio_unitario_con_impuesto ||\r\n        precios.unidad_de_compra.unidad !== precios_base.unidad_de_compra.unidad\r\n      ) {\r\n        /* console.log(\"conflicto precios\"); */\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.precios = precios_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n      }\r\n      //verificacion de Unidades de venta\r\n      const u_default = unidades_de_venta.filter((res) => res.default === true);\r\n      const u_default_base = unidades_base.filter(\r\n        (res) => res.default === true\r\n      );\r\n      if (\r\n        u_default[0].cantidad !== u_default_base[0].cantidad ||\r\n        u_default[0].precio !== u_default_base[0].precio ||\r\n        u_default[0].unidad !== u_default_base[0].unidad\r\n      ) {\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.unidades_de_venta = unidades_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n        /* console.log(\"conflicto unidades\"); */\r\n      }\r\n\r\n      //verificacion de Presentaciones si hay presentaciones\r\n\r\n      if (presentaciones.length > 0) {\r\n        /* console.log(presentaciones, presentaciones_base); */\r\n        if (presentaciones_base.length > 0) {\r\n          if (presentaciones.length === presentaciones_base.length) {\r\n            for (let x = 0; x < presentaciones.length; x++) {\r\n              const present = presentaciones[x];\r\n              for (let y = 0; y < presentaciones_base.length; y++) {\r\n                const present_base = presentaciones_base[y];\r\n\r\n                if (\r\n                  present.medida._id === present_base.medida._id &&\r\n                  present.color._id === present_base.color._id &&\r\n                  present.almacen === present_base.almacen\r\n                ) {\r\n                  if (\r\n                    present.cantidad !== present_base.cantidad ||\r\n                    present.precio !== present_base.precio\r\n                  ) {\r\n                    //si son diferentes se agrega las presentaciones_base al compra_nueva\r\n                    copy_producto.presentaciones = presentaciones_base;\r\n                    copy_producto_compra.producto = copy_producto;\r\n                    copy_producto_compra.conflicto = true;\r\n                    productos_nuevos[i] = copy_producto_compra;\r\n                    conflicto = true;\r\n                    /* console.log(\"conflicto presentaciones\"); */\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            //si son diferentes se agrega las presentaciones al compra_nueva\r\n            copy_producto.presentaciones = presentaciones_base;\r\n            copy_producto_compra.producto = copy_producto;\r\n            copy_producto_compra.conflicto = true;\r\n            productos_nuevos[i] = copy_producto_compra;\r\n            conflicto = true;\r\n            /* console.log(\"conflicto diferentes presentaciones \"); */\r\n          }\r\n        } else {\r\n          //si no hay se agrega las presentaciones al compra_nueva\r\n          copy_producto_compra.conflicto = true;\r\n          productos_nuevos[i] = copy_producto_compra;\r\n          conflicto = true;\r\n          /* console.log(\"conflicto sin presentaciones \"); */\r\n        }\r\n      }\r\n    }\r\n\r\n    const nuevo_producto_compra = [];\r\n    let subtotal = 0;\r\n    let impuestos = 0;\r\n    let total = 0;\r\n    if (conflicto) {\r\n      for (let k = 0; k < productos_nuevos.length; k++) {\r\n        const datosProducto = { ...productos_nuevos[k] };\r\n\r\n        if (datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n          //si es calzado o ropa\r\n          //CANTIDADES\r\n          if (datosProducto.producto.presentaciones.length > 0) {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n              const { cantidad, cantidad_nueva } = presentacion;\r\n              let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n              datosProducto.cantidad += cantidad + nueva;\r\n            });\r\n            if (isNaN(datosProducto.cantidad)) datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          } else {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          }\r\n        } else {\r\n          //Si es una unidad normal\r\n\r\n          //CANTIDADES\r\n          const { cantidad_regalo, cantidad, unidad_regalo } = datosProducto;\r\n          //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n          const factor =\r\n            datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n          const cantiad_media = cantidad * factor;\r\n          let cantidad_regalo_media =\r\n            unidad_regalo === \"Pz\" ||\r\n            unidad_regalo === \"Kg\" ||\r\n            unidad_regalo === \"Lt\"\r\n              ? cantidad_regalo\r\n              : cantidad_regalo * factor;\r\n          let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n          //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n          if (factor > 1) {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n            datosProducto.cantidad_total = cantidad_total_media / factor;\r\n          } else {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n            datosProducto.cantidad_total = cantidad_total_media;\r\n          }\r\n        }\r\n\r\n        //PRECIOS\r\n        const {\r\n          iva,\r\n          ieps,\r\n          precio_con_impuesto,\r\n          precio_sin_impuesto,\r\n        } = datosProducto.producto.precios.precio_de_compra;\r\n\r\n        datosProducto.total_con_descuento = precio_con_impuesto;\r\n        datosProducto.costo = precio_con_impuesto;\r\n        datosProducto.iva_total = iva * datosProducto.cantidad_total;\r\n        datosProducto.ieps_total = ieps * datosProducto.cantidad_total;\r\n        datosProducto.impuestos = (iva + ieps) * datosProducto.cantidad_total;\r\n        datosProducto.subtotal =\r\n          precio_sin_impuesto * datosProducto.cantidad_total;\r\n        datosProducto.total =\r\n          precio_con_impuesto * datosProducto.cantidad_total;\r\n\r\n        if (datosProducto.descuento_porcentaje > 0) {\r\n          datosProducto.descuento_precio = Math.round(\r\n            (precio_con_impuesto * datosProducto.descuento_porcentaje) / 100\r\n          );\r\n          datosProducto.total_con_descuento =\r\n            precio_con_impuesto - datosProducto.descuento_precio;\r\n        }\r\n\r\n        subtotal += datosProducto.subtotal;\r\n        impuestos += datosProducto.impuestos;\r\n        total +=\r\n          datosProducto.total_con_descuento * datosProducto.cantidad_total;\r\n\r\n        nuevo_producto_compra.push(datosProducto);\r\n      }\r\n      setNuevoArray({\r\n        _id: compra._id,\r\n        almacen: compra.almacen,\r\n        proveedor: compra.proveedor,\r\n        productos: nuevo_producto_compra,\r\n        en_espera: compra.en_espera,\r\n        fecha_registro: compra.fecha_registro,\r\n        impuestos,\r\n        subtotal,\r\n        total,\r\n      });\r\n    } else {\r\n      setNuevoArray(compra);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      setLoadingVerificacion(false);\r\n      setSuccess(true);\r\n    }, 1500);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent\r\n        style={{\r\n          height: 150,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <DialogContentText id=\"dialog-verificarcompra-description\">\r\n          Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n          quitaran al retomar la compra para no causar conflictos, podras editar\r\n          tu compra mas adelante\r\n        </DialogContentText>\r\n        {loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Verificando existencias en tus productos...\r\n          </Box>\r\n        ) : null}\r\n        {!loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CheckCircle color=\"primary\" style={{ marginRight: 8 }} />\r\n            Listo, producto verificados\r\n          </Box>\r\n        ) : null}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {loadingVerificacion ? (\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        ) : (\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Done />}>\r\n            Aceptar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport AbrirCompra from \"../AbrirCompra/AbrirCompra\";\r\nimport VerificarProductosCompras from \"./VerificarProductos\";\r\n\r\nimport {\r\n  Dialog,\r\n  CircularProgress,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { CheckCircle, DeleteOutlined, Done, Error } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /* let compra_temp = {...compra} */\r\n  const [compra_temp, setCompraTemp] = useState({ ...compra });\r\n  const { productos } = compra_temp;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const [nuevoArray, setNuevoArray] = useState();\r\n  const [verificado, setVerificado] = useState(false);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  useEffect(() => {\r\n    if (verificado && nuevoArray) {\r\n      setCompraTemp(nuevoArray);\r\n    }\r\n  }, [verificado]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra_temp.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra_temp.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${parseFloat(compra_temp.subtotal).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${parseFloat(compra_temp.impuestos).toFixed(2)}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${formatoMexico(parseFloat(compra_temp.total).toFixed(2))}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n                <ModalEliminarCompra\r\n                  compra={compra_temp}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n\r\n              {permisosUsuario.accesos.compras.compras_espera.editar === false ? (null) : (\r\n                verificado ? (\r\n                  <AbrirCompra\r\n                    compra={compra_temp}\r\n                    status=\"enEspera\"\r\n                    handleOpenDetalles={handleOpenDetalles}\r\n                    refetchEspera={refetch}\r\n                  />\r\n                ) : (\r\n                  <VerificarProductosCompras\r\n                    compra={compra_temp}\r\n                    nuevoArray={nuevoArray}\r\n                    setNuevoArray={setNuevoArray}\r\n                    setVerificado={setVerificado}\r\n                  />\r\n                )\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {verificado ? <TableCell /> : null}\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                /* console.log(datos); */\r\n                return (\r\n                  <TableRow\r\n                    tabIndex={-1}\r\n                    key={index}\r\n                    selected={datos.conflicto}\r\n                  >\r\n                    {verificado ? (\r\n                      <TableCell\r\n                        style={{\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                        }}\r\n                      >\r\n                        {datos.conflicto ? (\r\n                          <Error color=\"primary\" />\r\n                        ) : (\r\n                          <CheckCircle\r\n                            style={{\r\n                              color: theme.palette.success.main,\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    ) : null}\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalEliminarCompra = ({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n      handleOpenDetalles();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"secondary\"\r\n        startIcon={<DeleteOutlined />}\r\n        onClick={() => handleOpen()}\r\n      >\r\n        Eliminar compra\r\n      </Button>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DatosDeCompraEspera from \"./DatosDeCompraEspera\";\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, DeleteOutlined, Done } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaEnEspera({ obtenerComprasEnEspera, refetch }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Detalles</TableCell>\r\n              {permisosUsuario.accesos.compras.compras_espera.elimina === false ? (null) : (\r\n                <TableCell>Eliminar</TableCell>\r\n              )}\r\n              </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasEnEspera.map((compra, index) => (\r\n              <RenderRowsComprasEspera\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsComprasEspera = ({ compra, refetch, setAlert }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ModalContinuarCompra\r\n          compra={compra}\r\n          refetch={refetch}\r\n          setAlert={setAlert}\r\n        />\r\n      </TableCell>\r\n      {permisosUsuario.accesos.compras.compras_espera.eliminar === false ? (null) : (\r\n        <TableCell>\r\n          <ModalEliminarCompra\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalContinuarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra en espera\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompraEspera\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            handleOpenDetalles={handleOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <DeleteOutlined color=\"error\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useRef, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FcOvertime } from \"react-icons/fc\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport ListaEnEspera from \"./ListaEnEspera\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { OBTENER_COMPRAS_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasEnEspera() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcOvertime className={classes.icon} />\r\n          </Box>\r\n          Compras en espera\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras en espera\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COMPRAS_ESPERA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasEnEspera = [];\r\n  if (data) obtenerComprasEnEspera = data.obtenerComprasEnEspera;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value });\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3} maxWidth={500}>\r\n        <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n          <TextField\r\n            inputRef={searchfilter}\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Buscar una compra...\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                    <SearchOutlined />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </form>\r\n      </Box>\r\n      <ListaEnEspera obtenerComprasEnEspera={obtenerComprasEnEspera} refetch={refetch} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport AbrirCompra from './AbrirCompra/AbrirCompra';\r\nimport ComprasRealizadas from './ComprasRealizadas/ComprasRealizadas';\r\n/* import CargaMasiva from './CargaMasiva/CargaMasiva'; */\r\nimport ComprasEnEspera from './ComprasEnEspera/ComprasEnEspera';\r\n\r\n\r\nexport default function Compras() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t{permisosUsuario.accesos.compras.abrir_compra.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<AbrirCompra />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_realizadas.ver === false ? (null):(\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasRealizadas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{permisosUsuario.accesos.compras.compras_espera.ver === false ? (null):(\r\n                <Grid item md={4}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<ComprasEnEspera />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t\t{/* <Grid item md={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CargaMasiva />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useContext, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CLIENTES,\r\n  ACTUALIZAR_CLIENTE,\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaClientes({\r\n  user,\r\n  tipo,\r\n  filtro,\r\n  ventas,\r\n  handleClickOpen,\r\n}) {\r\n  const classes = useStyles();\r\n  const { setUpdateClientVenta, updateClientVenta } = useContext(\r\n    ClienteCtx\r\n  );\r\n  const [value] = useDebounce(filtro, 1000);\r\n  const [selectDataClient, setSelectDataClient] = useState(false);\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo, filtro: value },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  /* useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]); */\r\n\r\n  //show modal accept client\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const [dataSelectRowClient, setDataSelectRowClient] = useState({});\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpenModal = (data, e) => {\r\n    if (ventas && !selectDataClient) {\r\n      setShowModal(true);\r\n      setDataSelectRowClient(data);\r\n    }\r\n  };\r\n\r\n  const handleClickSelectClient = () => {\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero:\r\n            venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          cliente: dataSelectRowClient,\r\n          venta_cliente: true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n        })\r\n      );\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setShowModal(!showModal);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n        width=\"120vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"110\">No. Cliente</TableCell>\r\n                <TableCell width=\"100\">Clave</TableCell>\r\n                <TableCell width=\"200\">Nombre</TableCell>\r\n                <TableCell width=\"150\">Correo</TableCell>\r\n                <TableCell width=\"200\">Fecha Registro</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"100\">Estado</TableCell>\r\n                )}\r\n                <TableCell width=\"50\">Editar</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"50\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    user={user}\r\n                    key={index}\r\n                    datos={row}\r\n                    handleClickOpenModal={handleClickOpenModal}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Dialog\r\n          open={showModal}\r\n          onClose={() => setShowModal(false)}\r\n          aria-labelledby=\"select-dialog-cliente-venta\"\r\n          aria-describedby=\"select-cliente-venta-description\"\r\n        >\r\n          <DialogTitle id=\"select-dialog-cliente-venta\">\r\n            {\" Estas seguro que desea seleccionar este cliente ?\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"select-cliente-venta-description\">\r\n              Al seleccionar el cliente se colocara en la venta.\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => setShowModal(false)}\r\n              color=\"primary\"\r\n              autoFocus\r\n            >\r\n              cancelar\r\n            </Button>\r\n            <Button onClick={() => handleClickSelectClient()} color=\"primary\">\r\n              Aceptar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  user,\r\n  handleClickOpenModal,\r\n  setAlert,\r\n  refetch,\r\n}) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* console.log(datos); */\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            estado_cliente: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      /* setUpdate(!update); */\r\n      refetch();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleClickOpenModal(datos, e)}\r\n      >\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n        </TableCell>\r\n        {user === \"EMPLEADO\" ? null : (\r\n          <TableCell>\r\n            {loading ? (\r\n              <CircularProgress size={30} />\r\n            ) : (\r\n              <Switch\r\n                checked={datos.estado_cliente}\r\n                onChange={cambiarEstado}\r\n                color=\"primary\"\r\n              />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <CrearCliente\r\n              tipo=\"CLIENTE\"\r\n              accion=\"actualizar\"\r\n              datos={datos}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <EliminarCliente\r\n              datos={datos}\r\n              setAlert={setAlert}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FcManager } from \"react-icons/fc\";\r\nimport { Box, Grid, IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"./ListaClientes\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cliente() {\r\n  const classes = useStyles();\r\n\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ClienteProvider>\r\n        <Button onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcManager className={classes.icon} />\r\n            </Box>\r\n            Cliente\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Cliente\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Box mx={4} my={3}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={6} xs={8}>\r\n                <Paper className={classes.root}>\r\n                  <InputBase\r\n                    fullWidth\r\n                    placeholder=\"Buscar cliente...\"\r\n                    onChange={(e) => setValues(e.target.value)}\r\n                    onKeyPress={pressEnter}\r\n                    value={values}\r\n                  />\r\n                  <IconButton onClick={() => setValues(values)}>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Grid>\r\n              <Grid\r\n                item\r\n                md={6}\r\n                xs={4}\r\n                style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n              >\r\n                {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n                false ? null : (\r\n                  <CrearCliente tipo=\"CLIENTE\" accion=\"registrar\" />\r\n                )}\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box mx={4}>\r\n            <ListaClientes tipo=\"CLIENTE\" filtro={values} />\r\n          </Box>\r\n        </Dialog>\r\n      </ClienteProvider>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRAR_DESCUENTOS = gql`\r\n\tmutation CrearDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        crearDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DESCUENTOS = gql`\r\n\tmutation ActualizarDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        actualizarDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const DESACTIVAR_DESCUENTOS = gql`\r\n\tmutation DesactivarDescuentoUnidad($input: ActivarDescuentoUnidades , $id: ID!){\r\n        desactivarDescuentoUnidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DESCUENTOS = gql`\r\n\tmutation ELiminarDescuentoUnidad( $id: ID!){\r\n        eliminarDescuentoUnidad( id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Delete } from '@material-ui/icons';\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Button, Dialog, DialogActions, DialogTitle, IconButton, Switch, Tooltip } from '@material-ui/core';\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport {  DESACTIVAR_DESCUENTOS, ELIMINAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\n\r\nconst headCells = [\r\n\t{ id: 'cantidad',  label: 'Cantidad' },\r\n\t{ id: 'tipo',  label: 'Tipo' },\r\n\t{ id: 'precio',  label: 'Precio U.' },\r\n\t{ id: 'precioDes',  label: 'Precio Desc.' },\r\n\t{ id: 'descuento',  label: '% Desc.' },\r\n\t{ id: 'eliminar',  label: 'Eliminar'},\r\n\t{ id: 'activo',  label: 'Activo'}\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount, datosPrecios } = props;\r\n\tlet variable = false;\r\n\tdatosPrecios?.forEach(element => {\r\n\t\tif (element.medida) {\r\n\t\t\treturn variable = true;\r\n\t\t}\r\n\t});\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t\t{ variable === true ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell>Talla</TableCell>\r\n\t\t\t\t\t\t<TableCell>Color</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t): null}\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\theight: 300\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: \"1px solid rgba(0,0,0, .3)\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: \"15%\",\r\n\t\tcursor: \"pointer\",\r\n\t  },\r\n}));\r\n\r\nexport default function TablaPreciosDescuentos(\r\n\t{ \r\n\t\tvalue,\r\n\t\tdatos,\r\n\t\tsetCleanList, \r\n\t\tcleanList, \r\n\t\tverificarDatos, \r\n\t\tsetPrecioPrueba,\r\n\t\tproductosRefetch,\r\n\t\tsetLoading,\r\n\t\tloading\r\n\t}\r\n\t) {\r\n\tconst classes = useStyles();\r\n\tconst { \r\n\t\t//es este \r\n\t\tdatosPreciosProducto, \r\n        setPreciosProductos,\r\n\t\tsetDatosPreciosProducto\r\n    } = useContext(RegProductoContext);\r\n\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tvar porcentaje  =  parseFloat((100 - value).toFixed(6));\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tif(datos){\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n\t\t\tsetDatosPreciosProducto(datos.medidas_producto);\r\n\t\t}else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = datosPreciosProducto.map((n) => n);\r\n\t\t\tsetSelected(newSelecteds); \r\n\t\t\tverificarDatos(newSelecteds);\r\n\t\t\tsetPreciosProductos(newSelecteds);\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tsetPreciosProductos([]); \r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, _id) => {\r\n\t\tconst selectedIndex = selected.indexOf(_id);\r\n\t\tlet newSelected = [];\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, _id);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\t\tsetPrecioPrueba(newSelected.length === 0 ? 0 : newSelected);\r\n\t\tsetPreciosProductos(newSelected);\r\n\t\tverificarDatos(newSelected);\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetSelected([]);\r\n\t\tsetCleanList(false);\r\n\t}, [cleanList]);\r\n\r\n\tconst isSelected = (_id) => selected.indexOf(_id) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, datosPreciosProducto.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<TableContainer className={classes.table}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={datosPreciosProducto.length}\r\n\t\t\t\t\t\t\tdatosPrecios={datosPreciosProducto}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{datosPreciosProducto.map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t    setLoading={setLoading}\r\n\t\t\t\t\t\t\t\t\t\tproductosRefetch={productosRefetch}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={handleClick} \r\n\t\t\t\t\t\t\t\t\t\tselected={selected} \r\n\t\t\t\t\t\t\t\t\t\trow={row}\r\n\t\t\t\t\t\t\t\t\t\tsetAlert={setAlert}\r\n\t\t\t\t\t\t\t\t\t\tporcentaje={porcentaje}\r\n\t\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\t\tdatos={datos}\r\n\t\t\t\t\t\t\t\t\t\tisItemSelected={isItemSelected} \r\n\t\t\t\t\t\t\t\t\t\tlabelId={labelId} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({row, value, isItemSelected, setLoading, datos, labelId, setAlert, porcentaje, productosRefetch, handleClick, selected}) {\r\n\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n\tconst { \r\n        setDatosPreciosProducto,\r\n    } = useContext(RegProductoContext);\r\n\tconst [ DesactivarDescuentoUnidad ] = useMutation(DESACTIVAR_DESCUENTOS);\r\n\tconst [ ELiminarDescuentoUnidad ] = useMutation(ELIMINAR_DESCUENTOS);\r\n\r\n\tconst handleChangeActivo = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait DesactivarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tdescuento_activo: !row.descuento_activo,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tid: row._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetLoading(false);\r\n\t\t\tproductosRefetch();\r\n\t\t\tsetAlert({ message: 'Estado de descuento actualizado', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Ocurrio un problema en el servidor' , status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleModal = () => {\r\n\t\tsetOpenModal(!openModal);\r\n\t\teditarDatos();\r\n\t};\r\n\t\r\n\tconst editarDatos = () => {\r\n\t\tif (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n\t\t\tsetLoading(false);\r\n        }else{\r\n\t\t\tsetDatosPreciosProducto(datos.unidades_de_venta);\r\n\t\t\tsetLoading(false);\r\n        }\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tproductosRefetch();\r\n\t\t\tconst resultado = await ELiminarDescuentoUnidad({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\thandleModal();\r\n\t\t\teditarDatos();\r\n\t\t\tsetAlert({ message: resultado.data.eliminarDescuentoUnidad.message, status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<TableRow\r\n\t\t\thover\r\n\t\t\trole=\"checkbox\"\r\n\t\t\taria-checked={isItemSelected}\r\n\t\t\ttabIndex={-1}\r\n\t\t\tkey={row._id}\r\n\t\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\thandleClick(event, row)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.cantidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row?.unidad}</TableCell>\r\n\t\t\t<TableCell align=\"center\">{row.precio}</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{\r\n\t\t\t\t\tisItemSelected === true && selected.length > 1 ? <b style={{color: 'green'}}> ${parseFloat((row.precio * porcentaje / 100).toFixed(2))} </b>\r\n\t\t\t\t\t: (row.descuento === null ? 0 : <b style={{color: 'green'}}> ${row.descuento.precio_neto} </b> )\r\n\t\t\t\t}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t{isItemSelected === true && selected.length > 1 ? <b style={{color: 'red'}}> {value}% </b> : (!row.descuento || row.descuento === null ? 0 : <b style={{color: 'red'}}> {row.descuento.porciento}% </b>)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Modal row={row} handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell key={row._id} align=\"center\">\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\tonChange={handleChangeActivo}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t\t : ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t\t\tdefaultChecked={row.descuento_activo ? row.descuento_activo : false}\r\n\t\t\t\t\tname=\"descuento_activo\"\r\n\t\t\t\t\tinputProps={{ 'aria-label': 'secondary checkbox' }}\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{\r\n\t\t\t\trow.medida ? (\r\n\t\t\t\t\t<TableCell align=\"center\">{row?.medida?.talla}</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\trow.color ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={row?.color?.nombre}\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t\tarrow\r\n\t\t\t\t\t\t\tTransitionComponent={Zoom}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor:row?.color?.hex,\r\n\t\t\t\t\t\t\t\t\tcolor: theme.palette.getContrastText(row?.color?.hex),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) :(\r\n\t\t\t\t\tnull\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</TableRow>\r\n\t)\r\n};\r\n\r\n// MODAL PARA ELIMINAR EL DESCUENTO DE LOS PRODUCTOS\r\nconst Modal = ({row, handleModal, openModal, handleDelete }) => {\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton \r\n\t\t\t\tcolor=\"secondary\" \r\n\t\t\t\tonClick={handleModal}\r\n\t\t\t\tdisabled={ !row.descuento ? true \r\n\t\t\t\t\t: ( row.descuento.porciento === 0 ? true : false ) }\r\n\t\t\t>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useCallback, useContext, useState } from 'react';\r\n\r\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\r\nimport { Button, Dialog, makeStyles, DialogTitle, DialogContent, Grid, Box, Typography, TextField, Slider, IconButton } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport TablaPreciosDescuentos from './ListaPrecios';\r\n\r\nimport {  REGISTRAR_DESCUENTOS } from '../../../../../gql/Catalogos/descuentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../../components/Layouts/BackDrop';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tavatarGroup: {\r\n\t\t'& > .MuiAvatarGroup-avatar': {\r\n\t\t\twidth: theme.spacing(8),\r\n\t\t\theight: theme.spacing(8)\r\n\t\t}\r\n\t},\r\n\troot: {\r\n\t\twidth: 400\r\n\t},\r\n    rootSlice:{\r\n        width: 350\r\n    },\r\n\tmargin: {\r\n\t\theight: theme.spacing(3)\r\n\t},\r\n    rootTable:{\r\n        height: 300\r\n    }\r\n}));\r\n\r\nexport default function DescuentoProductos({datos, productosRefetch}) {\r\n    const [ CrearDescuentoUnidad ] = useMutation(REGISTRAR_DESCUENTOS);\r\n    const { \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n    } = useContext(RegProductoContext);\r\n\r\n    let iva = datos.precios.iva;\r\n    let ieps = datos.precios.ieps;\r\n    // Precio compra sin impuestos y sin utilidad\r\n    let PCSI = datos.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ openDescuento, setOpenDescuento ] = useState(false);\r\n    const [ cleanList, setCleanList ] = useState(false);\r\n    const [ validate ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n\r\n    const [ precioPrueba, setPrecioPrueba ] = useState(0);\r\n    const [ value, setValue] =  useState(0);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleCloseDescuentos = () => {\r\n        if (datos.medidas_producto.length > 0) {\r\n            setDatosPreciosProducto(datos.medidas_producto);\r\n            setLoading(false);\r\n        }else{\r\n            setDatosPreciosProducto(datos.unidades_de_venta);\r\n            setLoading(false);\r\n        }\r\n        setPrecioPrueba(0);\r\n        setValue(0);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n    };\r\n\r\n    const cerrarModal =()=>{\r\n        setOpenDescuento(!openDescuento);\r\n        handleCloseDescuentos();\r\n    }\r\n\r\n    const verificarDatos = useCallback(\r\n        (datos) => {\r\n            for (let i = 0; i < datos.length; i++) {\r\n                if (datos[i].descuento) {\r\n                    if ( datos[i].descuento.porciento !== 0) {\r\n                        setValue(datos[i].descuento.porciento);\r\n                        if (datos.length === 1) {\r\n                            setPrecioPrueba(datos[i].descuento.precio_neto);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n    },\r\n        [datos]\r\n    );\r\n    \r\n    let arrayDescuento = [];\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        preciosDescuentos.splice(0, preciosDescuentos.length);\r\n\r\n        for (let i = 0; i < preciosProductos.length; i++) {\r\n            let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let dineroDescontado = 0; \r\n            let cantidad_unidad = preciosProductos[i].precio_unidad.cantidad_unidad;\r\n\r\n            PVCDSI = parseFloat((preciosProductos[i].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[i].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat(((( PVCDSI - PCSI ) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                _id: preciosProductos[i]._id,\r\n                descuento_activo: true,\r\n                descuento:{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[i].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[i].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: newValue,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n\r\n            setPrecioPrueba(precio_neto);\r\n            if (preciosProductos.length !== 1) {\r\n                preciosDescuentos.push(arrayDescuento);\r\n            }else{\r\n                setPreciosDescuentos([arrayDescuento]);\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n        if (preciosProductos.length === 1) {\r\n            setPrecioPrueba(valorText);\r\n            \r\n            let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n            let PVSI = parseFloat((valorText / (suma_impuestos+1)).toFixed(2));\r\n\r\n            let cantidad_unidad = preciosProductos[0].precio_unidad.cantidad_unidad;\r\n            let dineroDescontado = 0;\r\n            let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n            let porcentaje  = parseFloat(((PVSI / preciosProductos[0].precio_unidad.precio_venta) * 100).toFixed(2));\r\n            let descuento = parseFloat((100 - porcentaje).toFixed(2));\r\n\r\n            PVCDSI = parseFloat((preciosProductos[0].precio_unidad.precio_venta * porcentaje / 100).toFixed(2));\r\n            dineroDescontado = parseFloat((preciosProductos[0].precio_unidad.precio_venta - PVCDSI).toFixed(2));\r\n\r\n            let iva_precio = parseFloat((PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)));\r\n            let ieps_precio = parseFloat((PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)));\r\n            let utilidad = parseFloat((((PVCDSI - PCSI) / PCSI) * 100).toFixed(2));\r\n            let precio_neto = parseFloat((PVCDSI + iva_precio + ieps_precio).toFixed(2));\r\n            let precio_general = parseFloat((precio_neto * cantidad_unidad).toFixed(2));\r\n\r\n            arrayDescuento = {\r\n                \"_id\": preciosProductos[0]._id,\r\n                \"descuento_activo\": true,\r\n                \"descuento\":{\r\n                    cantidad_unidad: cantidad_unidad,\r\n                    numero_precio: preciosProductos[0].precio_unidad.numero_precio,\r\n                    unidad_maxima: preciosProductos[0].precio_unidad.unidad_maxima,\r\n                    precio_general: precio_general,\r\n                    precio_neto: precio_neto,\r\n                    precio_venta: PVCDSI,\r\n                    iva_precio: iva_precio,\r\n                    ieps_precio: ieps_precio,\r\n                    utilidad: utilidad,\r\n                    porciento: descuento,\r\n                    dinero_descontado: dineroDescontado,\r\n                }\r\n            };\r\n            \r\n            setValue(descuento);\r\n            setPreciosDescuentos([arrayDescuento]);\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const saveData = async () => {\r\n        setLoading(true);\r\n\t\ttry {\r\n            await CrearDescuentoUnidad({\r\n                variables: {\r\n                    input: {\r\n                        descuentos: preciosDescuentos\r\n                    }\r\n                }\r\n            });\r\n            handleCloseDescuentos()\r\n            productosRefetch();\r\n            setValue(0);\r\n            setPreciosProductos([]);\r\n            setPreciosDescuentos([]);\r\n            setCleanList(!cleanList);\r\n            setAlert({ message: '¡Listo descuentos realizados!', status: 'success', open: true });\r\n\t\t} catch (error) {\r\n            setAlert({ message: '¡Oh no, ocurrio un problema con el servidor!', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n    const validacion = () => {\r\n        if (datos.medidas_producto.length > 0 ) {\r\n            for (let i = 0; i < datos.medidas_producto.length; i++) {\r\n                if (datos.medidas_producto[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }else{\r\n            for (let i = 0; i < datos.unidades_de_venta.length; i++) {\r\n                if (datos.unidades_de_venta[i]?.descuento_activo === true) {\r\n                    return \"primary\";\r\n                }else{\r\n                    return \"default\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <IconButton\r\n                color={validacion()}\r\n                onClick={cerrarModal}\r\n                disabled={datos.inventario_general && datos.inventario_general.length > 0 && datos.inventario_general[0].eliminado === true}\r\n            >\r\n               <LocalOfferIcon />\r\n            </IconButton>\r\n            <Dialog open={openDescuento} onClose={handleCloseDescuentos} fullWidth maxWidth=\"lg\">\r\n            <BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t\t<DialogTitle>\r\n                    <Grid container>\r\n                        <Box flexGrow={1} display=\"flex\" alignItems=\"center\">\r\n                            {'Descuento de Producto'}\r\n                        </Box>\r\n                        <Box m={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={cerrarModal} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre comercial: </b>\r\n                            {datos.datos_generales.nombre_comercial ? datos.datos_generales.nombre_comercial : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography>\r\n                            <b>Nombre genérico: </b>\r\n                            {datos.datos_generales.nombre_generico ? datos.datos_generales.nombre_generico : '-'}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Grid container>\r\n                        <Grid item lg={8} md={6} xs={12}> \r\n                            <Box p={1}>\r\n                                <TablaPreciosDescuentos\r\n                                    verificarDatos={verificarDatos}\r\n                                    productosRefetch={productosRefetch}\r\n                                    datos={datos}\r\n                                    value={value}\r\n                                    cleanList={cleanList}\r\n                                    setCleanList={setCleanList}\r\n                                    setPrecioPrueba={setPrecioPrueba}\r\n                                    setLoading={setLoading}\r\n                                    loading={loading}\r\n                                />\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={4} md={6} xs={12}> \r\n                            <Box mt={5} dislay=\"flex\" justifyContent=\"center\">\r\n                                <div className={classes.root}>\r\n                                    <Box textAlign=\"center\">\r\n                                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                                            <b>Porcentaje de descuento</b>\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box my={5} />\r\n                                    <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                        <Slider\r\n                                            disabled={preciosProductos.length === 0 ? true : false}\r\n                                            getAriaValueText={valuetext}\r\n                                            value={value.toFixed(2)}\r\n                                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                                            valueLabelDisplay=\"auto\"\r\n                                            onChange={obtenerPorcientoSlide} \r\n                                        />\r\n                                    </Box>\r\n                                </div>\r\n                            </Box>\r\n                            <Box mt={5} display=\"flex\" justifyContent=\"center\">\r\n                                {preciosProductos.length === 1 ? ( \r\n                                    <div>\r\n                                        <Typography>Precio con Descuento</Typography>\r\n                                        <TextField\r\n                                            type=\"number\"\r\n                                            InputProps={{ inputProps: { min: 0} }}\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            value={ precioPrueba }\r\n                                            onChange={(e) => obtenerPrecioText(e)}\r\n                                        />\r\n                                    </div>\r\n                                ) : (\r\n                                    null\r\n                                )}\r\n\r\n                            </Box>\r\n                            <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                                <Button \r\n                                    disabled={preciosProductos.length === 0 || validate === true ? true : false}\r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    size=\"large\"\r\n                                    onClick={saveData}\r\n                                >\r\n                                    Guardar \r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_PRODUCTO } from \"../../../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ datos, productosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { actualizarLista, setActualizarLista, setAlert } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setActualizarLista(!actualizarLista);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton\r\n        onClick={() => handleToggleModal()}\r\n        disabled={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? true\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? true\r\n              : false\r\n          }\r\n      >\r\n        <Delete\r\n          color={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? \"disabled\"\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? \"disabled\"\r\n              : \"error\"\r\n          }\r\n        />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport DescuentoProductos from \"./Descuentos/Descuento\";\r\nimport EliminarProducto from \"./EliminarProducto\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n\t'& ::-webkit-scrollbar': {\r\n\t\tdisplay: 'none'\r\n\t}\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({ obtenerProductos, productosRefetch }) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Codigo barras</TableCell>\r\n              <TableCell>Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell>Existencia</TableCell>\r\n              <TableCell>Tipo</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody className=\"hide-scroll\">\r\n            {obtenerProductos.map((producto, index) => {\r\n              return (\r\n                <RenderTableRows\r\n                  key={index}\r\n                  producto={producto}\r\n                  productosRefetch={productosRefetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ producto, productosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>{producto.datos_generales.codigo_barras}</TableCell>\r\n        <TableCell>{producto.datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{producto.datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell>\r\n          {producto.inventario_general.map(\r\n            (existencia) =>\r\n              `${existencia.cantidad_existente} ${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.tipo_producto}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.editar === false ? (null):(\r\n            <CrearProducto\r\n              accion={true}\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <DescuentoProductos\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.agregar === false ? (null):(\r\n            <EliminarProducto\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Publish, Close } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTIVAR_PRODUCTOS,\r\n  PRODUCTOS_ELIMINADOS,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProdcutosEliminados({ productosActivosRefetch }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"primary\"\r\n        onClick={handleModalToggle}\r\n        size=\"large\"\r\n        startIcon={<RestoreFromTrash />}\r\n      >\r\n        Productos inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-productos-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-productos-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Productos inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TablaProductosEliminados\r\n            productosActivosRefetch={productosActivosRefetch}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TablaProductosEliminados = ({ productosActivosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { actualizarLista } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(PRODUCTOS_ELIMINADOS, {\r\n    variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, actualizarLista]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay productos inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerProductosInactivos } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">Código de barras</TableCell>\r\n              <TableCell align=\"left\">Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerProductosInactivos.map((producto, index) => (\r\n              <RenderProductosTabla\r\n                key={index}\r\n                datos={producto}\r\n                refetch={refetch}\r\n                productosActivosRefetch={productosActivosRefetch}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderProductosTabla = ({ datos, refetch, productosActivosRefetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const { datos_generales } = datos.producto;\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n\r\n  const [activarProducto] = useMutation(ACTIVAR_PRODUCTOS);\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  const reactivarProducto = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await activarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      refetch();\r\n      productosActivosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.activarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleDeleteToggle();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell align=\"left\">{datos_generales.codigo_barras}</TableCell>\r\n        <TableCell align=\"left\">{datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell align=\"right\">\r\n          {loading ? (\r\n            <IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n              <CircularProgress size={26} />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n              <Publish />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-producto-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-producto-dialog\">\r\n          {\"Se reactivará este producto\"}\r\n        </DialogTitle>\r\n        {/* <SnackBarMessages alert={alert} setAlert={setAlert} />        */}\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => reactivarProducto()} color=\"primary\" autoFocus>\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Search, Close, ArrowBack } from \"@material-ui/icons\";\r\nimport ProductosEliminados from \"./ProductosEliminados\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Productos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { alert, setAlert } = useContext(RegProductoContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Productos\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Productos\r\n            </Typography>\r\n\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RegistroComponent />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RegistroComponent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [existencias, setExistencias] = useState(true);\r\n  const [value, setValue] = useState(0);\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    if (value === 0) {\r\n      setExistencias(true);\r\n    } else {\r\n      setExistencias(false);\r\n    }\r\n  };\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n      filtro,\r\n      existencias,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerProductos } = data;\r\n\r\n  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    if (busqueda === \"\") {\r\n      setFiltro(\"\");\r\n      refetch({ filtro: \"\" });\r\n      return;\r\n    }\r\n    setFiltro(busqueda);\r\n  };\r\n\r\n  const reload = () => {\r\n    setBusqueda(\"\");\r\n    setFiltro(\"\");\r\n    refetch({ filtro: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box mx={4} my={3} display=\"flex\">\r\n        <Box style={{ width: \"500px\" }}>\r\n          <form\r\n            onSubmit={filtrarProductos}\r\n            style={{ display: \"flex\", alignItems: \"center\" }}\r\n          >\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            {filtro !== \"\" ? (\r\n              <IconButton color=\"primary\" onClick={() => reload()}>\r\n                <ArrowBack />\r\n              </IconButton>\r\n            ) : null}\r\n          </form>\r\n        </Box>\r\n\r\n        <Box flexGrow={1} />\r\n        <Box display=\"flex\">\r\n          <ProductosEliminados productosActivosRefetch={refetch} />\r\n          <Box mx={1} />\r\n          {sesion.accesos.catalogos.productos.agregar === false ? null : (\r\n            <CrearProducto accion={false} productosRefetch={refetch} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box mx={4}>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            indicatorColor=\"primary\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n          >\r\n            <Tab label=\"Productos de Sucursal\" />\r\n            <Tab label=\"Todos los productos\" />\r\n          </Tabs>\r\n        </div>\r\n        <ListaProductos\r\n          obtenerProductos={obtenerProductos}\r\n          productosRefetch={refetch}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../../context/Catalogos/CtxRegProducto'\r\nimport Productos from './Productos'\r\n \r\nexport default function ProductoIndex(){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <Productos />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_TALLA } from \"../../../../gql/Catalogos/tallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaTallas({\r\n  tipo,\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.talla.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mb={1}>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Buscar...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onChange={(e) => setBusqueda(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>{tipo === \"ROPA\" ? \"Talla\" : \"Número\"}</TableCell>\r\n                {sesion.accesos.catalogos.tallas_numeros.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.tallas_numeros.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => (\r\n                <RowsRender\r\n                  key={index}\r\n                  row={row}\r\n                  setAlert={setAlert}\r\n                  tipo={tipo}\r\n                  toUpdate={toUpdate}\r\n                  setToUpdate={setToUpdate}\r\n                  setValue={setValue}\r\n                  refetch={refetch}\r\n                />\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  tipo,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n  const [eliminarTalla] = useMutation(ELIMINAR_TALLA);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resp = await eliminarTalla({\r\n        variables: {\r\n          id: row._id,\r\n          input: {\r\n            tipo: tipo,\r\n            talla: \"\",\r\n          },\r\n        },\r\n      });\r\n\r\n      let msgAlert = {\r\n        message: resp.data.eliminarTalla.message,\r\n        status: \"success\",\r\n        open: true,\r\n      };\r\n      setAlert(msgAlert);\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      handleModal();\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setValue(\"\");\r\n      return;\r\n    }\r\n    setToUpdate(dato._id);\r\n    setValue(dato.talla);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        selected={toUpdate === row._id ? true : false}\r\n      >\r\n        <TableCell>\r\n          <Typography>\r\n            <b>{row.talla}</b>\r\n          </Typography>\r\n        </TableCell>\r\n        {sesion.accesos.catalogos.tallas_numeros.editar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            {toUpdate === row._id ? (\r\n              <IconButton onClick={() => onUpdate()}>\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton onClick={() => onUpdate(row)}>\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        {sesion.accesos.catalogos.tallas_numeros.eliminar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            <Modal\r\n              handleModal={handleModal}\r\n              openModal={openModal}\r\n              handleDelete={handleDelete}\r\n            />\r\n          </TableCell>\r\n        )}\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaTallas from \"./ListaTallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_TALLAS,\r\n  CREAR_TALLAS,\r\n  ACTUALIZAR_TALLA,\r\n} from \"../../../../gql/Catalogos/tallas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nexport default function RegistroTallas({ tipo }) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading_bd, setLoadingBD] = useState({ loading: false, tipo: \"\" });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_TALLAS, {\r\n    variables: { sucursal: sesion.sucursal._id, tipo },\r\n  });\r\n  /* Mutations */\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n  const [actualizarTalla] = useMutation(ACTUALIZAR_TALLA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerTallas } = data;\r\n\r\n  const GuardarDatosBD = async () => {\r\n    setLoadingBD({ loading: true, tipo });\r\n    let resp;\r\n    if (!value) {\r\n      return;\r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.tallas_numeros.editar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const talla_actualizada = cleanTypenames(nueva_talla);\r\n          resp = await actualizarTalla({\r\n            variables: {\r\n              input: {\r\n                talla: talla_actualizada,\r\n                tipo,\r\n              },\r\n              id: toUpdate,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.tallas_numeros.agregar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearTalla({\r\n            variables: {\r\n              input: {\r\n                talla: nueva_talla,\r\n                tipo,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setValue(\"\");\r\n      setToUpdate(\"\");\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      let msgAlert = toUpdate\r\n        ? {\r\n            message: resp.data.actualizarTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          }\r\n        : {\r\n            message: resp.data.crearTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          };\r\n      setAlert(msgAlert);\r\n    } catch (error) {\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      <Box my={2}>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          <Grid item>\r\n            {tipo === \"ROPA\" ? (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shirt.svg\"\r\n                alt=\"icono tallas\"\r\n                style={{ width: 40 }}\r\n              />\r\n            ) : (\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/shoes.svg\"\r\n                alt=\"icono numeros\"\r\n                style={{ width: 40 }}\r\n              />\r\n            )}\r\n          </Grid>\r\n          <Grid item>\r\n            <TextField\r\n              id=\"outlined-error-helper-text\"\r\n              label={tipo === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              value={value}\r\n              onChange={(e) => setValue(e.target.value)}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              disabled={loading_bd.loading}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              disableElevation\r\n              onClick={GuardarDatosBD}\r\n              disabled={loading_bd.loading && loading_bd.tipo === tipo}\r\n              startIcon={\r\n                loading_bd.loading && loading_bd.tipo === tipo ? (\r\n                  <CircularProgress color=\"inherit\" size={20} />\r\n                ) : (\r\n                  <Add />\r\n                )\r\n              }\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <TablaTallas\r\n        datos={obtenerTallas}\r\n        tipo={tipo}\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        setValue={setValue}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport RegistroTallas from \"./RegistroTallas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Tallas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas.svg\"\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Tallas y numeros\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Tallas y números\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container>\r\n          {/* <Box p={1} my={3} border={1} display=\"flex\" justifyContent=\"center\">\r\n            [DESCRIPCION]\r\n          </Box> */}\r\n          <Box>\r\n            <Grid container spacing={5}>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t  \t<RegistroTallas tipo=\"ROPA\" />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n\t\t\t  \t<RegistroTallas tipo=\"CALZADO\" />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONTABILIDAD = gql`\r\n    query obtenerContabilidad($empresa: ID!, $sucursal: ID!){\r\n        obtenerContabilidad(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_servicio\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONTABILIDAD = gql`\r\n    mutation CrearContabilidad($input: ContabilidadInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearContabilidad(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONTABILIDAD = gql`\r\n    mutation ActualizarContabilidad($input: ContabilidadInput, $id: ID!){\r\n        actualzarContabilidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONTABILIDAD = gql`\r\n    mutation EliminarContabilidad($id: ID!){\r\n        eliminarContabilidad(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  makeStyles,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CONTABILIDAD,\r\n  ELIMINAR_CONTABILIDAD,\r\n} from \"../../../../gql/Catalogos/contabilidad\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\"\r\n  },\r\n}));\r\n\r\nexport default function TablaServicios({\r\n  setData,\r\n  setIdService,\r\n  idService,\r\n  setAccion,\r\n  updateData,\r\n  setAlert,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  let obtenerContabilidad = [];\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONTABILIDAD, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const [EliminarContabilidad] = useMutation(ELIMINAR_CONTABILIDAD);\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [updateData, refetch]);\r\n\r\n  if (data) {\r\n    obtenerContabilidad = data.obtenerContabilidad;\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await EliminarContabilidad({\r\n        variables: {\r\n          id: idService,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      handleModal();\r\n      setIdService(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Servicios</TableCell>\r\n                {sesion.accesos.catalogos.contabilidad.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.contabilidad.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerContabilidad.map((row, index) => {\r\n                return (\r\n                  <TableRow role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n                    <TableCell>{row.nombre_servicio}</TableCell>\r\n                    {sesion.accesos.catalogos.contabilidad.editar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          onClick={() => {\r\n                            setAccion(false);\r\n                            setIdService(row._id);\r\n                            setData({\r\n                              nombre_servicio: row.nombre_servicio,\r\n                            });\r\n                          }}\r\n                        >\r\n                          <Edit />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                    {sesion.accesos.catalogos.contabilidad.eliminar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          onClick={() => {\r\n                            setIdService(row._id);\r\n                            handleModal();\r\n                          }}\r\n                        >\r\n                          <Delete />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n      <Modal\r\n        handleModal={handleModal}\r\n        openModal={openModal}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Box, Button, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport ListaServicios from \"./ListaServicios\";\r\nimport {\r\n  REGISTRAR_CONTABILIDAD,\r\n  ACTUALIZAR_CONTABILIDAD,\r\n} from \"../../../../gql/Catalogos/contabilidad\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\nexport default function RegistroServicios() {\r\n  const classes = useStyles();\r\n  const [updateData, setUpdateData] = useState(false);\r\n  const [data, setData] = useState({\r\n    nombre_servicio: \"\",\r\n  });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [error, setError] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [accion, setAccion] = useState(true);\r\n  const [idService, setIdService] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [CrearContabilidad] = useMutation(REGISTRAR_CONTABILIDAD);\r\n  const [ActualizarContabilidad] = useMutation(ACTUALIZAR_CONTABILIDAD);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      if (!data.nombre_servicio) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.contabilidad.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await CrearContabilidad({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                usuario: sesion._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.contabilidad.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const inputActualizado = cleanTypenames(input);\r\n            await ActualizarContabilidad({\r\n              variables: {\r\n                input: inputActualizado,\r\n                id: idService,\r\n              },\r\n            });\r\n            setAccion(true);\r\n          }\r\n        }\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setData({ nombre_servicio: \"\" });\r\n        setUpdateData(!updateData);\r\n        setIdService(\"\");\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") handleSubmit();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography>\r\n        <b>Tipo de Servicio</b>\r\n      </Typography>\r\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n        <TextField\r\n          error={error}\r\n          id=\"outlined-error-helper-text\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          name=\"nombre_servicio\"\r\n          value={data.nombre_servicio}\r\n          onChange={handleChangeInput}\r\n          onKeyPress={pressEnter}\r\n          inputProps={{ style: { textTransform: \"uppercase\", width: \"400px\" } }}\r\n          disabled={loading}\r\n        />\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          onClick={handleSubmit}\r\n          disableElevation\r\n          startIcon={\r\n            loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n          }\r\n        >\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      <ListaServicios\r\n        setData={setData}\r\n        idService={idService}\r\n        setIdService={setIdService}\r\n        setAccion={setAccion}\r\n        updateData={updateData}\r\n        setAlert={setAlert}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroServicios from \"./RegistroServicio\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Contabilidad() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/contabilidad.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Contabilidad\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Contabilidad\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box mt={4}>\r\n          <Container maxWidth=\"md\">\r\n            {/* <Box p={1} my={3} border={1} display=\"flex\" justifyContent=\"center\">\r\n              [DESCRIPCION]\r\n            </Box> */}\r\n            <RegistroServicios />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  ELIMINAR_CLIENTE,\r\n  OBTENER_CLIENTES,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { DialogTitle, IconButton, Typography } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Cliente\", minWidth: 100 },\r\n  { id: 2, label: \"Clave\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 4, label: \"Razon Social\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 6, label: \"Fecha registro\", minWidth: 100 },\r\n  { id: 7, label: \"Estado\", minWidth: 100 },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function TablaProveedores({ tipo, filtro }) {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const classes = useStyles();\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo, filtro },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.provedores.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <RowsRender\r\n                  key={index}\r\n                  datos={row}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert, refetch }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.clave_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.razon_social}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.estado_cliente ? \"Activo\" : \"Inactivo\"}</Typography>\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.provedores.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearCliente tipo=\"PRROVEEDOR\" accion=\"actualizar\" datos={datos} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n      false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarCliente\r\n            datos={datos}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={() => handleClickOpen()}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Grid, IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport TablaProovedores from \"./ListaProveedores\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Proveedores() {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ClienteProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/distribution.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Proveedores\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Proveedores\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mx={4} my={3}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={6} xs={8}>\r\n                <Paper className={classes.root}>\r\n                  <InputBase\r\n                    fullWidth\r\n                    placeholder=\"Buscar proveedor...\"\r\n                    onChange={(e) => setValues(e.target.value)}\r\n                    onKeyPress={pressEnter}\r\n                    value={values}\r\n                  />\r\n                  <IconButton onClick={() => setFiltro(values)}>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Grid>\r\n              <Grid\r\n                item\r\n                md={6}\r\n                xs={4}\r\n                style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n              >\r\n                {permisosUsuario.accesos.catalogos.provedores.ver ===\r\n                false ? null : (\r\n                  <CrearCliente tipo=\"PROVEEDOR\" accion=\"registrar\" />\r\n                )}\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box mx={4}>\r\n            <TablaProovedores tipo=\"PROVEEDOR\" filtro={filtro} />\r\n          </Box>\r\n        </Dialog>\r\n      </ClienteProvider>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CAJA = gql`\r\n    mutation CrearCaja($input: CrearCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CAJAS = gql`\r\n    query ObtenerCajasSucursales($empresa: ID!, $sucursal: ID!){\r\n        obtenerCajasSucursal(empresa: $empresa, sucursal: $sucursal){\r\n            _id\r\n            numero_caja\r\n            activa\r\n            usuario_creador {\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n            cantidad_efectivo_actual\r\n            usuario_en_caja {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n            }\r\n             \r\n        }\r\n    }\r\n`;\r\nexport const CREAR_HISTORIAL_CAJA = gql`\r\n    mutation CrearHistorialCaja($input: CrearHistorialCajasInput!, $empresa: ID!, $sucursal: ID!){\r\n        crearHistorialCaja(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CAJA = gql`\r\n    query ObtenerHistorialCaja($input: HistorialCajasInput, $id_Caja: ID!,$empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialCaja(input: $input, id_Caja: $id_Caja,empresa: $empresa, sucursal: $sucursal){\r\n            tipo_movimiento\r\n            concepto\r\n            horario_turno\r\n            numero_caja\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            hora_moviento{\r\n                hora\r\n                minutos\r\n                segundos\r\n                completa\r\n            }\r\n            fecha_movimiento{\r\n                year\r\n                mes\r\n                dia\r\n                no_dia_year\r\n                no_semana_year\r\n                completa\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CAJA = gql`\r\n\tmutation eliminarCaja($id: ID!) {\r\n\t\teliminarCaja(id: $id) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ACTUALIZAR_CAJA = gql`\r\n\tmutation ActualizarCaja($input: EditarCaja, $id: ID!) {\r\n\t\tactualizarCaja(id: $id, input: $input) {\r\n            _id\r\n            numero_caja\r\n            activa\r\n        }\r\n    }\r\n`; \r\n\r\nexport const OBTENER_PRE_CORTE_CAJA = gql`\r\n    query ObtenerPreCorteCaja($empresa: ID!, $sucursal: ID!, $input: PreCortesDeCajaInput){\r\n        obtenerPreCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            monto_efectivo_precorte         \r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTES_CAJA = gql`\r\n    query ObtenerCortesDeCaja($empresa: ID!, $sucursal: ID!, $input: FiltroCorteDeCajaInput){\r\n        obtenerCortesDeCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            concepto\r\n            token_turno_user\r\n            numero_caja\r\n            horario_en_turno\r\n            id_caja\r\n            hora_salida{\r\n                completa\r\n            }\r\n            fecha_salida{\r\n                completa\r\n            }\r\n            fecha_movimiento\r\n            usuario_en_turno{\r\n                nombre\r\n                telefono\r\n                email\r\n                numero_usuario\r\n            }\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n            sucursal{\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_CORTE_CAJA = gql`\r\n    query ObtenerCorteCaja($empresa: ID!, $sucursal: ID!, $input: CorteDeCajaInput){\r\n        obtenerCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input){\r\n            montos_en_sistema{\r\n                monto_efectivo\r\n                monto_tarjeta_debito\r\n                monto_tarjeta_credito\r\n                monto_creditos\r\n                monto_monedero\r\n                monto_transferencia\r\n                monto_cheques\r\n                monto_vales_despensa\r\n            }\r\n        }\r\n    }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaCajas({\r\n  obtenerCajasSucursal,\r\n  setAlert,\r\n  refetch,\r\n}) {\r\n  const permisos = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Cajas</TableCell>\r\n                {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerCajasSucursal.map((row) => {\r\n                return (\r\n                  <RowCajasRender\r\n                    key={row.numero_caja}\r\n                    row={row}\r\n                    permisos={permisos}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowCajasRender = ({ row, permisos, setAlert, refetch }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [eliminarCaja] = useMutation(ELIMINAR_CAJA);\r\n\r\n  const deleteCaja = async (id) => {\r\n    try {\r\n      setLoading(true);\r\n      await eliminarCaja({\r\n        variables: {\r\n          id: id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell> CAJA {row.numero_caja}</TableCell>\r\n      {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <IconButton onClick={() => deleteCaja(row._id)}>\r\n            {loading ? (\r\n              <CircularProgress color=\"inherit\" size={20} />\r\n            ) : (\r\n              <Delete />\r\n            )}\r\n          </IconButton>\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Box, Button, CircularProgress } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport TablaCajas from \"./ListaCajas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_CAJA, OBTENER_CAJAS } from \"../../../../gql/Cajas/cajas\";\r\n\r\nexport default function RegistroCajas() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let obtenerCajasSucursal = [];\r\n  /* Mutation */\r\n  const [crearCaja] = useMutation(CREAR_CAJA);\r\n\r\n  /* Queries */\r\n  const { data, refetch } = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const nuevaCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await crearCaja({\r\n        variables: {\r\n          input: {\r\n            usuario_creador: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (data) {\r\n    obtenerCajasSucursal = data.obtenerCajasSucursal;\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" my={2}>\r\n        {sesion.accesos.catalogos.cajas.agregar === false ? null : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            onClick={() => nuevaCaja()}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      <TablaCajas\r\n        obtenerCajasSucursal={obtenerCajasSucursal}\r\n        setAlert={setAlert}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCajas from \"./RegistrarCajas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Cajas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cajas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box mt={3}>\r\n          <Container maxWidth=\"sm\">\r\n            {/* <Box p={1} my={3} border={1} display=\"flex\" justifyContent=\"center\">\r\n              [DESCRIPCION]\r\n            </Box> */}\r\n          </Container>\r\n          <Container maxWidth=\"sm\">\r\n            <RegistroCajas />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","\r\nlet arregloVacio = {\r\n    mi_empresa:{\r\n        datos_empresa: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        informacion_fiscal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    compras:{\r\n        abrir_compra:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_realizadas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_espera:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    tesoreria:{\r\n        cuentas_empresa:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        egresos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_proveedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    reportes:{\r\n        reporte_historial_cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_turnos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_compras:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        rerporte_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_corte_caja:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_tesoreria:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    ventas:{\r\n        cancelar_venta:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        precios_productos: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        pre_corte:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cotizaciones:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        administrador:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        eliminar_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        producto_rapido: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    almacenes:{\r\n        almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        traspasos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        inventario_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    catalogos: {\r\n        clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        usuarios:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        productos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        marcas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        contabilidad:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        provedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        departamentos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        centro_costos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        conceptos_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        categorias:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        colores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        tallas_numeros:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n    },\r\n    facturacion:{\r\n        generar_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cdfi_realizados:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        registro_series_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    }\r\n} \r\n\r\nexport default arregloVacio;\r\n","import React, { createContext, useState } from 'react';\r\nimport arregloVacio from '../../pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso'\r\n\r\nexport const UsuarioContext = createContext();\r\n\r\nexport const UsuarioProvider = ({ children }) => {\r\n\tconst [ usuario, setUsuario ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_usuario: true,\r\n\t\taccesos: arregloVacio\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<UsuarioContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tusuario,\r\n\t\t\t\tsetUsuario,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UsuarioContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  IconButton,\r\n  OutlinedInput,\r\n  FormHelperText,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n  FormControl,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ACTUALIZAR_USUARIO } from \"../../../../gql/Catalogos/usuarios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function FormularioUsuario({ accion }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, error } = useContext(UsuarioContext);\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setUsuario({\r\n        ...usuario,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [usuario, setUsuario]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_usuario\") {\r\n      setUsuario({\r\n        ...usuario,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      direccion: { ...usuario.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${usuario.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre usuario\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                type=\"text\"\r\n                size=\"small\"\r\n                error={error.error && !usuario.nombre}\r\n                name=\"nombre\"\r\n                variant=\"outlined\"\r\n                value={usuario.nombre ? usuario.nombre : \"\"}\r\n                helperText={\r\n                  error.error &&\r\n                  error.message !== \"Las contraseñas no coinciden\"\r\n                    ? error.message\r\n                    : \"\"\r\n                }\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n            {accion === \"registrar\" ? (\r\n              <Fragment>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"password\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"password\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={usuario.password ? usuario.password : \"\"}\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Repetir contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"repeatPassword\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"repeatPassword\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={\r\n                        usuario.repeatPassword ? usuario.repeatPassword : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Fragment>\r\n            ) : (\r\n              <Grid item xs={12} md={12}>\r\n                <ActualizarPasswordModal />\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Email\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.email}\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={usuario.email ? usuario.email : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Num. Telefono\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.telefono}\r\n            name=\"telefono\"\r\n            variant=\"outlined\"\r\n            value={usuario.telefono ? usuario.telefono : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>Num. Celular</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"celular\"\r\n            variant=\"outlined\"\r\n            value={usuario.celular ? usuario.celular : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={2}>\r\n        <Typography className={classes.title}>\r\n          <b>Domicilio</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Calle</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"calle\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.calle ? usuario.direccion.calle : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Colonia</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"colonia\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.colonia ? usuario.direccion.colonia : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Ext</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_ext\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_ext ? usuario.direccion.no_ext : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Int</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_int\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_int ? usuario.direccion.no_int : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>CP</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"codigo_postal\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.codigo_postal\r\n                ? usuario.direccion.codigo_postal\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Municipio</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"municipio\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.municipio ? usuario.direccion.municipio : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Localidad</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"localidad\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.localidad ? usuario.direccion.localidad : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Estado</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"estado\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.estado ? usuario.direccion.estado : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Pais</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"pais\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.pais ? usuario.direccion.pais : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ActualizarPasswordModal = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const {\r\n    usuario,\r\n    setUsuario,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(UsuarioContext);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setError({ error: false, message: \"\" });\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const confirmarPassowrd = async () => {\r\n    if (!usuario.password || !usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Este campo es requerido\" });\r\n      return;\r\n    }\r\n    if (usuario.password !== usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            password: usuario.password,\r\n            repeatPassword: usuario.repeatPassword,\r\n          },\r\n          id: usuario._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button color=\"primary\" variant=\"text\" onClick={handleClickOpen}>\r\n        Cambiar contraseña\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Cambiar contraseña\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <form autoComplete=\"off\">\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"password\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.password ? usuario.password : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Repetir contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"repeatPassword\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"repeatPassword\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.repeatPassword ? usuario.repeatPassword : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={confirmarPassowrd}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            autoFocus\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={25} /> : null\r\n            }\r\n          >\r\n            Confirmar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Box, Checkbox, FormControlLabel } from '@material-ui/core'\r\nimport React from 'react';\r\n\r\nexport default function Parametros({ \r\n    arregloAccesos, \r\n    obtenerAccesos, \r\n    departamento, \r\n    subDepartamento\r\n}) {\r\n\r\n    return(\r\n        <Box display='flex' justifyContent='center' alignItems='center'>\r\n            <FormControlLabel\r\n                control={\r\n                    <Checkbox\r\n                        checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver : false}\r\n                        name=\"ver\"\r\n                        color=\"primary\"\r\n                        onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                    />\r\n                }\r\n                label={\r\n                    <Box mr={2} display='flex'>\r\n                        {departamento === 'ventas' ? \"Autorizar\" : \"Ver\" } \r\n                    </Box>\r\n                }\r\n            />\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'compras_espera' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'|| \r\n                subDepartamento === 'egresos' ? (null):(\r\n                    <FormControlLabel\r\n                        control={\r\n                            <Checkbox\r\n                                checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].agregar : false}\r\n                                name=\"agregar\"\r\n                                disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                                color=\"primary\"\r\n                                onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                            />\r\n                        }\r\n                        label={\r\n                            <Box mr={2}  display='flex'>\r\n                                Agregar\r\n                            </Box>\r\n                        }\r\n                    />\r\n            )}\r\n            {   subDepartamento === 'cajas' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'abonos_proveedores'|| \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                subDepartamento === 'registro_series_cdfi' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas' ? (null) : ( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].editar : false}\r\n                            name=\"editar\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            color=\"primary\"\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box mr={2}  display='flex'>\r\n                            Editar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n            {   subDepartamento === 'informacion_fiscal' ||\r\n                subDepartamento === 'datos_empresa' || \r\n                subDepartamento === 'abrir_compra' || \r\n                subDepartamento === 'compras_realizadas' || \r\n                subDepartamento === 'traspasos' || \r\n                subDepartamento === 'inventario_almacen' || \r\n                subDepartamento === 'cuentas_empresa' || \r\n                subDepartamento === 'abonos_proveedores' || \r\n                subDepartamento === 'generar_cdfi' || \r\n                subDepartamento === 'cdfi_realizados' || \r\n                subDepartamento === 'abonos_clientes'|| \r\n                subDepartamento === 'egresos' || \r\n                departamento === 'reportes' || \r\n                departamento === 'ventas'? (null):( \r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={arregloAccesos ? arregloAccesos[departamento][subDepartamento].eliminar : false}\r\n                            name=\"eliminar\"\r\n                            color=\"primary\"\r\n                            disabled={arregloAccesos ? arregloAccesos[departamento][subDepartamento].ver === false : true}\r\n                            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n                        />\r\n                    }\r\n                    label={\r\n                        <Box display='flex'>\r\n                            Eliminar\r\n                        </Box>\r\n                    }\r\n                />\r\n            )}\r\n        </Box>\r\n    )\r\n}\r\n","import {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Catalogos({ obtenerAccesos, arregloAccesos }) {\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Usuarios</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'usuarios'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Marcas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'marcas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Provedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'provedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Contabilidad</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'contabilidad'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Departamento</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'departamentos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Centro de costos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'centro_costos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Conceptos almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'conceptos_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Categorias</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'categorias'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Colores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'colores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Tallas y Numeros</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'tallas_numeros'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function MiEmpresa({ obtenerAccesos, arregloAccesos }) {\r\n      return (\r\n            <Fragment>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Typography variant=\"h6\">\r\n                            Marca los permisos que deseas asignar a este usuario\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Datos de Empresa</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'datos_empresa'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Información Fiscal</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'informacion_fiscal'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n            </Fragment>\r\n      )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Compras({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abrir una compra</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'abrir_compra'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras realizadas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_realizadas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras en espera</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_espera'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Almacenes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Almacenes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Traspasos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'traspasos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Inventario por almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'inventario_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Tesoreria({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cuentas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'cuentas_empresa'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Proveedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_proveedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abonos Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'abonos_clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Egresos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'tesoreria'}\r\n                                subDepartamento={'egresos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Reportes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes Historiales Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_historial_cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes turnos usuarios </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_turnos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de compras </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_compras'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de ventas </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de almacenes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'rerporte_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de cortes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_corte_caja'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes tesoreria </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_tesoreria'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Ventas({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cancelar ventas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cancelar_venta'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Precios de productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'precios_productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Pre cortes de caja</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'pre_corte'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cotizaciones</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cotizaciones'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Producto Rapido</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'producto_rapido'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Panel de administrador</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'administrador'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Eliminar ventas pendientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'eliminar_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Facturacion({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Generar nuevo CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'generar_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>CDFIs realizados</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'cdfi_realizados'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Registrar series CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'registro_series_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AppBar, Box, Tabs } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\nimport { FcPaid, FcShop, FcSurvey, FcNews } from \"react-icons/fc\";\r\n\r\nimport Catalogos from \"./Departamentos/Catalogos\";\r\nimport MiEmpresa from \"./Departamentos/MiEmpresa\";\r\n\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport Compras from \"./Departamentos/Compras\";\r\nimport Almacenes from \"./Departamentos/Almacenes\";\r\nimport Tesoreria from \"./Departamentos/Tesoreria\";\r\nimport Reportes from \"./Departamentos/Reportes\";\r\nimport Ventas from \"./Departamentos/Ventas\";\r\nimport Facturacion from \"./Departamentos/Facturacion\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={1} minHeight=\"20vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 30,\r\n  },\r\n  icon: {\r\n    fontSize: 30,\r\n  },\r\n}));\r\n\r\nexport default function AsignarPermisos({ obtenerAccesos, arregloAccesos }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"on\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"scrollable force tabs example\"\r\n        >\r\n          <Tab\r\n            label=\"Mi empresa\"\r\n            icon={<FcShop className={classes.icon} />}\r\n            {...a11yProps(0)}\r\n          />\r\n          <Tab\r\n            label=\"Almacenes\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(1)}\r\n          />\r\n          <Tab\r\n            label=\"Compras\"\r\n            icon={<FcPaid className={classes.icon} />}\r\n            {...a11yProps(2)}\r\n          />\r\n          <Tab\r\n            label=\"Catalogos\"\r\n            icon={<FcNews className={classes.icon} />}\r\n            {...a11yProps(3)}\r\n          />\r\n          <Tab\r\n            label=\"Tesoreria\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                alt=\"icono money\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(4)}\r\n          />\r\n          <Tab\r\n            label=\"Reportes\"\r\n            icon={<FcSurvey className={classes.icon} />}\r\n            {...a11yProps(5)}\r\n          />\r\n          <Tab\r\n            label=\"Facturación\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                alt=\"icono factura\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(6)}\r\n          />\r\n          <Tab\r\n            label=\"Ventas\"\r\n            icon={\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(7)}\r\n          />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <Box p={2}>\r\n          <MiEmpresa\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <Box p={2}>\r\n          <Almacenes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <Box p={2}>\r\n          <Compras\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <Box p={0}>\r\n          <Catalogos\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <Box p={2}>\r\n          <Tesoreria\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <Box p={2}>\r\n          <Reportes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        <Box p={2}>\r\n          <Facturacion\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={7}>\r\n        <Box p={2}>\r\n          <Ventas\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport { Button, IconButton, Tabs } from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  Box,\r\n  DialogTitle,\r\n  DialogContent,\r\n} from \"@material-ui/core\";\r\nimport FormularioUsuario from \"./FormularioUsuario\";\r\nimport AsignarPermisos from \"./AsingarAccesos/AsignarPermisos\";\r\nimport { Add, Edit } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport arregloVacio from \"./AsingarAccesos/arregloVacioAcceso\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_USUARIO,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport { numerosRandom } from \"../../../../config/reuserFunctions\";\r\nimport { AppBar } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box minHeight=\"70vh\">{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nexport default function CrearUsuario({ accion, datos }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, setError, update, setUpdate } = useContext(\r\n    UsuarioContext\r\n  );\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setUsuario({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      turno_en_caja_activo: false,\r\n      estado_usuario: true,\r\n      accesos: arregloVacio,\r\n    });\r\n  }, [setUsuario]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (accion !== \"registrar\") {\r\n      setUsuario(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerAccesos = (event, departamento, subDepartamentos) => {\r\n    const { name, checked } = event.target;\r\n    setUsuario({\r\n      ...usuario,\r\n      accesos: {\r\n        ...usuario.accesos,\r\n        [departamento]: {\r\n          ...usuario.accesos[departamento],\r\n          [subDepartamentos]: {\r\n            ...usuario.accesos[departamento][subDepartamentos],\r\n            [name]: checked,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearUsuario] = useMutation(CREAR_USUARIO);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const saveData = async () => {\r\n    if (accion === \"registrar\") {\r\n      if (\r\n        !usuario.nombre ||\r\n        !usuario.password ||\r\n        !usuario.repeatPassword ||\r\n        !usuario.telefono ||\r\n        !usuario.email\r\n      ) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n      if (usuario.password !== usuario.repeatPassword) {\r\n        setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n        return;\r\n      }\r\n    } else {\r\n      if (!usuario.nombre || !usuario.telefono || !usuario.email) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        usuario.numero_usuario = numerosRandom(100000000, 999999999);\r\n        usuario.empresa = sesion.empresa._id;\r\n        usuario.sucursal = sesion.sucursal._id;\r\n        usuario.turno_en_caja_activo = false;\r\n        const input = usuario;\r\n        await crearUsuario({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n      } else {\r\n        const {\r\n          numero_usuario,\r\n          _id,\r\n          sucursal,\r\n          empresa,\r\n          turno_en_caja_activo,\r\n          estado_usuario,\r\n          ...input\r\n        } = usuario;\r\n        await actualizarUsuario({\r\n          variables: {\r\n            input: input,\r\n            id: usuario._id,\r\n          },\r\n        });\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError({ error: false, message: \"\" });\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"Hubo un error en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          onClick={toggleModal}\r\n          startIcon={<Add /> }\r\n        >\r\n          Agregar\r\n        </Button>\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            onCloseModal();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Box\r\n              display=\"flex\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"space-between\"\r\n            >\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab\r\n                  label=\"Información básica\"\r\n                  icon={\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/perfil.svg\"\r\n                      alt=\"icono perfil\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  }\r\n                  {...a11yProps(0)}\r\n                />\r\n                <Tab\r\n                  label=\"Permisos\"\r\n                  icon={\r\n                    <img\r\n                      src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/permisos.svg\"\r\n                      alt=\"icono factura\"\r\n                      className={classes.iconSvg}\r\n                    />\r\n                  }\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n              <Box mx={2}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={onCloseModal}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon />\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <TabPanel value={value} index={0}>\r\n            <Box p={2}>\r\n              <FormularioUsuario accion={accion} />\r\n            </Box>\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <AsignarPermisos\r\n              arregloAccesos={usuario.accesos}\r\n              obtenerAccesos={obtenerAccesos}\r\n            />\r\n          </TabPanel>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={saveData}\r\n            size=\"large\"\r\n            startIcon={<DoneIcon />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  Typography,\r\n  Switch,\r\n} from \"@material-ui/core\";\r\nimport CrearUsario from \"./CrearUsuario\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_USUARIOS,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Usuario\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 7, label: \"Estado\", minWidth: 100, align: \"right\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaUsuarios({ sucursal, filtro }) {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: { sucursal, filtro },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.usuarios.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.usuarios.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => {\r\n              return <RowsRender key={index} datos={row} />;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            estado_usuario: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_usuario}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell align={\"right\"}>\r\n        {loading ? (\r\n          <CircularProgress size={30} />\r\n        ) : (\r\n          <Switch\r\n            checked={datos.estado_usuario}\r\n            onChange={cambiarEstado}\r\n            color=\"primary\"\r\n          />\r\n        )}\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.usuarios.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearUsario accion=\"actualizar\" datos={datos} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? null : (\r\n        <TableCell width={50}>\r\n          <IconButton color=\"secondary\">\r\n            <Delete />\r\n          </IconButton>\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  Paper,\r\n  InputBase,\r\n  IconButton,\r\n  Grid,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport ListaUsuarios from \"./ListaUsuario\";\r\nimport CrearUsuario from \"./CrearUsuario\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Usuarios() {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UsuarioProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Usuarios\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Usuarios\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mt={3} display=\"flex\" justifyContent=\"space-between\">\r\n            <Container>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={8} md={6}>\r\n                  <Paper className={classes.root}>\r\n                    <InputBase\r\n                      fullWidth\r\n                      placeholder=\"Buscar cliente...\"\r\n                      onChange={(e) => setValues(e.target.value)}\r\n                      onKeyPress={pressEnter}\r\n                      value={values}\r\n                    />\r\n                    <IconButton onClick={() => setFiltro(values)}>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </Paper>\r\n                </Grid>\r\n                <Grid item xs={4} md={6}>\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                    {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <CrearUsuario accion=\"registrar\" datos={undefined} />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box my={3}>\r\n                <ListaUsuarios sucursal={sesion.sucursal._id} filtro={filtro} />\r\n              </Box>\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </UsuarioProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateDepartamentosContext = createContext();\r\n\r\nexport const DepartamentosProvider = ({ children }) => {\r\n    const [data, setData] = useState({\r\n\t\tnombre_departamentos:''\r\n\t});\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ accion, setAccion ] = useState(true);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ idDepartamento, setIdDepartamento ] = useState(\"\");\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [  loading, setLoading ] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<CreateDepartamentosContext.Provider value={\r\n            { \r\n                data, \r\n                setData,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                accion,\r\n                setAccion,\r\n                idDepartamento, \r\n                setIdDepartamento,\r\n                alert,\r\n                setAlert,\r\n                loading,\r\n                setLoading\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateDepartamentosContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow,\r\n\tIconButton,\r\n\tTablePagination,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core/';\r\n \r\nimport { Delete, Edit, Close } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_DEPARTAMENTOS, ELIMINAR_DEPARTAMENTO } from '../../../../gql/Catalogos/departamentos';\r\n// import ContainerRegistroAlmacen from './RegistroDepartamento';\r\n import { CreateDepartamentosContext } from '../../../../context/Catalogos/Departamentos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: { \r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaDepartamentos() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet obtenerDepartamentos = [];\r\n\r\n\tconst { update, setAccion, idDepartamento,setIdDepartamento, setData, setAlert, setLoading } = useContext(CreateDepartamentosContext);\r\n\tconst [ eliminarDepartamento ] = useMutation(ELIMINAR_DEPARTAMENTO);\r\n\t/* Queries */\r\n\tconst { data, refetch } = useQuery(OBTENER_DEPARTAMENTOS,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst handleModal = () => setOpen(!open);\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleDelete = async () => {\r\n   \r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n            const resultado = await eliminarDepartamento({\r\n                variables: {\r\n                    id: idDepartamento\r\n                }\r\n            });\r\n\r\n\t\t\tif(resultado.data.eliminarDepartamento.message === 'false'){\r\n\t\t\t\tsetAlert({ message: 'Departamento eliminado con exito', status: 'success', open: true });\r\n\t\t\t}else{\r\n\t\t\t\tsetAlert({ message: resultado.data.eliminarDepartamento.message, status: 'error', open: true });\r\n\t\t\t};\r\n\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetOpen(false)\r\n\t\t\tsetIdDepartamento('');\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif(data){\r\n\t\tobtenerDepartamentos = data.obtenerDepartamentos\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Departamentos</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerDepartamentos?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)?.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}selected={idDepartamento === row._id ? true : false}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_departamentos}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.editar === false ?(null):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{idDepartamento === row._id ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_departamentos: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}); \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_departamentos: row.nombre_departamentos\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.departamentos.eliminar === false ?(null):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdDepartamento(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerDepartamentos.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={open} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tOK\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { Box, Button, TextField } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport TablaDepartamentos from './ListaDepartamentos';\r\nimport { REGISTRAR_DEPARTAMENTO,  ACTUALIZAR_DEPARTAMENTO  } from '../../../../gql/Catalogos/departamentos';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CreateDepartamentosContext } from '../../../../context/Catalogos/Departamentos';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nexport default function RegistroDepartamentos() {\r\n\tconst { data, setData, update, setUpdate, error, setError, accion, setAccion, idDepartamento, setIdDepartamento , setLoading, setAlert, loading, alert} = useContext(CreateDepartamentosContext);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst [ CrearDepartamentos ] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n\tconst [ ActualzarDepartamentos ] = useMutation(ACTUALIZAR_DEPARTAMENTO);\r\n\r\n\r\n\r\n\tconst saveData = async () => {\r\n\t\ttry {\r\n\t\t\tif(!data.nombre_departamentos){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.departamentos.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait CrearDepartamentos({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.departamentos.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst inputActualizado = cleanTypenames(input);\r\n\t\t\t\t\t\tawait ActualzarDepartamentos({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput: inputActualizado,\r\n\t\t\t\t\t\t\t\tid: idDepartamento\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}) \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetUpdate(!update);\r\n\t\t\t\tsetAccion(true)\r\n\t\t\t\tsetIdDepartamento(\"\");\r\n\t\t\t\tsetData({\r\n\t\t\t\t\tnombre_departamentos: \"\"\r\n\t\t\t\t});\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n                setLoading(false);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"outlined-error-helper-text\"\r\n\t\t\t\t\tlabel=\"Nombre departamento\"\r\n\t\t\t\t\tvalue={data.nombre_departamentos}\r\n\t\t\t\t\tname=\"nombre_departamentos\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tsize=\"small\"\r\n                    fullWidth\r\n\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\terror={error}\r\n\t\t\t\t/>\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={saveData} >\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<TablaDepartamentos  />\r\n\t\t</Box>\r\n\t); \r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroDepartamentos from './RegistroDepartamento';\r\nimport { DepartamentosProvider } from '../../../../context/Catalogos/Departamentos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Departamentos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<DepartamentosProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/departamentos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tDepartamentos\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tDepartamentos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t\t<Container maxWidth=\"sm\">\r\n\t\t\t\t\t\t\t<RegistroDepartamentos accion=\"registrar\" />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</DepartamentosProvider>\r\n\t\t</div>\r\n\t);\r\n} \r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, fade } from '@material-ui/core';\r\nimport { Box, Button, Divider, IconButton, TextField, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Add, Delete, Edit, ExpandMore, Close } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\n \r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport {\r\n\tOBTENER_CATEGORIAS,\r\n\tCREAR_CATEGORIA,\r\n\tCREAR_SUBCATEGORIA,\r\n\tACTUALIZAR_SUBCATEGORIA,\r\n\tACTUALIZAR_CATEGORIA, \r\n\tELIMINAR_CATEGORIA,\r\n\tELIMINAR_SUBCATEGORIA\r\n} from '../../../../gql/Catalogos/categorias';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tselected: {\r\n\t\tbackground: fade(theme.palette.secondary.main, 0.1)\r\n\t}\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ categoria, setCategoria ] = useState('');\r\n\tconst [ toUpdateID, setToUpdateID ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CATEGORIAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\t/*  Categorias Mutations */\r\n\tconst [ crearCategoria ] = useMutation(CREAR_CATEGORIA);\r\n\tconst [ actualizarCategoria ] = useMutation(ACTUALIZAR_CATEGORIA);\r\n\r\n\t\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetCategoria(e.target.value);\r\n\t};\r\n\r\n\tconst guardarCategoria = async () => {\r\n\t\tif (!categoria) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearCategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcategoria,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst categoriaActualizada = cleanTypenames(categoria);\r\n\t\t\t\t\tawait actualizarCategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcategoria: categoriaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCategoria('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerCategorias } = data;\r\n\tconst render_categorias = obtenerCategorias.map((categoria, index) => (\r\n\t\t<RenderCategorias\r\n\t\t\tkey={index}\r\n\t\t\tcategoria={categoria}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\tsetCategoria={setCategoria}\r\n\t\t\trefetch={refetch}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t/>\r\n\t));\r\n\treturn (\r\n\t\t<div className={classes.root} >\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Typography variant=\"h6\">Categorias</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField value={categoria} variant=\"outlined\" size=\"small\" onChange={obtenerDatos} />\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={guardarCategoria}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{render_categorias}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderCategorias = ({ categoria, setToUpdateID, setCategoria, refetch, toUpdateID }) => {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ subcategoria, setSubcategoria ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/*  Subcategorias Mutations */\r\n\tconst [ crearSubcategoria ] = useMutation(CREAR_SUBCATEGORIA);\r\n\tconst [ actualizarSubcategoria ] = useMutation(ACTUALIZAR_SUBCATEGORIA);\r\n\tconst [ eliminarCategoria ] = useMutation(ELIMINAR_CATEGORIA);\r\n\r\n\r\n\tconst render_subcategorias = categoria.subcategorias.map((subcategoria) => (\r\n\t\t<RenderSubcategorias\r\n\t\t\tkey={subcategoria._id}\r\n\t\t\tidCategoria= {categoria._id}\r\n\t\t\tsubcategoria={subcategoria}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t\tsetSubcategoria={setSubcategoria}\r\n\t\t\tsetAlert={setAlert}\r\n\t\t\trefetch={refetch}\r\n\t\t/>\r\n\t));\r\n\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\r\n\t\twindow.scrollTo(0,0);\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(categoria._id);\r\n\t\tsetCategoria(categoria.categoria);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetCategoria('');\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetSubcategoria(e.target.value);\r\n\t};\r\n\r\n\tconst guardarSubcategoria = async () => {\r\n\t\tif (!subcategoria) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\tlet msgAlert = '';\r\n\t\tlet resp;\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresp = await crearSubcategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcategoria\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: categoria._id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmsgAlert = ( resp.data.crearSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.crearSubcategoria.message, status: 'error', open: true }\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.categorias.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes autorización para esta acción', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst subCategoriaActualizada = cleanTypenames(subcategoria);\r\n\t\t\t\t\tresp = await actualizarSubcategoria({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcategoria: subCategoriaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCategoria: categoria._id,\r\n\t\t\t\t\t\t\tidSubcategoria: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmsgAlert =( resp.data.actualizarSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.actualizarSubcategoria.message, status: 'error', open: true }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\t\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcategoria('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDelete = async (event) => {\r\n\t\tevent.stopPropagation()\r\n\t\ttry {\r\n\t\t\tconst resp = await eliminarCategoria({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tidCategoria: categoria._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet msgAlert = ( resp.data.eliminarCategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.eliminarCategoria.message, status: 'error', open: true }\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\trefetch();\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\tclassName={toUpdateID && toUpdateID === categoria._id ? classes.selected : ''}\r\n\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\taria-label=\"Expand\"\r\n\t\t\t\t\taria-controls={`categoria-action-${categoria._id}`}\r\n\t\t\t\t\tid={`categoria-${categoria._id}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">{categoria.categoria}</Typography>\r\n\t\t\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.categorias.editar === false ?(null):(\r\n\t\t\t\t\t\t\ttoUpdateID && toUpdateID === categoria._id ? (\r\n\t\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tonClick={obtenerCamposParaActualizar}\r\n\t\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.categorias.eliminar === false ?(null):(\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={(event) => handleDelete(event)}\r\n\t\t\t\t\t\t\t\tonFocus={(event) => handleDelete(event)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Box mb={2} />\r\n\t\t\t\t\t\t<Box ml={5} width=\"100%\" display=\"flex\">\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">Subcategorias</Typography>\r\n\t\t\t\t\t\t\t<Box mr={2} />\r\n\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tvalue={subcategoria}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Box ml={1} />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tonClick={guardarSubcategoria}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={5}>{render_subcategorias}</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst RenderSubcategorias = ({ subcategoria,idCategoria, toUpdateID, setToUpdateID, setSubcategoria,setAlert, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst classes = useStyles();\r\n\tconst [ eliminarSubcategoria ] = useMutation(ELIMINAR_SUBCATEGORIA);\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(subcategoria._id);\r\n\t\tsetSubcategoria(subcategoria.subcategoria);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetSubcategoria('');\r\n\t};\r\n\tconst handleDelete = async (event) => {\r\n\t\ttry {\r\n\t\t\tevent.stopPropagation()\r\n\t\t\tconst resp = await eliminarSubcategoria({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tidCategoria: idCategoria,\r\n\t\t\t\t\tidSubcategoria:subcategoria._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet msgAlert = ( resp.data.eliminarSubcategoria.message === 'false' ) ? { message: '¡Listo!', status: 'success', open: true }: { message: resp.data.eliminarSubcategoria.message, status: 'error', open: true }\r\n\t\t\r\n\t\t\tsetAlert(msgAlert);\r\n\t\t\t\r\n\t\t\trefetch();\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Ocurrió un error', status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tborderRadius={3}\r\n\t\t\t\tpx={1}\r\n\t\t\t\tclassName={toUpdateID && toUpdateID === subcategoria._id ? classes.selected : ''}\r\n\t\t\t>\r\n\t\t\t\t<Typography>{subcategoria.subcategoria}</Typography>\r\n\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t{sesion.accesos.catalogos.categorias.editar === false ?(null):(\r\n\t\t\t\t\ttoUpdateID && toUpdateID === subcategoria._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={obtenerCamposParaActualizar} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t\t{sesion.accesos.catalogos.categorias.eliminar === false ?(null):(\r\n\t\t\t\t\t<IconButton onClick={(event) => handleDelete(event) }>\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCategorias from './RegistroCategorias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Categorias() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/categorias.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCategorias\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCategorias\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCategorias />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div> \r\n\t);\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Box, Button, Dialog, DialogActions, DialogTitle, IconButton, TextField, Typography } from '@material-ui/core';\r\nimport { Close, Delete, Edit } from '@material-ui/icons';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { ELIMINAR_COLOR, OBTENER_COLORES } from '../../../../gql/Catalogos/colores';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tcolor: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center'\r\n\t}\r\n}));\r\n\r\nexport default function TablaColores({ datos, toUpdate, setToUpdate, setValues, refetch }) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [ busqueda, setBusqueda ] = useState('');\r\n\tconst [ productosFiltrados, setProductosFiltrados ] = useState([]);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetProductosFiltrados(\r\n\t\t\t\tdatos.filter((datos) => {\r\n\t\t\t\t\treturn datos.nombre.toLowerCase().includes(busqueda.toLowerCase());\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ busqueda, datos ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tplaceholder=\"Buscar...\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonChange={(e) => setBusqueda(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell width={150}>Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Nombre</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.colores.editar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.colores.eliminar === false ? (null) : (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{productosFiltrados\r\n\t\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t\t.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\trow={row}\r\n\t\t\t\t\t\t\t\t\t\t\tsetAlert={setAlert}\r\n\t\t\t\t\t\t\t\t\t\t\ttoUpdate={toUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\tsetToUpdate={setToUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\tsetValues={setValues}\r\n\t\t\t\t\t\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={datos.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RowsRender = ({ row, setAlert, toUpdate, setToUpdate, setValues, refetch }) => {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst [ eliminarColor ] = useMutation(ELIMINAR_COLOR, {\r\n\t\tupdate(cache, { data: { eliminarColor } }) {\r\n\t\t\ttry {\r\n\t\t\t\tconst { obtenerColores } = cache.readQuery({\r\n\t\t\t\t\tquery: OBTENER_COLORES,\r\n\t\t\t\t\tvariables: { empresa: row.empresa._id }\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcache.writeQuery({\r\n\t\t\t\t\tquery: OBTENER_COLORES,\r\n\t\t\t\t\tvariables: { empresa: row.empresa._id },\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tobtenerColores: {\r\n\t\t\t\t\t\t\t...obtenerColores,\r\n\t\t\t\t\t\t\teliminarColor\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tconst resp = await eliminarColor({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: row._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch(refetch);\r\n\t\t\tsetAlert({ message: resp.data.eliminarColor.message, status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (row) => {\r\n\t\tif (!row) {\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetValues({ nombre: '', hex: '' });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetToUpdate(row._id);\r\n\t\tsetValues({ nombre: row.nombre, hex: row.hex });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === row._id ? true : false}>\r\n\t\t\t<TableCell className={classes.color}>\r\n\t\t\t\t<Box mr={1} width={30} height={25} bgcolor={row.hex} borderRadius=\"10%\" />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>{row.hex}</b>\r\n\t\t\t\t</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<b>{row.nombre}</b>\r\n\t\t\t\t</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t{sesion.accesos.catalogos.colores.editar === false ? (null) : (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t{toUpdate === row._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate(row)}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.catalogos.colores.eliminar === false ? (null) : (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, Grid, CircularProgress, TextField, Typography } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport TablaColores from './ListaColores';\r\nimport { SketchPicker } from 'react-color'; \r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_COLORES, CREAR_COLOR, ACTUALIZAR_COLOR } from '../../../../gql/Catalogos/colores';\r\n\r\nexport default function RegistroColores() {\r\n\tconst [ color, setColor ] = useState({});\r\n\tconst [ toUpdate, setToUpdate ] = useState('');\r\n\tconst [ values, setValues ] = useState({ nombre: '', hex: '' });\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_COLORES, {\r\n\t\tvariables: { sucursal: sesion.sucursal._id }\r\n\t});\r\n\r\n\t/* Mutations */\r\n\tconst [ crearColor ] = useMutation(CREAR_COLOR);\r\n\tconst [ actualizarColor ] = useMutation(ACTUALIZAR_COLOR);\r\n\r\n\tconst handleChangeComplete = (color) => {\r\n\t\tsetColor(color);\r\n\t\tsetValues({\r\n\t\t\t...values,\r\n\t\t\thex: color.hex.toUpperCase()\r\n\t\t});\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerColores } = data;\r\n\r\n\tconst GuardarDatosBD = async () => {\r\n\t\tif (!values.nombre || !values.hex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst colores = values;\r\n\t\t\tlet msg;\r\n\t\t\tif (toUpdate) {\r\n\t\t\t\tif (sesion.accesos.catalogos.colores.editar === false) {\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst colorActualizado = cleanTypenames(colores);\r\n\t\t\t\t\tconst resp = await actualizarColor({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\t\tnombre: colorActualizado.nombre,\r\n\t\t\t\t\t\t\t\t\thex: colorActualizado.hex\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tid: toUpdate\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tmsg = resp.data.actualizarColor.message\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.colores.agregar === false) {\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearColor({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tnombre: colores.nombre,\r\n\t\t\t\t\t\t\t\thex: colores.hex,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tmsg = '¡Listo!. Color creado.'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetValues({ nombre: '', hex: '' });\r\n\t\t\tsetToUpdate('');\r\n\t\t\r\n\t\t\tsetAlert({ message: msg, status: 'success', open: true });\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n\t\r\n\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={4}>\r\n\t\t\t\t\t<SketchPicker color={color} onChangeComplete={handleChangeComplete} />\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Typography>Color seleccionado:</Typography>\r\n\t\t\t\t\t\t{!values.hex ? (\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n\t\t\t\t\t\t\t\t<Typography color=\"secondary\">NINGUNO</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Box bgcolor={values.hex} height={30} width={220} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box my={2} width=\"75%\">\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Nombre del color\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={values.nombre}\r\n\t\t\t\t\t\t\tonChange={(e) => setValues({ ...values, nombre: e.target.value.toUpperCase() })}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Box my={1} />\r\n\t\t\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" fullWidth onClick={GuardarDatosBD}>\r\n\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={7}>\r\n\t\t\t\t\t<TablaColores\r\n\t\t\t\t\t\tdatos={obtenerColores}\r\n\t\t\t\t\t\ttoUpdate={toUpdate}\r\n\t\t\t\t\t\tsetToUpdate={setToUpdate}\r\n\t\t\t\t\t\tsetValues={setValues}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroColores from './RegistroColores';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Colores() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/colores.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tColores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tColores\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroColores />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow,\r\n\tIconButton,\r\n\tTablePagination,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core/';\r\nimport { Delete, Edit, Close } from '@material-ui/icons';\r\nimport { useQuery } from '@apollo/client';\r\nimport { useMutation } from '@apollo/client';\r\nimport { OBTENER_MARCAS, ELIMINAR_MARCAS } from '../../../../gql/Catalogos/marcas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function ListaMarcas({updateData, toUpdate, setToUpdate, setData}) {\r\n\r\n    const classes = useStyles();\r\n    const [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(8);\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tstatus: '',\r\n\t\tmessage: '',\r\n\t\topen: false\r\n\t});\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet obtenerMarcas = [];\r\n\t\r\n\r\n    const { data, refetch } = useQuery(OBTENER_MARCAS,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch, updateData])\r\n\r\n    if(data){\r\n\t\tobtenerMarcas = data.obtenerMarcas\r\n\t}\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Marca</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tobtenerMarcas\r\n\t\t\t\t\t\t\t\t?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t\t?.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <RowsRender key={index} setAlert={setAlert} refetch={refetch} datos={row} toUpdate={toUpdate} setToUpdate={setToUpdate} setData={setData} />;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerMarcas.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos, updateData, toUpdate, setAlert, setToUpdate, setData, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst [ eliminarMarca ] = useMutation(ELIMINAR_MARCAS);\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tconst resultado = await eliminarMarca({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: datos._id,\r\n\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(resultado.data.eliminarMarca.message === 'false'){\r\n\t\t\t\tsetAlert({ message: 'Marca eliminada con exito', status: 'success', open: true });\r\n\t\t\t}else{\r\n\t\t\t\tsetAlert({ message: resultado.data.eliminarMarca.message, status: 'error', open: true });\r\n\t\t\t};\r\n\t\t\trefetch();\r\n\t\t\thandleModal();\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdate = (dato) => {\r\n\t\tif(!dato){\r\n\t\t\tsetToUpdate('');\r\n\t\t\tsetData('');\r\n\t\t\trefetch();\r\n\t\t\treturn\r\n\t\t}\r\n\t\trefetch();\r\n\t\tsetToUpdate(dato._id);\r\n\t\tsetData(dato);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} selected={toUpdate === datos._id ? true : false}>\r\n\t\t\t<TableCell>{datos.nombre_marca}</TableCell>\r\n\t\t\t{sesion.accesos.catalogos.marcas.editar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t{toUpdate === datos._id ? (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate()}>\r\n\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<IconButton onClick={() => onUpdate(datos)}>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.catalogos.marcas.eliminar === false ? (null):(\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t\t\t</TableCell>\r\n\t\t\t)}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n\r\n\r\n//ELIMINAR DATOS DE LA TABLA\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconButton color=\"secondary\" onClick={handleModal}>\r\n\t\t\t\t<Delete />\r\n\t\t\t</IconButton>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateMarcasContext = createContext();\r\n\r\nexport const MarcasProvider = ({ children }) => {\r\n\tconst [ datosMarcas, setDatosMarcas ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CreateMarcasContext.Provider value={\r\n            { \r\n                datosMarcas, \r\n                setDatosMarcas,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateMarcasContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport {\r\n    Button,\r\n    Box,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport ListaMarcas from './ListaMarcas';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { Add } from '@material-ui/icons';\r\nimport { /* OBTENER_MARCAS, */ REGISTRAR_MARCAS, ACTUALIZAR_MARCAS} from '../../../../gql/Catalogos/marcas';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CreateMarcasContext } from '../../../../context/Catalogos/Marcas';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\n\r\nexport default function VistaMarcas() {\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ data, setData ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n    const [ toUpdate, setToUpdate ] = useState('');\r\n    const [updateData, setUpdateData] = useState(false);\r\n    const { /* datosMarcas, setDatosMarcas, */ error, setError } = useContext(CreateMarcasContext);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ CrearMarca ] = useMutation(REGISTRAR_MARCAS);\r\n\tconst [ actualizarMarca ] = useMutation(ACTUALIZAR_MARCAS);\r\n\r\n    const obtenerDatos = (e) => {\r\n        \r\n        setData({\r\n            ...data,\r\n            [e.target.name]: e.target.value.toUpperCase()\r\n        })\r\n    }\r\n\r\n    const saveData = async () => {\r\n        try {\r\n            if(!data.nombre_marca){\r\n                setError(true);\r\n\t\t\t    return;\r\n            }else{\r\n                if(toUpdate){\r\n                    if (sesion.accesos.catalogos.marcas.editar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = cleanTypenames(data);\r\n                        await actualizarMarca({\r\n                            variables: {\r\n                                input: {\r\n                                    nombre_marca: input.nombre_marca,\r\n                                },\r\n                                id: toUpdate\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }else{\r\n                    if (sesion.accesos.catalogos.marcas.agregar === false) {\r\n                        return setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción !', status: 'error', open: true });\r\n                    }else{\r\n                        const input = data;\r\n                        await CrearMarca({\r\n                            variables: {\r\n                                input,\r\n                                empresa: sesion.empresa._id,\r\n                                sucursal: sesion.sucursal._id\r\n                            }\r\n                        });\r\n                        setData(\"\");\r\n                    }\r\n                }\r\n                setToUpdate('');\r\n                setUpdateData(!updateData);\r\n                setAlert({ message: '¡Listo!', status: 'success', open: true });\r\n                setError(false);\r\n            }\r\n        } catch (error) {\r\n        }\r\n    }\r\n\r\n    const pressEnter = (e) => {\r\n        if (e.key === 'Enter') saveData();\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n                    <TextField\r\n                        id=\"outlined-error-helper-text\"\r\n                        label=\"Nombre departamento\"\r\n                        value={data.nombre_marca ? data.nombre_marca : \"\"}\r\n                        name=\"nombre_marca\"\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        fullWidth\r\n                        inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                        onChange={obtenerDatos}\r\n                        error={error}\r\n                        onKeyPress={pressEnter}\r\n                    />\r\n                    <Box ml={1} />\r\n                    <Button \r\n                        color=\"primary\" \r\n                        variant=\"contained\" \r\n                        size=\"large\" \r\n                        disableElevation \r\n                        onClick={saveData}\r\n                    >\r\n                        <Add />Guardar\r\n                    </Button>\r\n                </Box>\r\n            <ListaMarcas toUpdate={toUpdate} setToUpdate={setToUpdate} updateData={updateData} setData={setData} />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { \r\n    Button, \r\n    Box, \r\n    Dialog,\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    Container,\r\n    makeStyles,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { FcRating } from \"react-icons/fc\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport VistaMarcas from './VistaMarcas';\r\nimport { MarcasProvider } from '../../../../context/Catalogos/Marcas';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nexport default function Marcas() {\r\n    const classes = useStyles();\r\n    const [ open, setOpen ] = React.useState(false);\r\n\r\n    const handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<MarcasProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcRating className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\tMarcas\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t\t<VistaMarcas />\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</MarcasProvider>\r\n\t\t</div>\r\n    )\r\n}\r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, fade } from '@material-ui/core';\r\nimport { Box, Button, Divider, IconButton, TextField, CircularProgress, Typography } from '@material-ui/core';\r\nimport { Add, Delete, Edit, ExpandMore, Close } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport {\r\n\tOBTENER_CUENTAS,\r\n\tCREAR_CUENTA,\r\n\tCREAR_SUBCUENTA,\r\n\tACTUALIZAR_SUBCUENTA,\r\n\tACTUALIZAR_CUENTA,\r\n    ELIMINAR_CUENTA,\r\n    ELIMINAR_SUBCUENTA\r\n} from '../../../../gql/Catalogos/centroCostos';\r\nimport { cleanTypenames } from '../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tselected: {\r\n\t\tbackground: fade(theme.palette.secondary.main, 0.1)\r\n\t}\r\n}));\r\n\r\nexport default function RegistroCategorias() {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ cuenta, setCuenta ] = useState('');\r\n\tconst [ toUpdateID, setToUpdateID ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\t/*  Categorias Mutations */\r\n\tconst [ crearCuenta ] = useMutation(CREAR_CUENTA);\r\n\tconst [ actualizarCuenta ] = useMutation(ACTUALIZAR_CUENTA);\r\n   \r\n  \r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerCuentas } = data;\r\n\tconst render_cuentas = obtenerCuentas.map((cuenta, index) => (\r\n\t\t<RenderCuentas\r\n\t\t\tkey={index}\r\n\t\t\tcuenta={cuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\tsetCuenta={setCuenta}\r\n\t\t\trefetch={refetch}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t/>\r\n\t));\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetCuenta(e.target.value);\r\n\t};\r\n    \r\n\tconst guardarCuenta = async () => {\r\n\t\tif (!cuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst cuentaActualizada = cleanTypenames(cuenta);\r\n\t\t\t\t\tawait actualizarCuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tcuenta: cuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    \r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Typography variant=\"h6\">Cuentas</Typography>\r\n\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t<TextField value={cuenta} variant=\"outlined\" size=\"small\" onChange={obtenerDatos} />\r\n\t\t\t\t<Box ml={1} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" size=\"large\" disableElevation onClick={guardarCuenta}>\r\n\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t{render_cuentas}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderCuentas = ({ cuenta, setToUpdateID, setCuenta, refetch, toUpdateID }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ subcuenta, setSubcuenta ] = useState('');\r\n\tconst [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n     const [ eliminarCuenta ] = useMutation(ELIMINAR_CUENTA);\r\n\t/*  Subcategorias Mutations */\r\n\tconst [ crearSubcuenta ] = useMutation(CREAR_SUBCUENTA);\r\n\tconst [ actualizarSubcuenta ] = useMutation(ACTUALIZAR_SUBCUENTA);\r\n   \r\n\t\r\n    const render_subcuentas = (cuenta.subcuentas !== null) ? cuenta.subcuentas.map((subcuenta) => (\r\n\t\t<RenderSubcuentas\r\n\t\t\tkey={subcuenta._id}\r\n            idCuenta={cuenta._id}\r\n\t\t\tsubcuenta={subcuenta}\r\n\t\t\tsetToUpdateID={setToUpdateID}\r\n\t\t\ttoUpdateID={toUpdateID}\r\n\t\t\tsetSubcuenta={setSubcuenta}\r\n            refetch={refetch}\r\n\t\t/>\r\n\t))\r\n\t: \r\n\t(<div/>)\r\n\t; \r\n\r\n\tconst obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(cuenta._id);\r\n\t\tsetCuenta(cuenta.cuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetCuenta('');\r\n\t};\r\n\r\n\tconst obtenerDatos = (e) => {\r\n\t\tsetSubcuenta(e.target.value);\r\n\t};\r\n\r\n\tconst guardarSubcuenta = async () => {\r\n\t\tif (!subcuenta) return;\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n\t\t\tif (!toUpdateID) {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tawait crearSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: {\r\n\t\t\t\t\t\t\t\tsubcuenta\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n\t\t\t\t\tsetLoadingBackDrop(false);\r\n\t\t\t\t\treturn setAlert({ message: '¡Lo sentimos no tienes autorización para esta acción!', status: 'error', open: true });\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconst subCuentaActualizada = cleanTypenames(subcuenta)\r\n\t\t\t\t\tawait actualizarSubcuenta({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tinput: { \r\n\t\t\t\t\t\t\t\tsubcuenta: subCuentaActualizada\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tidCuenta: cuenta._id,\r\n\t\t\t\t\t\t\tidSubcuenta: toUpdateID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n\r\n    const deleteCuenta = async (idCuenta) => {\r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarCuenta({\r\n                variables: {\r\n                    id: idCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetCuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n    \r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\tclassName={toUpdateID && toUpdateID === cuenta._id ? classes.selected : ''}\r\n\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\taria-label=\"Expand\"\r\n\t\t\t\t\taria-controls={`cuenta-action-${cuenta._id}`}\r\n\t\t\t\t\tid={`cuenta-${cuenta._id}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">{cuenta.cuenta}</Typography>\r\n\t\t\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t\t\t{toUpdateID && toUpdateID === cuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tonClick={obtenerCamposParaActualizar}\r\n\t\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={() => deleteCuenta(cuenta._id )}\r\n\t\t\t\t\t\t\t\tonFocus={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Box mb={2} />\r\n\t\t\t\t\t\t<Box ml={5} width=\"100%\" display=\"flex\">\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">Subcuenta</Typography>\r\n\t\t\t\t\t\t\t<Box mr={2} />\r\n\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tvalue={subcuenta}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Box ml={1} />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tonClick={guardarSubcuenta}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Add />Guardar\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{(cuenta.subcuentas !== null ) ?\r\n\t\t\t\t\t\t\t<Box ml={5}>{render_subcuentas}</Box>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t{/* <Box ml={5}>{render_subcostos}</Box> */}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst RenderSubcuentas = ({ idCuenta,subcuenta, toUpdateID, setToUpdateID, setSubcuenta, refetch }) => {\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n    const [ loadingBackDrop, setLoadingBackDrop ] = useState(false);\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ eliminarSubcuenta ] = useMutation(ELIMINAR_SUBCUENTA);\r\n\t\r\n    const obtenerCamposParaActualizar = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID(subcuenta._id);\r\n\t\tsetSubcuenta(subcuenta.subcuenta);\r\n\t};\r\n\r\n\tconst cancelarUpdate = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tsetToUpdateID('');\r\n\t\tsetSubcuenta('');\r\n\t};\r\n    const deleteSubCuenta = async ( idSubCuenta) => {\r\n        \r\n\t\tsetLoadingBackDrop(true);\r\n\t\ttry {\r\n            await eliminarSubcuenta({\r\n                variables: {\r\n                    idCuenta: idCuenta,\r\n                    idSubcuenta: idSubCuenta\r\n                }\r\n            });\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t\tsetSubcuenta('');\r\n\t\t\tsetToUpdateID('');\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: 'Hubo un error', status: 'error', open: true });\r\n\t\t\tsetLoadingBackDrop(false);\r\n\t\t}\r\n\t};\r\n    \r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<BackdropComponent loading={loadingBackDrop} setLoading={setLoadingBackDrop} />\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tborderRadius={3}\r\n\t\t\t\tpx={1}\r\n\t\t\t\tclassName={toUpdateID && toUpdateID === subcuenta._id ? classes.selected : ''}\r\n\t\t\t>\r\n\t\t\t\t<Typography>{subcuenta.subcuenta}</Typography>\r\n\t\t\t\t<div className={classes.flexGrow} />\r\n\t\t\t\t{\r\n\t\t\t\t\tsesion.accesos.catalogos.centro_costos.editar === false ? (null):(\r\n\t\t\t\t\t\ttoUpdateID && toUpdateID === subcuenta._id ? (\r\n\t\t\t\t\t\t\t<IconButton onClick={cancelarUpdate} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t<Close />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<IconButton onClick={obtenerCamposParaActualizar} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{sesion.accesos.catalogos.centro_costos.eliminar === false ? (null):(\r\n\t\t\t\t\t<IconButton onClick={() => deleteSubCuenta(subcuenta._id)} onFocus={(event) => event.stopPropagation()}>\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React from 'react'; \r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroCentroCostos from './RegistroCentroCostos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CentroCostos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/costos.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCentro de costos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tCentro de costos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={3}>\r\n\t\t\t\t\t<Container maxWidth=\"md\">\r\n\t\t\t\t\t\t<RegistroCentroCostos />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_CONCEPTOS_ALMACEN = gql`\r\n    query ObtenerConceptosAlmacen($empresa: ID!, $sucursal: ID!){\r\n        obtenerConceptosAlmacen(empresa: $empresa, sucursal: $sucursal){\r\n                _id\r\n            nombre_concepto\r\n            destino\r\n            origen\r\n            editable\r\n            empresa{\r\n                _id\r\n                nombre_empresa\r\n            }\r\n                sucursal{\r\n                _id\r\n                nombre_sucursal\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const REGISTRAR_CONCEPTO_ALMACEN = gql`\r\n    mutation CrearConceptoAlmacen($input: ConceptoAlmacenInput, $empresa: ID!, $sucursal: ID!, $usuario: ID!){\r\n        crearConceptoAlmacen(input:$input,empresa:$empresa,sucursal:$sucursal, usuario:$usuario){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONCEPTO_ALMACEN = gql`\r\n    mutation ActualizarConceptoAlmacen($input: ConceptoAlmacenInput, $id: ID!){\r\n        actualizarConceptoAlmacen(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONCEPTO_ALMACEN = gql`\r\n    mutation EliminarConceptoAlmacen($id: ID!){\r\n        eliminarConceptoAlmacen(id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n\tBox,\r\n\tCircularProgress,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTablePagination,\r\n\tTableRow,\r\n\tPaper,\r\n\tmakeStyles,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tButton\r\n} from '@material-ui/core';\r\n\r\nimport { IconButton } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN, ELIMINAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nexport default function TablaConceptos({setData, setIdConcepto, idConcepto, setAccion, updateData, setAlert}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\tlet obtenerConcepto= [];\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\tconst [ EliminarConceptoAlmacen ] = useMutation(ELIMINAR_CONCEPTO_ALMACEN);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ updateData, refetch ]\r\n\t); \r\n\r\n\tif(data){\r\n\t\tobtenerConcepto = data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait EliminarConceptoAlmacen({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\tid: idConcepto\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\trefetch();\r\n\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\thandleModal();\r\n\t\t\tsetIdConcepto(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetAlert({ message: error.message, status: 'error', open: true });\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tif (loading){\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Concepto almacén</TableCell>\r\n                                <TableCell padding=\"default\">Origen</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Destino</TableCell>\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Editar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"default\">Eliminar</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{obtenerConcepto?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.nombre_concepto}</TableCell>\r\n                                        <TableCell>{row.origen}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell>{row.destino}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.editar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAccion(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnombre_concepto: row.nombre_concepto,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torigen: row.origen,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdestino: row.destino\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{sesion.accesos.catalogos.conceptos_almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIdConcepto(row._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleModal();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!row.editable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerConcepto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t<Modal handleModal={handleModal} openModal={openModal} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Eliminar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleDelete}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Button, TextField, FormControl, Input, Grid, InputLabel, Select, MenuItem, useTheme, Dialog, DialogTitle, DialogActions } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons';\r\nimport ListaConceptos from './ListaConceptos';\r\nimport { REGISTRAR_CONCEPTO_ALMACEN, ACTUALIZAR_CONCEPTO_ALMACEN } from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { useMutation } from '@apollo/client';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tflexGrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n     formControl: {\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom:theme.spacing(3),\r\n        minWidth: 200,\r\n        maxWidth: 200,\r\n    },\r\n}));\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nconst tipos = [\r\n    'SUMA',\r\n    'RESTA',\r\n\t'N/A'\r\n];\r\n\r\nfunction getStyles(tipo, tipoName, theme) {\r\n\tconsole.log(tipoName)\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function RegistroServicios() {\r\n\tconst classes = useStyles();\r\n     const theme = useTheme();\r\n\tconst [updateData, setUpdateData] = useState(false);\r\n\tconst [data, setData] = useState({\r\n\t\tnombre_concepto: \"\",\r\n        destino: \"\",\r\n\t\torigen:\"\"\r\n\t\t\r\n\t});\r\n\tconst [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [error, setError] = useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [accion, setAccion] = useState(true);\r\n\tconst [idConcepto, setIdConcepto] = useState('')\r\n    \r\n\tconst [ crearConceptoAlmacen ] = useMutation(REGISTRAR_CONCEPTO_ALMACEN);\r\n\tconst [ actualizarConceptoAlmacen ] = useMutation(ACTUALIZAR_CONCEPTO_ALMACEN);\r\n    const [ openModal, setOpenModal ] = useState(false);\r\n\tconst handleModal = () => setOpenModal(!openModal);\r\n\tconst handleChangeInput = (e) => {\r\n\t\tsetData({\r\n\t\t\t...data,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t})\r\n\t}\r\n     const handleChangeDestino = (event) => {\r\n        setData({...data, destino:event.target.value});\r\n    };\r\n\tconst handleChangeOrigen = (event) => {\r\n        setData({...data, origen:event.target.value});\r\n    };\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n           setOpenModal(false);\r\n\t\t\tif(!data.nombre_concepto || !data.origen || !data.destino ){\r\n\t\t\t\tsetError(true);\r\n\t\t\t    return;\r\n\t\t\t}else{\r\n\t\t\t\tconst input = data;\r\n\t\t\t\tif(accion){\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.agregar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait crearConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\t\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\t\t\t\t\tusuario: sesion._id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (sesion.accesos.catalogos.conceptos_almacen.editar === false) {\r\n\t\t\t\t\t\treturn setAlert({ message: 'Lo sentimos no tienes los permisos autorizados', status: 'error', open: true });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tawait actualizarConceptoAlmacen({\r\n\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\t\t\tid: idConcepto\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetAccion(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetAlert({ message: '¡Listo!', status: 'success', open: true });\r\n\t\t\t\tsetData({nombre_concepto: \"\", origen: \"\", destino:\"\"});\r\n                setError(false);\r\n\t\t\t\tsetUpdateData(!updateData);\r\n\t\t\t\tsetIdConcepto(\"\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tconst pressEnter = (e) => {\r\n\t\tif (e.key === 'Enter') handleSubmit();\r\n\t};\r\n\r\n    const Modal = ({ handleModal, openModal, handleSubmit }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={openModal} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'Editar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres editar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={handleModal} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={handleSubmit}>\r\n\t\t\t\t\t\tEditar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n            <Box  flexDirection=\"row\" >\r\n                <Grid container>\r\n                    <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n                   \r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                         <Typography>Concepto </Typography>\r\n                        <TextField\r\n                            error={error}\r\n                            id=\"outlined-error-helper-text\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            name=\"nombre_concepto\"\r\n\t\t\t\t\t\t\tstyle={{marginLeft:2}}\r\n                            value={data.nombre_concepto}\r\n                            onChange={handleChangeInput}\r\n                            onKeyPress={pressEnter}\r\n                        />\r\n                        \r\n                    </Box>\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"origen-label\"\r\n                        id=\"origen-name\"\r\n                        value={data.origen}\r\n                        onChange={handleChangeOrigen}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.origen, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl className={classes.formControl}>\r\n                        <InputLabel id=\"destino-label\">Destino</InputLabel>\r\n                        <Select\r\n                        error={error}\r\n                        labelId=\"destino-label\"\r\n                        id=\"destino-name\"\r\n                        value={data.destino}\r\n                        onChange={handleChangeDestino}\r\n                        input={<Input />}\r\n                        MenuProps={MenuProps}\r\n                        >\r\n                        {tipos.map((tipo) => (\r\n                            <MenuItem key={tipo} value={tipo} style={getStyles(tipo, data.destino, theme)}>\r\n                            {tipo}\r\n                            </MenuItem>\r\n                        ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                        <Box ml={5} />\r\n                        <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={ () =>(accion) ? handleSubmit(): setOpenModal(true)} disableElevation>\r\n                            <Add />Guardar\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Box>\r\n\t\t\t<ListaConceptos \r\n\t\t\t\tsetData={setData} \r\n\t\t\t\tidConcepto={idConcepto} \r\n\t\t\t\tsetIdConcepto={setIdConcepto} \r\n\t\t\t\tsetAccion={setAccion} \r\n\t\t\t\tupdateData={updateData}\r\n\t\t\t\tsetAlert={setAlert} \r\n\t\t\t/>\r\n            <Modal handleModal={handleModal} openModal={openModal} handleSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Container } from '@material-ui/core';\r\nimport RegistroConcepto from './RegistroConcepto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConceptosAlmacen() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tConceptos Almacén\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tConceptos almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box mt={4} alignSelf='center' >\r\n\t\t\t\t\t<Container >\r\n\t\t\t\t\t\t<RegistroConcepto />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport Cliente from './Cliente/Cliente';\r\nimport Productos from './Producto/';\r\nimport Tallas from './Tallas/Tallas';\r\n/* import UnidadMedida from './UnidadMedida/UnidadMedida'; */\r\nimport Contabilidad from './Contabilidad/Contabilidad';\r\nimport Proveedores from './Proveedores/Proovedores';\r\nimport Cajas from './Cajas/Cajas'; \r\nimport Usuarios from './Usuarios/Usuarios';\r\nimport Departamentos from './Departamentos/Departamentos';\r\nimport Categorias from './Categorias/Categorias';\r\nimport Colores from './Colores/Colores';\r\nimport Marcas from './Marcas/Marcas';\r\nimport CentroCostos from './CentroCostos/CentroCostos';\r\nimport ConceptosAlmacen from './ConceptosAlmacen/ConceptosAlmacen';\r\n\r\nexport default function Catalogos() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cliente />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.productos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Productos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.tallas_numeros.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Tallas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<UnidadMedida />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.contabilidad.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Contabilidad />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Proveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.cajas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Usuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.departamentos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Departamentos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.categorias.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Categorias />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.colores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Colores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.marcas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Marcas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.centro_costos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CentroCostos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.conceptos_almacen.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ConceptosAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const TesoreriaCtx = createContext();\r\n\r\nexport const TesoreriaProvider = ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [cuentas, setCuentas] = useState([]);\r\n    const [cuenta, setCuenta] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    \r\n    return (\r\n        <TesoreriaCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                cuentas, \r\n                setCuentas,\r\n                reload, \r\n                setReload,\r\n                cuenta, \r\n                setCuenta\r\n            }}\r\n        >\r\n            {children}\r\n        </TesoreriaCtx.Provider>\r\n    );\r\n};\r\n","import { Box, Button, Dialog, DialogActions,\r\n        DialogContent, IconButton, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography \r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport moment from 'moment';\r\n\r\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\r\n\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { CREAR_MOVIMIENTO_CUENTA } from '../../../../gql/Empresa/sucursales';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    }\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RetiroDeposito({cuenta, refetch, tipo}) {\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const [ CrearMovimientoCuenta ] = useMutation(CREAR_MOVIMIENTO_CUENTA);\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [datosMovimiento, setDatosMovimiento] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    };\r\n\r\n    const onChangeDatos = (e) => {\r\n        setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value })\r\n    };\r\n\r\n    const input ={\r\n        tipo_movimiento: datosMovimiento.tipo_movimiento === 'RETIRO' ? 'CUENTA-RETIRO' : 'CUENTA-DEPOSITO',\r\n        id_usuario: sesion._id,\r\n        rol_movimiento: tipo === true ? \"CUENTA-EMPRESA\" : \"CUENTA\",\r\n        numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : null,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_turno : null,\r\n        concepto: datosMovimiento.concepto,\r\n        hora_moviento: {\r\n            hora: moment().format('hh'),\r\n            minutos: moment().format('mm'),\r\n            segundos: moment().format('ss'),\r\n            completa: moment().format('HH:mm:ss')\r\n        },\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.cantidad),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        comentarios: datosMovimiento.comentarios,\r\n    };\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if (!datosMovimiento.concepto || !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n                setAlert({\r\n                    message: 'Por favor complete los datos',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }\r\n            const movimiento = await CrearMovimientoCuenta({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: cuenta._id,\r\n                    tipo: tipo\r\n                }\r\n            });\r\n            refetch();\r\n            setDatosMovimiento([]); \r\n            handleClickOpen();\r\n            setAlert({\r\n                message: movimiento.data.crearMovimientoCuenta.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n              });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <Box>\r\n                <IconButton\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                >\r\n                    <CompareArrowsIcon style={{fontSize: 35}} />\r\n                </IconButton>\r\n            </Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h5'>\r\n                            Movimiento en Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Usuario</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario\"\r\n                                variant=\"outlined\"\r\n                                disabled={true}\r\n                                value={sesion?.nombre}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\" >\r\n                            <Typography>Fecha y hora</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                disabled={true}\r\n                                size=\"small\"\r\n                                value={moment().format('D MMMM YYYY, h:mm:ss')}\r\n                                name=\"fecha_movimiento\"\r\n                                variant=\"outlined\"\r\n\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Movimiento a Realizar</Typography>\r\n                            <Select\r\n                                className={classes.formComboBox}    \r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                name=\"tipo_movimiento\"\r\n                                onChange={onChangeDatos}\r\n                                fullWidth\r\n                            >\r\n                                <MenuItem value=''>Ninguno</MenuItem>\r\n                                <MenuItem value='DEPOSITO'>Deposito</MenuItem>\r\n                                <MenuItem value='RETIRO'>Retiro</MenuItem>\r\n                            </Select>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Cantidad</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                type='number'\r\n                                name=\"cantidad\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Concepto</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                name=\"concepto\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Comentarios</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                multiline\r\n                                rows={2}\r\n                                type='number'\r\n                                name=\"monto_movimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant='outlined'\r\n                        onClick={enviarDatos}\r\n                        size=\"large\"\r\n                    >\r\n                        Realizar\r\n                    </Button>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, \r\n        DialogContent,  MenuItem,  Select,  Slide, \r\n        TextField, Typography\r\n} from '@material-ui/core';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport moment from 'moment';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CUENTAS } from '../../../../gql/Empresa/sucursales';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'movimiento', label: 'Origen Movimiento', minWidth: 100 },\t\r\n    { id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'name', label: 'Usuario', minWidth: 150 },\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 150 },\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 150 },\r\n\t{ id: 'tipo', label: 'Tipo Movimiento', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function HistorialCuentas({cuenta, tipo}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    moment.locale('es');\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    const [datosFiltro, setDatosFiltro] = useState([]);\r\n    const [ value ] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(!open);\r\n        setDatosFiltro([]);\r\n        refetch();\r\n    };\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_HISTORIAL_CUENTAS, {\r\n\t\tvariables: {\r\n            input:{\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\",\r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? datosFiltro.tipo_movimiento : \"\"\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: cuenta._id,\r\n            tipo: tipo\r\n\t\t}\r\n\t});\t\r\n    \r\n    let historialCuenta = [];\r\n    if(data){\r\n        historialCuenta = data.obtenerHistorialCuenta;\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch()\r\n    }, [refetch])\r\n\r\n\treturn (\r\n        <Fragment>\r\n            <Box>\r\n                <Button\r\n                    color='primary'\r\n                    onClick={handleClickOpen}\r\n                    size=\"small\"\r\n                    endIcon={<VisibilityIcon style={{fontSize: 35}}  />}\r\n                >\r\n                    Ver\r\n                </Button>\r\n            </Box>\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h6'>\r\n                            Historial de cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha inicio:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    name=\"fecha_inicio\"\r\n                                    onChange={obtenerDatos}\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Fecha fin:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    type='date'\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"fecha_fin\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Usuario:</Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    onChange={obtenerDatos}\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Tipo Movimiento:</Typography>\r\n                                <Select\r\n                                    className={classes.formComboBox}    \r\n                                    size=\"small\"\r\n                                    variant=\"outlined\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={obtenerDatos}\r\n                                    fullWidth\r\n                                >\r\n                                    <MenuItem value='TODOS'>Ninguno</MenuItem>\r\n                                    <MenuItem value='CUENTA-DEPOSITO'>Deposito</MenuItem>\r\n                                    <MenuItem value='CUENTA-RETIRO'>Retiro</MenuItem>\r\n                                </Select>\r\n                            </Box>\r\n                        </div>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <Paper className={classes.root}>\r\n                            <TableContainer className={classes.container}>\r\n                                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            {columns.map((column) => (\r\n                                                <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                                    {column.label}\r\n                                                </TableCell>\r\n                                            ))}\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody> \r\n                                        {\r\n                                            historialCuenta?.map((row, index) => {\r\n                                                return(\r\n                                                    <RowsHistorial \r\n                                                        key={index}\r\n                                                        row={row}\r\n                                                        loading={loading}\r\n                                                    />\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                       \r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsHistorial ({ row, loading }) {\r\n\r\n    if (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell>Caja {row.numero_caja !== \"\" ? row.numero_caja : \"\"}</TableCell>\r\n            <TableCell>{moment(row?.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n            <TableCell>{row?.nombre_usuario_creador}</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(row.montos_en_caja.monto_efectivo.monto)}</b>\r\n            </TableCell>\r\n            <TableCell>{row?.concepto}</TableCell>\r\n            <TableCell>{\r\n                row?.tipo_movimiento === \"CUENTA-DEPOSITO\" ? 'DEPOSITO' : 'RETIRO'    \r\n            }</TableCell>\r\n\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, CircularProgress} from '@material-ui/core';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nimport RetiroDeposito from './RetiroDeposito';\r\nimport HistorialCuentas from './HistorialCuentas';\r\nimport { OBTENER_SUCURSALES } from '../../../../gql/Empresa/sucursales';\r\nimport { OBTENER_DATOS_EMPRESA } from '../../../../gql/Empresa/empresa';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Origen', minWidth: 150, align: 'left' },\r\n\t{ id: 'tipo', label: 'Tipo Cuenta', minWidth: 150, align: 'left' },\r\n\t{ id: 'dinero', label: 'Dinero Existencia', minWidth: 100, align: 'left' },\r\n\t{ id: 'movimiento', label: 'Realizar Movimiento', minWidth: 100, align: 'center' },\t\r\n\t{ id: 'historial', label: 'Historial', minWidth: 100, align: 'center' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n        height: '50vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaCuentas() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const {  data, error, loading, refetch } = useQuery(OBTENER_SUCURSALES, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\r\n    const cuentaEmpresa = useQuery(OBTENER_DATOS_EMPRESA, {\r\n\t\tvariables: {\r\n            id: sesion.empresa._id\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst classes = useStyles();\r\n    let cuentasSucursalesEmpresa = [];\r\n    let cuentaPrincipal = [];\r\n\r\n\r\n    if(cuentaEmpresa.data){\r\n        cuentaPrincipal = cuentaEmpresa.data.obtenerEmpresa;\r\n    };\r\n\r\n    if (data) {\r\n        cuentasSucursalesEmpresa = data.obtenerSucursalesEmpresa\r\n    };\r\n\r\n    if (loading && cuentaEmpresa.loading) \r\n        return (\r\n            <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"50vh\"\r\n            >\r\n                <CircularProgress/>\r\n            </Box>\r\n        );\r\n    \r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody> \r\n                        <TableRow\r\n                            hover\r\n                            role=\"checkbox\"handleClickOpen\r\n                            tabIndex={-1}\r\n                        >\r\n                            <TableCell >{cuentaPrincipal?.nombre_empresa}</TableCell>\r\n                            <TableCell >CUENTA PRINCIPAL</TableCell>\r\n                            <TableCell >\r\n                                <b style={{fontSize: 17}}>${formatoMexico(cuentaPrincipal?.cuenta_empresa?.dinero_actual)}</b>\r\n                            </TableCell>\r\n                            {sesion.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                                <TableCell align='center'>  </TableCell>\r\n                            ):(\r\n                                <TableCell align='center'> <RetiroDeposito cuenta={cuentaPrincipal} refetch={cuentaEmpresa.refetch} tipo={true} /> </TableCell>\r\n                            )}\r\n                            <TableCell align='center'> <HistorialCuentas cuenta={cuentaPrincipal}  tipo={true} /> </TableCell>\r\n                        </TableRow>\r\n                            {cuentasSucursalesEmpresa?.map((cuenta, index) => {\r\n                                return(\r\n                                    <RowsCuentas \r\n                                        key={index}\r\n                                        refetch={refetch}\r\n                                        cuenta={cuenta}\r\n                                        loading={loading}\r\n                                        \r\n                                    /> \r\n                                )\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuenta, refetch}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    return(\r\n        <TableRow\r\n            hover\r\n            role=\"checkbox\"handleClickOpen\r\n            tabIndex={-1}\r\n        >\r\n            <TableCell >{cuenta.nombre_sucursal}</TableCell>\r\n            <TableCell >SUCURSAL</TableCell>\r\n            <TableCell >\r\n                <b style={{fontSize: 17}}>${formatoMexico(cuenta?.cuenta_sucursal?.dinero_actual)}</b>\r\n            </TableCell>\r\n            {permisosUsuario.accesos.tesoreria.cuentas_empresa.editar === false ? (\r\n                <TableCell align='center'>  </TableCell>\r\n            ):(\r\n                <TableCell align='center'> <RetiroDeposito cuenta={cuenta} refetch={refetch} tipo={false} /> </TableCell>\r\n            )}\r\n            <TableCell align='center'> <HistorialCuentas cuenta={cuenta} tipo={false}/> </TableCell>\r\n        </TableRow>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogContent } from '@material-ui/core';\r\nimport ListaCuentas from './ListaCuentas';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CuentasEmpresaSucursales() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/retiro-de-dinero.svg' alt=\"icono retiro\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCuentas de Empresa\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tCuentas de empresa\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<ListaCuentas />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_EGRESOS = gql`\r\n    query ObtenerHistorialEgresos($input: ObtenerHistorialEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialEgresos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            folio_egreso\r\n            folio_factura\r\n            empresa_distribuidora\r\n            provedor\r\n            productos {\r\n                cantidad_productos\r\n                precio_unitario\r\n                producto\r\n                total\r\n            }\r\n            categoria\r\n            subCategoria\r\n            metodo_pago\r\n            fecha_compra\r\n            fecha_registro\r\n            fecha_vencimiento\r\n            observaciones\r\n            compra_credito\r\n            credito_pagado\r\n            saldo_credito_pendiente\r\n            saldo_total\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            id_user\r\n            empresa\r\n            sucursal         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_EGRESO = gql`\r\n    mutation CrearEgreso($input: CrearEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearEgreso(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'nombre', label: 'Nombre', minWidth: 100 },\r\n\t{ id: 'precioU', label: 'Precio Unitario', minWidth: 100 },\r\n    { id: 'total', label: 'Total', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1\r\n\t},\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n}));\r\n\r\nexport default function TablaProductosEgresos({productos, borrarProducto}) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(3);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsProductos \r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\tborrarProducto={borrarProducto}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonPageChange={handleChangePage}\r\n\t\t\t\tonRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nfunction RowsProductos ({index, producto, borrarProducto}) {\r\n\treturn(\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.cantidad_productos}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t{producto?.producto}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.precio_unitario)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t${formatoMexico(producto?.total)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align='center' >\r\n\t\t\t\t<IconButton \r\n\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\tsize='small'\r\n\t\t\t\t\tonClick={() => borrarProducto(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t)\r\n}","import { useMutation, useQuery } from '@apollo/client';\r\nimport { Box, makeStyles, Select,MenuItem , TextField, Typography, FormControl, OutlinedInput, InputAdornment, IconButton, Button, Divider } from '@material-ui/core';\r\nimport { Autorenew } from '@material-ui/icons';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\nimport { OBTENER_CUENTAS } from '../../../../gql/Catalogos/centroCostos';\r\nimport { CREAR_EGRESO } from '../../../../gql/Tesoreria/egresos';\r\nimport TablaProductosEgresos from './TablaProductosEgresos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function FormRegistroEgresos({tipo, handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const { setAlert } = useContext(TesoreriaCtx);\r\n    const [ CrearEgreso ] = useMutation(CREAR_EGRESO);\r\n\r\n    const classes = useStyles();\r\n    const [upload, setUpload] = useState(false);\r\n    const [datosEgreso, setDatosEgreso] = useState([]);\r\n    const [totalCompra, setTotalCompra] = useState(0);\r\n    const [subCuentas, setSubCuentas] = useState([]);\r\n    const [producto, setProducto] = useState([]);\r\n    const [productos, setProductos] = useState([]);\r\n\r\n    const obtenerCuentas = useQuery(OBTENER_CUENTAS, {\r\n\t\tvariables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id }\r\n\t});\r\n\r\n    let cuentas = [];\r\n\r\n    if (obtenerCuentas.data) {\r\n        cuentas = obtenerCuentas.data.obtenerCuentas;\r\n    };\r\n\r\n    const GenFolio = () => {\r\n        const max = 999999999999;\r\n        const min = 100000000000;\r\n        const folio_egreso = Math.floor(\r\n          Math.random() * (max - min + 1) + min\r\n        ).toString();\r\n        setDatosEgreso({\r\n          ...datosEgreso,\r\n          folio_egreso,\r\n        });\r\n    };\r\n\r\n    const obtenerDatos = (e) => {\r\n        setDatosEgreso({...datosEgreso, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const obtenerSubCuentas = (cuenta) => {\r\n        setSubCuentas(cuenta.subcuentas);\r\n    };\r\n\r\n    const obtenerDatoProductos = (e) => {\r\n        setProducto({...producto, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const agregarProducto = () => {\r\n        let producto_guardado = {\r\n            cantidad_productos: parseFloat(producto.cantidad_productos),\r\n            precio_unitario: parseFloat(producto.precio_unitario),\r\n            producto: producto.producto,\r\n            total: (parseFloat(producto.cantidad_productos) * parseFloat(producto.precio_unitario))\r\n        };\r\n\r\n        productos.push(producto_guardado);\r\n\r\n        setDatosEgreso({\r\n            ...datosEgreso,\r\n            productos,\r\n        });\r\n        totalCompraVenta();\r\n        setProducto([]);\r\n    };\r\n    \r\n    function borrarProducto(index) {\r\n        productos.forEach(function(elemento, indice, array) {\r\n            if(index === indice){\r\n                productos.splice(index, 1);\r\n            }\r\n        });\r\n        setUpload(true);\r\n    };\r\n\r\n    useEffect(() => { \r\n        totalCompraVenta();\r\n        setProductos(productos);\r\n        setUpload(false);\r\n\r\n    }, [upload, productos]);\r\n\r\n    const totalCompraVenta = () =>{\r\n        let total = 0;\r\n        for (let i = 0; i < productos.length; i++) {\r\n            total += productos[i].total;\r\n        };\r\n        setTotalCompra(total);\r\n    };\r\n\r\n    const input = {\r\n        folio_egreso:  datosEgreso.folio_egreso,\r\n        folio_factura: datosEgreso.folio_factura,\r\n        empresa_distribuidora: datosEgreso.empresa_distribuidora,\r\n        provedor: datosEgreso.provedor,\r\n        productos: datosEgreso.productos ? datosEgreso.productos : [],\r\n        categoria: datosEgreso.categoria,\r\n        subCategoria:  datosEgreso.subCategoria,\r\n        metodo_pago: datosEgreso.metodo_pago,\r\n        fecha_compra: datosEgreso.fecha_compra,\r\n        fecha_vencimiento: datosEgreso.fecha_vencimiento0 ? datosEgreso.fecha_vencimiento : \"\",\r\n        observaciones: datosEgreso.observaciones,\r\n        compra_credito: datosEgreso.compra_credito ? datosEgreso.compra_credito : false, \r\n        credito_pagado: datosEgreso.credito_pagado ? datosEgreso.credito_pagado : false,\r\n        saldo_credito_pendiente: datosEgreso.saldo_credito_pendiente ? datosEgreso.saldo_credito_pendiente : 0,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_user: sesion._id,\r\n        saldo_total: totalCompra ? totalCompra : 0\r\n    }\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n            if(!datosEgreso.folio_egreso){\r\n                setAlert({\r\n                    message: 'Por favor genere un folio.',\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            };\r\n\r\n            const egreso = await CrearEgreso({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id\r\n                }\r\n            });\r\n            handleClickOpen();\r\n            setDatosEgreso([]); \r\n            setAlert({\r\n                message: egreso.data.crearEgreso.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n\r\n        } catch (error) {\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n        <Box p={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Datos Generales</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <FormControl\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    name=\"folio_egreso\"\r\n                    fullWidth\r\n                >\r\n                    <Typography>Folio</Typography>\r\n                    <OutlinedInput\r\n                        style={{ padding: 0 }}\r\n                        id=\"form-producto-codigo-barras\"\r\n                        name=\"folio_egreso\"\r\n                        value={\r\n                            datosEgreso.folio_egreso\r\n                            ? datosEgreso.folio_egreso\r\n                            : \"\"\r\n                        }\r\n                        onChange={obtenerDatos}\r\n                        endAdornment={\r\n                        <InputAdornment position=\"start\">\r\n                            <IconButton\r\n                                onClick={() => GenFolio()}\r\n                                color=\"primary\"\r\n                                size=\"small\"\r\n                            >\r\n                                <Autorenew />\r\n                            </IconButton>\r\n                        </InputAdornment>\r\n                        }\r\n                    />\r\n                </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>ID Factura:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"id_factura\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Fecha de Compra:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_compra\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    type=\"date\"\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Metodo de pago:</Typography>\r\n                    <Select\r\n                        className={classes.formComboBox}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onChange={obtenerDatos}\r\n                        name=\"metodo_pago\"\r\n                        fullWidth\r\n                    >\r\n                        <MenuItem value='TARJETA'>Tarjeta</MenuItem>\r\n                        <MenuItem value='EFECTIVO'>Efectivo</MenuItem>\r\n                        <MenuItem value='CHEQUE'>Cheque</MenuItem>\r\n                        <MenuItem value='TRANSFERENCIA'>Transferencia</MenuItem>\r\n                        <MenuItem value='MONEDERO ELECTRONICO'>Monedero electronico</MenuItem>\r\n                    </Select>\r\n            </Box>\r\n        </div>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Categoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"categoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno' onClick={() => setSubCuentas([])}>Ninguno</MenuItem>\r\n                    {cuentas?.map((cuenta) =>{\r\n                        return(\r\n                            <MenuItem \r\n                                key={cuenta._id}\r\n                                onClick={() => obtenerSubCuentas(cuenta)}\r\n                                value={cuenta.cuenta}\r\n                            >\r\n                                {cuenta.cuenta}\r\n                            </MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>SubCatergoria:</Typography>\r\n                <Select\r\n                    className={classes.formComboBox}\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    name=\"subCategoria\"\r\n                    fullWidth\r\n                >\r\n                    <MenuItem value='Ninguno'>Ninguno</MenuItem>\r\n                    {subCuentas?.map((subCuenta) =>{\r\n                        return(\r\n                            <MenuItem value={subCuenta.subcuenta}>{subCuenta.subcuenta}</MenuItem>\r\n                        )\r\n                    })}\r\n                </Select>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Empresa:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"empresa_distribuidora\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Provedor: </Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"provedor\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box p={1} mt={1}>\r\n            <Box>\r\n                <Typography>\r\n                    <b>Productos Adquiridos</b>\r\n                </Typography>\r\n            </Box>\r\n            <Divider />\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Cantidad:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    className={classes.input}\r\n                    size=\"small\"\r\n                    name=\"cantidad_productos\"\r\n                    value={producto.cantidad_productos ? producto.cantidad_productos : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Producto:</Typography>\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"producto\"\r\n                    value={producto.producto ? producto.producto : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n                <Typography>Precio Unitario:</Typography>\r\n                <TextField\r\n                    className={classes.input}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"precio_unitario\"\r\n                    value={producto.precio_unitario ? producto.precio_unitario : \"\"}\r\n                    onChange={obtenerDatoProductos}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                />\r\n            </Box> \r\n            <Box width=\"100%\" display='flex' justifyContent='center' alignItems='center'>\r\n                <Button\r\n                    variant='outlined'\r\n                    size='large'\r\n                    color='primary'\r\n                    onClick={agregarProducto}\r\n                    startIcon={<AddIcon />}\r\n                >\r\n                    Agregar\r\n                </Button>\r\n            </Box>\r\n        </div>\r\n        <Box p={1} >\r\n            <TablaProductosEgresos productos={productos} borrarProducto={borrarProducto} />\r\n        </Box>\r\n        <Box display='flex' justifyContent='flex-end' p={1}> \r\n            <Typography variant='h6'>\r\n                Total: ${formatoMexico(totalCompra)}\r\n            </Typography>\r\n        </Box>\r\n        <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n                <Typography>Observaciónes:</Typography>\r\n                <TextField\r\n                    multiline\r\n                    rows={2}\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"observaciones\"\r\n                    onChange={obtenerDatos}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Box>\r\n        </div>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\">\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='primary'\r\n                    onClick={enviarDatos}\r\n                >\r\n                    Guardar Egreso\r\n                </Button>\r\n            </Box>\r\n            <Box p={1}>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant='contained'\r\n                    color='secondary'\r\n                >\r\n                    Cancelar\r\n                </Button>\r\n            </Box>\r\n        </Box>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { AppBar, Box, Button, Grid, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport { FcDonate } from 'react-icons/fc';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FormRegistroEgresos from './FormRegistroEgresos';\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`tabpanel-reg-product-${index}`}\r\n\t\t\taria-labelledby={`reg-product-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3} minHeight=\"70vh\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `reg-product-tab-${index}`,\r\n\t\t'aria-controls': `tabpanel-reg-product-${index}`\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\ticonSvg: {\r\n\t\twidth: 50\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nexport default function VistaRegistroEgreso({handleClickOpen}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\tconst { setAlert } = useContext(TesoreriaCtx);\r\n    const [ value, setValue ] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n    return (\r\n        <Fragment>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tvariant=\"scrollable\"\r\n\t\t\t\t\t\tscrollButtons=\"on\"\r\n\t\t\t\t\t\ttextColor='primary'\r\n\t\t\t\t\t\tindicatorColor='primary'\r\n\t\t\t\t\t\taria-label=\"scrollable force tabs example\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\tlabel=\"Egreso a Contado\"\r\n\t\t\t\t\t\t\ticon={<FcDonate className={classes.iconSize} />}\r\n\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Grid container justify=\"flex-end\">\r\n\t\t\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t\t\t<Typography>Usuario: <b>{sesion.nombre}</b></Typography> \r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<b>{moment().format('D MMMM YYYY')}</b>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t<Box mt={3} ml={5} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t<FormRegistroEgresos handleClickOpen={handleClickOpen} tipo='CONTADO' />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t</div>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogActions,Paper} from '@material-ui/core';\r\nimport VistaRegistroEgreso from './VistaRegistroEgreso';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\ticonSize: {\r\n\t\tfontSize: 40,\r\n        color: theme.palette.info.main\r\n\t},\r\n\ticonSizeSecond: {\r\n\t\twidth: 40,\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Egresos() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/income.svg' alt=\"icono egreso\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tEgresos\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t>\r\n\t\t\t\t<VistaRegistroEgreso handleClickOpen={handleClickOpen} />\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 80},\r\n\t{ id: 'cantidadR', label: 'Cant. Regalo', minWidth: 80},\r\n\t{ id: 'nombre', label: 'Producto', minWidth: 80},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 80},\r\n\t{ id: 'total', label: 'Total', minWidth: 80},\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras({productos}) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos?.map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} hover role=\"checkbox\" tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad_regalo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.costo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.total}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS = gql`\r\n    query ObtenerHistorialAbonos($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialAbonosInput){\r\n        obtenerHistorialAbonos( empresa: $empresa, sucursal: $sucursal, input: $input ){\r\n            numero_caja\r\n            id_Caja\r\n            horario_turno\r\n            tipo_movimiento\r\n            rol_movimiento\r\n            fecha_movimiento{\r\n                completa\r\n            }\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            monto_total_abonado\r\n            numero_cliente\r\n            nombre_cliente\r\n            telefono_cliente\r\n            email_cliente\r\n            montos_en_caja{\r\n                monto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_ABONO = gql`\r\n    mutation CrearAbono($empresa: ID!, $sucursal: ID!, $input: CrearAbonoInput){\r\n        crearAbono(empresa: $empresa, sucursal: $sucursal, input: $input, ){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_ABONOS } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from 'moment';\r\nimport { TesoreriaCtx } from '../../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha de abono', minWidth: 170, align: 'center' },\r\n\t{ id: 'cliente', label: 'Nombre', minWidth: 170, align: 'center' },\r\n\t{ id: 'abono', label: 'Cantidad abonada', minWidth: 170, align: 'right' },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos({cuenta}) {\r\n\t\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tconst { reload } = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_HISTORIAL_ABONOS, {\r\n\t\t\tvariables: {\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tfecha_inicio: \"\",\r\n\t\t\t\t\tfecha_fin: \"\",\r\n\t\t\t\t\tusuario: \"\",\r\n\t\t\t\t\tid_cliente: cuenta.proveedor.id_proveedor._id,\r\n\t\t\t\t\tid_egreso: \"\",\r\n\t\t\t\t\trol_movimiento: \"PROVEEDOR\",\r\n\t\t\t\t\tid_compra: cuenta._id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t  \tfetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\t\r\n\tlet abonos = []\r\n\tif(data){\r\n\t\tabonos = data.obtenerHistorialAbonos;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [reload])\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{abonos?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={index}>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{moment(row.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center'>{row.nombre_cliente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align='right'><b>${row.monto_total_abonado}</b></TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useContext, useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport { Box, Button, Dialog, \r\n        DialogContent,  DialogTitle, FormControl, makeStyles, \r\n        MenuItem, \r\n        Select, \r\n        Slide, TextField, Typography \r\n} from '@material-ui/core'\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport { useMutation } from '@apollo/client';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport moment from 'moment';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tinput: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n}));\r\n\r\nexport default function AbonoaRecibir({cuenta}) {\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n    \r\n\tconst { setReload, setAlert } = useContext(TesoreriaCtx);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [abono, setAbono] = useState(''); \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    \r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(abono),\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(abono) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        id_usuario: sesion._id,\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if(abono === '' || metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete los datos', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setAbono('');\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Abono registrado con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    const handleClick = () => {\r\n        setReload(true);\r\n        setOpen(!open);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"large\"\r\n                variant=\"outlined\" \r\n                fullWidth\r\n                color=\"primary\"\r\n                startIcon={<AddCircleOutlineIcon style={{fontSize: 35}} />}\r\n                onClick={handleClick}\r\n            >\r\n                <Typography variant=\"h6\">\r\n                    Abonar    \r\n                </Typography>\r\n            </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                fullWidth\r\n                maxWidth='xs'\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box p={1} flexGrow={1}>\r\n                            Registrar nuevo abono\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\"  mt={2} >\r\n                        <Typography><b>Cantidad a abonar:</b></Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            className={classes.input}\r\n                            onChange={(e) => setAbono(e.target.value)}\r\n                            value={abono}\r\n                            size=\"small\"\r\n                            name=\"abono_recibir\"\r\n                            variant=\"outlined\"\r\n                            type='number'\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\" mt={2} >\r\n                            <Typography><b>Metodo de pago:</b></Typography>\r\n                            <FormControl \r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    width=\"100%\"\r\n                                    name=\"metodo_pago\"\r\n                                    variant='outlined'\r\n                                    value={metodoPago ? metodoPago : ''}\r\n                                    onChange={(e) => setMetodoPago(e.target.value)}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {formaPago.map((metodo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <Box width=\"100%\" mt={2} display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant='h6'>\r\n                                <b>Total cuenta</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: '#9B9B9B'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1}>\r\n                            <Typography  variant='h6'>\r\n                                <b>Total abonado</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography style={{color: 'green'}} variant='h6'>\r\n                            <b>${formatoMexico(cuenta.total - cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display='flex'>\r\n                        <Box flexGrow={1} >\r\n                            <Typography  variant='h6'>\r\n                                <b>Total restante</b>\r\n                            </Typography>\r\n                        </Box>\r\n                        <Typography  variant='h6'>\r\n                            <b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 18}}\r\n                        onClick={enviarDatos}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react'\r\nimport { Box, Grid, makeStyles, Typography, Button, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\nimport AbonoaRecibir from '../AbonoPercibir';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\n\r\nexport default function DetallesCuenta({handleClick, cuenta}) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Detalles de cuenta\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Clave proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.proveedor.id_proveedor.clave_cliente}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.nombre}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Numero usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{cuenta.usuario.numero_usuario}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Fecha compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_registro).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Fecha vencimiento: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(cuenta.fecha_vencimiento_credito).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                {permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (null) : (\r\n                    <Box width=\"60%\" p={1} display='flex' alignItems={'center'} >\r\n                        <AbonoaRecibir cuenta={cuenta} />\r\n                    </Box>\r\n                )}\r\n            </div>\r\n            <Grid container>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2}>\r\n                        <Typography variant=\"h6\">\r\n                            Lista de abonos\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaAbonos cuenta={cuenta} />\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total abonado: <b style={{color: \"#9B9B9B\"}}>${cuenta.total - cuenta.saldo_credito_pendiente}</b></Typography>\r\n                    </Box> \r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Restante: <b  style={{color: \"green\"}}>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2} >\r\n                        <Typography variant=\"h6\">\r\n                            Lista de compra\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaCompras productos={cuenta.productos}/>\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total a liquidar: <b  style={{color: \"red\"}}>${formatoMexico(cuenta.total)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState } from 'react'\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, FormControl, makeStyles, MenuItem, Select, Slider, TextField, Typography } from '@material-ui/core';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { formatoMexico } from '../../../../../../config/reuserFunctions';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport moment from 'moment';\r\nimport { CREAR_ABONO } from '../../../../../../gql/Tesoreria/abonos';\r\nimport { useMutation } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta({cuenta, refetch}) {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const { setAlert, setReload } = useContext(TesoreriaCtx);\r\n\r\n    const [ CrearAbono ] = useMutation(CREAR_ABONO);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [value, setValue] = useState(0);\r\n    const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n    const [dineroDescontado, setDineroDescontado] = useState(0);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [metodoPago, setMetodoPago] = useState('');\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n        setCuentaTotalDescuento(0);\r\n        setDineroDescontado(0);\r\n        setValue(0)\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    const obtenerPorcientoSlide = (event, newValue) => {\r\n        setValue(newValue);\r\n        let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n        let cuenta_con_descuento = parseFloat((cuenta.saldo_credito_pendiente * porcentaje / 100).toFixed(2));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - cuenta_con_descuento).toFixed(2));\r\n        setCuentaTotalDescuento(cuenta_con_descuento);\r\n        setDineroDescontado(dineroDescontado);\r\n    };\r\n\r\n    const obtenerPrecioText = (e) => {\r\n        let valorText = parseFloat(e.target.value);\r\n\r\n        let porcentaje  = parseFloat((((valorText * 100) / cuenta.saldo_credito_pendiente ).toFixed(2)));\r\n        let dineroDescontado = parseFloat((cuenta.saldo_credito_pendiente - valorText).toFixed(2));\r\n\r\n        setCuentaTotalDescuento(valorText);\r\n        setDineroDescontado(dineroDescontado);\r\n        setValue(porcentaje);\r\n\r\n    };\r\n    \r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const input = {\r\n        tipo_movimiento: \"ABONO\",\r\n        rol_movimiento: \"PROVEEDOR\",\r\n        fecha_movimiento: {\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        monto_total_abonado: parseFloat(cuenta.saldo_credito_pendiente),\r\n        descuento: {\r\n            porciento_descuento: value,\r\n            dinero_descontado: dineroDescontado,\r\n            total_con_descuento: cuentaTotalDescuento\r\n        },\r\n        montos_en_caja: {   \r\n            monto_efectivo: {\r\n                monto: metodoPago === '01' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: metodoPago === '28' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: metodoPago === '04' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: metodoPago === '99' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: metodoPago === '05' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: metodoPago === '03' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: metodoPago === '02' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: metodoPago === '08' ? parseFloat(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento) : 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        metodo_de_pago:{\r\n            clave: \"\",\r\n            metodo:  \"\",\r\n        },\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: cuenta.proveedor.nombre_cliente, \r\n        telefono_cliente: cuenta.proveedor.id_proveedor.telefono, \r\n        email_cliente: cuenta.proveedor.id_proveedor.email,\r\n        id_compra: cuenta._id\r\n    };\r\n\r\n    \r\n    const enviarDatos = async () => { \r\n        setLoading(true);\r\n        try {\r\n            if( metodoPago === '' ){\r\n                setAlert({ \r\n                    message: 'Por favor complete el metodo de pago', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n                setLoading(false);\r\n                return \r\n            }; \r\n            await CrearAbono({\r\n                variables: {\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    input\r\n                },\r\n            });\r\n            setReload(true);\r\n            setMetodoPago('');\r\n            setAlert({ \r\n                message: 'Cuenta liquidada con exito', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n            handleClick();\r\n            setLoading(false);\r\n\r\n        } catch (error) {\r\n            handleClick();\r\n            setLoading(false);\r\n            setAlert({ \r\n                message: 'Ocurrio un problema en el servidor', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"outlined\"  \r\n                color=\"primary\"\r\n                startIcon={<DoneIcon />}\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                fullWidth\r\n                maxWidth='xs'\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <Box display=\"flex\">\r\n                    <Box flexGrow={1} p={2}>\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            Liquidar Cuenta\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Typography>Aplica un descuento por pronto pago a tu cuenta</Typography>\r\n                    <Box mt={1} textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Porcentaje de descuento</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box ml={1} mr={1} mb={2} >\r\n                        <Slider\r\n                            getAriaValueText={valuetext}\r\n                            valueLabelFormat={value.toFixed(2)}\r\n                            aria-labelledby=\"discrete-slider-small-steps\"\r\n                            valueLabelDisplay=\"auto\"\r\n                            onChange={obtenerPorcientoSlide} \r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                            <b>Dinero a liquidar con descuento</b>\r\n                        </Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"descuento\"\r\n                            variant=\"outlined\"\r\n                            value={cuentaTotalDescuento ? cuentaTotalDescuento : 0 }\r\n                            onChange={obtenerPrecioText}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" mt={2} textAlign={'center'} >\r\n                        <Typography><b>Metodo de pago:</b></Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                width=\"100%\"\r\n                                name=\"metodo_pago\"\r\n                                variant='outlined'\r\n                                onChange={(e) => setMetodoPago(e.target.value )}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {formaPago.map((metodo, index) => {\r\n                                    return(\r\n                                        <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                    )\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box display=\"flex\" mt={2}>\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Total cuenta: </Typography>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography><b>${formatoMexico(cuenta.total)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Saldo pendiente: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Dinero Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>${formatoMexico(dineroDescontado)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography>Porciento Descontado: </Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography><b>{formatoMexico(value)}%</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\">\r\n                        <Box flexGrow={1}>\r\n                            <Typography variant=\"h6\" >Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box >\r\n                            <Typography variant=\"h6\" ><b style={{color: 'green'}}>${formatoMexico(cuentaTotalDescuento === 0 ? cuenta.saldo_credito_pendiente : cuentaTotalDescuento)}</b></Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {formatoMexico} from '../../../../../../config/reuserFunctions'\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\nimport moment from 'moment';\r\n\r\nimport { Box, CircularProgress, Dialog, Slide, TableHead } from '@material-ui/core';\r\nimport 'moment/locale/es';\r\nimport { TesoreriaCtx } from '../../../../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha Compra', minWidth: 100, align: 'center' },\r\n\t{ id: 'provedor', label: 'Provedor', minWidth: 100, align: 'center' },\r\n\t{ id: 'abonado', label: 'Abonado', minWidth: 100, align: 'center' },\r\n    { id: 'restante', label: 'Restante', minWidth: 100, align: 'center' },\r\n    { id: 'total', label: 'Total', minWidth: 100, align: 'center' }\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function TablaAbonos({loading}) {\r\n\r\n\tconst { cuentas} = useContext(TesoreriaCtx);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading) \r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"center\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\theight=\"50vh\"\r\n\t\t\t>\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t<TableCell align={'center'} style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\tLiquidar\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cuentas?.map((row, index) => {\r\n\t\t\t\t\t\t\t\tif(row.credito_pagado === false){\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsCuentas \r\n\t\t\t\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\t\t\t\tcuentaSelect={row}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})} \r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction RowsCuentas ({cuentaSelect, loading}){\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [open, setOpen] = useState(false);\r\n    \r\n\tconst handleClick = () => {\r\n        setOpen(!open);\r\n    };\r\n\t\r\n\tconst TwoClickInRowTableBuy = (e) => {\r\n\t\ttry {\r\n\t\t\tlet timer;\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tif (e.detail === 2) {\r\n\t\t\t\thandleClick();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t}\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tonClick={(e) => TwoClickInRowTableBuy(e)}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(cuentaSelect.fecha_registro).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{cuentaSelect.proveedor.id_proveedor.nombre_cliente}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total - cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.saldo_credito_pendiente)}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">${formatoMexico(cuentaSelect.total)}</TableCell>\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.editar === false ? (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t<LiquidarCuenta cuenta={cuentaSelect}/>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t)}\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullScreen\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClick} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\t\t\t\t<DetallesCuenta\r\n\t\t\t\t\tcuenta={cuentaSelect}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\thandleClick={handleClick}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, IconButton, InputAdornment, TextField } from '@material-ui/core';\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../../gql/Compras/compras\";\r\n\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { TesoreriaCtx } from '../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport SearchOutlined from '@material-ui/icons/SearchOutlined';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\trootSearch: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosProveedores() {\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\tconst { reload, setReload, setCuentas } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\tconst [filtro, setFiltro] = useState(\"\");\r\n\tconst searchfilter = useRef(null);\r\n\r\n\tconst { loading, data, error, refetch } = useQuery(\r\n\t\tOBTENER_COMPRAS_REALIZADAS,\r\n\t\t{\r\n\t\t  variables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfecha: \"\"\r\n\t\t  },\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tif(data){\r\n\t\tsetCuentas(data.obtenerComprasRealizadas)\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\trefetch();\r\n\t\t\r\n\t\tsetReload(false);\r\n\r\n\t}, [reload, refetch]);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst obtenerBusqueda = (e, value) => {\r\n\t\te.preventDefault();\r\n\t\trefetch({ filtro: value, fecha: '' });\r\n\t\tsetFiltro(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de provedores\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos a Provedores\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box display='flex' p={2}>\r\n\t\t\t\t\t<Box minWidth=\"70%\">\r\n\t\t\t\t\t<form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tinputRef={searchfilter}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tplaceholder=\"Buscar una compra...\"\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\t\t\t\t<SearchOutlined />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos \t\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\trefetch={refetch}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(5);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { Box, Grid, makeStyles, Typography, Button, Dialog, Slide, AppBar, Toolbar } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(4)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetallesCuenta() {\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const classes = useStyles();\r\n\r\n    const handleClick =()=>{\r\n        setOpen(!open);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Detalles\r\n            </Button>\r\n            <Dialog fullScreen open={open} onClose={handleClick} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tDetalle de cuenta\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Nombre de Cliente:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Fecha:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Factura:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Empresa:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Domicilio:</Typography>\r\n                        <Box mt={1}>\r\n                            <Typography>\r\n                                Hola mundo\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1}>\r\n                            <Typography variant=\"h6\">\r\n                                Lista de abonos\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaAbonos />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a abonado: $ 150,000.00</Typography>\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Restante: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} xs={12}>\r\n                        <Box p={1} >\r\n                            <Typography variant=\"h6\">\r\n                               Lista de compra\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box p={1}>\r\n                            <TablaCompras />\r\n                        </Box>\r\n                        <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Typography>Total a liquidar: $ 150,000.00</Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n\t\t\t</Dialog>\r\n          \r\n        </div>\r\n\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport {  Box, Button, Dialog, DialogActions, DialogContent, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ToggleButtonGroup } from '@material-ui/lab';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n}));\r\n\r\nexport default function LiquidarCuenta() {\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                Liquidar\r\n            </Button>\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClick}\r\n                aria-labelledby=\"draggable-dialog-title\"\r\n            >\r\n                <Box display=\"flex\" alignItems=\"center\" m={1}>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Abonos a Proveedores\r\n                    </Typography>\r\n                    <Box m={1} ml={8} >\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n                            <CloseIcon  />\r\n                        </Button>\r\n                    </Box>\r\n\t\t\t\t</Box>\r\n                <DialogContent>\r\n                    <Box width=\"100%\" textAlign=\"center\">\r\n                        <Typography>Descuento por pronto pago</Typography>\r\n\r\n                        <Box p={1}>\r\n                            <ToggleButtonGroup\r\n                                // value={alignment}\r\n                                exclusive\r\n                                // onChange={handleAlignment}\r\n                                aria-label=\"text alignment\"\r\n                            >\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por decuento\r\n                                    </Button>\r\n                                </Box>\r\n                                <Box p={1}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Por pesos\r\n                                    </Button>\r\n                                </Box>\r\n                            </ToggleButtonGroup>\r\n                        </Box>\r\n                       \r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"10% o $100.00\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Sub Total: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Descuento: </Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Total a pagar:</Typography>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>$150000</Typography>\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClick} \r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\nimport LiquidarCuenta from './LiquidarCuenta';\r\n\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n\treturn { name, calories, fat, carbs, protein };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('Cupcake', 305, 3.7, 67, 4.3),\r\n\tcreateData('Donut', 452, 25.0, 51, 4.9),\r\n\tcreateData('Eclair', 262, 16.0, 24, 6.0),\r\n\tcreateData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n\tcreateData('Gingerbread', 356, 16.0, 49, 3.9),\r\n\tcreateData('Honeycomb', 408, 3.2, 87, 6.5),\r\n\tcreateData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n\tcreateData('Jelly Bean', 375, 0.0, 94, 0.0),\r\n\tcreateData('KitKat', 518, 26.0, 65, 7.0),\r\n\tcreateData('Lollipop', 392, 0.2, 98, 0.0),\r\n\tcreateData('Marshmallow', 318, 0, 81, 2.0),\r\n\tcreateData('Nougat', 360, 19.0, 9, 37.0),\r\n\tcreateData('Oreo', 437, 18.0, 63, 4.0)\r\n];\r\n\r\nconst headCells = [\r\n\t{ id: 'name', numeric: false, disablePadding: true, label: 'Cliente' },\r\n\t{ id: 'calories', numeric: true, disablePadding: false, label: 'Abondado' },\r\n\t{ id: 'fat', numeric: true, disablePadding: false, label: 'Restante' },\r\n\t{ id: 'abono', numeric: true, disablePadding: false, label: 'Abono a percibir' },\r\n\t{ id: 'carbs', numeric: true, disablePadding: false, label: 'Detalles' },\r\n\t{ id: 'protein', numeric: true, disablePadding: false, label: 'Liquidar' }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n\tconst { onSelectAllClick, numSelected, rowCount } = props;\r\n\r\n\treturn (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\t\t\tinputProps={{ 'aria-label': 'select all desserts' }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t{headCells.map((headCell) => (\r\n\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\tkey={headCell.id}\r\n\t\t\t\t\t\talign={headCell.numeric ? 'right' : 'left'}\r\n\t\t\t\t\t\tpadding={headCell.disablePadding ? 'none' : 'default'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{headCell.label}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t);\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n\tnumSelected: PropTypes.number.isRequired,\r\n\t// onRequestSort: PropTypes.func.isRequired,\r\n\tonSelectAllClick: PropTypes.func.isRequired,\r\n\t// order: PropTypes.oneOf([ 'asc', 'desc' ]).isRequired,\r\n\t// orderBy: PropTypes.string.isRequired,\r\n\trowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaAbonos() {\r\n\tconst classes = useStyles();\r\n\tconst [ selected, setSelected ] = useState([]);\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(10);\r\n\r\n\tconst handleSelectAllClick = (event) => {\r\n\t\tif (event.target.checked) {\r\n\t\t\tconst newSelecteds = rows.map((n) => n.name);\r\n\t\t\tsetSelected(newSelecteds);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSelected([]);\r\n\t};\r\n\r\n\tconst handleClick = (event, name) => {\r\n\t\tconst selectedIndex = selected.indexOf(name);\r\n\t\tlet newSelected = [];\r\n\r\n\t\tif (selectedIndex === -1) {\r\n\t\t\tnewSelected = newSelected.concat(selected, name);\r\n\t\t} else if (selectedIndex === 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t} else if (selectedIndex > 0) {\r\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t}\r\n\r\n\t\tsetSelected(newSelected);\r\n\t};\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(parseInt(event.target.value, 10));\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tconst isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n\tconst emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\taria-label=\"a dense table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EnhancedTableHead\r\n\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\tnumSelected={selected.length}\r\n\t\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\r\n\t\t\t\t\t\t\trowCount={rows.length}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row, index) => {\r\n\t\t\t\t\t\t\t\tconst isItemSelected = isSelected(row.name);\r\n\t\t\t\t\t\t\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => handleClick(event, row.name)}\r\n\t\t\t\t\t\t\t\t\t\trole=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\">\r\n\t\t\t\t\t\t\t\t\t\t\t{row.name}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.calories}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.fat}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{row.carbs}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<DetallesCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<LiquidarCuenta />\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<TablePagination\r\n                    rowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={rows.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { Box, Button, Dialog,  DialogContent,  DialogTitle, Slide, TextField, Typography } from '@material-ui/core'\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\nexport default function AbonoaRecibir() {\r\n    //listo\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClick = () => { \r\n        setOpen(!open);\r\n    } \r\n\r\n    return (\r\n        <div>\r\n                <Button\r\n                    size=\"large\"\r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    onClick={handleClick}\r\n                >\r\n                   Abonar\r\n                </Button>\r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box display=\"flex\" justifyContent=\"flex-start\">\r\n                            Abono a recibir por cuenta\r\n                        </Box>\r\n                        <Box ml={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Cuenta No. 2501265</Typography>\r\n                        <TextField\r\n                            fullWidth\r\n                            size=\"small\"\r\n                            /* error */\r\n                            name=\"nombre_comercial\"\r\n                            id=\"form-producto-nombre-comercial\"\r\n                            variant=\"outlined\"\r\n                            value=\"$150,000.00 Mx\" \r\n                            /* helperText=\"Incorrect entry.\" */\r\n                            /* onChange={obtenerCampos} */\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1} mt={1}>\r\n                        <Typography>Nombre de Cliente: SUTANO</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1}>\r\n                        <Typography>Total a abonar:  $15,100</Typography>\r\n                    </Box>\r\n                    <Box p={1}>\r\n                        <Alert severity=\"info\">Si desea editar el abono del cliente, <br/>\r\n                        procure este sea mayor al establecido</Alert>\r\n                    </Box>\r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 16}}\r\n                        onClick={handleClick}\r\n                    >\r\n                        Registrar Abono\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, TextField, Grid } from '@material-ui/core';\r\n\r\nimport TablaAbonos from './Components/TablaAbonos';\r\nimport AbonoaRecibir from './Components/AbonoPercibir';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosClientes() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/salary.svg' alt=\"icono abono\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tAbonos de Clientes\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                        \tAbonos de Clientes\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Box width=\"50%\" p={2}>\r\n\t\t\t\t\t\t<Typography>Busqueda por cliente o por cuenta</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t/* error */\r\n\t\t\t\t\t\t\tname=\"nombre_comercial\"\r\n\t\t\t\t\t\t\tid=\"form-producto-nombre-comercial\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t/* value=\"\" */\r\n\t\t\t\t\t\t\t/* helperText=\"Incorrect entry.\" */\r\n\t\t\t\t\t\t\t/* onChange={obtenerCampos} */\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box mt={5}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\" \r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBuscar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Grid item lg={5}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" mt={4}>\r\n\t\t\t\t\t\t\t<AbonoaRecibir />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TablaAbonos />\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport CuentasEmpresaSucursales from './CuentasEmpresaSucursales/CuentasEmpresaSucursales';\r\nimport Egresos from './Egresos/Egresos';\r\nimport AbonosProveedores from './Abonos/Provedores/AbonosProovedores';\r\nimport AbonosClientes from './Abonos/Clientes/AbonosClientes';\r\n// import Transferencias from './Transferencias/Transferencias';\r\n\r\nimport SnackBarMessages from '../../../components/SnackBarMessages';\r\nimport { TesoreriaCtx } from '../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nexport default function Tesoreria() {\r\n\r\n\tconst { alert, setAlert } = useContext(TesoreriaCtx);\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.cuentas_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CuentasEmpresaSucursales />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.egresos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Egresos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosProveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosClientes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n                {/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Transferencias />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { TesoreriaProvider } from '../../../context/Tesoreria/tesoreriaCtx';\r\nimport Tesoreria from './Tesoreria';\r\n\r\nexport default function IndexTesoreria() {\r\n    return (\r\n        <TesoreriaProvider>\r\n            <Tesoreria />\r\n        </TesoreriaProvider>\r\n    )\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const FacturacionCtx = createContext();\r\n\r\nexport const FacturacionProvider = ({ children }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [datosFactura, setDatosFactura] = useState({\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion ? sesion.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  });\r\n\r\n  const [venta_factura, setVentaFactura] = useState(null);\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const [cp_valido, setCPValido] = useState(false);\r\n  const [codigo_postal, setCodigoPostal] = useState(\"\");\r\n  const [error_validation, setError] = useState({ status: false, message: \"\" });\r\n\r\n  return (\r\n    <FacturacionCtx.Provider\r\n      value={{\r\n        datosFactura,\r\n        setDatosFactura,\r\n        cp_valido,\r\n        setCPValido,\r\n        codigo_postal,\r\n        setCodigoPostal,\r\n        error_validation,\r\n        setError,\r\n        venta_factura,\r\n        setVentaFactura,\r\n        productos,\r\n        setProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </FacturacionCtx.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductosSinClaveSat({ productos, open, handleClose }) {\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              Productos sin CLAVE del catalogo SAT\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Hay productos sin clave de catalogo de productos del sat, sin esta\r\n            clave no puede realizar facturas\r\n          </DialogContentText>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer style={{ maxHeight: \"40vh\" }}>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Código de barras</TableCell>\r\n                    <TableCell>Clave alterna</TableCell>\r\n                    <TableCell>Producto</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {productos.map((row, index) => {\r\n                    const { datos_generales } = row.id_producto;\r\n                    return (\r\n                      <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.codigo_barras}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.clave_alterna}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.nombre_comercial}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()} color=\"inherit\" size=\"large\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CONSULTA_PRODUCTOS = gql`\r\n  query ObtenerConsultaGeneralVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTO_UNITARIO = gql`\r\n  query ObtenerUnProductoVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $datosProductos: ID!\r\n  ) {\r\n    obtenerUnProductoVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      datosProductos: $datosProductos\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_VENTAS = gql`\r\n  query ObtenerProductosVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerProductosVentasInput\r\n  ) {\r\n    obtenerProductosVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES_VENTAS = gql`\r\n  query ObtenerClientesVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerClientesVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      numero_cliente\r\n      clave_cliente\r\n      nombre_cliente\r\n      rfc\r\n      curp\r\n      telefono\r\n      celular\r\n      email\r\n      numero_descuento\r\n      limite_credito\r\n      dias_credito\r\n      razon_social\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      banco\r\n      numero_cuenta\r\n      monedero_electronico\r\n      credito_disponible\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_VENTA = gql`\r\n  mutation createVenta(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n  ) {\r\n    createVenta(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_VENTAS_SUCURSAL = gql`\r\nquery obtenerVentasSucursal($empresa: ID!, $sucursal: ID!, $filtro: String ) {\r\n\t\tobtenerVentasSucursal(empresa: $empresa, sucursal: $sucursal, filtro: $filtro) {\r\n\t\t\t_id\r\n      folio\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n        rfc\r\n        telefono\r\n        celular\r\n        email\r\n        razon_social\r\n      }\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general_activo\r\n      id_caja{\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      fecha_de_vencimiento_credito\r\n      dias_de_credito_venta\r\n      empresa\r\n      sucursal\r\n      usuario{\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      productos{\r\n        _id\r\n        id_producto{\r\n          _id\r\n          datos_generales{\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat{\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios{\r\n            ieps\r\n            ieps_activo\r\n            inventario{\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra{\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra{\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n            granel\r\n            litros\r\n          }\r\n          imagenes{\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos{\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos{\r\n            precio_cajas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_costales{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n            precio_piezas{\r\n              plazo\r\n              unidad\r\n              codigo_unidad\r\n              precio\r\n            }\r\n          }\r\n          unidades_de_venta{\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general{\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          medidas_producto{\r\n            _id\r\n            cantidad\r\n            cantidad_nueva\r\n            almacen\r\n            codigo_barras\r\n            color{\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento{\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida{\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad{\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        iva_total\r\n        ieps_total\r\n        subtotal\r\n        impuestos\r\n        total\r\n        medida{\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color{\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto{\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        id_unidad_venta\r\n        year_registro\r\n        fecha_registro\r\n        precio_unidad{\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        precio_actual_object{\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      }\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport ProductosSinClaveSat from \"./ProductosSinClave\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar venta</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ComponentBusquedaVenta handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cancelar</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ComponentBusquedaVenta = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open_productos, setOpenProductos] = useState(false);\r\n  const [productos_sin_clave, setProductosSinClave] = useState([]);\r\n\r\n  const openProductosClaves = () => setOpenProductos(true);\r\n  const closeProductosClaves = () => setOpenProductos(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro: value,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ProductosSinClaveSat\r\n        productos={productos_sin_clave}\r\n        open={open_productos}\r\n        handleClose={closeProductosClaves}\r\n      />\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={8} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={4} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar una venta haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        handleClose={handleClose}\r\n        setProductosSinClave={setProductosSinClave}\r\n        openProductosClaves={openProductosClaves}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  handleClose,\r\n  setProductosSinClave,\r\n  openProductosClaves,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { setVentaFactura, setProductos } = useContext(FacturacionCtx);\r\n  const { loading, data, error } = resultado_ventas;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerVentasSucursal } = data;\r\n\r\n  const obtenerVenta = (click, data) => {\r\n    setSelected(data.folio);\r\n    if (click === 2) {\r\n      console.log(data);\r\n      const without_sat_code = data.productos.filter(\r\n        (res) => !res.id_producto.datos_generales.clave_producto_sat.Value\r\n      );\r\n\r\n      if (without_sat_code.length > 0) {\r\n        setProductosSinClave(without_sat_code);\r\n        openProductosClaves();\r\n        return;\r\n      }\r\n\r\n      const { productos, ...venta } = {...data}\r\n      const productos_base = [...data.productos]\r\n      setVentaFactura(venta);\r\n      setProductos(productos_base);\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.map((data, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  selected={data.folio === selected}\r\n                  onClick={(e) => obtenerVenta(e.detail, data)}\r\n                >\r\n                  <TableCell>{data.folio}</TableCell>\r\n                  <TableCell>\r\n                    {data.cliente !== null ? data.cliente.nombre_cliente : \"-\"}\r\n                  </TableCell>\r\n                  <TableCell>{data.usuario.nombre}</TableCell>\r\n                  <TableCell>{data.id_caja.numero_caja}</TableCell>\r\n                  <TableCell>\r\n                    ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n                  </TableCell>\r\n                  <TableCell>${formatoMexico(data.subTotal)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport { CircularProgress, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { CheckCircle, Error } from \"@material-ui/icons\";\r\n\r\nexport default function CodigoPostal() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const {\r\n    cp_valido,\r\n    setCPValido,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    error_validation,\r\n  } = React.useContext(FacturacionCtx);\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const [CP] = useDebounce(value, 500);\r\n\r\n  const obtenerCodigoPostal = React.useCallback(async (codigo_postal) => {\r\n    if (!codigo_postal) return;\r\n    try {\r\n      setLoading(true);\r\n      const result = await Facturama.Catalogs.PostalCodes(\r\n        codigo_postal,\r\n        function (result) {\r\n          return result;\r\n        }\r\n      );\r\n\r\n      if (result) {\r\n        setCPValido(true);\r\n        setLoading(false);\r\n        setCodigoPostal(result[0].Value);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCPValido(false);\r\n      setCodigoPostal(\"\");\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    obtenerCodigoPostal(CP);\r\n  }, [CP]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <Typography>Código Postal:</Typography> */}\r\n      <form onSubmit={obtenerCodigoPostal}>\r\n        <TextField\r\n          fullWidth\r\n          name=\"expedition_place\"\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          value={value}\r\n          label=\"Código postal\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {value ? (\r\n                  loading ? (\r\n                    <CircularProgress size={20} />\r\n                  ) : cp_valido ? (\r\n                    <CheckCircle color=\"primary\" />\r\n                  ) : (\r\n                    <Error color=\"error\" />\r\n                  )\r\n                ) : (\r\n                  <div />\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          /* error={value ? cp_valido ? false : true : false}\r\n          helperText={value ? cp_valido ? \"\" : \"Introduce un CP valido\" : \"\"} */\r\n\r\n          error={\r\n            error_validation.status && !value\r\n              ? true\r\n              : value\r\n              ? cp_valido\r\n                ? false\r\n                : true\r\n              : false\r\n          }\r\n          helperText={\r\n            error_validation.status && !value\r\n              ? error_validation.message\r\n              : value\r\n              ? cp_valido\r\n                ? \"\"\r\n                : \"Introduce un CP valido\"\r\n              : \"\"\r\n          }\r\n        />\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { Close, Error, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport CrearCliente from \"../../Catalogos/Cliente/CrearCliente\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaClientesFacturas() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar cliente</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <BuscadorClienteComponent handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button size=\"large\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst BuscadorClienteComponent = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [openAlertRfc, setOpenAlertRfc] = useState(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const resultado_clientes = useQuery(OBTENER_CLIENTES, {\r\n    variables: { tipo: \"CLIENTE\", filtro: value },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const handleCloseAlertRFC = () => {\r\n    setOpenAlertRfc(false);\r\n  };\r\n  const openAlertRFC = () => {\r\n    setOpenAlertRfc(true);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <ClienteProvider>\r\n        <Dialog\r\n          open={openAlertRfc}\r\n          TransitionComponent={Transition}\r\n          keepMounted\r\n          onClose={(_, reason) => {\r\n            if (reason !== \"backdropClick\") {\r\n              handleCloseAlertRFC();\r\n            }\r\n          }}\r\n        >\r\n          <DialogContent>\r\n            <Alert severity=\"info\">\r\n              Deber registrar un RFC y RAZON SOCIAL a este cliente.\r\n            </Alert>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => handleCloseAlertRFC()} color=\"primary\">\r\n              Aceptar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Box mb={2} display=\"flex\" alignItems=\"center\">\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => setFiltro(e.target.value)}\r\n            value={filtro}\r\n          />\r\n          <CrearCliente\r\n            tipo=\"CLIENTE\"\r\n            accion=\"registrar\"\r\n            refetch={resultado_clientes.refetch}\r\n          />\r\n        </Box>\r\n        <Box my={1}>\r\n          <Alert severity=\"info\">\r\n            Para seleccionar un cliente haz un doble click!\r\n          </Alert>\r\n        </Box>\r\n        <RenderListClientes\r\n          handleClose={handleClose}\r\n          resultado_clientes={resultado_clientes}\r\n          openAlertRFC={openAlertRFC}\r\n        />\r\n      </ClienteProvider>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderListClientes = ({\r\n  handleClose,\r\n  resultado_clientes,\r\n  openAlertRFC,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  const { loading, data, error, refetch } = resultado_clientes;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const obtenerClienteTabla = (click, row) => {\r\n    setSelected(row.nombre_cliente);\r\n    if (click === 2) {\r\n      if (!row.rfc) {\r\n        openAlertRFC();\r\n        return;\r\n      }\r\n      setDatosFactura({\r\n        ...datosFactura,\r\n        receiver: {\r\n          ...datosFactura.receiver,\r\n          Name: row.nombre_cliente,\r\n          Rfc: row.rfc,\r\n        },\r\n      });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n              <TableCell minwidth=\"100\">Clave</TableCell>\r\n              <TableCell minwidth=\"150\">Nombre</TableCell>\r\n              <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              <TableCell minwidth=\"150\">RFC</TableCell>\r\n              <TableCell minwidth=\"150\">Editar Cliente</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.map((row, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  onClick={(e) => obtenerClienteTabla(e.detail, row)}\r\n                  selected={row.nombre_cliente === selected}\r\n                >\r\n                  <TableCell>\r\n                    <Typography>{row.numero_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.clave_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.nombre_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.razon_social}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>\r\n                      {row.rfc ? row.rfc : <Error color=\"primary\" />}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <CrearCliente\r\n                      tipo=\"CLIENTE\"\r\n                      accion=\"actualizar\"\r\n                      datos={row}\r\n                      refetch={refetch}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ListaVentasFactura from \"./ListaVentas/ListaVentasFactura.js\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx.js\";\r\nimport CodigosPostales from \"./Catalogos/CodigoPostal.js\";\r\nimport { tipoCambio, tiposCfdi } from \"../catalogos\";\r\nimport ListaClientesFacturas from \"./ClientesSelect.js\";\r\n\r\nexport default function RegistroFactura({ serie_default }) {\r\n  const { datosFactura, setDatosFactura, error_validation, venta_factura } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { folio, serie } = serie_default[0];\r\n    setDatosFactura({ ...datosFactura, folio: folio.toString(), serie });\r\n  }, []);\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={5}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>{`Emisor: ${datosFactura.issuer.Name}`}</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.issuer.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.issuer.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.issuer.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Regimen fiscal</Typography>\r\n              <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                <TextField\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={datosFactura.issuer.FiscalRegime}\r\n                  disabled\r\n                  error={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                  }\r\n                  helperText={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                      ? error_validation.message\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>Receptor</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Cliente</Typography>\r\n              <TextField\r\n                value={datosFactura.receiver.Name}\r\n                placeholder=\"Selecciona un cliente\"\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <ListaClientesFacturas />\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                  disabled: true,\r\n                }}\r\n                error={error_validation.status && !datosFactura.receiver.Name}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Name\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.receiver.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.receiver.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Box mt={1} mb={2}>\r\n        <Typography>\r\n          <b>Datos factura</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <TextField\r\n            value={datosFactura.cliente}\r\n            placeholder=\"Selecciona venta a facturar\"\r\n            fullWidth\r\n            size=\"small\"\r\n            label=\"Folio Venta\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <ListaVentasFactura />\r\n                </InputAdornment>\r\n              ),\r\n              readOnly: true,\r\n              disabled: true,\r\n            }}\r\n            value={venta_factura ? venta_factura.folio : ''}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.folio}\r\n            label=\"Folio\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.folio}\r\n            helperText={\r\n              error_validation.status && !datosFactura.folio\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.serie}\r\n            label=\"Serie\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.serie}\r\n            helperText={\r\n              error_validation.status && !datosFactura.serie\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cfdi_type\"\r\n            error={error_validation.status && !datosFactura.cfdi_type}\r\n          >\r\n            <InputLabel id=\"cfdi_type\">Tipo de CFDI</InputLabel>\r\n            <Select\r\n              labelId=\"cfdi_type\"\r\n              value={datosFactura.cfdi_type}\r\n              name=\"cfdi_type\"\r\n              onChange={obtenerDatos}\r\n              label=\"tipo de CFDI\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tiposCfdi.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.cfdi_type\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"currency\"\r\n            error={error_validation.status && !datosFactura.currency}\r\n          >\r\n            <InputLabel id=\"moneda\">Moneda</InputLabel>\r\n            <Select\r\n              labelId=\"moneda\"\r\n              value={datosFactura.currency}\r\n              name=\"currency\"\r\n              onChange={obtenerDatos}\r\n              label=\"moneda\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tipoCambio.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.currency\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <CodigosPostales />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Close, Edit } from \"@material-ui/icons\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ModificarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const [producto_base, setProductoBase] = useState({ ...producto });\r\n  const [venta_base, setVentaBase] = useState({ ...venta });\r\n\r\n  const [cantidad_base, setCantidad] = useState(producto_base.cantidad_venta);\r\n  const [precio_base, setPrecio] = useState(\r\n    producto_base.precio_actual_object.precio_neto\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    handleClose();\r\n    setProductoBase(producto);\r\n    setVentaBase(venta);\r\n    setCantidad(producto.cantidad_venta);\r\n    setPrecio(producto.precio_actual_object.precio_neto);\r\n  };\r\n\r\n  const obtenerDatos = async (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad_venta\") {\r\n      setCantidad(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n    if (!value) return;\r\n    //##################\r\n    let venta_copy = { ...venta_base };\r\n    let copy_producto = { ...producto_base };\r\n    let { precio_actual_object, cantidad_venta, granel_producto } = {\r\n      ...copy_producto,\r\n    };\r\n\r\n    const { precios } = { ...copy_producto.id_producto };\r\n    //meter el precio original para restalo a la venta\r\n    const resta_base = await calculatePrices2({\r\n      newP: copy_producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //restal resultados a la venta\r\n\r\n    venta_copy.iva = venta_copy.iva - resta_base.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps - resta_base.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos - resta_base.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal - resta_base.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total - resta_base.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero - resta_base.monederoCalculo;\r\n\r\n    //realizar calculos de cantidad\r\n    //meter el precio nuevo para sumarlo a la venta\r\n    let suma_nuevo;\r\n\r\n    if (name === \"cantidad_venta\") {\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: parseFloat(value),\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precio_actual_object,\r\n      });\r\n      copy_producto.cantidad_venta = parseFloat(value);\r\n      setProductoBase({ ...copy_producto, [name]: parseFloat(value) });\r\n    } else {\r\n      const precio_neto = parseFloat(value);\r\n      //sacar impuestos\r\n      const { iva, ieps } = precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n\r\n      //sacar precio_venta\r\n      let PVCI = parseFloat((precio_neto / cantidad_venta).toFixed(2));\r\n      let PVSI = parseFloat((PVCI / (suma_impuestos + 1)).toFixed(2));\r\n\r\n      //sacar iva e ieps\r\n      let iva_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`).toFixed(2)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`).toFixed(2)\r\n      );\r\n      //sacar utilidad\r\n      let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((PVSI - PCSI) / PCSI) * 100).toFixed(2));\r\n      let precios_nuevos = { ...precio_actual_object };\r\n\r\n      let impuestos_precio = ieps_precio + iva_precio;\r\n\r\n      precios_nuevos.ieps_precio = ieps_precio;\r\n      precios_nuevos.iva_precio = iva_precio;\r\n      precios_nuevos.precio_venta = PVSI;\r\n      precios_nuevos.precio_neto = PVCI;\r\n      precios_nuevos.utilidad = utilidad;\r\n      if (precio_actual_object.unidad_maxima) {\r\n        precio_actual_object.precio_general = precio_neto;\r\n      }\r\n\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: cantidad_venta,\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precios_nuevos,\r\n      });\r\n      setProductoBase({\r\n        ...copy_producto,\r\n        precio_actual_object: precios_nuevos,\r\n        ieps_total: precios_nuevos.ieps_precio * cantidad_base,\r\n        iva_total: precios_nuevos.iva_precio * cantidad_base,\r\n        precio_a_vender: precios_nuevos.precio_neto * cantidad_base,\r\n        precio_actual_producto: precios_nuevos.precio_neto * cantidad_base,\r\n        subtotal: precios_nuevos.precio_venta * cantidad_base,\r\n        impuestos: impuestos_precio * cantidad_base,\r\n        total: precios_nuevos.precio_neto * cantidad_base,\r\n      });\r\n    }\r\n    //sumar resultados a la venta\r\n    venta_copy.iva = venta_copy.iva + suma_nuevo.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps + suma_nuevo.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos + suma_nuevo.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal + suma_nuevo.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total + suma_nuevo.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero + suma_nuevo.monederoCalculo;\r\n    setVentaBase(venta_copy);\r\n  };\r\n\r\n  const verificarCampoVacio = (value) => {\r\n    if (!value) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n  };\r\n\r\n  const guardarPrecios = () => {\r\n    if (error) return;\r\n    const copy_array_productos = [...productos];\r\n    copy_array_productos.splice(index, 1, producto_base);\r\n    setVentaFactura(venta_base);\r\n    setProductos(copy_array_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Edit />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              {producto_base.id_producto.datos_generales.nombre_comercial}\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleCancel()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Box mb={2}>\r\n              <Typography>\r\n                <b>Producto</b>\r\n              </Typography>\r\n              <TableContainer>\r\n                <Table size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                      <TableCell style={{ width: 50 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow tabIndex={-1}>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={cantidad_base}\r\n                          type=\"number\"\r\n                          name=\"cantidad_venta\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                {producto_base.unidad}\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={\r\n                            producto ? producto.cantidad_venta.toString() : \"\"\r\n                          }\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !cantidad_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={precio_base}\r\n                          type=\"number\"\r\n                          name=\"precio_neto\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                $\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={producto.precio_actual_object.precio_neto.toString()}\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !precio_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.subtotal)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.impuestos)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.total)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Box>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                  <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.iva)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.ieps)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.subTotal)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.impuestos)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.total)}</b>\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => guardarPrecios()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(FacturacionCtx);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const copy_venta = { ...venta };\r\n    const copy_productos = [ ...productos];\r\n    const { cantidad_venta, granel_producto, precio_actual_object } = producto;\r\n    const { iva, ieps, impuestos, subTotal, total, monedero } = copy_venta;\r\n    //devuelve cantidades a restar\r\n    const precio_resta = await calculatePrices2({\r\n      newP: producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //Restar precios a venta\r\n    console.log(precio_resta);\r\n    const {\r\n      ivaCalculo,\r\n      iepsCalculo,\r\n      impuestoCalculo,\r\n      subtotalCalculo,\r\n      totalCalculo,\r\n      monederoCalculo,\r\n    } = precio_resta;\r\n\r\n    copy_venta.iva = iva - ivaCalculo;\r\n    copy_venta.ieps = ieps - iepsCalculo;\r\n    copy_venta.impuestos = impuestos - impuestoCalculo;\r\n    copy_venta.subTotal = subTotal - subtotalCalculo;\r\n    copy_venta.total = total - totalCalculo;\r\n    copy_venta.monedero = monedero - monederoCalculo;\r\n\r\n    //remover de la lista\r\n    copy_productos.splice(index, 1);\r\n    setVentaFactura(copy_venta);\r\n    setProductos(copy_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Close />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>¿Está seguro de eliminar este producto?</DialogTitle>\r\n        <DialogContent>\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 100 }}>Producto</TableCell>\r\n                  <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n                  <TableCell>{producto.cantidad_venta}</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => handleDelete()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport ModificarProductoFactura from \"./EditarProductoFactura\";\r\nimport EliminarProductoFactura from \"./EliminarProductoFactura\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"36vh\",\r\n  },\r\n});\r\n\r\nexport default function DetallesFactura() {\r\n  const classes = useStyles();\r\n  const { venta_factura, productos } = useContext(FacturacionCtx);\r\n\r\n  if (!venta_factura) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"elevation\">\r\n      <Box textAlign=\"center\">\r\n        <Typography variant=\"button\">Detalles de Venta</Typography>\r\n      </Box>\r\n      <TableContainer>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Folio</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cliente</TableCell>\r\n              <TableCell style={{ width: 50 }}>Descuento</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Usuario</TableCell>\r\n              <TableCell style={{ width: 50 }}>Caja</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.folio}\r\n              </TableCell>\r\n              <TableCell style={{ width: 50 }}>\r\n                {venta_factura.cliente !== null\r\n                  ? venta_factura.cliente.nombre_cliente\r\n                  : \"-\"}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.descuento)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.iva\r\n                  ? formatoMexico(venta_factura.iva)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.ieps\r\n                  ? formatoMexico(venta_factura.ieps)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.subTotal)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.impuestos)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.total)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.usuario.nombre}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.id_caja.numero_caja}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box textAlign=\"center\" mt={1}>\r\n        <Typography variant=\"button\">Productos de Venta</Typography>\r\n      </Box>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Producto</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Modificar</TableCell>\r\n              <TableCell style={{ width: 50 }}>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos.map((producto, index) => {\r\n              return (\r\n                <RowTableProductos\r\n                  venta={venta_factura}\r\n                  producto={producto}\r\n                  key={index}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowTableProductos = ({ venta, producto, index }) => {\r\n  const { datos_generales } = producto.id_producto;\r\n  return (\r\n    <TableRow tabIndex={-1}>\r\n      <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n      <TableCell>{producto.cantidad_venta}</TableCell>\r\n      <TableCell>${formatoMexico(producto.iva_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.ieps_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.subtotal)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.impuestos)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.total)}</TableCell>\r\n      <TableCell>\r\n        <ModificarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n      <TableCell>\r\n        <EliminarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\nexport const factura_initial_state = {\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion ? sesion.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  }","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport moment from \"moment\";\r\nimport { verificarDatosFactura } from \"./validacion_factura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { CREAR_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { formaPago, metodoPago, tiposCfdi, usosCfdi } from \"../catalogos\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RealizarFactura({ setAlert }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    datosFactura,\r\n    setDatosFactura,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    productos,\r\n    setProductosFactura,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const [CrearFactura] = useMutation(CREAR_FACTURA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setProductosFactura([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const crearFactura = async () => {\r\n    try {\r\n      /* setLoading(true); */\r\n      let nuevo_obj = { ...datosFactura };\r\n\r\n      /* \r\n      {\r\n          ProductCode: \"50202306\",\r\n          IdentificationNumber: \"61b7bf6e3454b727a0c2e357\",\r\n          Description: \"COCACOLA\",\r\n          //Unit: \"Unidad de Servicio\",\r\n          UnitCode: \"XBX\",\r\n          UnitPrice: \"36\",\r\n          Quantity: \"1\",\r\n          Subtotal: \"36\",\r\n          Discount: \"5.4\",\r\n          Taxes: [\r\n            {\r\n              Total: \"4.89\",\r\n              Name: \"IVA\",\r\n              Base: \"30.6\",\r\n              Rate: \"0.16\",\r\n              IsRetention: \"false\",\r\n            },\r\n          ],\r\n          Total: \"35.49\",\r\n        }, */\r\n\r\n      const items = [];\r\n\r\n      productos.forEach(producto => {\r\n        console.log(producto);\r\n        let {iva, ieps} = producto.id_producto.precios;\r\n        let Taxes = [];\r\n\r\n        if(producto.iva_total){\r\n          Taxes.push({\r\n            Total: producto.iva_total,\r\n            Name: \"IVA\",\r\n            Base: producto.precio_a_vender,\r\n            Rate: `0.${iva < 10 ? `0${iva}` : iva}`,\r\n            IsRetention: \"true\",\r\n          })\r\n        }\r\n        if(producto.ieps_total){\r\n          Taxes.push({\r\n            Total: producto.ieps_total,\r\n            Name: \"IEPS\",\r\n            Base: producto.precio_a_vender,\r\n            Rate: `0.${ieps < 10 ? `0${ieps}` : ieps}`,\r\n            IsRetention: \"true\",\r\n          })\r\n        }\r\n        items.push(\r\n          {\r\n            ProductCode: producto.id_producto.datos_generales.clave_producto_sat.Value,\r\n            IdentificationNumber: producto.id_producto._id,\r\n            Description: producto.id_producto.datos_generales.nombre_comercial,\r\n            UnitCode: producto.codigo_unidad,\r\n            UnitPrice: producto.precio_actual_object.precio_venta,\r\n            Quantity: producto.cantidad_venta,\r\n            Subtotal: producto.subtotal,\r\n            Discount: producto.precio_actual_object.dinero_descontado ? producto.precio_actual_object.dinero_descontado : 0,\r\n            Taxes,\r\n            Total: producto.total\r\n          },\r\n        )\r\n      });\r\n      \r\nconsole.log(items);\r\n      return\r\n\r\n      //poner la fecha de facturacion\r\n      if (datosFactura.date === \"1\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(1, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else if (datosFactura.date === \"2\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(2, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else {\r\n        nuevo_obj.date = moment().format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      }\r\n\r\n      nuevo_obj.items = productos;\r\n      nuevo_obj.expedition_place = codigo_postal;\r\n\r\n      /* validar todos los datos */\r\n      const validate = verificarDatosFactura(nuevo_obj);\r\n\r\n      console.log(nuevo_obj);\r\n      if (validate.length) {\r\n        setError({ status: true, message: validate[0].message });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setError({ status: false, message: \"\" });\r\n\r\n      let result = await CrearFactura({\r\n        variables: {\r\n          input: nuevo_obj,\r\n        },\r\n      });\r\n      console.log(\"result\", result);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearFactura.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      /* limpiarCampos(); */\r\n    } catch (error) {\r\n      console.log(error);\r\n      console.log(error.response);\r\n      setLoading(false);\r\n      if (error.response) {\r\n        setAlert({\r\n          message: error.response,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        startIcon={<DoneIcon />}\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" m={1}>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            variant=\"contained\"\r\n          >\r\n            <Close />\r\n          </Button>\r\n        </Box>\r\n        <DialogContent>\r\n          <InputsFacturaModal />\r\n        </DialogContent>\r\n        <DialogActions style={{justifyContent: \"center\"}}>\r\n          <Button\r\n            startIcon={<Done />}\r\n            onClick={() => crearFactura()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputsFacturaModal = () => {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerUsoCfdi = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      receiver: {\r\n        ...datosFactura.receiver,\r\n        [name]: value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box my={1}>\r\n        <Typography>Fecha de facturación</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"date\"\r\n          error={error_validation.status && !datosFactura.date}\r\n        >\r\n          <Select value={datosFactura.date} name=\"date\" onChange={obtenerDatos}>\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona una fecha</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"0\">{moment().format(\"LL\")}</MenuItem>\r\n            <MenuItem value=\"1\">\r\n              {moment().subtract(1, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"2\">\r\n              {moment().subtract(2, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.date\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Forma de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_form\"\r\n          error={error_validation.status && !datosFactura.payment_form}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_form}\r\n            name=\"payment_form\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {formaPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_form\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Método de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_method\"\r\n          error={error_validation.status && !datosFactura.payment_method}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_method}\r\n            name=\"payment_method\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {metodoPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_method\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box>\r\n        <Typography>Uso de CFDi</Typography>\r\n        <FormControl\r\n          fullWidth\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          error={error_validation.status && !datosFactura.receiver.CfdiUse}\r\n        >\r\n          <Select\r\n            value={datosFactura.receiver.CfdiUse}\r\n            name=\"CfdiUse\"\r\n            onChange={obtenerUsoCfdi}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {usosCfdi.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.receiver.CfdiUse\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFactura({ open, setOpen, handleCloseFactura }) {\r\n  const {\r\n    setDatosFactura,\r\n    setCodigoPostal,\r\n    setProductos,\r\n    setVentaFactura,\r\n    setCPValido,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n    setCPValido(false);\r\n    setError({ status: false, message: \"\" });\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelar = () => {\r\n    limpiarCampos();\r\n    handleClose();\r\n    handleCloseFactura();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n      >\r\n        <DialogTitle>{\"¿Estás seguro de cancelar esta factura?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cerrar</Button>\r\n          <Button onClick={() => cancelar()} color=\"primary\">\r\n            Cancelar Factura\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport RegistroFactura from \"./RegistroFactura\";\r\nimport DetallesFactura from \"./TablaVenta/TablaDetallesFactura\";\r\nimport { ClienteProvider } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport {\r\n  FacturacionCtx,\r\n  FacturacionProvider,\r\n} from \"../../../../context/Facturacion/facturacionCtx\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport RealizarFactura from \"./RealizarFactura\";\r\nimport CancelarFactura from \"./CancelarFactura\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function NuevaFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ClienteProvider>\r\n        <Button fullWidth onClick={() => handleClickOpen()}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-2.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n            Generar nuevo CFDI\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={() => handleClose()}\r\n          disableEscapeKeyDown\r\n          TransitionComponent={Transition}\r\n        >\r\n          <FacturacionProvider>\r\n            <DialogFacturaPrincipal handleClose={handleClose} />\r\n          </FacturacionProvider>\r\n        </Dialog>\r\n      </ClienteProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DialogFacturaPrincipal = ({ handleClose }) => {\r\n  const classes = useStyles();\r\n  const { venta_factura } = useContext(FacturacionCtx);\r\n  const [openCancel, setOpenCancel] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenCancel(true);\r\n  };\r\n\r\n  const cancelarCFDI = () => {\r\n    if (venta_factura !== null) {\r\n      handleClickOpen();\r\n    } else {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Generar nuevo CFDI\r\n          </Typography>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"inherit\"\r\n              onClick={() => cancelarCFDI()}\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <FacturaModalContent />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <RealizarFactura setAlert={setAlert} />\r\n      </DialogActions>\r\n      <CancelarFactura\r\n        open={openCancel}\r\n        setOpen={setOpenCancel}\r\n        handleCloseFactura={handleClose}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst FacturaModalContent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { seriesCfdi } = data.obtenerSeriesCdfi;\r\n\r\n  let serie_default = [];\r\n  serie_default = seriesCfdi.filter((serie) => serie.default === true);\r\n  if (!serie_default.length) {\r\n    serie_default = [{ folio: \"\", serie: \"\" }];\r\n    console.log(serie_default);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {!seriesCfdi.length ? (\r\n        <Alert severity=\"warning\">No tienes Series CFDI registradas</Alert>\r\n      ) : null}\r\n      <Box my={2}>\r\n        <RegistroFactura serie_default={serie_default} />\r\n      </Box>\r\n      <DetallesFactura />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Close, Done } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CREAR_SERIE } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroSeries({ refetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({ folio: \"\", serie: \"\", default: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearSerieCFDI] = useMutation(CREAR_SERIE);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({ folio: \"\", serie: \"\", default: false });\r\n  };\r\n\r\n  const obtenerDatosSeries = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPredeterminado = (e) => {\r\n    const { name, checked } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const guardarDatosBD = async () => {\r\n    if (!datos.folio || !datos.serie) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await crearSerieCFDI({\r\n        variables: {\r\n          input: {\r\n            serie: datos.serie,\r\n            folio: parseInt(datos.folio),\r\n            default: datos.default,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearSerieCFDI.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Add />}\r\n        >\r\n          Nueva serie\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Registrar nueva serie</DialogTitle>\r\n        <DialogContent>\r\n          <Box width=\"100%\">\r\n            <Typography>Serie para CDFI:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"serie\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>Folio Inicial:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"folio\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <FormControlLabel\r\n            style={{ marginTop: 8 }}\r\n            control={\r\n              <Checkbox\r\n                checked={datos.default}\r\n                onChange={obtenerPredeterminado}\r\n                name=\"default\"\r\n              />\r\n            }\r\n            label=\"Serie predeterminada\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            disabled={!datos.serie || !datos.folio || loading}\r\n            onClick={() => guardarDatosBD()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Backdrop, Checkbox, CircularProgress } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ACTUALIZAR_DEFAULT_SERIE,\r\n  ELIMINAR_SERIE,\r\n} from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"80vh\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function ListaSeriesCDFI({ obtenerSeriesCdfi, refetch }) {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { seriesCfdi } = obtenerSeriesCdfi;\r\n  const [modificarDefaultSerie] = useMutation(ACTUALIZAR_DEFAULT_SERIE);\r\n\r\n  const setPredeterminado = async (value, data) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await modificarDefaultSerie({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.modificarDefaultSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Backdrop className={classes.backdrop} open={loading}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Serie</TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Predeterminado</TableCell>\r\n              <TableCell padding=\"checkbox\">Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {seriesCfdi.map((row, index) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                  <TableCell>{row.serie}</TableCell>\r\n                  <TableCell>{row.folio}</TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <Checkbox\r\n                      checked={row.default}\r\n                      onChange={(e) => setPredeterminado(e.target.checked, row)}\r\n                      name=\"checkedA\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.eliminar === false ? (null) : (\r\n                      <ModalDeleteSerie\r\n                        row={row}\r\n                        refetch={refetch}\r\n                        setAlert={setAlert}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst ModalDeleteSerie = ({ row, refetch, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarSerie] = useMutation(ELIMINAR_SERIE);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const eliminarSerieBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarSerie({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton aria-label=\"delete\" size=\"small\" onClick={() => handleOpen()} disabled={row.default}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Se eliminara esta serie</DialogTitle>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            onClick={() => eliminarSerieBD()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { forwardRef, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Container,\r\n  Dialog,\r\n  makeStyles,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RegistroSeries from \"./RegistroSeries\";\r\nimport ListaSeriesCDFI from \"./ListaSeries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SeriesCDFI() {\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-1.png\"\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Registrar Series CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Seleccion de Series para CFDI\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button color=\"secondary\" variant=\"contained\" onClick={handleClickOpen} size=\"large\">\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ContentSeriesCFDI />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentSeriesCFDI = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerSeriesCdfi } = data;\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box my={2}>\r\n        {sesion.accesos.facturacion.registro_series_cdfi.agregar === false ? (null) : (\r\n          <RegistroSeries refetch={refetch} />\r\n        )}\r\n      </Box>\r\n      <ListaSeriesCDFI\r\n        obtenerSeriesCdfi={obtenerSeriesCdfi}\r\n        refetch={refetch}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosFacturaExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={\"Detalle de compra\"}\r\n          >\r\n            <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n            <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n              <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n              <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n              <ExcelColumn label=\"Color\" value=\"color\" />\r\n              <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n              <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n              <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n              <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n              <ExcelColumn\r\n                label=\"Precio de descuento\"\r\n                value=\"descuento_precio\"\r\n              />\r\n              <ExcelColumn\r\n                label=\"Porcentaje de descuento\"\r\n                value=\"descuento_porcentaje\"\r\n              />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosFacturaExcel from \"./ExportarProductosFactura\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <ExportarProductosFacturaExcel compra={compra} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida ? datos.medida.medida : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosFactura\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"72vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaFacturas({ obtenerComprasRealizadas }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Productos</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.map((compra, index) => (\r\n              <RenderRowsCompras key={index} compra={compra} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Acpetar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const compras = obtenerComprasRealizadas.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid item>\r\n          <ExcelFile\r\n            element={\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CloudDownloadOutlined />}\r\n                >\r\n                  Exportar a Excel\r\n                </Button>\r\n              </Box>\r\n            }\r\n            filename={nombre_documento}\r\n          >\r\n            <ExcelSheet data={compras} name={nombre_documento}>\r\n              <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n              <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n              <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n              <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n              <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n              <ExcelColumn label=\"Total\" value=\"total\" />\r\n            </ExcelSheet>\r\n          </ExcelFile>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaFacturas\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarListaFacturasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura-3.png\"\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          CFDis realizados\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              CFDis realizados\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha });\r\n    setFiltro(value);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha });\r\n    setFiltro(\"\");\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    refetch({ filtro, fecha: \"\" });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(7, \"d\").format() });\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(2, \"w\").format() });\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"M\").format() });\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(3, \"M\").format() });\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(6, \"M\").format() });\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(8, \"M\").format() });\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({ filtro, fecha: moment().subtract(1, \"y\").format() });\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\" });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <ExportarComprasExcel\r\n              obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n              filtro={filtro}\r\n              filtroFecha={filtroFecha}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras obtenerComprasRealizadas={obtenerComprasRealizadas} />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nimport { Box, Container, Grid } from '@material-ui/core'\r\n\r\nimport NuevaFactura from './NuevaFactura/NuevaFactura';\r\nimport SeriesCDFI from './CFDISeries/SeriesCdfi';\r\n/* import SellosCDFI from './CFDISellos/SellosCdfi'; */\r\nimport FacturasRealizadas from './FacturasRealizadas/FacturasRealizadas';\r\n\r\nexport default function Facturacion() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Grid container spacing={2} justify=\"center\">\r\n                    {sesion.accesos.facturacion.generar_cdfi.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <NuevaFactura />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    {sesion.accesos.facturacion.cdfi_realizados.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <FacturasRealizadas />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    {/* \r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SellosCDFI />\r\n                        </Box>\r\n                    </Grid> */}\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.ver === false ? (null) : (\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <SeriesCDFI />\r\n                            </Box>\r\n                        </Grid>\r\n                    )}\r\n                    \r\n                </Grid>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { \r\n    Paper, \r\n    makeStyles, \r\n    Table, \r\n    TableBody, \r\n    TableCell, \r\n    TableContainer, \r\n    TableHead, \r\n    TableRow, \r\n    CircularProgress,\r\n    Box,\r\n    Typography,\r\n\tIconButton,\r\n\tTablePagination\r\n} from '@material-ui/core/';\r\nimport { Delete } from '@material-ui/icons';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\n\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport { CrearAlmacenContext } from '../../../../context/Almacenes/crearAlmacen';\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t}\r\n  });\r\n\r\n  const columns = [\r\n\t{ id: 1, label: 'Nombre', minWidth: 100 },\r\n\t{ id: 2, label: 'Encargado', minWidth: 100 },\r\n\t{ id: 3, label: 'Sucursal', minWidth: 150 },\r\n\t{ id: 4, label: 'Calle', minWidth: 150 },\r\n\t{ id: 5, label: 'No. exterior', minWidth: 150 },\r\n\t{ id: 6, label: 'No. interior', minWidth: 100 },\r\n\t{ id: 7, label: 'Codigo postal', minWidth: 100 },\r\n\t{ id: 8, label: 'Colonia', minWidth: 100 },\r\n\t{ id: 9, label: 'Municipio', minWidth: 50, align: 'right' },\r\n\t{ id: 10, label: 'Localidad', minWidth: 50, align: 'right' },\r\n\t{ id: 11, label: 'Estado', minWidth: 50, align: 'right' },\r\n\t{ id: 12, label: 'Pais', minWidth: 50, align: 'right' },\r\n\t{ id: 13, label: 'Editar', minWidth: 50, align: 'right' },\r\n\t{ id: 14, label: 'Eliminar', minWidth: 50, align: 'right' }\r\n];\r\n\r\nexport default function ListaAlmacen() {\r\n\r\n    const classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\tconst { update } = useContext(CrearAlmacenContext);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t/* Queries */\r\n\tconst { loading, data, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ update, refetch ]\r\n\t);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n\tconst { obtenerAlmacenes } = data;\r\n\r\n    // const classes = useStyles();\r\n\r\n    return (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer component={Paper}>\r\n\t\t\t\t<Table className={classes.table} aria-label=\"simple table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{obtenerAlmacenes\r\n\t\t\t\t\t\t\t?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t?.map((row, index) => {\r\n\t\t\t\t\t\t\t\treturn <RowsRender key={index} datos={row} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={obtenerAlmacenes.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n    )\r\n}\r\n\r\nconst RowsRender = ({ datos }) => {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\r\n\treturn (\r\n\t\t<TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.nombre_almacen}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{!datos.id_usuario_encargado ? \"Sin encargado\" : datos.id_usuario_encargado.nombre}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.id_sucursal.nombre_sucursal}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.calle ? datos.direccion.calle : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_ext ? datos.direccion.no_ext : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.no_int ? datos.direccion.no_int : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.codigo_postal ? datos.direccion.codigo_postal : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.colonia ? datos.direccion.colonia : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.municipio ? datos.direccion.municipio : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.localidad ? datos.direccion.localidad : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.estado ? datos.direccion.estado : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Typography>{datos.direccion.pais ? datos.direccion.pais : \"\"}</Typography>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t{sesion.accesos.almacenes.almacen.editar === false ? (null):(\r\n\t\t\t\t\t<ContainerRegistroAlmacen accion=\"actualizar\" datos={datos} />\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t{sesion.accesos.almacenes.almacen.eliminar === false ? (null):(\r\n\t\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t{/* <TableCell width={50}>\r\n\t\t\t\t<ModalDetalles openDetalles={openDetalles} handleDetalles={handleDetalles} datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<CrearCliente tipo=\"CLIENTE\" accion=\"actualizar\" datos={datos} />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={50}>\r\n\t\t\t\t<IconButton color=\"secondary\">\r\n\t\t\t\t\t<Delete />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell> */}\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { forwardRef } from 'react';\r\nimport { AppBar, Toolbar, Typography, Slide, Button, Box, Dialog } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { FcPlus } from 'react-icons/fc';\r\nimport ContainerRegistroAlmacen from './ContainerRegistroAlmacen';\r\nimport ListaAlmacen from './ListaAlmacen';\r\nimport { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroAlmacen() {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<AlmacenProvider>\r\n\t\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<FcPlus className={classes.icon} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\t\t\tAgregar almacen\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t\t<Box m={3} display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t{sesion.accesos.almacenes.almacen.agregar === false ? (null):(\r\n\t\t\t\t\t\t\t\t<ContainerRegistroAlmacen accion=\"registrar\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mx={4}>\r\n\t\t\t\t\t\t<ListaAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</AlmacenProvider>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/almacen.31993015.svg\";","import React, { createContext, useState, useEffect, } from 'react';\r\n\r\nexport const TraspasosAlmacenContext = createContext();\r\n\r\nexport const TraspasosProvider = ({ children }) => {\r\n\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ productos, setProductos ] = useState([]);\r\n    const [ productosTo, setProductosTo ] = useState([]);\r\n     const [ productosEmpTo, setProductosEmpTo ] = useState([]);\r\n    const [ productosTras, setProductosTras ] = useState([]);\r\n    const [ dataExcel, setDataExcel ] = useState([]);\r\n\r\n\treturn (\r\n\t\t<TraspasosAlmacenContext.Provider value={\r\n            { \r\n                \r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                productos,\r\n                setProductos,\r\n                productosTras,\r\n                setProductosTras,\r\n                productosTo,\r\n                setProductosTo,\r\n                productosEmpTo, \r\n                setProductosEmpTo,\r\n                dataExcel,\r\n                setDataExcel\r\n                \r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</TraspasosAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit\r\n} from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    \r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  productoData,\r\n  datos,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  setNew_medidas\r\n}) {\r\n \r\n  const classes = useStyles();\r\n  //const { presentaciones, setPresentaciones } = useContext([]);\r\n //let mostrar_presentaciones = [];\r\n\r\n \r\n   let mostrar_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell padding=\"checkbox\">Precio</TableCell>\r\n                {/* <TableCell padding=\"checkbox\">Descuento</TableCell> */}\r\n                {/* {!onlyPrice ? (\r\n                  <Fragment>\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null} */}\r\n                <Fragment>\r\n                  <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                </Fragment>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datos.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    productoData={productoData}\r\n                    producto={producto}\r\n                    index={index}\r\n                    datos={datos}\r\n                    setNew_medidas={setNew_medidas} \r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  productoData,\r\n  producto,\r\n  index,\r\n  datos,\r\n  setNew_medidas,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  /* const { presentaciones, setPresentaciones, preciosP } = useContext(\r\n    RegProductoContext\r\n  ); */\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...datos].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  ); \r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  //const copy_element_presentacion = {  };\r\n  //const copy_element_presentacion_descuento = { ...copy_presentaciones[index].descuento };\r\n  const copy_element_presentacion_descuento = { };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.medida.cantidad) {\r\n      copy_element_presentacion.medida.cantidad = 0;\r\n    }\r\n    if (!copy_producto.nuevaCantidad) {\r\n      copy_element_presentacion.nuevaCantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = copy_producto.precio;\r\n      //copy_element_presentacion.medida.precio = 0;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones); \r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.cantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(setNew_medidas); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.cantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"nuevaCantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.nuevaCantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = copy_producto.medida.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.nuevaCantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      \r\n        if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n    \r\n    let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = productoData.precios;\r\n    \r\n      let suma_impuestos = parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) + parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n      let iva_precio = parseFloat((precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)).toFixed(2));\r\n      let ieps_precio = parseFloat((precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)).toFixed(2));\r\n      let PUCSI = productoData.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n      \r\n\r\n      let {descuento_activo, descuento} = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          (precio_con_descuento).toFixed(2)\r\n        );\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      }\r\n  \r\n      copy_element_presentacion.medida.precio_unidad.precio_venta = precio_venta;\r\n      copy_element_presentacion.medida.precio_unidad.precio_neto = precio_neto;\r\n      copy_element_presentacion.medida.precio_unidad.utilidad = utilidad;\r\n      copy_element_presentacion.medida.precio_unidad.iva_precio = iva_precio;\r\n      copy_element_presentacion.medida.precio_unidad.ieps_precio = ieps_precio;\r\n       \r\n    } \r\n  \r\n      else if (name === \"descuento\") {\r\n      /* if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      } */\r\n       copy_element_presentacion.medida.descuento = value;\r\n         \r\n    }\r\n    else {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones); \r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.codigo_barras = value;\r\n    }\r\n     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n   \r\n    setNew_medidas(copy_presentaciones); \r\n    //console.log(copy_presentaciones)\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.medida.codigo_barras = codigo_barras;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n /*  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.medida.descuento_activo = value;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); \r\n  }; */\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.medida.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.medida.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              datos.medidas_registradas && !copy_producto.medida.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {!datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.medida.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.medida._id ? (\r\n          <Chip label={copy_producto.medida.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.medida.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.medida.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n     \r\n\r\n         <Fragment>\r\n            <TableCell width={110}>\r\n              <Input\r\n                inputRef={textfield}\r\n                inputMode=\"numeric\"\r\n                type=\"number\"\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.precio}\r\n               \r\n                name=\"precio\"\r\n              />\r\n              \r\n            </TableCell>\r\n           {/*  <TableCell>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.descuento}\r\n                type=\"tel\"\r\n                name=\"descuento\"\r\n              />\r\n            </TableCell> */}\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.nuevaCantidad}\r\n                type=\"tel\"\r\n                name=\"nuevaCantidad\"\r\n              />\r\n            </TableCell>\r\n          </Fragment>\r\n     \r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Typography,\r\n  Tooltip,\r\n  Slide\r\n} from \"@material-ui/core\";\r\n\r\n\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentacionesNotOrigen from \"./TablePresentacionesNotOrigen\";\r\n\r\n\r\nimport CrearColorProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n    \r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\n\r\nexport default function ColoresTallas({\r\n  producto,\r\n  new_medidas,\r\n  setNew_medidas,\r\n  obtenerConsultasProducto,\r\n  refetch\r\n}) {\r\n\r\n    const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n    const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n    /* const medidas =\r\n    producto.datos_generales.tipo_producto === \"ROPA\" ? [...obtenerConsultasProducto.tallas] : [...obtenerConsultasProducto.calzados]; */ \r\n    const [onUpdate, setOnUpdate] = useState([]);\r\n //console.log(data.obtenerConsultasProducto)\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    \r\n    let copy_presentaciones =  [...new_medidas ];\r\n  \r\n    \r\n \r\n//const copy_presentaciones = [];\r\n    /* Queries */\r\n \r\n    copy_presentaciones.forEach((element) => {\r\n   //console.log('obtenerColoresSeleccinados', element)\r\n      if (element.medida.color._id) colors.push(element.medida.color);\r\n      if (element.medida.medida._id) medidas.push(element.medida.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n    //console.log('colores_existentes', colores_existentes, 'medidas_existentes', medidas_existentes)\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n   \r\n    \r\n  }, [new_medidas,setColoresSeleccionados, setMedidasSeleccionadas]);\r\n\r\n \r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n     <div>\r\n       <Box alignContent='center' m={5} >\r\n        <Grid container spacing={4}>\r\n         {/*  {!datos.medidas_registradas ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\">\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    \r\n                    {presentaciones.length > 0  ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n            \r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>\r\n                  {producto.datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              { (producto.datos_generales.tipo_producto === \"ROPA\") ? \r\n                  (obtenerConsultasProducto.tallas  !== undefined) ? \r\n                    <Grid container >\r\n                        {obtenerConsultasProducto.tallas.map((talla, index) => (\r\n                        <RenderTallas\r\n                     \r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                  :\r\n                  <div/>\r\n                :\r\n                   (obtenerConsultasProducto.calzados  !== undefined) ? \r\n                      <Grid container >\r\n                        {obtenerConsultasProducto.calzados.map((talla, index) => (\r\n                        <RenderTallas\r\n                            producto={producto}\r\n                            key={index}\r\n                            talla={talla}\r\n                            coloresSeleccionados={coloresSeleccionados}\r\n                            medidasSeleccionadas={medidasSeleccionadas}\r\n                            setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                            datos={new_medidas}\r\n                            setNew_medidas={setNew_medidas}\r\n                        />\r\n                        ))}\r\n                    </Grid>\r\n                    :\r\n                    <div/>\r\n              }\r\n              \r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n            {\r\n            (obtenerConsultasProducto.colores !== undefined) ? \r\n              <Grid container>\r\n                {obtenerConsultasProducto.colores.map((color, index) => (\r\n                  <Colores\r\n                    producto={producto}\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    datos={new_medidas}\r\n                    setNew_medidas={setNew_medidas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            :\r\n            <div/>\r\n            }  \r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} />\r\n        <TablaPresentacionesNotOrigen\r\n          productoData = {producto}\r\n          datos={new_medidas}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n          setNew_medidas={setNew_medidas}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  producto,\r\n  talla,\r\n  coloresSeleccionados,\r\n  setMedidasSeleccionadas,\r\n  medidasSeleccionadas,\r\n  setNew_medidas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n /*  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext); */\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n   useEffect(() => {\r\n    if (datos) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [datos, seleccionarMedidas]); \r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n    //console.log('handleAddTallas', datos)\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n      /*     presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    //const array_medidad_finales = [];\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        presentacion_temp.push({\r\n          medida :{\r\n           \r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            //precios: producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n             precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: iva_precio,\r\n              ieps_precio: ieps_precio,\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            }\r\n          },\r\n         \r\n          nuevaCantidad: 0\r\n          \r\n        });\r\n        \r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n              medida :{\r\n              \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false\r\n              },\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n    \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n             medida :{\r\n              \r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: medidas_seleccionadas_temp[k],\r\n              color: array_medidad_finales[i].medida.color,\r\n              //precios:producto.precios,\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n               precio_unidad: array_medidad_finales[i].medida.precio_unidad\r\n            },\r\n           \r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            //console.log('YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL' , array_medidad_finales, producto_medida, producto_color)\r\n            presentacion_temp.push({\r\n              \r\n              medida :{\r\n                \r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                 //precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: iva_precio,\r\n                  ieps_precio: ieps_precio,\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false\r\n                },\r\n              },\r\n              nuevaCantidad: 0,\r\n              \r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n              \r\n              medida :{\r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: objeto_presentaciones_final.medida.color,\r\n                //precios:producto.precios,\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n                precio_unidad: objeto_presentaciones_final.precio_unidad\r\n              },\r\n              \r\n              nuevaCantidad: objeto_presentaciones_final.nuevaCantidad, \r\n\r\n          \r\n          });\r\n        }\r\n      }\r\n    }\r\n     \r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  producto,\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n  setNew_medidas\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n \r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n \r\n  useEffect(() => {\r\n    if (producto) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [producto, seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n         /*  new_medidas.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n         let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n        presentacion_temp.push({\r\n          medida :{\r\n             \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              }\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          ).toFixed(2)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          (\r\n            producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          ).toFixed(2)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n             medida :{\r\n            \r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: iva_precio,\r\n                ieps_precio: ieps_precio,\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              }\r\n            },\r\n            \r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            medida :{\r\n            \r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial: array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: array_medidad_finales[i].medida.medida,\r\n              color: coloresSeleccionados[k],\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              \r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n           \r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n           \r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n            ).toFixed(2)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            (\r\n              producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n            ).toFixed(2)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n               medida :{\r\n               \r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                // precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                //nuevo: true\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: iva_precio,\r\n                  ieps_precio: ieps_precio,\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                }\r\n              },\r\n              \r\n              nuevaCantidad: 0,\r\n              \r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida :{\r\n                \r\n                existencia: objeto_presentaciones_final.medida.existencia,\r\n                codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n                nombre_comercial: objeto_presentaciones_final.medida.nombre_comercial,\r\n                medida: objeto_presentaciones_final.medida.medida,\r\n                color: { nombre: \"\", hex: \"\" },\r\n                // precios:producto.precios,\r\n                precio: objeto_presentaciones_final.medida.precio,\r\n                cantidad: objeto_presentaciones_final.medida.cantidad,\r\n                //nuevo: true\r\n                precio_unidad: objeto_presentaciones_final.medida.precio_unidad\r\n              },\r\n              \r\n              nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item >\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected, color)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useContext,  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {  Chip,  Tooltip, Zoom , TextField} from '@material-ui/core';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\n/* const compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n}; */\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignSelf:'center',\r\n\t\twidth:'90%',\r\n\t\tpaddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n\t\t\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\t\r\n\t\tminWidth: '100%',\r\n\t\tmaxWidth: '100%',\r\n\t\t\r\n\t},\r\n\t\r\n\ttableRow: {\r\n    \r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n    cell:{\r\n       align:'center'     \r\n    },\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\n\r\n/* function stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nexport default function TablaPresentaciones({ producto, setOnUpdate, onUpdate, new_medidas, setNew_medidas }) {\r\n  const classes = useStyles();\r\n \r\n \r\n\r\n/*  \r\nconst handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n}; */\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:400}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                                <TableCell >Cantidad a traspasar</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tidProducto={producto._id}\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tmedida={item}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t\tnew_medidas={new_medidas}\r\n\t\t\t\t\t\t\t\t\t\tsetNew_medidas={setNew_medidas}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst RenderPresentacionesRows = ({ medida, index, setOnUpdate, onUpdate,new_medidas, setNew_medidas, idProducto}) => {\r\n\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst [ cantidad, setCantidad ] = useState(0);\r\n\tconst [ cantidadAnt, setCantidadAnt ] = useState(0);\r\n\tconst copy_medida = { ...medida };\r\n\tconst {productosTras} = useContext(TraspasosAlmacenContext);\r\n\t//const [productInTras, setProductInTras] =  useState(null);\r\n\t//let productInTras = null;\r\n\t//let productInTras = productosTras.find(element => element.product_selecteded._id === idProducto);\r\n\t//const productosTrasContext = productosTras;\r\n \r\n\tuseEffect(() => {\r\n\t\tproductosTras.forEach(producto => {\r\n\t\t\t//console.log(\"SELECTMEDIDAS\",producto)\r\n\r\n\t\tif(producto.product_selected._id === idProducto){\r\n\t\t\tlet new_medidasCopia = [];\r\n\t\t\tlet element = null;\r\n\t\t\r\n\t\t\tfor (const med in producto.new_medidas) {\r\n\t\t\t\tif (Object.hasOwnProperty.call(producto.new_medidas, med)) {\r\n\t\t\t\t\telement = producto.new_medidas[med];\r\n\t\t\t\t\tnew_medidasCopia.push(element)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(medida._id === element.medida._id){\r\n\t\t\t\t\t\tsetCantidad( element.nuevaCantidad);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetNew_medidas(producto.new_medidas);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\treturn () => {\r\n\t\t\t<div/>\r\n\t\t}\r\n\t}, [productosTras])\r\n\t\r\n\r\n\r\n\t\r\n\r\n\t/* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\t\r\n\tconst obtenerDatos = (value) => {\r\n\t\tlet cant = (cantidadAnt > 0) ? parseInt(value - cantidadAnt)   : value;\r\n\t\t//console.log(\"CANT\",cantidad)\r\n\r\n\t\tif(cant <= medida.cantidad){\r\n\t\t\tsetCantidad(value);\r\n\t\t\r\n\t\t\tsetNew_medidas({...new_medidas, [index] : {medida:medida, nuevaCantidad: parseInt(cant)}})\r\n\t\t}\r\n\t\t/* \r\n\t\tconst unidades = {cantidad:} \r\n\t\tcopy_producto.push() */\r\n\t\t//Tengo que obtener los datos que se van a enviar se debe agregar un elemento al array \r\n\t\t\r\n\t\t//setPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<TableRow  selected={!disabledInput} className={classes.tableRow} >\r\n\t\t\t<TableCell >\r\n\t\t\t\t{copy_medida.medida._id ? <Chip label={copy_medida.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell  style={{width:'20%'}}>\r\n\t\t\t\t{copy_medida.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_medida.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_medida.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t\r\n\t\t\r\n\t\t\t<TableCell className={classes.cell}  style={{width:'25%'}}>\r\n\t\t\t\t{medida.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t \r\n\t\t\t<TableCell  style={{width:'25%'}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tInputProps={{ inputProps: { min: 0 } }}\r\n\t\t\t\t\tinputMode=\"numeric\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tvalue={cantidad}\r\n\t\t\t\t\tonChange={(value) => obtenerDatos(value.target.value)}\r\n\t\t\t\t\tname=\"nuevaCantidad\"\r\n\t\t\t\t/>\r\n            </TableCell>    \r\n\t\t</TableRow>\r\n\t);\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Grid,Box, TextField } from '@material-ui/core';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TableSortLabel} from '@material-ui/core';\r\nimport {Toolbar, Typography, Paper, IconButton, Tooltip, Dialog, Checkbox ,Slide, Button, DialogTitle, DialogActions} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport TallasColoresTraspasos from './TallasColoresTraspasos';\r\nimport TableSelectMedidas from './TableSelectMedidas';\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_CONSULTAS } from \"../../gql/Catalogos/productos\";\r\n\r\n// function createData(name, cantidad, precio) {\r\n//   return { name, cantidad, precio };\r\n// }\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\n/* function getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nconst headCells = (add) => {\r\n\r\nlet hC = (add) ? \r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n\r\n  ]\r\n  :\r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n    { id: 'solo', numeric: true, disablePadding: false, label: ' ' },\r\n  ]\r\n\r\n  return hC;\r\n}\r\n;\r\nconst getUnidadMax  = (cantidad_existente_maxima,unidadMaxima) => {\r\n  //console.log('getCantidad',cantidad_nueva, cantidad_medida, accion)\r\n  const UNIDAD_MAXIMA = {\r\n    'Caja' :  'Cantidad existente en cajas: ' + cantidad_existente_maxima,\r\n    'Costal' : 'Cantidad existente en costales: ' + cantidad_existente_maxima,\r\n  }  \r\n  return UNIDAD_MAXIMA[unidadMaxima];\r\n}\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { classes,  order, orderBy, onRequestSort } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n  const headCellsNames =  headCells(props.add);\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n     \r\n        {headCellsNames.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align='left'\r\n            // padding={headCell.disablePadding ? 'none' : 'normal'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // product_selected: PropTypes.object.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n    maxWidth:650\r\n  },\r\n  input:{\r\n    width:180\r\n  }\r\n  ,\r\n  inputCantidad:{\r\n    width:120,\r\n    height:10\r\n  },\r\n  inputCantidadTable:{\r\n    width:'20%',\r\n    height:10\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          \r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    fontSize:16,\r\n    flex: '1',\r\n     display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n}));\r\n\r\nconst DialogTallas = (props) => {\r\n\r\n  const [new_medidas, setNew_medidas] = useState([]);\r\n  const {setProductosTras, productosTras} = useContext(TraspasosAlmacenContext);\r\n  \r\n\r\n  \r\n  const setProd = () =>{\r\n    let newMedidasCopy = new_medidas;\r\n    let cantidad_total = 0;\r\n    \r\n    \r\n\r\n     try {\r\n     \r\n       let prodSelect = null;\r\n    prodSelect = (props.almacenOrigen !== null) ? {\r\n      _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      medidas_producto: props.product_selected.medidas_producto,\r\n      inventario_general: props.product_selected.inventario_general,\r\n      unidades_de_venta: props.product_selected.unidades_de_venta,\r\n      precios: props.product_selected.precios,\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario\r\n    }\r\n    :\r\n\r\n    {\r\n       _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      precios: props.product_selected.precios,\r\n       medidas_producto: [],\r\n      inventario_general: [{unidad_maxima:''}],\r\n      unidades_de_venta: [],\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario \r\n    }; \r\n    let existe = false;\r\n    let copyProductosTras = productosTras;\r\n    let medidasTo =[];\r\n    //Count all new_medidas from array\r\n\r\n    for (let newMed in newMedidasCopy){ \r\n        cantidad_total +=  newMedidasCopy[newMed].nuevaCantidad;\r\n        //cantidad_total += newMedidasCopy[newMed];\r\n      medidasTo.push(newMedidasCopy[newMed])\r\n    } \r\n\r\n    if(cantidad_total > 0){\r\n    \r\n      if(copyProductosTras.length){//Check have data context\r\n        copyProductosTras.forEach(element => {\r\n          if(element.product_selected._id === props.product_selected._id){\r\n            existe = true;\r\n            ///VA A SUMAR EN LAS MEDIDAS LAS CANTIDADES\r\n            element.new_medidas = medidasTo;\r\n            element.cantidad_total = cantidad_total;\r\n            return;\r\n          }\r\n        });\r\n    \r\n        if(!existe){\r\n          //console.log(\"NO está este producto\", element.product_selected._id , props.product_selected._id );\r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      \r\n        } \r\n      }else{ \r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      }\r\n         \r\n      setProductosTras([...copyProductosTras])  \r\n      setNew_medidas([]);\r\n      close();\r\n    }  \r\n     } catch (error) {\r\n       //console.log('MANDH',error)\r\n     }\r\n    \r\n  }\r\n\r\n  const close= () => {\r\n    try {\r\n      props.setOpenTallas();\r\n      props.setproduct_selected(undefined)\r\n    } catch (error) {\r\n      //console.log(error)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    let new_medidasCopia = [];\r\n\r\n    productosTras.forEach(prod => {\r\n\t\t\r\n\t\tif(prod.product_selected._id ===  props.product_selected._id){\r\n\t\t\tlet element = null;\r\n        for (const med in prod.new_medidas) {\r\n          if (Object.hasOwnProperty.call(prod.new_medidas, med)) {\r\n            element = prod.new_medidas[med];\r\n            new_medidasCopia.push(element)\r\n          }\r\n        }\r\n      }\r\n    })  \r\n    setNew_medidas(new_medidasCopia);\r\n  }, [productosTras, props.product_selected._id])\r\n     \r\n\r\n  return(\r\n    <Dialog open={props.openTallas} TransitionComponent={Transition} fullWidth maxWidth={\"md\"} >\r\n        <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => close()} size=\"large\">\r\n                  <CloseIcon />\r\n                </Button>\r\n          </Box>\r\n      {\r\n        (props.almacenOrigen === null) ? \r\n          <div>\r\n            <TallasColoresTraspasos \r\n              obtenerConsultasProducto={props.obtenerConsultasProducto}\r\n              refetch={props.obtenerConsultasProducto.refetch}\r\n              producto={props.product_selected}\r\n              new_medidas={new_medidas} \r\n              setNew_medidas={setNew_medidas}\r\n            />\r\n          </div>\r\n        :\r\n        <div>\r\n          <TableSelectMedidas producto = {props.product_selected} new_medidas={new_medidas} setNew_medidas={setNew_medidas} add={props.add} />\r\n        </div> \r\n      }    \r\n      <Box display=\"flex\" justifyContent=\"flex-end\" m={1} mr={5}>\r\n        <Button  variant=\"contained\" color=\"primary\"style={{width:\"20%\"}} onClick={setProd} >\r\n          AGREGAR \r\n        </Button>\r\n      </Box>   \r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const [cantidadTo, setCantidadTo] = useState('');\r\n  const [openEnd, setOpenEnd] = useState(false);\r\n \r\n  \r\n  const { product_selected, setproduct_selected, tipoPieza, update } = props;\r\n   const {\r\n        setProductosTras,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n\r\n\r\nconst setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    props.setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === product_selected._id);\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n    if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(product_selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }else{\r\n      //Cuando sea el caso que no hay almacen de origen cambiar los datos que van a ir vacíos\r\n      //\r\n     \r\n      //console.log(props.product_selected.precios)\r\n      let prodSelect = {\r\n        _id: props.product_selected._id,\r\n        datos_generales:  props.product_selected.datos_generales,\r\n        inventario_general: props.product_selected.inventario_general,\r\n        unidades_de_venta: props.product_selected.unidades_de_venta,\r\n        medidas_producto: props.product_selected.medidas_producto,\r\n      \r\n        precios: props.product_selected.precios,\r\n        empresa:props.product_selected.empresa,\r\n        sucursal:props.product_selected.sucursal,\r\n        usuario: props.product_selected.usuario\r\n      } \r\n    //VERIFICA CANTIDAD MAXIMA\r\n    if(product_selected.inventario_general !== undefined){\r\n      if(cantidad_total <=  product_selected.inventario_general[0].cantidad_existente){\r\n      \r\n        let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n      }\r\n      else{\r\n        props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n      }\r\n    }else{\r\n       let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n    }\r\n    }\r\n    setproduct_selected(undefined);\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\nconst deletesItems =() =>{\r\n  try {\r\n  \r\n    setproduct_selected(undefined)\r\n    //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n    setProductosTras([]);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\n\r\nuseEffect(() => {\r\n  try {\r\n    if(props.add){\r\n      props.setOpenTallas(true)\r\n    }\r\n    setCantidadTo(props.cant)\r\n    \r\n  } catch (error) {\r\n    \r\n  }\r\n  \r\n}, [product_selected])   \r\n  \r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        setValueToTrans(parseFloat(e.target.value))\r\n      }\r\n    } catch (error) {\r\n      \r\n    }\r\n    \r\n  };        \r\n  function onlyNumbers(value){\r\n    props.setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = (value !== '') ? parseFloat(value) : 0;\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          \r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              setCantidadTo((intValue !== 0) ? intValue : '');\r\n              //console.log(intValue)\r\n              return;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= product_selected.inventario_general[0].cantidad_existente){\r\n                 setCantidadTo((intValue !== 0) ? intValue : '');\r\n                return;\r\n              }\r\n              else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n            }\r\n          }else{\r\n          \r\n            setCantidadTo(intValue);\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n\r\n\r\n\r\n  const TipoPiezaComponent = () => {\r\n     try {\r\n     \r\n      const TIPO_PIEZA = {\r\n        'Pz' :  {unidad_maxima: null, unidad_minima: 'Pz' },\r\n        'Caja' : {unidad_maxima: 'Caja', unidad_minima: 'Pz' },\r\n        'Kg' : {unidad_maxima: null, unidad_minima: 'Kg' },\r\n        'Costal' : {unidad_maxima: 'Costal', unidad_minima: 'Kg' },\r\n        'Lt' : {unidad_maxima: null, unidad_minima: 'Lt' }\r\n      }\r\n      \r\n\r\n    \r\n      return (\r\n        <Box flexDirection={'row'} display=\"flex\">\r\n          <Box flexDirection={'row'}  >\r\n          <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima === null} />\r\n            <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_minima}</Typography> \r\n          </Box>\r\n    \r\n          \r\n        { \r\n          (TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima !== null) ? \r\n            <Box flexDirection={'row'} >\r\n              <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n              <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima} </Typography> \r\n            </Box>\r\n          :\r\n            <div/>\r\n          \r\n          }\r\n      \r\n        </Box>\r\n      );\r\n     } catch (error) {\r\n       \r\n     }\r\n    \r\n    \r\n  }\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: product_selected !== undefined && props.add,\r\n      })}\r\n    \r\n    >\r\n    <Grid container>\r\n      {product_selected !== undefined  && props.add ? (\r\n        <Box style={{width:'100%'}}>\r\n         \r\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle2\"  >\r\n            {product_selected.datos_generales.nombre_comercial} \r\n          </Typography>\r\n        </Box>\r\n      ) : (\r\n        <Box style={{width:'100%'}} flexDirection={'row'} display=\"flex\">\r\n          <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n            {props.title}\r\n          </Typography>\r\n          {\r\n            (productosTras.length > 0 && !props.add) ? \r\n            <Tooltip title=\"Eliminar todos\">\r\n              <IconButton aria-label=\"delete\" onClick={() => setOpenEnd(true)} >\r\n                  <DeleteIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            :\r\n            <div/>\r\n          }\r\n          \r\n         </Box>  \r\n      )}\r\n\r\n      {(product_selected !== undefined )? (\r\n      <Box > \r\n        {\r\n          (props.error.error) ?\r\n          <Typography color=\"inherit\">{props.error.mensaje}</Typography>\r\n          :\r\n          <div/>\r\n        } \r\n            {\r\n            (props.add ) ?\r\n                (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                  <Grid container  justifyContent=\"space-evenly\" ml={1}>\r\n                \r\n                      {\r\n                        (props.almacenOrigen === null)?\r\n                        \r\n                        <TipoPiezaComponent />\r\n                        :\r\n                        <Box flexDirection={'row'} display=\"flex\">\r\n                          <Box flexDirection={'row'}  >\r\n                            <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={props.product_selected.inventario_general[0].cantidad_existente_maxima === null} />\r\n                            <Typography color=\"primary\" style={{marginLeft:10}}>{props.product_selected.inventario_general[0].unidad_inventario}</Typography> \r\n                          </Box>\r\n                          {\r\n                            (props.product_selected.inventario_general[0].unidad_maxima !== null ) ?\r\n                              <Box flexDirection={'row'} >\r\n                                <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n                                <Typography color=\"primary\" style={{marginLeft:10}}>{\"\" + props.product_selected.inventario_general[0].unidad_maxima} </Typography> \r\n                              </Box>\r\n                            :\r\n                              <div/>\r\n                          }\r\n                        </Box>\r\n                      }\r\n                        \r\n                      <Box width=\"180px\" ml={2}>\r\n                    \r\n                        <Typography color=\"primary\">Cantidad</Typography>\r\n                        <TextField\r\n                            className={classes.inputCantidad}\r\n                            \r\n                            size=\"small\"\r\n                            name=\"cantidad\"\r\n                            variant=\"outlined\"\r\n                            type=\"number\"\r\n                            InputProps={{ inputProps: { min: 0 } }}\r\n                            value={cantidadTo}\r\n    \r\n                            onKeyPress={pressEnter}\r\n                            onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                        />\r\n                      \r\n                        <Tooltip title=\"Agregar\">\r\n                            <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                      {\r\n                        (props.almacenOrigen) ? \r\n                          <Box  width=\"150px\" >\r\n                            {\r\n                              (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ? \r\n                                <Typography color=\"primary\" style={{flexWrap: \"wrap\"}}>\r\n                                  {getUnidadMax(props.product_selected.inventario_general[0].cantidad_existente_maxima,props.product_selected.inventario_general[0].unidad_maxima)}\r\n                                  </Typography>\r\n                              :\r\n                              <div/>\r\n                            }\r\n                          </Box>\r\n                        :\r\n                        <div/>\r\n                      }\r\n                    </Grid>\r\n                   \r\n                  :    \r\n                  <div>\r\n                    <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                  </div> \r\n                :\r\n                <div>\r\n                   <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                </div>\r\n                /* <Grid width={'100%'} container>\r\n                  { (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                    <div>\r\n                     \r\n                      <Typography color=\"primary\">Cantidad</Typography>\r\n                      <TextField\r\n                          className={classes.inputCantidad}\r\n                          size=\"small\"\r\n                          name=\"cantidad\"\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          InputProps={{ inputProps: { min: 0 } }}\r\n                          value={cantidadTo}\r\n                          onChange={(value) => onlyNumbers(value.target.value)}\r\n                          \r\n                      />\r\n                    \r\n                      <Tooltip title=\"Agregar\">\r\n                          <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                              <AddIcon />\r\n                          </IconButton>\r\n                      </Tooltip>\r\n                    </div>\r\n                    :\r\n                    \r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                     \r\n                     \r\n                  }\r\n                  <Box mt={3} >\r\n                  { (product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                     <Tooltip title=\"Editar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => editItem()} >\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Tooltip> \r\n                    :\r\n                    <div/>\r\n                    }\r\n                    <Tooltip title=\"Eliminar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => deleteItem()} >\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                  </Box> \r\n                </Grid> */\r\n            }\r\n                \r\n         \r\n        </Box>\r\n      ) : (\r\n        <div/>\r\n      )}\r\n      </Grid>\r\n      <Dialog open={openEnd} onClose={() => setOpenEnd(false)}>\r\n            <DialogTitle>{'¿Está seguro de realizar esta acción?'}</DialogTitle>\r\n            <DialogActions>\r\n                <Button onClick={() => setOpenEnd(false)} color=\"primary\">\r\n                    Cancelar\r\n                </Button>\r\n                <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => deletesItems()}>\r\n                    Eliminar\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//   numSelected: PropTypes.number.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n   \r\n    marginLeft:theme.spacing(1),\r\n    marginRight:theme.spacing(1),\r\n\r\n\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 600,\r\n    maxWidth:600\r\n   \r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [ openTallas, setOpenTallas] = useState(false);\r\n  const [cant, setCant] = useState(0);\r\n   const [error, setError] = useState({error:false, mensaje:''});\r\n  //const [data, setData] = useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n  const [tipoPieza, setTipoPieza] = useState({piezas: true, cajas: false});\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\r\n\r\n  const update = () => {\r\n   setTipoPieza({...tipoPieza, piezas: !tipoPieza.piezas, cajas: !tipoPieza.cajas})\r\n }\r\n \r\n  const {\r\n        productosTras, productosTo,   productosEmpTo, setProductosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n  const obtenerConsultasProducto = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  \r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      //const newSelecteds = data.map((n) => n.name);\r\n      setSelected(event.target.checked);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n  const data = (!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo  ; \r\n\r\n  const handleClick = (event, elemento, cant) => {\r\n  setError({error:false, mensaje:''})\r\n    if(elemento.datos_generales.tipo_producto === 'OTROS'){\r\n      let haveCant= 0;\r\n      productosTras.forEach(producto => {\r\n        if(producto.product_selected._id === elemento._id){\r\n      \t  \r\n          haveCant = producto.cantidad_total;\t\t\r\n        }\r\n      });\r\n      \r\n        setCant(props.add ? haveCant : cant)\r\n    }\r\n\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === elemento._id;\r\n     \r\n      // let newSelected = [];\r\n      if(selectedIndex){\r\n          setSelected(undefined);\r\n      }else{\r\n          setSelected(elemento);\r\n      } \r\n    }else{\r\n      //console.log(elemento)\r\n      setSelected(elemento);\r\n    }\r\n   \r\n    \r\n  };\r\n    \r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  const deleteItem =(row) =>{\r\n    try {\r\n      \r\n      let prodSet =  [] ;\r\n      \r\n    \r\n      if(productosTras.length){\r\n        prodSet = productosTras;\r\n      }\r\n      \r\n    \r\n      //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n      setProductosTras(prodSet.filter(item => item.product_selected._id !== row._id));\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n  const setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    //setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === selected._id);\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n  if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total + element.cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\n  \r\n  function onlyNumbers(value){\r\n   setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = parseFloat(value);\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= selected.inventario_general[0].cantidad_existente_maxima){\r\n               setValueToTrans(intValue)\r\n              //console.log(intValue)\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= selected.inventario_general[0].cantidad_existente){\r\n                setValueToTrans(intValue)\r\n                return;\r\n              }\r\n            }\r\n          }else{\r\n           \r\n          \r\n            \r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n  const isSelected = (id) => {\r\n    //return selected.indexOf(name) !== -1;\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === id;\r\n   \r\n      // let newSelected = [];\r\n      if(!selectedIndex){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      } \r\n    }else{\r\n      return false;\r\n    }\r\n    \r\n  } \r\n\r\n  const editItem =(prod_sel) =>{\r\n  try {\r\n  \r\n  \r\n    if(prod_sel.datos_generales.tipo_producto !== 'OTROS') {\r\n      setOpenTallas(true);\r\n      //console.log(props)\r\n    }\r\n   \r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n       \r\n        <EnhancedTableToolbar \r\n          product_selected={selected} \r\n          setproduct_selected={setSelected} \r\n          openTallas={openTallas}\r\n          setOpenTallas={setOpenTallas}\r\n          error={error}\r\n          setError={setError}\r\n          title={props.title} add={props.add} almacenOrigen={props.almacenOrigen} productosTras ={productosTras} tipoPieza={tipoPieza} update={update} cant={cant} obtenerConsultasProducto={(obtenerConsultasProducto.data) ? obtenerConsultasProducto.data.obtenerConsultasProducto :[]}refetch={( obtenerConsultasProducto.refetch ) ? obtenerConsultasProducto.refetch : null}  />\r\n        <TableContainer style={{height:'50vh'}}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={'small'}\r\n           \r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              product_selected={selected}\r\n              add = {props.add}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              handleSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {data\r\n                .map((row, index) => {\r\n                \r\n                  const isItemSelected = isSelected((props.add === true) ? row._id: row.product_selected._id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                \r\n                  if(props.add){\r\n                    \r\n                    if(props.almacenOrigen) {\r\n                 \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={(props.add === true) ? row._id : row.product_selected._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        \r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> {row.inventario_general[0].cantidad_existente }  {row.inventario_general[0].unidad_inventario} </TableCell>\r\n                        \r\n                        \r\n                      \r\n                      </TableRow>\r\n                    );\r\n                    }else{\r\n                      return(\r\n                        <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> N/A</TableCell>\r\n                      </TableRow>\r\n                      );\r\n                    }\r\n                  }else{\r\n                    \r\n                    return(\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, row.product_selected, row.cantidad_total)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                       key={(props.add === true) ? row._id : row.product_selected._id}\r\n                      selected={isItemSelected}\r\n                      \r\n                    >\r\n                      <TableCell  id={labelId} component=\"th\" width={100}>\r\n                        {(row.product_selected.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.product_selected.datos_generales.codigo_barras}\r\n                      </TableCell>\r\n                      <TableCell id={labelId}  width={200}>\r\n                        {row.product_selected.datos_generales.nombre_comercial}\r\n                      </TableCell>\r\n                      <TableCell align=\"left\" > {row.product_selected.datos_generales.tipo_producto}</TableCell>\r\n                      {\r\n                        (row.product_selected.datos_generales.tipo_producto  === \"OTROS\") ? \r\n                          <TableCell align=\"left\"  width={20} > \r\n                            <TextField\r\n                              size=\"small\"\r\n                              name=\"cantidad\"\r\n                              variant=\"outlined\"\r\n                              type=\"number\"\r\n                              InputProps={{ inputProps: { min: 0 } }}\r\n                              value={row.cantidad_total}\r\n                              onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                            />\r\n                          </TableCell> \r\n                          :\r\n                          <TableCell align=\"left\"> {row.cantidad_total}</TableCell> \r\n\r\n                      }\r\n\r\n                      <TableCell align=\"left\" width={10}>\r\n                        <Box flexDirection={'row'} display=\"flex\" style={{width:75}}>\r\n                          { (row.product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                          <Tooltip title=\"Editar\">\r\n                              <IconButton aria-label=\"edit\" onClick={() => editItem(row.product_selected)} >\r\n                                  <EditIcon />\r\n                              </IconButton>\r\n                          </Tooltip> \r\n                          :\r\n                          <div/>\r\n                          } \r\n                          <Tooltip title=\"Eliminar\">\r\n                            <IconButton aria-label=\"delete\" onClick={() => deleteItem(row.product_selected)} >\r\n                                <DeleteIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </Box>\r\n                      </TableCell> \r\n                    </TableRow>\r\n                    )\r\n                  }\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      {/*   <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          labelRowsPerPage={\"\"}\r\n          // onRowsPerPageChange={handleChangeRowsPerPage}\r\n        /> */}\r\n       \r\n      </Paper>\r\n      \r\n    </div>\r\n  );\r\n}","import React, { forwardRef, useEffect, useContext, useState,useCallback } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Slide,\r\n         Button, Box, Dialog, Grid, DialogActions, TextField,Divider,\r\n         InputLabel, Select, Input, MenuItem, FormControl, useTheme, OutlinedInput, InputAdornment,\r\n         Stepper, Step, StepLabel, DialogTitle } from '@material-ui/core';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useDebounce } from 'use-debounce';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport {Close} from '@material-ui/icons';\r\n//import ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { FcAdvance } from 'react-icons/fc';\r\nimport almacenIcon from '../../../../icons/almacen.svg';\r\nimport TableSelectProducts from '../../../../components/Traspasos/TableSelectProducts';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN} from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { OBTENER_ALMACENES, REALIZAR_TRASPASO, OBTENER_CATEGORIAS, OBTENER_PRODUCTOS_EMPRESA} from '../../../../gql/Almacenes/Almacen';\r\n\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\n\r\n\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 50\r\n\t},\r\n    imagen: {\r\n        width: 50\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    subtitle: {\r\n\t\tmarginLeft: '10px',\r\n\t\twidth:'50%',\r\n     \r\n\t},\r\n    boxUpData:{\r\n        height: 80,\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n    selected2:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    selected:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    input:{\r\n\t\twidth:'100%'\t\r\n\t},\r\n    inputBox:{\r\n\t\tmargin:20,\r\n        marginTop:5,\r\n        marginBottom:10,\r\n       \r\n\t},\r\n    button:{\r\n\t\tmargin: theme.spacing(3),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(0)\r\n\t},\r\n    boxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n        minHeight: 20,\r\n      \r\n    },\r\n    centerControl:{\r\n        marginTop:10,\r\n      \r\n    },\r\n  \r\n}));\r\n\r\n\r\nfunction getStyles(almacen, almacenName, theme) {\r\n  return {\r\n    fontWeight:\r\n      almacenName.indexOf(almacen) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\n\r\nconst transportes = [\r\n    'Barco',\r\n    'Moto',\r\n    'Carro',\r\n    'Camioneta'\r\n];\r\n\r\n/* function createData(name, cantidad, precio, unidad) {\r\n    return { name, cantidad, precio, unidad };\r\n}  */\r\n\r\n\r\nconst steps = ['Datos traspaso', 'Seleccionar productos'];\r\n\r\nexport default function Traspasos() {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const {\r\n        setProductos,\r\n        setProductosTras,\r\n        setProductosTo,\r\n        setProductosEmpTo,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ open, setOpen ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n    const [ filtro, setFiltro ] = useState('');\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\r\n    const [ haveConcepto, setHaveConcepto ] = useState(false);\r\n    const [ conceptoTraspaso, setConceptoTraspaso ] = useState(null);\r\n    const [ isAlmacenOrigen, setIsAlmacenOrigen ] = useState(false);\r\n    const [ isAlmacenDestino, setIsAlmacenDestino ] = useState(false);\r\n\r\n    const [ almacenOrigen, setAlmacenOrigen ] = useState(null);\r\n    const [ almacenDestino, setAlmacenDestino ] = useState(null);\r\n    const [almacenesDestino, setAlmacenesDestino] =useState([])\r\n    const [ transporte, setTransporte ] = useState('');\r\n    const [ placas, setPlacas ] = useState('');\r\n    const [ nombreQuien, setNombreQuien ] = useState('');\r\n  \r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [skipped, setSkipped] = useState(new Set());\r\n    const [openEnd, setOpenEnd] = useState(false);\r\n \r\n    const [ CrearTraspaso ] = useMutation(REALIZAR_TRASPASO); \r\n\r\n    let conceptos= [];\r\n    let almacenes = [];\r\n    \r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t */\r\n\tconst dataConceptos = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t},\r\n         fetchPolicy: \"network-only\"\r\n\t});\r\n   \r\n    const categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n        fetchPolicy: \"network-only\"\r\n\t});\r\n\r\n    const productosQuery = useQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id, \r\n          sucursal: sesion.sucursal._id,\r\n          filtro: value,\r\n          almacen: (almacenOrigen ) ? almacenOrigen._id : \"\",\r\n          existencias: true\r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n\r\n    const productosEmpresaQuery = useQuery(\r\n    OBTENER_PRODUCTOS_EMPRESA,\r\n    {\r\n        variables: { \r\n          empresa: sesion.empresa._id, \r\n          filtro: value,\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n     }\r\n  );\r\n    \r\n    /* const obtenerAlmacenes= useCallback( () =>{\r\n        try {\r\n            console.log('obtenerAlmacenes')\r\n            \r\n        } catch (error) {\r\n           console.log(error)\r\n        }   \r\n    },[]); */\r\n\r\n    const obtenerProductosAlmacen = useCallback(async() =>{\r\n        try {\r\n           productosQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosQuery]);\r\n    \r\n   \r\n    \r\n    useEffect(() => {\r\n        if(almacenOrigen){\r\n          \r\n            setAlmacenesDestino(queryObtenerAlmacenes.data.obtenerAlmacenes.filter(element => element._id !== almacenOrigen._id));\r\n            obtenerProductosAlmacen();\r\n        }\r\n    }, [almacenOrigen ])\r\n\r\n\r\n    const obtenerProductosEmpresa = useCallback(async () =>{\r\n        try {\r\n             productosEmpresaQuery.refetch();\r\n        } catch (error) {\r\n            console.log('errorObtenerProductosEmpresa',error)\r\n        }   \r\n      },[productosEmpresaQuery]);\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n        try {\r\n            if(conceptoTraspaso!== null){\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    obtenerProductosEmpresa();\r\n                } else{\r\n                    obtenerProductosAlmacen();\r\n                }      \r\n            }\r\n        } catch (error) {\r\n            console.log('conceptoTraspaso', error)\r\n        }\r\n       \r\n    }, [conceptoTraspaso])    \r\n\r\n /*    useEffect(() => {\r\n\t\t\tdataConceptos.refetch();\r\n\t},[ dataConceptos ]);  */\r\n\r\n     useEffect(() => {\r\n        \r\n        if(conceptoTraspaso !== null){\r\n            if(conceptoTraspaso.destino === 'N/A'){\r\n                if(almacenOrigen !== null){\r\n                    setHaveConcepto(true)\r\n                }else{\r\n                     setHaveConcepto(false)\r\n                }\r\n            \r\n            }else{\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    if(almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }else{\r\n                    if(almacenOrigen !== null && almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }\r\n                \r\n            }    \r\n        }\r\n       \r\n\t},[conceptoTraspaso, almacenOrigen, almacenDestino ]); \r\n\r\n    \r\n\r\n     \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\t if(productosEmpresaQuery.data){\r\n             \r\n                //setProductos(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n                //console.log(productosEmpresaQuery.data)\r\n                setProductosEmpTo(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n            }\r\n    },[ productosEmpresaQuery.data, setProductosEmpTo ]);  \r\n\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if(productosQuery.data ){\r\n                setProductos(productosQuery.data.obtenerProductos);\r\n                setProductosTo(productosQuery.data.obtenerProductos)\r\n                return;\r\n            }    \r\n\t\t},\r\n\t\t[ productosQuery, setProductos, setProductosTo ]\r\n\t); \r\n    \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ categoriasQuery ]\r\n\t); \r\n  \r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n     const handleChange = (event) => {\r\n        setAlmacenOrigen(event.target.value);\r\n       /*   productosQuery.refetch({\r\n            variables: { \r\n            \r\n                almacen: event.target.value._id,\r\n                existencias: true\r\n            },\r\n        });  */\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n    const handleChangeDestino = (event) => {\r\n        //console.log(event)\r\n        setAlmacenDestino(event.target.value);\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n     const handleChangeConcepto = (event) => {\r\n        try {\r\n            \r\n            let concepto = event.target.value;  \r\n            setAlmacenesDestino([]);\r\n            almacenes = [];\r\n            setAlmacenOrigen(null); \r\n            setAlmacenDestino(null);\r\n            if(concepto.origen === 'N/A'){\r\n                setAlmacenesDestino( queryObtenerAlmacenes.data.obtenerAlmacenes)\r\n            }else{\r\n                setAlmacenesDestino([])\r\n            }\r\n          \r\n            setIsAlmacenOrigen((concepto.origen === 'N/A') ? false:true);\r\n            setIsAlmacenDestino((concepto.destino === 'N/A') ? false:true);\r\n           \r\n            setConceptoTraspaso(concepto);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    \r\n      const handleChangeTransporte = (event) => {\r\n        setTransporte(event.target.value);\r\n    };\r\n\r\n    const isStepOptional = (step) => {\r\n        return step === 1;\r\n    };\r\n\r\n    const isStepSkipped = (step) => {\r\n        return skipped.has(step);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        /* if(conceptoTraspaso === null ) {setAlert({message:'No es posible continuar sin seleccionar un concepto.', status: 'error', open: true });  return}\r\n        if( isAlmacenOrigen && almacenOrigen === null)  {setAlert({message:'No es posible continuar sin seleccionar un almacén origen.', status: 'error', open: true });  return }   \r\n        if(isAlmacenDestino && almacenDestino === null) { setAlert({message:'No es posible continuar sin seleccionar un almacén destino.', status: 'error', open: true }); return}    */\r\n        \r\n        let newSkipped = skipped;\r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped(newSkipped);\r\n        \r\n    };\r\n\r\n    const handleBack = () => {\r\n        \r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    /* const handleSkip = () => {\r\n        if (!isStepOptional(activeStep)) {\r\n        // You probably want to guard against something like this,\r\n        // it should never occur unless someone's actively trying to break something.\r\n        throw new Error(\"You can't skip a step that isn't optional.\");\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped((prevSkipped) => {\r\n        const newSkipped = new Set(prevSkipped.values());\r\n        newSkipped.add(activeStep);\r\n        return newSkipped;\r\n        });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setActiveStep(0);\r\n    }; */\r\n\r\n\r\n   /*  if(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}  */\r\n   \r\n    if(dataConceptos.data){\r\n\t\tconceptos = dataConceptos.data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n\r\n   \r\n   \r\n   /*  const filtrarProductos = (event) => {\r\n        event.preventDefault();\r\n        if(almacenOrigen !== ''){\r\n            productosQuery.refetch();\r\n        }else{\r\n            productosEmpresaQuery.refetch();\r\n        }\r\n    }; */\r\n\r\n    const handleModal = () => {\r\n        setOpenEnd(!openEnd)\r\n    }\r\n\r\n    const traspasar = async () => {\r\n        try {\r\n         \r\n            if(productosTras.length){\r\n               setOpenEnd(false)\r\n               setLoading(true)\r\n                //let productTrasTo = productosTras;\r\n             const input =  {\r\n                variables: {\r\n                    input: {\r\n                        concepto_traspaso: {\r\n                            _id: conceptoTraspaso._id, \r\n                            nombre_concepto: conceptoTraspaso.nombre_concepto,\r\n                            destino: conceptoTraspaso.destino,\r\n                            origen: conceptoTraspaso.origen,\r\n                            editable: conceptoTraspaso.editable,\r\n                        },\r\n                        almacen_origen: (almacenOrigen !== null) ? almacenOrigen._id : '',\r\n                        almacen_destino: (almacenDestino !== null) ? almacenDestino._id : '',\r\n                        productos: productosTras,\r\n                        datos_transporte :{\r\n                            transporte: transporte,\r\n                            placas: placas,\r\n                            nombre_encargado: nombreQuien\r\n                        },\r\n                        sucursalOrigen: sesion.sucursal._id,\r\n                        sucursalDestino: sesion.sucursal._id,\r\n                        fecha_registro: moment().locale(\"es-mx\").format()\r\n                    },\r\n                    usuario: sesion._id,\r\n                    empresa: sesion.empresa._id\r\n                }\r\n            }  \r\n            \r\n             const traspaso =    await CrearTraspaso(input) \r\n           \r\n                //console.log(traspaso)\r\n                setAlert({message: traspaso.data.crearTraspaso.message, status: traspaso.data.crearTraspaso.resp, open: true })\r\n                if(traspaso.data.crearTraspaso.resp !== 'error'){\r\n                    setProductosTras([]);\r\n                    setAlmacenOrigen(null);\r\n                    setAlmacenDestino(null);\r\n                    setConceptoTraspaso(null);\r\n                    handleBack();\r\n                }\r\n                \r\n            }else{\r\n                \r\n                setAlert({message:'No es posible realizar un traspaso sin agregar productos.', status: 'error', open: true })\r\n           \r\n            }\r\n            \r\n           \r\n           \r\n            setLoading(false);\r\n        } catch (error) {\r\n             setLoading(false);\r\n             setOpenEnd(false)\r\n             console.log(error)\r\n           if(error.networkError !== undefined){\r\n\t\t\t  console.log('traspaso networkError', error.networkError.result)\r\n            }else if(error.graphQLErrors!== undefined){\r\n                console.log('traspaso graphQLErrors', error.graphQLErrors)\r\n            }else{\r\n             \r\n              \r\n            }\r\n             setAlert({message: 'Ocurrió un error al realizar el traspaso...', status: 'error', open: true })\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <>\r\n        <Box sx={{ width: '100%',  }}>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcAdvance className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n                    <Grid container spacing={10} justify=\"center\" >\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen}/>\r\n                                    </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={2} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen} />\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    Traspasos\r\n                </Box>\r\n\t\t\t\t\t\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <AppBar className={classes.appBar}>\r\n               \r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Traspasos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n                            <Box m={1}>\r\n                                <Button  variant=\"contained\" color=\"secondary\"onClick={handleClose}>\r\n                                    <Close style={{ fontSize: 30}}/>\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Box style={{ width: '50%',alignSelf:'center', alignContent:'center', alignItems:'center' }}>\r\n                  \r\n                    <Stepper activeStep={activeStep}>\r\n                        {steps.map((label, index) => {\r\n                        const stepProps = {};\r\n                        const labelProps = {};\r\n                    \r\n                        if (isStepSkipped(index)) {\r\n                            stepProps.completed = false;\r\n                        }\r\n                        return (\r\n                            <Step key={label} {...stepProps}>\r\n                            <StepLabel {...labelProps}>{label}</StepLabel>\r\n                            </Step>\r\n                        );\r\n                        })}\r\n                    </Stepper>\r\n                </Box>\r\n                <Box >\r\n                {\r\n                (activeStep === 0) ? \r\n                    <Grid container  justify=\"center\" >\r\n                        <Grid item lg={6}>\r\n                            <Box>\r\n                                <Box >\r\n                                    <Typography className={classes.subtitle}  >\r\n                                        <b>Datos traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Box mt={2} style={{display: 'flex', width:'100%', justifyContent: 'center'}}>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Usuario</b></Typography>\r\n                                            <Typography> {sesion.nombre} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Sucursal</b></Typography>\r\n                                            <Typography> {sesion.sucursal.nombre_sucursal} </Typography>\r\n                                        </Box>\r\n                                        <Box m={3}>\r\n                                            <Typography><b>Fecha</b></Typography>\r\n                                            <Typography> \t{moment().format('MM/DD/YYYY')} </Typography>\r\n                                        </Box>\r\n                                    \r\n                                    </Box>\r\n                                    <Box m={2}   style={{width:'100%', justifyContent: 'center'}}>\r\n                                        <Box style={{width:'100%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto traspaso</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(conceptoTraspaso) ? conceptoTraspaso : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={concepto._id} value={concepto} >\r\n                                                        {concepto.nombre_concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                    {\r\n                                        (conceptoTraspaso !== null) ? \r\n                                        <Box style={{display: 'flex'}}>\r\n                                            {   \r\n                                                \r\n                                                (isAlmacenOrigen) ?\r\n                                                <Box> \r\n                                                    <FormControl className={classes.formControl}>\r\n                                                        <InputLabel id=\"almacen-origen-label\">Almacén origen</InputLabel>\r\n                                                        <Select\r\n                                                        labelId=\"almacen-origen-label\"\r\n                                                        id=\"almacen-origen-name\"\r\n                                                        value={(almacenOrigen) ? almacenOrigen : \"\"}\r\n                                                        onChange={handleChange}\r\n                                                        input={<Input />}\r\n                                                        MenuProps={MenuProps}\r\n                                                        >\r\n                                                        {almacenes.map((almacen) => (\r\n                                                            <MenuItem key={almacen._id} value={almacen}>\r\n                                                                {almacen.nombre_almacen}\r\n                                                            </MenuItem>\r\n                                                        ))}\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Box>\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                            \r\n                                            {\r\n                                                (isAlmacenDestino) ? \r\n                                                <FormControl className={classes.formControl}>\r\n                                                    <InputLabel id=\"almacen-destino-label\">Almacén destino</InputLabel>\r\n                                                    <Select\r\n                                                    labelId=\"almacen-destino-label\"\r\n                                                    id=\"almacen-destino-name\"\r\n                                                    value={(almacenDestino) ? almacenDestino : \"\"}\r\n\r\n                                                    onChange={handleChangeDestino}\r\n                                                    input={<Input />}\r\n                                                    MenuProps={MenuProps}\r\n                                                    >\r\n                                                    {almacenesDestino.map((almacen) => (\r\n                                                        <MenuItem key={almacen._id} value={almacen} >\r\n                                                        {almacen.nombre_almacen}\r\n                                                        </MenuItem>\r\n                                                    ))}\r\n                                                    </Select>\r\n                                                </FormControl>\r\n\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                           \r\n                                        </Box> \r\n                                        :\r\n                                        <></>\r\n                                        \r\n                                    } \r\n                                    \r\n                                    </Box>   \r\n                                </Box>      \r\n                                <Box className={classes.centerControl}   style={{width:'100%'}} >\r\n                                    <Typography className={classes.subtitle}>\r\n                                        <b>Datos transporte traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Grid  justify=\"center\" >\r\n                                        \r\n                                        <FormControl className={classes.formControl} style={{marginTop:15}}>\r\n                                            \r\n                                            <InputLabel id=\"transporte-label\">Transporte</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"transporte-label\"\r\n                                            id=\"transporte-name\"\r\n                                            value={transporte}\r\n                                            onChange={handleChangeTransporte}\r\n                                            input={<Input />}\r\n                                            \r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {transportes.map((trans) => (\r\n                                                <MenuItem key={trans} value={trans} style={getStyles(trans, transporte, theme)}>\r\n                                                {trans}\r\n                                                </MenuItem>\r\n                                            ))}\r\n                                            </Select>\r\n                                            \r\n                                        </FormControl>\r\n                                        <Box  justify=\"center\" >\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Placas\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"placas\"\r\n                                                variant=\"outlined\"\r\n                                                value={placas.toUpperCase()}\r\n                                                \r\n                                                onChange={(e) => setPlacas(e.target.value)}\r\n                                            />\r\n                                        \r\n                                        </FormControl>\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Nombre de encargado de transporte\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"nombreQuien\"\r\n                                                variant=\"outlined\"\r\n                                                value={nombreQuien}\r\n                                                \r\n                                                onChange={(e) => setNombreQuien(e.target.value)}\r\n                                            />\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                    </Grid>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                :\r\n                    <Box>\r\n                        <Box ml={1} style={{width:'100%'}}  >\r\n                            <Box ml={2}>\r\n                            <Typography className={classes.subtitle}>\r\n                                <b>Buscar producto</b>\r\n                            </Typography>\r\n                            <Box  style={{ width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n                            </Box>\r\n                            <Box  mt={2}>\r\n                                <Grid container spacing={2} style={{width:'100%'}}>\r\n                                    <Grid item md={6}>\r\n                                    {\r\n                                        (isAlmacenOrigen) ? \r\n                                    \r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={almacenOrigen} />\r\n                                        :\r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={null} />   \r\n                                    }\r\n                                    </Grid>\r\n                                    <Grid item md={6}>\r\n                                        <TableSelectProducts title='Productos a traspasar' add={false} almacenOrigen={almacenOrigen}  />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                }\r\n                \r\n                   <DialogActions style={{justifyContent:'center'}}>\r\n                    <Box sx={{ flexDirection: 'row',alignSelf: 'center',  width: '15%',display: 'flex', pt: 2 }} >\r\n                            <Button\r\n                            color=\"inherit\"\r\n                            disabled={activeStep === 0}\r\n                            onClick={handleBack}\r\n                            sx={{ mr: 1 }}\r\n                            >\r\n                            Atrás\r\n                            </Button>\r\n                            <Box style={{ flex: '1 1 auto' }} />\r\n                            {/*     {isStepOptional(activeStep) && (\r\n                                <Button color=\"inherit\" onClick={handleSkip} sx={{ mr: 1 }}>\r\n                                    Skip\r\n                                </Button>\r\n                                )} */}\r\n                            \r\n                                <Button disabled={!haveConcepto} onClick={() => (activeStep < steps.length -1) ? handleNext() : handleModal()}>\r\n                                    {activeStep < steps.length -1   ? 'Siguiente' : 'Terminar'}\r\n                                </Button>\r\n                        \r\n                        </Box>\r\n                   </DialogActions>    \r\n                </Box>\r\n                <Dialog open={openEnd} onClose={handleModal}>\r\n                    <DialogTitle>{'¿Está seguro de realizar este traspaso?'}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => handleModal()} color=\"primary\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => traspasar()}>\r\n                            Traspasar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n               \r\n\t        <SnackBarMessages alert={alert} setAlert={setAlert} />  \r\n            \r\n\t\t\t</Dialog>\r\n            \r\n               \r\n        </Box>\r\n        </>\r\n    )\r\n}","import React, {useEffect, useState, useContext} from 'react';\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\t\r\n\t\tmaxHeight: '76vh'\r\n\t}\r\n});\r\n\r\nconst Rowrow = (rowProps) => {\r\n\tconst {dataExcel, setDataExcel} = useContext(TraspasosAlmacenContext);\t\r\n\tconst [dataExcelHere, setDataExcelHere] = useState([]);\t\r\n\tconst [arrayCantidades , setArrayCantidades] = useState([]);\r\n\tconst [row, setRow] = useState({'codigo_barras' : rowProps.producto.datos_generales.codigo_barras, \"nombre_comercial\":rowProps.producto.datos_generales.nombre_comercial, style: {\r\n\t\t\t\t\tfont: { sz: '12' },\r\n\t\t\t\t\talignment: { wrapText: true, horizontal: 'center', vertical: 'top' },\r\n\t\t\t\t\tborder: { bottom: { style: 'thin', color: { rgb: '000000' } } \r\n\t\t\t\t}}});\r\n\tconst [total , setTotal] = useState(0)\r\n\tconst [unidad_minima , setUnidad_Minima] = useState('')\r\n\t\t\r\n\t\t\r\n\t\tuseEffect(() => {\r\n\t\t\tlet tot= 0;\r\n\t\t\tlet r = row;\r\n\t\t\tlet datExc = dataExcel;\r\n\t\t\trowProps.obtenerAlmacenes.forEach((almacenColumna) => {\r\n\t\t\t\tconst existencias =\trowProps.producto.existencia_almacenes.filter((existencia) => existencia._id.almacen._id === almacenColumna._id)\r\n\r\n\t\t\t\tif(existencias.length > 0){\r\n\t\t\t\t\tarrayCantidades.push(existencias[0].cantidad_existente )\r\n\t\t\t\t\tsetUnidad_Minima((existencias[0].unidad_inventario !== null) ? existencias[0].unidad_inventario: 'pz');\r\n\t\t\t\t\tr = {...r, [almacenColumna._id]: existencias[0].cantidad_existente + \" \" + unidad_minima };\r\n\t\t\t\t\ttot +=  existencias[0].cantidad_existente;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse{\r\n\t\t\t\t\tarrayCantidades.push(0);\r\n\t\t\t\t\tr = {...r, [almacenColumna._id]:0   };\t\r\n\t\t\t\t}\r\n\t\t\t});\t \r\n\t\t\tr = {...r, total:tot + \" \" + unidad_minima };\r\n\r\n\t\t\tsetTotal(tot)\r\n\t\t\tsetRow(r);\r\n\t\t\tdatExc.push(r);\r\n\t\t\t//console.log( 'DATA EXCEL LISTA PROductos' , datExc)\r\n\t\t\t\r\n\t\t\r\n\t\t \t\r\n\t\t\tif(rowProps.index === rowProps.productosLength -1){\r\n\t\t\t\t\r\n\t\t\t\tsetDataExcelHere(datExc);\r\n\t\t\t} \r\n\t\t\r\n\t\t}, []);\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\r\n\t\t\tif(dataExcelHere){\r\n\t\t\t\tsetDataExcel(dataExcelHere);\r\n\t\t\t}\r\n\t\t\r\n\t\t}, [dataExcelHere])\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={rowProps.producto._id} >\r\n\t\t\t\t<TableCell style={{minWidth:60}} >{rowProps.producto.datos_generales.codigo_barras}</TableCell>\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t<TableCell style={{minWidth:170}} >{rowProps.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t{/* <TableCell style={{textAlign: 'center',}} >{(producto.datos_generales.receta_farmacia) ? \"SI\" : \"NO\"}</TableCell> */}\r\n\t\t\t\t{ \r\n\t\t\t\t\tarrayCantidades.map((cantidad, index) => {\r\n\t\t\t\t\t\treturn(<TableCell key={index} style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black',fontSize:17, textAlign:'center',minWidth:60 }}>{cantidad + \" \" + unidad_minima}</TableCell>)\t\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}\r\n\t\t\t\t<TableCell  style={{backgroundColor:'rgba(255, 253, 150, 0.1)', color:'black', fontSize:18,fontWeight:'bold', textAlign:'center' ,minWidth:60}}>{total + \" \" + unidad_minima }</TableCell>\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\nexport default function ListaAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t//const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n\t// const almacenesColumnas = [];\r\n\t// const productosRows = [];\r\n\t\t/* Queries */\r\n\t/* const { loading, error, refetch } = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t */\r\n   \r\n\t\r\n\r\n\t/* useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); */\r\n\t\r\n\r\n\t\r\n\t\r\n/* \tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t}; */\r\n\r\n\t/* if (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\tif (error) {\r\n\t\tconsole.log(error)\r\n\t\treturn <ErrorPage error={error} />;\r\n\t} */\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\r\n\t\t<Paper className={classes.root}>\r\n\t\t\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size={'small'} aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{props.columns.map((column, index) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{textAlign:(index > 1)? 'center': 'left', minWidth: column.minWidth, width: column.minWidth}}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\t\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{props.productos.map((row, index) => {\r\n\t\t\t\t\t\t    let key =  index;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Rowrow producto={row} index={key} key={index} productosLength={props.productos.length} dataExcel ={props.dataExcel} setDataExcel={props.setDataExcel} obtenerAlmacenes={props.obtenerAlmacenes} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t{/* <TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={props.productos.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\tlabelRowsPerPage={\"Renglones por página\"}\r\n\t\t\t/> */}\r\n\t\t\t\r\n\t\t</Paper>\r\n\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\n\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Grid, Button } from '@material-ui/core';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\n\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\n//Este componente requiere el ArrayData, ArrayColumn, fileName\r\nfunction ExportarExcel(props) {\r\n\treturn (\r\n\t\t<Fragment>\r\n            <Grid>\r\n                <Grid item>\r\n                <ExcelFile\r\n\t\t\t\t\t\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\"startIcon={<DescriptionOutlinedIcon />}>\r\n\t\t\t\t\t\t\tExportar a Excel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilename={props.fileName}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ExcelSheet data={props.data} name={props.fileName}>\r\n                        {props.columnName.map((element) => {\r\n                            return(\r\n                                <ExcelColumn key={element.id} label={element.label} value={element.id} />\r\n                            )\r\n                        }\r\n                        )}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ExcelSheet>\r\n\t\t\t\t</ExcelFile>\r\n                </Grid>\r\n            </Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(ExportarExcel);","import React, { forwardRef, useContext, useState, useEffect } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton,FormControl,\r\nSlide, Button, Box, Dialog, OutlinedInput, InputAdornment,CircularProgress} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { useQuery } from '@apollo/client';\r\nimport {Close} from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos'\r\nimport ExportarExcel from '../../../../components/ExportExcel'\r\nimport ErrorPage from '../../../../components/ErrorPage'\r\nimport { useDebounce } from 'use-debounce';\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_PRODUCTOS_ALMACEN, OBTENER_CATEGORIAS,OBTENER_ALMACENES } from '../../../../gql/Almacenes/Almacen';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\tboxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n    },\r\n    icon: {\r\n\t\tfontSize: 100\r\n\t},\r\n\timagen: {\r\n\t\twidth: 100\r\n\t},\r\n\tinputBox:{\r\n\t\tmargin:20\r\n\t},\r\n\tbutton:{\r\n\t\tmargin: theme.spacing(3),\r\n\t}\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nexport default function InventariosPorAlmacen() {\r\n    const classes = useStyles();\r\n\tconst [ open, setOpen ] = useState(false);\r\n\t\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\t\r\n\t\r\n\r\n    return (\r\n        <div>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src={'https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/conceptosAlmacen.svg'} alt=\"icono almacen\" className={classes.imagen}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tInventario por almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<InventarioPorAlmacen open={open} handleClose={handleClose} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst InventarioPorAlmacen = (props) =>{\r\n\tconst classes = useStyles();\r\n\tconst [ loading, setLoading ] = useState(true);\r\n\t  \r\n\tconst [ filtro, setFiltro ] = useState('');\r\n\r\n\tconst {dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n\t\r\n\tconst [ productos, setProductos] = \tuseState([]);\r\n\tconst [ obtenerAlmacenes, setObtenerAlmacenes] = \tuseState([]);\r\n\t// const [ almacen, setAlmacen ] = React.useState('');\r\n\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\t\r\n\t// let tipos = ['ROPA','CALZADO','OTROS'];\r\n\tconst [columns, setColumns] = useState([])\r\n\t\r\n\t \t/* Queries */\r\n\t//const {  data, error, refetch } = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n    const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t\r\n\r\n\tconst categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tconst queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n\t\tvariables: {\r\n\t\t\tid: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\t\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.update, queryObtenerAlmacenes ]\r\n\t);\r\n\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif(props.open){\r\n\t\t\t\tsetDataExcel([])\r\n\t\t\t\tproductosAlmacenQuery.refetch();\r\n\t\t\t\tqueryObtenerAlmacenes.refetch();\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t[props.open ]\r\n\t);\r\n\t\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\tif(productosAlmacenQuery.data){\r\n\t\t\t//setDataExcel([]);\r\n\t\t\tsetProductos(productosAlmacenQuery.data.obtenerProductosAlmacenes);\r\n\t\t}\r\n\t\t},\r\n\t\t[ productosAlmacenQuery.data]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif(queryObtenerAlmacenes.data){\r\n\t\t\t\tconst columnsEffect = [\r\n\t\t\t\t\t{ id: 'codigo_barras', label: 'Código de barras', minWidth: 60 , widthPx: 160, },\r\n\t\t\t\t\t{ id: 'nombre_comercial', label: 'Nombre comercial', minWidth: 170, widthPx: 160, }\r\n\t\t\t\t];\r\n\t\t\t\tlet almace = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n\t\t\t\talmace.forEach(element => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tcolumnsEffect.push({ id: element._id, label: element.nombre_almacen, minWidth: 60, widthPx: 160,})\r\n\t\t\t\t}); \r\n\t\t\t\tcolumnsEffect.push({ id: 'total', label: 'Total existencias', minWidth: 60, widthPx: 160,})\r\n\t\t\t\tsetObtenerAlmacenes(almace);\r\n\t\t\t\tsetColumns(columnsEffect);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t[ queryObtenerAlmacenes.data]\r\n\t);\r\n\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\t \r\n\treturn(\r\n\t\t<Dialog fullScreen open={props.open} onClose={props.handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Inventario por almacén\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={props.handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n                        </Box>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={props.handleClose} aria-label=\"close\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t<Box ml={4} >\r\n\t\t\t\t\t\t<Typography className={classes.subtitle}>\r\n                            <b>Buscar producto</b>\r\n                        </Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box ml={4} display=\"flex\" >\r\n                            \r\n                            <Box style={{  width: \"35%\" }}>\r\n                                \r\n                                    <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setFiltro(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                    </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n\t\t\t\t\t\t\t{(productos.length > 0) ?\r\n\t\t\t\t\t\t\t\t<Box ml={4} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\" alignItems=\"center\" >\r\n\t\t\t\t\t\t\t\t\t<Box  >\r\n\t\t\t\t\t\t\t\t\t\t<ExportarExcel fileName=\"Inventarios almacen\" data={dataExcel} columnName={columns} />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Box>\t\t\t\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t(loading) ?\r\n\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t: \r\n\t\t\t\t\t\t(productosAlmacenQuery.error || categoriasQuery.error) ?\r\n\t\t\t\t\t\t\t<ErrorPage error={productosAlmacenQuery.error} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Box mx={5} mt={1} >\r\n\t\t\t\t\t\t\t<ListaProductos productos={productos} obtenerAlmacenes={obtenerAlmacenes} columns={columns} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t</Dialog>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport RegistroAlmacen from './RegistroAlmacen/RegistroAlmacen';\r\nimport Traspasos from './Traspasos/Traspasos';\r\nimport InventariosPorAlmacen from './InventarioPorAlmacen/InventariosPorAlmacen';\r\nimport { TraspasosProvider } from \"../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nexport default function Moviminetos() {\r\n\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\" >\r\n\t\t\t{sesion.accesos.almacenes.almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<RegistroAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.traspasos.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<Traspasos />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.inventario_almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<InventariosPorAlmacen />\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport 'moment'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\nimport moment from 'moment';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'movimiento', label: 'Movimieto', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '70%',\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\n\r\nexport default function TablaHistorialFiltrado({loading, historial}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historial.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tdatos={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({datos}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tconst classes = useStyles();\r\n\tconsole.log(datos)\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.hora_moviento.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.tipo_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.nombre_usuario_creador}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.horario_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{datos.concepto}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha Movimiento: </b> {moment(datos.fecha_movimiento.completa).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Hora Movimiento: </b> {datos.hora_moviento.completa}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario: </b> {datos.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario en Turno: </b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Tipo Movimiento: </b> {datos.tipo_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography> \r\n\t\t\t\t\t\t\t\t\t<b>Concepto: </b> {datos.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Caja: </b> {datos.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${datos.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${datos.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import React, {  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, Slide, Box, Button, Toolbar, Typography, FormControl, MenuItem, Select, Grid, TextField} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_CAJA} from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport TablaHistorialFiltrado from './TablaHistorialFiltrado';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1,\r\n\t},\r\n    appBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst tipos = [\r\n    'TODOS',\r\n    'VENTA',\r\n    'DEPOSITO',\r\n    'RETIRO',\r\n    'TRANSFERENCIA'\r\n];\r\n\r\nexport default function HistorialCaja(props) {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ datosBuscar, setDatosBuscar ] = useState([]);\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\tconst [ value ] = useDebounce(datosBuscar, 500);\r\n\r\n\tlet obtenerHistorialCaja = [];\r\n\r\n    /* Queries */\r\n\tconst {  data, refetch, loading } = useQuery(OBTENER_HISTORIAL_CAJA, {\r\n\t\tvariables: {\r\n            id_Caja: props.cajaSelected._id,\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                tipo_movimiento: datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento :  \"\",\r\n                fecha_incio: datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\",\r\n                fecha_fin: datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\"\r\n            },\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (datosHistorial) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < datosHistorial.length; i++) {\r\n            arrayExcel = { \r\n                fecha: datosHistorial[i].fecha_movimiento.completa,\r\n                hora_movimiento: datosHistorial[i].hora_moviento.completa,\r\n                nombre: datosHistorial[i].nombre_usuario_creador,\r\n                horario_turno: datosHistorial[i].horario_turno,\r\n                tipo_movimiento: datosHistorial[i].tipo_movimiento,\r\n                concepto: datosHistorial[i].concepto,\r\n                caja: datosHistorial[i].numero_caja,\r\n                monto_efectivo: datosHistorial[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: datosHistorial[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: datosHistorial[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: datosHistorial[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: datosHistorial[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: datosHistorial[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: datosHistorial[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: datosHistorial[i].montos_en_caja.monto_vales_despensa.monto , \r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n\tif(data){\r\n\t\tobtenerHistorialCaja = data.obtenerHistorialCaja;\r\n        agruparDatos(obtenerHistorialCaja);\r\n\t}\r\n\r\n    const handleDatos = (e) => {\r\n        setDatosBuscar({...datosBuscar, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n\r\n    const limpiarFiltros = () => {\r\n        setDatosBuscar([]);\r\n    }\r\n\r\n    return (\r\n        <Dialog fullScreen open={props.open} onClose={()=>{props.handleClose();}} TransitionComponent={Transition}>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        Caja {props.cajaSelected.numero_caja}\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={ () => {props.handleClose()} } size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Grid container>\r\n                <ExcelFile\r\n                    element={\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            aria-label=\"Guardar\"\r\n                            className={classes.iconSave}\r\n                        >\r\n                            <SaveIcon className={classes.margin} />\r\n                            Exportar\r\n                        </Button>   \r\n                    }\r\n                    filename={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n                >\r\n                    <ExcelSheet data={datosExcel} name={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}>\r\n                        <ExcelColumn label='Usuario' value='nombre' />\r\n                        <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                        <ExcelColumn label='Hora Movimiento' value='hora_movimiento' />\r\n                        <ExcelColumn label='Horario en Turno' value='horario_turno' />\r\n                        <ExcelColumn label='Concepto' value='concepto' />\r\n                        <ExcelColumn label='Tipo Movimiento' value='tipo_movimiento' />\r\n                        <ExcelColumn label='No. de Caja' value='caja' />\r\n                        <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                        <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                        <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                        <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                        <ExcelColumn label='M. en monedero' value='monto_monedero' />\r\n                        <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                        <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                        <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                    </ExcelSheet>\r\n                </ExcelFile>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Movimiento\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"tipo_movimiento\"\r\n                                    onChange={handleDatos}\r\n                                    value={datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento : \"\"}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {tipos.map((tipo, index) => {\r\n                                        return(\r\n                                            <MenuItem key={index} value={tipo}>{tipo}</MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\t\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha inicio:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_incio\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Fecha fin:\r\n                            </Typography>\r\n                            <TextField \r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"fecha_fin\"\r\n                                variant=\"outlined\"\r\n                                type=\"date\"\r\n                                value={datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\"}\r\n                                onChange={handleDatos}\r\n                            />\r\n                        </Box>\r\n                        <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }} >\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Usuario:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"usuario\"\r\n                                    variant=\"outlined\"\r\n                                    value={datosBuscar.usuario ? datosBuscar.usuario : \"\"}\r\n                                    onChange={handleDatos}\r\n                                />\r\n                            </Box>\r\n                        </form>\r\n                        <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                            <Box mt={2}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarFiltros}\r\n                                >\r\n                                    Limpiar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item lg={12} md={12} xs={12}>\r\n                    <TablaHistorialFiltrado loading={loading} historial={obtenerHistorialCaja} />\r\n                </Grid>  \r\n            </Grid>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport {Badge, Box} from '@material-ui/core';\r\n \r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n      color :({props})=> props.color,\r\n      background: ({props})=> props.color,\r\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n      '&::after': {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        borderRadius: '50%',\r\n        animation: '$ripple 1.2s infinite ease-in-out',\r\n        border: '1px solid currentColor',\r\n        content: '\"\"',\r\n      },\r\n    },\r\n    '@keyframes ripple': {\r\n      '0%': {\r\n        transform: 'scale(.8)',\r\n        opacity: 1,\r\n      },\r\n      '100%': {\r\n        transform: 'scale(2.4)',\r\n        opacity: 0,\r\n      },\r\n    }\r\n  }))(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth:230,\r\n    maxWidth: 230,\r\n    margin:5,\r\n    \r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    color: red[500],\r\n  },\r\n  textActive:{\r\n    position:'relative',\r\n    bottom:8\r\n  }\r\n}));\r\n\r\nexport default function CardCaja(props) {\r\n    const styleProps={\r\n      color: (props.activa)  ? '#44b700' : 'red'\r\n    }\r\n    const classes = useStyles();\r\n \r\n    return (\r\n        <div>\r\n            <Card className={classes.root}>\r\n                    <CardHeader\r\n                      color=\"secondary\"\r\n                        avatar={\r\n                            <StyledBadge\r\n                              overlap=\"circle\"\r\n                              props={styleProps}\r\n                              anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                              }}\r\n                              variant=\"dot\"\r\n                              badgeContent=\"\"\r\n                            >\r\n                            <Avatar alt=\"Cajero X\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </StyledBadge>\r\n                        }\r\n                    />\r\n                    <Box m={1} mb={2}>\r\n                    <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\" >\r\n                            Caja {props.name}\r\n                    </Typography>\r\n                    </Box>\r\n                    {/* <CardActions disableSpacing  >\r\n                        <Typography style={{fontWeight: 'bold'}} color=\"textSecondary\" component=\"p\">\r\n                           Total en caja: \r\n                        </Typography>\r\n                        <Typography style={{margin: '0px 10px', color: 'green'}} variant=\"h6\" color=\"textSecondary\" component=\"p\">\r\n                           $ {parseFloat(props.cantidad_efectivo_actual)}\r\n                        </Typography>\r\n                    </CardActions> */}\r\n                </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Grid  } from '@material-ui/core';\r\nimport HistorialCaja from './HistorialCaja';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport CardCaja from './CardCaja';\r\n\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n    const [ loading, setLoading ] = React.useState(false);\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n    const [ openHistorial, setOpenHistorial ] = React.useState(false);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ cajaSelected, setCajaSelected ] = React.useState({name:''});\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    let obtenerCajasSucursal = []; \r\n\r\n\t\r\n    /* Queries */\r\n    const {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n    const handleClickOpenHistorial = () => {\r\n\t\tsetOpenHistorial(true);\r\n\t};\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n    const handleCloseHistorial = () => {\r\n\t\tsetOpenHistorial(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cajas.svg' alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container spacing={1} justify=\"center\" >\r\n\t\t\t\t\t{obtenerCajasSucursal?.map((caja, index) => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<Button key={index} onClick={()=>{handleClickOpenHistorial(); setCajaSelected(caja)}}>\r\n\t\t\t\t\t\t\t\t<CardCaja name={caja.numero_caja} activa={caja.activa} cantidad_efectivo_actual={caja.cantidad_efectivo_actual} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\t\r\n\t\t\t\t\t})} \r\n\t\t\t\t</Grid> \t\r\n\t\t\t</Dialog>\r\n            <HistorialCaja open={openHistorial} fetchCajas={refetch} handleClickOpen={handleClickOpenHistorial} cajaSelected={cajaSelected} handleClose={handleCloseHistorial} obtenerCajasSucursal={obtenerCajasSucursal} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, Dialog, DialogContent, Typography, CircularProgress} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100 },\r\n\t{ id: 'hora', label: 'Hora', minWidth: 100 },\r\n\t{ id: 'usuario', label: 'Usuario', minWidth: 100 },\r\n\t{ id: 'hTurno', label: 'Horario Turno', minWidth: 100 },\t\r\n\t{ id: 'concepto', label: 'Concepto', minWidth: 100 },\r\n\t{ id: 'caja', label: 'Caja', minWidth: 100 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: 500,\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TablaTurnosFiltrados({loading, turnos}) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tif (loading)\r\n\t\treturn (\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t</Box>\r\n\t\t);\r\n\t\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{turnos.map((row) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\t\tturno={row}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\nfunction RowsRender({turno}) {\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst classes = useStyles();\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={turno._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{turno.fecha_movimiento}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{turno.hora_salida.completa}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.concepto}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{turno.numero_caja}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid lg={12} xs={12}>\r\n\t\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\tInformación del turno\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Usuario</b>: {turno.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Numero de caja</b>: {turno.numero_caja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Moviento de turno</b>: {turno.concepto}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Horario de turno</b>: {turno.horario_en_turno}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{turno.concepto === \"ABRIR TURNO\" ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Entrada de turno: </b>{turno.hora_entrada.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Hora de Salida de turno: </b>{turno.hora_salida.completa}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Comentarios</b>: {turno.comentarios}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t<b>Fecha de movimiento</b>: {turno.fecha_movimiento}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid lg={6} xs={12}>\r\n\t\t\t\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tConcepto\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonto depositado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>Monto Total Efectivo:</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>${turno.montos_en_caja.monto_efectivo.monto}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${turno.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRAR_TURNOS = gql`\r\n\tmutation crearRegistroDeTurno( $input: AbrirCerrarTurnoInput, $activa: Boolean) {\r\n\t\tcrearRegistroDeTurno(input: $input, activa: $activa) {\r\n\t\t\thorario_en_turno\r\n\t\t\ttoken_turno_user\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t}\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_TURNOS = gql`\r\n\tquery obtenerFiltroTurnos($input: HistorialTurnosInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerFiltroTurnos(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\thorario_en_turno\r\n\t\t\tconcepto\r\n\t\t\tnumero_caja\r\n\t\t\tid_caja\r\n\t\t\tcomentarios\r\n\t\t\thora_entrada {\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\thora_salida{\r\n\t\t\t\thora\r\n\t\t\t\tminutos\r\n\t\t\t\tsegundos\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_entrada{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_salida{\r\n\t\t\t\tyear\r\n\t\t\t\tmes\r\n\t\t\t\tdia\r\n\t\t\t\tno_semana_year\r\n\t\t\t\tno_dia_year\r\n\t\t\t\tcompleta\r\n\t\t\t}\r\n\t\t\tfecha_movimiento\r\n\t\t\tmontos_en_caja {\r\n\t\t\t\tmonto_efectivo{\r\n                    monto \r\n                }\r\n                monto_tarjeta_credito{\r\n                    monto \r\n                }\r\n                monto_tarjeta_debito{\r\n                    monto \r\n                }\r\n                monto_creditos{\r\n                    monto \r\n                }\r\n                monto_monedero{\r\n                    monto \r\n                }\r\n                monto_transferencia{\r\n                    monto \r\n                }\r\n                monto_cheques{\r\n                    monto \r\n                }\r\n                monto_vales_despensa{\r\n                    monto \r\n                }\r\n\t\t\t}\r\n\t\t\tusuario_en_turno {\r\n\t\t\t\tnumero_usuario\r\n\t\t\t\tnombre\r\n\t\t\t}\r\n\t\t\tempresa\r\n\t\t\tsucursal\r\n\t\t}\r\n\t}\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ReactExport from 'react-export-excel'; //LIBRERIA EXCEL\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaTurnosFiltrados from './TablaTurnosFiltrados';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { OBTENER_HISTORIAL_TURNOS } from '../../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { useDebounce } from 'use-debounce';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport ErrorPage from '../../../../components/ErrorPage';\r\nmoment.locale('es');\r\nconst ExcelFile = ReactExport.ExcelFile; //ARCHIVO DE EXCEL\r\nconst ExcelSheet = ReactExport.ExcelSheet; //HOJA DE EXCEL\r\nconst ExcelColumn = ReactExport.ExcelColumn; //COLUMNA DE EXCEL\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesTurnosUsuarios() {\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg'\r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n                    </Box>\r\n\t\t\t\t\tTurnos de Usuarios\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                            Reportes Turnos de Usuarios\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1} display=\"flex\">\r\n                            <Box p={1}>\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon style={{fontSize: 30}} />\r\n                                </Button>\r\n                            </Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <FiltroTablaTurnos />\r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n};\r\n\r\nconst FiltroTablaTurnos = () => {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [filtros, setFiltros] = useState([]);\r\n    const [ datosExcel, setDatosExcel] = useState([]);\r\n\tconst [value] = useDebounce(filtros, 500);\r\n    let historialTurnos = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  } = useQuery(OBTENER_HISTORIAL_TURNOS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                horario_en_turno: filtros.horario_turno ? filtros.horario_turno : \"\",\r\n                usuario_en_turno: value.usuario_en_turno ? value.usuario_en_turno : \"\",\r\n                numero_caja: filtros.numero_caja ? filtros.numero_caja : \"\",\r\n                fechaInicio: filtros.fechaInicio ? filtros.fechaInicio : \"\",\r\n                fechaFin: filtros.fechaFin ? filtros.fechaFin : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\trefetch();\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t);\r\n\r\n    const obtenerDatos = (e) => {  \r\n        setFiltros({...filtros, [e.target.name]: e.target.value.toString()});\r\n    };\r\n\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = (turnos) => {\r\n        datosExcel.splice(0, datosExcel.length);\r\n        for (let i = 0; i < turnos.length; i++) {\r\n            arrayExcel = { \r\n                fecha: turnos[i].fecha_movimiento,\r\n                nombre: turnos[i].usuario_en_turno.nombre,\r\n                numero_usuario: turnos[i].usuario_en_turno.numero_usuario,\r\n                fecha_entrada: turnos[i].fecha_entrada.completa,\r\n                fecha_salida: turnos[i].fecha_salida.completa,\r\n                hora_entrada: turnos[i].hora_entrada.completa,\r\n                hora_salida: turnos[i].hora_salida.completa,\r\n                horario_en_turno: turnos[i].horario_en_turno,\r\n                concepto: turnos[i].concepto,\r\n                caja: turnos[i].numero_caja,\r\n            }\r\n            datosExcel.push(arrayExcel);\r\n        };\r\n    };\r\n\r\n    if(data && cajas.loading  === false){\r\n\t\thistorialTurnos = data.obtenerFiltroTurnos;\r\n        agruparDatos(historialTurnos);\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPage error={error} />;\r\n\t}\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarFiltros = () => {\r\n        setFiltros([]);\r\n    };\r\n    \r\n    return(\r\n        <>\r\n        <Grid container>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename=\"Reporte de Turnos Usuarios\"\r\n            >\r\n                <ExcelSheet data={datosExcel} name={'Reporte de Turnos Usuarios'}>\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='Fecha Movimiento' value='fecha' />\r\n                    <ExcelColumn label='Fecha Entrada' value='fecha_entrada' />\r\n                    <ExcelColumn label='Fecha Salida' value='fecha_salida' />\r\n                    <ExcelColumn label='Hora Entrada' value='hora_entrada' />\r\n                    <ExcelColumn label='Hora Salida' value='hora_salida' />\r\n                    <ExcelColumn label='Horario en Turno' value='horario_en_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha inicio:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaInicio\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaInicio ? filtros.fechaInicio : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha fin:\r\n                        </Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            name=\"fechaFin\"\r\n                            variant=\"outlined\"\r\n                            type=\"date\"\r\n                            onChange={obtenerDatos}\r\n                            value={filtros.fechaFin ? filtros.fechaFin : \"\"}\r\n                        />\r\n                    </Box>\r\n                    <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                Usuario:\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario_en_turno\"\r\n                                value={filtros.usuario_en_turno ? filtros.usuario_en_turno : \"\"}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                            />\r\n                        </Box>\r\n                    </form>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Caja:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"numero_caja\"\r\n                                onChange={obtenerDatos}\r\n                                value={filtros.numero_caja ? filtros.numero_caja : \"\"}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {\r\n                                    cajas.data?.obtenerCajasSucursal?.map((caja) =>{\r\n                                        return(\r\n                                            <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                Caja {caja.numero_caja}\r\n                                            </MenuItem>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Horario de Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_turno\"\r\n                                value={filtros.horario_turno ? filtros.horario_turno : \"\"}\r\n                                onChange={obtenerDatos}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"70%\" display=\"flex\" justifyContent=\"center\" justifyItems=\"center\" alignItems=\"center\">\r\n                        <Box mt={2}>\r\n                            <Button\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                variant=\"contained\"\r\n                                onClick={limpiarFiltros}\r\n                            >\r\n                                Limpiar\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid> \r\n           \r\n        </Grid>    \r\n        <Grid item lg={12}>\r\n            <TablaTurnosFiltrados loading={loading} turnos={historialTurnos} />\r\n        </Grid>  \r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Nombre producto\", minWidth: 160 },\r\n  { label: \"Fecha de Compra\", minWidth: 160 },\r\n  { label: \"Almacen\", minWidth: 100 },\r\n  { label: \"Proveedor\", minWidth: 100 },\r\n  { label: \"M. pago\", minWidth: 90 },\r\n  { label: \"F. pago\", minWidth: 100 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    maxHeight: \"70vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaComprasFiltradas({ data }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.map((data, index) => {\r\n                const result = formaPago.filter(\r\n                  (res) => res.Value === data.forma_pago\r\n                );\r\n                let forma_pago = result[0];\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>{data.almacen.nombre_almacen}</TableCell>\r\n                    <TableCell>{data.proveedor.nombre_cliente}</TableCell>\r\n                    <TableCell>\r\n                      {data.compra_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${forma_pago.Value}-${forma_pago.Name}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${data.cantidad_total} - ${data.unidad}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`%${data.descuento_porcentaje} - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_REPORTE_COMPRAS = gql`\r\n  query obtenerProductoMovimientos(\r\n    $empresa: ID!\r\n    $sucursal: ID\r\n    $input: ObteneReportesCompras\r\n  ) {\r\n    obtenerProductoMovimientos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      id_compra\r\n      id_traspaso\r\n      id_producto\r\n      id_proveedor\r\n      id_almacen\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      proveedor {\r\n        _id\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      producto {\r\n        almacen_inicial {\r\n          almacen\r\n          cantidad\r\n          fecha_de_expiracion\r\n          id_almacen\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          granel\r\n          litros\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          cantidad\r\n          codigo_barras\r\n          id_producto\r\n          precio\r\n          unidad\r\n          unidad_principal\r\n          _id\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n      }\r\n      concepto\r\n      cantidad\r\n      cantidad_regalo\r\n      unidad_regalo\r\n      cantidad_total\r\n      iva_total\r\n      ieps_total\r\n      costo\r\n      descuento_porcentaje\r\n      descuento_precio\r\n      compra_credito\r\n      forma_pago\r\n      impuestos\r\n      mantener_precio\r\n      subtotal\r\n      total\r\n      medida {\r\n        id_medida\r\n        medida\r\n        tipo\r\n      }\r\n      color {\r\n        id_color\r\n        color\r\n        hex\r\n      }\r\n      unidad\r\n      id_unidad_venta\r\n      empresa\r\n      sucursal\r\n      usuario\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarCompras({ data }) {\r\n  const compras = data.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      almacen,\r\n      proveedor,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito,\r\n      costo,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_precio,\r\n      ieps_precio,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const forma_pago_filtrada = formaPago.filter(\r\n      (forma) => forma.Value === compra.forma_pago\r\n    );\r\n    const forma_pago = forma_pago_filtrada[0];\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito: compra_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      costo: `$${costo ? formatoMexico(costo) : 0}`,\r\n      descuento_porcentaje: `%${descuento_porcentaje}`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_precio: `$${ieps_precio ? formatoMexico(ieps_precio) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n        <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Unidad de Regalo\" value=\"unidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad de Regalo\" value=\"cantidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad Total\" value=\"cantidad_total\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"compra_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Costo\" value=\"costo\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_precio\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaComprasFiltradas from \"./TablaComprasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { OBTENER_REPORTE_COMPRAS } from \"../../../../gql/Compras/reporte_compras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarCompras from \"./ExportarCompras\";\r\n\r\nexport default function FiltrosCompras() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_REPORTE_COMPRAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        proveedor: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n      },\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerProductoMovimientos } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos refetch={refetch} data={obtenerProductoMovimientos} />\r\n        <TablaComprasFiltradas data={obtenerProductoMovimientos} />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    proveedor: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n  });\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      proveedor: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filter) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: filter,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Proveedor:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"proveedor\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, Clave o numero\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.proveedor}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1} display=\"flex\">\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarCompras data={data} />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\nimport FiltrosCompras from \"./FiltrosCompra\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCompras() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcPaid fontSize={100} />\r\n          </Box>\r\n          Reportes Compras\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Compras\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosCompras />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'F. Venta', minWidth: 100 },\r\n\t{ id: 'code', label: 'Producto', minWidth: 100 },\r\n\t{ id: 'code', label: 'P. de Compra', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Cantidad', minWidth: 100 },\r\n\t{ id: 'code', label: 'Total', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Provedor', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'Fomas', minWidth: 100 },\t\r\n\t{ id: 'code', label: 'M. de Pago', minWidth: 100 },\t\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaVentasFiltradas() {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            \r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcPaid } from 'react-icons/fc';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TablaVentasFiltradas from './TablaVentasFiltradas';\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesVentas() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg' alt=\"icono ventas\" style={{width: 100}} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Ventas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Ventas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>\r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaInicio\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fechaFin\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Clientes:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Metodos de Pago:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"tipo_producto\"\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        <MenuItem value=\"EFECTIVO\">Efectivo</MenuItem>\r\n                                        <MenuItem value=\"PUNTOS\">Puntos</MenuItem>\r\n                                        <MenuItem value=\"DEBITO\">T. Debito</MenuItem>\r\n                                        <MenuItem value=\"CREDITO\">T. Credito</MenuItem>\r\n                                        <MenuItem value=\"CHEQUES\">Cheques</MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Nombre Producto:\r\n                                </Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"provedor\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12}>\r\n                        <TablaVentasFiltradas />\r\n                    </Grid>\r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarTraspasos({ data }) {\r\n  const traspasos = data.map((traspaso) => {\r\n    const trasp =  {\r\n      producto: traspaso.producto.datos_generales.nombre_comercial,\r\n      cantidad: traspaso.cantidad,\r\n      fecha:\tformatoFechaCorta(traspaso.id_traspaso.fecha_registro),\r\n      concepto: traspaso.id_traspaso.concepto_traspaso.nombre_concepto,\r\n      almacen_origen: (traspaso.almacen_origen !== null) ? traspaso.almacen_origen.nombre_almacen : '',\r\n      almacen_destino:(traspaso.almacen_destino !== null) ? traspaso.almacen_destino.nombre_almacen : ''\r\n    } ;\r\n  \r\n    return trasp;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de traspasos\"\r\n    >\t\r\n\r\n      <ExcelSheet data={traspasos} name=\"Reporte de traspasos\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Almacén Origen\" value=\"almacen_origen\" />\r\n        <ExcelColumn label=\"Almacén Destino\" value=\"almacen_destino\" />\r\n        \r\n        \r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box} from '@material-ui/core';\r\nimport {\r\n  formatoFechaCorta,\r\n\r\n} from \"../../../../config/reuserFunctions\"; \r\n\r\nconst columns = [\r\n\t{ id: 'producto', label: 'Producto', minWidth: 200 },\r\n\t\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 50 },\r\n\t{ id: 'fecha', label: 'Fecha ', minWidth: 50 },\t\r\n\t{ id: 'concepto', label: 'Concepto ', minWidth: 100 },\r\n\t{ id: 'almacen_origen', label: 'Almacén Origen', minWidth: 100 },\t\r\n\t{ id: 'almacen_destino', label: 'Almacén Destino', minWidth: 100 },\t\r\n\r\n\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaAlmacenFiltradas({data}) {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                         <TableBody>\r\n\t\t\t\t\t\t\t{data.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<TableCell>{data.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{formatoFechaCorta(data.id_traspaso.fecha_registro)}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t{data.id_traspaso.concepto_traspaso.nombre_concepto}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_origen !== null) ? data.almacen_origen.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{(data.almacen_destino !== null) ? data.almacen_destino.nombre_almacen : ''}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}","import React, { useState,  Fragment } from 'react';\r\n\r\nimport { AppBar, Box, Button, Dialog, FormControl, \r\nGrid, MenuItem, Select, Slide, TextField, Toolbar, \r\nTypography } from '@material-ui/core';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { OBTENER_USUARIOS } from '../../../../gql/Catalogos/usuarios';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarTraspasos from \"./ExportarTraspasos\";\r\nimport TablaAlmacenFiltradas from './TablaAlmacenFiltradas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\n\r\nimport { OBTENER_ALMACENES, OBTENER_TRASPASOS  } from '../../../../gql/Almacenes/Almacen';\r\nimport { useDebounce } from 'use-debounce';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n    CircularProgress:{\r\n         width: '100%',\r\n        height: 200,\r\n        marginTop:100,\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesAlmacen() {\r\n\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\t\r\n    const [open, setOpen] = useState(false);\r\n    const [almacenOrigen, setAlmacenOrigen] = useState(null);\r\n    const [almacenDestino, setAlmacenDestino] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [inputFilter, setFilter] = useState({\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        producto: '',\r\n        fecha_inicio: '',\r\n        fecha_final: '',\r\n        usuario: ''\r\n    });\r\n\r\n    const [encargado, setEncargado] = useState('');\r\n    const [value] = useDebounce(inputFilter, 1000);\r\n\r\n    let almacenes = [];\r\n    let traspasos = [];\r\n    let usuarios = [];\r\n\r\n\r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    })\r\n    const traspasosAlmacenes = useQuery(OBTENER_TRASPASOS,{\r\n        variables:{\r\n            input: value\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n    });\t\r\n\t\r\n\r\n  /*   useEffect(() => {\r\n        try {\r\n            \r\n            traspasosAlmacenes.refetch({\r\n                  input: inputFilter\r\n            }) \r\n        } catch (error) {\r\n            console.log('traspasosAlmacenes',error)\r\n        }\r\n        \r\n    }, []); */\r\n    \r\n    const limpiarFiltros = () => {\r\n        try {\r\n            let filt = {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                producto: '',\r\n                fecha_inicio: '',\r\n                fecha_final: '',\r\n                usuario: ''\r\n            };\r\n          \r\n        \r\n            setFilter(filt);\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: filt\r\n                }\r\n            )\r\n            setEncargado('');\r\n            setAlmacenOrigen(null);\r\n            setAlmacenDestino(null);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            \r\n        }\r\n  \r\n\r\n  };\r\n    const handleClickOpen =()=>{setOpen(!open)};\r\n    \r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n     \r\n    const setDatosInput = (e) =>{\r\n      \r\n          let fil = {...inputFilter, [e.target.name]: e.target.value,almacen_destino:almacenDestino,almacen_origen : almacenOrigen}\r\n        setFilter(fil)\r\n    }\r\n    const setQueryAlmacenOrigen = (alm) =>{\r\n           \r\n        let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n        \r\n        if(alm._id !== ''){\r\n             setLoading(true);\r\n            let fil = {...inputFilter, almacen_origen : alm._id, almacen_destino: almDes}\r\n        \r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n           \r\n        }\r\n         setAlmacenOrigen(alm)\r\n          setLoading(false);\r\n    }\r\n     const setQueryAlmacenDestino = (alm) =>{\r\n        let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';  \r\n        if(alm._id !== ''){\r\n      \r\n            let fil = {...inputFilter, almacen_origen : almOri, almacen_destino : alm._id}\r\n            setLoading(true);\r\n            traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n            \r\n        }\r\n        \r\n        setAlmacenDestino(alm);\r\n         setLoading(false);\r\n    }\r\n    const setEncargadoInput = ( enc) =>{\r\n       try {\r\n            let almDes = (almacenDestino !== null ) ? almacenDestino._id : '';\r\n            let almOri = (almacenOrigen !== null ) ? almacenOrigen._id : '';\r\n            let encId = ( enc!== '' ) ? enc._id : ''; \r\n            let fil ={...inputFilter, usuario: encId, almacen_destino:almDes,almacen_origen : almOri};\r\n        \r\n        traspasosAlmacenes.refetch(\r\n                {\r\n                    input: fil\r\n                }\r\n            )\r\n         setEncargado(enc)  \r\n          setLoading(false);  \r\n       } catch (error) {\r\n           \r\n       }\r\n        \r\n    }\r\n\r\n    if(traspasosAlmacenes.data){\r\n       try {\r\n           \r\n            traspasos = traspasosAlmacenes.data.obtenerTraspasos;   \r\n       } catch (error) {\r\n           \r\n       }\r\n      \r\n       \r\n    }\r\n\r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg' \r\n                            alt=\"icono almacen\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Almacen\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Almacen\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    \r\n                    <Grid item lg={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha inicio:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_inicio\"\r\n                                    variant=\"outlined\"\r\n                                    value={inputFilter.fecha_inicio}\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha fin:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_final\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.fecha_final}\r\n                                />\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>Encargado</Typography>\r\n                                <Box display=\"flex\">\r\n                                    <Autocomplete\r\n                                        id=\"encargado\"\r\n                                        size=\"small\"\r\n                                        options={usuarios}\r\n                                       \r\n                                        getOptionLabel={(option) =>\r\n                                            option.nombre ? `${option.nombre}` : \"\"\r\n                                        }\r\n                                        fullWidth\r\n                                        renderInput={(params) => (\r\n                                            <TextField\r\n                                            {...params}\r\n                                            variant=\"outlined\"\r\n                                            InputProps={{\r\n                                                ...params.InputProps,\r\n                                                endAdornment: (\r\n                                                <Fragment>\r\n                                                  \r\n                                                    {params.InputProps.endAdornment}\r\n                                                </Fragment>\r\n                                                ),\r\n                                            }}\r\n                                            \r\n                                            />\r\n                                        )}\r\n                                        renderOption={(option) => (\r\n                                            <Fragment>\r\n                                            {`${option.nombre}`}\r\n                                            </Fragment>\r\n                                        )}\r\n                                        onChange={ (_, data) =>  setEncargadoInput(data)}\r\n                                        getOptionSelected={(option, value) =>\r\n                                            option.nombre === value.nombre\r\n                                        }\r\n             \r\n                                        value={(encargado.nombre) ? encargado: null }\r\n                                    />\r\n                                </Box>\r\n                            </Box>\r\n                             <Box width=\"100%\">\r\n                                <Typography>Producto:</Typography>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"producto\"\r\n                                    variant=\"outlined\"\r\n                                    placeholder=\"Nombre, código, clave...\"\r\n                                    onChange={(e) => setDatosInput(e)}\r\n                                    value={inputFilter.producto}\r\n                                />\r\n                            </Box>\r\n                           \r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen origen:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-origen\"\r\n                                        name=\"almacen_origen\"\r\n                                        onChange={(e) => setQueryAlmacenOrigen(e.target.value)}\r\n                                        value={(almacenOrigen !== null) ? almacenOrigen : ''} \r\n                                    >   \r\n                                       \r\n                                        {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                                {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                      \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Almacen destino:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    \r\n                                >\r\n                                    <Select\r\n                                        id=\"form-almacen-destino\"\r\n                                        name=\"almacen_destino\"\r\n                                        onChange={(e) => setQueryAlmacenDestino(e.target.value)}\r\n                                        value={(almacenDestino !== null) ? almacenDestino: ''} \r\n                                    >\r\n                                     \r\n                                          {almacenes.map((almacen) => (\r\n                                            <MenuItem key={almacen._id} value={almacen} >\r\n                                            {almacen.nombre_almacen}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                       \r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                           \r\n                        </div>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box mt={1} display=\"flex\">\r\n                                <Button\r\n                                color=\"primary\"\r\n                                startIcon={<ClearOutlined />}\r\n                                onClick={() => limpiarFiltros()}\r\n                                >\r\n                                Limpiar filtros\r\n                                </Button>\r\n                                <Box mx={1} />\r\n                                <ExportarTraspasos data= {traspasos} />\r\n                            </Box>\r\n                        </div>    \r\n                    </Grid> \r\n                    {\r\n                        (traspasosAlmacenes.loading || loading) ?\r\n                        <div className={classes.CircularProgress}>\r\n                        <CircularProgress/>\r\n                        </div>\r\n                        :\r\n                        <Grid item lg={12}>\r\n                         <TablaAlmacenFiltradas data={traspasos} />\r\n                        </Grid>\r\n                    }\r\n                 \r\n                    \r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, Grid, Typography} from '@material-ui/core';\r\nimport { OBTENER_CORTE_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport moment from 'moment';\r\nimport { useLazyQuery } from '@apollo/client';\r\n\r\nconst columns = [\r\n\t{label: 'Fecha Corte', minWidth: 100 },\r\n\t{label: 'Hora Corte', minWidth: 100 },\r\n\t{label: 'Usuario', minWidth: 100 },\r\n\t{label: 'Turno Horario', minWidth: 100 },\t\r\n\t{label: 'Caja', minWidth: 100 },\r\n\t{label: 'Sucursal', minWidth: 100 }\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: \"70vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function TablaCortesFiltradas({loading, cortes}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn (\r\n        <Box p={2}>\r\n            <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                    <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {columns.map((column) => (\r\n                                    <TableCell key={column.id} align=\"center\" style={{ minWidth: column.minWidth }}>\r\n                                        {column.label}\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{cortes.map((row) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RowsRender\r\n\t\t\t\t\t\t\t\t\t\tkey={row._id}\r\n\t\t\t\t\t\t\t\t\t\tcorte={row}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Box>\r\n\t);\r\n}\r\n\r\nfunction RowsRender({corte}) {\r\n\tconst [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst [obtenerCorte, { data, error, loading }] = useLazyQuery(\r\n\t\tOBTENER_CORTE_CAJA,\r\n\t\t{\r\n\t\t\tvariables: { \r\n\t\t\t\tsucursal: sesion.sucursal._id, \r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tinput: { \r\n\t\t\t\t\tusuario: sesion._id,\r\n\t\t\t\t\tcaja: corte.id_caja,\r\n\t\t\t\t\ttoken_turno_user: corte.token_turno_user,\r\n\t\t\t\t\tnumber_user: sesion.numero_usuario\r\n\t\t\t\t} \r\n\t\t\t},\r\n\t\t  fetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\r\n\tlet montos_sistema = [];\r\n\r\n\tif(data){\r\n\t\tmontos_sistema = data.obtenerCorteCaja.montos_en_sistema;\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t\tobtenerCorte();\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\trole=\"checkbox\"handleClickOpen\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={corte._id}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\">{corte.fecha_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.hora_salida.completa}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.usuario_en_turno.nombre}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.horario_en_turno}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.numero_caja}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">{corte.sucursal.nombre_sucursal}</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t>\r\n\t\t\t\t<InformacionCorteCaja corte={corte} montos_sistema={montos_sistema} loading={loading} />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Box p={2} display=\"flex\" flexDirection='row-reverse'>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tImprimir Ticket\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction InformacionCorteCaja({corte, montos_sistema, loading}) {\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n\treturn (\r\n\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"30vh\">\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h5\">\r\n\t\t\t\t\t\t<b>Reporte de Corte de Caja</b>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={1} textAlign=\"center\">\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t<b>Fecha y hora de Corte: </b>{moment(corte.fecha_movimiento).format('Do MMMM YYYY, h:mm:ss')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<Box p={2} display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Usuario: </b> {corte.usuario_en_turno.nombre}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>No. de usuario: </b>{corte.usuario_en_turno.numero_usuario}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Horario en turno: </b>{corte.horario_en_turno}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Numero de caja: </b>{corte.numero_caja}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box p={1}>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<b>Sucursal: </b>{corte.sucursal.nombre_sucursal}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CONCEPTO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">CAJERO</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">SISTEMA</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">DIFERENCIA</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EFECTIVO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_efectivo.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_efectivo}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_efectivo.monto - montos_sistema.monto_efectivo)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DEBITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_debito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_debito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_debito.monto - montos_sistema.monto_tarjeta_debito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TARJETA DE CREDITO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_tarjeta_credito.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_tarjeta_credito}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_tarjeta_credito.monto - montos_sistema.monto_tarjeta_credito)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO TRANSFERENCIAS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_transferencia.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_transferencia}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_transferencia.monto - montos_sistema.monto_transferencia)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN MONEDERO</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_monedero.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_monedero}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_monedero.monto - montos_sistema.monto_monedero)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CREDITOS</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_creditos.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_creditos}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_creditos.monto - montos_sistema.monto_creditos)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN CHEQUES</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_cheques.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_cheques}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_cheques.monto - montos_sistema.monto_cheques)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\"><b>MONTO EN VALE DE DESPENSA</b></TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${corte.montos_en_caja.monto_vales_despensa.monto}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">${montos_sistema.monto_vales_despensa}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t${( corte.montos_en_caja.monto_vales_despensa.monto - montos_sistema.monto_vales_despensa)}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}","import { Button, makeStyles } from '@material-ui/core'\r\nimport React, { useState } from 'react'\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\tfontSize: 40,\r\n\t\twidth: 40\r\n\t},\r\n    iconSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t}\r\n}));\r\n\r\nexport default function ExportExcel({historialCortes}) {\r\n    const [ datosExcel, setDatosExcel ] = useState([]);\r\n\r\n    const classes = useStyles();\r\n    let arrayExcel = [];\r\n\r\n    const agruparDatos = () => {\r\n       \r\n        \r\n        for (let i = 0; i < historialCortes.length; i++) {\r\n            arrayExcel = { \r\n                fecha: historialCortes[i].fecha_salida.completa,\r\n                hora_movimiento: historialCortes[i].hora_salida.completa,\r\n                horario_turno: historialCortes[i].horario_en_turno,\r\n                sucursal: historialCortes[i].sucursal.nombre_sucursal,\r\n                nombre: historialCortes[i].usuario_en_turno.nombre,\r\n                numero_usuario: historialCortes[i].usuario_en_turno.numero_usuario,\r\n                concepto: \"Corte Caja\",\r\n                caja: historialCortes[i].numero_caja,\r\n                monto_efectivo: historialCortes[i].montos_en_caja.monto_efectivo.monto , \r\n                monto_creditos: historialCortes[i].montos_en_caja.monto_creditos.monto , \r\n                monto_tarjeta_debito: historialCortes[i].montos_en_caja.monto_tarjeta_debito.monto , \r\n                monto_tarjeta_credito: historialCortes[i].montos_en_caja.monto_tarjeta_credito.monto , \r\n                monto_monedero: historialCortes[i].montos_en_caja.monto_monedero.monto , \r\n                monto_cheques: historialCortes[i].montos_en_caja.monto_cheques.monto , \r\n                monto_transferencia: historialCortes[i].montos_en_caja.monto_transferencia.monto ,\r\n                monto_vales_despensa: historialCortes[i].montos_en_caja.monto_vales_despensa.monto ,\r\n            };\r\n            setDatosExcel(arrayExcel);\r\n        };\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <ExcelFile\r\n                element={\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        aria-label=\"Guardar\"\r\n                        className={classes.iconSave}\r\n                        onClick={() => agruparDatos()}\r\n                    >\r\n                        <SaveIcon className={classes.margin} />\r\n                        Exportar\r\n                    </Button>   \r\n                }\r\n                filename={`Reporte de Historial de Cortes`}\r\n            >\r\n                <ExcelSheet data={datosExcel} name={`Reporte de Historial de Cortes`}>\r\n                    <ExcelColumn label='Usuario' value='nombre' />\r\n                    <ExcelColumn label='No. Usuario' value='numero_usuario' />\r\n                    <ExcelColumn label='Sucursal' value='sucursal' />\r\n                    <ExcelColumn label='Fecha Corte' value='fecha' />\r\n                    <ExcelColumn label='Hora Corte' value='hora_movimiento' />\r\n                    <ExcelColumn label='Horario Turno' value='horario_turno' />\r\n                    <ExcelColumn label='Concepto' value='concepto' />\r\n                    <ExcelColumn label='No. de Caja' value='caja' />\r\n                    <ExcelColumn label='M. en Efectivo' value='monto_efectivo' />\r\n                    <ExcelColumn label='M. en Creditos' value='monto_creditos' />\r\n                    <ExcelColumn label='M. en Tarjeta Debito' value='monto_tarjeta_debito' />\r\n                    <ExcelColumn label='M. en Tarjeta Credito' value='monto_tarjeta_credito' />\r\n                    <ExcelColumn label='M. en Monedero' value='monto_monedero' />\r\n                    <ExcelColumn label='M. en Cheques' value='monto_cheques' />\r\n                    <ExcelColumn label='M. en Transferencia' value='monto_transferencia' />\r\n                    <ExcelColumn label='M. en Vale Despensa' value='monto_vales_despensa' />\r\n                </ExcelSheet>\r\n            </ExcelFile>\r\n        </>\r\n    )\r\n}\r\n","import { AppBar, Box, Button, Dialog, FormControl, Grid, MenuItem, Select, Slide, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useState } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaComprasFiltradas from './TablaCortesFiltradas';\r\nimport ExportExcel from './ExportExcel';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS, OBTENER_CORTES_CAJA } from '../../../../gql/Cajas/cajas';\r\nimport { useDebounce } from 'use-debounce/lib';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n    margin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\ticonSave: {\r\n\t\tzIndex: 10,\r\n\t\tposition: 'fixed',\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(10)\r\n\t},\r\n}));\r\n\r\nexport default function ReportesCortes() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    const [ open, setOpen ] = useState(false);\r\n    const [ datosFiltro, setDatosFiltro ] = useState([]);\r\n    const [value] = useDebounce(datosFiltro, 500);\r\n\r\n    let cajas = [];\r\n    let historialCortes = [];\r\n\r\n    const cajasBase = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t}\r\n\t});\r\n\r\n    const { loading, data, error, refetch  }= useQuery( OBTENER_CORTES_CAJA,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                fecha_consulta: datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                numero_caja: datosFiltro.numero_caja ? parseInt(datosFiltro.numero_caja) : null\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    if(cajasBase.loading === false && loading === false){\r\n        cajas = cajasBase.data.obtenerCajasSucursal;\r\n        historialCortes = data.obtenerCortesDeCaja;\r\n    }\r\n\r\n    const handleClickOpen = () => {setOpen(!open)};\r\n\r\n    const obtenerDatos = (e) => { \r\n        setDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const filtrarProductos = (event) => {\r\n\t\tevent.preventDefault();\r\n        refetch();\r\n\t};\r\n    \r\n    const limpiarDatos = () => {\r\n        setDatosFiltro([]);\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 100}}\r\n                        />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tReportes Cortes de caja\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Grid container>\r\n                    <ExportExcel historialCortes={historialCortes} /> \r\n                    \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <div className={classes.formInputFlex}>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Fecha de corte:\r\n                                </Typography>\r\n                                <TextField \r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"fecha_consulta\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"date\"\r\n                                    onChange={obtenerDatos}\r\n                                    value={datosFiltro.fecha_consulta ? datosFiltro.fecha_consulta : \"\"}\r\n                                />\r\n                            </Box>\r\n                            <form onSubmit={filtrarProductos} style={{ display: 'flex', alignItems: 'center', width: \"100%\" }}>\r\n                                <Box width=\"100%\">\r\n                                    <Typography>\r\n                                        Usuario:\r\n                                    </Typography>\r\n                                    <TextField\r\n                                        fullWidth\r\n                                        size=\"small\"\r\n                                        name=\"usuario\"\r\n                                        variant=\"outlined\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n                                    />\r\n                                </Box>\r\n                            </form>\r\n                            <Box width=\"100%\">\r\n                                <Typography>\r\n                                    Caja:\r\n                                </Typography>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                >\r\n                                    <Select\r\n                                        id=\"form-producto-tipo\"\r\n                                        name=\"numero_caja\"\r\n                                        onChange={obtenerDatos}\r\n                                        value={datosFiltro.numero_caja ? datosFiltro.numero_caja : \"\"}\r\n                                    >\r\n                                        <MenuItem value=\"\">\r\n                                            <em>Selecciona uno</em>\r\n                                        </MenuItem>\r\n                                        {\r\n                                            cajas?.map((caja) =>{\r\n                                                return(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja.numero_caja}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                );\r\n                                            })\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Box>\r\n                            <Box \r\n                                width=\"100%\" \r\n                                display=\"flex\" \r\n                                justifyContent=\"center\" \r\n                                alignItems=\"center\"\r\n                                mt={2}\r\n                            >\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    onClick={limpiarDatos}\r\n                                >\r\n                                    Limpiar Filtro\r\n                                </Button>\r\n                            </Box>\r\n                        </div>\r\n                    </Grid> \r\n                    <Grid item lg={12} md={12} xs={12}>\r\n                        <TablaComprasFiltradas cortes={historialCortes} loading={loading} />\r\n                    </Grid>\r\n                </Grid>            \r\n\t\t\t</Dialog> \r\n        </>\r\n    )   \r\n}\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, Grid, MenuItem, Select, Slide, TextField, Typography } from '@material-ui/core';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_EGRESOS } from '../../../../gql/Tesoreria/egresos';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 170 },\r\n\t{ id: 'nombre', label: 'Usuario', minWidth: 170 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 170 },\r\n\t{ id: 'folioF', label: 'Folio Factura', minWidth: 170 },\r\n\t{ id: 'tipo', label: 'Tipo Compra', minWidth: 170 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\t\troot: {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '70vh'\r\n\t\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nexport default function ListaEgresos() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [datosFiltro, setDatosFiltro] = useState([]);\r\n\tconst [value] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n\tconst { loading, data, error, refetch  } = useQuery( OBTENER_HISTORIAL_EGRESOS,{\r\n\t\tvariables: {\r\n\t\t\tinput: {\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? (datosFiltro.tipo_movimiento === \"CREDITO\" ?  true : false) : null\r\n            },\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch]);\r\n\r\n\t\r\n\tlet historialEgresos = [];\r\n\r\n\tif(data){\r\n\t\thistorialEgresos = data.obtenerHistorialEgresos\r\n\t}\r\n\r\n\tconst obtenerDatos =(e)=>{\r\n\t\tsetDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n\tconst limpiarDatos = () => {\r\n\t\tsetDatosFiltro([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Inicio:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_inicio\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Fin:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_fin\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tTipo Egreso:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_movimiento\"\r\n\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"TODOS\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CONTADO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Contado\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CREDITO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Credito\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"center\" \r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={limpiarDatos}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLimpiar Filtro\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid> \r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historialEgresos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsEgresos row={row} loading={loading} key={index} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction RowsEgresos({row, loading}){\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t>\r\n\t\t\t\t<DialogCaracteristicas row={row}  />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={row.code}\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_egreso}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.nombre_usuario_creador}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.fecha_compra}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_factura}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.compra_credito === false ? \"Contado\" : \"Credito\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction DialogCaracteristicas ({row}) {\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={5} xs={12}>\r\n\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Fecha Compra: </b> {moment(row.fecha_compra).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio movimiento: </b> {row.folio_egreso}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Usuario: </b> {row.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Categoria: </b> {row.categoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Sub-Categoria: </b> {row.subCategoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio Factura: </b> {row.folio_factura}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Empresa: </b> {row.empresa_distribuidora}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Provedor: </b> {row.provedor}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Metodo de pago: </b> {row.metodo_pago}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Compra credito: </b> {row.compra_credito === false ? \"NO\" : \"Si\"}\r\n\t\t\t\t\t\t\t\t{row.compra_credito === false ? null : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Fecha Vencimiento: </b> {row.fecha_vencimiento}\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Saldo Pendiente: </b> {row.saldo_credito_pendiente}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={7} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\tProductos Adquiridos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Paper style={{width: '100%', height: '30vh'}}>\r\n\t\t\t\t\t\t\t\t<TableContainer style={{maxHeight: '100%'}}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANTIDAD\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPRODUCTO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP. UNITARIO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTOTAL\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t{row?.productos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableRow \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.cantidad_productos}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.producto}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.precio_unitario}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.total}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent='flex-end' p={1}> \r\n\t\t\t\t\t\t\t<Typography variant='h6'>\r\n\t\t\t\t\t\t\t\tTotal: ${formatoMexico(row.saldo_total)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</DialogContent>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Grid, IconButton, InputBase } from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nconst columns = [\r\n\t{ id: 'name', label: 'Name', minWidth: 170 },\r\n\t{ id: 'code', label: 'ISO\\u00a0Code', minWidth: 100 },\r\n\t{\r\n\t\tid: 'population',\r\n\t\tlabel: 'Population',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'size',\r\n\t\tlabel: 'Size\\u00a0(km\\u00b2)',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toLocaleString('en-US')\r\n\t},\r\n\t{\r\n\t\tid: 'density',\r\n\t\tlabel: 'Density',\r\n\t\tminWidth: 170,\r\n\t\talign: 'right',\r\n\t\tformat: (value) => value.toFixed(2)\r\n\t}\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n\tconst density = population / size;\r\n\treturn { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n\tcreateData('India', 'IN', 1324171354, 3287263),\r\n\tcreateData('China', 'CN', 1403500365, 9596961),\r\n\tcreateData('Italy', 'IT', 60483973, 301340),\r\n\tcreateData('United States', 'US', 327167434, 9833520),\r\n\tcreateData('Canada', 'CA', 37602103, 9984670),\r\n\tcreateData('Australia', 'AU', 25475400, 7692024),\r\n\tcreateData('Germany', 'DE', 83019200, 357578),\r\n\tcreateData('Ireland', 'IE', 4857000, 70273),\r\n\tcreateData('Mexico', 'MX', 126577691, 1972550),\r\n\tcreateData('Japan', 'JP', 126317000, 377973),\r\n\tcreateData('France', 'FR', 67022000, 640679),\r\n\tcreateData('United Kingdom', 'GB', 67545757, 242495),\r\n\tcreateData('Russia', 'RU', 146793744, 17098246),\r\n\tcreateData('Nigeria', 'NG', 200962417, 923768),\r\n\tcreateData('Brazil', 'BR', 210147125, 8515767)\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nexport default function ListaTransferencias() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = useState(14);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n\t\t\t\t\t<Box mr={5} minWidth=\"70%\">\r\n\t\t\t\t\t\t<Paper className={classes.rootBusqueda}>\r\n\t\t\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tplaceholder=\"Buscar transferencias...\"\r\n\t\t\t\t\t\t\t\t// onChange={(e) => setValues(e.target.value)}\r\n\t\t\t\t\t\t\t\t// onKeyPress={pressEnter}\r\n\t\t\t\t\t\t\t\t// value={values}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</div>\r\n\t\t<Box  p={2}>\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell \r\n                                                key={column.id} \r\n                                                align={column.align}\r\n                                            >\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\r\nimport {FcSurvey } from 'react-icons/fc';\r\n\r\nimport ListaEgresos from './ListaEgresos';\r\nimport ListaTransferencias from './ListaTransferencias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ReportesTesoreria() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ventana, setVentana] = useState('');\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                        <FcSurvey style={{fontSize: 100}}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Tesoreria\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\t id=\"customized-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('egresos')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Egresos\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('transferencias')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Transferencias\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistotorial de {ventana}\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tventana === 'egresos' ? (\r\n\t\t\t\t\t\t\t<ListaEgresos />\r\n\t\t\t\t\t\t) : ventana === 'transferencias' ?(\r\n\t\t\t\t\t\t\t<ListaTransferencias />\t\t\t\r\n\t\t\t\t\t\t) :(\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport Cajas from './Cajas/Cajas';\r\nimport ReportesTurnosUsuarios from './TurnosUsuarios/ReportesTurnosUsuarios';\r\nimport ReportesCompras from './Compras/ReportesCompras';\r\nimport ReportesVentas from './Ventas/ReportesVentas';\r\nimport ReportesAlmacen from './Almacenes/ReportesAlmacen';\r\nimport ReportesCortes from './Cortes/ReportesCortes';\r\nimport ReportesTesoreria from './Tesoreria/Reporte_Tesoreria';\r\n\r\nexport default function Reportes() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justify=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_historial_cajas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_turnos.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTurnosUsuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_compras.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCompras />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_ventas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesVentas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.rerporte_almacen.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_corte_caja.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCortes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_tesoreria.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTesoreria />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { FcShop, FcPaid, FcSurvey, FcNews } from \"react-icons/fc\";\r\nimport { Toolbar, Box, Tab, Tabs, AppBar } from \"@material-ui/core\";\r\nimport Empresa from \"./Empresa/Empresa\";\r\nimport Compras from \"./Compras/Compras\";\r\nimport Catalogos from \"./Catalogos/Catalogos\";\r\nimport IndexTesoreria from \"./Tesoreria/IndexTesoreria\";\r\nimport Facturacion from \"./Facturacion/Facturacion\";\r\nimport Almacenes from \"./Almacenes/Almacenes\";\r\nimport { withRouter } from \"react-router\";\r\nimport Reportes from \"./Reportes/Reportes\";\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} my={6} minHeight=\"50vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  iconSvgVenta: {\r\n    width: 90,\r\n  },\r\n}));\r\n\r\nfunction AdminInicio(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Toolbar />\r\n      <Box>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            /* centered */ variant=\"scrollable\"\r\n            scrollButtons=\"on\"\r\n          >\r\n            <Tab\r\n              label=\"Mi empresa\"\r\n              icon={<FcShop className={classes.icon} />}\r\n              {...a11yProps(0)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Catalogos\"\r\n              icon={<FcNews className={classes.icon} />}\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              label=\"Almacenes\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/almacen.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Compras\"\r\n              icon={<FcPaid className={classes.icon} />}\r\n              {...a11yProps(3)}\r\n            />\r\n            <Tab\r\n              label=\"Ventas\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart-add.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n              onClick={() => props.history.push(\"/ventas/venta-general\")}\r\n            />\r\n            <Tab\r\n              label=\"Reportes\"\r\n              icon={<FcSurvey className={classes.icon} />}\r\n              {...a11yProps(5)}\r\n            />\r\n            <Tab\r\n              label=\"Tesoreria\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/money.svg\"\r\n                  alt=\"icono money\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(6)}\r\n            />\r\n            <Tab\r\n              label=\"Facturación\"\r\n              icon={\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/factura.svg\"\r\n                  alt=\"icono factura\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(7)}\r\n            />\r\n          </Tabs>\r\n        </AppBar>\r\n        <SwipeableViews\r\n          axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\r\n          index={value}\r\n          onChangeIndex={handleChangeIndex}\r\n        >\r\n          <TabPanel value={value} index={0}>\r\n            <Empresa />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <Catalogos />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <Almacenes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={3}>\r\n            <Compras />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={4}>\r\n            {/* ventas */}\r\n          </TabPanel>\r\n          <TabPanel value={value} index={5}>\r\n            <Reportes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={6}>\r\n            <IndexTesoreria />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={7}>\r\n            <Facturacion />\r\n          </TabPanel>\r\n        </SwipeableViews>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AdminInicio);\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Avatar, Box, Button, Typography, Toolbar, AppBar } from '@material-ui/core';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappbar: {\r\n\t\tbackgroundColor: theme.palette.navbar,\r\n        color: grey[800]\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t}\r\n}));\r\n\r\nfunction NavegacionAdmin(props) {\r\n\tconst classes = useStyles();\r\n\tconst token = localStorage.getItem('sesionCafi');\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tlet usuario;\r\n\t\r\n\tif (token !== null) usuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tlocalStorage.removeItem('ListaEnEspera');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<AppBar position=\"fixed\" className={classes.appbar} elevation={0}>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={usuario.imagen} />\r\n\t\t\t\t\t<Box className={classes.title}>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Bienvenido {`${usuario.nombre}`}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <Button\r\n\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\tto=\"/home\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\tstartIcon={<HomeIcon />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tInicio\r\n\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t{sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tTURNO ACTIVO\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tstartIcon={<PowerSettingsNewIcon />}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={signOut}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCerrar sesión\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default withRouter(NavegacionAdmin)","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\t// backgroundColor: theme.palette.navbar,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerColor:{\r\n\t\theight: '100%',\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.navbar\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\theight: '100%'\r\n\t},\r\n\tnavigationTop:{\r\n\t\theight: '100%'\r\n\t},\r\n\ticonSizeSuperior: {\r\n\t\tfontSize: 30,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n\ticonSizeInferior: {\r\n\t\tfontSize: 50,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondInferior: {\r\n\t\twidth: 40,\r\n\t},\r\n\ticonSizeSecondInferiorGrande: {\r\n\t\twidth: 100\r\n\t},\r\n\ticonSizeInferiorGrande:{\r\n\t\tfontSize: 110,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tavatar: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tmarginRight: theme.spacing(1)\r\n\t},\r\n\tborderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot:{\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    rootPrecioProductos:{\r\n        minHeight: '40vh',\r\n    },\r\n    containerImage:{\r\n        maxWidth: 150,\r\n        maxHeight: 150,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    imagen:{\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootBusquedaProductos: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootFecha: {\r\n        height: 40,\r\n        maxWidth: 150,\r\n\t\tdisplay: 'flex',\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n\tformInput: {\r\n\t\t// margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    iconSizeDialogs:{\r\n        width: 80,\r\n    },\r\n    iconSizeDialogsPequeno:{\r\n        width: 50,\r\n    },\r\n    containerImagenesProducto:{\r\n        maxHeight: 300,\r\n        maxWidth: 300,\r\n        display: 'flex',\r\n        justifyItems: 'center',\r\n        alignContent: 'center',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    imagenProducto:{\r\n        height: '100%',\r\n        width: '100%'\r\n    },\r\n    borderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default useStyles","import React, { createContext, useState } from 'react';\r\n\r\nexport const VentasContext = createContext();\r\n\r\nexport const VentasProvider = ({ children }) => {\r\n    const [DatosVentasActual, setDatosVentasActual] = useState({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n        // tipo_cambio: {},\r\n      });\r\n    const [datosProductoVentas, setDatosProductoVentas] = useState(\r\n        {\r\n            _id: null,\r\n            cantidad: null,\r\n            codigo_barras: null,\r\n            concepto: null,\r\n            default: null,\r\n            descuento: null,\r\n            descuento_activo: null,\r\n            id_producto: {},\r\n            precio: null,\r\n            unidad: null,\r\n            unidad_principal: null\r\n        }\r\n    );\r\n    \r\n    const [productosVentas, setProductosVentas] = useState([]);\r\n    const [datosVentas, setDatosVentas] = useState(\r\n        {\r\n            productos: [],\r\n            cliente: {},\r\n            subtotal: 0,\r\n            impuestos: 0,\r\n            total: 0,\r\n            usuario: {}\r\n        }\r\n    );\r\n\r\n    const [ productoCambioPrecio, setProductoCambioPrecio ] = useState({});\r\n    const [ precioSelectProductoVenta, setPrecioSelectProductoVenta ] = useState([]);\r\n    const [ clientesVentas, setClientesVentas ] = useState([]);\r\n    const [ turnoActivo, setTurnoActivo ] = useState();\r\n    const [ ubicacionTurno, setUbicacionTurno ] = useState('');\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ alert, setAlert ] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ abrirTurnosDialog, setAbrirTurnosDialog ] = useState(false);\r\n    const [ updateClientVenta, setUpdateClientVenta ] = useState(false);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // const [precioSeleccionadoTabla, setPrecioSeleccionadoTabla] = useState(false);\r\n\r\n    const [updateTablaVentas, setUpdateTablaVentas] = useState(false);\r\n    const [openBackDrop, setOpenBackDrop] = useState(false);\r\n\r\n\treturn (\r\n\t\t<VentasContext.Provider value={\r\n            { \r\n                alert, \r\n                setAlert,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                datosProductoVentas,\r\n                setDatosProductoVentas,\r\n                productosVentas,\r\n                setProductosVentas,\r\n                datosVentas,\r\n                setDatosVentas,\r\n                abrirTurnosDialog, \r\n                setAbrirTurnosDialog,\r\n                setUpdateClientVenta,\r\n                updateClientVenta,\r\n                setProductoCambioPrecio,\r\n                productoCambioPrecio,\r\n                setPrecioSelectProductoVenta,\r\n                precioSelectProductoVenta,\r\n                setUpdateTablaVentas,\r\n                updateTablaVentas,\r\n                setOpen,\r\n                open,\r\n                clientesVentas, \r\n                setClientesVentas,\r\n                turnoActivo, \r\n                setTurnoActivo,\r\n                ubicacionTurno, \r\n                setUbicacionTurno,\r\n                DatosVentasActual, setDatosVentasActual,\r\n                // precioSeleccionadoTabla,\r\n                // setPrecioSeleccionadoTabla\r\n                setOpenBackDrop,\r\n                openBackDrop,\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</VentasContext.Provider>\r\n\t);\r\n};","import React, { useContext, useState } from 'react';\r\nimport { Box, Button, CircularProgress,  Dialog, DialogActions, \r\n    DialogContent, Divider, FormControl, Grid,  MenuItem, \r\n    Select, Slide, TextField, Typography } \r\nfrom '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\r\nimport { OBTENER_CONTABILIDAD } from '../../../gql/Catalogos/contabilidad';\r\nimport { CREAR_HISTORIAL_CAJA, OBTENER_PRE_CORTE_CAJA } from '../../../gql/Cajas/cajas';\r\nimport useStyles from '../styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DepositoRetiroCaja() {\r\n    const turnoEnCurso =JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const [ CrearHistorialCaja ] = useMutation(CREAR_HISTORIAL_CAJA);\r\n\r\n    moment.locale('es');\r\n    const classes = useStyles();\r\n\r\n    const { setAlert } = useContext(VentasContext);\r\n    const [open, setOpen] = useState(false);\r\n    const [cargando, setCargando] = useState(false);\r\n    const [movimiento, setMovimiento] = useState('DEPOSITO');\r\n    const [datosMovimiento, setDatosMovimiento] = useState([]);\r\n\r\n\tconst { loading, data } = useQuery(OBTENER_CONTABILIDAD, {\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n    const input = { \r\n        horario_en_turno: \"ABRIR TURNO\",\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        id_usuario: sesion._id,\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n    };\r\n\r\n    const preCorteDeCaja = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n        variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id, input: input},\r\n    });\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n        preCorteDeCaja.refetch();\r\n\t};\r\n\r\n    var dineroEnCaja = 0;\r\n    \r\n    if(!data || !preCorteDeCaja.data){\r\n        return null;\r\n    } else{\r\n        dineroEnCaja = preCorteDeCaja.data.obtenerPreCorteCaja.monto_efectivo_precorte;\r\n    }\r\n\r\n    if (loading || cargando || preCorteDeCaja.loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 68){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    const obtenerDatos = (e) =>{\r\n        setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const enviarDatos = async () => {\r\n        setCargando(true);\r\n        try {\r\n            if(!turnoEnCurso && sesion?.turno_en_caja_activo === false ){\r\n                setCargando(false);\r\n                setAlert({\r\n                    message: `Por el momento no hay ningun turno activo.`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }else{\r\n                if(!datosMovimiento.tipo_movimiento ||\r\n                    !datosMovimiento.monto_efectivo ||\r\n                    !datosMovimiento.concepto\r\n                ){\r\n                    setCargando(false);\r\n                    setAlert({\r\n                        message: `Por favor complete los datos.`,\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                }else{\r\n                    if(datosMovimiento.tipo_movimiento === \"RETIRO\" && dineroEnCaja <  parseFloat(datosMovimiento.monto_efectivo)){\r\n                        setCargando(false);\r\n                        setAlert({\r\n                            message: 'Lo sentimos no hay dinero suficiente en la caja para esta acción.',\r\n                            status: \"error\",\r\n                            open: true,\r\n                        });\r\n                        return null;\r\n                    }\r\n                    const input = {\r\n                        tipo_movimiento: datosMovimiento.tipo_movimiento,\r\n                        concepto: datosMovimiento.concepto,\r\n                        numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n                        id_Caja: turnoEnCurso.id_caja,\r\n                        horario_turno: turnoEnCurso.horario_en_turno,\r\n                        rol_movimiento: 'CAJA',\r\n                        hora_moviento: {\r\n                            hora: moment().format('hh'),\r\n                            minutos: moment().format('mm'),\r\n                            segundos: moment().format('ss'),\r\n                            completa: moment().format('HH:mm:ss')\r\n                        },\r\n                        fecha_movimiento: {\r\n                            year: moment().format('YYYY'),\r\n                            mes: moment().format('DD'),\r\n                            dia: moment().format('MM'),\r\n                            no_semana_year: moment().week().toString(),\r\n                            no_dia_year: moment().dayOfYear().toString(),\r\n                            completa: moment().locale('es-mx').format()\r\n                        },\r\n                        id_User: sesion._id,\r\n                        numero_usuario_creador: sesion.numero_usuario,\r\n                        nombre_usuario_creador: sesion.nombre,\r\n                        montos_en_caja: {\r\n                            monto_efectivo: {\r\n                                monto: parseFloat(datosMovimiento.monto_efectivo),\r\n                                metodo_pago: \"01\"\r\n                            },\r\n                            monto_tarjeta_debito: {\r\n                                monto: 0,\r\n                                metodo_pago: \"28\"\r\n                            },\r\n                            monto_tarjeta_credito: {\r\n                                monto: 0,\r\n                                metodo_pago: \"04\"\r\n                            },\r\n                            monto_creditos: {\r\n                                monto: 0,\r\n                                metodo_pago: \"99\"\r\n                            },\r\n                            monto_monedero: {\r\n                                monto: 0,\r\n                                metodo_pago: \"05\"\r\n                            },\r\n                            monto_transferencia: {\r\n                                monto: 0,\r\n                                metodo_pago: \"03\"\r\n                            },\r\n                            monto_cheques: {\r\n                                monto: 0,\r\n                                metodo_pago: \"02\"\r\n                            },\r\n                            monto_vales_despensa: {\r\n                                monto: 0,\r\n                                metodo_pago: \"08\"\r\n                            }\r\n                        },\r\n                        empresa: sesion.empresa._id,\r\n                        sucursal: sesion.sucursal._id\r\n                    };\r\n                    await CrearHistorialCaja({\r\n                        variables: {\r\n                            empresa: sesion.empresa._id,\r\n                            sucursal: sesion.sucursal._id,\r\n                            input\r\n                        }\r\n                    });\r\n                    setAlert({\r\n                        message: `Registro de movimiento exitoso.`,\r\n                        status: \"success\",\r\n                        open: true,\r\n                    });\r\n                    handleClickOpen();\r\n                    setCargando(false);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setCargando(false);\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n    const handleAlignment = (event, newAlignment) => {\r\n        setMovimiento(newAlignment);\r\n        setDatosMovimiento({...datosMovimiento, tipo_movimiento: newAlignment})\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={() =>{handleClickOpen();}}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 20}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Deposito/Retiro Caja</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + D</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\t\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box \r\n                            display=\"flex\" \r\n                            textAlign=\"center\" \r\n                        >\r\n                            <Box\r\n                                display=\"flex\" \r\n                                justifyContent=\"center\"\r\n                                flexGrow={1} \r\n                            >\r\n                                <Box>\r\n                                    <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register2.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                                </Box>\r\n                                <Box m={2} >\r\n                                    <Divider orientation=\"vertical\" />\r\n                                </Box>\r\n                                <Box mt={1} >\r\n                                    <Box>\r\n                                        <Typography variant=\"h6\">\r\n                                            Deposito / Retiro Caja\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box display=\"flex\" textAlign=\"right\">\r\n                                        <Box textAlign=\"right\">\r\n                                            <Typography variant=\"caption\">\r\n                                                {moment().format('MM/DD/YYYY')}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>{moment().format('h:mm')} hrs.</b> \r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>Caja: </b>{turnoEnCurso?.numero_caja}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                    <CloseIcon />\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            {sesion.turno_en_caja_activo === true ? (\r\n                                <>\r\n                                <div className={classes.formInputFlex}>\r\n                                    {/* <Box width=\"100%\">\r\n                                        <Typography>\r\n                                            Movimiento\r\n                                        </Typography>\r\n                                        <FormControl\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                            size=\"small\"\r\n                                        >\r\n                                            <Select\r\n                                                id=\"form-producto-tipo\"\r\n                                                name=\"tipo_movimiento\"\r\n                                                onChange={obtenerDatos}\r\n                                            >\r\n                                                <MenuItem value=\"\">\r\n                                                    <em>Selecciona uno</em>\r\n                                                </MenuItem>\r\n                                                <MenuItem value=\"DEPOSITO\">Deposito</MenuItem>\r\n                                                <MenuItem value=\"RETIRO\">Retiro</MenuItem>\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box> */}\r\n                                    <Box width=\"100%\" textAlign=\"center\">\r\n                                        <ToggleButtonGroup \r\n                                            onChange={handleAlignment}\r\n                                            value={movimiento}\r\n                                            exclusive \r\n                                        >\r\n                                            <ToggleButton \r\n                                                value=\"DEPOSITO\" \r\n                                            >\r\n                                                <Box p={1}>\r\n                                                    <Typography variant=\"h4\">\r\n                                                        <b>DEPOSITO</b>\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                            </ToggleButton>\r\n                                            <ToggleButton \r\n                                                value=\"RETIRO\"\r\n                                            >\r\n                                                <Box p={1}>\r\n                                                    <Typography variant=\"h4\">\r\n                                                        <b>RETIRO</b>\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                            </ToggleButton>\r\n                                        </ToggleButtonGroup>\r\n                                    </Box>\r\n                                </div>\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box width=\"100%\">\r\n                                        <Typography>Monto:</Typography>\r\n                                        <Box display=\"flex\">\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                size=\"small\"\r\n                                                type=\"number\"\r\n                                                name=\"monto_efectivo\"\r\n                                                onChange={obtenerDatos}\r\n                                                id=\"form-producto-codigo-barras\"\r\n                                                variant=\"outlined\"\r\n                                            />\r\n                                        </Box>\r\n                                    </Box>\r\n                                </div>\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box width=\"100%\">\r\n                                        <Typography>\r\n                                            Concepto de Movimiento:\r\n                                        </Typography>\r\n                                        <FormControl\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                            size=\"small\"\r\n                                        >\r\n                                            <Select\r\n                                                id=\"form-producto-tipo\"\r\n                                                onChange={obtenerDatos}\r\n                                                name=\"concepto\"\r\n                                            >\r\n                                                <MenuItem value=\"\">\r\n                                                    <em>Selecciona uno</em>\r\n                                                </MenuItem>\r\n                                                {data?.obtenerContabilidad.map((concepto)=> {\r\n                                                    return(\r\n                                                        <MenuItem value={concepto.nombre_servicio}>{concepto.nombre_servicio}</MenuItem>\r\n                                                    )\r\n                                                })}\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                </div>\r\n                                </>\r\n                            ) : (\r\n                                <Box textAlign=\"center\" p={2}>\r\n                                    <Typography variant=\"h6\"> \r\n                                        <b>Por el momento no hay un turno en sesión</b> \r\n                                    </Typography>\r\n                                </Box>\r\n                            )}\r\n                        </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Guardar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n};\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button,\r\n        DialogActions, DialogContent,  \r\n        FormControl, Grid, MenuItem, \r\n        Select, TextField, Typography \r\n    } from '@material-ui/core'\r\nimport BackdropComponent from '../../../components/Layouts/BackDrop'\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { OBTENER_CAJAS } from '../../../gql/Cajas/cajas';\r\nimport { REGISTRAR_TURNOS } from '../../../gql/Ventas/abrir_cerrar_turno';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nmoment.locale('es');\r\n\r\nexport default function AbrirTurno({handleClickOpen, loading, type, setLoading}) {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const [ CrearRegistroDeTurno ] = useMutation(REGISTRAR_TURNOS);\r\n    const { setTurnoActivo, setAlert } = useContext(VentasContext);\r\n\r\n    const [ error, setError ] = useState(false);\r\n    const [ abrirTurno, setAbrirTurno ] = useState([]);\r\n    const [ numeroCaja, setNumeroCaja ] = useState('');\r\n    \r\n    const classes = useStyles();\r\n    let obtenerCajasSucursal = [];\r\n\r\n    const cajas = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    const obtenerTurno = (e) => {\r\n        setAbrirTurno({...abrirTurno, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    if(cajas.data){\r\n\t\tobtenerCajasSucursal = cajas.data.obtenerCajasSucursal;\r\n\t};\r\n\r\n    let arraySesion = {\r\n        accesos: sesion.accesos,\r\n        email: sesion.email,\r\n        empresa: sesion.empresa,\r\n        estado: sesion.estado,\r\n        exp: sesion.exp,\r\n        iat: sesion.iat,\r\n        imagen: sesion.imagen,\r\n        nombre: sesion.nombre,\r\n        numero_usuario: sesion.numero_usuario,\r\n        sucursal: sesion.sucursal,\r\n        telefono: sesion.telefono,\r\n        turno_en_caja_activo: true, \r\n        _id: sesion._id,\r\n    };\r\n\r\n    useEffect(() => {\r\n        cajas.refetch();\r\n    }, [loading]);\r\n\r\n    const enviarDatos = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if(!abrirTurno.turno_en_curso ||\r\n                !abrirTurno.caja_elegida ||\r\n                !abrirTurno.monto_abrir\r\n            ){\r\n                setError(true);\r\n                setLoading(false);\r\n                setAlert({\r\n                    message: `Por favor complete los datos obligatorios`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return;\r\n            }else{\r\n                const input = {\r\n                    horario_en_turno: abrirTurno.turno_en_curso,\r\n                    concepto: \"ABRIR TURNO\",\r\n                    numero_caja: numeroCaja.toString(),\r\n                    comentarios: abrirTurno.comentarios,\r\n                    id_caja: abrirTurno.caja_elegida,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    id_usuario: sesion._id,\r\n                    usuario_en_turno: {\r\n                        nombre: sesion.nombre,\r\n                        telefono: sesion.telefono,\r\n                        numero_usuario: sesion.numero_usuario.toString(),\r\n                        email: sesion.email,\r\n                    },\r\n                    hora_entrada: {\r\n                        hora: moment().format('hh'),\r\n                        minutos: moment().format('mm'),\r\n                        segundos: moment().format('ss'),\r\n                        completa: moment().format('HH:mm:ss')\r\n                    },\r\n                    hora_salida: {\r\n                        hora: \"\",\r\n                        minutos: \"\",\r\n                        segundos: \"\",\r\n                        completa: \"\"\r\n                    },\r\n                    fecha_entrada:{\r\n                        year: moment().format('YYYY'),\r\n                        mes: moment().format('MM'),\r\n                        dia: moment().format('DD'),\r\n                        no_semana_year: moment().week().toString(),\r\n                        no_dia_year: moment().dayOfYear().toString(),\r\n                        completa: moment().format(\"YYYY-MM-DD\")\r\n                    },\r\n                    fecha_salida:{\r\n                        year: \"\",\r\n                        mes: \"\",\r\n                        dia: \"\",\r\n                        no_semana_year: \"\",\r\n                        no_dia_year: \"\",\r\n                        completa: \"\"\r\n                    },\r\n                    fecha_movimiento: moment().locale('es-mx').format(),\r\n                    montos_en_caja: {\r\n                        monto_efectivo: {\r\n                            monto: parseFloat(abrirTurno.monto_abrir),\r\n                            metodo_pago: \"01\"\r\n                        },\r\n                        monto_tarjeta_debito: {\r\n                            monto: 0,\r\n                            metodo_pago: \"28\"\r\n                        },\r\n                        monto_tarjeta_credito: {\r\n                            monto: 0,\r\n                            metodo_pago: \"04\"\r\n                        },\r\n                        monto_creditos: {\r\n                            monto: 0,\r\n                            metodo_pago: \"99\"\r\n                        },\r\n                        monto_monedero: {\r\n                            monto: 0,\r\n                            metodo_pago: \"05\"\r\n                        },\r\n                        monto_transferencia: {\r\n                            monto: 0,\r\n                            metodo_pago: \"03\"\r\n                        },\r\n                        monto_cheques: {\r\n                            monto: 0,\r\n                            metodo_pago: \"02\"\r\n                        },\r\n                        monto_vales_despensa: {\r\n                            monto: 0,\r\n                            metodo_pago: \"08\"\r\n                        },\r\n                    }\r\n                };\r\n\r\n                const variableTurnoAbierto = await CrearRegistroDeTurno({\r\n                    variables: {\r\n                        activa: true,\r\n                        input\r\n                    }\r\n                });\r\n\r\n                if(variableTurnoAbierto.data.crearRegistroDeTurno === null){\r\n                    setLoading(false);\r\n                    cajas.refetch();\r\n                    setAlert({\r\n                        message: `Lo sentimos esta caja ya esta en uso`,\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                }else{\r\n                    localStorage.setItem('turnoEnCurso', JSON.stringify(variableTurnoAbierto.data.crearRegistroDeTurno));\r\n                    localStorage.setItem('sesionCafi', JSON.stringify(arraySesion));\r\n                    setTurnoActivo(true);\r\n                    setAlert({\r\n                        message: `Turno abierto con exito`,\r\n                        status: \"success\",\r\n                        open: true,\r\n                    });\r\n                    cajas.refetch();\r\n                    if (type !== \"FRENTE\") {\r\n                        handleClickOpen();\r\n                    };\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setLoading(false);\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            if (type !== \"FRENTE\") {\r\n                handleClickOpen();\r\n            }\r\n        }\r\n    };\r\n\r\n    if (cajas.loading) \r\n\treturn (\r\n        <BackdropComponent loading={loading} />\r\n\t\t// <Box\r\n\t\t// display=\"flex\"\r\n\t\t// flexDirection=\"column\"\r\n\t\t// justifyContent=\"center\"\r\n\t\t// alignItems=\"center\"\r\n\t\t// height=\"80vh\"\r\n\t\t// >\r\n\t\t// \t<CircularProgress />\r\n\t\t// </Box>\r\n\t);\r\n\r\n    return (\r\n        <div>\r\n            <DialogContent>\r\n                <Grid>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography> Empleado:</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"nombre_usuario\"\r\n                                    onChange={obtenerTurno}\r\n                                    disabled={true}\r\n                                    value={sesion ? sesion.nombre : ''}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                <span className=\"obligatorio\">* </span>Turno:\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                disabled={turnoEnCurso ? true : false}\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"turno_en_curso\"\r\n                                    onChange={obtenerTurno}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                    <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>\r\n                                <span className=\"obligatorio\">* </span>Caja:\r\n                            </Typography>\r\n                            <FormControl\r\n                                variant=\"outlined\"\r\n                                disabled={turnoEnCurso ? true : false}\r\n                                fullWidth\r\n                                size=\"small\"\r\n                            >\r\n                                <Select\r\n                                    id=\"form-producto-tipo\"\r\n                                    name=\"caja_elegida\"\r\n                                    onChange={obtenerTurno}\r\n                                >\r\n                                    <MenuItem value=\"\">\r\n                                        <em>Selecciona uno</em>\r\n                                    </MenuItem>\r\n                                    {\r\n                                        obtenerCajasSucursal.map((caja) =>{\r\n                                            return(\r\n                                                caja.activa === true ? null :(\r\n                                                    <MenuItem key={caja.numero_caja} value={caja._id} onClick={() => setNumeroCaja(caja.numero_caja)}>\r\n                                                        Caja {caja.numero_caja}\r\n                                                    </MenuItem>\r\n                                                )\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Box>\r\n                        <Box width=\"100%\">\r\n                            <Typography> <span className=\"obligatorio\">* </span>Monto para abrir:</Typography>\r\n                            <Box display=\"flex\" className={classes.input}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"monto_abrir\"\r\n                                    inputProps={{min: 0}}\r\n                                    type=\"number\"\r\n                                    onChange={obtenerTurno}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography> Comentarios:</Typography>\r\n                            <Box display=\"flex\">\r\n                                <TextField\r\n                                    fullWidth\r\n                                    size=\"small\"\r\n                                    name=\"comentarios\"\r\n                                    multiline\r\n                                    rows={5}\r\n                                    onChange={obtenerTurno}\r\n                                    id=\"form-producto-codigo-barras\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Box display=\"flex\" alignItems='flex-end'>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Guardar\r\n                    </Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useState } from 'react'\r\nimport useStyles from '../styles';\r\nimport { Box,  Button,  DialogActions, \r\n        DialogContent,  FormControl, \r\n        Grid, MenuItem, Select, \r\n        TextField, Typography \r\n    } from '@material-ui/core'\r\nimport { REGISTRAR_TURNOS } from '../../../gql/Ventas/abrir_cerrar_turno';\r\n\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { useMutation } from '@apollo/client';\r\nimport { withRouter } from 'react-router-dom';\r\nmoment.locale('es');\r\n\r\nfunction  CerrarTurno(props) {\r\n    const { handleClickOpen, setLoading } = props;\r\n    const [ CrearRegistroDeTurno ] = useMutation(REGISTRAR_TURNOS);\r\n    const { setAlert, setTurnoActivo, ubicacionTurno } = useContext(VentasContext);\r\n    const [ error, setError] = useState(false);\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const classes = useStyles();\r\n    const [ montoTurno, setMontoTurno ] = useState([]);\r\n    const [ cerrarTurno, setCerrarTurno ] = useState([]);\r\n\r\n    const obtenerCamposMontos = (e) => { \r\n        setMontoTurno({...montoTurno, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const obtenerCampos = (e) => { \r\n        setCerrarTurno({...cerrarTurno, [e.target.name]: e.target.value})\r\n    };\r\n    \r\n    const input = {\r\n        horario_en_turno: cerrarTurno.horario_en_turno,\r\n        concepto: \"CERRAR TURNO\",\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n        numero_caja: turnoEnCurso ? turnoEnCurso?.numero_caja.toString() : \"\",\r\n        comentarios: cerrarTurno.comentarios,\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        id_usuario: sesion._id,\r\n        usuario_en_turno: {\r\n            nombre: sesion.nombre,\r\n            telefono: sesion.telefono,\r\n            numero_usuario: sesion.numero_usuario.toString(),\r\n            email: sesion.email,\r\n        },\r\n        hora_entrada: {\r\n            hora:  \"\",\r\n            minutos: \"\",\r\n            segundos:  \"\",\r\n            completa: \"\"\r\n        },\r\n        hora_salida: {\r\n            hora: moment().format('hh'),\r\n            minutos: moment().format('mm'),\r\n            segundos: moment().format('ss'),\r\n            completa: moment().format('HH:mm:ss')\r\n        },\r\n        fecha_entrada:{\r\n            year: \"\",\r\n            mes: \"\",\r\n            dia: \"\",\r\n            no_semana_year: \"\",\r\n            no_dia_year: \"\",\r\n            completa: \"\"\r\n        },\r\n        fecha_salida:{\r\n            year: moment().format('YYYY'),\r\n            mes: moment().format('MM'),\r\n            dia: moment().format('DD'),\r\n            no_semana_year: moment().week().toString(),\r\n            no_dia_year: moment().dayOfYear().toString(),\r\n            completa: moment().format(\"YYYY-MM-DD\")\r\n        },\r\n        fecha_movimiento: moment().locale('es-mx').format(),\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto:  parseFloat(montoTurno.monto_efectivo ? montoTurno.monto_efectivo : 0),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: parseFloat(montoTurno.monto_tarjeta_debito ? montoTurno.monto_tarjeta_debito : 0),\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: parseFloat(montoTurno.monto_tarjeta_credito ? montoTurno.monto_tarjeta_credito : 0),\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: parseFloat(montoTurno.monto_creditos ? montoTurno.monto_creditos : 0 ),\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: parseFloat(montoTurno.monto_puntos ? montoTurno.monto_puntos : 0),\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: parseFloat(montoTurno.monto_transferencia ? montoTurno.monto_transferencia : 0),\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: parseFloat(montoTurno.monto_cheques ? montoTurno.monto_cheques : 0),\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: parseFloat(montoTurno.monto_vales_despensa ? montoTurno.monto_vales_despensa : 0),\r\n                metodo_pago: \"08\"\r\n            },\r\n        }\r\n    };\r\n\r\n    let arraySesion = {\r\n        accesos: sesion.accesos,\r\n        email: sesion.email,\r\n        empresa: sesion.empresa,\r\n        estado: sesion.estado,\r\n        exp: sesion.exp,\r\n        iat: sesion.iat,\r\n        imagen: sesion.imagen,\r\n        nombre: sesion.nombre,\r\n        numero_usuario: sesion.numero_usuario,\r\n        sucursal: sesion.sucursal,\r\n        telefono: sesion.telefono,\r\n        turno_en_caja_activo: false, \r\n        _id: sesion._id,\r\n    };\r\n\r\n    const actualizarTurnoSesion  = (ubicacionTurno) => {\r\n        if (ubicacionTurno === 'SESION') {\r\n            localStorage.removeItem('sesionCafi');\r\n\t\t\tlocalStorage.removeItem('tokenCafi');\r\n            localStorage.removeItem('turnoEnCurso');\r\n            localStorage.removeItem('ListaEnEspera');\r\n            localStorage.removeItem('DatosVentas');\r\n\t\t\tprops.history.push('/');\r\n        }else{\r\n            localStorage.setItem('sesionCafi', JSON.stringify(arraySesion));\r\n            localStorage.removeItem('DatosVentas');\r\n            localStorage.removeItem('ListaEnEspera');\r\n            localStorage.removeItem('turnoEnCurso');\r\n        }\r\n    };\r\n\r\n    const enviarDatos  = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if(!cerrarTurno.horario_en_turno){\r\n                setError(true);\r\n                setLoading(false);\r\n                setAlert({\r\n                    message: `Por favor elija que turno esta cerrando`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return;\r\n            }else{\r\n                await CrearRegistroDeTurno({\r\n                    variables: {\r\n                        activa: false,\r\n                        input\r\n                    }\r\n                });\r\n                setAlert({\r\n                    message: `Turno cerrado con exito`,\r\n                    status: \"success\",\r\n                    open: true,\r\n                });\r\n\r\n                actualizarTurnoSesion(ubicacionTurno);\r\n\r\n                setLoading(false);\r\n                handleClickOpen();\r\n                setTurnoActivo(true);\r\n            }\r\n        } catch (error) {\r\n            setAlert({\r\n                message: `Error: ${error.message}`,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            setLoading(false);\r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <DialogContent style={{padding: 0}}>\r\n            <Box width=\"100%\" textAlign=\"center\">\r\n                <Typography variant=\"h6\">Montos a Depositar</Typography>\r\n            </Box>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Monto Efectivo:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_efectivo\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Creditos:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_creditos\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Tarjeta Debito:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_tarjeta_debito\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography> Tarjeta Credito:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_tarjeta_credito\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\"\r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                \r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Monedero:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_puntos\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Transferencias:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_transferencia\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Cheques:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_cheques\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" className={classes.input}>\r\n                    <Typography>Vales de despensa:</Typography>\r\n                    <Box display=\"flex\">\r\n                        <TextField\r\n                            name=\"monto_vales_despensa\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            inputProps={{min: 0}}\r\n                            type=\"number\" \r\n                            defaultValue={0}\r\n                            color=\"primary\"\r\n                            onChange={obtenerCamposMontos}\r\n                        />\r\n                    </Box>\r\n                </Box>\r\n            </div>\r\n                <Grid container >\r\n                    <Grid item lg={6}>\r\n                        <Box mt={1} textAlign=\"center\">\r\n                            <Typography >\r\n                                <b>Monto total efectivo:  </b>\r\n                            </Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} justify='flex-end'>\r\n                        <Box mt={1} textAlign=\"center\" >\r\n                            <Typography>\r\n                                 ${montoTurno.monto_efectivo} Mx.\r\n                            </Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <span className=\"obligatorio\">* </span> Turno:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                onChange={obtenerCampos}\r\n                                id=\"form-producto-tipo\"\r\n                                name=\"horario_en_turno\"\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n                                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Comentarios:</Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                multiline\r\n                                onChange={obtenerCampos}\r\n                                rows={2}\r\n                                size=\"small\"\r\n                                name=\"comentarios\"\r\n                                id=\"form-producto-codigo-barras\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Box display=\"flex\" alignItems='flex-end'>\r\n                    <Button \r\n                        onClick={enviarDatos} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(CerrarTurno);\r\n","import React, { useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Grid,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport BackdropComponent from '../../../components/Layouts/BackDrop'\r\n\r\nimport AbrirTurno from \"./AbrirTurno\";\r\nimport CerrarTurno from \"./CerrarTurno\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nmoment.locale(\"es\");\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(0)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Turnos() {\r\n  const { abrirTurnosDialog, setAbrirTurnosDialog, setTurnoActivo } =\r\n    useContext(VentasContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setAbrirTurnosDialog(!abrirTurnosDialog);\r\n    setTurnoActivo(true);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 85) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"60%\" }}\r\n      >\r\n        <Box\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n        >\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Abrir/Cerrar turno</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + U</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n\t\tfullWidth\r\n        open={abrirTurnosDialog}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            scrollButtons=\"on\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            aria-label=\"scrollable force tabs example\"\r\n          >\r\n            {sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n              <Tab\r\n                label=\"Cerrar Turno\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n            ) : (\r\n              <Tab\r\n                label=\"Abrir Turno\"\r\n                icon={\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shift.svg\"\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n            )}\r\n            <Grid container justify=\"flex-end\">\r\n              <Box mt={2} textAlign=\"right\">\r\n                <Box textAlign=\"right\">\r\n                  <Typography variant=\"caption\">\r\n                    {moment().format(\"L\")}\r\n                  </Typography>\r\n                </Box>\r\n                <Box textAlign=\"right\">\r\n                  <Typography variant=\"caption\">\r\n                    {moment().format(\"LT\")} hrs.\r\n                  </Typography>\r\n                </Box>\r\n                <Box textAlign=\"right\">\r\n                  <Typography variant=\"caption\">\r\n                    Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Box mt={2} ml={3}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Tabs>\r\n        </AppBar>\r\n        <ContenidoTurnos handleClickOpen={handleClickOpen} value={value} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ContenidoTurnos = ({ handleClickOpen, value }) => {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  if (loading)\r\n    return (\r\n      <BackdropComponent loading={loading} />\r\n    )\r\n\r\n  return (\r\n    <DialogContent style={{ padding: 0 }}>\r\n      {sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n        <TabPanel style={{ padding: 0 }} value={value} index={0}>\r\n          <CerrarTurno\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      ) : (\r\n        <TabPanel value={value} index={0}>\r\n          <AbrirTurno\r\n            loading={loading}\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      )}\r\n    </DialogContent>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const AccesosContext = createContext();\r\n\r\nexport const AccesosProvider = ({ children }) => {\r\n\r\n    const [ abrirPanelAcceso, setAbrirPanelAcceso ] = useState(false);\r\n    const [ departamentos, setDepartamentos ] = useState({departamento: '', subDepartamento: '', tipo_acceso: ''});\r\n\r\n    const [ reloadAdministrador, setReloadAdministrador ] = useState(false);\r\n    const [ reloadProductoRapido, setReloadProductoRapido ] = useState(false);\r\n    const [ reloadCancelarVenta, setReloadCancelarVenta ] = useState(false);\r\n    const [ reloadVerPrecios, setReloadVerPrecios ] = useState(false);\r\n    const [ reloadVerPreCorte, setReloadVerPreCorte ] = useState(false);\r\n    const [ reloadEliminarVentaEspera, setReloadEliminarVentaEspera ] = useState(false);\r\n    const [ reloadCrearCotizacion, setReloadCrearCotizacion ] = useState(false);\r\n\r\n    return (\r\n\t\t<AccesosContext.Provider value={\r\n            { \r\n                departamentos, \r\n                setDepartamentos,\r\n                reloadProductoRapido, \r\n                setReloadProductoRapido,\r\n                reloadAdministrador, \r\n                setReloadAdministrador,\r\n                abrirPanelAcceso, \r\n                setAbrirPanelAcceso,\r\n                reloadCancelarVenta, \r\n                setReloadCancelarVenta,\r\n                reloadVerPrecios, \r\n                setReloadVerPrecios,\r\n                reloadVerPreCorte, \r\n                setReloadVerPreCorte,\r\n                reloadEliminarVentaEspera, \r\n                setReloadEliminarVentaEspera,\r\n                reloadCrearCotizacion, \r\n                setReloadCrearCotizacion\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</AccesosContext.Provider>\r\n\t);\r\n};","import React, { useContext, useEffect, useState } from 'react'\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Grid, Slide, Typography } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport moment from 'moment';\r\nimport useStyles from '../styles';\r\nimport 'moment/locale/es';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_PRE_CORTE_CAJA } from '../../../gql/Cajas/cajas';\r\nimport { AccesosContext } from '../../../context/Accesos/accesosCtx';\r\nmoment.locale('es');\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreCorteCaja() {\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const { \r\n\t\treloadVerPreCorte, \r\n        setReloadVerPreCorte,\r\n\t\tsetAbrirPanelAcceso,\r\n        abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\r\n    const input = { \r\n        horario_en_turno: \"ABRIR TURNO\",\r\n        id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        id_usuario: sesion._id,\r\n        token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\"\r\n    };\r\n\r\n    const { data, refetch} = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n        variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id, input: input},\r\n    });\r\n\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen = () => { \r\n        if(sesion.accesos.ventas.pre_corte.ver === true){\r\n\t\t\tsetOpen(!open);\r\n        }else{\r\n            setAbrirPanelAcceso(!abrirPanelAcceso);\r\n            setDepartamentos({departamento: 'ventas', subDepartamento: 'pre_corte', tipo_acceso: 'ver'})\r\n        }\r\n\t};\r\n\r\n    useEffect(() => {\r\n\t\tif (reloadVerPreCorte === true) {\t\r\n            setOpen(!open);\r\n\t\t\tsetReloadVerPreCorte(false);\r\n\t\t}\r\n\t}, [reloadVerPreCorte]);\r\n    \r\n    if(!data) return null;\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 79){ \r\n            handleClickOpen();\r\n            refetch();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={() =>{\r\n                    handleClickOpen()\r\n                    refetch()\r\n                }}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' \r\n                            alt=\"icono caja\" \r\n                            style={{width: 20}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Pre corte caja</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + O</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\t\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={() => setOpen(!open)} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container>\r\n                        <Grid item lg={10}>\r\n                            <Box\r\n                                display=\"flex\" \r\n                                alignItems=\"center\"\r\n                            >\r\n                                <Box>\r\n                                    <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cash-register.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                                </Box>\r\n                                <Box ml={2}>\r\n                                    <Box textAlign=\"left\">\r\n                                        <Typography variant=\"h6\">\r\n                                            Pre-Corte de Caja\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    <Box display=\"flex\">\r\n                                        <Box textAlign=\"right\">\r\n                                            <Typography variant=\"caption\">\r\n                                                {moment().format('MM/DD/YYYY')}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box textAlign=\"right\" ml={2}>\r\n                                            <Typography variant=\"caption\">\r\n                                                <b>{moment().format('h:mm')} hrs.</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={2}>\r\n                            <Box ml={4} display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\r\n                                <Button variant=\"contained\" color=\"secondary\" onClick={() => setOpen(!open)} size=\"large\">\r\n                                    <CloseIcon />\r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid>\r\n                        <Box p={2}>\r\n                        {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                            <>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Usuario: </b> {sesion.nombre}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Caja: </b> {turnoEnCurso ? turnoEnCurso.numero_caja : ''}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        <b>Fecha y hora al precorte: </b> \r\n                                    </Typography>\r\n                                    <Typography variant=\"subtitle1\"> \r\n                                        {moment().format('MMMM D YYYY, h:mm:ss a')}\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box textAlign=\"center\" p={2}>\r\n                                    <Typography variant=\"h6\"> \r\n                                        <b>Monto total en efectivo: </b> \r\n                                    </Typography>\r\n                                    <Typography variant=\"h3\" style={{color: \"green\"}}> \r\n                                        <b>${data?.obtenerPreCorteCaja?.monto_efectivo_precorte}</b> \r\n                                    </Typography>\r\n                                </Box>\r\n                            </>\r\n                        ) : (\r\n                            <Box textAlign=\"center\" p={2}>\r\n                                <Typography variant=\"h6\"> \r\n                                    <b>Por el momento no hay un turno en sesión</b> \r\n                                </Typography>\r\n                            </Box>\r\n                        )}\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogContent>\r\n                \r\n                <DialogActions>\r\n                    {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                        <Button \r\n                            onClick={() => setOpen(!open)} \r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            size=\"large\"\r\n                            autoFocus\r\n                        >\r\n                            Imprimir\r\n                        </Button>\r\n                    ) : null }\r\n                </DialogActions>\r\n\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import React, { useContext, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogActions, \r\n        DialogContent, Divider, Grid, \r\n        Slide, Typography \r\n    } from '@material-ui/core'\r\nimport { FcExpired } from 'react-icons/fc';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nmoment.locale('es');\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaEnEspera() {\r\n    const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 69){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    const agregarVentaEnEspera = () => {\r\n        let VentaEnEspera = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n        let datos = localStorage.getItem(\"ListaEnEspera\");\r\n        if(VentaEnEspera !== null){\r\n            if(datos === null){\r\n                localStorage.setItem('ListaEnEspera', JSON.stringify([{VentaEnEspera, fecha: moment().format('MM/DD/YYYY') }]));\r\n                localStorage.removeItem('DatosVentas');\r\n                setUpdateTablaVentas(!updateTablaVentas);\r\n            }else{\r\n                let data = JSON.parse(datos);\r\n                data.push({VentaEnEspera, fecha: moment().format('MM/DD/YYYY') });\r\n                localStorage.setItem(\"ListaEnEspera\", JSON.stringify(data));\r\n                localStorage.removeItem('DatosVentas');\r\n                setUpdateTablaVentas(!updateTablaVentas);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button\r\n                onClick={() => agregarVentaEnEspera()} \r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcExpired style={{fontSize: 25}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>En espera</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + E</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\" \r\n                            textAlign=\"center\" \r\n                            justifyContent=\"center\" \r\n                            alignContent=\"center\" \r\n                            alignSelf=\"center\"\r\n                            justifySelf=\"center\"\r\n                        >\r\n                            <Box>\r\n                                <FcExpired style={{fontSize: 80}} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h5\">\r\n                                    Venta pasada a espera\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={() =>{handleClickOpen();}}\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  InputAdornment,\r\n  makeStyles,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"../../sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT\";\r\n// import RegistroInfoAdidional from '../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nexport default function RegistroInformacionRapido({\r\n  setAbrirTallaColor,\r\n  setCantidad,\r\n  cantidad,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    setDatosGenerales,\r\n    validacion,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    unidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n\r\n    if (e.target.value === \"CALZADO\" || e.target.value === \"ROPA\") {\r\n      setAbrirTallaColor(true);\r\n    }\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <Typography>\r\n          <b>Información General</b>\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"100%\">\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"codigo_barras\"\r\n            fullWidth\r\n          >\r\n            <Typography>Código de barras</Typography>\r\n            <OutlinedInput\r\n              disabled={update && datos_generales.codigo_barras}\r\n              style={{ padding: 0 }}\r\n              id=\"form-producto-codigo-barras\"\r\n              name=\"codigo_barras\"\r\n              value={\r\n                datos_generales.codigo_barras\r\n                  ? datos_generales.codigo_barras\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <Button\r\n                    disabled={update && datos_generales.codigo_barras}\r\n                    onClick={() => GenCodigoBarras()}\r\n                    /* edge=\"end\" */\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                  >\r\n                    Generar\r\n                  </Button>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n        </Box>\r\n        <Box width=\"100%\">\r\n          <Typography>\r\n            <span className=\"obligatorio\">* </span>Clave alterna\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.clave_alterna}\r\n            name=\"clave_alterna\"\r\n            id=\"form-producto-clave-alterna\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.clave_alterna ? datos_generales.clave_alterna : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n\r\n        <Box width=\"100%\">\r\n          <Typography>\r\n            <span className=\"obligatorio\">* </span>Nombre comercial\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_comercial}\r\n            name=\"nombre_comercial\"\r\n            id=\"form-producto-nombre-comercial\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_comercial\r\n                ? datos_generales.nombre_comercial\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n        <Box width=\"100%\">\r\n          <CatalogosProductosSAT\r\n            refetch={refetch}\r\n            codigos={obtenerConsultasProducto.codigos}\r\n          />\r\n        </Box>\r\n      </div>\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"100%\">\r\n          <Typography>\r\n            <span className=\"obligatorio\">* </span>Nombre genérico\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_generico}\r\n            name=\"nombre_generico\"\r\n            id=\"form-producto-nombre-generico\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_generico\r\n                ? datos_generales.nombre_generico\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Box>\r\n        <Box width=\"60%\">\r\n          <Typography>\r\n            <span className=\"obligatorio\">* </span>Tipo de producto\r\n          </Typography>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.tipo_producto}\r\n          >\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"tipo_producto\"\r\n              value={\r\n                datos_generales.tipo_producto\r\n                  ? datos_generales.tipo_producto\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"ROPA\">Ropa</MenuItem>\r\n              <MenuItem value=\"CALZADO\">Calzado</MenuItem>\r\n              <MenuItem value=\"OTROS\">Otros</MenuItem>\r\n            </Select>\r\n            <FormHelperText>{validacion.message}</FormHelperText>\r\n          </FormControl>\r\n        </Box>\r\n        {datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <>\r\n            <Box width=\"50%\">\r\n              <Typography>\r\n                <span className=\"obligatorio\">* </span>Cantidad\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !cantidad}\r\n                name=\"cantidad\"\r\n                type=\"number\"\r\n                id=\"form-producto-nombre-generico\"\r\n                variant=\"outlined\"\r\n                value={cantidad ? cantidad : \"\"}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setCantidad(parseInt(e.target.value))}\r\n              />\r\n            </Box>\r\n            <Box width=\"80%\">\r\n              <Typography>Granel</Typography>\r\n              <FormControlLabel\r\n                control={<Checkbox onChange={obtenerChecks} name=\"granel\" />}\r\n                label=\"Vender a granel\"\r\n              />\r\n            </Box>\r\n            <Box width=\"80%\">\r\n              <Typography>Medicamento</Typography>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    // checked={datos_generales.receta_farmacia ? datos_generales.receta_farmacia : false}\r\n                    onChange={checkFarmacia}\r\n                    name=\"receta_farmacia\"\r\n                  />\r\n                }\r\n                label=\"Necesita receta\"\r\n                name=\"receta_farmacia\"\r\n              />\r\n            </Box>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from '@material-ui/core';\r\nimport { Cached, Close, Edit } from '@material-ui/icons';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\tminWidth: 750\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t},\r\n\ttableRow: {\r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\nexport default function TablaPresentaciones({ from, setOnUpdate, onUpdate }) {\r\n\tconst classes = useStyles();\r\n\tconst { presentaciones } = useContext(RegProductoContext);\r\n\r\n\tlet mostrar_presentaciones = [ ...presentaciones ].sort((a, b) => compareFunction(a, b));\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t\tstickyHeader\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Existencia</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Código de barras</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell width={200}>Nombre</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Existente</TableCell>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">Editar</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{mostrar_presentaciones.map((producto, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tfrom={from}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst RenderPresentacionesRows = ({ producto, index,  from, setOnUpdate, onUpdate }) => {\r\n\tconst { presentaciones, setPresentaciones, preciosP, precios } = useContext(RegProductoContext);\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst textfield = useRef(null);\r\n\r\n\tconst copy_presentaciones = [...presentaciones].sort((a, b) => compareFunction(a, b))\r\n\tconst copy_element_presentacion = { ...copy_presentaciones[index] };\r\n\tconst copy_producto = { ...producto };\r\n\r\n\tif(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad = 0\r\n\t}\r\n\t\r\n\tconst handleEditCancel = () => {\r\n\t\tif (!copy_producto.cantidad) {\r\n\t\t\tcopy_element_presentacion.cantidad = 0;\r\n\t\t}\r\n\t\tif (!copy_producto.precio) {\r\n\t\t\tcopy_element_presentacion.precio = preciosP[0].precio_neto;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t\tsetDisabledInput(true);\r\n\t};\r\n\r\n\tconst obtenerDatos = (event) => {\r\n\t\tconst {value, name }= event.target;\r\n\t\tconsole.log(name)\r\n\t\tif (name === 'cantidad') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.cantidad = '';\r\n\t\t\t\tcopy_element_presentacion.existencia = false;\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.cantidad = parseFloat(value);\r\n\t\t\tcopy_element_presentacion.existencia = true;\r\n\t\t} else if (name === 'precio') {\r\n\t\t\tlet { iva, ieps } = precios;\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.precio = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tlet precio_neto = parseFloat(value);\r\n\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\tlet suma_impuestos = parseFloat(`0.${varIVA}`) + parseFloat(`0.${varIEPS}`);\r\n\t\t\tlet precio_venta = parseFloat((precio_neto / (suma_impuestos+1)).toFixed(2));\r\n\t\t\tlet iva_precio = parseFloat((precio_venta * parseFloat(`0.${varIVA}`)).toFixed(2));\r\n\t\t\tlet ieps_precio = parseFloat((precio_venta * parseFloat(`0.${varIEPS}`)).toFixed(2));\r\n\t\t\tlet PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\t\t\tlet utilidad = parseFloat((((precio_venta - PUCSI) / PUCSI) * 100).toFixed(2));\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_venta = precio_venta;\r\n\t\t\tcopy_element_presentacion.precio_unidad.precio_neto = precio_neto;\r\n\t\t\tcopy_element_presentacion.precio_unidad.utilidad = utilidad;\r\n\t\t\tcopy_element_presentacion.precio_unidad.iva_precio = iva_precio;\r\n\t\t\tcopy_element_presentacion.precio_unidad.ieps_precio = ieps_precio;\r\n\t\t\t\r\n\t\t\tcopy_element_presentacion.precio = parseFloat(value);\r\n\t\t} else {\r\n\t\t\tif (!value) {\r\n\t\t\t\tcopy_element_presentacion.codigo_barras = '';\r\n\t\t\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\t\t\tsetPresentaciones(copy_presentaciones);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcopy_element_presentacion.codigo_barras = value;\r\n\t\t}\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst GenCodigoBarras = () => {\r\n\t\tconst max = 999999999999;\r\n\t\tconst min = 100000000000;\r\n\t\tconst codigo_barras = Math.floor(Math.random() * (max - min + 1) + min).toString();\r\n\t\tcopy_element_presentacion.codigo_barras = codigo_barras;\r\n\t\tcopy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\t\tsetPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\tconst actionButton = () => {\r\n\t\tif (!disabledInput) {\r\n\t\t\thandleEditCancel();\r\n\t\t\t/* quitar del array\t */\r\n\t\t\tonUpdate.splice(onUpdate.length - 1, 1);\r\n\t\t\tsetOnUpdate([ ...onUpdate ]);\r\n\t\t} else {\r\n\t\t\tsetDisabledInput(!disabledInput);\r\n\t\t\t/*  agregar al array */\r\n\t\t\tsetOnUpdate([ ...onUpdate, index ]);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t<Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={220}>\r\n\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\t\t/* disabled={disabledInput} */\r\n\t\t\t\t\t\tvalue={copy_producto.codigo_barras}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t\t\tdisabled={!copy_producto.nuevo ? true : disabledInput}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) :  copy_producto.nuevo ? (\r\n\t\t\t\t\t\t<IconButton color=\"primary\" size=\"small\" onClick={() => GenCodigoBarras()}>\r\n\t\t\t\t\t\t\t<Cached />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Box>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.medida._id ? <Chip label={copy_producto.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{copy_producto.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_producto.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_producto.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell width={110}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.precio}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t{from && from === 'compra' ? (\r\n\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t{producto.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t\t) : null}\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\tinputRef={textfield}\r\n\t\t\t\t\tonChange={(e) => obtenerDatos(e)}\r\n\t\t\t\t\tdisabled={disabledInput}\r\n\t\t\t\t\tvalue={copy_producto.cantidad}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tname=\"cantidad\"\r\n\t\t\t\t/>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => actionButton()}>\r\n\t\t\t\t\t{!disabledInput ? <Close /> : <Edit />}\r\n\t\t\t\t</IconButton>\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t);\r\n};\r\n","import React, { useContext, useState,  useEffect, useCallback } from 'react';\r\nimport { Typography, Divider, Tooltip, } from '@material-ui/core';\r\nimport { Box,Grid } from '@material-ui/core';\r\nimport { makeStyles, useTheme } from '@material-ui/core';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\nimport { Done } from '@material-ui/icons';\r\nimport TablaPresentaciones from './TablaPresentaciones';\r\nimport { RegProductoContext } from '../../../../context/Catalogos/CtxRegProducto';\r\n// import { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\n// import ContainerRegistroAlmacen from '../../../sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearColor';\r\nimport CrearTallasProducto from '../../../sucursales/Catalogos/Producto/TallasColores/crearTalla';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\theight: 50,\r\n\t\twidth: 50,\r\n\t\tmargin: 1,\r\n\t\tborderRadius: '15%',\r\n\t\tcursor: 'pointer'\r\n\t}\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n\treturn Math.floor(Math.random() * (999999999999 - 100000000000 + 1) + 100000000000).toString();\r\n};\r\n\r\nexport default function TallasColoresRapidos({ \r\n\tobtenerConsultasProducto, \r\n\trefetch, \r\n\tdatos, \r\n\tfrom\r\n}) {\r\n\tconst {\r\n\t\t// almacen_inicial,\r\n\t\t// setAlmacenInicial,\r\n\t\tpresentaciones,\r\n\t\tdatos_generales,\r\n\t} = useContext(RegProductoContext);\r\n\tconst { colores, tallas, calzados } = obtenerConsultasProducto;\r\n\tconst [ medidasSeleccionadas, setMedidasSeleccionadas ] = useState([]);\r\n\tconst [ coloresSeleccionados, setColoresSeleccionados ] = useState([]);\r\n\tconst medidas = datos_generales.tipo_producto === 'ROPA' ? [ ...tallas ] : [ ...calzados ];\r\n\tconst [ onUpdate, setOnUpdate ] = useState([]);\r\n\r\n\tconst obtenerColoresSeleccinados = useCallback(\r\n\t\t() => {\r\n\t\t\tlet colors = [];\r\n\t\t\tlet medidas = [];\r\n\t\t\tconst copy_presentaciones = [ ...presentaciones ];\r\n\r\n\t\t\tcopy_presentaciones.forEach((element) => {\r\n\t\t\t\tif (element.color._id) colors.push(element.color);\r\n\t\t\t\tif (element.medida._id) medidas.push(element.medida);\r\n\t\t\t});\r\n\r\n\t\t\tvar hashColor = {};\r\n\t\t\tvar hashMedida = {};\r\n\t\t\tconst colores_existentes = colors.filter((color) => {\r\n\t\t\t\tvar existColor = !hashColor[color._id];\r\n\t\t\t\thashColor[color._id] = true;\r\n\t\t\t\treturn existColor;\r\n\t\t\t});\r\n\t\t\tconst medidas_existentes = medidas.filter((medida) => {\r\n\t\t\t\tvar existMedida = !hashMedida[medida._id];\r\n\t\t\t\thashMedida[medida._id] = true;\r\n\t\t\t\treturn existMedida;\r\n\t\t\t});\r\n\r\n\t\t\tsetColoresSeleccionados([ ...colores_existentes ]);\r\n\t\t\tsetMedidasSeleccionadas([ ...medidas_existentes ]);\r\n\t\t},\r\n\t\t[ presentaciones ]\r\n\t);\r\n\r\n\t// const obtenerAlmacenes = (event, child) => {\r\n\t// \tsetAlmacenInicial({\r\n\t// \t\t...almacen_inicial,\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\t[child.props.name]: child.props.id\r\n\t// \t});\r\n\t// };\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tobtenerColoresSeleccinados();\r\n\t\t},\r\n\t\t[ obtenerColoresSeleccinados ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={9}>\r\n\t\t\t\t\t<TablaPresentaciones from={from} setOnUpdate={setOnUpdate} onUpdate={onUpdate} />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={3}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmy={2}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>{datos_generales.tipo_producto === 'ROPA' ? 'Talla' : 'Número'}</Typography>\r\n\t\t\t\t\t\t<CrearTallasProducto setMedidasSeleccionadas={setMedidasSeleccionadas} refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{medidas.map((talla, index) => (\r\n\t\t\t\t\t\t\t\t<RenderTallas\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\ttalla={talla}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\tsetMedidasSeleccionadas={setMedidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\tmt={1}\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tonUpdate.length > 0 ? (\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\topacity: 0.4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>Color</Typography>\r\n\t\t\t\t\t\t<CrearColorProducto refetch={refetch} />\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t{colores.map((color, index) => (\r\n\t\t\t\t\t\t\t\t<Colores\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\t\tcoloresSeleccionados={coloresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tsetColoresSeleccionados={setColoresSeleccionados}\r\n\t\t\t\t\t\t\t\t\tmedidasSeleccionadas={medidasSeleccionadas}\r\n\t\t\t\t\t\t\t\t\t// datos={datos}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst RenderTallas = ({\r\n\ttalla,\r\n\tcoloresSeleccionados,\r\n\tmedidasSeleccionadas,\r\n\tsetMedidasSeleccionadas,\r\n\t// datos\r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tsetPresentaciones, \r\n\t\tpresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarMedidas = useCallback(\r\n\t// \t() => {\r\n\t// \t\tmedidasSeleccionadas.forEach((res) => {\r\n\t// \t\t\tif (res._id === talla._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ talla._id, medidasSeleccionadas ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarMedidas();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarMedidas ]\r\n\t// );\r\n\r\n\r\n\tconst handleAddTallas = (value) => {\r\n\t\tconst medidas_seleccionadas_temp = [ ...medidasSeleccionadas ];\r\n\r\n\t\tif (!selected) {\r\n\t\t\tmedidas_seleccionadas_temp.push(talla);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tmedidas_seleccionadas_temp.forEach((res, index) => {\r\n\t\t\t\tif (res._id === talla._id) {\r\n\t\t\t\t\tmedidas_seleccionadas_temp.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.medida._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!coloresSeleccionados.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.medida._id === producto_medida._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length === 1 && value) {\r\n\t\t\t/* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: medidas_seleccionadas_temp[k],\r\n\t\t\t\t\t\tcolor: array_medidad_finales[i].color,\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && medidas_seleccionadas_temp.length > 0) {\r\n\t\t\t/* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n\t\t\tfor (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n\t\t\t\tconst producto_medida = medidas_seleccionadas_temp[i];\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tconst producto_color = coloresSeleccionados[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\t  let ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (coloresSeleccionados.length > 0 && !medidas_seleccionadas_temp.length) {\r\n\t\t\t/* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.medida._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: objeto_presentaciones_final.color,\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetMedidasSeleccionadas([ ...medidas_seleccionadas_temp ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\tonClick={() => handleAddTallas(!selected)}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tselected ? (\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: theme.palette.primary.main\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"button\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(selected ? theme.palette.primary.main : '#FFFFFF'),\r\n\t\t\t\t\t\tfontSize: 16\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{talla.talla}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Colores = ({ \r\n\tcolor, \r\n\tcoloresSeleccionados, \r\n\tsetColoresSeleccionados, \r\n\tmedidasSeleccionadas, \r\n\tdatos \r\n}) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst { \r\n\t\tpresentaciones, \r\n\t\tsetPresentaciones, \r\n\t\tdatos_generales, \r\n\t\tpreciosP, \r\n\t\tprecios,\r\n\t\tpresentaciones_eliminadas, \r\n\t\tsetPresentacionesEliminadas \r\n\t} = useContext(RegProductoContext);\r\n\r\n\tconst [ selected, setSelected ] = useState(false);\r\n\r\n\t// const seleccionarColores = useCallback(\r\n\t// \t() => {\r\n\t// \t\tcoloresSeleccionados.forEach((res) => {\r\n\t// \t\t\tif (res._id === color._id) setSelected(true);\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \t[ color._id, coloresSeleccionados ]\r\n\t// );\r\n\r\n\t// useEffect(\r\n\t// \t() => {\r\n\t// \t\tif (datos.medidas_registradas) {\r\n\t// \t\t\treturn seleccionarColores();\r\n\t// \t\t}\r\n\t// \t},\r\n\t// \t[ seleccionarColores ]\r\n\t// );\r\n\r\n\tconst obtenerColores = (value) => {\r\n\t\tif (!selected) {\r\n\t\t\tcoloresSeleccionados.push(color);\r\n\t\t\tsetSelected(value);\r\n\t\t} else {\r\n\t\t\tcoloresSeleccionados.forEach((res, index) => {\r\n\t\t\t\tif (res._id === color._id) {\r\n\t\t\t\t\tcoloresSeleccionados.splice(index, 1);\r\n\t\t\t\t\tsetSelected(value);\r\n\t\t\t\t\tpresentaciones.forEach((presentacion) => {\r\n\t\t\t\t\t\tif(!presentacion.nuevo){\r\n\t\t\t\t\t\t\tif(presentacion.color._id === res._id){\r\n\t\t\t\t\t\t\t\tsetPresentacionesEliminadas([...presentaciones_eliminadas, presentacion])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet presentacion_temp = [];\r\n\t\tconst array_medidad_finales = [ ...presentaciones ];\r\n\t\tconst { iva, ieps } = precios;\r\n\r\n\t\tif (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n\t\t\t/* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\texistencia: false,\r\n\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\tmedida: {},\r\n\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (!medidasSeleccionadas.length && array_medidad_finales.length > 0) {\r\n\t\t\t/* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tconst result = array_medidad_finales.filter((res) => res.color._id === producto_color._id);\r\n\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t  );\r\n\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t  parseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t);\r\n\t\t\t\tif (result.length) {\r\n\t\t\t\t\tpresentacion_temp.push(result[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\tmedida: {},\r\n\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length === 1 && value) {\r\n\t\t\t/* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n\t\t\tfor (let i = 0; i < array_medidad_finales.length; i++) {\r\n\t\t\t\tfor (let k = 0; k < coloresSeleccionados.length; k++) {\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\texistencia: array_medidad_finales[i].existencia,\r\n\t\t\t\t\t\tcodigo_barras: array_medidad_finales[i].codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n\t\t\t\t\t\tmedida: array_medidad_finales[i].medida,\r\n\t\t\t\t\t\tcolor: coloresSeleccionados[k],\r\n\t\t\t\t\t\tprecio: array_medidad_finales[i].precio,\r\n\t\t\t\t\t\tcantidad: array_medidad_finales[i].cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: array_medidad_finales[i].precio_unidad\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && coloresSeleccionados.length > 0) {\r\n\t\t\t/* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n\t\t\tfor (let i = 0; i < coloresSeleccionados.length; i++) {\r\n\t\t\t\tconst producto_color = coloresSeleccionados[i];\r\n\t\t\t\tfor (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n\t\t\t\t\tconst producto_medida = medidasSeleccionadas[k];\r\n\t\t\t\t\tconst presentacion_existente = array_medidad_finales.filter(\r\n\t\t\t\t\t\t(producto_array_final) =>\r\n\t\t\t\t\t\t\tproducto_array_final.medida._id === producto_medida._id &&\r\n\t\t\t\t\t\t\tproducto_color._id === producto_array_final.color._id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet varIVA = (iva < 10 ? `0${iva}` : iva);\r\n\t\t\t\t\tlet varIEPS = (ieps < 10 ? `0${ieps}` : ieps);\r\n\t\t\t\t\tlet iva_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t  preciosP[0].precio_venta *\r\n\t\t\t\t\t\t  parseFloat(`0.${varIVA}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t  );\r\n\t\t\t\t\tlet ieps_precio = parseFloat(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tpreciosP[0].precio_venta *\r\n\t\t\t\t\t\t\tparseFloat(`0.${varIEPS}`)\r\n\t\t\t\t\t\t).toFixed(2)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!presentacion_existente.length) {\r\n\t\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t\t_id: '',\r\n\t\t\t\t\t\t\texistencia: false,\r\n\t\t\t\t\t\t\tcodigo_barras: GenCodigoBarras(),\r\n\t\t\t\t\t\t\tnombre_comercial: datos_generales.nombre_comercial,\r\n\t\t\t\t\t\t\tmedida: producto_medida,\r\n\t\t\t\t\t\t\tcolor: producto_color,\r\n\t\t\t\t\t\t\tprecio: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\tcantidad: 0,\r\n\t\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\t\tprecio_unidad: {\r\n\t\t\t\t\t\t\t\tnumero_precio: 1,\r\n\t\t\t\t\t\t\t\tprecio_venta: preciosP[0].precio_venta,\r\n\t\t\t\t\t\t\t\tprecio_neto: preciosP[0].precio_neto,\r\n\t\t\t\t\t\t\t\tunidad_mayoreo: 0,\r\n\t\t\t\t\t\t\t\tiva_precio: iva_precio,\r\n\t\t\t\t\t\t\t\tieps_precio: ieps_precio,\r\n\t\t\t\t\t\t\t\tutilidad: preciosP[0].utilidad,\r\n\t\t\t\t\t\t\t\tunidad_maxima: false,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpresentacion_temp.push(presentacion_existente[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (medidasSeleccionadas.length > 0 && !coloresSeleccionados.length) {\r\n\t\t\t/* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n\t\t\tconst presentaciones_existentes = array_medidad_finales.filter((producto) => producto.color._id);\r\n\t\t\tif (presentaciones_existentes.length) {\r\n\t\t\t\tfor (let x = 0; x < array_medidad_finales.length; x++) {\r\n\t\t\t\t\tconst objeto_presentaciones_final = array_medidad_finales[x];\r\n\t\t\t\t\tpresentacion_temp.push({\r\n\t\t\t\t\t\t_id: objeto_presentaciones_final._id,\r\n\t\t\t\t\t\texistencia: objeto_presentaciones_final.existencia,\r\n\t\t\t\t\t\tcodigo_barras: objeto_presentaciones_final.codigo_barras,\r\n\t\t\t\t\t\tnombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n\t\t\t\t\t\tmedida: objeto_presentaciones_final.medida,\r\n\t\t\t\t\t\tcolor: { nombre: '', hex: '' },\r\n\t\t\t\t\t\tprecio: objeto_presentaciones_final.precio,\r\n\t\t\t\t\t\tcantidad: objeto_presentaciones_final.cantidad,\r\n\t\t\t\t\t\tnuevo: true,\r\n\t\t\t\t\t\tprecio_unidad: objeto_presentaciones_final.precio_unidad,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetColoresSeleccionados([ ...coloresSeleccionados ]);\r\n\t\tsetPresentaciones(presentacion_temp);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid item>\r\n\t\t\t<Tooltip title={color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: color.hex,\r\n\t\t\t\t\t\tcolor: theme.palette.getContrastText(color.hex)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => obtenerColores(!selected)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{selected ? <Done /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { useApolloClient } from  \"@apollo/client\";\r\nimport { LOGEAR_USUARIO_ACCESOS } from \"../../gql/Catalogos/usuarios\";\r\nimport BackdropComponent from \"../Layouts/BackDrop\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n    paddingTop: 0,\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Acceso() {\r\n  const classes = useStyles();\r\n  const client = useApolloClient();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const {\r\n    departamentos,\r\n    abrirPanelAcceso,\r\n    setAbrirPanelAcceso,\r\n    setReloadProductoRapido,\r\n    setReloadAdministrador,\r\n    setReloadCancelarVenta,\r\n    setReloadVerPrecios,\r\n    setReloadVerPreCorte,\r\n    setReloadEliminarVentaEspera,\r\n    setReloadCrearCotizacion,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [datosUser, setDatosUser] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickClose = async () => {\r\n    setDatosUser([]);\r\n    setAbrirPanelAcceso(false);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosUser({ ...datosUser, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const input = {\r\n    numero_usuario: parseInt(datosUser.numero_usuario),\r\n    password: datosUser.password,\r\n    departamento: departamentos.departamento,\r\n    subDepartamento: departamentos.subDepartamento,\r\n    tipo_acceso: departamentos.tipo_acceso,\r\n  };\r\n\r\n  const obtenerQuery = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: LOGEAR_USUARIO_ACCESOS,\r\n        variables: { input },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      if (response.data.obtenerAccesoPermiso.permiso_concedido === true) {\r\n        SwitchPermisos(response.data.obtenerAccesoPermiso.subDepartamento);\r\n        setAbrirPanelAcceso(false);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: \"Permiso Autorizado\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosUser([]);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const SwitchPermisos = (subDepartamento) => {\r\n    switch (subDepartamento) {\r\n      case \"administrador\":\r\n        setReloadAdministrador(true);\r\n        break;\r\n      case \"producto_rapido\":\r\n        setReloadProductoRapido(true);\r\n        break;\r\n      case \"cancelar_venta\":\r\n        setReloadCancelarVenta(true);\r\n        break;\r\n      case \"precios_productos\":\r\n        setReloadVerPrecios(true);\r\n        break;\r\n      case \"pre_corte\":\r\n        setReloadVerPreCorte(true);\r\n        break;\r\n      case \"cotizaciones\":\r\n        setReloadCrearCotizacion(true);\r\n        break;\r\n      case \"eliminar_ventas\":\r\n        setReloadEliminarVentaEspera(true);\r\n        break;\r\n      default:\r\n        setAlert({\r\n            message: \"Permiso no autorizado\",\r\n            status: \"error\",\r\n            open: true,\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        open={abrirPanelAcceso}\r\n        onClose={handleClickClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <BackdropComponent loading={loading} />\r\n        <Box p={3}>\r\n          <Box display='flex' p={1}>\r\n            <Box flexGrow={1}>\r\n              <Typography>\r\n                <b>Por favor autoriza con tu usuario y contraseña</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box >\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => handleClickClose()} size=\"medium\">\r\n                    <CloseIcon />\r\n                </Button>\r\n            </Box>\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Numero Usuario:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  name=\"numero_usuario\"\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Contrasena:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            variant=\"contained\"\r\n            onClick={() => obtenerQuery()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport RegistroInfoAdidional from \"../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport RegistroInformacionRapido from \"./RegistroInformacionRapido\";\r\nimport { NavigateBefore, NavigateNext } from \"@material-ui/icons\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../context/Catalogos/initialStatesProducto\";\r\nimport { cleanTypenames } from \"../../../config/reuserFunctions\";\r\nimport TallasColoresRapidos from \"./TallasColoresRapidos/TallasColoresRapidos\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO_RAPIDO,\r\n  OBTENER_CONSULTAS,\r\n} from \"../../../gql/Catalogos/productos\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../../../components/AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  iconSizeDialogs: {\r\n    width: 80,\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  iconSizeSecondSuperior: {\r\n    width: 20,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ArticuloRapido() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    setPreciosP,\r\n    preciosP,\r\n    unidadesVenta,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    presentaciones,\r\n    setPresentaciones,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const { setAlert, open, setOpen } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadProductoRapido,\r\n    setReloadProductoRapido,\r\n    setAbrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [crearProductoRapido] = useMutation(CREAR_PRODUCTO_RAPIDO);\r\n\r\n  const { data, refetch, loading } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setCentroDeCostos({});\r\n    setValidacion({ error: false, message: \"\" });\r\n    setPresentaciones([]);\r\n    setValue(0);\r\n  };\r\n\r\n  const [abrirTallaColor, setAbrirTallaColor] = useState(false);\r\n\r\n  const [cantidad, setCantidad] = useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    resetInitialStates();\r\n    setAbrirTallaColor(false);\r\n  };\r\n\r\n  const AceesoProductoRapido = () => {\r\n    if (sesion.accesos.ventas.producto_rapido.ver === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(true);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"producto_rapido\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadProductoRapido === true) {\r\n      handleClickOpen();\r\n      setReloadProductoRapido(false);\r\n    }\r\n  }, [reloadProductoRapido]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, []);\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 82) {\r\n      AceesoProductoRapido();\r\n    }\r\n  }\r\n\r\n  if (loading || !data) {\r\n    return null;\r\n  }\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const saveData = async () => {\r\n    setCargando(true);\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      return setValidacion(true);\r\n    } else {\r\n      if (\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n      ) {\r\n        return setValidacion(true);\r\n      }\r\n    }\r\n    /* if (unidadesVenta.length === 0) {\r\n      unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = unidadesVenta.filter(\r\n        (unidades) => unidades.default\r\n      );\r\n      if (unidadxdefecto.length === 0) unidadesVenta.push(unidadVentaXDefecto);\r\n    } */\r\n    let copy_unidadesVenta = [{...unidadVentaXDefecto}, {...unidadVentaSecundaria}];\r\n    precios.precios_producto = preciosP;\r\n\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      setPresentaciones(initial_state_presentaciones);\r\n      setCantidad(0);\r\n    }\r\n\r\n    const data = {\r\n      datos_generales,\r\n      precios,\r\n      unidades_de_venta: copy_unidadesVenta,\r\n      presentaciones,\r\n      cantidad,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    try {\r\n      const input = cleanTypenames(data);\r\n      const result = await crearProductoRapido({\r\n        variables: {\r\n          input,\r\n        },\r\n      });\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `¡Listo ${result.data.crearProductoRapido.message}!`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        datos_generales.tipo_producto === \"OTROS\"\r\n          ? !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !cantidad ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n            ? true\r\n            : false\r\n          : !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (value === 1) {\r\n      return saveButton;\r\n    } else {\r\n      if (\r\n        datos_generales.tipo_producto === \"OTROS\" ||\r\n        !datos_generales.tipo_producto\r\n      ) {\r\n        return saveButton;\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value + 1)}\r\n            size=\"large\"\r\n            endIcon={<NavigateNext />}\r\n            disableElevation\r\n          >\r\n            Siguiente\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Acceso />\r\n      <Button\r\n        onClick={() => {\r\n          AceesoProductoRapido();\r\n        }}\r\n        value=\"articulo-rapido\"\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"60%\" }}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tiempo-rapido.svg\"\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Producto Rapido</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + R</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\">\r\n            <Box display=\"flex\" flexGrow={1} justifyContent=\"space-between\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab\r\n                  label=\"Datos generales\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista1 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/portapapeles.svg\"\r\n                        alt=\"icono registro\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(0)}\r\n                />\r\n                {abrirTallaColor === false ||\r\n                datos_generales.tipo_producto === \"OTROS\" ? null : (\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                          validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/tallas-colores.svg\"\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                )}\r\n              </Tabs>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  handleClickOpen() \r\n                  resetInitialStates()\r\n                }}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={cargando}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <div className={classes.root}>\r\n            <TabPanel value={value} index={0}>\r\n              <RegistroInformacionRapido\r\n                setAbrirTallaColor={setAbrirTallaColor}\r\n                setCantidad={setCantidad}\r\n                cantidad={cantidad}\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n              <RegistroInfoAdidional />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <TallasColoresRapidos\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n            </TabPanel>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setValue(value - 1)}\r\n              size=\"large\"\r\n              startIcon={<NavigateBefore />}\r\n              disabled={value === 0}\r\n            >\r\n              Anterior\r\n          </Button>\r\n          </Box>\r\n          <Box p={1}>\r\n            <ButtonActions />\r\n          </Box>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../context/Catalogos/CtxRegProducto'\r\nimport ArticuloRapido from './ArticuloRapido'\r\n \r\nexport default function ProductoRapidoIndex({handleClickOpen}){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <ArticuloRapido handleClickOpen={handleClickOpen} />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'}\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10)\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '65vh'\r\n\t}\r\n});\r\n\r\nexport default function CotizacionesPendientes({ setOpen }) {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRetomar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<CotizacionesRows row={row} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst CotizacionesRows = ({row}) => {\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\tuno\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n\r\n}\r\n","import React, { useState } from 'react';\r\nimport { AppBar, Box, Button, Dialog, Slide, Typography \r\n} from '@material-ui/core';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CotizacionesPendientes from './CotizacionesPendientes';\r\n\r\nimport { FcCurrencyExchange } from 'react-icons/fc';\r\nimport moment from 'moment';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ListaCotizaciones() {\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={() => handleClickOpen()}\r\n                style={{textTransform: 'none', height: '100%', width: '60%'}}\r\n            >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <FcCurrencyExchange style={{fontSize: 25}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Lista cotizaciones</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + T</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n\r\n            <Dialog\r\n\t\t\t\tfullWidth\r\n\t\t\t\topen={open} \r\n\t\t\t\tmaxWidth={'lg'}\r\n\t\t\t\tonClose={() => setOpen(false)} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n                    <Box display={'flex'}>\r\n                        <Box display='flex' flexGrow={1} >\r\n                            <Box p={2} display={'flex'} alignItems={'center'}>\r\n                                <img \r\n\t\t\t\t\t\t\t\t\tsrc='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' \r\n                                    alt=\"icono caja2\" \r\n                                    style={{width: 58}} \r\n                                />\r\n                            </Box>\r\n                            <Box p={1} display={'flex'} alignItems={'center'}>\r\n                                <Typography variant='h6'>\r\n                                    Cotizaciones pendientes\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box mt={2} textAlign=\"right\">\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {moment().format('L')}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {moment().format('LT')} hrs.\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {sesion?.nombre}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja }\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box  p={3} >\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={() => setOpen(!open)} size=\"medium\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n\t\t\t\t</AppBar>\r\n                <CotizacionesPendientes setOpen={setOpen} /> \r\n            </Dialog>\r\n        </>\r\n    );\r\n}\r\n","import React, { useState, useContext, Fragment, useEffect} from 'react';\r\nimport { Divider, BottomNavigation, Button } from '@material-ui/core';\r\nimport {  Avatar, Box, Typography } from '@material-ui/core';\r\nimport { withRouter } from 'react-router';\r\nimport { FaPowerOff } from 'react-icons/fa';\r\nimport useStyles from './styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\n\r\nimport DepositoRetiroCaja from '../../pages/ventas/Operaciones/DepositoRetiroCaja';\r\nimport Turnos from '../../pages/ventas/AbrirCerrarTurno/Turnos';\r\nimport PreCorteCaja from '../../pages/ventas/Operaciones/PreCorteCaja';\r\nimport VentaEnEspera from '../../pages/ventas/Operaciones/VentaEnEspera';\r\nimport ProductoRapidoIndex from '../../pages/ventas/ArticuloRapido/indexArticuloRapido';\r\n\r\nimport SnackBarMessages from '../SnackBarMessages';\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\nimport Acceso from '../AccesosPassword/Acceso';\r\nimport { AccesosContext } from '../../context/Accesos/accesosCtx';\r\nimport ListaCotizaciones from '../../pages/ventas/Cotizacion/ListaCotizaciones';\r\n\r\nfunction NavegacionVentas(props) {\r\n\r\n\tconst { \r\n\t\talert, \r\n\t\tsetAlert, \r\n\t\tabrirTurnosDialog, \r\n\t\tsetAbrirTurnosDialog, \r\n\t\tsetUbicacionTurno,\r\n\t} = useContext(VentasContext);\r\n\r\n\tconst { \r\n\t\treloadAdministrador, \r\n        setReloadAdministrador,\r\n\t\tsetAbrirPanelAcceso,\r\n\t\tabrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\r\n\tconst classes = useStyles();\r\n\tconst [ value, setValue ] = useState('venta-general');\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n\tmoment.locale('es');\r\n\r\n\tconst signOut = () => {\r\n\t\tif (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n\t\t\tsetAbrirTurnosDialog(!abrirTurnosDialog);\r\n\t\t\tsetUbicacionTurno('SESION');\r\n\t\t}else{\r\n\t\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\t\tlocalStorage.removeItem('tokenCafi');\r\n            localStorage.removeItem('DatosVentas');\r\n\t\t\tlocalStorage.removeItem('turnoEnCurso');\r\n\t\t\tlocalStorage.removeItem('ListaEnEspera');\r\n\t\t\tprops.history.push('/');\r\n\t\t}\r\n\t};\r\n\r\n\tfunction Mi_función(e){\r\n\t\tif( e.keyCode === 112){ \r\n\t\t\tAdministrador();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction Administrador() {\r\n\t\tif(sesion.accesos.ventas.administrador.ver === true){\r\n\t\t\tprops.history.push('/admin');\r\n\t\t}else{\r\n\t\t\tsetAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\tsetDepartamentos({departamento: 'ventas', subDepartamento: 'administrador', tipo_acceso: 'ver'})\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (reloadAdministrador === true) {\t\t\t\r\n\t\t\tprops.history.push('/admin');\t\r\n\t\t\tsetReloadAdministrador(false);\r\n\t\t}\r\n\t}, [reloadAdministrador]);\r\n\r\n\twindow.addEventListener('keydown', Mi_función); \r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Acceso setReloadAdministrador={setReloadAdministrador} />\r\n\t\t\t<SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t\t<BottomNavigation\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(event, newValue) => {\r\n\t\t\t\t\t\tsetValue(newValue);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tshowLabels\r\n\t\t\t\t\tclassName={classes.navigationTop}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ProductoRapidoIndex />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<ListaCotizaciones /> \r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<DepositoRetiroCaja />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Turnos />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<PreCorteCaja />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<VentaEnEspera />\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => Administrador()}\r\n\t\t\t\t\t\tstyle={{textTransform: 'none', height: '100%', width: '60%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\tsrc='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/admin.svg' \r\n\t\t\t\t\t\t\t\t\talt=\"icono admin\" \r\n\t\t\t\t\t\t\t\t\tclassName={classes.iconSizeSecondSuperior} \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t\t\t<b>Administrador</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\" style={{color: '#808080'}} >\r\n\t\t\t\t\t\t\t\t\t<b>F1</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() =>{\r\n\t\t\t\t\t\t\tsignOut()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tstyle={{textTransform: 'none', height: '100%', width: '40%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" style={{textTransform: 'none', height: '100%', width: '100%'}}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<FaPowerOff className={classes.iconSizeSuperior} style={{color: 'red'}} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t\t\t<b>Salir</b>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"flex-end\"\r\n\t\t\t\t\t\tstyle={{height: '100%', width: '100%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box mr={3} display=\"flex\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Avatar alt=\"Remy Sharp\" srsc=\"/static/images/avatar/1.jpg\" className={classes.avatar} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">{sesion?.nombre}</Typography>\r\n\t\t\t\t\t\t\t\t\t{!turnoEnCurso?.numero_caja ? (\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Caja: </b>{turnoEnCurso?.numero_caja}\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box mr={3} display=\"flex\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/calendario.svg' alt=\"icono admin\" className={classes.avatar} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t{moment().format('MM/DD/YYYY')}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t\t\t<b>{moment().format('h:mm')} hrs.</b> \r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</BottomNavigation>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(NavegacionVentas);","import React, { useState } from 'react';\r\nimport { Box, Button,  Dialog, DialogActions, DialogContent, Slide, Typography } from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport { FcDonate } from 'react-icons/fc';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Abonos() {\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n    \r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 117){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcDonate style={{fontSize: 35}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Abonos</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F6</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    Abonitos\r\n                </DialogContent>\r\n                <DialogActions>\r\n\r\n                </DialogActions>\r\n\r\n            </Dialog>\r\n            \r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, CircularProgress } from '@material-ui/core';\r\n\r\nconst columns = [\r\n\t{ id: 'clave', label: 'Clave', minWidth: 40, align: 'center' },\r\n\t{ id: 'codigo', label: 'C. Barras', minWidth: 40, align: 'center' },\r\n\t{ id: 'descripcion', label: 'Nombre/Descrip.', minWidth: 330 },\r\n\t{ id: 'existencia', label: 'Exist.', minWidth: 30, align: 'center'},\r\n\t{ id: 'unidad', label: 'Unidad', minWidth: 30, align: 'center'},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 30, align: 'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\tmarginTop: 15\r\n\t},\r\n\tcontainer: {\r\n\t\theight: '40vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaProductos({\r\n\tproductosBusqueda, \r\n\tsetProductoSeleccionado, \r\n\tloading\r\n}) {\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tif (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productosBusqueda?.map((producto) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsProductos \r\n\t\t\t\t\t\t\t\t\tproducto={producto}\r\n\t\t\t\t\t\t\t\t\tsetProductoSeleccionado={setProductoSeleccionado}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nfunction RowsProductos({producto, setProductoSeleccionado}) {\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\trole=\"checkbox\" \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={producto._id}\r\n\t\t\t\tonClick={() => setProductoSeleccionado(producto)}\r\n\t\t\t>\r\n\t\t\t\t<TableCell align=\"center\" >\r\n\t\t\t\t\t{producto.id_producto.datos_generales.clave_alterna}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.id_producto.datos_generales.codigo_barras}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell >\r\n\t\t\t\t\t{producto.id_producto.datos_generales.nombre_comercial}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.cantidad}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.unidad}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t{producto.precio}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</>\t\r\n\t);\r\n\t\r\n}","import React from 'react';\r\nimport useStyles from '../styles';\r\n\r\nimport {\r\n    TableContainer,\r\n    Table,\r\n    Box,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    Grid,\r\n    Typography} from '@material-ui/core'\r\n\r\nexport default function InformacionProducto({productoSeleccionado}) {\r\n\r\n    const classes = useStyles();\r\n\r\n    if (!productoSeleccionado) return null;\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item lg={12}>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <b>Nombre:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.id_producto?.datos_generales?.nombre_comercial}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            <b>Codigo Barras:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.codigo_barras}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Cantidad:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.cantidad}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Unidad:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.unidad}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>Descuento:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.descuento ? productoSeleccionado?.descuento.precio_neto : 0}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"70%\">\r\n                        <Typography>\r\n                            <b>% Descuento:</b>\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <Typography>\r\n                                {productoSeleccionado?.descuento ? productoSeleccionado?.descuento.precio_neto : 0}\r\n                            </Typography>\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n            </Grid>\r\n            <Grid item lg={12}>\r\n                <PreciosDeVentaCompras precios={productoSeleccionado?.id_producto?.precios?.precios_producto} />\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\n\r\nfunction PreciosDeVentaCompras({precios}) {\r\n\r\n    return (\r\n      <div>\r\n        <TableContainer>\r\n          <Table aria-label=\"simple table\" size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n                {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                  <TableCell style={{ minWidth: 100 }} key={index}>\r\n                    {numero}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {[\"Precio de venta\"].map((tipo, index) => (\r\n                <TableRow key={index}>\r\n                  <TableCell style={{ border: 0 }}>\r\n                    <b>{tipo}</b>\r\n                  </TableCell>\r\n                  {precios?.map((data, index) => (\r\n                    <TableCell key={index} style={{ border: 0 }}>{data?.precio_neto}</TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </div>\r\n    );\r\n  }\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { Box, Button, DialogActions, Dialog, \r\n        DialogContent, Divider, Grid, \r\n        Typography, Slide, InputBase, Paper, \r\n        IconButton} from '@material-ui/core'\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\nimport useStyles from '../styles';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { FcSearch } from 'react-icons/fc';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaProductos from './ListaProductos';\r\nimport { useQuery } from '@apollo/client';\r\nimport { CONSULTA_PRODUCTOS_VENTAS } from '../../../gql/Ventas/ventas_generales';\r\nimport InformacionProducto from './InformacionProducto';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { calculatePrices2, findProductArray, verifiPrising } from '../../../config/reuserFunctions';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function BuscarProducto() {\r\n    const classes = useStyles();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const {\r\n        updateTablaVentas,\r\n        setUpdateTablaVentas,\r\n        DatosVentasActual, \r\n        setDatosVentasActual\r\n      } = useContext(VentasContext);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [ searchProducto, setSearchProducto ] = useState([]);\r\n    const [ productoSeleccionado, setProductoSeleccionado ] = useState([]);\r\n    const [granelBase, setGranelBase] = useState({\r\n        granel: false,\r\n        valor: 0,\r\n    });\r\n\r\n    const [ value ] = useDebounce(searchProducto, 500);\r\n\r\n    const { data, refetch, loading } = useQuery(CONSULTA_PRODUCTOS_VENTAS, {\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n            input: {\r\n                producto: value.producto ? value.producto : \"\"\r\n            }\r\n\t\t}\r\n\t});\r\n\r\n    let productosBusqueda = [];\r\n\r\n    if(data) productosBusqueda = data.obtenerProductosVentas;\r\n\r\n    const obtenerDatos = (e) => {\r\n        setSearchProducto({...searchProducto, [e.target.name]: e.target.value})\r\n    };\r\n\r\n    const keyUpEvent = async (e) => {\r\n        if (e.code === \"Enter\" || e.code === \"NumpadEnter\") {\r\n            setSearchProducto({...searchProducto, [e.target.name]: e.target.value});\r\n            refetch();\r\n        }   \r\n    };\r\n\r\n    const handleClickOpen = () => { \r\n        setProductoSeleccionado([]);\r\n        refetch();\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 80){ \r\n            handleClickOpen();\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        setGranelBase({\r\n            granel: false,\r\n            valor: 0,\r\n        });\r\n    }, [])\r\n    \r\n    const agregarProductos = async (producto) => {\r\n        let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n        let productosVentas = venta === null ? [] : venta.productos;\r\n        let venta_actual = venta === null ? [] : venta;\r\n        let venta_existente =\r\n          venta === null\r\n            ? {\r\n                subTotal: 0,\r\n                total: 0,\r\n                impuestos: 0,\r\n                iva: 0,\r\n                ieps: 0,\r\n                descuento: 0,\r\n                monedero: 0,\r\n              }\r\n            : venta;\r\n    \r\n        let productosVentasTemp = productosVentas;\r\n    \r\n        let CalculosData = {\r\n          subTotal: 0,\r\n          total: 0,\r\n          impuestos: 0,\r\n          iva: 0,\r\n          ieps: 0,\r\n          descuento: 0,\r\n          monedero: 0,\r\n        };\r\n    \r\n        const producto_encontrado = await findProductArray(producto);\r\n    \r\n        if (!producto_encontrado.found && producto._id) {\r\n          const newP = { ...producto };\r\n          //Tomar el precio con descuento o normal\r\n          const productoPrecioFinal = newP.descuento_activo\r\n            ? newP.descuento.precio_neto\r\n            : newP.precio_unidad.precio_neto;\r\n    \r\n          const new_prices = await calculatePrices2({\r\n            newP,\r\n            cantidad: 0,\r\n            granel: granelBase,\r\n            origen: \"Ventas1\",\r\n            precio_boolean: false,\r\n          });\r\n    \r\n          new_prices.newP.precio_anterior = productoPrecioFinal;\r\n    \r\n          new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n          new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n          new_prices.newP.impuestos_total_producto = parseFloat(\r\n            new_prices.impuestoCalculo\r\n          );\r\n          new_prices.newP.subtotal_total_producto = parseFloat(\r\n            new_prices.subtotalCalculo\r\n          );\r\n          new_prices.newP.total_total_producto = parseFloat(\r\n            new_prices.totalCalculo\r\n          );\r\n    \r\n        //   console.log(new_prices.newP);\r\n    \r\n          productosVentasTemp.push(new_prices.newP);\r\n    \r\n          CalculosData = {\r\n            subTotal:\r\n              parseFloat(venta_existente.subTotal) +\r\n              parseFloat(new_prices.subtotalCalculo),\r\n            total:\r\n              parseFloat(venta_existente.total) +\r\n              parseFloat(new_prices.totalCalculo),\r\n            impuestos:\r\n              parseFloat(venta_existente.impuestos) +\r\n              parseFloat(new_prices.impuestoCalculo),\r\n            iva:\r\n              parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n            ieps:\r\n              parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n            descuento:\r\n              parseFloat(venta_existente.descuento) +\r\n              parseFloat(new_prices.descuentoCalculo),\r\n            monedero:\r\n              parseFloat(venta_existente.monedero) +\r\n              parseFloat(new_prices.monederoCalculo),\r\n          };\r\n        } else if (producto_encontrado.found && producto._id) {\r\n          const { cantidad_venta, ...newP } =\r\n            producto_encontrado.producto_found.producto;\r\n    \r\n          newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n    \r\n          const verify_prising = await verifiPrising(newP);\r\n    \r\n        //   console.log(verify_prising);\r\n    \r\n          //Verificar si el precio fue encontrado\r\n          if (verify_prising.found) {\r\n            const calculo_resta = await calculatePrices2({\r\n              newP,\r\n              cantidad_venta,\r\n              granel: newP.granel_producto,\r\n              origen: \"\",\r\n              precio_boolean: true,\r\n              precio: newP.precio_actual_object,\r\n            });\r\n    \r\n            const calculo_sumar = await calculatePrices2({\r\n              newP,\r\n              cantidad_venta: newP.cantidad_venta,\r\n              granel: newP.granel_producto,\r\n              origen: \"\",\r\n              precio_boolean: true,\r\n              precio: verify_prising.object_prising,\r\n            });\r\n    \r\n            newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n            newP.precio_anterior = newP.precio_actual_producto;\r\n            newP.precio_actual_producto = verify_prising.pricing;\r\n    \r\n            // console.log(calculo_sumar);\r\n    \r\n            newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n            newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n            newP.impuestos_total_producto = parseFloat(\r\n              calculo_sumar.impuestoCalculo\r\n            );\r\n            newP.subtotal_total_producto = parseFloat(\r\n              calculo_sumar.subtotalCalculo\r\n            );\r\n            newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n    \r\n            // console.log(newP);\r\n    \r\n            newP.precio_actual_object = {\r\n              cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n                ? verify_prising.object_prising.cantidad_unidad\r\n                : null,\r\n              numero_precio: verify_prising.object_prising.numero_precio\r\n                ? verify_prising.object_prising.numero_precio\r\n                : null,\r\n              unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n                ? verify_prising.object_prising.unidad_maxima\r\n                : null,\r\n              precio_general: verify_prising.object_prising.precio_general\r\n                ? verify_prising.object_prising.precio_general\r\n                : null,\r\n              precio_neto: verify_prising.object_prising.precio_neto\r\n                ? verify_prising.object_prising.precio_neto\r\n                : null,\r\n              precio_venta: verify_prising.object_prising.precio_venta\r\n                ? verify_prising.object_prising.precio_venta\r\n                : null,\r\n              iva_precio: verify_prising.object_prising.iva_precio\r\n                ? verify_prising.object_prising.iva_precio\r\n                : null,\r\n              ieps_precio: verify_prising.object_prising.ieps_precio\r\n                ? verify_prising.object_prising.ieps_precio\r\n                : null,\r\n              utilidad: verify_prising.object_prising.utilidad\r\n                ? verify_prising.object_prising.utilidad\r\n                : null,\r\n              porciento: verify_prising.object_prising.porciento\r\n                ? verify_prising.object_prising.porciento\r\n                : null,\r\n              dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n                ? verify_prising.object_prising.dinero_descontado\r\n                : null,\r\n            };\r\n    \r\n            productosVentasTemp.splice(\r\n              producto_encontrado.producto_found.index,\r\n              1,\r\n              newP\r\n            );\r\n    \r\n            CalculosData = {\r\n              subTotal:\r\n                parseFloat(venta_existente.subTotal) -\r\n                parseFloat(calculo_resta.subtotalCalculo) +\r\n                calculo_sumar.subtotalCalculo,\r\n              total:\r\n                parseFloat(venta_existente.total) -\r\n                parseFloat(calculo_resta.totalCalculo) +\r\n                calculo_sumar.totalCalculo,\r\n              impuestos:\r\n                parseFloat(venta_existente.impuestos) -\r\n                parseFloat(calculo_resta.impuestoCalculo) +\r\n                calculo_sumar.impuestoCalculo,\r\n              iva:\r\n                parseFloat(venta_existente.iva) -\r\n                parseFloat(calculo_resta.ivaCalculo) +\r\n                calculo_sumar.ivaCalculo,\r\n              ieps:\r\n                parseFloat(venta_existente.ieps) -\r\n                parseFloat(calculo_resta.iepsCalculo) +\r\n                calculo_sumar.iepsCalculo,\r\n              descuento:\r\n                parseFloat(venta_existente.descuento) -\r\n                parseFloat(calculo_resta.descuentoCalculo) +\r\n                calculo_sumar.descuentoCalculo,\r\n              monedero:\r\n                parseFloat(venta_existente.monedero) -\r\n                parseFloat(calculo_resta.monederoCalculo) +\r\n                calculo_sumar.monederoCalculo,\r\n            };\r\n          } else {\r\n            // console.log(\"Entro\");\r\n            const productoPrecioFinal = newP.descuento_activo\r\n              ? newP.descuento.precio_neto\r\n              : newP.precio_unidad.precio_neto;\r\n    \r\n            const new_prices = await calculatePrices2({\r\n              newP,\r\n              cantidad: 0,\r\n              granel: granelBase,\r\n              origen: \"Ventas2\",\r\n            });\r\n    \r\n            new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n    \r\n            // console.log(new_prices);\r\n    \r\n            new_prices.newP.iva_total_producto =\r\n              parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n            new_prices.newP.ieps_total_producto =\r\n              parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n            new_prices.newP.impuestos_total_producto =\r\n              parseFloat(new_prices.impuestoCalculo) *\r\n              parseFloat(newP.cantidad_venta);\r\n            new_prices.newP.subtotal_total_producto =\r\n              parseFloat(new_prices.subtotalCalculo) *\r\n              parseFloat(newP.cantidad_venta);\r\n            new_prices.newP.total_total_producto =\r\n              parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n    \r\n            productosVentasTemp.splice(\r\n              producto_encontrado.producto_found.index,\r\n              1,\r\n              new_prices.newP\r\n            );\r\n    \r\n            CalculosData = {\r\n              subTotal:\r\n                parseFloat(venta_existente.subTotal) +\r\n                parseFloat(new_prices.subtotalCalculo),\r\n              total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n              impuestos:\r\n                parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n              iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n              ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n              descuento:\r\n                parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n              monedero:\r\n                parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n            };\r\n          }\r\n        }\r\n    \r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...CalculosData,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n          })\r\n        );\r\n        setDatosVentasActual({\r\n          ...CalculosData,\r\n        });\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        handleClickOpen();\r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcSearch style={{fontSize: 45}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Productos</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + P</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='md'\r\n                fullWidth\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container>\r\n                        <Grid item lg={3}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" width=\"100%\">\r\n                                {productoSeleccionado?.id_producto?.imagenes.length > 0 ? (\r\n                                    <Box className={classes.containerImage}>\r\n                                        <img \r\n                                            alt=\"Imagen producto\" \r\n                                            src={productoSeleccionado?.id_producto?.imagenes[0].url_imagen} \r\n                                            className={classes.imagen}\r\n                                        />\r\n                                    </Box>\r\n                                ) : (\r\n                                    <Box p={8} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                        <PhotoLibraryIcon style={{fontSize: 40}} />\r\n                                    </Box>\r\n                                )}\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item lg={9}>\r\n                            <Box display=\"flex\">\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexGrow={1}\r\n                                >\r\n                                    <Box>\r\n                                        <Typography variant=\"h6\">\r\n                                            Buscar Productos\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box>\r\n                                    <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                        <CloseIcon />\r\n                                    </Button>\r\n                                </Box>\r\n                            </Box>\r\n                            <div className={classes.formInputFlex}>\r\n                                <Box width=\"50%\">\r\n                                    <Paper className={classes.rootBusqueda}>\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            name=\"producto\"\r\n                                            placeholder=\"Buscar producto...\"\r\n                                            onChange={obtenerDatos}\r\n                                            onKeyUp={keyUpEvent}\r\n                                        />\r\n                                        <IconButton >\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </Paper>\r\n                                </Box>\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <InformacionProducto productoSeleccionado={productoSeleccionado} />\r\n                    <Grid>\r\n                        <ListaProductos \r\n                            productosBusqueda={productosBusqueda}\r\n                            setProductoSeleccionado={setProductoSeleccionado}\r\n                            loading={loading}\r\n                        />\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => agregarProductos(productoSeleccionado)} variant=\"contained\" color=\"primary\" size=\"large\">\r\n                        AGREGAR\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  makeStyles,\r\n  Paper,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"../../sucursales/Catalogos/Cliente/ListaClientes\";\r\nimport CrearCliente from \"../../sucursales/Catalogos/Cliente/CrearCliente\";\r\nimport { ClienteProvider } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcBusinessman } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ClientesVentas() {\r\n  const classes = useStyles();\r\n\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 67) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ClienteProvider>\r\n        <Button\r\n          style={{\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            border: \".6px solid #DBDBDB\",\r\n          }}\r\n          onClick={handleClickOpen}\r\n        >\r\n          <Box>\r\n            <Box>\r\n              <FcBusinessman style={{ fontSize: 45 }} />\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"body2\">\r\n                <b>Clientes</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n                <b>aLT + C</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          maxWidth=\"lg\"\r\n          open={open}\r\n          onClose={handleClickOpen}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <DialogContent>\r\n            <Grid container item lg={12}>\r\n              <Box ml={3} display=\"flex\" flexGrow={1} alignItems=\"center\">\r\n                <Box>\r\n                  <FcBusinessman style={{ fontSize: 65 }} />\r\n                </Box>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                  Clientes\r\n                </Typography>\r\n              </Box>\r\n              <Box mr={2}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClickOpen}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n            <Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n              <Box mr={5} minWidth=\"70%\">\r\n                <Paper className={classes.root}>\r\n                  <InputBase\r\n                    fullWidth\r\n                    placeholder=\"Buscar cliente...\"\r\n                    onChange={(e) => setValues(e.target.value)}\r\n                    onKeyPress={pressEnter}\r\n                    value={values}\r\n                  />\r\n                  <IconButton onClick={() => setValues(values)}>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper>\r\n              </Box>\r\n              <CrearCliente\r\n                tipo=\"CLIENTE\"\r\n                accion=\"registrar\"\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Box>\r\n            <Box mx={2}>\r\n              <ListaClientes\r\n                tipo=\"CLIENTE\"\r\n                filtro={values}\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Box>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </ClienteProvider>\r\n    </>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COTIZACION = gql`\r\nmutation crearCotizacion( $input: CrearVentasInput!, $empresa: ID!, $sucursal: ID!, $usuario: ID!, $caja: ID!) {\r\n    crearCotizacion(input: $input, empresa: $empresa, sucursal: $sucursal, usuario: $usuario, caja: $caja, ) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import React, { useContext, useState } from 'react';\r\nimport {\r\n    Box, Button, DialogContent, \r\n    FormControl, Grid, MenuItem, \r\n    Paper, \r\n    Select, Slider, TextField, Typography \r\n} from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport MoneyOffIcon from '@material-ui/icons/MoneyOff';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { CREAR_COTIZACION } from \"../../../gql/Ventas/cotizaciones\";\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { useMutation } from '@apollo/client';\r\nimport { generateCodeNumerico } from '../../../config/reuserFunctions';\r\n\r\nexport default function NuevaCotizacion({ setOpen }) {\r\n    const { setAlert } = useContext(VentasContext);\r\n\r\n    const [ CrearCotizacion ] = useMutation(CREAR_COTIZACION);\r\n\r\n    const datosVentas = JSON.parse(localStorage.getItem('DatosVentas'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const [ newCotizacion, setNewCotizacion ] = useState([]);\r\n    const [ preciosDescuentos, setPreciosDescuentos ] = useState([]);\r\n    const [ totalDescount, setTotalDescount ] = useState(preciosDescuentos ? preciosDescuentos?.descuento_general?.precio_con_descuento : 0);\r\n    const [ value, setValue ] =  useState(preciosDescuentos?.descuento_general?.porciento ? preciosDescuentos?.descuento_general?.porciento : 0);\r\n\r\n    let descuento_general = [];\r\n    var totalCompra = datosVentas?.total;\r\n\r\n    \r\n    const classes = useStyles();\r\n\r\n    const obtenerDatos = (e) => {\r\n        setNewCotizacion({...newCotizacion, [e.target.name]: e.target.value});\r\n    };\r\n    console.log(newCotizacion)\r\n\r\n    const input = {\r\n        folio: generateCodeNumerico(8), \r\n        descuento: datosVentas.descuento,\r\n        ieps: datosVentas.ieps,\r\n        impuestos: datosVentas.impuestos,\r\n        iva: datosVentas.iva,\r\n        monedero: datosVentas.monedero,\r\n        subTotal: datosVentas.subTotal,\r\n        total: datosVentas.total,\r\n        venta_cliente:  datosVentas.cliente ? true : false,\r\n        montos_en_caja: {},\r\n        credito: newCotizacion.tipo_venta === 'CREDITO' ? true : false,\r\n        descuento_general_activo: preciosDescuentos?.descuento_general_activo ? preciosDescuentos?.descuento_general_activo : false,\r\n        decuento_general: preciosDescuentos?.descuento_general ? preciosDescuentos?.descuento_general :\r\n        {\r\n            \"porciento\": 0,\r\n            \"precio_con_descuento\": 0,\r\n            \"cantidad_descontado\": 0\r\n        },\r\n        dias_de_credito_venta: \"\", \r\n        fecha_de_vencimiento_credito: \"\",\r\n        fecha_vencimiento_cotizacion: newCotizacion.fecha_vencimiento,\r\n        cliente: datosVentas.cliente ?  datosVentas.cliente : {},\r\n        productos: datosVentas.productos,\r\n    };\r\n\r\n    const crearCotizacion = async () => {\r\n        try {\r\n            if(!newCotizacion.fecha_vencimiento || !newCotizacion.tipo_venta){\r\n                setAlert({\r\n                    message: `Por favor completa los datos necesarios`,\r\n                    status: \"error\",\r\n                    open: true,\r\n                });\r\n                return null;\r\n            }else{\r\n                const registroCotizacion = await CrearCotizacion({\r\n                    variables: {\r\n                        input,\r\n                        empresa: \"60c120b6a694891f58d32a1d\",\r\n                        sucursal: \"60c8e180340d5d223432a916\",\r\n                        usuario: \"60dde52c5cda9d5510c4b7d0\",\r\n                        caja: \"61a5037918594a4ecdc1c7bf\"\r\n                    }\r\n                });\r\n                console.log(registroCotizacion);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n            if(error.networkError.result){\r\n\t\t\t\tconsole.log(error.networkError.result.errors);\r\n\t\t\t}else if(error.graphQLErrors){\r\n\t\t\t\tconsole.log(error.graphQLErrors.message);\r\n\t\t\t}\r\n\r\n        }\r\n    };\r\n\r\n    function valuetext(e) {\r\n        return `${e}`;\r\n    };\r\n\r\n    const obtenerPorciento = (event, newValue) => {\r\n        setValue(newValue);\r\n        var porcentaje  =  parseFloat((100 - newValue).toFixed(6));\r\n        var descuento = parseFloat((totalCompra * porcentaje / 100).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - descuento).toFixed(6));\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": newValue,\r\n                \"precio_con_descuento\": descuento,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setTotalDescount(descuento);\r\n    };\r\n    \r\n    const obtenerPrecioText = (e) => {\r\n        var valorText = parseFloat(e.target.value);\r\n        setTotalDescount(valorText);\r\n        var porcentaje  = parseFloat(((valorText / totalCompra) * 100).toFixed(6));\r\n        var descuento = parseFloat((100 - porcentaje).toFixed(6));\r\n        var dineroDescontado = parseFloat((totalCompra - valorText).toFixed(6));\r\n\r\n        descuento_general = {\r\n            \"descuento_general_activo\": true,\r\n            \"descuento_general\": {\r\n                \"porciento\": descuento,\r\n                \"precio_con_descuento\": valorText,\r\n                \"cantidad_descontado\": dineroDescontado\r\n            }\r\n        };\r\n        setPreciosDescuentos(descuento_general);\r\n        setValue(descuento);\r\n    };\r\n\r\n    const eliminarDescuento = () => { \r\n        descuento_general = {\r\n            \"descuento_general_activo\": false,\r\n            \"descuento_general\": {\r\n                \"porciento\": 0,\r\n                \"precio_con_descuento\": 0,\r\n                \"cantidad_descontado\": 0\r\n            }\r\n        };\r\n        setValue(0);\r\n        setTotalDescount(0);\r\n        setPreciosDescuentos(descuento_general);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DialogContent style={{padding: 0}} >\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Usuario:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                variant=\"outlined\"\r\n                                onChange={obtenerDatos}\r\n                                value={sesion ? sesion.nombre : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={moment().format('L')}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas.cliente?.nombre_cliente ? datosVentas.cliente?.nombre_cliente : \"Publico General\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Fecha Vencimiento:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                type='date'\r\n                                onChange={obtenerDatos}\r\n                                size=\"small\"\r\n                                name=\"fecha_vencimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </div>\r\n                <div className={classes.formInputFlex}>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            No. Cliente:\r\n                        </Typography>\r\n                        <Box display=\"flex\">\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                disabled={true}\r\n                                onChange={obtenerDatos}\r\n                                variant=\"outlined\"\r\n                                value={datosVentas ? datosVentas.cliente?.numero_cliente : \"\"}\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>\r\n                            Tipo de Venta:\r\n                        </Typography>\r\n                        <FormControl\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                id=\"form-producto-tipo\"\r\n                                onChange={obtenerDatos}\r\n                                name=\"tipo_venta\"\r\n                            >\r\n                                <MenuItem value=''>\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                <MenuItem value='CREDITO'>Credito</MenuItem>\r\n                                <MenuItem value='CONTADO'>Contado</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </div>\r\n                <Grid container>\r\n                    <Grid lg={6}>\r\n                        <Box p={1}>\r\n                            <Paper elevation={3} >\r\n                                <Box p={2} textAlign={'center'}>\r\n                                    <Typography variant=\"h6\">\r\n                                        Agregar descuento total a la venta.\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box textAlign={'center'} p={2}>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"95%\">\r\n                                            <Box display=\"flex\" alignItems=\"center\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={1}>\r\n                                                    <img \r\n                                                        src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png' \r\n                                                        alt=\"icono admin\" \r\n                                                        style={{width: 30}}                                   \r\n                                                    />\r\n                                                </Box>\r\n                                                <Typography variant=\"h6\">\r\n                                                    Porciento descuento\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Box display='flex' justifyContent=\"center\" justifyItems=\"center\" className={classes.rootSlice}>\r\n                                                <Slider\r\n                                                    getAriaValueText={valuetext}\r\n                                                    value={value.toFixed(2)}\r\n                                                    aria-labelledby=\"discrete-slider-small-steps\"\r\n                                                    valueLabelDisplay=\"auto\"\r\n                                                    onChange={obtenerPorciento} \r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\">\r\n                                            <Typography variant=\"h6\" >\r\n                                                Total con descuento:\r\n                                            </Typography>\r\n                                            <Box display=\"flex\">\r\n                                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mr={1}>\r\n                                                    <MoneyOffIcon style={{fontSize: 38, color: \"green\"}} />\r\n                                                </Box>\r\n                                                <TextField\r\n                                                    fullWidth\r\n                                                    size=\"small\"\r\n                                                    type=\"number\"\r\n                                                    name=\"precioConDescuento\"\r\n                                                    onChange={obtenerPrecioText}\r\n                                                    value={totalDescount}\r\n                                                    className={classes.input}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box \r\n                                    p={1}\r\n                                    display=\"flex\"\r\n                                    flexDirection='row-reverse'\r\n                                >\r\n                                    <Button \r\n                                        variant=\"outlined\"\r\n                                        color=\"secondary\"\r\n                                        size=\"large\"\r\n                                        onClick={eliminarDescuento}\r\n                                    >\r\n                                        Eliminar Descuento\r\n                                    </Button>\r\n                                </Box>\r\n                            </Paper>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid lg={6}>\r\n                        <Box mr={2} mt={2}>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>No. Productos: </b> {datosVentas.productos.length}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Sub total:</b> ${datosVentas ? (datosVentas.subTotal).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Impuestos:</b> ${datosVentas ? (datosVentas.impuestos).toFixed(2): 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>I.V.A.:</b> ${datosVentas ? (datosVentas.iva).toFixed(2) : 0}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"row-reverse\" width=\"100%\">\r\n                                <Typography style={{fontSize: 18}}>\r\n                                    <b>Descuento:</b> <b style={{color: \"green\"}}>${preciosDescuentos?.descuento_general ? (preciosDescuentos?.descuento_general?.cantidad_descontado).toFixed(2) : 0} </b>\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n                            <Typography variant=\"h4\">\r\n                                Total: \r\n                                <b style={{color: \"green\"}}>\r\n                                    ${preciosDescuentos?.descuento_general && preciosDescuentos?.descuento_general?.precio_con_descuento > 0? \r\n                                    (preciosDescuentos?.descuento_general?.precio_con_descuento).toFixed(2) : (\r\n                                        datosVentas ? (datosVentas.total).toFixed(2) : 0\r\n                                    )}\r\n                                </b>\r\n                            </Typography>\r\n                            <Box mt={.5} mr={1}>\r\n                                <MonetizationOnIcon style={{fontSize: 37, color: \"green\"}} />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display='flex' justifyContent={'flex-end'}  >\r\n                            <Box mt={6}>\r\n                                <Button\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    size=\"large\"\r\n                                    onClick={crearCotizacion}\r\n                                >\r\n                                    Guardar\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n           \r\n        </>\r\n    )\r\n};","import React, { useContext, useEffect, useState } from 'react'\r\nimport { AppBar, Box, Button, \r\n\t\tDialog, Slide, Typography \r\n} from '@material-ui/core'\r\nimport { FcCurrencyExchange } from 'react-icons/fc';\r\nimport NuevaCotizacion from './NuevaCotizacion';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport useStyles from '../styles';\r\nimport { AccesosContext } from '../../../context/Accesos/accesosCtx';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function Cotizacion({type}) {\r\n\r\n\r\n    moment.locale('es');\r\n\tconst classes = useStyles();\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const datosVentas = JSON.parse(localStorage.getItem('DatosVentas'));\r\n\tconst [tipoVentana, setTipoVentana] = useState(type);\r\n\r\n\tconst { \r\n\t\treloadCrearCotizacion, \r\n        setReloadCrearCotizacion,\r\n\t\tsetAbrirPanelAcceso,\r\n        abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\r\n\tconst { \r\n\t\tsetAlert, \r\n\t} = useContext(VentasContext);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen = (tipo) => {\r\n\t\tif(!datosVentas){\r\n\t\t\tsetAlert({\r\n\t\t\t\tmessage: `Lo sentimos no hay productos que cotizar`,\r\n\t\t\t\tstatus: \"error\",\r\n\t\t\t\topen: true,\r\n\t\t\t});\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\tif(sesion?.accesos.ventas.cotizaciones.ver === true){\r\n\t\t\t\tsetOpen(!open);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('pedir permiso');\r\n\t\t\t\tsetAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\t\tsetDepartamentos({departamento: 'ventas', subDepartamento: 'cotizaciones', tipo_acceso: 'ver'})\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif(reloadCrearCotizacion === true){\r\n\t\t\tsetReloadCrearCotizacion(false);\r\n\t\t\tsetTipoVentana('GENERAR');\r\n\t\t\tsetOpen(!open);\r\n\t\t}\r\n\t}, [reloadCrearCotizacion]);\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 84){ \r\n            handleClickOpen('', false);\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n\t\t\t<Button \r\n\t\t\t\tclassName={classes.borderBotonChico}\r\n\t\t\t\tonClick={() => handleClickOpen(tipoVentana)}\r\n\t\t\t>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<FcCurrencyExchange style={{fontSize: 50}} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" >\r\n\t\t\t\t\t\t\t<b>Generar cotizacion</b>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n        \t<Dialog\r\n\t\t\t\tfullWidth\r\n\t\t\t\topen={open} \r\n\t\t\t\tmaxWidth={ tipoVentana === \"GENERAR\" ? 'md':'lg' }\r\n\t\t\t\tonClose={() => setOpen(false)} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n\t\t\t\t\t<Box display={'flex'}>\r\n                        <Box display='flex' flexGrow={1} >\r\n                            <Box p={2} display={'flex'} alignItems={'center'}>\r\n\t\t\t\t\t\t\t\t<FcCurrencyExchange style={{fontSize: 60}} />\r\n                            </Box>\r\n                            <Box p={1} display={'flex'} alignItems={'center'}>\r\n                                <Typography variant='h6'>\r\n\t\t\t\t\t\t\t\t\tNueva Cotización\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box mt={2} textAlign=\"right\">\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {moment().format('L')}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {moment().format('LT')} hrs.\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    {sesion?.nombre}\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"caption\">\r\n                                    Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja }\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box  p={3} >\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={() => setOpen(!open)} size=\"medium\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Box p={2} >\r\n\t\t\t\t\t<NuevaCotizacion setOpen={setOpen} />\r\n\t\t\t\t</Box>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n};\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Divider, Grid, Slide, Typography } from '@material-ui/core'\r\nimport useStyles from '../styles';\r\nimport { AccesosContext } from '../../../context/Accesos/accesosCtx';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarVenta() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const { \r\n\t\treloadCancelarVenta, \r\n        setReloadCancelarVenta,\r\n\t\tsetAbrirPanelAcceso,\r\n        abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n    \r\n    const handleClickOpen = () => {\r\n        if(sesion.accesos.ventas.cancelar_venta.ver === true){\r\n            setOpen(!open);\r\n        }else{\r\n\t\t\tsetAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\tsetDepartamentos({departamento: 'ventas', subDepartamento: 'cancelar_venta', tipo_acceso: 'ver'})\r\n\t\t}\r\n\t};\r\n    \r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 118){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    useEffect(() => {\r\n\t\tif (reloadCancelarVenta === true) {\t\r\n            setOpen(!open);\r\n\t\t\tsetReloadCancelarVenta(false);\r\n\t\t}\r\n\t}, [reloadCancelarVenta]);\r\n    \r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg' \r\n                            alt=\"icono cancelarventa\" \r\n                            style={{width: 35}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Cancelar Venta</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F7</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            alignItems=\"center\"\r\n                            justifyContent=\"center\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/shopping-cart.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography variant=\"h5\">\r\n                                    Cancelar Venta\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={()=> setOpen(!open)} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Box p={2}>\r\n                        <Typography variant='h5'>\r\n                            ¿Esta seguro que desea cancelar esta venta?\r\n                        </Typography>\r\n                    </Box> \r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={()=>{\r\n                            localStorage.removeItem('DatosVentas');\r\n                            setOpen(!open);\r\n                        }} \r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        size=\"large\"\r\n                        autoFocus\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                    {/* <Button \r\n                        onClick={() => setOpen(!open)} \r\n                        variant=\"contained\" \r\n                        color=\"secondary\"\r\n                        size=\"large\"\r\n                        autoFocus\r\n                    >\r\n                        Cancelar\r\n                    </Button> */}\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Paper,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { FcDonate, FcShop } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CreditCardIcon from \"@material-ui/icons/CreditCard\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { FcBusinessman, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { numerosRandom } from \"../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../pages/sucursales/Facturacion/catalogos\";\r\nimport { CREAR_VENTA } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport moment from \"moment\";\r\n\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CerrarVenta() {\r\n  const classes = useStyles();\r\n  const [cambio, setCambio] = useState(false);\r\n\r\n  const abrirCajon = () => {\r\n    setCambio(!cambio);\r\n  };\r\n  const [open, setOpen] = useState(false);\r\n  const [openModalDescuento, setOpenModalDescuento] = useState(false);\r\n  const [recalcular, setRecalcular] = useState(false);\r\n  //Datos del context\r\n  const { updateTablaVentas, setUpdateTablaVentas, updateClientVenta, setUpdateClientVenta, openBackDrop, setOpenBackDrop } = useContext(VentasContext);\r\n  //States de venta\r\n  const [totalVenta, setTotalVenta] = useState(0);\r\n  const [montoPagado, setMontoPagado] = useState(0);\r\n  const [cambioVenta, setCambioVenta] = useState(0);\r\n  const [datosCliente, setDatosCliente] = useState({});\r\n  const [monedero, setMonedero] = useState(0);\r\n  const [descuentoVenta, setDescuentoVenta] = useState(0);\r\n  const [fechaVencimientoDate, setfechaVencimientoDate] = useState(\"\");\r\n  const [valorPuntoProducto, setValorPuntoProducto] = useState(0.5);\r\n  const [valorFinalCambioPuntos, setValorFinalCambioPuntos] = useState(0);\r\n  const [monederoTotal, setMonederoTotal] = useState(0);\r\n  const [ventaActual, setVentaActual] = useState(0);\r\n  const [editableClient, setEditableClient] = useState(true);\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  //States descuento venta\r\n  const [descuentoAplicarVenta, setDescuentoAplicarVenta] = useState(0);\r\n  const [descuentoPorsentajeVenta, setDescuentoPorsentajeVenta] = useState(0);\r\n\r\n  // const [descuentoAplicadoVenta, setDescuentoAplicadoVenta] = useState(0);\r\n  const [ventaOriginal, setVentaOriginal] = useState(0);\r\n\r\n  const [creditoActivo, setCreditoActivo] = useState(false);\r\n\r\n  //States de los montos a pagar\r\n  const [efectivo, setEfectivo] = useState(0);\r\n  const [tarjeta, setTarjeta] = useState(0);\r\n  const [puntos, setPuntos] = useState(0);\r\n  const [transferencia, setTransferencia] = useState(0);\r\n  const [cheque, setCheque] = useState(0);\r\n\r\n  const [createVenta] = useMutation(CREAR_VENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    setRecalcular(!recalcular);\r\n    //TODO: Guardar la venta original en un context u localstorage por si se quiere resetear el descuento\r\n  };\r\n\r\n  const hancleClickCerrarVentaCambio = () => {\r\n    setCambio(!cambio);\r\n\r\n    //Limpiar el storage de ventas\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        cliente:{},\r\n        venta_cliente: false,\r\n        monedero: 0,\r\n        productos: [],\r\n        total: 0,\r\n        subTotal: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n      })\r\n    );\r\n    //Actualizar la tabla de ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    //Quitar venta a credito\r\n    setCreditoActivo(false);\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const tecla_escape = event.keyCode;\r\n    if (tecla_escape === 27) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const handleClickFinishVenta = async () => {\r\n    try {\r\n      //TODO: Colocar loading en el modal\r\n      setOpenBackDrop(!openBackDrop);\r\n      //Obtener datos del storage\r\n      const sesion = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n      const usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n      //Obtener ventad final\r\n      const ventaFinal = { ...ventaActual };\r\n      //Generar folio\r\n      const folio = numerosRandom(100000000000, 999999999999);\r\n      //Agregar folio venta\r\n      ventaFinal.folio = `${folio}`;\r\n      //Agregar los montos en caja\r\n      const montosEnCaja = {\r\n        monto_efectivo: {\r\n          monto: parseFloat(efectivo),\r\n          metodo_pago: formaPago[0].Value,\r\n        },\r\n        monto_tarjeta_debito: {\r\n          monto: parseFloat(tarjeta),\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_tarjeta_credito: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_creditos: {\r\n          monto: 0,\r\n          metodo_pago: \"\",\r\n        },\r\n        monto_monedero: {\r\n          monto: parseFloat(puntos),\r\n          metodo_pago: formaPago[4].Value,\r\n        },\r\n        monto_transferencia: {\r\n          monto: parseFloat(transferencia),\r\n          metodo_pago: formaPago[2].Value,\r\n        },\r\n        monto_cheques: {\r\n          monto: parseFloat(cheque),\r\n          metodo_pago: formaPago[1].Value,\r\n        },\r\n        monto_vales_despensa: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[6].Value,\r\n        },\r\n      };\r\n      ventaFinal.montos_en_caja = montosEnCaja;\r\n      //Colocamos si es venta a credito\r\n      ventaFinal.credito = visible;\r\n      //Agregar descuentos de ventas\r\n      ventaFinal.descuento_general_activo = false;\r\n      ventaFinal.decuento_general = null;\r\n      //Declarar dias de credito como false\r\n      ventaFinal.dias_de_credito_venta = datosCliente\r\n        ? datosCliente.dias_credito\r\n        : null;\r\n      ventaFinal.fecha_de_vencimiento_credito = fechaVencimientoDate;\r\n      ventaFinal.fecha_vencimiento_cotizacion = null;\r\n      ventaFinal.cambio = cambioVenta;\r\n      //Editar cliente\r\n      ventaFinal.editar_cliente = editableClient;\r\n      //Agregando los puntos finales\r\n      ventaFinal.puntos_totales_venta = monederoTotal;\r\n      //Enviar los datos\r\n      await createVenta({\r\n        variables: {\r\n          input: ventaFinal,\r\n          empresa: sesion.empresa,\r\n          sucursal: sesion.sucursal,\r\n          usuario: usuario._id,\r\n          caja: sesion.id_caja,\r\n        },\r\n      });\r\n      //TODO: Mandar mensaje de error en dado caso de que la venta sea incorrecta\r\n      //Cerrar modal venta\r\n      setOpen(!open);\r\n      //Mandar mensaje de cambio en dado caso de ser correcta\r\n      //Quitar loading\r\n      setOpenBackDrop(false);\r\n      hancleClickCerrarVentaCambio();\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlerChangeValue = (e, location) => {\r\n    switch (location) {\r\n      case \"EFECTIVO\":\r\n        setEfectivo(e.target.value);\r\n        break;\r\n      case \"TARJETA\":\r\n        setTarjeta(e.target.value);\r\n        break;\r\n\r\n      case \"PUNTOS\":\r\n        const valor = e.target.value != \"\" ? parseInt(e.target.value) : 0;\r\n        console.log(e.target.value, valor);\r\n        if (valor <= monederoTotal) {\r\n          const valor2 = valorPuntoProducto * parseFloat(valor);\r\n          setPuntos(valor);\r\n          // setValorFinalCambioPuntos(valor2);\r\n          setEfectivo(efectivo - valor2);\r\n          setTotalVenta(totalVenta - valor2);\r\n          // console.log(\"Valor efectivo >>> \", efectivo);\r\n          // console.log(\"Valor2 >>\", valor2);\r\n          // console.log(\"Faltante >>> \",efectivo - valor2);\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        setTransferencia(e.target.value);\r\n        break;\r\n      case \"CHEQUE\":\r\n        setCheque(e.target.value);\r\n        break;\r\n      default:\r\n        return alert(\"Error de pago\");\r\n    }\r\n  };\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const handlerChangeDiscountVenta = (e) => {\r\n    const valor = e.target.value;\r\n    setDescuentoAplicarVenta(valor);\r\n    setDescuentoPorsentajeVenta(0);\r\n    if (valor !== \"\") {\r\n      const ventaSubtotal = ventaActual.subTotal;\r\n      const descuento =\r\n        ((ventaSubtotal - parseFloat(valor)) * 100) / ventaActual.subTotal -\r\n        100;\r\n      const positiveDiscount = Math.abs(descuento);\r\n      setDescuentoPorsentajeVenta(parseFloat(positiveDiscount.toFixed(2)));\r\n    }\r\n  };\r\n\r\n  const handleChangePorsentDiscount = (e) => {\r\n    const valor = e.target.value;\r\n    setDescuentoAplicarVenta(0);\r\n    setDescuentoPorsentajeVenta(valor);\r\n    if (valor !== \"\") {\r\n      const ventaSubtotal = ventaActual.subTotal;\r\n      const val =\r\n        valor < 10\r\n          ? parseFloat(`0.0${valor.replace(\".\", \"\")}`)\r\n          : parseFloat(`0.${valor.replace(\".\", \"\")}`);\r\n      const porsent = ventaSubtotal * val;\r\n      setDescuentoAplicarVenta(porsent.toFixed(2));\r\n    }\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = () => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Obtener productos\r\n    const productStorage = ventaActual.productos;\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(descuentoPorsentajeVenta);\r\n      const dineroDescontadoDescuento = parseFloat(\r\n        product.precio_actual_object.precio_venta *\r\n          parseFloat(`0.${porsentajeNewDescuento}`).toFixed(2)\r\n      );\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          product.precio_actual_object.precio_venta - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      );\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(`0.${product.id_producto.precios.iva}`)\r\n        ).toFixed(2)\r\n      );\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(`0.${product.id_producto.precios.ieps}`)\r\n        ).toFixed(2)\r\n      );\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(descuentoPorsentajeVenta)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(descuentoPorsentajeVenta),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto =\r\n        parseFloat(precio_actual_object.dinero_descontado.toFixed(2)) *\r\n        valorGranel *\r\n        product.cantidad_venta;\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n      });\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...venta,\r\n        productos: productosFinal,\r\n        total,\r\n        subTotal,\r\n        impuestos,\r\n        iva,\r\n        ieps,\r\n        descuento,\r\n      })\r\n    );\r\n    setRecalcular(!recalcular);\r\n    setOpenModalDescuento(!openModalDescuento);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    setVentaActual(venta);\r\n\r\n    setVentaOriginal(venta);\r\n    const total = venta === null ? 0 : venta.total;\r\n    const monederoVenta = venta === null ? 0 : venta.monedero;\r\n    const cliente = venta === null ? {} : venta.cliente;\r\n    if (cliente.numero_cliente === undefined) {\r\n      setCreditoActivo(true);\r\n    } else {\r\n      setCreditoActivo(false);\r\n    }\r\n    setValorPuntoProducto(parseFloat(sesion.empresa.valor_puntos));\r\n    setTotalVenta(total.toFixed(2));\r\n    setEfectivo(total.toFixed(2));\r\n    setDatosCliente(cliente);\r\n    setMonedero(parseFloat(monederoVenta));\r\n    setMonederoTotal(\r\n      !cliente.monedero_electronico\r\n        ? parseFloat(monederoVenta)\r\n        : parseFloat(cliente.monedero_electronico) + parseFloat(monederoVenta)\r\n    );\r\n    //Recargar tabla ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  }, [recalcular]);\r\n\r\n  useEffect(() => {\r\n    setfechaVencimientoDate(\r\n      moment()\r\n        .add(\r\n          datosCliente.dias_credito ? parseInt(datosCliente.dias_credito) : 0,\r\n          \"days\"\r\n        )\r\n        .format(\"YYYY-MM-DD\")\r\n    );\r\n  }, [datosCliente, datosCliente.dias_credito]);\r\n\r\n  useEffect(() => {\r\n    setMontoPagado(\r\n      parseFloat(efectivo) +\r\n        parseFloat(tarjeta) +\r\n        parseFloat(valorFinalCambioPuntos) +\r\n        parseFloat(transferencia) +\r\n        parseFloat(cheque)\r\n    );\r\n  }, [efectivo, tarjeta, puntos, transferencia, cheque]);\r\n\r\n  useEffect(() => {\r\n    setCambioVenta(montoPagado - totalVenta);\r\n  }, [montoPagado]);\r\n\r\n  return (\r\n    <>\r\n      <Button className={classes.borderBotonChico} onClick={handleClickOpen}>\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n              alt=\"icono ventas\"\r\n              style={{ width: 38 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pagar</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>ESC</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/cart.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSizeDialogsPequeno}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={1} textAlign=\"center\">\r\n                <Typography variant=\"h4\">Ticket</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Efectivo</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"efectivo\"\r\n                    id=\"form-producto-efectivo\"\r\n                    variant=\"outlined\"\r\n                    value={efectivo}\r\n                    onChange={(e) => handlerChangeValue(e, \"EFECTIVO\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/tarjeta-de-credito.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Tarjeta</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={tarjeta}\r\n                    onChange={(e) => handlerChangeValue(e, \"TARJETA\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box>\r\n                  <FcShop style={{ fontSize: 50, cursor: \"pointer\" }} />\r\n                </Box>\r\n                <Typography variant=\"caption\">Puntos</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={puntos}\r\n                    onChange={(e) => handlerChangeValue(e, \"PUNTOS\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box p={0}>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/transferencia-bancaria.svg\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Transferencia</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={transferencia}\r\n                    onChange={(e) => handlerChangeValue(e, \"TRANSFERENCIA\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box width=\"25%\" textAlign=\"center\">\r\n                <Box p={0}>\r\n                  <img\r\n                    src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/cheque.png\"\r\n                    alt=\"icono ventas\"\r\n                    className={classes.iconSizeDialogsPequeno}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </Box>\r\n                <Typography variant=\"caption\">Cheque</Typography>\r\n                <Box display=\"flex\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-producto-codigo-barras\"\r\n                    variant=\"outlined\"\r\n                    value={cheque}\r\n                    onChange={(e) => handlerChangeValue(e, \"CHEQUE\")}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"70%\" textAlign=\"left\">\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcBusinessman style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Cliente:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">\r\n                    {datosCliente ? datosCliente.nombre_cliente : \"Sin cliente\"}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Puntos Generados:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">{monedero}</Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Puntos Disponibles:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">\r\n                    {!datosCliente.monedero_electronico\r\n                      ? 0\r\n                      : datosCliente.monedero_electronico}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Total puntos:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">{monederoTotal}</Typography>\r\n                </Box>\r\n\r\n                <Box display=\"flex\">\r\n                  <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n                    <Box mt={0.5} mr={0.5}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Valor:</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"subtitle1\">${monederoTotal * valorPuntoProducto}</Typography>\r\n                </Box>\r\n              </Box>\r\n\r\n              <Box width=\"45%\" textAlign=\"right\">\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Monto pagado:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {montoPagado.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Total:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">$ {totalVenta}</Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Descuento:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {descuentoVenta.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Typography style={{ fontSize: \"17px\" }}>\r\n                    <b>Cambio:</b>\r\n                  </Typography>\r\n                  <Typography variant=\"h6\">\r\n                    $ {cambioVenta.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n\r\n            <div style={{ display: visible ? \"block\" : \"none\" }}>\r\n              <div className={classes.formInputFlex}>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Dias de Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.dias_credito === null\r\n                          ? 0\r\n                          : datosCliente.dias_credito\r\n                      }\r\n                      onChange={(e) =>\r\n                        setDatosCliente({\r\n                          ...datosCliente,\r\n                          dias_credito: e.target.value,\r\n                        })\r\n                      }\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Límite de Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.limite_credito === null\r\n                          ? 0\r\n                          : datosCliente.limite_credito\r\n                      }\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Crédito Disponible:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        datosCliente.credito_disponible === null\r\n                          ? 0\r\n                          : datosCliente.credito_disponible\r\n                      }\r\n                      disabled={true}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n\r\n                <Box>\r\n                  <Box width=\"100%\" mt={2.5}>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      variant=\"outlined\"\r\n                      size=\"large\"\r\n                      startIcon={<Edit />}\r\n                      onClick={() => setEditableClient(!editableClient)}\r\n                    >\r\n                      Editar\r\n                    </Button>\r\n                  </Box>\r\n                </Box>\r\n              </div>\r\n              <div className={classes.formInputFlex}>\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Total a Crédito:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      disabled={editableClient}\r\n                      value={totalVenta}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n\r\n                <Box width=\"20%\">\r\n                  <Typography variant=\"caption\">\r\n                    <b>Fecha de Vencimiento:</b>\r\n                  </Typography>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_barras\"\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      type=\"date\"\r\n                      value={fechaVencimientoDate}\r\n                      onChange={(e) => {\r\n                        const modelDate = moment(e.target.value).add(1, \"days\");\r\n                        const hoy = moment();\r\n                        const diasDiff = modelDate.diff(hoy, \"days\");\r\n                        setfechaVencimientoDate(e.target.value);\r\n                        setDatosCliente({\r\n                          ...datosCliente,\r\n                          dias_credito: diasDiff,\r\n                        });\r\n                      }}\r\n                      disabled={editableClient}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n              </div>\r\n            </div>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions style={{ justifyContent: \"space-between\" }}>\r\n          <Box display={\"flex\"} justifyContent=\"flex-start\">\r\n            <Box pr={1}>\r\n              {visible ? (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => {\r\n                    setVisible(!visible);\r\n                    setEditableClient(!editableClient);\r\n                  }}\r\n                  startIcon={<ClearIcon style={{ fontSize: \"28px\" }} />}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => setVisible(!visible)}\r\n                  startIcon={<CreditCardIcon style={{ fontSize: \"28px\" }} />}\r\n                  disabled={creditoActivo}\r\n                >\r\n                  Credito\r\n                </Button>\r\n              )}\r\n            </Box>\r\n\r\n            <Box>\r\n              <Button\r\n                size=\"large\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<LocalOfferIcon style={{ fontSize: \"28px\" }} />}\r\n                onClick={() => setOpenModalDescuento(!openModalDescuento)}\r\n              >\r\n                Descuento\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Button\r\n            onClick={() => {\r\n              handleClickFinishVenta();\r\n            }}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            Terminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={openModalDescuento}\r\n        onClose={abrirCajon}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Box textAlign=\"center\">\r\n              <Typography variant=\"h5\">Descuento</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Grid item lg={12}>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"50%\">\r\n                <Typography variant=\"caption\">\r\n                  <b>Dinero a descontar:</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"dinero-descuento\"\r\n                    id=\"form-venta-dinero-descuento\"\r\n                    value={descuentoAplicarVenta}\r\n                    onChange={(e) => handlerChangeDiscountVenta(e)}\r\n                    variant=\"outlined\"\r\n                    disabled={false}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">$</InputAdornment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n\r\n              <Box width=\"50%\">\r\n                <Typography variant=\"caption\">\r\n                  <b>Porsentaje:</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"codigo_barras\"\r\n                    id=\"form-venta-porsentaje-descuento\"\r\n                    variant=\"outlined\"\r\n                    value={descuentoPorsentajeVenta}\r\n                    onChange={(e) => handleChangePorsentDiscount(e)}\r\n                    type=\"number\"\r\n                    disabled={false}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">%</InputAdornment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </div>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setOpenModalDescuento(!openModalDescuento)}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            autoFocus\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleCalculateNewDiscountVenta()}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={cambio}\r\n        onClose={() => setCambio(!cambio)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Box>\r\n              <FcDonate style={{ fontSize: 80 }} />\r\n            </Box>\r\n            <Box textAlign=\"center\">\r\n              <Typography variant=\"h5\">Su cambio</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Grid item lg={12}>\r\n            <Paper elevation={3}>\r\n              <Box p={3} width=\"100%\" textAlign=\"center\">\r\n                <Typography variant=\"h3\" style={{ color: \"red\" }}>\r\n                  ${cambioVenta.toFixed(2)}\r\n                </Typography>\r\n              </Box>\r\n            </Paper>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setCambio(!cambio)}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button,  CircularProgress,  Dialog,  \r\n        DialogActions, DialogContent, Divider, Grid,  \r\n        IconButton,  InputBase,  Paper,  Slide,  \r\n        Typography \r\n    } from '@material-ui/core';\r\nimport ItemsCarousel from 'react-items-carousel';\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport useStyles from '../styles';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport { Search } from '@material-ui/icons';\r\nimport { useLazyQuery } from '@apollo/client';\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from '../../../gql/Ventas/ventas_generales';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConsultarPrecio() {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n\r\n    const [obtenerProductos, { data, loading }] = useLazyQuery(\r\n        CONSULTA_PRODUCTO_UNITARIO,\r\n        {\r\n          variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n          fetchPolicy: \"network-only\",\r\n        }\r\n    );\r\n\r\n    let productoBase = null;\r\n    if (data) productoBase = data.obtenerUnProductoVentas;\r\n    console.log(data)\r\n\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const classes = useStyles();\r\n\r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n        productoBase = [];\r\n\t};\r\n\r\n    const keyUpEvent = async (event) => {\r\n        if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n            const input_value = event.target.value;\r\n            obtenerProductos({\r\n                variables: {\r\n                    datosProductos: input_value,\r\n                    sucursal: sesion.sucursal._id,\r\n                    empresa: sesion.empresa._id\r\n                },\r\n                fetchPolicy: \"network-only\"\r\n            });\r\n        }\r\n    };\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.keyCode === 120){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n    const chevronWidth = 40;\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <img \r\n                            src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/precios.svg' \r\n                            alt=\"icono ventas\" \r\n                            style={{width: 36}}\r\n                        />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Consultar Precio</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>F9</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n                maxWidth='md'\r\n                fullWidth\r\n                open={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n            >\r\n                <DialogContent\r\n                    open={open} \r\n                    onClose={handleClickOpen} \r\n                    TransitionComponent={Transition}\r\n                >\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\" \r\n                            textAlign=\"center\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/productos.svg' alt=\"icono productos\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h6\">\r\n                                    Precio Producto\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box displa=\"flex\" justifyContent=\"center\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                    </Grid>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"50%\">\r\n                            <Paper className={classes.rootBusquedaProductos}>\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    onKeyUp={keyUpEvent}\r\n                                    placeholder=\"Buscar producto...\"\r\n                                />\r\n                                <IconButton>\r\n                                    <Search />\r\n                                </IconButton>\r\n                            </Paper>\r\n                        </Box>\r\n                    </div>\r\n                    {loading ? (\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            justifyContent=\"center\"\r\n                            alignItems=\"center\"\r\n                            height=\"40vh\"\r\n                        >\r\n                            <CircularProgress />\r\n                        </Box>\r\n                    ) : (<>\r\n                        <Grid container>\r\n                            <Grid item lg={6} md={6}>\r\n                                    {productoBase?.id_producto?.imagenes.length > 0 ? (\r\n                                        <Box p={7}>\r\n                                        <ItemsCarousel\r\n                                            requestToChangeActive={setActiveItemIndex}\r\n                                            activeItemIndex={activeItemIndex}\r\n                                            numberOfCards={1}\r\n                                            leftChevron={\r\n                                                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                                                    <ArrowBackIosIcon />\r\n                                                </IconButton>\r\n                                            }\r\n                                            rightChevron={\r\n                                                <IconButton aria-label=\"delete\" disabled color=\"primary\">\r\n                                                    <ArrowForwardIosIcon />\r\n                                                </IconButton>\r\n                                            }\r\n                                            infiniteLoop={true}\r\n                                            outsideChevron\r\n                                            chevronWidth={chevronWidth}\r\n                                        >\r\n                                            {productoBase?.id_producto?.imagenes.map((image)=>{\r\n                                                return(\r\n                                                    <Box \r\n                                                        className={classes.containerImagenesProducto}\r\n                                                        display=\"flex\"\r\n                                                        justifyContent=\"center\"\r\n                                                        alignItems=\"center\"\r\n                                                    >\r\n                                                        <img \r\n                                                            alt=\"Imagen producto\" \r\n                                                            src={image.url_imagen} \r\n                                                            className={classes.imagenProducto}\r\n                                                        />\r\n                                                    </Box>\r\n                                                )\r\n                                            })}\r\n                                        </ItemsCarousel>\r\n                                        </Box>\r\n                                    ) : (\r\n                                        <Box p={1} mt={15} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                            <PhotoLibraryIcon style={{fontSize: 40}} />\r\n                                        </Box>\r\n                                    )}\r\n                            </Grid>\r\n\r\n                            <Grid item lg={6} md={6}>\r\n                                <Paper elevation={3} className={classes.rootPrecioProductos}>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                <b>{productoBase?.codigo_barras}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography variant=\"h6\">\r\n                                                <b>{productoBase?.id_producto?.datos_generales.nombre_comercial}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography>\r\n                                                {productoBase?.descuento_activo === true ? (<b>Precio Promoción</b>) : null}\r\n                                            </Typography>\r\n                                            <Typography variant=\"h3\">\r\n                                                {productoBase?.descuento_activo === true ? \r\n                                                    (<b style={{color: \"red\"}}>${productoBase?.descuento?.precio_neto.toFixed(2)}</b>) :\r\n                                                    (<b style={{color: \"green\"}}>${productoBase?.precio}</b>)}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    {productoBase?.descuento_activo === true ? (\r\n                                        <div className={classes.formInputFlex}>\r\n                                            <Box width=\"100%\" textAlign=\"center\">\r\n                                                <Typography>\r\n                                                    <b>Precio S/D</b>\r\n                                                </Typography>\r\n                                                <Typography variant=\"h5\" style={{color: \"green\"}}>\r\n                                                    <b> ${productoBase?.precio} </b>\r\n                                                </Typography>\r\n                                            </Box>\r\n                                        </div>\r\n                                    ) : null}\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                Unidad\r\n                                            </Typography>\r\n                                            <Typography >\r\n                                                <b>{productoBase?.unidad}</b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box width=\"100%\" textAlign=\"center\">\r\n                                            <Typography >\r\n                                                Existencia\r\n                                            </Typography>\r\n                                            <Typography >\r\n                                                <b> {productoBase?.inventario_general ? \r\n                                                        productoBase?.inventario_general[0]?.cantidad_existente :\r\n                                                        0\r\n                                                    } \r\n                                                </b>\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                </Paper>\r\n                            </Grid>     \r\n                        </Grid>\r\n                    </>) } \r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button \r\n                        onClick={handleClickOpen} \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        size=\"large\"\r\n                    >\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        \r\n        </>\r\n    )\r\n}\r\n","import React, { useState, useContext, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Paper,\r\n  Slide,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { calculatePrices, findProductArray, calculatePrices2 } from \"../../../config/reuserFunctions\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  \r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreciosProductos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  // const [selected, setSelected] = useState([]);\r\n\r\n  const [preciosProductos, setPreciosProductos] = useState({})\r\n\r\n  const {\r\n    productoCambioPrecio,\r\n    precioSelectProductoVenta,\r\n    setPrecioSelectProductoVenta,\r\n    setUpdateTablaVentas,\r\n    updateTablaVentas\r\n  } = useContext(VentasContext);\r\n\r\n  const { \r\n\t\treloadVerPrecios, \r\n    setReloadVerPrecios,\r\n\t\tsetAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\r\n  const [selectPrisingProduct, setSelectPrisingProduct] = useState(\r\n    precioSelectProductoVenta.length > 0 ? precioSelectProductoVenta[0] : {}\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    if(sesion.accesos.ventas.precios_productos.ver === true){\r\n      setOpen(!open);\r\n    }else{\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({departamento: 'ventas', subDepartamento: 'precios_productos', tipo_acceso: 'ver'})\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPreciosProductos(productoCambioPrecio);\r\n  }, [productoCambioPrecio ]);\r\n\r\n  useEffect(() => {\r\n\t\tif (reloadVerPrecios === true) {\t\r\n      setOpen(!open);\r\n      setReloadVerPrecios(false);\r\n\t\t}\r\n\t}, [reloadVerPrecios]);\r\n\r\n  const handleAceptChangePrising = async () => {\r\n\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? { subTotal: 0, total: 0, impuestos: 0, iva: 0, ieps: 0, descuento: 0, monedero: 0 }\r\n        : venta;\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    if (\r\n      selectPrisingProduct.precio_neto > 0 ||\r\n      precioSelectProductoVenta.length > 0\r\n    ) {\r\n\r\n      const newProductoPrecioNuevo = { ...productoCambioPrecio };\r\n      const newProductoPrecioActual = { ...productoCambioPrecio };\r\n\r\n      const producto_encontrado = await findProductArray(\r\n        productoCambioPrecio\r\n      );\r\n\r\n      if (producto_encontrado.found) {\r\n        const new_resta = await calculatePrices2({\r\n            newP: newProductoPrecioNuevo, \r\n            cantidad: newProductoPrecioNuevo.cantidad_venta, \r\n            precio_boolean: true, \r\n            precio: newProductoPrecioNuevo.precio_actual_object, \r\n            granel: newProductoPrecioNuevo.granel_producto, \r\n            origen: \"\" \r\n          });\r\n\r\n          console.log(precioSelectProductoVenta[0])\r\n        const new_suma = await calculatePrices2({\r\n          newP: newProductoPrecioActual, \r\n          cantidad: newProductoPrecioActual.cantidad_venta, \r\n          precio_boolean: true, \r\n          precio: precioSelectProductoVenta[0], \r\n          granel: newProductoPrecioActual.granel_producto, \r\n          origen: \"Tabla\" \r\n        });\r\n\r\n        newProductoPrecioActual.precio_a_vender = precioSelectProductoVenta[0].precio_neto;\r\n        newProductoPrecioActual.precio_seleccionado = true;\r\n        newProductoPrecioActual.precio_actual_producto = parseFloat((precioSelectProductoVenta[0].precio_neto).toFixed(2));\r\n        newProductoPrecioActual.precio_actual_object = precioSelectProductoVenta[0];\r\n\r\n        newProductoPrecioActual.iva_total_producto = parseFloat(new_suma.ivaCalculo);\r\n        newProductoPrecioActual.ieps_total_producto = parseFloat(new_suma.iepsCalculo);\r\n        newProductoPrecioActual.impuestos_total_producto = parseFloat(new_suma.impuestoCalculo);\r\n        newProductoPrecioActual.subtotal_total_producto = parseFloat(new_suma.subtotalCalculo);\r\n        newProductoPrecioActual.total_total_producto = parseFloat(new_suma.totalCalculo);\r\n\r\n        newProductoPrecioActual.precio_actual_object = {\r\n          cantidad_unidad: precioSelectProductoVenta[0].cantidad_unidad ? precioSelectProductoVenta[0].cantidad_unidad : null,\r\n          numero_precio: precioSelectProductoVenta[0].numero_precio ? precioSelectProductoVenta[0].numero_precio : null,\r\n          unidad_maxima: precioSelectProductoVenta[0].unidad_maxima ? precioSelectProductoVenta[0].unidad_maxima : null,\r\n          precio_general: precioSelectProductoVenta[0].precio_general ? precioSelectProductoVenta[0].precio_general : null,\r\n          precio_neto: precioSelectProductoVenta[0].precio_neto ? precioSelectProductoVenta[0].precio_neto : null,\r\n          precio_venta: precioSelectProductoVenta[0].precio_venta ? precioSelectProductoVenta[0].precio_venta : null,\r\n          iva_precio: precioSelectProductoVenta[0].iva_precio ? precioSelectProductoVenta[0].iva_precio : null,\r\n          ieps_precio: precioSelectProductoVenta[0].ieps_precio ? precioSelectProductoVenta[0].ieps_precio : null,\r\n          utilidad: precioSelectProductoVenta[0].utilidad ? precioSelectProductoVenta[0].utilidad : null,\r\n          porciento: precioSelectProductoVenta[0].porciento ? precioSelectProductoVenta[0].porciento : null,\r\n          dinero_descontado: precioSelectProductoVenta[0].dinero_descontado ? precioSelectProductoVenta[0].dinero_descontado : null,\r\n        };\r\n        \r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newProductoPrecioActual\r\n        );\r\n\r\n        console.log(\"venta >>\", venta_existente.subTotal);\r\n\r\n        console.log(\"resta >>\", new_resta.subtotalCalculo);\r\n\r\n        console.log(\"suma >>\", new_suma.subtotalCalculo)\r\n\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo) +\r\n          new_suma.subtotalCalculo,\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo) +\r\n          new_suma.totalCalculo,\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo) +\r\n          new_suma.impuestoCalculo,\r\n        iva:\r\n          parseFloat(venta_existente.iva) -\r\n          parseFloat(new_resta.ivaCalculo) +\r\n          new_suma.ivaCalculo,\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) -\r\n          parseFloat(new_resta.iepsCalculo) +\r\n          new_suma.iepsCalculo,\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo) +\r\n          new_suma.descuentoCalculo,\r\n        monedero: parseFloat(venta_existente.monedero) - parseFloat(new_resta.monederoCalculo) +\r\n          new_suma.monederoCalculo,\r\n      };\r\n\r\n      //Guardarlo en el localStorage\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      // newProductoPrecio = {...newProductoPrecio};\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n      setPrecioSelectProductoVenta([]);\r\n      setPreciosProductos({});\r\n      //Cerrar modal\r\n      handleClickOpen();\r\n      }else{\r\n        console.log(\"Producto no encontrado\")\r\n      }\r\n    } else {\r\n      setAlert({\r\n        message: \"Este precio no es valido.\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = (precio) => {\r\n    let newSelected = [];\r\n    newSelected = newSelected.concat([], precio);\r\n    setSelectPrisingProduct(precio);\r\n    setPrecioSelectProductoVenta(newSelected);\r\n  };\r\n\r\n  const isSelected = (name) => precioSelectProductoVenta.indexOf(name) !== -1;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 114) {\r\n      handleClickOpen();\r\n    }\r\n  }; \r\n\r\n  return (\r\n    <>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Button className={classes.borderBotonChico} onClick={handleClickOpen}>\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/money.svg\"\r\n              alt=\"icono money\"\r\n              style={{ fontSize: 25 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Precios</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F3</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box display='flex' p={2}> \r\n            <Box flexGrow={1}>\r\n              <Typography variant=\"h6\">Precios de Producto</Typography>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Grid>\r\n            <div className={classes.formInputFlex}>\r\n              <Box width=\"100%\">\r\n                <Typography>\r\n                  Nombre:{\" \"}\r\n                  {productoCambioPrecio\r\n                    ? productoCambioPrecio?.id_producto?.datos_generales\r\n                        ?.nombre_comercial\r\n                    : \"\"}\r\n                </Typography>\r\n              </Box>\r\n            </div>\r\n            <Paper className={classes.root}>\r\n              <TableContainer className={classes.container}>\r\n                <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 25 }}></TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 20 }}>Precio neto</TableCell>\r\n                      <TableCell style={{ width: 200 }}>\r\n                        Unidad mayoreo\r\n                      </TableCell>\r\n                      <TableCell style={{ width: 100 }}>Utilidad</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {preciosProductos?.id_producto?.precios?.precios_producto?.map(\r\n                      (precio, index) => {\r\n                        const isItemSelected = isSelected(precio);\r\n                        const labelId = `enhanced-table-checkbox-${index}`;\r\n                        return (\r\n                          <RenderTableRows\r\n                            key={index}\r\n                            precio={precio}\r\n                            isItemSelected={isItemSelected}\r\n                            labelId={labelId}\r\n                            handleClick={handleClick}\r\n                          />\r\n                        );\r\n                      }\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleAceptChangePrising()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ precio, isItemSelected, labelId, handleClick }) => {\r\n  const doubleClick = (e) => {\r\n    try {\r\n      if (e.detail === 2) {\r\n        handleClick(precio);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={precio.numero_precio}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => doubleClick(e)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              handleClick(precio);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.numero_precio}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.precio_neto > 0 ? precio.precio_neto.toFixed(2) : 0}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.unidad_mayoreo}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.utilidad} %</TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, Dialog, DialogContent, IconButton, Typography } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport { VentasContext } from '../../../context/Ventas/ventasContext';\r\nimport { AccesosContext } from '../../../context/Accesos/accesosCtx';\r\nimport { useEffect } from 'react';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330, align: 'center' },\r\n\t{ id: 'productos', label: 'Productos', minWidth: 20, align: 'center' },\r\n\t{ id: 'total', label: 'Total', minWidth: 200, align: 'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tcontainer: {\r\n\t\theight: \"45vh\",\r\n    \t'& ::-webkit-scrollbar': {\r\n      \t\tdisplay: 'none'\r\n    \t}\r\n\t}\r\n});\r\n\r\nexport default function ListaVentas() {\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tRegresar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{listaEnEspera?.map((row, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<RowsVentas venta={row} index={index} /> \r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\n\r\nconst RowsVentas = ({ venta, index }) => {\r\n\r\n\tconst { \r\n\t\treloadEliminarVentaEspera, \r\n        setReloadEliminarVentaEspera,\r\n\t\tsetAbrirPanelAcceso,\r\n        abrirPanelAcceso,\r\n\t\tsetDepartamentos\r\n\t} = useContext(AccesosContext);\r\n\t\r\n    const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\tconst [ open, setOpen] = useState(false);\r\n\tconst [ keyIndex, setKeyIndex ] = useState('');\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\tlet VentaEnEspera = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n\tfunction borrarVenta(key) {\r\n\t\tif(sesion.accesos.ventas.eliminar_ventas.ver === true){\r\n\t\t\tlistaEnEspera.forEach(function(elemento, indice, array) {\r\n\t\t\t\tif(key === indice){\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t}else{\r\n\t\t\treturn null\r\n\t\t}\r\n    };\r\n\r\n\tconst AgregarVentaDeNuevo = (key) => {\r\n\t\tif(VentaEnEspera === null){\r\n\t\t\tlistaEnEspera.forEach((element, index) => {\r\n\t\t\t\tif (index === key) {\r\n\t\t\t\t\tlocalStorage.setItem(\"DatosVentas\", JSON.stringify(element.VentaEnEspera));\r\n\t\t\t\t\tlistaEnEspera.splice(key, 1);\r\n\t\t\t\t}\r\n\t\t\tlocalStorage.setItem(\"ListaEnEspera\", JSON.stringify(listaEnEspera));\r\n\t\t\t});\r\n\t\t\tsetUpdateTablaVentas(!updateTablaVentas);\r\n\t\t}else{\r\n\t\t\tsetOpen(!open);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n\tconst verificarPermisos = (key) => {\r\n\t\tsetKeyIndex(key)\r\n\t\tif(sesion.accesos.ventas.eliminar_ventas.ver === true){\r\n\t\t\tsetKeyIndex(''); \r\n            borrarVenta(key);\r\n        }else{\r\n\t\t\tsetAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\tsetDepartamentos({departamento: 'ventas', subDepartamento: 'eliminar_ventas', tipo_acceso: 'ver'})\r\n\t\t}\r\n\t};\t\r\n\r\n\tuseEffect(() => {\r\n\t\tif (reloadEliminarVentaEspera === true) {\t\r\n\t\t\tborrarVenta(keyIndex);\r\n\t\t\tsetReloadEliminarVentaEspera(false);\r\n\t\t}\r\n\t}, [reloadEliminarVentaEspera]);\r\n\t\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={index} \r\n\t\t\t>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{index + 1}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.fecha ? venta.fecha : \"\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.cliente ? venta.VentaEnEspera.cliente.nombre_cliente : \"Pub. General\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t{venta.VentaEnEspera.productos.length}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center'>\r\n\t\t\t\t\t$ {(venta.VentaEnEspera.total).toFixed(4)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"regresar\" \r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => AgregarVentaDeNuevo(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AutorenewIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\taria-label=\"delete\" \r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => verificarPermisos(index)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DeleteIcon fontSize=\"medium\" />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tfullWidth\r\n\t\t\t\tmaxWidth='xs'\r\n\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Box p={1} display='flex'>\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\tNo puedes agregar una venta, cuando ya esta una en curso.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent={'flex-end'} p={2}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\r\n\t);\r\n}","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button, Dialog, DialogContent, Divider,Grid, Typography, Slide, Badge } from '@material-ui/core'\r\nimport ListaVentas from './ListaVentas';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function VentasEspera() {\r\n\tlet listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 76){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <Badge \r\n                            badgeContent={listaEnEspera ? listaEnEspera.length : 0 } \r\n                            color=\"primary\" \r\n                            style={{fontSize: 45}}\r\n                        >\r\n                            <img \r\n                                src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' \r\n                                alt=\"icono caja2\" \r\n                                style={{width: 38}} \r\n                            />\r\n                        </Badge>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Ventas en Espera</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + L</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3} >\r\n                                <Typography variant=\"h6\">\r\n                                    Ventas en espera\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            <ListaVentas />\r\n                        </Grid>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { IconButton, TablePagination } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 20, align: 'center' },\r\n\t{ id: 'cliente', label: 'Cliente', minWidth: 330 },\r\n\t{ id: 'fecha', label: 'Fecha.', minWidth: 100, align: 'center'},\r\n\t{ id: 'total', label: 'Total', minWidth: 100, align: 'center'},\r\n];\r\n\r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n\r\nconst rows = [\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n\tcreateData(2, 'Jabon', 50, 10),\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '50vh'\r\n\t}\r\n});\r\n\r\nexport default function ListaVentasRealizadas() {\r\n\tconst classes = useStyles();\r\n\tconst [ page, setPage ] = React.useState(0);\r\n\tconst [ rowsPerPage, setRowsPerPage ] = React.useState(8);\r\n\r\n\tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ width: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = row[column.id];\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{column.format && typeof value === 'number' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn.format(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/>\r\n\t\t</Paper>\r\n\t);\r\n}","import React, { useState } from 'react'\r\nimport useStyles from '../styles';\r\n\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, Divider,Grid, IconButton, InputBase,  Paper, Slide, Typography } from '@material-ui/core'\r\nimport { Search } from '@material-ui/icons';\r\nimport ListaVentasRealizadas from './ListaVentasRealizadas';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { FcPaid, FcSearch } from 'react-icons/fc';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasRealizadas() {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    \r\n    const handleClickOpen = () => { \r\n\t\tsetOpen(!open);\r\n\t};\r\n\r\n    window.addEventListener('keydown', Mi_función); \r\n    function Mi_función(e){\r\n        if(e.altKey && e.keyCode === 86){ \r\n            handleClickOpen();\r\n        } \r\n    };\r\n\r\n    return (\r\n        <>\r\n           <Button \r\n                className={classes.borderBotonChico}\r\n                onClick={handleClickOpen}\r\n            >\r\n                <Box>\r\n                    <Box>\r\n                        <FcSearch style={{fontSize: 45}} />\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"body2\" >\r\n                            <b>Buscar Folio</b>\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <Typography variant=\"caption\" style={{color: '#808080'}} >\r\n                            <b>Alt + V</b>\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Button>\r\n            <Dialog\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\topen={open} \r\n\t\t\t\tonClose={handleClickOpen} \r\n\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t>\r\n\r\n                <DialogContent>\r\n                    <Grid container item lg={12}>\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexGrow={1}\r\n                        >\r\n                            <Box>\r\n                                <img src='https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/lista-de-espera.svg' alt=\"icono caja\" className={classes.iconSizeDialogs} />\r\n                            </Box>\r\n                            <Box m={2} >\r\n                                <Divider orientation=\"vertical\" />\r\n                            </Box>\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"h6\">\r\n                                    Ventas Realizadas\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n                                <CloseIcon />\r\n                            </Button>\r\n                        </Box>\r\n                        </Grid>\r\n                        <Grid>\r\n                            <div className={classes.formInputFlex}>\r\n                                <Box width=\"100%\">\r\n                                    <Paper className={classes.rootBusqueda}>\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            placeholder=\"Buscar venta...\"\r\n                                        />\r\n                                        <IconButton >\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </Paper>\r\n                                </Box>\r\n                            </div>\r\n                            <ListaVentasRealizadas />\r\n                        </Grid>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import { Grid } from '@material-ui/core'\r\nimport React, { Fragment } from 'react'\r\nimport Abonos from '../../pages/ventas/Abonos/Abonos'\r\nimport BuscarProducto from '../../pages/ventas/BuscarProductos/BuscarProducto'\r\nimport ClientesVentas from '../../pages/ventas/ClientesVentas/ClientesVentas'\r\nimport Cotizacion from '../../pages/ventas/Cotizacion/Cotizacion'\r\nimport AbrirCajon from '../../pages/ventas/Operaciones/AbrirCajon'\r\nimport CancelarVenta from '../../pages/ventas/Operaciones/CancelarVenta'\r\nimport CerrarVenta from '../../pages/ventas/Operaciones/CerrarVenta'\r\nimport ConsultarPrecio from '../../pages/ventas/Operaciones/ConsultarPrecio'\r\nimport PreciosProductos from '../../pages/ventas/Operaciones/PreciosProducto'\r\nimport VentasEspera from '../../pages/ventas/VentasEspera/VentasEspera'\r\nimport VentasRealizadas from '../../pages/ventas/VentasRealizadas/VentasRealizadas'\r\nimport useStyles from './styles';\r\n\r\nexport default function NavegacionVentasLateral() {\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <Grid \r\n                container \r\n                className={classes.drawerColor}\r\n            >\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <CerrarVenta />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <BuscarProducto />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <CancelarVenta />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <Cotizacion type='GENERAR' />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <PreciosProductos />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <VentasEspera />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <ClientesVentas />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <VentasRealizadas />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <ConsultarPrecio />\r\n                </Grid>\r\n                <Grid item lg={6} md={6} xs={6}>\r\n                    <Abonos />\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({\r\n  producto,\r\n  setNewProductoVentas,\r\n  newProductoVentas,\r\n  setDatosVentasActual,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    // console.log(producto);\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = productosVentas;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(\r\n      producto\r\n    );\r\n    console.log(\"llego\");\r\n    if (producto_encontrado.found) {\r\n      const { cantidad_venta, ...newP } = producto;\r\n      console.log(\"llego\");\r\n\r\n      // newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n      //Sacar los impuestos que se van a restar\r\n      // let calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\r\n      const new_resta = await calculatePrices2({\r\n        newP: newP,\r\n        cantidad: cantidad_venta,\r\n        precio_boolean: true,\r\n        precio: newP.precio_actual_object,\r\n        granel: newP.granel_producto,\r\n        origen: \"\",\r\n      });\r\n\r\n      productosVentasTemp.splice(producto_encontrado.producto_found.index, 1);\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) - parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) - parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) -\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton size=\"small\" onClick={() => handleToggleModal()}>\r\n        <Delete size=\"small\" color=\"error\" />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, Fragment, useRef, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport EliminarProductoVenta from \"./EliminarProductoVenta\";\r\n\r\nimport { useDebounce } from \"use-debounce\";\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2\r\n} from \"../../config/reuserFunctions\";\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\nimport { Avatar } from \"@material-ui/core\";\r\n\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"Cantidad\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Cantidad\",\r\n    width: 20,\r\n  },\r\n  {\r\n    id: \"Descripcion\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Descripcion\",\r\n    width: 340,\r\n  },\r\n  {\r\n    id: \"Existencias\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Existencias\",\r\n    width: 40,\r\n  },\r\n  {\r\n    id: \"% Desc\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"% Desc\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"U. Venta\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"U. Venta\",\r\n    width: 50,\r\n  },\r\n  {\r\n    id: \"Precio U\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Precio U\",\r\n    width: 100,\r\n  },\r\n  {\r\n    id: \"Eliminar\",\r\n    numeric: true,\r\n    disablePadding: false,\r\n    label: \"Eliminar\",\r\n    width: 10,\r\n  },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"normal\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n            style={{ width: headCell.width }}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"light\"\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h6\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Nutrition\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 7\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  container: {\r\n    height: \"100%\",\r\n    '& ::-webkit-scrollbar': {\r\n      display: 'none'\r\n    }\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n    height: \"55vh\",\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n\r\n}));\r\n\r\nexport default function EnhancedTable({\r\n  setDatosVentasActual,\r\n}) {\r\n  const classes = useStyles();\r\n  const [ selected, setSelected ] = useState([]);\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { setProductoCambioPrecio, setPrecioSelectProductoVenta, updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const [datosTabla, setDatosTabla] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    setDatosTabla(venta === null ? [] : venta.productos);\r\n  }, [updateTablaVentas]);\r\n\r\n  const handleClick = (name) => {\r\n    let newSelected = [];\r\n    const exist = selected.indexOf(name) !== -1;\r\n    if(exist){\r\n      newSelected = [];\r\n    }else{\r\n      newSelected = newSelected.concat([], name);\r\n    } \r\n    const producto = name.id_producto.precios.precios_producto.filter((p) => p.precio_neto === name.precio_actual_producto);\r\n    if(producto.length > 0) setPrecioSelectProductoVenta(producto);\r\n    setProductoCambioPrecio(name);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e, producto) => {\r\n    try {\r\n      let timer;\r\n      clearTimeout(timer);\r\n      if (e.detail === 2) {\r\n        handleClick(producto);\r\n        setProductoCambioPrecio(producto);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const isSelected = (name) => {\r\n    return selected.indexOf(name) !== -1;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{ width: 25, textAlign:\"center\" }}></TableCell>\r\n                <TableCell style={{ width: 20, textAlign:\"center\" }}>Cantidad</TableCell>\r\n                <TableCell style={{ width: 340 }}>Descripcion</TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Exis.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}><b>% Desct.</b></TableCell>\r\n                <TableCell style={{ width: 40, textAlign:\"center\" }}>Rx.</TableCell>\r\n                <TableCell style={{ width: 50, textAlign:\"center\" }}>U. Venta</TableCell>\r\n                <TableCell style={{ width: 100, textAlign:\"center\" }}>Precio U</TableCell>\r\n                <TableCell align=\"center\" style={{ width: 10 }} />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosTabla?.map((producto, index) => {\r\n                const isItemSelected = isSelected(producto);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RenderTableRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    setUpdateTablaVentas={setUpdateTablaVentas}\r\n                    updateTablaVentas={updateTablaVentas}\r\n                    setDatosVentasActual={setDatosVentasActual}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    TwoClickInRowTableBuy={TwoClickInRowTableBuy}\r\n                    setSelected={setSelected}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({\r\n  producto,\r\n  setUpdateTablaVentas,\r\n  updateTablaVentas,\r\n  setDatosVentasActual,\r\n  TwoClickInRowTableBuy,\r\n  handleClick,\r\n  isItemSelected,\r\n  labelId,\r\n  setSelected,\r\n  selected\r\n}) => {\r\n  // const [actuallyProduct, setActuallyProduct] = useState(producto);\r\n  const [newCantidadProduct, setNewCantidadProduct] = useState(\r\n    producto.cantidad_venta\r\n  );\r\n  \r\n  const [ tempAmount, setTempAmount ] = useState(producto.cantidad_venta);\r\n\r\n  const textfield = useRef(null);\r\n  const [value] = useDebounce(newCantidadProduct, 500);\r\n\r\n\r\n  useEffect(() => {\r\n    setTempAmount(producto.cantidad_venta);\r\n  }, [producto.cantidad_venta]);\r\n\r\n  useEffect(() => {\r\n    console.log(value);\r\n    CalculeDataPricing(value);\r\n  }, [value]);\r\n  \r\n\r\n  const calculateNewPricingAmount = (cantidad) => {\r\n    try {\r\n      setTempAmount(cantidad);\r\n      setNewCantidadProduct(cantidad);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const CalculeDataPricing = async (new_cant) => {\r\n    if(new_cant === \"\" || new_cant == 0){\r\n      setTempAmount(producto.cantidad_venta);\r\n    }else{\r\n      let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let productosVentas = venta === null ? [] : venta.productos;\r\n      const venta_actual = venta === null ? [] : venta;\r\n      let productosVentasTemp = productosVentas;\r\n      let venta_existente =\r\n        venta === null\r\n          ? {\r\n              subTotal: 0,\r\n              total: 0,\r\n              impuestos: 0,\r\n              iva: 0,\r\n              ieps: 0,\r\n              descuento: 0,\r\n              monedero: 0\r\n            }\r\n          : venta;\r\n\r\n      let CalculosData = {};\r\n      \r\n      //Buscar y obtener ese producto en el array de ventas\r\n      const producto_encontrado = await findProductArray(\r\n        producto\r\n      );\r\n      \r\n      if (producto_encontrado.found) {\r\n        const { cantidad_venta, ...newP } =\r\n          producto_encontrado.producto_found.producto;\r\n        newP.cantidad_venta = parseInt(new_cant);\r\n        const verify_prising = await verifiPrising(newP);\r\n        const newPrising = verify_prising.found ? verify_prising.object_prising : newP.precio_actual_object;\r\n        \r\n        const new_resta = await calculatePrices2({newP, cantidad: cantidad_venta, precio_boolean: true, precio: newP.precio_actual_object, granel: newP.granel_producto, origen: \"Tabla\" });\r\n        const new_suma = await calculatePrices2({newP, cantidad: parseInt(new_cant), precio_boolean: true, precio: newPrising, granel: newP.granel_producto, origen: \"Tabla\" });\r\n\r\n        console.log(new_resta);\r\n        console.log(new_suma);\r\n\r\n        newP.iva_total_producto = parseFloat(new_suma.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(new_suma.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(new_suma.impuestoCalculo);\r\n        newP.subtotal_total_producto = parseFloat(new_suma.subtotalCalculo);\r\n        newP.total_total_producto = parseFloat(new_suma.totalCalculo);\r\n\r\n        if (verify_prising.found) {\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n          newP.precio_anterior = newP.precio_actual_porducto;\r\n          newP.precio_actual_producto = verify_prising.pricing;\r\n          newP.precio_actual_object = verify_prising.object_prising;\r\n\r\n          newP.precio_actual_object = {\r\n            cantidad_unidad: verify_prising.object_prising.cantidad_unidad ? verify_prising.object_prising.cantidad_unidad : null,\r\n            numero_precio: verify_prising.object_prising.numero_precio ? verify_prising.object_prising.numero_precio : null,\r\n            unidad_maxima: verify_prising.object_prising.unidad_maxima ? verify_prising.object_prising.unidad_maxima : null,\r\n            precio_general: verify_prising.object_prising.precio_general ? verify_prising.object_prising.precio_general : null,\r\n            precio_neto: verify_prising.object_prising.precio_neto ? verify_prising.object_prising.precio_neto : null,\r\n            precio_venta: verify_prising.object_prising.precio_venta ? verify_prising.object_prising.precio_venta : null,\r\n            iva_precio: verify_prising.object_prising.iva_precio ? verify_prising.object_prising.iva_precio : null,\r\n            ieps_precio: verify_prising.object_prising.ieps_precio ? verify_prising.object_prising.ieps_precio : null,\r\n            utilidad: verify_prising.object_prising.utilidad ? verify_prising.object_prising.utilidad : null,\r\n            porciento: verify_prising.object_prising.porciento ? verify_prising.object_prising.porciento : null,\r\n            dinero_descontado: verify_prising.object_prising.dinero_descontado ? verify_prising.object_prising.dinero_descontado : null,\r\n          };\r\n\r\n        }else{\r\n          newP.cantidad_venta = parseInt(new_cant);\r\n          newP.precio_anterior = newP.precio_actual_producto;\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n        }\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n      } else {\r\n        console.log(\"El producto no existe\");\r\n      }\r\n\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...CalculosData,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      //Recargar la tabla de los productos\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        style={{height: '15px'}}\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => TwoClickInRowTableBuy(e,producto)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              if(selected.length > 0) setSelected([]);\r\n              handleClick(producto);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => calculateNewPricingAmount(e.target.value)}\r\n            value={tempAmount}\r\n            type=\"number\"\r\n            name=\"cantidad_venta\"\r\n          />\r\n        </TableCell>\r\n        <TableCell>\r\n          {producto.id_producto.datos_generales.nombre_comercial}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          {producto.concepto === \"medida\"\r\n            ? producto.cantidad\r\n            : producto.inventario_general.map(\r\n                (existencia) => `${existencia.cantidad_existente}`\r\n              )}\r\n        </TableCell>\r\n        <TableCell  style={{ textAlign:\"center\"}} >\r\n          %{\" \"}\r\n          {producto.precio_actual_object.porciento !== null\r\n            ? producto.precio_actual_object.porciento\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.id_producto.datos_generales.receta_farmacia === true\r\n            ? \"Si\"\r\n            : \"No\"}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          {producto.inventario_general.map(\r\n            (existencia) => `${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          $ { producto.precio_actual_object.precio_neto}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign:\"center\"}} >\r\n          <EliminarProductoVenta\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n          />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { TextField } from \"@material-ui/core\";\r\n// import { BlurLinear } from \"@material-ui/icons\";\r\n// import { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from '../../context/Catalogos/crearClienteCtx';\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function ClientesVentas() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { setUpdateClientVenta, updateClientVenta } = useContext(ClienteCtx);\r\n  const { setClientesVentas } = useContext(VentasContext);\r\n\r\n  const [selectClient, setSelectClient] = useState({});\r\n\r\n  // console.log(sesion.empresa._id);\r\n  // console.log(sesion.sucursal._id);\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n\r\n  // console.log(error);\r\n  // console.log(\"data\",data);\r\n  let obtenerClientes = [];\r\n  if (data) obtenerClientes = data.obtenerClientesVentas;\r\n  // console.log(obtenerClientes);\r\n\r\n  useEffect(() => {\r\n    const data = () => {\r\n      // console.log(\"llego al final\");\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      if (venta !== null) {\r\n        if(venta.cliente.nombre_cliente === undefined) {\r\n            setSelectClient('N/A');\r\n        }else{\r\n          setSelectClient(venta.cliente);\r\n          setClientesVentas(venta.cliente);\r\n        }\r\n        refetch();\r\n      }\r\n    }\r\n    data();\r\n  }, [refetch, updateClientVenta]);\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n    try {\r\n      // console.log(value);\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      setSelectClient(value);\r\n      \r\n      // console.log(venta_actual);\r\n      let dataCliente = {\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero: venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          venta_cliente: value === null ? false : true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual. productos : [],\r\n      }\r\n      if(value !== null) dataCliente = {...dataCliente, cliente: value, }\r\n      localStorage.setItem(\"DatosVentas\",JSON.stringify(dataCliente));\r\n      setUpdateClientVenta(!updateClientVenta);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading) return null;\r\n\r\n  return (\r\n    <div>\r\n      <Autocomplete\r\n        id=\"combo-box-producto-codigo\"\r\n        size=\"small\"\r\n        fullWidth\r\n        options={obtenerClientes}\r\n        getOptionLabel={(option) =>\r\n          option.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n        }\r\n        renderInput={(params) => <TextField {...params} variant=\"outlined\" />}\r\n        onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n        getOptionSelected={(option) => option.nombre_cliente}\r\n        value={selectClient ? selectClient : null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  Portal,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"./styles\";\r\n\r\nimport {\r\n  /* FcRating, */ FcBusinessman,\r\n  FcCalendar,\r\n  FcSalesPerformance,\r\n} from \"react-icons/fc\";\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\r\n\r\nimport TablaVentasCheckbox from \"./Tabla_ventas_checkbox\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport ClientesVentas from \"./ClientesVentas\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../components/SnackBarMessages\";\r\n\r\nimport { Fragment } from \"react\";\r\n// import MonedaCambio from \"./Operaciones/MonedaCambio\";\r\nimport Cotizacion from \"./Cotizacion/Cotizacion\";\r\n\r\n// import Backdrop from '@mui/material/Backdrop';\r\n\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\n// import { ClienteProvider } from '../../context/Catalogos/crearClienteCtx';\r\n\r\nexport default function VentasGenerales() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  // const productosVentas = JSON.parse(localStorage.getItem('productosVentas'));\r\n  const classes = useStyles();\r\n  // const [newProductoVentas, setNewProductoVentas] = useState(false);\r\n  const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  });\r\n\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setOpen,\r\n    clientesVentas,\r\n    openBackDrop,\r\n    DatosVentasActual,\r\n    setDatosVentasActual\r\n  } = useContext(VentasContext);\r\n\r\n  // const [DatosVentasActual, setDatosVentasActual] = useState({\r\n  //   subTotal: 0,\r\n  //   total: 0,\r\n  //   impuestos: 0,\r\n  //   iva: 0,\r\n  //   ieps: 0,\r\n  //   descuento: 0,\r\n  //   monedero: 0,\r\n  //   // tipo_cambio: {},\r\n  // });\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [obtenerProductos, { data, loading, error }] = useLazyQuery(\r\n    CONSULTA_PRODUCTO_UNITARIO,\r\n    {\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  const [consultaBase, setConsultaBase] = useState(false);\r\n\r\n  let productosBase = null;\r\n  if (error) {\r\n    console.log(data, loading, error.networkError);\r\n    console.log(data, loading, error.graphQLErrors);\r\n  }\r\n  // console.log(data,loading, error);\r\n  if (data) productosBase = data.obtenerUnProductoVentas;\r\n  // console.log(productosBase);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      if (error.networkError) {\r\n        setAlert({ message: `Error de servidor`, status: \"error\", open: true });\r\n      } else if (error.graphQLErrors) {\r\n        setAlert({\r\n          message: `${error.graphQLErrors[0]?.message}`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n    } else {\r\n      if (productosBase !== null) {\r\n        if (productosBase.cantidad !== null) {\r\n          agregarProductos(productosBase);\r\n        } else {\r\n          setOpen(true);\r\n          setAlert({\r\n            message: `Este producto no existe`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setGranelBase({\r\n      granel: false,\r\n      valor: 0,\r\n    });\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (venta !== null) {\r\n      setDatosVentasActual({\r\n        subTotal: parseFloat(venta.subTotal),\r\n        total: parseFloat(venta.total),\r\n        impuestos: parseFloat(venta.impuestos),\r\n        iva: parseFloat(venta.iva),\r\n        ieps: parseFloat(venta.ieps),\r\n        descuento: parseFloat(venta.descuento),\r\n        monedero: parseFloat(venta.monedero),\r\n      });\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n      const input_value = event.target.value.trim();\r\n      const data = input_value.split(\"*\");\r\n      if (data.length > 1) {\r\n        let data_operation = isNaN(data[0]) ? data[1] : data[0];\r\n        let data_key = isNaN(data[0]) ? data[0] : data[1];\r\n        setGranelBase({\r\n          granel: true,\r\n          valor: parseFloat(data_operation),\r\n        });\r\n        obtenerProductos({\r\n          variables: {\r\n            datosProductos: data_key,\r\n            sucursal: sesion.sucursal._id,\r\n            empresa: sesion.empresa._id,\r\n          },\r\n          fetchPolicy: \"network-only\",\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      } else {\r\n        setGranelBase({\r\n          granel: false,\r\n          valor: 0,\r\n        });\r\n        obtenerProductos({\r\n          variables: {\r\n            datosProductos: input_value,\r\n            sucursal: sesion.sucursal._id,\r\n            empresa: sesion.empresa._id,\r\n          },\r\n          fetchPolicy: \"network-only\",\r\n        });\r\n        setConsultaBase(!consultaBase);\r\n      }\r\n    }\r\n  };\r\n\r\n  const agregarProductos = async (producto) => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granelBase,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      // console.log(new_prices.newP);\r\n\r\n      productosVentasTemp.push(new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const { cantidad_venta, ...newP } =\r\n        producto_encontrado.producto_found.producto;\r\n\r\n      newP.cantidad_venta = parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      // console.log(verify_prising);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: newP.cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        // console.log(calculo_sumar);\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        // console.log(newP);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: 0,\r\n          granel: granelBase,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta);\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        };\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box height=\"9%\">\r\n        <div className={classes.formInputFlex}>\r\n          <Box\r\n            width=\"100%\"\r\n            display=\"flex\"\r\n            justifyItems=\"center\"\r\n            alignSelf=\"center\"\r\n            justifySelf=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box mt={1} mr={1}>\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/busqueda-de-codigos-de-barras.svg\"\r\n                alt=\"iconoBander\"\r\n                className={classes.iconSize}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Paper className={classes.rootBusqueda}>\r\n                <InputBase\r\n                  width=\"100%\"\r\n                  fullWidth\r\n                  placeholder=\"Buscar producto...\"\r\n                  onKeyUp={keyUpEvent}\r\n                />\r\n                <IconButton>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n          <Box\r\n            width=\"100%\"\r\n            display=\"flex\"\r\n            justifyItems=\"center\"\r\n            alignSelf=\"center\"\r\n            justifySelf=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box mt={1} mr={1}>\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/usuarios.svg\"\r\n                alt=\"iconoBander\"\r\n                className={classes.iconSize}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\" alignItems=\"center\">\r\n              <ClientesVentas sesion={sesion} />\r\n              {/* <Paper className={classes.rootBusqueda}>\r\n                  <InputBase fullWidth placeholder=\"Buscar cliente...\" />\r\n                  <IconButton>\r\n                    <Search />\r\n                  </IconButton>\r\n                </Paper> */}\r\n            </Box>\r\n          </Box>\r\n          {/* <Box width=\"100%\">\r\n              <MonedaCambio />\r\n            </Box> */}\r\n          <Box width=\"100%\" display=\"flex\">\r\n            <Box mr={1}>\r\n              <img\r\n                src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/ventas/publicalo.svg\"\r\n                alt=\"iconoBander\"\r\n                className={classes.iconSize}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  id=\"tipo_documento\"\r\n                  value=\"TICKET\"\r\n                  name=\"tipo_documento\"\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Selecciona uno</em>\r\n                  </MenuItem>\r\n                  <MenuItem value=\"TICKET\">TICKET</MenuItem>\r\n                  <MenuItem value=\"FACTURA\">FACTURA</MenuItem>\r\n                  <MenuItem value=\"NOTA REMISION\">NOTA REMISION</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n        </div>\r\n      </Box>\r\n\r\n      <Box height=\"65%\">\r\n        <TablaVentasCheckbox setDatosVentasActual={setDatosVentasActual} />\r\n      </Box>\r\n\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"flex-end\"\r\n        flexDirection=\"column\"\r\n        height=\"25%\"\r\n      >\r\n        <Paper elevantion={3} style={{ padding: 2, marginTop: 2 }}>\r\n          <Grid container>\r\n            <Grid item lg={7}>\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                justifyContent=\"flex-end\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item lg={7}>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Cliente:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.nombre_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcBusinessman style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Cliente.:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.numero_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <AiOutlineFieldNumber style={{ fontSize: 22 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Clave Clte.:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.clave_cliente : \"\"}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FaBarcode style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item lg={5}>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Limite Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          ${clientesVentas ? clientesVentas.limite_credito : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FaMoneyCheckAlt style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  {/* <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <Box>\r\n                          <Typography variant=\"subtitle1\">\r\n                          Descs.: <b style={{fontSize: 16}}>{clientesVentas ? clientesVentas.numero_descuento : 0}%</b>\r\n                          </Typography>\r\n                        </Box>\r\n                        <Box mt={.5} mr={1}>\r\n                          <AiOutlineFieldNumber style={{fontSize: 22}} />\r\n                        </Box>\r\n                      </Box> */}\r\n                  P\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Dias Credito:{\" \"}\r\n                        <b style={{ fontSize: 16 }}>\r\n                          {clientesVentas ? clientesVentas.dias_credito : 0}{\" \"}\r\n                          Dias\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcCalendar style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item lg={5}>\r\n              <Grid container>\r\n                <Grid item lg={7}>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    flexDirection=\"row-reverse\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Monedero :{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual?.monedero?.toFixed(2)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                    </Box>\r\n                  </Box>\r\n                  <Box\r\n                    flexDirection=\"row-reverse\"\r\n                    alignItems=\"center\"\r\n                    display=\"flex\"\r\n                  >\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Descuento:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          $\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual?.descuento?.toFixed(2)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box mt={0.5} mr={1}>\r\n                      <Box\r\n                        display=\"flex\"\r\n                        justifyContent=\"center\"\r\n                        alignItems=\"center\"\r\n                      >\r\n                        <img\r\n                          src=\"https://cafi-sistema-pos.s3.us-west-2.amazonaws.com/Iconos/price-tag.png\"\r\n                          alt=\"icono admin\"\r\n                          style={{ width: 20 }}\r\n                        />\r\n                      </Box>\r\n                    </Box>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item lg={5}>\r\n                  <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Subtotal:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.subTotal\r\n                          ? DatosVentasActual?.subTotal?.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Impuestos:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.impuestos\r\n                          ? DatosVentasActual?.impuestos?.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                  {/* <Box\r\n                        flexDirection=\"row-reverse\"\r\n                        display=\"flex\"\r\n                        mr={1}\r\n                      >\r\n                        <Typography variant=\"subtitle1\" >\r\n                          Iva: <b style={{fontSize: 17}}>$ {DatosVentasActual?.iva ? DatosVentasActual.iva.toFixed(2) : 0}</b>\r\n                        </Typography>\r\n                      </Box> */}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n            <Typography variant=\"h4\">\r\n              Total:{\" \"}\r\n              <b style={{ color: \"green\" }}>\r\n                $\r\n                {DatosVentasActual?.total\r\n                  ? DatosVentasActual?.total.toFixed(2)\r\n                  : 0}\r\n              </b>\r\n            </Typography>\r\n            <Box mt={0.5} mr={1}>\r\n              <MonetizationOnIcon style={{ fontSize: 37, color: \"green\" }} />\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n      <Portal>\r\n        <Backdrop\r\n          style={{zIndex: '99999'}}\r\n          open={openBackDrop}\r\n        >\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n      </Portal>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport VentasGenerales from './VentasGenerales';\r\nimport { ClienteProvider } from '../../context/Catalogos/crearClienteCtx';\r\nimport AbrirTurno from '../ventas/AbrirCerrarTurno/AbrirTurno';\r\nimport { Box, CircularProgress, Grid, Paper, Typography } from '@material-ui/core';\r\nimport { VentasContext } from '../../context/Ventas/ventasContext';\r\n\r\nexport default function VentaIndex() {\r\n\r\n    const { turnoActivo, setTurnoActivo } = useContext(VentasContext);\r\n    const [ varActive, setVarActive ] = useState(false);\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n\r\n    useEffect(() => {\r\n        const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n        setVarActive(sesion.turno_en_caja_activo);\r\n        setTurnoActivo(false);\r\n    }, [ turnoActivo ]);\r\n\r\n    return (\r\n        <ClienteProvider>\r\n            {varActive === true && turnoEnCurso ? (\r\n                <VentasGenerales />\r\n            ) : (\r\n                <AbrirTurnoEnVentas />\r\n            )}\r\n        </ClienteProvider>\r\n    )\r\n};\r\n\r\nfunction AbrirTurnoEnVentas() {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n    return(\r\n        <Grid\r\n            container\r\n            direction=\"row\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n        >\r\n            <Box mt={5} >\r\n                <Paper elevation={5}>\r\n                    <Box p={2} textAlign=\"center\">\r\n                        <Typography variant=\"h6\">\r\n                            Si deseas realizar ventas inicia tu turno primeramente.\r\n                        </Typography>\r\n                    </Box>\r\n                    <AbrirTurno type=\"FRENTE\" setLoading={setLoading} />\r\n                </Paper>\r\n            </Box>\r\n        </Grid>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logochafa.744b44f9.PNG\";","export default __webpack_public_path__ + \"static/media/admin.cecfcd64.svg\";","export default __webpack_public_path__ + \"static/media/cart-add.eacbdb19.svg\";","import { Box, Button, Container, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../img/logochafa.PNG';\r\nimport adminIcon from '../../icons/ventas/admin.svg';\r\nimport cartIcon from '../../icons/ventas/cart-add.svg';\r\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\twidth: 150,\r\n        fontSize: 150\r\n\t},\r\n\r\n}));\r\n\r\nexport default function LayoutHome(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tif (!sesion) props.history.push('/');\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Box height=\"90vh\">\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<img alt=\"logo ab\" src={logo} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" my={6}>\r\n\t\t\t\t\t<Button component={Link} to=\"/admin/inicio\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={adminIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button component={Link} to=\"/ventas/venta-general\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={cartIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tVentas\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n                    <Button color=\"secondary\" onClick={signOut}>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<PowerSettingsNewRoundedIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","//layouts\r\nimport LayoutLogin from '../components/Layouts/LayoutLogin';\r\nimport LayoutAdmin from '../components/Layouts/LayoutAdmin';\r\nimport LayoutVentas from '../components/Layouts/LayoutVentas';\r\nimport LayoutHome from '../components/Layouts/LayoutHome';\r\n\r\n//sucursales pages\r\nimport AdminInicio from '../pages/sucursales/AdminInicio'\r\n\r\n//ventas pages\r\nimport Venta_index from '../pages/ventas/venta_index'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: LayoutLogin,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/home',\r\n\t\tcomponent: LayoutHome,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/admin',\r\n\t\tcomponent: LayoutAdmin,\r\n\t\texact: false,\r\n\t\troutes: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/admin/inicio',\r\n\t\t\t\tcomponent: AdminInicio,\r\n\t\t\t\texact: true,\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: '/ventas/venta-general',\r\n\t\tcomponent: LayoutVentas,\r\n\t\texact: false\r\n\t}\r\n\t\r\n];\r\n\r\nexport default routes;\r\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport { RegProductoProvider } from '../../context/Catalogos/CtxRegProducto';\r\nimport AdminInicio from '../../pages/sucursales/AdminInicio';\r\nimport NavegacionAdmin from '../Navegaciones/NavegacionAdmin';\r\n\r\n\r\nexport default function LayoutAdmin(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<RegProductoProvider>\r\n\t\t\t\t<NavegacionAdmin />\r\n\t\t\t\t<AdminInicio />\r\n\t\t\t</RegProductoProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport NavegacionVentas from '../Navegaciones/NavegacionVentas';\r\nimport NavegacionVentasLateral from '../Navegaciones/NavegacionVentasLateral';\r\nimport { Grid, Box } from '@material-ui/core';\r\nimport { VentasProvider } from '../../context/Ventas/ventasContext';\r\nimport VentaIndex from '../../pages/ventas/venta_index';\r\n\r\nexport default function LayoutVentas(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<Box height='100vh'>\r\n\t\t\t<VentasProvider>\r\n\t\t\t\t<Grid lg={12} style={{height: '10vh'}}>\r\n\t\t\t\t\t<NavegacionVentas />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid container style={{height: '90vh'}}>\r\n\t\t\t\t\t<Grid lg={9}>\r\n\t\t\t\t\t\t<VentaIndex />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid lg={3}>\r\n\t\t\t\t\t\t<NavegacionVentasLateral />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</VentasProvider>\r\n\t\t</Box>\r\n\t);\r\n}","import { blue, grey } from '@material-ui/core/colors';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tnavbar: grey[50],\r\n\t\tprimary: {\r\n\t\t\tmain: blue[500]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#f50057'\r\n\t\t},\r\n\t}\r\n});\r\n\r\nexport default theme;\r\n","import {\r\n  ApolloClient,\r\n  /* createHttpLink, */ InMemoryCache,\r\n} from \"@apollo/client\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\n\r\nconst httpLink = createUploadLink({\r\n\turi: 'https://cafi-punto-venta.herokuapp.com/',\r\n  // uri: 'http://localhost:4000/',\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  connectToDevTools: true,\r\n  cache: new InMemoryCache({\r\n    addTypename: false,\r\n  }),\r\n  link: httpLink,\r\n});\r\n\r\nexport default client;\r\n","import React from 'react';\r\nimport { Box, CssBaseline, ThemeProvider } from '@material-ui/core';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport routes from './config/routes';\r\nimport theme from './config/colors';\r\n\r\nimport client from './config/apollo';\r\nimport { ApolloProvider } from '@apollo/client';\r\nimport { AccesosProvider } from './context/Accesos/accesosCtx';\r\n\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<Box height='100vh' >\r\n\t\t\t<ApolloProvider client={client}>\r\n\t\t\t\t<AccesosProvider>\r\n\t\t\t\t\t<div className=\"App\" >\r\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t\t\t<Switch>{routes.map((route, index) => <RoutesWithSubRoutes key={index} {...route} />)}</Switch>\r\n\t\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t\t</ThemeProvider>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</AccesosProvider>\r\n\t\t\t</ApolloProvider>\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nfunction RoutesWithSubRoutes(route) {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\tpath={route.path}\r\n\t\t\texact={route.exact}\r\n\t\t\trender={(props) => <route.component routes={route.routes} {...props} />}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./index.scss\"\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}